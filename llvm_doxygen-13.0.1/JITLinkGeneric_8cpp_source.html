<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.20"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>LLVM: lib/ExecutionEngine/JITLink/JITLinkGeneric.cpp Source File</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<script type="text/x-mathjax-config">
  MathJax.Hub.Config({
    extensions: ["tex2jax.js"],
    jax: ["input/TeX","output/HTML-CSS"],
});
</script>
<script type="text/javascript" async="async" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.7/MathJax.js/MathJax.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">LLVM
   &#160;<span id="projectnumber">13.0.1</span>
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.20 -->
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',false,false,'search.php','Search');
});
/* @license-end */</script>
<div id="main-nav"></div>
<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="dir_97aefd0d527b934f1d99a682da8fe6a9.html">lib</a></li><li class="navelem"><a class="el" href="dir_9ff4c6dc1720636682ab045c894e9bc5.html">ExecutionEngine</a></li><li class="navelem"><a class="el" href="dir_c0daa9c1887f9b9c5a8c0de610c5601a.html">JITLink</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="headertitle">
<div class="title">JITLinkGeneric.cpp</div>  </div>
</div><!--header-->
<div class="contents">
<a href="JITLinkGeneric_8cpp.html">Go to the documentation of this file.</a><div class="fragment"><div class="line"><a name="l00001"></a><span class="lineno">    1</span>&#160;<span class="comment">//===--------- JITLinkGeneric.cpp - Generic JIT linker utilities ----------===//</span></div>
<div class="line"><a name="l00002"></a><span class="lineno">    2</span>&#160;<span class="comment">//</span></div>
<div class="line"><a name="l00003"></a><span class="lineno">    3</span>&#160;<span class="comment">// Part of the LLVM Project, under the Apache License v2.0 with LLVM Exceptions.</span></div>
<div class="line"><a name="l00004"></a><span class="lineno">    4</span>&#160;<span class="comment">// See https://llvm.org/LICENSE.txt for license information.</span></div>
<div class="line"><a name="l00005"></a><span class="lineno">    5</span>&#160;<span class="comment">// SPDX-License-Identifier: Apache-2.0 WITH LLVM-exception</span></div>
<div class="line"><a name="l00006"></a><span class="lineno">    6</span>&#160;<span class="comment">//</span></div>
<div class="line"><a name="l00007"></a><span class="lineno">    7</span>&#160;<span class="comment">//===----------------------------------------------------------------------===//</span></div>
<div class="line"><a name="l00008"></a><span class="lineno">    8</span>&#160;<span class="comment">//</span></div>
<div class="line"><a name="l00009"></a><span class="lineno">    9</span>&#160;<span class="comment">// Generic JITLinker utility class.</span></div>
<div class="line"><a name="l00010"></a><span class="lineno">   10</span>&#160;<span class="comment">//</span></div>
<div class="line"><a name="l00011"></a><span class="lineno">   11</span>&#160;<span class="comment">//===----------------------------------------------------------------------===//</span></div>
<div class="line"><a name="l00012"></a><span class="lineno">   12</span>&#160; </div>
<div class="line"><a name="l00013"></a><span class="lineno">   13</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="JITLinkGeneric_8h.html">JITLinkGeneric.h</a>&quot;</span></div>
<div class="line"><a name="l00014"></a><span class="lineno">   14</span>&#160; </div>
<div class="line"><a name="l00015"></a><span class="lineno">   15</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="BinaryStreamReader_8h.html">llvm/Support/BinaryStreamReader.h</a>&quot;</span></div>
<div class="line"><a name="l00016"></a><span class="lineno">   16</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="MemoryBuffer_8h.html">llvm/Support/MemoryBuffer.h</a>&quot;</span></div>
<div class="line"><a name="l00017"></a><span class="lineno">   17</span>&#160; </div>
<div class="line"><a name="l00018"></a><span class="lineno"><a class="line" href="JITLinkGeneric_8cpp.html#ad78e062f62e0d6e453941fb4ca843e4d">   18</a></span>&#160;<span class="preprocessor">#define DEBUG_TYPE &quot;jitlink&quot;</span></div>
<div class="line"><a name="l00019"></a><span class="lineno">   19</span>&#160; </div>
<div class="line"><a name="l00020"></a><span class="lineno">   20</span>&#160;<span class="keyword">namespace </span><a class="code" href="namespacellvm.html">llvm</a> {</div>
<div class="line"><a name="l00021"></a><span class="lineno">   21</span>&#160;<span class="keyword">namespace </span>jitlink {</div>
<div class="line"><a name="l00022"></a><span class="lineno">   22</span>&#160; </div>
<div class="line"><a name="l00023"></a><span class="lineno"><a class="line" href="classllvm_1_1jitlink_1_1JITLinkerBase.html#a2b526b4d5dc6f1fb98e8bbcde81af435">   23</a></span>&#160;<a class="code" href="classllvm_1_1jitlink_1_1JITLinkerBase.html#a2b526b4d5dc6f1fb98e8bbcde81af435">JITLinkerBase::~JITLinkerBase</a>() {}</div>
<div class="line"><a name="l00024"></a><span class="lineno">   24</span>&#160; </div>
<div class="line"><a name="l00025"></a><span class="lineno"><a class="line" href="classllvm_1_1jitlink_1_1JITLinkerBase.html#a7eaefb855f3166fb5c460a96a32b5172">   25</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="classllvm_1_1jitlink_1_1JITLinkerBase.html#a7eaefb855f3166fb5c460a96a32b5172">JITLinkerBase::linkPhase1</a>(std::unique_ptr&lt;JITLinkerBase&gt; Self) {</div>
<div class="line"><a name="l00026"></a><span class="lineno">   26</span>&#160; </div>
<div class="line"><a name="l00027"></a><span class="lineno">   27</span>&#160;  <a class="code" href="Debug_8h.html#a08efc68d15935eb8889400a46c3749ba">LLVM_DEBUG</a>({</div>
<div class="line"><a name="l00028"></a><span class="lineno">   28</span>&#160;    <a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <span class="stringliteral">&quot;Starting link phase 1 for graph &quot;</span> &lt;&lt; G-&gt;getName() &lt;&lt; <span class="stringliteral">&quot;\n&quot;</span>;</div>
<div class="line"><a name="l00029"></a><span class="lineno">   29</span>&#160;  });</div>
<div class="line"><a name="l00030"></a><span class="lineno">   30</span>&#160; </div>
<div class="line"><a name="l00031"></a><span class="lineno">   31</span>&#160;  <span class="comment">// Prune and optimize the graph.</span></div>
<div class="line"><a name="l00032"></a><span class="lineno">   32</span>&#160;  <span class="keywordflow">if</span> (<span class="keyword">auto</span> Err = runPasses(Passes.<a class="code" href="structllvm_1_1jitlink_1_1PassConfiguration.html#ad40c7648b8ad38b6d942e7194a4faa34">PrePrunePasses</a>))</div>
<div class="line"><a name="l00033"></a><span class="lineno">   33</span>&#160;    <span class="keywordflow">return</span> Ctx-&gt;notifyFailed(<a class="code" href="lib_2Target_2ARM_2README_8txt.html#ad3a99906764c35b2694ae90fa57744a5">std::move</a>(Err));</div>
<div class="line"><a name="l00034"></a><span class="lineno">   34</span>&#160; </div>
<div class="line"><a name="l00035"></a><span class="lineno">   35</span>&#160;  <a class="code" href="Debug_8h.html#a08efc68d15935eb8889400a46c3749ba">LLVM_DEBUG</a>({</div>
<div class="line"><a name="l00036"></a><span class="lineno">   36</span>&#160;    <a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <span class="stringliteral">&quot;Link graph \&quot;&quot;</span> &lt;&lt; G-&gt;getName() &lt;&lt; <span class="stringliteral">&quot;\&quot; pre-pruning:\n&quot;</span>;</div>
<div class="line"><a name="l00037"></a><span class="lineno">   37</span>&#160;    G-&gt;dump(<a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>());</div>
<div class="line"><a name="l00038"></a><span class="lineno">   38</span>&#160;  });</div>
<div class="line"><a name="l00039"></a><span class="lineno">   39</span>&#160; </div>
<div class="line"><a name="l00040"></a><span class="lineno">   40</span>&#160;  <a class="code" href="namespacellvm_1_1jitlink.html#a9ef4b58ddabf00cc648c69edba3911ee">prune</a>(*G);</div>
<div class="line"><a name="l00041"></a><span class="lineno">   41</span>&#160; </div>
<div class="line"><a name="l00042"></a><span class="lineno">   42</span>&#160;  <a class="code" href="Debug_8h.html#a08efc68d15935eb8889400a46c3749ba">LLVM_DEBUG</a>({</div>
<div class="line"><a name="l00043"></a><span class="lineno">   43</span>&#160;    <a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <span class="stringliteral">&quot;Link graph \&quot;&quot;</span> &lt;&lt; G-&gt;getName() &lt;&lt; <span class="stringliteral">&quot;\&quot; post-pruning:\n&quot;</span>;</div>
<div class="line"><a name="l00044"></a><span class="lineno">   44</span>&#160;    G-&gt;dump(<a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>());</div>
<div class="line"><a name="l00045"></a><span class="lineno">   45</span>&#160;  });</div>
<div class="line"><a name="l00046"></a><span class="lineno">   46</span>&#160; </div>
<div class="line"><a name="l00047"></a><span class="lineno">   47</span>&#160;  <span class="comment">// Run post-pruning passes.</span></div>
<div class="line"><a name="l00048"></a><span class="lineno">   48</span>&#160;  <span class="keywordflow">if</span> (<span class="keyword">auto</span> Err = runPasses(Passes.<a class="code" href="structllvm_1_1jitlink_1_1PassConfiguration.html#ac2b6c33f0953b534738fb8d0a02e526d">PostPrunePasses</a>))</div>
<div class="line"><a name="l00049"></a><span class="lineno">   49</span>&#160;    <span class="keywordflow">return</span> Ctx-&gt;notifyFailed(<a class="code" href="lib_2Target_2ARM_2README_8txt.html#ad3a99906764c35b2694ae90fa57744a5">std::move</a>(Err));</div>
<div class="line"><a name="l00050"></a><span class="lineno">   50</span>&#160; </div>
<div class="line"><a name="l00051"></a><span class="lineno">   51</span>&#160;  <span class="comment">// Sort blocks into segments.</span></div>
<div class="line"><a name="l00052"></a><span class="lineno">   52</span>&#160;  <span class="keyword">auto</span> Layout = layOutBlocks();</div>
<div class="line"><a name="l00053"></a><span class="lineno">   53</span>&#160; </div>
<div class="line"><a name="l00054"></a><span class="lineno">   54</span>&#160;  <span class="comment">// Allocate memory for segments.</span></div>
<div class="line"><a name="l00055"></a><span class="lineno">   55</span>&#160;  <span class="keywordflow">if</span> (<span class="keyword">auto</span> Err = allocateSegments(Layout))</div>
<div class="line"><a name="l00056"></a><span class="lineno">   56</span>&#160;    <span class="keywordflow">return</span> Ctx-&gt;notifyFailed(<a class="code" href="lib_2Target_2ARM_2README_8txt.html#ad3a99906764c35b2694ae90fa57744a5">std::move</a>(Err));</div>
<div class="line"><a name="l00057"></a><span class="lineno">   57</span>&#160; </div>
<div class="line"><a name="l00058"></a><span class="lineno">   58</span>&#160;  <a class="code" href="Debug_8h.html#a08efc68d15935eb8889400a46c3749ba">LLVM_DEBUG</a>({</div>
<div class="line"><a name="l00059"></a><span class="lineno">   59</span>&#160;    <a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <span class="stringliteral">&quot;Link graph \&quot;&quot;</span> &lt;&lt; G-&gt;getName()</div>
<div class="line"><a name="l00060"></a><span class="lineno">   60</span>&#160;           &lt;&lt; <span class="stringliteral">&quot;\&quot; before post-allocation passes:\n&quot;</span>;</div>
<div class="line"><a name="l00061"></a><span class="lineno">   61</span>&#160;    G-&gt;dump(<a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>());</div>
<div class="line"><a name="l00062"></a><span class="lineno">   62</span>&#160;  });</div>
<div class="line"><a name="l00063"></a><span class="lineno">   63</span>&#160; </div>
<div class="line"><a name="l00064"></a><span class="lineno">   64</span>&#160;  <span class="comment">// Run post-allocation passes.</span></div>
<div class="line"><a name="l00065"></a><span class="lineno">   65</span>&#160;  <span class="keywordflow">if</span> (<span class="keyword">auto</span> Err = runPasses(Passes.<a class="code" href="structllvm_1_1jitlink_1_1PassConfiguration.html#a084adb14a6ed485ceafa7aeb5ddcdba9">PostAllocationPasses</a>))</div>
<div class="line"><a name="l00066"></a><span class="lineno">   66</span>&#160;    <span class="keywordflow">return</span> Ctx-&gt;notifyFailed(<a class="code" href="lib_2Target_2ARM_2README_8txt.html#ad3a99906764c35b2694ae90fa57744a5">std::move</a>(Err));</div>
<div class="line"><a name="l00067"></a><span class="lineno">   67</span>&#160; </div>
<div class="line"><a name="l00068"></a><span class="lineno">   68</span>&#160;  <span class="comment">// Notify client that the defined symbols have been assigned addresses.</span></div>
<div class="line"><a name="l00069"></a><span class="lineno">   69</span>&#160;  <a class="code" href="Debug_8h.html#a08efc68d15935eb8889400a46c3749ba">LLVM_DEBUG</a>(<a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <span class="stringliteral">&quot;Resolving symbols defined in &quot;</span> &lt;&lt; G-&gt;getName() &lt;&lt; <span class="stringliteral">&quot;\n&quot;</span>);</div>
<div class="line"><a name="l00070"></a><span class="lineno">   70</span>&#160; </div>
<div class="line"><a name="l00071"></a><span class="lineno">   71</span>&#160;  <span class="keywordflow">if</span> (<span class="keyword">auto</span> Err = Ctx-&gt;notifyResolved(*G))</div>
<div class="line"><a name="l00072"></a><span class="lineno">   72</span>&#160;    <span class="keywordflow">return</span> Ctx-&gt;notifyFailed(<a class="code" href="lib_2Target_2ARM_2README_8txt.html#ad3a99906764c35b2694ae90fa57744a5">std::move</a>(Err));</div>
<div class="line"><a name="l00073"></a><span class="lineno">   73</span>&#160; </div>
<div class="line"><a name="l00074"></a><span class="lineno">   74</span>&#160;  <span class="keyword">auto</span> ExternalSymbols = getExternalSymbolNames();</div>
<div class="line"><a name="l00075"></a><span class="lineno">   75</span>&#160; </div>
<div class="line"><a name="l00076"></a><span class="lineno">   76</span>&#160;  <span class="comment">// If there are no external symbols then proceed immediately with phase 2.</span></div>
<div class="line"><a name="l00077"></a><span class="lineno">   77</span>&#160;  <span class="keywordflow">if</span> (ExternalSymbols.empty()) {</div>
<div class="line"><a name="l00078"></a><span class="lineno">   78</span>&#160;    <a class="code" href="Debug_8h.html#a08efc68d15935eb8889400a46c3749ba">LLVM_DEBUG</a>({</div>
<div class="line"><a name="l00079"></a><span class="lineno">   79</span>&#160;      <a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <span class="stringliteral">&quot;No external symbols for &quot;</span> &lt;&lt; G-&gt;getName()</div>
<div class="line"><a name="l00080"></a><span class="lineno">   80</span>&#160;             &lt;&lt; <span class="stringliteral">&quot;. Proceeding immediately with link phase 2.\n&quot;</span>;</div>
<div class="line"><a name="l00081"></a><span class="lineno">   81</span>&#160;    });</div>
<div class="line"><a name="l00082"></a><span class="lineno">   82</span>&#160;    <span class="comment">// FIXME: Once callee expressions are defined to be sequenced before</span></div>
<div class="line"><a name="l00083"></a><span class="lineno">   83</span>&#160;    <span class="comment">//        argument expressions (c++17) we can simplify this. See below.</span></div>
<div class="line"><a name="l00084"></a><span class="lineno">   84</span>&#160;    <span class="keyword">auto</span> &amp;TmpSelf = *Self;</div>
<div class="line"><a name="l00085"></a><span class="lineno">   85</span>&#160;    TmpSelf.linkPhase2(<a class="code" href="lib_2Target_2ARM_2README_8txt.html#ad3a99906764c35b2694ae90fa57744a5">std::move</a>(Self), <a class="code" href="namespacellvm_1_1jitlink.html#a9d305144843205d0e6972a5a274af489">AsyncLookupResult</a>(), <a class="code" href="lib_2Target_2ARM_2README_8txt.html#ad3a99906764c35b2694ae90fa57744a5">std::move</a>(Layout));</div>
<div class="line"><a name="l00086"></a><span class="lineno">   86</span>&#160;    <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l00087"></a><span class="lineno">   87</span>&#160;  }</div>
<div class="line"><a name="l00088"></a><span class="lineno">   88</span>&#160; </div>
<div class="line"><a name="l00089"></a><span class="lineno">   89</span>&#160;  <span class="comment">// Otherwise look up the externals.</span></div>
<div class="line"><a name="l00090"></a><span class="lineno">   90</span>&#160;  <a class="code" href="Debug_8h.html#a08efc68d15935eb8889400a46c3749ba">LLVM_DEBUG</a>({</div>
<div class="line"><a name="l00091"></a><span class="lineno">   91</span>&#160;    <a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <span class="stringliteral">&quot;Issuing lookup for external symbols for &quot;</span> &lt;&lt; G-&gt;getName()</div>
<div class="line"><a name="l00092"></a><span class="lineno">   92</span>&#160;           &lt;&lt; <span class="stringliteral">&quot; (may trigger materialization/linking of other graphs)...\n&quot;</span>;</div>
<div class="line"><a name="l00093"></a><span class="lineno">   93</span>&#160;  });</div>
<div class="line"><a name="l00094"></a><span class="lineno">   94</span>&#160; </div>
<div class="line"><a name="l00095"></a><span class="lineno">   95</span>&#160;  <span class="comment">// We&#39;re about to hand off ownership of ourself to the continuation. Grab a</span></div>
<div class="line"><a name="l00096"></a><span class="lineno">   96</span>&#160;  <span class="comment">// pointer to the context so that we can call it to initiate the lookup.</span></div>
<div class="line"><a name="l00097"></a><span class="lineno">   97</span>&#160;  <span class="comment">//</span></div>
<div class="line"><a name="l00098"></a><span class="lineno">   98</span>&#160;  <span class="comment">// FIXME: Once callee expressions are defined to be sequenced before argument</span></div>
<div class="line"><a name="l00099"></a><span class="lineno">   99</span>&#160;  <span class="comment">// expressions (c++17) we can simplify all this to:</span></div>
<div class="line"><a name="l00100"></a><span class="lineno">  100</span>&#160;  <span class="comment">//</span></div>
<div class="line"><a name="l00101"></a><span class="lineno">  101</span>&#160;  <span class="comment">// Ctx-&gt;lookup(std::move(UnresolvedExternals),</span></div>
<div class="line"><a name="l00102"></a><span class="lineno">  102</span>&#160;  <span class="comment">//             [Self=std::move(Self)](Expected&lt;AsyncLookupResult&gt; Result) {</span></div>
<div class="line"><a name="l00103"></a><span class="lineno">  103</span>&#160;  <span class="comment">//               Self-&gt;linkPhase2(std::move(Self), std::move(Result));</span></div>
<div class="line"><a name="l00104"></a><span class="lineno">  104</span>&#160;  <span class="comment">//             });</span></div>
<div class="line"><a name="l00105"></a><span class="lineno">  105</span>&#160;  <span class="keyword">auto</span> *TmpCtx = Ctx.get();</div>
<div class="line"><a name="l00106"></a><span class="lineno">  106</span>&#160;  TmpCtx-&gt;lookup(<a class="code" href="lib_2Target_2ARM_2README_8txt.html#ad3a99906764c35b2694ae90fa57744a5">std::move</a>(ExternalSymbols),</div>
<div class="line"><a name="l00107"></a><span class="lineno">  107</span>&#160;                 <a class="code" href="namespacellvm_1_1jitlink.html#a5577d77714131f489520a8852fa99987">createLookupContinuation</a>(</div>
<div class="line"><a name="l00108"></a><span class="lineno">  108</span>&#160;                     [<a class="code" href="lib_2Target_2ARM_2README_8txt.html#a1b45f45820a60c09244a87eb59824aec">S</a> = <a class="code" href="lib_2Target_2ARM_2README_8txt.html#ad3a99906764c35b2694ae90fa57744a5">std::move</a>(Self), L = <a class="code" href="lib_2Target_2ARM_2README_8txt.html#ad3a99906764c35b2694ae90fa57744a5">std::move</a>(Layout)](</div>
<div class="line"><a name="l00109"></a><span class="lineno">  109</span>&#160;                         <a class="code" href="classllvm_1_1Expected.html">Expected&lt;AsyncLookupResult&gt;</a> <a class="code" href="namespacellvm_1_1orc_1_1tpctypes.html#a2cd96ad006903f3841e54f0146bbda88">LookupResult</a>) <span class="keyword">mutable</span> {</div>
<div class="line"><a name="l00110"></a><span class="lineno">  110</span>&#160;                       <span class="keyword">auto</span> &amp;TmpSelf = *<a class="code" href="lib_2Target_2ARM_2README_8txt.html#a1b45f45820a60c09244a87eb59824aec">S</a>;</div>
<div class="line"><a name="l00111"></a><span class="lineno">  111</span>&#160;                       TmpSelf.linkPhase2(<a class="code" href="lib_2Target_2ARM_2README_8txt.html#ad3a99906764c35b2694ae90fa57744a5">std::move</a>(<a class="code" href="lib_2Target_2ARM_2README_8txt.html#a1b45f45820a60c09244a87eb59824aec">S</a>), <a class="code" href="lib_2Target_2ARM_2README_8txt.html#ad3a99906764c35b2694ae90fa57744a5">std::move</a>(<a class="code" href="namespacellvm_1_1orc_1_1tpctypes.html#a2cd96ad006903f3841e54f0146bbda88">LookupResult</a>),</div>
<div class="line"><a name="l00112"></a><span class="lineno">  112</span>&#160;                                          <a class="code" href="lib_2Target_2ARM_2README_8txt.html#ad3a99906764c35b2694ae90fa57744a5">std::move</a>(L));</div>
<div class="line"><a name="l00113"></a><span class="lineno">  113</span>&#160;                     }));</div>
<div class="line"><a name="l00114"></a><span class="lineno">  114</span>&#160;}</div>
<div class="line"><a name="l00115"></a><span class="lineno">  115</span>&#160; </div>
<div class="line"><a name="l00116"></a><span class="lineno"><a class="line" href="classllvm_1_1jitlink_1_1JITLinkerBase.html#ad0ba8069453727495f5ce46ec1b8ecc4">  116</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="classllvm_1_1jitlink_1_1JITLinkerBase.html#ad0ba8069453727495f5ce46ec1b8ecc4">JITLinkerBase::linkPhase2</a>(std::unique_ptr&lt;JITLinkerBase&gt; Self,</div>
<div class="line"><a name="l00117"></a><span class="lineno">  117</span>&#160;                               <a class="code" href="classllvm_1_1Expected.html">Expected&lt;AsyncLookupResult&gt;</a> LR,</div>
<div class="line"><a name="l00118"></a><span class="lineno">  118</span>&#160;                               <a class="code" href="classllvm_1_1DenseMap.html">SegmentLayoutMap</a> Layout) {</div>
<div class="line"><a name="l00119"></a><span class="lineno">  119</span>&#160; </div>
<div class="line"><a name="l00120"></a><span class="lineno">  120</span>&#160;  <a class="code" href="Debug_8h.html#a08efc68d15935eb8889400a46c3749ba">LLVM_DEBUG</a>({</div>
<div class="line"><a name="l00121"></a><span class="lineno">  121</span>&#160;    <a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <span class="stringliteral">&quot;Starting link phase 2 for graph &quot;</span> &lt;&lt; G-&gt;getName() &lt;&lt; <span class="stringliteral">&quot;\n&quot;</span>;</div>
<div class="line"><a name="l00122"></a><span class="lineno">  122</span>&#160;  });</div>
<div class="line"><a name="l00123"></a><span class="lineno">  123</span>&#160; </div>
<div class="line"><a name="l00124"></a><span class="lineno">  124</span>&#160;  <span class="comment">// If the lookup failed, bail out.</span></div>
<div class="line"><a name="l00125"></a><span class="lineno">  125</span>&#160;  <span class="keywordflow">if</span> (!LR)</div>
<div class="line"><a name="l00126"></a><span class="lineno">  126</span>&#160;    <span class="keywordflow">return</span> deallocateAndBailOut(LR.<a class="code" href="classllvm_1_1Expected.html#a94789df4ebd03dc008e8adebaa66ac1f">takeError</a>());</div>
<div class="line"><a name="l00127"></a><span class="lineno">  127</span>&#160; </div>
<div class="line"><a name="l00128"></a><span class="lineno">  128</span>&#160;  <span class="comment">// Assign addresses to external addressables.</span></div>
<div class="line"><a name="l00129"></a><span class="lineno">  129</span>&#160;  applyLookupResult(*LR);</div>
<div class="line"><a name="l00130"></a><span class="lineno">  130</span>&#160; </div>
<div class="line"><a name="l00131"></a><span class="lineno">  131</span>&#160;  <span class="comment">// Copy block content to working memory.</span></div>
<div class="line"><a name="l00132"></a><span class="lineno">  132</span>&#160;  copyBlockContentToWorkingMemory(Layout, *Alloc);</div>
<div class="line"><a name="l00133"></a><span class="lineno">  133</span>&#160; </div>
<div class="line"><a name="l00134"></a><span class="lineno">  134</span>&#160;  <a class="code" href="Debug_8h.html#a08efc68d15935eb8889400a46c3749ba">LLVM_DEBUG</a>({</div>
<div class="line"><a name="l00135"></a><span class="lineno">  135</span>&#160;    <a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <span class="stringliteral">&quot;Link graph \&quot;&quot;</span> &lt;&lt; G-&gt;getName()</div>
<div class="line"><a name="l00136"></a><span class="lineno">  136</span>&#160;           &lt;&lt; <span class="stringliteral">&quot;\&quot; before pre-fixup passes:\n&quot;</span>;</div>
<div class="line"><a name="l00137"></a><span class="lineno">  137</span>&#160;    G-&gt;dump(<a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>());</div>
<div class="line"><a name="l00138"></a><span class="lineno">  138</span>&#160;  });</div>
<div class="line"><a name="l00139"></a><span class="lineno">  139</span>&#160; </div>
<div class="line"><a name="l00140"></a><span class="lineno">  140</span>&#160;  <span class="keywordflow">if</span> (<span class="keyword">auto</span> Err = runPasses(Passes.<a class="code" href="structllvm_1_1jitlink_1_1PassConfiguration.html#a37decb1a4d14127fabb251c498274d0b">PreFixupPasses</a>))</div>
<div class="line"><a name="l00141"></a><span class="lineno">  141</span>&#160;    <span class="keywordflow">return</span> deallocateAndBailOut(<a class="code" href="lib_2Target_2ARM_2README_8txt.html#ad3a99906764c35b2694ae90fa57744a5">std::move</a>(Err));</div>
<div class="line"><a name="l00142"></a><span class="lineno">  142</span>&#160; </div>
<div class="line"><a name="l00143"></a><span class="lineno">  143</span>&#160;  <a class="code" href="Debug_8h.html#a08efc68d15935eb8889400a46c3749ba">LLVM_DEBUG</a>({</div>
<div class="line"><a name="l00144"></a><span class="lineno">  144</span>&#160;    <a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <span class="stringliteral">&quot;Link graph \&quot;&quot;</span> &lt;&lt; G-&gt;getName() &lt;&lt; <span class="stringliteral">&quot;\&quot; before copy-and-fixup:\n&quot;</span>;</div>
<div class="line"><a name="l00145"></a><span class="lineno">  145</span>&#160;    G-&gt;dump(<a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>());</div>
<div class="line"><a name="l00146"></a><span class="lineno">  146</span>&#160;  });</div>
<div class="line"><a name="l00147"></a><span class="lineno">  147</span>&#160; </div>
<div class="line"><a name="l00148"></a><span class="lineno">  148</span>&#160;  <span class="comment">// Fix up block content.</span></div>
<div class="line"><a name="l00149"></a><span class="lineno">  149</span>&#160;  <span class="keywordflow">if</span> (<span class="keyword">auto</span> Err = fixUpBlocks(*G))</div>
<div class="line"><a name="l00150"></a><span class="lineno">  150</span>&#160;    <span class="keywordflow">return</span> deallocateAndBailOut(<a class="code" href="lib_2Target_2ARM_2README_8txt.html#ad3a99906764c35b2694ae90fa57744a5">std::move</a>(Err));</div>
<div class="line"><a name="l00151"></a><span class="lineno">  151</span>&#160; </div>
<div class="line"><a name="l00152"></a><span class="lineno">  152</span>&#160;  <a class="code" href="Debug_8h.html#a08efc68d15935eb8889400a46c3749ba">LLVM_DEBUG</a>({</div>
<div class="line"><a name="l00153"></a><span class="lineno">  153</span>&#160;    <a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <span class="stringliteral">&quot;Link graph \&quot;&quot;</span> &lt;&lt; G-&gt;getName() &lt;&lt; <span class="stringliteral">&quot;\&quot; after copy-and-fixup:\n&quot;</span>;</div>
<div class="line"><a name="l00154"></a><span class="lineno">  154</span>&#160;    G-&gt;dump(<a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>());</div>
<div class="line"><a name="l00155"></a><span class="lineno">  155</span>&#160;  });</div>
<div class="line"><a name="l00156"></a><span class="lineno">  156</span>&#160; </div>
<div class="line"><a name="l00157"></a><span class="lineno">  157</span>&#160;  <span class="keywordflow">if</span> (<span class="keyword">auto</span> Err = runPasses(Passes.<a class="code" href="structllvm_1_1jitlink_1_1PassConfiguration.html#a617bac95c4003dd176fa5cc119d2a919">PostFixupPasses</a>))</div>
<div class="line"><a name="l00158"></a><span class="lineno">  158</span>&#160;    <span class="keywordflow">return</span> deallocateAndBailOut(<a class="code" href="lib_2Target_2ARM_2README_8txt.html#ad3a99906764c35b2694ae90fa57744a5">std::move</a>(Err));</div>
<div class="line"><a name="l00159"></a><span class="lineno">  159</span>&#160; </div>
<div class="line"><a name="l00160"></a><span class="lineno">  160</span>&#160;  <span class="comment">// FIXME: Use move capture once we have c++14.</span></div>
<div class="line"><a name="l00161"></a><span class="lineno">  161</span>&#160;  <span class="keyword">auto</span> *UnownedSelf = Self.release();</div>
<div class="line"><a name="l00162"></a><span class="lineno">  162</span>&#160;  <span class="keyword">auto</span> Phase3Continuation = [UnownedSelf](<a class="code" href="classllvm_1_1Error.html">Error</a> Err) {</div>
<div class="line"><a name="l00163"></a><span class="lineno">  163</span>&#160;    std::unique_ptr&lt;JITLinkerBase&gt; Self(UnownedSelf);</div>
<div class="line"><a name="l00164"></a><span class="lineno">  164</span>&#160;    UnownedSelf-&gt;linkPhase3(<a class="code" href="lib_2Target_2ARM_2README_8txt.html#ad3a99906764c35b2694ae90fa57744a5">std::move</a>(Self), <a class="code" href="lib_2Target_2ARM_2README_8txt.html#ad3a99906764c35b2694ae90fa57744a5">std::move</a>(Err));</div>
<div class="line"><a name="l00165"></a><span class="lineno">  165</span>&#160;  };</div>
<div class="line"><a name="l00166"></a><span class="lineno">  166</span>&#160; </div>
<div class="line"><a name="l00167"></a><span class="lineno">  167</span>&#160;  Alloc-&gt;finalizeAsync(<a class="code" href="lib_2Target_2ARM_2README_8txt.html#ad3a99906764c35b2694ae90fa57744a5">std::move</a>(Phase3Continuation));</div>
<div class="line"><a name="l00168"></a><span class="lineno">  168</span>&#160;}</div>
<div class="line"><a name="l00169"></a><span class="lineno">  169</span>&#160; </div>
<div class="line"><a name="l00170"></a><span class="lineno"><a class="line" href="classllvm_1_1jitlink_1_1JITLinkerBase.html#ad3c3cd394d47b409299bdbcfb606b1a3">  170</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="classllvm_1_1jitlink_1_1JITLinkerBase.html#ad3c3cd394d47b409299bdbcfb606b1a3">JITLinkerBase::linkPhase3</a>(std::unique_ptr&lt;JITLinkerBase&gt; Self, <a class="code" href="classllvm_1_1Error.html">Error</a> Err) {</div>
<div class="line"><a name="l00171"></a><span class="lineno">  171</span>&#160; </div>
<div class="line"><a name="l00172"></a><span class="lineno">  172</span>&#160;  <a class="code" href="Debug_8h.html#a08efc68d15935eb8889400a46c3749ba">LLVM_DEBUG</a>({</div>
<div class="line"><a name="l00173"></a><span class="lineno">  173</span>&#160;    <a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <span class="stringliteral">&quot;Starting link phase 3 for graph &quot;</span> &lt;&lt; G-&gt;getName() &lt;&lt; <span class="stringliteral">&quot;\n&quot;</span>;</div>
<div class="line"><a name="l00174"></a><span class="lineno">  174</span>&#160;  });</div>
<div class="line"><a name="l00175"></a><span class="lineno">  175</span>&#160; </div>
<div class="line"><a name="l00176"></a><span class="lineno">  176</span>&#160;  <span class="keywordflow">if</span> (Err)</div>
<div class="line"><a name="l00177"></a><span class="lineno">  177</span>&#160;    <span class="keywordflow">return</span> deallocateAndBailOut(<a class="code" href="lib_2Target_2ARM_2README_8txt.html#ad3a99906764c35b2694ae90fa57744a5">std::move</a>(Err));</div>
<div class="line"><a name="l00178"></a><span class="lineno">  178</span>&#160;  Ctx-&gt;notifyFinalized(<a class="code" href="lib_2Target_2ARM_2README_8txt.html#ad3a99906764c35b2694ae90fa57744a5">std::move</a>(Alloc));</div>
<div class="line"><a name="l00179"></a><span class="lineno">  179</span>&#160; </div>
<div class="line"><a name="l00180"></a><span class="lineno">  180</span>&#160;  <a class="code" href="Debug_8h.html#a08efc68d15935eb8889400a46c3749ba">LLVM_DEBUG</a>({ <a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <span class="stringliteral">&quot;Link of graph &quot;</span> &lt;&lt; G-&gt;getName() &lt;&lt; <span class="stringliteral">&quot; complete\n&quot;</span>; });</div>
<div class="line"><a name="l00181"></a><span class="lineno">  181</span>&#160;}</div>
<div class="line"><a name="l00182"></a><span class="lineno">  182</span>&#160; </div>
<div class="line"><a name="l00183"></a><span class="lineno">  183</span>&#160;<a class="code" href="classllvm_1_1Error.html">Error</a> JITLinkerBase::runPasses(<a class="code" href="namespacellvm_1_1jitlink.html#aed57da21f56e28c0889676ab6cf179c2">LinkGraphPassList</a> &amp;<a class="code" href="PassBuilderBindings_8cpp.html#ae0d075136095c7ea6db40715be638cf3">Passes</a>) {</div>
<div class="line"><a name="l00184"></a><span class="lineno">  184</span>&#160;  <span class="keywordflow">for</span> (<span class="keyword">auto</span> &amp;<a class="code" href="README-SSE_8txt.html#a63d206a063eefcdf8c318ded97b65020">P</a> : Passes)</div>
<div class="line"><a name="l00185"></a><span class="lineno">  185</span>&#160;    <span class="keywordflow">if</span> (<span class="keyword">auto</span> Err = <a class="code" href="README-SSE_8txt.html#a63d206a063eefcdf8c318ded97b65020">P</a>(*G))</div>
<div class="line"><a name="l00186"></a><span class="lineno">  186</span>&#160;      <span class="keywordflow">return</span> Err;</div>
<div class="line"><a name="l00187"></a><span class="lineno">  187</span>&#160;  <span class="keywordflow">return</span> <a class="code" href="classllvm_1_1Error.html#a4dfd0813c3d0e0a30439b5a3e9196b59">Error::success</a>();</div>
<div class="line"><a name="l00188"></a><span class="lineno">  188</span>&#160;}</div>
<div class="line"><a name="l00189"></a><span class="lineno">  189</span>&#160; </div>
<div class="line"><a name="l00190"></a><span class="lineno">  190</span>&#160;<a class="code" href="classllvm_1_1jitlink_1_1JITLinkerBase.html#a540403a2c9ac6bf4750690bba0eb74c5">JITLinkerBase::SegmentLayoutMap</a> JITLinkerBase::layOutBlocks() {</div>
<div class="line"><a name="l00191"></a><span class="lineno">  191</span>&#160; </div>
<div class="line"><a name="l00192"></a><span class="lineno">  192</span>&#160;  <a class="code" href="classllvm_1_1jitlink_1_1JITLinkerBase.html#a540403a2c9ac6bf4750690bba0eb74c5">SegmentLayoutMap</a> Layout;</div>
<div class="line"><a name="l00193"></a><span class="lineno">  193</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l00194"></a><span class="lineno">  194</span>&#160;<span class="comment">  /// Partition blocks based on permissions and content vs. zero-fill.</span></div>
<div class="line"><a name="l00195"></a><span class="lineno">  195</span>&#160;<span class="comment"></span>  <span class="keywordflow">for</span> (<span class="keyword">auto</span> *<a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a> : G-&gt;blocks()) {</div>
<div class="line"><a name="l00196"></a><span class="lineno">  196</span>&#160;    <span class="keyword">auto</span> &amp;SegLists = Layout[<a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a>-&gt;getSection().getProtectionFlags()];</div>
<div class="line"><a name="l00197"></a><span class="lineno">  197</span>&#160;    <span class="keywordflow">if</span> (!<a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a>-&gt;isZeroFill())</div>
<div class="line"><a name="l00198"></a><span class="lineno">  198</span>&#160;      SegLists.ContentBlocks.push_back(<a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a>);</div>
<div class="line"><a name="l00199"></a><span class="lineno">  199</span>&#160;    <span class="keywordflow">else</span></div>
<div class="line"><a name="l00200"></a><span class="lineno">  200</span>&#160;      SegLists.ZeroFillBlocks.push_back(<a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a>);</div>
<div class="line"><a name="l00201"></a><span class="lineno">  201</span>&#160;  }</div>
<div class="line"><a name="l00202"></a><span class="lineno">  202</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l00203"></a><span class="lineno">  203</span>&#160;<span class="comment">  /// Sort blocks within each list.</span></div>
<div class="line"><a name="l00204"></a><span class="lineno">  204</span>&#160;<span class="comment"></span>  <span class="keywordflow">for</span> (<span class="keyword">auto</span> &amp;KV : Layout) {</div>
<div class="line"><a name="l00205"></a><span class="lineno">  205</span>&#160; </div>
<div class="line"><a name="l00206"></a><span class="lineno">  206</span>&#160;    <span class="keyword">auto</span> CompareBlocks = [](<span class="keyword">const</span> Block *LHS, <span class="keyword">const</span> Block *RHS) {</div>
<div class="line"><a name="l00207"></a><span class="lineno">  207</span>&#160;      <span class="comment">// Sort by section, address and size</span></div>
<div class="line"><a name="l00208"></a><span class="lineno">  208</span>&#160;      <span class="keywordflow">if</span> (LHS-&gt;getSection().getOrdinal() != RHS-&gt;getSection().getOrdinal())</div>
<div class="line"><a name="l00209"></a><span class="lineno">  209</span>&#160;        <span class="keywordflow">return</span> LHS-&gt;getSection().getOrdinal() &lt; RHS-&gt;getSection().getOrdinal();</div>
<div class="line"><a name="l00210"></a><span class="lineno">  210</span>&#160;      <span class="keywordflow">if</span> (LHS-&gt;getAddress() != RHS-&gt;getAddress())</div>
<div class="line"><a name="l00211"></a><span class="lineno">  211</span>&#160;        <span class="keywordflow">return</span> LHS-&gt;getAddress() &lt; RHS-&gt;getAddress();</div>
<div class="line"><a name="l00212"></a><span class="lineno">  212</span>&#160;      <span class="keywordflow">return</span> LHS-&gt;getSize() &lt; RHS-&gt;getSize();</div>
<div class="line"><a name="l00213"></a><span class="lineno">  213</span>&#160;    };</div>
<div class="line"><a name="l00214"></a><span class="lineno">  214</span>&#160; </div>
<div class="line"><a name="l00215"></a><span class="lineno">  215</span>&#160;    <span class="keyword">auto</span> &amp;SegLists = KV.second;</div>
<div class="line"><a name="l00216"></a><span class="lineno">  216</span>&#160;    <a class="code" href="namespacellvm.html#a830041552b81a6cea1f497490d0f41d9">llvm::sort</a>(SegLists.ContentBlocks, CompareBlocks);</div>
<div class="line"><a name="l00217"></a><span class="lineno">  217</span>&#160;    <a class="code" href="namespacellvm.html#a830041552b81a6cea1f497490d0f41d9">llvm::sort</a>(SegLists.ZeroFillBlocks, CompareBlocks);</div>
<div class="line"><a name="l00218"></a><span class="lineno">  218</span>&#160;  }</div>
<div class="line"><a name="l00219"></a><span class="lineno">  219</span>&#160; </div>
<div class="line"><a name="l00220"></a><span class="lineno">  220</span>&#160;  <a class="code" href="Debug_8h.html#a08efc68d15935eb8889400a46c3749ba">LLVM_DEBUG</a>({</div>
<div class="line"><a name="l00221"></a><span class="lineno">  221</span>&#160;    <a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <span class="stringliteral">&quot;Computed segment ordering:\n&quot;</span>;</div>
<div class="line"><a name="l00222"></a><span class="lineno">  222</span>&#160;    <span class="keywordflow">for</span> (<span class="keyword">auto</span> &amp;KV : Layout) {</div>
<div class="line"><a name="l00223"></a><span class="lineno">  223</span>&#160;      <a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <span class="stringliteral">&quot;  Segment &quot;</span></div>
<div class="line"><a name="l00224"></a><span class="lineno">  224</span>&#160;             &lt;&lt; <span class="keyword">static_cast&lt;</span><a class="code" href="classllvm_1_1sys_1_1Memory.html#a548f317b89dc0bba738b89e5ce791395">sys::Memory::ProtectionFlags</a><span class="keyword">&gt;</span>(KV.first) &lt;&lt; <span class="stringliteral">&quot;:\n&quot;</span>;</div>
<div class="line"><a name="l00225"></a><span class="lineno">  225</span>&#160;      <span class="keyword">auto</span> &amp;SL = KV.second;</div>
<div class="line"><a name="l00226"></a><span class="lineno">  226</span>&#160;      <span class="keywordflow">for</span> (<span class="keyword">auto</span> &amp;SIEntry :</div>
<div class="line"><a name="l00227"></a><span class="lineno">  227</span>&#160;           {std::make_pair(&amp;SL.ContentBlocks, <span class="stringliteral">&quot;content block&quot;</span>),</div>
<div class="line"><a name="l00228"></a><span class="lineno">  228</span>&#160;            std::make_pair(&amp;SL.ZeroFillBlocks, <span class="stringliteral">&quot;zero-fill block&quot;</span>)}) {</div>
<div class="line"><a name="l00229"></a><span class="lineno">  229</span>&#160;        <a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <span class="stringliteral">&quot;    &quot;</span> &lt;&lt; SIEntry.second &lt;&lt; <span class="stringliteral">&quot;:\n&quot;</span>;</div>
<div class="line"><a name="l00230"></a><span class="lineno">  230</span>&#160;        <span class="keywordflow">for</span> (<span class="keyword">auto</span> *<a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a> : *SIEntry.first)</div>
<div class="line"><a name="l00231"></a><span class="lineno">  231</span>&#160;          <a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <span class="stringliteral">&quot;      &quot;</span> &lt;&lt; *<a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a> &lt;&lt; <span class="stringliteral">&quot;\n&quot;</span>;</div>
<div class="line"><a name="l00232"></a><span class="lineno">  232</span>&#160;      }</div>
<div class="line"><a name="l00233"></a><span class="lineno">  233</span>&#160;    }</div>
<div class="line"><a name="l00234"></a><span class="lineno">  234</span>&#160;  });</div>
<div class="line"><a name="l00235"></a><span class="lineno">  235</span>&#160; </div>
<div class="line"><a name="l00236"></a><span class="lineno">  236</span>&#160;  <span class="keywordflow">return</span> Layout;</div>
<div class="line"><a name="l00237"></a><span class="lineno">  237</span>&#160;}</div>
<div class="line"><a name="l00238"></a><span class="lineno">  238</span>&#160; </div>
<div class="line"><a name="l00239"></a><span class="lineno">  239</span>&#160;<a class="code" href="namespacellvm_1_1lltok.html#af353621f14cb4b4b3af5ffaff84076b1a3766a4dce43f4efc7208a749cc7ac605">Error</a> JITLinkerBase::allocateSegments(<span class="keyword">const</span> SegmentLayoutMap &amp;Layout) {</div>
<div class="line"><a name="l00240"></a><span class="lineno">  240</span>&#160; </div>
<div class="line"><a name="l00241"></a><span class="lineno">  241</span>&#160;  <span class="comment">// Compute segment sizes and allocate memory.</span></div>
<div class="line"><a name="l00242"></a><span class="lineno">  242</span>&#160;  <a class="code" href="Debug_8h.html#a08efc68d15935eb8889400a46c3749ba">LLVM_DEBUG</a>(<a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <span class="stringliteral">&quot;JIT linker requesting: { &quot;</span>);</div>
<div class="line"><a name="l00243"></a><span class="lineno">  243</span>&#160;  <a class="code" href="classllvm_1_1jitlink_1_1JITLinkMemoryManager.html#ae25e7d9f4783c377aa9fa34bd5769202">JITLinkMemoryManager::SegmentsRequestMap</a> Segments;</div>
<div class="line"><a name="l00244"></a><span class="lineno">  244</span>&#160;  <span class="keywordflow">for</span> (<span class="keyword">auto</span> &amp;KV : Layout) {</div>
<div class="line"><a name="l00245"></a><span class="lineno">  245</span>&#160;    <span class="keyword">auto</span> &amp;Prot = KV.first;</div>
<div class="line"><a name="l00246"></a><span class="lineno">  246</span>&#160;    <span class="keyword">auto</span> &amp;SegLists = KV.second;</div>
<div class="line"><a name="l00247"></a><span class="lineno">  247</span>&#160; </div>
<div class="line"><a name="l00248"></a><span class="lineno">  248</span>&#160;    uint64_t SegAlign = 1;</div>
<div class="line"><a name="l00249"></a><span class="lineno">  249</span>&#160; </div>
<div class="line"><a name="l00250"></a><span class="lineno">  250</span>&#160;    <span class="comment">// Calculate segment content size.</span></div>
<div class="line"><a name="l00251"></a><span class="lineno">  251</span>&#160;    <span class="keywordtype">size_t</span> SegContentSize = 0;</div>
<div class="line"><a name="l00252"></a><span class="lineno">  252</span>&#160;    <span class="keywordflow">for</span> (<span class="keyword">auto</span> *<a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a> : SegLists.ContentBlocks) {</div>
<div class="line"><a name="l00253"></a><span class="lineno">  253</span>&#160;      SegAlign = <a class="code" href="namespacellvm.html#a81b52e18d84e3cc61df7e897bba1b259">std::max</a>(SegAlign, <a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a>-&gt;getAlignment());</div>
<div class="line"><a name="l00254"></a><span class="lineno">  254</span>&#160;      SegContentSize = <a class="code" href="classllvm_1_1jitlink_1_1JITLinkerBase.html#a3a90d8b74f61af81d984ae8370ba10d8">alignToBlock</a>(SegContentSize, *<a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a>);</div>
<div class="line"><a name="l00255"></a><span class="lineno">  255</span>&#160;      SegContentSize += <a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a>-&gt;getSize();</div>
<div class="line"><a name="l00256"></a><span class="lineno">  256</span>&#160;    }</div>
<div class="line"><a name="l00257"></a><span class="lineno">  257</span>&#160; </div>
<div class="line"><a name="l00258"></a><span class="lineno">  258</span>&#160;    uint64_t SegZeroFillStart = SegContentSize;</div>
<div class="line"><a name="l00259"></a><span class="lineno">  259</span>&#160;    uint64_t SegZeroFillEnd = SegZeroFillStart;</div>
<div class="line"><a name="l00260"></a><span class="lineno">  260</span>&#160; </div>
<div class="line"><a name="l00261"></a><span class="lineno">  261</span>&#160;    <span class="keywordflow">for</span> (<span class="keyword">auto</span> *<a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a> : SegLists.ZeroFillBlocks) {</div>
<div class="line"><a name="l00262"></a><span class="lineno">  262</span>&#160;      SegAlign = <a class="code" href="namespacellvm.html#a81b52e18d84e3cc61df7e897bba1b259">std::max</a>(SegAlign, <a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a>-&gt;getAlignment());</div>
<div class="line"><a name="l00263"></a><span class="lineno">  263</span>&#160;      SegZeroFillEnd = <a class="code" href="classllvm_1_1jitlink_1_1JITLinkerBase.html#a3a90d8b74f61af81d984ae8370ba10d8">alignToBlock</a>(SegZeroFillEnd, *<a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a>);</div>
<div class="line"><a name="l00264"></a><span class="lineno">  264</span>&#160;      SegZeroFillEnd += <a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a>-&gt;getSize();</div>
<div class="line"><a name="l00265"></a><span class="lineno">  265</span>&#160;    }</div>
<div class="line"><a name="l00266"></a><span class="lineno">  266</span>&#160; </div>
<div class="line"><a name="l00267"></a><span class="lineno">  267</span>&#160;    Segments[Prot] = {SegAlign, SegContentSize,</div>
<div class="line"><a name="l00268"></a><span class="lineno">  268</span>&#160;                      SegZeroFillEnd - SegZeroFillStart};</div>
<div class="line"><a name="l00269"></a><span class="lineno">  269</span>&#160; </div>
<div class="line"><a name="l00270"></a><span class="lineno">  270</span>&#160;    <a class="code" href="Debug_8h.html#a08efc68d15935eb8889400a46c3749ba">LLVM_DEBUG</a>({</div>
<div class="line"><a name="l00271"></a><span class="lineno">  271</span>&#160;      <a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; (&amp;KV == &amp;*Layout.begin() ? <span class="stringliteral">&quot;&quot;</span> : <span class="stringliteral">&quot;; &quot;</span>)</div>
<div class="line"><a name="l00272"></a><span class="lineno">  272</span>&#160;             &lt;&lt; <span class="keyword">static_cast&lt;</span><a class="code" href="classllvm_1_1sys_1_1Memory.html#a548f317b89dc0bba738b89e5ce791395">sys::Memory::ProtectionFlags</a><span class="keyword">&gt;</span>(Prot)</div>
<div class="line"><a name="l00273"></a><span class="lineno">  273</span>&#160;             &lt;&lt; <span class="stringliteral">&quot;: alignment = &quot;</span> &lt;&lt; SegAlign</div>
<div class="line"><a name="l00274"></a><span class="lineno">  274</span>&#160;             &lt;&lt; <span class="stringliteral">&quot;, content size = &quot;</span> &lt;&lt; SegContentSize</div>
<div class="line"><a name="l00275"></a><span class="lineno">  275</span>&#160;             &lt;&lt; <span class="stringliteral">&quot;, zero-fill size = &quot;</span> &lt;&lt; (SegZeroFillEnd - SegZeroFillStart);</div>
<div class="line"><a name="l00276"></a><span class="lineno">  276</span>&#160;    });</div>
<div class="line"><a name="l00277"></a><span class="lineno">  277</span>&#160;  }</div>
<div class="line"><a name="l00278"></a><span class="lineno">  278</span>&#160;  <a class="code" href="Debug_8h.html#a08efc68d15935eb8889400a46c3749ba">LLVM_DEBUG</a>(<a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <span class="stringliteral">&quot; }\n&quot;</span>);</div>
<div class="line"><a name="l00279"></a><span class="lineno">  279</span>&#160; </div>
<div class="line"><a name="l00280"></a><span class="lineno">  280</span>&#160;  <span class="keywordflow">if</span> (<span class="keyword">auto</span> AllocOrErr =</div>
<div class="line"><a name="l00281"></a><span class="lineno">  281</span>&#160;          Ctx-&gt;getMemoryManager().allocate(Ctx-&gt;getJITLinkDylib(), Segments))</div>
<div class="line"><a name="l00282"></a><span class="lineno">  282</span>&#160;    Alloc = <a class="code" href="lib_2Target_2ARM_2README_8txt.html#ad3a99906764c35b2694ae90fa57744a5">std::move</a>(*AllocOrErr);</div>
<div class="line"><a name="l00283"></a><span class="lineno">  283</span>&#160;  <span class="keywordflow">else</span></div>
<div class="line"><a name="l00284"></a><span class="lineno">  284</span>&#160;    <span class="keywordflow">return</span> AllocOrErr.takeError();</div>
<div class="line"><a name="l00285"></a><span class="lineno">  285</span>&#160; </div>
<div class="line"><a name="l00286"></a><span class="lineno">  286</span>&#160;  <a class="code" href="Debug_8h.html#a08efc68d15935eb8889400a46c3749ba">LLVM_DEBUG</a>({</div>
<div class="line"><a name="l00287"></a><span class="lineno">  287</span>&#160;    <a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <span class="stringliteral">&quot;JIT linker got memory (working -&gt; target):\n&quot;</span>;</div>
<div class="line"><a name="l00288"></a><span class="lineno">  288</span>&#160;    <span class="keywordflow">for</span> (<span class="keyword">auto</span> &amp;KV : Layout) {</div>
<div class="line"><a name="l00289"></a><span class="lineno">  289</span>&#160;      <span class="keyword">auto</span> Prot = <span class="keyword">static_cast&lt;</span><a class="code" href="classllvm_1_1sys_1_1Memory.html#a548f317b89dc0bba738b89e5ce791395">sys::Memory::ProtectionFlags</a><span class="keyword">&gt;</span>(KV.first);</div>
<div class="line"><a name="l00290"></a><span class="lineno">  290</span>&#160;      <a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <span class="stringliteral">&quot;  &quot;</span> &lt;&lt; Prot &lt;&lt; <span class="stringliteral">&quot;: &quot;</span></div>
<div class="line"><a name="l00291"></a><span class="lineno">  291</span>&#160;             &lt;&lt; (<span class="keyword">const</span> <span class="keywordtype">void</span> *)Alloc-&gt;getWorkingMemory(Prot).data() &lt;&lt; <span class="stringliteral">&quot; -&gt; &quot;</span></div>
<div class="line"><a name="l00292"></a><span class="lineno">  292</span>&#160;             &lt;&lt; <a class="code" href="namespacellvm.html#a07eb6e84b522073e52d92dccf5015c01">formatv</a>(<span class="stringliteral">&quot;{0:x16}&quot;</span>, Alloc-&gt;getTargetMemory(Prot)) &lt;&lt; <span class="stringliteral">&quot;\n&quot;</span>;</div>
<div class="line"><a name="l00293"></a><span class="lineno">  293</span>&#160;    }</div>
<div class="line"><a name="l00294"></a><span class="lineno">  294</span>&#160;  });</div>
<div class="line"><a name="l00295"></a><span class="lineno">  295</span>&#160; </div>
<div class="line"><a name="l00296"></a><span class="lineno">  296</span>&#160;  <span class="comment">// Update block target addresses.</span></div>
<div class="line"><a name="l00297"></a><span class="lineno">  297</span>&#160;  <span class="keywordflow">for</span> (<span class="keyword">auto</span> &amp;KV : Layout) {</div>
<div class="line"><a name="l00298"></a><span class="lineno">  298</span>&#160;    <span class="keyword">auto</span> &amp;Prot = KV.first;</div>
<div class="line"><a name="l00299"></a><span class="lineno">  299</span>&#160;    <span class="keyword">auto</span> &amp;SL = KV.second;</div>
<div class="line"><a name="l00300"></a><span class="lineno">  300</span>&#160; </div>
<div class="line"><a name="l00301"></a><span class="lineno">  301</span>&#160;    <a class="code" href="namespacellvm.html#a2b9aa96a24878fd7e3262812346c6c26">JITTargetAddress</a> NextBlockAddr =</div>
<div class="line"><a name="l00302"></a><span class="lineno">  302</span>&#160;        Alloc-&gt;getTargetMemory(<span class="keyword">static_cast&lt;</span><a class="code" href="classllvm_1_1sys_1_1Memory.html#a548f317b89dc0bba738b89e5ce791395">sys::Memory::ProtectionFlags</a><span class="keyword">&gt;</span>(Prot));</div>
<div class="line"><a name="l00303"></a><span class="lineno">  303</span>&#160; </div>
<div class="line"><a name="l00304"></a><span class="lineno">  304</span>&#160;    <span class="keywordflow">for</span> (<span class="keyword">auto</span> *SIList : {&amp;SL.ContentBlocks, &amp;SL.ZeroFillBlocks})</div>
<div class="line"><a name="l00305"></a><span class="lineno">  305</span>&#160;      <span class="keywordflow">for</span> (<span class="keyword">auto</span> *<a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a> : *SIList) {</div>
<div class="line"><a name="l00306"></a><span class="lineno">  306</span>&#160;        NextBlockAddr = <a class="code" href="classllvm_1_1jitlink_1_1JITLinkerBase.html#a3a90d8b74f61af81d984ae8370ba10d8">alignToBlock</a>(NextBlockAddr, *<a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a>);</div>
<div class="line"><a name="l00307"></a><span class="lineno">  307</span>&#160;        <a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a>-&gt;setAddress(NextBlockAddr);</div>
<div class="line"><a name="l00308"></a><span class="lineno">  308</span>&#160;        NextBlockAddr += <a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a>-&gt;getSize();</div>
<div class="line"><a name="l00309"></a><span class="lineno">  309</span>&#160;      }</div>
<div class="line"><a name="l00310"></a><span class="lineno">  310</span>&#160;  }</div>
<div class="line"><a name="l00311"></a><span class="lineno">  311</span>&#160; </div>
<div class="line"><a name="l00312"></a><span class="lineno">  312</span>&#160;  <span class="keywordflow">return</span> <a class="code" href="classllvm_1_1Error.html#a4dfd0813c3d0e0a30439b5a3e9196b59">Error::success</a>();</div>
<div class="line"><a name="l00313"></a><span class="lineno">  313</span>&#160;}</div>
<div class="line"><a name="l00314"></a><span class="lineno">  314</span>&#160; </div>
<div class="line"><a name="l00315"></a><span class="lineno">  315</span>&#160;<a class="code" href="classllvm_1_1jitlink_1_1JITLinkContext.html#a12d82000029d85aa956dc187d9a81511">JITLinkContext::LookupMap</a> JITLinkerBase::getExternalSymbolNames()<span class="keyword"> const </span>{</div>
<div class="line"><a name="l00316"></a><span class="lineno">  316</span>&#160;  <span class="comment">// Identify unresolved external symbols.</span></div>
<div class="line"><a name="l00317"></a><span class="lineno">  317</span>&#160;  <a class="code" href="classllvm_1_1jitlink_1_1JITLinkContext.html#a12d82000029d85aa956dc187d9a81511">JITLinkContext::LookupMap</a> UnresolvedExternals;</div>
<div class="line"><a name="l00318"></a><span class="lineno">  318</span>&#160;  <span class="keywordflow">for</span> (<span class="keyword">auto</span> *Sym : G-&gt;external_symbols()) {</div>
<div class="line"><a name="l00319"></a><span class="lineno">  319</span>&#160;    <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(Sym-&gt;getAddress() == 0 &amp;&amp;</div>
<div class="line"><a name="l00320"></a><span class="lineno">  320</span>&#160;           <span class="stringliteral">&quot;External has already been assigned an address&quot;</span>);</div>
<div class="line"><a name="l00321"></a><span class="lineno">  321</span>&#160;    <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(Sym-&gt;getName() != StringRef() &amp;&amp; Sym-&gt;getName() != <span class="stringliteral">&quot;&quot;</span> &amp;&amp;</div>
<div class="line"><a name="l00322"></a><span class="lineno">  322</span>&#160;           <span class="stringliteral">&quot;Externals must be named&quot;</span>);</div>
<div class="line"><a name="l00323"></a><span class="lineno">  323</span>&#160;    <a class="code" href="namespacellvm_1_1jitlink.html#a278b50a28b5c8c2c7338d41b70f28798">SymbolLookupFlags</a> LookupFlags =</div>
<div class="line"><a name="l00324"></a><span class="lineno">  324</span>&#160;        Sym-&gt;getLinkage() == <a class="code" href="namespacellvm_1_1jitlink.html#abee99c9c75d23a0304e5e58e3128a55fa7324e3727807d95037eb19d304fd91ec">Linkage::Weak</a></div>
<div class="line"><a name="l00325"></a><span class="lineno">  325</span>&#160;            ? <a class="code" href="namespacellvm_1_1jitlink.html#a278b50a28b5c8c2c7338d41b70f28798aa1734373fb555ce75d3e33411f9ea827">SymbolLookupFlags::WeaklyReferencedSymbol</a></div>
<div class="line"><a name="l00326"></a><span class="lineno">  326</span>&#160;            : SymbolLookupFlags::RequiredSymbol;</div>
<div class="line"><a name="l00327"></a><span class="lineno">  327</span>&#160;    UnresolvedExternals[Sym-&gt;getName()] = LookupFlags;</div>
<div class="line"><a name="l00328"></a><span class="lineno">  328</span>&#160;  }</div>
<div class="line"><a name="l00329"></a><span class="lineno">  329</span>&#160;  <span class="keywordflow">return</span> UnresolvedExternals;</div>
<div class="line"><a name="l00330"></a><span class="lineno">  330</span>&#160;}</div>
<div class="line"><a name="l00331"></a><span class="lineno">  331</span>&#160; </div>
<div class="line"><a name="l00332"></a><span class="lineno">  332</span>&#160;<span class="keywordtype">void</span> JITLinkerBase::applyLookupResult(<a class="code" href="namespacellvm_1_1jitlink.html#a9d305144843205d0e6972a5a274af489">AsyncLookupResult</a> Result) {</div>
<div class="line"><a name="l00333"></a><span class="lineno">  333</span>&#160;  <span class="keywordflow">for</span> (<span class="keyword">auto</span> *Sym : G-&gt;external_symbols()) {</div>
<div class="line"><a name="l00334"></a><span class="lineno">  334</span>&#160;    <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(Sym-&gt;getOffset() == 0 &amp;&amp;</div>
<div class="line"><a name="l00335"></a><span class="lineno">  335</span>&#160;           <span class="stringliteral">&quot;External symbol is not at the start of its addressable block&quot;</span>);</div>
<div class="line"><a name="l00336"></a><span class="lineno">  336</span>&#160;    <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(Sym-&gt;getAddress() == 0 &amp;&amp; <span class="stringliteral">&quot;Symbol already resolved&quot;</span>);</div>
<div class="line"><a name="l00337"></a><span class="lineno">  337</span>&#160;    <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(!Sym-&gt;isDefined() &amp;&amp; <span class="stringliteral">&quot;Symbol being resolved is already defined&quot;</span>);</div>
<div class="line"><a name="l00338"></a><span class="lineno">  338</span>&#160;    <span class="keyword">auto</span> ResultI = <a class="code" href="namespacellvm_1_1ms__demangle.html#afb795990ffc0cb7321e7d1eacc246324a3e679cff5b3a6f6f8f32aead541a0a12">Result</a>.find(Sym-&gt;getName());</div>
<div class="line"><a name="l00339"></a><span class="lineno">  339</span>&#160;    <span class="keywordflow">if</span> (ResultI != <a class="code" href="namespacellvm_1_1ms__demangle.html#afb795990ffc0cb7321e7d1eacc246324a3e679cff5b3a6f6f8f32aead541a0a12">Result</a>.end())</div>
<div class="line"><a name="l00340"></a><span class="lineno">  340</span>&#160;      Sym-&gt;getAddressable().setAddress(ResultI-&gt;second.getAddress());</div>
<div class="line"><a name="l00341"></a><span class="lineno">  341</span>&#160;    <span class="keywordflow">else</span></div>
<div class="line"><a name="l00342"></a><span class="lineno">  342</span>&#160;      <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(Sym-&gt;getLinkage() == <a class="code" href="namespacellvm_1_1jitlink.html#abee99c9c75d23a0304e5e58e3128a55fa7324e3727807d95037eb19d304fd91ec">Linkage::Weak</a> &amp;&amp;</div>
<div class="line"><a name="l00343"></a><span class="lineno">  343</span>&#160;             <span class="stringliteral">&quot;Failed to resolve non-weak reference&quot;</span>);</div>
<div class="line"><a name="l00344"></a><span class="lineno">  344</span>&#160;  }</div>
<div class="line"><a name="l00345"></a><span class="lineno">  345</span>&#160; </div>
<div class="line"><a name="l00346"></a><span class="lineno">  346</span>&#160;  <a class="code" href="Debug_8h.html#a08efc68d15935eb8889400a46c3749ba">LLVM_DEBUG</a>({</div>
<div class="line"><a name="l00347"></a><span class="lineno">  347</span>&#160;    <a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <span class="stringliteral">&quot;Externals after applying lookup result:\n&quot;</span>;</div>
<div class="line"><a name="l00348"></a><span class="lineno">  348</span>&#160;    <span class="keywordflow">for</span> (<span class="keyword">auto</span> *Sym : G-&gt;external_symbols())</div>
<div class="line"><a name="l00349"></a><span class="lineno">  349</span>&#160;      <a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <span class="stringliteral">&quot;  &quot;</span> &lt;&lt; Sym-&gt;getName() &lt;&lt; <span class="stringliteral">&quot;: &quot;</span></div>
<div class="line"><a name="l00350"></a><span class="lineno">  350</span>&#160;             &lt;&lt; <a class="code" href="namespacellvm.html#a07eb6e84b522073e52d92dccf5015c01">formatv</a>(<span class="stringliteral">&quot;{0:x16}&quot;</span>, Sym-&gt;getAddress()) &lt;&lt; <span class="stringliteral">&quot;\n&quot;</span>;</div>
<div class="line"><a name="l00351"></a><span class="lineno">  351</span>&#160;  });</div>
<div class="line"><a name="l00352"></a><span class="lineno">  352</span>&#160;}</div>
<div class="line"><a name="l00353"></a><span class="lineno">  353</span>&#160; </div>
<div class="line"><a name="l00354"></a><span class="lineno">  354</span>&#160;<span class="keywordtype">void</span> JITLinkerBase::copyBlockContentToWorkingMemory(</div>
<div class="line"><a name="l00355"></a><span class="lineno">  355</span>&#160;    <span class="keyword">const</span> SegmentLayoutMap &amp;Layout, JITLinkMemoryManager::Allocation &amp;Alloc) {</div>
<div class="line"><a name="l00356"></a><span class="lineno">  356</span>&#160; </div>
<div class="line"><a name="l00357"></a><span class="lineno">  357</span>&#160;  <a class="code" href="Debug_8h.html#a08efc68d15935eb8889400a46c3749ba">LLVM_DEBUG</a>(<a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <span class="stringliteral">&quot;Copying block content:\n&quot;</span>);</div>
<div class="line"><a name="l00358"></a><span class="lineno">  358</span>&#160;  <span class="keywordflow">for</span> (<span class="keyword">auto</span> &amp;KV : Layout) {</div>
<div class="line"><a name="l00359"></a><span class="lineno">  359</span>&#160;    <span class="keyword">auto</span> &amp;Prot = KV.first;</div>
<div class="line"><a name="l00360"></a><span class="lineno">  360</span>&#160;    <span class="keyword">auto</span> &amp;SegLayout = KV.second;</div>
<div class="line"><a name="l00361"></a><span class="lineno">  361</span>&#160; </div>
<div class="line"><a name="l00362"></a><span class="lineno">  362</span>&#160;    <span class="keyword">auto</span> SegMem =</div>
<div class="line"><a name="l00363"></a><span class="lineno">  363</span>&#160;        Alloc.getWorkingMemory(<span class="keyword">static_cast&lt;</span><a class="code" href="classllvm_1_1sys_1_1Memory.html#a548f317b89dc0bba738b89e5ce791395">sys::Memory::ProtectionFlags</a><span class="keyword">&gt;</span>(Prot));</div>
<div class="line"><a name="l00364"></a><span class="lineno">  364</span>&#160;    <span class="keywordtype">char</span> *LastBlockEnd = SegMem.data();</div>
<div class="line"><a name="l00365"></a><span class="lineno">  365</span>&#160;    <span class="keywordtype">char</span> *BlockDataPtr = LastBlockEnd;</div>
<div class="line"><a name="l00366"></a><span class="lineno">  366</span>&#160; </div>
<div class="line"><a name="l00367"></a><span class="lineno">  367</span>&#160;    <a class="code" href="Debug_8h.html#a08efc68d15935eb8889400a46c3749ba">LLVM_DEBUG</a>({</div>
<div class="line"><a name="l00368"></a><span class="lineno">  368</span>&#160;      <a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <span class="stringliteral">&quot;  Processing segment &quot;</span></div>
<div class="line"><a name="l00369"></a><span class="lineno">  369</span>&#160;             &lt;&lt; <span class="keyword">static_cast&lt;</span><a class="code" href="classllvm_1_1sys_1_1Memory.html#a548f317b89dc0bba738b89e5ce791395">sys::Memory::ProtectionFlags</a><span class="keyword">&gt;</span>(Prot) &lt;&lt; <span class="stringliteral">&quot; [ &quot;</span></div>
<div class="line"><a name="l00370"></a><span class="lineno">  370</span>&#160;             &lt;&lt; (<span class="keyword">const</span> <span class="keywordtype">void</span> *)SegMem.data() &lt;&lt; <span class="stringliteral">&quot; .. &quot;</span></div>
<div class="line"><a name="l00371"></a><span class="lineno">  371</span>&#160;             &lt;&lt; (<span class="keyword">const</span> <span class="keywordtype">void</span> *)((<span class="keywordtype">char</span> *)SegMem.data() + SegMem.size())</div>
<div class="line"><a name="l00372"></a><span class="lineno">  372</span>&#160;             &lt;&lt; <span class="stringliteral">&quot; ]\n    Processing content sections:\n&quot;</span>;</div>
<div class="line"><a name="l00373"></a><span class="lineno">  373</span>&#160;    });</div>
<div class="line"><a name="l00374"></a><span class="lineno">  374</span>&#160; </div>
<div class="line"><a name="l00375"></a><span class="lineno">  375</span>&#160;    <span class="keywordflow">for</span> (<span class="keyword">auto</span> *<a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a> : SegLayout.ContentBlocks) {</div>
<div class="line"><a name="l00376"></a><span class="lineno">  376</span>&#160;      <a class="code" href="Debug_8h.html#a08efc68d15935eb8889400a46c3749ba">LLVM_DEBUG</a>(<a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <span class="stringliteral">&quot;    &quot;</span> &lt;&lt; *<a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a> &lt;&lt; <span class="stringliteral">&quot;:\n&quot;</span>);</div>
<div class="line"><a name="l00377"></a><span class="lineno">  377</span>&#160; </div>
<div class="line"><a name="l00378"></a><span class="lineno">  378</span>&#160;      <span class="comment">// Pad to alignment/alignment-offset.</span></div>
<div class="line"><a name="l00379"></a><span class="lineno">  379</span>&#160;      BlockDataPtr = <a class="code" href="classllvm_1_1jitlink_1_1JITLinkerBase.html#a3a90d8b74f61af81d984ae8370ba10d8">alignToBlock</a>(BlockDataPtr, *<a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a>);</div>
<div class="line"><a name="l00380"></a><span class="lineno">  380</span>&#160; </div>
<div class="line"><a name="l00381"></a><span class="lineno">  381</span>&#160;      <a class="code" href="Debug_8h.html#a08efc68d15935eb8889400a46c3749ba">LLVM_DEBUG</a>({</div>
<div class="line"><a name="l00382"></a><span class="lineno">  382</span>&#160;        <a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <span class="stringliteral">&quot;      Bumped block pointer to &quot;</span> &lt;&lt; (<span class="keyword">const</span> <span class="keywordtype">void</span> *)BlockDataPtr</div>
<div class="line"><a name="l00383"></a><span class="lineno">  383</span>&#160;               &lt;&lt; <span class="stringliteral">&quot; to meet block alignment &quot;</span> &lt;&lt; <a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a>-&gt;getAlignment()</div>
<div class="line"><a name="l00384"></a><span class="lineno">  384</span>&#160;               &lt;&lt; <span class="stringliteral">&quot; and alignment offset &quot;</span> &lt;&lt; <a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a>-&gt;getAlignmentOffset() &lt;&lt; <span class="stringliteral">&quot;\n&quot;</span>;</div>
<div class="line"><a name="l00385"></a><span class="lineno">  385</span>&#160;      });</div>
<div class="line"><a name="l00386"></a><span class="lineno">  386</span>&#160; </div>
<div class="line"><a name="l00387"></a><span class="lineno">  387</span>&#160;      <span class="comment">// Zero pad up to alignment.</span></div>
<div class="line"><a name="l00388"></a><span class="lineno">  388</span>&#160;      <a class="code" href="Debug_8h.html#a08efc68d15935eb8889400a46c3749ba">LLVM_DEBUG</a>({</div>
<div class="line"><a name="l00389"></a><span class="lineno">  389</span>&#160;        <span class="keywordflow">if</span> (LastBlockEnd != BlockDataPtr)</div>
<div class="line"><a name="l00390"></a><span class="lineno">  390</span>&#160;          <a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <span class="stringliteral">&quot;      Zero padding from &quot;</span> &lt;&lt; (<span class="keyword">const</span> <span class="keywordtype">void</span> *)LastBlockEnd</div>
<div class="line"><a name="l00391"></a><span class="lineno">  391</span>&#160;                 &lt;&lt; <span class="stringliteral">&quot; to &quot;</span> &lt;&lt; (<span class="keyword">const</span> <span class="keywordtype">void</span> *)BlockDataPtr &lt;&lt; <span class="stringliteral">&quot;\n&quot;</span>;</div>
<div class="line"><a name="l00392"></a><span class="lineno">  392</span>&#160;      });</div>
<div class="line"><a name="l00393"></a><span class="lineno">  393</span>&#160; </div>
<div class="line"><a name="l00394"></a><span class="lineno">  394</span>&#160;      <span class="keywordflow">while</span> (LastBlockEnd != BlockDataPtr)</div>
<div class="line"><a name="l00395"></a><span class="lineno">  395</span>&#160;        *LastBlockEnd++ = 0;</div>
<div class="line"><a name="l00396"></a><span class="lineno">  396</span>&#160; </div>
<div class="line"><a name="l00397"></a><span class="lineno">  397</span>&#160;      <span class="comment">// Copy initial block content.</span></div>
<div class="line"><a name="l00398"></a><span class="lineno">  398</span>&#160;      <a class="code" href="Debug_8h.html#a08efc68d15935eb8889400a46c3749ba">LLVM_DEBUG</a>({</div>
<div class="line"><a name="l00399"></a><span class="lineno">  399</span>&#160;        <a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <span class="stringliteral">&quot;      Copying block &quot;</span> &lt;&lt; *<a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a> &lt;&lt; <span class="stringliteral">&quot; content, &quot;</span></div>
<div class="line"><a name="l00400"></a><span class="lineno">  400</span>&#160;               &lt;&lt; <a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a>-&gt;getContent().size() &lt;&lt; <span class="stringliteral">&quot; bytes, from &quot;</span></div>
<div class="line"><a name="l00401"></a><span class="lineno">  401</span>&#160;               &lt;&lt; (<span class="keyword">const</span> <span class="keywordtype">void</span> *)<a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a>-&gt;getContent().data() &lt;&lt; <span class="stringliteral">&quot; to &quot;</span></div>
<div class="line"><a name="l00402"></a><span class="lineno">  402</span>&#160;               &lt;&lt; (<span class="keyword">const</span> <span class="keywordtype">void</span> *)BlockDataPtr &lt;&lt; <span class="stringliteral">&quot;\n&quot;</span>;</div>
<div class="line"><a name="l00403"></a><span class="lineno">  403</span>&#160;      });</div>
<div class="line"><a name="l00404"></a><span class="lineno">  404</span>&#160;      <a class="code" href="lib_2Target_2ARM_2README_8txt.html#ae2bb081d94f22e64ca6bc4bd58512a93">memcpy</a>(BlockDataPtr, <a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a>-&gt;getContent().data(), <a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a>-&gt;getContent().size());</div>
<div class="line"><a name="l00405"></a><span class="lineno">  405</span>&#160; </div>
<div class="line"><a name="l00406"></a><span class="lineno">  406</span>&#160;      <span class="comment">// Point the block&#39;s content to the fixed up buffer.</span></div>
<div class="line"><a name="l00407"></a><span class="lineno">  407</span>&#160;      <a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a>-&gt;setMutableContent({BlockDataPtr, <a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a>-&gt;getContent().<a class="code" href="namespacellvm.html#a10f3d955592ae2bc745f57e5b48ae115">size</a>()});</div>
<div class="line"><a name="l00408"></a><span class="lineno">  408</span>&#160; </div>
<div class="line"><a name="l00409"></a><span class="lineno">  409</span>&#160;      <span class="comment">// Update block end pointer.</span></div>
<div class="line"><a name="l00410"></a><span class="lineno">  410</span>&#160;      LastBlockEnd = BlockDataPtr + <a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a>-&gt;getContent().size();</div>
<div class="line"><a name="l00411"></a><span class="lineno">  411</span>&#160;      BlockDataPtr = LastBlockEnd;</div>
<div class="line"><a name="l00412"></a><span class="lineno">  412</span>&#160;    }</div>
<div class="line"><a name="l00413"></a><span class="lineno">  413</span>&#160; </div>
<div class="line"><a name="l00414"></a><span class="lineno">  414</span>&#160;    <span class="comment">// Zero pad the rest of the segment.</span></div>
<div class="line"><a name="l00415"></a><span class="lineno">  415</span>&#160;    <a class="code" href="Debug_8h.html#a08efc68d15935eb8889400a46c3749ba">LLVM_DEBUG</a>({</div>
<div class="line"><a name="l00416"></a><span class="lineno">  416</span>&#160;      <a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <span class="stringliteral">&quot;    Zero padding end of segment from &quot;</span></div>
<div class="line"><a name="l00417"></a><span class="lineno">  417</span>&#160;             &lt;&lt; (<span class="keyword">const</span> <span class="keywordtype">void</span> *)LastBlockEnd &lt;&lt; <span class="stringliteral">&quot; to &quot;</span></div>
<div class="line"><a name="l00418"></a><span class="lineno">  418</span>&#160;             &lt;&lt; (<span class="keyword">const</span> <span class="keywordtype">void</span> *)((<span class="keywordtype">char</span> *)SegMem.data() + SegMem.size()) &lt;&lt; <span class="stringliteral">&quot;\n&quot;</span>;</div>
<div class="line"><a name="l00419"></a><span class="lineno">  419</span>&#160;    });</div>
<div class="line"><a name="l00420"></a><span class="lineno">  420</span>&#160;    <span class="keywordflow">while</span> (LastBlockEnd != SegMem.data() + SegMem.size())</div>
<div class="line"><a name="l00421"></a><span class="lineno">  421</span>&#160;      *LastBlockEnd++ = 0;</div>
<div class="line"><a name="l00422"></a><span class="lineno">  422</span>&#160;  }</div>
<div class="line"><a name="l00423"></a><span class="lineno">  423</span>&#160;}</div>
<div class="line"><a name="l00424"></a><span class="lineno">  424</span>&#160; </div>
<div class="line"><a name="l00425"></a><span class="lineno">  425</span>&#160;<span class="keywordtype">void</span> JITLinkerBase::deallocateAndBailOut(Error Err) {</div>
<div class="line"><a name="l00426"></a><span class="lineno">  426</span>&#160;  <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(Err &amp;&amp; <span class="stringliteral">&quot;Should not be bailing out on success value&quot;</span>);</div>
<div class="line"><a name="l00427"></a><span class="lineno">  427</span>&#160;  <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(Alloc &amp;&amp; <span class="stringliteral">&quot;can not call deallocateAndBailOut before allocation&quot;</span>);</div>
<div class="line"><a name="l00428"></a><span class="lineno">  428</span>&#160;  Ctx-&gt;notifyFailed(<a class="code" href="namespacellvm.html#a71210b99d2ef87236d8505c1771a7ab1">joinErrors</a>(<a class="code" href="lib_2Target_2ARM_2README_8txt.html#ad3a99906764c35b2694ae90fa57744a5">std::move</a>(Err), Alloc-&gt;deallocate()));</div>
<div class="line"><a name="l00429"></a><span class="lineno">  429</span>&#160;}</div>
<div class="line"><a name="l00430"></a><span class="lineno">  430</span>&#160; </div>
<div class="line"><a name="l00431"></a><span class="lineno"><a class="line" href="namespacellvm_1_1jitlink.html#a9ef4b58ddabf00cc648c69edba3911ee">  431</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="namespacellvm_1_1jitlink.html#a9ef4b58ddabf00cc648c69edba3911ee">prune</a>(<a class="code" href="classllvm_1_1jitlink_1_1LinkGraph.html">LinkGraph</a> &amp;<a class="code" href="RDFGraph_8cpp.html#af153ca0eadca8bc464492b7aba7feb00">G</a>) {</div>
<div class="line"><a name="l00432"></a><span class="lineno">  432</span>&#160;  std::vector&lt;Symbol *&gt; Worklist;</div>
<div class="line"><a name="l00433"></a><span class="lineno">  433</span>&#160;  <a class="code" href="classllvm_1_1DenseSet.html">DenseSet&lt;Block *&gt;</a> VisitedBlocks;</div>
<div class="line"><a name="l00434"></a><span class="lineno">  434</span>&#160; </div>
<div class="line"><a name="l00435"></a><span class="lineno">  435</span>&#160;  <span class="comment">// Build the initial worklist from all symbols initially live.</span></div>
<div class="line"><a name="l00436"></a><span class="lineno">  436</span>&#160;  <span class="keywordflow">for</span> (<span class="keyword">auto</span> *Sym : <a class="code" href="RDFGraph_8cpp.html#af153ca0eadca8bc464492b7aba7feb00">G</a>.defined_symbols())</div>
<div class="line"><a name="l00437"></a><span class="lineno">  437</span>&#160;    <span class="keywordflow">if</span> (Sym-&gt;isLive())</div>
<div class="line"><a name="l00438"></a><span class="lineno">  438</span>&#160;      Worklist.push_back(Sym);</div>
<div class="line"><a name="l00439"></a><span class="lineno">  439</span>&#160; </div>
<div class="line"><a name="l00440"></a><span class="lineno">  440</span>&#160;  <span class="comment">// Propagate live flags to all symbols reachable from the initial live set.</span></div>
<div class="line"><a name="l00441"></a><span class="lineno">  441</span>&#160;  <span class="keywordflow">while</span> (!Worklist.empty()) {</div>
<div class="line"><a name="l00442"></a><span class="lineno">  442</span>&#160;    <span class="keyword">auto</span> *Sym = Worklist.back();</div>
<div class="line"><a name="l00443"></a><span class="lineno">  443</span>&#160;    Worklist.pop_back();</div>
<div class="line"><a name="l00444"></a><span class="lineno">  444</span>&#160; </div>
<div class="line"><a name="l00445"></a><span class="lineno">  445</span>&#160;    <span class="keyword">auto</span> &amp;<a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a> = Sym-&gt;getBlock();</div>
<div class="line"><a name="l00446"></a><span class="lineno">  446</span>&#160; </div>
<div class="line"><a name="l00447"></a><span class="lineno">  447</span>&#160;    <span class="comment">// Skip addressables that we&#39;ve visited before.</span></div>
<div class="line"><a name="l00448"></a><span class="lineno">  448</span>&#160;    <span class="keywordflow">if</span> (VisitedBlocks.<a class="code" href="classllvm_1_1detail_1_1DenseSetImpl.html#afe504aa31a6a354cec13f5b32d0b1d9d">count</a>(&amp;<a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a>))</div>
<div class="line"><a name="l00449"></a><span class="lineno">  449</span>&#160;      <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l00450"></a><span class="lineno">  450</span>&#160; </div>
<div class="line"><a name="l00451"></a><span class="lineno">  451</span>&#160;    VisitedBlocks.<a class="code" href="classllvm_1_1detail_1_1DenseSetImpl.html#a79eed48913651aeedda2eed25201ea84">insert</a>(&amp;<a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a>);</div>
<div class="line"><a name="l00452"></a><span class="lineno">  452</span>&#160; </div>
<div class="line"><a name="l00453"></a><span class="lineno">  453</span>&#160;    <span class="keywordflow">for</span> (<span class="keyword">auto</span> &amp;<a class="code" href="BuiltinGCs_8cpp.html#a6742d2e0a668baf1196ec69e158d5f15">E</a> : Sym-&gt;getBlock().edges()) {</div>
<div class="line"><a name="l00454"></a><span class="lineno">  454</span>&#160;      <span class="comment">// If the edge target is a defined symbol that is being newly marked live</span></div>
<div class="line"><a name="l00455"></a><span class="lineno">  455</span>&#160;      <span class="comment">// then add it to the worklist.</span></div>
<div class="line"><a name="l00456"></a><span class="lineno">  456</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="BuiltinGCs_8cpp.html#a6742d2e0a668baf1196ec69e158d5f15">E</a>.getTarget().isDefined() &amp;&amp; !<a class="code" href="BuiltinGCs_8cpp.html#a6742d2e0a668baf1196ec69e158d5f15">E</a>.getTarget().isLive())</div>
<div class="line"><a name="l00457"></a><span class="lineno">  457</span>&#160;        Worklist.push_back(&amp;<a class="code" href="BuiltinGCs_8cpp.html#a6742d2e0a668baf1196ec69e158d5f15">E</a>.getTarget());</div>
<div class="line"><a name="l00458"></a><span class="lineno">  458</span>&#160; </div>
<div class="line"><a name="l00459"></a><span class="lineno">  459</span>&#160;      <span class="comment">// Mark the target live.</span></div>
<div class="line"><a name="l00460"></a><span class="lineno">  460</span>&#160;      <a class="code" href="BuiltinGCs_8cpp.html#a6742d2e0a668baf1196ec69e158d5f15">E</a>.getTarget().setLive(<span class="keyword">true</span>);</div>
<div class="line"><a name="l00461"></a><span class="lineno">  461</span>&#160;    }</div>
<div class="line"><a name="l00462"></a><span class="lineno">  462</span>&#160;  }</div>
<div class="line"><a name="l00463"></a><span class="lineno">  463</span>&#160; </div>
<div class="line"><a name="l00464"></a><span class="lineno">  464</span>&#160;  <span class="comment">// Collect all defined symbols to remove, then remove them.</span></div>
<div class="line"><a name="l00465"></a><span class="lineno">  465</span>&#160;  {</div>
<div class="line"><a name="l00466"></a><span class="lineno">  466</span>&#160;    <a class="code" href="Debug_8h.html#a08efc68d15935eb8889400a46c3749ba">LLVM_DEBUG</a>(<a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <span class="stringliteral">&quot;Dead-stripping defined symbols:\n&quot;</span>);</div>
<div class="line"><a name="l00467"></a><span class="lineno">  467</span>&#160;    std::vector&lt;Symbol *&gt; SymbolsToRemove;</div>
<div class="line"><a name="l00468"></a><span class="lineno">  468</span>&#160;    <span class="keywordflow">for</span> (<span class="keyword">auto</span> *Sym : <a class="code" href="RDFGraph_8cpp.html#af153ca0eadca8bc464492b7aba7feb00">G</a>.defined_symbols())</div>
<div class="line"><a name="l00469"></a><span class="lineno">  469</span>&#160;      <span class="keywordflow">if</span> (!Sym-&gt;isLive())</div>
<div class="line"><a name="l00470"></a><span class="lineno">  470</span>&#160;        SymbolsToRemove.push_back(Sym);</div>
<div class="line"><a name="l00471"></a><span class="lineno">  471</span>&#160;    <span class="keywordflow">for</span> (<span class="keyword">auto</span> *Sym : SymbolsToRemove) {</div>
<div class="line"><a name="l00472"></a><span class="lineno">  472</span>&#160;      <a class="code" href="Debug_8h.html#a08efc68d15935eb8889400a46c3749ba">LLVM_DEBUG</a>(<a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <span class="stringliteral">&quot;  &quot;</span> &lt;&lt; *Sym &lt;&lt; <span class="stringliteral">&quot;...\n&quot;</span>);</div>
<div class="line"><a name="l00473"></a><span class="lineno">  473</span>&#160;      <a class="code" href="RDFGraph_8cpp.html#af153ca0eadca8bc464492b7aba7feb00">G</a>.removeDefinedSymbol(*Sym);</div>
<div class="line"><a name="l00474"></a><span class="lineno">  474</span>&#160;    }</div>
<div class="line"><a name="l00475"></a><span class="lineno">  475</span>&#160;  }</div>
<div class="line"><a name="l00476"></a><span class="lineno">  476</span>&#160; </div>
<div class="line"><a name="l00477"></a><span class="lineno">  477</span>&#160;  <span class="comment">// Delete any unused blocks.</span></div>
<div class="line"><a name="l00478"></a><span class="lineno">  478</span>&#160;  {</div>
<div class="line"><a name="l00479"></a><span class="lineno">  479</span>&#160;    <a class="code" href="Debug_8h.html#a08efc68d15935eb8889400a46c3749ba">LLVM_DEBUG</a>(<a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <span class="stringliteral">&quot;Dead-stripping blocks:\n&quot;</span>);</div>
<div class="line"><a name="l00480"></a><span class="lineno">  480</span>&#160;    std::vector&lt;Block *&gt; BlocksToRemove;</div>
<div class="line"><a name="l00481"></a><span class="lineno">  481</span>&#160;    <span class="keywordflow">for</span> (<span class="keyword">auto</span> *<a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a> : <a class="code" href="RDFGraph_8cpp.html#af153ca0eadca8bc464492b7aba7feb00">G</a>.blocks())</div>
<div class="line"><a name="l00482"></a><span class="lineno">  482</span>&#160;      <span class="keywordflow">if</span> (!VisitedBlocks.<a class="code" href="classllvm_1_1detail_1_1DenseSetImpl.html#afe504aa31a6a354cec13f5b32d0b1d9d">count</a>(<a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a>))</div>
<div class="line"><a name="l00483"></a><span class="lineno">  483</span>&#160;        BlocksToRemove.push_back(<a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a>);</div>
<div class="line"><a name="l00484"></a><span class="lineno">  484</span>&#160;    <span class="keywordflow">for</span> (<span class="keyword">auto</span> *<a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a> : BlocksToRemove) {</div>
<div class="line"><a name="l00485"></a><span class="lineno">  485</span>&#160;      <a class="code" href="Debug_8h.html#a08efc68d15935eb8889400a46c3749ba">LLVM_DEBUG</a>(<a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <span class="stringliteral">&quot;  &quot;</span> &lt;&lt; *<a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a> &lt;&lt; <span class="stringliteral">&quot;...\n&quot;</span>);</div>
<div class="line"><a name="l00486"></a><span class="lineno">  486</span>&#160;      <a class="code" href="RDFGraph_8cpp.html#af153ca0eadca8bc464492b7aba7feb00">G</a>.removeBlock(*<a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a>);</div>
<div class="line"><a name="l00487"></a><span class="lineno">  487</span>&#160;    }</div>
<div class="line"><a name="l00488"></a><span class="lineno">  488</span>&#160;  }</div>
<div class="line"><a name="l00489"></a><span class="lineno">  489</span>&#160; </div>
<div class="line"><a name="l00490"></a><span class="lineno">  490</span>&#160;  <span class="comment">// Collect all external symbols to remove, then remove them.</span></div>
<div class="line"><a name="l00491"></a><span class="lineno">  491</span>&#160;  {</div>
<div class="line"><a name="l00492"></a><span class="lineno">  492</span>&#160;    <a class="code" href="Debug_8h.html#a08efc68d15935eb8889400a46c3749ba">LLVM_DEBUG</a>(<a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <span class="stringliteral">&quot;Removing unused external symbols:\n&quot;</span>);</div>
<div class="line"><a name="l00493"></a><span class="lineno">  493</span>&#160;    std::vector&lt;Symbol *&gt; SymbolsToRemove;</div>
<div class="line"><a name="l00494"></a><span class="lineno">  494</span>&#160;    <span class="keywordflow">for</span> (<span class="keyword">auto</span> *Sym : <a class="code" href="RDFGraph_8cpp.html#af153ca0eadca8bc464492b7aba7feb00">G</a>.external_symbols())</div>
<div class="line"><a name="l00495"></a><span class="lineno">  495</span>&#160;      <span class="keywordflow">if</span> (!Sym-&gt;isLive())</div>
<div class="line"><a name="l00496"></a><span class="lineno">  496</span>&#160;        SymbolsToRemove.push_back(Sym);</div>
<div class="line"><a name="l00497"></a><span class="lineno">  497</span>&#160;    <span class="keywordflow">for</span> (<span class="keyword">auto</span> *Sym : SymbolsToRemove) {</div>
<div class="line"><a name="l00498"></a><span class="lineno">  498</span>&#160;      <a class="code" href="Debug_8h.html#a08efc68d15935eb8889400a46c3749ba">LLVM_DEBUG</a>(<a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <span class="stringliteral">&quot;  &quot;</span> &lt;&lt; *Sym &lt;&lt; <span class="stringliteral">&quot;...\n&quot;</span>);</div>
<div class="line"><a name="l00499"></a><span class="lineno">  499</span>&#160;      <a class="code" href="RDFGraph_8cpp.html#af153ca0eadca8bc464492b7aba7feb00">G</a>.removeExternalSymbol(*Sym);</div>
<div class="line"><a name="l00500"></a><span class="lineno">  500</span>&#160;    }</div>
<div class="line"><a name="l00501"></a><span class="lineno">  501</span>&#160;  }</div>
<div class="line"><a name="l00502"></a><span class="lineno">  502</span>&#160;}</div>
<div class="line"><a name="l00503"></a><span class="lineno">  503</span>&#160; </div>
<div class="line"><a name="l00504"></a><span class="lineno">  504</span>&#160;} <span class="comment">// end namespace jitlink</span></div>
<div class="line"><a name="l00505"></a><span class="lineno">  505</span>&#160;} <span class="comment">// end namespace llvm</span></div>
</div><!-- fragment --></div><!-- contents -->
<div class="ttc" id="aMemoryBuffer_8h_html"><div class="ttname"><a href="MemoryBuffer_8h.html">MemoryBuffer.h</a></div></div>
<div class="ttc" id="aclassllvm_1_1jitlink_1_1JITLinkerBase_html_a3a90d8b74f61af81d984ae8370ba10d8"><div class="ttname"><a href="classllvm_1_1jitlink_1_1JITLinkerBase.html#a3a90d8b74f61af81d984ae8370ba10d8">llvm::jitlink::JITLinkerBase::alignToBlock</a></div><div class="ttdeci">static JITTargetAddress alignToBlock(JITTargetAddress Addr, Block &amp;B)</div><div class="ttdef"><b>Definition:</b> <a href="JITLinkGeneric_8h_source.html#l00086">JITLinkGeneric.h:86</a></div></div>
<div class="ttc" id="aBinaryStreamReader_8h_html"><div class="ttname"><a href="BinaryStreamReader_8h.html">BinaryStreamReader.h</a></div></div>
<div class="ttc" id="anamespacellvm_html"><div class="ttname"><a href="namespacellvm.html">llvm</a></div><div class="ttdoc">--------------------- PointerInfo ------------------------------------</div><div class="ttdef"><b>Definition:</b> <a href="AllocatorList_8h_source.html#l00023">AllocatorList.h:23</a></div></div>
<div class="ttc" id="anamespacellvm_1_1jitlink_html_a278b50a28b5c8c2c7338d41b70f28798"><div class="ttname"><a href="namespacellvm_1_1jitlink.html#a278b50a28b5c8c2c7338d41b70f28798">llvm::jitlink::SymbolLookupFlags</a></div><div class="ttdeci">SymbolLookupFlags</div><div class="ttdoc">Flags for symbol lookup.</div><div class="ttdef"><b>Definition:</b> <a href="JITLink_8h_source.html#l01577">JITLink.h:1577</a></div></div>
<div class="ttc" id="anamespacellvm_1_1lltok_html_af353621f14cb4b4b3af5ffaff84076b1a3766a4dce43f4efc7208a749cc7ac605"><div class="ttname"><a href="namespacellvm_1_1lltok.html#af353621f14cb4b4b3af5ffaff84076b1a3766a4dce43f4efc7208a749cc7ac605">llvm::lltok::Error</a></div><div class="ttdeci">@ Error</div><div class="ttdef"><b>Definition:</b> <a href="LLToken_8h_source.html#l00021">LLToken.h:21</a></div></div>
<div class="ttc" id="aREADME-SSE_8txt_html_a63d206a063eefcdf8c318ded97b65020"><div class="ttname"><a href="README-SSE_8txt.html#a63d206a063eefcdf8c318ded97b65020">P</a></div><div class="ttdeci">This currently compiles esp xmm0 movsd esp eax eax esp ret We should use not the dag combiner This is because dagcombine2 needs to be able to see through the X86ISD::Wrapper which DAGCombine can t really do The code for turning x load into a single vector load is target independent and should be moved to the dag combiner The code for turning x load into a vector load can only handle a direct load from a global or a direct load from the stack It should be generalized to handle any load from P</div><div class="ttdef"><b>Definition:</b> <a href="README-SSE_8txt_source.html#l00411">README-SSE.txt:411</a></div></div>
<div class="ttc" id="aclassllvm_1_1jitlink_1_1JITLinkerBase_html_a2b526b4d5dc6f1fb98e8bbcde81af435"><div class="ttname"><a href="classllvm_1_1jitlink_1_1JITLinkerBase.html#a2b526b4d5dc6f1fb98e8bbcde81af435">llvm::jitlink::JITLinkerBase::~JITLinkerBase</a></div><div class="ttdeci">virtual ~JITLinkerBase()</div><div class="ttdef"><b>Definition:</b> <a href="JITLinkGeneric_8cpp_source.html#l00023">JITLinkGeneric.cpp:23</a></div></div>
<div class="ttc" id="aclassllvm_1_1Error_html_a4dfd0813c3d0e0a30439b5a3e9196b59"><div class="ttname"><a href="classllvm_1_1Error.html#a4dfd0813c3d0e0a30439b5a3e9196b59">llvm::Error::success</a></div><div class="ttdeci">static ErrorSuccess success()</div><div class="ttdoc">Create a success value.</div><div class="ttdef"><b>Definition:</b> <a href="llvm_2Support_2Error_8h_source.html#l00332">Error.h:332</a></div></div>
<div class="ttc" id="aPassBuilderBindings_8cpp_html_ae0d075136095c7ea6db40715be638cf3"><div class="ttname"><a href="PassBuilderBindings_8cpp.html#ae0d075136095c7ea6db40715be638cf3">Passes</a></div><div class="ttdeci">const char * Passes</div><div class="ttdef"><b>Definition:</b> <a href="PassBuilderBindings_8cpp_source.html#l00046">PassBuilderBindings.cpp:46</a></div></div>
<div class="ttc" id="anamespacellvm_1_1jitlink_html_abee99c9c75d23a0304e5e58e3128a55fa7324e3727807d95037eb19d304fd91ec"><div class="ttname"><a href="namespacellvm_1_1jitlink.html#abee99c9c75d23a0304e5e58e3128a55fa7324e3727807d95037eb19d304fd91ec">llvm::jitlink::Linkage::Weak</a></div><div class="ttdeci">@ Weak</div></div>
<div class="ttc" id="anamespacellvm_1_1jitlink_html_a9ef4b58ddabf00cc648c69edba3911ee"><div class="ttname"><a href="namespacellvm_1_1jitlink.html#a9ef4b58ddabf00cc648c69edba3911ee">llvm::jitlink::prune</a></div><div class="ttdeci">void prune(LinkGraph &amp;G)</div><div class="ttdoc">Removes dead symbols/blocks/addressables.</div><div class="ttdef"><b>Definition:</b> <a href="JITLinkGeneric_8cpp_source.html#l00431">JITLinkGeneric.cpp:431</a></div></div>
<div class="ttc" id="aclassllvm_1_1Expected_html"><div class="ttname"><a href="classllvm_1_1Expected.html">llvm::Expected</a></div><div class="ttdoc">Tagged union holding either a T or a Error.</div><div class="ttdef"><b>Definition:</b> <a href="llvm_2Support_2Error_8h_source.html#l00472">Error.h:472</a></div></div>
<div class="ttc" id="aclassllvm_1_1detail_1_1DenseSetImpl_html_a79eed48913651aeedda2eed25201ea84"><div class="ttname"><a href="classllvm_1_1detail_1_1DenseSetImpl.html#a79eed48913651aeedda2eed25201ea84">llvm::detail::DenseSetImpl::insert</a></div><div class="ttdeci">std::pair&lt; iterator, bool &gt; insert(const ValueT &amp;V)</div><div class="ttdef"><b>Definition:</b> <a href="DenseSet_8h_source.html#l00206">DenseSet.h:206</a></div></div>
<div class="ttc" id="aclassllvm_1_1detail_1_1DenseSetImpl_html_afe504aa31a6a354cec13f5b32d0b1d9d"><div class="ttname"><a href="classllvm_1_1detail_1_1DenseSetImpl.html#afe504aa31a6a354cec13f5b32d0b1d9d">llvm::detail::DenseSetImpl::count</a></div><div class="ttdeci">size_type count(const_arg_type_t&lt; ValueT &gt; V) const</div><div class="ttdoc">Return 1 if the specified key is in the set, 0 otherwise.</div><div class="ttdef"><b>Definition:</b> <a href="DenseSet_8h_source.html#l00097">DenseSet.h:97</a></div></div>
<div class="ttc" id="aclassllvm_1_1jitlink_1_1JITLinkerBase_html_a7eaefb855f3166fb5c460a96a32b5172"><div class="ttname"><a href="classllvm_1_1jitlink_1_1JITLinkerBase.html#a7eaefb855f3166fb5c460a96a32b5172">llvm::jitlink::JITLinkerBase::linkPhase1</a></div><div class="ttdeci">void linkPhase1(std::unique_ptr&lt; JITLinkerBase &gt; Self)</div><div class="ttdef"><b>Definition:</b> <a href="JITLinkGeneric_8cpp_source.html#l00025">JITLinkGeneric.cpp:25</a></div></div>
<div class="ttc" id="aDebug_8h_html_a08efc68d15935eb8889400a46c3749ba"><div class="ttname"><a href="Debug_8h.html#a08efc68d15935eb8889400a46c3749ba">LLVM_DEBUG</a></div><div class="ttdeci">#define LLVM_DEBUG(X)</div><div class="ttdef"><b>Definition:</b> <a href="Debug_8h_source.html#l00122">Debug.h:122</a></div></div>
<div class="ttc" id="anamespacellvm_html_a7c46c742c31be54870e2038048e6b391"><div class="ttname"><a href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">llvm::dbgs</a></div><div class="ttdeci">raw_ostream &amp; dbgs()</div><div class="ttdoc">dbgs() - This returns a reference to a raw_ostream for debugging messages.</div><div class="ttdef"><b>Definition:</b> <a href="Debug_8cpp_source.html#l00163">Debug.cpp:163</a></div></div>
<div class="ttc" id="anamespacellvm_html_a07eb6e84b522073e52d92dccf5015c01"><div class="ttname"><a href="namespacellvm.html#a07eb6e84b522073e52d92dccf5015c01">llvm::formatv</a></div><div class="ttdeci">auto formatv(const char *Fmt, Ts &amp;&amp;... Vals) -&gt; formatv_object&lt; decltype(std::make_tuple(detail::build_format_adapter(std::forward&lt; Ts &gt;(Vals))...))&gt;</div><div class="ttdef"><b>Definition:</b> <a href="FormatVariadic_8h_source.html#l00250">FormatVariadic.h:250</a></div></div>
<div class="ttc" id="anamespacellvm_1_1orc_1_1tpctypes_html_a2cd96ad006903f3841e54f0146bbda88"><div class="ttname"><a href="namespacellvm_1_1orc_1_1tpctypes.html#a2cd96ad006903f3841e54f0146bbda88">llvm::orc::tpctypes::LookupResult</a></div><div class="ttdeci">std::vector&lt; JITTargetAddress &gt; LookupResult</div><div class="ttdef"><b>Definition:</b> <a href="TargetProcessControlTypes_8h_source.html#l00062">TargetProcessControlTypes.h:62</a></div></div>
<div class="ttc" id="aBuiltinGCs_8cpp_html_a6742d2e0a668baf1196ec69e158d5f15"><div class="ttname"><a href="BuiltinGCs_8cpp.html#a6742d2e0a668baf1196ec69e158d5f15">E</a></div><div class="ttdeci">static GCRegistry::Add&lt; CoreCLRGC &gt; E(&quot;coreclr&quot;, &quot;CoreCLR-compatible GC&quot;)</div></div>
<div class="ttc" id="anamespacellvm_1_1jitlink_html_a9d305144843205d0e6972a5a274af489"><div class="ttname"><a href="namespacellvm_1_1jitlink.html#a9d305144843205d0e6972a5a274af489">llvm::jitlink::AsyncLookupResult</a></div><div class="ttdeci">DenseMap&lt; StringRef, JITEvaluatedSymbol &gt; AsyncLookupResult</div><div class="ttdoc">A map of symbol names to resolved addresses.</div><div class="ttdef"><b>Definition:</b> <a href="JITLink_8h_source.html#l01582">JITLink.h:1582</a></div></div>
<div class="ttc" id="aclassllvm_1_1sys_1_1Memory_html_a548f317b89dc0bba738b89e5ce791395"><div class="ttname"><a href="classllvm_1_1sys_1_1Memory.html#a548f317b89dc0bba738b89e5ce791395">llvm::sys::Memory::ProtectionFlags</a></div><div class="ttdeci">ProtectionFlags</div><div class="ttdef"><b>Definition:</b> <a href="Memory_8h_source.html#l00054">Memory.h:54</a></div></div>
<div class="ttc" id="aclassllvm_1_1jitlink_1_1JITLinkMemoryManager_html_ae25e7d9f4783c377aa9fa34bd5769202"><div class="ttname"><a href="classllvm_1_1jitlink_1_1JITLinkMemoryManager.html#ae25e7d9f4783c377aa9fa34bd5769202">llvm::jitlink::JITLinkMemoryManager::SegmentsRequestMap</a></div><div class="ttdeci">DenseMap&lt; unsigned, SegmentRequest &gt; SegmentsRequestMap</div><div class="ttdef"><b>Definition:</b> <a href="JITLinkMemoryManager_8h_source.html#l00055">JITLinkMemoryManager.h:55</a></div></div>
<div class="ttc" id="aBuiltinGCs_8cpp_html_a7abf5fb4071cb25dbce06dfb5ee3c937"><div class="ttname"><a href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a></div><div class="ttdeci">static GCRegistry::Add&lt; OcamlGC &gt; B(&quot;ocaml&quot;, &quot;ocaml 3.10-compatible GC&quot;)</div></div>
<div class="ttc" id="aclassllvm_1_1jitlink_1_1JITLinkerBase_html_ad3c3cd394d47b409299bdbcfb606b1a3"><div class="ttname"><a href="classllvm_1_1jitlink_1_1JITLinkerBase.html#ad3c3cd394d47b409299bdbcfb606b1a3">llvm::jitlink::JITLinkerBase::linkPhase3</a></div><div class="ttdeci">void linkPhase3(std::unique_ptr&lt; JITLinkerBase &gt; Self, Error Err)</div><div class="ttdef"><b>Definition:</b> <a href="JITLinkGeneric_8cpp_source.html#l00170">JITLinkGeneric.cpp:170</a></div></div>
<div class="ttc" id="anamespacellvm_1_1ms__demangle_html_afb795990ffc0cb7321e7d1eacc246324a3e679cff5b3a6f6f8f32aead541a0a12"><div class="ttname"><a href="namespacellvm_1_1ms__demangle.html#afb795990ffc0cb7321e7d1eacc246324a3e679cff5b3a6f6f8f32aead541a0a12">llvm::ms_demangle::QualifierMangleMode::Drop</a></div><div class="ttdeci">@ Drop</div></div>
<div class="ttc" id="aclassllvm_1_1jitlink_1_1JITLinkerBase_html_ad0ba8069453727495f5ce46ec1b8ecc4"><div class="ttname"><a href="classllvm_1_1jitlink_1_1JITLinkerBase.html#ad0ba8069453727495f5ce46ec1b8ecc4">llvm::jitlink::JITLinkerBase::linkPhase2</a></div><div class="ttdeci">void linkPhase2(std::unique_ptr&lt; JITLinkerBase &gt; Self, Expected&lt; AsyncLookupResult &gt; LookupResult, SegmentLayoutMap Layout)</div><div class="ttdef"><b>Definition:</b> <a href="JITLinkGeneric_8cpp_source.html#l00116">JITLinkGeneric.cpp:116</a></div></div>
<div class="ttc" id="aRDFGraph_8cpp_html_af153ca0eadca8bc464492b7aba7feb00"><div class="ttname"><a href="RDFGraph_8cpp.html#af153ca0eadca8bc464492b7aba7feb00">G</a></div><div class="ttdeci">const DataFlowGraph &amp; G</div><div class="ttdef"><b>Definition:</b> <a href="RDFGraph_8cpp_source.html#l00202">RDFGraph.cpp:202</a></div></div>
<div class="ttc" id="aclassllvm_1_1DenseSet_html"><div class="ttname"><a href="classllvm_1_1DenseSet.html">llvm::DenseSet&lt; Block * &gt;</a></div></div>
<div class="ttc" id="astructllvm_1_1jitlink_1_1PassConfiguration_html_ad40c7648b8ad38b6d942e7194a4faa34"><div class="ttname"><a href="structllvm_1_1jitlink_1_1PassConfiguration.html#ad40c7648b8ad38b6d942e7194a4faa34">llvm::jitlink::PassConfiguration::PrePrunePasses</a></div><div class="ttdeci">LinkGraphPassList PrePrunePasses</div><div class="ttdoc">Pre-prune passes.</div><div class="ttdef"><b>Definition:</b> <a href="JITLink_8h_source.html#l01527">JITLink.h:1527</a></div></div>
<div class="ttc" id="aclassllvm_1_1jitlink_1_1LinkGraph_html"><div class="ttname"><a href="classllvm_1_1jitlink_1_1LinkGraph.html">llvm::jitlink::LinkGraph</a></div><div class="ttdef"><b>Definition:</b> <a href="JITLink_8h_source.html#l00784">JITLink.h:784</a></div></div>
<div class="ttc" id="alib_2Target_2ARM_2README_8txt_html_ad3a99906764c35b2694ae90fa57744a5"><div class="ttname"><a href="lib_2Target_2ARM_2README_8txt.html#ad3a99906764c35b2694ae90fa57744a5">move</a></div><div class="ttdeci">compiles ldr LCPI1_0 ldr ldr mov lsr tst moveq r1 ldr LCPI1_1 and r0 bx lr It would be better to do something like to fold the shift into the conditional move</div><div class="ttdef"><b>Definition:</b> <a href="lib_2Target_2ARM_2README_8txt_source.html#l00544">README.txt:546</a></div></div>
<div class="ttc" id="aclassllvm_1_1DenseMap_html"><div class="ttname"><a href="classllvm_1_1DenseMap.html">llvm::DenseMap</a></div><div class="ttdef"><b>Definition:</b> <a href="DenseMap_8h_source.html#l00714">DenseMap.h:715</a></div></div>
<div class="ttc" id="anamespacellvm_html_a71210b99d2ef87236d8505c1771a7ab1"><div class="ttname"><a href="namespacellvm.html#a71210b99d2ef87236d8505c1771a7ab1">llvm::joinErrors</a></div><div class="ttdeci">Error joinErrors(Error E1, Error E2)</div><div class="ttdoc">Concatenate errors.</div><div class="ttdef"><b>Definition:</b> <a href="llvm_2Support_2Error_8h_source.html#l00429">Error.h:429</a></div></div>
<div class="ttc" id="anamespacellvm_1_1jitlink_html_aed57da21f56e28c0889676ab6cf179c2"><div class="ttname"><a href="namespacellvm_1_1jitlink.html#aed57da21f56e28c0889676ab6cf179c2">llvm::jitlink::LinkGraphPassList</a></div><div class="ttdeci">std::vector&lt; LinkGraphPassFunction &gt; LinkGraphPassList</div><div class="ttdoc">A list of LinkGraph passes.</div><div class="ttdef"><b>Definition:</b> <a href="JITLink_8h_source.html#l01515">JITLink.h:1515</a></div></div>
<div class="ttc" id="aSILowerControlFlow_8cpp_html_a4868c5d81c5ccc98c47aeab6244346a0"><div class="ttname"><a href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a></div><div class="ttdeci">assert(ImpDefSCC.getReg()==AMDGPU::SCC &amp;&amp;ImpDefSCC.isDef())</div></div>
<div class="ttc" id="alib_2Target_2ARM_2README_8txt_html_ae2bb081d94f22e64ca6bc4bd58512a93"><div class="ttname"><a href="lib_2Target_2ARM_2README_8txt.html#ae2bb081d94f22e64ca6bc4bd58512a93">memcpy</a></div><div class="ttdeci">&lt;%struct.s * &gt; cast struct s *S to sbyte *&lt; sbyte * &gt; sbyte uint cast struct s *agg result to sbyte *&lt; sbyte * &gt; sbyte uint cast struct s *memtmp to sbyte *&lt; sbyte * &gt; sbyte uint ret void llc ends up issuing two memcpy or custom lower memcpy(of small size) to be ldmia/stmia. I think option 2 is better but the current register allocator cannot allocate a chunk of registers at a time. A feasible temporary solution is to use specific physical registers at the lowering time for small(&lt;</div></div>
<div class="ttc" id="astructllvm_1_1jitlink_1_1PassConfiguration_html_a37decb1a4d14127fabb251c498274d0b"><div class="ttname"><a href="structllvm_1_1jitlink_1_1PassConfiguration.html#a37decb1a4d14127fabb251c498274d0b">llvm::jitlink::PassConfiguration::PreFixupPasses</a></div><div class="ttdeci">LinkGraphPassList PreFixupPasses</div><div class="ttdoc">Pre-fixup passes.</div><div class="ttdef"><b>Definition:</b> <a href="JITLink_8h_source.html#l01561">JITLink.h:1561</a></div></div>
<div class="ttc" id="aclassllvm_1_1jitlink_1_1JITLinkContext_html_a12d82000029d85aa956dc187d9a81511"><div class="ttname"><a href="classllvm_1_1jitlink_1_1JITLinkContext.html#a12d82000029d85aa956dc187d9a81511">llvm::jitlink::JITLinkContext::LookupMap</a></div><div class="ttdeci">DenseMap&lt; StringRef, SymbolLookupFlags &gt; LookupMap</div><div class="ttdef"><b>Definition:</b> <a href="JITLink_8h_source.html#l01615">JITLink.h:1615</a></div></div>
<div class="ttc" id="anamespacellvm_html_a10f3d955592ae2bc745f57e5b48ae115"><div class="ttname"><a href="namespacellvm.html#a10f3d955592ae2bc745f57e5b48ae115">llvm::size</a></div><div class="ttdeci">auto size(R &amp;&amp;Range, std::enable_if_t&lt; std::is_base_of&lt; std::random_access_iterator_tag, typename std::iterator_traits&lt; decltype(Range.begin())&gt;::iterator_category &gt;::value, void &gt; *=nullptr)</div><div class="ttdoc">Get the size of a range.</div><div class="ttdef"><b>Definition:</b> <a href="STLExtras_8h_source.html#l01515">STLExtras.h:1515</a></div></div>
<div class="ttc" id="astructllvm_1_1jitlink_1_1PassConfiguration_html_a617bac95c4003dd176fa5cc119d2a919"><div class="ttname"><a href="structllvm_1_1jitlink_1_1PassConfiguration.html#a617bac95c4003dd176fa5cc119d2a919">llvm::jitlink::PassConfiguration::PostFixupPasses</a></div><div class="ttdeci">LinkGraphPassList PostFixupPasses</div><div class="ttdoc">Post-fixup passes.</div><div class="ttdef"><b>Definition:</b> <a href="JITLink_8h_source.html#l01570">JITLink.h:1570</a></div></div>
<div class="ttc" id="anamespacellvm_1_1jitlink_html_a5577d77714131f489520a8852fa99987"><div class="ttname"><a href="namespacellvm_1_1jitlink.html#a5577d77714131f489520a8852fa99987">llvm::jitlink::createLookupContinuation</a></div><div class="ttdeci">std::unique_ptr&lt; JITLinkAsyncLookupContinuation &gt; createLookupContinuation(Continuation Cont)</div><div class="ttdoc">Create a lookup continuation from a function object.</div><div class="ttdef"><b>Definition:</b> <a href="JITLink_8h_source.html#l01598">JITLink.h:1598</a></div></div>
<div class="ttc" id="alib_2Target_2ARM_2README_8txt_html_a1b45f45820a60c09244a87eb59824aec"><div class="ttname"><a href="lib_2Target_2ARM_2README_8txt.html#a1b45f45820a60c09244a87eb59824aec">S</a></div><div class="ttdeci">add sub stmia L5 ldr r0 bl L_printf $stub Instead of a and a wouldn t it be better to do three moves *Return an aggregate type is even return S</div><div class="ttdef"><b>Definition:</b> <a href="lib_2Target_2ARM_2README_8txt_source.html#l00211">README.txt:210</a></div></div>
<div class="ttc" id="aclassllvm_1_1jitlink_1_1JITLinkerBase_html_a540403a2c9ac6bf4750690bba0eb74c5"><div class="ttname"><a href="classllvm_1_1jitlink_1_1JITLinkerBase.html#a540403a2c9ac6bf4750690bba0eb74c5">llvm::jitlink::JITLinkerBase::SegmentLayoutMap</a></div><div class="ttdeci">DenseMap&lt; unsigned, SegmentLayout &gt; SegmentLayoutMap</div><div class="ttdef"><b>Definition:</b> <a href="JITLinkGeneric_8h_source.html#l00052">JITLinkGeneric.h:52</a></div></div>
<div class="ttc" id="aclassllvm_1_1Error_html"><div class="ttname"><a href="classllvm_1_1Error.html">llvm::Error</a></div><div class="ttdoc">Lightweight error class with error context and mandatory checking.</div><div class="ttdef"><b>Definition:</b> <a href="llvm_2Support_2Error_8h_source.html#l00157">Error.h:157</a></div></div>
<div class="ttc" id="anamespacellvm_1_1jitlink_html_a278b50a28b5c8c2c7338d41b70f28798aa1734373fb555ce75d3e33411f9ea827"><div class="ttname"><a href="namespacellvm_1_1jitlink.html#a278b50a28b5c8c2c7338d41b70f28798aa1734373fb555ce75d3e33411f9ea827">llvm::jitlink::SymbolLookupFlags::RequiredSymbol</a></div><div class="ttdeci">@ RequiredSymbol</div></div>
<div class="ttc" id="anamespacellvm_html_a830041552b81a6cea1f497490d0f41d9"><div class="ttname"><a href="namespacellvm.html#a830041552b81a6cea1f497490d0f41d9">llvm::sort</a></div><div class="ttdeci">void sort(IteratorTy Start, IteratorTy End)</div><div class="ttdef"><b>Definition:</b> <a href="STLExtras_8h_source.html#l01475">STLExtras.h:1475</a></div></div>
<div class="ttc" id="anamespacellvm_html_a2b9aa96a24878fd7e3262812346c6c26"><div class="ttname"><a href="namespacellvm.html#a2b9aa96a24878fd7e3262812346c6c26">llvm::JITTargetAddress</a></div><div class="ttdeci">uint64_t JITTargetAddress</div><div class="ttdoc">Represents an address in the target process's address space.</div><div class="ttdef"><b>Definition:</b> <a href="JITSymbol_8h_source.html#l00042">JITSymbol.h:42</a></div></div>
<div class="ttc" id="aclassllvm_1_1Expected_html_a94789df4ebd03dc008e8adebaa66ac1f"><div class="ttname"><a href="classllvm_1_1Expected.html#a94789df4ebd03dc008e8adebaa66ac1f">llvm::Expected::takeError</a></div><div class="ttdeci">Error takeError()</div><div class="ttdoc">Take ownership of the stored error.</div><div class="ttdef"><b>Definition:</b> <a href="llvm_2Support_2Error_8h_source.html#l00590">Error.h:590</a></div></div>
<div class="ttc" id="astructllvm_1_1jitlink_1_1PassConfiguration_html_a084adb14a6ed485ceafa7aeb5ddcdba9"><div class="ttname"><a href="structllvm_1_1jitlink_1_1PassConfiguration.html#a084adb14a6ed485ceafa7aeb5ddcdba9">llvm::jitlink::PassConfiguration::PostAllocationPasses</a></div><div class="ttdeci">LinkGraphPassList PostAllocationPasses</div><div class="ttdoc">Post-allocation passes.</div><div class="ttdef"><b>Definition:</b> <a href="JITLink_8h_source.html#l01550">JITLink.h:1550</a></div></div>
<div class="ttc" id="anamespacellvm_html_a81b52e18d84e3cc61df7e897bba1b259"><div class="ttname"><a href="namespacellvm.html#a81b52e18d84e3cc61df7e897bba1b259">llvm::max</a></div><div class="ttdeci">Align max(MaybeAlign Lhs, Align Rhs)</div><div class="ttdef"><b>Definition:</b> <a href="Alignment_8h_source.html#l00340">Alignment.h:340</a></div></div>
<div class="ttc" id="astructllvm_1_1jitlink_1_1PassConfiguration_html_ac2b6c33f0953b534738fb8d0a02e526d"><div class="ttname"><a href="structllvm_1_1jitlink_1_1PassConfiguration.html#ac2b6c33f0953b534738fb8d0a02e526d">llvm::jitlink::PassConfiguration::PostPrunePasses</a></div><div class="ttdeci">LinkGraphPassList PostPrunePasses</div><div class="ttdoc">Post-prune passes.</div><div class="ttdef"><b>Definition:</b> <a href="JITLink_8h_source.html#l01535">JITLink.h:1535</a></div></div>
<div class="ttc" id="aJITLinkGeneric_8h_html"><div class="ttname"><a href="JITLinkGeneric_8h.html">JITLinkGeneric.h</a></div></div>
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated on Tue Feb 8 2022 04:36:39 for LLVM by&#160;<a href="http://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.8.20
</small></address>
</body>
</html>
