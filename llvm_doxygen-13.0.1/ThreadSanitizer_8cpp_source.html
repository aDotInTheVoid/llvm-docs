<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.20"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>LLVM: lib/Transforms/Instrumentation/ThreadSanitizer.cpp Source File</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<script type="text/x-mathjax-config">
  MathJax.Hub.Config({
    extensions: ["tex2jax.js"],
    jax: ["input/TeX","output/HTML-CSS"],
});
</script>
<script type="text/javascript" async="async" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.7/MathJax.js/MathJax.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">LLVM
   &#160;<span id="projectnumber">13.0.1</span>
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.20 -->
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',false,false,'search.php','Search');
});
/* @license-end */</script>
<div id="main-nav"></div>
<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="dir_97aefd0d527b934f1d99a682da8fe6a9.html">lib</a></li><li class="navelem"><a class="el" href="dir_a72932e0778af28115095468f6286ff8.html">Transforms</a></li><li class="navelem"><a class="el" href="dir_f844fca3b2393802daa002d01dc8623e.html">Instrumentation</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="headertitle">
<div class="title">ThreadSanitizer.cpp</div>  </div>
</div><!--header-->
<div class="contents">
<a href="ThreadSanitizer_8cpp.html">Go to the documentation of this file.</a><div class="fragment"><div class="line"><a name="l00001"></a><span class="lineno">    1</span>&#160;<span class="comment">//===-- ThreadSanitizer.cpp - race detector -------------------------------===//</span></div>
<div class="line"><a name="l00002"></a><span class="lineno">    2</span>&#160;<span class="comment">//</span></div>
<div class="line"><a name="l00003"></a><span class="lineno">    3</span>&#160;<span class="comment">// Part of the LLVM Project, under the Apache License v2.0 with LLVM Exceptions.</span></div>
<div class="line"><a name="l00004"></a><span class="lineno">    4</span>&#160;<span class="comment">// See https://llvm.org/LICENSE.txt for license information.</span></div>
<div class="line"><a name="l00005"></a><span class="lineno">    5</span>&#160;<span class="comment">// SPDX-License-Identifier: Apache-2.0 WITH LLVM-exception</span></div>
<div class="line"><a name="l00006"></a><span class="lineno">    6</span>&#160;<span class="comment">//</span></div>
<div class="line"><a name="l00007"></a><span class="lineno">    7</span>&#160;<span class="comment">//===----------------------------------------------------------------------===//</span></div>
<div class="line"><a name="l00008"></a><span class="lineno">    8</span>&#160;<span class="comment">//</span></div>
<div class="line"><a name="l00009"></a><span class="lineno">    9</span>&#160;<span class="comment">// This file is a part of ThreadSanitizer, a race detector.</span></div>
<div class="line"><a name="l00010"></a><span class="lineno">   10</span>&#160;<span class="comment">//</span></div>
<div class="line"><a name="l00011"></a><span class="lineno">   11</span>&#160;<span class="comment">// The tool is under development, for the details about previous versions see</span></div>
<div class="line"><a name="l00012"></a><span class="lineno">   12</span>&#160;<span class="comment">// http://code.google.com/p/data-race-test</span></div>
<div class="line"><a name="l00013"></a><span class="lineno">   13</span>&#160;<span class="comment">//</span></div>
<div class="line"><a name="l00014"></a><span class="lineno">   14</span>&#160;<span class="comment">// The instrumentation phase is quite simple:</span></div>
<div class="line"><a name="l00015"></a><span class="lineno">   15</span>&#160;<span class="comment">//   - Insert calls to run-time library before every memory access.</span></div>
<div class="line"><a name="l00016"></a><span class="lineno">   16</span>&#160;<span class="comment">//      - Optimizations may apply to avoid instrumenting some of the accesses.</span></div>
<div class="line"><a name="l00017"></a><span class="lineno">   17</span>&#160;<span class="comment">//   - Insert calls at function entry/exit.</span></div>
<div class="line"><a name="l00018"></a><span class="lineno">   18</span>&#160;<span class="comment">// The rest is handled by the run-time library.</span></div>
<div class="line"><a name="l00019"></a><span class="lineno">   19</span>&#160;<span class="comment">//===----------------------------------------------------------------------===//</span></div>
<div class="line"><a name="l00020"></a><span class="lineno">   20</span>&#160; </div>
<div class="line"><a name="l00021"></a><span class="lineno">   21</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="ThreadSanitizer_8h.html">llvm/Transforms/Instrumentation/ThreadSanitizer.h</a>&quot;</span></div>
<div class="line"><a name="l00022"></a><span class="lineno">   22</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="DenseMap_8h.html">llvm/ADT/DenseMap.h</a>&quot;</span></div>
<div class="line"><a name="l00023"></a><span class="lineno">   23</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="Optional_8h.html">llvm/ADT/Optional.h</a>&quot;</span></div>
<div class="line"><a name="l00024"></a><span class="lineno">   24</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="SmallString_8h.html">llvm/ADT/SmallString.h</a>&quot;</span></div>
<div class="line"><a name="l00025"></a><span class="lineno">   25</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="SmallVector_8h.html">llvm/ADT/SmallVector.h</a>&quot;</span></div>
<div class="line"><a name="l00026"></a><span class="lineno">   26</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="Statistic_8h.html">llvm/ADT/Statistic.h</a>&quot;</span></div>
<div class="line"><a name="l00027"></a><span class="lineno">   27</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="StringExtras_8h.html">llvm/ADT/StringExtras.h</a>&quot;</span></div>
<div class="line"><a name="l00028"></a><span class="lineno">   28</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="CaptureTracking_8h.html">llvm/Analysis/CaptureTracking.h</a>&quot;</span></div>
<div class="line"><a name="l00029"></a><span class="lineno">   29</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="TargetLibraryInfo_8h.html">llvm/Analysis/TargetLibraryInfo.h</a>&quot;</span></div>
<div class="line"><a name="l00030"></a><span class="lineno">   30</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="ValueTracking_8h.html">llvm/Analysis/ValueTracking.h</a>&quot;</span></div>
<div class="line"><a name="l00031"></a><span class="lineno">   31</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="DataLayout_8h.html">llvm/IR/DataLayout.h</a>&quot;</span></div>
<div class="line"><a name="l00032"></a><span class="lineno">   32</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="Function_8h.html">llvm/IR/Function.h</a>&quot;</span></div>
<div class="line"><a name="l00033"></a><span class="lineno">   33</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="IRBuilder_8h.html">llvm/IR/IRBuilder.h</a>&quot;</span></div>
<div class="line"><a name="l00034"></a><span class="lineno">   34</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="Instructions_8h.html">llvm/IR/Instructions.h</a>&quot;</span></div>
<div class="line"><a name="l00035"></a><span class="lineno">   35</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="IntrinsicInst_8h.html">llvm/IR/IntrinsicInst.h</a>&quot;</span></div>
<div class="line"><a name="l00036"></a><span class="lineno">   36</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="Intrinsics_8h.html">llvm/IR/Intrinsics.h</a>&quot;</span></div>
<div class="line"><a name="l00037"></a><span class="lineno">   37</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="LLVMContext_8h.html">llvm/IR/LLVMContext.h</a>&quot;</span></div>
<div class="line"><a name="l00038"></a><span class="lineno">   38</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="Metadata_8h.html">llvm/IR/Metadata.h</a>&quot;</span></div>
<div class="line"><a name="l00039"></a><span class="lineno">   39</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="Module_8h.html">llvm/IR/Module.h</a>&quot;</span></div>
<div class="line"><a name="l00040"></a><span class="lineno">   40</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="Type_8h.html">llvm/IR/Type.h</a>&quot;</span></div>
<div class="line"><a name="l00041"></a><span class="lineno">   41</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="InitializePasses_8h.html">llvm/InitializePasses.h</a>&quot;</span></div>
<div class="line"><a name="l00042"></a><span class="lineno">   42</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="InstrProf_8h.html">llvm/ProfileData/InstrProf.h</a>&quot;</span></div>
<div class="line"><a name="l00043"></a><span class="lineno">   43</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="CommandLine_8h.html">llvm/Support/CommandLine.h</a>&quot;</span></div>
<div class="line"><a name="l00044"></a><span class="lineno">   44</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="Debug_8h.html">llvm/Support/Debug.h</a>&quot;</span></div>
<div class="line"><a name="l00045"></a><span class="lineno">   45</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="MathExtras_8h.html">llvm/Support/MathExtras.h</a>&quot;</span></div>
<div class="line"><a name="l00046"></a><span class="lineno">   46</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="raw__ostream_8h.html">llvm/Support/raw_ostream.h</a>&quot;</span></div>
<div class="line"><a name="l00047"></a><span class="lineno">   47</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="Instrumentation_8h.html">llvm/Transforms/Instrumentation.h</a>&quot;</span></div>
<div class="line"><a name="l00048"></a><span class="lineno">   48</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="BasicBlockUtils_8h.html">llvm/Transforms/Utils/BasicBlockUtils.h</a>&quot;</span></div>
<div class="line"><a name="l00049"></a><span class="lineno">   49</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="EscapeEnumerator_8h.html">llvm/Transforms/Utils/EscapeEnumerator.h</a>&quot;</span></div>
<div class="line"><a name="l00050"></a><span class="lineno">   50</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="Transforms_2Utils_2Local_8h.html">llvm/Transforms/Utils/Local.h</a>&quot;</span></div>
<div class="line"><a name="l00051"></a><span class="lineno">   51</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="ModuleUtils_8h.html">llvm/Transforms/Utils/ModuleUtils.h</a>&quot;</span></div>
<div class="line"><a name="l00052"></a><span class="lineno">   52</span>&#160; </div>
<div class="line"><a name="l00053"></a><span class="lineno">   53</span>&#160;<span class="keyword">using namespace </span><a class="code" href="namespacellvm.html">llvm</a>;</div>
<div class="line"><a name="l00054"></a><span class="lineno">   54</span>&#160; </div>
<div class="line"><a name="l00055"></a><span class="lineno"><a class="line" href="ThreadSanitizer_8cpp.html#ad78e062f62e0d6e453941fb4ca843e4d">   55</a></span>&#160;<span class="preprocessor">#define DEBUG_TYPE &quot;tsan&quot;</span></div>
<div class="line"><a name="l00056"></a><span class="lineno">   56</span>&#160; </div>
<div class="line"><a name="l00057"></a><span class="lineno"><a class="line" href="ThreadSanitizer_8cpp.html#ae9a6c12fdf4ec6cd050e9c320ceac9f6">   57</a></span>&#160;<span class="keyword">static</span> <a class="code" href="classllvm_1_1cl_1_1opt.html">cl::opt&lt;bool&gt;</a> <a class="code" href="ThreadSanitizer_8cpp.html#ae9a6c12fdf4ec6cd050e9c320ceac9f6">ClInstrumentMemoryAccesses</a>(</div>
<div class="line"><a name="l00058"></a><span class="lineno">   58</span>&#160;    <span class="stringliteral">&quot;tsan-instrument-memory-accesses&quot;</span>, <a class="code" href="namespacellvm_1_1cl.html#a10a041239ae1870cfcc064bfaa79fb65">cl::init</a>(<span class="keyword">true</span>),</div>
<div class="line"><a name="l00059"></a><span class="lineno">   59</span>&#160;    <a class="code" href="structllvm_1_1cl_1_1desc.html">cl::desc</a>(<span class="stringliteral">&quot;Instrument memory accesses&quot;</span>), <a class="code" href="namespacellvm_1_1cl.html#a68075925a54790e71ca790e1d4f21a40a263ac008d8d31f13ce460395fc4cf7e6">cl::Hidden</a>);</div>
<div class="line"><a name="l00060"></a><span class="lineno">   60</span>&#160;<span class="keyword">static</span> <a class="code" href="classllvm_1_1cl_1_1opt.html">cl::opt&lt;bool&gt;</a></div>
<div class="line"><a name="l00061"></a><span class="lineno"><a class="line" href="ThreadSanitizer_8cpp.html#ae40d4d90566731cab0da1ce17eff68cc">   61</a></span>&#160;    <a class="code" href="ThreadSanitizer_8cpp.html#ae40d4d90566731cab0da1ce17eff68cc">ClInstrumentFuncEntryExit</a>(<span class="stringliteral">&quot;tsan-instrument-func-entry-exit&quot;</span>, <a class="code" href="namespacellvm_1_1cl.html#a10a041239ae1870cfcc064bfaa79fb65">cl::init</a>(<span class="keyword">true</span>),</div>
<div class="line"><a name="l00062"></a><span class="lineno">   62</span>&#160;                              <a class="code" href="structllvm_1_1cl_1_1desc.html">cl::desc</a>(<span class="stringliteral">&quot;Instrument function entry and exit&quot;</span>),</div>
<div class="line"><a name="l00063"></a><span class="lineno">   63</span>&#160;                              <a class="code" href="namespacellvm_1_1cl.html#a68075925a54790e71ca790e1d4f21a40a263ac008d8d31f13ce460395fc4cf7e6">cl::Hidden</a>);</div>
<div class="line"><a name="l00064"></a><span class="lineno"><a class="line" href="ThreadSanitizer_8cpp.html#a4eb659c41efee9cbd22d94b4c53da595">   64</a></span>&#160;<span class="keyword">static</span> <a class="code" href="classllvm_1_1cl_1_1opt.html">cl::opt&lt;bool&gt;</a> <a class="code" href="ThreadSanitizer_8cpp.html#a4eb659c41efee9cbd22d94b4c53da595">ClHandleCxxExceptions</a>(</div>
<div class="line"><a name="l00065"></a><span class="lineno">   65</span>&#160;    <span class="stringliteral">&quot;tsan-handle-cxx-exceptions&quot;</span>, <a class="code" href="namespacellvm_1_1cl.html#a10a041239ae1870cfcc064bfaa79fb65">cl::init</a>(<span class="keyword">true</span>),</div>
<div class="line"><a name="l00066"></a><span class="lineno">   66</span>&#160;    <a class="code" href="structllvm_1_1cl_1_1desc.html">cl::desc</a>(<span class="stringliteral">&quot;Handle C++ exceptions (insert cleanup blocks for unwinding)&quot;</span>),</div>
<div class="line"><a name="l00067"></a><span class="lineno">   67</span>&#160;    <a class="code" href="namespacellvm_1_1cl.html#a68075925a54790e71ca790e1d4f21a40a263ac008d8d31f13ce460395fc4cf7e6">cl::Hidden</a>);</div>
<div class="line"><a name="l00068"></a><span class="lineno"><a class="line" href="ThreadSanitizer_8cpp.html#a729cb67fb2583fad4e5ff29acbbac3e8">   68</a></span>&#160;<span class="keyword">static</span> <a class="code" href="classllvm_1_1cl_1_1opt.html">cl::opt&lt;bool&gt;</a> <a class="code" href="ThreadSanitizer_8cpp.html#a729cb67fb2583fad4e5ff29acbbac3e8">ClInstrumentAtomics</a>(<span class="stringliteral">&quot;tsan-instrument-atomics&quot;</span>,</div>
<div class="line"><a name="l00069"></a><span class="lineno">   69</span>&#160;                                         <a class="code" href="namespacellvm_1_1cl.html#a10a041239ae1870cfcc064bfaa79fb65">cl::init</a>(<span class="keyword">true</span>),</div>
<div class="line"><a name="l00070"></a><span class="lineno">   70</span>&#160;                                         <a class="code" href="structllvm_1_1cl_1_1desc.html">cl::desc</a>(<span class="stringliteral">&quot;Instrument atomics&quot;</span>),</div>
<div class="line"><a name="l00071"></a><span class="lineno">   71</span>&#160;                                         <a class="code" href="namespacellvm_1_1cl.html#a68075925a54790e71ca790e1d4f21a40a263ac008d8d31f13ce460395fc4cf7e6">cl::Hidden</a>);</div>
<div class="line"><a name="l00072"></a><span class="lineno"><a class="line" href="ThreadSanitizer_8cpp.html#aaf71ac0f2b61dccfb3e4cd42cc134ea8">   72</a></span>&#160;<span class="keyword">static</span> <a class="code" href="classllvm_1_1cl_1_1opt.html">cl::opt&lt;bool&gt;</a> <a class="code" href="ThreadSanitizer_8cpp.html#aaf71ac0f2b61dccfb3e4cd42cc134ea8">ClInstrumentMemIntrinsics</a>(</div>
<div class="line"><a name="l00073"></a><span class="lineno">   73</span>&#160;    <span class="stringliteral">&quot;tsan-instrument-memintrinsics&quot;</span>, <a class="code" href="namespacellvm_1_1cl.html#a10a041239ae1870cfcc064bfaa79fb65">cl::init</a>(<span class="keyword">true</span>),</div>
<div class="line"><a name="l00074"></a><span class="lineno">   74</span>&#160;    <a class="code" href="structllvm_1_1cl_1_1desc.html">cl::desc</a>(<span class="stringliteral">&quot;Instrument memintrinsics (memset/memcpy/memmove)&quot;</span>), <a class="code" href="namespacellvm_1_1cl.html#a68075925a54790e71ca790e1d4f21a40a263ac008d8d31f13ce460395fc4cf7e6">cl::Hidden</a>);</div>
<div class="line"><a name="l00075"></a><span class="lineno"><a class="line" href="ThreadSanitizer_8cpp.html#af0781d5911a70fc919235ef56d03697c">   75</a></span>&#160;<span class="keyword">static</span> <a class="code" href="classllvm_1_1cl_1_1opt.html">cl::opt&lt;bool&gt;</a> <a class="code" href="ThreadSanitizer_8cpp.html#af0781d5911a70fc919235ef56d03697c">ClDistinguishVolatile</a>(</div>
<div class="line"><a name="l00076"></a><span class="lineno">   76</span>&#160;    <span class="stringliteral">&quot;tsan-distinguish-volatile&quot;</span>, <a class="code" href="namespacellvm_1_1cl.html#a10a041239ae1870cfcc064bfaa79fb65">cl::init</a>(<span class="keyword">false</span>),</div>
<div class="line"><a name="l00077"></a><span class="lineno">   77</span>&#160;    <a class="code" href="structllvm_1_1cl_1_1desc.html">cl::desc</a>(<span class="stringliteral">&quot;Emit special instrumentation for accesses to volatiles&quot;</span>),</div>
<div class="line"><a name="l00078"></a><span class="lineno">   78</span>&#160;    <a class="code" href="namespacellvm_1_1cl.html#a68075925a54790e71ca790e1d4f21a40a263ac008d8d31f13ce460395fc4cf7e6">cl::Hidden</a>);</div>
<div class="line"><a name="l00079"></a><span class="lineno"><a class="line" href="ThreadSanitizer_8cpp.html#a4ceb95d271f52528fa1bc453a520993d">   79</a></span>&#160;<span class="keyword">static</span> <a class="code" href="classllvm_1_1cl_1_1opt.html">cl::opt&lt;bool&gt;</a> <a class="code" href="ThreadSanitizer_8cpp.html#a4ceb95d271f52528fa1bc453a520993d">ClInstrumentReadBeforeWrite</a>(</div>
<div class="line"><a name="l00080"></a><span class="lineno">   80</span>&#160;    <span class="stringliteral">&quot;tsan-instrument-read-before-write&quot;</span>, <a class="code" href="namespacellvm_1_1cl.html#a10a041239ae1870cfcc064bfaa79fb65">cl::init</a>(<span class="keyword">false</span>),</div>
<div class="line"><a name="l00081"></a><span class="lineno">   81</span>&#160;    <a class="code" href="structllvm_1_1cl_1_1desc.html">cl::desc</a>(<span class="stringliteral">&quot;Do not eliminate read instrumentation for read-before-writes&quot;</span>),</div>
<div class="line"><a name="l00082"></a><span class="lineno">   82</span>&#160;    <a class="code" href="namespacellvm_1_1cl.html#a68075925a54790e71ca790e1d4f21a40a263ac008d8d31f13ce460395fc4cf7e6">cl::Hidden</a>);</div>
<div class="line"><a name="l00083"></a><span class="lineno"><a class="line" href="ThreadSanitizer_8cpp.html#a3383f3057f7633e64153265d68ba32f4">   83</a></span>&#160;<span class="keyword">static</span> <a class="code" href="classllvm_1_1cl_1_1opt.html">cl::opt&lt;bool&gt;</a> <a class="code" href="ThreadSanitizer_8cpp.html#a3383f3057f7633e64153265d68ba32f4">ClCompoundReadBeforeWrite</a>(</div>
<div class="line"><a name="l00084"></a><span class="lineno">   84</span>&#160;    <span class="stringliteral">&quot;tsan-compound-read-before-write&quot;</span>, <a class="code" href="namespacellvm_1_1cl.html#a10a041239ae1870cfcc064bfaa79fb65">cl::init</a>(<span class="keyword">false</span>),</div>
<div class="line"><a name="l00085"></a><span class="lineno">   85</span>&#160;    <a class="code" href="structllvm_1_1cl_1_1desc.html">cl::desc</a>(<span class="stringliteral">&quot;Emit special compound instrumentation for reads-before-writes&quot;</span>),</div>
<div class="line"><a name="l00086"></a><span class="lineno">   86</span>&#160;    <a class="code" href="namespacellvm_1_1cl.html#a68075925a54790e71ca790e1d4f21a40a263ac008d8d31f13ce460395fc4cf7e6">cl::Hidden</a>);</div>
<div class="line"><a name="l00087"></a><span class="lineno">   87</span>&#160; </div>
<div class="line"><a name="l00088"></a><span class="lineno"><a class="line" href="ThreadSanitizer_8cpp.html#a70700f8036b11342dbf363f4f81f529f">   88</a></span>&#160;<a class="code" href="namespacellvm.html#a0bf75467957937ad23ad7be19f489934">STATISTIC</a>(NumInstrumentedReads, <span class="stringliteral">&quot;Number of instrumented reads&quot;</span>);</div>
<div class="line"><a name="l00089"></a><span class="lineno"><a class="line" href="ThreadSanitizer_8cpp.html#a8910bcb5acc6a97247337ab859f77190">   89</a></span>&#160;<a class="code" href="namespacellvm.html#a0bf75467957937ad23ad7be19f489934">STATISTIC</a>(NumInstrumentedWrites, <span class="stringliteral">&quot;Number of instrumented writes&quot;</span>);</div>
<div class="line"><a name="l00090"></a><span class="lineno"><a class="line" href="ThreadSanitizer_8cpp.html#a5249ef5389a8a7ba678bdcdb8b294aa6">   90</a></span>&#160;<a class="code" href="namespacellvm.html#a0bf75467957937ad23ad7be19f489934">STATISTIC</a>(NumOmittedReadsBeforeWrite,</div>
<div class="line"><a name="l00091"></a><span class="lineno">   91</span>&#160;          <span class="stringliteral">&quot;Number of reads ignored due to following writes&quot;</span>);</div>
<div class="line"><a name="l00092"></a><span class="lineno"><a class="line" href="ThreadSanitizer_8cpp.html#a5c0196fd55a523f70e27369abcf3ad26">   92</a></span>&#160;<a class="code" href="namespacellvm.html#a0bf75467957937ad23ad7be19f489934">STATISTIC</a>(NumAccessesWithBadSize, <span class="stringliteral">&quot;Number of accesses with bad size&quot;</span>);</div>
<div class="line"><a name="l00093"></a><span class="lineno"><a class="line" href="ThreadSanitizer_8cpp.html#a97dbc8dc0cccfaa379ff964583fc1fc9">   93</a></span>&#160;<a class="code" href="namespacellvm.html#a0bf75467957937ad23ad7be19f489934">STATISTIC</a>(NumInstrumentedVtableWrites, <span class="stringliteral">&quot;Number of vtable ptr writes&quot;</span>);</div>
<div class="line"><a name="l00094"></a><span class="lineno"><a class="line" href="ThreadSanitizer_8cpp.html#afaaa53135214ddb2f4e0f2e2f54ac593">   94</a></span>&#160;<a class="code" href="namespacellvm.html#a0bf75467957937ad23ad7be19f489934">STATISTIC</a>(NumInstrumentedVtableReads, <span class="stringliteral">&quot;Number of vtable ptr reads&quot;</span>);</div>
<div class="line"><a name="l00095"></a><span class="lineno"><a class="line" href="ThreadSanitizer_8cpp.html#a9db35ceabedb281021b089353690d8d0">   95</a></span>&#160;<a class="code" href="namespacellvm.html#a0bf75467957937ad23ad7be19f489934">STATISTIC</a>(NumOmittedReadsFromConstantGlobals,</div>
<div class="line"><a name="l00096"></a><span class="lineno">   96</span>&#160;          <span class="stringliteral">&quot;Number of reads from constant globals&quot;</span>);</div>
<div class="line"><a name="l00097"></a><span class="lineno"><a class="line" href="ThreadSanitizer_8cpp.html#a112af820504e22ee7f84b6cc9e467a77">   97</a></span>&#160;<a class="code" href="namespacellvm.html#a0bf75467957937ad23ad7be19f489934">STATISTIC</a>(NumOmittedReadsFromVtable, <span class="stringliteral">&quot;Number of vtable reads&quot;</span>);</div>
<div class="line"><a name="l00098"></a><span class="lineno"><a class="line" href="ThreadSanitizer_8cpp.html#a265e8b118a4345a35c6cf7cb2fd605c7">   98</a></span>&#160;<a class="code" href="namespacellvm.html#a0bf75467957937ad23ad7be19f489934">STATISTIC</a>(NumOmittedNonCaptured, <span class="stringliteral">&quot;Number of accesses ignored due to capturing&quot;</span>);</div>
<div class="line"><a name="l00099"></a><span class="lineno">   99</span>&#160; </div>
<div class="line"><a name="l00100"></a><span class="lineno"><a class="line" href="ThreadSanitizer_8cpp.html#a38c0f7b9db64da1261f7c7f1db454663">  100</a></span>&#160;<span class="keyword">const</span> <span class="keywordtype">char</span> <a class="code" href="ThreadSanitizer_8cpp.html#a38c0f7b9db64da1261f7c7f1db454663">kTsanModuleCtorName</a>[] = <span class="stringliteral">&quot;tsan.module_ctor&quot;</span>;</div>
<div class="line"><a name="l00101"></a><span class="lineno"><a class="line" href="ThreadSanitizer_8cpp.html#a7ffdf0ed8f4f0fd9b071c1bb28128a99">  101</a></span>&#160;<span class="keyword">const</span> <span class="keywordtype">char</span> <a class="code" href="ThreadSanitizer_8cpp.html#a7ffdf0ed8f4f0fd9b071c1bb28128a99">kTsanInitName</a>[] = <span class="stringliteral">&quot;__tsan_init&quot;</span>;</div>
<div class="line"><a name="l00102"></a><span class="lineno">  102</span>&#160; </div>
<div class="line"><a name="l00103"></a><span class="lineno">  103</span>&#160;<span class="keyword">namespace </span>{</div>
<div class="line"><a name="l00104"></a><span class="lineno">  104</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l00105"></a><span class="lineno">  105</span>&#160;<span class="comment">/// ThreadSanitizer: instrument the code in module to find races.</span></div>
<div class="line"><a name="l00106"></a><span class="lineno">  106</span>&#160;<span class="comment">///</span></div>
<div class="line"><a name="l00107"></a><span class="lineno">  107</span>&#160;<span class="comment">/// Instantiating ThreadSanitizer inserts the tsan runtime library API function</span></div>
<div class="line"><a name="l00108"></a><span class="lineno">  108</span>&#160;<span class="comment">/// declarations into the module if they don&#39;t exist already. Instantiating</span></div>
<div class="line"><a name="l00109"></a><span class="lineno">  109</span>&#160;<span class="comment">/// ensures the __tsan_init function is in the list of global constructors for</span></div>
<div class="line"><a name="l00110"></a><span class="lineno">  110</span>&#160;<span class="comment">/// the module.</span></div>
<div class="line"><a name="l00111"></a><span class="lineno">  111</span>&#160;<span class="comment"></span><span class="keyword">struct </span>ThreadSanitizer {</div>
<div class="line"><a name="l00112"></a><span class="lineno">  112</span>&#160;  ThreadSanitizer() {</div>
<div class="line"><a name="l00113"></a><span class="lineno">  113</span>&#160;    <span class="comment">// Sanity check options and warn user.</span></div>
<div class="line"><a name="l00114"></a><span class="lineno">  114</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="ThreadSanitizer_8cpp.html#a4ceb95d271f52528fa1bc453a520993d">ClInstrumentReadBeforeWrite</a> &amp;&amp; <a class="code" href="ThreadSanitizer_8cpp.html#a3383f3057f7633e64153265d68ba32f4">ClCompoundReadBeforeWrite</a>) {</div>
<div class="line"><a name="l00115"></a><span class="lineno">  115</span>&#160;      <a class="code" href="namespacellvm.html#a9a7b5c68c90f85baaedaa854cc5002cc">errs</a>()</div>
<div class="line"><a name="l00116"></a><span class="lineno">  116</span>&#160;          &lt;&lt; <span class="stringliteral">&quot;warning: Option -tsan-compound-read-before-write has no effect &quot;</span></div>
<div class="line"><a name="l00117"></a><span class="lineno">  117</span>&#160;             <span class="stringliteral">&quot;when -tsan-instrument-read-before-write is set.\n&quot;</span>;</div>
<div class="line"><a name="l00118"></a><span class="lineno">  118</span>&#160;    }</div>
<div class="line"><a name="l00119"></a><span class="lineno">  119</span>&#160;  }</div>
<div class="line"><a name="l00120"></a><span class="lineno">  120</span>&#160; </div>
<div class="line"><a name="l00121"></a><span class="lineno">  121</span>&#160;  <span class="keywordtype">bool</span> sanitizeFunction(<a class="code" href="classllvm_1_1Function.html">Function</a> &amp;<a class="code" href="MD5_8cpp.html#a96d73bbd7af15cb1fc38c3f4a3bd82e9">F</a>, <span class="keyword">const</span> <a class="code" href="classllvm_1_1TargetLibraryInfo.html">TargetLibraryInfo</a> &amp;TLI);</div>
<div class="line"><a name="l00122"></a><span class="lineno">  122</span>&#160; </div>
<div class="line"><a name="l00123"></a><span class="lineno">  123</span>&#160;<span class="keyword">private</span>:</div>
<div class="line"><a name="l00124"></a><span class="lineno">  124</span>&#160;  <span class="comment">// Internal Instruction wrapper that contains more information about the</span></div>
<div class="line"><a name="l00125"></a><span class="lineno">  125</span>&#160;  <span class="comment">// Instruction from prior analysis.</span></div>
<div class="line"><a name="l00126"></a><span class="lineno">  126</span>&#160;  <span class="keyword">struct </span>InstructionInfo {</div>
<div class="line"><a name="l00127"></a><span class="lineno">  127</span>&#160;    <span class="comment">// Instrumentation emitted for this instruction is for a compounded set of</span></div>
<div class="line"><a name="l00128"></a><span class="lineno">  128</span>&#160;    <span class="comment">// read and write operations in the same basic block.</span></div>
<div class="line"><a name="l00129"></a><span class="lineno">  129</span>&#160;    <span class="keyword">static</span> constexpr <span class="keywordtype">unsigned</span> kCompoundRW = (1U &lt;&lt; 0);</div>
<div class="line"><a name="l00130"></a><span class="lineno">  130</span>&#160; </div>
<div class="line"><a name="l00131"></a><span class="lineno">  131</span>&#160;    <span class="keyword">explicit</span> InstructionInfo(<a class="code" href="classllvm_1_1Instruction.html">Instruction</a> *Inst) : Inst(Inst) {}</div>
<div class="line"><a name="l00132"></a><span class="lineno">  132</span>&#160; </div>
<div class="line"><a name="l00133"></a><span class="lineno">  133</span>&#160;    <a class="code" href="classllvm_1_1Instruction.html">Instruction</a> *Inst;</div>
<div class="line"><a name="l00134"></a><span class="lineno">  134</span>&#160;    <span class="keywordtype">unsigned</span> Flags = 0;</div>
<div class="line"><a name="l00135"></a><span class="lineno">  135</span>&#160;  };</div>
<div class="line"><a name="l00136"></a><span class="lineno">  136</span>&#160; </div>
<div class="line"><a name="l00137"></a><span class="lineno">  137</span>&#160;  <span class="keywordtype">void</span> <a class="code" href="TargetLibraryInfo_8cpp.html#a19d27915595e7f0a0ef271448bcdac6f">initialize</a>(<a class="code" href="classllvm_1_1Module.html">Module</a> &amp;<a class="code" href="lib_2Target_2X86_2README_8txt.html#ac88fe1d3a61b056a4f64fbbb156a62ff">M</a>);</div>
<div class="line"><a name="l00138"></a><span class="lineno">  138</span>&#160;  <span class="keywordtype">bool</span> instrumentLoadOrStore(<span class="keyword">const</span> InstructionInfo &amp;II, <span class="keyword">const</span> <a class="code" href="classllvm_1_1DataLayout.html">DataLayout</a> &amp;<a class="code" href="AArch64SLSHardening_8cpp.html#ad467c4ab9119043f9b7750ab986be61a">DL</a>);</div>
<div class="line"><a name="l00139"></a><span class="lineno">  139</span>&#160;  <span class="keywordtype">bool</span> instrumentAtomic(<a class="code" href="classllvm_1_1Instruction.html">Instruction</a> *<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>, <span class="keyword">const</span> <a class="code" href="classllvm_1_1DataLayout.html">DataLayout</a> &amp;<a class="code" href="AArch64SLSHardening_8cpp.html#ad467c4ab9119043f9b7750ab986be61a">DL</a>);</div>
<div class="line"><a name="l00140"></a><span class="lineno">  140</span>&#160;  <span class="keywordtype">bool</span> instrumentMemIntrinsic(<a class="code" href="classllvm_1_1Instruction.html">Instruction</a> *<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>);</div>
<div class="line"><a name="l00141"></a><span class="lineno">  141</span>&#160;  <span class="keywordtype">void</span> chooseInstructionsToInstrument(<a class="code" href="classllvm_1_1SmallVectorImpl.html">SmallVectorImpl&lt;Instruction *&gt;</a> &amp;Local,</div>
<div class="line"><a name="l00142"></a><span class="lineno">  142</span>&#160;                                      <a class="code" href="classllvm_1_1SmallVectorImpl.html">SmallVectorImpl&lt;InstructionInfo&gt;</a> &amp;All,</div>
<div class="line"><a name="l00143"></a><span class="lineno">  143</span>&#160;                                      <span class="keyword">const</span> <a class="code" href="classllvm_1_1DataLayout.html">DataLayout</a> &amp;<a class="code" href="AArch64SLSHardening_8cpp.html#ad467c4ab9119043f9b7750ab986be61a">DL</a>);</div>
<div class="line"><a name="l00144"></a><span class="lineno">  144</span>&#160;  <span class="keywordtype">bool</span> addrPointsToConstantData(<a class="code" href="classllvm_1_1Value.html">Value</a> *<a class="code" href="ELFObjHandler_8cpp.html#a9df82a8be2f17e80535a8937bf23e022">Addr</a>);</div>
<div class="line"><a name="l00145"></a><span class="lineno">  145</span>&#160;  <span class="keywordtype">int</span> getMemoryAccessFuncIndex(<a class="code" href="classllvm_1_1Type.html">Type</a> *OrigTy, <a class="code" href="classllvm_1_1Value.html">Value</a> *<a class="code" href="ELFObjHandler_8cpp.html#a9df82a8be2f17e80535a8937bf23e022">Addr</a>, <span class="keyword">const</span> <a class="code" href="classllvm_1_1DataLayout.html">DataLayout</a> &amp;<a class="code" href="AArch64SLSHardening_8cpp.html#ad467c4ab9119043f9b7750ab986be61a">DL</a>);</div>
<div class="line"><a name="l00146"></a><span class="lineno">  146</span>&#160;  <span class="keywordtype">void</span> InsertRuntimeIgnores(<a class="code" href="classllvm_1_1Function.html">Function</a> &amp;<a class="code" href="MD5_8cpp.html#a96d73bbd7af15cb1fc38c3f4a3bd82e9">F</a>);</div>
<div class="line"><a name="l00147"></a><span class="lineno">  147</span>&#160; </div>
<div class="line"><a name="l00148"></a><span class="lineno">  148</span>&#160;  <a class="code" href="classllvm_1_1Type.html">Type</a> *IntptrTy;</div>
<div class="line"><a name="l00149"></a><span class="lineno">  149</span>&#160;  <a class="code" href="classllvm_1_1FunctionCallee.html">FunctionCallee</a> TsanFuncEntry;</div>
<div class="line"><a name="l00150"></a><span class="lineno">  150</span>&#160;  <a class="code" href="classllvm_1_1FunctionCallee.html">FunctionCallee</a> TsanFuncExit;</div>
<div class="line"><a name="l00151"></a><span class="lineno">  151</span>&#160;  <a class="code" href="classllvm_1_1FunctionCallee.html">FunctionCallee</a> TsanIgnoreBegin;</div>
<div class="line"><a name="l00152"></a><span class="lineno">  152</span>&#160;  <a class="code" href="classllvm_1_1FunctionCallee.html">FunctionCallee</a> TsanIgnoreEnd;</div>
<div class="line"><a name="l00153"></a><span class="lineno">  153</span>&#160;  <span class="comment">// Accesses sizes are powers of two: 1, 2, 4, 8, 16.</span></div>
<div class="line"><a name="l00154"></a><span class="lineno">  154</span>&#160;  <span class="keyword">static</span> <span class="keyword">const</span> <span class="keywordtype">size_t</span> <a class="code" href="AddressSanitizer_8cpp.html#aa62a4d0672bab180dd339cda25b23b2e">kNumberOfAccessSizes</a> = 5;</div>
<div class="line"><a name="l00155"></a><span class="lineno">  155</span>&#160;  <a class="code" href="classllvm_1_1FunctionCallee.html">FunctionCallee</a> TsanRead[<a class="code" href="AddressSanitizer_8cpp.html#aa62a4d0672bab180dd339cda25b23b2e">kNumberOfAccessSizes</a>];</div>
<div class="line"><a name="l00156"></a><span class="lineno">  156</span>&#160;  <a class="code" href="classllvm_1_1FunctionCallee.html">FunctionCallee</a> TsanWrite[<a class="code" href="AddressSanitizer_8cpp.html#aa62a4d0672bab180dd339cda25b23b2e">kNumberOfAccessSizes</a>];</div>
<div class="line"><a name="l00157"></a><span class="lineno">  157</span>&#160;  <a class="code" href="classllvm_1_1FunctionCallee.html">FunctionCallee</a> TsanUnalignedRead[<a class="code" href="AddressSanitizer_8cpp.html#aa62a4d0672bab180dd339cda25b23b2e">kNumberOfAccessSizes</a>];</div>
<div class="line"><a name="l00158"></a><span class="lineno">  158</span>&#160;  <a class="code" href="classllvm_1_1FunctionCallee.html">FunctionCallee</a> TsanUnalignedWrite[<a class="code" href="AddressSanitizer_8cpp.html#aa62a4d0672bab180dd339cda25b23b2e">kNumberOfAccessSizes</a>];</div>
<div class="line"><a name="l00159"></a><span class="lineno">  159</span>&#160;  <a class="code" href="classllvm_1_1FunctionCallee.html">FunctionCallee</a> TsanVolatileRead[<a class="code" href="AddressSanitizer_8cpp.html#aa62a4d0672bab180dd339cda25b23b2e">kNumberOfAccessSizes</a>];</div>
<div class="line"><a name="l00160"></a><span class="lineno">  160</span>&#160;  <a class="code" href="classllvm_1_1FunctionCallee.html">FunctionCallee</a> TsanVolatileWrite[<a class="code" href="AddressSanitizer_8cpp.html#aa62a4d0672bab180dd339cda25b23b2e">kNumberOfAccessSizes</a>];</div>
<div class="line"><a name="l00161"></a><span class="lineno">  161</span>&#160;  <a class="code" href="classllvm_1_1FunctionCallee.html">FunctionCallee</a> TsanUnalignedVolatileRead[<a class="code" href="AddressSanitizer_8cpp.html#aa62a4d0672bab180dd339cda25b23b2e">kNumberOfAccessSizes</a>];</div>
<div class="line"><a name="l00162"></a><span class="lineno">  162</span>&#160;  <a class="code" href="classllvm_1_1FunctionCallee.html">FunctionCallee</a> TsanUnalignedVolatileWrite[<a class="code" href="AddressSanitizer_8cpp.html#aa62a4d0672bab180dd339cda25b23b2e">kNumberOfAccessSizes</a>];</div>
<div class="line"><a name="l00163"></a><span class="lineno">  163</span>&#160;  <a class="code" href="classllvm_1_1FunctionCallee.html">FunctionCallee</a> TsanCompoundRW[<a class="code" href="AddressSanitizer_8cpp.html#aa62a4d0672bab180dd339cda25b23b2e">kNumberOfAccessSizes</a>];</div>
<div class="line"><a name="l00164"></a><span class="lineno">  164</span>&#160;  <a class="code" href="classllvm_1_1FunctionCallee.html">FunctionCallee</a> TsanUnalignedCompoundRW[<a class="code" href="AddressSanitizer_8cpp.html#aa62a4d0672bab180dd339cda25b23b2e">kNumberOfAccessSizes</a>];</div>
<div class="line"><a name="l00165"></a><span class="lineno">  165</span>&#160;  <a class="code" href="classllvm_1_1FunctionCallee.html">FunctionCallee</a> TsanAtomicLoad[<a class="code" href="AddressSanitizer_8cpp.html#aa62a4d0672bab180dd339cda25b23b2e">kNumberOfAccessSizes</a>];</div>
<div class="line"><a name="l00166"></a><span class="lineno">  166</span>&#160;  <a class="code" href="classllvm_1_1FunctionCallee.html">FunctionCallee</a> TsanAtomicStore[<a class="code" href="AddressSanitizer_8cpp.html#aa62a4d0672bab180dd339cda25b23b2e">kNumberOfAccessSizes</a>];</div>
<div class="line"><a name="l00167"></a><span class="lineno">  167</span>&#160;  <a class="code" href="classllvm_1_1FunctionCallee.html">FunctionCallee</a> TsanAtomicRMW[<a class="code" href="classllvm_1_1AtomicRMWInst.html#a461cfbbb5c7a57ab73210498923cf615a4afdbe301c2ed66ac3752096b8962226">AtomicRMWInst::LAST_BINOP</a> + 1]</div>
<div class="line"><a name="l00168"></a><span class="lineno">  168</span>&#160;                              [<a class="code" href="AddressSanitizer_8cpp.html#aa62a4d0672bab180dd339cda25b23b2e">kNumberOfAccessSizes</a>];</div>
<div class="line"><a name="l00169"></a><span class="lineno">  169</span>&#160;  <a class="code" href="classllvm_1_1FunctionCallee.html">FunctionCallee</a> TsanAtomicCAS[<a class="code" href="AddressSanitizer_8cpp.html#aa62a4d0672bab180dd339cda25b23b2e">kNumberOfAccessSizes</a>];</div>
<div class="line"><a name="l00170"></a><span class="lineno">  170</span>&#160;  <a class="code" href="classllvm_1_1FunctionCallee.html">FunctionCallee</a> TsanAtomicThreadFence;</div>
<div class="line"><a name="l00171"></a><span class="lineno">  171</span>&#160;  <a class="code" href="classllvm_1_1FunctionCallee.html">FunctionCallee</a> TsanAtomicSignalFence;</div>
<div class="line"><a name="l00172"></a><span class="lineno">  172</span>&#160;  <a class="code" href="classllvm_1_1FunctionCallee.html">FunctionCallee</a> TsanVptrUpdate;</div>
<div class="line"><a name="l00173"></a><span class="lineno">  173</span>&#160;  <a class="code" href="classllvm_1_1FunctionCallee.html">FunctionCallee</a> TsanVptrLoad;</div>
<div class="line"><a name="l00174"></a><span class="lineno">  174</span>&#160;  <a class="code" href="classllvm_1_1FunctionCallee.html">FunctionCallee</a> MemmoveFn, MemcpyFn, MemsetFn;</div>
<div class="line"><a name="l00175"></a><span class="lineno">  175</span>&#160;};</div>
<div class="line"><a name="l00176"></a><span class="lineno">  176</span>&#160; </div>
<div class="line"><a name="l00177"></a><span class="lineno">  177</span>&#160;<span class="keyword">struct </span>ThreadSanitizerLegacyPass : <a class="code" href="classllvm_1_1FunctionPass.html">FunctionPass</a> {</div>
<div class="line"><a name="l00178"></a><span class="lineno">  178</span>&#160;  ThreadSanitizerLegacyPass() : <a class="code" href="classllvm_1_1FunctionPass.html">FunctionPass</a>(<a class="code" href="namespacellvm_1_1Intrinsic.html#a80add6b3b1cdaec560907995127adc16">ID</a>) {</div>
<div class="line"><a name="l00179"></a><span class="lineno">  179</span>&#160;    <a class="code" href="namespacellvm.html#a861469feb87da036fbca0fbf498914b1">initializeThreadSanitizerLegacyPassPass</a>(*<a class="code" href="classllvm_1_1PassRegistry.html#a05a729900b76c89e808c6c3094921b2f">PassRegistry::getPassRegistry</a>());</div>
<div class="line"><a name="l00180"></a><span class="lineno">  180</span>&#160;  }</div>
<div class="line"><a name="l00181"></a><span class="lineno">  181</span>&#160;  <a class="code" href="classllvm_1_1StringRef.html">StringRef</a> getPassName() <span class="keyword">const override</span>;</div>
<div class="line"><a name="l00182"></a><span class="lineno">  182</span>&#160;  <span class="keywordtype">void</span> getAnalysisUsage(<a class="code" href="classllvm_1_1AnalysisUsage.html">AnalysisUsage</a> &amp;AU) <span class="keyword">const override</span>;</div>
<div class="line"><a name="l00183"></a><span class="lineno">  183</span>&#160;  <span class="keywordtype">bool</span> <a class="code" href="EntryExitInstrumenter_8cpp.html#a3985f1f39349428d17f0d2b81ebc6349">runOnFunction</a>(<a class="code" href="classllvm_1_1Function.html">Function</a> &amp;<a class="code" href="MD5_8cpp.html#a96d73bbd7af15cb1fc38c3f4a3bd82e9">F</a>) <span class="keyword">override</span>;</div>
<div class="line"><a name="l00184"></a><span class="lineno">  184</span>&#160;  <span class="keywordtype">bool</span> doInitialization(<a class="code" href="classllvm_1_1Module.html">Module</a> &amp;<a class="code" href="lib_2Target_2X86_2README_8txt.html#ac88fe1d3a61b056a4f64fbbb156a62ff">M</a>) <span class="keyword">override</span>;</div>
<div class="line"><a name="l00185"></a><span class="lineno">  185</span>&#160;  <span class="keyword">static</span> <span class="keywordtype">char</span> <a class="code" href="namespacellvm_1_1Intrinsic.html#a80add6b3b1cdaec560907995127adc16">ID</a>; <span class="comment">// Pass identification, replacement for typeid.</span></div>
<div class="line"><a name="l00186"></a><span class="lineno">  186</span>&#160;<span class="keyword">private</span>:</div>
<div class="line"><a name="l00187"></a><span class="lineno">  187</span>&#160;  <a class="code" href="classllvm_1_1Optional.html">Optional&lt;ThreadSanitizer&gt;</a> TSan;</div>
<div class="line"><a name="l00188"></a><span class="lineno">  188</span>&#160;};</div>
<div class="line"><a name="l00189"></a><span class="lineno">  189</span>&#160; </div>
<div class="line"><a name="l00190"></a><span class="lineno">  190</span>&#160;<span class="keywordtype">void</span> insertModuleCtor(<a class="code" href="classllvm_1_1Module.html">Module</a> &amp;<a class="code" href="lib_2Target_2X86_2README_8txt.html#ac88fe1d3a61b056a4f64fbbb156a62ff">M</a>) {</div>
<div class="line"><a name="l00191"></a><span class="lineno">  191</span>&#160;  <a class="code" href="namespacellvm.html#a1c18636249f94e73f9903ec907ac1db2">getOrCreateSanitizerCtorAndInitFunctions</a>(</div>
<div class="line"><a name="l00192"></a><span class="lineno">  192</span>&#160;      <a class="code" href="lib_2Target_2X86_2README_8txt.html#ac88fe1d3a61b056a4f64fbbb156a62ff">M</a>, <a class="code" href="ThreadSanitizer_8cpp.html#a38c0f7b9db64da1261f7c7f1db454663">kTsanModuleCtorName</a>, <a class="code" href="ThreadSanitizer_8cpp.html#a7ffdf0ed8f4f0fd9b071c1bb28128a99">kTsanInitName</a>, <span class="comment">/*InitArgTypes=*/</span>{},</div>
<div class="line"><a name="l00193"></a><span class="lineno">  193</span>&#160;      <span class="comment">/*InitArgs=*/</span>{},</div>
<div class="line"><a name="l00194"></a><span class="lineno">  194</span>&#160;      <span class="comment">// This callback is invoked when the functions are created the first</span></div>
<div class="line"><a name="l00195"></a><span class="lineno">  195</span>&#160;      <span class="comment">// time. Hook them into the global ctors list in that case:</span></div>
<div class="line"><a name="l00196"></a><span class="lineno">  196</span>&#160;      [&amp;](<a class="code" href="classllvm_1_1Function.html">Function</a> *Ctor, <a class="code" href="classllvm_1_1FunctionCallee.html">FunctionCallee</a>) { <a class="code" href="namespacellvm.html#ac030f6d03b674c2d132fd54fb60c9f26">appendToGlobalCtors</a>(<a class="code" href="lib_2Target_2X86_2README_8txt.html#ac88fe1d3a61b056a4f64fbbb156a62ff">M</a>, Ctor, 0); });</div>
<div class="line"><a name="l00197"></a><span class="lineno">  197</span>&#160;}</div>
<div class="line"><a name="l00198"></a><span class="lineno">  198</span>&#160; </div>
<div class="line"><a name="l00199"></a><span class="lineno">  199</span>&#160;}  <span class="comment">// namespace</span></div>
<div class="line"><a name="l00200"></a><span class="lineno">  200</span>&#160; </div>
<div class="line"><a name="l00201"></a><span class="lineno"><a class="line" href="structllvm_1_1ThreadSanitizerPass.html#a554dea073d38539bd97dbb495225a24b">  201</a></span>&#160;<a class="code" href="classllvm_1_1PreservedAnalyses.html">PreservedAnalyses</a> <a class="code" href="structllvm_1_1ThreadSanitizerPass.html#a554dea073d38539bd97dbb495225a24b">ThreadSanitizerPass::run</a>(<a class="code" href="classllvm_1_1Function.html">Function</a> &amp;<a class="code" href="MD5_8cpp.html#a96d73bbd7af15cb1fc38c3f4a3bd82e9">F</a>,</div>
<div class="line"><a name="l00202"></a><span class="lineno">  202</span>&#160;                                           <a class="code" href="classllvm_1_1AnalysisManager.html">FunctionAnalysisManager</a> &amp;<a class="code" href="PassBuilderBindings_8cpp.html#a83c7e5ca51099e4efa895791a02fb0ed">FAM</a>) {</div>
<div class="line"><a name="l00203"></a><span class="lineno">  203</span>&#160;  ThreadSanitizer TSan;</div>
<div class="line"><a name="l00204"></a><span class="lineno">  204</span>&#160;  <span class="keywordflow">if</span> (TSan.sanitizeFunction(<a class="code" href="MD5_8cpp.html#a96d73bbd7af15cb1fc38c3f4a3bd82e9">F</a>, <a class="code" href="PassBuilderBindings_8cpp.html#a83c7e5ca51099e4efa895791a02fb0ed">FAM</a>.<a class="code" href="classllvm_1_1AnalysisManager.html#ab9d3d5412c20747fd0110a046604f09a">getResult</a>&lt;<a class="code" href="classllvm_1_1TargetLibraryAnalysis.html">TargetLibraryAnalysis</a>&gt;(<a class="code" href="MD5_8cpp.html#a96d73bbd7af15cb1fc38c3f4a3bd82e9">F</a>)))</div>
<div class="line"><a name="l00205"></a><span class="lineno">  205</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="classllvm_1_1PreservedAnalyses.html#a03797a73044a81cbc6a3409d6c72ee8f">PreservedAnalyses::none</a>();</div>
<div class="line"><a name="l00206"></a><span class="lineno">  206</span>&#160;  <span class="keywordflow">return</span> <a class="code" href="classllvm_1_1PreservedAnalyses.html#a1258a1ff55557c27684010ebd7283712">PreservedAnalyses::all</a>();</div>
<div class="line"><a name="l00207"></a><span class="lineno">  207</span>&#160;}</div>
<div class="line"><a name="l00208"></a><span class="lineno">  208</span>&#160; </div>
<div class="line"><a name="l00209"></a><span class="lineno"><a class="line" href="structllvm_1_1ThreadSanitizerPass.html#ad0dc5052b14b91e4c7b9abbd172d2bd2">  209</a></span>&#160;<a class="code" href="classllvm_1_1PreservedAnalyses.html">PreservedAnalyses</a> <a class="code" href="structllvm_1_1ThreadSanitizerPass.html#a554dea073d38539bd97dbb495225a24b">ThreadSanitizerPass::run</a>(<a class="code" href="classllvm_1_1Module.html">Module</a> &amp;M,</div>
<div class="line"><a name="l00210"></a><span class="lineno">  210</span>&#160;                                           <a class="code" href="classllvm_1_1AnalysisManager.html">ModuleAnalysisManager</a> &amp;<a class="code" href="PassBuilderBindings_8cpp.html#a85bddafa659a93a7a67c9094648259be">MAM</a>) {</div>
<div class="line"><a name="l00211"></a><span class="lineno">  211</span>&#160;  insertModuleCtor(<a class="code" href="lib_2Target_2X86_2README_8txt.html#ac88fe1d3a61b056a4f64fbbb156a62ff">M</a>);</div>
<div class="line"><a name="l00212"></a><span class="lineno">  212</span>&#160;  <span class="keywordflow">return</span> <a class="code" href="classllvm_1_1PreservedAnalyses.html#a03797a73044a81cbc6a3409d6c72ee8f">PreservedAnalyses::none</a>();</div>
<div class="line"><a name="l00213"></a><span class="lineno">  213</span>&#160;}</div>
<div class="line"><a name="l00214"></a><span class="lineno">  214</span>&#160; </div>
<div class="line"><a name="l00215"></a><span class="lineno">  215</span>&#160;<span class="keywordtype">char</span> <a class="code" href="namespacellvm_1_1Intrinsic.html#a80add6b3b1cdaec560907995127adc16">ThreadSanitizerLegacyPass::ID</a> = 0;</div>
<div class="line"><a name="l00216"></a><span class="lineno"><a class="line" href="ThreadSanitizer_8cpp.html#acbaa17d809e20970d61fba815a8af5f8">  216</a></span>&#160;<a class="code" href="ThreadSanitizer_8cpp.html#acbaa17d809e20970d61fba815a8af5f8">INITIALIZE_PASS_BEGIN</a>(ThreadSanitizerLegacyPass, <span class="stringliteral">&quot;tsan&quot;</span>,</div>
<div class="line"><a name="l00217"></a><span class="lineno">  217</span>&#160;                      <span class="stringliteral">&quot;ThreadSanitizer: detects data races.&quot;</span>, <span class="keyword">false</span>, <span class="keyword">false</span>)</div>
<div class="line"><a name="l00218"></a><span class="lineno">  218</span>&#160;<a class="code" href="SVEIntrinsicOpts_8cpp.html#a2bb87eb1bcbc74783a83ae945eb8fa36">INITIALIZE_PASS_DEPENDENCY</a>(<a class="code" href="classllvm_1_1TargetLibraryInfoWrapperPass.html">TargetLibraryInfoWrapperPass</a>)</div>
<div class="line"><a name="l00219"></a><span class="lineno"><a class="line" href="ThreadSanitizer_8cpp.html#af52cc2514853312faacc08298c81375b">  219</a></span>&#160;<a class="code" href="PassSupport_8h.html#a74ce8276b89067e806f67c45a6d92575">INITIALIZE_PASS_END</a>(ThreadSanitizerLegacyPass, &quot;<a class="code" href="ThreadSanitizer_8cpp.html#af52cc2514853312faacc08298c81375b">tsan</a>&quot;,</div>
<div class="line"><a name="l00220"></a><span class="lineno"><a class="line" href="ThreadSanitizer_8cpp.html#aedd78dfcaa59cff652a5dffc9a83a0bf">  220</a></span>&#160;                    &quot;ThreadSanitizer: detects data races.&quot;, <a class="code" href="namespacefalse.html">false</a>, <a class="code" href="namespacefalse.html">false</a>)</div>
<div class="line"><a name="l00221"></a><span class="lineno">  221</span>&#160; </div>
<div class="line"><a name="l00222"></a><span class="lineno">  222</span>&#160;<a class="code" href="classllvm_1_1StringRef.html">StringRef</a> ThreadSanitizerLegacyPass::getPassName()<span class="keyword"> const </span>{</div>
<div class="line"><a name="l00223"></a><span class="lineno">  223</span>&#160;  <span class="keywordflow">return</span> <span class="stringliteral">&quot;ThreadSanitizerLegacyPass&quot;</span>;</div>
<div class="line"><a name="l00224"></a><span class="lineno">  224</span>&#160;}</div>
<div class="line"><a name="l00225"></a><span class="lineno">  225</span>&#160; </div>
<div class="line"><a name="l00226"></a><span class="lineno">  226</span>&#160;<span class="keywordtype">void</span> ThreadSanitizerLegacyPass::getAnalysisUsage(<a class="code" href="classllvm_1_1AnalysisUsage.html">AnalysisUsage</a> &amp;AU)<span class="keyword"> const </span>{</div>
<div class="line"><a name="l00227"></a><span class="lineno">  227</span>&#160;  AU.<a class="code" href="classllvm_1_1AnalysisUsage.html#ae5c60fd282ee894c87ea02c3f0fcb6d0">addRequired</a>&lt;<a class="code" href="classllvm_1_1TargetLibraryInfoWrapperPass.html">TargetLibraryInfoWrapperPass</a>&gt;();</div>
<div class="line"><a name="l00228"></a><span class="lineno">  228</span>&#160;}</div>
<div class="line"><a name="l00229"></a><span class="lineno">  229</span>&#160; </div>
<div class="line"><a name="l00230"></a><span class="lineno">  230</span>&#160;<span class="keywordtype">bool</span> ThreadSanitizerLegacyPass::doInitialization(<a class="code" href="classllvm_1_1Module.html">Module</a> &amp;M) {</div>
<div class="line"><a name="l00231"></a><span class="lineno">  231</span>&#160;  insertModuleCtor(M);</div>
<div class="line"><a name="l00232"></a><span class="lineno">  232</span>&#160;  TSan.emplace();</div>
<div class="line"><a name="l00233"></a><span class="lineno">  233</span>&#160;  <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l00234"></a><span class="lineno">  234</span>&#160;}</div>
<div class="line"><a name="l00235"></a><span class="lineno">  235</span>&#160; </div>
<div class="line"><a name="l00236"></a><span class="lineno">  236</span>&#160;<span class="keywordtype">bool</span> <a class="code" href="EntryExitInstrumenter_8cpp.html#a3985f1f39349428d17f0d2b81ebc6349">ThreadSanitizerLegacyPass::runOnFunction</a>(<a class="code" href="classllvm_1_1Function.html">Function</a> &amp;<a class="code" href="MD5_8cpp.html#a96d73bbd7af15cb1fc38c3f4a3bd82e9">F</a>) {</div>
<div class="line"><a name="l00237"></a><span class="lineno">  237</span>&#160;  <span class="keyword">auto</span> &amp;TLI = getAnalysis&lt;TargetLibraryInfoWrapperPass&gt;().getTLI(<a class="code" href="MD5_8cpp.html#a96d73bbd7af15cb1fc38c3f4a3bd82e9">F</a>);</div>
<div class="line"><a name="l00238"></a><span class="lineno">  238</span>&#160;  TSan-&gt;sanitizeFunction(<a class="code" href="MD5_8cpp.html#a96d73bbd7af15cb1fc38c3f4a3bd82e9">F</a>, TLI);</div>
<div class="line"><a name="l00239"></a><span class="lineno">  239</span>&#160;  <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l00240"></a><span class="lineno">  240</span>&#160;}</div>
<div class="line"><a name="l00241"></a><span class="lineno">  241</span>&#160; </div>
<div class="line"><a name="l00242"></a><span class="lineno"><a class="line" href="namespacellvm.html#a8eae49b4615c8042bb5781c4f7751518">  242</a></span>&#160;<a class="code" href="classllvm_1_1FunctionPass.html">FunctionPass</a> *<a class="code" href="namespacellvm.html#a8eae49b4615c8042bb5781c4f7751518">llvm::createThreadSanitizerLegacyPassPass</a>() {</div>
<div class="line"><a name="l00243"></a><span class="lineno">  243</span>&#160;  <span class="keywordflow">return</span> <span class="keyword">new</span> ThreadSanitizerLegacyPass();</div>
<div class="line"><a name="l00244"></a><span class="lineno">  244</span>&#160;}</div>
<div class="line"><a name="l00245"></a><span class="lineno">  245</span>&#160; </div>
<div class="line"><a name="l00246"></a><span class="lineno">  246</span>&#160;<span class="keywordtype">void</span> <a class="code" href="TargetLibraryInfo_8cpp.html#a19d27915595e7f0a0ef271448bcdac6f">ThreadSanitizer::initialize</a>(<a class="code" href="classllvm_1_1Module.html">Module</a> &amp;M) {</div>
<div class="line"><a name="l00247"></a><span class="lineno">  247</span>&#160;  <span class="keyword">const</span> <a class="code" href="classllvm_1_1DataLayout.html">DataLayout</a> &amp;<a class="code" href="AArch64SLSHardening_8cpp.html#ad467c4ab9119043f9b7750ab986be61a">DL</a> = <a class="code" href="lib_2Target_2X86_2README_8txt.html#ac88fe1d3a61b056a4f64fbbb156a62ff">M</a>.getDataLayout();</div>
<div class="line"><a name="l00248"></a><span class="lineno">  248</span>&#160;  IntptrTy = <a class="code" href="AArch64SLSHardening_8cpp.html#ad467c4ab9119043f9b7750ab986be61a">DL</a>.getIntPtrType(<a class="code" href="lib_2Target_2X86_2README_8txt.html#ac88fe1d3a61b056a4f64fbbb156a62ff">M</a>.getContext());</div>
<div class="line"><a name="l00249"></a><span class="lineno">  249</span>&#160; </div>
<div class="line"><a name="l00250"></a><span class="lineno">  250</span>&#160;  <a class="code" href="classllvm_1_1IRBuilder.html">IRBuilder&lt;&gt;</a> IRB(<a class="code" href="lib_2Target_2X86_2README_8txt.html#ac88fe1d3a61b056a4f64fbbb156a62ff">M</a>.getContext());</div>
<div class="line"><a name="l00251"></a><span class="lineno">  251</span>&#160;  <a class="code" href="classllvm_1_1AttributeList.html">AttributeList</a> Attr;</div>
<div class="line"><a name="l00252"></a><span class="lineno">  252</span>&#160;  Attr = Attr.<a class="code" href="classllvm_1_1AttributeList.html#a5dbe16115cebbb5e8f7f969c0e9bf0b7">addAttribute</a>(<a class="code" href="lib_2Target_2X86_2README_8txt.html#ac88fe1d3a61b056a4f64fbbb156a62ff">M</a>.getContext(), <a class="code" href="classllvm_1_1AttributeList.html#af5dcb6d3da4b30a7d21c9fb39bbf1a68a895001b186ed51e1cb7a256dbd3545f8">AttributeList::FunctionIndex</a>,</div>
<div class="line"><a name="l00253"></a><span class="lineno">  253</span>&#160;                           Attribute::NoUnwind);</div>
<div class="line"><a name="l00254"></a><span class="lineno">  254</span>&#160;  <span class="comment">// Initialize the callbacks.</span></div>
<div class="line"><a name="l00255"></a><span class="lineno">  255</span>&#160;  TsanFuncEntry = <a class="code" href="lib_2Target_2X86_2README_8txt.html#ac88fe1d3a61b056a4f64fbbb156a62ff">M</a>.getOrInsertFunction(<span class="stringliteral">&quot;__tsan_func_entry&quot;</span>, Attr,</div>
<div class="line"><a name="l00256"></a><span class="lineno">  256</span>&#160;                                        IRB.getVoidTy(), IRB.getInt8PtrTy());</div>
<div class="line"><a name="l00257"></a><span class="lineno">  257</span>&#160;  TsanFuncExit =</div>
<div class="line"><a name="l00258"></a><span class="lineno">  258</span>&#160;      <a class="code" href="lib_2Target_2X86_2README_8txt.html#ac88fe1d3a61b056a4f64fbbb156a62ff">M</a>.getOrInsertFunction(<span class="stringliteral">&quot;__tsan_func_exit&quot;</span>, Attr, IRB.getVoidTy());</div>
<div class="line"><a name="l00259"></a><span class="lineno">  259</span>&#160;  TsanIgnoreBegin = <a class="code" href="lib_2Target_2X86_2README_8txt.html#ac88fe1d3a61b056a4f64fbbb156a62ff">M</a>.getOrInsertFunction(<span class="stringliteral">&quot;__tsan_ignore_thread_begin&quot;</span>, Attr,</div>
<div class="line"><a name="l00260"></a><span class="lineno">  260</span>&#160;                                          IRB.getVoidTy());</div>
<div class="line"><a name="l00261"></a><span class="lineno">  261</span>&#160;  TsanIgnoreEnd =</div>
<div class="line"><a name="l00262"></a><span class="lineno">  262</span>&#160;      <a class="code" href="lib_2Target_2X86_2README_8txt.html#ac88fe1d3a61b056a4f64fbbb156a62ff">M</a>.getOrInsertFunction(<span class="stringliteral">&quot;__tsan_ignore_thread_end&quot;</span>, Attr, IRB.getVoidTy());</div>
<div class="line"><a name="l00263"></a><span class="lineno">  263</span>&#160;  <a class="code" href="classllvm_1_1IntegerType.html">IntegerType</a> *OrdTy = IRB.<a class="code" href="classllvm_1_1Type.html#a30dd396c5b40cd86c1591872e574ccdf">getInt32Ty</a>();</div>
<div class="line"><a name="l00264"></a><span class="lineno">  264</span>&#160;  <span class="keywordflow">for</span> (<span class="keywordtype">size_t</span> <a class="code" href="lib_2Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a> = 0; <a class="code" href="lib_2Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a> &lt; <a class="code" href="AddressSanitizer_8cpp.html#aa62a4d0672bab180dd339cda25b23b2e">kNumberOfAccessSizes</a>; ++<a class="code" href="lib_2Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a>) {</div>
<div class="line"><a name="l00265"></a><span class="lineno">  265</span>&#160;    <span class="keyword">const</span> <span class="keywordtype">unsigned</span> ByteSize = 1U &lt;&lt; <a class="code" href="lib_2Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a>;</div>
<div class="line"><a name="l00266"></a><span class="lineno">  266</span>&#160;    <span class="keyword">const</span> <span class="keywordtype">unsigned</span> BitSize = ByteSize * 8;</div>
<div class="line"><a name="l00267"></a><span class="lineno">  267</span>&#160;    std::string ByteSizeStr = utostr(ByteSize);</div>
<div class="line"><a name="l00268"></a><span class="lineno">  268</span>&#160;    std::string BitSizeStr = utostr(BitSize);</div>
<div class="line"><a name="l00269"></a><span class="lineno">  269</span>&#160;    <a class="code" href="classllvm_1_1SmallString.html">SmallString&lt;32&gt;</a> ReadName(<span class="stringliteral">&quot;__tsan_read&quot;</span> + ByteSizeStr);</div>
<div class="line"><a name="l00270"></a><span class="lineno">  270</span>&#160;    TsanRead[<a class="code" href="lib_2Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a>] = <a class="code" href="lib_2Target_2X86_2README_8txt.html#ac88fe1d3a61b056a4f64fbbb156a62ff">M</a>.getOrInsertFunction(ReadName, Attr, IRB.getVoidTy(),</div>
<div class="line"><a name="l00271"></a><span class="lineno">  271</span>&#160;                                        IRB.getInt8PtrTy());</div>
<div class="line"><a name="l00272"></a><span class="lineno">  272</span>&#160; </div>
<div class="line"><a name="l00273"></a><span class="lineno">  273</span>&#160;    <a class="code" href="classllvm_1_1SmallString.html">SmallString&lt;32&gt;</a> WriteName(<span class="stringliteral">&quot;__tsan_write&quot;</span> + ByteSizeStr);</div>
<div class="line"><a name="l00274"></a><span class="lineno">  274</span>&#160;    TsanWrite[<a class="code" href="lib_2Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a>] = <a class="code" href="lib_2Target_2X86_2README_8txt.html#ac88fe1d3a61b056a4f64fbbb156a62ff">M</a>.getOrInsertFunction(WriteName, Attr, IRB.getVoidTy(),</div>
<div class="line"><a name="l00275"></a><span class="lineno">  275</span>&#160;                                         IRB.getInt8PtrTy());</div>
<div class="line"><a name="l00276"></a><span class="lineno">  276</span>&#160; </div>
<div class="line"><a name="l00277"></a><span class="lineno">  277</span>&#160;    <a class="code" href="classllvm_1_1SmallString.html">SmallString&lt;64&gt;</a> UnalignedReadName(<span class="stringliteral">&quot;__tsan_unaligned_read&quot;</span> + ByteSizeStr);</div>
<div class="line"><a name="l00278"></a><span class="lineno">  278</span>&#160;    TsanUnalignedRead[<a class="code" href="lib_2Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a>] = <a class="code" href="lib_2Target_2X86_2README_8txt.html#ac88fe1d3a61b056a4f64fbbb156a62ff">M</a>.getOrInsertFunction(</div>
<div class="line"><a name="l00279"></a><span class="lineno">  279</span>&#160;        UnalignedReadName, Attr, IRB.getVoidTy(), IRB.getInt8PtrTy());</div>
<div class="line"><a name="l00280"></a><span class="lineno">  280</span>&#160; </div>
<div class="line"><a name="l00281"></a><span class="lineno">  281</span>&#160;    <a class="code" href="classllvm_1_1SmallString.html">SmallString&lt;64&gt;</a> UnalignedWriteName(<span class="stringliteral">&quot;__tsan_unaligned_write&quot;</span> + ByteSizeStr);</div>
<div class="line"><a name="l00282"></a><span class="lineno">  282</span>&#160;    TsanUnalignedWrite[<a class="code" href="lib_2Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a>] = <a class="code" href="lib_2Target_2X86_2README_8txt.html#ac88fe1d3a61b056a4f64fbbb156a62ff">M</a>.getOrInsertFunction(</div>
<div class="line"><a name="l00283"></a><span class="lineno">  283</span>&#160;        UnalignedWriteName, Attr, IRB.getVoidTy(), IRB.getInt8PtrTy());</div>
<div class="line"><a name="l00284"></a><span class="lineno">  284</span>&#160; </div>
<div class="line"><a name="l00285"></a><span class="lineno">  285</span>&#160;    <a class="code" href="classllvm_1_1SmallString.html">SmallString&lt;64&gt;</a> VolatileReadName(<span class="stringliteral">&quot;__tsan_volatile_read&quot;</span> + ByteSizeStr);</div>
<div class="line"><a name="l00286"></a><span class="lineno">  286</span>&#160;    TsanVolatileRead[<a class="code" href="lib_2Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a>] = <a class="code" href="lib_2Target_2X86_2README_8txt.html#ac88fe1d3a61b056a4f64fbbb156a62ff">M</a>.getOrInsertFunction(</div>
<div class="line"><a name="l00287"></a><span class="lineno">  287</span>&#160;        VolatileReadName, Attr, IRB.getVoidTy(), IRB.getInt8PtrTy());</div>
<div class="line"><a name="l00288"></a><span class="lineno">  288</span>&#160; </div>
<div class="line"><a name="l00289"></a><span class="lineno">  289</span>&#160;    <a class="code" href="classllvm_1_1SmallString.html">SmallString&lt;64&gt;</a> VolatileWriteName(<span class="stringliteral">&quot;__tsan_volatile_write&quot;</span> + ByteSizeStr);</div>
<div class="line"><a name="l00290"></a><span class="lineno">  290</span>&#160;    TsanVolatileWrite[<a class="code" href="lib_2Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a>] = <a class="code" href="lib_2Target_2X86_2README_8txt.html#ac88fe1d3a61b056a4f64fbbb156a62ff">M</a>.getOrInsertFunction(</div>
<div class="line"><a name="l00291"></a><span class="lineno">  291</span>&#160;        VolatileWriteName, Attr, IRB.getVoidTy(), IRB.getInt8PtrTy());</div>
<div class="line"><a name="l00292"></a><span class="lineno">  292</span>&#160; </div>
<div class="line"><a name="l00293"></a><span class="lineno">  293</span>&#160;    <a class="code" href="classllvm_1_1SmallString.html">SmallString&lt;64&gt;</a> UnalignedVolatileReadName(<span class="stringliteral">&quot;__tsan_unaligned_volatile_read&quot;</span> +</div>
<div class="line"><a name="l00294"></a><span class="lineno">  294</span>&#160;                                              ByteSizeStr);</div>
<div class="line"><a name="l00295"></a><span class="lineno">  295</span>&#160;    TsanUnalignedVolatileRead[<a class="code" href="lib_2Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a>] = <a class="code" href="lib_2Target_2X86_2README_8txt.html#ac88fe1d3a61b056a4f64fbbb156a62ff">M</a>.getOrInsertFunction(</div>
<div class="line"><a name="l00296"></a><span class="lineno">  296</span>&#160;        UnalignedVolatileReadName, Attr, IRB.getVoidTy(), IRB.getInt8PtrTy());</div>
<div class="line"><a name="l00297"></a><span class="lineno">  297</span>&#160; </div>
<div class="line"><a name="l00298"></a><span class="lineno">  298</span>&#160;    <a class="code" href="classllvm_1_1SmallString.html">SmallString&lt;64&gt;</a> UnalignedVolatileWriteName(</div>
<div class="line"><a name="l00299"></a><span class="lineno">  299</span>&#160;        <span class="stringliteral">&quot;__tsan_unaligned_volatile_write&quot;</span> + ByteSizeStr);</div>
<div class="line"><a name="l00300"></a><span class="lineno">  300</span>&#160;    TsanUnalignedVolatileWrite[<a class="code" href="lib_2Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a>] = <a class="code" href="lib_2Target_2X86_2README_8txt.html#ac88fe1d3a61b056a4f64fbbb156a62ff">M</a>.getOrInsertFunction(</div>
<div class="line"><a name="l00301"></a><span class="lineno">  301</span>&#160;        UnalignedVolatileWriteName, Attr, IRB.getVoidTy(), IRB.getInt8PtrTy());</div>
<div class="line"><a name="l00302"></a><span class="lineno">  302</span>&#160; </div>
<div class="line"><a name="l00303"></a><span class="lineno">  303</span>&#160;    <a class="code" href="classllvm_1_1SmallString.html">SmallString&lt;64&gt;</a> CompoundRWName(<span class="stringliteral">&quot;__tsan_read_write&quot;</span> + ByteSizeStr);</div>
<div class="line"><a name="l00304"></a><span class="lineno">  304</span>&#160;    TsanCompoundRW[<a class="code" href="lib_2Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a>] = <a class="code" href="lib_2Target_2X86_2README_8txt.html#ac88fe1d3a61b056a4f64fbbb156a62ff">M</a>.getOrInsertFunction(</div>
<div class="line"><a name="l00305"></a><span class="lineno">  305</span>&#160;        CompoundRWName, Attr, IRB.getVoidTy(), IRB.getInt8PtrTy());</div>
<div class="line"><a name="l00306"></a><span class="lineno">  306</span>&#160; </div>
<div class="line"><a name="l00307"></a><span class="lineno">  307</span>&#160;    <a class="code" href="classllvm_1_1SmallString.html">SmallString&lt;64&gt;</a> UnalignedCompoundRWName(<span class="stringliteral">&quot;__tsan_unaligned_read_write&quot;</span> +</div>
<div class="line"><a name="l00308"></a><span class="lineno">  308</span>&#160;                                            ByteSizeStr);</div>
<div class="line"><a name="l00309"></a><span class="lineno">  309</span>&#160;    TsanUnalignedCompoundRW[<a class="code" href="lib_2Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a>] = <a class="code" href="lib_2Target_2X86_2README_8txt.html#ac88fe1d3a61b056a4f64fbbb156a62ff">M</a>.getOrInsertFunction(</div>
<div class="line"><a name="l00310"></a><span class="lineno">  310</span>&#160;        UnalignedCompoundRWName, Attr, IRB.getVoidTy(), IRB.getInt8PtrTy());</div>
<div class="line"><a name="l00311"></a><span class="lineno">  311</span>&#160; </div>
<div class="line"><a name="l00312"></a><span class="lineno">  312</span>&#160;    <a class="code" href="classllvm_1_1Type.html">Type</a> *Ty = <a class="code" href="classllvm_1_1Type.html#acaf8e4c3e40e01e848c1fad5f05b81cd">Type::getIntNTy</a>(<a class="code" href="lib_2Target_2X86_2README_8txt.html#ac88fe1d3a61b056a4f64fbbb156a62ff">M</a>.getContext(), BitSize);</div>
<div class="line"><a name="l00313"></a><span class="lineno">  313</span>&#160;    <a class="code" href="classllvm_1_1Type.html">Type</a> *PtrTy = Ty-&gt;<a class="code" href="classllvm_1_1Type.html#adc01a7457de85fc52a3bb860d7e1c6a4">getPointerTo</a>();</div>
<div class="line"><a name="l00314"></a><span class="lineno">  314</span>&#160;    <a class="code" href="classllvm_1_1SmallString.html">SmallString&lt;32&gt;</a> AtomicLoadName(<span class="stringliteral">&quot;__tsan_atomic&quot;</span> + BitSizeStr + <span class="stringliteral">&quot;_load&quot;</span>);</div>
<div class="line"><a name="l00315"></a><span class="lineno">  315</span>&#160;    {</div>
<div class="line"><a name="l00316"></a><span class="lineno">  316</span>&#160;      <a class="code" href="classllvm_1_1AttributeList.html">AttributeList</a> <a class="code" href="namespacellvm_1_1AArch64CC.html#abfa1f7dce576430da99eed57807c7f28ab89adee997fb2a645a2d26e1f1bdaadf">AL</a> = Attr;</div>
<div class="line"><a name="l00317"></a><span class="lineno">  317</span>&#160;      <a class="code" href="namespacellvm_1_1AArch64CC.html#abfa1f7dce576430da99eed57807c7f28ab89adee997fb2a645a2d26e1f1bdaadf">AL</a> = <a class="code" href="namespacellvm_1_1AArch64CC.html#abfa1f7dce576430da99eed57807c7f28ab89adee997fb2a645a2d26e1f1bdaadf">AL</a>.addParamAttribute(<a class="code" href="lib_2Target_2X86_2README_8txt.html#ac88fe1d3a61b056a4f64fbbb156a62ff">M</a>.getContext(), 1, Attribute::ZExt);</div>
<div class="line"><a name="l00318"></a><span class="lineno">  318</span>&#160;      TsanAtomicLoad[<a class="code" href="lib_2Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a>] =</div>
<div class="line"><a name="l00319"></a><span class="lineno">  319</span>&#160;          <a class="code" href="lib_2Target_2X86_2README_8txt.html#ac88fe1d3a61b056a4f64fbbb156a62ff">M</a>.getOrInsertFunction(AtomicLoadName, <a class="code" href="namespacellvm_1_1AArch64CC.html#abfa1f7dce576430da99eed57807c7f28ab89adee997fb2a645a2d26e1f1bdaadf">AL</a>, Ty, PtrTy, OrdTy);</div>
<div class="line"><a name="l00320"></a><span class="lineno">  320</span>&#160;    }</div>
<div class="line"><a name="l00321"></a><span class="lineno">  321</span>&#160; </div>
<div class="line"><a name="l00322"></a><span class="lineno">  322</span>&#160;    <a class="code" href="classllvm_1_1SmallString.html">SmallString&lt;32&gt;</a> AtomicStoreName(<span class="stringliteral">&quot;__tsan_atomic&quot;</span> + BitSizeStr + <span class="stringliteral">&quot;_store&quot;</span>);</div>
<div class="line"><a name="l00323"></a><span class="lineno">  323</span>&#160;    {</div>
<div class="line"><a name="l00324"></a><span class="lineno">  324</span>&#160;      <a class="code" href="classllvm_1_1AttributeList.html">AttributeList</a> <a class="code" href="namespacellvm_1_1AArch64CC.html#abfa1f7dce576430da99eed57807c7f28ab89adee997fb2a645a2d26e1f1bdaadf">AL</a> = Attr;</div>
<div class="line"><a name="l00325"></a><span class="lineno">  325</span>&#160;      <a class="code" href="namespacellvm_1_1AArch64CC.html#abfa1f7dce576430da99eed57807c7f28ab89adee997fb2a645a2d26e1f1bdaadf">AL</a> = <a class="code" href="namespacellvm_1_1AArch64CC.html#abfa1f7dce576430da99eed57807c7f28ab89adee997fb2a645a2d26e1f1bdaadf">AL</a>.addParamAttribute(<a class="code" href="lib_2Target_2X86_2README_8txt.html#ac88fe1d3a61b056a4f64fbbb156a62ff">M</a>.getContext(), 1, Attribute::ZExt);</div>
<div class="line"><a name="l00326"></a><span class="lineno">  326</span>&#160;      <a class="code" href="namespacellvm_1_1AArch64CC.html#abfa1f7dce576430da99eed57807c7f28ab89adee997fb2a645a2d26e1f1bdaadf">AL</a> = <a class="code" href="namespacellvm_1_1AArch64CC.html#abfa1f7dce576430da99eed57807c7f28ab89adee997fb2a645a2d26e1f1bdaadf">AL</a>.addParamAttribute(<a class="code" href="lib_2Target_2X86_2README_8txt.html#ac88fe1d3a61b056a4f64fbbb156a62ff">M</a>.getContext(), 2, Attribute::ZExt);</div>
<div class="line"><a name="l00327"></a><span class="lineno">  327</span>&#160;      TsanAtomicStore[<a class="code" href="lib_2Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a>] = <a class="code" href="lib_2Target_2X86_2README_8txt.html#ac88fe1d3a61b056a4f64fbbb156a62ff">M</a>.getOrInsertFunction(</div>
<div class="line"><a name="l00328"></a><span class="lineno">  328</span>&#160;          AtomicStoreName, <a class="code" href="namespacellvm_1_1AArch64CC.html#abfa1f7dce576430da99eed57807c7f28ab89adee997fb2a645a2d26e1f1bdaadf">AL</a>, IRB.getVoidTy(), PtrTy, Ty, OrdTy);</div>
<div class="line"><a name="l00329"></a><span class="lineno">  329</span>&#160;    }</div>
<div class="line"><a name="l00330"></a><span class="lineno">  330</span>&#160; </div>
<div class="line"><a name="l00331"></a><span class="lineno">  331</span>&#160;    <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> <a class="code" href="namespacellvm_1_1AMDGPU_1_1SendMsg.html#a8594419a4ddfad2c9a79279c490e466d">Op</a> = <a class="code" href="classllvm_1_1AtomicRMWInst.html#a461cfbbb5c7a57ab73210498923cf615ad76dfbda6c10d959f44e01788b4c0f66">AtomicRMWInst::FIRST_BINOP</a>;</div>
<div class="line"><a name="l00332"></a><span class="lineno">  332</span>&#160;         <a class="code" href="namespacellvm_1_1AMDGPU_1_1SendMsg.html#a8594419a4ddfad2c9a79279c490e466d">Op</a> &lt;= <a class="code" href="classllvm_1_1AtomicRMWInst.html#a461cfbbb5c7a57ab73210498923cf615a4afdbe301c2ed66ac3752096b8962226">AtomicRMWInst::LAST_BINOP</a>; ++<a class="code" href="namespacellvm_1_1AMDGPU_1_1SendMsg.html#a8594419a4ddfad2c9a79279c490e466d">Op</a>) {</div>
<div class="line"><a name="l00333"></a><span class="lineno">  333</span>&#160;      TsanAtomicRMW[<a class="code" href="namespacellvm_1_1AMDGPU_1_1SendMsg.html#a8594419a4ddfad2c9a79279c490e466d">Op</a>][<a class="code" href="lib_2Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a>] = <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l00334"></a><span class="lineno">  334</span>&#160;      <span class="keyword">const</span> <span class="keywordtype">char</span> *NamePart = <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l00335"></a><span class="lineno">  335</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="namespacellvm_1_1AMDGPU_1_1SendMsg.html#a8594419a4ddfad2c9a79279c490e466d">Op</a> == <a class="code" href="classllvm_1_1AtomicRMWInst.html#a461cfbbb5c7a57ab73210498923cf615afc870a548088c5b7a93a34f648889d77">AtomicRMWInst::Xchg</a>)</div>
<div class="line"><a name="l00336"></a><span class="lineno">  336</span>&#160;        NamePart = <span class="stringliteral">&quot;_exchange&quot;</span>;</div>
<div class="line"><a name="l00337"></a><span class="lineno">  337</span>&#160;      <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code" href="namespacellvm_1_1AMDGPU_1_1SendMsg.html#a8594419a4ddfad2c9a79279c490e466d">Op</a> == <a class="code" href="classllvm_1_1AtomicRMWInst.html#a461cfbbb5c7a57ab73210498923cf615a0794c42b44989f9d9f1454d79ca0dd88">AtomicRMWInst::Add</a>)</div>
<div class="line"><a name="l00338"></a><span class="lineno">  338</span>&#160;        NamePart = <span class="stringliteral">&quot;_fetch_add&quot;</span>;</div>
<div class="line"><a name="l00339"></a><span class="lineno">  339</span>&#160;      <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code" href="namespacellvm_1_1AMDGPU_1_1SendMsg.html#a8594419a4ddfad2c9a79279c490e466d">Op</a> == <a class="code" href="classllvm_1_1AtomicRMWInst.html#a461cfbbb5c7a57ab73210498923cf615a5db6ca0c3e18acd87290f22ccb2ce564">AtomicRMWInst::Sub</a>)</div>
<div class="line"><a name="l00340"></a><span class="lineno">  340</span>&#160;        NamePart = <span class="stringliteral">&quot;_fetch_sub&quot;</span>;</div>
<div class="line"><a name="l00341"></a><span class="lineno">  341</span>&#160;      <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code" href="namespacellvm_1_1AMDGPU_1_1SendMsg.html#a8594419a4ddfad2c9a79279c490e466d">Op</a> == <a class="code" href="classllvm_1_1AtomicRMWInst.html#a461cfbbb5c7a57ab73210498923cf615a660a31179bfecd737a256372e5fd6122">AtomicRMWInst::And</a>)</div>
<div class="line"><a name="l00342"></a><span class="lineno">  342</span>&#160;        NamePart = <span class="stringliteral">&quot;_fetch_and&quot;</span>;</div>
<div class="line"><a name="l00343"></a><span class="lineno">  343</span>&#160;      <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code" href="namespacellvm_1_1AMDGPU_1_1SendMsg.html#a8594419a4ddfad2c9a79279c490e466d">Op</a> == <a class="code" href="classllvm_1_1AtomicRMWInst.html#a461cfbbb5c7a57ab73210498923cf615a5954f59053121b87ebe0c5fe79942c6e">AtomicRMWInst::Or</a>)</div>
<div class="line"><a name="l00344"></a><span class="lineno">  344</span>&#160;        NamePart = <span class="stringliteral">&quot;_fetch_or&quot;</span>;</div>
<div class="line"><a name="l00345"></a><span class="lineno">  345</span>&#160;      <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code" href="namespacellvm_1_1AMDGPU_1_1SendMsg.html#a8594419a4ddfad2c9a79279c490e466d">Op</a> == <a class="code" href="classllvm_1_1AtomicRMWInst.html#a461cfbbb5c7a57ab73210498923cf615a71aab8ee954b6d71a4eed315e8f6556e">AtomicRMWInst::Xor</a>)</div>
<div class="line"><a name="l00346"></a><span class="lineno">  346</span>&#160;        NamePart = <span class="stringliteral">&quot;_fetch_xor&quot;</span>;</div>
<div class="line"><a name="l00347"></a><span class="lineno">  347</span>&#160;      <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code" href="namespacellvm_1_1AMDGPU_1_1SendMsg.html#a8594419a4ddfad2c9a79279c490e466d">Op</a> == <a class="code" href="classllvm_1_1AtomicRMWInst.html#a461cfbbb5c7a57ab73210498923cf615afdcdc631cf4fa6829fd7499cd06a306b">AtomicRMWInst::Nand</a>)</div>
<div class="line"><a name="l00348"></a><span class="lineno">  348</span>&#160;        NamePart = <span class="stringliteral">&quot;_fetch_nand&quot;</span>;</div>
<div class="line"><a name="l00349"></a><span class="lineno">  349</span>&#160;      <span class="keywordflow">else</span></div>
<div class="line"><a name="l00350"></a><span class="lineno">  350</span>&#160;        <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l00351"></a><span class="lineno">  351</span>&#160;      <a class="code" href="classllvm_1_1SmallString.html">SmallString&lt;32&gt;</a> RMWName(<span class="stringliteral">&quot;__tsan_atomic&quot;</span> + itostr(BitSize) + NamePart);</div>
<div class="line"><a name="l00352"></a><span class="lineno">  352</span>&#160;      {</div>
<div class="line"><a name="l00353"></a><span class="lineno">  353</span>&#160;        <a class="code" href="classllvm_1_1AttributeList.html">AttributeList</a> <a class="code" href="namespacellvm_1_1AArch64CC.html#abfa1f7dce576430da99eed57807c7f28ab89adee997fb2a645a2d26e1f1bdaadf">AL</a> = Attr;</div>
<div class="line"><a name="l00354"></a><span class="lineno">  354</span>&#160;        <a class="code" href="namespacellvm_1_1AArch64CC.html#abfa1f7dce576430da99eed57807c7f28ab89adee997fb2a645a2d26e1f1bdaadf">AL</a> = <a class="code" href="namespacellvm_1_1AArch64CC.html#abfa1f7dce576430da99eed57807c7f28ab89adee997fb2a645a2d26e1f1bdaadf">AL</a>.addParamAttribute(<a class="code" href="lib_2Target_2X86_2README_8txt.html#ac88fe1d3a61b056a4f64fbbb156a62ff">M</a>.getContext(), 1, Attribute::ZExt);</div>
<div class="line"><a name="l00355"></a><span class="lineno">  355</span>&#160;        <a class="code" href="namespacellvm_1_1AArch64CC.html#abfa1f7dce576430da99eed57807c7f28ab89adee997fb2a645a2d26e1f1bdaadf">AL</a> = <a class="code" href="namespacellvm_1_1AArch64CC.html#abfa1f7dce576430da99eed57807c7f28ab89adee997fb2a645a2d26e1f1bdaadf">AL</a>.addParamAttribute(<a class="code" href="lib_2Target_2X86_2README_8txt.html#ac88fe1d3a61b056a4f64fbbb156a62ff">M</a>.getContext(), 2, Attribute::ZExt);</div>
<div class="line"><a name="l00356"></a><span class="lineno">  356</span>&#160;        TsanAtomicRMW[<a class="code" href="namespacellvm_1_1AMDGPU_1_1SendMsg.html#a8594419a4ddfad2c9a79279c490e466d">Op</a>][<a class="code" href="lib_2Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a>] =</div>
<div class="line"><a name="l00357"></a><span class="lineno">  357</span>&#160;            <a class="code" href="lib_2Target_2X86_2README_8txt.html#ac88fe1d3a61b056a4f64fbbb156a62ff">M</a>.getOrInsertFunction(RMWName, <a class="code" href="namespacellvm_1_1AArch64CC.html#abfa1f7dce576430da99eed57807c7f28ab89adee997fb2a645a2d26e1f1bdaadf">AL</a>, Ty, PtrTy, Ty, OrdTy);</div>
<div class="line"><a name="l00358"></a><span class="lineno">  358</span>&#160;      }</div>
<div class="line"><a name="l00359"></a><span class="lineno">  359</span>&#160;    }</div>
<div class="line"><a name="l00360"></a><span class="lineno">  360</span>&#160; </div>
<div class="line"><a name="l00361"></a><span class="lineno">  361</span>&#160;    <a class="code" href="classllvm_1_1SmallString.html">SmallString&lt;32&gt;</a> AtomicCASName(<span class="stringliteral">&quot;__tsan_atomic&quot;</span> + BitSizeStr +</div>
<div class="line"><a name="l00362"></a><span class="lineno">  362</span>&#160;                                  <span class="stringliteral">&quot;_compare_exchange_val&quot;</span>);</div>
<div class="line"><a name="l00363"></a><span class="lineno">  363</span>&#160;    {</div>
<div class="line"><a name="l00364"></a><span class="lineno">  364</span>&#160;      <a class="code" href="classllvm_1_1AttributeList.html">AttributeList</a> <a class="code" href="namespacellvm_1_1AArch64CC.html#abfa1f7dce576430da99eed57807c7f28ab89adee997fb2a645a2d26e1f1bdaadf">AL</a> = Attr;</div>
<div class="line"><a name="l00365"></a><span class="lineno">  365</span>&#160;      <a class="code" href="namespacellvm_1_1AArch64CC.html#abfa1f7dce576430da99eed57807c7f28ab89adee997fb2a645a2d26e1f1bdaadf">AL</a> = <a class="code" href="namespacellvm_1_1AArch64CC.html#abfa1f7dce576430da99eed57807c7f28ab89adee997fb2a645a2d26e1f1bdaadf">AL</a>.addParamAttribute(<a class="code" href="lib_2Target_2X86_2README_8txt.html#ac88fe1d3a61b056a4f64fbbb156a62ff">M</a>.getContext(), 1, Attribute::ZExt);</div>
<div class="line"><a name="l00366"></a><span class="lineno">  366</span>&#160;      <a class="code" href="namespacellvm_1_1AArch64CC.html#abfa1f7dce576430da99eed57807c7f28ab89adee997fb2a645a2d26e1f1bdaadf">AL</a> = <a class="code" href="namespacellvm_1_1AArch64CC.html#abfa1f7dce576430da99eed57807c7f28ab89adee997fb2a645a2d26e1f1bdaadf">AL</a>.addParamAttribute(<a class="code" href="lib_2Target_2X86_2README_8txt.html#ac88fe1d3a61b056a4f64fbbb156a62ff">M</a>.getContext(), 2, Attribute::ZExt);</div>
<div class="line"><a name="l00367"></a><span class="lineno">  367</span>&#160;      <a class="code" href="namespacellvm_1_1AArch64CC.html#abfa1f7dce576430da99eed57807c7f28ab89adee997fb2a645a2d26e1f1bdaadf">AL</a> = <a class="code" href="namespacellvm_1_1AArch64CC.html#abfa1f7dce576430da99eed57807c7f28ab89adee997fb2a645a2d26e1f1bdaadf">AL</a>.addParamAttribute(<a class="code" href="lib_2Target_2X86_2README_8txt.html#ac88fe1d3a61b056a4f64fbbb156a62ff">M</a>.getContext(), 3, Attribute::ZExt);</div>
<div class="line"><a name="l00368"></a><span class="lineno">  368</span>&#160;      <a class="code" href="namespacellvm_1_1AArch64CC.html#abfa1f7dce576430da99eed57807c7f28ab89adee997fb2a645a2d26e1f1bdaadf">AL</a> = <a class="code" href="namespacellvm_1_1AArch64CC.html#abfa1f7dce576430da99eed57807c7f28ab89adee997fb2a645a2d26e1f1bdaadf">AL</a>.addParamAttribute(<a class="code" href="lib_2Target_2X86_2README_8txt.html#ac88fe1d3a61b056a4f64fbbb156a62ff">M</a>.getContext(), 4, Attribute::ZExt);</div>
<div class="line"><a name="l00369"></a><span class="lineno">  369</span>&#160;      TsanAtomicCAS[<a class="code" href="lib_2Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a>] = <a class="code" href="lib_2Target_2X86_2README_8txt.html#ac88fe1d3a61b056a4f64fbbb156a62ff">M</a>.getOrInsertFunction(AtomicCASName, <a class="code" href="namespacellvm_1_1AArch64CC.html#abfa1f7dce576430da99eed57807c7f28ab89adee997fb2a645a2d26e1f1bdaadf">AL</a>, Ty, PtrTy, Ty,</div>
<div class="line"><a name="l00370"></a><span class="lineno">  370</span>&#160;                                               Ty, OrdTy, OrdTy);</div>
<div class="line"><a name="l00371"></a><span class="lineno">  371</span>&#160;    }</div>
<div class="line"><a name="l00372"></a><span class="lineno">  372</span>&#160;  }</div>
<div class="line"><a name="l00373"></a><span class="lineno">  373</span>&#160;  TsanVptrUpdate =</div>
<div class="line"><a name="l00374"></a><span class="lineno">  374</span>&#160;      <a class="code" href="lib_2Target_2X86_2README_8txt.html#ac88fe1d3a61b056a4f64fbbb156a62ff">M</a>.getOrInsertFunction(<span class="stringliteral">&quot;__tsan_vptr_update&quot;</span>, Attr, IRB.getVoidTy(),</div>
<div class="line"><a name="l00375"></a><span class="lineno">  375</span>&#160;                            IRB.getInt8PtrTy(), IRB.getInt8PtrTy());</div>
<div class="line"><a name="l00376"></a><span class="lineno">  376</span>&#160;  TsanVptrLoad = <a class="code" href="lib_2Target_2X86_2README_8txt.html#ac88fe1d3a61b056a4f64fbbb156a62ff">M</a>.getOrInsertFunction(<span class="stringliteral">&quot;__tsan_vptr_read&quot;</span>, Attr,</div>
<div class="line"><a name="l00377"></a><span class="lineno">  377</span>&#160;                                       IRB.getVoidTy(), IRB.getInt8PtrTy());</div>
<div class="line"><a name="l00378"></a><span class="lineno">  378</span>&#160;  {</div>
<div class="line"><a name="l00379"></a><span class="lineno">  379</span>&#160;    <a class="code" href="classllvm_1_1AttributeList.html">AttributeList</a> <a class="code" href="namespacellvm_1_1AArch64CC.html#abfa1f7dce576430da99eed57807c7f28ab89adee997fb2a645a2d26e1f1bdaadf">AL</a> = Attr;</div>
<div class="line"><a name="l00380"></a><span class="lineno">  380</span>&#160;    <a class="code" href="namespacellvm_1_1AArch64CC.html#abfa1f7dce576430da99eed57807c7f28ab89adee997fb2a645a2d26e1f1bdaadf">AL</a> = <a class="code" href="namespacellvm_1_1AArch64CC.html#abfa1f7dce576430da99eed57807c7f28ab89adee997fb2a645a2d26e1f1bdaadf">AL</a>.addParamAttribute(<a class="code" href="lib_2Target_2X86_2README_8txt.html#ac88fe1d3a61b056a4f64fbbb156a62ff">M</a>.getContext(), 0, Attribute::ZExt);</div>
<div class="line"><a name="l00381"></a><span class="lineno">  381</span>&#160;    TsanAtomicThreadFence = <a class="code" href="lib_2Target_2X86_2README_8txt.html#ac88fe1d3a61b056a4f64fbbb156a62ff">M</a>.getOrInsertFunction(<span class="stringliteral">&quot;__tsan_atomic_thread_fence&quot;</span>,</div>
<div class="line"><a name="l00382"></a><span class="lineno">  382</span>&#160;                                                  <a class="code" href="namespacellvm_1_1AArch64CC.html#abfa1f7dce576430da99eed57807c7f28ab89adee997fb2a645a2d26e1f1bdaadf">AL</a>, IRB.getVoidTy(), OrdTy);</div>
<div class="line"><a name="l00383"></a><span class="lineno">  383</span>&#160;  }</div>
<div class="line"><a name="l00384"></a><span class="lineno">  384</span>&#160;  {</div>
<div class="line"><a name="l00385"></a><span class="lineno">  385</span>&#160;    <a class="code" href="classllvm_1_1AttributeList.html">AttributeList</a> <a class="code" href="namespacellvm_1_1AArch64CC.html#abfa1f7dce576430da99eed57807c7f28ab89adee997fb2a645a2d26e1f1bdaadf">AL</a> = Attr;</div>
<div class="line"><a name="l00386"></a><span class="lineno">  386</span>&#160;    <a class="code" href="namespacellvm_1_1AArch64CC.html#abfa1f7dce576430da99eed57807c7f28ab89adee997fb2a645a2d26e1f1bdaadf">AL</a> = <a class="code" href="namespacellvm_1_1AArch64CC.html#abfa1f7dce576430da99eed57807c7f28ab89adee997fb2a645a2d26e1f1bdaadf">AL</a>.addParamAttribute(<a class="code" href="lib_2Target_2X86_2README_8txt.html#ac88fe1d3a61b056a4f64fbbb156a62ff">M</a>.getContext(), 0, Attribute::ZExt);</div>
<div class="line"><a name="l00387"></a><span class="lineno">  387</span>&#160;    TsanAtomicSignalFence = <a class="code" href="lib_2Target_2X86_2README_8txt.html#ac88fe1d3a61b056a4f64fbbb156a62ff">M</a>.getOrInsertFunction(<span class="stringliteral">&quot;__tsan_atomic_signal_fence&quot;</span>,</div>
<div class="line"><a name="l00388"></a><span class="lineno">  388</span>&#160;                                                  <a class="code" href="namespacellvm_1_1AArch64CC.html#abfa1f7dce576430da99eed57807c7f28ab89adee997fb2a645a2d26e1f1bdaadf">AL</a>, IRB.getVoidTy(), OrdTy);</div>
<div class="line"><a name="l00389"></a><span class="lineno">  389</span>&#160;  }</div>
<div class="line"><a name="l00390"></a><span class="lineno">  390</span>&#160; </div>
<div class="line"><a name="l00391"></a><span class="lineno">  391</span>&#160;  MemmoveFn =</div>
<div class="line"><a name="l00392"></a><span class="lineno">  392</span>&#160;      <a class="code" href="lib_2Target_2X86_2README_8txt.html#ac88fe1d3a61b056a4f64fbbb156a62ff">M</a>.getOrInsertFunction(<span class="stringliteral">&quot;memmove&quot;</span>, Attr, IRB.getInt8PtrTy(),</div>
<div class="line"><a name="l00393"></a><span class="lineno">  393</span>&#160;                            IRB.getInt8PtrTy(), IRB.getInt8PtrTy(), IntptrTy);</div>
<div class="line"><a name="l00394"></a><span class="lineno">  394</span>&#160;  MemcpyFn =</div>
<div class="line"><a name="l00395"></a><span class="lineno">  395</span>&#160;      <a class="code" href="lib_2Target_2X86_2README_8txt.html#ac88fe1d3a61b056a4f64fbbb156a62ff">M</a>.getOrInsertFunction(<span class="stringliteral">&quot;memcpy&quot;</span>, Attr, IRB.getInt8PtrTy(),</div>
<div class="line"><a name="l00396"></a><span class="lineno">  396</span>&#160;                            IRB.getInt8PtrTy(), IRB.getInt8PtrTy(), IntptrTy);</div>
<div class="line"><a name="l00397"></a><span class="lineno">  397</span>&#160;  MemsetFn =</div>
<div class="line"><a name="l00398"></a><span class="lineno">  398</span>&#160;      <a class="code" href="lib_2Target_2X86_2README_8txt.html#ac88fe1d3a61b056a4f64fbbb156a62ff">M</a>.getOrInsertFunction(<span class="stringliteral">&quot;memset&quot;</span>, Attr, IRB.getInt8PtrTy(),</div>
<div class="line"><a name="l00399"></a><span class="lineno">  399</span>&#160;                            IRB.getInt8PtrTy(), IRB.getInt32Ty(), IntptrTy);</div>
<div class="line"><a name="l00400"></a><span class="lineno">  400</span>&#160;}</div>
<div class="line"><a name="l00401"></a><span class="lineno">  401</span>&#160; </div>
<div class="line"><a name="l00402"></a><span class="lineno"><a class="line" href="ThreadSanitizer_8cpp.html#a15cf887d2d1af2b11ee47e28142ac131">  402</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">bool</span> <a class="code" href="ThreadSanitizer_8cpp.html#a15cf887d2d1af2b11ee47e28142ac131">isVtableAccess</a>(<a class="code" href="classllvm_1_1Instruction.html">Instruction</a> *<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>) {</div>
<div class="line"><a name="l00403"></a><span class="lineno">  403</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1MDNode.html">MDNode</a> *<a class="code" href="namespacellvm_1_1dwarf.html#ac94a19fc8c57bf0350fc4e9f45897828">Tag</a> = <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>-&gt;getMetadata(LLVMContext::MD_tbaa))</div>
<div class="line"><a name="l00404"></a><span class="lineno">  404</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="namespacellvm_1_1dwarf.html#ac94a19fc8c57bf0350fc4e9f45897828">Tag</a>-&gt;isTBAAVtableAccess();</div>
<div class="line"><a name="l00405"></a><span class="lineno">  405</span>&#160;  <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l00406"></a><span class="lineno">  406</span>&#160;}</div>
<div class="line"><a name="l00407"></a><span class="lineno">  407</span>&#160; </div>
<div class="line"><a name="l00408"></a><span class="lineno">  408</span>&#160;<span class="comment">// Do not instrument known races/&quot;benign races&quot; that come from compiler</span></div>
<div class="line"><a name="l00409"></a><span class="lineno">  409</span>&#160;<span class="comment">// instrumentatin. The user has no way of suppressing them.</span></div>
<div class="line"><a name="l00410"></a><span class="lineno"><a class="line" href="ThreadSanitizer_8cpp.html#a0bb37c4d9d72e23c0da8cafdb59f466a">  410</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">bool</span> <a class="code" href="ThreadSanitizer_8cpp.html#a0bb37c4d9d72e23c0da8cafdb59f466a">shouldInstrumentReadWriteFromAddress</a>(<span class="keyword">const</span> <a class="code" href="classllvm_1_1Module.html">Module</a> *M, <a class="code" href="classllvm_1_1Value.html">Value</a> *<a class="code" href="ELFObjHandler_8cpp.html#a9df82a8be2f17e80535a8937bf23e022">Addr</a>) {</div>
<div class="line"><a name="l00411"></a><span class="lineno">  411</span>&#160;  <span class="comment">// Peel off GEPs and BitCasts.</span></div>
<div class="line"><a name="l00412"></a><span class="lineno">  412</span>&#160;  <a class="code" href="ELFObjHandler_8cpp.html#a9df82a8be2f17e80535a8937bf23e022">Addr</a> = <a class="code" href="ELFObjHandler_8cpp.html#a9df82a8be2f17e80535a8937bf23e022">Addr</a>-&gt;stripInBoundsOffsets();</div>
<div class="line"><a name="l00413"></a><span class="lineno">  413</span>&#160; </div>
<div class="line"><a name="l00414"></a><span class="lineno">  414</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1GlobalVariable.html">GlobalVariable</a> *GV = dyn_cast&lt;GlobalVariable&gt;(<a class="code" href="ELFObjHandler_8cpp.html#a9df82a8be2f17e80535a8937bf23e022">Addr</a>)) {</div>
<div class="line"><a name="l00415"></a><span class="lineno">  415</span>&#160;    <span class="keywordflow">if</span> (GV-&gt;hasSection()) {</div>
<div class="line"><a name="l00416"></a><span class="lineno">  416</span>&#160;      <a class="code" href="classllvm_1_1StringRef.html">StringRef</a> <a class="code" href="structllvm_1_1SectionName.html">SectionName</a> = GV-&gt;getSection();</div>
<div class="line"><a name="l00417"></a><span class="lineno">  417</span>&#160;      <span class="comment">// Check if the global is in the PGO counters section.</span></div>
<div class="line"><a name="l00418"></a><span class="lineno">  418</span>&#160;      <span class="keyword">auto</span> OF = <a class="code" href="classllvm_1_1Triple.html">Triple</a>(<a class="code" href="lib_2Target_2X86_2README_8txt.html#ac88fe1d3a61b056a4f64fbbb156a62ff">M</a>-&gt;getTargetTriple()).<a class="code" href="classllvm_1_1Triple.html#a2e265a0d332c3e2db0acf0c7afd4175d">getObjectFormat</a>();</div>
<div class="line"><a name="l00419"></a><span class="lineno">  419</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="structllvm_1_1SectionName.html">SectionName</a>.endswith(</div>
<div class="line"><a name="l00420"></a><span class="lineno">  420</span>&#160;              <a class="code" href="namespacellvm.html#a50e3b943e26ec60c2aa24a7ff43a2d17">getInstrProfSectionName</a>(IPSK_cnts, OF, <span class="comment">/*AddSegmentInfo=*/</span><span class="keyword">false</span>)))</div>
<div class="line"><a name="l00421"></a><span class="lineno">  421</span>&#160;        <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l00422"></a><span class="lineno">  422</span>&#160;    }</div>
<div class="line"><a name="l00423"></a><span class="lineno">  423</span>&#160; </div>
<div class="line"><a name="l00424"></a><span class="lineno">  424</span>&#160;    <span class="comment">// Check if the global is private gcov data.</span></div>
<div class="line"><a name="l00425"></a><span class="lineno">  425</span>&#160;    <span class="keywordflow">if</span> (GV-&gt;getName().startswith(<span class="stringliteral">&quot;__llvm_gcov&quot;</span>) ||</div>
<div class="line"><a name="l00426"></a><span class="lineno">  426</span>&#160;        GV-&gt;getName().startswith(<span class="stringliteral">&quot;__llvm_gcda&quot;</span>))</div>
<div class="line"><a name="l00427"></a><span class="lineno">  427</span>&#160;      <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l00428"></a><span class="lineno">  428</span>&#160;  }</div>
<div class="line"><a name="l00429"></a><span class="lineno">  429</span>&#160; </div>
<div class="line"><a name="l00430"></a><span class="lineno">  430</span>&#160;  <span class="comment">// Do not instrument acesses from different address spaces; we cannot deal</span></div>
<div class="line"><a name="l00431"></a><span class="lineno">  431</span>&#160;  <span class="comment">// with them.</span></div>
<div class="line"><a name="l00432"></a><span class="lineno">  432</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="ELFObjHandler_8cpp.html#a9df82a8be2f17e80535a8937bf23e022">Addr</a>) {</div>
<div class="line"><a name="l00433"></a><span class="lineno">  433</span>&#160;    <a class="code" href="classllvm_1_1Type.html">Type</a> *PtrTy = cast&lt;PointerType&gt;(<a class="code" href="ELFObjHandler_8cpp.html#a9df82a8be2f17e80535a8937bf23e022">Addr</a>-&gt;getType()-&gt;getScalarType());</div>
<div class="line"><a name="l00434"></a><span class="lineno">  434</span>&#160;    <span class="keywordflow">if</span> (PtrTy-&gt;<a class="code" href="classllvm_1_1Type.html#a5ab2d0b0f0b8ceec3b907184e7567197">getPointerAddressSpace</a>() != 0)</div>
<div class="line"><a name="l00435"></a><span class="lineno">  435</span>&#160;      <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l00436"></a><span class="lineno">  436</span>&#160;  }</div>
<div class="line"><a name="l00437"></a><span class="lineno">  437</span>&#160; </div>
<div class="line"><a name="l00438"></a><span class="lineno">  438</span>&#160;  <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l00439"></a><span class="lineno">  439</span>&#160;}</div>
<div class="line"><a name="l00440"></a><span class="lineno">  440</span>&#160; </div>
<div class="line"><a name="l00441"></a><span class="lineno">  441</span>&#160;<span class="keywordtype">bool</span> ThreadSanitizer::addrPointsToConstantData(<a class="code" href="classllvm_1_1Value.html">Value</a> *<a class="code" href="ELFObjHandler_8cpp.html#a9df82a8be2f17e80535a8937bf23e022">Addr</a>) {</div>
<div class="line"><a name="l00442"></a><span class="lineno">  442</span>&#160;  <span class="comment">// If this is a GEP, just analyze its pointer operand.</span></div>
<div class="line"><a name="l00443"></a><span class="lineno">  443</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1GetElementPtrInst.html">GetElementPtrInst</a> *<a class="code" href="HexagonCommonGEP_8cpp.html#ad532e8710e50302e0a376b61c91fa91d">GEP</a> = dyn_cast&lt;GetElementPtrInst&gt;(<a class="code" href="ELFObjHandler_8cpp.html#a9df82a8be2f17e80535a8937bf23e022">Addr</a>))</div>
<div class="line"><a name="l00444"></a><span class="lineno">  444</span>&#160;    <a class="code" href="ELFObjHandler_8cpp.html#a9df82a8be2f17e80535a8937bf23e022">Addr</a> = <a class="code" href="HexagonCommonGEP_8cpp.html#ad532e8710e50302e0a376b61c91fa91d">GEP</a>-&gt;getPointerOperand();</div>
<div class="line"><a name="l00445"></a><span class="lineno">  445</span>&#160; </div>
<div class="line"><a name="l00446"></a><span class="lineno">  446</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1GlobalVariable.html">GlobalVariable</a> *GV = dyn_cast&lt;GlobalVariable&gt;(<a class="code" href="ELFObjHandler_8cpp.html#a9df82a8be2f17e80535a8937bf23e022">Addr</a>)) {</div>
<div class="line"><a name="l00447"></a><span class="lineno">  447</span>&#160;    <span class="keywordflow">if</span> (GV-&gt;isConstant()) {</div>
<div class="line"><a name="l00448"></a><span class="lineno">  448</span>&#160;      <span class="comment">// Reads from constant globals can not race with any writes.</span></div>
<div class="line"><a name="l00449"></a><span class="lineno">  449</span>&#160;      NumOmittedReadsFromConstantGlobals++;</div>
<div class="line"><a name="l00450"></a><span class="lineno">  450</span>&#160;      <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l00451"></a><span class="lineno">  451</span>&#160;    }</div>
<div class="line"><a name="l00452"></a><span class="lineno">  452</span>&#160;  } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1LoadInst.html">LoadInst</a> *L = dyn_cast&lt;LoadInst&gt;(<a class="code" href="ELFObjHandler_8cpp.html#a9df82a8be2f17e80535a8937bf23e022">Addr</a>)) {</div>
<div class="line"><a name="l00453"></a><span class="lineno">  453</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="ThreadSanitizer_8cpp.html#a15cf887d2d1af2b11ee47e28142ac131">isVtableAccess</a>(L)) {</div>
<div class="line"><a name="l00454"></a><span class="lineno">  454</span>&#160;      <span class="comment">// Reads from a vtable pointer can not race with any writes.</span></div>
<div class="line"><a name="l00455"></a><span class="lineno">  455</span>&#160;      NumOmittedReadsFromVtable++;</div>
<div class="line"><a name="l00456"></a><span class="lineno">  456</span>&#160;      <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l00457"></a><span class="lineno">  457</span>&#160;    }</div>
<div class="line"><a name="l00458"></a><span class="lineno">  458</span>&#160;  }</div>
<div class="line"><a name="l00459"></a><span class="lineno">  459</span>&#160;  <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l00460"></a><span class="lineno">  460</span>&#160;}</div>
<div class="line"><a name="l00461"></a><span class="lineno">  461</span>&#160; </div>
<div class="line"><a name="l00462"></a><span class="lineno">  462</span>&#160;<span class="comment">// Instrumenting some of the accesses may be proven redundant.</span></div>
<div class="line"><a name="l00463"></a><span class="lineno">  463</span>&#160;<span class="comment">// Currently handled:</span></div>
<div class="line"><a name="l00464"></a><span class="lineno">  464</span>&#160;<span class="comment">//  - read-before-write (within same BB, no calls between)</span></div>
<div class="line"><a name="l00465"></a><span class="lineno">  465</span>&#160;<span class="comment">//  - not captured variables</span></div>
<div class="line"><a name="l00466"></a><span class="lineno">  466</span>&#160;<span class="comment">//</span></div>
<div class="line"><a name="l00467"></a><span class="lineno">  467</span>&#160;<span class="comment">// We do not handle some of the patterns that should not survive</span></div>
<div class="line"><a name="l00468"></a><span class="lineno">  468</span>&#160;<span class="comment">// after the classic compiler optimizations.</span></div>
<div class="line"><a name="l00469"></a><span class="lineno">  469</span>&#160;<span class="comment">// E.g. two reads from the same temp should be eliminated by CSE,</span></div>
<div class="line"><a name="l00470"></a><span class="lineno">  470</span>&#160;<span class="comment">// two writes should be eliminated by DSE, etc.</span></div>
<div class="line"><a name="l00471"></a><span class="lineno">  471</span>&#160;<span class="comment">//</span></div>
<div class="line"><a name="l00472"></a><span class="lineno">  472</span>&#160;<span class="comment">// &#39;Local&#39; is a vector of insns within the same BB (no calls between).</span></div>
<div class="line"><a name="l00473"></a><span class="lineno">  473</span>&#160;<span class="comment">// &#39;All&#39; is a vector of insns that will be instrumented.</span></div>
<div class="line"><a name="l00474"></a><span class="lineno">  474</span>&#160;<span class="keywordtype">void</span> ThreadSanitizer::chooseInstructionsToInstrument(</div>
<div class="line"><a name="l00475"></a><span class="lineno">  475</span>&#160;    <a class="code" href="classllvm_1_1SmallVectorImpl.html">SmallVectorImpl&lt;Instruction *&gt;</a> &amp;Local,</div>
<div class="line"><a name="l00476"></a><span class="lineno">  476</span>&#160;    <a class="code" href="classllvm_1_1SmallVectorImpl.html">SmallVectorImpl&lt;InstructionInfo&gt;</a> &amp;All, <span class="keyword">const</span> <a class="code" href="classllvm_1_1DataLayout.html">DataLayout</a> &amp;<a class="code" href="AArch64SLSHardening_8cpp.html#ad467c4ab9119043f9b7750ab986be61a">DL</a>) {</div>
<div class="line"><a name="l00477"></a><span class="lineno">  477</span>&#160;  <a class="code" href="classllvm_1_1DenseMap.html">DenseMap&lt;Value *, size_t&gt;</a> WriteTargets; <span class="comment">// Map of addresses to index in All</span></div>
<div class="line"><a name="l00478"></a><span class="lineno">  478</span>&#160;  <span class="comment">// Iterate from the end.</span></div>
<div class="line"><a name="l00479"></a><span class="lineno">  479</span>&#160;  <span class="keywordflow">for</span> (<a class="code" href="classllvm_1_1Instruction.html">Instruction</a> *<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a> : <a class="code" href="namespacellvm.html#a469101ea87b8b432a1b4f7935c97f35c">reverse</a>(Local)) {</div>
<div class="line"><a name="l00480"></a><span class="lineno">  480</span>&#160;    <span class="keyword">const</span> <span class="keywordtype">bool</span> IsWrite = isa&lt;StoreInst&gt;(*<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>);</div>
<div class="line"><a name="l00481"></a><span class="lineno">  481</span>&#160;    <a class="code" href="classllvm_1_1Value.html">Value</a> *<a class="code" href="ELFObjHandler_8cpp.html#a9df82a8be2f17e80535a8937bf23e022">Addr</a> = IsWrite ? cast&lt;StoreInst&gt;(<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>)-&gt;getPointerOperand()</div>
<div class="line"><a name="l00482"></a><span class="lineno">  482</span>&#160;                          : cast&lt;LoadInst&gt;(<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>)-&gt;getPointerOperand();</div>
<div class="line"><a name="l00483"></a><span class="lineno">  483</span>&#160; </div>
<div class="line"><a name="l00484"></a><span class="lineno">  484</span>&#160;    <span class="keywordflow">if</span> (!<a class="code" href="ThreadSanitizer_8cpp.html#a0bb37c4d9d72e23c0da8cafdb59f466a">shouldInstrumentReadWriteFromAddress</a>(<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>-&gt;getModule(), <a class="code" href="ELFObjHandler_8cpp.html#a9df82a8be2f17e80535a8937bf23e022">Addr</a>))</div>
<div class="line"><a name="l00485"></a><span class="lineno">  485</span>&#160;      <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l00486"></a><span class="lineno">  486</span>&#160; </div>
<div class="line"><a name="l00487"></a><span class="lineno">  487</span>&#160;    <span class="keywordflow">if</span> (!IsWrite) {</div>
<div class="line"><a name="l00488"></a><span class="lineno">  488</span>&#160;      <span class="keyword">const</span> <span class="keyword">auto</span> WriteEntry = WriteTargets.<a class="code" href="classllvm_1_1DenseMapBase.html#a0c047f127ed4380a6f383d70bec4eb94">find</a>(<a class="code" href="ELFObjHandler_8cpp.html#a9df82a8be2f17e80535a8937bf23e022">Addr</a>);</div>
<div class="line"><a name="l00489"></a><span class="lineno">  489</span>&#160;      <span class="keywordflow">if</span> (!<a class="code" href="ThreadSanitizer_8cpp.html#a4ceb95d271f52528fa1bc453a520993d">ClInstrumentReadBeforeWrite</a> &amp;&amp; WriteEntry != WriteTargets.<a class="code" href="classllvm_1_1DenseMapBase.html#a65520b9c67759099e313d0f4e7b5ff9e">end</a>()) {</div>
<div class="line"><a name="l00490"></a><span class="lineno">  490</span>&#160;        <span class="keyword">auto</span> &amp;WI = <a class="code" href="namespacellvm_1_1MachO.html#a11849daa1b55a8c00390b349546112e7a2005c1eb611537027feb90dafcbbb444">All</a>[WriteEntry-&gt;second];</div>
<div class="line"><a name="l00491"></a><span class="lineno">  491</span>&#160;        <span class="comment">// If we distinguish volatile accesses and if either the read or write</span></div>
<div class="line"><a name="l00492"></a><span class="lineno">  492</span>&#160;        <span class="comment">// is volatile, do not omit any instrumentation.</span></div>
<div class="line"><a name="l00493"></a><span class="lineno">  493</span>&#160;        <span class="keyword">const</span> <span class="keywordtype">bool</span> AnyVolatile =</div>
<div class="line"><a name="l00494"></a><span class="lineno">  494</span>&#160;            <a class="code" href="ThreadSanitizer_8cpp.html#af0781d5911a70fc919235ef56d03697c">ClDistinguishVolatile</a> &amp;&amp; (cast&lt;LoadInst&gt;(<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>)-&gt;isVolatile() ||</div>
<div class="line"><a name="l00495"></a><span class="lineno">  495</span>&#160;                                      cast&lt;StoreInst&gt;(WI.Inst)-&gt;isVolatile());</div>
<div class="line"><a name="l00496"></a><span class="lineno">  496</span>&#160;        <span class="keywordflow">if</span> (!AnyVolatile) {</div>
<div class="line"><a name="l00497"></a><span class="lineno">  497</span>&#160;          <span class="comment">// We will write to this temp, so no reason to analyze the read.</span></div>
<div class="line"><a name="l00498"></a><span class="lineno">  498</span>&#160;          <span class="comment">// Mark the write instruction as compound.</span></div>
<div class="line"><a name="l00499"></a><span class="lineno">  499</span>&#160;          WI.Flags |= InstructionInfo::kCompoundRW;</div>
<div class="line"><a name="l00500"></a><span class="lineno">  500</span>&#160;          NumOmittedReadsBeforeWrite++;</div>
<div class="line"><a name="l00501"></a><span class="lineno">  501</span>&#160;          <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l00502"></a><span class="lineno">  502</span>&#160;        }</div>
<div class="line"><a name="l00503"></a><span class="lineno">  503</span>&#160;      }</div>
<div class="line"><a name="l00504"></a><span class="lineno">  504</span>&#160; </div>
<div class="line"><a name="l00505"></a><span class="lineno">  505</span>&#160;      <span class="keywordflow">if</span> (addrPointsToConstantData(<a class="code" href="ELFObjHandler_8cpp.html#a9df82a8be2f17e80535a8937bf23e022">Addr</a>)) {</div>
<div class="line"><a name="l00506"></a><span class="lineno">  506</span>&#160;        <span class="comment">// Addr points to some constant data -- it can not race with any writes.</span></div>
<div class="line"><a name="l00507"></a><span class="lineno">  507</span>&#160;        <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l00508"></a><span class="lineno">  508</span>&#160;      }</div>
<div class="line"><a name="l00509"></a><span class="lineno">  509</span>&#160;    }</div>
<div class="line"><a name="l00510"></a><span class="lineno">  510</span>&#160; </div>
<div class="line"><a name="l00511"></a><span class="lineno">  511</span>&#160;    <span class="keywordflow">if</span> (isa&lt;AllocaInst&gt;(<a class="code" href="namespacellvm.html#a3b1c5788b85ffa254be0e834edf5cf8f">getUnderlyingObject</a>(<a class="code" href="ELFObjHandler_8cpp.html#a9df82a8be2f17e80535a8937bf23e022">Addr</a>)) &amp;&amp;</div>
<div class="line"><a name="l00512"></a><span class="lineno">  512</span>&#160;        !<a class="code" href="namespacellvm.html#a7912b6c9e7843ca9fd5a11e199bef617">PointerMayBeCaptured</a>(<a class="code" href="ELFObjHandler_8cpp.html#a9df82a8be2f17e80535a8937bf23e022">Addr</a>, <span class="keyword">true</span>, <span class="keyword">true</span>)) {</div>
<div class="line"><a name="l00513"></a><span class="lineno">  513</span>&#160;      <span class="comment">// The variable is addressable but not captured, so it cannot be</span></div>
<div class="line"><a name="l00514"></a><span class="lineno">  514</span>&#160;      <span class="comment">// referenced from a different thread and participate in a data race</span></div>
<div class="line"><a name="l00515"></a><span class="lineno">  515</span>&#160;      <span class="comment">// (see llvm/Analysis/CaptureTracking.h for details).</span></div>
<div class="line"><a name="l00516"></a><span class="lineno">  516</span>&#160;      NumOmittedNonCaptured++;</div>
<div class="line"><a name="l00517"></a><span class="lineno">  517</span>&#160;      <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l00518"></a><span class="lineno">  518</span>&#160;    }</div>
<div class="line"><a name="l00519"></a><span class="lineno">  519</span>&#160; </div>
<div class="line"><a name="l00520"></a><span class="lineno">  520</span>&#160;    <span class="comment">// Instrument this instruction.</span></div>
<div class="line"><a name="l00521"></a><span class="lineno">  521</span>&#160;    <a class="code" href="namespacellvm_1_1MachO.html#a11849daa1b55a8c00390b349546112e7a2005c1eb611537027feb90dafcbbb444">All</a>.emplace_back(<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>);</div>
<div class="line"><a name="l00522"></a><span class="lineno">  522</span>&#160;    <span class="keywordflow">if</span> (IsWrite) {</div>
<div class="line"><a name="l00523"></a><span class="lineno">  523</span>&#160;      <span class="comment">// For read-before-write and compound instrumentation we only need one</span></div>
<div class="line"><a name="l00524"></a><span class="lineno">  524</span>&#160;      <span class="comment">// write target, and we can override any previous entry if it exists.</span></div>
<div class="line"><a name="l00525"></a><span class="lineno">  525</span>&#160;      WriteTargets[<a class="code" href="ELFObjHandler_8cpp.html#a9df82a8be2f17e80535a8937bf23e022">Addr</a>] = <a class="code" href="namespacellvm_1_1MachO.html#a11849daa1b55a8c00390b349546112e7a2005c1eb611537027feb90dafcbbb444">All</a>.size() - 1;</div>
<div class="line"><a name="l00526"></a><span class="lineno">  526</span>&#160;    }</div>
<div class="line"><a name="l00527"></a><span class="lineno">  527</span>&#160;  }</div>
<div class="line"><a name="l00528"></a><span class="lineno">  528</span>&#160;  <a class="code" href="namespacellvm_1_1jitlink.html#adb322dc6826cf005531ccfdf666260fda7a1920d61156abc05a60135aefe8bc67">Local</a>.clear();</div>
<div class="line"><a name="l00529"></a><span class="lineno">  529</span>&#160;}</div>
<div class="line"><a name="l00530"></a><span class="lineno">  530</span>&#160; </div>
<div class="line"><a name="l00531"></a><span class="lineno"><a class="line" href="ThreadSanitizer_8cpp.html#accbf04314e7caef9ac81d62928dda8b8">  531</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">bool</span> <a class="code" href="ThreadSanitizer_8cpp.html#accbf04314e7caef9ac81d62928dda8b8">isAtomic</a>(<a class="code" href="classllvm_1_1Instruction.html">Instruction</a> *<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>) {</div>
<div class="line"><a name="l00532"></a><span class="lineno">  532</span>&#160;  <span class="comment">// TODO: Ask TTI whether synchronization scope is between threads.</span></div>
<div class="line"><a name="l00533"></a><span class="lineno">  533</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1LoadInst.html">LoadInst</a> *LI = dyn_cast&lt;LoadInst&gt;(<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>))</div>
<div class="line"><a name="l00534"></a><span class="lineno">  534</span>&#160;    <span class="keywordflow">return</span> LI-&gt;isAtomic() &amp;&amp; LI-&gt;getSyncScopeID() != <a class="code" href="namespacellvm_1_1SyncScope.html#af9e9f9aa1e7422ed19250fbf66982b34a6ee3fb8ea1d8946ee1f96ab1947b294a">SyncScope::SingleThread</a>;</div>
<div class="line"><a name="l00535"></a><span class="lineno">  535</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1StoreInst.html">StoreInst</a> *<a class="code" href="PassBuilderBindings_8cpp.html#a0f79dad1efc582555a443cc11a8fa401">SI</a> = dyn_cast&lt;StoreInst&gt;(<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>))</div>
<div class="line"><a name="l00536"></a><span class="lineno">  536</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="PassBuilderBindings_8cpp.html#a0f79dad1efc582555a443cc11a8fa401">SI</a>-&gt;isAtomic() &amp;&amp; <a class="code" href="PassBuilderBindings_8cpp.html#a0f79dad1efc582555a443cc11a8fa401">SI</a>-&gt;getSyncScopeID() != <a class="code" href="namespacellvm_1_1SyncScope.html#af9e9f9aa1e7422ed19250fbf66982b34a6ee3fb8ea1d8946ee1f96ab1947b294a">SyncScope::SingleThread</a>;</div>
<div class="line"><a name="l00537"></a><span class="lineno">  537</span>&#160;  <span class="keywordflow">if</span> (isa&lt;AtomicRMWInst&gt;(<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>))</div>
<div class="line"><a name="l00538"></a><span class="lineno">  538</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l00539"></a><span class="lineno">  539</span>&#160;  <span class="keywordflow">if</span> (isa&lt;AtomicCmpXchgInst&gt;(<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>))</div>
<div class="line"><a name="l00540"></a><span class="lineno">  540</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l00541"></a><span class="lineno">  541</span>&#160;  <span class="keywordflow">if</span> (isa&lt;FenceInst&gt;(<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>))</div>
<div class="line"><a name="l00542"></a><span class="lineno">  542</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l00543"></a><span class="lineno">  543</span>&#160;  <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l00544"></a><span class="lineno">  544</span>&#160;}</div>
<div class="line"><a name="l00545"></a><span class="lineno">  545</span>&#160; </div>
<div class="line"><a name="l00546"></a><span class="lineno">  546</span>&#160;<span class="keywordtype">void</span> ThreadSanitizer::InsertRuntimeIgnores(<a class="code" href="classllvm_1_1Function.html">Function</a> &amp;<a class="code" href="MD5_8cpp.html#a96d73bbd7af15cb1fc38c3f4a3bd82e9">F</a>) {</div>
<div class="line"><a name="l00547"></a><span class="lineno">  547</span>&#160;  <a class="code" href="classllvm_1_1IRBuilder.html">IRBuilder&lt;&gt;</a> IRB(<a class="code" href="MD5_8cpp.html#a96d73bbd7af15cb1fc38c3f4a3bd82e9">F</a>.getEntryBlock().getFirstNonPHI());</div>
<div class="line"><a name="l00548"></a><span class="lineno">  548</span>&#160;  IRB.CreateCall(TsanIgnoreBegin);</div>
<div class="line"><a name="l00549"></a><span class="lineno">  549</span>&#160;  <a class="code" href="classllvm_1_1EscapeEnumerator.html">EscapeEnumerator</a> EE(<a class="code" href="MD5_8cpp.html#a96d73bbd7af15cb1fc38c3f4a3bd82e9">F</a>, <span class="stringliteral">&quot;tsan_ignore_cleanup&quot;</span>, <a class="code" href="ThreadSanitizer_8cpp.html#a4eb659c41efee9cbd22d94b4c53da595">ClHandleCxxExceptions</a>);</div>
<div class="line"><a name="l00550"></a><span class="lineno">  550</span>&#160;  <span class="keywordflow">while</span> (<a class="code" href="classllvm_1_1IRBuilder.html">IRBuilder&lt;&gt;</a> *AtExit = EE.Next()) {</div>
<div class="line"><a name="l00551"></a><span class="lineno">  551</span>&#160;    AtExit-&gt;CreateCall(TsanIgnoreEnd);</div>
<div class="line"><a name="l00552"></a><span class="lineno">  552</span>&#160;  }</div>
<div class="line"><a name="l00553"></a><span class="lineno">  553</span>&#160;}</div>
<div class="line"><a name="l00554"></a><span class="lineno">  554</span>&#160; </div>
<div class="line"><a name="l00555"></a><span class="lineno">  555</span>&#160;<span class="keywordtype">bool</span> ThreadSanitizer::sanitizeFunction(<a class="code" href="classllvm_1_1Function.html">Function</a> &amp;<a class="code" href="MD5_8cpp.html#a96d73bbd7af15cb1fc38c3f4a3bd82e9">F</a>,</div>
<div class="line"><a name="l00556"></a><span class="lineno">  556</span>&#160;                                       <span class="keyword">const</span> <a class="code" href="classllvm_1_1TargetLibraryInfo.html">TargetLibraryInfo</a> &amp;TLI) {</div>
<div class="line"><a name="l00557"></a><span class="lineno">  557</span>&#160;  <span class="comment">// This is required to prevent instrumenting call to __tsan_init from within</span></div>
<div class="line"><a name="l00558"></a><span class="lineno">  558</span>&#160;  <span class="comment">// the module constructor.</span></div>
<div class="line"><a name="l00559"></a><span class="lineno">  559</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="MD5_8cpp.html#a96d73bbd7af15cb1fc38c3f4a3bd82e9">F</a>.getName() == <a class="code" href="ThreadSanitizer_8cpp.html#a38c0f7b9db64da1261f7c7f1db454663">kTsanModuleCtorName</a>)</div>
<div class="line"><a name="l00560"></a><span class="lineno">  560</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l00561"></a><span class="lineno">  561</span>&#160;  <span class="comment">// Naked functions can not have prologue/epilogue</span></div>
<div class="line"><a name="l00562"></a><span class="lineno">  562</span>&#160;  <span class="comment">// (__tsan_func_entry/__tsan_func_exit) generated, so don&#39;t instrument them at</span></div>
<div class="line"><a name="l00563"></a><span class="lineno">  563</span>&#160;  <span class="comment">// all.</span></div>
<div class="line"><a name="l00564"></a><span class="lineno">  564</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="MD5_8cpp.html#a96d73bbd7af15cb1fc38c3f4a3bd82e9">F</a>.hasFnAttribute(Attribute::Naked))</div>
<div class="line"><a name="l00565"></a><span class="lineno">  565</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l00566"></a><span class="lineno">  566</span>&#160;  <a class="code" href="TargetLibraryInfo_8cpp.html#a19d27915595e7f0a0ef271448bcdac6f">initialize</a>(*<a class="code" href="MD5_8cpp.html#a96d73bbd7af15cb1fc38c3f4a3bd82e9">F</a>.getParent());</div>
<div class="line"><a name="l00567"></a><span class="lineno">  567</span>&#160;  <a class="code" href="classllvm_1_1SmallVector.html">SmallVector&lt;InstructionInfo, 8&gt;</a> AllLoadsAndStores;</div>
<div class="line"><a name="l00568"></a><span class="lineno">  568</span>&#160;  <a class="code" href="classllvm_1_1SmallVector.html">SmallVector&lt;Instruction*, 8&gt;</a> LocalLoadsAndStores;</div>
<div class="line"><a name="l00569"></a><span class="lineno">  569</span>&#160;  <a class="code" href="classllvm_1_1SmallVector.html">SmallVector&lt;Instruction*, 8&gt;</a> AtomicAccesses;</div>
<div class="line"><a name="l00570"></a><span class="lineno">  570</span>&#160;  <a class="code" href="classllvm_1_1SmallVector.html">SmallVector&lt;Instruction*, 8&gt;</a> MemIntrinCalls;</div>
<div class="line"><a name="l00571"></a><span class="lineno">  571</span>&#160;  <span class="keywordtype">bool</span> Res = <span class="keyword">false</span>;</div>
<div class="line"><a name="l00572"></a><span class="lineno">  572</span>&#160;  <span class="keywordtype">bool</span> <a class="code" href="AArch64InstrInfo_8cpp.html#ab0b0a572164f8fccd5474cb6babed129a4f2a846b62b36aa105ec3ddfd151a482">HasCalls</a> = <span class="keyword">false</span>;</div>
<div class="line"><a name="l00573"></a><span class="lineno">  573</span>&#160;  <span class="keywordtype">bool</span> SanitizeFunction = <a class="code" href="MD5_8cpp.html#a96d73bbd7af15cb1fc38c3f4a3bd82e9">F</a>.hasFnAttribute(Attribute::SanitizeThread);</div>
<div class="line"><a name="l00574"></a><span class="lineno">  574</span>&#160;  <span class="keyword">const</span> <a class="code" href="classllvm_1_1DataLayout.html">DataLayout</a> &amp;<a class="code" href="AArch64SLSHardening_8cpp.html#ad467c4ab9119043f9b7750ab986be61a">DL</a> = <a class="code" href="MD5_8cpp.html#a96d73bbd7af15cb1fc38c3f4a3bd82e9">F</a>.getParent()-&gt;getDataLayout();</div>
<div class="line"><a name="l00575"></a><span class="lineno">  575</span>&#160; </div>
<div class="line"><a name="l00576"></a><span class="lineno">  576</span>&#160;  <span class="comment">// Traverse all instructions, collect loads/stores/returns, check for calls.</span></div>
<div class="line"><a name="l00577"></a><span class="lineno">  577</span>&#160;  <span class="keywordflow">for</span> (<span class="keyword">auto</span> &amp;<a class="code" href="lib_2CodeGen_2README_8txt.html#a09776db24cf586ec9f1e18f3bae14099">BB</a> : <a class="code" href="MD5_8cpp.html#a96d73bbd7af15cb1fc38c3f4a3bd82e9">F</a>) {</div>
<div class="line"><a name="l00578"></a><span class="lineno">  578</span>&#160;    <span class="keywordflow">for</span> (<span class="keyword">auto</span> &amp;Inst : <a class="code" href="lib_2CodeGen_2README_8txt.html#a09776db24cf586ec9f1e18f3bae14099">BB</a>) {</div>
<div class="line"><a name="l00579"></a><span class="lineno">  579</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="ThreadSanitizer_8cpp.html#accbf04314e7caef9ac81d62928dda8b8">isAtomic</a>(&amp;Inst))</div>
<div class="line"><a name="l00580"></a><span class="lineno">  580</span>&#160;        AtomicAccesses.push_back(&amp;Inst);</div>
<div class="line"><a name="l00581"></a><span class="lineno">  581</span>&#160;      <span class="keywordflow">else</span> <span class="keywordflow">if</span> (isa&lt;LoadInst&gt;(Inst) || isa&lt;StoreInst&gt;(Inst))</div>
<div class="line"><a name="l00582"></a><span class="lineno">  582</span>&#160;        LocalLoadsAndStores.push_back(&amp;Inst);</div>
<div class="line"><a name="l00583"></a><span class="lineno">  583</span>&#160;      <span class="keywordflow">else</span> <span class="keywordflow">if</span> (isa&lt;CallInst&gt;(Inst) || isa&lt;InvokeInst&gt;(Inst)) {</div>
<div class="line"><a name="l00584"></a><span class="lineno">  584</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1CallInst.html">CallInst</a> *CI = dyn_cast&lt;CallInst&gt;(&amp;Inst))</div>
<div class="line"><a name="l00585"></a><span class="lineno">  585</span>&#160;          <a class="code" href="namespacellvm.html#ae63427c4d8f3c1ce48401b38ed9198f1">maybeMarkSanitizerLibraryCallNoBuiltin</a>(CI, &amp;TLI);</div>
<div class="line"><a name="l00586"></a><span class="lineno">  586</span>&#160;        <span class="keywordflow">if</span> (isa&lt;MemIntrinsic&gt;(Inst))</div>
<div class="line"><a name="l00587"></a><span class="lineno">  587</span>&#160;          MemIntrinCalls.push_back(&amp;Inst);</div>
<div class="line"><a name="l00588"></a><span class="lineno">  588</span>&#160;        <a class="code" href="AArch64InstrInfo_8cpp.html#ab0b0a572164f8fccd5474cb6babed129a4f2a846b62b36aa105ec3ddfd151a482">HasCalls</a> = <span class="keyword">true</span>;</div>
<div class="line"><a name="l00589"></a><span class="lineno">  589</span>&#160;        chooseInstructionsToInstrument(LocalLoadsAndStores, AllLoadsAndStores,</div>
<div class="line"><a name="l00590"></a><span class="lineno">  590</span>&#160;                                       <a class="code" href="AArch64SLSHardening_8cpp.html#ad467c4ab9119043f9b7750ab986be61a">DL</a>);</div>
<div class="line"><a name="l00591"></a><span class="lineno">  591</span>&#160;      }</div>
<div class="line"><a name="l00592"></a><span class="lineno">  592</span>&#160;    }</div>
<div class="line"><a name="l00593"></a><span class="lineno">  593</span>&#160;    chooseInstructionsToInstrument(LocalLoadsAndStores, AllLoadsAndStores, <a class="code" href="AArch64SLSHardening_8cpp.html#ad467c4ab9119043f9b7750ab986be61a">DL</a>);</div>
<div class="line"><a name="l00594"></a><span class="lineno">  594</span>&#160;  }</div>
<div class="line"><a name="l00595"></a><span class="lineno">  595</span>&#160; </div>
<div class="line"><a name="l00596"></a><span class="lineno">  596</span>&#160;  <span class="comment">// We have collected all loads and stores.</span></div>
<div class="line"><a name="l00597"></a><span class="lineno">  597</span>&#160;  <span class="comment">// FIXME: many of these accesses do not need to be checked for races</span></div>
<div class="line"><a name="l00598"></a><span class="lineno">  598</span>&#160;  <span class="comment">// (e.g. variables that do not escape, etc).</span></div>
<div class="line"><a name="l00599"></a><span class="lineno">  599</span>&#160; </div>
<div class="line"><a name="l00600"></a><span class="lineno">  600</span>&#160;  <span class="comment">// Instrument memory accesses only if we want to report bugs in the function.</span></div>
<div class="line"><a name="l00601"></a><span class="lineno">  601</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="ThreadSanitizer_8cpp.html#ae9a6c12fdf4ec6cd050e9c320ceac9f6">ClInstrumentMemoryAccesses</a> &amp;&amp; SanitizeFunction)</div>
<div class="line"><a name="l00602"></a><span class="lineno">  602</span>&#160;    <span class="keywordflow">for</span> (<span class="keyword">const</span> <span class="keyword">auto</span> &amp;II : AllLoadsAndStores) {</div>
<div class="line"><a name="l00603"></a><span class="lineno">  603</span>&#160;      Res |= instrumentLoadOrStore(II, <a class="code" href="AArch64SLSHardening_8cpp.html#ad467c4ab9119043f9b7750ab986be61a">DL</a>);</div>
<div class="line"><a name="l00604"></a><span class="lineno">  604</span>&#160;    }</div>
<div class="line"><a name="l00605"></a><span class="lineno">  605</span>&#160; </div>
<div class="line"><a name="l00606"></a><span class="lineno">  606</span>&#160;  <span class="comment">// Instrument atomic memory accesses in any case (they can be used to</span></div>
<div class="line"><a name="l00607"></a><span class="lineno">  607</span>&#160;  <span class="comment">// implement synchronization).</span></div>
<div class="line"><a name="l00608"></a><span class="lineno">  608</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="ThreadSanitizer_8cpp.html#a729cb67fb2583fad4e5ff29acbbac3e8">ClInstrumentAtomics</a>)</div>
<div class="line"><a name="l00609"></a><span class="lineno">  609</span>&#160;    <span class="keywordflow">for</span> (<span class="keyword">auto</span> Inst : AtomicAccesses) {</div>
<div class="line"><a name="l00610"></a><span class="lineno">  610</span>&#160;      Res |= instrumentAtomic(Inst, <a class="code" href="AArch64SLSHardening_8cpp.html#ad467c4ab9119043f9b7750ab986be61a">DL</a>);</div>
<div class="line"><a name="l00611"></a><span class="lineno">  611</span>&#160;    }</div>
<div class="line"><a name="l00612"></a><span class="lineno">  612</span>&#160; </div>
<div class="line"><a name="l00613"></a><span class="lineno">  613</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="ThreadSanitizer_8cpp.html#aaf71ac0f2b61dccfb3e4cd42cc134ea8">ClInstrumentMemIntrinsics</a> &amp;&amp; SanitizeFunction)</div>
<div class="line"><a name="l00614"></a><span class="lineno">  614</span>&#160;    <span class="keywordflow">for</span> (<span class="keyword">auto</span> Inst : MemIntrinCalls) {</div>
<div class="line"><a name="l00615"></a><span class="lineno">  615</span>&#160;      Res |= instrumentMemIntrinsic(Inst);</div>
<div class="line"><a name="l00616"></a><span class="lineno">  616</span>&#160;    }</div>
<div class="line"><a name="l00617"></a><span class="lineno">  617</span>&#160; </div>
<div class="line"><a name="l00618"></a><span class="lineno">  618</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="MD5_8cpp.html#a96d73bbd7af15cb1fc38c3f4a3bd82e9">F</a>.hasFnAttribute(<span class="stringliteral">&quot;sanitize_thread_no_checking_at_run_time&quot;</span>)) {</div>
<div class="line"><a name="l00619"></a><span class="lineno">  619</span>&#160;    <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(!<a class="code" href="MD5_8cpp.html#a96d73bbd7af15cb1fc38c3f4a3bd82e9">F</a>.hasFnAttribute(Attribute::SanitizeThread));</div>
<div class="line"><a name="l00620"></a><span class="lineno">  620</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="AArch64InstrInfo_8cpp.html#ab0b0a572164f8fccd5474cb6babed129a4f2a846b62b36aa105ec3ddfd151a482">HasCalls</a>)</div>
<div class="line"><a name="l00621"></a><span class="lineno">  621</span>&#160;      InsertRuntimeIgnores(<a class="code" href="MD5_8cpp.html#a96d73bbd7af15cb1fc38c3f4a3bd82e9">F</a>);</div>
<div class="line"><a name="l00622"></a><span class="lineno">  622</span>&#160;  }</div>
<div class="line"><a name="l00623"></a><span class="lineno">  623</span>&#160; </div>
<div class="line"><a name="l00624"></a><span class="lineno">  624</span>&#160;  <span class="comment">// Instrument function entry/exit points if there were instrumented accesses.</span></div>
<div class="line"><a name="l00625"></a><span class="lineno">  625</span>&#160;  <span class="keywordflow">if</span> ((Res || <a class="code" href="AArch64InstrInfo_8cpp.html#ab0b0a572164f8fccd5474cb6babed129a4f2a846b62b36aa105ec3ddfd151a482">HasCalls</a>) &amp;&amp; <a class="code" href="ThreadSanitizer_8cpp.html#ae40d4d90566731cab0da1ce17eff68cc">ClInstrumentFuncEntryExit</a>) {</div>
<div class="line"><a name="l00626"></a><span class="lineno">  626</span>&#160;    <a class="code" href="classllvm_1_1IRBuilder.html">IRBuilder&lt;&gt;</a> IRB(<a class="code" href="MD5_8cpp.html#a96d73bbd7af15cb1fc38c3f4a3bd82e9">F</a>.getEntryBlock().getFirstNonPHI());</div>
<div class="line"><a name="l00627"></a><span class="lineno">  627</span>&#160;    <a class="code" href="classllvm_1_1Value.html">Value</a> *ReturnAddress = IRB.CreateCall(</div>
<div class="line"><a name="l00628"></a><span class="lineno">  628</span>&#160;        <a class="code" href="namespacellvm_1_1Intrinsic.html#a842176a2c8c60a94bc788454b0828ea2">Intrinsic::getDeclaration</a>(<a class="code" href="MD5_8cpp.html#a96d73bbd7af15cb1fc38c3f4a3bd82e9">F</a>.getParent(), Intrinsic::returnaddress),</div>
<div class="line"><a name="l00629"></a><span class="lineno">  629</span>&#160;        IRB.getInt32(0));</div>
<div class="line"><a name="l00630"></a><span class="lineno">  630</span>&#160;    IRB.CreateCall(TsanFuncEntry, ReturnAddress);</div>
<div class="line"><a name="l00631"></a><span class="lineno">  631</span>&#160; </div>
<div class="line"><a name="l00632"></a><span class="lineno">  632</span>&#160;    <a class="code" href="classllvm_1_1EscapeEnumerator.html">EscapeEnumerator</a> EE(<a class="code" href="MD5_8cpp.html#a96d73bbd7af15cb1fc38c3f4a3bd82e9">F</a>, <span class="stringliteral">&quot;tsan_cleanup&quot;</span>, <a class="code" href="ThreadSanitizer_8cpp.html#a4eb659c41efee9cbd22d94b4c53da595">ClHandleCxxExceptions</a>);</div>
<div class="line"><a name="l00633"></a><span class="lineno">  633</span>&#160;    <span class="keywordflow">while</span> (<a class="code" href="classllvm_1_1IRBuilder.html">IRBuilder&lt;&gt;</a> *AtExit = EE.Next()) {</div>
<div class="line"><a name="l00634"></a><span class="lineno">  634</span>&#160;      AtExit-&gt;CreateCall(TsanFuncExit, {});</div>
<div class="line"><a name="l00635"></a><span class="lineno">  635</span>&#160;    }</div>
<div class="line"><a name="l00636"></a><span class="lineno">  636</span>&#160;    Res = <span class="keyword">true</span>;</div>
<div class="line"><a name="l00637"></a><span class="lineno">  637</span>&#160;  }</div>
<div class="line"><a name="l00638"></a><span class="lineno">  638</span>&#160;  <span class="keywordflow">return</span> Res;</div>
<div class="line"><a name="l00639"></a><span class="lineno">  639</span>&#160;}</div>
<div class="line"><a name="l00640"></a><span class="lineno">  640</span>&#160; </div>
<div class="line"><a name="l00641"></a><span class="lineno">  641</span>&#160;<span class="keywordtype">bool</span> ThreadSanitizer::instrumentLoadOrStore(<span class="keyword">const</span> InstructionInfo &amp;II,</div>
<div class="line"><a name="l00642"></a><span class="lineno">  642</span>&#160;                                            <span class="keyword">const</span> <a class="code" href="classllvm_1_1DataLayout.html">DataLayout</a> &amp;<a class="code" href="AArch64SLSHardening_8cpp.html#ad467c4ab9119043f9b7750ab986be61a">DL</a>) {</div>
<div class="line"><a name="l00643"></a><span class="lineno">  643</span>&#160;  <a class="code" href="classllvm_1_1IRBuilder.html">IRBuilder&lt;&gt;</a> IRB(II.Inst);</div>
<div class="line"><a name="l00644"></a><span class="lineno">  644</span>&#160;  <span class="keyword">const</span> <span class="keywordtype">bool</span> IsWrite = isa&lt;StoreInst&gt;(*II.Inst);</div>
<div class="line"><a name="l00645"></a><span class="lineno">  645</span>&#160;  <a class="code" href="classllvm_1_1Value.html">Value</a> *<a class="code" href="ELFObjHandler_8cpp.html#a9df82a8be2f17e80535a8937bf23e022">Addr</a> = IsWrite ? cast&lt;StoreInst&gt;(II.Inst)-&gt;getPointerOperand()</div>
<div class="line"><a name="l00646"></a><span class="lineno">  646</span>&#160;                        : cast&lt;LoadInst&gt;(II.Inst)-&gt;getPointerOperand();</div>
<div class="line"><a name="l00647"></a><span class="lineno">  647</span>&#160;  <a class="code" href="classllvm_1_1Type.html">Type</a> *OrigTy = <a class="code" href="namespacellvm.html#a48b30f2688526d0f45900a47cd6b6654">getLoadStoreType</a>(II.Inst);</div>
<div class="line"><a name="l00648"></a><span class="lineno">  648</span>&#160; </div>
<div class="line"><a name="l00649"></a><span class="lineno">  649</span>&#160;  <span class="comment">// swifterror memory addresses are mem2reg promoted by instruction selection.</span></div>
<div class="line"><a name="l00650"></a><span class="lineno">  650</span>&#160;  <span class="comment">// As such they cannot have regular uses like an instrumentation function and</span></div>
<div class="line"><a name="l00651"></a><span class="lineno">  651</span>&#160;  <span class="comment">// it makes no sense to track them as memory.</span></div>
<div class="line"><a name="l00652"></a><span class="lineno">  652</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="ELFObjHandler_8cpp.html#a9df82a8be2f17e80535a8937bf23e022">Addr</a>-&gt;isSwiftError())</div>
<div class="line"><a name="l00653"></a><span class="lineno">  653</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l00654"></a><span class="lineno">  654</span>&#160; </div>
<div class="line"><a name="l00655"></a><span class="lineno">  655</span>&#160;  <span class="keywordtype">int</span> Idx = getMemoryAccessFuncIndex(OrigTy, <a class="code" href="ELFObjHandler_8cpp.html#a9df82a8be2f17e80535a8937bf23e022">Addr</a>, <a class="code" href="AArch64SLSHardening_8cpp.html#ad467c4ab9119043f9b7750ab986be61a">DL</a>);</div>
<div class="line"><a name="l00656"></a><span class="lineno">  656</span>&#160;  <span class="keywordflow">if</span> (Idx &lt; 0)</div>
<div class="line"><a name="l00657"></a><span class="lineno">  657</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l00658"></a><span class="lineno">  658</span>&#160;  <span class="keywordflow">if</span> (IsWrite &amp;&amp; <a class="code" href="ThreadSanitizer_8cpp.html#a15cf887d2d1af2b11ee47e28142ac131">isVtableAccess</a>(II.Inst)) {</div>
<div class="line"><a name="l00659"></a><span class="lineno">  659</span>&#160;    <a class="code" href="Debug_8h.html#a08efc68d15935eb8889400a46c3749ba">LLVM_DEBUG</a>(<a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <span class="stringliteral">&quot;  VPTR : &quot;</span> &lt;&lt; *II.Inst &lt;&lt; <span class="stringliteral">&quot;\n&quot;</span>);</div>
<div class="line"><a name="l00660"></a><span class="lineno">  660</span>&#160;    <a class="code" href="classllvm_1_1Value.html">Value</a> *StoredValue = cast&lt;StoreInst&gt;(II.Inst)-&gt;getValueOperand();</div>
<div class="line"><a name="l00661"></a><span class="lineno">  661</span>&#160;    <span class="comment">// StoredValue may be a vector type if we are storing several vptrs at once.</span></div>
<div class="line"><a name="l00662"></a><span class="lineno">  662</span>&#160;    <span class="comment">// In this case, just take the first element of the vector since this is</span></div>
<div class="line"><a name="l00663"></a><span class="lineno">  663</span>&#160;    <span class="comment">// enough to find vptr races.</span></div>
<div class="line"><a name="l00664"></a><span class="lineno">  664</span>&#160;    <span class="keywordflow">if</span> (isa&lt;VectorType&gt;(StoredValue-&gt;<a class="code" href="classllvm_1_1Value.html#a6393a2d4fe7e10b28a0dcc35f881567b">getType</a>()))</div>
<div class="line"><a name="l00665"></a><span class="lineno">  665</span>&#160;      StoredValue = IRB.CreateExtractElement(</div>
<div class="line"><a name="l00666"></a><span class="lineno">  666</span>&#160;          StoredValue, <a class="code" href="classllvm_1_1ConstantInt.html#a969709dd49c28865a482d8b870f87c46">ConstantInt::get</a>(IRB.getInt32Ty(), 0));</div>
<div class="line"><a name="l00667"></a><span class="lineno">  667</span>&#160;    <span class="keywordflow">if</span> (StoredValue-&gt;<a class="code" href="classllvm_1_1Value.html#a6393a2d4fe7e10b28a0dcc35f881567b">getType</a>()-&gt;<a class="code" href="classllvm_1_1Type.html#ac6d28a9b11139182134a9618028a0d07">isIntegerTy</a>())</div>
<div class="line"><a name="l00668"></a><span class="lineno">  668</span>&#160;      StoredValue = IRB.CreateIntToPtr(StoredValue, IRB.getInt8PtrTy());</div>
<div class="line"><a name="l00669"></a><span class="lineno">  669</span>&#160;    <span class="comment">// Call TsanVptrUpdate.</span></div>
<div class="line"><a name="l00670"></a><span class="lineno">  670</span>&#160;    IRB.CreateCall(TsanVptrUpdate,</div>
<div class="line"><a name="l00671"></a><span class="lineno">  671</span>&#160;                   {IRB.CreatePointerCast(<a class="code" href="ELFObjHandler_8cpp.html#a9df82a8be2f17e80535a8937bf23e022">Addr</a>, IRB.getInt8PtrTy()),</div>
<div class="line"><a name="l00672"></a><span class="lineno">  672</span>&#160;                    IRB.CreatePointerCast(StoredValue, IRB.getInt8PtrTy())});</div>
<div class="line"><a name="l00673"></a><span class="lineno">  673</span>&#160;    NumInstrumentedVtableWrites++;</div>
<div class="line"><a name="l00674"></a><span class="lineno">  674</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l00675"></a><span class="lineno">  675</span>&#160;  }</div>
<div class="line"><a name="l00676"></a><span class="lineno">  676</span>&#160;  <span class="keywordflow">if</span> (!IsWrite &amp;&amp; <a class="code" href="ThreadSanitizer_8cpp.html#a15cf887d2d1af2b11ee47e28142ac131">isVtableAccess</a>(II.Inst)) {</div>
<div class="line"><a name="l00677"></a><span class="lineno">  677</span>&#160;    IRB.CreateCall(TsanVptrLoad,</div>
<div class="line"><a name="l00678"></a><span class="lineno">  678</span>&#160;                   IRB.CreatePointerCast(<a class="code" href="ELFObjHandler_8cpp.html#a9df82a8be2f17e80535a8937bf23e022">Addr</a>, IRB.getInt8PtrTy()));</div>
<div class="line"><a name="l00679"></a><span class="lineno">  679</span>&#160;    NumInstrumentedVtableReads++;</div>
<div class="line"><a name="l00680"></a><span class="lineno">  680</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l00681"></a><span class="lineno">  681</span>&#160;  }</div>
<div class="line"><a name="l00682"></a><span class="lineno">  682</span>&#160; </div>
<div class="line"><a name="l00683"></a><span class="lineno">  683</span>&#160;  <span class="keyword">const</span> <span class="keywordtype">unsigned</span> Alignment = IsWrite ? cast&lt;StoreInst&gt;(II.Inst)-&gt;getAlignment()</div>
<div class="line"><a name="l00684"></a><span class="lineno">  684</span>&#160;                                     : cast&lt;LoadInst&gt;(II.Inst)-&gt;getAlignment();</div>
<div class="line"><a name="l00685"></a><span class="lineno">  685</span>&#160;  <span class="keyword">const</span> <span class="keywordtype">bool</span> IsCompoundRW =</div>
<div class="line"><a name="l00686"></a><span class="lineno">  686</span>&#160;      <a class="code" href="ThreadSanitizer_8cpp.html#a3383f3057f7633e64153265d68ba32f4">ClCompoundReadBeforeWrite</a> &amp;&amp; (II.Flags &amp; InstructionInfo::kCompoundRW);</div>
<div class="line"><a name="l00687"></a><span class="lineno">  687</span>&#160;  <span class="keyword">const</span> <span class="keywordtype">bool</span> <a class="code" href="namespacellvm_1_1AMDGPU_1_1HSAMD_1_1Kernel_1_1Arg_1_1Key.html#a4eea8fbc268a347761cbbc80e3660544">IsVolatile</a> = <a class="code" href="ThreadSanitizer_8cpp.html#af0781d5911a70fc919235ef56d03697c">ClDistinguishVolatile</a> &amp;&amp;</div>
<div class="line"><a name="l00688"></a><span class="lineno">  688</span>&#160;                          (IsWrite ? cast&lt;StoreInst&gt;(II.Inst)-&gt;isVolatile()</div>
<div class="line"><a name="l00689"></a><span class="lineno">  689</span>&#160;                                   : cast&lt;LoadInst&gt;(II.Inst)-&gt;isVolatile());</div>
<div class="line"><a name="l00690"></a><span class="lineno">  690</span>&#160;  <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>((!<a class="code" href="namespacellvm_1_1AMDGPU_1_1HSAMD_1_1Kernel_1_1Arg_1_1Key.html#a4eea8fbc268a347761cbbc80e3660544">IsVolatile</a> || !IsCompoundRW) &amp;&amp; <span class="stringliteral">&quot;Compound volatile invalid!&quot;</span>);</div>
<div class="line"><a name="l00691"></a><span class="lineno">  691</span>&#160; </div>
<div class="line"><a name="l00692"></a><span class="lineno">  692</span>&#160;  <span class="keyword">const</span> <a class="code" href="classuint32__t.html">uint32_t</a> <a class="code" href="classllvm_1_1TypeSize.html">TypeSize</a> = <a class="code" href="AArch64SLSHardening_8cpp.html#ad467c4ab9119043f9b7750ab986be61a">DL</a>.getTypeStoreSizeInBits(OrigTy);</div>
<div class="line"><a name="l00693"></a><span class="lineno">  693</span>&#160;  <a class="code" href="classllvm_1_1FunctionCallee.html">FunctionCallee</a> OnAccessFunc = <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l00694"></a><span class="lineno">  694</span>&#160;  <span class="keywordflow">if</span> (Alignment == 0 || Alignment &gt;= 8 || (Alignment % (<a class="code" href="classllvm_1_1TypeSize.html">TypeSize</a> / 8)) == 0) {</div>
<div class="line"><a name="l00695"></a><span class="lineno">  695</span>&#160;    <span class="keywordflow">if</span> (IsCompoundRW)</div>
<div class="line"><a name="l00696"></a><span class="lineno">  696</span>&#160;      OnAccessFunc = TsanCompoundRW[Idx];</div>
<div class="line"><a name="l00697"></a><span class="lineno">  697</span>&#160;    <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code" href="namespacellvm_1_1AMDGPU_1_1HSAMD_1_1Kernel_1_1Arg_1_1Key.html#a4eea8fbc268a347761cbbc80e3660544">IsVolatile</a>)</div>
<div class="line"><a name="l00698"></a><span class="lineno">  698</span>&#160;      OnAccessFunc = IsWrite ? TsanVolatileWrite[Idx] : TsanVolatileRead[Idx];</div>
<div class="line"><a name="l00699"></a><span class="lineno">  699</span>&#160;    <span class="keywordflow">else</span></div>
<div class="line"><a name="l00700"></a><span class="lineno">  700</span>&#160;      OnAccessFunc = IsWrite ? TsanWrite[Idx] : TsanRead[Idx];</div>
<div class="line"><a name="l00701"></a><span class="lineno">  701</span>&#160;  } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00702"></a><span class="lineno">  702</span>&#160;    <span class="keywordflow">if</span> (IsCompoundRW)</div>
<div class="line"><a name="l00703"></a><span class="lineno">  703</span>&#160;      OnAccessFunc = TsanUnalignedCompoundRW[Idx];</div>
<div class="line"><a name="l00704"></a><span class="lineno">  704</span>&#160;    <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code" href="namespacellvm_1_1AMDGPU_1_1HSAMD_1_1Kernel_1_1Arg_1_1Key.html#a4eea8fbc268a347761cbbc80e3660544">IsVolatile</a>)</div>
<div class="line"><a name="l00705"></a><span class="lineno">  705</span>&#160;      OnAccessFunc = IsWrite ? TsanUnalignedVolatileWrite[Idx]</div>
<div class="line"><a name="l00706"></a><span class="lineno">  706</span>&#160;                             : TsanUnalignedVolatileRead[Idx];</div>
<div class="line"><a name="l00707"></a><span class="lineno">  707</span>&#160;    <span class="keywordflow">else</span></div>
<div class="line"><a name="l00708"></a><span class="lineno">  708</span>&#160;      OnAccessFunc = IsWrite ? TsanUnalignedWrite[Idx] : TsanUnalignedRead[Idx];</div>
<div class="line"><a name="l00709"></a><span class="lineno">  709</span>&#160;  }</div>
<div class="line"><a name="l00710"></a><span class="lineno">  710</span>&#160;  IRB.CreateCall(OnAccessFunc, IRB.CreatePointerCast(<a class="code" href="ELFObjHandler_8cpp.html#a9df82a8be2f17e80535a8937bf23e022">Addr</a>, IRB.getInt8PtrTy()));</div>
<div class="line"><a name="l00711"></a><span class="lineno">  711</span>&#160;  <span class="keywordflow">if</span> (IsCompoundRW || IsWrite)</div>
<div class="line"><a name="l00712"></a><span class="lineno">  712</span>&#160;    NumInstrumentedWrites++;</div>
<div class="line"><a name="l00713"></a><span class="lineno">  713</span>&#160;  <span class="keywordflow">if</span> (IsCompoundRW || !IsWrite)</div>
<div class="line"><a name="l00714"></a><span class="lineno">  714</span>&#160;    NumInstrumentedReads++;</div>
<div class="line"><a name="l00715"></a><span class="lineno">  715</span>&#160;  <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l00716"></a><span class="lineno">  716</span>&#160;}</div>
<div class="line"><a name="l00717"></a><span class="lineno">  717</span>&#160; </div>
<div class="line"><a name="l00718"></a><span class="lineno"><a class="line" href="ThreadSanitizer_8cpp.html#afdcf7dc835e87d1c94a3f3db62d526a3">  718</a></span>&#160;<span class="keyword">static</span> <a class="code" href="classllvm_1_1ConstantInt.html">ConstantInt</a> *<a class="code" href="ThreadSanitizer_8cpp.html#afdcf7dc835e87d1c94a3f3db62d526a3">createOrdering</a>(<a class="code" href="classllvm_1_1IRBuilder.html">IRBuilder&lt;&gt;</a> *IRB, <a class="code" href="namespacellvm.html#a9bccbe67aaab722783ca4e7c504aaaa7">AtomicOrdering</a> ord) {</div>
<div class="line"><a name="l00719"></a><span class="lineno">  719</span>&#160;  <a class="code" href="classuint32__t.html">uint32_t</a> v = 0;</div>
<div class="line"><a name="l00720"></a><span class="lineno">  720</span>&#160;  <span class="keywordflow">switch</span> (ord) {</div>
<div class="line"><a name="l00721"></a><span class="lineno">  721</span>&#160;    <span class="keywordflow">case</span> AtomicOrdering::NotAtomic:</div>
<div class="line"><a name="l00722"></a><span class="lineno">  722</span>&#160;      <a class="code" href="llvm_2Support_2ErrorHandling_8h.html#ace243f5c25697a1107cce46626b3dc94">llvm_unreachable</a>(<span class="stringliteral">&quot;unexpected atomic ordering!&quot;</span>);</div>
<div class="line"><a name="l00723"></a><span class="lineno">  723</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="README__P9_8txt.html#a0afe4617fad145d6ced5a18fd739cf06">AtomicOrdering::Unordered</a>:              <a class="code" href="Compiler_8h.html#a9579881de06b1560d242d15171ca1b86">LLVM_FALLTHROUGH</a>;</div>
<div class="line"><a name="l00724"></a><span class="lineno">  724</span>&#160;    <span class="keywordflow">case</span> AtomicOrdering::Monotonic:              v = 0; <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00725"></a><span class="lineno">  725</span>&#160;    <span class="comment">// Not specified yet:</span></div>
<div class="line"><a name="l00726"></a><span class="lineno">  726</span>&#160;    <span class="comment">// case AtomicOrdering::Consume:                v = 1; break;</span></div>
<div class="line"><a name="l00727"></a><span class="lineno">  727</span>&#160;    <span class="keywordflow">case</span> AtomicOrdering::Acquire:                v = 2; <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00728"></a><span class="lineno">  728</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="namespacellvm.html#a9bccbe67aaab722783ca4e7c504aaaa7ab8e7b465df7c5979dc731d06e84ce2cf">AtomicOrdering::Release</a>:                v = 3; <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00729"></a><span class="lineno">  729</span>&#160;    <span class="keywordflow">case</span> AtomicOrdering::AcquireRelease:         v = 4; <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00730"></a><span class="lineno">  730</span>&#160;    <span class="keywordflow">case</span> AtomicOrdering::SequentiallyConsistent: v = 5; <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00731"></a><span class="lineno">  731</span>&#160;  }</div>
<div class="line"><a name="l00732"></a><span class="lineno">  732</span>&#160;  <span class="keywordflow">return</span> IRB-&gt;<a class="code" href="classllvm_1_1IRBuilderBase.html#ac0e8c554bf1c1e117a74d51df89c137d">getInt32</a>(v);</div>
<div class="line"><a name="l00733"></a><span class="lineno">  733</span>&#160;}</div>
<div class="line"><a name="l00734"></a><span class="lineno">  734</span>&#160; </div>
<div class="line"><a name="l00735"></a><span class="lineno">  735</span>&#160;<span class="comment">// If a memset intrinsic gets inlined by the code gen, we will miss races on it.</span></div>
<div class="line"><a name="l00736"></a><span class="lineno">  736</span>&#160;<span class="comment">// So, we either need to ensure the intrinsic is not inlined, or instrument it.</span></div>
<div class="line"><a name="l00737"></a><span class="lineno">  737</span>&#160;<span class="comment">// We do not instrument memset/memmove/memcpy intrinsics (too complicated),</span></div>
<div class="line"><a name="l00738"></a><span class="lineno">  738</span>&#160;<span class="comment">// instead we simply replace them with regular function calls, which are then</span></div>
<div class="line"><a name="l00739"></a><span class="lineno">  739</span>&#160;<span class="comment">// intercepted by the run-time.</span></div>
<div class="line"><a name="l00740"></a><span class="lineno">  740</span>&#160;<span class="comment">// Since tsan is running after everyone else, the calls should not be</span></div>
<div class="line"><a name="l00741"></a><span class="lineno">  741</span>&#160;<span class="comment">// replaced back with intrinsics. If that becomes wrong at some point,</span></div>
<div class="line"><a name="l00742"></a><span class="lineno">  742</span>&#160;<span class="comment">// we will need to call e.g. __tsan_memset to avoid the intrinsics.</span></div>
<div class="line"><a name="l00743"></a><span class="lineno">  743</span>&#160;<span class="keywordtype">bool</span> ThreadSanitizer::instrumentMemIntrinsic(<a class="code" href="classllvm_1_1Instruction.html">Instruction</a> *<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>) {</div>
<div class="line"><a name="l00744"></a><span class="lineno">  744</span>&#160;  <a class="code" href="classllvm_1_1IRBuilder.html">IRBuilder&lt;&gt;</a> IRB(<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>);</div>
<div class="line"><a name="l00745"></a><span class="lineno">  745</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1MemSetInst.html">MemSetInst</a> *M = dyn_cast&lt;MemSetInst&gt;(<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>)) {</div>
<div class="line"><a name="l00746"></a><span class="lineno">  746</span>&#160;    IRB.CreateCall(</div>
<div class="line"><a name="l00747"></a><span class="lineno">  747</span>&#160;        MemsetFn,</div>
<div class="line"><a name="l00748"></a><span class="lineno">  748</span>&#160;        {IRB.CreatePointerCast(<a class="code" href="lib_2Target_2X86_2README_8txt.html#ac88fe1d3a61b056a4f64fbbb156a62ff">M</a>-&gt;getArgOperand(0), IRB.getInt8PtrTy()),</div>
<div class="line"><a name="l00749"></a><span class="lineno">  749</span>&#160;         IRB.CreateIntCast(<a class="code" href="lib_2Target_2X86_2README_8txt.html#ac88fe1d3a61b056a4f64fbbb156a62ff">M</a>-&gt;getArgOperand(1), IRB.getInt32Ty(), <span class="keyword">false</span>),</div>
<div class="line"><a name="l00750"></a><span class="lineno">  750</span>&#160;         IRB.CreateIntCast(<a class="code" href="lib_2Target_2X86_2README_8txt.html#ac88fe1d3a61b056a4f64fbbb156a62ff">M</a>-&gt;getArgOperand(2), IntptrTy, <span class="keyword">false</span>)});</div>
<div class="line"><a name="l00751"></a><span class="lineno">  751</span>&#160;    <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>-&gt;eraseFromParent();</div>
<div class="line"><a name="l00752"></a><span class="lineno">  752</span>&#160;  } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1MemTransferInst.html">MemTransferInst</a> *M = dyn_cast&lt;MemTransferInst&gt;(<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>)) {</div>
<div class="line"><a name="l00753"></a><span class="lineno">  753</span>&#160;    IRB.CreateCall(</div>
<div class="line"><a name="l00754"></a><span class="lineno">  754</span>&#160;        isa&lt;MemCpyInst&gt;(M) ? MemcpyFn : MemmoveFn,</div>
<div class="line"><a name="l00755"></a><span class="lineno">  755</span>&#160;        {IRB.CreatePointerCast(<a class="code" href="lib_2Target_2X86_2README_8txt.html#ac88fe1d3a61b056a4f64fbbb156a62ff">M</a>-&gt;getArgOperand(0), IRB.getInt8PtrTy()),</div>
<div class="line"><a name="l00756"></a><span class="lineno">  756</span>&#160;         IRB.CreatePointerCast(<a class="code" href="lib_2Target_2X86_2README_8txt.html#ac88fe1d3a61b056a4f64fbbb156a62ff">M</a>-&gt;getArgOperand(1), IRB.getInt8PtrTy()),</div>
<div class="line"><a name="l00757"></a><span class="lineno">  757</span>&#160;         IRB.CreateIntCast(<a class="code" href="lib_2Target_2X86_2README_8txt.html#ac88fe1d3a61b056a4f64fbbb156a62ff">M</a>-&gt;getArgOperand(2), IntptrTy, <span class="keyword">false</span>)});</div>
<div class="line"><a name="l00758"></a><span class="lineno">  758</span>&#160;    <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>-&gt;eraseFromParent();</div>
<div class="line"><a name="l00759"></a><span class="lineno">  759</span>&#160;  }</div>
<div class="line"><a name="l00760"></a><span class="lineno">  760</span>&#160;  <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l00761"></a><span class="lineno">  761</span>&#160;}</div>
<div class="line"><a name="l00762"></a><span class="lineno">  762</span>&#160; </div>
<div class="line"><a name="l00763"></a><span class="lineno">  763</span>&#160;<span class="comment">// Both llvm and ThreadSanitizer atomic operations are based on C++11/C1x</span></div>
<div class="line"><a name="l00764"></a><span class="lineno">  764</span>&#160;<span class="comment">// standards.  For background see C++11 standard.  A slightly older, publicly</span></div>
<div class="line"><a name="l00765"></a><span class="lineno">  765</span>&#160;<span class="comment">// available draft of the standard (not entirely up-to-date, but close enough</span></div>
<div class="line"><a name="l00766"></a><span class="lineno">  766</span>&#160;<span class="comment">// for casual browsing) is available here:</span></div>
<div class="line"><a name="l00767"></a><span class="lineno">  767</span>&#160;<span class="comment">// http://www.open-std.org/jtc1/sc22/wg21/docs/papers/2011/n3242.pdf</span></div>
<div class="line"><a name="l00768"></a><span class="lineno">  768</span>&#160;<span class="comment">// The following page contains more background information:</span></div>
<div class="line"><a name="l00769"></a><span class="lineno">  769</span>&#160;<span class="comment">// http://www.hpl.hp.com/personal/Hans_Boehm/c++mm/</span></div>
<div class="line"><a name="l00770"></a><span class="lineno">  770</span>&#160; </div>
<div class="line"><a name="l00771"></a><span class="lineno">  771</span>&#160;<span class="keywordtype">bool</span> ThreadSanitizer::instrumentAtomic(<a class="code" href="classllvm_1_1Instruction.html">Instruction</a> *<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>, <span class="keyword">const</span> <a class="code" href="classllvm_1_1DataLayout.html">DataLayout</a> &amp;<a class="code" href="AArch64SLSHardening_8cpp.html#ad467c4ab9119043f9b7750ab986be61a">DL</a>) {</div>
<div class="line"><a name="l00772"></a><span class="lineno">  772</span>&#160;  <a class="code" href="classllvm_1_1IRBuilder.html">IRBuilder&lt;&gt;</a> IRB(<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>);</div>
<div class="line"><a name="l00773"></a><span class="lineno">  773</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1LoadInst.html">LoadInst</a> *LI = dyn_cast&lt;LoadInst&gt;(<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>)) {</div>
<div class="line"><a name="l00774"></a><span class="lineno">  774</span>&#160;    <a class="code" href="classllvm_1_1Value.html">Value</a> *<a class="code" href="ELFObjHandler_8cpp.html#a9df82a8be2f17e80535a8937bf23e022">Addr</a> = LI-&gt;getPointerOperand();</div>
<div class="line"><a name="l00775"></a><span class="lineno">  775</span>&#160;    <a class="code" href="classllvm_1_1Type.html">Type</a> *OrigTy = LI-&gt;getType();</div>
<div class="line"><a name="l00776"></a><span class="lineno">  776</span>&#160;    <span class="keywordtype">int</span> Idx = getMemoryAccessFuncIndex(OrigTy, <a class="code" href="ELFObjHandler_8cpp.html#a9df82a8be2f17e80535a8937bf23e022">Addr</a>, <a class="code" href="AArch64SLSHardening_8cpp.html#ad467c4ab9119043f9b7750ab986be61a">DL</a>);</div>
<div class="line"><a name="l00777"></a><span class="lineno">  777</span>&#160;    <span class="keywordflow">if</span> (Idx &lt; 0)</div>
<div class="line"><a name="l00778"></a><span class="lineno">  778</span>&#160;      <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l00779"></a><span class="lineno">  779</span>&#160;    <span class="keyword">const</span> <span class="keywordtype">unsigned</span> ByteSize = 1U &lt;&lt; Idx;</div>
<div class="line"><a name="l00780"></a><span class="lineno">  780</span>&#160;    <span class="keyword">const</span> <span class="keywordtype">unsigned</span> BitSize = ByteSize * 8;</div>
<div class="line"><a name="l00781"></a><span class="lineno">  781</span>&#160;    <a class="code" href="classllvm_1_1Type.html">Type</a> *Ty = <a class="code" href="classllvm_1_1Type.html#acaf8e4c3e40e01e848c1fad5f05b81cd">Type::getIntNTy</a>(IRB.getContext(), BitSize);</div>
<div class="line"><a name="l00782"></a><span class="lineno">  782</span>&#160;    <a class="code" href="classllvm_1_1Type.html">Type</a> *PtrTy = Ty-&gt;<a class="code" href="classllvm_1_1Type.html#adc01a7457de85fc52a3bb860d7e1c6a4">getPointerTo</a>();</div>
<div class="line"><a name="l00783"></a><span class="lineno">  783</span>&#160;    <a class="code" href="classllvm_1_1Value.html">Value</a> *<a class="code" href="namespacellvm_1_1AMDGPU_1_1HSAMD_1_1Kernel_1_1Key.html#a1958a762261549463a280bac3274d6d5">Args</a>[] = {IRB.CreatePointerCast(<a class="code" href="ELFObjHandler_8cpp.html#a9df82a8be2f17e80535a8937bf23e022">Addr</a>, PtrTy),</div>
<div class="line"><a name="l00784"></a><span class="lineno">  784</span>&#160;                     <a class="code" href="ThreadSanitizer_8cpp.html#afdcf7dc835e87d1c94a3f3db62d526a3">createOrdering</a>(&amp;IRB, LI-&gt;getOrdering())};</div>
<div class="line"><a name="l00785"></a><span class="lineno">  785</span>&#160;    <a class="code" href="classllvm_1_1Value.html">Value</a> *<a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a> = IRB.CreateCall(TsanAtomicLoad[Idx], <a class="code" href="namespacellvm_1_1AMDGPU_1_1HSAMD_1_1Kernel_1_1Key.html#a1958a762261549463a280bac3274d6d5">Args</a>);</div>
<div class="line"><a name="l00786"></a><span class="lineno">  786</span>&#160;    <a class="code" href="classllvm_1_1Value.html">Value</a> *Cast = IRB.CreateBitOrPointerCast(<a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a>, OrigTy);</div>
<div class="line"><a name="l00787"></a><span class="lineno">  787</span>&#160;    <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>-&gt;replaceAllUsesWith(Cast);</div>
<div class="line"><a name="l00788"></a><span class="lineno">  788</span>&#160;  } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1StoreInst.html">StoreInst</a> *<a class="code" href="PassBuilderBindings_8cpp.html#a0f79dad1efc582555a443cc11a8fa401">SI</a> = dyn_cast&lt;StoreInst&gt;(<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>)) {</div>
<div class="line"><a name="l00789"></a><span class="lineno">  789</span>&#160;    <a class="code" href="classllvm_1_1Value.html">Value</a> *<a class="code" href="ELFObjHandler_8cpp.html#a9df82a8be2f17e80535a8937bf23e022">Addr</a> = <a class="code" href="PassBuilderBindings_8cpp.html#a0f79dad1efc582555a443cc11a8fa401">SI</a>-&gt;getPointerOperand();</div>
<div class="line"><a name="l00790"></a><span class="lineno">  790</span>&#160;    <span class="keywordtype">int</span> Idx =</div>
<div class="line"><a name="l00791"></a><span class="lineno">  791</span>&#160;        getMemoryAccessFuncIndex(<a class="code" href="PassBuilderBindings_8cpp.html#a0f79dad1efc582555a443cc11a8fa401">SI</a>-&gt;getValueOperand()-&gt;getType(), <a class="code" href="ELFObjHandler_8cpp.html#a9df82a8be2f17e80535a8937bf23e022">Addr</a>, <a class="code" href="AArch64SLSHardening_8cpp.html#ad467c4ab9119043f9b7750ab986be61a">DL</a>);</div>
<div class="line"><a name="l00792"></a><span class="lineno">  792</span>&#160;    <span class="keywordflow">if</span> (Idx &lt; 0)</div>
<div class="line"><a name="l00793"></a><span class="lineno">  793</span>&#160;      <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l00794"></a><span class="lineno">  794</span>&#160;    <span class="keyword">const</span> <span class="keywordtype">unsigned</span> ByteSize = 1U &lt;&lt; Idx;</div>
<div class="line"><a name="l00795"></a><span class="lineno">  795</span>&#160;    <span class="keyword">const</span> <span class="keywordtype">unsigned</span> BitSize = ByteSize * 8;</div>
<div class="line"><a name="l00796"></a><span class="lineno">  796</span>&#160;    <a class="code" href="classllvm_1_1Type.html">Type</a> *Ty = <a class="code" href="classllvm_1_1Type.html#acaf8e4c3e40e01e848c1fad5f05b81cd">Type::getIntNTy</a>(IRB.getContext(), BitSize);</div>
<div class="line"><a name="l00797"></a><span class="lineno">  797</span>&#160;    <a class="code" href="classllvm_1_1Type.html">Type</a> *PtrTy = Ty-&gt;<a class="code" href="classllvm_1_1Type.html#adc01a7457de85fc52a3bb860d7e1c6a4">getPointerTo</a>();</div>
<div class="line"><a name="l00798"></a><span class="lineno">  798</span>&#160;    <a class="code" href="classllvm_1_1Value.html">Value</a> *<a class="code" href="namespacellvm_1_1AMDGPU_1_1HSAMD_1_1Kernel_1_1Key.html#a1958a762261549463a280bac3274d6d5">Args</a>[] = {IRB.CreatePointerCast(<a class="code" href="ELFObjHandler_8cpp.html#a9df82a8be2f17e80535a8937bf23e022">Addr</a>, PtrTy),</div>
<div class="line"><a name="l00799"></a><span class="lineno">  799</span>&#160;                     IRB.CreateBitOrPointerCast(<a class="code" href="PassBuilderBindings_8cpp.html#a0f79dad1efc582555a443cc11a8fa401">SI</a>-&gt;getValueOperand(), Ty),</div>
<div class="line"><a name="l00800"></a><span class="lineno">  800</span>&#160;                     <a class="code" href="ThreadSanitizer_8cpp.html#afdcf7dc835e87d1c94a3f3db62d526a3">createOrdering</a>(&amp;IRB, <a class="code" href="PassBuilderBindings_8cpp.html#a0f79dad1efc582555a443cc11a8fa401">SI</a>-&gt;getOrdering())};</div>
<div class="line"><a name="l00801"></a><span class="lineno">  801</span>&#160;    <a class="code" href="classllvm_1_1CallInst.html">CallInst</a> *<a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a> = <a class="code" href="classllvm_1_1CallInst.html#a850d8262cd900958b3153c4aa080b2bb">CallInst::Create</a>(TsanAtomicStore[Idx], <a class="code" href="namespacellvm_1_1AMDGPU_1_1HSAMD_1_1Kernel_1_1Key.html#a1958a762261549463a280bac3274d6d5">Args</a>);</div>
<div class="line"><a name="l00802"></a><span class="lineno">  802</span>&#160;    <a class="code" href="namespacellvm.html#aa6aa39b86007ee97f50248d2fb1b7220">ReplaceInstWithInst</a>(<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>, <a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a>);</div>
<div class="line"><a name="l00803"></a><span class="lineno">  803</span>&#160;  } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1AtomicRMWInst.html">AtomicRMWInst</a> *RMWI = dyn_cast&lt;AtomicRMWInst&gt;(<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>)) {</div>
<div class="line"><a name="l00804"></a><span class="lineno">  804</span>&#160;    <a class="code" href="classllvm_1_1Value.html">Value</a> *<a class="code" href="ELFObjHandler_8cpp.html#a9df82a8be2f17e80535a8937bf23e022">Addr</a> = RMWI-&gt;getPointerOperand();</div>
<div class="line"><a name="l00805"></a><span class="lineno">  805</span>&#160;    <span class="keywordtype">int</span> Idx =</div>
<div class="line"><a name="l00806"></a><span class="lineno">  806</span>&#160;        getMemoryAccessFuncIndex(RMWI-&gt;getValOperand()-&gt;getType(), <a class="code" href="ELFObjHandler_8cpp.html#a9df82a8be2f17e80535a8937bf23e022">Addr</a>, <a class="code" href="AArch64SLSHardening_8cpp.html#ad467c4ab9119043f9b7750ab986be61a">DL</a>);</div>
<div class="line"><a name="l00807"></a><span class="lineno">  807</span>&#160;    <span class="keywordflow">if</span> (Idx &lt; 0)</div>
<div class="line"><a name="l00808"></a><span class="lineno">  808</span>&#160;      <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l00809"></a><span class="lineno">  809</span>&#160;    <a class="code" href="classllvm_1_1FunctionCallee.html">FunctionCallee</a> <a class="code" href="MD5_8cpp.html#a96d73bbd7af15cb1fc38c3f4a3bd82e9">F</a> = TsanAtomicRMW[RMWI-&gt;getOperation()][Idx];</div>
<div class="line"><a name="l00810"></a><span class="lineno">  810</span>&#160;    <span class="keywordflow">if</span> (!<a class="code" href="MD5_8cpp.html#a96d73bbd7af15cb1fc38c3f4a3bd82e9">F</a>)</div>
<div class="line"><a name="l00811"></a><span class="lineno">  811</span>&#160;      <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l00812"></a><span class="lineno">  812</span>&#160;    <span class="keyword">const</span> <span class="keywordtype">unsigned</span> ByteSize = 1U &lt;&lt; Idx;</div>
<div class="line"><a name="l00813"></a><span class="lineno">  813</span>&#160;    <span class="keyword">const</span> <span class="keywordtype">unsigned</span> BitSize = ByteSize * 8;</div>
<div class="line"><a name="l00814"></a><span class="lineno">  814</span>&#160;    <a class="code" href="classllvm_1_1Type.html">Type</a> *Ty = <a class="code" href="classllvm_1_1Type.html#acaf8e4c3e40e01e848c1fad5f05b81cd">Type::getIntNTy</a>(IRB.getContext(), BitSize);</div>
<div class="line"><a name="l00815"></a><span class="lineno">  815</span>&#160;    <a class="code" href="classllvm_1_1Type.html">Type</a> *PtrTy = Ty-&gt;<a class="code" href="classllvm_1_1Type.html#adc01a7457de85fc52a3bb860d7e1c6a4">getPointerTo</a>();</div>
<div class="line"><a name="l00816"></a><span class="lineno">  816</span>&#160;    <a class="code" href="classllvm_1_1Value.html">Value</a> *<a class="code" href="namespacellvm_1_1AMDGPU_1_1HSAMD_1_1Kernel_1_1Key.html#a1958a762261549463a280bac3274d6d5">Args</a>[] = {IRB.CreatePointerCast(<a class="code" href="ELFObjHandler_8cpp.html#a9df82a8be2f17e80535a8937bf23e022">Addr</a>, PtrTy),</div>
<div class="line"><a name="l00817"></a><span class="lineno">  817</span>&#160;                     IRB.CreateIntCast(RMWI-&gt;getValOperand(), Ty, <span class="keyword">false</span>),</div>
<div class="line"><a name="l00818"></a><span class="lineno">  818</span>&#160;                     <a class="code" href="ThreadSanitizer_8cpp.html#afdcf7dc835e87d1c94a3f3db62d526a3">createOrdering</a>(&amp;IRB, RMWI-&gt;getOrdering())};</div>
<div class="line"><a name="l00819"></a><span class="lineno">  819</span>&#160;    <a class="code" href="classllvm_1_1CallInst.html">CallInst</a> *<a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a> = <a class="code" href="classllvm_1_1CallInst.html#a850d8262cd900958b3153c4aa080b2bb">CallInst::Create</a>(<a class="code" href="MD5_8cpp.html#a96d73bbd7af15cb1fc38c3f4a3bd82e9">F</a>, <a class="code" href="namespacellvm_1_1AMDGPU_1_1HSAMD_1_1Kernel_1_1Key.html#a1958a762261549463a280bac3274d6d5">Args</a>);</div>
<div class="line"><a name="l00820"></a><span class="lineno">  820</span>&#160;    <a class="code" href="namespacellvm.html#aa6aa39b86007ee97f50248d2fb1b7220">ReplaceInstWithInst</a>(<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>, <a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a>);</div>
<div class="line"><a name="l00821"></a><span class="lineno">  821</span>&#160;  } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1AtomicCmpXchgInst.html">AtomicCmpXchgInst</a> *CASI = dyn_cast&lt;AtomicCmpXchgInst&gt;(<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>)) {</div>
<div class="line"><a name="l00822"></a><span class="lineno">  822</span>&#160;    <a class="code" href="classllvm_1_1Value.html">Value</a> *<a class="code" href="ELFObjHandler_8cpp.html#a9df82a8be2f17e80535a8937bf23e022">Addr</a> = CASI-&gt;getPointerOperand();</div>
<div class="line"><a name="l00823"></a><span class="lineno">  823</span>&#160;    <a class="code" href="classllvm_1_1Type.html">Type</a> *OrigOldValTy = CASI-&gt;getNewValOperand()-&gt;getType();</div>
<div class="line"><a name="l00824"></a><span class="lineno">  824</span>&#160;    <span class="keywordtype">int</span> Idx = getMemoryAccessFuncIndex(OrigOldValTy, <a class="code" href="ELFObjHandler_8cpp.html#a9df82a8be2f17e80535a8937bf23e022">Addr</a>, <a class="code" href="AArch64SLSHardening_8cpp.html#ad467c4ab9119043f9b7750ab986be61a">DL</a>);</div>
<div class="line"><a name="l00825"></a><span class="lineno">  825</span>&#160;    <span class="keywordflow">if</span> (Idx &lt; 0)</div>
<div class="line"><a name="l00826"></a><span class="lineno">  826</span>&#160;      <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l00827"></a><span class="lineno">  827</span>&#160;    <span class="keyword">const</span> <span class="keywordtype">unsigned</span> ByteSize = 1U &lt;&lt; Idx;</div>
<div class="line"><a name="l00828"></a><span class="lineno">  828</span>&#160;    <span class="keyword">const</span> <span class="keywordtype">unsigned</span> BitSize = ByteSize * 8;</div>
<div class="line"><a name="l00829"></a><span class="lineno">  829</span>&#160;    <a class="code" href="classllvm_1_1Type.html">Type</a> *Ty = <a class="code" href="classllvm_1_1Type.html#acaf8e4c3e40e01e848c1fad5f05b81cd">Type::getIntNTy</a>(IRB.getContext(), BitSize);</div>
<div class="line"><a name="l00830"></a><span class="lineno">  830</span>&#160;    <a class="code" href="classllvm_1_1Type.html">Type</a> *PtrTy = Ty-&gt;<a class="code" href="classllvm_1_1Type.html#adc01a7457de85fc52a3bb860d7e1c6a4">getPointerTo</a>();</div>
<div class="line"><a name="l00831"></a><span class="lineno">  831</span>&#160;    <a class="code" href="classllvm_1_1Value.html">Value</a> *CmpOperand =</div>
<div class="line"><a name="l00832"></a><span class="lineno">  832</span>&#160;      IRB.CreateBitOrPointerCast(CASI-&gt;getCompareOperand(), Ty);</div>
<div class="line"><a name="l00833"></a><span class="lineno">  833</span>&#160;    <a class="code" href="classllvm_1_1Value.html">Value</a> *NewOperand =</div>
<div class="line"><a name="l00834"></a><span class="lineno">  834</span>&#160;      IRB.CreateBitOrPointerCast(CASI-&gt;getNewValOperand(), Ty);</div>
<div class="line"><a name="l00835"></a><span class="lineno">  835</span>&#160;    <a class="code" href="classllvm_1_1Value.html">Value</a> *<a class="code" href="namespacellvm_1_1AMDGPU_1_1HSAMD_1_1Kernel_1_1Key.html#a1958a762261549463a280bac3274d6d5">Args</a>[] = {IRB.CreatePointerCast(<a class="code" href="ELFObjHandler_8cpp.html#a9df82a8be2f17e80535a8937bf23e022">Addr</a>, PtrTy),</div>
<div class="line"><a name="l00836"></a><span class="lineno">  836</span>&#160;                     CmpOperand,</div>
<div class="line"><a name="l00837"></a><span class="lineno">  837</span>&#160;                     NewOperand,</div>
<div class="line"><a name="l00838"></a><span class="lineno">  838</span>&#160;                     <a class="code" href="ThreadSanitizer_8cpp.html#afdcf7dc835e87d1c94a3f3db62d526a3">createOrdering</a>(&amp;IRB, CASI-&gt;getSuccessOrdering()),</div>
<div class="line"><a name="l00839"></a><span class="lineno">  839</span>&#160;                     <a class="code" href="ThreadSanitizer_8cpp.html#afdcf7dc835e87d1c94a3f3db62d526a3">createOrdering</a>(&amp;IRB, CASI-&gt;getFailureOrdering())};</div>
<div class="line"><a name="l00840"></a><span class="lineno">  840</span>&#160;    <a class="code" href="classllvm_1_1CallInst.html">CallInst</a> *<a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a> = IRB.CreateCall(TsanAtomicCAS[Idx], <a class="code" href="namespacellvm_1_1AMDGPU_1_1HSAMD_1_1Kernel_1_1Key.html#a1958a762261549463a280bac3274d6d5">Args</a>);</div>
<div class="line"><a name="l00841"></a><span class="lineno">  841</span>&#160;    <a class="code" href="classllvm_1_1Value.html">Value</a> *<a class="code" href="AArch64Disassembler_8cpp.html#abdb086b34295fb7aa09493c62d798465">Success</a> = IRB.CreateICmpEQ(<a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a>, CmpOperand);</div>
<div class="line"><a name="l00842"></a><span class="lineno">  842</span>&#160;    <a class="code" href="classllvm_1_1Value.html">Value</a> *OldVal = <a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a>;</div>
<div class="line"><a name="l00843"></a><span class="lineno">  843</span>&#160;    <span class="keywordflow">if</span> (Ty != OrigOldValTy) {</div>
<div class="line"><a name="l00844"></a><span class="lineno">  844</span>&#160;      <span class="comment">// The value is a pointer, so we need to cast the return value.</span></div>
<div class="line"><a name="l00845"></a><span class="lineno">  845</span>&#160;      OldVal = IRB.CreateIntToPtr(<a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a>, OrigOldValTy);</div>
<div class="line"><a name="l00846"></a><span class="lineno">  846</span>&#160;    }</div>
<div class="line"><a name="l00847"></a><span class="lineno">  847</span>&#160; </div>
<div class="line"><a name="l00848"></a><span class="lineno">  848</span>&#160;    <a class="code" href="classllvm_1_1Value.html">Value</a> *Res =</div>
<div class="line"><a name="l00849"></a><span class="lineno">  849</span>&#160;      IRB.CreateInsertValue(<a class="code" href="classllvm_1_1UndefValue.html#a4ae5ff22b700a42bcc5d889233721335">UndefValue::get</a>(CASI-&gt;getType()), OldVal, 0);</div>
<div class="line"><a name="l00850"></a><span class="lineno">  850</span>&#160;    Res = IRB.CreateInsertValue(Res, <a class="code" href="AArch64Disassembler_8cpp.html#abdb086b34295fb7aa09493c62d798465">Success</a>, 1);</div>
<div class="line"><a name="l00851"></a><span class="lineno">  851</span>&#160; </div>
<div class="line"><a name="l00852"></a><span class="lineno">  852</span>&#160;    <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>-&gt;replaceAllUsesWith(Res);</div>
<div class="line"><a name="l00853"></a><span class="lineno">  853</span>&#160;    <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>-&gt;eraseFromParent();</div>
<div class="line"><a name="l00854"></a><span class="lineno">  854</span>&#160;  } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1FenceInst.html">FenceInst</a> *FI = dyn_cast&lt;FenceInst&gt;(<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>)) {</div>
<div class="line"><a name="l00855"></a><span class="lineno">  855</span>&#160;    <a class="code" href="classllvm_1_1Value.html">Value</a> *<a class="code" href="namespacellvm_1_1AMDGPU_1_1HSAMD_1_1Kernel_1_1Key.html#a1958a762261549463a280bac3274d6d5">Args</a>[] = {<a class="code" href="ThreadSanitizer_8cpp.html#afdcf7dc835e87d1c94a3f3db62d526a3">createOrdering</a>(&amp;IRB, FI-&gt;getOrdering())};</div>
<div class="line"><a name="l00856"></a><span class="lineno">  856</span>&#160;    <a class="code" href="classllvm_1_1FunctionCallee.html">FunctionCallee</a> <a class="code" href="MD5_8cpp.html#a96d73bbd7af15cb1fc38c3f4a3bd82e9">F</a> = FI-&gt;getSyncScopeID() == <a class="code" href="namespacellvm_1_1SyncScope.html#af9e9f9aa1e7422ed19250fbf66982b34a6ee3fb8ea1d8946ee1f96ab1947b294a">SyncScope::SingleThread</a></div>
<div class="line"><a name="l00857"></a><span class="lineno">  857</span>&#160;                           ? TsanAtomicSignalFence</div>
<div class="line"><a name="l00858"></a><span class="lineno">  858</span>&#160;                           : TsanAtomicThreadFence;</div>
<div class="line"><a name="l00859"></a><span class="lineno">  859</span>&#160;    <a class="code" href="classllvm_1_1CallInst.html">CallInst</a> *<a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a> = <a class="code" href="classllvm_1_1CallInst.html#a850d8262cd900958b3153c4aa080b2bb">CallInst::Create</a>(<a class="code" href="MD5_8cpp.html#a96d73bbd7af15cb1fc38c3f4a3bd82e9">F</a>, <a class="code" href="namespacellvm_1_1AMDGPU_1_1HSAMD_1_1Kernel_1_1Key.html#a1958a762261549463a280bac3274d6d5">Args</a>);</div>
<div class="line"><a name="l00860"></a><span class="lineno">  860</span>&#160;    <a class="code" href="namespacellvm.html#aa6aa39b86007ee97f50248d2fb1b7220">ReplaceInstWithInst</a>(<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>, <a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a>);</div>
<div class="line"><a name="l00861"></a><span class="lineno">  861</span>&#160;  }</div>
<div class="line"><a name="l00862"></a><span class="lineno">  862</span>&#160;  <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l00863"></a><span class="lineno">  863</span>&#160;}</div>
<div class="line"><a name="l00864"></a><span class="lineno">  864</span>&#160; </div>
<div class="line"><a name="l00865"></a><span class="lineno">  865</span>&#160;<span class="keywordtype">int</span> ThreadSanitizer::getMemoryAccessFuncIndex(<a class="code" href="classllvm_1_1Type.html">Type</a> *OrigTy, <a class="code" href="classllvm_1_1Value.html">Value</a> *<a class="code" href="ELFObjHandler_8cpp.html#a9df82a8be2f17e80535a8937bf23e022">Addr</a>,</div>
<div class="line"><a name="l00866"></a><span class="lineno">  866</span>&#160;                                              <span class="keyword">const</span> <a class="code" href="classllvm_1_1DataLayout.html">DataLayout</a> &amp;<a class="code" href="AArch64SLSHardening_8cpp.html#ad467c4ab9119043f9b7750ab986be61a">DL</a>) {</div>
<div class="line"><a name="l00867"></a><span class="lineno">  867</span>&#160;  <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(OrigTy-&gt;<a class="code" href="classllvm_1_1Type.html#a8ad67a33bae235fe3cca1c3e5a91ed2d">isSized</a>());</div>
<div class="line"><a name="l00868"></a><span class="lineno">  868</span>&#160;  <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(</div>
<div class="line"><a name="l00869"></a><span class="lineno">  869</span>&#160;      cast&lt;PointerType&gt;(<a class="code" href="ELFObjHandler_8cpp.html#a9df82a8be2f17e80535a8937bf23e022">Addr</a>-&gt;getType())-&gt;isOpaqueOrPointeeTypeMatches(OrigTy));</div>
<div class="line"><a name="l00870"></a><span class="lineno">  870</span>&#160;  <a class="code" href="classuint32__t.html">uint32_t</a> <a class="code" href="classllvm_1_1TypeSize.html">TypeSize</a> = <a class="code" href="AArch64SLSHardening_8cpp.html#ad467c4ab9119043f9b7750ab986be61a">DL</a>.getTypeStoreSizeInBits(OrigTy);</div>
<div class="line"><a name="l00871"></a><span class="lineno">  871</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1TypeSize.html">TypeSize</a> != 8  &amp;&amp; <a class="code" href="classllvm_1_1TypeSize.html">TypeSize</a> != 16 &amp;&amp;</div>
<div class="line"><a name="l00872"></a><span class="lineno">  872</span>&#160;      <a class="code" href="classllvm_1_1TypeSize.html">TypeSize</a> != 32 &amp;&amp; <a class="code" href="classllvm_1_1TypeSize.html">TypeSize</a> != 64 &amp;&amp; <a class="code" href="classllvm_1_1TypeSize.html">TypeSize</a> != 128) {</div>
<div class="line"><a name="l00873"></a><span class="lineno">  873</span>&#160;    NumAccessesWithBadSize++;</div>
<div class="line"><a name="l00874"></a><span class="lineno">  874</span>&#160;    <span class="comment">// Ignore all unusual sizes.</span></div>
<div class="line"><a name="l00875"></a><span class="lineno">  875</span>&#160;    <span class="keywordflow">return</span> -1;</div>
<div class="line"><a name="l00876"></a><span class="lineno">  876</span>&#160;  }</div>
<div class="line"><a name="l00877"></a><span class="lineno">  877</span>&#160;  <span class="keywordtype">size_t</span> Idx = <a class="code" href="namespacellvm.html#a7771b636e3d12b42818bf92a7195fb30">countTrailingZeros</a>(<a class="code" href="classllvm_1_1TypeSize.html">TypeSize</a> / 8);</div>
<div class="line"><a name="l00878"></a><span class="lineno">  878</span>&#160;  <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(Idx &lt; <a class="code" href="AddressSanitizer_8cpp.html#aa62a4d0672bab180dd339cda25b23b2e">kNumberOfAccessSizes</a>);</div>
<div class="line"><a name="l00879"></a><span class="lineno">  879</span>&#160;  <span class="keywordflow">return</span> Idx;</div>
<div class="line"><a name="l00880"></a><span class="lineno">  880</span>&#160;}</div>
</div><!-- fragment --></div><!-- contents -->
<div class="ttc" id="alib_2Target_2README_8txt_html_acb559820d9ca11295b4500f179ef6392"><div class="ttname"><a href="lib_2Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a></div><div class="ttdeci">i</div><div class="ttdef"><b>Definition:</b> <a href="lib_2Target_2README_8txt_source.html#l00029">README.txt:29</a></div></div>
<div class="ttc" id="aclassllvm_1_1PreservedAnalyses_html"><div class="ttname"><a href="classllvm_1_1PreservedAnalyses.html">llvm::PreservedAnalyses</a></div><div class="ttdoc">A set of analyses that are preserved following a run of a transformation pass.</div><div class="ttdef"><b>Definition:</b> <a href="PassManager_8h_source.html#l00155">PassManager.h:155</a></div></div>
<div class="ttc" id="aInstrumentation_8h_html"><div class="ttname"><a href="Instrumentation_8h.html">Instrumentation.h</a></div></div>
<div class="ttc" id="anamespacellvm_html_a8eae49b4615c8042bb5781c4f7751518"><div class="ttname"><a href="namespacellvm.html#a8eae49b4615c8042bb5781c4f7751518">llvm::createThreadSanitizerLegacyPassPass</a></div><div class="ttdeci">FunctionPass * createThreadSanitizerLegacyPassPass()</div><div class="ttdef"><b>Definition:</b> <a href="ThreadSanitizer_8cpp_source.html#l00242">ThreadSanitizer.cpp:242</a></div></div>
<div class="ttc" id="aclassllvm_1_1Type_html_a8ad67a33bae235fe3cca1c3e5a91ed2d"><div class="ttname"><a href="classllvm_1_1Type.html#a8ad67a33bae235fe3cca1c3e5a91ed2d">llvm::Type::isSized</a></div><div class="ttdeci">bool isSized(SmallPtrSetImpl&lt; Type * &gt; *Visited=nullptr) const</div><div class="ttdoc">Return true if it makes sense to take the size of this type.</div><div class="ttdef"><b>Definition:</b> <a href="Type_8h_source.html#l00274">Type.h:274</a></div></div>
<div class="ttc" id="aMathExtras_8h_html"><div class="ttname"><a href="MathExtras_8h.html">MathExtras.h</a></div></div>
<div class="ttc" id="anamespacellvm_html"><div class="ttname"><a href="namespacellvm.html">llvm</a></div><div class="ttdoc">---------------------— PointerInfo ------------------------------------—</div><div class="ttdef"><b>Definition:</b> <a href="AllocatorList_8h_source.html#l00023">AllocatorList.h:23</a></div></div>
<div class="ttc" id="alib_2Target_2X86_2README_8txt_html_ac88fe1d3a61b056a4f64fbbb156a62ff"><div class="ttname"><a href="lib_2Target_2X86_2README_8txt.html#ac88fe1d3a61b056a4f64fbbb156a62ff">M</a></div><div class="ttdeci">We currently emits eax Perhaps this is what we really should generate is Is imull three or four cycles eax eax The current instruction priority is based on pattern complexity The former is more complex because it folds a load so the latter will not be emitted Perhaps we should use AddedComplexity to give LEA32r a higher priority We should always try to match LEA first since the LEA matching code does some estimate to determine whether the match is profitable if we care more about code then imull is better It s two bytes shorter than movl leal On a Pentium M</div><div class="ttdef"><b>Definition:</b> <a href="lib_2Target_2X86_2README_8txt_source.html#l00252">README.txt:252</a></div></div>
<div class="ttc" id="anamespacellvm_1_1AArch64CC_html_abfa1f7dce576430da99eed57807c7f28ab89adee997fb2a645a2d26e1f1bdaadf"><div class="ttname"><a href="namespacellvm_1_1AArch64CC.html#abfa1f7dce576430da99eed57807c7f28ab89adee997fb2a645a2d26e1f1bdaadf">llvm::AArch64CC::AL</a></div><div class="ttdeci">@ AL</div><div class="ttdef"><b>Definition:</b> <a href="AArch64BaseInfo_8h_source.html#l00269">AArch64BaseInfo.h:269</a></div></div>
<div class="ttc" id="aOptional_8h_html"><div class="ttname"><a href="Optional_8h.html">Optional.h</a></div></div>
<div class="ttc" id="aclassllvm_1_1DataLayout_html"><div class="ttname"><a href="classllvm_1_1DataLayout.html">llvm::DataLayout</a></div><div class="ttdoc">A parsed version of the target data layout string in and methods for querying it.</div><div class="ttdef"><b>Definition:</b> <a href="DataLayout_8h_source.html#l00112">DataLayout.h:112</a></div></div>
<div class="ttc" id="anamespacellvm_1_1Intrinsic_html_a842176a2c8c60a94bc788454b0828ea2"><div class="ttname"><a href="namespacellvm_1_1Intrinsic.html#a842176a2c8c60a94bc788454b0828ea2">llvm::Intrinsic::getDeclaration</a></div><div class="ttdeci">Function * getDeclaration(Module *M, ID id, ArrayRef&lt; Type * &gt; Tys=None)</div><div class="ttdoc">Create or insert an LLVM Function declaration for an intrinsic, and return it.</div><div class="ttdef"><b>Definition:</b> <a href="Function_8cpp_source.html#l01336">Function.cpp:1336</a></div></div>
<div class="ttc" id="aMetadata_8h_html"><div class="ttname"><a href="Metadata_8h.html">Metadata.h</a></div><div class="ttdoc">This file contains the declarations for metadata subclasses.</div></div>
<div class="ttc" id="aIntrinsicInst_8h_html"><div class="ttname"><a href="IntrinsicInst_8h.html">IntrinsicInst.h</a></div></div>
<div class="ttc" id="aclassllvm_1_1AnalysisManager_html_ab9d3d5412c20747fd0110a046604f09a"><div class="ttname"><a href="classllvm_1_1AnalysisManager.html#ab9d3d5412c20747fd0110a046604f09a">llvm::AnalysisManager::getResult</a></div><div class="ttdeci">PassT::Result &amp; getResult(IRUnitT &amp;IR, ExtraArgTs... ExtraArgs)</div><div class="ttdoc">Get the result of an analysis pass for a given IR unit.</div><div class="ttdef"><b>Definition:</b> <a href="PassManager_8h_source.html#l00769">PassManager.h:769</a></div></div>
<div class="ttc" id="aclassllvm_1_1EscapeEnumerator_html"><div class="ttname"><a href="classllvm_1_1EscapeEnumerator.html">llvm::EscapeEnumerator</a></div><div class="ttdoc">EscapeEnumerator - This is a little algorithm to find all escape points from a function so that &quot;fina...</div><div class="ttdef"><b>Definition:</b> <a href="EscapeEnumerator_8h_source.html#l00029">EscapeEnumerator.h:29</a></div></div>
<div class="ttc" id="aThreadSanitizer_8h_html"><div class="ttname"><a href="ThreadSanitizer_8h.html">ThreadSanitizer.h</a></div></div>
<div class="ttc" id="aclassllvm_1_1MemTransferInst_html"><div class="ttname"><a href="classllvm_1_1MemTransferInst.html">llvm::MemTransferInst</a></div><div class="ttdoc">This class wraps the llvm.memcpy/memmove intrinsics.</div><div class="ttdef"><b>Definition:</b> <a href="IntrinsicInst_8h_source.html#l00895">IntrinsicInst.h:895</a></div></div>
<div class="ttc" id="aclassllvm_1_1Function_html"><div class="ttname"><a href="classllvm_1_1Function.html">llvm::Function</a></div><div class="ttdef"><b>Definition:</b> <a href="Function_8h_source.html#l00061">Function.h:62</a></div></div>
<div class="ttc" id="aAddressSanitizer_8cpp_html_aa62a4d0672bab180dd339cda25b23b2e"><div class="ttname"><a href="AddressSanitizer_8cpp.html#aa62a4d0672bab180dd339cda25b23b2e">kNumberOfAccessSizes</a></div><div class="ttdeci">static const size_t kNumberOfAccessSizes</div><div class="ttdef"><b>Definition:</b> <a href="AddressSanitizer_8cpp_source.html#l00177">AddressSanitizer.cpp:177</a></div></div>
<div class="ttc" id="aclassllvm_1_1AtomicRMWInst_html_a461cfbbb5c7a57ab73210498923cf615a71aab8ee954b6d71a4eed315e8f6556e"><div class="ttname"><a href="classllvm_1_1AtomicRMWInst.html#a461cfbbb5c7a57ab73210498923cf615a71aab8ee954b6d71a4eed315e8f6556e">llvm::AtomicRMWInst::Xor</a></div><div class="ttdeci">@ Xor</div><div class="ttdoc">*p = old ^ v</div><div class="ttdef"><b>Definition:</b> <a href="Instructions_8h_source.html#l00752">Instructions.h:752</a></div></div>
<div class="ttc" id="aclassllvm_1_1SmallVector_html"><div class="ttname"><a href="classllvm_1_1SmallVector.html">llvm::SmallVector</a></div><div class="ttdoc">This is a 'vector' (really, a variable-sized array), optimized for the case when the array is small.</div><div class="ttdef"><b>Definition:</b> <a href="SmallVector_8h_source.html#l01168">SmallVector.h:1169</a></div></div>
<div class="ttc" id="aStatistic_8h_html"><div class="ttname"><a href="Statistic_8h.html">Statistic.h</a></div></div>
<div class="ttc" id="aCaptureTracking_8h_html"><div class="ttname"><a href="CaptureTracking_8h.html">CaptureTracking.h</a></div></div>
<div class="ttc" id="aclassllvm_1_1Type_html_a5ab2d0b0f0b8ceec3b907184e7567197"><div class="ttname"><a href="classllvm_1_1Type.html#a5ab2d0b0f0b8ceec3b907184e7567197">llvm::Type::getPointerAddressSpace</a></div><div class="ttdeci">unsigned getPointerAddressSpace() const</div><div class="ttdoc">Get the address space of this pointer or pointer vector type.</div><div class="ttdef"><b>Definition:</b> <a href="DerivedTypes_8h_source.html#l00733">DerivedTypes.h:733</a></div></div>
<div class="ttc" id="aclassllvm_1_1IRBuilder_html"><div class="ttname"><a href="classllvm_1_1IRBuilder.html">llvm::IRBuilder&lt;&gt;</a></div></div>
<div class="ttc" id="aclassllvm_1_1AttributeList_html_a5dbe16115cebbb5e8f7f969c0e9bf0b7"><div class="ttname"><a href="classllvm_1_1AttributeList.html#a5dbe16115cebbb5e8f7f969c0e9bf0b7">llvm::AttributeList::addAttribute</a></div><div class="ttdeci">LLVM_NODISCARD AttributeList addAttribute(LLVMContext &amp;C, unsigned Index, Attribute::AttrKind Kind) const</div><div class="ttdoc">Add an attribute to the attribute set at the given index.</div><div class="ttdef"><b>Definition:</b> <a href="Attributes_8cpp_source.html#l01212">Attributes.cpp:1212</a></div></div>
<div class="ttc" id="aclassllvm_1_1GlobalVariable_html"><div class="ttname"><a href="classllvm_1_1GlobalVariable.html">llvm::GlobalVariable</a></div><div class="ttdef"><b>Definition:</b> <a href="GlobalVariable_8h_source.html#l00040">GlobalVariable.h:40</a></div></div>
<div class="ttc" id="aValueTracking_8h_html"><div class="ttname"><a href="ValueTracking_8h.html">ValueTracking.h</a></div></div>
<div class="ttc" id="aTransforms_2Utils_2Local_8h_html"><div class="ttname"><a href="Transforms_2Utils_2Local_8h.html">Local.h</a></div></div>
<div class="ttc" id="aclassllvm_1_1Triple_html"><div class="ttname"><a href="classllvm_1_1Triple.html">llvm::Triple</a></div><div class="ttdoc">Triple - Helper class for working with autoconf configuration names.</div><div class="ttdef"><b>Definition:</b> <a href="Triple_8h_source.html#l00045">Triple.h:45</a></div></div>
<div class="ttc" id="aPassBuilderBindings_8cpp_html_a83c7e5ca51099e4efa895791a02fb0ed"><div class="ttname"><a href="PassBuilderBindings_8cpp.html#a83c7e5ca51099e4efa895791a02fb0ed">FAM</a></div><div class="ttdeci">FunctionAnalysisManager FAM</div><div class="ttdef"><b>Definition:</b> <a href="PassBuilderBindings_8cpp_source.html#l00059">PassBuilderBindings.cpp:59</a></div></div>
<div class="ttc" id="anamespacellvm_1_1cl_html_a68075925a54790e71ca790e1d4f21a40a263ac008d8d31f13ce460395fc4cf7e6"><div class="ttname"><a href="namespacellvm_1_1cl.html#a68075925a54790e71ca790e1d4f21a40a263ac008d8d31f13ce460395fc4cf7e6">llvm::cl::Hidden</a></div><div class="ttdeci">@ Hidden</div><div class="ttdef"><b>Definition:</b> <a href="CommandLine_8h_source.html#l00143">CommandLine.h:143</a></div></div>
<div class="ttc" id="anamespacellvm_html_a48b30f2688526d0f45900a47cd6b6654"><div class="ttname"><a href="namespacellvm.html#a48b30f2688526d0f45900a47cd6b6654">llvm::getLoadStoreType</a></div><div class="ttdeci">Type * getLoadStoreType(Value *I)</div><div class="ttdoc">A helper function that returns the type of a load or store instruction.</div><div class="ttdef"><b>Definition:</b> <a href="Instructions_8h_source.html#l05310">Instructions.h:5310</a></div></div>
<div class="ttc" id="aclassllvm_1_1PreservedAnalyses_html_a03797a73044a81cbc6a3409d6c72ee8f"><div class="ttname"><a href="classllvm_1_1PreservedAnalyses.html#a03797a73044a81cbc6a3409d6c72ee8f">llvm::PreservedAnalyses::none</a></div><div class="ttdeci">static PreservedAnalyses none()</div><div class="ttdoc">Convenience factory function for the empty preserved set.</div><div class="ttdef"><b>Definition:</b> <a href="PassManager_8h_source.html#l00158">PassManager.h:158</a></div></div>
<div class="ttc" id="aclassllvm_1_1Type_html"><div class="ttname"><a href="classllvm_1_1Type.html">llvm::Type</a></div><div class="ttdoc">The instances of the Type class are immutable: once they are created, they are never changed.</div><div class="ttdef"><b>Definition:</b> <a href="Type_8h_source.html#l00045">Type.h:45</a></div></div>
<div class="ttc" id="aDenseMap_8h_html"><div class="ttname"><a href="DenseMap_8h.html">DenseMap.h</a></div></div>
<div class="ttc" id="aModule_8h_html"><div class="ttname"><a href="Module_8h.html">Module.h</a></div><div class="ttdoc">Module.h This file contains the declarations for the Module class.</div></div>
<div class="ttc" id="anamespacellvm_html_a469101ea87b8b432a1b4f7935c97f35c"><div class="ttname"><a href="namespacellvm.html#a469101ea87b8b432a1b4f7935c97f35c">llvm::reverse</a></div><div class="ttdeci">auto reverse(ContainerTy &amp;&amp;C, std::enable_if_t&lt; has_rbegin&lt; ContainerTy &gt;::value &gt; *=nullptr)</div><div class="ttdef"><b>Definition:</b> <a href="STLExtras_8h_source.html#l00329">STLExtras.h:329</a></div></div>
<div class="ttc" id="aclassllvm_1_1AttributeList_html"><div class="ttname"><a href="classllvm_1_1AttributeList.html">llvm::AttributeList</a></div><div class="ttdef"><b>Definition:</b> <a href="Attributes_8h_source.html#l00398">Attributes.h:398</a></div></div>
<div class="ttc" id="aThreadSanitizer_8cpp_html_accbf04314e7caef9ac81d62928dda8b8"><div class="ttname"><a href="ThreadSanitizer_8cpp.html#accbf04314e7caef9ac81d62928dda8b8">isAtomic</a></div><div class="ttdeci">static bool isAtomic(Instruction *I)</div><div class="ttdef"><b>Definition:</b> <a href="ThreadSanitizer_8cpp_source.html#l00531">ThreadSanitizer.cpp:531</a></div></div>
<div class="ttc" id="aclassllvm_1_1Optional_html"><div class="ttname"><a href="classllvm_1_1Optional.html">llvm::Optional</a></div><div class="ttdef"><b>Definition:</b> <a href="Optional_8h_source.html#l00238">Optional.h:238</a></div></div>
<div class="ttc" id="aclassllvm_1_1FenceInst_html"><div class="ttname"><a href="classllvm_1_1FenceInst.html">llvm::FenceInst</a></div><div class="ttdoc">An instruction for ordering other memory operations.</div><div class="ttdef"><b>Definition:</b> <a href="Instructions_8h_source.html#l00444">Instructions.h:444</a></div></div>
<div class="ttc" id="anamespacellvm_html_a9a7b5c68c90f85baaedaa854cc5002cc"><div class="ttname"><a href="namespacellvm.html#a9a7b5c68c90f85baaedaa854cc5002cc">llvm::errs</a></div><div class="ttdeci">raw_fd_ostream &amp; errs()</div><div class="ttdoc">This returns a reference to a raw_ostream for standard error.</div><div class="ttdef"><b>Definition:</b> <a href="raw__ostream_8cpp_source.html#l00892">raw_ostream.cpp:892</a></div></div>
<div class="ttc" id="aTargetLibraryInfo_8cpp_html_a19d27915595e7f0a0ef271448bcdac6f"><div class="ttname"><a href="TargetLibraryInfo_8cpp.html#a19d27915595e7f0a0ef271448bcdac6f">initialize</a></div><div class="ttdeci">static void initialize(TargetLibraryInfoImpl &amp;TLI, const Triple &amp;T, ArrayRef&lt; StringLiteral &gt; StandardNames)</div><div class="ttdoc">Initialize the set of available library functions based on the specified target triple.</div><div class="ttdef"><b>Definition:</b> <a href="TargetLibraryInfo_8cpp_source.html#l00116">TargetLibraryInfo.cpp:116</a></div></div>
<div class="ttc" id="aclassllvm_1_1AtomicRMWInst_html_a461cfbbb5c7a57ab73210498923cf615ad76dfbda6c10d959f44e01788b4c0f66"><div class="ttname"><a href="classllvm_1_1AtomicRMWInst.html#a461cfbbb5c7a57ab73210498923cf615ad76dfbda6c10d959f44e01788b4c0f66">llvm::AtomicRMWInst::FIRST_BINOP</a></div><div class="ttdeci">@ FIRST_BINOP</div><div class="ttdef"><b>Definition:</b> <a href="Instructions_8h_source.html#l00768">Instructions.h:768</a></div></div>
<div class="ttc" id="anamespacellvm_1_1dwarf_html_ac94a19fc8c57bf0350fc4e9f45897828"><div class="ttname"><a href="namespacellvm_1_1dwarf.html#ac94a19fc8c57bf0350fc4e9f45897828">llvm::dwarf::Tag</a></div><div class="ttdeci">Tag</div><div class="ttdef"><b>Definition:</b> <a href="Dwarf_8h_source.html#l00104">Dwarf.h:104</a></div></div>
<div class="ttc" id="aAArch64InstrInfo_8cpp_html_ab0b0a572164f8fccd5474cb6babed129a4f2a846b62b36aa105ec3ddfd151a482"><div class="ttname"><a href="AArch64InstrInfo_8cpp.html#ab0b0a572164f8fccd5474cb6babed129a4f2a846b62b36aa105ec3ddfd151a482">HasCalls</a></div><div class="ttdeci">@ HasCalls</div><div class="ttdef"><b>Definition:</b> <a href="AArch64InstrInfo_8cpp_source.html#l06398">AArch64InstrInfo.cpp:6398</a></div></div>
<div class="ttc" id="aclassllvm_1_1Type_html_a30dd396c5b40cd86c1591872e574ccdf"><div class="ttname"><a href="classllvm_1_1Type.html#a30dd396c5b40cd86c1591872e574ccdf">llvm::Type::getInt32Ty</a></div><div class="ttdeci">static IntegerType * getInt32Ty(LLVMContext &amp;C)</div><div class="ttdef"><b>Definition:</b> <a href="Type_8cpp_source.html#l00203">Type.cpp:203</a></div></div>
<div class="ttc" id="aDebug_8h_html_a08efc68d15935eb8889400a46c3749ba"><div class="ttname"><a href="Debug_8h.html#a08efc68d15935eb8889400a46c3749ba">LLVM_DEBUG</a></div><div class="ttdeci">#define LLVM_DEBUG(X)</div><div class="ttdef"><b>Definition:</b> <a href="Debug_8h_source.html#l00122">Debug.h:122</a></div></div>
<div class="ttc" id="aMD5_8cpp_html_a96d73bbd7af15cb1fc38c3f4a3bd82e9"><div class="ttname"><a href="MD5_8cpp.html#a96d73bbd7af15cb1fc38c3f4a3bd82e9">F</a></div><div class="ttdeci">#define F(x, y, z)</div><div class="ttdef"><b>Definition:</b> <a href="MD5_8cpp_source.html#l00056">MD5.cpp:56</a></div></div>
<div class="ttc" id="anamespacellvm_1_1SyncScope_html_af9e9f9aa1e7422ed19250fbf66982b34a6ee3fb8ea1d8946ee1f96ab1947b294a"><div class="ttname"><a href="namespacellvm_1_1SyncScope.html#af9e9f9aa1e7422ed19250fbf66982b34a6ee3fb8ea1d8946ee1f96ab1947b294a">llvm::SyncScope::SingleThread</a></div><div class="ttdeci">@ SingleThread</div><div class="ttdoc">Synchronized with respect to signal handlers executing in the same thread.</div><div class="ttdef"><b>Definition:</b> <a href="LLVMContext_8h_source.html#l00055">LLVMContext.h:55</a></div></div>
<div class="ttc" id="aThreadSanitizer_8cpp_html_a38c0f7b9db64da1261f7c7f1db454663"><div class="ttname"><a href="ThreadSanitizer_8cpp.html#a38c0f7b9db64da1261f7c7f1db454663">kTsanModuleCtorName</a></div><div class="ttdeci">const char kTsanModuleCtorName[]</div><div class="ttdef"><b>Definition:</b> <a href="ThreadSanitizer_8cpp_source.html#l00100">ThreadSanitizer.cpp:100</a></div></div>
<div class="ttc" id="anamespacellvm_html_a7c46c742c31be54870e2038048e6b391"><div class="ttname"><a href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">llvm::dbgs</a></div><div class="ttdeci">raw_ostream &amp; dbgs()</div><div class="ttdoc">dbgs() - This returns a reference to a raw_ostream for debugging messages.</div><div class="ttdef"><b>Definition:</b> <a href="Debug_8cpp_source.html#l00163">Debug.cpp:163</a></div></div>
<div class="ttc" id="aCommandLine_8h_html"><div class="ttname"><a href="CommandLine_8h.html">CommandLine.h</a></div></div>
<div class="ttc" id="anamespacellvm_html_a1c18636249f94e73f9903ec907ac1db2"><div class="ttname"><a href="namespacellvm.html#a1c18636249f94e73f9903ec907ac1db2">llvm::getOrCreateSanitizerCtorAndInitFunctions</a></div><div class="ttdeci">std::pair&lt; Function *, FunctionCallee &gt; getOrCreateSanitizerCtorAndInitFunctions(Module &amp;M, StringRef CtorName, StringRef InitName, ArrayRef&lt; Type * &gt; InitArgTypes, ArrayRef&lt; Value * &gt; InitArgs, function_ref&lt; void(Function *, FunctionCallee)&gt; FunctionsCreatedCallback, StringRef VersionCheckName=StringRef())</div><div class="ttdoc">Creates sanitizer constructor function lazily.</div><div class="ttdef"><b>Definition:</b> <a href="ModuleUtils_8cpp_source.html#l00158">ModuleUtils.cpp:158</a></div></div>
<div class="ttc" id="aclassllvm_1_1ConstantInt_html"><div class="ttname"><a href="classllvm_1_1ConstantInt.html">llvm::ConstantInt</a></div><div class="ttdoc">This is the shared class of boolean and integer constants.</div><div class="ttdef"><b>Definition:</b> <a href="Constants_8h_source.html#l00079">Constants.h:79</a></div></div>
<div class="ttc" id="aThreadSanitizer_8cpp_html_afdcf7dc835e87d1c94a3f3db62d526a3"><div class="ttname"><a href="ThreadSanitizer_8cpp.html#afdcf7dc835e87d1c94a3f3db62d526a3">createOrdering</a></div><div class="ttdeci">static ConstantInt * createOrdering(IRBuilder&lt;&gt; *IRB, AtomicOrdering ord)</div><div class="ttdef"><b>Definition:</b> <a href="ThreadSanitizer_8cpp_source.html#l00718">ThreadSanitizer.cpp:718</a></div></div>
<div class="ttc" id="aclassllvm_1_1PassRegistry_html_a05a729900b76c89e808c6c3094921b2f"><div class="ttname"><a href="classllvm_1_1PassRegistry.html#a05a729900b76c89e808c6c3094921b2f">llvm::PassRegistry::getPassRegistry</a></div><div class="ttdeci">static PassRegistry * getPassRegistry()</div><div class="ttdoc">getPassRegistry - Access the global registry object, which is automatically initialized at applicatio...</div><div class="ttdef"><b>Definition:</b> <a href="PassRegistry_8cpp_source.html#l00031">PassRegistry.cpp:31</a></div></div>
<div class="ttc" id="aSmallString_8h_html"><div class="ttname"><a href="SmallString_8h.html">SmallString.h</a></div></div>
<div class="ttc" id="aIntrinsics_8h_html"><div class="ttname"><a href="Intrinsics_8h.html">Intrinsics.h</a></div></div>
<div class="ttc" id="aREADME__ALTIVEC_8txt_html_a9aacd9146afe44bf656cd664e2a88c8c"><div class="ttname"><a href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a></div><div class="ttdeci">(vector float) vec_cmpeq(*A, *B) C</div><div class="ttdef"><b>Definition:</b> <a href="README__ALTIVEC_8txt_source.html#l00086">README_ALTIVEC.txt:86</a></div></div>
<div class="ttc" id="aPassBuilderBindings_8cpp_html_a85bddafa659a93a7a67c9094648259be"><div class="ttname"><a href="PassBuilderBindings_8cpp.html#a85bddafa659a93a7a67c9094648259be">MAM</a></div><div class="ttdeci">ModuleAnalysisManager MAM</div><div class="ttdef"><b>Definition:</b> <a href="PassBuilderBindings_8cpp_source.html#l00061">PassBuilderBindings.cpp:61</a></div></div>
<div class="ttc" id="aclassllvm_1_1CallInst_html_a850d8262cd900958b3153c4aa080b2bb"><div class="ttname"><a href="classllvm_1_1CallInst.html#a850d8262cd900958b3153c4aa080b2bb">llvm::CallInst::Create</a></div><div class="ttdeci">static CallInst * Create(FunctionType *Ty, Value *F, const Twine &amp;NameStr=&quot;&quot;, Instruction *InsertBefore=nullptr)</div><div class="ttdef"><b>Definition:</b> <a href="Instructions_8h_source.html#l01518">Instructions.h:1518</a></div></div>
<div class="ttc" id="aclassllvm_1_1AnalysisUsage_html"><div class="ttname"><a href="classllvm_1_1AnalysisUsage.html">llvm::AnalysisUsage</a></div><div class="ttdoc">Represent the analysis usage information of a pass.</div><div class="ttdef"><b>Definition:</b> <a href="PassAnalysisSupport_8h_source.html#l00047">PassAnalysisSupport.h:47</a></div></div>
<div class="ttc" id="anamespacellvm_html_aa6aa39b86007ee97f50248d2fb1b7220"><div class="ttname"><a href="namespacellvm.html#aa6aa39b86007ee97f50248d2fb1b7220">llvm::ReplaceInstWithInst</a></div><div class="ttdeci">void ReplaceInstWithInst(BasicBlock::InstListType &amp;BIL, BasicBlock::iterator &amp;BI, Instruction *I)</div><div class="ttdoc">Replace the instruction specified by BI with the instruction specified by I.</div><div class="ttdef"><b>Definition:</b> <a href="BasicBlockUtils_8cpp_source.html#l00468">BasicBlockUtils.cpp:468</a></div></div>
<div class="ttc" id="aTargetLibraryInfo_8h_html"><div class="ttname"><a href="TargetLibraryInfo_8h.html">TargetLibraryInfo.h</a></div></div>
<div class="ttc" id="anamespacefalse_html"><div class="ttname"><a href="namespacefalse.html">false</a></div><div class="ttdef"><b>Definition:</b> <a href="StackSlotColoring_8cpp_source.html#l00142">StackSlotColoring.cpp:142</a></div></div>
<div class="ttc" id="aThreadSanitizer_8cpp_html_a0bb37c4d9d72e23c0da8cafdb59f466a"><div class="ttname"><a href="ThreadSanitizer_8cpp.html#a0bb37c4d9d72e23c0da8cafdb59f466a">shouldInstrumentReadWriteFromAddress</a></div><div class="ttdeci">static bool shouldInstrumentReadWriteFromAddress(const Module *M, Value *Addr)</div><div class="ttdef"><b>Definition:</b> <a href="ThreadSanitizer_8cpp_source.html#l00410">ThreadSanitizer.cpp:410</a></div></div>
<div class="ttc" id="aclassllvm_1_1IntegerType_html"><div class="ttname"><a href="classllvm_1_1IntegerType.html">llvm::IntegerType</a></div><div class="ttdoc">Class to represent integer types.</div><div class="ttdef"><b>Definition:</b> <a href="DerivedTypes_8h_source.html#l00040">DerivedTypes.h:40</a></div></div>
<div class="ttc" id="aclassllvm_1_1Instruction_html"><div class="ttname"><a href="classllvm_1_1Instruction.html">llvm::Instruction</a></div><div class="ttdef"><b>Definition:</b> <a href="IR_2Instruction_8h_source.html#l00045">Instruction.h:46</a></div></div>
<div class="ttc" id="aInstrProf_8h_html"><div class="ttname"><a href="InstrProf_8h.html">InstrProf.h</a></div></div>
<div class="ttc" id="aclassllvm_1_1Triple_html_a2e265a0d332c3e2db0acf0c7afd4175d"><div class="ttname"><a href="classllvm_1_1Triple.html#a2e265a0d332c3e2db0acf0c7afd4175d">llvm::Triple::getObjectFormat</a></div><div class="ttdeci">ObjectFormatType getObjectFormat() const</div><div class="ttdoc">getFormat - Get the object format for this triple.</div><div class="ttdef"><b>Definition:</b> <a href="Triple_8h_source.html#l00337">Triple.h:337</a></div></div>
<div class="ttc" id="aclassllvm_1_1AtomicRMWInst_html_a461cfbbb5c7a57ab73210498923cf615afdcdc631cf4fa6829fd7499cd06a306b"><div class="ttname"><a href="classllvm_1_1AtomicRMWInst.html#a461cfbbb5c7a57ab73210498923cf615afdcdc631cf4fa6829fd7499cd06a306b">llvm::AtomicRMWInst::Nand</a></div><div class="ttdeci">@ Nand</div><div class="ttdoc">*p = ~(old &amp; v)</div><div class="ttdef"><b>Definition:</b> <a href="Instructions_8h_source.html#l00748">Instructions.h:748</a></div></div>
<div class="ttc" id="anamespacellvm_html_a0bf75467957937ad23ad7be19f489934"><div class="ttname"><a href="namespacellvm.html#a0bf75467957937ad23ad7be19f489934">llvm::STATISTIC</a></div><div class="ttdeci">STATISTIC(NumFunctions, &quot;Total number of functions&quot;)</div></div>
<div class="ttc" id="aclassllvm_1_1UndefValue_html_a4ae5ff22b700a42bcc5d889233721335"><div class="ttname"><a href="classllvm_1_1UndefValue.html#a4ae5ff22b700a42bcc5d889233721335">llvm::UndefValue::get</a></div><div class="ttdeci">static UndefValue * get(Type *T)</div><div class="ttdoc">Static factory methods - Return an 'undef' object of the specified type.</div><div class="ttdef"><b>Definition:</b> <a href="Constants_8cpp_source.html#l01786">Constants.cpp:1786</a></div></div>
<div class="ttc" id="aclassllvm_1_1ConstantInt_html_a969709dd49c28865a482d8b870f87c46"><div class="ttname"><a href="classllvm_1_1ConstantInt.html#a969709dd49c28865a482d8b870f87c46">llvm::ConstantInt::get</a></div><div class="ttdeci">static Constant * get(Type *Ty, uint64_t V, bool IsSigned=false)</div><div class="ttdoc">If Ty is a vector type, return a Constant with a splat of the given value.</div><div class="ttdef"><b>Definition:</b> <a href="Constants_8cpp_source.html#l00901">Constants.cpp:901</a></div></div>
<div class="ttc" id="anamespacellvm_html_a3b1c5788b85ffa254be0e834edf5cf8f"><div class="ttname"><a href="namespacellvm.html#a3b1c5788b85ffa254be0e834edf5cf8f">llvm::getUnderlyingObject</a></div><div class="ttdeci">const Value * getUnderlyingObject(const Value *V, unsigned MaxLookup=6)</div><div class="ttdoc">This method strips off any GEP address adjustments and pointer casts from the specified value,...</div><div class="ttdef"><b>Definition:</b> <a href="ValueTracking_8cpp_source.html#l04356">ValueTracking.cpp:4356</a></div></div>
<div class="ttc" id="aThreadSanitizer_8cpp_html_a729cb67fb2583fad4e5ff29acbbac3e8"><div class="ttname"><a href="ThreadSanitizer_8cpp.html#a729cb67fb2583fad4e5ff29acbbac3e8">ClInstrumentAtomics</a></div><div class="ttdeci">static cl::opt&lt; bool &gt; ClInstrumentAtomics(&quot;tsan-instrument-atomics&quot;, cl::init(true), cl::desc(&quot;Instrument atomics&quot;), cl::Hidden)</div></div>
<div class="ttc" id="aclassllvm_1_1AtomicRMWInst_html_a461cfbbb5c7a57ab73210498923cf615afc870a548088c5b7a93a34f648889d77"><div class="ttname"><a href="classllvm_1_1AtomicRMWInst.html#a461cfbbb5c7a57ab73210498923cf615afc870a548088c5b7a93a34f648889d77">llvm::AtomicRMWInst::Xchg</a></div><div class="ttdeci">@ Xchg</div><div class="ttdoc">*p = v</div><div class="ttdef"><b>Definition:</b> <a href="Instructions_8h_source.html#l00740">Instructions.h:740</a></div></div>
<div class="ttc" id="aclassllvm_1_1AtomicRMWInst_html_a461cfbbb5c7a57ab73210498923cf615a0794c42b44989f9d9f1454d79ca0dd88"><div class="ttname"><a href="classllvm_1_1AtomicRMWInst.html#a461cfbbb5c7a57ab73210498923cf615a0794c42b44989f9d9f1454d79ca0dd88">llvm::AtomicRMWInst::Add</a></div><div class="ttdeci">@ Add</div><div class="ttdoc">*p = old + v</div><div class="ttdef"><b>Definition:</b> <a href="Instructions_8h_source.html#l00742">Instructions.h:742</a></div></div>
<div class="ttc" id="aType_8h_html"><div class="ttname"><a href="Type_8h.html">Type.h</a></div></div>
<div class="ttc" id="aclassllvm_1_1MemSetInst_html"><div class="ttname"><a href="classllvm_1_1MemSetInst.html">llvm::MemSetInst</a></div><div class="ttdoc">This class wraps the llvm.memset intrinsic.</div><div class="ttdef"><b>Definition:</b> <a href="IntrinsicInst_8h_source.html#l00883">IntrinsicInst.h:883</a></div></div>
<div class="ttc" id="aThreadSanitizer_8cpp_html_a4ceb95d271f52528fa1bc453a520993d"><div class="ttname"><a href="ThreadSanitizer_8cpp.html#a4ceb95d271f52528fa1bc453a520993d">ClInstrumentReadBeforeWrite</a></div><div class="ttdeci">static cl::opt&lt; bool &gt; ClInstrumentReadBeforeWrite(&quot;tsan-instrument-read-before-write&quot;, cl::init(false), cl::desc(&quot;Do not eliminate read instrumentation for read-before-writes&quot;), cl::Hidden)</div></div>
<div class="ttc" id="aclassllvm_1_1SmallString_html"><div class="ttname"><a href="classllvm_1_1SmallString.html">llvm::SmallString&lt; 32 &gt;</a></div></div>
<div class="ttc" id="aPassSupport_8h_html_a74ce8276b89067e806f67c45a6d92575"><div class="ttname"><a href="PassSupport_8h.html#a74ce8276b89067e806f67c45a6d92575">INITIALIZE_PASS_END</a></div><div class="ttdeci">#define INITIALIZE_PASS_END(passName, arg, name, cfg, analysis)</div><div class="ttdef"><b>Definition:</b> <a href="PassSupport_8h_source.html#l00058">PassSupport.h:58</a></div></div>
<div class="ttc" id="aThreadSanitizer_8cpp_html_aaf71ac0f2b61dccfb3e4cd42cc134ea8"><div class="ttname"><a href="ThreadSanitizer_8cpp.html#aaf71ac0f2b61dccfb3e4cd42cc134ea8">ClInstrumentMemIntrinsics</a></div><div class="ttdeci">static cl::opt&lt; bool &gt; ClInstrumentMemIntrinsics(&quot;tsan-instrument-memintrinsics&quot;, cl::init(true), cl::desc(&quot;Instrument memintrinsics (memset/memcpy/memmove)&quot;), cl::Hidden)</div></div>
<div class="ttc" id="aclassllvm_1_1Type_html_ac6d28a9b11139182134a9618028a0d07"><div class="ttname"><a href="classllvm_1_1Type.html#ac6d28a9b11139182134a9618028a0d07">llvm::Type::isIntegerTy</a></div><div class="ttdeci">bool isIntegerTy() const</div><div class="ttdoc">True if this is an instance of IntegerType.</div><div class="ttdef"><b>Definition:</b> <a href="Type_8h_source.html#l00201">Type.h:201</a></div></div>
<div class="ttc" id="anamespacellvm_html_a9bccbe67aaab722783ca4e7c504aaaa7"><div class="ttname"><a href="namespacellvm.html#a9bccbe67aaab722783ca4e7c504aaaa7">llvm::AtomicOrdering</a></div><div class="ttdeci">AtomicOrdering</div><div class="ttdoc">Atomic ordering for LLVM's memory model.</div><div class="ttdef"><b>Definition:</b> <a href="AtomicOrdering_8h_source.html#l00056">AtomicOrdering.h:56</a></div></div>
<div class="ttc" id="aclassllvm_1_1cl_1_1opt_html"><div class="ttname"><a href="classllvm_1_1cl_1_1opt.html">llvm::cl::opt&lt; bool &gt;</a></div></div>
<div class="ttc" id="aclassllvm_1_1StoreInst_html"><div class="ttname"><a href="classllvm_1_1StoreInst.html">llvm::StoreInst</a></div><div class="ttdoc">An instruction for storing to memory.</div><div class="ttdef"><b>Definition:</b> <a href="Instructions_8h_source.html#l00304">Instructions.h:304</a></div></div>
<div class="ttc" id="aclassllvm_1_1AtomicRMWInst_html_a461cfbbb5c7a57ab73210498923cf615a5db6ca0c3e18acd87290f22ccb2ce564"><div class="ttname"><a href="classllvm_1_1AtomicRMWInst.html#a461cfbbb5c7a57ab73210498923cf615a5db6ca0c3e18acd87290f22ccb2ce564">llvm::AtomicRMWInst::Sub</a></div><div class="ttdeci">@ Sub</div><div class="ttdoc">*p = old - v</div><div class="ttdef"><b>Definition:</b> <a href="Instructions_8h_source.html#l00744">Instructions.h:744</a></div></div>
<div class="ttc" id="astructllvm_1_1ThreadSanitizerPass_html_a554dea073d38539bd97dbb495225a24b"><div class="ttname"><a href="structllvm_1_1ThreadSanitizerPass.html#a554dea073d38539bd97dbb495225a24b">llvm::ThreadSanitizerPass::run</a></div><div class="ttdeci">PreservedAnalyses run(Function &amp;F, FunctionAnalysisManager &amp;FAM)</div><div class="ttdef"><b>Definition:</b> <a href="ThreadSanitizer_8cpp_source.html#l00201">ThreadSanitizer.cpp:201</a></div></div>
<div class="ttc" id="aclassllvm_1_1TargetLibraryInfoWrapperPass_html"><div class="ttname"><a href="classllvm_1_1TargetLibraryInfoWrapperPass.html">llvm::TargetLibraryInfoWrapperPass</a></div><div class="ttdef"><b>Definition:</b> <a href="TargetLibraryInfo_8h_source.html#l00463">TargetLibraryInfo.h:463</a></div></div>
<div class="ttc" id="aELFObjHandler_8cpp_html_a9df82a8be2f17e80535a8937bf23e022"><div class="ttname"><a href="ELFObjHandler_8cpp.html#a9df82a8be2f17e80535a8937bf23e022">Addr</a></div><div class="ttdeci">uint64_t Addr</div><div class="ttdef"><b>Definition:</b> <a href="ELFObjHandler_8cpp_source.html#l00080">ELFObjHandler.cpp:80</a></div></div>
<div class="ttc" id="aSVEIntrinsicOpts_8cpp_html_a2bb87eb1bcbc74783a83ae945eb8fa36"><div class="ttname"><a href="SVEIntrinsicOpts_8cpp.html#a2bb87eb1bcbc74783a83ae945eb8fa36">INITIALIZE_PASS_DEPENDENCY</a></div><div class="ttdeci">INITIALIZE_PASS_DEPENDENCY(DominatorTreeWrapperPass)</div></div>
<div class="ttc" id="aclassllvm_1_1IRBuilderBase_html_ac0e8c554bf1c1e117a74d51df89c137d"><div class="ttname"><a href="classllvm_1_1IRBuilderBase.html#ac0e8c554bf1c1e117a74d51df89c137d">llvm::IRBuilderBase::getInt32</a></div><div class="ttdeci">ConstantInt * getInt32(uint32_t C)</div><div class="ttdoc">Get a constant 32-bit value.</div><div class="ttdef"><b>Definition:</b> <a href="IRBuilder_8h_source.html#l00478">IRBuilder.h:478</a></div></div>
<div class="ttc" id="aclassllvm_1_1DenseMap_html"><div class="ttname"><a href="classllvm_1_1DenseMap.html">llvm::DenseMap</a></div><div class="ttdef"><b>Definition:</b> <a href="DenseMap_8h_source.html#l00714">DenseMap.h:715</a></div></div>
<div class="ttc" id="aMD5_8cpp_html_ac0eafdc9ee161b71e7af98af736952fd"><div class="ttname"><a href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a></div><div class="ttdeci">#define I(x, y, z)</div><div class="ttdef"><b>Definition:</b> <a href="MD5_8cpp_source.html#l00059">MD5.cpp:59</a></div></div>
<div class="ttc" id="aStringExtras_8h_html"><div class="ttname"><a href="StringExtras_8h.html">StringExtras.h</a></div></div>
<div class="ttc" id="aclassllvm_1_1GetElementPtrInst_html"><div class="ttname"><a href="classllvm_1_1GetElementPtrInst.html">llvm::GetElementPtrInst</a></div><div class="ttdoc">an instruction for type-safe pointer arithmetic to access elements of arrays and structs</div><div class="ttdef"><b>Definition:</b> <a href="Instructions_8h_source.html#l00928">Instructions.h:928</a></div></div>
<div class="ttc" id="anamespacellvm_1_1cl_html_a10a041239ae1870cfcc064bfaa79fb65"><div class="ttname"><a href="namespacellvm_1_1cl.html#a10a041239ae1870cfcc064bfaa79fb65">llvm::cl::init</a></div><div class="ttdeci">initializer&lt; Ty &gt; init(const Ty &amp;Val)</div><div class="ttdef"><b>Definition:</b> <a href="CommandLine_8h_source.html#l00443">CommandLine.h:443</a></div></div>
<div class="ttc" id="aclassllvm_1_1AtomicRMWInst_html_a461cfbbb5c7a57ab73210498923cf615a5954f59053121b87ebe0c5fe79942c6e"><div class="ttname"><a href="classllvm_1_1AtomicRMWInst.html#a461cfbbb5c7a57ab73210498923cf615a5954f59053121b87ebe0c5fe79942c6e">llvm::AtomicRMWInst::Or</a></div><div class="ttdeci">@ Or</div><div class="ttdoc">*p = old | v</div><div class="ttdef"><b>Definition:</b> <a href="Instructions_8h_source.html#l00750">Instructions.h:750</a></div></div>
<div class="ttc" id="aclassllvm_1_1DenseMapBase_html_a0c047f127ed4380a6f383d70bec4eb94"><div class="ttname"><a href="classllvm_1_1DenseMapBase.html#a0c047f127ed4380a6f383d70bec4eb94">llvm::DenseMapBase&lt; DenseMap&lt; KeyT, ValueT, DenseMapInfo&lt; KeyT &gt;, llvm::detail::DenseMapPair&lt; KeyT, ValueT &gt; &gt;, KeyT, ValueT, DenseMapInfo&lt; KeyT &gt;, llvm::detail::DenseMapPair&lt; KeyT, ValueT &gt; &gt;::find</a></div><div class="ttdeci">iterator find(const_arg_type_t&lt; KeyT &gt; Val)</div><div class="ttdef"><b>Definition:</b> <a href="DenseMap_8h_source.html#l00150">DenseMap.h:150</a></div></div>
<div class="ttc" id="aIRBuilder_8h_html"><div class="ttname"><a href="IRBuilder_8h.html">IRBuilder.h</a></div></div>
<div class="ttc" id="aSILowerControlFlow_8cpp_html_a4868c5d81c5ccc98c47aeab6244346a0"><div class="ttname"><a href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a></div><div class="ttdeci">assert(ImpDefSCC.getReg()==AMDGPU::SCC &amp;&amp;ImpDefSCC.isDef())</div></div>
<div class="ttc" id="aPassBuilderBindings_8cpp_html_a0f79dad1efc582555a443cc11a8fa401"><div class="ttname"><a href="PassBuilderBindings_8cpp.html#a0f79dad1efc582555a443cc11a8fa401">SI</a></div><div class="ttdeci">StandardInstrumentations SI(Debug, VerifyEach)</div></div>
<div class="ttc" id="aThreadSanitizer_8cpp_html_a3383f3057f7633e64153265d68ba32f4"><div class="ttname"><a href="ThreadSanitizer_8cpp.html#a3383f3057f7633e64153265d68ba32f4">ClCompoundReadBeforeWrite</a></div><div class="ttdeci">static cl::opt&lt; bool &gt; ClCompoundReadBeforeWrite(&quot;tsan-compound-read-before-write&quot;, cl::init(false), cl::desc(&quot;Emit special compound instrumentation for reads-before-writes&quot;), cl::Hidden)</div></div>
<div class="ttc" id="allvm_2Support_2ErrorHandling_8h_html_ace243f5c25697a1107cce46626b3dc94"><div class="ttname"><a href="llvm_2Support_2ErrorHandling_8h.html#ace243f5c25697a1107cce46626b3dc94">llvm_unreachable</a></div><div class="ttdeci">#define llvm_unreachable(msg)</div><div class="ttdoc">Marks that the current location is not supposed to be reachable.</div><div class="ttdef"><b>Definition:</b> <a href="llvm_2Support_2ErrorHandling_8h_source.html#l00136">ErrorHandling.h:136</a></div></div>
<div class="ttc" id="aThreadSanitizer_8cpp_html_acbaa17d809e20970d61fba815a8af5f8"><div class="ttname"><a href="ThreadSanitizer_8cpp.html#acbaa17d809e20970d61fba815a8af5f8">INITIALIZE_PASS_BEGIN</a></div><div class="ttdeci">INITIALIZE_PASS_BEGIN(ThreadSanitizerLegacyPass, &quot;tsan&quot;, &quot;ThreadSanitizer: detects data races.&quot;, false, false) INITIALIZE_PASS_END(ThreadSanitizerLegacyPass</div></div>
<div class="ttc" id="aThreadSanitizer_8cpp_html_ae9a6c12fdf4ec6cd050e9c320ceac9f6"><div class="ttname"><a href="ThreadSanitizer_8cpp.html#ae9a6c12fdf4ec6cd050e9c320ceac9f6">ClInstrumentMemoryAccesses</a></div><div class="ttdeci">static cl::opt&lt; bool &gt; ClInstrumentMemoryAccesses(&quot;tsan-instrument-memory-accesses&quot;, cl::init(true), cl::desc(&quot;Instrument memory accesses&quot;), cl::Hidden)</div></div>
<div class="ttc" id="aclassllvm_1_1Module_html"><div class="ttname"><a href="classllvm_1_1Module.html">llvm::Module</a></div><div class="ttdoc">A Module instance is used to store all the information related to an LLVM module.</div><div class="ttdef"><b>Definition:</b> <a href="Module_8h_source.html#l00067">Module.h:67</a></div></div>
<div class="ttc" id="aclassllvm_1_1MDNode_html"><div class="ttname"><a href="classllvm_1_1MDNode.html">llvm::MDNode</a></div><div class="ttdoc">Metadata node.</div><div class="ttdef"><b>Definition:</b> <a href="Metadata_8h_source.html#l00897">Metadata.h:897</a></div></div>
<div class="ttc" id="anamespacellvm_html_a7912b6c9e7843ca9fd5a11e199bef617"><div class="ttname"><a href="namespacellvm.html#a7912b6c9e7843ca9fd5a11e199bef617">llvm::PointerMayBeCaptured</a></div><div class="ttdeci">bool PointerMayBeCaptured(const Value *V, bool ReturnCaptures, bool StoreCaptures, unsigned MaxUsesToExplore=0)</div><div class="ttdoc">PointerMayBeCaptured - Return true if this pointer value may be captured by the enclosing function (w...</div><div class="ttdef"><b>Definition:</b> <a href="CaptureTracking_8cpp_source.html#l00153">CaptureTracking.cpp:153</a></div></div>
<div class="ttc" id="aDataLayout_8h_html"><div class="ttname"><a href="DataLayout_8h.html">DataLayout.h</a></div></div>
<div class="ttc" id="anamespacellvm_html_a7771b636e3d12b42818bf92a7195fb30"><div class="ttname"><a href="namespacellvm.html#a7771b636e3d12b42818bf92a7195fb30">llvm::countTrailingZeros</a></div><div class="ttdeci">unsigned countTrailingZeros(T Val, ZeroBehavior ZB=ZB_Width)</div><div class="ttdoc">Count number of 0's from the least significant bit to the most stopping at the first 1.</div><div class="ttdef"><b>Definition:</b> <a href="MathExtras_8h_source.html#l00156">MathExtras.h:156</a></div></div>
<div class="ttc" id="aclassllvm_1_1StringRef_html"><div class="ttname"><a href="classllvm_1_1StringRef.html">llvm::StringRef</a></div><div class="ttdoc">StringRef - Represent a constant reference to a string, i.e.</div><div class="ttdef"><b>Definition:</b> <a href="StringRef_8h_source.html#l00058">StringRef.h:58</a></div></div>
<div class="ttc" id="aclassllvm_1_1Value_html_a6393a2d4fe7e10b28a0dcc35f881567b"><div class="ttname"><a href="classllvm_1_1Value.html#a6393a2d4fe7e10b28a0dcc35f881567b">llvm::Value::getType</a></div><div class="ttdeci">Type * getType() const</div><div class="ttdoc">All values are typed, get the type of this value.</div><div class="ttdef"><b>Definition:</b> <a href="Value_8h_source.html#l00256">Value.h:256</a></div></div>
<div class="ttc" id="aThreadSanitizer_8cpp_html_ae40d4d90566731cab0da1ce17eff68cc"><div class="ttname"><a href="ThreadSanitizer_8cpp.html#ae40d4d90566731cab0da1ce17eff68cc">ClInstrumentFuncEntryExit</a></div><div class="ttdeci">static cl::opt&lt; bool &gt; ClInstrumentFuncEntryExit(&quot;tsan-instrument-func-entry-exit&quot;, cl::init(true), cl::desc(&quot;Instrument function entry and exit&quot;), cl::Hidden)</div></div>
<div class="ttc" id="aclassuint32__t_html"><div class="ttname"><a href="classuint32__t.html">uint32_t</a></div></div>
<div class="ttc" id="aAArch64SLSHardening_8cpp_html_ad467c4ab9119043f9b7750ab986be61a"><div class="ttname"><a href="AArch64SLSHardening_8cpp.html#ad467c4ab9119043f9b7750ab986be61a">DL</a></div><div class="ttdeci">MachineBasicBlock MachineBasicBlock::iterator DebugLoc DL</div><div class="ttdef"><b>Definition:</b> <a href="AArch64SLSHardening_8cpp_source.html#l00076">AArch64SLSHardening.cpp:76</a></div></div>
<div class="ttc" id="anamespacellvm_html_ae63427c4d8f3c1ce48401b38ed9198f1"><div class="ttname"><a href="namespacellvm.html#ae63427c4d8f3c1ce48401b38ed9198f1">llvm::maybeMarkSanitizerLibraryCallNoBuiltin</a></div><div class="ttdeci">void maybeMarkSanitizerLibraryCallNoBuiltin(CallInst *CI, const TargetLibraryInfo *TLI)</div><div class="ttdoc">Given a CallInst, check if it calls a string function known to CodeGen, and mark it with NoBuiltin if...</div><div class="ttdef"><b>Definition:</b> <a href="Local_8cpp_source.html#l03231">Local.cpp:3231</a></div></div>
<div class="ttc" id="anamespacellvm_1_1AMDGPU_1_1HSAMD_1_1Kernel_1_1Arg_1_1Key_html_a4eea8fbc268a347761cbbc80e3660544"><div class="ttname"><a href="namespacellvm_1_1AMDGPU_1_1HSAMD_1_1Kernel_1_1Arg_1_1Key.html#a4eea8fbc268a347761cbbc80e3660544">llvm::AMDGPU::HSAMD::Kernel::Arg::Key::IsVolatile</a></div><div class="ttdeci">constexpr char IsVolatile[]</div><div class="ttdoc">Key for Kernel::Arg::Metadata::mIsVolatile.</div><div class="ttdef"><b>Definition:</b> <a href="AMDGPUMetadata_8h_source.html#l00194">AMDGPUMetadata.h:194</a></div></div>
<div class="ttc" id="aThreadSanitizer_8cpp_html_a4eb659c41efee9cbd22d94b4c53da595"><div class="ttname"><a href="ThreadSanitizer_8cpp.html#a4eb659c41efee9cbd22d94b4c53da595">ClHandleCxxExceptions</a></div><div class="ttdeci">static cl::opt&lt; bool &gt; ClHandleCxxExceptions(&quot;tsan-handle-cxx-exceptions&quot;, cl::init(true), cl::desc(&quot;Handle C++ exceptions (insert cleanup blocks for unwinding)&quot;), cl::Hidden)</div></div>
<div class="ttc" id="aCompiler_8h_html_a9579881de06b1560d242d15171ca1b86"><div class="ttname"><a href="Compiler_8h.html#a9579881de06b1560d242d15171ca1b86">LLVM_FALLTHROUGH</a></div><div class="ttdeci">#define LLVM_FALLTHROUGH</div><div class="ttdoc">LLVM_FALLTHROUGH - Mark fallthrough cases in switch statements.</div><div class="ttdef"><b>Definition:</b> <a href="Compiler_8h_source.html#l00281">Compiler.h:281</a></div></div>
<div class="ttc" id="aclassllvm_1_1LoadInst_html"><div class="ttname"><a href="classllvm_1_1LoadInst.html">llvm::LoadInst</a></div><div class="ttdoc">An instruction for reading from memory.</div><div class="ttdef"><b>Definition:</b> <a href="Instructions_8h_source.html#l00175">Instructions.h:175</a></div></div>
<div class="ttc" id="aclassllvm_1_1AtomicRMWInst_html"><div class="ttname"><a href="classllvm_1_1AtomicRMWInst.html">llvm::AtomicRMWInst</a></div><div class="ttdoc">an instruction that atomically reads a memory location, combines it with another value,...</div><div class="ttdef"><b>Definition:</b> <a href="Instructions_8h_source.html#l00726">Instructions.h:726</a></div></div>
<div class="ttc" id="anamespacellvm_html_a9bccbe67aaab722783ca4e7c504aaaa7ab8e7b465df7c5979dc731d06e84ce2cf"><div class="ttname"><a href="namespacellvm.html#a9bccbe67aaab722783ca4e7c504aaaa7ab8e7b465df7c5979dc731d06e84ce2cf">llvm::AtomicOrdering::Release</a></div><div class="ttdeci">@ Release</div></div>
<div class="ttc" id="anamespacellvm_1_1MachO_html_a11849daa1b55a8c00390b349546112e7a2005c1eb611537027feb90dafcbbb444"><div class="ttname"><a href="namespacellvm_1_1MachO.html#a11849daa1b55a8c00390b349546112e7a2005c1eb611537027feb90dafcbbb444">llvm::MachO::All</a></div><div class="ttdeci">@ All</div><div class="ttdef"><b>Definition:</b> <a href="InterfaceFile_8h_source.html#l00073">InterfaceFile.h:73</a></div></div>
<div class="ttc" id="aEntryExitInstrumenter_8cpp_html_a3985f1f39349428d17f0d2b81ebc6349"><div class="ttname"><a href="EntryExitInstrumenter_8cpp.html#a3985f1f39349428d17f0d2b81ebc6349">runOnFunction</a></div><div class="ttdeci">static bool runOnFunction(Function &amp;F, bool PostInlining)</div><div class="ttdef"><b>Definition:</b> <a href="EntryExitInstrumenter_8cpp_source.html#l00069">EntryExitInstrumenter.cpp:69</a></div></div>
<div class="ttc" id="aclassllvm_1_1Type_html_acaf8e4c3e40e01e848c1fad5f05b81cd"><div class="ttname"><a href="classllvm_1_1Type.html#acaf8e4c3e40e01e848c1fad5f05b81cd">llvm::Type::getIntNTy</a></div><div class="ttdeci">static IntegerType * getIntNTy(LLVMContext &amp;C, unsigned N)</div><div class="ttdef"><b>Definition:</b> <a href="Type_8cpp_source.html#l00207">Type.cpp:207</a></div></div>
<div class="ttc" id="aclassllvm_1_1DenseMapBase_html_a65520b9c67759099e313d0f4e7b5ff9e"><div class="ttname"><a href="classllvm_1_1DenseMapBase.html#a65520b9c67759099e313d0f4e7b5ff9e">llvm::DenseMapBase&lt; DenseMap&lt; KeyT, ValueT, DenseMapInfo&lt; KeyT &gt;, llvm::detail::DenseMapPair&lt; KeyT, ValueT &gt; &gt;, KeyT, ValueT, DenseMapInfo&lt; KeyT &gt;, llvm::detail::DenseMapPair&lt; KeyT, ValueT &gt; &gt;::end</a></div><div class="ttdeci">iterator end()</div><div class="ttdef"><b>Definition:</b> <a href="DenseMap_8h_source.html#l00083">DenseMap.h:83</a></div></div>
<div class="ttc" id="anamespacellvm_1_1AMDGPU_1_1SendMsg_html_a8594419a4ddfad2c9a79279c490e466d"><div class="ttname"><a href="namespacellvm_1_1AMDGPU_1_1SendMsg.html#a8594419a4ddfad2c9a79279c490e466d">llvm::AMDGPU::SendMsg::Op</a></div><div class="ttdeci">Op</div><div class="ttdef"><b>Definition:</b> <a href="SIDefines_8h_source.html#l00314">SIDefines.h:314</a></div></div>
<div class="ttc" id="aclassllvm_1_1PreservedAnalyses_html_a1258a1ff55557c27684010ebd7283712"><div class="ttname"><a href="classllvm_1_1PreservedAnalyses.html#a1258a1ff55557c27684010ebd7283712">llvm::PreservedAnalyses::all</a></div><div class="ttdeci">static PreservedAnalyses all()</div><div class="ttdoc">Construct a special preserved set that preserves all passes.</div><div class="ttdef"><b>Definition:</b> <a href="PassManager_8h_source.html#l00161">PassManager.h:161</a></div></div>
<div class="ttc" id="astructllvm_1_1SectionName_html"><div class="ttname"><a href="structllvm_1_1SectionName.html">llvm::SectionName</a></div><div class="ttdef"><b>Definition:</b> <a href="DWARFSection_8h_source.html#l00021">DWARFSection.h:21</a></div></div>
<div class="ttc" id="aAArch64Disassembler_8cpp_html_abdb086b34295fb7aa09493c62d798465"><div class="ttname"><a href="AArch64Disassembler_8cpp.html#abdb086b34295fb7aa09493c62d798465">Success</a></div><div class="ttdeci">#define Success</div><div class="ttdef"><b>Definition:</b> <a href="AArch64Disassembler_8cpp_source.html#l00261">AArch64Disassembler.cpp:261</a></div></div>
<div class="ttc" id="aclassllvm_1_1AtomicRMWInst_html_a461cfbbb5c7a57ab73210498923cf615a660a31179bfecd737a256372e5fd6122"><div class="ttname"><a href="classllvm_1_1AtomicRMWInst.html#a461cfbbb5c7a57ab73210498923cf615a660a31179bfecd737a256372e5fd6122">llvm::AtomicRMWInst::And</a></div><div class="ttdeci">@ And</div><div class="ttdoc">*p = old &amp; v</div><div class="ttdef"><b>Definition:</b> <a href="Instructions_8h_source.html#l00746">Instructions.h:746</a></div></div>
<div class="ttc" id="aclassllvm_1_1TypeSize_html"><div class="ttname"><a href="classllvm_1_1TypeSize.html">llvm::TypeSize</a></div><div class="ttdef"><b>Definition:</b> <a href="TypeSize_8h_source.html#l00417">TypeSize.h:417</a></div></div>
<div class="ttc" id="aFunction_8h_html"><div class="ttname"><a href="Function_8h.html">Function.h</a></div></div>
<div class="ttc" id="aclassllvm_1_1Type_html_adc01a7457de85fc52a3bb860d7e1c6a4"><div class="ttname"><a href="classllvm_1_1Type.html#adc01a7457de85fc52a3bb860d7e1c6a4">llvm::Type::getPointerTo</a></div><div class="ttdeci">PointerType * getPointerTo(unsigned AddrSpace=0) const</div><div class="ttdoc">Return a pointer to the current type.</div><div class="ttdef"><b>Definition:</b> <a href="Type_8cpp_source.html#l00738">Type.cpp:738</a></div></div>
<div class="ttc" id="aclassllvm_1_1TargetLibraryInfo_html"><div class="ttname"><a href="classllvm_1_1TargetLibraryInfo.html">llvm::TargetLibraryInfo</a></div><div class="ttdoc">Provides information about what library functions are available for the current target.</div><div class="ttdef"><b>Definition:</b> <a href="TargetLibraryInfo_8h_source.html#l00219">TargetLibraryInfo.h:219</a></div></div>
<div class="ttc" id="aREADME__P9_8txt_html_a0afe4617fad145d6ced5a18fd739cf06"><div class="ttname"><a href="README__P9_8txt.html#a0afe4617fad145d6ced5a18fd739cf06">Unordered</a></div><div class="ttdeci">QP Compare Ordered Unordered</div><div class="ttdef"><b>Definition:</b> <a href="README__P9_8txt_source.html#l00297">README_P9.txt:299</a></div></div>
<div class="ttc" id="aThreadSanitizer_8cpp_html_af0781d5911a70fc919235ef56d03697c"><div class="ttname"><a href="ThreadSanitizer_8cpp.html#af0781d5911a70fc919235ef56d03697c">ClDistinguishVolatile</a></div><div class="ttdeci">static cl::opt&lt; bool &gt; ClDistinguishVolatile(&quot;tsan-distinguish-volatile&quot;, cl::init(false), cl::desc(&quot;Emit special instrumentation for accesses to volatiles&quot;), cl::Hidden)</div></div>
<div class="ttc" id="anamespacellvm_1_1jitlink_html_adb322dc6826cf005531ccfdf666260fda7a1920d61156abc05a60135aefe8bc67"><div class="ttname"><a href="namespacellvm_1_1jitlink.html#adb322dc6826cf005531ccfdf666260fda7a1920d61156abc05a60135aefe8bc67">llvm::jitlink::Scope::Default</a></div><div class="ttdeci">@ Default</div></div>
<div class="ttc" id="anamespacellvm_html_a50e3b943e26ec60c2aa24a7ff43a2d17"><div class="ttname"><a href="namespacellvm.html#a50e3b943e26ec60c2aa24a7ff43a2d17">llvm::getInstrProfSectionName</a></div><div class="ttdeci">std::string getInstrProfSectionName(InstrProfSectKind IPSK, Triple::ObjectFormatType OF, bool AddSegmentInfo=true)</div><div class="ttdoc">Return the name of the profile section corresponding to IPSK.</div><div class="ttdef"><b>Definition:</b> <a href="InstrProf_8cpp_source.html#l00175">InstrProf.cpp:175</a></div></div>
<div class="ttc" id="aclassllvm_1_1AttributeList_html_af5dcb6d3da4b30a7d21c9fb39bbf1a68a895001b186ed51e1cb7a256dbd3545f8"><div class="ttname"><a href="classllvm_1_1AttributeList.html#af5dcb6d3da4b30a7d21c9fb39bbf1a68a895001b186ed51e1cb7a256dbd3545f8">llvm::AttributeList::FunctionIndex</a></div><div class="ttdeci">@ FunctionIndex</div><div class="ttdef"><b>Definition:</b> <a href="Attributes_8h_source.html#l00402">Attributes.h:402</a></div></div>
<div class="ttc" id="aInstructions_8h_html"><div class="ttname"><a href="Instructions_8h.html">Instructions.h</a></div></div>
<div class="ttc" id="aSmallVector_8h_html"><div class="ttname"><a href="SmallVector_8h.html">SmallVector.h</a></div></div>
<div class="ttc" id="aModuleUtils_8h_html"><div class="ttname"><a href="ModuleUtils_8h.html">ModuleUtils.h</a></div></div>
<div class="ttc" id="aEscapeEnumerator_8h_html"><div class="ttname"><a href="EscapeEnumerator_8h.html">EscapeEnumerator.h</a></div></div>
<div class="ttc" id="aclassllvm_1_1FunctionCallee_html"><div class="ttname"><a href="classllvm_1_1FunctionCallee.html">llvm::FunctionCallee</a></div><div class="ttdoc">A handy container for a FunctionType+Callee-pointer pair, which can be passed around as a single enti...</div><div class="ttdef"><b>Definition:</b> <a href="DerivedTypes_8h_source.html#l00164">DerivedTypes.h:164</a></div></div>
<div class="ttc" id="aThreadSanitizer_8cpp_html_af52cc2514853312faacc08298c81375b"><div class="ttname"><a href="ThreadSanitizer_8cpp.html#af52cc2514853312faacc08298c81375b">tsan</a></div><div class="ttdeci">tsan</div><div class="ttdef"><b>Definition:</b> <a href="ThreadSanitizer_8cpp_source.html#l00219">ThreadSanitizer.cpp:219</a></div></div>
<div class="ttc" id="aclassllvm_1_1SmallVectorImpl_html"><div class="ttname"><a href="classllvm_1_1SmallVectorImpl.html">llvm::SmallVectorImpl&lt; Instruction * &gt;</a></div></div>
<div class="ttc" id="aclassllvm_1_1AnalysisManager_html"><div class="ttname"><a href="classllvm_1_1AnalysisManager.html">llvm::AnalysisManager</a></div><div class="ttdoc">A container for analyses that lazily runs them and caches their results.</div><div class="ttdef"><b>Definition:</b> <a href="PassManager_8h_source.html#l00615">PassManager.h:615</a></div></div>
<div class="ttc" id="aclassllvm_1_1FunctionPass_html"><div class="ttname"><a href="classllvm_1_1FunctionPass.html">llvm::FunctionPass</a></div><div class="ttdoc">FunctionPass class - This class is used to implement most global optimizations.</div><div class="ttdef"><b>Definition:</b> <a href="Pass_8h_source.html#l00298">Pass.h:298</a></div></div>
<div class="ttc" id="aclassllvm_1_1CallInst_html"><div class="ttname"><a href="classllvm_1_1CallInst.html">llvm::CallInst</a></div><div class="ttdoc">This class represents a function call, abstracting a target machine's calling convention.</div><div class="ttdef"><b>Definition:</b> <a href="Instructions_8h_source.html#l01475">Instructions.h:1475</a></div></div>
<div class="ttc" id="aclassllvm_1_1AtomicRMWInst_html_a461cfbbb5c7a57ab73210498923cf615a4afdbe301c2ed66ac3752096b8962226"><div class="ttname"><a href="classllvm_1_1AtomicRMWInst.html#a461cfbbb5c7a57ab73210498923cf615a4afdbe301c2ed66ac3752096b8962226">llvm::AtomicRMWInst::LAST_BINOP</a></div><div class="ttdeci">@ LAST_BINOP</div><div class="ttdef"><b>Definition:</b> <a href="Instructions_8h_source.html#l00769">Instructions.h:769</a></div></div>
<div class="ttc" id="alib_2CodeGen_2README_8txt_html_a09776db24cf586ec9f1e18f3bae14099"><div class="ttname"><a href="lib_2CodeGen_2README_8txt.html#a09776db24cf586ec9f1e18f3bae14099">BB</a></div><div class="ttdeci">Common register allocation spilling lr str ldr sxth r3 ldr mla r4 can lr mov lr str ldr sxth r3 mla r4 and then merge mul and lr str ldr sxth r3 mla r4 It also increase the likelihood the store may become dead bb27 Successors according to LLVM BB</div><div class="ttdef"><b>Definition:</b> <a href="lib_2CodeGen_2README_8txt_source.html#l00039">README.txt:39</a></div></div>
<div class="ttc" id="aHexagonCommonGEP_8cpp_html_ad532e8710e50302e0a376b61c91fa91d"><div class="ttname"><a href="HexagonCommonGEP_8cpp.html#ad532e8710e50302e0a376b61c91fa91d">GEP</a></div><div class="ttdeci">Hexagon Common GEP</div><div class="ttdef"><b>Definition:</b> <a href="HexagonCommonGEP_8cpp_source.html#l00172">HexagonCommonGEP.cpp:172</a></div></div>
<div class="ttc" id="aclassllvm_1_1AnalysisUsage_html_ae5c60fd282ee894c87ea02c3f0fcb6d0"><div class="ttname"><a href="classllvm_1_1AnalysisUsage.html#ae5c60fd282ee894c87ea02c3f0fcb6d0">llvm::AnalysisUsage::addRequired</a></div><div class="ttdeci">AnalysisUsage &amp; addRequired()</div><div class="ttdef"><b>Definition:</b> <a href="PassAnalysisSupport_8h_source.html#l00075">PassAnalysisSupport.h:75</a></div></div>
<div class="ttc" id="aLLVMContext_8h_html"><div class="ttname"><a href="LLVMContext_8h.html">LLVMContext.h</a></div></div>
<div class="ttc" id="anamespacellvm_1_1AMDGPU_1_1HSAMD_1_1Kernel_1_1Key_html_a1958a762261549463a280bac3274d6d5"><div class="ttname"><a href="namespacellvm_1_1AMDGPU_1_1HSAMD_1_1Kernel_1_1Key.html#a1958a762261549463a280bac3274d6d5">llvm::AMDGPU::HSAMD::Kernel::Key::Args</a></div><div class="ttdeci">constexpr char Args[]</div><div class="ttdoc">Key for Kernel::Metadata::mArgs.</div><div class="ttdef"><b>Definition:</b> <a href="AMDGPUMetadata_8h_source.html#l00389">AMDGPUMetadata.h:389</a></div></div>
<div class="ttc" id="anamespacellvm_html_ac030f6d03b674c2d132fd54fb60c9f26"><div class="ttname"><a href="namespacellvm.html#ac030f6d03b674c2d132fd54fb60c9f26">llvm::appendToGlobalCtors</a></div><div class="ttdeci">void appendToGlobalCtors(Module &amp;M, Function *F, int Priority, Constant *Data=nullptr)</div><div class="ttdoc">Append F to the list of global ctors of module M with the given Priority.</div><div class="ttdef"><b>Definition:</b> <a href="ModuleUtils_8cpp_source.html#l00066">ModuleUtils.cpp:66</a></div></div>
<div class="ttc" id="astructllvm_1_1cl_1_1desc_html"><div class="ttname"><a href="structllvm_1_1cl_1_1desc.html">llvm::cl::desc</a></div><div class="ttdef"><b>Definition:</b> <a href="CommandLine_8h_source.html#l00414">CommandLine.h:414</a></div></div>
<div class="ttc" id="aThreadSanitizer_8cpp_html_a15cf887d2d1af2b11ee47e28142ac131"><div class="ttname"><a href="ThreadSanitizer_8cpp.html#a15cf887d2d1af2b11ee47e28142ac131">isVtableAccess</a></div><div class="ttdeci">static bool isVtableAccess(Instruction *I)</div><div class="ttdef"><b>Definition:</b> <a href="ThreadSanitizer_8cpp_source.html#l00402">ThreadSanitizer.cpp:402</a></div></div>
<div class="ttc" id="araw__ostream_8h_html"><div class="ttname"><a href="raw__ostream_8h.html">raw_ostream.h</a></div></div>
<div class="ttc" id="aBasicBlockUtils_8h_html"><div class="ttname"><a href="BasicBlockUtils_8h.html">BasicBlockUtils.h</a></div></div>
<div class="ttc" id="aInitializePasses_8h_html"><div class="ttname"><a href="InitializePasses_8h.html">InitializePasses.h</a></div></div>
<div class="ttc" id="aThreadSanitizer_8cpp_html_a7ffdf0ed8f4f0fd9b071c1bb28128a99"><div class="ttname"><a href="ThreadSanitizer_8cpp.html#a7ffdf0ed8f4f0fd9b071c1bb28128a99">kTsanInitName</a></div><div class="ttdeci">const char kTsanInitName[]</div><div class="ttdef"><b>Definition:</b> <a href="ThreadSanitizer_8cpp_source.html#l00101">ThreadSanitizer.cpp:101</a></div></div>
<div class="ttc" id="aclassllvm_1_1Value_html"><div class="ttname"><a href="classllvm_1_1Value.html">llvm::Value</a></div><div class="ttdoc">LLVM Value Representation.</div><div class="ttdef"><b>Definition:</b> <a href="Value_8h_source.html#l00075">Value.h:75</a></div></div>
<div class="ttc" id="aclassllvm_1_1AtomicCmpXchgInst_html"><div class="ttname"><a href="classllvm_1_1AtomicCmpXchgInst.html">llvm::AtomicCmpXchgInst</a></div><div class="ttdoc">An instruction that atomically checks whether a specified value is in a memory location,...</div><div class="ttdef"><b>Definition:</b> <a href="Instructions_8h_source.html#l00521">Instructions.h:521</a></div></div>
<div class="ttc" id="anamespacellvm_html_a861469feb87da036fbca0fbf498914b1"><div class="ttname"><a href="namespacellvm.html#a861469feb87da036fbca0fbf498914b1">llvm::initializeThreadSanitizerLegacyPassPass</a></div><div class="ttdeci">void initializeThreadSanitizerLegacyPassPass(PassRegistry &amp;)</div></div>
<div class="ttc" id="aDebug_8h_html"><div class="ttname"><a href="Debug_8h.html">Debug.h</a></div></div>
<div class="ttc" id="aclassllvm_1_1TargetLibraryAnalysis_html"><div class="ttname"><a href="classllvm_1_1TargetLibraryAnalysis.html">llvm::TargetLibraryAnalysis</a></div><div class="ttdoc">Analysis pass providing the TargetLibraryInfo.</div><div class="ttdef"><b>Definition:</b> <a href="TargetLibraryInfo_8h_source.html#l00438">TargetLibraryInfo.h:438</a></div></div>
<div class="ttc" id="anamespacellvm_1_1Intrinsic_html_a80add6b3b1cdaec560907995127adc16"><div class="ttname"><a href="namespacellvm_1_1Intrinsic.html#a80add6b3b1cdaec560907995127adc16">llvm::Intrinsic::ID</a></div><div class="ttdeci">unsigned ID</div><div class="ttdef"><b>Definition:</b> <a href="TargetTransformInfo_8h_source.html#l00038">TargetTransformInfo.h:38</a></div></div>
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated on Tue Feb 8 2022 04:54:45 for LLVM by&#160;<a href="http://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.8.20
</small></address>
</body>
</html>
