<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.20"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>LLVM: lib/Transforms/InstCombine/InstCombineSelect.cpp Source File</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<script type="text/x-mathjax-config">
  MathJax.Hub.Config({
    extensions: ["tex2jax.js"],
    jax: ["input/TeX","output/HTML-CSS"],
});
</script>
<script type="text/javascript" async="async" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.7/MathJax.js/MathJax.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">LLVM
   &#160;<span id="projectnumber">13.0.1</span>
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.20 -->
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',false,false,'search.php','Search');
});
/* @license-end */</script>
<div id="main-nav"></div>
<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="dir_97aefd0d527b934f1d99a682da8fe6a9.html">lib</a></li><li class="navelem"><a class="el" href="dir_a72932e0778af28115095468f6286ff8.html">Transforms</a></li><li class="navelem"><a class="el" href="dir_99567d9c0c7f3685f25b19ecc341a865.html">InstCombine</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="headertitle">
<div class="title">InstCombineSelect.cpp</div>  </div>
</div><!--header-->
<div class="contents">
<a href="InstCombineSelect_8cpp.html">Go to the documentation of this file.</a><div class="fragment"><div class="line"><a name="l00001"></a><span class="lineno">    1</span>&#160;<span class="comment">//===- InstCombineSelect.cpp ----------------------------------------------===//</span></div>
<div class="line"><a name="l00002"></a><span class="lineno">    2</span>&#160;<span class="comment">//</span></div>
<div class="line"><a name="l00003"></a><span class="lineno">    3</span>&#160;<span class="comment">// Part of the LLVM Project, under the Apache License v2.0 with LLVM Exceptions.</span></div>
<div class="line"><a name="l00004"></a><span class="lineno">    4</span>&#160;<span class="comment">// See https://llvm.org/LICENSE.txt for license information.</span></div>
<div class="line"><a name="l00005"></a><span class="lineno">    5</span>&#160;<span class="comment">// SPDX-License-Identifier: Apache-2.0 WITH LLVM-exception</span></div>
<div class="line"><a name="l00006"></a><span class="lineno">    6</span>&#160;<span class="comment">//</span></div>
<div class="line"><a name="l00007"></a><span class="lineno">    7</span>&#160;<span class="comment">//===----------------------------------------------------------------------===//</span></div>
<div class="line"><a name="l00008"></a><span class="lineno">    8</span>&#160;<span class="comment">//</span></div>
<div class="line"><a name="l00009"></a><span class="lineno">    9</span>&#160;<span class="comment">// This file implements the visitSelect function.</span></div>
<div class="line"><a name="l00010"></a><span class="lineno">   10</span>&#160;<span class="comment">//</span></div>
<div class="line"><a name="l00011"></a><span class="lineno">   11</span>&#160;<span class="comment">//===----------------------------------------------------------------------===//</span></div>
<div class="line"><a name="l00012"></a><span class="lineno">   12</span>&#160; </div>
<div class="line"><a name="l00013"></a><span class="lineno">   13</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="InstCombineInternal_8h.html">InstCombineInternal.h</a>&quot;</span></div>
<div class="line"><a name="l00014"></a><span class="lineno">   14</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="APInt_8h.html">llvm/ADT/APInt.h</a>&quot;</span></div>
<div class="line"><a name="l00015"></a><span class="lineno">   15</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="Optional_8h.html">llvm/ADT/Optional.h</a>&quot;</span></div>
<div class="line"><a name="l00016"></a><span class="lineno">   16</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="STLExtras_8h.html">llvm/ADT/STLExtras.h</a>&quot;</span></div>
<div class="line"><a name="l00017"></a><span class="lineno">   17</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="SmallVector_8h.html">llvm/ADT/SmallVector.h</a>&quot;</span></div>
<div class="line"><a name="l00018"></a><span class="lineno">   18</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="AssumptionCache_8h.html">llvm/Analysis/AssumptionCache.h</a>&quot;</span></div>
<div class="line"><a name="l00019"></a><span class="lineno">   19</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="CmpInstAnalysis_8h.html">llvm/Analysis/CmpInstAnalysis.h</a>&quot;</span></div>
<div class="line"><a name="l00020"></a><span class="lineno">   20</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="InstructionSimplify_8h.html">llvm/Analysis/InstructionSimplify.h</a>&quot;</span></div>
<div class="line"><a name="l00021"></a><span class="lineno">   21</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="OverflowInstAnalysis_8h.html">llvm/Analysis/OverflowInstAnalysis.h</a>&quot;</span></div>
<div class="line"><a name="l00022"></a><span class="lineno">   22</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="ValueTracking_8h.html">llvm/Analysis/ValueTracking.h</a>&quot;</span></div>
<div class="line"><a name="l00023"></a><span class="lineno">   23</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="BasicBlock_8h.html">llvm/IR/BasicBlock.h</a>&quot;</span></div>
<div class="line"><a name="l00024"></a><span class="lineno">   24</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="Constant_8h.html">llvm/IR/Constant.h</a>&quot;</span></div>
<div class="line"><a name="l00025"></a><span class="lineno">   25</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="Constants_8h.html">llvm/IR/Constants.h</a>&quot;</span></div>
<div class="line"><a name="l00026"></a><span class="lineno">   26</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="DerivedTypes_8h.html">llvm/IR/DerivedTypes.h</a>&quot;</span></div>
<div class="line"><a name="l00027"></a><span class="lineno">   27</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="IRBuilder_8h.html">llvm/IR/IRBuilder.h</a>&quot;</span></div>
<div class="line"><a name="l00028"></a><span class="lineno">   28</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="InstrTypes_8h.html">llvm/IR/InstrTypes.h</a>&quot;</span></div>
<div class="line"><a name="l00029"></a><span class="lineno">   29</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="IR_2Instruction_8h.html">llvm/IR/Instruction.h</a>&quot;</span></div>
<div class="line"><a name="l00030"></a><span class="lineno">   30</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="Instructions_8h.html">llvm/IR/Instructions.h</a>&quot;</span></div>
<div class="line"><a name="l00031"></a><span class="lineno">   31</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="IntrinsicInst_8h.html">llvm/IR/IntrinsicInst.h</a>&quot;</span></div>
<div class="line"><a name="l00032"></a><span class="lineno">   32</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="Intrinsics_8h.html">llvm/IR/Intrinsics.h</a>&quot;</span></div>
<div class="line"><a name="l00033"></a><span class="lineno">   33</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="Operator_8h.html">llvm/IR/Operator.h</a>&quot;</span></div>
<div class="line"><a name="l00034"></a><span class="lineno">   34</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="PatternMatch_8h.html">llvm/IR/PatternMatch.h</a>&quot;</span></div>
<div class="line"><a name="l00035"></a><span class="lineno">   35</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="Type_8h.html">llvm/IR/Type.h</a>&quot;</span></div>
<div class="line"><a name="l00036"></a><span class="lineno">   36</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="User_8h.html">llvm/IR/User.h</a>&quot;</span></div>
<div class="line"><a name="l00037"></a><span class="lineno">   37</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="Value_8h.html">llvm/IR/Value.h</a>&quot;</span></div>
<div class="line"><a name="l00038"></a><span class="lineno">   38</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="Casting_8h.html">llvm/Support/Casting.h</a>&quot;</span></div>
<div class="line"><a name="l00039"></a><span class="lineno">   39</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="llvm_2Support_2ErrorHandling_8h.html">llvm/Support/ErrorHandling.h</a>&quot;</span></div>
<div class="line"><a name="l00040"></a><span class="lineno">   40</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="KnownBits_8h.html">llvm/Support/KnownBits.h</a>&quot;</span></div>
<div class="line"><a name="l00041"></a><span class="lineno">   41</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="InstCombineWorklist_8h.html">llvm/Transforms/InstCombine/InstCombineWorklist.h</a>&quot;</span></div>
<div class="line"><a name="l00042"></a><span class="lineno">   42</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="InstCombiner_8h.html">llvm/Transforms/InstCombine/InstCombiner.h</a>&quot;</span></div>
<div class="line"><a name="l00043"></a><span class="lineno">   43</span>&#160;<span class="preprocessor">#include &lt;cassert&gt;</span></div>
<div class="line"><a name="l00044"></a><span class="lineno">   44</span>&#160;<span class="preprocessor">#include &lt;utility&gt;</span></div>
<div class="line"><a name="l00045"></a><span class="lineno">   45</span>&#160; </div>
<div class="line"><a name="l00046"></a><span class="lineno">   46</span>&#160;<span class="keyword">using namespace </span><a class="code" href="namespacellvm.html">llvm</a>;</div>
<div class="line"><a name="l00047"></a><span class="lineno">   47</span>&#160;<span class="keyword">using namespace </span>PatternMatch;</div>
<div class="line"><a name="l00048"></a><span class="lineno">   48</span>&#160; </div>
<div class="line"><a name="l00049"></a><span class="lineno"><a class="line" href="InstCombineSelect_8cpp.html#ad78e062f62e0d6e453941fb4ca843e4d">   49</a></span>&#160;<span class="preprocessor">#define DEBUG_TYPE &quot;instcombine&quot;</span></div>
<div class="line"><a name="l00050"></a><span class="lineno">   50</span>&#160; </div>
<div class="line"><a name="l00051"></a><span class="lineno"><a class="line" href="InstCombineSelect_8cpp.html#ab9bb62fe1e1120856a8ab13089124a27">   51</a></span>&#160;<span class="keyword">static</span> <a class="code" href="classllvm_1_1Value.html">Value</a> *<a class="code" href="InstCombineSelect_8cpp.html#ab9bb62fe1e1120856a8ab13089124a27">createMinMax</a>(<a class="code" href="classllvm_1_1IRBuilder.html">InstCombiner::BuilderTy</a> &amp;<a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>,</div>
<div class="line"><a name="l00052"></a><span class="lineno">   52</span>&#160;                           <a class="code" href="namespacellvm.html#a6bf471c1030973649c2e426afc212097">SelectPatternFlavor</a> SPF, <a class="code" href="classllvm_1_1Value.html">Value</a> *<a class="code" href="README__ALTIVEC_8txt.html#a015846b6188ce15e08cd94c74a9df1a3">A</a>, <a class="code" href="classllvm_1_1Value.html">Value</a> *<a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a>) {</div>
<div class="line"><a name="l00053"></a><span class="lineno">   53</span>&#160;  <a class="code" href="classllvm_1_1CmpInst.html#a2be3583dac92a031fa1458d4d992c78b">CmpInst::Predicate</a> Pred = <a class="code" href="namespacellvm.html#a493bd393688f22538e5de34117e70236">getMinMaxPred</a>(SPF);</div>
<div class="line"><a name="l00054"></a><span class="lineno">   54</span>&#160;  <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(<a class="code" href="classllvm_1_1CmpInst.html#ad73f009e1b3b060bcdf6c2c1dd86600e">CmpInst::isIntPredicate</a>(Pred) &amp;&amp; <span class="stringliteral">&quot;Expected integer predicate&quot;</span>);</div>
<div class="line"><a name="l00055"></a><span class="lineno">   55</span>&#160;  <span class="keywordflow">return</span> <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.CreateSelect(<a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.CreateICmp(Pred, <a class="code" href="README__ALTIVEC_8txt.html#a015846b6188ce15e08cd94c74a9df1a3">A</a>, <a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a>), <a class="code" href="README__ALTIVEC_8txt.html#a015846b6188ce15e08cd94c74a9df1a3">A</a>, <a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a>);</div>
<div class="line"><a name="l00056"></a><span class="lineno">   56</span>&#160;}</div>
<div class="line"><a name="l00057"></a><span class="lineno">   57</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l00058"></a><span class="lineno">   58</span>&#160;<span class="comment">/// Replace a select operand based on an equality comparison with the identity</span></div>
<div class="line"><a name="l00059"></a><span class="lineno">   59</span>&#160;<span class="comment">/// constant of a binop.</span></div>
<div class="line"><a name="l00060"></a><span class="lineno"><a class="line" href="InstCombineSelect_8cpp.html#a23c4f37b63adadb274d8689a1784b1c4">   60</a></span>&#160;<span class="comment"></span><span class="keyword">static</span> <a class="code" href="classllvm_1_1Instruction.html">Instruction</a> *<a class="code" href="InstCombineSelect_8cpp.html#a23c4f37b63adadb274d8689a1784b1c4">foldSelectBinOpIdentity</a>(<a class="code" href="classllvm_1_1SelectInst.html">SelectInst</a> &amp;Sel,</div>
<div class="line"><a name="l00061"></a><span class="lineno">   61</span>&#160;                                            <span class="keyword">const</span> <a class="code" href="classllvm_1_1TargetLibraryInfo.html">TargetLibraryInfo</a> &amp;TLI,</div>
<div class="line"><a name="l00062"></a><span class="lineno">   62</span>&#160;                                            <a class="code" href="classllvm_1_1InstCombinerImpl.html">InstCombinerImpl</a> &amp;IC) {</div>
<div class="line"><a name="l00063"></a><span class="lineno">   63</span>&#160;  <span class="comment">// The select condition must be an equality compare with a constant operand.</span></div>
<div class="line"><a name="l00064"></a><span class="lineno">   64</span>&#160;  <a class="code" href="classllvm_1_1Value.html">Value</a> *<a class="code" href="ErlangGCPrinter_8cpp.html#a74b474c0616ab55c1d9487f11fd31d26">X</a>;</div>
<div class="line"><a name="l00065"></a><span class="lineno">   65</span>&#160;  <a class="code" href="classllvm_1_1Constant.html">Constant</a> *<a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a>;</div>
<div class="line"><a name="l00066"></a><span class="lineno">   66</span>&#160;  <a class="code" href="classllvm_1_1CmpInst.html#a2be3583dac92a031fa1458d4d992c78b">CmpInst::Predicate</a> Pred;</div>
<div class="line"><a name="l00067"></a><span class="lineno">   67</span>&#160;  <span class="keywordflow">if</span> (!<a class="code" href="namespacellvm_1_1PatternMatch.html#a25d956d9e0beadd47ce4bc255dfa811d">match</a>(Sel.<a class="code" href="classllvm_1_1SelectInst.html#a93a29cd4a753518a59c20c1b6ec88c76">getCondition</a>(), <a class="code" href="namespacellvm_1_1PatternMatch.html#a753e1338645ec04d045211b8a46d968d">m_Cmp</a>(Pred, <a class="code" href="namespacellvm_1_1PatternMatch.html#a24bca8838396aa81b87de8e7ac774b19">m_Value</a>(<a class="code" href="ErlangGCPrinter_8cpp.html#a74b474c0616ab55c1d9487f11fd31d26">X</a>), <a class="code" href="namespacellvm_1_1PatternMatch.html#aadd209ba7e1bfa8113a609e09a7fe62f">m_Constant</a>(<a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a>))))</div>
<div class="line"><a name="l00068"></a><span class="lineno">   68</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l00069"></a><span class="lineno">   69</span>&#160; </div>
<div class="line"><a name="l00070"></a><span class="lineno">   70</span>&#160;  <span class="keywordtype">bool</span> IsEq;</div>
<div class="line"><a name="l00071"></a><span class="lineno">   71</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1ICmpInst.html#aaaeded5d0cab77f531b294638459aca5">ICmpInst::isEquality</a>(Pred))</div>
<div class="line"><a name="l00072"></a><span class="lineno">   72</span>&#160;    IsEq = Pred == <a class="code" href="classllvm_1_1CmpInst.html#a2be3583dac92a031fa1458d4d992c78baa719225e2de4059f93fd3209e1f48218">ICmpInst::ICMP_EQ</a>;</div>
<div class="line"><a name="l00073"></a><span class="lineno">   73</span>&#160;  <span class="keywordflow">else</span> <span class="keywordflow">if</span> (Pred == <a class="code" href="classllvm_1_1CmpInst.html#a2be3583dac92a031fa1458d4d992c78ba024db78a5ed74f64666f3ca4955e6eca">FCmpInst::FCMP_OEQ</a>)</div>
<div class="line"><a name="l00074"></a><span class="lineno">   74</span>&#160;    IsEq = <span class="keyword">true</span>;</div>
<div class="line"><a name="l00075"></a><span class="lineno">   75</span>&#160;  <span class="keywordflow">else</span> <span class="keywordflow">if</span> (Pred == <a class="code" href="classllvm_1_1CmpInst.html#a2be3583dac92a031fa1458d4d992c78bad601460c9371d0f0ada5ae006bdba2bd">FCmpInst::FCMP_UNE</a>)</div>
<div class="line"><a name="l00076"></a><span class="lineno">   76</span>&#160;    IsEq = <span class="keyword">false</span>;</div>
<div class="line"><a name="l00077"></a><span class="lineno">   77</span>&#160;  <span class="keywordflow">else</span></div>
<div class="line"><a name="l00078"></a><span class="lineno">   78</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l00079"></a><span class="lineno">   79</span>&#160; </div>
<div class="line"><a name="l00080"></a><span class="lineno">   80</span>&#160;  <span class="comment">// A select operand must be a binop.</span></div>
<div class="line"><a name="l00081"></a><span class="lineno">   81</span>&#160;  <a class="code" href="classllvm_1_1BinaryOperator.html">BinaryOperator</a> *BO;</div>
<div class="line"><a name="l00082"></a><span class="lineno">   82</span>&#160;  <span class="keywordflow">if</span> (!<a class="code" href="namespacellvm_1_1PatternMatch.html#a25d956d9e0beadd47ce4bc255dfa811d">match</a>(Sel.<a class="code" href="classllvm_1_1User.html#abe1de1520a21f77ac57cc210bf0fb0b4">getOperand</a>(IsEq ? 1 : 2), <a class="code" href="namespacellvm_1_1PatternMatch.html#a43ac4fbaaf63a88eb5ac05f6d3e5649c">m_BinOp</a>(BO)))</div>
<div class="line"><a name="l00083"></a><span class="lineno">   83</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l00084"></a><span class="lineno">   84</span>&#160; </div>
<div class="line"><a name="l00085"></a><span class="lineno">   85</span>&#160;  <span class="comment">// The compare constant must be the identity constant for that binop.</span></div>
<div class="line"><a name="l00086"></a><span class="lineno">   86</span>&#160;  <span class="comment">// If this a floating-point compare with 0.0, any zero constant will do.</span></div>
<div class="line"><a name="l00087"></a><span class="lineno">   87</span>&#160;  <a class="code" href="classllvm_1_1Type.html">Type</a> *Ty = BO-&gt;<a class="code" href="classllvm_1_1Value.html#a6393a2d4fe7e10b28a0dcc35f881567b">getType</a>();</div>
<div class="line"><a name="l00088"></a><span class="lineno">   88</span>&#160;  <a class="code" href="classllvm_1_1Constant.html">Constant</a> *IdC = <a class="code" href="classllvm_1_1ConstantExpr.html#a0bd26d8a07f226878a618ece056ff10c">ConstantExpr::getBinOpIdentity</a>(BO-&gt;<a class="code" href="classllvm_1_1BinaryOperator.html#a31bf07f3f61525486633bc1d0bbaf029">getOpcode</a>(), Ty, <span class="keyword">true</span>);</div>
<div class="line"><a name="l00089"></a><span class="lineno">   89</span>&#160;  <span class="keywordflow">if</span> (IdC != <a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a>) {</div>
<div class="line"><a name="l00090"></a><span class="lineno">   90</span>&#160;    <span class="keywordflow">if</span> (!IdC || !<a class="code" href="classllvm_1_1CmpInst.html#a7bd850492d35a34f0fe419e5555997a9">CmpInst::isFPPredicate</a>(Pred))</div>
<div class="line"><a name="l00091"></a><span class="lineno">   91</span>&#160;      <span class="keywordflow">return</span> <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l00092"></a><span class="lineno">   92</span>&#160;    <span class="keywordflow">if</span> (!<a class="code" href="namespacellvm_1_1PatternMatch.html#a25d956d9e0beadd47ce4bc255dfa811d">match</a>(IdC, <a class="code" href="namespacellvm_1_1PatternMatch.html#ab9370b798ae530641518075b0832723a">m_AnyZeroFP</a>()) || !<a class="code" href="namespacellvm_1_1PatternMatch.html#a25d956d9e0beadd47ce4bc255dfa811d">match</a>(<a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a>, <a class="code" href="namespacellvm_1_1PatternMatch.html#ab9370b798ae530641518075b0832723a">m_AnyZeroFP</a>()))</div>
<div class="line"><a name="l00093"></a><span class="lineno">   93</span>&#160;      <span class="keywordflow">return</span> <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l00094"></a><span class="lineno">   94</span>&#160;  }</div>
<div class="line"><a name="l00095"></a><span class="lineno">   95</span>&#160; </div>
<div class="line"><a name="l00096"></a><span class="lineno">   96</span>&#160;  <span class="comment">// Last, match the compare variable operand with a binop operand.</span></div>
<div class="line"><a name="l00097"></a><span class="lineno">   97</span>&#160;  <a class="code" href="classllvm_1_1Value.html">Value</a> *<a class="code" href="OcamlGCPrinter_8cpp.html#afcf2f797ed287a723263583c9b1c1bce">Y</a>;</div>
<div class="line"><a name="l00098"></a><span class="lineno">   98</span>&#160;  <span class="keywordflow">if</span> (!BO-&gt;<a class="code" href="classllvm_1_1Instruction.html#a55743bd32282bf6f87aeb49237b1fb68">isCommutative</a>() &amp;&amp; !<a class="code" href="namespacellvm_1_1PatternMatch.html#a25d956d9e0beadd47ce4bc255dfa811d">match</a>(BO, <a class="code" href="namespacellvm_1_1PatternMatch.html#a43ac4fbaaf63a88eb5ac05f6d3e5649c">m_BinOp</a>(<a class="code" href="namespacellvm_1_1PatternMatch.html#a24bca8838396aa81b87de8e7ac774b19">m_Value</a>(<a class="code" href="OcamlGCPrinter_8cpp.html#afcf2f797ed287a723263583c9b1c1bce">Y</a>), <a class="code" href="namespacellvm_1_1PatternMatch.html#a2d9861feadd3a09792967a012559e7b2">m_Specific</a>(<a class="code" href="ErlangGCPrinter_8cpp.html#a74b474c0616ab55c1d9487f11fd31d26">X</a>))))</div>
<div class="line"><a name="l00099"></a><span class="lineno">   99</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l00100"></a><span class="lineno">  100</span>&#160;  <span class="keywordflow">if</span> (!<a class="code" href="namespacellvm_1_1PatternMatch.html#a25d956d9e0beadd47ce4bc255dfa811d">match</a>(BO, <a class="code" href="namespacellvm_1_1PatternMatch.html#ac56cd25f664c1497623d26158a6c5997">m_c_BinOp</a>(<a class="code" href="namespacellvm_1_1PatternMatch.html#a24bca8838396aa81b87de8e7ac774b19">m_Value</a>(<a class="code" href="OcamlGCPrinter_8cpp.html#afcf2f797ed287a723263583c9b1c1bce">Y</a>), <a class="code" href="namespacellvm_1_1PatternMatch.html#a2d9861feadd3a09792967a012559e7b2">m_Specific</a>(<a class="code" href="ErlangGCPrinter_8cpp.html#a74b474c0616ab55c1d9487f11fd31d26">X</a>))))</div>
<div class="line"><a name="l00101"></a><span class="lineno">  101</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l00102"></a><span class="lineno">  102</span>&#160; </div>
<div class="line"><a name="l00103"></a><span class="lineno">  103</span>&#160;  <span class="comment">// +0.0 compares equal to -0.0, and so it does not behave as required for this</span></div>
<div class="line"><a name="l00104"></a><span class="lineno">  104</span>&#160;  <span class="comment">// transform. Bail out if we can not exclude that possibility.</span></div>
<div class="line"><a name="l00105"></a><span class="lineno">  105</span>&#160;  <span class="keywordflow">if</span> (isa&lt;FPMathOperator&gt;(BO))</div>
<div class="line"><a name="l00106"></a><span class="lineno">  106</span>&#160;    <span class="keywordflow">if</span> (!BO-&gt;<a class="code" href="classllvm_1_1Instruction.html#a3e06c3da2e05f581e6beee145fb2cd65">hasNoSignedZeros</a>() &amp;&amp; !<a class="code" href="namespacellvm.html#ae23e16c67aeaf23c68bf86fe04df42ee">CannotBeNegativeZero</a>(<a class="code" href="OcamlGCPrinter_8cpp.html#afcf2f797ed287a723263583c9b1c1bce">Y</a>, &amp;TLI))</div>
<div class="line"><a name="l00107"></a><span class="lineno">  107</span>&#160;      <span class="keywordflow">return</span> <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l00108"></a><span class="lineno">  108</span>&#160; </div>
<div class="line"><a name="l00109"></a><span class="lineno">  109</span>&#160;  <span class="comment">// BO = binop Y, X</span></div>
<div class="line"><a name="l00110"></a><span class="lineno">  110</span>&#160;  <span class="comment">// S = { select (cmp eq X, C), BO, ? } or { select (cmp ne X, C), ?, BO }</span></div>
<div class="line"><a name="l00111"></a><span class="lineno">  111</span>&#160;  <span class="comment">// =&gt;</span></div>
<div class="line"><a name="l00112"></a><span class="lineno">  112</span>&#160;  <span class="comment">// S = { select (cmp eq X, C),  Y, ? } or { select (cmp ne X, C), ?,  Y }</span></div>
<div class="line"><a name="l00113"></a><span class="lineno">  113</span>&#160;  <span class="keywordflow">return</span> IC.<a class="code" href="classllvm_1_1InstCombinerImpl.html#a250c29896fae99b9235d23f7254b8809">replaceOperand</a>(Sel, IsEq ? 1 : 2, <a class="code" href="OcamlGCPrinter_8cpp.html#afcf2f797ed287a723263583c9b1c1bce">Y</a>);</div>
<div class="line"><a name="l00114"></a><span class="lineno">  114</span>&#160;}</div>
<div class="line"><a name="l00115"></a><span class="lineno">  115</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l00116"></a><span class="lineno">  116</span>&#160;<span class="comment">/// This folds:</span></div>
<div class="line"><a name="l00117"></a><span class="lineno">  117</span>&#160;<span class="comment">///  select (icmp eq (and X, C1)), TC, FC</span></div>
<div class="line"><a name="l00118"></a><span class="lineno">  118</span>&#160;<span class="comment">///    iff C1 is a power 2 and the difference between TC and FC is a power-of-2.</span></div>
<div class="line"><a name="l00119"></a><span class="lineno">  119</span>&#160;<span class="comment">/// To something like:</span></div>
<div class="line"><a name="l00120"></a><span class="lineno">  120</span>&#160;<span class="comment">///  (shr (and (X, C1)), (log2(C1) - log2(TC-FC))) + FC</span></div>
<div class="line"><a name="l00121"></a><span class="lineno">  121</span>&#160;<span class="comment">/// Or:</span></div>
<div class="line"><a name="l00122"></a><span class="lineno">  122</span>&#160;<span class="comment">///  (shl (and (X, C1)), (log2(TC-FC) - log2(C1))) + FC</span></div>
<div class="line"><a name="l00123"></a><span class="lineno">  123</span>&#160;<span class="comment">/// With some variations depending if FC is larger than TC, or the shift</span></div>
<div class="line"><a name="l00124"></a><span class="lineno">  124</span>&#160;<span class="comment">/// isn&#39;t needed, or the bit widths don&#39;t match.</span></div>
<div class="line"><a name="l00125"></a><span class="lineno"><a class="line" href="InstCombineSelect_8cpp.html#a81f942049771fb3a626f9fa4ec5f0f25">  125</a></span>&#160;<span class="comment"></span><span class="keyword">static</span> <a class="code" href="classllvm_1_1Value.html">Value</a> *<a class="code" href="InstCombineSelect_8cpp.html#a81f942049771fb3a626f9fa4ec5f0f25">foldSelectICmpAnd</a>(<a class="code" href="classllvm_1_1SelectInst.html">SelectInst</a> &amp;Sel, <a class="code" href="classllvm_1_1ICmpInst.html">ICmpInst</a> *Cmp,</div>
<div class="line"><a name="l00126"></a><span class="lineno">  126</span>&#160;                                <a class="code" href="classllvm_1_1IRBuilder.html">InstCombiner::BuilderTy</a> &amp;<a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>) {</div>
<div class="line"><a name="l00127"></a><span class="lineno">  127</span>&#160;  <span class="keyword">const</span> <a class="code" href="classllvm_1_1APInt.html">APInt</a> *SelTC, *SelFC;</div>
<div class="line"><a name="l00128"></a><span class="lineno">  128</span>&#160;  <span class="keywordflow">if</span> (!<a class="code" href="namespacellvm_1_1PatternMatch.html#a25d956d9e0beadd47ce4bc255dfa811d">match</a>(Sel.<a class="code" href="classllvm_1_1SelectInst.html#a483700f6bf3ac62445850d768cf188f6">getTrueValue</a>(), <a class="code" href="namespacellvm_1_1PatternMatch.html#aac9e78b3aa02ec087c4621358f506718">m_APInt</a>(SelTC)) ||</div>
<div class="line"><a name="l00129"></a><span class="lineno">  129</span>&#160;      !<a class="code" href="namespacellvm_1_1PatternMatch.html#a25d956d9e0beadd47ce4bc255dfa811d">match</a>(Sel.<a class="code" href="classllvm_1_1SelectInst.html#a59b0ee738ec17984b97128e7f1594db3">getFalseValue</a>(), <a class="code" href="namespacellvm_1_1PatternMatch.html#aac9e78b3aa02ec087c4621358f506718">m_APInt</a>(SelFC)))</div>
<div class="line"><a name="l00130"></a><span class="lineno">  130</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l00131"></a><span class="lineno">  131</span>&#160; </div>
<div class="line"><a name="l00132"></a><span class="lineno">  132</span>&#160;  <span class="comment">// If this is a vector select, we need a vector compare.</span></div>
<div class="line"><a name="l00133"></a><span class="lineno">  133</span>&#160;  <a class="code" href="classllvm_1_1Type.html">Type</a> *SelType = Sel.<a class="code" href="classllvm_1_1Value.html#a6393a2d4fe7e10b28a0dcc35f881567b">getType</a>();</div>
<div class="line"><a name="l00134"></a><span class="lineno">  134</span>&#160;  <span class="keywordflow">if</span> (SelType-&gt;<a class="code" href="classllvm_1_1Type.html#a1bc022868b23918efa44df511f4d5b61">isVectorTy</a>() != Cmp-&gt;<a class="code" href="classllvm_1_1Value.html#a6393a2d4fe7e10b28a0dcc35f881567b">getType</a>()-&gt;<a class="code" href="classllvm_1_1Type.html#a1bc022868b23918efa44df511f4d5b61">isVectorTy</a>())</div>
<div class="line"><a name="l00135"></a><span class="lineno">  135</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l00136"></a><span class="lineno">  136</span>&#160; </div>
<div class="line"><a name="l00137"></a><span class="lineno">  137</span>&#160;  <a class="code" href="classllvm_1_1Value.html">Value</a> *V;</div>
<div class="line"><a name="l00138"></a><span class="lineno">  138</span>&#160;  <a class="code" href="classllvm_1_1APInt.html">APInt</a> AndMask;</div>
<div class="line"><a name="l00139"></a><span class="lineno">  139</span>&#160;  <span class="keywordtype">bool</span> CreateAnd = <span class="keyword">false</span>;</div>
<div class="line"><a name="l00140"></a><span class="lineno">  140</span>&#160;  <a class="code" href="classllvm_1_1CmpInst.html#a2be3583dac92a031fa1458d4d992c78b">ICmpInst::Predicate</a> Pred = Cmp-&gt;<a class="code" href="classllvm_1_1CmpInst.html#aa7414ba9f658ff1287d22a4b8fe81bcb">getPredicate</a>();</div>
<div class="line"><a name="l00141"></a><span class="lineno">  141</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1ICmpInst.html#aaaeded5d0cab77f531b294638459aca5">ICmpInst::isEquality</a>(Pred)) {</div>
<div class="line"><a name="l00142"></a><span class="lineno">  142</span>&#160;    <span class="keywordflow">if</span> (!<a class="code" href="namespacellvm_1_1PatternMatch.html#a25d956d9e0beadd47ce4bc255dfa811d">match</a>(Cmp-&gt;<a class="code" href="classllvm_1_1User.html#abe1de1520a21f77ac57cc210bf0fb0b4">getOperand</a>(1), <a class="code" href="namespacellvm_1_1PatternMatch.html#ae77be336e228cf9aa00709a8606dfb98">m_Zero</a>()))</div>
<div class="line"><a name="l00143"></a><span class="lineno">  143</span>&#160;      <span class="keywordflow">return</span> <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l00144"></a><span class="lineno">  144</span>&#160; </div>
<div class="line"><a name="l00145"></a><span class="lineno">  145</span>&#160;    V = Cmp-&gt;<a class="code" href="classllvm_1_1User.html#abe1de1520a21f77ac57cc210bf0fb0b4">getOperand</a>(0);</div>
<div class="line"><a name="l00146"></a><span class="lineno">  146</span>&#160;    <span class="keyword">const</span> <a class="code" href="classllvm_1_1APInt.html">APInt</a> *AndRHS;</div>
<div class="line"><a name="l00147"></a><span class="lineno">  147</span>&#160;    <span class="keywordflow">if</span> (!<a class="code" href="namespacellvm_1_1PatternMatch.html#a25d956d9e0beadd47ce4bc255dfa811d">match</a>(V, <a class="code" href="namespacellvm_1_1PatternMatch.html#a427435d4da769ae680a8e77ef89520aa">m_And</a>(<a class="code" href="namespacellvm_1_1PatternMatch.html#a24bca8838396aa81b87de8e7ac774b19">m_Value</a>(), <a class="code" href="namespacellvm_1_1PatternMatch.html#ad5e60756e331a97669d11b5c9d8691a2">m_Power2</a>(AndRHS))))</div>
<div class="line"><a name="l00148"></a><span class="lineno">  148</span>&#160;      <span class="keywordflow">return</span> <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l00149"></a><span class="lineno">  149</span>&#160; </div>
<div class="line"><a name="l00150"></a><span class="lineno">  150</span>&#160;    AndMask = *AndRHS;</div>
<div class="line"><a name="l00151"></a><span class="lineno">  151</span>&#160;  } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code" href="namespacellvm.html#ad4d2f143e181b60a4f70d791bbcba8b3">decomposeBitTestICmp</a>(Cmp-&gt;<a class="code" href="classllvm_1_1User.html#abe1de1520a21f77ac57cc210bf0fb0b4">getOperand</a>(0), Cmp-&gt;<a class="code" href="classllvm_1_1User.html#abe1de1520a21f77ac57cc210bf0fb0b4">getOperand</a>(1),</div>
<div class="line"><a name="l00152"></a><span class="lineno">  152</span>&#160;                                  Pred, V, AndMask)) {</div>
<div class="line"><a name="l00153"></a><span class="lineno">  153</span>&#160;    <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(<a class="code" href="classllvm_1_1ICmpInst.html#aaaeded5d0cab77f531b294638459aca5">ICmpInst::isEquality</a>(Pred) &amp;&amp; <span class="stringliteral">&quot;Not equality test?&quot;</span>);</div>
<div class="line"><a name="l00154"></a><span class="lineno">  154</span>&#160;    <span class="keywordflow">if</span> (!AndMask.<a class="code" href="classllvm_1_1APInt.html#ad1b0513de876d1c85cf6268ca21b2c86">isPowerOf2</a>())</div>
<div class="line"><a name="l00155"></a><span class="lineno">  155</span>&#160;      <span class="keywordflow">return</span> <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l00156"></a><span class="lineno">  156</span>&#160; </div>
<div class="line"><a name="l00157"></a><span class="lineno">  157</span>&#160;    CreateAnd = <span class="keyword">true</span>;</div>
<div class="line"><a name="l00158"></a><span class="lineno">  158</span>&#160;  } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00159"></a><span class="lineno">  159</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l00160"></a><span class="lineno">  160</span>&#160;  }</div>
<div class="line"><a name="l00161"></a><span class="lineno">  161</span>&#160; </div>
<div class="line"><a name="l00162"></a><span class="lineno">  162</span>&#160;  <span class="comment">// In general, when both constants are non-zero, we would need an offset to</span></div>
<div class="line"><a name="l00163"></a><span class="lineno">  163</span>&#160;  <span class="comment">// replace the select. This would require more instructions than we started</span></div>
<div class="line"><a name="l00164"></a><span class="lineno">  164</span>&#160;  <span class="comment">// with. But there&#39;s one special-case that we handle here because it can</span></div>
<div class="line"><a name="l00165"></a><span class="lineno">  165</span>&#160;  <span class="comment">// simplify/reduce the instructions.</span></div>
<div class="line"><a name="l00166"></a><span class="lineno">  166</span>&#160;  <a class="code" href="classllvm_1_1APInt.html">APInt</a> TC = *SelTC;</div>
<div class="line"><a name="l00167"></a><span class="lineno">  167</span>&#160;  <a class="code" href="classllvm_1_1APInt.html">APInt</a> <a class="code" href="namespaceR600__InstFlag.html#a23106439cc906be24dc8953eedd3940da8949a42ff4563a29d1e70e18338fd522">FC</a> = *SelFC;</div>
<div class="line"><a name="l00168"></a><span class="lineno">  168</span>&#160;  <span class="keywordflow">if</span> (!TC.<a class="code" href="classllvm_1_1APInt.html#aba0bb0cce2530e8403a18f1bbd6ae610">isNullValue</a>() &amp;&amp; !<a class="code" href="namespaceR600__InstFlag.html#a23106439cc906be24dc8953eedd3940da8949a42ff4563a29d1e70e18338fd522">FC</a>.isNullValue()) {</div>
<div class="line"><a name="l00169"></a><span class="lineno">  169</span>&#160;    <span class="comment">// If the select constants differ by exactly one bit and that&#39;s the same</span></div>
<div class="line"><a name="l00170"></a><span class="lineno">  170</span>&#160;    <span class="comment">// bit that is masked and checked by the select condition, the select can</span></div>
<div class="line"><a name="l00171"></a><span class="lineno">  171</span>&#160;    <span class="comment">// be replaced by bitwise logic to set/clear one bit of the constant result.</span></div>
<div class="line"><a name="l00172"></a><span class="lineno">  172</span>&#160;    <span class="keywordflow">if</span> (TC.<a class="code" href="classllvm_1_1APInt.html#a512fe2c15ea651294688eeec1341644c">getBitWidth</a>() != AndMask.<a class="code" href="classllvm_1_1APInt.html#a512fe2c15ea651294688eeec1341644c">getBitWidth</a>() || (TC ^ <a class="code" href="namespaceR600__InstFlag.html#a23106439cc906be24dc8953eedd3940da8949a42ff4563a29d1e70e18338fd522">FC</a>) != AndMask)</div>
<div class="line"><a name="l00173"></a><span class="lineno">  173</span>&#160;      <span class="keywordflow">return</span> <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l00174"></a><span class="lineno">  174</span>&#160;    <span class="keywordflow">if</span> (CreateAnd) {</div>
<div class="line"><a name="l00175"></a><span class="lineno">  175</span>&#160;      <span class="comment">// If we have to create an &#39;and&#39;, then we must kill the cmp to not</span></div>
<div class="line"><a name="l00176"></a><span class="lineno">  176</span>&#160;      <span class="comment">// increase the instruction count.</span></div>
<div class="line"><a name="l00177"></a><span class="lineno">  177</span>&#160;      <span class="keywordflow">if</span> (!Cmp-&gt;<a class="code" href="classllvm_1_1Value.html#a3a402430a1bbe70a9282dcb0e0b6a2cd">hasOneUse</a>())</div>
<div class="line"><a name="l00178"></a><span class="lineno">  178</span>&#160;        <span class="keywordflow">return</span> <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l00179"></a><span class="lineno">  179</span>&#160;      V = <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.CreateAnd(V, <a class="code" href="classllvm_1_1ConstantInt.html#a969709dd49c28865a482d8b870f87c46">ConstantInt::get</a>(SelType, AndMask));</div>
<div class="line"><a name="l00180"></a><span class="lineno">  180</span>&#160;    }</div>
<div class="line"><a name="l00181"></a><span class="lineno">  181</span>&#160;    <span class="keywordtype">bool</span> ExtraBitInTC = TC.<a class="code" href="classllvm_1_1APInt.html#a46a7cbf3724080a5f4f4c7e7a4551e26">ugt</a>(<a class="code" href="namespaceR600__InstFlag.html#a23106439cc906be24dc8953eedd3940da8949a42ff4563a29d1e70e18338fd522">FC</a>);</div>
<div class="line"><a name="l00182"></a><span class="lineno">  182</span>&#160;    <span class="keywordflow">if</span> (Pred == <a class="code" href="classllvm_1_1CmpInst.html#a2be3583dac92a031fa1458d4d992c78baa719225e2de4059f93fd3209e1f48218">ICmpInst::ICMP_EQ</a>) {</div>
<div class="line"><a name="l00183"></a><span class="lineno">  183</span>&#160;      <span class="comment">// If the masked bit in V is clear, clear or set the bit in the result:</span></div>
<div class="line"><a name="l00184"></a><span class="lineno">  184</span>&#160;      <span class="comment">// (V &amp; AndMaskC) == 0 ? TC : FC --&gt; (V &amp; AndMaskC) ^ TC</span></div>
<div class="line"><a name="l00185"></a><span class="lineno">  185</span>&#160;      <span class="comment">// (V &amp; AndMaskC) == 0 ? TC : FC --&gt; (V &amp; AndMaskC) | TC</span></div>
<div class="line"><a name="l00186"></a><span class="lineno">  186</span>&#160;      <a class="code" href="classllvm_1_1Constant.html">Constant</a> *<a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a> = <a class="code" href="classllvm_1_1ConstantInt.html#a969709dd49c28865a482d8b870f87c46">ConstantInt::get</a>(SelType, TC);</div>
<div class="line"><a name="l00187"></a><span class="lineno">  187</span>&#160;      <span class="keywordflow">return</span> ExtraBitInTC ? <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.CreateXor(V, <a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a>) : <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.CreateOr(V, <a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a>);</div>
<div class="line"><a name="l00188"></a><span class="lineno">  188</span>&#160;    }</div>
<div class="line"><a name="l00189"></a><span class="lineno">  189</span>&#160;    <span class="keywordflow">if</span> (Pred == <a class="code" href="classllvm_1_1CmpInst.html#a2be3583dac92a031fa1458d4d992c78bac17897ebf2f6a6986280fc3bdf28a30a">ICmpInst::ICMP_NE</a>) {</div>
<div class="line"><a name="l00190"></a><span class="lineno">  190</span>&#160;      <span class="comment">// If the masked bit in V is set, set or clear the bit in the result:</span></div>
<div class="line"><a name="l00191"></a><span class="lineno">  191</span>&#160;      <span class="comment">// (V &amp; AndMaskC) != 0 ? TC : FC --&gt; (V &amp; AndMaskC) | FC</span></div>
<div class="line"><a name="l00192"></a><span class="lineno">  192</span>&#160;      <span class="comment">// (V &amp; AndMaskC) != 0 ? TC : FC --&gt; (V &amp; AndMaskC) ^ FC</span></div>
<div class="line"><a name="l00193"></a><span class="lineno">  193</span>&#160;      <a class="code" href="classllvm_1_1Constant.html">Constant</a> *<a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a> = <a class="code" href="classllvm_1_1ConstantInt.html#a969709dd49c28865a482d8b870f87c46">ConstantInt::get</a>(SelType, <a class="code" href="namespaceR600__InstFlag.html#a23106439cc906be24dc8953eedd3940da8949a42ff4563a29d1e70e18338fd522">FC</a>);</div>
<div class="line"><a name="l00194"></a><span class="lineno">  194</span>&#160;      <span class="keywordflow">return</span> ExtraBitInTC ? <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.CreateOr(V, <a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a>) : <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.CreateXor(V, <a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a>);</div>
<div class="line"><a name="l00195"></a><span class="lineno">  195</span>&#160;    }</div>
<div class="line"><a name="l00196"></a><span class="lineno">  196</span>&#160;    <a class="code" href="llvm_2Support_2ErrorHandling_8h.html#ace243f5c25697a1107cce46626b3dc94">llvm_unreachable</a>(<span class="stringliteral">&quot;Only expecting equality predicates&quot;</span>);</div>
<div class="line"><a name="l00197"></a><span class="lineno">  197</span>&#160;  }</div>
<div class="line"><a name="l00198"></a><span class="lineno">  198</span>&#160; </div>
<div class="line"><a name="l00199"></a><span class="lineno">  199</span>&#160;  <span class="comment">// Make sure one of the select arms is a power-of-2.</span></div>
<div class="line"><a name="l00200"></a><span class="lineno">  200</span>&#160;  <span class="keywordflow">if</span> (!TC.<a class="code" href="classllvm_1_1APInt.html#ad1b0513de876d1c85cf6268ca21b2c86">isPowerOf2</a>() &amp;&amp; !<a class="code" href="namespaceR600__InstFlag.html#a23106439cc906be24dc8953eedd3940da8949a42ff4563a29d1e70e18338fd522">FC</a>.isPowerOf2())</div>
<div class="line"><a name="l00201"></a><span class="lineno">  201</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l00202"></a><span class="lineno">  202</span>&#160; </div>
<div class="line"><a name="l00203"></a><span class="lineno">  203</span>&#160;  <span class="comment">// Determine which shift is needed to transform result of the &#39;and&#39; into the</span></div>
<div class="line"><a name="l00204"></a><span class="lineno">  204</span>&#160;  <span class="comment">// desired result.</span></div>
<div class="line"><a name="l00205"></a><span class="lineno">  205</span>&#160;  <span class="keyword">const</span> <a class="code" href="classllvm_1_1APInt.html">APInt</a> &amp;ValC = !TC.<a class="code" href="classllvm_1_1APInt.html#aba0bb0cce2530e8403a18f1bbd6ae610">isNullValue</a>() ? TC : <a class="code" href="namespaceR600__InstFlag.html#a23106439cc906be24dc8953eedd3940da8949a42ff4563a29d1e70e18338fd522">FC</a>;</div>
<div class="line"><a name="l00206"></a><span class="lineno">  206</span>&#160;  <span class="keywordtype">unsigned</span> ValZeros = ValC.<a class="code" href="classllvm_1_1APInt.html#aae3b959a0a2981340fd03c29f528f2f0">logBase2</a>();</div>
<div class="line"><a name="l00207"></a><span class="lineno">  207</span>&#160;  <span class="keywordtype">unsigned</span> AndZeros = AndMask.<a class="code" href="classllvm_1_1APInt.html#aae3b959a0a2981340fd03c29f528f2f0">logBase2</a>();</div>
<div class="line"><a name="l00208"></a><span class="lineno">  208</span>&#160; </div>
<div class="line"><a name="l00209"></a><span class="lineno">  209</span>&#160;  <span class="comment">// Insert the &#39;and&#39; instruction on the input to the truncate.</span></div>
<div class="line"><a name="l00210"></a><span class="lineno">  210</span>&#160;  <span class="keywordflow">if</span> (CreateAnd)</div>
<div class="line"><a name="l00211"></a><span class="lineno">  211</span>&#160;    V = <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.CreateAnd(V, <a class="code" href="classllvm_1_1ConstantInt.html#a969709dd49c28865a482d8b870f87c46">ConstantInt::get</a>(V-&gt;<a class="code" href="classllvm_1_1Value.html#a6393a2d4fe7e10b28a0dcc35f881567b">getType</a>(), AndMask));</div>
<div class="line"><a name="l00212"></a><span class="lineno">  212</span>&#160; </div>
<div class="line"><a name="l00213"></a><span class="lineno">  213</span>&#160;  <span class="comment">// If types don&#39;t match, we can still convert the select by introducing a zext</span></div>
<div class="line"><a name="l00214"></a><span class="lineno">  214</span>&#160;  <span class="comment">// or a trunc of the &#39;and&#39;.</span></div>
<div class="line"><a name="l00215"></a><span class="lineno">  215</span>&#160;  <span class="keywordflow">if</span> (ValZeros &gt; AndZeros) {</div>
<div class="line"><a name="l00216"></a><span class="lineno">  216</span>&#160;    V = <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.CreateZExtOrTrunc(V, SelType);</div>
<div class="line"><a name="l00217"></a><span class="lineno">  217</span>&#160;    V = <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.CreateShl(V, ValZeros - AndZeros);</div>
<div class="line"><a name="l00218"></a><span class="lineno">  218</span>&#160;  } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (ValZeros &lt; AndZeros) {</div>
<div class="line"><a name="l00219"></a><span class="lineno">  219</span>&#160;    V = <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.CreateLShr(V, AndZeros - ValZeros);</div>
<div class="line"><a name="l00220"></a><span class="lineno">  220</span>&#160;    V = <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.CreateZExtOrTrunc(V, SelType);</div>
<div class="line"><a name="l00221"></a><span class="lineno">  221</span>&#160;  } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00222"></a><span class="lineno">  222</span>&#160;    V = <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.CreateZExtOrTrunc(V, SelType);</div>
<div class="line"><a name="l00223"></a><span class="lineno">  223</span>&#160;  }</div>
<div class="line"><a name="l00224"></a><span class="lineno">  224</span>&#160; </div>
<div class="line"><a name="l00225"></a><span class="lineno">  225</span>&#160;  <span class="comment">// Okay, now we know that everything is set up, we just don&#39;t know whether we</span></div>
<div class="line"><a name="l00226"></a><span class="lineno">  226</span>&#160;  <span class="comment">// have a icmp_ne or icmp_eq and whether the true or false val is the zero.</span></div>
<div class="line"><a name="l00227"></a><span class="lineno">  227</span>&#160;  <span class="keywordtype">bool</span> ShouldNotVal = !TC.<a class="code" href="classllvm_1_1APInt.html#aba0bb0cce2530e8403a18f1bbd6ae610">isNullValue</a>();</div>
<div class="line"><a name="l00228"></a><span class="lineno">  228</span>&#160;  ShouldNotVal ^= Pred == <a class="code" href="classllvm_1_1CmpInst.html#a2be3583dac92a031fa1458d4d992c78bac17897ebf2f6a6986280fc3bdf28a30a">ICmpInst::ICMP_NE</a>;</div>
<div class="line"><a name="l00229"></a><span class="lineno">  229</span>&#160;  <span class="keywordflow">if</span> (ShouldNotVal)</div>
<div class="line"><a name="l00230"></a><span class="lineno">  230</span>&#160;    V = <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.CreateXor(V, ValC);</div>
<div class="line"><a name="l00231"></a><span class="lineno">  231</span>&#160; </div>
<div class="line"><a name="l00232"></a><span class="lineno">  232</span>&#160;  <span class="keywordflow">return</span> V;</div>
<div class="line"><a name="l00233"></a><span class="lineno">  233</span>&#160;}</div>
<div class="line"><a name="l00234"></a><span class="lineno">  234</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l00235"></a><span class="lineno">  235</span>&#160;<span class="comment">/// We want to turn code that looks like this:</span></div>
<div class="line"><a name="l00236"></a><span class="lineno">  236</span>&#160;<span class="comment">///   %C = or %A, %B</span></div>
<div class="line"><a name="l00237"></a><span class="lineno">  237</span>&#160;<span class="comment">///   %D = select %cond, %C, %A</span></div>
<div class="line"><a name="l00238"></a><span class="lineno">  238</span>&#160;<span class="comment">/// into:</span></div>
<div class="line"><a name="l00239"></a><span class="lineno">  239</span>&#160;<span class="comment">///   %C = select %cond, %B, 0</span></div>
<div class="line"><a name="l00240"></a><span class="lineno">  240</span>&#160;<span class="comment">///   %D = or %A, %C</span></div>
<div class="line"><a name="l00241"></a><span class="lineno">  241</span>&#160;<span class="comment">///</span></div>
<div class="line"><a name="l00242"></a><span class="lineno">  242</span>&#160;<span class="comment">/// Assuming that the specified instruction is an operand to the select, return</span></div>
<div class="line"><a name="l00243"></a><span class="lineno">  243</span>&#160;<span class="comment">/// a bitmask indicating which operands of this instruction are foldable if they</span></div>
<div class="line"><a name="l00244"></a><span class="lineno">  244</span>&#160;<span class="comment">/// equal the other incoming value of the select.</span></div>
<div class="line"><a name="l00245"></a><span class="lineno"><a class="line" href="InstCombineSelect_8cpp.html#a5462cae8957c6ce96a65d693e2dac674">  245</a></span>&#160;<span class="comment"></span><span class="keyword">static</span> <span class="keywordtype">unsigned</span> <a class="code" href="InstCombineSelect_8cpp.html#a5462cae8957c6ce96a65d693e2dac674">getSelectFoldableOperands</a>(<a class="code" href="classllvm_1_1BinaryOperator.html">BinaryOperator</a> *<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>) {</div>
<div class="line"><a name="l00246"></a><span class="lineno">  246</span>&#160;  <span class="keywordflow">switch</span> (<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>-&gt;getOpcode()) {</div>
<div class="line"><a name="l00247"></a><span class="lineno">  247</span>&#160;  <span class="keywordflow">case</span> <a class="code" href="namespacellvm_1_1MCID.html#ab357441fcd1ea1f9b0d27c12700f6023a2b016c207343046b2bac45e69e76dcec">Instruction::Add</a>:</div>
<div class="line"><a name="l00248"></a><span class="lineno">  248</span>&#160;  <span class="keywordflow">case</span> Instruction::Mul:</div>
<div class="line"><a name="l00249"></a><span class="lineno">  249</span>&#160;  <span class="keywordflow">case</span> Instruction::And:</div>
<div class="line"><a name="l00250"></a><span class="lineno">  250</span>&#160;  <span class="keywordflow">case</span> Instruction::Or:</div>
<div class="line"><a name="l00251"></a><span class="lineno">  251</span>&#160;  <span class="keywordflow">case</span> Instruction::Xor:</div>
<div class="line"><a name="l00252"></a><span class="lineno">  252</span>&#160;    <span class="keywordflow">return</span> 3;              <span class="comment">// Can fold through either operand.</span></div>
<div class="line"><a name="l00253"></a><span class="lineno">  253</span>&#160;  <span class="keywordflow">case</span> Instruction::Sub:   <span class="comment">// Can only fold on the amount subtracted.</span></div>
<div class="line"><a name="l00254"></a><span class="lineno">  254</span>&#160;  <span class="keywordflow">case</span> Instruction::Shl:   <span class="comment">// Can only fold on the shift amount.</span></div>
<div class="line"><a name="l00255"></a><span class="lineno">  255</span>&#160;  <span class="keywordflow">case</span> Instruction::LShr:</div>
<div class="line"><a name="l00256"></a><span class="lineno">  256</span>&#160;  <span class="keywordflow">case</span> Instruction::AShr:</div>
<div class="line"><a name="l00257"></a><span class="lineno">  257</span>&#160;    <span class="keywordflow">return</span> 1;</div>
<div class="line"><a name="l00258"></a><span class="lineno">  258</span>&#160;  <span class="keywordflow">default</span>:</div>
<div class="line"><a name="l00259"></a><span class="lineno">  259</span>&#160;    <span class="keywordflow">return</span> 0;              <span class="comment">// Cannot fold</span></div>
<div class="line"><a name="l00260"></a><span class="lineno">  260</span>&#160;  }</div>
<div class="line"><a name="l00261"></a><span class="lineno">  261</span>&#160;}</div>
<div class="line"><a name="l00262"></a><span class="lineno">  262</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l00263"></a><span class="lineno">  263</span>&#160;<span class="comment">/// We have (select c, TI, FI), and we know that TI and FI have the same opcode.</span></div>
<div class="line"><a name="l00264"></a><span class="lineno"><a class="line" href="classllvm_1_1InstCombinerImpl.html#a4bd29d381405675f36964e4a5382dae4">  264</a></span>&#160;<span class="comment"></span><a class="code" href="classllvm_1_1Instruction.html">Instruction</a> *<a class="code" href="classllvm_1_1InstCombinerImpl.html#a4bd29d381405675f36964e4a5382dae4">InstCombinerImpl::foldSelectOpOp</a>(<a class="code" href="classllvm_1_1SelectInst.html">SelectInst</a> &amp;<a class="code" href="PassBuilderBindings_8cpp.html#a0f79dad1efc582555a443cc11a8fa401">SI</a>, <a class="code" href="classllvm_1_1Instruction.html">Instruction</a> *TI,</div>
<div class="line"><a name="l00265"></a><span class="lineno">  265</span>&#160;                                              <a class="code" href="classllvm_1_1Instruction.html">Instruction</a> *FI) {</div>
<div class="line"><a name="l00266"></a><span class="lineno">  266</span>&#160;  <span class="comment">// Don&#39;t break up min/max patterns. The hasOneUse checks below prevent that</span></div>
<div class="line"><a name="l00267"></a><span class="lineno">  267</span>&#160;  <span class="comment">// for most cases, but vector min/max with bitcasts can be transformed. If the</span></div>
<div class="line"><a name="l00268"></a><span class="lineno">  268</span>&#160;  <span class="comment">// one-use restrictions are eased for other patterns, we still don&#39;t want to</span></div>
<div class="line"><a name="l00269"></a><span class="lineno">  269</span>&#160;  <span class="comment">// obfuscate min/max.</span></div>
<div class="line"><a name="l00270"></a><span class="lineno">  270</span>&#160;  <span class="keywordflow">if</span> ((<a class="code" href="namespacellvm_1_1PatternMatch.html#a25d956d9e0beadd47ce4bc255dfa811d">match</a>(&amp;<a class="code" href="PassBuilderBindings_8cpp.html#a0f79dad1efc582555a443cc11a8fa401">SI</a>, <a class="code" href="namespacellvm_1_1PatternMatch.html#af16a6c9336ca2a17389ea709b45fe7f5">m_SMin</a>(<a class="code" href="namespacellvm_1_1PatternMatch.html#a24bca8838396aa81b87de8e7ac774b19">m_Value</a>(), <a class="code" href="namespacellvm_1_1PatternMatch.html#a24bca8838396aa81b87de8e7ac774b19">m_Value</a>())) ||</div>
<div class="line"><a name="l00271"></a><span class="lineno">  271</span>&#160;       <a class="code" href="namespacellvm_1_1PatternMatch.html#a25d956d9e0beadd47ce4bc255dfa811d">match</a>(&amp;<a class="code" href="PassBuilderBindings_8cpp.html#a0f79dad1efc582555a443cc11a8fa401">SI</a>, <a class="code" href="namespacellvm_1_1PatternMatch.html#a38a6a25e425f94c9836dda96f3718593">m_SMax</a>(<a class="code" href="namespacellvm_1_1PatternMatch.html#a24bca8838396aa81b87de8e7ac774b19">m_Value</a>(), <a class="code" href="namespacellvm_1_1PatternMatch.html#a24bca8838396aa81b87de8e7ac774b19">m_Value</a>())) ||</div>
<div class="line"><a name="l00272"></a><span class="lineno">  272</span>&#160;       <a class="code" href="namespacellvm_1_1PatternMatch.html#a25d956d9e0beadd47ce4bc255dfa811d">match</a>(&amp;<a class="code" href="PassBuilderBindings_8cpp.html#a0f79dad1efc582555a443cc11a8fa401">SI</a>, <a class="code" href="namespacellvm_1_1PatternMatch.html#adc571425e9aecccf7ebf5fcc3c678d94">m_UMin</a>(<a class="code" href="namespacellvm_1_1PatternMatch.html#a24bca8838396aa81b87de8e7ac774b19">m_Value</a>(), <a class="code" href="namespacellvm_1_1PatternMatch.html#a24bca8838396aa81b87de8e7ac774b19">m_Value</a>())) ||</div>
<div class="line"><a name="l00273"></a><span class="lineno">  273</span>&#160;       <a class="code" href="namespacellvm_1_1PatternMatch.html#a25d956d9e0beadd47ce4bc255dfa811d">match</a>(&amp;<a class="code" href="PassBuilderBindings_8cpp.html#a0f79dad1efc582555a443cc11a8fa401">SI</a>, <a class="code" href="namespacellvm_1_1PatternMatch.html#ae5a9f5c71425f38b8874296c380567ad">m_UMax</a>(<a class="code" href="namespacellvm_1_1PatternMatch.html#a24bca8838396aa81b87de8e7ac774b19">m_Value</a>(), <a class="code" href="namespacellvm_1_1PatternMatch.html#a24bca8838396aa81b87de8e7ac774b19">m_Value</a>()))))</div>
<div class="line"><a name="l00274"></a><span class="lineno">  274</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l00275"></a><span class="lineno">  275</span>&#160; </div>
<div class="line"><a name="l00276"></a><span class="lineno">  276</span>&#160;  <span class="comment">// If this is a cast from the same type, merge.</span></div>
<div class="line"><a name="l00277"></a><span class="lineno">  277</span>&#160;  <a class="code" href="classllvm_1_1Value.html">Value</a> *<a class="code" href="BasicBlockSections_8cpp.html#a5fd0741d696f28faf65b33f6c6af8fda">Cond</a> = <a class="code" href="PassBuilderBindings_8cpp.html#a0f79dad1efc582555a443cc11a8fa401">SI</a>.getCondition();</div>
<div class="line"><a name="l00278"></a><span class="lineno">  278</span>&#160;  <a class="code" href="classllvm_1_1Type.html">Type</a> *CondTy = <a class="code" href="BasicBlockSections_8cpp.html#a5fd0741d696f28faf65b33f6c6af8fda">Cond</a>-&gt;getType();</div>
<div class="line"><a name="l00279"></a><span class="lineno">  279</span>&#160;  <span class="keywordflow">if</span> (TI-&gt;<a class="code" href="classllvm_1_1User.html#addec638786f763d967811b45cb662f1f">getNumOperands</a>() == 1 &amp;&amp; TI-&gt;<a class="code" href="classllvm_1_1Instruction.html#a27997849d8982bf226891024fd68daee">isCast</a>()) {</div>
<div class="line"><a name="l00280"></a><span class="lineno">  280</span>&#160;    <a class="code" href="classllvm_1_1Type.html">Type</a> *FIOpndTy = FI-&gt;<a class="code" href="classllvm_1_1User.html#abe1de1520a21f77ac57cc210bf0fb0b4">getOperand</a>(0)-&gt;<a class="code" href="classllvm_1_1Value.html#a6393a2d4fe7e10b28a0dcc35f881567b">getType</a>();</div>
<div class="line"><a name="l00281"></a><span class="lineno">  281</span>&#160;    <span class="keywordflow">if</span> (TI-&gt;<a class="code" href="classllvm_1_1User.html#abe1de1520a21f77ac57cc210bf0fb0b4">getOperand</a>(0)-&gt;<a class="code" href="classllvm_1_1Value.html#a6393a2d4fe7e10b28a0dcc35f881567b">getType</a>() != FIOpndTy)</div>
<div class="line"><a name="l00282"></a><span class="lineno">  282</span>&#160;      <span class="keywordflow">return</span> <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l00283"></a><span class="lineno">  283</span>&#160; </div>
<div class="line"><a name="l00284"></a><span class="lineno">  284</span>&#160;    <span class="comment">// The select condition may be a vector. We may only change the operand</span></div>
<div class="line"><a name="l00285"></a><span class="lineno">  285</span>&#160;    <span class="comment">// type if the vector width remains the same (and matches the condition).</span></div>
<div class="line"><a name="l00286"></a><span class="lineno">  286</span>&#160;    <span class="keywordflow">if</span> (<span class="keyword">auto</span> *CondVTy = dyn_cast&lt;VectorType&gt;(CondTy)) {</div>
<div class="line"><a name="l00287"></a><span class="lineno">  287</span>&#160;      <span class="keywordflow">if</span> (!FIOpndTy-&gt;<a class="code" href="classllvm_1_1Type.html#a1bc022868b23918efa44df511f4d5b61">isVectorTy</a>() ||</div>
<div class="line"><a name="l00288"></a><span class="lineno">  288</span>&#160;          CondVTy-&gt;getElementCount() !=</div>
<div class="line"><a name="l00289"></a><span class="lineno">  289</span>&#160;              cast&lt;VectorType&gt;(FIOpndTy)-&gt;getElementCount())</div>
<div class="line"><a name="l00290"></a><span class="lineno">  290</span>&#160;        <span class="keywordflow">return</span> <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l00291"></a><span class="lineno">  291</span>&#160; </div>
<div class="line"><a name="l00292"></a><span class="lineno">  292</span>&#160;      <span class="comment">// TODO: If the backend knew how to deal with casts better, we could</span></div>
<div class="line"><a name="l00293"></a><span class="lineno">  293</span>&#160;      <span class="comment">// remove this limitation. For now, there&#39;s too much potential to create</span></div>
<div class="line"><a name="l00294"></a><span class="lineno">  294</span>&#160;      <span class="comment">// worse codegen by promoting the select ahead of size-altering casts</span></div>
<div class="line"><a name="l00295"></a><span class="lineno">  295</span>&#160;      <span class="comment">// (PR28160).</span></div>
<div class="line"><a name="l00296"></a><span class="lineno">  296</span>&#160;      <span class="comment">//</span></div>
<div class="line"><a name="l00297"></a><span class="lineno">  297</span>&#160;      <span class="comment">// Note that ValueTracking&#39;s matchSelectPattern() looks through casts</span></div>
<div class="line"><a name="l00298"></a><span class="lineno">  298</span>&#160;      <span class="comment">// without checking &#39;hasOneUse&#39; when it matches min/max patterns, so this</span></div>
<div class="line"><a name="l00299"></a><span class="lineno">  299</span>&#160;      <span class="comment">// transform may end up happening anyway.</span></div>
<div class="line"><a name="l00300"></a><span class="lineno">  300</span>&#160;      <span class="keywordflow">if</span> (TI-&gt;<a class="code" href="classllvm_1_1Instruction.html#ab4e05d690df389b8b1477c90387b575f">getOpcode</a>() != Instruction::BitCast &amp;&amp;</div>
<div class="line"><a name="l00301"></a><span class="lineno">  301</span>&#160;          (!TI-&gt;<a class="code" href="classllvm_1_1Value.html#a3a402430a1bbe70a9282dcb0e0b6a2cd">hasOneUse</a>() || !FI-&gt;<a class="code" href="classllvm_1_1Value.html#a3a402430a1bbe70a9282dcb0e0b6a2cd">hasOneUse</a>()))</div>
<div class="line"><a name="l00302"></a><span class="lineno">  302</span>&#160;        <span class="keywordflow">return</span> <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l00303"></a><span class="lineno">  303</span>&#160;    } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (!TI-&gt;<a class="code" href="classllvm_1_1Value.html#a3a402430a1bbe70a9282dcb0e0b6a2cd">hasOneUse</a>() || !FI-&gt;<a class="code" href="classllvm_1_1Value.html#a3a402430a1bbe70a9282dcb0e0b6a2cd">hasOneUse</a>()) {</div>
<div class="line"><a name="l00304"></a><span class="lineno">  304</span>&#160;      <span class="comment">// TODO: The one-use restrictions for a scalar select could be eased if</span></div>
<div class="line"><a name="l00305"></a><span class="lineno">  305</span>&#160;      <span class="comment">// the fold of a select in visitLoadInst() was enhanced to match a pattern</span></div>
<div class="line"><a name="l00306"></a><span class="lineno">  306</span>&#160;      <span class="comment">// that includes a cast.</span></div>
<div class="line"><a name="l00307"></a><span class="lineno">  307</span>&#160;      <span class="keywordflow">return</span> <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l00308"></a><span class="lineno">  308</span>&#160;    }</div>
<div class="line"><a name="l00309"></a><span class="lineno">  309</span>&#160; </div>
<div class="line"><a name="l00310"></a><span class="lineno">  310</span>&#160;    <span class="comment">// Fold this by inserting a select from the input values.</span></div>
<div class="line"><a name="l00311"></a><span class="lineno">  311</span>&#160;    <a class="code" href="classllvm_1_1Value.html">Value</a> *NewSI =</div>
<div class="line"><a name="l00312"></a><span class="lineno">  312</span>&#160;        <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.CreateSelect(<a class="code" href="BasicBlockSections_8cpp.html#a5fd0741d696f28faf65b33f6c6af8fda">Cond</a>, TI-&gt;<a class="code" href="classllvm_1_1User.html#abe1de1520a21f77ac57cc210bf0fb0b4">getOperand</a>(0), FI-&gt;<a class="code" href="classllvm_1_1User.html#abe1de1520a21f77ac57cc210bf0fb0b4">getOperand</a>(0),</div>
<div class="line"><a name="l00313"></a><span class="lineno">  313</span>&#160;                             <a class="code" href="PassBuilderBindings_8cpp.html#a0f79dad1efc582555a443cc11a8fa401">SI</a>.getName() + <span class="stringliteral">&quot;.v&quot;</span>, &amp;<a class="code" href="PassBuilderBindings_8cpp.html#a0f79dad1efc582555a443cc11a8fa401">SI</a>);</div>
<div class="line"><a name="l00314"></a><span class="lineno">  314</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="classllvm_1_1CastInst.html#a643fe5a9e7042f032dae78109c2b1e72">CastInst::Create</a>(<a class="code" href="classllvm_1_1Instruction.html#afa0b2fa29ba074f2b6ec9ac11163f2d9">Instruction::CastOps</a>(TI-&gt;<a class="code" href="classllvm_1_1Instruction.html#ab4e05d690df389b8b1477c90387b575f">getOpcode</a>()), NewSI,</div>
<div class="line"><a name="l00315"></a><span class="lineno">  315</span>&#160;                            TI-&gt;<a class="code" href="classllvm_1_1Value.html#a6393a2d4fe7e10b28a0dcc35f881567b">getType</a>());</div>
<div class="line"><a name="l00316"></a><span class="lineno">  316</span>&#160;  }</div>
<div class="line"><a name="l00317"></a><span class="lineno">  317</span>&#160; </div>
<div class="line"><a name="l00318"></a><span class="lineno">  318</span>&#160;  <span class="comment">// Cond ? -X : -Y --&gt; -(Cond ? X : Y)</span></div>
<div class="line"><a name="l00319"></a><span class="lineno">  319</span>&#160;  <a class="code" href="classllvm_1_1Value.html">Value</a> *<a class="code" href="ErlangGCPrinter_8cpp.html#a74b474c0616ab55c1d9487f11fd31d26">X</a>, *<a class="code" href="OcamlGCPrinter_8cpp.html#afcf2f797ed287a723263583c9b1c1bce">Y</a>;</div>
<div class="line"><a name="l00320"></a><span class="lineno">  320</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="namespacellvm_1_1PatternMatch.html#a25d956d9e0beadd47ce4bc255dfa811d">match</a>(TI, <a class="code" href="namespacellvm_1_1PatternMatch.html#af431ec215bba8bb9c56e7541d99920f2">m_FNeg</a>(<a class="code" href="namespacellvm_1_1PatternMatch.html#a24bca8838396aa81b87de8e7ac774b19">m_Value</a>(<a class="code" href="ErlangGCPrinter_8cpp.html#a74b474c0616ab55c1d9487f11fd31d26">X</a>))) &amp;&amp; <a class="code" href="namespacellvm_1_1PatternMatch.html#a25d956d9e0beadd47ce4bc255dfa811d">match</a>(FI, <a class="code" href="namespacellvm_1_1PatternMatch.html#af431ec215bba8bb9c56e7541d99920f2">m_FNeg</a>(<a class="code" href="namespacellvm_1_1PatternMatch.html#a24bca8838396aa81b87de8e7ac774b19">m_Value</a>(<a class="code" href="OcamlGCPrinter_8cpp.html#afcf2f797ed287a723263583c9b1c1bce">Y</a>))) &amp;&amp;</div>
<div class="line"><a name="l00321"></a><span class="lineno">  321</span>&#160;      (TI-&gt;<a class="code" href="classllvm_1_1Value.html#a3a402430a1bbe70a9282dcb0e0b6a2cd">hasOneUse</a>() || FI-&gt;<a class="code" href="classllvm_1_1Value.html#a3a402430a1bbe70a9282dcb0e0b6a2cd">hasOneUse</a>())) {</div>
<div class="line"><a name="l00322"></a><span class="lineno">  322</span>&#160;    <a class="code" href="classllvm_1_1Value.html">Value</a> *NewSel = <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.CreateSelect(<a class="code" href="BasicBlockSections_8cpp.html#a5fd0741d696f28faf65b33f6c6af8fda">Cond</a>, <a class="code" href="ErlangGCPrinter_8cpp.html#a74b474c0616ab55c1d9487f11fd31d26">X</a>, <a class="code" href="OcamlGCPrinter_8cpp.html#afcf2f797ed287a723263583c9b1c1bce">Y</a>, <a class="code" href="PassBuilderBindings_8cpp.html#a0f79dad1efc582555a443cc11a8fa401">SI</a>.getName() + <span class="stringliteral">&quot;.v&quot;</span>, &amp;<a class="code" href="PassBuilderBindings_8cpp.html#a0f79dad1efc582555a443cc11a8fa401">SI</a>);</div>
<div class="line"><a name="l00323"></a><span class="lineno">  323</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="classllvm_1_1UnaryOperator.html#a9f731708e681757d51c4dc2a004873c8">UnaryOperator::CreateFNegFMF</a>(NewSel, TI);</div>
<div class="line"><a name="l00324"></a><span class="lineno">  324</span>&#160;  }</div>
<div class="line"><a name="l00325"></a><span class="lineno">  325</span>&#160; </div>
<div class="line"><a name="l00326"></a><span class="lineno">  326</span>&#160;  <span class="comment">// Min/max intrinsic with a common operand can have the common operand pulled</span></div>
<div class="line"><a name="l00327"></a><span class="lineno">  327</span>&#160;  <span class="comment">// after the select. This is the same transform as below for binops, but</span></div>
<div class="line"><a name="l00328"></a><span class="lineno">  328</span>&#160;  <span class="comment">// specialized for intrinsic matching and without the restrictive uses clause.</span></div>
<div class="line"><a name="l00329"></a><span class="lineno">  329</span>&#160;  <span class="keyword">auto</span> *<a class="code" href="HexagonCopyToCombine_8cpp.html#a1d40004718218dbdf06b496766299101">TII</a> = dyn_cast&lt;IntrinsicInst&gt;(TI);</div>
<div class="line"><a name="l00330"></a><span class="lineno">  330</span>&#160;  <span class="keyword">auto</span> *FII = dyn_cast&lt;IntrinsicInst&gt;(FI);</div>
<div class="line"><a name="l00331"></a><span class="lineno">  331</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="HexagonCopyToCombine_8cpp.html#a1d40004718218dbdf06b496766299101">TII</a> &amp;&amp; FII &amp;&amp; <a class="code" href="HexagonCopyToCombine_8cpp.html#a1d40004718218dbdf06b496766299101">TII</a>-&gt;getIntrinsicID() == FII-&gt;getIntrinsicID() &amp;&amp;</div>
<div class="line"><a name="l00332"></a><span class="lineno">  332</span>&#160;      (<a class="code" href="HexagonCopyToCombine_8cpp.html#a1d40004718218dbdf06b496766299101">TII</a>-&gt;hasOneUse() || FII-&gt;hasOneUse())) {</div>
<div class="line"><a name="l00333"></a><span class="lineno">  333</span>&#160;    <a class="code" href="classllvm_1_1Value.html">Value</a> *T0, *<a class="code" href="Mips16ISelLowering_8cpp.html#ac16509a75e3d3fc46b9df1726be486ec">T1</a>, *F0, *F1;</div>
<div class="line"><a name="l00334"></a><span class="lineno">  334</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="namespacellvm_1_1PatternMatch.html#a25d956d9e0beadd47ce4bc255dfa811d">match</a>(<a class="code" href="HexagonCopyToCombine_8cpp.html#a1d40004718218dbdf06b496766299101">TII</a>, <a class="code" href="namespacellvm_1_1PatternMatch.html#a74a8221adbd09a9076a1ab471644b223">m_MaxOrMin</a>(<a class="code" href="namespacellvm_1_1PatternMatch.html#a24bca8838396aa81b87de8e7ac774b19">m_Value</a>(T0), <a class="code" href="namespacellvm_1_1PatternMatch.html#a24bca8838396aa81b87de8e7ac774b19">m_Value</a>(<a class="code" href="Mips16ISelLowering_8cpp.html#ac16509a75e3d3fc46b9df1726be486ec">T1</a>))) &amp;&amp;</div>
<div class="line"><a name="l00335"></a><span class="lineno">  335</span>&#160;        <a class="code" href="namespacellvm_1_1PatternMatch.html#a25d956d9e0beadd47ce4bc255dfa811d">match</a>(FII, <a class="code" href="namespacellvm_1_1PatternMatch.html#a74a8221adbd09a9076a1ab471644b223">m_MaxOrMin</a>(<a class="code" href="namespacellvm_1_1PatternMatch.html#a24bca8838396aa81b87de8e7ac774b19">m_Value</a>(F0), <a class="code" href="namespacellvm_1_1PatternMatch.html#a24bca8838396aa81b87de8e7ac774b19">m_Value</a>(F1)))) {</div>
<div class="line"><a name="l00336"></a><span class="lineno">  336</span>&#160;      <span class="keywordflow">if</span> (T0 == F0) {</div>
<div class="line"><a name="l00337"></a><span class="lineno">  337</span>&#160;        <a class="code" href="classllvm_1_1Value.html">Value</a> *NewSel = <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.CreateSelect(<a class="code" href="BasicBlockSections_8cpp.html#a5fd0741d696f28faf65b33f6c6af8fda">Cond</a>, <a class="code" href="Mips16ISelLowering_8cpp.html#ac16509a75e3d3fc46b9df1726be486ec">T1</a>, F1, <span class="stringliteral">&quot;minmaxop&quot;</span>, &amp;<a class="code" href="PassBuilderBindings_8cpp.html#a0f79dad1efc582555a443cc11a8fa401">SI</a>);</div>
<div class="line"><a name="l00338"></a><span class="lineno">  338</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="classllvm_1_1CallInst.html#a850d8262cd900958b3153c4aa080b2bb">CallInst::Create</a>(<a class="code" href="HexagonCopyToCombine_8cpp.html#a1d40004718218dbdf06b496766299101">TII</a>-&gt;getCalledFunction(), {NewSel, T0});</div>
<div class="line"><a name="l00339"></a><span class="lineno">  339</span>&#160;      }</div>
<div class="line"><a name="l00340"></a><span class="lineno">  340</span>&#160;      <span class="keywordflow">if</span> (T0 == F1) {</div>
<div class="line"><a name="l00341"></a><span class="lineno">  341</span>&#160;        <a class="code" href="classllvm_1_1Value.html">Value</a> *NewSel = <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.CreateSelect(<a class="code" href="BasicBlockSections_8cpp.html#a5fd0741d696f28faf65b33f6c6af8fda">Cond</a>, <a class="code" href="Mips16ISelLowering_8cpp.html#ac16509a75e3d3fc46b9df1726be486ec">T1</a>, F0, <span class="stringliteral">&quot;minmaxop&quot;</span>, &amp;<a class="code" href="PassBuilderBindings_8cpp.html#a0f79dad1efc582555a443cc11a8fa401">SI</a>);</div>
<div class="line"><a name="l00342"></a><span class="lineno">  342</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="classllvm_1_1CallInst.html#a850d8262cd900958b3153c4aa080b2bb">CallInst::Create</a>(<a class="code" href="HexagonCopyToCombine_8cpp.html#a1d40004718218dbdf06b496766299101">TII</a>-&gt;getCalledFunction(), {NewSel, T0});</div>
<div class="line"><a name="l00343"></a><span class="lineno">  343</span>&#160;      }</div>
<div class="line"><a name="l00344"></a><span class="lineno">  344</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="Mips16ISelLowering_8cpp.html#ac16509a75e3d3fc46b9df1726be486ec">T1</a> == F0) {</div>
<div class="line"><a name="l00345"></a><span class="lineno">  345</span>&#160;        <a class="code" href="classllvm_1_1Value.html">Value</a> *NewSel = <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.CreateSelect(<a class="code" href="BasicBlockSections_8cpp.html#a5fd0741d696f28faf65b33f6c6af8fda">Cond</a>, T0, F1, <span class="stringliteral">&quot;minmaxop&quot;</span>, &amp;<a class="code" href="PassBuilderBindings_8cpp.html#a0f79dad1efc582555a443cc11a8fa401">SI</a>);</div>
<div class="line"><a name="l00346"></a><span class="lineno">  346</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="classllvm_1_1CallInst.html#a850d8262cd900958b3153c4aa080b2bb">CallInst::Create</a>(<a class="code" href="HexagonCopyToCombine_8cpp.html#a1d40004718218dbdf06b496766299101">TII</a>-&gt;getCalledFunction(), {NewSel, T1});</div>
<div class="line"><a name="l00347"></a><span class="lineno">  347</span>&#160;      }</div>
<div class="line"><a name="l00348"></a><span class="lineno">  348</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="Mips16ISelLowering_8cpp.html#ac16509a75e3d3fc46b9df1726be486ec">T1</a> == F1) {</div>
<div class="line"><a name="l00349"></a><span class="lineno">  349</span>&#160;        <a class="code" href="classllvm_1_1Value.html">Value</a> *NewSel = <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.CreateSelect(<a class="code" href="BasicBlockSections_8cpp.html#a5fd0741d696f28faf65b33f6c6af8fda">Cond</a>, T0, F0, <span class="stringliteral">&quot;minmaxop&quot;</span>, &amp;<a class="code" href="PassBuilderBindings_8cpp.html#a0f79dad1efc582555a443cc11a8fa401">SI</a>);</div>
<div class="line"><a name="l00350"></a><span class="lineno">  350</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="classllvm_1_1CallInst.html#a850d8262cd900958b3153c4aa080b2bb">CallInst::Create</a>(<a class="code" href="HexagonCopyToCombine_8cpp.html#a1d40004718218dbdf06b496766299101">TII</a>-&gt;getCalledFunction(), {NewSel, T1});</div>
<div class="line"><a name="l00351"></a><span class="lineno">  351</span>&#160;      }</div>
<div class="line"><a name="l00352"></a><span class="lineno">  352</span>&#160;    }</div>
<div class="line"><a name="l00353"></a><span class="lineno">  353</span>&#160;  }</div>
<div class="line"><a name="l00354"></a><span class="lineno">  354</span>&#160; </div>
<div class="line"><a name="l00355"></a><span class="lineno">  355</span>&#160;  <span class="comment">// Only handle binary operators (including two-operand getelementptr) with</span></div>
<div class="line"><a name="l00356"></a><span class="lineno">  356</span>&#160;  <span class="comment">// one-use here. As with the cast case above, it may be possible to relax the</span></div>
<div class="line"><a name="l00357"></a><span class="lineno">  357</span>&#160;  <span class="comment">// one-use constraint, but that needs be examined carefully since it may not</span></div>
<div class="line"><a name="l00358"></a><span class="lineno">  358</span>&#160;  <span class="comment">// reduce the total number of instructions.</span></div>
<div class="line"><a name="l00359"></a><span class="lineno">  359</span>&#160;  <span class="keywordflow">if</span> (TI-&gt;<a class="code" href="classllvm_1_1User.html#addec638786f763d967811b45cb662f1f">getNumOperands</a>() != 2 || FI-&gt;<a class="code" href="classllvm_1_1User.html#addec638786f763d967811b45cb662f1f">getNumOperands</a>() != 2 ||</div>
<div class="line"><a name="l00360"></a><span class="lineno">  360</span>&#160;      (!isa&lt;BinaryOperator&gt;(TI) &amp;&amp; !isa&lt;GetElementPtrInst&gt;(TI)) ||</div>
<div class="line"><a name="l00361"></a><span class="lineno">  361</span>&#160;      !TI-&gt;<a class="code" href="classllvm_1_1Value.html#a3a402430a1bbe70a9282dcb0e0b6a2cd">hasOneUse</a>() || !FI-&gt;<a class="code" href="classllvm_1_1Value.html#a3a402430a1bbe70a9282dcb0e0b6a2cd">hasOneUse</a>())</div>
<div class="line"><a name="l00362"></a><span class="lineno">  362</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l00363"></a><span class="lineno">  363</span>&#160; </div>
<div class="line"><a name="l00364"></a><span class="lineno">  364</span>&#160;  <span class="comment">// Figure out if the operations have any operands in common.</span></div>
<div class="line"><a name="l00365"></a><span class="lineno">  365</span>&#160;  <a class="code" href="classllvm_1_1Value.html">Value</a> *MatchOp, *OtherOpT, *OtherOpF;</div>
<div class="line"><a name="l00366"></a><span class="lineno">  366</span>&#160;  <span class="keywordtype">bool</span> MatchIsOpZero;</div>
<div class="line"><a name="l00367"></a><span class="lineno">  367</span>&#160;  <span class="keywordflow">if</span> (TI-&gt;<a class="code" href="classllvm_1_1User.html#abe1de1520a21f77ac57cc210bf0fb0b4">getOperand</a>(0) == FI-&gt;<a class="code" href="classllvm_1_1User.html#abe1de1520a21f77ac57cc210bf0fb0b4">getOperand</a>(0)) {</div>
<div class="line"><a name="l00368"></a><span class="lineno">  368</span>&#160;    MatchOp  = TI-&gt;<a class="code" href="classllvm_1_1User.html#abe1de1520a21f77ac57cc210bf0fb0b4">getOperand</a>(0);</div>
<div class="line"><a name="l00369"></a><span class="lineno">  369</span>&#160;    OtherOpT = TI-&gt;<a class="code" href="classllvm_1_1User.html#abe1de1520a21f77ac57cc210bf0fb0b4">getOperand</a>(1);</div>
<div class="line"><a name="l00370"></a><span class="lineno">  370</span>&#160;    OtherOpF = FI-&gt;<a class="code" href="classllvm_1_1User.html#abe1de1520a21f77ac57cc210bf0fb0b4">getOperand</a>(1);</div>
<div class="line"><a name="l00371"></a><span class="lineno">  371</span>&#160;    MatchIsOpZero = <span class="keyword">true</span>;</div>
<div class="line"><a name="l00372"></a><span class="lineno">  372</span>&#160;  } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (TI-&gt;<a class="code" href="classllvm_1_1User.html#abe1de1520a21f77ac57cc210bf0fb0b4">getOperand</a>(1) == FI-&gt;<a class="code" href="classllvm_1_1User.html#abe1de1520a21f77ac57cc210bf0fb0b4">getOperand</a>(1)) {</div>
<div class="line"><a name="l00373"></a><span class="lineno">  373</span>&#160;    MatchOp  = TI-&gt;<a class="code" href="classllvm_1_1User.html#abe1de1520a21f77ac57cc210bf0fb0b4">getOperand</a>(1);</div>
<div class="line"><a name="l00374"></a><span class="lineno">  374</span>&#160;    OtherOpT = TI-&gt;<a class="code" href="classllvm_1_1User.html#abe1de1520a21f77ac57cc210bf0fb0b4">getOperand</a>(0);</div>
<div class="line"><a name="l00375"></a><span class="lineno">  375</span>&#160;    OtherOpF = FI-&gt;<a class="code" href="classllvm_1_1User.html#abe1de1520a21f77ac57cc210bf0fb0b4">getOperand</a>(0);</div>
<div class="line"><a name="l00376"></a><span class="lineno">  376</span>&#160;    MatchIsOpZero = <span class="keyword">false</span>;</div>
<div class="line"><a name="l00377"></a><span class="lineno">  377</span>&#160;  } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (!TI-&gt;<a class="code" href="classllvm_1_1Instruction.html#a55743bd32282bf6f87aeb49237b1fb68">isCommutative</a>()) {</div>
<div class="line"><a name="l00378"></a><span class="lineno">  378</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l00379"></a><span class="lineno">  379</span>&#160;  } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (TI-&gt;<a class="code" href="classllvm_1_1User.html#abe1de1520a21f77ac57cc210bf0fb0b4">getOperand</a>(0) == FI-&gt;<a class="code" href="classllvm_1_1User.html#abe1de1520a21f77ac57cc210bf0fb0b4">getOperand</a>(1)) {</div>
<div class="line"><a name="l00380"></a><span class="lineno">  380</span>&#160;    MatchOp  = TI-&gt;<a class="code" href="classllvm_1_1User.html#abe1de1520a21f77ac57cc210bf0fb0b4">getOperand</a>(0);</div>
<div class="line"><a name="l00381"></a><span class="lineno">  381</span>&#160;    OtherOpT = TI-&gt;<a class="code" href="classllvm_1_1User.html#abe1de1520a21f77ac57cc210bf0fb0b4">getOperand</a>(1);</div>
<div class="line"><a name="l00382"></a><span class="lineno">  382</span>&#160;    OtherOpF = FI-&gt;<a class="code" href="classllvm_1_1User.html#abe1de1520a21f77ac57cc210bf0fb0b4">getOperand</a>(0);</div>
<div class="line"><a name="l00383"></a><span class="lineno">  383</span>&#160;    MatchIsOpZero = <span class="keyword">true</span>;</div>
<div class="line"><a name="l00384"></a><span class="lineno">  384</span>&#160;  } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (TI-&gt;<a class="code" href="classllvm_1_1User.html#abe1de1520a21f77ac57cc210bf0fb0b4">getOperand</a>(1) == FI-&gt;<a class="code" href="classllvm_1_1User.html#abe1de1520a21f77ac57cc210bf0fb0b4">getOperand</a>(0)) {</div>
<div class="line"><a name="l00385"></a><span class="lineno">  385</span>&#160;    MatchOp  = TI-&gt;<a class="code" href="classllvm_1_1User.html#abe1de1520a21f77ac57cc210bf0fb0b4">getOperand</a>(1);</div>
<div class="line"><a name="l00386"></a><span class="lineno">  386</span>&#160;    OtherOpT = TI-&gt;<a class="code" href="classllvm_1_1User.html#abe1de1520a21f77ac57cc210bf0fb0b4">getOperand</a>(0);</div>
<div class="line"><a name="l00387"></a><span class="lineno">  387</span>&#160;    OtherOpF = FI-&gt;<a class="code" href="classllvm_1_1User.html#abe1de1520a21f77ac57cc210bf0fb0b4">getOperand</a>(1);</div>
<div class="line"><a name="l00388"></a><span class="lineno">  388</span>&#160;    MatchIsOpZero = <span class="keyword">true</span>;</div>
<div class="line"><a name="l00389"></a><span class="lineno">  389</span>&#160;  } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00390"></a><span class="lineno">  390</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l00391"></a><span class="lineno">  391</span>&#160;  }</div>
<div class="line"><a name="l00392"></a><span class="lineno">  392</span>&#160; </div>
<div class="line"><a name="l00393"></a><span class="lineno">  393</span>&#160;  <span class="comment">// If the select condition is a vector, the operands of the original select&#39;s</span></div>
<div class="line"><a name="l00394"></a><span class="lineno">  394</span>&#160;  <span class="comment">// operands also must be vectors. This may not be the case for getelementptr</span></div>
<div class="line"><a name="l00395"></a><span class="lineno">  395</span>&#160;  <span class="comment">// for example.</span></div>
<div class="line"><a name="l00396"></a><span class="lineno">  396</span>&#160;  <span class="keywordflow">if</span> (CondTy-&gt;<a class="code" href="classllvm_1_1Type.html#a1bc022868b23918efa44df511f4d5b61">isVectorTy</a>() &amp;&amp; (!OtherOpT-&gt;<a class="code" href="classllvm_1_1Value.html#a6393a2d4fe7e10b28a0dcc35f881567b">getType</a>()-&gt;<a class="code" href="classllvm_1_1Type.html#a1bc022868b23918efa44df511f4d5b61">isVectorTy</a>() ||</div>
<div class="line"><a name="l00397"></a><span class="lineno">  397</span>&#160;                               !OtherOpF-&gt;<a class="code" href="classllvm_1_1Value.html#a6393a2d4fe7e10b28a0dcc35f881567b">getType</a>()-&gt;<a class="code" href="classllvm_1_1Type.html#a1bc022868b23918efa44df511f4d5b61">isVectorTy</a>()))</div>
<div class="line"><a name="l00398"></a><span class="lineno">  398</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l00399"></a><span class="lineno">  399</span>&#160; </div>
<div class="line"><a name="l00400"></a><span class="lineno">  400</span>&#160;  <span class="comment">// If we reach here, they do have operations in common.</span></div>
<div class="line"><a name="l00401"></a><span class="lineno">  401</span>&#160;  <a class="code" href="classllvm_1_1Value.html">Value</a> *NewSI = <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.CreateSelect(<a class="code" href="BasicBlockSections_8cpp.html#a5fd0741d696f28faf65b33f6c6af8fda">Cond</a>, OtherOpT, OtherOpF,</div>
<div class="line"><a name="l00402"></a><span class="lineno">  402</span>&#160;                                      <a class="code" href="PassBuilderBindings_8cpp.html#a0f79dad1efc582555a443cc11a8fa401">SI</a>.getName() + <span class="stringliteral">&quot;.v&quot;</span>, &amp;<a class="code" href="PassBuilderBindings_8cpp.html#a0f79dad1efc582555a443cc11a8fa401">SI</a>);</div>
<div class="line"><a name="l00403"></a><span class="lineno">  403</span>&#160;  <a class="code" href="classllvm_1_1Value.html">Value</a> *Op0 = MatchIsOpZero ? MatchOp : NewSI;</div>
<div class="line"><a name="l00404"></a><span class="lineno">  404</span>&#160;  <a class="code" href="classllvm_1_1Value.html">Value</a> *Op1 = MatchIsOpZero ? NewSI : MatchOp;</div>
<div class="line"><a name="l00405"></a><span class="lineno">  405</span>&#160;  <span class="keywordflow">if</span> (<span class="keyword">auto</span> *BO = dyn_cast&lt;BinaryOperator&gt;(TI)) {</div>
<div class="line"><a name="l00406"></a><span class="lineno">  406</span>&#160;    <a class="code" href="classllvm_1_1BinaryOperator.html">BinaryOperator</a> *NewBO = <a class="code" href="classllvm_1_1BinaryOperator.html#a02ce9966395063ac501ecbc1623deda4">BinaryOperator::Create</a>(BO-&gt;getOpcode(), Op0, Op1);</div>
<div class="line"><a name="l00407"></a><span class="lineno">  407</span>&#160;    NewBO-&gt;<a class="code" href="classllvm_1_1Instruction.html#a3e6d2896c39a84cfa6c47f34cdc584ff">copyIRFlags</a>(TI);</div>
<div class="line"><a name="l00408"></a><span class="lineno">  408</span>&#160;    NewBO-&gt;<a class="code" href="classllvm_1_1Instruction.html#a4ea9acbe7fd20332ea6ccdb0183d6395">andIRFlags</a>(FI);</div>
<div class="line"><a name="l00409"></a><span class="lineno">  409</span>&#160;    <span class="keywordflow">return</span> NewBO;</div>
<div class="line"><a name="l00410"></a><span class="lineno">  410</span>&#160;  }</div>
<div class="line"><a name="l00411"></a><span class="lineno">  411</span>&#160;  <span class="keywordflow">if</span> (<span class="keyword">auto</span> *TGEP = dyn_cast&lt;GetElementPtrInst&gt;(TI)) {</div>
<div class="line"><a name="l00412"></a><span class="lineno">  412</span>&#160;    <span class="keyword">auto</span> *FGEP = cast&lt;GetElementPtrInst&gt;(FI);</div>
<div class="line"><a name="l00413"></a><span class="lineno">  413</span>&#160;    <a class="code" href="classllvm_1_1Type.html">Type</a> *ElementType = TGEP-&gt;getResultElementType();</div>
<div class="line"><a name="l00414"></a><span class="lineno">  414</span>&#160;    <span class="keywordflow">return</span> TGEP-&gt;isInBounds() &amp;&amp; FGEP-&gt;isInBounds()</div>
<div class="line"><a name="l00415"></a><span class="lineno">  415</span>&#160;               ? <a class="code" href="classllvm_1_1GetElementPtrInst.html#a9a94c15dff322a963b566d486dd673b5">GetElementPtrInst::CreateInBounds</a>(ElementType, Op0, {Op1})</div>
<div class="line"><a name="l00416"></a><span class="lineno">  416</span>&#160;               : <a class="code" href="classllvm_1_1GetElementPtrInst.html#a74c47d18ecd4ca3399785e6ae07134dc">GetElementPtrInst::Create</a>(ElementType, Op0, {Op1});</div>
<div class="line"><a name="l00417"></a><span class="lineno">  417</span>&#160;  }</div>
<div class="line"><a name="l00418"></a><span class="lineno">  418</span>&#160;  <a class="code" href="llvm_2Support_2ErrorHandling_8h.html#ace243f5c25697a1107cce46626b3dc94">llvm_unreachable</a>(<span class="stringliteral">&quot;Expected BinaryOperator or GEP&quot;</span>);</div>
<div class="line"><a name="l00419"></a><span class="lineno">  419</span>&#160;  <span class="keywordflow">return</span> <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l00420"></a><span class="lineno">  420</span>&#160;}</div>
<div class="line"><a name="l00421"></a><span class="lineno">  421</span>&#160; </div>
<div class="line"><a name="l00422"></a><span class="lineno"><a class="line" href="InstCombineSelect_8cpp.html#adcce576b2fe9a589249be2adce38a2e8">  422</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">bool</span> <a class="code" href="InstCombineSelect_8cpp.html#adcce576b2fe9a589249be2adce38a2e8">isSelect01</a>(<span class="keyword">const</span> <a class="code" href="classllvm_1_1APInt.html">APInt</a> &amp;C1I, <span class="keyword">const</span> <a class="code" href="classllvm_1_1APInt.html">APInt</a> &amp;C2I) {</div>
<div class="line"><a name="l00423"></a><span class="lineno">  423</span>&#160;  <span class="keywordflow">if</span> (!C1I.<a class="code" href="classllvm_1_1APInt.html#aba0bb0cce2530e8403a18f1bbd6ae610">isNullValue</a>() &amp;&amp; !C2I.<a class="code" href="classllvm_1_1APInt.html#aba0bb0cce2530e8403a18f1bbd6ae610">isNullValue</a>()) <span class="comment">// One side must be zero.</span></div>
<div class="line"><a name="l00424"></a><span class="lineno">  424</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l00425"></a><span class="lineno">  425</span>&#160;  <span class="keywordflow">return</span> C1I.<a class="code" href="classllvm_1_1APInt.html#a70b776533a213161c23bacae02f07c7b">isOneValue</a>() || C1I.<a class="code" href="classllvm_1_1APInt.html#ab242ccd4f07a4c82ec8150971616b491">isAllOnesValue</a>() ||</div>
<div class="line"><a name="l00426"></a><span class="lineno">  426</span>&#160;         C2I.<a class="code" href="classllvm_1_1APInt.html#a70b776533a213161c23bacae02f07c7b">isOneValue</a>() || C2I.<a class="code" href="classllvm_1_1APInt.html#ab242ccd4f07a4c82ec8150971616b491">isAllOnesValue</a>();</div>
<div class="line"><a name="l00427"></a><span class="lineno">  427</span>&#160;}</div>
<div class="line"><a name="l00428"></a><span class="lineno">  428</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l00429"></a><span class="lineno">  429</span>&#160;<span class="comment">/// Try to fold the select into one of the operands to allow further</span></div>
<div class="line"><a name="l00430"></a><span class="lineno">  430</span>&#160;<span class="comment">/// optimization.</span></div>
<div class="line"><a name="l00431"></a><span class="lineno"><a class="line" href="classllvm_1_1InstCombinerImpl.html#a9eeb1caaa920e692849cb94d64b7d66f">  431</a></span>&#160;<span class="comment"></span><a class="code" href="classllvm_1_1Instruction.html">Instruction</a> *<a class="code" href="classllvm_1_1InstCombinerImpl.html#a9eeb1caaa920e692849cb94d64b7d66f">InstCombinerImpl::foldSelectIntoOp</a>(<a class="code" href="classllvm_1_1SelectInst.html">SelectInst</a> &amp;<a class="code" href="PassBuilderBindings_8cpp.html#a0f79dad1efc582555a443cc11a8fa401">SI</a>, <a class="code" href="classllvm_1_1Value.html">Value</a> *<a class="code" href="namespacellvm_1_1tgtok.html#abbc5259d649363016626e2529fabe0c5a58b95af1ca96e109f85a0646a05fceb7">TrueVal</a>,</div>
<div class="line"><a name="l00432"></a><span class="lineno">  432</span>&#160;                                                <a class="code" href="classllvm_1_1Value.html">Value</a> *<a class="code" href="namespacellvm_1_1tgtok.html#abbc5259d649363016626e2529fabe0c5aeb5a2908109c763377832cbb4726b6d4">FalseVal</a>) {</div>
<div class="line"><a name="l00433"></a><span class="lineno">  433</span>&#160;  <span class="comment">// See the comment above GetSelectFoldableOperands for a description of the</span></div>
<div class="line"><a name="l00434"></a><span class="lineno">  434</span>&#160;  <span class="comment">// transformation we are doing here.</span></div>
<div class="line"><a name="l00435"></a><span class="lineno">  435</span>&#160;  <span class="keywordflow">if</span> (<span class="keyword">auto</span> *TVI = dyn_cast&lt;BinaryOperator&gt;(<a class="code" href="namespacellvm_1_1tgtok.html#abbc5259d649363016626e2529fabe0c5a58b95af1ca96e109f85a0646a05fceb7">TrueVal</a>)) {</div>
<div class="line"><a name="l00436"></a><span class="lineno">  436</span>&#160;    <span class="keywordflow">if</span> (TVI-&gt;hasOneUse() &amp;&amp; !isa&lt;Constant&gt;(<a class="code" href="namespacellvm_1_1tgtok.html#abbc5259d649363016626e2529fabe0c5aeb5a2908109c763377832cbb4726b6d4">FalseVal</a>)) {</div>
<div class="line"><a name="l00437"></a><span class="lineno">  437</span>&#160;      <span class="keywordflow">if</span> (<span class="keywordtype">unsigned</span> SFO = <a class="code" href="InstCombineSelect_8cpp.html#a5462cae8957c6ce96a65d693e2dac674">getSelectFoldableOperands</a>(TVI)) {</div>
<div class="line"><a name="l00438"></a><span class="lineno">  438</span>&#160;        <span class="keywordtype">unsigned</span> OpToFold = 0;</div>
<div class="line"><a name="l00439"></a><span class="lineno">  439</span>&#160;        <span class="keywordflow">if</span> ((SFO &amp; 1) &amp;&amp; <a class="code" href="namespacellvm_1_1tgtok.html#abbc5259d649363016626e2529fabe0c5aeb5a2908109c763377832cbb4726b6d4">FalseVal</a> == TVI-&gt;getOperand(0)) {</div>
<div class="line"><a name="l00440"></a><span class="lineno">  440</span>&#160;          OpToFold = 1;</div>
<div class="line"><a name="l00441"></a><span class="lineno">  441</span>&#160;        } <span class="keywordflow">else</span> <span class="keywordflow">if</span> ((SFO &amp; 2) &amp;&amp; <a class="code" href="namespacellvm_1_1tgtok.html#abbc5259d649363016626e2529fabe0c5aeb5a2908109c763377832cbb4726b6d4">FalseVal</a> == TVI-&gt;getOperand(1)) {</div>
<div class="line"><a name="l00442"></a><span class="lineno">  442</span>&#160;          OpToFold = 2;</div>
<div class="line"><a name="l00443"></a><span class="lineno">  443</span>&#160;        }</div>
<div class="line"><a name="l00444"></a><span class="lineno">  444</span>&#160; </div>
<div class="line"><a name="l00445"></a><span class="lineno">  445</span>&#160;        <span class="keywordflow">if</span> (OpToFold) {</div>
<div class="line"><a name="l00446"></a><span class="lineno">  446</span>&#160;          <a class="code" href="classllvm_1_1Constant.html">Constant</a> *<a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a> = <a class="code" href="classllvm_1_1ConstantExpr.html#a0bd26d8a07f226878a618ece056ff10c">ConstantExpr::getBinOpIdentity</a>(TVI-&gt;getOpcode(),</div>
<div class="line"><a name="l00447"></a><span class="lineno">  447</span>&#160;                                                       TVI-&gt;getType(), <span class="keyword">true</span>);</div>
<div class="line"><a name="l00448"></a><span class="lineno">  448</span>&#160;          <a class="code" href="classllvm_1_1Value.html">Value</a> *OOp = TVI-&gt;getOperand(2-OpToFold);</div>
<div class="line"><a name="l00449"></a><span class="lineno">  449</span>&#160;          <span class="comment">// Avoid creating select between 2 constants unless it&#39;s selecting</span></div>
<div class="line"><a name="l00450"></a><span class="lineno">  450</span>&#160;          <span class="comment">// between 0, 1 and -1.</span></div>
<div class="line"><a name="l00451"></a><span class="lineno">  451</span>&#160;          <span class="keyword">const</span> <a class="code" href="classllvm_1_1APInt.html">APInt</a> *OOpC;</div>
<div class="line"><a name="l00452"></a><span class="lineno">  452</span>&#160;          <span class="keywordtype">bool</span> OOpIsAPInt = <a class="code" href="namespacellvm_1_1PatternMatch.html#a25d956d9e0beadd47ce4bc255dfa811d">match</a>(OOp, <a class="code" href="namespacellvm_1_1PatternMatch.html#aac9e78b3aa02ec087c4621358f506718">m_APInt</a>(OOpC));</div>
<div class="line"><a name="l00453"></a><span class="lineno">  453</span>&#160;          <span class="keywordflow">if</span> (!isa&lt;Constant&gt;(OOp) ||</div>
<div class="line"><a name="l00454"></a><span class="lineno">  454</span>&#160;              (OOpIsAPInt &amp;&amp; <a class="code" href="InstCombineSelect_8cpp.html#adcce576b2fe9a589249be2adce38a2e8">isSelect01</a>(<a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a>-&gt;getUniqueInteger(), *OOpC))) {</div>
<div class="line"><a name="l00455"></a><span class="lineno">  455</span>&#160;            <a class="code" href="classllvm_1_1Value.html">Value</a> *NewSel = <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.CreateSelect(<a class="code" href="PassBuilderBindings_8cpp.html#a0f79dad1efc582555a443cc11a8fa401">SI</a>.getCondition(), OOp, <a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a>);</div>
<div class="line"><a name="l00456"></a><span class="lineno">  456</span>&#160;            NewSel-&gt;<a class="code" href="classllvm_1_1Value.html#ae855357b6c5e6e7ed1869272708a3a84">takeName</a>(TVI);</div>
<div class="line"><a name="l00457"></a><span class="lineno">  457</span>&#160;            <a class="code" href="classllvm_1_1BinaryOperator.html">BinaryOperator</a> *BO = <a class="code" href="classllvm_1_1BinaryOperator.html#a02ce9966395063ac501ecbc1623deda4">BinaryOperator::Create</a>(TVI-&gt;getOpcode(),</div>
<div class="line"><a name="l00458"></a><span class="lineno">  458</span>&#160;                                                        <a class="code" href="namespacellvm_1_1tgtok.html#abbc5259d649363016626e2529fabe0c5aeb5a2908109c763377832cbb4726b6d4">FalseVal</a>, NewSel);</div>
<div class="line"><a name="l00459"></a><span class="lineno">  459</span>&#160;            BO-&gt;<a class="code" href="classllvm_1_1Instruction.html#a3e6d2896c39a84cfa6c47f34cdc584ff">copyIRFlags</a>(TVI);</div>
<div class="line"><a name="l00460"></a><span class="lineno">  460</span>&#160;            <span class="keywordflow">return</span> BO;</div>
<div class="line"><a name="l00461"></a><span class="lineno">  461</span>&#160;          }</div>
<div class="line"><a name="l00462"></a><span class="lineno">  462</span>&#160;        }</div>
<div class="line"><a name="l00463"></a><span class="lineno">  463</span>&#160;      }</div>
<div class="line"><a name="l00464"></a><span class="lineno">  464</span>&#160;    }</div>
<div class="line"><a name="l00465"></a><span class="lineno">  465</span>&#160;  }</div>
<div class="line"><a name="l00466"></a><span class="lineno">  466</span>&#160; </div>
<div class="line"><a name="l00467"></a><span class="lineno">  467</span>&#160;  <span class="keywordflow">if</span> (<span class="keyword">auto</span> *FVI = dyn_cast&lt;BinaryOperator&gt;(<a class="code" href="namespacellvm_1_1tgtok.html#abbc5259d649363016626e2529fabe0c5aeb5a2908109c763377832cbb4726b6d4">FalseVal</a>)) {</div>
<div class="line"><a name="l00468"></a><span class="lineno">  468</span>&#160;    <span class="keywordflow">if</span> (FVI-&gt;hasOneUse() &amp;&amp; !isa&lt;Constant&gt;(<a class="code" href="namespacellvm_1_1tgtok.html#abbc5259d649363016626e2529fabe0c5a58b95af1ca96e109f85a0646a05fceb7">TrueVal</a>)) {</div>
<div class="line"><a name="l00469"></a><span class="lineno">  469</span>&#160;      <span class="keywordflow">if</span> (<span class="keywordtype">unsigned</span> SFO = <a class="code" href="InstCombineSelect_8cpp.html#a5462cae8957c6ce96a65d693e2dac674">getSelectFoldableOperands</a>(FVI)) {</div>
<div class="line"><a name="l00470"></a><span class="lineno">  470</span>&#160;        <span class="keywordtype">unsigned</span> OpToFold = 0;</div>
<div class="line"><a name="l00471"></a><span class="lineno">  471</span>&#160;        <span class="keywordflow">if</span> ((SFO &amp; 1) &amp;&amp; <a class="code" href="namespacellvm_1_1tgtok.html#abbc5259d649363016626e2529fabe0c5a58b95af1ca96e109f85a0646a05fceb7">TrueVal</a> == FVI-&gt;getOperand(0)) {</div>
<div class="line"><a name="l00472"></a><span class="lineno">  472</span>&#160;          OpToFold = 1;</div>
<div class="line"><a name="l00473"></a><span class="lineno">  473</span>&#160;        } <span class="keywordflow">else</span> <span class="keywordflow">if</span> ((SFO &amp; 2) &amp;&amp; <a class="code" href="namespacellvm_1_1tgtok.html#abbc5259d649363016626e2529fabe0c5a58b95af1ca96e109f85a0646a05fceb7">TrueVal</a> == FVI-&gt;getOperand(1)) {</div>
<div class="line"><a name="l00474"></a><span class="lineno">  474</span>&#160;          OpToFold = 2;</div>
<div class="line"><a name="l00475"></a><span class="lineno">  475</span>&#160;        }</div>
<div class="line"><a name="l00476"></a><span class="lineno">  476</span>&#160; </div>
<div class="line"><a name="l00477"></a><span class="lineno">  477</span>&#160;        <span class="keywordflow">if</span> (OpToFold) {</div>
<div class="line"><a name="l00478"></a><span class="lineno">  478</span>&#160;          <a class="code" href="classllvm_1_1Constant.html">Constant</a> *<a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a> = <a class="code" href="classllvm_1_1ConstantExpr.html#a0bd26d8a07f226878a618ece056ff10c">ConstantExpr::getBinOpIdentity</a>(FVI-&gt;getOpcode(),</div>
<div class="line"><a name="l00479"></a><span class="lineno">  479</span>&#160;                                                       FVI-&gt;getType(), <span class="keyword">true</span>);</div>
<div class="line"><a name="l00480"></a><span class="lineno">  480</span>&#160;          <a class="code" href="classllvm_1_1Value.html">Value</a> *OOp = FVI-&gt;getOperand(2-OpToFold);</div>
<div class="line"><a name="l00481"></a><span class="lineno">  481</span>&#160;          <span class="comment">// Avoid creating select between 2 constants unless it&#39;s selecting</span></div>
<div class="line"><a name="l00482"></a><span class="lineno">  482</span>&#160;          <span class="comment">// between 0, 1 and -1.</span></div>
<div class="line"><a name="l00483"></a><span class="lineno">  483</span>&#160;          <span class="keyword">const</span> <a class="code" href="classllvm_1_1APInt.html">APInt</a> *OOpC;</div>
<div class="line"><a name="l00484"></a><span class="lineno">  484</span>&#160;          <span class="keywordtype">bool</span> OOpIsAPInt = <a class="code" href="namespacellvm_1_1PatternMatch.html#a25d956d9e0beadd47ce4bc255dfa811d">match</a>(OOp, <a class="code" href="namespacellvm_1_1PatternMatch.html#aac9e78b3aa02ec087c4621358f506718">m_APInt</a>(OOpC));</div>
<div class="line"><a name="l00485"></a><span class="lineno">  485</span>&#160;          <span class="keywordflow">if</span> (!isa&lt;Constant&gt;(OOp) ||</div>
<div class="line"><a name="l00486"></a><span class="lineno">  486</span>&#160;              (OOpIsAPInt &amp;&amp; <a class="code" href="InstCombineSelect_8cpp.html#adcce576b2fe9a589249be2adce38a2e8">isSelect01</a>(<a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a>-&gt;getUniqueInteger(), *OOpC))) {</div>
<div class="line"><a name="l00487"></a><span class="lineno">  487</span>&#160;            <a class="code" href="classllvm_1_1Value.html">Value</a> *NewSel = <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.CreateSelect(<a class="code" href="PassBuilderBindings_8cpp.html#a0f79dad1efc582555a443cc11a8fa401">SI</a>.getCondition(), <a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a>, OOp);</div>
<div class="line"><a name="l00488"></a><span class="lineno">  488</span>&#160;            NewSel-&gt;<a class="code" href="classllvm_1_1Value.html#ae855357b6c5e6e7ed1869272708a3a84">takeName</a>(FVI);</div>
<div class="line"><a name="l00489"></a><span class="lineno">  489</span>&#160;            <a class="code" href="classllvm_1_1BinaryOperator.html">BinaryOperator</a> *BO = <a class="code" href="classllvm_1_1BinaryOperator.html#a02ce9966395063ac501ecbc1623deda4">BinaryOperator::Create</a>(FVI-&gt;getOpcode(),</div>
<div class="line"><a name="l00490"></a><span class="lineno">  490</span>&#160;                                                        <a class="code" href="namespacellvm_1_1tgtok.html#abbc5259d649363016626e2529fabe0c5a58b95af1ca96e109f85a0646a05fceb7">TrueVal</a>, NewSel);</div>
<div class="line"><a name="l00491"></a><span class="lineno">  491</span>&#160;            BO-&gt;<a class="code" href="classllvm_1_1Instruction.html#a3e6d2896c39a84cfa6c47f34cdc584ff">copyIRFlags</a>(FVI);</div>
<div class="line"><a name="l00492"></a><span class="lineno">  492</span>&#160;            <span class="keywordflow">return</span> BO;</div>
<div class="line"><a name="l00493"></a><span class="lineno">  493</span>&#160;          }</div>
<div class="line"><a name="l00494"></a><span class="lineno">  494</span>&#160;        }</div>
<div class="line"><a name="l00495"></a><span class="lineno">  495</span>&#160;      }</div>
<div class="line"><a name="l00496"></a><span class="lineno">  496</span>&#160;    }</div>
<div class="line"><a name="l00497"></a><span class="lineno">  497</span>&#160;  }</div>
<div class="line"><a name="l00498"></a><span class="lineno">  498</span>&#160; </div>
<div class="line"><a name="l00499"></a><span class="lineno">  499</span>&#160;  <span class="keywordflow">return</span> <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l00500"></a><span class="lineno">  500</span>&#160;}</div>
<div class="line"><a name="l00501"></a><span class="lineno">  501</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l00502"></a><span class="lineno">  502</span>&#160;<span class="comment">/// We want to turn:</span></div>
<div class="line"><a name="l00503"></a><span class="lineno">  503</span>&#160;<span class="comment">///   (select (icmp eq (and X, Y), 0), (and (lshr X, Z), 1), 1)</span></div>
<div class="line"><a name="l00504"></a><span class="lineno">  504</span>&#160;<span class="comment">/// into:</span></div>
<div class="line"><a name="l00505"></a><span class="lineno">  505</span>&#160;<span class="comment">///   zext (icmp ne i32 (and X, (or Y, (shl 1, Z))), 0)</span></div>
<div class="line"><a name="l00506"></a><span class="lineno">  506</span>&#160;<span class="comment">/// Note:</span></div>
<div class="line"><a name="l00507"></a><span class="lineno">  507</span>&#160;<span class="comment">///   Z may be 0 if lshr is missing.</span></div>
<div class="line"><a name="l00508"></a><span class="lineno">  508</span>&#160;<span class="comment">/// Worst-case scenario is that we will replace 5 instructions with 5 different</span></div>
<div class="line"><a name="l00509"></a><span class="lineno">  509</span>&#160;<span class="comment">/// instructions, but we got rid of select.</span></div>
<div class="line"><a name="l00510"></a><span class="lineno"><a class="line" href="InstCombineSelect_8cpp.html#a464e0e0d56a175971fa98a2f24d1432a">  510</a></span>&#160;<span class="comment"></span><span class="keyword">static</span> <a class="code" href="classllvm_1_1Instruction.html">Instruction</a> *<a class="code" href="InstCombineSelect_8cpp.html#a464e0e0d56a175971fa98a2f24d1432a">foldSelectICmpAndAnd</a>(<a class="code" href="classllvm_1_1Type.html">Type</a> *SelType, <span class="keyword">const</span> <a class="code" href="classllvm_1_1ICmpInst.html">ICmpInst</a> *Cmp,</div>
<div class="line"><a name="l00511"></a><span class="lineno">  511</span>&#160;                                         <a class="code" href="classllvm_1_1Value.html">Value</a> *TVal, <a class="code" href="classllvm_1_1Value.html">Value</a> *FVal,</div>
<div class="line"><a name="l00512"></a><span class="lineno">  512</span>&#160;                                         <a class="code" href="classllvm_1_1IRBuilder.html">InstCombiner::BuilderTy</a> &amp;<a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>) {</div>
<div class="line"><a name="l00513"></a><span class="lineno">  513</span>&#160;  <span class="keywordflow">if</span> (!(Cmp-&gt;<a class="code" href="classllvm_1_1Value.html#a3a402430a1bbe70a9282dcb0e0b6a2cd">hasOneUse</a>() &amp;&amp; Cmp-&gt;<a class="code" href="classllvm_1_1User.html#abe1de1520a21f77ac57cc210bf0fb0b4">getOperand</a>(0)-&gt;<a class="code" href="classllvm_1_1Value.html#a3a402430a1bbe70a9282dcb0e0b6a2cd">hasOneUse</a>() &amp;&amp;</div>
<div class="line"><a name="l00514"></a><span class="lineno">  514</span>&#160;        Cmp-&gt;<a class="code" href="classllvm_1_1CmpInst.html#aa7414ba9f658ff1287d22a4b8fe81bcb">getPredicate</a>() == <a class="code" href="classllvm_1_1CmpInst.html#a2be3583dac92a031fa1458d4d992c78baa719225e2de4059f93fd3209e1f48218">ICmpInst::ICMP_EQ</a> &amp;&amp;</div>
<div class="line"><a name="l00515"></a><span class="lineno">  515</span>&#160;        <a class="code" href="namespacellvm_1_1PatternMatch.html#a25d956d9e0beadd47ce4bc255dfa811d">match</a>(Cmp-&gt;<a class="code" href="classllvm_1_1User.html#abe1de1520a21f77ac57cc210bf0fb0b4">getOperand</a>(1), <a class="code" href="namespacellvm_1_1PatternMatch.html#ae77be336e228cf9aa00709a8606dfb98">m_Zero</a>()) &amp;&amp; <a class="code" href="namespacellvm_1_1PatternMatch.html#a25d956d9e0beadd47ce4bc255dfa811d">match</a>(FVal, <a class="code" href="namespacellvm_1_1PatternMatch.html#aebdb2700a77d10ae6f0ce115e23d9f77">m_One</a>())))</div>
<div class="line"><a name="l00516"></a><span class="lineno">  516</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l00517"></a><span class="lineno">  517</span>&#160; </div>
<div class="line"><a name="l00518"></a><span class="lineno">  518</span>&#160;  <span class="comment">// The TrueVal has general form of:  and %B, 1</span></div>
<div class="line"><a name="l00519"></a><span class="lineno">  519</span>&#160;  <a class="code" href="classllvm_1_1Value.html">Value</a> *<a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a>;</div>
<div class="line"><a name="l00520"></a><span class="lineno">  520</span>&#160;  <span class="keywordflow">if</span> (!<a class="code" href="namespacellvm_1_1PatternMatch.html#a25d956d9e0beadd47ce4bc255dfa811d">match</a>(TVal, <a class="code" href="namespacellvm_1_1PatternMatch.html#aca6428e7fec51ba0b55594f469eb9691">m_OneUse</a>(<a class="code" href="namespacellvm_1_1PatternMatch.html#a427435d4da769ae680a8e77ef89520aa">m_And</a>(<a class="code" href="namespacellvm_1_1PatternMatch.html#a24bca8838396aa81b87de8e7ac774b19">m_Value</a>(<a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a>), <a class="code" href="namespacellvm_1_1PatternMatch.html#aebdb2700a77d10ae6f0ce115e23d9f77">m_One</a>()))))</div>
<div class="line"><a name="l00521"></a><span class="lineno">  521</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l00522"></a><span class="lineno">  522</span>&#160; </div>
<div class="line"><a name="l00523"></a><span class="lineno">  523</span>&#160;  <span class="comment">// Where %B may be optionally shifted:  lshr %X, %Z.</span></div>
<div class="line"><a name="l00524"></a><span class="lineno">  524</span>&#160;  <a class="code" href="classllvm_1_1Value.html">Value</a> *<a class="code" href="ErlangGCPrinter_8cpp.html#a74b474c0616ab55c1d9487f11fd31d26">X</a>, *Z;</div>
<div class="line"><a name="l00525"></a><span class="lineno">  525</span>&#160;  <span class="keyword">const</span> <span class="keywordtype">bool</span> HasShift = <a class="code" href="namespacellvm_1_1PatternMatch.html#a25d956d9e0beadd47ce4bc255dfa811d">match</a>(<a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a>, <a class="code" href="namespacellvm_1_1PatternMatch.html#aca6428e7fec51ba0b55594f469eb9691">m_OneUse</a>(<a class="code" href="namespacellvm_1_1PatternMatch.html#aa08fee11e8a5ec10c0cc2a7abbbd799a">m_LShr</a>(<a class="code" href="namespacellvm_1_1PatternMatch.html#a24bca8838396aa81b87de8e7ac774b19">m_Value</a>(<a class="code" href="ErlangGCPrinter_8cpp.html#a74b474c0616ab55c1d9487f11fd31d26">X</a>), <a class="code" href="namespacellvm_1_1PatternMatch.html#a24bca8838396aa81b87de8e7ac774b19">m_Value</a>(Z))));</div>
<div class="line"><a name="l00526"></a><span class="lineno">  526</span>&#160;  <span class="keywordflow">if</span> (!HasShift)</div>
<div class="line"><a name="l00527"></a><span class="lineno">  527</span>&#160;    <a class="code" href="ErlangGCPrinter_8cpp.html#a74b474c0616ab55c1d9487f11fd31d26">X</a> = <a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a>;</div>
<div class="line"><a name="l00528"></a><span class="lineno">  528</span>&#160; </div>
<div class="line"><a name="l00529"></a><span class="lineno">  529</span>&#160;  <a class="code" href="classllvm_1_1Value.html">Value</a> *<a class="code" href="OcamlGCPrinter_8cpp.html#afcf2f797ed287a723263583c9b1c1bce">Y</a>;</div>
<div class="line"><a name="l00530"></a><span class="lineno">  530</span>&#160;  <span class="keywordflow">if</span> (!<a class="code" href="namespacellvm_1_1PatternMatch.html#a25d956d9e0beadd47ce4bc255dfa811d">match</a>(Cmp-&gt;<a class="code" href="classllvm_1_1User.html#abe1de1520a21f77ac57cc210bf0fb0b4">getOperand</a>(0), <a class="code" href="namespacellvm_1_1PatternMatch.html#ae9d735be1ececf149966a4da253f0320">m_c_And</a>(<a class="code" href="namespacellvm_1_1PatternMatch.html#a2d9861feadd3a09792967a012559e7b2">m_Specific</a>(<a class="code" href="ErlangGCPrinter_8cpp.html#a74b474c0616ab55c1d9487f11fd31d26">X</a>), <a class="code" href="namespacellvm_1_1PatternMatch.html#a24bca8838396aa81b87de8e7ac774b19">m_Value</a>(<a class="code" href="OcamlGCPrinter_8cpp.html#afcf2f797ed287a723263583c9b1c1bce">Y</a>))))</div>
<div class="line"><a name="l00531"></a><span class="lineno">  531</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l00532"></a><span class="lineno">  532</span>&#160; </div>
<div class="line"><a name="l00533"></a><span class="lineno">  533</span>&#160;  <span class="comment">// ((X &amp; Y) == 0) ? ((X &gt;&gt; Z) &amp; 1) : 1 --&gt; (X &amp; (Y | (1 &lt;&lt; Z))) != 0</span></div>
<div class="line"><a name="l00534"></a><span class="lineno">  534</span>&#160;  <span class="comment">// ((X &amp; Y) == 0) ? (X &amp; 1) : 1 --&gt; (X &amp; (Y | 1)) != 0</span></div>
<div class="line"><a name="l00535"></a><span class="lineno">  535</span>&#160;  <a class="code" href="classllvm_1_1Constant.html">Constant</a> *One = <a class="code" href="classllvm_1_1ConstantInt.html#a969709dd49c28865a482d8b870f87c46">ConstantInt::get</a>(SelType, 1);</div>
<div class="line"><a name="l00536"></a><span class="lineno">  536</span>&#160;  <a class="code" href="classllvm_1_1Value.html">Value</a> *MaskB = HasShift ? <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.CreateShl(One, Z) : One;</div>
<div class="line"><a name="l00537"></a><span class="lineno">  537</span>&#160;  <a class="code" href="classllvm_1_1Value.html">Value</a> *FullMask = <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.CreateOr(<a class="code" href="OcamlGCPrinter_8cpp.html#afcf2f797ed287a723263583c9b1c1bce">Y</a>, MaskB);</div>
<div class="line"><a name="l00538"></a><span class="lineno">  538</span>&#160;  <a class="code" href="classllvm_1_1Value.html">Value</a> *MaskedX = <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.CreateAnd(<a class="code" href="ErlangGCPrinter_8cpp.html#a74b474c0616ab55c1d9487f11fd31d26">X</a>, FullMask);</div>
<div class="line"><a name="l00539"></a><span class="lineno">  539</span>&#160;  <a class="code" href="classllvm_1_1Value.html">Value</a> *ICmpNeZero = <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.CreateIsNotNull(MaskedX);</div>
<div class="line"><a name="l00540"></a><span class="lineno">  540</span>&#160;  <span class="keywordflow">return</span> <span class="keyword">new</span> <a class="code" href="classllvm_1_1ZExtInst.html">ZExtInst</a>(ICmpNeZero, SelType);</div>
<div class="line"><a name="l00541"></a><span class="lineno">  541</span>&#160;}</div>
<div class="line"><a name="l00542"></a><span class="lineno">  542</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l00543"></a><span class="lineno">  543</span>&#160;<span class="comment">/// We want to turn:</span></div>
<div class="line"><a name="l00544"></a><span class="lineno">  544</span>&#160;<span class="comment">///   (select (icmp sgt x, C), lshr (X, Y), ashr (X, Y)); iff C s&gt;= -1</span></div>
<div class="line"><a name="l00545"></a><span class="lineno">  545</span>&#160;<span class="comment">///   (select (icmp slt x, C), ashr (X, Y), lshr (X, Y)); iff C s&gt;= 0</span></div>
<div class="line"><a name="l00546"></a><span class="lineno">  546</span>&#160;<span class="comment">/// into:</span></div>
<div class="line"><a name="l00547"></a><span class="lineno">  547</span>&#160;<span class="comment">///   ashr (X, Y)</span></div>
<div class="line"><a name="l00548"></a><span class="lineno"><a class="line" href="InstCombineSelect_8cpp.html#ae1c9046639894b4a7f8177e21c97a79c">  548</a></span>&#160;<span class="comment"></span><span class="keyword">static</span> <a class="code" href="classllvm_1_1Value.html">Value</a> *<a class="code" href="InstCombineSelect_8cpp.html#ae1c9046639894b4a7f8177e21c97a79c">foldSelectICmpLshrAshr</a>(<span class="keyword">const</span> <a class="code" href="classllvm_1_1ICmpInst.html">ICmpInst</a> *IC, <a class="code" href="classllvm_1_1Value.html">Value</a> *<a class="code" href="namespacellvm_1_1tgtok.html#abbc5259d649363016626e2529fabe0c5a58b95af1ca96e109f85a0646a05fceb7">TrueVal</a>,</div>
<div class="line"><a name="l00549"></a><span class="lineno">  549</span>&#160;                                     <a class="code" href="classllvm_1_1Value.html">Value</a> *<a class="code" href="namespacellvm_1_1tgtok.html#abbc5259d649363016626e2529fabe0c5aeb5a2908109c763377832cbb4726b6d4">FalseVal</a>,</div>
<div class="line"><a name="l00550"></a><span class="lineno">  550</span>&#160;                                     <a class="code" href="classllvm_1_1IRBuilder.html">InstCombiner::BuilderTy</a> &amp;<a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>) {</div>
<div class="line"><a name="l00551"></a><span class="lineno">  551</span>&#160;  <a class="code" href="classllvm_1_1CmpInst.html#a2be3583dac92a031fa1458d4d992c78b">ICmpInst::Predicate</a> Pred = IC-&gt;<a class="code" href="classllvm_1_1CmpInst.html#aa7414ba9f658ff1287d22a4b8fe81bcb">getPredicate</a>();</div>
<div class="line"><a name="l00552"></a><span class="lineno">  552</span>&#160;  <a class="code" href="classllvm_1_1Value.html">Value</a> *CmpLHS = IC-&gt;<a class="code" href="classllvm_1_1User.html#abe1de1520a21f77ac57cc210bf0fb0b4">getOperand</a>(0);</div>
<div class="line"><a name="l00553"></a><span class="lineno">  553</span>&#160;  <a class="code" href="classllvm_1_1Value.html">Value</a> *CmpRHS = IC-&gt;<a class="code" href="classllvm_1_1User.html#abe1de1520a21f77ac57cc210bf0fb0b4">getOperand</a>(1);</div>
<div class="line"><a name="l00554"></a><span class="lineno">  554</span>&#160;  <span class="keywordflow">if</span> (!CmpRHS-&gt;<a class="code" href="classllvm_1_1Value.html#a6393a2d4fe7e10b28a0dcc35f881567b">getType</a>()-&gt;<a class="code" href="classllvm_1_1Type.html#a34ee40bb2f4f5ece47ef19e5f1f57e3c">isIntOrIntVectorTy</a>())</div>
<div class="line"><a name="l00555"></a><span class="lineno">  555</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l00556"></a><span class="lineno">  556</span>&#160; </div>
<div class="line"><a name="l00557"></a><span class="lineno">  557</span>&#160;  <a class="code" href="classllvm_1_1Value.html">Value</a> *<a class="code" href="ErlangGCPrinter_8cpp.html#a74b474c0616ab55c1d9487f11fd31d26">X</a>, *<a class="code" href="OcamlGCPrinter_8cpp.html#afcf2f797ed287a723263583c9b1c1bce">Y</a>;</div>
<div class="line"><a name="l00558"></a><span class="lineno">  558</span>&#160;  <span class="keywordtype">unsigned</span> Bitwidth = CmpRHS-&gt;<a class="code" href="classllvm_1_1Value.html#a6393a2d4fe7e10b28a0dcc35f881567b">getType</a>()-&gt;<a class="code" href="classllvm_1_1Type.html#a9f382207d841377156d4c7868b66b9a5">getScalarSizeInBits</a>();</div>
<div class="line"><a name="l00559"></a><span class="lineno">  559</span>&#160;  <span class="keywordflow">if</span> ((Pred != <a class="code" href="classllvm_1_1CmpInst.html#a2be3583dac92a031fa1458d4d992c78ba720a42e85f7e981afd61e28473b0000a">ICmpInst::ICMP_SGT</a> ||</div>
<div class="line"><a name="l00560"></a><span class="lineno">  560</span>&#160;       !<a class="code" href="namespacellvm_1_1PatternMatch.html#a25d956d9e0beadd47ce4bc255dfa811d">match</a>(CmpRHS,</div>
<div class="line"><a name="l00561"></a><span class="lineno">  561</span>&#160;              <a class="code" href="namespacellvm_1_1PatternMatch.html#abb22519fa3bf66d9e0bc6d1a733a5821">m_SpecificInt_ICMP</a>(<a class="code" href="classllvm_1_1CmpInst.html#a2be3583dac92a031fa1458d4d992c78bac1aa7b798ba11d2e497d5cce6ce6d3dc">ICmpInst::ICMP_SGE</a>, <a class="code" href="classllvm_1_1APInt.html">APInt</a>(Bitwidth, -1)))) &amp;&amp;</div>
<div class="line"><a name="l00562"></a><span class="lineno">  562</span>&#160;      (Pred != <a class="code" href="classllvm_1_1CmpInst.html#a2be3583dac92a031fa1458d4d992c78ba15ae464950ac676919c2f0c7aafc706c">ICmpInst::ICMP_SLT</a> ||</div>
<div class="line"><a name="l00563"></a><span class="lineno">  563</span>&#160;       !<a class="code" href="namespacellvm_1_1PatternMatch.html#a25d956d9e0beadd47ce4bc255dfa811d">match</a>(CmpRHS,</div>
<div class="line"><a name="l00564"></a><span class="lineno">  564</span>&#160;              <a class="code" href="namespacellvm_1_1PatternMatch.html#abb22519fa3bf66d9e0bc6d1a733a5821">m_SpecificInt_ICMP</a>(<a class="code" href="classllvm_1_1CmpInst.html#a2be3583dac92a031fa1458d4d992c78bac1aa7b798ba11d2e497d5cce6ce6d3dc">ICmpInst::ICMP_SGE</a>, <a class="code" href="classllvm_1_1APInt.html">APInt</a>(Bitwidth, 0)))))</div>
<div class="line"><a name="l00565"></a><span class="lineno">  565</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l00566"></a><span class="lineno">  566</span>&#160; </div>
<div class="line"><a name="l00567"></a><span class="lineno">  567</span>&#160;  <span class="comment">// Canonicalize so that ashr is in FalseVal.</span></div>
<div class="line"><a name="l00568"></a><span class="lineno">  568</span>&#160;  <span class="keywordflow">if</span> (Pred == <a class="code" href="classllvm_1_1CmpInst.html#a2be3583dac92a031fa1458d4d992c78ba15ae464950ac676919c2f0c7aafc706c">ICmpInst::ICMP_SLT</a>)</div>
<div class="line"><a name="l00569"></a><span class="lineno">  569</span>&#160;    <a class="code" href="namespacestd.html#ab8424022895aee3e366fb9a32f2883cb">std::swap</a>(<a class="code" href="namespacellvm_1_1tgtok.html#abbc5259d649363016626e2529fabe0c5a58b95af1ca96e109f85a0646a05fceb7">TrueVal</a>, <a class="code" href="namespacellvm_1_1tgtok.html#abbc5259d649363016626e2529fabe0c5aeb5a2908109c763377832cbb4726b6d4">FalseVal</a>);</div>
<div class="line"><a name="l00570"></a><span class="lineno">  570</span>&#160; </div>
<div class="line"><a name="l00571"></a><span class="lineno">  571</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="namespacellvm_1_1PatternMatch.html#a25d956d9e0beadd47ce4bc255dfa811d">match</a>(<a class="code" href="namespacellvm_1_1tgtok.html#abbc5259d649363016626e2529fabe0c5a58b95af1ca96e109f85a0646a05fceb7">TrueVal</a>, <a class="code" href="namespacellvm_1_1PatternMatch.html#aa08fee11e8a5ec10c0cc2a7abbbd799a">m_LShr</a>(<a class="code" href="namespacellvm_1_1PatternMatch.html#a24bca8838396aa81b87de8e7ac774b19">m_Value</a>(<a class="code" href="ErlangGCPrinter_8cpp.html#a74b474c0616ab55c1d9487f11fd31d26">X</a>), <a class="code" href="namespacellvm_1_1PatternMatch.html#a24bca8838396aa81b87de8e7ac774b19">m_Value</a>(<a class="code" href="OcamlGCPrinter_8cpp.html#afcf2f797ed287a723263583c9b1c1bce">Y</a>))) &amp;&amp;</div>
<div class="line"><a name="l00572"></a><span class="lineno">  572</span>&#160;      <a class="code" href="namespacellvm_1_1PatternMatch.html#a25d956d9e0beadd47ce4bc255dfa811d">match</a>(<a class="code" href="namespacellvm_1_1tgtok.html#abbc5259d649363016626e2529fabe0c5aeb5a2908109c763377832cbb4726b6d4">FalseVal</a>, <a class="code" href="namespacellvm_1_1PatternMatch.html#a64153676e101a130bbbaaf91635d253a">m_AShr</a>(<a class="code" href="namespacellvm_1_1PatternMatch.html#a2d9861feadd3a09792967a012559e7b2">m_Specific</a>(<a class="code" href="ErlangGCPrinter_8cpp.html#a74b474c0616ab55c1d9487f11fd31d26">X</a>), <a class="code" href="namespacellvm_1_1PatternMatch.html#a2d9861feadd3a09792967a012559e7b2">m_Specific</a>(<a class="code" href="OcamlGCPrinter_8cpp.html#afcf2f797ed287a723263583c9b1c1bce">Y</a>))) &amp;&amp;</div>
<div class="line"><a name="l00573"></a><span class="lineno">  573</span>&#160;      <a class="code" href="namespacellvm_1_1PatternMatch.html#a25d956d9e0beadd47ce4bc255dfa811d">match</a>(CmpLHS, <a class="code" href="namespacellvm_1_1PatternMatch.html#a2d9861feadd3a09792967a012559e7b2">m_Specific</a>(<a class="code" href="ErlangGCPrinter_8cpp.html#a74b474c0616ab55c1d9487f11fd31d26">X</a>))) {</div>
<div class="line"><a name="l00574"></a><span class="lineno">  574</span>&#160;    <span class="keyword">const</span> <span class="keyword">auto</span> *Ashr = cast&lt;Instruction&gt;(<a class="code" href="namespacellvm_1_1tgtok.html#abbc5259d649363016626e2529fabe0c5aeb5a2908109c763377832cbb4726b6d4">FalseVal</a>);</div>
<div class="line"><a name="l00575"></a><span class="lineno">  575</span>&#160;    <span class="comment">// if lshr is not exact and ashr is, this new ashr must not be exact.</span></div>
<div class="line"><a name="l00576"></a><span class="lineno">  576</span>&#160;    <span class="keywordtype">bool</span> IsExact = Ashr-&gt;isExact() &amp;&amp; cast&lt;Instruction&gt;(<a class="code" href="namespacellvm_1_1tgtok.html#abbc5259d649363016626e2529fabe0c5a58b95af1ca96e109f85a0646a05fceb7">TrueVal</a>)-&gt;isExact();</div>
<div class="line"><a name="l00577"></a><span class="lineno">  577</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.CreateAShr(<a class="code" href="ErlangGCPrinter_8cpp.html#a74b474c0616ab55c1d9487f11fd31d26">X</a>, <a class="code" href="OcamlGCPrinter_8cpp.html#afcf2f797ed287a723263583c9b1c1bce">Y</a>, IC-&gt;<a class="code" href="classllvm_1_1Value.html#adb5c319f5905c1d3ca9eb5df546388c5">getName</a>(), IsExact);</div>
<div class="line"><a name="l00578"></a><span class="lineno">  578</span>&#160;  }</div>
<div class="line"><a name="l00579"></a><span class="lineno">  579</span>&#160; </div>
<div class="line"><a name="l00580"></a><span class="lineno">  580</span>&#160;  <span class="keywordflow">return</span> <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l00581"></a><span class="lineno">  581</span>&#160;}</div>
<div class="line"><a name="l00582"></a><span class="lineno">  582</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l00583"></a><span class="lineno">  583</span>&#160;<span class="comment">/// We want to turn:</span></div>
<div class="line"><a name="l00584"></a><span class="lineno">  584</span>&#160;<span class="comment">///   (select (icmp eq (and X, C1), 0), Y, (or Y, C2))</span></div>
<div class="line"><a name="l00585"></a><span class="lineno">  585</span>&#160;<span class="comment">/// into:</span></div>
<div class="line"><a name="l00586"></a><span class="lineno">  586</span>&#160;<span class="comment">///   (or (shl (and X, C1), C3), Y)</span></div>
<div class="line"><a name="l00587"></a><span class="lineno">  587</span>&#160;<span class="comment">/// iff:</span></div>
<div class="line"><a name="l00588"></a><span class="lineno">  588</span>&#160;<span class="comment">///   C1 and C2 are both powers of 2</span></div>
<div class="line"><a name="l00589"></a><span class="lineno">  589</span>&#160;<span class="comment">/// where:</span></div>
<div class="line"><a name="l00590"></a><span class="lineno">  590</span>&#160;<span class="comment">///   C3 = Log(C2) - Log(C1)</span></div>
<div class="line"><a name="l00591"></a><span class="lineno">  591</span>&#160;<span class="comment">///</span></div>
<div class="line"><a name="l00592"></a><span class="lineno">  592</span>&#160;<span class="comment">/// This transform handles cases where:</span></div>
<div class="line"><a name="l00593"></a><span class="lineno">  593</span>&#160;<span class="comment">/// 1. The icmp predicate is inverted</span></div>
<div class="line"><a name="l00594"></a><span class="lineno">  594</span>&#160;<span class="comment">/// 2. The select operands are reversed</span></div>
<div class="line"><a name="l00595"></a><span class="lineno">  595</span>&#160;<span class="comment">/// 3. The magnitude of C2 and C1 are flipped</span></div>
<div class="line"><a name="l00596"></a><span class="lineno"><a class="line" href="InstCombineSelect_8cpp.html#ac688735a31429ba396e9252a4c49543e">  596</a></span>&#160;<span class="comment"></span><span class="keyword">static</span> <a class="code" href="classllvm_1_1Value.html">Value</a> *<a class="code" href="InstCombineSelect_8cpp.html#ac688735a31429ba396e9252a4c49543e">foldSelectICmpAndOr</a>(<span class="keyword">const</span> <a class="code" href="classllvm_1_1ICmpInst.html">ICmpInst</a> *IC, <a class="code" href="classllvm_1_1Value.html">Value</a> *<a class="code" href="namespacellvm_1_1tgtok.html#abbc5259d649363016626e2529fabe0c5a58b95af1ca96e109f85a0646a05fceb7">TrueVal</a>,</div>
<div class="line"><a name="l00597"></a><span class="lineno">  597</span>&#160;                                  <a class="code" href="classllvm_1_1Value.html">Value</a> *<a class="code" href="namespacellvm_1_1tgtok.html#abbc5259d649363016626e2529fabe0c5aeb5a2908109c763377832cbb4726b6d4">FalseVal</a>,</div>
<div class="line"><a name="l00598"></a><span class="lineno">  598</span>&#160;                                  <a class="code" href="classllvm_1_1IRBuilder.html">InstCombiner::BuilderTy</a> &amp;<a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>) {</div>
<div class="line"><a name="l00599"></a><span class="lineno">  599</span>&#160;  <span class="comment">// Only handle integer compares. Also, if this is a vector select, we need a</span></div>
<div class="line"><a name="l00600"></a><span class="lineno">  600</span>&#160;  <span class="comment">// vector compare.</span></div>
<div class="line"><a name="l00601"></a><span class="lineno">  601</span>&#160;  <span class="keywordflow">if</span> (!<a class="code" href="namespacellvm_1_1tgtok.html#abbc5259d649363016626e2529fabe0c5a58b95af1ca96e109f85a0646a05fceb7">TrueVal</a>-&gt;getType()-&gt;isIntOrIntVectorTy() ||</div>
<div class="line"><a name="l00602"></a><span class="lineno">  602</span>&#160;      <a class="code" href="namespacellvm_1_1tgtok.html#abbc5259d649363016626e2529fabe0c5a58b95af1ca96e109f85a0646a05fceb7">TrueVal</a>-&gt;getType()-&gt;isVectorTy() != IC-&gt;<a class="code" href="classllvm_1_1Value.html#a6393a2d4fe7e10b28a0dcc35f881567b">getType</a>()-&gt;<a class="code" href="classllvm_1_1Type.html#a1bc022868b23918efa44df511f4d5b61">isVectorTy</a>())</div>
<div class="line"><a name="l00603"></a><span class="lineno">  603</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l00604"></a><span class="lineno">  604</span>&#160; </div>
<div class="line"><a name="l00605"></a><span class="lineno">  605</span>&#160;  <a class="code" href="classllvm_1_1Value.html">Value</a> *CmpLHS = IC-&gt;<a class="code" href="classllvm_1_1User.html#abe1de1520a21f77ac57cc210bf0fb0b4">getOperand</a>(0);</div>
<div class="line"><a name="l00606"></a><span class="lineno">  606</span>&#160;  <a class="code" href="classllvm_1_1Value.html">Value</a> *CmpRHS = IC-&gt;<a class="code" href="classllvm_1_1User.html#abe1de1520a21f77ac57cc210bf0fb0b4">getOperand</a>(1);</div>
<div class="line"><a name="l00607"></a><span class="lineno">  607</span>&#160; </div>
<div class="line"><a name="l00608"></a><span class="lineno">  608</span>&#160;  <a class="code" href="classllvm_1_1Value.html">Value</a> *V;</div>
<div class="line"><a name="l00609"></a><span class="lineno">  609</span>&#160;  <span class="keywordtype">unsigned</span> C1Log;</div>
<div class="line"><a name="l00610"></a><span class="lineno">  610</span>&#160;  <span class="keywordtype">bool</span> IsEqualZero;</div>
<div class="line"><a name="l00611"></a><span class="lineno">  611</span>&#160;  <span class="keywordtype">bool</span> <a class="code" href="HexagonGenExtract_8cpp.html#a2510a160fea14eba093f818fd9230f25">NeedAnd</a> = <span class="keyword">false</span>;</div>
<div class="line"><a name="l00612"></a><span class="lineno">  612</span>&#160;  <span class="keywordflow">if</span> (IC-&gt;<a class="code" href="classllvm_1_1ICmpInst.html#abe8988eef2e6fc2baba032cb22afedd7">isEquality</a>()) {</div>
<div class="line"><a name="l00613"></a><span class="lineno">  613</span>&#160;    <span class="keywordflow">if</span> (!<a class="code" href="namespacellvm_1_1PatternMatch.html#a25d956d9e0beadd47ce4bc255dfa811d">match</a>(CmpRHS, <a class="code" href="namespacellvm_1_1PatternMatch.html#ae77be336e228cf9aa00709a8606dfb98">m_Zero</a>()))</div>
<div class="line"><a name="l00614"></a><span class="lineno">  614</span>&#160;      <span class="keywordflow">return</span> <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l00615"></a><span class="lineno">  615</span>&#160; </div>
<div class="line"><a name="l00616"></a><span class="lineno">  616</span>&#160;    <span class="keyword">const</span> <a class="code" href="classllvm_1_1APInt.html">APInt</a> *<a class="code" href="lib_2Target_2README_8txt.html#a2a2df5a25b9c703e74e82b48a75d0c3d">C1</a>;</div>
<div class="line"><a name="l00617"></a><span class="lineno">  617</span>&#160;    <span class="keywordflow">if</span> (!<a class="code" href="namespacellvm_1_1PatternMatch.html#a25d956d9e0beadd47ce4bc255dfa811d">match</a>(CmpLHS, <a class="code" href="namespacellvm_1_1PatternMatch.html#a427435d4da769ae680a8e77ef89520aa">m_And</a>(<a class="code" href="namespacellvm_1_1PatternMatch.html#a24bca8838396aa81b87de8e7ac774b19">m_Value</a>(), <a class="code" href="namespacellvm_1_1PatternMatch.html#ad5e60756e331a97669d11b5c9d8691a2">m_Power2</a>(<a class="code" href="lib_2Target_2README_8txt.html#a2a2df5a25b9c703e74e82b48a75d0c3d">C1</a>))))</div>
<div class="line"><a name="l00618"></a><span class="lineno">  618</span>&#160;      <span class="keywordflow">return</span> <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l00619"></a><span class="lineno">  619</span>&#160; </div>
<div class="line"><a name="l00620"></a><span class="lineno">  620</span>&#160;    V = CmpLHS;</div>
<div class="line"><a name="l00621"></a><span class="lineno">  621</span>&#160;    C1Log = <a class="code" href="lib_2Target_2README_8txt.html#a2a2df5a25b9c703e74e82b48a75d0c3d">C1</a>-&gt;logBase2();</div>
<div class="line"><a name="l00622"></a><span class="lineno">  622</span>&#160;    IsEqualZero = IC-&gt;<a class="code" href="classllvm_1_1CmpInst.html#aa7414ba9f658ff1287d22a4b8fe81bcb">getPredicate</a>() == <a class="code" href="classllvm_1_1CmpInst.html#a2be3583dac92a031fa1458d4d992c78baa719225e2de4059f93fd3209e1f48218">ICmpInst::ICMP_EQ</a>;</div>
<div class="line"><a name="l00623"></a><span class="lineno">  623</span>&#160;  } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (IC-&gt;<a class="code" href="classllvm_1_1CmpInst.html#aa7414ba9f658ff1287d22a4b8fe81bcb">getPredicate</a>() == <a class="code" href="classllvm_1_1CmpInst.html#a2be3583dac92a031fa1458d4d992c78ba15ae464950ac676919c2f0c7aafc706c">ICmpInst::ICMP_SLT</a> ||</div>
<div class="line"><a name="l00624"></a><span class="lineno">  624</span>&#160;             IC-&gt;<a class="code" href="classllvm_1_1CmpInst.html#aa7414ba9f658ff1287d22a4b8fe81bcb">getPredicate</a>() == <a class="code" href="classllvm_1_1CmpInst.html#a2be3583dac92a031fa1458d4d992c78ba720a42e85f7e981afd61e28473b0000a">ICmpInst::ICMP_SGT</a>) {</div>
<div class="line"><a name="l00625"></a><span class="lineno">  625</span>&#160;    <span class="comment">// We also need to recognize (icmp slt (trunc (X)), 0) and</span></div>
<div class="line"><a name="l00626"></a><span class="lineno">  626</span>&#160;    <span class="comment">// (icmp sgt (trunc (X)), -1).</span></div>
<div class="line"><a name="l00627"></a><span class="lineno">  627</span>&#160;    IsEqualZero = IC-&gt;<a class="code" href="classllvm_1_1CmpInst.html#aa7414ba9f658ff1287d22a4b8fe81bcb">getPredicate</a>() == <a class="code" href="classllvm_1_1CmpInst.html#a2be3583dac92a031fa1458d4d992c78ba720a42e85f7e981afd61e28473b0000a">ICmpInst::ICMP_SGT</a>;</div>
<div class="line"><a name="l00628"></a><span class="lineno">  628</span>&#160;    <span class="keywordflow">if</span> ((IsEqualZero &amp;&amp; !<a class="code" href="namespacellvm_1_1PatternMatch.html#a25d956d9e0beadd47ce4bc255dfa811d">match</a>(CmpRHS, <a class="code" href="namespacellvm_1_1PatternMatch.html#aaea0d5ebb8b57ddde2095f80e2e94bb2">m_AllOnes</a>())) ||</div>
<div class="line"><a name="l00629"></a><span class="lineno">  629</span>&#160;        (!IsEqualZero &amp;&amp; !<a class="code" href="namespacellvm_1_1PatternMatch.html#a25d956d9e0beadd47ce4bc255dfa811d">match</a>(CmpRHS, <a class="code" href="namespacellvm_1_1PatternMatch.html#ae77be336e228cf9aa00709a8606dfb98">m_Zero</a>())))</div>
<div class="line"><a name="l00630"></a><span class="lineno">  630</span>&#160;      <span class="keywordflow">return</span> <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l00631"></a><span class="lineno">  631</span>&#160; </div>
<div class="line"><a name="l00632"></a><span class="lineno">  632</span>&#160;    <span class="keywordflow">if</span> (!<a class="code" href="namespacellvm_1_1PatternMatch.html#a25d956d9e0beadd47ce4bc255dfa811d">match</a>(CmpLHS, <a class="code" href="namespacellvm_1_1PatternMatch.html#aca6428e7fec51ba0b55594f469eb9691">m_OneUse</a>(<a class="code" href="namespacellvm_1_1PatternMatch.html#a5b844aada27c4c6fdb87146ac458c0d8">m_Trunc</a>(<a class="code" href="namespacellvm_1_1PatternMatch.html#a24bca8838396aa81b87de8e7ac774b19">m_Value</a>(V)))))</div>
<div class="line"><a name="l00633"></a><span class="lineno">  633</span>&#160;      <span class="keywordflow">return</span> <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l00634"></a><span class="lineno">  634</span>&#160; </div>
<div class="line"><a name="l00635"></a><span class="lineno">  635</span>&#160;    C1Log = CmpLHS-&gt;<a class="code" href="classllvm_1_1Value.html#a6393a2d4fe7e10b28a0dcc35f881567b">getType</a>()-&gt;<a class="code" href="classllvm_1_1Type.html#a9f382207d841377156d4c7868b66b9a5">getScalarSizeInBits</a>() - 1;</div>
<div class="line"><a name="l00636"></a><span class="lineno">  636</span>&#160;    <a class="code" href="HexagonGenExtract_8cpp.html#a2510a160fea14eba093f818fd9230f25">NeedAnd</a> = <span class="keyword">true</span>;</div>
<div class="line"><a name="l00637"></a><span class="lineno">  637</span>&#160;  } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00638"></a><span class="lineno">  638</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l00639"></a><span class="lineno">  639</span>&#160;  }</div>
<div class="line"><a name="l00640"></a><span class="lineno">  640</span>&#160; </div>
<div class="line"><a name="l00641"></a><span class="lineno">  641</span>&#160;  <span class="keyword">const</span> <a class="code" href="classllvm_1_1APInt.html">APInt</a> *C2;</div>
<div class="line"><a name="l00642"></a><span class="lineno">  642</span>&#160;  <span class="keywordtype">bool</span> OrOnTrueVal = <span class="keyword">false</span>;</div>
<div class="line"><a name="l00643"></a><span class="lineno">  643</span>&#160;  <span class="keywordtype">bool</span> OrOnFalseVal = <a class="code" href="namespacellvm_1_1PatternMatch.html#a25d956d9e0beadd47ce4bc255dfa811d">match</a>(<a class="code" href="namespacellvm_1_1tgtok.html#abbc5259d649363016626e2529fabe0c5aeb5a2908109c763377832cbb4726b6d4">FalseVal</a>, <a class="code" href="namespacellvm_1_1PatternMatch.html#a42569041ddafba7d40243e126af07f42">m_Or</a>(<a class="code" href="namespacellvm_1_1PatternMatch.html#a2d9861feadd3a09792967a012559e7b2">m_Specific</a>(<a class="code" href="namespacellvm_1_1tgtok.html#abbc5259d649363016626e2529fabe0c5a58b95af1ca96e109f85a0646a05fceb7">TrueVal</a>), <a class="code" href="namespacellvm_1_1PatternMatch.html#ad5e60756e331a97669d11b5c9d8691a2">m_Power2</a>(C2)));</div>
<div class="line"><a name="l00644"></a><span class="lineno">  644</span>&#160;  <span class="keywordflow">if</span> (!OrOnFalseVal)</div>
<div class="line"><a name="l00645"></a><span class="lineno">  645</span>&#160;    OrOnTrueVal = <a class="code" href="namespacellvm_1_1PatternMatch.html#a25d956d9e0beadd47ce4bc255dfa811d">match</a>(<a class="code" href="namespacellvm_1_1tgtok.html#abbc5259d649363016626e2529fabe0c5a58b95af1ca96e109f85a0646a05fceb7">TrueVal</a>, <a class="code" href="namespacellvm_1_1PatternMatch.html#a42569041ddafba7d40243e126af07f42">m_Or</a>(<a class="code" href="namespacellvm_1_1PatternMatch.html#a2d9861feadd3a09792967a012559e7b2">m_Specific</a>(<a class="code" href="namespacellvm_1_1tgtok.html#abbc5259d649363016626e2529fabe0c5aeb5a2908109c763377832cbb4726b6d4">FalseVal</a>), <a class="code" href="namespacellvm_1_1PatternMatch.html#ad5e60756e331a97669d11b5c9d8691a2">m_Power2</a>(C2)));</div>
<div class="line"><a name="l00646"></a><span class="lineno">  646</span>&#160; </div>
<div class="line"><a name="l00647"></a><span class="lineno">  647</span>&#160;  <span class="keywordflow">if</span> (!OrOnFalseVal &amp;&amp; !OrOnTrueVal)</div>
<div class="line"><a name="l00648"></a><span class="lineno">  648</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l00649"></a><span class="lineno">  649</span>&#160; </div>
<div class="line"><a name="l00650"></a><span class="lineno">  650</span>&#160;  <a class="code" href="classllvm_1_1Value.html">Value</a> *<a class="code" href="OcamlGCPrinter_8cpp.html#afcf2f797ed287a723263583c9b1c1bce">Y</a> = OrOnFalseVal ? <a class="code" href="namespacellvm_1_1tgtok.html#abbc5259d649363016626e2529fabe0c5a58b95af1ca96e109f85a0646a05fceb7">TrueVal</a> : <a class="code" href="namespacellvm_1_1tgtok.html#abbc5259d649363016626e2529fabe0c5aeb5a2908109c763377832cbb4726b6d4">FalseVal</a>;</div>
<div class="line"><a name="l00651"></a><span class="lineno">  651</span>&#160; </div>
<div class="line"><a name="l00652"></a><span class="lineno">  652</span>&#160;  <span class="keywordtype">unsigned</span> C2Log = C2-&gt;<a class="code" href="classllvm_1_1APInt.html#aae3b959a0a2981340fd03c29f528f2f0">logBase2</a>();</div>
<div class="line"><a name="l00653"></a><span class="lineno">  653</span>&#160; </div>
<div class="line"><a name="l00654"></a><span class="lineno">  654</span>&#160;  <span class="keywordtype">bool</span> NeedXor = (!IsEqualZero &amp;&amp; OrOnFalseVal) || (IsEqualZero &amp;&amp; OrOnTrueVal);</div>
<div class="line"><a name="l00655"></a><span class="lineno">  655</span>&#160;  <span class="keywordtype">bool</span> NeedShift = C1Log != C2Log;</div>
<div class="line"><a name="l00656"></a><span class="lineno">  656</span>&#160;  <span class="keywordtype">bool</span> NeedZExtTrunc = <a class="code" href="OcamlGCPrinter_8cpp.html#afcf2f797ed287a723263583c9b1c1bce">Y</a>-&gt;getType()-&gt;getScalarSizeInBits() !=</div>
<div class="line"><a name="l00657"></a><span class="lineno">  657</span>&#160;                       V-&gt;<a class="code" href="classllvm_1_1Value.html#a6393a2d4fe7e10b28a0dcc35f881567b">getType</a>()-&gt;<a class="code" href="classllvm_1_1Type.html#a9f382207d841377156d4c7868b66b9a5">getScalarSizeInBits</a>();</div>
<div class="line"><a name="l00658"></a><span class="lineno">  658</span>&#160; </div>
<div class="line"><a name="l00659"></a><span class="lineno">  659</span>&#160;  <span class="comment">// Make sure we don&#39;t create more instructions than we save.</span></div>
<div class="line"><a name="l00660"></a><span class="lineno">  660</span>&#160;  <a class="code" href="classllvm_1_1Value.html">Value</a> *Or = OrOnFalseVal ? <a class="code" href="namespacellvm_1_1tgtok.html#abbc5259d649363016626e2529fabe0c5aeb5a2908109c763377832cbb4726b6d4">FalseVal</a> : <a class="code" href="namespacellvm_1_1tgtok.html#abbc5259d649363016626e2529fabe0c5a58b95af1ca96e109f85a0646a05fceb7">TrueVal</a>;</div>
<div class="line"><a name="l00661"></a><span class="lineno">  661</span>&#160;  <span class="keywordflow">if</span> ((NeedShift + NeedXor + NeedZExtTrunc) &gt;</div>
<div class="line"><a name="l00662"></a><span class="lineno">  662</span>&#160;      (IC-&gt;<a class="code" href="classllvm_1_1Value.html#a3a402430a1bbe70a9282dcb0e0b6a2cd">hasOneUse</a>() + Or-&gt;<a class="code" href="classllvm_1_1Value.html#a3a402430a1bbe70a9282dcb0e0b6a2cd">hasOneUse</a>()))</div>
<div class="line"><a name="l00663"></a><span class="lineno">  663</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l00664"></a><span class="lineno">  664</span>&#160; </div>
<div class="line"><a name="l00665"></a><span class="lineno">  665</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="HexagonGenExtract_8cpp.html#a2510a160fea14eba093f818fd9230f25">NeedAnd</a>) {</div>
<div class="line"><a name="l00666"></a><span class="lineno">  666</span>&#160;    <span class="comment">// Insert the AND instruction on the input to the truncate.</span></div>
<div class="line"><a name="l00667"></a><span class="lineno">  667</span>&#160;    <a class="code" href="classllvm_1_1APInt.html">APInt</a> <a class="code" href="lib_2Target_2README_8txt.html#a2a2df5a25b9c703e74e82b48a75d0c3d">C1</a> = <a class="code" href="classllvm_1_1APInt.html#aec662ee6ab1490a4cabebf2812e5b9ca">APInt::getOneBitSet</a>(V-&gt;<a class="code" href="classllvm_1_1Value.html#a6393a2d4fe7e10b28a0dcc35f881567b">getType</a>()-&gt;<a class="code" href="classllvm_1_1Type.html#a9f382207d841377156d4c7868b66b9a5">getScalarSizeInBits</a>(), C1Log);</div>
<div class="line"><a name="l00668"></a><span class="lineno">  668</span>&#160;    V = <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.CreateAnd(V, <a class="code" href="classllvm_1_1ConstantInt.html#a969709dd49c28865a482d8b870f87c46">ConstantInt::get</a>(V-&gt;<a class="code" href="classllvm_1_1Value.html#a6393a2d4fe7e10b28a0dcc35f881567b">getType</a>(), <a class="code" href="lib_2Target_2README_8txt.html#a2a2df5a25b9c703e74e82b48a75d0c3d">C1</a>));</div>
<div class="line"><a name="l00669"></a><span class="lineno">  669</span>&#160;  }</div>
<div class="line"><a name="l00670"></a><span class="lineno">  670</span>&#160; </div>
<div class="line"><a name="l00671"></a><span class="lineno">  671</span>&#160;  <span class="keywordflow">if</span> (C2Log &gt; C1Log) {</div>
<div class="line"><a name="l00672"></a><span class="lineno">  672</span>&#160;    V = <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.CreateZExtOrTrunc(V, <a class="code" href="OcamlGCPrinter_8cpp.html#afcf2f797ed287a723263583c9b1c1bce">Y</a>-&gt;getType());</div>
<div class="line"><a name="l00673"></a><span class="lineno">  673</span>&#160;    V = <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.CreateShl(V, C2Log - C1Log);</div>
<div class="line"><a name="l00674"></a><span class="lineno">  674</span>&#160;  } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (C1Log &gt; C2Log) {</div>
<div class="line"><a name="l00675"></a><span class="lineno">  675</span>&#160;    V = <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.CreateLShr(V, C1Log - C2Log);</div>
<div class="line"><a name="l00676"></a><span class="lineno">  676</span>&#160;    V = <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.CreateZExtOrTrunc(V, <a class="code" href="OcamlGCPrinter_8cpp.html#afcf2f797ed287a723263583c9b1c1bce">Y</a>-&gt;getType());</div>
<div class="line"><a name="l00677"></a><span class="lineno">  677</span>&#160;  } <span class="keywordflow">else</span></div>
<div class="line"><a name="l00678"></a><span class="lineno">  678</span>&#160;    V = <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.CreateZExtOrTrunc(V, <a class="code" href="OcamlGCPrinter_8cpp.html#afcf2f797ed287a723263583c9b1c1bce">Y</a>-&gt;getType());</div>
<div class="line"><a name="l00679"></a><span class="lineno">  679</span>&#160; </div>
<div class="line"><a name="l00680"></a><span class="lineno">  680</span>&#160;  <span class="keywordflow">if</span> (NeedXor)</div>
<div class="line"><a name="l00681"></a><span class="lineno">  681</span>&#160;    V = <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.CreateXor(V, *C2);</div>
<div class="line"><a name="l00682"></a><span class="lineno">  682</span>&#160; </div>
<div class="line"><a name="l00683"></a><span class="lineno">  683</span>&#160;  <span class="keywordflow">return</span> <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.CreateOr(V, <a class="code" href="OcamlGCPrinter_8cpp.html#afcf2f797ed287a723263583c9b1c1bce">Y</a>);</div>
<div class="line"><a name="l00684"></a><span class="lineno">  684</span>&#160;}</div>
<div class="line"><a name="l00685"></a><span class="lineno">  685</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l00686"></a><span class="lineno">  686</span>&#160;<span class="comment">/// Canonicalize a set or clear of a masked set of constant bits to</span></div>
<div class="line"><a name="l00687"></a><span class="lineno">  687</span>&#160;<span class="comment">/// select-of-constants form.</span></div>
<div class="line"><a name="l00688"></a><span class="lineno"><a class="line" href="InstCombineSelect_8cpp.html#acb4bb6f77172696150754bd732d07e30">  688</a></span>&#160;<span class="comment"></span><span class="keyword">static</span> <a class="code" href="classllvm_1_1Instruction.html">Instruction</a> *<a class="code" href="InstCombineSelect_8cpp.html#acb4bb6f77172696150754bd732d07e30">foldSetClearBits</a>(<a class="code" href="classllvm_1_1SelectInst.html">SelectInst</a> &amp;Sel,</div>
<div class="line"><a name="l00689"></a><span class="lineno">  689</span>&#160;                                     <a class="code" href="classllvm_1_1IRBuilder.html">InstCombiner::BuilderTy</a> &amp;<a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>) {</div>
<div class="line"><a name="l00690"></a><span class="lineno">  690</span>&#160;  <a class="code" href="classllvm_1_1Value.html">Value</a> *<a class="code" href="BasicBlockSections_8cpp.html#a5fd0741d696f28faf65b33f6c6af8fda">Cond</a> = Sel.<a class="code" href="classllvm_1_1SelectInst.html#a93a29cd4a753518a59c20c1b6ec88c76">getCondition</a>();</div>
<div class="line"><a name="l00691"></a><span class="lineno">  691</span>&#160;  <a class="code" href="classllvm_1_1Value.html">Value</a> *<a class="code" href="classT.html">T</a> = Sel.<a class="code" href="classllvm_1_1SelectInst.html#a483700f6bf3ac62445850d768cf188f6">getTrueValue</a>();</div>
<div class="line"><a name="l00692"></a><span class="lineno">  692</span>&#160;  <a class="code" href="classllvm_1_1Value.html">Value</a> *<a class="code" href="MD5_8cpp.html#a96d73bbd7af15cb1fc38c3f4a3bd82e9">F</a> = Sel.<a class="code" href="classllvm_1_1SelectInst.html#a59b0ee738ec17984b97128e7f1594db3">getFalseValue</a>();</div>
<div class="line"><a name="l00693"></a><span class="lineno">  693</span>&#160;  <a class="code" href="classllvm_1_1Type.html">Type</a> *Ty = Sel.<a class="code" href="classllvm_1_1Value.html#a6393a2d4fe7e10b28a0dcc35f881567b">getType</a>();</div>
<div class="line"><a name="l00694"></a><span class="lineno">  694</span>&#160;  <a class="code" href="classllvm_1_1Value.html">Value</a> *<a class="code" href="ErlangGCPrinter_8cpp.html#a74b474c0616ab55c1d9487f11fd31d26">X</a>;</div>
<div class="line"><a name="l00695"></a><span class="lineno">  695</span>&#160;  <span class="keyword">const</span> <a class="code" href="classllvm_1_1APInt.html">APInt</a> *NotC, *<a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a>;</div>
<div class="line"><a name="l00696"></a><span class="lineno">  696</span>&#160; </div>
<div class="line"><a name="l00697"></a><span class="lineno">  697</span>&#160;  <span class="comment">// Cond ? (X &amp; ~C) : (X | C) --&gt; (X &amp; ~C) | (Cond ? 0 : C)</span></div>
<div class="line"><a name="l00698"></a><span class="lineno">  698</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="namespacellvm_1_1PatternMatch.html#a25d956d9e0beadd47ce4bc255dfa811d">match</a>(<a class="code" href="classT.html">T</a>, <a class="code" href="namespacellvm_1_1PatternMatch.html#a427435d4da769ae680a8e77ef89520aa">m_And</a>(<a class="code" href="namespacellvm_1_1PatternMatch.html#a24bca8838396aa81b87de8e7ac774b19">m_Value</a>(<a class="code" href="ErlangGCPrinter_8cpp.html#a74b474c0616ab55c1d9487f11fd31d26">X</a>), <a class="code" href="namespacellvm_1_1PatternMatch.html#aac9e78b3aa02ec087c4621358f506718">m_APInt</a>(NotC))) &amp;&amp;</div>
<div class="line"><a name="l00699"></a><span class="lineno">  699</span>&#160;      <a class="code" href="namespacellvm_1_1PatternMatch.html#a25d956d9e0beadd47ce4bc255dfa811d">match</a>(<a class="code" href="MD5_8cpp.html#a96d73bbd7af15cb1fc38c3f4a3bd82e9">F</a>, <a class="code" href="namespacellvm_1_1PatternMatch.html#aca6428e7fec51ba0b55594f469eb9691">m_OneUse</a>(<a class="code" href="namespacellvm_1_1PatternMatch.html#a42569041ddafba7d40243e126af07f42">m_Or</a>(<a class="code" href="namespacellvm_1_1PatternMatch.html#a2d9861feadd3a09792967a012559e7b2">m_Specific</a>(<a class="code" href="ErlangGCPrinter_8cpp.html#a74b474c0616ab55c1d9487f11fd31d26">X</a>), <a class="code" href="namespacellvm_1_1PatternMatch.html#aac9e78b3aa02ec087c4621358f506718">m_APInt</a>(<a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a>)))) &amp;&amp; *NotC == ~(*<a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a>)) {</div>
<div class="line"><a name="l00700"></a><span class="lineno">  700</span>&#160;    <a class="code" href="classllvm_1_1Constant.html">Constant</a> *Zero = <a class="code" href="classllvm_1_1Constant.html#aa6574d526b3e38a28f688a7bb4325c2c">ConstantInt::getNullValue</a>(Ty);</div>
<div class="line"><a name="l00701"></a><span class="lineno">  701</span>&#160;    <a class="code" href="classllvm_1_1Constant.html">Constant</a> *OrC = <a class="code" href="classllvm_1_1ConstantInt.html#a969709dd49c28865a482d8b870f87c46">ConstantInt::get</a>(Ty, *<a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a>);</div>
<div class="line"><a name="l00702"></a><span class="lineno">  702</span>&#160;    <a class="code" href="classllvm_1_1Value.html">Value</a> *NewSel = <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.CreateSelect(<a class="code" href="BasicBlockSections_8cpp.html#a5fd0741d696f28faf65b33f6c6af8fda">Cond</a>, Zero, OrC, <span class="stringliteral">&quot;masksel&quot;</span>, &amp;Sel);</div>
<div class="line"><a name="l00703"></a><span class="lineno">  703</span>&#160;    <span class="keywordflow">return</span> BinaryOperator::CreateOr(<a class="code" href="classT.html">T</a>, NewSel);</div>
<div class="line"><a name="l00704"></a><span class="lineno">  704</span>&#160;  }</div>
<div class="line"><a name="l00705"></a><span class="lineno">  705</span>&#160; </div>
<div class="line"><a name="l00706"></a><span class="lineno">  706</span>&#160;  <span class="comment">// Cond ? (X | C) : (X &amp; ~C) --&gt; (X &amp; ~C) | (Cond ? C : 0)</span></div>
<div class="line"><a name="l00707"></a><span class="lineno">  707</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="namespacellvm_1_1PatternMatch.html#a25d956d9e0beadd47ce4bc255dfa811d">match</a>(<a class="code" href="MD5_8cpp.html#a96d73bbd7af15cb1fc38c3f4a3bd82e9">F</a>, <a class="code" href="namespacellvm_1_1PatternMatch.html#a427435d4da769ae680a8e77ef89520aa">m_And</a>(<a class="code" href="namespacellvm_1_1PatternMatch.html#a24bca8838396aa81b87de8e7ac774b19">m_Value</a>(<a class="code" href="ErlangGCPrinter_8cpp.html#a74b474c0616ab55c1d9487f11fd31d26">X</a>), <a class="code" href="namespacellvm_1_1PatternMatch.html#aac9e78b3aa02ec087c4621358f506718">m_APInt</a>(NotC))) &amp;&amp;</div>
<div class="line"><a name="l00708"></a><span class="lineno">  708</span>&#160;      <a class="code" href="namespacellvm_1_1PatternMatch.html#a25d956d9e0beadd47ce4bc255dfa811d">match</a>(<a class="code" href="classT.html">T</a>, <a class="code" href="namespacellvm_1_1PatternMatch.html#aca6428e7fec51ba0b55594f469eb9691">m_OneUse</a>(<a class="code" href="namespacellvm_1_1PatternMatch.html#a42569041ddafba7d40243e126af07f42">m_Or</a>(<a class="code" href="namespacellvm_1_1PatternMatch.html#a2d9861feadd3a09792967a012559e7b2">m_Specific</a>(<a class="code" href="ErlangGCPrinter_8cpp.html#a74b474c0616ab55c1d9487f11fd31d26">X</a>), <a class="code" href="namespacellvm_1_1PatternMatch.html#aac9e78b3aa02ec087c4621358f506718">m_APInt</a>(<a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a>)))) &amp;&amp; *NotC == ~(*<a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a>)) {</div>
<div class="line"><a name="l00709"></a><span class="lineno">  709</span>&#160;    <a class="code" href="classllvm_1_1Constant.html">Constant</a> *Zero = <a class="code" href="classllvm_1_1Constant.html#aa6574d526b3e38a28f688a7bb4325c2c">ConstantInt::getNullValue</a>(Ty);</div>
<div class="line"><a name="l00710"></a><span class="lineno">  710</span>&#160;    <a class="code" href="classllvm_1_1Constant.html">Constant</a> *OrC = <a class="code" href="classllvm_1_1ConstantInt.html#a969709dd49c28865a482d8b870f87c46">ConstantInt::get</a>(Ty, *<a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a>);</div>
<div class="line"><a name="l00711"></a><span class="lineno">  711</span>&#160;    <a class="code" href="classllvm_1_1Value.html">Value</a> *NewSel = <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.CreateSelect(<a class="code" href="BasicBlockSections_8cpp.html#a5fd0741d696f28faf65b33f6c6af8fda">Cond</a>, OrC, Zero, <span class="stringliteral">&quot;masksel&quot;</span>, &amp;Sel);</div>
<div class="line"><a name="l00712"></a><span class="lineno">  712</span>&#160;    <span class="keywordflow">return</span> BinaryOperator::CreateOr(<a class="code" href="MD5_8cpp.html#a96d73bbd7af15cb1fc38c3f4a3bd82e9">F</a>, NewSel);</div>
<div class="line"><a name="l00713"></a><span class="lineno">  713</span>&#160;  }</div>
<div class="line"><a name="l00714"></a><span class="lineno">  714</span>&#160; </div>
<div class="line"><a name="l00715"></a><span class="lineno">  715</span>&#160;  <span class="keywordflow">return</span> <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l00716"></a><span class="lineno">  716</span>&#160;}</div>
<div class="line"><a name="l00717"></a><span class="lineno">  717</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l00718"></a><span class="lineno">  718</span>&#160;<span class="comment">/// Transform patterns such as (a &gt; b) ? a - b : 0 into usub.sat(a, b).</span></div>
<div class="line"><a name="l00719"></a><span class="lineno">  719</span>&#160;<span class="comment">/// There are 8 commuted/swapped variants of this pattern.</span></div>
<div class="line"><a name="l00720"></a><span class="lineno">  720</span>&#160;<span class="comment">/// TODO: Also support a - UMIN(a,b) patterns.</span></div>
<div class="line"><a name="l00721"></a><span class="lineno"><a class="line" href="InstCombineSelect_8cpp.html#ae86843953575db0d4a34ba09ca5f2c76">  721</a></span>&#160;<span class="comment"></span><span class="keyword">static</span> <a class="code" href="classllvm_1_1Value.html">Value</a> *<a class="code" href="InstCombineSelect_8cpp.html#ae86843953575db0d4a34ba09ca5f2c76">canonicalizeSaturatedSubtract</a>(<span class="keyword">const</span> <a class="code" href="classllvm_1_1ICmpInst.html">ICmpInst</a> *ICI,</div>
<div class="line"><a name="l00722"></a><span class="lineno">  722</span>&#160;                                            <span class="keyword">const</span> <a class="code" href="classllvm_1_1Value.html">Value</a> *<a class="code" href="namespacellvm_1_1tgtok.html#abbc5259d649363016626e2529fabe0c5a58b95af1ca96e109f85a0646a05fceb7">TrueVal</a>,</div>
<div class="line"><a name="l00723"></a><span class="lineno">  723</span>&#160;                                            <span class="keyword">const</span> <a class="code" href="classllvm_1_1Value.html">Value</a> *<a class="code" href="namespacellvm_1_1tgtok.html#abbc5259d649363016626e2529fabe0c5aeb5a2908109c763377832cbb4726b6d4">FalseVal</a>,</div>
<div class="line"><a name="l00724"></a><span class="lineno">  724</span>&#160;                                            <a class="code" href="classllvm_1_1IRBuilder.html">InstCombiner::BuilderTy</a> &amp;<a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>) {</div>
<div class="line"><a name="l00725"></a><span class="lineno">  725</span>&#160;  <a class="code" href="classllvm_1_1CmpInst.html#a2be3583dac92a031fa1458d4d992c78b">ICmpInst::Predicate</a> Pred = ICI-&gt;<a class="code" href="classllvm_1_1CmpInst.html#aa7414ba9f658ff1287d22a4b8fe81bcb">getPredicate</a>();</div>
<div class="line"><a name="l00726"></a><span class="lineno">  726</span>&#160;  <span class="keywordflow">if</span> (!<a class="code" href="classllvm_1_1CmpInst.html#af206a3d6f58d9e53b074460f0d1ecb86">ICmpInst::isUnsigned</a>(Pred))</div>
<div class="line"><a name="l00727"></a><span class="lineno">  727</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l00728"></a><span class="lineno">  728</span>&#160; </div>
<div class="line"><a name="l00729"></a><span class="lineno">  729</span>&#160;  <span class="comment">// (b &gt; a) ? 0 : a - b -&gt; (b &lt;= a) ? a - b : 0</span></div>
<div class="line"><a name="l00730"></a><span class="lineno">  730</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="namespacellvm_1_1PatternMatch.html#a25d956d9e0beadd47ce4bc255dfa811d">match</a>(<a class="code" href="namespacellvm_1_1tgtok.html#abbc5259d649363016626e2529fabe0c5a58b95af1ca96e109f85a0646a05fceb7">TrueVal</a>, <a class="code" href="namespacellvm_1_1PatternMatch.html#ae77be336e228cf9aa00709a8606dfb98">m_Zero</a>())) {</div>
<div class="line"><a name="l00731"></a><span class="lineno">  731</span>&#160;    Pred = <a class="code" href="classllvm_1_1CmpInst.html#aa2a54b545d237ecfe450fd1292f7675e">ICmpInst::getInversePredicate</a>(Pred);</div>
<div class="line"><a name="l00732"></a><span class="lineno">  732</span>&#160;    <a class="code" href="namespacestd.html#ab8424022895aee3e366fb9a32f2883cb">std::swap</a>(<a class="code" href="namespacellvm_1_1tgtok.html#abbc5259d649363016626e2529fabe0c5a58b95af1ca96e109f85a0646a05fceb7">TrueVal</a>, <a class="code" href="namespacellvm_1_1tgtok.html#abbc5259d649363016626e2529fabe0c5aeb5a2908109c763377832cbb4726b6d4">FalseVal</a>);</div>
<div class="line"><a name="l00733"></a><span class="lineno">  733</span>&#160;  }</div>
<div class="line"><a name="l00734"></a><span class="lineno">  734</span>&#160;  <span class="keywordflow">if</span> (!<a class="code" href="namespacellvm_1_1PatternMatch.html#a25d956d9e0beadd47ce4bc255dfa811d">match</a>(<a class="code" href="namespacellvm_1_1tgtok.html#abbc5259d649363016626e2529fabe0c5aeb5a2908109c763377832cbb4726b6d4">FalseVal</a>, <a class="code" href="namespacellvm_1_1PatternMatch.html#ae77be336e228cf9aa00709a8606dfb98">m_Zero</a>()))</div>
<div class="line"><a name="l00735"></a><span class="lineno">  735</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l00736"></a><span class="lineno">  736</span>&#160; </div>
<div class="line"><a name="l00737"></a><span class="lineno">  737</span>&#160;  <a class="code" href="classllvm_1_1Value.html">Value</a> *<a class="code" href="README__ALTIVEC_8txt.html#a015846b6188ce15e08cd94c74a9df1a3">A</a> = ICI-&gt;<a class="code" href="classllvm_1_1User.html#abe1de1520a21f77ac57cc210bf0fb0b4">getOperand</a>(0);</div>
<div class="line"><a name="l00738"></a><span class="lineno">  738</span>&#160;  <a class="code" href="classllvm_1_1Value.html">Value</a> *<a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a> = ICI-&gt;<a class="code" href="classllvm_1_1User.html#abe1de1520a21f77ac57cc210bf0fb0b4">getOperand</a>(1);</div>
<div class="line"><a name="l00739"></a><span class="lineno">  739</span>&#160;  <span class="keywordflow">if</span> (Pred == <a class="code" href="classllvm_1_1CmpInst.html#a2be3583dac92a031fa1458d4d992c78bad92f160316221fd4090520bb2b3cefc5">ICmpInst::ICMP_ULE</a> || Pred == <a class="code" href="classllvm_1_1CmpInst.html#a2be3583dac92a031fa1458d4d992c78ba91d86a4753c8bd7624e01bf565d87f8e">ICmpInst::ICMP_ULT</a>) {</div>
<div class="line"><a name="l00740"></a><span class="lineno">  740</span>&#160;    <span class="comment">// (b &lt; a) ? a - b : 0 -&gt; (a &gt; b) ? a - b : 0</span></div>
<div class="line"><a name="l00741"></a><span class="lineno">  741</span>&#160;    <a class="code" href="namespacestd.html#ab8424022895aee3e366fb9a32f2883cb">std::swap</a>(<a class="code" href="README__ALTIVEC_8txt.html#a015846b6188ce15e08cd94c74a9df1a3">A</a>, <a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a>);</div>
<div class="line"><a name="l00742"></a><span class="lineno">  742</span>&#160;    Pred = <a class="code" href="classllvm_1_1CmpInst.html#a49a2d8f483ea08a3d6ea75f90c640d76">ICmpInst::getSwappedPredicate</a>(Pred);</div>
<div class="line"><a name="l00743"></a><span class="lineno">  743</span>&#160;  }</div>
<div class="line"><a name="l00744"></a><span class="lineno">  744</span>&#160; </div>
<div class="line"><a name="l00745"></a><span class="lineno">  745</span>&#160;  <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>((Pred == <a class="code" href="classllvm_1_1CmpInst.html#a2be3583dac92a031fa1458d4d992c78ba573bcd571c938fce863525330bbfc4b8">ICmpInst::ICMP_UGE</a> || Pred == <a class="code" href="classllvm_1_1CmpInst.html#a2be3583dac92a031fa1458d4d992c78ba607cecdc5172814382033e001ed11fad">ICmpInst::ICMP_UGT</a>) &amp;&amp;</div>
<div class="line"><a name="l00746"></a><span class="lineno">  746</span>&#160;         <span class="stringliteral">&quot;Unexpected isUnsigned predicate!&quot;</span>);</div>
<div class="line"><a name="l00747"></a><span class="lineno">  747</span>&#160; </div>
<div class="line"><a name="l00748"></a><span class="lineno">  748</span>&#160;  <span class="comment">// Ensure the sub is of the form:</span></div>
<div class="line"><a name="l00749"></a><span class="lineno">  749</span>&#160;  <span class="comment">//  (a &gt; b) ? a - b : 0 -&gt; usub.sat(a, b)</span></div>
<div class="line"><a name="l00750"></a><span class="lineno">  750</span>&#160;  <span class="comment">//  (a &gt; b) ? b - a : 0 -&gt; -usub.sat(a, b)</span></div>
<div class="line"><a name="l00751"></a><span class="lineno">  751</span>&#160;  <span class="comment">// Checking for both a-b and a+(-b) as a constant.</span></div>
<div class="line"><a name="l00752"></a><span class="lineno">  752</span>&#160;  <span class="keywordtype">bool</span> IsNegative = <span class="keyword">false</span>;</div>
<div class="line"><a name="l00753"></a><span class="lineno">  753</span>&#160;  <span class="keyword">const</span> <a class="code" href="classllvm_1_1APInt.html">APInt</a> *<a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a>;</div>
<div class="line"><a name="l00754"></a><span class="lineno">  754</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="namespacellvm_1_1PatternMatch.html#a25d956d9e0beadd47ce4bc255dfa811d">match</a>(<a class="code" href="namespacellvm_1_1tgtok.html#abbc5259d649363016626e2529fabe0c5a58b95af1ca96e109f85a0646a05fceb7">TrueVal</a>, <a class="code" href="namespacellvm_1_1PatternMatch.html#ac3ed5602889a22db44a16e1b97fac5b8">m_Sub</a>(<a class="code" href="namespacellvm_1_1PatternMatch.html#a2d9861feadd3a09792967a012559e7b2">m_Specific</a>(<a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a>), <a class="code" href="namespacellvm_1_1PatternMatch.html#a2d9861feadd3a09792967a012559e7b2">m_Specific</a>(<a class="code" href="README__ALTIVEC_8txt.html#a015846b6188ce15e08cd94c74a9df1a3">A</a>))) ||</div>
<div class="line"><a name="l00755"></a><span class="lineno">  755</span>&#160;      (<a class="code" href="namespacellvm_1_1PatternMatch.html#a25d956d9e0beadd47ce4bc255dfa811d">match</a>(<a class="code" href="README__ALTIVEC_8txt.html#a015846b6188ce15e08cd94c74a9df1a3">A</a>, <a class="code" href="namespacellvm_1_1PatternMatch.html#aac9e78b3aa02ec087c4621358f506718">m_APInt</a>(<a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a>)) &amp;&amp;</div>
<div class="line"><a name="l00756"></a><span class="lineno">  756</span>&#160;       <a class="code" href="namespacellvm_1_1PatternMatch.html#a25d956d9e0beadd47ce4bc255dfa811d">match</a>(<a class="code" href="namespacellvm_1_1tgtok.html#abbc5259d649363016626e2529fabe0c5a58b95af1ca96e109f85a0646a05fceb7">TrueVal</a>, <a class="code" href="namespacellvm_1_1PatternMatch.html#a944c25ac9b73b02a17a20a08a25b9b21">m_Add</a>(<a class="code" href="namespacellvm_1_1PatternMatch.html#a2d9861feadd3a09792967a012559e7b2">m_Specific</a>(<a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a>), <a class="code" href="namespacellvm_1_1PatternMatch.html#a3acbd0be97863e3e03e3b85641254018">m_SpecificInt</a>(-*<a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a>)))))</div>
<div class="line"><a name="l00757"></a><span class="lineno">  757</span>&#160;    IsNegative = <span class="keyword">true</span>;</div>
<div class="line"><a name="l00758"></a><span class="lineno">  758</span>&#160;  <span class="keywordflow">else</span> <span class="keywordflow">if</span> (!<a class="code" href="namespacellvm_1_1PatternMatch.html#a25d956d9e0beadd47ce4bc255dfa811d">match</a>(<a class="code" href="namespacellvm_1_1tgtok.html#abbc5259d649363016626e2529fabe0c5a58b95af1ca96e109f85a0646a05fceb7">TrueVal</a>, <a class="code" href="namespacellvm_1_1PatternMatch.html#ac3ed5602889a22db44a16e1b97fac5b8">m_Sub</a>(<a class="code" href="namespacellvm_1_1PatternMatch.html#a2d9861feadd3a09792967a012559e7b2">m_Specific</a>(<a class="code" href="README__ALTIVEC_8txt.html#a015846b6188ce15e08cd94c74a9df1a3">A</a>), <a class="code" href="namespacellvm_1_1PatternMatch.html#a2d9861feadd3a09792967a012559e7b2">m_Specific</a>(<a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a>))) &amp;&amp;</div>
<div class="line"><a name="l00759"></a><span class="lineno">  759</span>&#160;           !(<a class="code" href="namespacellvm_1_1PatternMatch.html#a25d956d9e0beadd47ce4bc255dfa811d">match</a>(<a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a>, <a class="code" href="namespacellvm_1_1PatternMatch.html#aac9e78b3aa02ec087c4621358f506718">m_APInt</a>(<a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a>)) &amp;&amp;</div>
<div class="line"><a name="l00760"></a><span class="lineno">  760</span>&#160;             <a class="code" href="namespacellvm_1_1PatternMatch.html#a25d956d9e0beadd47ce4bc255dfa811d">match</a>(<a class="code" href="namespacellvm_1_1tgtok.html#abbc5259d649363016626e2529fabe0c5a58b95af1ca96e109f85a0646a05fceb7">TrueVal</a>, <a class="code" href="namespacellvm_1_1PatternMatch.html#a944c25ac9b73b02a17a20a08a25b9b21">m_Add</a>(<a class="code" href="namespacellvm_1_1PatternMatch.html#a2d9861feadd3a09792967a012559e7b2">m_Specific</a>(<a class="code" href="README__ALTIVEC_8txt.html#a015846b6188ce15e08cd94c74a9df1a3">A</a>), <a class="code" href="namespacellvm_1_1PatternMatch.html#a3acbd0be97863e3e03e3b85641254018">m_SpecificInt</a>(-*<a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a>)))))</div>
<div class="line"><a name="l00761"></a><span class="lineno">  761</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l00762"></a><span class="lineno">  762</span>&#160; </div>
<div class="line"><a name="l00763"></a><span class="lineno">  763</span>&#160;  <span class="comment">// If we are adding a negate and the sub and icmp are used anywhere else, we</span></div>
<div class="line"><a name="l00764"></a><span class="lineno">  764</span>&#160;  <span class="comment">// would end up with more instructions.</span></div>
<div class="line"><a name="l00765"></a><span class="lineno">  765</span>&#160;  <span class="keywordflow">if</span> (IsNegative &amp;&amp; !<a class="code" href="namespacellvm_1_1tgtok.html#abbc5259d649363016626e2529fabe0c5a58b95af1ca96e109f85a0646a05fceb7">TrueVal</a>-&gt;hasOneUse() &amp;&amp; !ICI-&gt;<a class="code" href="classllvm_1_1Value.html#a3a402430a1bbe70a9282dcb0e0b6a2cd">hasOneUse</a>())</div>
<div class="line"><a name="l00766"></a><span class="lineno">  766</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l00767"></a><span class="lineno">  767</span>&#160; </div>
<div class="line"><a name="l00768"></a><span class="lineno">  768</span>&#160;  <span class="comment">// (a &gt; b) ? a - b : 0 -&gt; usub.sat(a, b)</span></div>
<div class="line"><a name="l00769"></a><span class="lineno">  769</span>&#160;  <span class="comment">// (a &gt; b) ? b - a : 0 -&gt; -usub.sat(a, b)</span></div>
<div class="line"><a name="l00770"></a><span class="lineno">  770</span>&#160;  <a class="code" href="classllvm_1_1Value.html">Value</a> *Result = <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.CreateBinaryIntrinsic(Intrinsic::usub_sat, <a class="code" href="README__ALTIVEC_8txt.html#a015846b6188ce15e08cd94c74a9df1a3">A</a>, <a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a>);</div>
<div class="line"><a name="l00771"></a><span class="lineno">  771</span>&#160;  <span class="keywordflow">if</span> (IsNegative)</div>
<div class="line"><a name="l00772"></a><span class="lineno">  772</span>&#160;    Result = <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.CreateNeg(Result);</div>
<div class="line"><a name="l00773"></a><span class="lineno">  773</span>&#160;  <span class="keywordflow">return</span> Result;</div>
<div class="line"><a name="l00774"></a><span class="lineno">  774</span>&#160;}</div>
<div class="line"><a name="l00775"></a><span class="lineno">  775</span>&#160; </div>
<div class="line"><a name="l00776"></a><span class="lineno"><a class="line" href="InstCombineSelect_8cpp.html#a06a4ce71d0eb134807ac144ccb9f47a1">  776</a></span>&#160;<span class="keyword">static</span> <a class="code" href="classllvm_1_1Value.html">Value</a> *<a class="code" href="InstCombineSelect_8cpp.html#a06a4ce71d0eb134807ac144ccb9f47a1">canonicalizeSaturatedAdd</a>(<a class="code" href="classllvm_1_1ICmpInst.html">ICmpInst</a> *Cmp, <a class="code" href="classllvm_1_1Value.html">Value</a> *TVal, <a class="code" href="classllvm_1_1Value.html">Value</a> *FVal,</div>
<div class="line"><a name="l00777"></a><span class="lineno">  777</span>&#160;                                       <a class="code" href="classllvm_1_1IRBuilder.html">InstCombiner::BuilderTy</a> &amp;<a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>) {</div>
<div class="line"><a name="l00778"></a><span class="lineno">  778</span>&#160;  <span class="keywordflow">if</span> (!Cmp-&gt;<a class="code" href="classllvm_1_1Value.html#a3a402430a1bbe70a9282dcb0e0b6a2cd">hasOneUse</a>())</div>
<div class="line"><a name="l00779"></a><span class="lineno">  779</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l00780"></a><span class="lineno">  780</span>&#160; </div>
<div class="line"><a name="l00781"></a><span class="lineno">  781</span>&#160;  <span class="comment">// Match unsigned saturated add with constant.</span></div>
<div class="line"><a name="l00782"></a><span class="lineno">  782</span>&#160;  <a class="code" href="classllvm_1_1Value.html">Value</a> *Cmp0 = Cmp-&gt;<a class="code" href="classllvm_1_1User.html#abe1de1520a21f77ac57cc210bf0fb0b4">getOperand</a>(0);</div>
<div class="line"><a name="l00783"></a><span class="lineno">  783</span>&#160;  <a class="code" href="classllvm_1_1Value.html">Value</a> *Cmp1 = Cmp-&gt;<a class="code" href="classllvm_1_1User.html#abe1de1520a21f77ac57cc210bf0fb0b4">getOperand</a>(1);</div>
<div class="line"><a name="l00784"></a><span class="lineno">  784</span>&#160;  <a class="code" href="classllvm_1_1CmpInst.html#a2be3583dac92a031fa1458d4d992c78b">ICmpInst::Predicate</a> Pred = Cmp-&gt;<a class="code" href="classllvm_1_1CmpInst.html#aa7414ba9f658ff1287d22a4b8fe81bcb">getPredicate</a>();</div>
<div class="line"><a name="l00785"></a><span class="lineno">  785</span>&#160;  <a class="code" href="classllvm_1_1Value.html">Value</a> *<a class="code" href="ErlangGCPrinter_8cpp.html#a74b474c0616ab55c1d9487f11fd31d26">X</a>;</div>
<div class="line"><a name="l00786"></a><span class="lineno">  786</span>&#160;  <span class="keyword">const</span> <a class="code" href="classllvm_1_1APInt.html">APInt</a> *<a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a>, *CmpC;</div>
<div class="line"><a name="l00787"></a><span class="lineno">  787</span>&#160;  <span class="keywordflow">if</span> (Pred == <a class="code" href="classllvm_1_1CmpInst.html#a2be3583dac92a031fa1458d4d992c78ba91d86a4753c8bd7624e01bf565d87f8e">ICmpInst::ICMP_ULT</a> &amp;&amp;</div>
<div class="line"><a name="l00788"></a><span class="lineno">  788</span>&#160;      <a class="code" href="namespacellvm_1_1PatternMatch.html#a25d956d9e0beadd47ce4bc255dfa811d">match</a>(TVal, <a class="code" href="namespacellvm_1_1PatternMatch.html#a944c25ac9b73b02a17a20a08a25b9b21">m_Add</a>(<a class="code" href="namespacellvm_1_1PatternMatch.html#a24bca8838396aa81b87de8e7ac774b19">m_Value</a>(<a class="code" href="ErlangGCPrinter_8cpp.html#a74b474c0616ab55c1d9487f11fd31d26">X</a>), <a class="code" href="namespacellvm_1_1PatternMatch.html#aac9e78b3aa02ec087c4621358f506718">m_APInt</a>(<a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a>))) &amp;&amp; <a class="code" href="ErlangGCPrinter_8cpp.html#a74b474c0616ab55c1d9487f11fd31d26">X</a> == Cmp0 &amp;&amp;</div>
<div class="line"><a name="l00789"></a><span class="lineno">  789</span>&#160;      <a class="code" href="namespacellvm_1_1PatternMatch.html#a25d956d9e0beadd47ce4bc255dfa811d">match</a>(FVal, <a class="code" href="namespacellvm_1_1PatternMatch.html#aaea0d5ebb8b57ddde2095f80e2e94bb2">m_AllOnes</a>()) &amp;&amp; <a class="code" href="namespacellvm_1_1PatternMatch.html#a25d956d9e0beadd47ce4bc255dfa811d">match</a>(Cmp1, <a class="code" href="namespacellvm_1_1PatternMatch.html#aac9e78b3aa02ec087c4621358f506718">m_APInt</a>(CmpC)) &amp;&amp; *CmpC == ~*<a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a>) {</div>
<div class="line"><a name="l00790"></a><span class="lineno">  790</span>&#160;    <span class="comment">// (X u&lt; ~C) ? (X + C) : -1 --&gt; uadd.sat(X, C)</span></div>
<div class="line"><a name="l00791"></a><span class="lineno">  791</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.CreateBinaryIntrinsic(</div>
<div class="line"><a name="l00792"></a><span class="lineno">  792</span>&#160;        Intrinsic::uadd_sat, <a class="code" href="ErlangGCPrinter_8cpp.html#a74b474c0616ab55c1d9487f11fd31d26">X</a>, <a class="code" href="classllvm_1_1ConstantInt.html#a969709dd49c28865a482d8b870f87c46">ConstantInt::get</a>(<a class="code" href="ErlangGCPrinter_8cpp.html#a74b474c0616ab55c1d9487f11fd31d26">X</a>-&gt;getType(), *<a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a>));</div>
<div class="line"><a name="l00793"></a><span class="lineno">  793</span>&#160;  }</div>
<div class="line"><a name="l00794"></a><span class="lineno">  794</span>&#160; </div>
<div class="line"><a name="l00795"></a><span class="lineno">  795</span>&#160;  <span class="comment">// Match unsigned saturated add of 2 variables with an unnecessary &#39;not&#39;.</span></div>
<div class="line"><a name="l00796"></a><span class="lineno">  796</span>&#160;  <span class="comment">// There are 8 commuted variants.</span></div>
<div class="line"><a name="l00797"></a><span class="lineno">  797</span>&#160;  <span class="comment">// Canonicalize -1 (saturated result) to true value of the select.</span></div>
<div class="line"><a name="l00798"></a><span class="lineno">  798</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="namespacellvm_1_1PatternMatch.html#a25d956d9e0beadd47ce4bc255dfa811d">match</a>(FVal, <a class="code" href="namespacellvm_1_1PatternMatch.html#aaea0d5ebb8b57ddde2095f80e2e94bb2">m_AllOnes</a>())) {</div>
<div class="line"><a name="l00799"></a><span class="lineno">  799</span>&#160;    <a class="code" href="namespacestd.html#ab8424022895aee3e366fb9a32f2883cb">std::swap</a>(TVal, FVal);</div>
<div class="line"><a name="l00800"></a><span class="lineno">  800</span>&#160;    Pred = <a class="code" href="classllvm_1_1CmpInst.html#aa2a54b545d237ecfe450fd1292f7675e">CmpInst::getInversePredicate</a>(Pred);</div>
<div class="line"><a name="l00801"></a><span class="lineno">  801</span>&#160;  }</div>
<div class="line"><a name="l00802"></a><span class="lineno">  802</span>&#160;  <span class="keywordflow">if</span> (!<a class="code" href="namespacellvm_1_1PatternMatch.html#a25d956d9e0beadd47ce4bc255dfa811d">match</a>(TVal, <a class="code" href="namespacellvm_1_1PatternMatch.html#aaea0d5ebb8b57ddde2095f80e2e94bb2">m_AllOnes</a>()))</div>
<div class="line"><a name="l00803"></a><span class="lineno">  803</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l00804"></a><span class="lineno">  804</span>&#160; </div>
<div class="line"><a name="l00805"></a><span class="lineno">  805</span>&#160;  <span class="comment">// Canonicalize predicate to less-than or less-or-equal-than.</span></div>
<div class="line"><a name="l00806"></a><span class="lineno">  806</span>&#160;  <span class="keywordflow">if</span> (Pred == <a class="code" href="classllvm_1_1CmpInst.html#a2be3583dac92a031fa1458d4d992c78ba607cecdc5172814382033e001ed11fad">ICmpInst::ICMP_UGT</a> || Pred == <a class="code" href="classllvm_1_1CmpInst.html#a2be3583dac92a031fa1458d4d992c78ba573bcd571c938fce863525330bbfc4b8">ICmpInst::ICMP_UGE</a>) {</div>
<div class="line"><a name="l00807"></a><span class="lineno">  807</span>&#160;    <a class="code" href="namespacestd.html#ab8424022895aee3e366fb9a32f2883cb">std::swap</a>(Cmp0, Cmp1);</div>
<div class="line"><a name="l00808"></a><span class="lineno">  808</span>&#160;    Pred = <a class="code" href="classllvm_1_1CmpInst.html#a49a2d8f483ea08a3d6ea75f90c640d76">CmpInst::getSwappedPredicate</a>(Pred);</div>
<div class="line"><a name="l00809"></a><span class="lineno">  809</span>&#160;  }</div>
<div class="line"><a name="l00810"></a><span class="lineno">  810</span>&#160;  <span class="keywordflow">if</span> (Pred != <a class="code" href="classllvm_1_1CmpInst.html#a2be3583dac92a031fa1458d4d992c78ba91d86a4753c8bd7624e01bf565d87f8e">ICmpInst::ICMP_ULT</a> &amp;&amp; Pred != <a class="code" href="classllvm_1_1CmpInst.html#a2be3583dac92a031fa1458d4d992c78bad92f160316221fd4090520bb2b3cefc5">ICmpInst::ICMP_ULE</a>)</div>
<div class="line"><a name="l00811"></a><span class="lineno">  811</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l00812"></a><span class="lineno">  812</span>&#160; </div>
<div class="line"><a name="l00813"></a><span class="lineno">  813</span>&#160;  <span class="comment">// Match unsigned saturated add of 2 variables with an unnecessary &#39;not&#39;.</span></div>
<div class="line"><a name="l00814"></a><span class="lineno">  814</span>&#160;  <span class="comment">// Strictness of the comparison is irrelevant.</span></div>
<div class="line"><a name="l00815"></a><span class="lineno">  815</span>&#160;  <a class="code" href="classllvm_1_1Value.html">Value</a> *<a class="code" href="OcamlGCPrinter_8cpp.html#afcf2f797ed287a723263583c9b1c1bce">Y</a>;</div>
<div class="line"><a name="l00816"></a><span class="lineno">  816</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="namespacellvm_1_1PatternMatch.html#a25d956d9e0beadd47ce4bc255dfa811d">match</a>(Cmp0, <a class="code" href="namespacellvm_1_1PatternMatch.html#ad6994fd7098916ce21d65be005666f21">m_Not</a>(<a class="code" href="namespacellvm_1_1PatternMatch.html#a24bca8838396aa81b87de8e7ac774b19">m_Value</a>(<a class="code" href="ErlangGCPrinter_8cpp.html#a74b474c0616ab55c1d9487f11fd31d26">X</a>))) &amp;&amp;</div>
<div class="line"><a name="l00817"></a><span class="lineno">  817</span>&#160;      <a class="code" href="namespacellvm_1_1PatternMatch.html#a25d956d9e0beadd47ce4bc255dfa811d">match</a>(FVal, <a class="code" href="namespacellvm_1_1PatternMatch.html#ad191220adaaedcfba833985509a17452">m_c_Add</a>(<a class="code" href="namespacellvm_1_1PatternMatch.html#a2d9861feadd3a09792967a012559e7b2">m_Specific</a>(<a class="code" href="ErlangGCPrinter_8cpp.html#a74b474c0616ab55c1d9487f11fd31d26">X</a>), <a class="code" href="namespacellvm_1_1PatternMatch.html#a24bca8838396aa81b87de8e7ac774b19">m_Value</a>(<a class="code" href="OcamlGCPrinter_8cpp.html#afcf2f797ed287a723263583c9b1c1bce">Y</a>))) &amp;&amp; <a class="code" href="OcamlGCPrinter_8cpp.html#afcf2f797ed287a723263583c9b1c1bce">Y</a> == Cmp1) {</div>
<div class="line"><a name="l00818"></a><span class="lineno">  818</span>&#160;    <span class="comment">// (~X u&lt; Y) ? -1 : (X + Y) --&gt; uadd.sat(X, Y)</span></div>
<div class="line"><a name="l00819"></a><span class="lineno">  819</span>&#160;    <span class="comment">// (~X u&lt; Y) ? -1 : (Y + X) --&gt; uadd.sat(X, Y)</span></div>
<div class="line"><a name="l00820"></a><span class="lineno">  820</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.CreateBinaryIntrinsic(Intrinsic::uadd_sat, <a class="code" href="ErlangGCPrinter_8cpp.html#a74b474c0616ab55c1d9487f11fd31d26">X</a>, <a class="code" href="OcamlGCPrinter_8cpp.html#afcf2f797ed287a723263583c9b1c1bce">Y</a>);</div>
<div class="line"><a name="l00821"></a><span class="lineno">  821</span>&#160;  }</div>
<div class="line"><a name="l00822"></a><span class="lineno">  822</span>&#160;  <span class="comment">// The &#39;not&#39; op may be included in the sum but not the compare.</span></div>
<div class="line"><a name="l00823"></a><span class="lineno">  823</span>&#160;  <span class="comment">// Strictness of the comparison is irrelevant.</span></div>
<div class="line"><a name="l00824"></a><span class="lineno">  824</span>&#160;  <a class="code" href="ErlangGCPrinter_8cpp.html#a74b474c0616ab55c1d9487f11fd31d26">X</a> = Cmp0;</div>
<div class="line"><a name="l00825"></a><span class="lineno">  825</span>&#160;  <a class="code" href="OcamlGCPrinter_8cpp.html#afcf2f797ed287a723263583c9b1c1bce">Y</a> = Cmp1;</div>
<div class="line"><a name="l00826"></a><span class="lineno">  826</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="namespacellvm_1_1PatternMatch.html#a25d956d9e0beadd47ce4bc255dfa811d">match</a>(FVal, <a class="code" href="namespacellvm_1_1PatternMatch.html#ad191220adaaedcfba833985509a17452">m_c_Add</a>(<a class="code" href="namespacellvm_1_1PatternMatch.html#ad6994fd7098916ce21d65be005666f21">m_Not</a>(<a class="code" href="namespacellvm_1_1PatternMatch.html#a2d9861feadd3a09792967a012559e7b2">m_Specific</a>(<a class="code" href="ErlangGCPrinter_8cpp.html#a74b474c0616ab55c1d9487f11fd31d26">X</a>)), <a class="code" href="namespacellvm_1_1PatternMatch.html#a2d9861feadd3a09792967a012559e7b2">m_Specific</a>(<a class="code" href="OcamlGCPrinter_8cpp.html#afcf2f797ed287a723263583c9b1c1bce">Y</a>)))) {</div>
<div class="line"><a name="l00827"></a><span class="lineno">  827</span>&#160;    <span class="comment">// (X u&lt; Y) ? -1 : (~X + Y) --&gt; uadd.sat(~X, Y)</span></div>
<div class="line"><a name="l00828"></a><span class="lineno">  828</span>&#160;    <span class="comment">// (X u&lt; Y) ? -1 : (Y + ~X) --&gt; uadd.sat(Y, ~X)</span></div>
<div class="line"><a name="l00829"></a><span class="lineno">  829</span>&#160;    <a class="code" href="classllvm_1_1BinaryOperator.html">BinaryOperator</a> *BO = cast&lt;BinaryOperator&gt;(FVal);</div>
<div class="line"><a name="l00830"></a><span class="lineno">  830</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.CreateBinaryIntrinsic(</div>
<div class="line"><a name="l00831"></a><span class="lineno">  831</span>&#160;        Intrinsic::uadd_sat, BO-&gt;<a class="code" href="classllvm_1_1User.html#abe1de1520a21f77ac57cc210bf0fb0b4">getOperand</a>(0), BO-&gt;<a class="code" href="classllvm_1_1User.html#abe1de1520a21f77ac57cc210bf0fb0b4">getOperand</a>(1));</div>
<div class="line"><a name="l00832"></a><span class="lineno">  832</span>&#160;  }</div>
<div class="line"><a name="l00833"></a><span class="lineno">  833</span>&#160;  <span class="comment">// The overflow may be detected via the add wrapping round.</span></div>
<div class="line"><a name="l00834"></a><span class="lineno">  834</span>&#160;  <span class="comment">// This is only valid for strict comparison!</span></div>
<div class="line"><a name="l00835"></a><span class="lineno">  835</span>&#160;  <span class="keywordflow">if</span> (Pred == <a class="code" href="classllvm_1_1CmpInst.html#a2be3583dac92a031fa1458d4d992c78ba91d86a4753c8bd7624e01bf565d87f8e">ICmpInst::ICMP_ULT</a> &amp;&amp;</div>
<div class="line"><a name="l00836"></a><span class="lineno">  836</span>&#160;      <a class="code" href="namespacellvm_1_1PatternMatch.html#a25d956d9e0beadd47ce4bc255dfa811d">match</a>(Cmp0, <a class="code" href="namespacellvm_1_1PatternMatch.html#ad191220adaaedcfba833985509a17452">m_c_Add</a>(<a class="code" href="namespacellvm_1_1PatternMatch.html#a2d9861feadd3a09792967a012559e7b2">m_Specific</a>(Cmp1), <a class="code" href="namespacellvm_1_1PatternMatch.html#a24bca8838396aa81b87de8e7ac774b19">m_Value</a>(<a class="code" href="OcamlGCPrinter_8cpp.html#afcf2f797ed287a723263583c9b1c1bce">Y</a>))) &amp;&amp;</div>
<div class="line"><a name="l00837"></a><span class="lineno">  837</span>&#160;      <a class="code" href="namespacellvm_1_1PatternMatch.html#a25d956d9e0beadd47ce4bc255dfa811d">match</a>(FVal, <a class="code" href="namespacellvm_1_1PatternMatch.html#ad191220adaaedcfba833985509a17452">m_c_Add</a>(<a class="code" href="namespacellvm_1_1PatternMatch.html#a2d9861feadd3a09792967a012559e7b2">m_Specific</a>(Cmp1), <a class="code" href="namespacellvm_1_1PatternMatch.html#a2d9861feadd3a09792967a012559e7b2">m_Specific</a>(<a class="code" href="OcamlGCPrinter_8cpp.html#afcf2f797ed287a723263583c9b1c1bce">Y</a>)))) {</div>
<div class="line"><a name="l00838"></a><span class="lineno">  838</span>&#160;    <span class="comment">// ((X + Y) u&lt; X) ? -1 : (X + Y) --&gt; uadd.sat(X, Y)</span></div>
<div class="line"><a name="l00839"></a><span class="lineno">  839</span>&#160;    <span class="comment">// ((X + Y) u&lt; Y) ? -1 : (X + Y) --&gt; uadd.sat(X, Y)</span></div>
<div class="line"><a name="l00840"></a><span class="lineno">  840</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.CreateBinaryIntrinsic(Intrinsic::uadd_sat, Cmp1, <a class="code" href="OcamlGCPrinter_8cpp.html#afcf2f797ed287a723263583c9b1c1bce">Y</a>);</div>
<div class="line"><a name="l00841"></a><span class="lineno">  841</span>&#160;  }</div>
<div class="line"><a name="l00842"></a><span class="lineno">  842</span>&#160; </div>
<div class="line"><a name="l00843"></a><span class="lineno">  843</span>&#160;  <span class="keywordflow">return</span> <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l00844"></a><span class="lineno">  844</span>&#160;}</div>
<div class="line"><a name="l00845"></a><span class="lineno">  845</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l00846"></a><span class="lineno">  846</span>&#160;<span class="comment">/// Fold the following code sequence:</span></div>
<div class="line"><a name="l00847"></a><span class="lineno">  847</span>&#160;<span class="comment">/// \code</span></div>
<div class="line"><a name="l00848"></a><span class="lineno">  848</span>&#160;<span class="comment">///   int a = ctlz(x &amp; -x);</span></div>
<div class="line"><a name="l00849"></a><span class="lineno">  849</span>&#160;<span class="comment"></span><span class="comment">//    x ? 31 - a : a;</span><span class="comment"></span></div>
<div class="line"><a name="l00850"></a><span class="lineno">  850</span>&#160;<span class="comment">/// \code</span></div>
<div class="line"><a name="l00851"></a><span class="lineno">  851</span>&#160;<span class="comment">///</span></div>
<div class="line"><a name="l00852"></a><span class="lineno">  852</span>&#160;<span class="comment">/// into:</span></div>
<div class="line"><a name="l00853"></a><span class="lineno">  853</span>&#160;<span class="comment">///   cttz(x)</span></div>
<div class="line"><a name="l00854"></a><span class="lineno">  854</span>&#160;<span class="comment"></span><span class="keyword">static</span> <a class="code" href="classllvm_1_1Instruction.html">Instruction</a> *foldSelectCtlzToCttz(<a class="code" href="classllvm_1_1ICmpInst.html">ICmpInst</a> *ICI, <a class="code" href="classllvm_1_1Value.html">Value</a> *<a class="code" href="namespacellvm_1_1tgtok.html#abbc5259d649363016626e2529fabe0c5a58b95af1ca96e109f85a0646a05fceb7">TrueVal</a>,</div>
<div class="line"><a name="l00855"></a><span class="lineno">  855</span>&#160;                                         <a class="code" href="classllvm_1_1Value.html">Value</a> *<a class="code" href="namespacellvm_1_1tgtok.html#abbc5259d649363016626e2529fabe0c5aeb5a2908109c763377832cbb4726b6d4">FalseVal</a>,</div>
<div class="line"><a name="l00856"></a><span class="lineno">  856</span>&#160;                                         <a class="code" href="classllvm_1_1IRBuilder.html">InstCombiner::BuilderTy</a> &amp;<a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>) {</div>
<div class="line"><a name="l00857"></a><span class="lineno">  857</span>&#160;  <span class="keywordtype">unsigned</span> <a class="code" href="namespacellvm.html#abee0df5f7f703bb4462aba260ba0a60f">BitWidth</a> = <a class="code" href="namespacellvm_1_1tgtok.html#abbc5259d649363016626e2529fabe0c5a58b95af1ca96e109f85a0646a05fceb7">TrueVal</a>-&gt;getType()-&gt;getScalarSizeInBits();</div>
<div class="line"><a name="l00858"></a><span class="lineno">  858</span>&#160;  <span class="keywordflow">if</span> (!ICI-&gt;<a class="code" href="classllvm_1_1ICmpInst.html#abe8988eef2e6fc2baba032cb22afedd7">isEquality</a>() || !<a class="code" href="namespacellvm_1_1PatternMatch.html#a25d956d9e0beadd47ce4bc255dfa811d">match</a>(ICI-&gt;<a class="code" href="classllvm_1_1User.html#abe1de1520a21f77ac57cc210bf0fb0b4">getOperand</a>(1), <a class="code" href="namespacellvm_1_1PatternMatch.html#ae77be336e228cf9aa00709a8606dfb98">m_Zero</a>()))</div>
<div class="line"><a name="l00859"></a><span class="lineno">  859</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l00860"></a><span class="lineno">  860</span>&#160; </div>
<div class="line"><a name="l00861"></a><span class="lineno">  861</span>&#160;  <span class="keywordflow">if</span> (ICI-&gt;<a class="code" href="classllvm_1_1CmpInst.html#aa7414ba9f658ff1287d22a4b8fe81bcb">getPredicate</a>() == <a class="code" href="classllvm_1_1CmpInst.html#a2be3583dac92a031fa1458d4d992c78bac17897ebf2f6a6986280fc3bdf28a30a">ICmpInst::ICMP_NE</a>)</div>
<div class="line"><a name="l00862"></a><span class="lineno">  862</span>&#160;    <a class="code" href="namespacestd.html#ab8424022895aee3e366fb9a32f2883cb">std::swap</a>(<a class="code" href="namespacellvm_1_1tgtok.html#abbc5259d649363016626e2529fabe0c5a58b95af1ca96e109f85a0646a05fceb7">TrueVal</a>, <a class="code" href="namespacellvm_1_1tgtok.html#abbc5259d649363016626e2529fabe0c5aeb5a2908109c763377832cbb4726b6d4">FalseVal</a>);</div>
<div class="line"><a name="l00863"></a><span class="lineno">  863</span>&#160; </div>
<div class="line"><a name="l00864"></a><span class="lineno">  864</span>&#160;  <span class="keywordflow">if</span> (!<a class="code" href="namespacellvm_1_1PatternMatch.html#a25d956d9e0beadd47ce4bc255dfa811d">match</a>(<a class="code" href="namespacellvm_1_1tgtok.html#abbc5259d649363016626e2529fabe0c5aeb5a2908109c763377832cbb4726b6d4">FalseVal</a>,</div>
<div class="line"><a name="l00865"></a><span class="lineno">  865</span>&#160;             <a class="code" href="namespacellvm_1_1PatternMatch.html#a82e2ea7f0ab67e33e22b3a2a188feaba">m_Xor</a>(<a class="code" href="namespacellvm_1_1PatternMatch.html#a94bf3939e0bea91b481096473d0e549f">m_Deferred</a>(<a class="code" href="namespacellvm_1_1tgtok.html#abbc5259d649363016626e2529fabe0c5a58b95af1ca96e109f85a0646a05fceb7">TrueVal</a>), <a class="code" href="namespacellvm_1_1PatternMatch.html#a3acbd0be97863e3e03e3b85641254018">m_SpecificInt</a>(<a class="code" href="namespacellvm.html#abee0df5f7f703bb4462aba260ba0a60f">BitWidth</a> - 1))))</div>
<div class="line"><a name="l00866"></a><span class="lineno">  866</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l00867"></a><span class="lineno">  867</span>&#160; </div>
<div class="line"><a name="l00868"></a><span class="lineno">  868</span>&#160;  <span class="keywordflow">if</span> (!<a class="code" href="namespacellvm_1_1PatternMatch.html#a25d956d9e0beadd47ce4bc255dfa811d">match</a>(<a class="code" href="namespacellvm_1_1tgtok.html#abbc5259d649363016626e2529fabe0c5a58b95af1ca96e109f85a0646a05fceb7">TrueVal</a>, m_Intrinsic&lt;Intrinsic::ctlz&gt;()))</div>
<div class="line"><a name="l00869"></a><span class="lineno">  869</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l00870"></a><span class="lineno">  870</span>&#160; </div>
<div class="line"><a name="l00871"></a><span class="lineno">  871</span>&#160;  <a class="code" href="classllvm_1_1Value.html">Value</a> *<a class="code" href="ErlangGCPrinter_8cpp.html#a74b474c0616ab55c1d9487f11fd31d26">X</a> = ICI-&gt;<a class="code" href="classllvm_1_1User.html#abe1de1520a21f77ac57cc210bf0fb0b4">getOperand</a>(0);</div>
<div class="line"><a name="l00872"></a><span class="lineno">  872</span>&#160;  <span class="keyword">auto</span> *II = cast&lt;IntrinsicInst&gt;(<a class="code" href="namespacellvm_1_1tgtok.html#abbc5259d649363016626e2529fabe0c5a58b95af1ca96e109f85a0646a05fceb7">TrueVal</a>);</div>
<div class="line"><a name="l00873"></a><span class="lineno">  873</span>&#160;  <span class="keywordflow">if</span> (!<a class="code" href="namespacellvm_1_1PatternMatch.html#a25d956d9e0beadd47ce4bc255dfa811d">match</a>(II-&gt;getOperand(0), <a class="code" href="namespacellvm_1_1PatternMatch.html#ae9d735be1ececf149966a4da253f0320">m_c_And</a>(<a class="code" href="namespacellvm_1_1PatternMatch.html#a2d9861feadd3a09792967a012559e7b2">m_Specific</a>(<a class="code" href="ErlangGCPrinter_8cpp.html#a74b474c0616ab55c1d9487f11fd31d26">X</a>), <a class="code" href="namespacellvm_1_1PatternMatch.html#a2fed53ed2b3225752bd9e4fce4967361">m_Neg</a>(<a class="code" href="namespacellvm_1_1PatternMatch.html#a2d9861feadd3a09792967a012559e7b2">m_Specific</a>(<a class="code" href="ErlangGCPrinter_8cpp.html#a74b474c0616ab55c1d9487f11fd31d26">X</a>)))))</div>
<div class="line"><a name="l00874"></a><span class="lineno">  874</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l00875"></a><span class="lineno">  875</span>&#160; </div>
<div class="line"><a name="l00876"></a><span class="lineno">  876</span>&#160;  <a class="code" href="classllvm_1_1Function.html">Function</a> *<a class="code" href="MD5_8cpp.html#a96d73bbd7af15cb1fc38c3f4a3bd82e9">F</a> = <a class="code" href="namespacellvm_1_1Intrinsic.html#a842176a2c8c60a94bc788454b0828ea2">Intrinsic::getDeclaration</a>(II-&gt;getModule(), Intrinsic::cttz,</div>
<div class="line"><a name="l00877"></a><span class="lineno">  877</span>&#160;                                          II-&gt;getType());</div>
<div class="line"><a name="l00878"></a><span class="lineno">  878</span>&#160;  <span class="keywordflow">return</span> <a class="code" href="classllvm_1_1CallInst.html#a850d8262cd900958b3153c4aa080b2bb">CallInst::Create</a>(<a class="code" href="MD5_8cpp.html#a96d73bbd7af15cb1fc38c3f4a3bd82e9">F</a>, {<a class="code" href="ErlangGCPrinter_8cpp.html#a74b474c0616ab55c1d9487f11fd31d26">X</a>, II-&gt;getArgOperand(1)});</div>
<div class="line"><a name="l00879"></a><span class="lineno">  879</span>&#160;}</div>
<div class="line"><a name="l00880"></a><span class="lineno">  880</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l00881"></a><span class="lineno">  881</span>&#160;<span class="comment">/// Attempt to fold a cttz/ctlz followed by a icmp plus select into a single</span></div>
<div class="line"><a name="l00882"></a><span class="lineno">  882</span>&#160;<span class="comment">/// call to cttz/ctlz with flag &#39;is_zero_undef&#39; cleared.</span></div>
<div class="line"><a name="l00883"></a><span class="lineno">  883</span>&#160;<span class="comment">///</span></div>
<div class="line"><a name="l00884"></a><span class="lineno">  884</span>&#160;<span class="comment">/// For example, we can fold the following code sequence:</span></div>
<div class="line"><a name="l00885"></a><span class="lineno">  885</span>&#160;<span class="comment">/// \code</span></div>
<div class="line"><a name="l00886"></a><span class="lineno">  886</span>&#160;<span class="comment">///   %0 = tail call i32 @llvm.cttz.i32(i32 %x, i1 true)</span></div>
<div class="line"><a name="l00887"></a><span class="lineno">  887</span>&#160;<span class="comment">///   %1 = icmp ne i32 %x, 0</span></div>
<div class="line"><a name="l00888"></a><span class="lineno">  888</span>&#160;<span class="comment">///   %2 = select i1 %1, i32 %0, i32 32</span></div>
<div class="line"><a name="l00889"></a><span class="lineno">  889</span>&#160;<span class="comment">/// \code</span></div>
<div class="line"><a name="l00890"></a><span class="lineno">  890</span>&#160;<span class="comment">///</span></div>
<div class="line"><a name="l00891"></a><span class="lineno">  891</span>&#160;<span class="comment">/// into:</span></div>
<div class="line"><a name="l00892"></a><span class="lineno">  892</span>&#160;<span class="comment">///   %0 = tail call i32 @llvm.cttz.i32(i32 %x, i1 false)</span></div>
<div class="line"><a name="l00893"></a><span class="lineno">  893</span>&#160;<span class="comment"></span><span class="keyword">static</span> <a class="code" href="classllvm_1_1Value.html">Value</a> *foldSelectCttzCtlz(<a class="code" href="classllvm_1_1ICmpInst.html">ICmpInst</a> *ICI, <a class="code" href="classllvm_1_1Value.html">Value</a> *<a class="code" href="namespacellvm_1_1tgtok.html#abbc5259d649363016626e2529fabe0c5a58b95af1ca96e109f85a0646a05fceb7">TrueVal</a>, <a class="code" href="classllvm_1_1Value.html">Value</a> *<a class="code" href="namespacellvm_1_1tgtok.html#abbc5259d649363016626e2529fabe0c5aeb5a2908109c763377832cbb4726b6d4">FalseVal</a>,</div>
<div class="line"><a name="l00894"></a><span class="lineno">  894</span>&#160;                                 <a class="code" href="classllvm_1_1IRBuilder.html">InstCombiner::BuilderTy</a> &amp;<a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>) {</div>
<div class="line"><a name="l00895"></a><span class="lineno">  895</span>&#160;  <a class="code" href="classllvm_1_1CmpInst.html#a2be3583dac92a031fa1458d4d992c78b">ICmpInst::Predicate</a> Pred = ICI-&gt;<a class="code" href="classllvm_1_1CmpInst.html#aa7414ba9f658ff1287d22a4b8fe81bcb">getPredicate</a>();</div>
<div class="line"><a name="l00896"></a><span class="lineno">  896</span>&#160;  <a class="code" href="classllvm_1_1Value.html">Value</a> *CmpLHS = ICI-&gt;<a class="code" href="classllvm_1_1User.html#abe1de1520a21f77ac57cc210bf0fb0b4">getOperand</a>(0);</div>
<div class="line"><a name="l00897"></a><span class="lineno">  897</span>&#160;  <a class="code" href="classllvm_1_1Value.html">Value</a> *CmpRHS = ICI-&gt;<a class="code" href="classllvm_1_1User.html#abe1de1520a21f77ac57cc210bf0fb0b4">getOperand</a>(1);</div>
<div class="line"><a name="l00898"></a><span class="lineno">  898</span>&#160; </div>
<div class="line"><a name="l00899"></a><span class="lineno">  899</span>&#160;  <span class="comment">// Check if the condition value compares a value for equality against zero.</span></div>
<div class="line"><a name="l00900"></a><span class="lineno">  900</span>&#160;  <span class="keywordflow">if</span> (!ICI-&gt;<a class="code" href="classllvm_1_1ICmpInst.html#abe8988eef2e6fc2baba032cb22afedd7">isEquality</a>() || !<a class="code" href="namespacellvm_1_1PatternMatch.html#a25d956d9e0beadd47ce4bc255dfa811d">match</a>(CmpRHS, <a class="code" href="namespacellvm_1_1PatternMatch.html#ae77be336e228cf9aa00709a8606dfb98">m_Zero</a>()))</div>
<div class="line"><a name="l00901"></a><span class="lineno">  901</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l00902"></a><span class="lineno">  902</span>&#160; </div>
<div class="line"><a name="l00903"></a><span class="lineno">  903</span>&#160;  <a class="code" href="classllvm_1_1Value.html">Value</a> *SelectArg = <a class="code" href="namespacellvm_1_1tgtok.html#abbc5259d649363016626e2529fabe0c5aeb5a2908109c763377832cbb4726b6d4">FalseVal</a>;</div>
<div class="line"><a name="l00904"></a><span class="lineno">  904</span>&#160;  <a class="code" href="classllvm_1_1Value.html">Value</a> *ValueOnZero = <a class="code" href="namespacellvm_1_1tgtok.html#abbc5259d649363016626e2529fabe0c5a58b95af1ca96e109f85a0646a05fceb7">TrueVal</a>;</div>
<div class="line"><a name="l00905"></a><span class="lineno">  905</span>&#160;  <span class="keywordflow">if</span> (Pred == <a class="code" href="classllvm_1_1CmpInst.html#a2be3583dac92a031fa1458d4d992c78bac17897ebf2f6a6986280fc3bdf28a30a">ICmpInst::ICMP_NE</a>)</div>
<div class="line"><a name="l00906"></a><span class="lineno">  906</span>&#160;    <a class="code" href="namespacestd.html#ab8424022895aee3e366fb9a32f2883cb">std::swap</a>(SelectArg, ValueOnZero);</div>
<div class="line"><a name="l00907"></a><span class="lineno">  907</span>&#160; </div>
<div class="line"><a name="l00908"></a><span class="lineno">  908</span>&#160;  <span class="comment">// Skip zero extend/truncate.</span></div>
<div class="line"><a name="l00909"></a><span class="lineno">  909</span>&#160;  <a class="code" href="classllvm_1_1Value.html">Value</a> *Count = <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l00910"></a><span class="lineno">  910</span>&#160;  <span class="keywordflow">if</span> (!<a class="code" href="namespacellvm_1_1PatternMatch.html#a25d956d9e0beadd47ce4bc255dfa811d">match</a>(SelectArg, <a class="code" href="namespacellvm_1_1PatternMatch.html#a2cbdca7c8267aac6914d674f8e81841b">m_ZExt</a>(<a class="code" href="namespacellvm_1_1PatternMatch.html#a24bca8838396aa81b87de8e7ac774b19">m_Value</a>(Count))) &amp;&amp;</div>
<div class="line"><a name="l00911"></a><span class="lineno">  911</span>&#160;      !<a class="code" href="namespacellvm_1_1PatternMatch.html#a25d956d9e0beadd47ce4bc255dfa811d">match</a>(SelectArg, <a class="code" href="namespacellvm_1_1PatternMatch.html#a5b844aada27c4c6fdb87146ac458c0d8">m_Trunc</a>(<a class="code" href="namespacellvm_1_1PatternMatch.html#a24bca8838396aa81b87de8e7ac774b19">m_Value</a>(Count))))</div>
<div class="line"><a name="l00912"></a><span class="lineno">  912</span>&#160;    Count = SelectArg;</div>
<div class="line"><a name="l00913"></a><span class="lineno">  913</span>&#160; </div>
<div class="line"><a name="l00914"></a><span class="lineno">  914</span>&#160;  <span class="comment">// Check that &#39;Count&#39; is a call to intrinsic cttz/ctlz. Also check that the</span></div>
<div class="line"><a name="l00915"></a><span class="lineno">  915</span>&#160;  <span class="comment">// input to the cttz/ctlz is used as LHS for the compare instruction.</span></div>
<div class="line"><a name="l00916"></a><span class="lineno">  916</span>&#160;  <span class="keywordflow">if</span> (!<a class="code" href="namespacellvm_1_1PatternMatch.html#a25d956d9e0beadd47ce4bc255dfa811d">match</a>(Count, m_Intrinsic&lt;Intrinsic::cttz&gt;(<a class="code" href="namespacellvm_1_1PatternMatch.html#a2d9861feadd3a09792967a012559e7b2">m_Specific</a>(CmpLHS))) &amp;&amp;</div>
<div class="line"><a name="l00917"></a><span class="lineno">  917</span>&#160;      !<a class="code" href="namespacellvm_1_1PatternMatch.html#a25d956d9e0beadd47ce4bc255dfa811d">match</a>(Count, m_Intrinsic&lt;Intrinsic::ctlz&gt;(<a class="code" href="namespacellvm_1_1PatternMatch.html#a2d9861feadd3a09792967a012559e7b2">m_Specific</a>(CmpLHS))))</div>
<div class="line"><a name="l00918"></a><span class="lineno">  918</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l00919"></a><span class="lineno">  919</span>&#160; </div>
<div class="line"><a name="l00920"></a><span class="lineno">  920</span>&#160;  <a class="code" href="classllvm_1_1IntrinsicInst.html">IntrinsicInst</a> *II = cast&lt;IntrinsicInst&gt;(Count);</div>
<div class="line"><a name="l00921"></a><span class="lineno">  921</span>&#160; </div>
<div class="line"><a name="l00922"></a><span class="lineno">  922</span>&#160;  <span class="comment">// Check if the value propagated on zero is a constant number equal to the</span></div>
<div class="line"><a name="l00923"></a><span class="lineno">  923</span>&#160;  <span class="comment">// sizeof in bits of &#39;Count&#39;.</span></div>
<div class="line"><a name="l00924"></a><span class="lineno">  924</span>&#160;  <span class="keywordtype">unsigned</span> SizeOfInBits = Count-&gt;<a class="code" href="classllvm_1_1Value.html#a6393a2d4fe7e10b28a0dcc35f881567b">getType</a>()-&gt;<a class="code" href="classllvm_1_1Type.html#a9f382207d841377156d4c7868b66b9a5">getScalarSizeInBits</a>();</div>
<div class="line"><a name="l00925"></a><span class="lineno">  925</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="namespacellvm_1_1PatternMatch.html#a25d956d9e0beadd47ce4bc255dfa811d">match</a>(ValueOnZero, <a class="code" href="namespacellvm_1_1PatternMatch.html#a3acbd0be97863e3e03e3b85641254018">m_SpecificInt</a>(SizeOfInBits))) {</div>
<div class="line"><a name="l00926"></a><span class="lineno">  926</span>&#160;    <span class="comment">// Explicitly clear the &#39;undef_on_zero&#39; flag. It&#39;s always valid to go from</span></div>
<div class="line"><a name="l00927"></a><span class="lineno">  927</span>&#160;    <span class="comment">// true to false on this flag, so we can replace it for all users.</span></div>
<div class="line"><a name="l00928"></a><span class="lineno">  928</span>&#160;    II-&gt;<a class="code" href="classllvm_1_1CallBase.html#abc10b887caad109288ffceb230493a85">setArgOperand</a>(1, <a class="code" href="classllvm_1_1ConstantInt.html#aa7cce62ac5cc6df09cce0535874336b7">ConstantInt::getFalse</a>(II-&gt;<a class="code" href="classllvm_1_1Value.html#ab3fc0225d8aaf8434026c3573f961f2c">getContext</a>()));</div>
<div class="line"><a name="l00929"></a><span class="lineno">  929</span>&#160;    <span class="keywordflow">return</span> SelectArg;</div>
<div class="line"><a name="l00930"></a><span class="lineno">  930</span>&#160;  }</div>
<div class="line"><a name="l00931"></a><span class="lineno">  931</span>&#160; </div>
<div class="line"><a name="l00932"></a><span class="lineno">  932</span>&#160;  <span class="comment">// The ValueOnZero is not the bitwidth. But if the cttz/ctlz (and optional</span></div>
<div class="line"><a name="l00933"></a><span class="lineno">  933</span>&#160;  <span class="comment">// zext/trunc) have one use (ending at the select), the cttz/ctlz result will</span></div>
<div class="line"><a name="l00934"></a><span class="lineno">  934</span>&#160;  <span class="comment">// not be used if the input is zero. Relax to &#39;undef_on_zero&#39; for that case.</span></div>
<div class="line"><a name="l00935"></a><span class="lineno">  935</span>&#160;  <span class="keywordflow">if</span> (II-&gt;<a class="code" href="classllvm_1_1Value.html#a3a402430a1bbe70a9282dcb0e0b6a2cd">hasOneUse</a>() &amp;&amp; SelectArg-&gt;<a class="code" href="classllvm_1_1Value.html#a3a402430a1bbe70a9282dcb0e0b6a2cd">hasOneUse</a>() &amp;&amp;</div>
<div class="line"><a name="l00936"></a><span class="lineno">  936</span>&#160;      !<a class="code" href="namespacellvm_1_1PatternMatch.html#a25d956d9e0beadd47ce4bc255dfa811d">match</a>(II-&gt;<a class="code" href="classllvm_1_1CallBase.html#ab2caa29167597390ab2fc3cf30d70389">getArgOperand</a>(1), <a class="code" href="namespacellvm_1_1PatternMatch.html#aebdb2700a77d10ae6f0ce115e23d9f77">m_One</a>()))</div>
<div class="line"><a name="l00937"></a><span class="lineno">  937</span>&#160;    II-&gt;<a class="code" href="classllvm_1_1CallBase.html#abc10b887caad109288ffceb230493a85">setArgOperand</a>(1, <a class="code" href="classllvm_1_1ConstantInt.html#a82dbbd8e3688b0bc1eedb338864d0d0c">ConstantInt::getTrue</a>(II-&gt;<a class="code" href="classllvm_1_1Value.html#ab3fc0225d8aaf8434026c3573f961f2c">getContext</a>()));</div>
<div class="line"><a name="l00938"></a><span class="lineno">  938</span>&#160; </div>
<div class="line"><a name="l00939"></a><span class="lineno">  939</span>&#160;  <span class="keywordflow">return</span> <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l00940"></a><span class="lineno">  940</span>&#160;}</div>
<div class="line"><a name="l00941"></a><span class="lineno">  941</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l00942"></a><span class="lineno">  942</span>&#160;<span class="comment">/// Return true if we find and adjust an icmp+select pattern where the compare</span></div>
<div class="line"><a name="l00943"></a><span class="lineno">  943</span>&#160;<span class="comment">/// is with a constant that can be incremented or decremented to match the</span></div>
<div class="line"><a name="l00944"></a><span class="lineno">  944</span>&#160;<span class="comment">/// minimum or maximum idiom.</span></div>
<div class="line"><a name="l00945"></a><span class="lineno">  945</span>&#160;<span class="comment"></span><span class="keyword">static</span> <span class="keywordtype">bool</span> adjustMinMax(<a class="code" href="classllvm_1_1SelectInst.html">SelectInst</a> &amp;Sel, <a class="code" href="classllvm_1_1ICmpInst.html">ICmpInst</a> &amp;Cmp) {</div>
<div class="line"><a name="l00946"></a><span class="lineno">  946</span>&#160;  <a class="code" href="classllvm_1_1CmpInst.html#a2be3583dac92a031fa1458d4d992c78b">ICmpInst::Predicate</a> Pred = Cmp.<a class="code" href="classllvm_1_1CmpInst.html#aa7414ba9f658ff1287d22a4b8fe81bcb">getPredicate</a>();</div>
<div class="line"><a name="l00947"></a><span class="lineno">  947</span>&#160;  <a class="code" href="classllvm_1_1Value.html">Value</a> *CmpLHS = Cmp.<a class="code" href="classllvm_1_1User.html#abe1de1520a21f77ac57cc210bf0fb0b4">getOperand</a>(0);</div>
<div class="line"><a name="l00948"></a><span class="lineno">  948</span>&#160;  <a class="code" href="classllvm_1_1Value.html">Value</a> *CmpRHS = Cmp.<a class="code" href="classllvm_1_1User.html#abe1de1520a21f77ac57cc210bf0fb0b4">getOperand</a>(1);</div>
<div class="line"><a name="l00949"></a><span class="lineno">  949</span>&#160;  <a class="code" href="classllvm_1_1Value.html">Value</a> *<a class="code" href="namespacellvm_1_1tgtok.html#abbc5259d649363016626e2529fabe0c5a58b95af1ca96e109f85a0646a05fceb7">TrueVal</a> = Sel.<a class="code" href="classllvm_1_1SelectInst.html#a483700f6bf3ac62445850d768cf188f6">getTrueValue</a>();</div>
<div class="line"><a name="l00950"></a><span class="lineno">  950</span>&#160;  <a class="code" href="classllvm_1_1Value.html">Value</a> *<a class="code" href="namespacellvm_1_1tgtok.html#abbc5259d649363016626e2529fabe0c5aeb5a2908109c763377832cbb4726b6d4">FalseVal</a> = Sel.<a class="code" href="classllvm_1_1SelectInst.html#a59b0ee738ec17984b97128e7f1594db3">getFalseValue</a>();</div>
<div class="line"><a name="l00951"></a><span class="lineno">  951</span>&#160; </div>
<div class="line"><a name="l00952"></a><span class="lineno">  952</span>&#160;  <span class="comment">// We may move or edit the compare, so make sure the select is the only user.</span></div>
<div class="line"><a name="l00953"></a><span class="lineno">  953</span>&#160;  <span class="keyword">const</span> <a class="code" href="classllvm_1_1APInt.html">APInt</a> *CmpC;</div>
<div class="line"><a name="l00954"></a><span class="lineno">  954</span>&#160;  <span class="keywordflow">if</span> (!Cmp.<a class="code" href="classllvm_1_1Value.html#a3a402430a1bbe70a9282dcb0e0b6a2cd">hasOneUse</a>() || !<a class="code" href="namespacellvm_1_1PatternMatch.html#a25d956d9e0beadd47ce4bc255dfa811d">match</a>(CmpRHS, <a class="code" href="namespacellvm_1_1PatternMatch.html#aac9e78b3aa02ec087c4621358f506718">m_APInt</a>(CmpC)))</div>
<div class="line"><a name="l00955"></a><span class="lineno">  955</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l00956"></a><span class="lineno">  956</span>&#160; </div>
<div class="line"><a name="l00957"></a><span class="lineno">  957</span>&#160;  <span class="comment">// These transforms only work for selects of integers or vector selects of</span></div>
<div class="line"><a name="l00958"></a><span class="lineno">  958</span>&#160;  <span class="comment">// integer vectors.</span></div>
<div class="line"><a name="l00959"></a><span class="lineno">  959</span>&#160;  <a class="code" href="classllvm_1_1Type.html">Type</a> *SelTy = Sel.<a class="code" href="classllvm_1_1Value.html#a6393a2d4fe7e10b28a0dcc35f881567b">getType</a>();</div>
<div class="line"><a name="l00960"></a><span class="lineno">  960</span>&#160;  <span class="keyword">auto</span> *SelEltTy = dyn_cast&lt;IntegerType&gt;(SelTy-&gt;<a class="code" href="classllvm_1_1Type.html#a4abb39a66573f61fda80469faa5d861d">getScalarType</a>());</div>
<div class="line"><a name="l00961"></a><span class="lineno">  961</span>&#160;  <span class="keywordflow">if</span> (!SelEltTy || SelTy-&gt;<a class="code" href="classllvm_1_1Type.html#a1bc022868b23918efa44df511f4d5b61">isVectorTy</a>() != Cmp.<a class="code" href="classllvm_1_1Value.html#a6393a2d4fe7e10b28a0dcc35f881567b">getType</a>()-&gt;<a class="code" href="classllvm_1_1Type.html#a1bc022868b23918efa44df511f4d5b61">isVectorTy</a>())</div>
<div class="line"><a name="l00962"></a><span class="lineno">  962</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l00963"></a><span class="lineno">  963</span>&#160; </div>
<div class="line"><a name="l00964"></a><span class="lineno">  964</span>&#160;  <a class="code" href="classllvm_1_1Constant.html">Constant</a> *AdjustedRHS;</div>
<div class="line"><a name="l00965"></a><span class="lineno">  965</span>&#160;  <span class="keywordflow">if</span> (Pred == <a class="code" href="classllvm_1_1CmpInst.html#a2be3583dac92a031fa1458d4d992c78ba607cecdc5172814382033e001ed11fad">ICmpInst::ICMP_UGT</a> || Pred == <a class="code" href="classllvm_1_1CmpInst.html#a2be3583dac92a031fa1458d4d992c78ba720a42e85f7e981afd61e28473b0000a">ICmpInst::ICMP_SGT</a>)</div>
<div class="line"><a name="l00966"></a><span class="lineno">  966</span>&#160;    AdjustedRHS = <a class="code" href="classllvm_1_1ConstantInt.html#a969709dd49c28865a482d8b870f87c46">ConstantInt::get</a>(CmpRHS-&gt;<a class="code" href="classllvm_1_1Value.html#a6393a2d4fe7e10b28a0dcc35f881567b">getType</a>(), *CmpC + 1);</div>
<div class="line"><a name="l00967"></a><span class="lineno">  967</span>&#160;  <span class="keywordflow">else</span> <span class="keywordflow">if</span> (Pred == <a class="code" href="classllvm_1_1CmpInst.html#a2be3583dac92a031fa1458d4d992c78ba91d86a4753c8bd7624e01bf565d87f8e">ICmpInst::ICMP_ULT</a> || Pred == <a class="code" href="classllvm_1_1CmpInst.html#a2be3583dac92a031fa1458d4d992c78ba15ae464950ac676919c2f0c7aafc706c">ICmpInst::ICMP_SLT</a>)</div>
<div class="line"><a name="l00968"></a><span class="lineno">  968</span>&#160;    AdjustedRHS = <a class="code" href="classllvm_1_1ConstantInt.html#a969709dd49c28865a482d8b870f87c46">ConstantInt::get</a>(CmpRHS-&gt;<a class="code" href="classllvm_1_1Value.html#a6393a2d4fe7e10b28a0dcc35f881567b">getType</a>(), *CmpC - 1);</div>
<div class="line"><a name="l00969"></a><span class="lineno">  969</span>&#160;  <span class="keywordflow">else</span></div>
<div class="line"><a name="l00970"></a><span class="lineno">  970</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l00971"></a><span class="lineno">  971</span>&#160; </div>
<div class="line"><a name="l00972"></a><span class="lineno">  972</span>&#160;  <span class="comment">// X &gt; C ? X : C+1  --&gt;  X &lt; C+1 ? C+1 : X</span></div>
<div class="line"><a name="l00973"></a><span class="lineno">  973</span>&#160;  <span class="comment">// X &lt; C ? X : C-1  --&gt;  X &gt; C-1 ? C-1 : X</span></div>
<div class="line"><a name="l00974"></a><span class="lineno">  974</span>&#160;  <span class="keywordflow">if</span> ((CmpLHS == <a class="code" href="namespacellvm_1_1tgtok.html#abbc5259d649363016626e2529fabe0c5a58b95af1ca96e109f85a0646a05fceb7">TrueVal</a> &amp;&amp; AdjustedRHS == <a class="code" href="namespacellvm_1_1tgtok.html#abbc5259d649363016626e2529fabe0c5aeb5a2908109c763377832cbb4726b6d4">FalseVal</a>) ||</div>
<div class="line"><a name="l00975"></a><span class="lineno">  975</span>&#160;      (CmpLHS == <a class="code" href="namespacellvm_1_1tgtok.html#abbc5259d649363016626e2529fabe0c5aeb5a2908109c763377832cbb4726b6d4">FalseVal</a> &amp;&amp; AdjustedRHS == <a class="code" href="namespacellvm_1_1tgtok.html#abbc5259d649363016626e2529fabe0c5a58b95af1ca96e109f85a0646a05fceb7">TrueVal</a>)) {</div>
<div class="line"><a name="l00976"></a><span class="lineno">  976</span>&#160;    ; <span class="comment">// Nothing to do here. Values match without any sign/zero extension.</span></div>
<div class="line"><a name="l00977"></a><span class="lineno">  977</span>&#160;  }</div>
<div class="line"><a name="l00978"></a><span class="lineno">  978</span>&#160;  <span class="comment">// Types do not match. Instead of calculating this with mixed types, promote</span></div>
<div class="line"><a name="l00979"></a><span class="lineno">  979</span>&#160;  <span class="comment">// all to the larger type. This enables scalar evolution to analyze this</span></div>
<div class="line"><a name="l00980"></a><span class="lineno">  980</span>&#160;  <span class="comment">// expression.</span></div>
<div class="line"><a name="l00981"></a><span class="lineno">  981</span>&#160;  <span class="keywordflow">else</span> <span class="keywordflow">if</span> (CmpRHS-&gt;<a class="code" href="classllvm_1_1Value.html#a6393a2d4fe7e10b28a0dcc35f881567b">getType</a>()-&gt;<a class="code" href="classllvm_1_1Type.html#a9f382207d841377156d4c7868b66b9a5">getScalarSizeInBits</a>() &lt; SelEltTy-&gt;getBitWidth()) {</div>
<div class="line"><a name="l00982"></a><span class="lineno">  982</span>&#160;    <a class="code" href="classllvm_1_1Constant.html">Constant</a> *SextRHS = <a class="code" href="classllvm_1_1ConstantExpr.html#aa342c9b3d47cd9bde63b80c83ead429b">ConstantExpr::getSExt</a>(AdjustedRHS, SelTy);</div>
<div class="line"><a name="l00983"></a><span class="lineno">  983</span>&#160; </div>
<div class="line"><a name="l00984"></a><span class="lineno">  984</span>&#160;    <span class="comment">// X = sext x; x &gt;s c ? X : C+1 --&gt; X = sext x; X &lt;s C+1 ? C+1 : X</span></div>
<div class="line"><a name="l00985"></a><span class="lineno">  985</span>&#160;    <span class="comment">// X = sext x; x &lt;s c ? X : C-1 --&gt; X = sext x; X &gt;s C-1 ? C-1 : X</span></div>
<div class="line"><a name="l00986"></a><span class="lineno">  986</span>&#160;    <span class="comment">// X = sext x; x &gt;u c ? X : C+1 --&gt; X = sext x; X &lt;u C+1 ? C+1 : X</span></div>
<div class="line"><a name="l00987"></a><span class="lineno">  987</span>&#160;    <span class="comment">// X = sext x; x &lt;u c ? X : C-1 --&gt; X = sext x; X &gt;u C-1 ? C-1 : X</span></div>
<div class="line"><a name="l00988"></a><span class="lineno">  988</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="namespacellvm_1_1PatternMatch.html#a25d956d9e0beadd47ce4bc255dfa811d">match</a>(<a class="code" href="namespacellvm_1_1tgtok.html#abbc5259d649363016626e2529fabe0c5a58b95af1ca96e109f85a0646a05fceb7">TrueVal</a>, <a class="code" href="namespacellvm_1_1PatternMatch.html#aaab494a433fbb23bc68393ee8bcfc5ac">m_SExt</a>(<a class="code" href="namespacellvm_1_1PatternMatch.html#a2d9861feadd3a09792967a012559e7b2">m_Specific</a>(CmpLHS))) &amp;&amp; SextRHS == <a class="code" href="namespacellvm_1_1tgtok.html#abbc5259d649363016626e2529fabe0c5aeb5a2908109c763377832cbb4726b6d4">FalseVal</a>) {</div>
<div class="line"><a name="l00989"></a><span class="lineno">  989</span>&#160;      CmpLHS = <a class="code" href="namespacellvm_1_1tgtok.html#abbc5259d649363016626e2529fabe0c5a58b95af1ca96e109f85a0646a05fceb7">TrueVal</a>;</div>
<div class="line"><a name="l00990"></a><span class="lineno">  990</span>&#160;      AdjustedRHS = SextRHS;</div>
<div class="line"><a name="l00991"></a><span class="lineno">  991</span>&#160;    } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code" href="namespacellvm_1_1PatternMatch.html#a25d956d9e0beadd47ce4bc255dfa811d">match</a>(<a class="code" href="namespacellvm_1_1tgtok.html#abbc5259d649363016626e2529fabe0c5aeb5a2908109c763377832cbb4726b6d4">FalseVal</a>, <a class="code" href="namespacellvm_1_1PatternMatch.html#aaab494a433fbb23bc68393ee8bcfc5ac">m_SExt</a>(<a class="code" href="namespacellvm_1_1PatternMatch.html#a2d9861feadd3a09792967a012559e7b2">m_Specific</a>(CmpLHS))) &amp;&amp;</div>
<div class="line"><a name="l00992"></a><span class="lineno">  992</span>&#160;               SextRHS == <a class="code" href="namespacellvm_1_1tgtok.html#abbc5259d649363016626e2529fabe0c5a58b95af1ca96e109f85a0646a05fceb7">TrueVal</a>) {</div>
<div class="line"><a name="l00993"></a><span class="lineno">  993</span>&#160;      CmpLHS = <a class="code" href="namespacellvm_1_1tgtok.html#abbc5259d649363016626e2529fabe0c5aeb5a2908109c763377832cbb4726b6d4">FalseVal</a>;</div>
<div class="line"><a name="l00994"></a><span class="lineno">  994</span>&#160;      AdjustedRHS = SextRHS;</div>
<div class="line"><a name="l00995"></a><span class="lineno">  995</span>&#160;    } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (Cmp.<a class="code" href="classllvm_1_1CmpInst.html#af206a3d6f58d9e53b074460f0d1ecb86">isUnsigned</a>()) {</div>
<div class="line"><a name="l00996"></a><span class="lineno">  996</span>&#160;      <a class="code" href="classllvm_1_1Constant.html">Constant</a> *ZextRHS = <a class="code" href="classllvm_1_1ConstantExpr.html#a58d6359cee16e5da66861058836dcca9">ConstantExpr::getZExt</a>(AdjustedRHS, SelTy);</div>
<div class="line"><a name="l00997"></a><span class="lineno">  997</span>&#160;      <span class="comment">// X = zext x; x &gt;u c ? X : C+1 --&gt; X = zext x; X &lt;u C+1 ? C+1 : X</span></div>
<div class="line"><a name="l00998"></a><span class="lineno">  998</span>&#160;      <span class="comment">// X = zext x; x &lt;u c ? X : C-1 --&gt; X = zext x; X &gt;u C-1 ? C-1 : X</span></div>
<div class="line"><a name="l00999"></a><span class="lineno">  999</span>&#160;      <span class="comment">// zext + signed compare cannot be changed:</span></div>
<div class="line"><a name="l01000"></a><span class="lineno"> 1000</span>&#160;      <span class="comment">//    0xff &lt;s 0x00, but 0x00ff &gt;s 0x0000</span></div>
<div class="line"><a name="l01001"></a><span class="lineno"> 1001</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="namespacellvm_1_1PatternMatch.html#a25d956d9e0beadd47ce4bc255dfa811d">match</a>(<a class="code" href="namespacellvm_1_1tgtok.html#abbc5259d649363016626e2529fabe0c5a58b95af1ca96e109f85a0646a05fceb7">TrueVal</a>, <a class="code" href="namespacellvm_1_1PatternMatch.html#a2cbdca7c8267aac6914d674f8e81841b">m_ZExt</a>(<a class="code" href="namespacellvm_1_1PatternMatch.html#a2d9861feadd3a09792967a012559e7b2">m_Specific</a>(CmpLHS))) &amp;&amp; ZextRHS == <a class="code" href="namespacellvm_1_1tgtok.html#abbc5259d649363016626e2529fabe0c5aeb5a2908109c763377832cbb4726b6d4">FalseVal</a>) {</div>
<div class="line"><a name="l01002"></a><span class="lineno"> 1002</span>&#160;        CmpLHS = <a class="code" href="namespacellvm_1_1tgtok.html#abbc5259d649363016626e2529fabe0c5a58b95af1ca96e109f85a0646a05fceb7">TrueVal</a>;</div>
<div class="line"><a name="l01003"></a><span class="lineno"> 1003</span>&#160;        AdjustedRHS = ZextRHS;</div>
<div class="line"><a name="l01004"></a><span class="lineno"> 1004</span>&#160;      } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code" href="namespacellvm_1_1PatternMatch.html#a25d956d9e0beadd47ce4bc255dfa811d">match</a>(<a class="code" href="namespacellvm_1_1tgtok.html#abbc5259d649363016626e2529fabe0c5aeb5a2908109c763377832cbb4726b6d4">FalseVal</a>, <a class="code" href="namespacellvm_1_1PatternMatch.html#a2cbdca7c8267aac6914d674f8e81841b">m_ZExt</a>(<a class="code" href="namespacellvm_1_1PatternMatch.html#a2d9861feadd3a09792967a012559e7b2">m_Specific</a>(CmpLHS))) &amp;&amp;</div>
<div class="line"><a name="l01005"></a><span class="lineno"> 1005</span>&#160;                 ZextRHS == <a class="code" href="namespacellvm_1_1tgtok.html#abbc5259d649363016626e2529fabe0c5a58b95af1ca96e109f85a0646a05fceb7">TrueVal</a>) {</div>
<div class="line"><a name="l01006"></a><span class="lineno"> 1006</span>&#160;        CmpLHS = <a class="code" href="namespacellvm_1_1tgtok.html#abbc5259d649363016626e2529fabe0c5aeb5a2908109c763377832cbb4726b6d4">FalseVal</a>;</div>
<div class="line"><a name="l01007"></a><span class="lineno"> 1007</span>&#160;        AdjustedRHS = ZextRHS;</div>
<div class="line"><a name="l01008"></a><span class="lineno"> 1008</span>&#160;      } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l01009"></a><span class="lineno"> 1009</span>&#160;        <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l01010"></a><span class="lineno"> 1010</span>&#160;      }</div>
<div class="line"><a name="l01011"></a><span class="lineno"> 1011</span>&#160;    } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l01012"></a><span class="lineno"> 1012</span>&#160;      <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l01013"></a><span class="lineno"> 1013</span>&#160;    }</div>
<div class="line"><a name="l01014"></a><span class="lineno"> 1014</span>&#160;  } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l01015"></a><span class="lineno"> 1015</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l01016"></a><span class="lineno"> 1016</span>&#160;  }</div>
<div class="line"><a name="l01017"></a><span class="lineno"> 1017</span>&#160; </div>
<div class="line"><a name="l01018"></a><span class="lineno"> 1018</span>&#160;  Pred = <a class="code" href="classllvm_1_1CmpInst.html#a49a2d8f483ea08a3d6ea75f90c640d76">ICmpInst::getSwappedPredicate</a>(Pred);</div>
<div class="line"><a name="l01019"></a><span class="lineno"> 1019</span>&#160;  CmpRHS = AdjustedRHS;</div>
<div class="line"><a name="l01020"></a><span class="lineno"> 1020</span>&#160;  <a class="code" href="namespacestd.html#ab8424022895aee3e366fb9a32f2883cb">std::swap</a>(<a class="code" href="namespacellvm_1_1tgtok.html#abbc5259d649363016626e2529fabe0c5aeb5a2908109c763377832cbb4726b6d4">FalseVal</a>, <a class="code" href="namespacellvm_1_1tgtok.html#abbc5259d649363016626e2529fabe0c5a58b95af1ca96e109f85a0646a05fceb7">TrueVal</a>);</div>
<div class="line"><a name="l01021"></a><span class="lineno"> 1021</span>&#160;  Cmp.<a class="code" href="classllvm_1_1CmpInst.html#a126a12b67fa620ad28ec0c919ca7a3e8">setPredicate</a>(Pred);</div>
<div class="line"><a name="l01022"></a><span class="lineno"> 1022</span>&#160;  Cmp.<a class="code" href="classllvm_1_1User.html#a5fa9b8e1842b354f64c1ba6be0a4a17f">setOperand</a>(0, CmpLHS);</div>
<div class="line"><a name="l01023"></a><span class="lineno"> 1023</span>&#160;  Cmp.<a class="code" href="classllvm_1_1User.html#a5fa9b8e1842b354f64c1ba6be0a4a17f">setOperand</a>(1, CmpRHS);</div>
<div class="line"><a name="l01024"></a><span class="lineno"> 1024</span>&#160;  Sel.<a class="code" href="classllvm_1_1User.html#a5fa9b8e1842b354f64c1ba6be0a4a17f">setOperand</a>(1, <a class="code" href="namespacellvm_1_1tgtok.html#abbc5259d649363016626e2529fabe0c5a58b95af1ca96e109f85a0646a05fceb7">TrueVal</a>);</div>
<div class="line"><a name="l01025"></a><span class="lineno"> 1025</span>&#160;  Sel.<a class="code" href="classllvm_1_1User.html#a5fa9b8e1842b354f64c1ba6be0a4a17f">setOperand</a>(2, <a class="code" href="namespacellvm_1_1tgtok.html#abbc5259d649363016626e2529fabe0c5aeb5a2908109c763377832cbb4726b6d4">FalseVal</a>);</div>
<div class="line"><a name="l01026"></a><span class="lineno"> 1026</span>&#160;  Sel.<a class="code" href="classllvm_1_1Instruction.html#a6e324daba99cb1d67713a562f9a778d2">swapProfMetadata</a>();</div>
<div class="line"><a name="l01027"></a><span class="lineno"> 1027</span>&#160; </div>
<div class="line"><a name="l01028"></a><span class="lineno"> 1028</span>&#160;  <span class="comment">// Move the compare instruction right before the select instruction. Otherwise</span></div>
<div class="line"><a name="l01029"></a><span class="lineno"> 1029</span>&#160;  <span class="comment">// the sext/zext value may be defined after the compare instruction uses it.</span></div>
<div class="line"><a name="l01030"></a><span class="lineno"> 1030</span>&#160;  Cmp.<a class="code" href="classllvm_1_1Instruction.html#af67d1f3a518964d80a109bb3d9d5cf1e">moveBefore</a>(&amp;Sel);</div>
<div class="line"><a name="l01031"></a><span class="lineno"> 1031</span>&#160; </div>
<div class="line"><a name="l01032"></a><span class="lineno"> 1032</span>&#160;  <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l01033"></a><span class="lineno"> 1033</span>&#160;}</div>
<div class="line"><a name="l01034"></a><span class="lineno"> 1034</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l01035"></a><span class="lineno"> 1035</span>&#160;<span class="comment">/// If this is an integer min/max (icmp + select) with a constant operand,</span></div>
<div class="line"><a name="l01036"></a><span class="lineno"> 1036</span>&#160;<span class="comment">/// create the canonical icmp for the min/max operation and canonicalize the</span></div>
<div class="line"><a name="l01037"></a><span class="lineno"> 1037</span>&#160;<span class="comment">/// constant to the &#39;false&#39; operand of the select:</span></div>
<div class="line"><a name="l01038"></a><span class="lineno"> 1038</span>&#160;<span class="comment">/// select (icmp Pred X, C1), C2, X --&gt; select (icmp Pred&#39; X, C2), X, C2</span></div>
<div class="line"><a name="l01039"></a><span class="lineno"> 1039</span>&#160;<span class="comment">/// Note: if C1 != C2, this will change the icmp constant to the existing</span></div>
<div class="line"><a name="l01040"></a><span class="lineno"> 1040</span>&#160;<span class="comment">/// constant operand of the select.</span></div>
<div class="line"><a name="l01041"></a><span class="lineno"> 1041</span>&#160;<span class="comment"></span><span class="keyword">static</span> <a class="code" href="classllvm_1_1Instruction.html">Instruction</a> *canonicalizeMinMaxWithConstant(<a class="code" href="classllvm_1_1SelectInst.html">SelectInst</a> &amp;Sel,</div>
<div class="line"><a name="l01042"></a><span class="lineno"> 1042</span>&#160;                                                   <a class="code" href="classllvm_1_1ICmpInst.html">ICmpInst</a> &amp;Cmp,</div>
<div class="line"><a name="l01043"></a><span class="lineno"> 1043</span>&#160;                                                   <a class="code" href="classllvm_1_1InstCombinerImpl.html">InstCombinerImpl</a> &amp;IC) {</div>
<div class="line"><a name="l01044"></a><span class="lineno"> 1044</span>&#160;  <span class="keywordflow">if</span> (!Cmp.<a class="code" href="classllvm_1_1Value.html#a3a402430a1bbe70a9282dcb0e0b6a2cd">hasOneUse</a>() || !isa&lt;Constant&gt;(Cmp.<a class="code" href="classllvm_1_1User.html#abe1de1520a21f77ac57cc210bf0fb0b4">getOperand</a>(1)))</div>
<div class="line"><a name="l01045"></a><span class="lineno"> 1045</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l01046"></a><span class="lineno"> 1046</span>&#160; </div>
<div class="line"><a name="l01047"></a><span class="lineno"> 1047</span>&#160;  <span class="comment">// Canonicalize the compare predicate based on whether we have min or max.</span></div>
<div class="line"><a name="l01048"></a><span class="lineno"> 1048</span>&#160;  <a class="code" href="classllvm_1_1Value.html">Value</a> *LHS, *RHS;</div>
<div class="line"><a name="l01049"></a><span class="lineno"> 1049</span>&#160;  <a class="code" href="structllvm_1_1SelectPatternResult.html">SelectPatternResult</a> SPR = <a class="code" href="namespacellvm.html#a7aad5a0e62a54747f455651ee2dd08ed">matchSelectPattern</a>(&amp;Sel, LHS, RHS);</div>
<div class="line"><a name="l01050"></a><span class="lineno"> 1050</span>&#160;  <span class="keywordflow">if</span> (!<a class="code" href="structllvm_1_1SelectPatternResult.html#a94c732c9e96c40976f0509fe0233fe7b">SelectPatternResult::isMinOrMax</a>(SPR.<a class="code" href="structllvm_1_1SelectPatternResult.html#a3ca9c2098248eac9051008d6eb9f321d">Flavor</a>))</div>
<div class="line"><a name="l01051"></a><span class="lineno"> 1051</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l01052"></a><span class="lineno"> 1052</span>&#160; </div>
<div class="line"><a name="l01053"></a><span class="lineno"> 1053</span>&#160;  <span class="comment">// Is this already canonical?</span></div>
<div class="line"><a name="l01054"></a><span class="lineno"> 1054</span>&#160;  <a class="code" href="classllvm_1_1CmpInst.html#a2be3583dac92a031fa1458d4d992c78b">ICmpInst::Predicate</a> CanonicalPred = <a class="code" href="namespacellvm.html#a493bd393688f22538e5de34117e70236">getMinMaxPred</a>(SPR.<a class="code" href="structllvm_1_1SelectPatternResult.html#a3ca9c2098248eac9051008d6eb9f321d">Flavor</a>);</div>
<div class="line"><a name="l01055"></a><span class="lineno"> 1055</span>&#160;  <span class="keywordflow">if</span> (Cmp.<a class="code" href="classllvm_1_1User.html#abe1de1520a21f77ac57cc210bf0fb0b4">getOperand</a>(0) == LHS &amp;&amp; Cmp.<a class="code" href="classllvm_1_1User.html#abe1de1520a21f77ac57cc210bf0fb0b4">getOperand</a>(1) == RHS &amp;&amp;</div>
<div class="line"><a name="l01056"></a><span class="lineno"> 1056</span>&#160;      Cmp.<a class="code" href="classllvm_1_1CmpInst.html#aa7414ba9f658ff1287d22a4b8fe81bcb">getPredicate</a>() == CanonicalPred)</div>
<div class="line"><a name="l01057"></a><span class="lineno"> 1057</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l01058"></a><span class="lineno"> 1058</span>&#160; </div>
<div class="line"><a name="l01059"></a><span class="lineno"> 1059</span>&#160;  <span class="comment">// Bail out on unsimplified X-0 operand (due to some worklist management bug),</span></div>
<div class="line"><a name="l01060"></a><span class="lineno"> 1060</span>&#160;  <span class="comment">// as this may cause an infinite combine loop. Let the sub be folded first.</span></div>
<div class="line"><a name="l01061"></a><span class="lineno"> 1061</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="namespacellvm_1_1PatternMatch.html#a25d956d9e0beadd47ce4bc255dfa811d">match</a>(LHS, <a class="code" href="namespacellvm_1_1PatternMatch.html#ac3ed5602889a22db44a16e1b97fac5b8">m_Sub</a>(<a class="code" href="namespacellvm_1_1PatternMatch.html#a24bca8838396aa81b87de8e7ac774b19">m_Value</a>(), <a class="code" href="namespacellvm_1_1PatternMatch.html#ae77be336e228cf9aa00709a8606dfb98">m_Zero</a>())) ||</div>
<div class="line"><a name="l01062"></a><span class="lineno"> 1062</span>&#160;      <a class="code" href="namespacellvm_1_1PatternMatch.html#a25d956d9e0beadd47ce4bc255dfa811d">match</a>(RHS, <a class="code" href="namespacellvm_1_1PatternMatch.html#ac3ed5602889a22db44a16e1b97fac5b8">m_Sub</a>(<a class="code" href="namespacellvm_1_1PatternMatch.html#a24bca8838396aa81b87de8e7ac774b19">m_Value</a>(), <a class="code" href="namespacellvm_1_1PatternMatch.html#ae77be336e228cf9aa00709a8606dfb98">m_Zero</a>())))</div>
<div class="line"><a name="l01063"></a><span class="lineno"> 1063</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l01064"></a><span class="lineno"> 1064</span>&#160; </div>
<div class="line"><a name="l01065"></a><span class="lineno"> 1065</span>&#160;  <span class="comment">// Create the canonical compare and plug it into the select.</span></div>
<div class="line"><a name="l01066"></a><span class="lineno"> 1066</span>&#160;  IC.<a class="code" href="classllvm_1_1InstCombinerImpl.html#a250c29896fae99b9235d23f7254b8809">replaceOperand</a>(Sel, 0, IC.<a class="code" href="classllvm_1_1InstCombiner.html#ae1d331bc844ecb92bdeb0b706ae04396">Builder</a>.<a class="code" href="classllvm_1_1IRBuilderBase.html#a7ca3b58ad6dc93128afd44fbe61a1174">CreateICmp</a>(CanonicalPred, LHS, RHS));</div>
<div class="line"><a name="l01067"></a><span class="lineno"> 1067</span>&#160; </div>
<div class="line"><a name="l01068"></a><span class="lineno"> 1068</span>&#160;  <span class="comment">// If the select operands did not change, we&#39;re done.</span></div>
<div class="line"><a name="l01069"></a><span class="lineno"> 1069</span>&#160;  <span class="keywordflow">if</span> (Sel.<a class="code" href="classllvm_1_1SelectInst.html#a483700f6bf3ac62445850d768cf188f6">getTrueValue</a>() == LHS &amp;&amp; Sel.<a class="code" href="classllvm_1_1SelectInst.html#a59b0ee738ec17984b97128e7f1594db3">getFalseValue</a>() == RHS)</div>
<div class="line"><a name="l01070"></a><span class="lineno"> 1070</span>&#160;    <span class="keywordflow">return</span> &amp;Sel;</div>
<div class="line"><a name="l01071"></a><span class="lineno"> 1071</span>&#160; </div>
<div class="line"><a name="l01072"></a><span class="lineno"> 1072</span>&#160;  <span class="comment">// If we are swapping the select operands, swap the metadata too.</span></div>
<div class="line"><a name="l01073"></a><span class="lineno"> 1073</span>&#160;  <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(Sel.<a class="code" href="classllvm_1_1SelectInst.html#a483700f6bf3ac62445850d768cf188f6">getTrueValue</a>() == RHS &amp;&amp; Sel.<a class="code" href="classllvm_1_1SelectInst.html#a59b0ee738ec17984b97128e7f1594db3">getFalseValue</a>() == LHS &amp;&amp;</div>
<div class="line"><a name="l01074"></a><span class="lineno"> 1074</span>&#160;         <span class="stringliteral">&quot;Unexpected results from matchSelectPattern&quot;</span>);</div>
<div class="line"><a name="l01075"></a><span class="lineno"> 1075</span>&#160;  Sel.<a class="code" href="classllvm_1_1SelectInst.html#a42c392f97e21ca9e5ab05520eaf9f99a">swapValues</a>();</div>
<div class="line"><a name="l01076"></a><span class="lineno"> 1076</span>&#160;  Sel.<a class="code" href="classllvm_1_1Instruction.html#a6e324daba99cb1d67713a562f9a778d2">swapProfMetadata</a>();</div>
<div class="line"><a name="l01077"></a><span class="lineno"> 1077</span>&#160;  <span class="keywordflow">return</span> &amp;Sel;</div>
<div class="line"><a name="l01078"></a><span class="lineno"> 1078</span>&#160;}</div>
<div class="line"><a name="l01079"></a><span class="lineno"> 1079</span>&#160; </div>
<div class="line"><a name="l01080"></a><span class="lineno"> 1080</span>&#160;<span class="keyword">static</span> <a class="code" href="classllvm_1_1Instruction.html">Instruction</a> *canonicalizeAbsNabs(<a class="code" href="classllvm_1_1SelectInst.html">SelectInst</a> &amp;Sel, <a class="code" href="classllvm_1_1ICmpInst.html">ICmpInst</a> &amp;Cmp,</div>
<div class="line"><a name="l01081"></a><span class="lineno"> 1081</span>&#160;                                        <a class="code" href="classllvm_1_1InstCombinerImpl.html">InstCombinerImpl</a> &amp;IC) {</div>
<div class="line"><a name="l01082"></a><span class="lineno"> 1082</span>&#160;  <span class="keywordflow">if</span> (!Cmp.<a class="code" href="classllvm_1_1Value.html#a3a402430a1bbe70a9282dcb0e0b6a2cd">hasOneUse</a>() || !isa&lt;Constant&gt;(Cmp.<a class="code" href="classllvm_1_1User.html#abe1de1520a21f77ac57cc210bf0fb0b4">getOperand</a>(1)))</div>
<div class="line"><a name="l01083"></a><span class="lineno"> 1083</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l01084"></a><span class="lineno"> 1084</span>&#160; </div>
<div class="line"><a name="l01085"></a><span class="lineno"> 1085</span>&#160;  <a class="code" href="classllvm_1_1Value.html">Value</a> *LHS, *RHS;</div>
<div class="line"><a name="l01086"></a><span class="lineno"> 1086</span>&#160;  <a class="code" href="namespacellvm.html#a6bf471c1030973649c2e426afc212097">SelectPatternFlavor</a> SPF = <a class="code" href="namespacellvm.html#a7aad5a0e62a54747f455651ee2dd08ed">matchSelectPattern</a>(&amp;Sel, LHS, RHS).<a class="code" href="structllvm_1_1SelectPatternResult.html#a3ca9c2098248eac9051008d6eb9f321d">Flavor</a>;</div>
<div class="line"><a name="l01087"></a><span class="lineno"> 1087</span>&#160;  <span class="keywordflow">if</span> (SPF != <a class="code" href="namespacellvm.html#a6bf471c1030973649c2e426afc212097a07d293fd946951d9655259c5e9b93356">SelectPatternFlavor::SPF_ABS</a> &amp;&amp;</div>
<div class="line"><a name="l01088"></a><span class="lineno"> 1088</span>&#160;      SPF != <a class="code" href="namespacellvm.html#a6bf471c1030973649c2e426afc212097a08658871fecea100ad724bd8b1c3ae56">SelectPatternFlavor::SPF_NABS</a>)</div>
<div class="line"><a name="l01089"></a><span class="lineno"> 1089</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l01090"></a><span class="lineno"> 1090</span>&#160; </div>
<div class="line"><a name="l01091"></a><span class="lineno"> 1091</span>&#160;  <span class="comment">// Note that NSW flag can only be propagated for normal, non-negated abs!</span></div>
<div class="line"><a name="l01092"></a><span class="lineno"> 1092</span>&#160;  <span class="keywordtype">bool</span> IntMinIsPoison = SPF == <a class="code" href="namespacellvm.html#a6bf471c1030973649c2e426afc212097a07d293fd946951d9655259c5e9b93356">SelectPatternFlavor::SPF_ABS</a> &amp;&amp;</div>
<div class="line"><a name="l01093"></a><span class="lineno"> 1093</span>&#160;                        <a class="code" href="namespacellvm_1_1PatternMatch.html#a25d956d9e0beadd47ce4bc255dfa811d">match</a>(RHS, <a class="code" href="namespacellvm_1_1PatternMatch.html#ab50076cb704b1bd42c536d9f51c5100e">m_NSWNeg</a>(<a class="code" href="namespacellvm_1_1PatternMatch.html#a2d9861feadd3a09792967a012559e7b2">m_Specific</a>(LHS)));</div>
<div class="line"><a name="l01094"></a><span class="lineno"> 1094</span>&#160;  <a class="code" href="classllvm_1_1Constant.html">Constant</a> *IntMinIsPoisonC =</div>
<div class="line"><a name="l01095"></a><span class="lineno"> 1095</span>&#160;      <a class="code" href="classllvm_1_1ConstantInt.html#a969709dd49c28865a482d8b870f87c46">ConstantInt::get</a>(<a class="code" href="classllvm_1_1Type.html#aa75984a442f2379de0c66018201fa628">Type::getInt1Ty</a>(Sel.<a class="code" href="classllvm_1_1Value.html#ab3fc0225d8aaf8434026c3573f961f2c">getContext</a>()), IntMinIsPoison);</div>
<div class="line"><a name="l01096"></a><span class="lineno"> 1096</span>&#160;  <a class="code" href="classllvm_1_1Instruction.html">Instruction</a> *Abs =</div>
<div class="line"><a name="l01097"></a><span class="lineno"> 1097</span>&#160;      IC.<a class="code" href="classllvm_1_1InstCombiner.html#ae1d331bc844ecb92bdeb0b706ae04396">Builder</a>.<a class="code" href="classllvm_1_1IRBuilderBase.html#a9dd3b826858e2830f89aa99b46fb166f">CreateBinaryIntrinsic</a>(<a class="code" href="namespacellvm.html#a2816e84a08c108d18bc4665bc1817e01">Intrinsic::abs</a>, LHS, IntMinIsPoisonC);</div>
<div class="line"><a name="l01098"></a><span class="lineno"> 1098</span>&#160; </div>
<div class="line"><a name="l01099"></a><span class="lineno"> 1099</span>&#160;  <span class="keywordflow">if</span> (SPF == <a class="code" href="namespacellvm.html#a6bf471c1030973649c2e426afc212097a08658871fecea100ad724bd8b1c3ae56">SelectPatternFlavor::SPF_NABS</a>)</div>
<div class="line"><a name="l01100"></a><span class="lineno"> 1100</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="classllvm_1_1BinaryOperator.html#a19cdbeffd437228c47a4410a4ed34aca">BinaryOperator::CreateNeg</a>(Abs); <span class="comment">// Always without NSW flag!</span></div>
<div class="line"><a name="l01101"></a><span class="lineno"> 1101</span>&#160; </div>
<div class="line"><a name="l01102"></a><span class="lineno"> 1102</span>&#160;  <span class="keywordflow">return</span> IC.<a class="code" href="classllvm_1_1InstCombinerImpl.html#a2b4d03f65a7b212db567dd81b5c1039f">replaceInstUsesWith</a>(Sel, Abs);</div>
<div class="line"><a name="l01103"></a><span class="lineno"> 1103</span>&#160;}</div>
<div class="line"><a name="l01104"></a><span class="lineno"> 1104</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l01105"></a><span class="lineno"> 1105</span>&#160;<span class="comment">/// If we have a select with an equality comparison, then we know the value in</span></div>
<div class="line"><a name="l01106"></a><span class="lineno"> 1106</span>&#160;<span class="comment">/// one of the arms of the select. See if substituting this value into an arm</span></div>
<div class="line"><a name="l01107"></a><span class="lineno"> 1107</span>&#160;<span class="comment">/// and simplifying the result yields the same value as the other arm.</span></div>
<div class="line"><a name="l01108"></a><span class="lineno"> 1108</span>&#160;<span class="comment">///</span></div>
<div class="line"><a name="l01109"></a><span class="lineno"> 1109</span>&#160;<span class="comment">/// To make this transform safe, we must drop poison-generating flags</span></div>
<div class="line"><a name="l01110"></a><span class="lineno"> 1110</span>&#160;<span class="comment">/// (nsw, etc) if we simplified to a binop because the select may be guarding</span></div>
<div class="line"><a name="l01111"></a><span class="lineno"> 1111</span>&#160;<span class="comment">/// that poison from propagating. If the existing binop already had no</span></div>
<div class="line"><a name="l01112"></a><span class="lineno"> 1112</span>&#160;<span class="comment">/// poison-generating flags, then this transform can be done by instsimplify.</span></div>
<div class="line"><a name="l01113"></a><span class="lineno"> 1113</span>&#160;<span class="comment">///</span></div>
<div class="line"><a name="l01114"></a><span class="lineno"> 1114</span>&#160;<span class="comment">/// Consider:</span></div>
<div class="line"><a name="l01115"></a><span class="lineno"> 1115</span>&#160;<span class="comment">///   %cmp = icmp eq i32 %x, 2147483647</span></div>
<div class="line"><a name="l01116"></a><span class="lineno"> 1116</span>&#160;<span class="comment">///   %add = add nsw i32 %x, 1</span></div>
<div class="line"><a name="l01117"></a><span class="lineno"> 1117</span>&#160;<span class="comment">///   %sel = select i1 %cmp, i32 -2147483648, i32 %add</span></div>
<div class="line"><a name="l01118"></a><span class="lineno"> 1118</span>&#160;<span class="comment">///</span></div>
<div class="line"><a name="l01119"></a><span class="lineno"> 1119</span>&#160;<span class="comment">/// We can&#39;t replace %sel with %add unless we strip away the flags.</span></div>
<div class="line"><a name="l01120"></a><span class="lineno"> 1120</span>&#160;<span class="comment">/// TODO: Wrapping flags could be preserved in some cases with better analysis.</span></div>
<div class="line"><a name="l01121"></a><span class="lineno"> 1121</span>&#160;<span class="comment"></span><a class="code" href="classllvm_1_1Instruction.html">Instruction</a> *<a class="code" href="classllvm_1_1InstCombinerImpl.html#ab0c0704d2d0aa45b859812aeb234b224">InstCombinerImpl::foldSelectValueEquivalence</a>(<a class="code" href="classllvm_1_1SelectInst.html">SelectInst</a> &amp;Sel,</div>
<div class="line"><a name="l01122"></a><span class="lineno"> 1122</span>&#160;                                                          <a class="code" href="classllvm_1_1ICmpInst.html">ICmpInst</a> &amp;Cmp) {</div>
<div class="line"><a name="l01123"></a><span class="lineno"> 1123</span>&#160;  <span class="comment">// Value equivalence substitution requires an all-or-nothing replacement.</span></div>
<div class="line"><a name="l01124"></a><span class="lineno"> 1124</span>&#160;  <span class="comment">// It does not make sense for a vector compare where each lane is chosen</span></div>
<div class="line"><a name="l01125"></a><span class="lineno"> 1125</span>&#160;  <span class="comment">// independently.</span></div>
<div class="line"><a name="l01126"></a><span class="lineno"> 1126</span>&#160;  <span class="keywordflow">if</span> (!Cmp.<a class="code" href="classllvm_1_1ICmpInst.html#abe8988eef2e6fc2baba032cb22afedd7">isEquality</a>() || Cmp.<a class="code" href="classllvm_1_1Value.html#a6393a2d4fe7e10b28a0dcc35f881567b">getType</a>()-&gt;<a class="code" href="classllvm_1_1Type.html#a1bc022868b23918efa44df511f4d5b61">isVectorTy</a>())</div>
<div class="line"><a name="l01127"></a><span class="lineno"> 1127</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l01128"></a><span class="lineno"> 1128</span>&#160; </div>
<div class="line"><a name="l01129"></a><span class="lineno"> 1129</span>&#160;  <span class="comment">// Canonicalize the pattern to ICMP_EQ by swapping the select operands.</span></div>
<div class="line"><a name="l01130"></a><span class="lineno"> 1130</span>&#160;  <a class="code" href="classllvm_1_1Value.html">Value</a> *<a class="code" href="namespacellvm_1_1tgtok.html#abbc5259d649363016626e2529fabe0c5a58b95af1ca96e109f85a0646a05fceb7">TrueVal</a> = Sel.<a class="code" href="classllvm_1_1SelectInst.html#a483700f6bf3ac62445850d768cf188f6">getTrueValue</a>(), *<a class="code" href="namespacellvm_1_1tgtok.html#abbc5259d649363016626e2529fabe0c5aeb5a2908109c763377832cbb4726b6d4">FalseVal</a> = Sel.<a class="code" href="classllvm_1_1SelectInst.html#a59b0ee738ec17984b97128e7f1594db3">getFalseValue</a>();</div>
<div class="line"><a name="l01131"></a><span class="lineno"> 1131</span>&#160;  <span class="keywordtype">bool</span> Swapped = <span class="keyword">false</span>;</div>
<div class="line"><a name="l01132"></a><span class="lineno"> 1132</span>&#160;  <span class="keywordflow">if</span> (Cmp.<a class="code" href="classllvm_1_1CmpInst.html#aa7414ba9f658ff1287d22a4b8fe81bcb">getPredicate</a>() == <a class="code" href="classllvm_1_1CmpInst.html#a2be3583dac92a031fa1458d4d992c78bac17897ebf2f6a6986280fc3bdf28a30a">ICmpInst::ICMP_NE</a>) {</div>
<div class="line"><a name="l01133"></a><span class="lineno"> 1133</span>&#160;    <a class="code" href="namespacestd.html#ab8424022895aee3e366fb9a32f2883cb">std::swap</a>(<a class="code" href="namespacellvm_1_1tgtok.html#abbc5259d649363016626e2529fabe0c5a58b95af1ca96e109f85a0646a05fceb7">TrueVal</a>, <a class="code" href="namespacellvm_1_1tgtok.html#abbc5259d649363016626e2529fabe0c5aeb5a2908109c763377832cbb4726b6d4">FalseVal</a>);</div>
<div class="line"><a name="l01134"></a><span class="lineno"> 1134</span>&#160;    Swapped = <span class="keyword">true</span>;</div>
<div class="line"><a name="l01135"></a><span class="lineno"> 1135</span>&#160;  }</div>
<div class="line"><a name="l01136"></a><span class="lineno"> 1136</span>&#160; </div>
<div class="line"><a name="l01137"></a><span class="lineno"> 1137</span>&#160;  <span class="comment">// In X == Y ? f(X) : Z, try to evaluate f(Y) and replace the operand.</span></div>
<div class="line"><a name="l01138"></a><span class="lineno"> 1138</span>&#160;  <span class="comment">// Make sure Y cannot be undef though, as we might pick different values for</span></div>
<div class="line"><a name="l01139"></a><span class="lineno"> 1139</span>&#160;  <span class="comment">// undef in the icmp and in f(Y). Additionally, take care to avoid replacing</span></div>
<div class="line"><a name="l01140"></a><span class="lineno"> 1140</span>&#160;  <span class="comment">// X == Y ? X : Z with X == Y ? Y : Z, as that would lead to an infinite</span></div>
<div class="line"><a name="l01141"></a><span class="lineno"> 1141</span>&#160;  <span class="comment">// replacement cycle.</span></div>
<div class="line"><a name="l01142"></a><span class="lineno"> 1142</span>&#160;  <a class="code" href="classllvm_1_1Value.html">Value</a> *CmpLHS = Cmp.<a class="code" href="classllvm_1_1User.html#abe1de1520a21f77ac57cc210bf0fb0b4">getOperand</a>(0), *CmpRHS = Cmp.<a class="code" href="classllvm_1_1User.html#abe1de1520a21f77ac57cc210bf0fb0b4">getOperand</a>(1);</div>
<div class="line"><a name="l01143"></a><span class="lineno"> 1143</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="namespacellvm_1_1tgtok.html#abbc5259d649363016626e2529fabe0c5a58b95af1ca96e109f85a0646a05fceb7">TrueVal</a> != CmpLHS &amp;&amp;</div>
<div class="line"><a name="l01144"></a><span class="lineno"> 1144</span>&#160;      <a class="code" href="namespacellvm.html#ab8a7ef433279aabf7f30fa5504a4d4ef">isGuaranteedNotToBeUndefOrPoison</a>(CmpRHS, SQ.AC, &amp;Sel, &amp;DT)) {</div>
<div class="line"><a name="l01145"></a><span class="lineno"> 1145</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1Value.html">Value</a> *V = <a class="code" href="namespacellvm.html#aec255ef4fae19e320da9585657e25a1e">simplifyWithOpReplaced</a>(<a class="code" href="namespacellvm_1_1tgtok.html#abbc5259d649363016626e2529fabe0c5a58b95af1ca96e109f85a0646a05fceb7">TrueVal</a>, CmpLHS, CmpRHS, SQ,</div>
<div class="line"><a name="l01146"></a><span class="lineno"> 1146</span>&#160;                                          <span class="comment">/* AllowRefinement */</span> <span class="keyword">true</span>))</div>
<div class="line"><a name="l01147"></a><span class="lineno"> 1147</span>&#160;      <span class="keywordflow">return</span> replaceOperand(Sel, Swapped ? 2 : 1, V);</div>
<div class="line"><a name="l01148"></a><span class="lineno"> 1148</span>&#160; </div>
<div class="line"><a name="l01149"></a><span class="lineno"> 1149</span>&#160;    <span class="comment">// Even if TrueVal does not simplify, we can directly replace a use of</span></div>
<div class="line"><a name="l01150"></a><span class="lineno"> 1150</span>&#160;    <span class="comment">// CmpLHS with CmpRHS, as long as the instruction is not used anywhere</span></div>
<div class="line"><a name="l01151"></a><span class="lineno"> 1151</span>&#160;    <span class="comment">// else and is safe to speculatively execute (we may end up executing it</span></div>
<div class="line"><a name="l01152"></a><span class="lineno"> 1152</span>&#160;    <span class="comment">// with different operands, which should not cause side-effects or trigger</span></div>
<div class="line"><a name="l01153"></a><span class="lineno"> 1153</span>&#160;    <span class="comment">// undefined behavior). Only do this if CmpRHS is a constant, as</span></div>
<div class="line"><a name="l01154"></a><span class="lineno"> 1154</span>&#160;    <span class="comment">// profitability is not clear for other cases.</span></div>
<div class="line"><a name="l01155"></a><span class="lineno"> 1155</span>&#160;    <span class="comment">// FIXME: The replacement could be performed recursively.</span></div>
<div class="line"><a name="l01156"></a><span class="lineno"> 1156</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="namespacellvm_1_1PatternMatch.html#a25d956d9e0beadd47ce4bc255dfa811d">match</a>(CmpRHS, <a class="code" href="namespacellvm_1_1PatternMatch.html#a35a04e57f5de22ee102fc03558d5e6b1">m_ImmConstant</a>()) &amp;&amp; !<a class="code" href="namespacellvm_1_1PatternMatch.html#a25d956d9e0beadd47ce4bc255dfa811d">match</a>(CmpLHS, <a class="code" href="namespacellvm_1_1PatternMatch.html#a35a04e57f5de22ee102fc03558d5e6b1">m_ImmConstant</a>()))</div>
<div class="line"><a name="l01157"></a><span class="lineno"> 1157</span>&#160;      <span class="keywordflow">if</span> (<span class="keyword">auto</span> *<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a> = dyn_cast&lt;Instruction&gt;(<a class="code" href="namespacellvm_1_1tgtok.html#abbc5259d649363016626e2529fabe0c5a58b95af1ca96e109f85a0646a05fceb7">TrueVal</a>))</div>
<div class="line"><a name="l01158"></a><span class="lineno"> 1158</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>-&gt;hasOneUse() &amp;&amp; <a class="code" href="namespacellvm.html#a0a77857cbf5e1575cf475ce6a9671a7e">isSafeToSpeculativelyExecute</a>(<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>))</div>
<div class="line"><a name="l01159"></a><span class="lineno"> 1159</span>&#160;          <span class="keywordflow">for</span> (<a class="code" href="classllvm_1_1Use.html">Use</a> &amp;U : <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>-&gt;operands())</div>
<div class="line"><a name="l01160"></a><span class="lineno"> 1160</span>&#160;            <span class="keywordflow">if</span> (U == CmpLHS) {</div>
<div class="line"><a name="l01161"></a><span class="lineno"> 1161</span>&#160;              replaceUse(U, CmpRHS);</div>
<div class="line"><a name="l01162"></a><span class="lineno"> 1162</span>&#160;              <span class="keywordflow">return</span> &amp;Sel;</div>
<div class="line"><a name="l01163"></a><span class="lineno"> 1163</span>&#160;            }</div>
<div class="line"><a name="l01164"></a><span class="lineno"> 1164</span>&#160;  }</div>
<div class="line"><a name="l01165"></a><span class="lineno"> 1165</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="namespacellvm_1_1tgtok.html#abbc5259d649363016626e2529fabe0c5a58b95af1ca96e109f85a0646a05fceb7">TrueVal</a> != CmpRHS &amp;&amp;</div>
<div class="line"><a name="l01166"></a><span class="lineno"> 1166</span>&#160;      <a class="code" href="namespacellvm.html#ab8a7ef433279aabf7f30fa5504a4d4ef">isGuaranteedNotToBeUndefOrPoison</a>(CmpLHS, SQ.AC, &amp;Sel, &amp;DT))</div>
<div class="line"><a name="l01167"></a><span class="lineno"> 1167</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1Value.html">Value</a> *V = <a class="code" href="namespacellvm.html#aec255ef4fae19e320da9585657e25a1e">simplifyWithOpReplaced</a>(<a class="code" href="namespacellvm_1_1tgtok.html#abbc5259d649363016626e2529fabe0c5a58b95af1ca96e109f85a0646a05fceb7">TrueVal</a>, CmpRHS, CmpLHS, SQ,</div>
<div class="line"><a name="l01168"></a><span class="lineno"> 1168</span>&#160;                                          <span class="comment">/* AllowRefinement */</span> <span class="keyword">true</span>))</div>
<div class="line"><a name="l01169"></a><span class="lineno"> 1169</span>&#160;      <span class="keywordflow">return</span> replaceOperand(Sel, Swapped ? 2 : 1, V);</div>
<div class="line"><a name="l01170"></a><span class="lineno"> 1170</span>&#160; </div>
<div class="line"><a name="l01171"></a><span class="lineno"> 1171</span>&#160;  <span class="keyword">auto</span> *FalseInst = dyn_cast&lt;Instruction&gt;(<a class="code" href="namespacellvm_1_1tgtok.html#abbc5259d649363016626e2529fabe0c5aeb5a2908109c763377832cbb4726b6d4">FalseVal</a>);</div>
<div class="line"><a name="l01172"></a><span class="lineno"> 1172</span>&#160;  <span class="keywordflow">if</span> (!FalseInst)</div>
<div class="line"><a name="l01173"></a><span class="lineno"> 1173</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l01174"></a><span class="lineno"> 1174</span>&#160; </div>
<div class="line"><a name="l01175"></a><span class="lineno"> 1175</span>&#160;  <span class="comment">// InstSimplify already performed this fold if it was possible subject to</span></div>
<div class="line"><a name="l01176"></a><span class="lineno"> 1176</span>&#160;  <span class="comment">// current poison-generating flags. Try the transform again with</span></div>
<div class="line"><a name="l01177"></a><span class="lineno"> 1177</span>&#160;  <span class="comment">// poison-generating flags temporarily dropped.</span></div>
<div class="line"><a name="l01178"></a><span class="lineno"> 1178</span>&#160;  <span class="keywordtype">bool</span> WasNUW = <span class="keyword">false</span>, WasNSW = <span class="keyword">false</span>, WasExact = <span class="keyword">false</span>, WasInBounds = <span class="keyword">false</span>;</div>
<div class="line"><a name="l01179"></a><span class="lineno"> 1179</span>&#160;  <span class="keywordflow">if</span> (<span class="keyword">auto</span> *OBO = dyn_cast&lt;OverflowingBinaryOperator&gt;(<a class="code" href="namespacellvm_1_1tgtok.html#abbc5259d649363016626e2529fabe0c5aeb5a2908109c763377832cbb4726b6d4">FalseVal</a>)) {</div>
<div class="line"><a name="l01180"></a><span class="lineno"> 1180</span>&#160;    WasNUW = OBO-&gt;hasNoUnsignedWrap();</div>
<div class="line"><a name="l01181"></a><span class="lineno"> 1181</span>&#160;    WasNSW = OBO-&gt;hasNoSignedWrap();</div>
<div class="line"><a name="l01182"></a><span class="lineno"> 1182</span>&#160;    FalseInst-&gt;setHasNoUnsignedWrap(<span class="keyword">false</span>);</div>
<div class="line"><a name="l01183"></a><span class="lineno"> 1183</span>&#160;    FalseInst-&gt;setHasNoSignedWrap(<span class="keyword">false</span>);</div>
<div class="line"><a name="l01184"></a><span class="lineno"> 1184</span>&#160;  }</div>
<div class="line"><a name="l01185"></a><span class="lineno"> 1185</span>&#160;  <span class="keywordflow">if</span> (<span class="keyword">auto</span> *PEO = dyn_cast&lt;PossiblyExactOperator&gt;(<a class="code" href="namespacellvm_1_1tgtok.html#abbc5259d649363016626e2529fabe0c5aeb5a2908109c763377832cbb4726b6d4">FalseVal</a>)) {</div>
<div class="line"><a name="l01186"></a><span class="lineno"> 1186</span>&#160;    WasExact = PEO-&gt;isExact();</div>
<div class="line"><a name="l01187"></a><span class="lineno"> 1187</span>&#160;    FalseInst-&gt;setIsExact(<span class="keyword">false</span>);</div>
<div class="line"><a name="l01188"></a><span class="lineno"> 1188</span>&#160;  }</div>
<div class="line"><a name="l01189"></a><span class="lineno"> 1189</span>&#160;  <span class="keywordflow">if</span> (<span class="keyword">auto</span> *<a class="code" href="HexagonCommonGEP_8cpp.html#ad532e8710e50302e0a376b61c91fa91d">GEP</a> = dyn_cast&lt;GetElementPtrInst&gt;(<a class="code" href="namespacellvm_1_1tgtok.html#abbc5259d649363016626e2529fabe0c5aeb5a2908109c763377832cbb4726b6d4">FalseVal</a>)) {</div>
<div class="line"><a name="l01190"></a><span class="lineno"> 1190</span>&#160;    WasInBounds = <a class="code" href="HexagonCommonGEP_8cpp.html#ad532e8710e50302e0a376b61c91fa91d">GEP</a>-&gt;isInBounds();</div>
<div class="line"><a name="l01191"></a><span class="lineno"> 1191</span>&#160;    <a class="code" href="HexagonCommonGEP_8cpp.html#ad532e8710e50302e0a376b61c91fa91d">GEP</a>-&gt;setIsInBounds(<span class="keyword">false</span>);</div>
<div class="line"><a name="l01192"></a><span class="lineno"> 1192</span>&#160;  }</div>
<div class="line"><a name="l01193"></a><span class="lineno"> 1193</span>&#160; </div>
<div class="line"><a name="l01194"></a><span class="lineno"> 1194</span>&#160;  <span class="comment">// Try each equivalence substitution possibility.</span></div>
<div class="line"><a name="l01195"></a><span class="lineno"> 1195</span>&#160;  <span class="comment">// We have an &#39;EQ&#39; comparison, so the select&#39;s false value will propagate.</span></div>
<div class="line"><a name="l01196"></a><span class="lineno"> 1196</span>&#160;  <span class="comment">// Example:</span></div>
<div class="line"><a name="l01197"></a><span class="lineno"> 1197</span>&#160;  <span class="comment">// (X == 42) ? 43 : (X + 1) --&gt; (X == 42) ? (X + 1) : (X + 1) --&gt; X + 1</span></div>
<div class="line"><a name="l01198"></a><span class="lineno"> 1198</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="namespacellvm.html#aec255ef4fae19e320da9585657e25a1e">simplifyWithOpReplaced</a>(<a class="code" href="namespacellvm_1_1tgtok.html#abbc5259d649363016626e2529fabe0c5aeb5a2908109c763377832cbb4726b6d4">FalseVal</a>, CmpLHS, CmpRHS, SQ,</div>
<div class="line"><a name="l01199"></a><span class="lineno"> 1199</span>&#160;                             <span class="comment">/* AllowRefinement */</span> <span class="keyword">false</span>) == <a class="code" href="namespacellvm_1_1tgtok.html#abbc5259d649363016626e2529fabe0c5a58b95af1ca96e109f85a0646a05fceb7">TrueVal</a> ||</div>
<div class="line"><a name="l01200"></a><span class="lineno"> 1200</span>&#160;      <a class="code" href="namespacellvm.html#aec255ef4fae19e320da9585657e25a1e">simplifyWithOpReplaced</a>(<a class="code" href="namespacellvm_1_1tgtok.html#abbc5259d649363016626e2529fabe0c5aeb5a2908109c763377832cbb4726b6d4">FalseVal</a>, CmpRHS, CmpLHS, SQ,</div>
<div class="line"><a name="l01201"></a><span class="lineno"> 1201</span>&#160;                             <span class="comment">/* AllowRefinement */</span> <span class="keyword">false</span>) == <a class="code" href="namespacellvm_1_1tgtok.html#abbc5259d649363016626e2529fabe0c5a58b95af1ca96e109f85a0646a05fceb7">TrueVal</a>) {</div>
<div class="line"><a name="l01202"></a><span class="lineno"> 1202</span>&#160;    <span class="keywordflow">return</span> replaceInstUsesWith(Sel, <a class="code" href="namespacellvm_1_1tgtok.html#abbc5259d649363016626e2529fabe0c5aeb5a2908109c763377832cbb4726b6d4">FalseVal</a>);</div>
<div class="line"><a name="l01203"></a><span class="lineno"> 1203</span>&#160;  }</div>
<div class="line"><a name="l01204"></a><span class="lineno"> 1204</span>&#160; </div>
<div class="line"><a name="l01205"></a><span class="lineno"> 1205</span>&#160;  <span class="comment">// Restore poison-generating flags if the transform did not apply.</span></div>
<div class="line"><a name="l01206"></a><span class="lineno"> 1206</span>&#160;  <span class="keywordflow">if</span> (WasNUW)</div>
<div class="line"><a name="l01207"></a><span class="lineno"> 1207</span>&#160;    FalseInst-&gt;setHasNoUnsignedWrap();</div>
<div class="line"><a name="l01208"></a><span class="lineno"> 1208</span>&#160;  <span class="keywordflow">if</span> (WasNSW)</div>
<div class="line"><a name="l01209"></a><span class="lineno"> 1209</span>&#160;    FalseInst-&gt;setHasNoSignedWrap();</div>
<div class="line"><a name="l01210"></a><span class="lineno"> 1210</span>&#160;  <span class="keywordflow">if</span> (WasExact)</div>
<div class="line"><a name="l01211"></a><span class="lineno"> 1211</span>&#160;    FalseInst-&gt;setIsExact();</div>
<div class="line"><a name="l01212"></a><span class="lineno"> 1212</span>&#160;  <span class="keywordflow">if</span> (WasInBounds)</div>
<div class="line"><a name="l01213"></a><span class="lineno"> 1213</span>&#160;    cast&lt;GetElementPtrInst&gt;(FalseInst)-&gt;setIsInBounds();</div>
<div class="line"><a name="l01214"></a><span class="lineno"> 1214</span>&#160; </div>
<div class="line"><a name="l01215"></a><span class="lineno"> 1215</span>&#160;  <span class="keywordflow">return</span> <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l01216"></a><span class="lineno"> 1216</span>&#160;}</div>
<div class="line"><a name="l01217"></a><span class="lineno"> 1217</span>&#160; </div>
<div class="line"><a name="l01218"></a><span class="lineno"> 1218</span>&#160;<span class="comment">// See if this is a pattern like:</span></div>
<div class="line"><a name="l01219"></a><span class="lineno"> 1219</span>&#160;<span class="comment">//   %old_cmp1 = icmp slt i32 %x, C2</span></div>
<div class="line"><a name="l01220"></a><span class="lineno"> 1220</span>&#160;<span class="comment">//   %old_replacement = select i1 %old_cmp1, i32 %target_low, i32 %target_high</span></div>
<div class="line"><a name="l01221"></a><span class="lineno"> 1221</span>&#160;<span class="comment">//   %old_x_offseted = add i32 %x, C1</span></div>
<div class="line"><a name="l01222"></a><span class="lineno"> 1222</span>&#160;<span class="comment">//   %old_cmp0 = icmp ult i32 %old_x_offseted, C0</span></div>
<div class="line"><a name="l01223"></a><span class="lineno"> 1223</span>&#160;<span class="comment">//   %r = select i1 %old_cmp0, i32 %x, i32 %old_replacement</span></div>
<div class="line"><a name="l01224"></a><span class="lineno"> 1224</span>&#160;<span class="comment">// This can be rewritten as more canonical pattern:</span></div>
<div class="line"><a name="l01225"></a><span class="lineno"> 1225</span>&#160;<span class="comment">//   %new_cmp1 = icmp slt i32 %x, -C1</span></div>
<div class="line"><a name="l01226"></a><span class="lineno"> 1226</span>&#160;<span class="comment">//   %new_cmp2 = icmp sge i32 %x, C0-C1</span></div>
<div class="line"><a name="l01227"></a><span class="lineno"> 1227</span>&#160;<span class="comment">//   %new_clamped_low = select i1 %new_cmp1, i32 %target_low, i32 %x</span></div>
<div class="line"><a name="l01228"></a><span class="lineno"> 1228</span>&#160;<span class="comment">//   %r = select i1 %new_cmp2, i32 %target_high, i32 %new_clamped_low</span></div>
<div class="line"><a name="l01229"></a><span class="lineno"> 1229</span>&#160;<span class="comment">// Iff -C1 s&lt;= C2 s&lt;= C0-C1</span></div>
<div class="line"><a name="l01230"></a><span class="lineno"> 1230</span>&#160;<span class="comment">// Also ULT predicate can also be UGT iff C0 != -1 (+invert result)</span></div>
<div class="line"><a name="l01231"></a><span class="lineno"> 1231</span>&#160;<span class="comment">//      SLT predicate can also be SGT iff C2 != INT_MAX (+invert res.)</span></div>
<div class="line"><a name="l01232"></a><span class="lineno"> 1232</span>&#160;<span class="keyword">static</span> <a class="code" href="classllvm_1_1Instruction.html">Instruction</a> *canonicalizeClampLike(<a class="code" href="classllvm_1_1SelectInst.html">SelectInst</a> &amp;Sel0, <a class="code" href="classllvm_1_1ICmpInst.html">ICmpInst</a> &amp;Cmp0,</div>
<div class="line"><a name="l01233"></a><span class="lineno"> 1233</span>&#160;                                          <a class="code" href="classllvm_1_1IRBuilder.html">InstCombiner::BuilderTy</a> &amp;<a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>) {</div>
<div class="line"><a name="l01234"></a><span class="lineno"> 1234</span>&#160;  <a class="code" href="classllvm_1_1Value.html">Value</a> *<a class="code" href="ErlangGCPrinter_8cpp.html#a74b474c0616ab55c1d9487f11fd31d26">X</a> = Sel0.<a class="code" href="classllvm_1_1SelectInst.html#a483700f6bf3ac62445850d768cf188f6">getTrueValue</a>();</div>
<div class="line"><a name="l01235"></a><span class="lineno"> 1235</span>&#160;  <a class="code" href="classllvm_1_1Value.html">Value</a> *Sel1 = Sel0.<a class="code" href="classllvm_1_1SelectInst.html#a59b0ee738ec17984b97128e7f1594db3">getFalseValue</a>();</div>
<div class="line"><a name="l01236"></a><span class="lineno"> 1236</span>&#160; </div>
<div class="line"><a name="l01237"></a><span class="lineno"> 1237</span>&#160;  <span class="comment">// First match the condition of the outermost select.</span></div>
<div class="line"><a name="l01238"></a><span class="lineno"> 1238</span>&#160;  <span class="comment">// Said condition must be one-use.</span></div>
<div class="line"><a name="l01239"></a><span class="lineno"> 1239</span>&#160;  <span class="keywordflow">if</span> (!Cmp0.<a class="code" href="classllvm_1_1Value.html#a3a402430a1bbe70a9282dcb0e0b6a2cd">hasOneUse</a>())</div>
<div class="line"><a name="l01240"></a><span class="lineno"> 1240</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l01241"></a><span class="lineno"> 1241</span>&#160;  <a class="code" href="classllvm_1_1Value.html">Value</a> *Cmp00 = Cmp0.<a class="code" href="classllvm_1_1User.html#abe1de1520a21f77ac57cc210bf0fb0b4">getOperand</a>(0);</div>
<div class="line"><a name="l01242"></a><span class="lineno"> 1242</span>&#160;  <a class="code" href="classllvm_1_1Constant.html">Constant</a> *C0;</div>
<div class="line"><a name="l01243"></a><span class="lineno"> 1243</span>&#160;  <span class="keywordflow">if</span> (!<a class="code" href="namespacellvm_1_1PatternMatch.html#a25d956d9e0beadd47ce4bc255dfa811d">match</a>(Cmp0.<a class="code" href="classllvm_1_1User.html#abe1de1520a21f77ac57cc210bf0fb0b4">getOperand</a>(1),</div>
<div class="line"><a name="l01244"></a><span class="lineno"> 1244</span>&#160;             <a class="code" href="namespacellvm_1_1PatternMatch.html#a575c2299c6f145ba3a12efa20829db43">m_CombineAnd</a>(<a class="code" href="namespacellvm_1_1PatternMatch.html#a1955ef05e08a44c7e45ea15eedf7a33e">m_AnyIntegralConstant</a>(), <a class="code" href="namespacellvm_1_1PatternMatch.html#aadd209ba7e1bfa8113a609e09a7fe62f">m_Constant</a>(C0))))</div>
<div class="line"><a name="l01245"></a><span class="lineno"> 1245</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l01246"></a><span class="lineno"> 1246</span>&#160;  <span class="comment">// Canonicalize Cmp0 into the form we expect.</span></div>
<div class="line"><a name="l01247"></a><span class="lineno"> 1247</span>&#160;  <span class="comment">// FIXME: we shouldn&#39;t care about lanes that are &#39;undef&#39; in the end?</span></div>
<div class="line"><a name="l01248"></a><span class="lineno"> 1248</span>&#160;  <span class="keywordflow">switch</span> (Cmp0.<a class="code" href="classllvm_1_1CmpInst.html#aa7414ba9f658ff1287d22a4b8fe81bcb">getPredicate</a>()) {</div>
<div class="line"><a name="l01249"></a><span class="lineno"> 1249</span>&#160;  <span class="keywordflow">case</span> ICmpInst::Predicate::ICMP_ULT:</div>
<div class="line"><a name="l01250"></a><span class="lineno"> 1250</span>&#160;    <span class="keywordflow">break</span>; <span class="comment">// Great!</span></div>
<div class="line"><a name="l01251"></a><span class="lineno"> 1251</span>&#160;  <span class="keywordflow">case</span> ICmpInst::Predicate::ICMP_ULE:</div>
<div class="line"><a name="l01252"></a><span class="lineno"> 1252</span>&#160;    <span class="comment">// We&#39;d have to increment C0 by one, and for that it must not have all-ones</span></div>
<div class="line"><a name="l01253"></a><span class="lineno"> 1253</span>&#160;    <span class="comment">// element, but then it would have been canonicalized to &#39;ult&#39; before</span></div>
<div class="line"><a name="l01254"></a><span class="lineno"> 1254</span>&#160;    <span class="comment">// we get here. So we can&#39;t do anything useful with &#39;ule&#39;.</span></div>
<div class="line"><a name="l01255"></a><span class="lineno"> 1255</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l01256"></a><span class="lineno"> 1256</span>&#160;  <span class="keywordflow">case</span> ICmpInst::Predicate::ICMP_UGT:</div>
<div class="line"><a name="l01257"></a><span class="lineno"> 1257</span>&#160;    <span class="comment">// We want to canonicalize it to &#39;ult&#39;, so we&#39;ll need to increment C0,</span></div>
<div class="line"><a name="l01258"></a><span class="lineno"> 1258</span>&#160;    <span class="comment">// which again means it must not have any all-ones elements.</span></div>
<div class="line"><a name="l01259"></a><span class="lineno"> 1259</span>&#160;    <span class="keywordflow">if</span> (!<a class="code" href="namespacellvm_1_1PatternMatch.html#a25d956d9e0beadd47ce4bc255dfa811d">match</a>(C0,</div>
<div class="line"><a name="l01260"></a><span class="lineno"> 1260</span>&#160;               <a class="code" href="namespacellvm_1_1PatternMatch.html#abb22519fa3bf66d9e0bc6d1a733a5821">m_SpecificInt_ICMP</a>(ICmpInst::Predicate::ICMP_NE,</div>
<div class="line"><a name="l01261"></a><span class="lineno"> 1261</span>&#160;                                  <a class="code" href="classllvm_1_1APInt.html#a539bdb4fdbf46e0bfcefebf5ac6d21dd">APInt::getAllOnesValue</a>(</div>
<div class="line"><a name="l01262"></a><span class="lineno"> 1262</span>&#160;                                      C0-&gt;<a class="code" href="classllvm_1_1Value.html#a6393a2d4fe7e10b28a0dcc35f881567b">getType</a>()-&gt;<a class="code" href="classllvm_1_1Type.html#a9f382207d841377156d4c7868b66b9a5">getScalarSizeInBits</a>()))))</div>
<div class="line"><a name="l01263"></a><span class="lineno"> 1263</span>&#160;      <span class="keywordflow">return</span> <span class="keyword">nullptr</span>; <span class="comment">// Can&#39;t do, have all-ones element[s].</span></div>
<div class="line"><a name="l01264"></a><span class="lineno"> 1264</span>&#160;    C0 = <a class="code" href="classllvm_1_1InstCombiner.html#a25129446fbad8ac355a52944904a1ec6">InstCombiner::AddOne</a>(C0);</div>
<div class="line"><a name="l01265"></a><span class="lineno"> 1265</span>&#160;    <a class="code" href="namespacestd.html#ab8424022895aee3e366fb9a32f2883cb">std::swap</a>(<a class="code" href="ErlangGCPrinter_8cpp.html#a74b474c0616ab55c1d9487f11fd31d26">X</a>, Sel1);</div>
<div class="line"><a name="l01266"></a><span class="lineno"> 1266</span>&#160;    <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l01267"></a><span class="lineno"> 1267</span>&#160;  <span class="keywordflow">case</span> ICmpInst::Predicate::ICMP_UGE:</div>
<div class="line"><a name="l01268"></a><span class="lineno"> 1268</span>&#160;    <span class="comment">// The only way we&#39;d get this predicate if this `icmp` has extra uses,</span></div>
<div class="line"><a name="l01269"></a><span class="lineno"> 1269</span>&#160;    <span class="comment">// but then we won&#39;t be able to do this fold.</span></div>
<div class="line"><a name="l01270"></a><span class="lineno"> 1270</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l01271"></a><span class="lineno"> 1271</span>&#160;  <span class="keywordflow">default</span>:</div>
<div class="line"><a name="l01272"></a><span class="lineno"> 1272</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">nullptr</span>; <span class="comment">// Unknown predicate.</span></div>
<div class="line"><a name="l01273"></a><span class="lineno"> 1273</span>&#160;  }</div>
<div class="line"><a name="l01274"></a><span class="lineno"> 1274</span>&#160; </div>
<div class="line"><a name="l01275"></a><span class="lineno"> 1275</span>&#160;  <span class="comment">// Now that we&#39;ve canonicalized the ICmp, we know the X we expect;</span></div>
<div class="line"><a name="l01276"></a><span class="lineno"> 1276</span>&#160;  <span class="comment">// the select in other hand should be one-use.</span></div>
<div class="line"><a name="l01277"></a><span class="lineno"> 1277</span>&#160;  <span class="keywordflow">if</span> (!Sel1-&gt;<a class="code" href="classllvm_1_1Value.html#a3a402430a1bbe70a9282dcb0e0b6a2cd">hasOneUse</a>())</div>
<div class="line"><a name="l01278"></a><span class="lineno"> 1278</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l01279"></a><span class="lineno"> 1279</span>&#160; </div>
<div class="line"><a name="l01280"></a><span class="lineno"> 1280</span>&#160;  <span class="comment">// We now can finish matching the condition of the outermost select:</span></div>
<div class="line"><a name="l01281"></a><span class="lineno"> 1281</span>&#160;  <span class="comment">// it should either be the X itself, or an addition of some constant to X.</span></div>
<div class="line"><a name="l01282"></a><span class="lineno"> 1282</span>&#160;  <a class="code" href="classllvm_1_1Constant.html">Constant</a> *<a class="code" href="lib_2Target_2README_8txt.html#a2a2df5a25b9c703e74e82b48a75d0c3d">C1</a>;</div>
<div class="line"><a name="l01283"></a><span class="lineno"> 1283</span>&#160;  <span class="keywordflow">if</span> (Cmp00 == <a class="code" href="ErlangGCPrinter_8cpp.html#a74b474c0616ab55c1d9487f11fd31d26">X</a>)</div>
<div class="line"><a name="l01284"></a><span class="lineno"> 1284</span>&#160;    <a class="code" href="lib_2Target_2README_8txt.html#a2a2df5a25b9c703e74e82b48a75d0c3d">C1</a> = <a class="code" href="classllvm_1_1Constant.html#aa6574d526b3e38a28f688a7bb4325c2c">ConstantInt::getNullValue</a>(Sel0.<a class="code" href="classllvm_1_1Value.html#a6393a2d4fe7e10b28a0dcc35f881567b">getType</a>());</div>
<div class="line"><a name="l01285"></a><span class="lineno"> 1285</span>&#160;  <span class="keywordflow">else</span> <span class="keywordflow">if</span> (!<a class="code" href="namespacellvm_1_1PatternMatch.html#a25d956d9e0beadd47ce4bc255dfa811d">match</a>(Cmp00,</div>
<div class="line"><a name="l01286"></a><span class="lineno"> 1286</span>&#160;                  <a class="code" href="namespacellvm_1_1PatternMatch.html#a944c25ac9b73b02a17a20a08a25b9b21">m_Add</a>(<a class="code" href="namespacellvm_1_1PatternMatch.html#a2d9861feadd3a09792967a012559e7b2">m_Specific</a>(<a class="code" href="ErlangGCPrinter_8cpp.html#a74b474c0616ab55c1d9487f11fd31d26">X</a>),</div>
<div class="line"><a name="l01287"></a><span class="lineno"> 1287</span>&#160;                        <a class="code" href="namespacellvm_1_1PatternMatch.html#a575c2299c6f145ba3a12efa20829db43">m_CombineAnd</a>(<a class="code" href="namespacellvm_1_1PatternMatch.html#a1955ef05e08a44c7e45ea15eedf7a33e">m_AnyIntegralConstant</a>(), <a class="code" href="namespacellvm_1_1PatternMatch.html#aadd209ba7e1bfa8113a609e09a7fe62f">m_Constant</a>(<a class="code" href="lib_2Target_2README_8txt.html#a2a2df5a25b9c703e74e82b48a75d0c3d">C1</a>)))))</div>
<div class="line"><a name="l01288"></a><span class="lineno"> 1288</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l01289"></a><span class="lineno"> 1289</span>&#160; </div>
<div class="line"><a name="l01290"></a><span class="lineno"> 1290</span>&#160;  <a class="code" href="classllvm_1_1Value.html">Value</a> *Cmp1;</div>
<div class="line"><a name="l01291"></a><span class="lineno"> 1291</span>&#160;  <a class="code" href="classllvm_1_1CmpInst.html#a2be3583dac92a031fa1458d4d992c78b">ICmpInst::Predicate</a> Pred1;</div>
<div class="line"><a name="l01292"></a><span class="lineno"> 1292</span>&#160;  <a class="code" href="classllvm_1_1Constant.html">Constant</a> *C2;</div>
<div class="line"><a name="l01293"></a><span class="lineno"> 1293</span>&#160;  <a class="code" href="classllvm_1_1Value.html">Value</a> *ReplacementLow, *ReplacementHigh;</div>
<div class="line"><a name="l01294"></a><span class="lineno"> 1294</span>&#160;  <span class="keywordflow">if</span> (!<a class="code" href="namespacellvm_1_1PatternMatch.html#a25d956d9e0beadd47ce4bc255dfa811d">match</a>(Sel1, <a class="code" href="namespacellvm_1_1PatternMatch.html#addb87fe3f509b7803d3f5933ee24b560">m_Select</a>(<a class="code" href="namespacellvm_1_1PatternMatch.html#a24bca8838396aa81b87de8e7ac774b19">m_Value</a>(Cmp1), <a class="code" href="namespacellvm_1_1PatternMatch.html#a24bca8838396aa81b87de8e7ac774b19">m_Value</a>(ReplacementLow),</div>
<div class="line"><a name="l01295"></a><span class="lineno"> 1295</span>&#160;                            <a class="code" href="namespacellvm_1_1PatternMatch.html#a24bca8838396aa81b87de8e7ac774b19">m_Value</a>(ReplacementHigh))) ||</div>
<div class="line"><a name="l01296"></a><span class="lineno"> 1296</span>&#160;      !<a class="code" href="namespacellvm_1_1PatternMatch.html#a25d956d9e0beadd47ce4bc255dfa811d">match</a>(Cmp1,</div>
<div class="line"><a name="l01297"></a><span class="lineno"> 1297</span>&#160;             <a class="code" href="namespacellvm_1_1PatternMatch.html#a3fe9b3ddb71b9fb53d9fc74b3a0710bf">m_ICmp</a>(Pred1, <a class="code" href="namespacellvm_1_1PatternMatch.html#a2d9861feadd3a09792967a012559e7b2">m_Specific</a>(<a class="code" href="ErlangGCPrinter_8cpp.html#a74b474c0616ab55c1d9487f11fd31d26">X</a>),</div>
<div class="line"><a name="l01298"></a><span class="lineno"> 1298</span>&#160;                    <a class="code" href="namespacellvm_1_1PatternMatch.html#a575c2299c6f145ba3a12efa20829db43">m_CombineAnd</a>(<a class="code" href="namespacellvm_1_1PatternMatch.html#a1955ef05e08a44c7e45ea15eedf7a33e">m_AnyIntegralConstant</a>(), <a class="code" href="namespacellvm_1_1PatternMatch.html#aadd209ba7e1bfa8113a609e09a7fe62f">m_Constant</a>(C2)))))</div>
<div class="line"><a name="l01299"></a><span class="lineno"> 1299</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l01300"></a><span class="lineno"> 1300</span>&#160; </div>
<div class="line"><a name="l01301"></a><span class="lineno"> 1301</span>&#160;  <span class="keywordflow">if</span> (!Cmp1-&gt;<a class="code" href="classllvm_1_1Value.html#a3a402430a1bbe70a9282dcb0e0b6a2cd">hasOneUse</a>() &amp;&amp; (Cmp00 == <a class="code" href="ErlangGCPrinter_8cpp.html#a74b474c0616ab55c1d9487f11fd31d26">X</a> || !Cmp00-&gt;<a class="code" href="classllvm_1_1Value.html#a3a402430a1bbe70a9282dcb0e0b6a2cd">hasOneUse</a>()))</div>
<div class="line"><a name="l01302"></a><span class="lineno"> 1302</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">nullptr</span>; <span class="comment">// Not enough one-use instructions for the fold.</span></div>
<div class="line"><a name="l01303"></a><span class="lineno"> 1303</span>&#160;  <span class="comment">// FIXME: this restriction could be relaxed if Cmp1 can be reused as one of</span></div>
<div class="line"><a name="l01304"></a><span class="lineno"> 1304</span>&#160;  <span class="comment">//        two comparisons we&#39;ll need to build.</span></div>
<div class="line"><a name="l01305"></a><span class="lineno"> 1305</span>&#160; </div>
<div class="line"><a name="l01306"></a><span class="lineno"> 1306</span>&#160;  <span class="comment">// Canonicalize Cmp1 into the form we expect.</span></div>
<div class="line"><a name="l01307"></a><span class="lineno"> 1307</span>&#160;  <span class="comment">// FIXME: we shouldn&#39;t care about lanes that are &#39;undef&#39; in the end?</span></div>
<div class="line"><a name="l01308"></a><span class="lineno"> 1308</span>&#160;  <span class="keywordflow">switch</span> (Pred1) {</div>
<div class="line"><a name="l01309"></a><span class="lineno"> 1309</span>&#160;  <span class="keywordflow">case</span> ICmpInst::Predicate::ICMP_SLT:</div>
<div class="line"><a name="l01310"></a><span class="lineno"> 1310</span>&#160;    <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l01311"></a><span class="lineno"> 1311</span>&#160;  <span class="keywordflow">case</span> ICmpInst::Predicate::ICMP_SLE:</div>
<div class="line"><a name="l01312"></a><span class="lineno"> 1312</span>&#160;    <span class="comment">// We&#39;d have to increment C2 by one, and for that it must not have signed</span></div>
<div class="line"><a name="l01313"></a><span class="lineno"> 1313</span>&#160;    <span class="comment">// max element, but then it would have been canonicalized to &#39;slt&#39; before</span></div>
<div class="line"><a name="l01314"></a><span class="lineno"> 1314</span>&#160;    <span class="comment">// we get here. So we can&#39;t do anything useful with &#39;sle&#39;.</span></div>
<div class="line"><a name="l01315"></a><span class="lineno"> 1315</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l01316"></a><span class="lineno"> 1316</span>&#160;  <span class="keywordflow">case</span> ICmpInst::Predicate::ICMP_SGT:</div>
<div class="line"><a name="l01317"></a><span class="lineno"> 1317</span>&#160;    <span class="comment">// We want to canonicalize it to &#39;slt&#39;, so we&#39;ll need to increment C2,</span></div>
<div class="line"><a name="l01318"></a><span class="lineno"> 1318</span>&#160;    <span class="comment">// which again means it must not have any signed max elements.</span></div>
<div class="line"><a name="l01319"></a><span class="lineno"> 1319</span>&#160;    <span class="keywordflow">if</span> (!<a class="code" href="namespacellvm_1_1PatternMatch.html#a25d956d9e0beadd47ce4bc255dfa811d">match</a>(C2,</div>
<div class="line"><a name="l01320"></a><span class="lineno"> 1320</span>&#160;               <a class="code" href="namespacellvm_1_1PatternMatch.html#abb22519fa3bf66d9e0bc6d1a733a5821">m_SpecificInt_ICMP</a>(ICmpInst::Predicate::ICMP_NE,</div>
<div class="line"><a name="l01321"></a><span class="lineno"> 1321</span>&#160;                                  <a class="code" href="classllvm_1_1APInt.html#a562c9513409b74f02cb3a5c9bae672ea">APInt::getSignedMaxValue</a>(</div>
<div class="line"><a name="l01322"></a><span class="lineno"> 1322</span>&#160;                                      C2-&gt;<a class="code" href="classllvm_1_1Value.html#a6393a2d4fe7e10b28a0dcc35f881567b">getType</a>()-&gt;<a class="code" href="classllvm_1_1Type.html#a9f382207d841377156d4c7868b66b9a5">getScalarSizeInBits</a>()))))</div>
<div class="line"><a name="l01323"></a><span class="lineno"> 1323</span>&#160;      <span class="keywordflow">return</span> <span class="keyword">nullptr</span>; <span class="comment">// Can&#39;t do, have signed max element[s].</span></div>
<div class="line"><a name="l01324"></a><span class="lineno"> 1324</span>&#160;    C2 = <a class="code" href="classllvm_1_1InstCombiner.html#a25129446fbad8ac355a52944904a1ec6">InstCombiner::AddOne</a>(C2);</div>
<div class="line"><a name="l01325"></a><span class="lineno"> 1325</span>&#160;    <a class="code" href="Compiler_8h.html#a9579881de06b1560d242d15171ca1b86">LLVM_FALLTHROUGH</a>;</div>
<div class="line"><a name="l01326"></a><span class="lineno"> 1326</span>&#160;  <span class="keywordflow">case</span> ICmpInst::Predicate::ICMP_SGE:</div>
<div class="line"><a name="l01327"></a><span class="lineno"> 1327</span>&#160;    <span class="comment">// Also non-canonical, but here we don&#39;t need to change C2,</span></div>
<div class="line"><a name="l01328"></a><span class="lineno"> 1328</span>&#160;    <span class="comment">// so we don&#39;t have any restrictions on C2, so we can just handle it.</span></div>
<div class="line"><a name="l01329"></a><span class="lineno"> 1329</span>&#160;    <a class="code" href="namespacestd.html#ab8424022895aee3e366fb9a32f2883cb">std::swap</a>(ReplacementLow, ReplacementHigh);</div>
<div class="line"><a name="l01330"></a><span class="lineno"> 1330</span>&#160;    <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l01331"></a><span class="lineno"> 1331</span>&#160;  <span class="keywordflow">default</span>:</div>
<div class="line"><a name="l01332"></a><span class="lineno"> 1332</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">nullptr</span>; <span class="comment">// Unknown predicate.</span></div>
<div class="line"><a name="l01333"></a><span class="lineno"> 1333</span>&#160;  }</div>
<div class="line"><a name="l01334"></a><span class="lineno"> 1334</span>&#160; </div>
<div class="line"><a name="l01335"></a><span class="lineno"> 1335</span>&#160;  <span class="comment">// The thresholds of this clamp-like pattern.</span></div>
<div class="line"><a name="l01336"></a><span class="lineno"> 1336</span>&#160;  <span class="keyword">auto</span> *ThresholdLowIncl = <a class="code" href="classllvm_1_1ConstantExpr.html#afa29f0cd072ab9b3a2630681ffe5760f">ConstantExpr::getNeg</a>(<a class="code" href="lib_2Target_2README_8txt.html#a2a2df5a25b9c703e74e82b48a75d0c3d">C1</a>);</div>
<div class="line"><a name="l01337"></a><span class="lineno"> 1337</span>&#160;  <span class="keyword">auto</span> *ThresholdHighExcl = <a class="code" href="classllvm_1_1ConstantExpr.html#a554ab77949b0a16670a83ec3307501eb">ConstantExpr::getSub</a>(C0, <a class="code" href="lib_2Target_2README_8txt.html#a2a2df5a25b9c703e74e82b48a75d0c3d">C1</a>);</div>
<div class="line"><a name="l01338"></a><span class="lineno"> 1338</span>&#160; </div>
<div class="line"><a name="l01339"></a><span class="lineno"> 1339</span>&#160;  <span class="comment">// The fold has a precondition 1: C2 s&gt;= ThresholdLow</span></div>
<div class="line"><a name="l01340"></a><span class="lineno"> 1340</span>&#160;  <span class="keyword">auto</span> *Precond1 = <a class="code" href="classllvm_1_1ConstantExpr.html#a68fce0638c5ec7b96b8572cad9c20488">ConstantExpr::getICmp</a>(ICmpInst::Predicate::ICMP_SGE, C2,</div>
<div class="line"><a name="l01341"></a><span class="lineno"> 1341</span>&#160;                                         ThresholdLowIncl);</div>
<div class="line"><a name="l01342"></a><span class="lineno"> 1342</span>&#160;  <span class="keywordflow">if</span> (!<a class="code" href="namespacellvm_1_1PatternMatch.html#a25d956d9e0beadd47ce4bc255dfa811d">match</a>(Precond1, <a class="code" href="namespacellvm_1_1PatternMatch.html#aebdb2700a77d10ae6f0ce115e23d9f77">m_One</a>()))</div>
<div class="line"><a name="l01343"></a><span class="lineno"> 1343</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l01344"></a><span class="lineno"> 1344</span>&#160;  <span class="comment">// The fold has a precondition 2: C2 s&lt;= ThresholdHigh</span></div>
<div class="line"><a name="l01345"></a><span class="lineno"> 1345</span>&#160;  <span class="keyword">auto</span> *Precond2 = <a class="code" href="classllvm_1_1ConstantExpr.html#a68fce0638c5ec7b96b8572cad9c20488">ConstantExpr::getICmp</a>(ICmpInst::Predicate::ICMP_SLE, C2,</div>
<div class="line"><a name="l01346"></a><span class="lineno"> 1346</span>&#160;                                         ThresholdHighExcl);</div>
<div class="line"><a name="l01347"></a><span class="lineno"> 1347</span>&#160;  <span class="keywordflow">if</span> (!<a class="code" href="namespacellvm_1_1PatternMatch.html#a25d956d9e0beadd47ce4bc255dfa811d">match</a>(Precond2, <a class="code" href="namespacellvm_1_1PatternMatch.html#aebdb2700a77d10ae6f0ce115e23d9f77">m_One</a>()))</div>
<div class="line"><a name="l01348"></a><span class="lineno"> 1348</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l01349"></a><span class="lineno"> 1349</span>&#160; </div>
<div class="line"><a name="l01350"></a><span class="lineno"> 1350</span>&#160;  <span class="comment">// All good, finally emit the new pattern.</span></div>
<div class="line"><a name="l01351"></a><span class="lineno"> 1351</span>&#160;  <a class="code" href="classllvm_1_1Value.html">Value</a> *ShouldReplaceLow = <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.CreateICmpSLT(<a class="code" href="ErlangGCPrinter_8cpp.html#a74b474c0616ab55c1d9487f11fd31d26">X</a>, ThresholdLowIncl);</div>
<div class="line"><a name="l01352"></a><span class="lineno"> 1352</span>&#160;  <a class="code" href="classllvm_1_1Value.html">Value</a> *ShouldReplaceHigh = <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.CreateICmpSGE(<a class="code" href="ErlangGCPrinter_8cpp.html#a74b474c0616ab55c1d9487f11fd31d26">X</a>, ThresholdHighExcl);</div>
<div class="line"><a name="l01353"></a><span class="lineno"> 1353</span>&#160;  <a class="code" href="classllvm_1_1Value.html">Value</a> *MaybeReplacedLow =</div>
<div class="line"><a name="l01354"></a><span class="lineno"> 1354</span>&#160;      <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.CreateSelect(ShouldReplaceLow, ReplacementLow, <a class="code" href="ErlangGCPrinter_8cpp.html#a74b474c0616ab55c1d9487f11fd31d26">X</a>);</div>
<div class="line"><a name="l01355"></a><span class="lineno"> 1355</span>&#160;  <a class="code" href="classllvm_1_1Instruction.html">Instruction</a> *MaybeReplacedHigh =</div>
<div class="line"><a name="l01356"></a><span class="lineno"> 1356</span>&#160;      <a class="code" href="classllvm_1_1SelectInst.html#aa55fb74dd22008fdcc26a63f44576022">SelectInst::Create</a>(ShouldReplaceHigh, ReplacementHigh, MaybeReplacedLow);</div>
<div class="line"><a name="l01357"></a><span class="lineno"> 1357</span>&#160; </div>
<div class="line"><a name="l01358"></a><span class="lineno"> 1358</span>&#160;  <span class="keywordflow">return</span> MaybeReplacedHigh;</div>
<div class="line"><a name="l01359"></a><span class="lineno"> 1359</span>&#160;}</div>
<div class="line"><a name="l01360"></a><span class="lineno"> 1360</span>&#160; </div>
<div class="line"><a name="l01361"></a><span class="lineno"> 1361</span>&#160;<span class="comment">// If we have</span></div>
<div class="line"><a name="l01362"></a><span class="lineno"> 1362</span>&#160;<span class="comment">//  %cmp = icmp [canonical predicate] i32 %x, C0</span></div>
<div class="line"><a name="l01363"></a><span class="lineno"> 1363</span>&#160;<span class="comment">//  %r = select i1 %cmp, i32 %y, i32 C1</span></div>
<div class="line"><a name="l01364"></a><span class="lineno"> 1364</span>&#160;<span class="comment">// Where C0 != C1 and %x may be different from %y, see if the constant that we</span></div>
<div class="line"><a name="l01365"></a><span class="lineno"> 1365</span>&#160;<span class="comment">// will have if we flip the strictness of the predicate (i.e. without changing</span></div>
<div class="line"><a name="l01366"></a><span class="lineno"> 1366</span>&#160;<span class="comment">// the result) is identical to the C1 in select. If it matches we can change</span></div>
<div class="line"><a name="l01367"></a><span class="lineno"> 1367</span>&#160;<span class="comment">// original comparison to one with swapped predicate, reuse the constant,</span></div>
<div class="line"><a name="l01368"></a><span class="lineno"> 1368</span>&#160;<span class="comment">// and swap the hands of select.</span></div>
<div class="line"><a name="l01369"></a><span class="lineno"> 1369</span>&#160;<span class="keyword">static</span> <a class="code" href="classllvm_1_1Instruction.html">Instruction</a> *</div>
<div class="line"><a name="l01370"></a><span class="lineno"> 1370</span>&#160;tryToReuseConstantFromSelectInComparison(<a class="code" href="classllvm_1_1SelectInst.html">SelectInst</a> &amp;Sel, <a class="code" href="classllvm_1_1ICmpInst.html">ICmpInst</a> &amp;Cmp,</div>
<div class="line"><a name="l01371"></a><span class="lineno"> 1371</span>&#160;                                         <a class="code" href="classllvm_1_1InstCombinerImpl.html">InstCombinerImpl</a> &amp;IC) {</div>
<div class="line"><a name="l01372"></a><span class="lineno"> 1372</span>&#160;  <a class="code" href="classllvm_1_1CmpInst.html#a2be3583dac92a031fa1458d4d992c78b">ICmpInst::Predicate</a> Pred;</div>
<div class="line"><a name="l01373"></a><span class="lineno"> 1373</span>&#160;  <a class="code" href="classllvm_1_1Value.html">Value</a> *<a class="code" href="ErlangGCPrinter_8cpp.html#a74b474c0616ab55c1d9487f11fd31d26">X</a>;</div>
<div class="line"><a name="l01374"></a><span class="lineno"> 1374</span>&#160;  <a class="code" href="classllvm_1_1Constant.html">Constant</a> *C0;</div>
<div class="line"><a name="l01375"></a><span class="lineno"> 1375</span>&#160;  <span class="keywordflow">if</span> (!<a class="code" href="namespacellvm_1_1PatternMatch.html#a25d956d9e0beadd47ce4bc255dfa811d">match</a>(&amp;Cmp, <a class="code" href="namespacellvm_1_1PatternMatch.html#aca6428e7fec51ba0b55594f469eb9691">m_OneUse</a>(<a class="code" href="namespacellvm_1_1PatternMatch.html#a3fe9b3ddb71b9fb53d9fc74b3a0710bf">m_ICmp</a>(</div>
<div class="line"><a name="l01376"></a><span class="lineno"> 1376</span>&#160;                       Pred, <a class="code" href="namespacellvm_1_1PatternMatch.html#a24bca8838396aa81b87de8e7ac774b19">m_Value</a>(<a class="code" href="ErlangGCPrinter_8cpp.html#a74b474c0616ab55c1d9487f11fd31d26">X</a>),</div>
<div class="line"><a name="l01377"></a><span class="lineno"> 1377</span>&#160;                       <a class="code" href="namespacellvm_1_1PatternMatch.html#a575c2299c6f145ba3a12efa20829db43">m_CombineAnd</a>(<a class="code" href="namespacellvm_1_1PatternMatch.html#a1955ef05e08a44c7e45ea15eedf7a33e">m_AnyIntegralConstant</a>(), <a class="code" href="namespacellvm_1_1PatternMatch.html#aadd209ba7e1bfa8113a609e09a7fe62f">m_Constant</a>(C0))))))</div>
<div class="line"><a name="l01378"></a><span class="lineno"> 1378</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l01379"></a><span class="lineno"> 1379</span>&#160; </div>
<div class="line"><a name="l01380"></a><span class="lineno"> 1380</span>&#160;  <span class="comment">// If comparison predicate is non-relational, we won&#39;t be able to do anything.</span></div>
<div class="line"><a name="l01381"></a><span class="lineno"> 1381</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1ICmpInst.html#aaaeded5d0cab77f531b294638459aca5">ICmpInst::isEquality</a>(Pred))</div>
<div class="line"><a name="l01382"></a><span class="lineno"> 1382</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l01383"></a><span class="lineno"> 1383</span>&#160; </div>
<div class="line"><a name="l01384"></a><span class="lineno"> 1384</span>&#160;  <span class="comment">// If comparison predicate is non-canonical, then we certainly won&#39;t be able</span></div>
<div class="line"><a name="l01385"></a><span class="lineno"> 1385</span>&#160;  <span class="comment">// to make it canonical; canonicalizeCmpWithConstant() already tried.</span></div>
<div class="line"><a name="l01386"></a><span class="lineno"> 1386</span>&#160;  <span class="keywordflow">if</span> (!<a class="code" href="classllvm_1_1InstCombiner.html#a17baa08df1b509edb0429cb2676e1079">InstCombiner::isCanonicalPredicate</a>(Pred))</div>
<div class="line"><a name="l01387"></a><span class="lineno"> 1387</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l01388"></a><span class="lineno"> 1388</span>&#160; </div>
<div class="line"><a name="l01389"></a><span class="lineno"> 1389</span>&#160;  <span class="comment">// If the [input] type of comparison and select type are different, lets abort</span></div>
<div class="line"><a name="l01390"></a><span class="lineno"> 1390</span>&#160;  <span class="comment">// for now. We could try to compare constants with trunc/[zs]ext though.</span></div>
<div class="line"><a name="l01391"></a><span class="lineno"> 1391</span>&#160;  <span class="keywordflow">if</span> (C0-&gt;<a class="code" href="classllvm_1_1Value.html#a6393a2d4fe7e10b28a0dcc35f881567b">getType</a>() != Sel.<a class="code" href="classllvm_1_1Value.html#a6393a2d4fe7e10b28a0dcc35f881567b">getType</a>())</div>
<div class="line"><a name="l01392"></a><span class="lineno"> 1392</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l01393"></a><span class="lineno"> 1393</span>&#160; </div>
<div class="line"><a name="l01394"></a><span class="lineno"> 1394</span>&#160;  <span class="comment">// FIXME: are there any magic icmp predicate+constant pairs we must not touch?</span></div>
<div class="line"><a name="l01395"></a><span class="lineno"> 1395</span>&#160; </div>
<div class="line"><a name="l01396"></a><span class="lineno"> 1396</span>&#160;  <a class="code" href="classllvm_1_1Value.html">Value</a> *SelVal0, *SelVal1; <span class="comment">// We do not care which one is from where.</span></div>
<div class="line"><a name="l01397"></a><span class="lineno"> 1397</span>&#160;  <a class="code" href="namespacellvm_1_1PatternMatch.html#a25d956d9e0beadd47ce4bc255dfa811d">match</a>(&amp;Sel, <a class="code" href="namespacellvm_1_1PatternMatch.html#addb87fe3f509b7803d3f5933ee24b560">m_Select</a>(<a class="code" href="namespacellvm_1_1PatternMatch.html#a24bca8838396aa81b87de8e7ac774b19">m_Value</a>(), <a class="code" href="namespacellvm_1_1PatternMatch.html#a24bca8838396aa81b87de8e7ac774b19">m_Value</a>(SelVal0), <a class="code" href="namespacellvm_1_1PatternMatch.html#a24bca8838396aa81b87de8e7ac774b19">m_Value</a>(SelVal1)));</div>
<div class="line"><a name="l01398"></a><span class="lineno"> 1398</span>&#160;  <span class="comment">// At least one of these values we are selecting between must be a constant</span></div>
<div class="line"><a name="l01399"></a><span class="lineno"> 1399</span>&#160;  <span class="comment">// else we&#39;ll never succeed.</span></div>
<div class="line"><a name="l01400"></a><span class="lineno"> 1400</span>&#160;  <span class="keywordflow">if</span> (!<a class="code" href="namespacellvm_1_1PatternMatch.html#a25d956d9e0beadd47ce4bc255dfa811d">match</a>(SelVal0, <a class="code" href="namespacellvm_1_1PatternMatch.html#a1955ef05e08a44c7e45ea15eedf7a33e">m_AnyIntegralConstant</a>()) &amp;&amp;</div>
<div class="line"><a name="l01401"></a><span class="lineno"> 1401</span>&#160;      !<a class="code" href="namespacellvm_1_1PatternMatch.html#a25d956d9e0beadd47ce4bc255dfa811d">match</a>(SelVal1, <a class="code" href="namespacellvm_1_1PatternMatch.html#a1955ef05e08a44c7e45ea15eedf7a33e">m_AnyIntegralConstant</a>()))</div>
<div class="line"><a name="l01402"></a><span class="lineno"> 1402</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l01403"></a><span class="lineno"> 1403</span>&#160; </div>
<div class="line"><a name="l01404"></a><span class="lineno"> 1404</span>&#160;  <span class="comment">// Does this constant C match any of the `select` values?</span></div>
<div class="line"><a name="l01405"></a><span class="lineno"> 1405</span>&#160;  <span class="keyword">auto</span> MatchesSelectValue = [SelVal0, SelVal1](<a class="code" href="classllvm_1_1Constant.html">Constant</a> *<a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a>) {</div>
<div class="line"><a name="l01406"></a><span class="lineno"> 1406</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a>-&gt;isElementWiseEqual(SelVal0) || <a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a>-&gt;isElementWiseEqual(SelVal1);</div>
<div class="line"><a name="l01407"></a><span class="lineno"> 1407</span>&#160;  };</div>
<div class="line"><a name="l01408"></a><span class="lineno"> 1408</span>&#160; </div>
<div class="line"><a name="l01409"></a><span class="lineno"> 1409</span>&#160;  <span class="comment">// If C0 *already* matches true/false value of select, we are done.</span></div>
<div class="line"><a name="l01410"></a><span class="lineno"> 1410</span>&#160;  <span class="keywordflow">if</span> (MatchesSelectValue(C0))</div>
<div class="line"><a name="l01411"></a><span class="lineno"> 1411</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l01412"></a><span class="lineno"> 1412</span>&#160; </div>
<div class="line"><a name="l01413"></a><span class="lineno"> 1413</span>&#160;  <span class="comment">// Check the constant we&#39;d have with flipped-strictness predicate.</span></div>
<div class="line"><a name="l01414"></a><span class="lineno"> 1414</span>&#160;  <span class="keyword">auto</span> FlippedStrictness =</div>
<div class="line"><a name="l01415"></a><span class="lineno"> 1415</span>&#160;      <a class="code" href="classllvm_1_1InstCombiner.html#a2eee2366d9e86879550a433b0adbe051">InstCombiner::getFlippedStrictnessPredicateAndConstant</a>(Pred, C0);</div>
<div class="line"><a name="l01416"></a><span class="lineno"> 1416</span>&#160;  <span class="keywordflow">if</span> (!FlippedStrictness)</div>
<div class="line"><a name="l01417"></a><span class="lineno"> 1417</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l01418"></a><span class="lineno"> 1418</span>&#160; </div>
<div class="line"><a name="l01419"></a><span class="lineno"> 1419</span>&#160;  <span class="comment">// If said constant doesn&#39;t match either, then there is no hope,</span></div>
<div class="line"><a name="l01420"></a><span class="lineno"> 1420</span>&#160;  <span class="keywordflow">if</span> (!MatchesSelectValue(FlippedStrictness-&gt;second))</div>
<div class="line"><a name="l01421"></a><span class="lineno"> 1421</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l01422"></a><span class="lineno"> 1422</span>&#160; </div>
<div class="line"><a name="l01423"></a><span class="lineno"> 1423</span>&#160;  <span class="comment">// It matched! Lets insert the new comparison just before select.</span></div>
<div class="line"><a name="l01424"></a><span class="lineno"> 1424</span>&#160;  InstCombiner::BuilderTy::InsertPointGuard Guard(IC.<a class="code" href="classllvm_1_1InstCombiner.html#ae1d331bc844ecb92bdeb0b706ae04396">Builder</a>);</div>
<div class="line"><a name="l01425"></a><span class="lineno"> 1425</span>&#160;  IC.<a class="code" href="classllvm_1_1InstCombiner.html#ae1d331bc844ecb92bdeb0b706ae04396">Builder</a>.<a class="code" href="classllvm_1_1IRBuilderBase.html#ace45cae6925c65e9d6916e09dd5b17cc">SetInsertPoint</a>(&amp;Sel);</div>
<div class="line"><a name="l01426"></a><span class="lineno"> 1426</span>&#160; </div>
<div class="line"><a name="l01427"></a><span class="lineno"> 1427</span>&#160;  Pred = <a class="code" href="classllvm_1_1CmpInst.html#a49a2d8f483ea08a3d6ea75f90c640d76">ICmpInst::getSwappedPredicate</a>(Pred); <span class="comment">// Yes, swapped.</span></div>
<div class="line"><a name="l01428"></a><span class="lineno"> 1428</span>&#160;  <a class="code" href="classllvm_1_1Value.html">Value</a> *NewCmp = IC.<a class="code" href="classllvm_1_1InstCombiner.html#ae1d331bc844ecb92bdeb0b706ae04396">Builder</a>.<a class="code" href="classllvm_1_1IRBuilderBase.html#a7ca3b58ad6dc93128afd44fbe61a1174">CreateICmp</a>(Pred, <a class="code" href="ErlangGCPrinter_8cpp.html#a74b474c0616ab55c1d9487f11fd31d26">X</a>, FlippedStrictness-&gt;second,</div>
<div class="line"><a name="l01429"></a><span class="lineno"> 1429</span>&#160;                                        Cmp.<a class="code" href="classllvm_1_1Value.html#adb5c319f5905c1d3ca9eb5df546388c5">getName</a>() + <span class="stringliteral">&quot;.inv&quot;</span>);</div>
<div class="line"><a name="l01430"></a><span class="lineno"> 1430</span>&#160;  IC.<a class="code" href="classllvm_1_1InstCombinerImpl.html#a250c29896fae99b9235d23f7254b8809">replaceOperand</a>(Sel, 0, NewCmp);</div>
<div class="line"><a name="l01431"></a><span class="lineno"> 1431</span>&#160;  Sel.<a class="code" href="classllvm_1_1SelectInst.html#a42c392f97e21ca9e5ab05520eaf9f99a">swapValues</a>();</div>
<div class="line"><a name="l01432"></a><span class="lineno"> 1432</span>&#160;  Sel.<a class="code" href="classllvm_1_1Instruction.html#a6e324daba99cb1d67713a562f9a778d2">swapProfMetadata</a>();</div>
<div class="line"><a name="l01433"></a><span class="lineno"> 1433</span>&#160; </div>
<div class="line"><a name="l01434"></a><span class="lineno"> 1434</span>&#160;  <span class="keywordflow">return</span> &amp;Sel;</div>
<div class="line"><a name="l01435"></a><span class="lineno"> 1435</span>&#160;}</div>
<div class="line"><a name="l01436"></a><span class="lineno"> 1436</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l01437"></a><span class="lineno"> 1437</span>&#160;<span class="comment">/// Visit a SelectInst that has an ICmpInst as its first operand.</span></div>
<div class="line"><a name="l01438"></a><span class="lineno"> 1438</span>&#160;<span class="comment"></span><a class="code" href="classllvm_1_1Instruction.html">Instruction</a> *<a class="code" href="classllvm_1_1InstCombinerImpl.html#a907b1696e080e08a9f4d10084e5d615a">InstCombinerImpl::foldSelectInstWithICmp</a>(<a class="code" href="classllvm_1_1SelectInst.html">SelectInst</a> &amp;<a class="code" href="PassBuilderBindings_8cpp.html#a0f79dad1efc582555a443cc11a8fa401">SI</a>,</div>
<div class="line"><a name="l01439"></a><span class="lineno"> 1439</span>&#160;                                                      <a class="code" href="classllvm_1_1ICmpInst.html">ICmpInst</a> *ICI) {</div>
<div class="line"><a name="l01440"></a><span class="lineno"> 1440</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1Instruction.html">Instruction</a> *NewSel = foldSelectValueEquivalence(<a class="code" href="PassBuilderBindings_8cpp.html#a0f79dad1efc582555a443cc11a8fa401">SI</a>, *ICI))</div>
<div class="line"><a name="l01441"></a><span class="lineno"> 1441</span>&#160;    <span class="keywordflow">return</span> NewSel;</div>
<div class="line"><a name="l01442"></a><span class="lineno"> 1442</span>&#160; </div>
<div class="line"><a name="l01443"></a><span class="lineno"> 1443</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1Instruction.html">Instruction</a> *NewSel = canonicalizeMinMaxWithConstant(<a class="code" href="PassBuilderBindings_8cpp.html#a0f79dad1efc582555a443cc11a8fa401">SI</a>, *ICI, *<span class="keyword">this</span>))</div>
<div class="line"><a name="l01444"></a><span class="lineno"> 1444</span>&#160;    <span class="keywordflow">return</span> NewSel;</div>
<div class="line"><a name="l01445"></a><span class="lineno"> 1445</span>&#160; </div>
<div class="line"><a name="l01446"></a><span class="lineno"> 1446</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1Instruction.html">Instruction</a> *NewAbs = canonicalizeAbsNabs(<a class="code" href="PassBuilderBindings_8cpp.html#a0f79dad1efc582555a443cc11a8fa401">SI</a>, *ICI, *<span class="keyword">this</span>))</div>
<div class="line"><a name="l01447"></a><span class="lineno"> 1447</span>&#160;    <span class="keywordflow">return</span> NewAbs;</div>
<div class="line"><a name="l01448"></a><span class="lineno"> 1448</span>&#160; </div>
<div class="line"><a name="l01449"></a><span class="lineno"> 1449</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1Instruction.html">Instruction</a> *NewAbs = canonicalizeClampLike(<a class="code" href="PassBuilderBindings_8cpp.html#a0f79dad1efc582555a443cc11a8fa401">SI</a>, *ICI, <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>))</div>
<div class="line"><a name="l01450"></a><span class="lineno"> 1450</span>&#160;    <span class="keywordflow">return</span> NewAbs;</div>
<div class="line"><a name="l01451"></a><span class="lineno"> 1451</span>&#160; </div>
<div class="line"><a name="l01452"></a><span class="lineno"> 1452</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1Instruction.html">Instruction</a> *NewSel =</div>
<div class="line"><a name="l01453"></a><span class="lineno"> 1453</span>&#160;          tryToReuseConstantFromSelectInComparison(<a class="code" href="PassBuilderBindings_8cpp.html#a0f79dad1efc582555a443cc11a8fa401">SI</a>, *ICI, *<span class="keyword">this</span>))</div>
<div class="line"><a name="l01454"></a><span class="lineno"> 1454</span>&#160;    <span class="keywordflow">return</span> NewSel;</div>
<div class="line"><a name="l01455"></a><span class="lineno"> 1455</span>&#160; </div>
<div class="line"><a name="l01456"></a><span class="lineno"> 1456</span>&#160;  <span class="keywordtype">bool</span> Changed = adjustMinMax(<a class="code" href="PassBuilderBindings_8cpp.html#a0f79dad1efc582555a443cc11a8fa401">SI</a>, *ICI);</div>
<div class="line"><a name="l01457"></a><span class="lineno"> 1457</span>&#160; </div>
<div class="line"><a name="l01458"></a><span class="lineno"> 1458</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1Value.html">Value</a> *V = <a class="code" href="InstCombineSelect_8cpp.html#a81f942049771fb3a626f9fa4ec5f0f25">foldSelectICmpAnd</a>(<a class="code" href="PassBuilderBindings_8cpp.html#a0f79dad1efc582555a443cc11a8fa401">SI</a>, ICI, <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>))</div>
<div class="line"><a name="l01459"></a><span class="lineno"> 1459</span>&#160;    <span class="keywordflow">return</span> replaceInstUsesWith(<a class="code" href="PassBuilderBindings_8cpp.html#a0f79dad1efc582555a443cc11a8fa401">SI</a>, V);</div>
<div class="line"><a name="l01460"></a><span class="lineno"> 1460</span>&#160; </div>
<div class="line"><a name="l01461"></a><span class="lineno"> 1461</span>&#160;  <span class="comment">// NOTE: if we wanted to, this is where to detect integer MIN/MAX</span></div>
<div class="line"><a name="l01462"></a><span class="lineno"> 1462</span>&#160;  <a class="code" href="classllvm_1_1Value.html">Value</a> *<a class="code" href="namespacellvm_1_1tgtok.html#abbc5259d649363016626e2529fabe0c5a58b95af1ca96e109f85a0646a05fceb7">TrueVal</a> = <a class="code" href="PassBuilderBindings_8cpp.html#a0f79dad1efc582555a443cc11a8fa401">SI</a>.getTrueValue();</div>
<div class="line"><a name="l01463"></a><span class="lineno"> 1463</span>&#160;  <a class="code" href="classllvm_1_1Value.html">Value</a> *<a class="code" href="namespacellvm_1_1tgtok.html#abbc5259d649363016626e2529fabe0c5aeb5a2908109c763377832cbb4726b6d4">FalseVal</a> = <a class="code" href="PassBuilderBindings_8cpp.html#a0f79dad1efc582555a443cc11a8fa401">SI</a>.getFalseValue();</div>
<div class="line"><a name="l01464"></a><span class="lineno"> 1464</span>&#160;  <a class="code" href="classllvm_1_1CmpInst.html#a2be3583dac92a031fa1458d4d992c78b">ICmpInst::Predicate</a> Pred = ICI-&gt;<a class="code" href="classllvm_1_1CmpInst.html#aa7414ba9f658ff1287d22a4b8fe81bcb">getPredicate</a>();</div>
<div class="line"><a name="l01465"></a><span class="lineno"> 1465</span>&#160;  <a class="code" href="classllvm_1_1Value.html">Value</a> *CmpLHS = ICI-&gt;<a class="code" href="classllvm_1_1User.html#abe1de1520a21f77ac57cc210bf0fb0b4">getOperand</a>(0);</div>
<div class="line"><a name="l01466"></a><span class="lineno"> 1466</span>&#160;  <a class="code" href="classllvm_1_1Value.html">Value</a> *CmpRHS = ICI-&gt;<a class="code" href="classllvm_1_1User.html#abe1de1520a21f77ac57cc210bf0fb0b4">getOperand</a>(1);</div>
<div class="line"><a name="l01467"></a><span class="lineno"> 1467</span>&#160;  <span class="keywordflow">if</span> (CmpRHS != CmpLHS &amp;&amp; isa&lt;Constant&gt;(CmpRHS)) {</div>
<div class="line"><a name="l01468"></a><span class="lineno"> 1468</span>&#160;    <span class="keywordflow">if</span> (CmpLHS == <a class="code" href="namespacellvm_1_1tgtok.html#abbc5259d649363016626e2529fabe0c5a58b95af1ca96e109f85a0646a05fceb7">TrueVal</a> &amp;&amp; Pred == <a class="code" href="classllvm_1_1CmpInst.html#a2be3583dac92a031fa1458d4d992c78baa719225e2de4059f93fd3209e1f48218">ICmpInst::ICMP_EQ</a>) {</div>
<div class="line"><a name="l01469"></a><span class="lineno"> 1469</span>&#160;      <span class="comment">// Transform (X == C) ? X : Y -&gt; (X == C) ? C : Y</span></div>
<div class="line"><a name="l01470"></a><span class="lineno"> 1470</span>&#160;      <a class="code" href="PassBuilderBindings_8cpp.html#a0f79dad1efc582555a443cc11a8fa401">SI</a>.setOperand(1, CmpRHS);</div>
<div class="line"><a name="l01471"></a><span class="lineno"> 1471</span>&#160;      Changed = <span class="keyword">true</span>;</div>
<div class="line"><a name="l01472"></a><span class="lineno"> 1472</span>&#160;    } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (CmpLHS == <a class="code" href="namespacellvm_1_1tgtok.html#abbc5259d649363016626e2529fabe0c5aeb5a2908109c763377832cbb4726b6d4">FalseVal</a> &amp;&amp; Pred == <a class="code" href="classllvm_1_1CmpInst.html#a2be3583dac92a031fa1458d4d992c78bac17897ebf2f6a6986280fc3bdf28a30a">ICmpInst::ICMP_NE</a>) {</div>
<div class="line"><a name="l01473"></a><span class="lineno"> 1473</span>&#160;      <span class="comment">// Transform (X != C) ? Y : X -&gt; (X != C) ? Y : C</span></div>
<div class="line"><a name="l01474"></a><span class="lineno"> 1474</span>&#160;      <a class="code" href="PassBuilderBindings_8cpp.html#a0f79dad1efc582555a443cc11a8fa401">SI</a>.setOperand(2, CmpRHS);</div>
<div class="line"><a name="l01475"></a><span class="lineno"> 1475</span>&#160;      Changed = <span class="keyword">true</span>;</div>
<div class="line"><a name="l01476"></a><span class="lineno"> 1476</span>&#160;    }</div>
<div class="line"><a name="l01477"></a><span class="lineno"> 1477</span>&#160;  }</div>
<div class="line"><a name="l01478"></a><span class="lineno"> 1478</span>&#160; </div>
<div class="line"><a name="l01479"></a><span class="lineno"> 1479</span>&#160;  <span class="comment">// FIXME: This code is nearly duplicated in InstSimplify. Using/refactoring</span></div>
<div class="line"><a name="l01480"></a><span class="lineno"> 1480</span>&#160;  <span class="comment">// decomposeBitTestICmp() might help.</span></div>
<div class="line"><a name="l01481"></a><span class="lineno"> 1481</span>&#160;  {</div>
<div class="line"><a name="l01482"></a><span class="lineno"> 1482</span>&#160;    <span class="keywordtype">unsigned</span> <a class="code" href="namespacellvm.html#abee0df5f7f703bb4462aba260ba0a60f">BitWidth</a> =</div>
<div class="line"><a name="l01483"></a><span class="lineno"> 1483</span>&#160;        <a class="code" href="AArch64SLSHardening_8cpp.html#ad467c4ab9119043f9b7750ab986be61a">DL</a>.getTypeSizeInBits(<a class="code" href="namespacellvm_1_1tgtok.html#abbc5259d649363016626e2529fabe0c5a58b95af1ca96e109f85a0646a05fceb7">TrueVal</a>-&gt;getType()-&gt;getScalarType());</div>
<div class="line"><a name="l01484"></a><span class="lineno"> 1484</span>&#160;    <a class="code" href="classllvm_1_1APInt.html">APInt</a> MinSignedValue = <a class="code" href="classllvm_1_1APInt.html#a8f877403433892e14ff0c692cbe9efdf">APInt::getSignedMinValue</a>(<a class="code" href="namespacellvm.html#abee0df5f7f703bb4462aba260ba0a60f">BitWidth</a>);</div>
<div class="line"><a name="l01485"></a><span class="lineno"> 1485</span>&#160;    <a class="code" href="classllvm_1_1Value.html">Value</a> *<a class="code" href="ErlangGCPrinter_8cpp.html#a74b474c0616ab55c1d9487f11fd31d26">X</a>;</div>
<div class="line"><a name="l01486"></a><span class="lineno"> 1486</span>&#160;    <span class="keyword">const</span> <a class="code" href="classllvm_1_1APInt.html">APInt</a> *<a class="code" href="OcamlGCPrinter_8cpp.html#afcf2f797ed287a723263583c9b1c1bce">Y</a>, *<a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a>;</div>
<div class="line"><a name="l01487"></a><span class="lineno"> 1487</span>&#160;    <span class="keywordtype">bool</span> TrueWhenUnset;</div>
<div class="line"><a name="l01488"></a><span class="lineno"> 1488</span>&#160;    <span class="keywordtype">bool</span> IsBitTest = <span class="keyword">false</span>;</div>
<div class="line"><a name="l01489"></a><span class="lineno"> 1489</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1ICmpInst.html#aaaeded5d0cab77f531b294638459aca5">ICmpInst::isEquality</a>(Pred) &amp;&amp;</div>
<div class="line"><a name="l01490"></a><span class="lineno"> 1490</span>&#160;        <a class="code" href="namespacellvm_1_1PatternMatch.html#a25d956d9e0beadd47ce4bc255dfa811d">match</a>(CmpLHS, <a class="code" href="namespacellvm_1_1PatternMatch.html#a427435d4da769ae680a8e77ef89520aa">m_And</a>(<a class="code" href="namespacellvm_1_1PatternMatch.html#a24bca8838396aa81b87de8e7ac774b19">m_Value</a>(<a class="code" href="ErlangGCPrinter_8cpp.html#a74b474c0616ab55c1d9487f11fd31d26">X</a>), <a class="code" href="namespacellvm_1_1PatternMatch.html#ad5e60756e331a97669d11b5c9d8691a2">m_Power2</a>(<a class="code" href="OcamlGCPrinter_8cpp.html#afcf2f797ed287a723263583c9b1c1bce">Y</a>))) &amp;&amp;</div>
<div class="line"><a name="l01491"></a><span class="lineno"> 1491</span>&#160;        <a class="code" href="namespacellvm_1_1PatternMatch.html#a25d956d9e0beadd47ce4bc255dfa811d">match</a>(CmpRHS, <a class="code" href="namespacellvm_1_1PatternMatch.html#ae77be336e228cf9aa00709a8606dfb98">m_Zero</a>())) {</div>
<div class="line"><a name="l01492"></a><span class="lineno"> 1492</span>&#160;      IsBitTest = <span class="keyword">true</span>;</div>
<div class="line"><a name="l01493"></a><span class="lineno"> 1493</span>&#160;      TrueWhenUnset = Pred == <a class="code" href="classllvm_1_1CmpInst.html#a2be3583dac92a031fa1458d4d992c78baa719225e2de4059f93fd3209e1f48218">ICmpInst::ICMP_EQ</a>;</div>
<div class="line"><a name="l01494"></a><span class="lineno"> 1494</span>&#160;    } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (Pred == <a class="code" href="classllvm_1_1CmpInst.html#a2be3583dac92a031fa1458d4d992c78ba15ae464950ac676919c2f0c7aafc706c">ICmpInst::ICMP_SLT</a> &amp;&amp; <a class="code" href="namespacellvm_1_1PatternMatch.html#a25d956d9e0beadd47ce4bc255dfa811d">match</a>(CmpRHS, <a class="code" href="namespacellvm_1_1PatternMatch.html#ae77be336e228cf9aa00709a8606dfb98">m_Zero</a>())) {</div>
<div class="line"><a name="l01495"></a><span class="lineno"> 1495</span>&#160;      <a class="code" href="ErlangGCPrinter_8cpp.html#a74b474c0616ab55c1d9487f11fd31d26">X</a> = CmpLHS;</div>
<div class="line"><a name="l01496"></a><span class="lineno"> 1496</span>&#160;      <a class="code" href="OcamlGCPrinter_8cpp.html#afcf2f797ed287a723263583c9b1c1bce">Y</a> = &amp;MinSignedValue;</div>
<div class="line"><a name="l01497"></a><span class="lineno"> 1497</span>&#160;      IsBitTest = <span class="keyword">true</span>;</div>
<div class="line"><a name="l01498"></a><span class="lineno"> 1498</span>&#160;      TrueWhenUnset = <span class="keyword">false</span>;</div>
<div class="line"><a name="l01499"></a><span class="lineno"> 1499</span>&#160;    } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (Pred == <a class="code" href="classllvm_1_1CmpInst.html#a2be3583dac92a031fa1458d4d992c78ba720a42e85f7e981afd61e28473b0000a">ICmpInst::ICMP_SGT</a> &amp;&amp; <a class="code" href="namespacellvm_1_1PatternMatch.html#a25d956d9e0beadd47ce4bc255dfa811d">match</a>(CmpRHS, <a class="code" href="namespacellvm_1_1PatternMatch.html#aaea0d5ebb8b57ddde2095f80e2e94bb2">m_AllOnes</a>())) {</div>
<div class="line"><a name="l01500"></a><span class="lineno"> 1500</span>&#160;      <a class="code" href="ErlangGCPrinter_8cpp.html#a74b474c0616ab55c1d9487f11fd31d26">X</a> = CmpLHS;</div>
<div class="line"><a name="l01501"></a><span class="lineno"> 1501</span>&#160;      <a class="code" href="OcamlGCPrinter_8cpp.html#afcf2f797ed287a723263583c9b1c1bce">Y</a> = &amp;MinSignedValue;</div>
<div class="line"><a name="l01502"></a><span class="lineno"> 1502</span>&#160;      IsBitTest = <span class="keyword">true</span>;</div>
<div class="line"><a name="l01503"></a><span class="lineno"> 1503</span>&#160;      TrueWhenUnset = <span class="keyword">true</span>;</div>
<div class="line"><a name="l01504"></a><span class="lineno"> 1504</span>&#160;    }</div>
<div class="line"><a name="l01505"></a><span class="lineno"> 1505</span>&#160;    <span class="keywordflow">if</span> (IsBitTest) {</div>
<div class="line"><a name="l01506"></a><span class="lineno"> 1506</span>&#160;      <a class="code" href="classllvm_1_1Value.html">Value</a> *V = <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l01507"></a><span class="lineno"> 1507</span>&#160;      <span class="comment">// (X &amp; Y) == 0 ? X : X ^ Y  --&gt; X &amp; ~Y</span></div>
<div class="line"><a name="l01508"></a><span class="lineno"> 1508</span>&#160;      <span class="keywordflow">if</span> (TrueWhenUnset &amp;&amp; <a class="code" href="namespacellvm_1_1tgtok.html#abbc5259d649363016626e2529fabe0c5a58b95af1ca96e109f85a0646a05fceb7">TrueVal</a> == <a class="code" href="ErlangGCPrinter_8cpp.html#a74b474c0616ab55c1d9487f11fd31d26">X</a> &amp;&amp;</div>
<div class="line"><a name="l01509"></a><span class="lineno"> 1509</span>&#160;          <a class="code" href="namespacellvm_1_1PatternMatch.html#a25d956d9e0beadd47ce4bc255dfa811d">match</a>(<a class="code" href="namespacellvm_1_1tgtok.html#abbc5259d649363016626e2529fabe0c5aeb5a2908109c763377832cbb4726b6d4">FalseVal</a>, <a class="code" href="namespacellvm_1_1PatternMatch.html#a82e2ea7f0ab67e33e22b3a2a188feaba">m_Xor</a>(<a class="code" href="namespacellvm_1_1PatternMatch.html#a2d9861feadd3a09792967a012559e7b2">m_Specific</a>(<a class="code" href="ErlangGCPrinter_8cpp.html#a74b474c0616ab55c1d9487f11fd31d26">X</a>), <a class="code" href="namespacellvm_1_1PatternMatch.html#aac9e78b3aa02ec087c4621358f506718">m_APInt</a>(<a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a>))) &amp;&amp; *<a class="code" href="OcamlGCPrinter_8cpp.html#afcf2f797ed287a723263583c9b1c1bce">Y</a> == *<a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a>)</div>
<div class="line"><a name="l01510"></a><span class="lineno"> 1510</span>&#160;        V = <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.CreateAnd(<a class="code" href="ErlangGCPrinter_8cpp.html#a74b474c0616ab55c1d9487f11fd31d26">X</a>, ~(*<a class="code" href="OcamlGCPrinter_8cpp.html#afcf2f797ed287a723263583c9b1c1bce">Y</a>));</div>
<div class="line"><a name="l01511"></a><span class="lineno"> 1511</span>&#160;      <span class="comment">// (X &amp; Y) != 0 ? X ^ Y : X  --&gt; X &amp; ~Y</span></div>
<div class="line"><a name="l01512"></a><span class="lineno"> 1512</span>&#160;      <span class="keywordflow">else</span> <span class="keywordflow">if</span> (!TrueWhenUnset &amp;&amp; <a class="code" href="namespacellvm_1_1tgtok.html#abbc5259d649363016626e2529fabe0c5aeb5a2908109c763377832cbb4726b6d4">FalseVal</a> == <a class="code" href="ErlangGCPrinter_8cpp.html#a74b474c0616ab55c1d9487f11fd31d26">X</a> &amp;&amp;</div>
<div class="line"><a name="l01513"></a><span class="lineno"> 1513</span>&#160;               <a class="code" href="namespacellvm_1_1PatternMatch.html#a25d956d9e0beadd47ce4bc255dfa811d">match</a>(<a class="code" href="namespacellvm_1_1tgtok.html#abbc5259d649363016626e2529fabe0c5a58b95af1ca96e109f85a0646a05fceb7">TrueVal</a>, <a class="code" href="namespacellvm_1_1PatternMatch.html#a82e2ea7f0ab67e33e22b3a2a188feaba">m_Xor</a>(<a class="code" href="namespacellvm_1_1PatternMatch.html#a2d9861feadd3a09792967a012559e7b2">m_Specific</a>(<a class="code" href="ErlangGCPrinter_8cpp.html#a74b474c0616ab55c1d9487f11fd31d26">X</a>), <a class="code" href="namespacellvm_1_1PatternMatch.html#aac9e78b3aa02ec087c4621358f506718">m_APInt</a>(<a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a>))) &amp;&amp; *<a class="code" href="OcamlGCPrinter_8cpp.html#afcf2f797ed287a723263583c9b1c1bce">Y</a> == *<a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a>)</div>
<div class="line"><a name="l01514"></a><span class="lineno"> 1514</span>&#160;        V = <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.CreateAnd(<a class="code" href="ErlangGCPrinter_8cpp.html#a74b474c0616ab55c1d9487f11fd31d26">X</a>, ~(*<a class="code" href="OcamlGCPrinter_8cpp.html#afcf2f797ed287a723263583c9b1c1bce">Y</a>));</div>
<div class="line"><a name="l01515"></a><span class="lineno"> 1515</span>&#160;      <span class="comment">// (X &amp; Y) == 0 ? X ^ Y : X  --&gt; X | Y</span></div>
<div class="line"><a name="l01516"></a><span class="lineno"> 1516</span>&#160;      <span class="keywordflow">else</span> <span class="keywordflow">if</span> (TrueWhenUnset &amp;&amp; <a class="code" href="namespacellvm_1_1tgtok.html#abbc5259d649363016626e2529fabe0c5aeb5a2908109c763377832cbb4726b6d4">FalseVal</a> == <a class="code" href="ErlangGCPrinter_8cpp.html#a74b474c0616ab55c1d9487f11fd31d26">X</a> &amp;&amp;</div>
<div class="line"><a name="l01517"></a><span class="lineno"> 1517</span>&#160;               <a class="code" href="namespacellvm_1_1PatternMatch.html#a25d956d9e0beadd47ce4bc255dfa811d">match</a>(<a class="code" href="namespacellvm_1_1tgtok.html#abbc5259d649363016626e2529fabe0c5a58b95af1ca96e109f85a0646a05fceb7">TrueVal</a>, <a class="code" href="namespacellvm_1_1PatternMatch.html#a82e2ea7f0ab67e33e22b3a2a188feaba">m_Xor</a>(<a class="code" href="namespacellvm_1_1PatternMatch.html#a2d9861feadd3a09792967a012559e7b2">m_Specific</a>(<a class="code" href="ErlangGCPrinter_8cpp.html#a74b474c0616ab55c1d9487f11fd31d26">X</a>), <a class="code" href="namespacellvm_1_1PatternMatch.html#aac9e78b3aa02ec087c4621358f506718">m_APInt</a>(<a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a>))) &amp;&amp; *<a class="code" href="OcamlGCPrinter_8cpp.html#afcf2f797ed287a723263583c9b1c1bce">Y</a> == *<a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a>)</div>
<div class="line"><a name="l01518"></a><span class="lineno"> 1518</span>&#160;        V = <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.CreateOr(<a class="code" href="ErlangGCPrinter_8cpp.html#a74b474c0616ab55c1d9487f11fd31d26">X</a>, *<a class="code" href="OcamlGCPrinter_8cpp.html#afcf2f797ed287a723263583c9b1c1bce">Y</a>);</div>
<div class="line"><a name="l01519"></a><span class="lineno"> 1519</span>&#160;      <span class="comment">// (X &amp; Y) != 0 ? X : X ^ Y  --&gt; X | Y</span></div>
<div class="line"><a name="l01520"></a><span class="lineno"> 1520</span>&#160;      <span class="keywordflow">else</span> <span class="keywordflow">if</span> (!TrueWhenUnset &amp;&amp; <a class="code" href="namespacellvm_1_1tgtok.html#abbc5259d649363016626e2529fabe0c5a58b95af1ca96e109f85a0646a05fceb7">TrueVal</a> == <a class="code" href="ErlangGCPrinter_8cpp.html#a74b474c0616ab55c1d9487f11fd31d26">X</a> &amp;&amp;</div>
<div class="line"><a name="l01521"></a><span class="lineno"> 1521</span>&#160;               <a class="code" href="namespacellvm_1_1PatternMatch.html#a25d956d9e0beadd47ce4bc255dfa811d">match</a>(<a class="code" href="namespacellvm_1_1tgtok.html#abbc5259d649363016626e2529fabe0c5aeb5a2908109c763377832cbb4726b6d4">FalseVal</a>, <a class="code" href="namespacellvm_1_1PatternMatch.html#a82e2ea7f0ab67e33e22b3a2a188feaba">m_Xor</a>(<a class="code" href="namespacellvm_1_1PatternMatch.html#a2d9861feadd3a09792967a012559e7b2">m_Specific</a>(<a class="code" href="ErlangGCPrinter_8cpp.html#a74b474c0616ab55c1d9487f11fd31d26">X</a>), <a class="code" href="namespacellvm_1_1PatternMatch.html#aac9e78b3aa02ec087c4621358f506718">m_APInt</a>(<a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a>))) &amp;&amp; *<a class="code" href="OcamlGCPrinter_8cpp.html#afcf2f797ed287a723263583c9b1c1bce">Y</a> == *<a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a>)</div>
<div class="line"><a name="l01522"></a><span class="lineno"> 1522</span>&#160;        V = <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.CreateOr(<a class="code" href="ErlangGCPrinter_8cpp.html#a74b474c0616ab55c1d9487f11fd31d26">X</a>, *<a class="code" href="OcamlGCPrinter_8cpp.html#afcf2f797ed287a723263583c9b1c1bce">Y</a>);</div>
<div class="line"><a name="l01523"></a><span class="lineno"> 1523</span>&#160; </div>
<div class="line"><a name="l01524"></a><span class="lineno"> 1524</span>&#160;      <span class="keywordflow">if</span> (V)</div>
<div class="line"><a name="l01525"></a><span class="lineno"> 1525</span>&#160;        <span class="keywordflow">return</span> replaceInstUsesWith(<a class="code" href="PassBuilderBindings_8cpp.html#a0f79dad1efc582555a443cc11a8fa401">SI</a>, V);</div>
<div class="line"><a name="l01526"></a><span class="lineno"> 1526</span>&#160;    }</div>
<div class="line"><a name="l01527"></a><span class="lineno"> 1527</span>&#160;  }</div>
<div class="line"><a name="l01528"></a><span class="lineno"> 1528</span>&#160; </div>
<div class="line"><a name="l01529"></a><span class="lineno"> 1529</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1Instruction.html">Instruction</a> *V =</div>
<div class="line"><a name="l01530"></a><span class="lineno"> 1530</span>&#160;          <a class="code" href="InstCombineSelect_8cpp.html#a464e0e0d56a175971fa98a2f24d1432a">foldSelectICmpAndAnd</a>(<a class="code" href="PassBuilderBindings_8cpp.html#a0f79dad1efc582555a443cc11a8fa401">SI</a>.getType(), ICI, <a class="code" href="namespacellvm_1_1tgtok.html#abbc5259d649363016626e2529fabe0c5a58b95af1ca96e109f85a0646a05fceb7">TrueVal</a>, <a class="code" href="namespacellvm_1_1tgtok.html#abbc5259d649363016626e2529fabe0c5aeb5a2908109c763377832cbb4726b6d4">FalseVal</a>, <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>))</div>
<div class="line"><a name="l01531"></a><span class="lineno"> 1531</span>&#160;    <span class="keywordflow">return</span> V;</div>
<div class="line"><a name="l01532"></a><span class="lineno"> 1532</span>&#160; </div>
<div class="line"><a name="l01533"></a><span class="lineno"> 1533</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1Instruction.html">Instruction</a> *V = foldSelectCtlzToCttz(ICI, <a class="code" href="namespacellvm_1_1tgtok.html#abbc5259d649363016626e2529fabe0c5a58b95af1ca96e109f85a0646a05fceb7">TrueVal</a>, <a class="code" href="namespacellvm_1_1tgtok.html#abbc5259d649363016626e2529fabe0c5aeb5a2908109c763377832cbb4726b6d4">FalseVal</a>, <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>))</div>
<div class="line"><a name="l01534"></a><span class="lineno"> 1534</span>&#160;    <span class="keywordflow">return</span> V;</div>
<div class="line"><a name="l01535"></a><span class="lineno"> 1535</span>&#160; </div>
<div class="line"><a name="l01536"></a><span class="lineno"> 1536</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1Value.html">Value</a> *V = <a class="code" href="InstCombineSelect_8cpp.html#ac688735a31429ba396e9252a4c49543e">foldSelectICmpAndOr</a>(ICI, <a class="code" href="namespacellvm_1_1tgtok.html#abbc5259d649363016626e2529fabe0c5a58b95af1ca96e109f85a0646a05fceb7">TrueVal</a>, <a class="code" href="namespacellvm_1_1tgtok.html#abbc5259d649363016626e2529fabe0c5aeb5a2908109c763377832cbb4726b6d4">FalseVal</a>, <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>))</div>
<div class="line"><a name="l01537"></a><span class="lineno"> 1537</span>&#160;    <span class="keywordflow">return</span> replaceInstUsesWith(<a class="code" href="PassBuilderBindings_8cpp.html#a0f79dad1efc582555a443cc11a8fa401">SI</a>, V);</div>
<div class="line"><a name="l01538"></a><span class="lineno"> 1538</span>&#160; </div>
<div class="line"><a name="l01539"></a><span class="lineno"> 1539</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1Value.html">Value</a> *V = <a class="code" href="InstCombineSelect_8cpp.html#ae1c9046639894b4a7f8177e21c97a79c">foldSelectICmpLshrAshr</a>(ICI, <a class="code" href="namespacellvm_1_1tgtok.html#abbc5259d649363016626e2529fabe0c5a58b95af1ca96e109f85a0646a05fceb7">TrueVal</a>, <a class="code" href="namespacellvm_1_1tgtok.html#abbc5259d649363016626e2529fabe0c5aeb5a2908109c763377832cbb4726b6d4">FalseVal</a>, <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>))</div>
<div class="line"><a name="l01540"></a><span class="lineno"> 1540</span>&#160;    <span class="keywordflow">return</span> replaceInstUsesWith(<a class="code" href="PassBuilderBindings_8cpp.html#a0f79dad1efc582555a443cc11a8fa401">SI</a>, V);</div>
<div class="line"><a name="l01541"></a><span class="lineno"> 1541</span>&#160; </div>
<div class="line"><a name="l01542"></a><span class="lineno"> 1542</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1Value.html">Value</a> *V = foldSelectCttzCtlz(ICI, <a class="code" href="namespacellvm_1_1tgtok.html#abbc5259d649363016626e2529fabe0c5a58b95af1ca96e109f85a0646a05fceb7">TrueVal</a>, <a class="code" href="namespacellvm_1_1tgtok.html#abbc5259d649363016626e2529fabe0c5aeb5a2908109c763377832cbb4726b6d4">FalseVal</a>, <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>))</div>
<div class="line"><a name="l01543"></a><span class="lineno"> 1543</span>&#160;    <span class="keywordflow">return</span> replaceInstUsesWith(<a class="code" href="PassBuilderBindings_8cpp.html#a0f79dad1efc582555a443cc11a8fa401">SI</a>, V);</div>
<div class="line"><a name="l01544"></a><span class="lineno"> 1544</span>&#160; </div>
<div class="line"><a name="l01545"></a><span class="lineno"> 1545</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1Value.html">Value</a> *V = <a class="code" href="InstCombineSelect_8cpp.html#ae86843953575db0d4a34ba09ca5f2c76">canonicalizeSaturatedSubtract</a>(ICI, <a class="code" href="namespacellvm_1_1tgtok.html#abbc5259d649363016626e2529fabe0c5a58b95af1ca96e109f85a0646a05fceb7">TrueVal</a>, <a class="code" href="namespacellvm_1_1tgtok.html#abbc5259d649363016626e2529fabe0c5aeb5a2908109c763377832cbb4726b6d4">FalseVal</a>, <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>))</div>
<div class="line"><a name="l01546"></a><span class="lineno"> 1546</span>&#160;    <span class="keywordflow">return</span> replaceInstUsesWith(<a class="code" href="PassBuilderBindings_8cpp.html#a0f79dad1efc582555a443cc11a8fa401">SI</a>, V);</div>
<div class="line"><a name="l01547"></a><span class="lineno"> 1547</span>&#160; </div>
<div class="line"><a name="l01548"></a><span class="lineno"> 1548</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1Value.html">Value</a> *V = <a class="code" href="InstCombineSelect_8cpp.html#a06a4ce71d0eb134807ac144ccb9f47a1">canonicalizeSaturatedAdd</a>(ICI, <a class="code" href="namespacellvm_1_1tgtok.html#abbc5259d649363016626e2529fabe0c5a58b95af1ca96e109f85a0646a05fceb7">TrueVal</a>, <a class="code" href="namespacellvm_1_1tgtok.html#abbc5259d649363016626e2529fabe0c5aeb5a2908109c763377832cbb4726b6d4">FalseVal</a>, <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>))</div>
<div class="line"><a name="l01549"></a><span class="lineno"> 1549</span>&#160;    <span class="keywordflow">return</span> replaceInstUsesWith(<a class="code" href="PassBuilderBindings_8cpp.html#a0f79dad1efc582555a443cc11a8fa401">SI</a>, V);</div>
<div class="line"><a name="l01550"></a><span class="lineno"> 1550</span>&#160; </div>
<div class="line"><a name="l01551"></a><span class="lineno"> 1551</span>&#160;  <span class="keywordflow">return</span> Changed ? &amp;<a class="code" href="PassBuilderBindings_8cpp.html#a0f79dad1efc582555a443cc11a8fa401">SI</a> : <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l01552"></a><span class="lineno"> 1552</span>&#160;}</div>
<div class="line"><a name="l01553"></a><span class="lineno"> 1553</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l01554"></a><span class="lineno"> 1554</span>&#160;<span class="comment">/// SI is a select whose condition is a PHI node (but the two may be in</span></div>
<div class="line"><a name="l01555"></a><span class="lineno"> 1555</span>&#160;<span class="comment">/// different blocks). See if the true/false values (V) are live in all of the</span></div>
<div class="line"><a name="l01556"></a><span class="lineno"> 1556</span>&#160;<span class="comment">/// predecessor blocks of the PHI. For example, cases like this can&#39;t be mapped:</span></div>
<div class="line"><a name="l01557"></a><span class="lineno"> 1557</span>&#160;<span class="comment">///</span></div>
<div class="line"><a name="l01558"></a><span class="lineno"> 1558</span>&#160;<span class="comment">///   X = phi [ C1, BB1], [C2, BB2]</span></div>
<div class="line"><a name="l01559"></a><span class="lineno"> 1559</span>&#160;<span class="comment">///   Y = add</span></div>
<div class="line"><a name="l01560"></a><span class="lineno"> 1560</span>&#160;<span class="comment">///   Z = select X, Y, 0</span></div>
<div class="line"><a name="l01561"></a><span class="lineno"> 1561</span>&#160;<span class="comment">///</span></div>
<div class="line"><a name="l01562"></a><span class="lineno"> 1562</span>&#160;<span class="comment">/// because Y is not live in BB1/BB2.</span></div>
<div class="line"><a name="l01563"></a><span class="lineno"> 1563</span>&#160;<span class="comment"></span><span class="keyword">static</span> <span class="keywordtype">bool</span> canSelectOperandBeMappingIntoPredBlock(<span class="keyword">const</span> <a class="code" href="classllvm_1_1Value.html">Value</a> *V,</div>
<div class="line"><a name="l01564"></a><span class="lineno"> 1564</span>&#160;                                                   <span class="keyword">const</span> <a class="code" href="classllvm_1_1SelectInst.html">SelectInst</a> &amp;<a class="code" href="PassBuilderBindings_8cpp.html#a0f79dad1efc582555a443cc11a8fa401">SI</a>) {</div>
<div class="line"><a name="l01565"></a><span class="lineno"> 1565</span>&#160;  <span class="comment">// If the value is a non-instruction value like a constant or argument, it</span></div>
<div class="line"><a name="l01566"></a><span class="lineno"> 1566</span>&#160;  <span class="comment">// can always be mapped.</span></div>
<div class="line"><a name="l01567"></a><span class="lineno"> 1567</span>&#160;  <span class="keyword">const</span> <a class="code" href="classllvm_1_1Instruction.html">Instruction</a> *<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a> = dyn_cast&lt;Instruction&gt;(V);</div>
<div class="line"><a name="l01568"></a><span class="lineno"> 1568</span>&#160;  <span class="keywordflow">if</span> (!<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>) <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l01569"></a><span class="lineno"> 1569</span>&#160; </div>
<div class="line"><a name="l01570"></a><span class="lineno"> 1570</span>&#160;  <span class="comment">// If V is a PHI node defined in the same block as the condition PHI, we can</span></div>
<div class="line"><a name="l01571"></a><span class="lineno"> 1571</span>&#160;  <span class="comment">// map the arguments.</span></div>
<div class="line"><a name="l01572"></a><span class="lineno"> 1572</span>&#160;  <span class="keyword">const</span> <a class="code" href="classllvm_1_1PHINode.html">PHINode</a> *CondPHI = cast&lt;PHINode&gt;(<a class="code" href="PassBuilderBindings_8cpp.html#a0f79dad1efc582555a443cc11a8fa401">SI</a>.getCondition());</div>
<div class="line"><a name="l01573"></a><span class="lineno"> 1573</span>&#160; </div>
<div class="line"><a name="l01574"></a><span class="lineno"> 1574</span>&#160;  <span class="keywordflow">if</span> (<span class="keyword">const</span> <a class="code" href="classllvm_1_1PHINode.html">PHINode</a> *VP = dyn_cast&lt;PHINode&gt;(<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>))</div>
<div class="line"><a name="l01575"></a><span class="lineno"> 1575</span>&#160;    <span class="keywordflow">if</span> (VP-&gt;getParent() == CondPHI-&gt;<a class="code" href="classllvm_1_1Instruction.html#a1a7f07aaef6a3bee130bf0e0f0536802">getParent</a>())</div>
<div class="line"><a name="l01576"></a><span class="lineno"> 1576</span>&#160;      <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l01577"></a><span class="lineno"> 1577</span>&#160; </div>
<div class="line"><a name="l01578"></a><span class="lineno"> 1578</span>&#160;  <span class="comment">// Otherwise, if the PHI and select are defined in the same block and if V is</span></div>
<div class="line"><a name="l01579"></a><span class="lineno"> 1579</span>&#160;  <span class="comment">// defined in a different block, then we can transform it.</span></div>
<div class="line"><a name="l01580"></a><span class="lineno"> 1580</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="PassBuilderBindings_8cpp.html#a0f79dad1efc582555a443cc11a8fa401">SI</a>.getParent() == CondPHI-&gt;<a class="code" href="classllvm_1_1Instruction.html#a1a7f07aaef6a3bee130bf0e0f0536802">getParent</a>() &amp;&amp;</div>
<div class="line"><a name="l01581"></a><span class="lineno"> 1581</span>&#160;      <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>-&gt;getParent() != CondPHI-&gt;<a class="code" href="classllvm_1_1Instruction.html#a1a7f07aaef6a3bee130bf0e0f0536802">getParent</a>())</div>
<div class="line"><a name="l01582"></a><span class="lineno"> 1582</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l01583"></a><span class="lineno"> 1583</span>&#160; </div>
<div class="line"><a name="l01584"></a><span class="lineno"> 1584</span>&#160;  <span class="comment">// Otherwise we have a &#39;hard&#39; case and we can&#39;t tell without doing more</span></div>
<div class="line"><a name="l01585"></a><span class="lineno"> 1585</span>&#160;  <span class="comment">// detailed dominator based analysis, punt.</span></div>
<div class="line"><a name="l01586"></a><span class="lineno"> 1586</span>&#160;  <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l01587"></a><span class="lineno"> 1587</span>&#160;}</div>
<div class="line"><a name="l01588"></a><span class="lineno"> 1588</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l01589"></a><span class="lineno"> 1589</span>&#160;<span class="comment">/// We have an SPF (e.g. a min or max) of an SPF of the form:</span></div>
<div class="line"><a name="l01590"></a><span class="lineno"> 1590</span>&#160;<span class="comment">///   SPF2(SPF1(A, B), C)</span></div>
<div class="line"><a name="l01591"></a><span class="lineno"> 1591</span>&#160;<span class="comment"></span><a class="code" href="classllvm_1_1Instruction.html">Instruction</a> *<a class="code" href="classllvm_1_1InstCombinerImpl.html#afb4c0a5459a2ce00cf77dd947e91d610">InstCombinerImpl::foldSPFofSPF</a>(<a class="code" href="classllvm_1_1Instruction.html">Instruction</a> *Inner,</div>
<div class="line"><a name="l01592"></a><span class="lineno"> 1592</span>&#160;                                            <a class="code" href="namespacellvm.html#a6bf471c1030973649c2e426afc212097">SelectPatternFlavor</a> SPF1, <a class="code" href="classllvm_1_1Value.html">Value</a> *<a class="code" href="README__ALTIVEC_8txt.html#a015846b6188ce15e08cd94c74a9df1a3">A</a>,</div>
<div class="line"><a name="l01593"></a><span class="lineno"> 1593</span>&#160;                                            <a class="code" href="classllvm_1_1Value.html">Value</a> *<a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a>, <a class="code" href="classllvm_1_1Instruction.html">Instruction</a> &amp;Outer,</div>
<div class="line"><a name="l01594"></a><span class="lineno"> 1594</span>&#160;                                            <a class="code" href="namespacellvm.html#a6bf471c1030973649c2e426afc212097">SelectPatternFlavor</a> SPF2,</div>
<div class="line"><a name="l01595"></a><span class="lineno"> 1595</span>&#160;                                            <a class="code" href="classllvm_1_1Value.html">Value</a> *<a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a>) {</div>
<div class="line"><a name="l01596"></a><span class="lineno"> 1596</span>&#160;  <span class="keywordflow">if</span> (Outer.<a class="code" href="classllvm_1_1Value.html#a6393a2d4fe7e10b28a0dcc35f881567b">getType</a>() != Inner-&gt;<a class="code" href="classllvm_1_1Value.html#a6393a2d4fe7e10b28a0dcc35f881567b">getType</a>())</div>
<div class="line"><a name="l01597"></a><span class="lineno"> 1597</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l01598"></a><span class="lineno"> 1598</span>&#160; </div>
<div class="line"><a name="l01599"></a><span class="lineno"> 1599</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a> == <a class="code" href="README__ALTIVEC_8txt.html#a015846b6188ce15e08cd94c74a9df1a3">A</a> || <a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a> == <a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a>) {</div>
<div class="line"><a name="l01600"></a><span class="lineno"> 1600</span>&#160;    <span class="comment">// MAX(MAX(A, B), B) -&gt; MAX(A, B)</span></div>
<div class="line"><a name="l01601"></a><span class="lineno"> 1601</span>&#160;    <span class="comment">// MIN(MIN(a, b), a) -&gt; MIN(a, b)</span></div>
<div class="line"><a name="l01602"></a><span class="lineno"> 1602</span>&#160;    <span class="comment">// TODO: This could be done in instsimplify.</span></div>
<div class="line"><a name="l01603"></a><span class="lineno"> 1603</span>&#160;    <span class="keywordflow">if</span> (SPF1 == SPF2 &amp;&amp; <a class="code" href="structllvm_1_1SelectPatternResult.html#a94c732c9e96c40976f0509fe0233fe7b">SelectPatternResult::isMinOrMax</a>(SPF1))</div>
<div class="line"><a name="l01604"></a><span class="lineno"> 1604</span>&#160;      <span class="keywordflow">return</span> replaceInstUsesWith(Outer, Inner);</div>
<div class="line"><a name="l01605"></a><span class="lineno"> 1605</span>&#160; </div>
<div class="line"><a name="l01606"></a><span class="lineno"> 1606</span>&#160;    <span class="comment">// MAX(MIN(a, b), a) -&gt; a</span></div>
<div class="line"><a name="l01607"></a><span class="lineno"> 1607</span>&#160;    <span class="comment">// MIN(MAX(a, b), a) -&gt; a</span></div>
<div class="line"><a name="l01608"></a><span class="lineno"> 1608</span>&#160;    <span class="comment">// TODO: This could be done in instsimplify.</span></div>
<div class="line"><a name="l01609"></a><span class="lineno"> 1609</span>&#160;    <span class="keywordflow">if</span> ((SPF1 == <a class="code" href="namespacellvm.html#a6bf471c1030973649c2e426afc212097abfed1bd97e2e6b014cbe76e02930d54b">SPF_SMIN</a> &amp;&amp; SPF2 == <a class="code" href="namespacellvm.html#a6bf471c1030973649c2e426afc212097ac8062350ff8114c3ffe79a339f2a1ece">SPF_SMAX</a>) ||</div>
<div class="line"><a name="l01610"></a><span class="lineno"> 1610</span>&#160;        (SPF1 == <a class="code" href="namespacellvm.html#a6bf471c1030973649c2e426afc212097ac8062350ff8114c3ffe79a339f2a1ece">SPF_SMAX</a> &amp;&amp; SPF2 == <a class="code" href="namespacellvm.html#a6bf471c1030973649c2e426afc212097abfed1bd97e2e6b014cbe76e02930d54b">SPF_SMIN</a>) ||</div>
<div class="line"><a name="l01611"></a><span class="lineno"> 1611</span>&#160;        (SPF1 == <a class="code" href="namespacellvm.html#a6bf471c1030973649c2e426afc212097a6afb3549f5028760be1bbf8ae7c04d73">SPF_UMIN</a> &amp;&amp; SPF2 == <a class="code" href="namespacellvm.html#a6bf471c1030973649c2e426afc212097a7d51d0dcfc2cc79738c77f8f5fa37138">SPF_UMAX</a>) ||</div>
<div class="line"><a name="l01612"></a><span class="lineno"> 1612</span>&#160;        (SPF1 == <a class="code" href="namespacellvm.html#a6bf471c1030973649c2e426afc212097a7d51d0dcfc2cc79738c77f8f5fa37138">SPF_UMAX</a> &amp;&amp; SPF2 == <a class="code" href="namespacellvm.html#a6bf471c1030973649c2e426afc212097a6afb3549f5028760be1bbf8ae7c04d73">SPF_UMIN</a>))</div>
<div class="line"><a name="l01613"></a><span class="lineno"> 1613</span>&#160;      <span class="keywordflow">return</span> replaceInstUsesWith(Outer, <a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a>);</div>
<div class="line"><a name="l01614"></a><span class="lineno"> 1614</span>&#160;  }</div>
<div class="line"><a name="l01615"></a><span class="lineno"> 1615</span>&#160; </div>
<div class="line"><a name="l01616"></a><span class="lineno"> 1616</span>&#160;  <span class="keywordflow">if</span> (SPF1 == SPF2) {</div>
<div class="line"><a name="l01617"></a><span class="lineno"> 1617</span>&#160;    <span class="keyword">const</span> <a class="code" href="classllvm_1_1APInt.html">APInt</a> *CB, *CC;</div>
<div class="line"><a name="l01618"></a><span class="lineno"> 1618</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="namespacellvm_1_1PatternMatch.html#a25d956d9e0beadd47ce4bc255dfa811d">match</a>(<a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a>, <a class="code" href="namespacellvm_1_1PatternMatch.html#aac9e78b3aa02ec087c4621358f506718">m_APInt</a>(CB)) &amp;&amp; <a class="code" href="namespacellvm_1_1PatternMatch.html#a25d956d9e0beadd47ce4bc255dfa811d">match</a>(<a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a>, <a class="code" href="namespacellvm_1_1PatternMatch.html#aac9e78b3aa02ec087c4621358f506718">m_APInt</a>(CC))) {</div>
<div class="line"><a name="l01619"></a><span class="lineno"> 1619</span>&#160;      <span class="comment">// MIN(MIN(A, 23), 97) -&gt; MIN(A, 23)</span></div>
<div class="line"><a name="l01620"></a><span class="lineno"> 1620</span>&#160;      <span class="comment">// MAX(MAX(A, 97), 23) -&gt; MAX(A, 97)</span></div>
<div class="line"><a name="l01621"></a><span class="lineno"> 1621</span>&#160;      <span class="comment">// TODO: This could be done in instsimplify.</span></div>
<div class="line"><a name="l01622"></a><span class="lineno"> 1622</span>&#160;      <span class="keywordflow">if</span> ((SPF1 == <a class="code" href="namespacellvm.html#a6bf471c1030973649c2e426afc212097a6afb3549f5028760be1bbf8ae7c04d73">SPF_UMIN</a> &amp;&amp; CB-&gt;<a class="code" href="classllvm_1_1APInt.html#aca14d9ec64ba4ab7fb2cef37c57d9ce4">ule</a>(*CC)) ||</div>
<div class="line"><a name="l01623"></a><span class="lineno"> 1623</span>&#160;          (SPF1 == <a class="code" href="namespacellvm.html#a6bf471c1030973649c2e426afc212097abfed1bd97e2e6b014cbe76e02930d54b">SPF_SMIN</a> &amp;&amp; CB-&gt;<a class="code" href="classllvm_1_1APInt.html#a7e8226e6453c8bcf7e5c06d28b1e207b">sle</a>(*CC)) ||</div>
<div class="line"><a name="l01624"></a><span class="lineno"> 1624</span>&#160;          (SPF1 == <a class="code" href="namespacellvm.html#a6bf471c1030973649c2e426afc212097a7d51d0dcfc2cc79738c77f8f5fa37138">SPF_UMAX</a> &amp;&amp; CB-&gt;<a class="code" href="classllvm_1_1APInt.html#af4b1ccc0b78f9da9f3f3944e06007f1d">uge</a>(*CC)) ||</div>
<div class="line"><a name="l01625"></a><span class="lineno"> 1625</span>&#160;          (SPF1 == <a class="code" href="namespacellvm.html#a6bf471c1030973649c2e426afc212097ac8062350ff8114c3ffe79a339f2a1ece">SPF_SMAX</a> &amp;&amp; CB-&gt;<a class="code" href="classllvm_1_1APInt.html#ae2b7d8c018c8a37fa8ea422a13bfd412">sge</a>(*CC)))</div>
<div class="line"><a name="l01626"></a><span class="lineno"> 1626</span>&#160;        <span class="keywordflow">return</span> replaceInstUsesWith(Outer, Inner);</div>
<div class="line"><a name="l01627"></a><span class="lineno"> 1627</span>&#160; </div>
<div class="line"><a name="l01628"></a><span class="lineno"> 1628</span>&#160;      <span class="comment">// MIN(MIN(A, 97), 23) -&gt; MIN(A, 23)</span></div>
<div class="line"><a name="l01629"></a><span class="lineno"> 1629</span>&#160;      <span class="comment">// MAX(MAX(A, 23), 97) -&gt; MAX(A, 97)</span></div>
<div class="line"><a name="l01630"></a><span class="lineno"> 1630</span>&#160;      <span class="keywordflow">if</span> ((SPF1 == <a class="code" href="namespacellvm.html#a6bf471c1030973649c2e426afc212097a6afb3549f5028760be1bbf8ae7c04d73">SPF_UMIN</a> &amp;&amp; CB-&gt;<a class="code" href="classllvm_1_1APInt.html#a46a7cbf3724080a5f4f4c7e7a4551e26">ugt</a>(*CC)) ||</div>
<div class="line"><a name="l01631"></a><span class="lineno"> 1631</span>&#160;          (SPF1 == <a class="code" href="namespacellvm.html#a6bf471c1030973649c2e426afc212097abfed1bd97e2e6b014cbe76e02930d54b">SPF_SMIN</a> &amp;&amp; CB-&gt;<a class="code" href="classllvm_1_1APInt.html#a3d430216d32f4363e4df154599b98055">sgt</a>(*CC)) ||</div>
<div class="line"><a name="l01632"></a><span class="lineno"> 1632</span>&#160;          (SPF1 == <a class="code" href="namespacellvm.html#a6bf471c1030973649c2e426afc212097a7d51d0dcfc2cc79738c77f8f5fa37138">SPF_UMAX</a> &amp;&amp; CB-&gt;<a class="code" href="classllvm_1_1APInt.html#a545e8d5dfa1688acea0d0e275b03682f">ult</a>(*CC)) ||</div>
<div class="line"><a name="l01633"></a><span class="lineno"> 1633</span>&#160;          (SPF1 == <a class="code" href="namespacellvm.html#a6bf471c1030973649c2e426afc212097ac8062350ff8114c3ffe79a339f2a1ece">SPF_SMAX</a> &amp;&amp; CB-&gt;<a class="code" href="classllvm_1_1APInt.html#adafa9575780f9246d1df0b7e2a619356">slt</a>(*CC))) {</div>
<div class="line"><a name="l01634"></a><span class="lineno"> 1634</span>&#160;        Outer.<a class="code" href="classllvm_1_1User.html#a1f0b9358936e3e00c42a460abbfb2868">replaceUsesOfWith</a>(Inner, <a class="code" href="README__ALTIVEC_8txt.html#a015846b6188ce15e08cd94c74a9df1a3">A</a>);</div>
<div class="line"><a name="l01635"></a><span class="lineno"> 1635</span>&#160;        <span class="keywordflow">return</span> &amp;Outer;</div>
<div class="line"><a name="l01636"></a><span class="lineno"> 1636</span>&#160;      }</div>
<div class="line"><a name="l01637"></a><span class="lineno"> 1637</span>&#160;    }</div>
<div class="line"><a name="l01638"></a><span class="lineno"> 1638</span>&#160;  }</div>
<div class="line"><a name="l01639"></a><span class="lineno"> 1639</span>&#160; </div>
<div class="line"><a name="l01640"></a><span class="lineno"> 1640</span>&#160;  <span class="comment">// max(max(A, B), min(A, B)) --&gt; max(A, B)</span></div>
<div class="line"><a name="l01641"></a><span class="lineno"> 1641</span>&#160;  <span class="comment">// min(min(A, B), max(A, B)) --&gt; min(A, B)</span></div>
<div class="line"><a name="l01642"></a><span class="lineno"> 1642</span>&#160;  <span class="comment">// TODO: This could be done in instsimplify.</span></div>
<div class="line"><a name="l01643"></a><span class="lineno"> 1643</span>&#160;  <span class="keywordflow">if</span> (SPF1 == SPF2 &amp;&amp;</div>
<div class="line"><a name="l01644"></a><span class="lineno"> 1644</span>&#160;      ((SPF1 == <a class="code" href="namespacellvm.html#a6bf471c1030973649c2e426afc212097a6afb3549f5028760be1bbf8ae7c04d73">SPF_UMIN</a> &amp;&amp; <a class="code" href="namespacellvm_1_1PatternMatch.html#a25d956d9e0beadd47ce4bc255dfa811d">match</a>(<a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a>, <a class="code" href="namespacellvm_1_1PatternMatch.html#aaa1ec19d8da987f818acfcfd9111f480">m_c_UMax</a>(<a class="code" href="namespacellvm_1_1PatternMatch.html#a2d9861feadd3a09792967a012559e7b2">m_Specific</a>(<a class="code" href="README__ALTIVEC_8txt.html#a015846b6188ce15e08cd94c74a9df1a3">A</a>), <a class="code" href="namespacellvm_1_1PatternMatch.html#a2d9861feadd3a09792967a012559e7b2">m_Specific</a>(<a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a>)))) ||</div>
<div class="line"><a name="l01645"></a><span class="lineno"> 1645</span>&#160;       (SPF1 == <a class="code" href="namespacellvm.html#a6bf471c1030973649c2e426afc212097abfed1bd97e2e6b014cbe76e02930d54b">SPF_SMIN</a> &amp;&amp; <a class="code" href="namespacellvm_1_1PatternMatch.html#a25d956d9e0beadd47ce4bc255dfa811d">match</a>(<a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a>, <a class="code" href="namespacellvm_1_1PatternMatch.html#a39ad7ce51b0add3af5ac2577d1b45c7b">m_c_SMax</a>(<a class="code" href="namespacellvm_1_1PatternMatch.html#a2d9861feadd3a09792967a012559e7b2">m_Specific</a>(<a class="code" href="README__ALTIVEC_8txt.html#a015846b6188ce15e08cd94c74a9df1a3">A</a>), <a class="code" href="namespacellvm_1_1PatternMatch.html#a2d9861feadd3a09792967a012559e7b2">m_Specific</a>(<a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a>)))) ||</div>
<div class="line"><a name="l01646"></a><span class="lineno"> 1646</span>&#160;       (SPF1 == <a class="code" href="namespacellvm.html#a6bf471c1030973649c2e426afc212097a7d51d0dcfc2cc79738c77f8f5fa37138">SPF_UMAX</a> &amp;&amp; <a class="code" href="namespacellvm_1_1PatternMatch.html#a25d956d9e0beadd47ce4bc255dfa811d">match</a>(<a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a>, <a class="code" href="namespacellvm_1_1PatternMatch.html#a858f42cd002d944befe9675788d94ba7">m_c_UMin</a>(<a class="code" href="namespacellvm_1_1PatternMatch.html#a2d9861feadd3a09792967a012559e7b2">m_Specific</a>(<a class="code" href="README__ALTIVEC_8txt.html#a015846b6188ce15e08cd94c74a9df1a3">A</a>), <a class="code" href="namespacellvm_1_1PatternMatch.html#a2d9861feadd3a09792967a012559e7b2">m_Specific</a>(<a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a>)))) ||</div>
<div class="line"><a name="l01647"></a><span class="lineno"> 1647</span>&#160;       (SPF1 == <a class="code" href="namespacellvm.html#a6bf471c1030973649c2e426afc212097ac8062350ff8114c3ffe79a339f2a1ece">SPF_SMAX</a> &amp;&amp; <a class="code" href="namespacellvm_1_1PatternMatch.html#a25d956d9e0beadd47ce4bc255dfa811d">match</a>(<a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a>, <a class="code" href="namespacellvm_1_1PatternMatch.html#afd71f5991b2fcbd948c1d74e9eb7e1ee">m_c_SMin</a>(<a class="code" href="namespacellvm_1_1PatternMatch.html#a2d9861feadd3a09792967a012559e7b2">m_Specific</a>(<a class="code" href="README__ALTIVEC_8txt.html#a015846b6188ce15e08cd94c74a9df1a3">A</a>), <a class="code" href="namespacellvm_1_1PatternMatch.html#a2d9861feadd3a09792967a012559e7b2">m_Specific</a>(<a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a>))))))</div>
<div class="line"><a name="l01648"></a><span class="lineno"> 1648</span>&#160;    <span class="keywordflow">return</span> replaceInstUsesWith(Outer, Inner);</div>
<div class="line"><a name="l01649"></a><span class="lineno"> 1649</span>&#160; </div>
<div class="line"><a name="l01650"></a><span class="lineno"> 1650</span>&#160;  <span class="comment">// ABS(ABS(X)) -&gt; ABS(X)</span></div>
<div class="line"><a name="l01651"></a><span class="lineno"> 1651</span>&#160;  <span class="comment">// NABS(NABS(X)) -&gt; NABS(X)</span></div>
<div class="line"><a name="l01652"></a><span class="lineno"> 1652</span>&#160;  <span class="comment">// TODO: This could be done in instsimplify.</span></div>
<div class="line"><a name="l01653"></a><span class="lineno"> 1653</span>&#160;  <span class="keywordflow">if</span> (SPF1 == SPF2 &amp;&amp; (SPF1 == <a class="code" href="namespacellvm.html#a6bf471c1030973649c2e426afc212097a07d293fd946951d9655259c5e9b93356">SPF_ABS</a> || SPF1 == <a class="code" href="namespacellvm.html#a6bf471c1030973649c2e426afc212097a08658871fecea100ad724bd8b1c3ae56">SPF_NABS</a>)) {</div>
<div class="line"><a name="l01654"></a><span class="lineno"> 1654</span>&#160;    <span class="keywordflow">return</span> replaceInstUsesWith(Outer, Inner);</div>
<div class="line"><a name="l01655"></a><span class="lineno"> 1655</span>&#160;  }</div>
<div class="line"><a name="l01656"></a><span class="lineno"> 1656</span>&#160; </div>
<div class="line"><a name="l01657"></a><span class="lineno"> 1657</span>&#160;  <span class="comment">// ABS(NABS(X)) -&gt; ABS(X)</span></div>
<div class="line"><a name="l01658"></a><span class="lineno"> 1658</span>&#160;  <span class="comment">// NABS(ABS(X)) -&gt; NABS(X)</span></div>
<div class="line"><a name="l01659"></a><span class="lineno"> 1659</span>&#160;  <span class="keywordflow">if</span> ((SPF1 == <a class="code" href="namespacellvm.html#a6bf471c1030973649c2e426afc212097a07d293fd946951d9655259c5e9b93356">SPF_ABS</a> &amp;&amp; SPF2 == <a class="code" href="namespacellvm.html#a6bf471c1030973649c2e426afc212097a08658871fecea100ad724bd8b1c3ae56">SPF_NABS</a>) ||</div>
<div class="line"><a name="l01660"></a><span class="lineno"> 1660</span>&#160;      (SPF1 == <a class="code" href="namespacellvm.html#a6bf471c1030973649c2e426afc212097a08658871fecea100ad724bd8b1c3ae56">SPF_NABS</a> &amp;&amp; SPF2 == <a class="code" href="namespacellvm.html#a6bf471c1030973649c2e426afc212097a07d293fd946951d9655259c5e9b93356">SPF_ABS</a>)) {</div>
<div class="line"><a name="l01661"></a><span class="lineno"> 1661</span>&#160;    <a class="code" href="classllvm_1_1SelectInst.html">SelectInst</a> *<a class="code" href="PassBuilderBindings_8cpp.html#a0f79dad1efc582555a443cc11a8fa401">SI</a> = cast&lt;SelectInst&gt;(Inner);</div>
<div class="line"><a name="l01662"></a><span class="lineno"> 1662</span>&#160;    <a class="code" href="classllvm_1_1Value.html">Value</a> *NewSI =</div>
<div class="line"><a name="l01663"></a><span class="lineno"> 1663</span>&#160;        <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.CreateSelect(<a class="code" href="PassBuilderBindings_8cpp.html#a0f79dad1efc582555a443cc11a8fa401">SI</a>-&gt;getCondition(), <a class="code" href="PassBuilderBindings_8cpp.html#a0f79dad1efc582555a443cc11a8fa401">SI</a>-&gt;getFalseValue(),</div>
<div class="line"><a name="l01664"></a><span class="lineno"> 1664</span>&#160;                             <a class="code" href="PassBuilderBindings_8cpp.html#a0f79dad1efc582555a443cc11a8fa401">SI</a>-&gt;getTrueValue(), <a class="code" href="PassBuilderBindings_8cpp.html#a0f79dad1efc582555a443cc11a8fa401">SI</a>-&gt;getName(), <a class="code" href="PassBuilderBindings_8cpp.html#a0f79dad1efc582555a443cc11a8fa401">SI</a>);</div>
<div class="line"><a name="l01665"></a><span class="lineno"> 1665</span>&#160;    <span class="keywordflow">return</span> replaceInstUsesWith(Outer, NewSI);</div>
<div class="line"><a name="l01666"></a><span class="lineno"> 1666</span>&#160;  }</div>
<div class="line"><a name="l01667"></a><span class="lineno"> 1667</span>&#160; </div>
<div class="line"><a name="l01668"></a><span class="lineno"> 1668</span>&#160;  <span class="keyword">auto</span> IsFreeOrProfitableToInvert =</div>
<div class="line"><a name="l01669"></a><span class="lineno"> 1669</span>&#160;      [&amp;](<a class="code" href="classllvm_1_1Value.html">Value</a> *V, <a class="code" href="classllvm_1_1Value.html">Value</a> *&amp;NotV, <span class="keywordtype">bool</span> &amp;ElidesXor) {</div>
<div class="line"><a name="l01670"></a><span class="lineno"> 1670</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="namespacellvm_1_1PatternMatch.html#a25d956d9e0beadd47ce4bc255dfa811d">match</a>(V, <a class="code" href="namespacellvm_1_1PatternMatch.html#ad6994fd7098916ce21d65be005666f21">m_Not</a>(<a class="code" href="namespacellvm_1_1PatternMatch.html#a24bca8838396aa81b87de8e7ac774b19">m_Value</a>(NotV)))) {</div>
<div class="line"><a name="l01671"></a><span class="lineno"> 1671</span>&#160;      <span class="comment">// If V has at most 2 uses then we can get rid of the xor operation</span></div>
<div class="line"><a name="l01672"></a><span class="lineno"> 1672</span>&#160;      <span class="comment">// entirely.</span></div>
<div class="line"><a name="l01673"></a><span class="lineno"> 1673</span>&#160;      ElidesXor |= !V-&gt;<a class="code" href="classllvm_1_1Value.html#a72fb137716cff838d389e392b9729dc9">hasNUsesOrMore</a>(3);</div>
<div class="line"><a name="l01674"></a><span class="lineno"> 1674</span>&#160;      <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l01675"></a><span class="lineno"> 1675</span>&#160;    }</div>
<div class="line"><a name="l01676"></a><span class="lineno"> 1676</span>&#160; </div>
<div class="line"><a name="l01677"></a><span class="lineno"> 1677</span>&#160;    <span class="keywordflow">if</span> (isFreeToInvert(V, !V-&gt;<a class="code" href="classllvm_1_1Value.html#a72fb137716cff838d389e392b9729dc9">hasNUsesOrMore</a>(3))) {</div>
<div class="line"><a name="l01678"></a><span class="lineno"> 1678</span>&#160;      NotV = <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l01679"></a><span class="lineno"> 1679</span>&#160;      <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l01680"></a><span class="lineno"> 1680</span>&#160;    }</div>
<div class="line"><a name="l01681"></a><span class="lineno"> 1681</span>&#160; </div>
<div class="line"><a name="l01682"></a><span class="lineno"> 1682</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l01683"></a><span class="lineno"> 1683</span>&#160;  };</div>
<div class="line"><a name="l01684"></a><span class="lineno"> 1684</span>&#160; </div>
<div class="line"><a name="l01685"></a><span class="lineno"> 1685</span>&#160;  <a class="code" href="classllvm_1_1Value.html">Value</a> *NotA, *NotB, *NotC;</div>
<div class="line"><a name="l01686"></a><span class="lineno"> 1686</span>&#160;  <span class="keywordtype">bool</span> ElidesXor = <span class="keyword">false</span>;</div>
<div class="line"><a name="l01687"></a><span class="lineno"> 1687</span>&#160; </div>
<div class="line"><a name="l01688"></a><span class="lineno"> 1688</span>&#160;  <span class="comment">// MIN(MIN(~A, ~B), ~C) == ~MAX(MAX(A, B), C)</span></div>
<div class="line"><a name="l01689"></a><span class="lineno"> 1689</span>&#160;  <span class="comment">// MIN(MAX(~A, ~B), ~C) == ~MAX(MIN(A, B), C)</span></div>
<div class="line"><a name="l01690"></a><span class="lineno"> 1690</span>&#160;  <span class="comment">// MAX(MIN(~A, ~B), ~C) == ~MIN(MAX(A, B), C)</span></div>
<div class="line"><a name="l01691"></a><span class="lineno"> 1691</span>&#160;  <span class="comment">// MAX(MAX(~A, ~B), ~C) == ~MIN(MIN(A, B), C)</span></div>
<div class="line"><a name="l01692"></a><span class="lineno"> 1692</span>&#160;  <span class="comment">//</span></div>
<div class="line"><a name="l01693"></a><span class="lineno"> 1693</span>&#160;  <span class="comment">// This transform is performance neutral if we can elide at least one xor from</span></div>
<div class="line"><a name="l01694"></a><span class="lineno"> 1694</span>&#160;  <span class="comment">// the set of three operands, since we&#39;ll be tacking on an xor at the very</span></div>
<div class="line"><a name="l01695"></a><span class="lineno"> 1695</span>&#160;  <span class="comment">// end.</span></div>
<div class="line"><a name="l01696"></a><span class="lineno"> 1696</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="structllvm_1_1SelectPatternResult.html#a94c732c9e96c40976f0509fe0233fe7b">SelectPatternResult::isMinOrMax</a>(SPF1) &amp;&amp;</div>
<div class="line"><a name="l01697"></a><span class="lineno"> 1697</span>&#160;      <a class="code" href="structllvm_1_1SelectPatternResult.html#a94c732c9e96c40976f0509fe0233fe7b">SelectPatternResult::isMinOrMax</a>(SPF2) &amp;&amp;</div>
<div class="line"><a name="l01698"></a><span class="lineno"> 1698</span>&#160;      IsFreeOrProfitableToInvert(<a class="code" href="README__ALTIVEC_8txt.html#a015846b6188ce15e08cd94c74a9df1a3">A</a>, NotA, ElidesXor) &amp;&amp;</div>
<div class="line"><a name="l01699"></a><span class="lineno"> 1699</span>&#160;      IsFreeOrProfitableToInvert(<a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a>, NotB, ElidesXor) &amp;&amp;</div>
<div class="line"><a name="l01700"></a><span class="lineno"> 1700</span>&#160;      IsFreeOrProfitableToInvert(<a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a>, NotC, ElidesXor) &amp;&amp; ElidesXor) {</div>
<div class="line"><a name="l01701"></a><span class="lineno"> 1701</span>&#160;    <span class="keywordflow">if</span> (!NotA)</div>
<div class="line"><a name="l01702"></a><span class="lineno"> 1702</span>&#160;      NotA = <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.CreateNot(<a class="code" href="README__ALTIVEC_8txt.html#a015846b6188ce15e08cd94c74a9df1a3">A</a>);</div>
<div class="line"><a name="l01703"></a><span class="lineno"> 1703</span>&#160;    <span class="keywordflow">if</span> (!NotB)</div>
<div class="line"><a name="l01704"></a><span class="lineno"> 1704</span>&#160;      NotB = <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.CreateNot(<a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a>);</div>
<div class="line"><a name="l01705"></a><span class="lineno"> 1705</span>&#160;    <span class="keywordflow">if</span> (!NotC)</div>
<div class="line"><a name="l01706"></a><span class="lineno"> 1706</span>&#160;      NotC = <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.CreateNot(<a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a>);</div>
<div class="line"><a name="l01707"></a><span class="lineno"> 1707</span>&#160; </div>
<div class="line"><a name="l01708"></a><span class="lineno"> 1708</span>&#160;    <a class="code" href="classllvm_1_1Value.html">Value</a> *NewInner = <a class="code" href="InstCombineSelect_8cpp.html#ab9bb62fe1e1120856a8ab13089124a27">createMinMax</a>(<a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>, <a class="code" href="namespacellvm.html#a6626b9250a7ec4cc54a9e8ce78bc0cc3">getInverseMinMaxFlavor</a>(SPF1), NotA,</div>
<div class="line"><a name="l01709"></a><span class="lineno"> 1709</span>&#160;                                   NotB);</div>
<div class="line"><a name="l01710"></a><span class="lineno"> 1710</span>&#160;    <a class="code" href="classllvm_1_1Value.html">Value</a> *NewOuter = <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.CreateNot(</div>
<div class="line"><a name="l01711"></a><span class="lineno"> 1711</span>&#160;        <a class="code" href="InstCombineSelect_8cpp.html#ab9bb62fe1e1120856a8ab13089124a27">createMinMax</a>(<a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>, <a class="code" href="namespacellvm.html#a6626b9250a7ec4cc54a9e8ce78bc0cc3">getInverseMinMaxFlavor</a>(SPF2), NewInner, NotC));</div>
<div class="line"><a name="l01712"></a><span class="lineno"> 1712</span>&#160;    <span class="keywordflow">return</span> replaceInstUsesWith(Outer, NewOuter);</div>
<div class="line"><a name="l01713"></a><span class="lineno"> 1713</span>&#160;  }</div>
<div class="line"><a name="l01714"></a><span class="lineno"> 1714</span>&#160; </div>
<div class="line"><a name="l01715"></a><span class="lineno"> 1715</span>&#160;  <span class="keywordflow">return</span> <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l01716"></a><span class="lineno"> 1716</span>&#160;}</div>
<div class="line"><a name="l01717"></a><span class="lineno"> 1717</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l01718"></a><span class="lineno"> 1718</span>&#160;<span class="comment">/// Turn select C, (X + Y), (X - Y) --&gt; (X + (select C, Y, (-Y))).</span></div>
<div class="line"><a name="l01719"></a><span class="lineno"> 1719</span>&#160;<span class="comment">/// This is even legal for FP.</span></div>
<div class="line"><a name="l01720"></a><span class="lineno"> 1720</span>&#160;<span class="comment"></span><span class="keyword">static</span> <a class="code" href="classllvm_1_1Instruction.html">Instruction</a> *foldAddSubSelect(<a class="code" href="classllvm_1_1SelectInst.html">SelectInst</a> &amp;<a class="code" href="PassBuilderBindings_8cpp.html#a0f79dad1efc582555a443cc11a8fa401">SI</a>,</div>
<div class="line"><a name="l01721"></a><span class="lineno"> 1721</span>&#160;                                     <a class="code" href="classllvm_1_1IRBuilder.html">InstCombiner::BuilderTy</a> &amp;<a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>) {</div>
<div class="line"><a name="l01722"></a><span class="lineno"> 1722</span>&#160;  <a class="code" href="classllvm_1_1Value.html">Value</a> *CondVal = <a class="code" href="PassBuilderBindings_8cpp.html#a0f79dad1efc582555a443cc11a8fa401">SI</a>.getCondition();</div>
<div class="line"><a name="l01723"></a><span class="lineno"> 1723</span>&#160;  <a class="code" href="classllvm_1_1Value.html">Value</a> *<a class="code" href="namespacellvm_1_1tgtok.html#abbc5259d649363016626e2529fabe0c5a58b95af1ca96e109f85a0646a05fceb7">TrueVal</a> = <a class="code" href="PassBuilderBindings_8cpp.html#a0f79dad1efc582555a443cc11a8fa401">SI</a>.getTrueValue();</div>
<div class="line"><a name="l01724"></a><span class="lineno"> 1724</span>&#160;  <a class="code" href="classllvm_1_1Value.html">Value</a> *<a class="code" href="namespacellvm_1_1tgtok.html#abbc5259d649363016626e2529fabe0c5aeb5a2908109c763377832cbb4726b6d4">FalseVal</a> = <a class="code" href="PassBuilderBindings_8cpp.html#a0f79dad1efc582555a443cc11a8fa401">SI</a>.getFalseValue();</div>
<div class="line"><a name="l01725"></a><span class="lineno"> 1725</span>&#160;  <span class="keyword">auto</span> *TI = dyn_cast&lt;Instruction&gt;(<a class="code" href="namespacellvm_1_1tgtok.html#abbc5259d649363016626e2529fabe0c5a58b95af1ca96e109f85a0646a05fceb7">TrueVal</a>);</div>
<div class="line"><a name="l01726"></a><span class="lineno"> 1726</span>&#160;  <span class="keyword">auto</span> *FI = dyn_cast&lt;Instruction&gt;(<a class="code" href="namespacellvm_1_1tgtok.html#abbc5259d649363016626e2529fabe0c5aeb5a2908109c763377832cbb4726b6d4">FalseVal</a>);</div>
<div class="line"><a name="l01727"></a><span class="lineno"> 1727</span>&#160;  <span class="keywordflow">if</span> (!TI || !FI || !TI-&gt;hasOneUse() || !FI-&gt;hasOneUse())</div>
<div class="line"><a name="l01728"></a><span class="lineno"> 1728</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l01729"></a><span class="lineno"> 1729</span>&#160; </div>
<div class="line"><a name="l01730"></a><span class="lineno"> 1730</span>&#160;  <a class="code" href="classllvm_1_1Instruction.html">Instruction</a> *AddOp = <span class="keyword">nullptr</span>, *SubOp = <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l01731"></a><span class="lineno"> 1731</span>&#160;  <span class="keywordflow">if</span> ((TI-&gt;getOpcode() == Instruction::Sub &amp;&amp;</div>
<div class="line"><a name="l01732"></a><span class="lineno"> 1732</span>&#160;       FI-&gt;getOpcode() == <a class="code" href="namespacellvm_1_1MCID.html#ab357441fcd1ea1f9b0d27c12700f6023a2b016c207343046b2bac45e69e76dcec">Instruction::Add</a>) ||</div>
<div class="line"><a name="l01733"></a><span class="lineno"> 1733</span>&#160;      (TI-&gt;getOpcode() == Instruction::FSub &amp;&amp;</div>
<div class="line"><a name="l01734"></a><span class="lineno"> 1734</span>&#160;       FI-&gt;getOpcode() == Instruction::FAdd)) {</div>
<div class="line"><a name="l01735"></a><span class="lineno"> 1735</span>&#160;    AddOp = FI;</div>
<div class="line"><a name="l01736"></a><span class="lineno"> 1736</span>&#160;    SubOp = TI;</div>
<div class="line"><a name="l01737"></a><span class="lineno"> 1737</span>&#160;  } <span class="keywordflow">else</span> <span class="keywordflow">if</span> ((FI-&gt;getOpcode() == Instruction::Sub &amp;&amp;</div>
<div class="line"><a name="l01738"></a><span class="lineno"> 1738</span>&#160;              TI-&gt;getOpcode() == <a class="code" href="namespacellvm_1_1MCID.html#ab357441fcd1ea1f9b0d27c12700f6023a2b016c207343046b2bac45e69e76dcec">Instruction::Add</a>) ||</div>
<div class="line"><a name="l01739"></a><span class="lineno"> 1739</span>&#160;             (FI-&gt;getOpcode() == Instruction::FSub &amp;&amp;</div>
<div class="line"><a name="l01740"></a><span class="lineno"> 1740</span>&#160;              TI-&gt;getOpcode() == Instruction::FAdd)) {</div>
<div class="line"><a name="l01741"></a><span class="lineno"> 1741</span>&#160;    AddOp = TI;</div>
<div class="line"><a name="l01742"></a><span class="lineno"> 1742</span>&#160;    SubOp = FI;</div>
<div class="line"><a name="l01743"></a><span class="lineno"> 1743</span>&#160;  }</div>
<div class="line"><a name="l01744"></a><span class="lineno"> 1744</span>&#160; </div>
<div class="line"><a name="l01745"></a><span class="lineno"> 1745</span>&#160;  <span class="keywordflow">if</span> (AddOp) {</div>
<div class="line"><a name="l01746"></a><span class="lineno"> 1746</span>&#160;    <a class="code" href="classllvm_1_1Value.html">Value</a> *OtherAddOp = <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l01747"></a><span class="lineno"> 1747</span>&#160;    <span class="keywordflow">if</span> (SubOp-&gt;getOperand(0) == AddOp-&gt;<a class="code" href="classllvm_1_1User.html#abe1de1520a21f77ac57cc210bf0fb0b4">getOperand</a>(0)) {</div>
<div class="line"><a name="l01748"></a><span class="lineno"> 1748</span>&#160;      OtherAddOp = AddOp-&gt;<a class="code" href="classllvm_1_1User.html#abe1de1520a21f77ac57cc210bf0fb0b4">getOperand</a>(1);</div>
<div class="line"><a name="l01749"></a><span class="lineno"> 1749</span>&#160;    } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (SubOp-&gt;getOperand(0) == AddOp-&gt;<a class="code" href="classllvm_1_1User.html#abe1de1520a21f77ac57cc210bf0fb0b4">getOperand</a>(1)) {</div>
<div class="line"><a name="l01750"></a><span class="lineno"> 1750</span>&#160;      OtherAddOp = AddOp-&gt;<a class="code" href="classllvm_1_1User.html#abe1de1520a21f77ac57cc210bf0fb0b4">getOperand</a>(0);</div>
<div class="line"><a name="l01751"></a><span class="lineno"> 1751</span>&#160;    }</div>
<div class="line"><a name="l01752"></a><span class="lineno"> 1752</span>&#160; </div>
<div class="line"><a name="l01753"></a><span class="lineno"> 1753</span>&#160;    <span class="keywordflow">if</span> (OtherAddOp) {</div>
<div class="line"><a name="l01754"></a><span class="lineno"> 1754</span>&#160;      <span class="comment">// So at this point we know we have (Y -&gt; OtherAddOp):</span></div>
<div class="line"><a name="l01755"></a><span class="lineno"> 1755</span>&#160;      <span class="comment">//        select C, (add X, Y), (sub X, Z)</span></div>
<div class="line"><a name="l01756"></a><span class="lineno"> 1756</span>&#160;      <a class="code" href="classllvm_1_1Value.html">Value</a> *NegVal; <span class="comment">// Compute -Z</span></div>
<div class="line"><a name="l01757"></a><span class="lineno"> 1757</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="PassBuilderBindings_8cpp.html#a0f79dad1efc582555a443cc11a8fa401">SI</a>.getType()-&gt;isFPOrFPVectorTy()) {</div>
<div class="line"><a name="l01758"></a><span class="lineno"> 1758</span>&#160;        NegVal = <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.CreateFNeg(SubOp-&gt;getOperand(1));</div>
<div class="line"><a name="l01759"></a><span class="lineno"> 1759</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1Instruction.html">Instruction</a> *NegInst = dyn_cast&lt;Instruction&gt;(NegVal)) {</div>
<div class="line"><a name="l01760"></a><span class="lineno"> 1760</span>&#160;          <a class="code" href="classllvm_1_1FastMathFlags.html">FastMathFlags</a> Flags = AddOp-&gt;<a class="code" href="classllvm_1_1Instruction.html#a50b85ccf7f6033b54748b17753ad2253">getFastMathFlags</a>();</div>
<div class="line"><a name="l01761"></a><span class="lineno"> 1761</span>&#160;          Flags &amp;= SubOp-&gt;getFastMathFlags();</div>
<div class="line"><a name="l01762"></a><span class="lineno"> 1762</span>&#160;          NegInst-&gt;setFastMathFlags(Flags);</div>
<div class="line"><a name="l01763"></a><span class="lineno"> 1763</span>&#160;        }</div>
<div class="line"><a name="l01764"></a><span class="lineno"> 1764</span>&#160;      } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l01765"></a><span class="lineno"> 1765</span>&#160;        NegVal = <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.CreateNeg(SubOp-&gt;getOperand(1));</div>
<div class="line"><a name="l01766"></a><span class="lineno"> 1766</span>&#160;      }</div>
<div class="line"><a name="l01767"></a><span class="lineno"> 1767</span>&#160; </div>
<div class="line"><a name="l01768"></a><span class="lineno"> 1768</span>&#160;      <a class="code" href="classllvm_1_1Value.html">Value</a> *NewTrueOp = OtherAddOp;</div>
<div class="line"><a name="l01769"></a><span class="lineno"> 1769</span>&#160;      <a class="code" href="classllvm_1_1Value.html">Value</a> *NewFalseOp = NegVal;</div>
<div class="line"><a name="l01770"></a><span class="lineno"> 1770</span>&#160;      <span class="keywordflow">if</span> (AddOp != TI)</div>
<div class="line"><a name="l01771"></a><span class="lineno"> 1771</span>&#160;        <a class="code" href="namespacestd.html#ab8424022895aee3e366fb9a32f2883cb">std::swap</a>(NewTrueOp, NewFalseOp);</div>
<div class="line"><a name="l01772"></a><span class="lineno"> 1772</span>&#160;      <a class="code" href="classllvm_1_1Value.html">Value</a> *NewSel = <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.CreateSelect(CondVal, NewTrueOp, NewFalseOp,</div>
<div class="line"><a name="l01773"></a><span class="lineno"> 1773</span>&#160;                                           <a class="code" href="PassBuilderBindings_8cpp.html#a0f79dad1efc582555a443cc11a8fa401">SI</a>.getName() + <span class="stringliteral">&quot;.p&quot;</span>, &amp;<a class="code" href="PassBuilderBindings_8cpp.html#a0f79dad1efc582555a443cc11a8fa401">SI</a>);</div>
<div class="line"><a name="l01774"></a><span class="lineno"> 1774</span>&#160; </div>
<div class="line"><a name="l01775"></a><span class="lineno"> 1775</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="PassBuilderBindings_8cpp.html#a0f79dad1efc582555a443cc11a8fa401">SI</a>.getType()-&gt;isFPOrFPVectorTy()) {</div>
<div class="line"><a name="l01776"></a><span class="lineno"> 1776</span>&#160;        <a class="code" href="classllvm_1_1Instruction.html">Instruction</a> *RI =</div>
<div class="line"><a name="l01777"></a><span class="lineno"> 1777</span>&#160;            BinaryOperator::CreateFAdd(SubOp-&gt;getOperand(0), NewSel);</div>
<div class="line"><a name="l01778"></a><span class="lineno"> 1778</span>&#160; </div>
<div class="line"><a name="l01779"></a><span class="lineno"> 1779</span>&#160;        <a class="code" href="classllvm_1_1FastMathFlags.html">FastMathFlags</a> Flags = AddOp-&gt;<a class="code" href="classllvm_1_1Instruction.html#a50b85ccf7f6033b54748b17753ad2253">getFastMathFlags</a>();</div>
<div class="line"><a name="l01780"></a><span class="lineno"> 1780</span>&#160;        Flags &amp;= SubOp-&gt;getFastMathFlags();</div>
<div class="line"><a name="l01781"></a><span class="lineno"> 1781</span>&#160;        RI-&gt;<a class="code" href="classllvm_1_1Instruction.html#a5ca8aa62fa8b3fe5bc0e8fbe5d8b8b7a">setFastMathFlags</a>(Flags);</div>
<div class="line"><a name="l01782"></a><span class="lineno"> 1782</span>&#160;        <span class="keywordflow">return</span> RI;</div>
<div class="line"><a name="l01783"></a><span class="lineno"> 1783</span>&#160;      } <span class="keywordflow">else</span></div>
<div class="line"><a name="l01784"></a><span class="lineno"> 1784</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="Reassociate_8cpp.html#a680ae08c1b9b93cebdd6cbb726fe8f3d">BinaryOperator::CreateAdd</a>(SubOp-&gt;getOperand(0), NewSel);</div>
<div class="line"><a name="l01785"></a><span class="lineno"> 1785</span>&#160;    }</div>
<div class="line"><a name="l01786"></a><span class="lineno"> 1786</span>&#160;  }</div>
<div class="line"><a name="l01787"></a><span class="lineno"> 1787</span>&#160;  <span class="keywordflow">return</span> <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l01788"></a><span class="lineno"> 1788</span>&#160;}</div>
<div class="line"><a name="l01789"></a><span class="lineno"> 1789</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l01790"></a><span class="lineno"> 1790</span>&#160;<span class="comment">/// Turn X + Y overflows ? -1 : X + Y -&gt; uadd_sat X, Y</span></div>
<div class="line"><a name="l01791"></a><span class="lineno"> 1791</span>&#160;<span class="comment">/// And X - Y overflows ? 0 : X - Y -&gt; usub_sat X, Y</span></div>
<div class="line"><a name="l01792"></a><span class="lineno"> 1792</span>&#160;<span class="comment">/// Along with a number of patterns similar to:</span></div>
<div class="line"><a name="l01793"></a><span class="lineno"> 1793</span>&#160;<span class="comment">/// X + Y overflows ? (X &lt; 0 ? INTMIN : INTMAX) : X + Y --&gt; sadd_sat X, Y</span></div>
<div class="line"><a name="l01794"></a><span class="lineno"> 1794</span>&#160;<span class="comment">/// X - Y overflows ? (X &gt; 0 ? INTMAX : INTMIN) : X - Y --&gt; ssub_sat X, Y</span></div>
<div class="line"><a name="l01795"></a><span class="lineno"> 1795</span>&#160;<span class="comment"></span><span class="keyword">static</span> <a class="code" href="classllvm_1_1Instruction.html">Instruction</a> *</div>
<div class="line"><a name="l01796"></a><span class="lineno"> 1796</span>&#160;foldOverflowingAddSubSelect(<a class="code" href="classllvm_1_1SelectInst.html">SelectInst</a> &amp;<a class="code" href="PassBuilderBindings_8cpp.html#a0f79dad1efc582555a443cc11a8fa401">SI</a>, <a class="code" href="classllvm_1_1IRBuilder.html">InstCombiner::BuilderTy</a> &amp;<a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>) {</div>
<div class="line"><a name="l01797"></a><span class="lineno"> 1797</span>&#160;  <a class="code" href="classllvm_1_1Value.html">Value</a> *CondVal = <a class="code" href="PassBuilderBindings_8cpp.html#a0f79dad1efc582555a443cc11a8fa401">SI</a>.getCondition();</div>
<div class="line"><a name="l01798"></a><span class="lineno"> 1798</span>&#160;  <a class="code" href="classllvm_1_1Value.html">Value</a> *<a class="code" href="namespacellvm_1_1tgtok.html#abbc5259d649363016626e2529fabe0c5a58b95af1ca96e109f85a0646a05fceb7">TrueVal</a> = <a class="code" href="PassBuilderBindings_8cpp.html#a0f79dad1efc582555a443cc11a8fa401">SI</a>.getTrueValue();</div>
<div class="line"><a name="l01799"></a><span class="lineno"> 1799</span>&#160;  <a class="code" href="classllvm_1_1Value.html">Value</a> *<a class="code" href="namespacellvm_1_1tgtok.html#abbc5259d649363016626e2529fabe0c5aeb5a2908109c763377832cbb4726b6d4">FalseVal</a> = <a class="code" href="PassBuilderBindings_8cpp.html#a0f79dad1efc582555a443cc11a8fa401">SI</a>.getFalseValue();</div>
<div class="line"><a name="l01800"></a><span class="lineno"> 1800</span>&#160; </div>
<div class="line"><a name="l01801"></a><span class="lineno"> 1801</span>&#160;  <a class="code" href="classllvm_1_1WithOverflowInst.html">WithOverflowInst</a> *II;</div>
<div class="line"><a name="l01802"></a><span class="lineno"> 1802</span>&#160;  <span class="keywordflow">if</span> (!<a class="code" href="namespacellvm_1_1PatternMatch.html#a25d956d9e0beadd47ce4bc255dfa811d">match</a>(CondVal, m_ExtractValue&lt;1&gt;(<a class="code" href="namespacellvm_1_1PatternMatch.html#adc96aac34b80bf17222592bce8f95079">m_WithOverflowInst</a>(II))) ||</div>
<div class="line"><a name="l01803"></a><span class="lineno"> 1803</span>&#160;      !<a class="code" href="namespacellvm_1_1PatternMatch.html#a25d956d9e0beadd47ce4bc255dfa811d">match</a>(<a class="code" href="namespacellvm_1_1tgtok.html#abbc5259d649363016626e2529fabe0c5aeb5a2908109c763377832cbb4726b6d4">FalseVal</a>, m_ExtractValue&lt;0&gt;(<a class="code" href="namespacellvm_1_1PatternMatch.html#a2d9861feadd3a09792967a012559e7b2">m_Specific</a>(II))))</div>
<div class="line"><a name="l01804"></a><span class="lineno"> 1804</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l01805"></a><span class="lineno"> 1805</span>&#160; </div>
<div class="line"><a name="l01806"></a><span class="lineno"> 1806</span>&#160;  <a class="code" href="classllvm_1_1Value.html">Value</a> *<a class="code" href="ErlangGCPrinter_8cpp.html#a74b474c0616ab55c1d9487f11fd31d26">X</a> = II-&gt;<a class="code" href="classllvm_1_1BinaryOpIntrinsic.html#a8818b44063f9f3339d4ced72bd76b107">getLHS</a>();</div>
<div class="line"><a name="l01807"></a><span class="lineno"> 1807</span>&#160;  <a class="code" href="classllvm_1_1Value.html">Value</a> *<a class="code" href="OcamlGCPrinter_8cpp.html#afcf2f797ed287a723263583c9b1c1bce">Y</a> = II-&gt;<a class="code" href="classllvm_1_1BinaryOpIntrinsic.html#a6822c506d77c8ba56e85bee5cd1ed01b">getRHS</a>();</div>
<div class="line"><a name="l01808"></a><span class="lineno"> 1808</span>&#160; </div>
<div class="line"><a name="l01809"></a><span class="lineno"> 1809</span>&#160;  <span class="keyword">auto</span> IsSignedSaturateLimit = [&amp;](<a class="code" href="classllvm_1_1Value.html">Value</a> *Limit, <span class="keywordtype">bool</span> IsAdd) {</div>
<div class="line"><a name="l01810"></a><span class="lineno"> 1810</span>&#160;    <a class="code" href="classllvm_1_1Type.html">Type</a> *Ty = Limit-&gt;<a class="code" href="classllvm_1_1Value.html#a6393a2d4fe7e10b28a0dcc35f881567b">getType</a>();</div>
<div class="line"><a name="l01811"></a><span class="lineno"> 1811</span>&#160; </div>
<div class="line"><a name="l01812"></a><span class="lineno"> 1812</span>&#160;    <a class="code" href="classllvm_1_1CmpInst.html#a2be3583dac92a031fa1458d4d992c78b">ICmpInst::Predicate</a> Pred;</div>
<div class="line"><a name="l01813"></a><span class="lineno"> 1813</span>&#160;    <a class="code" href="classllvm_1_1Value.html">Value</a> *<a class="code" href="namespacellvm_1_1tgtok.html#abbc5259d649363016626e2529fabe0c5a58b95af1ca96e109f85a0646a05fceb7">TrueVal</a>, *<a class="code" href="namespacellvm_1_1tgtok.html#abbc5259d649363016626e2529fabe0c5aeb5a2908109c763377832cbb4726b6d4">FalseVal</a>, *<a class="code" href="namespacellvm_1_1AMDGPU_1_1SendMsg.html#a8594419a4ddfad2c9a79279c490e466d">Op</a>;</div>
<div class="line"><a name="l01814"></a><span class="lineno"> 1814</span>&#160;    <span class="keyword">const</span> <a class="code" href="classllvm_1_1APInt.html">APInt</a> *<a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a>;</div>
<div class="line"><a name="l01815"></a><span class="lineno"> 1815</span>&#160;    <span class="keywordflow">if</span> (!<a class="code" href="namespacellvm_1_1PatternMatch.html#a25d956d9e0beadd47ce4bc255dfa811d">match</a>(Limit, <a class="code" href="namespacellvm_1_1PatternMatch.html#addb87fe3f509b7803d3f5933ee24b560">m_Select</a>(<a class="code" href="namespacellvm_1_1PatternMatch.html#a3fe9b3ddb71b9fb53d9fc74b3a0710bf">m_ICmp</a>(Pred, <a class="code" href="namespacellvm_1_1PatternMatch.html#a24bca8838396aa81b87de8e7ac774b19">m_Value</a>(<a class="code" href="namespacellvm_1_1AMDGPU_1_1SendMsg.html#a8594419a4ddfad2c9a79279c490e466d">Op</a>), <a class="code" href="namespacellvm_1_1PatternMatch.html#aac9e78b3aa02ec087c4621358f506718">m_APInt</a>(<a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a>)),</div>
<div class="line"><a name="l01816"></a><span class="lineno"> 1816</span>&#160;                               <a class="code" href="namespacellvm_1_1PatternMatch.html#a24bca8838396aa81b87de8e7ac774b19">m_Value</a>(<a class="code" href="namespacellvm_1_1tgtok.html#abbc5259d649363016626e2529fabe0c5a58b95af1ca96e109f85a0646a05fceb7">TrueVal</a>), <a class="code" href="namespacellvm_1_1PatternMatch.html#a24bca8838396aa81b87de8e7ac774b19">m_Value</a>(<a class="code" href="namespacellvm_1_1tgtok.html#abbc5259d649363016626e2529fabe0c5aeb5a2908109c763377832cbb4726b6d4">FalseVal</a>))))</div>
<div class="line"><a name="l01817"></a><span class="lineno"> 1817</span>&#160;      <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l01818"></a><span class="lineno"> 1818</span>&#160; </div>
<div class="line"><a name="l01819"></a><span class="lineno"> 1819</span>&#160;    <span class="keyword">auto</span> IsZeroOrOne = [](<span class="keyword">const</span> <a class="code" href="classllvm_1_1APInt.html">APInt</a> &amp;<a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a>) {</div>
<div class="line"><a name="l01820"></a><span class="lineno"> 1820</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a>.isNullValue() || <a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a>.isOneValue();</div>
<div class="line"><a name="l01821"></a><span class="lineno"> 1821</span>&#160;    };</div>
<div class="line"><a name="l01822"></a><span class="lineno"> 1822</span>&#160;    <span class="keyword">auto</span> IsMinMax = [&amp;](<a class="code" href="classllvm_1_1Value.html">Value</a> *Min, <a class="code" href="classllvm_1_1Value.html">Value</a> *<a class="code" href="namespacellvm_1_1pdb.html#a81a0fae24e6bdfe240da4249a8da5978a35ea4c99f863ce15ab2ba69d09942e0a">Max</a>) {</div>
<div class="line"><a name="l01823"></a><span class="lineno"> 1823</span>&#160;      <a class="code" href="classllvm_1_1APInt.html">APInt</a> MinVal = <a class="code" href="classllvm_1_1APInt.html#a8f877403433892e14ff0c692cbe9efdf">APInt::getSignedMinValue</a>(Ty-&gt;<a class="code" href="classllvm_1_1Type.html#a9f382207d841377156d4c7868b66b9a5">getScalarSizeInBits</a>());</div>
<div class="line"><a name="l01824"></a><span class="lineno"> 1824</span>&#160;      <a class="code" href="classllvm_1_1APInt.html">APInt</a> MaxVal = <a class="code" href="classllvm_1_1APInt.html#a562c9513409b74f02cb3a5c9bae672ea">APInt::getSignedMaxValue</a>(Ty-&gt;<a class="code" href="classllvm_1_1Type.html#a9f382207d841377156d4c7868b66b9a5">getScalarSizeInBits</a>());</div>
<div class="line"><a name="l01825"></a><span class="lineno"> 1825</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="namespacellvm_1_1PatternMatch.html#a25d956d9e0beadd47ce4bc255dfa811d">match</a>(Min, <a class="code" href="namespacellvm_1_1PatternMatch.html#a3acbd0be97863e3e03e3b85641254018">m_SpecificInt</a>(MinVal)) &amp;&amp;</div>
<div class="line"><a name="l01826"></a><span class="lineno"> 1826</span>&#160;             <a class="code" href="namespacellvm_1_1PatternMatch.html#a25d956d9e0beadd47ce4bc255dfa811d">match</a>(Max, <a class="code" href="namespacellvm_1_1PatternMatch.html#a3acbd0be97863e3e03e3b85641254018">m_SpecificInt</a>(MaxVal));</div>
<div class="line"><a name="l01827"></a><span class="lineno"> 1827</span>&#160;    };</div>
<div class="line"><a name="l01828"></a><span class="lineno"> 1828</span>&#160; </div>
<div class="line"><a name="l01829"></a><span class="lineno"> 1829</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="namespacellvm_1_1AMDGPU_1_1SendMsg.html#a8594419a4ddfad2c9a79279c490e466d">Op</a> != <a class="code" href="ErlangGCPrinter_8cpp.html#a74b474c0616ab55c1d9487f11fd31d26">X</a> &amp;&amp; <a class="code" href="namespacellvm_1_1AMDGPU_1_1SendMsg.html#a8594419a4ddfad2c9a79279c490e466d">Op</a> != <a class="code" href="OcamlGCPrinter_8cpp.html#afcf2f797ed287a723263583c9b1c1bce">Y</a>)</div>
<div class="line"><a name="l01830"></a><span class="lineno"> 1830</span>&#160;      <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l01831"></a><span class="lineno"> 1831</span>&#160; </div>
<div class="line"><a name="l01832"></a><span class="lineno"> 1832</span>&#160;    <span class="keywordflow">if</span> (IsAdd) {</div>
<div class="line"><a name="l01833"></a><span class="lineno"> 1833</span>&#160;      <span class="comment">// X + Y overflows ? (X &lt;s 0 ? INTMIN : INTMAX) : X + Y --&gt; sadd_sat X, Y</span></div>
<div class="line"><a name="l01834"></a><span class="lineno"> 1834</span>&#160;      <span class="comment">// X + Y overflows ? (X &lt;s 1 ? INTMIN : INTMAX) : X + Y --&gt; sadd_sat X, Y</span></div>
<div class="line"><a name="l01835"></a><span class="lineno"> 1835</span>&#160;      <span class="comment">// X + Y overflows ? (Y &lt;s 0 ? INTMIN : INTMAX) : X + Y --&gt; sadd_sat X, Y</span></div>
<div class="line"><a name="l01836"></a><span class="lineno"> 1836</span>&#160;      <span class="comment">// X + Y overflows ? (Y &lt;s 1 ? INTMIN : INTMAX) : X + Y --&gt; sadd_sat X, Y</span></div>
<div class="line"><a name="l01837"></a><span class="lineno"> 1837</span>&#160;      <span class="keywordflow">if</span> (Pred == <a class="code" href="classllvm_1_1CmpInst.html#a2be3583dac92a031fa1458d4d992c78ba15ae464950ac676919c2f0c7aafc706c">ICmpInst::ICMP_SLT</a> &amp;&amp; IsZeroOrOne(*<a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a>) &amp;&amp;</div>
<div class="line"><a name="l01838"></a><span class="lineno"> 1838</span>&#160;          IsMinMax(<a class="code" href="namespacellvm_1_1tgtok.html#abbc5259d649363016626e2529fabe0c5a58b95af1ca96e109f85a0646a05fceb7">TrueVal</a>, <a class="code" href="namespacellvm_1_1tgtok.html#abbc5259d649363016626e2529fabe0c5aeb5a2908109c763377832cbb4726b6d4">FalseVal</a>))</div>
<div class="line"><a name="l01839"></a><span class="lineno"> 1839</span>&#160;        <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l01840"></a><span class="lineno"> 1840</span>&#160;      <span class="comment">// X + Y overflows ? (X &gt;s 0 ? INTMAX : INTMIN) : X + Y --&gt; sadd_sat X, Y</span></div>
<div class="line"><a name="l01841"></a><span class="lineno"> 1841</span>&#160;      <span class="comment">// X + Y overflows ? (X &gt;s -1 ? INTMAX : INTMIN) : X + Y --&gt; sadd_sat X, Y</span></div>
<div class="line"><a name="l01842"></a><span class="lineno"> 1842</span>&#160;      <span class="comment">// X + Y overflows ? (Y &gt;s 0 ? INTMAX : INTMIN) : X + Y --&gt; sadd_sat X, Y</span></div>
<div class="line"><a name="l01843"></a><span class="lineno"> 1843</span>&#160;      <span class="comment">// X + Y overflows ? (Y &gt;s -1 ? INTMAX : INTMIN) : X + Y --&gt; sadd_sat X, Y</span></div>
<div class="line"><a name="l01844"></a><span class="lineno"> 1844</span>&#160;      <span class="keywordflow">if</span> (Pred == <a class="code" href="classllvm_1_1CmpInst.html#a2be3583dac92a031fa1458d4d992c78ba720a42e85f7e981afd61e28473b0000a">ICmpInst::ICMP_SGT</a> &amp;&amp; IsZeroOrOne(*<a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a> + 1) &amp;&amp;</div>
<div class="line"><a name="l01845"></a><span class="lineno"> 1845</span>&#160;          IsMinMax(<a class="code" href="namespacellvm_1_1tgtok.html#abbc5259d649363016626e2529fabe0c5aeb5a2908109c763377832cbb4726b6d4">FalseVal</a>, <a class="code" href="namespacellvm_1_1tgtok.html#abbc5259d649363016626e2529fabe0c5a58b95af1ca96e109f85a0646a05fceb7">TrueVal</a>))</div>
<div class="line"><a name="l01846"></a><span class="lineno"> 1846</span>&#160;        <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l01847"></a><span class="lineno"> 1847</span>&#160;    } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l01848"></a><span class="lineno"> 1848</span>&#160;      <span class="comment">// X - Y overflows ? (X &lt;s 0 ? INTMIN : INTMAX) : X - Y --&gt; ssub_sat X, Y</span></div>
<div class="line"><a name="l01849"></a><span class="lineno"> 1849</span>&#160;      <span class="comment">// X - Y overflows ? (X &lt;s -1 ? INTMIN : INTMAX) : X - Y --&gt; ssub_sat X, Y</span></div>
<div class="line"><a name="l01850"></a><span class="lineno"> 1850</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="namespacellvm_1_1AMDGPU_1_1SendMsg.html#a8594419a4ddfad2c9a79279c490e466d">Op</a> == <a class="code" href="ErlangGCPrinter_8cpp.html#a74b474c0616ab55c1d9487f11fd31d26">X</a> &amp;&amp; Pred == <a class="code" href="classllvm_1_1CmpInst.html#a2be3583dac92a031fa1458d4d992c78ba15ae464950ac676919c2f0c7aafc706c">ICmpInst::ICMP_SLT</a> &amp;&amp; IsZeroOrOne(*<a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a> + 1) &amp;&amp;</div>
<div class="line"><a name="l01851"></a><span class="lineno"> 1851</span>&#160;          IsMinMax(<a class="code" href="namespacellvm_1_1tgtok.html#abbc5259d649363016626e2529fabe0c5a58b95af1ca96e109f85a0646a05fceb7">TrueVal</a>, <a class="code" href="namespacellvm_1_1tgtok.html#abbc5259d649363016626e2529fabe0c5aeb5a2908109c763377832cbb4726b6d4">FalseVal</a>))</div>
<div class="line"><a name="l01852"></a><span class="lineno"> 1852</span>&#160;        <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l01853"></a><span class="lineno"> 1853</span>&#160;      <span class="comment">// X - Y overflows ? (X &gt;s -1 ? INTMAX : INTMIN) : X - Y --&gt; ssub_sat X, Y</span></div>
<div class="line"><a name="l01854"></a><span class="lineno"> 1854</span>&#160;      <span class="comment">// X - Y overflows ? (X &gt;s -2 ? INTMAX : INTMIN) : X - Y --&gt; ssub_sat X, Y</span></div>
<div class="line"><a name="l01855"></a><span class="lineno"> 1855</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="namespacellvm_1_1AMDGPU_1_1SendMsg.html#a8594419a4ddfad2c9a79279c490e466d">Op</a> == <a class="code" href="ErlangGCPrinter_8cpp.html#a74b474c0616ab55c1d9487f11fd31d26">X</a> &amp;&amp; Pred == <a class="code" href="classllvm_1_1CmpInst.html#a2be3583dac92a031fa1458d4d992c78ba720a42e85f7e981afd61e28473b0000a">ICmpInst::ICMP_SGT</a> &amp;&amp; IsZeroOrOne(*<a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a> + 2) &amp;&amp;</div>
<div class="line"><a name="l01856"></a><span class="lineno"> 1856</span>&#160;          IsMinMax(<a class="code" href="namespacellvm_1_1tgtok.html#abbc5259d649363016626e2529fabe0c5aeb5a2908109c763377832cbb4726b6d4">FalseVal</a>, <a class="code" href="namespacellvm_1_1tgtok.html#abbc5259d649363016626e2529fabe0c5a58b95af1ca96e109f85a0646a05fceb7">TrueVal</a>))</div>
<div class="line"><a name="l01857"></a><span class="lineno"> 1857</span>&#160;        <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l01858"></a><span class="lineno"> 1858</span>&#160;      <span class="comment">// X - Y overflows ? (Y &lt;s 0 ? INTMAX : INTMIN) : X - Y --&gt; ssub_sat X, Y</span></div>
<div class="line"><a name="l01859"></a><span class="lineno"> 1859</span>&#160;      <span class="comment">// X - Y overflows ? (Y &lt;s 1 ? INTMAX : INTMIN) : X - Y --&gt; ssub_sat X, Y</span></div>
<div class="line"><a name="l01860"></a><span class="lineno"> 1860</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="namespacellvm_1_1AMDGPU_1_1SendMsg.html#a8594419a4ddfad2c9a79279c490e466d">Op</a> == <a class="code" href="OcamlGCPrinter_8cpp.html#afcf2f797ed287a723263583c9b1c1bce">Y</a> &amp;&amp; Pred == <a class="code" href="classllvm_1_1CmpInst.html#a2be3583dac92a031fa1458d4d992c78ba15ae464950ac676919c2f0c7aafc706c">ICmpInst::ICMP_SLT</a> &amp;&amp; IsZeroOrOne(*<a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a>) &amp;&amp;</div>
<div class="line"><a name="l01861"></a><span class="lineno"> 1861</span>&#160;          IsMinMax(<a class="code" href="namespacellvm_1_1tgtok.html#abbc5259d649363016626e2529fabe0c5aeb5a2908109c763377832cbb4726b6d4">FalseVal</a>, <a class="code" href="namespacellvm_1_1tgtok.html#abbc5259d649363016626e2529fabe0c5a58b95af1ca96e109f85a0646a05fceb7">TrueVal</a>))</div>
<div class="line"><a name="l01862"></a><span class="lineno"> 1862</span>&#160;        <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l01863"></a><span class="lineno"> 1863</span>&#160;      <span class="comment">// X - Y overflows ? (Y &gt;s 0 ? INTMIN : INTMAX) : X - Y --&gt; ssub_sat X, Y</span></div>
<div class="line"><a name="l01864"></a><span class="lineno"> 1864</span>&#160;      <span class="comment">// X - Y overflows ? (Y &gt;s -1 ? INTMIN : INTMAX) : X - Y --&gt; ssub_sat X, Y</span></div>
<div class="line"><a name="l01865"></a><span class="lineno"> 1865</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="namespacellvm_1_1AMDGPU_1_1SendMsg.html#a8594419a4ddfad2c9a79279c490e466d">Op</a> == <a class="code" href="OcamlGCPrinter_8cpp.html#afcf2f797ed287a723263583c9b1c1bce">Y</a> &amp;&amp; Pred == <a class="code" href="classllvm_1_1CmpInst.html#a2be3583dac92a031fa1458d4d992c78ba720a42e85f7e981afd61e28473b0000a">ICmpInst::ICMP_SGT</a> &amp;&amp; IsZeroOrOne(*<a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a> + 1) &amp;&amp;</div>
<div class="line"><a name="l01866"></a><span class="lineno"> 1866</span>&#160;          IsMinMax(<a class="code" href="namespacellvm_1_1tgtok.html#abbc5259d649363016626e2529fabe0c5a58b95af1ca96e109f85a0646a05fceb7">TrueVal</a>, <a class="code" href="namespacellvm_1_1tgtok.html#abbc5259d649363016626e2529fabe0c5aeb5a2908109c763377832cbb4726b6d4">FalseVal</a>))</div>
<div class="line"><a name="l01867"></a><span class="lineno"> 1867</span>&#160;        <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l01868"></a><span class="lineno"> 1868</span>&#160;    }</div>
<div class="line"><a name="l01869"></a><span class="lineno"> 1869</span>&#160; </div>
<div class="line"><a name="l01870"></a><span class="lineno"> 1870</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l01871"></a><span class="lineno"> 1871</span>&#160;  };</div>
<div class="line"><a name="l01872"></a><span class="lineno"> 1872</span>&#160; </div>
<div class="line"><a name="l01873"></a><span class="lineno"> 1873</span>&#160;  <a class="code" href="namespacellvm_1_1Intrinsic.html#a80add6b3b1cdaec560907995127adc16">Intrinsic::ID</a> NewIntrinsicID;</div>
<div class="line"><a name="l01874"></a><span class="lineno"> 1874</span>&#160;  <span class="keywordflow">if</span> (II-&gt;<a class="code" href="classllvm_1_1IntrinsicInst.html#a7ff64b3625b6f9020556ed05a5f72af4">getIntrinsicID</a>() == Intrinsic::uadd_with_overflow &amp;&amp;</div>
<div class="line"><a name="l01875"></a><span class="lineno"> 1875</span>&#160;      <a class="code" href="namespacellvm_1_1PatternMatch.html#a25d956d9e0beadd47ce4bc255dfa811d">match</a>(<a class="code" href="namespacellvm_1_1tgtok.html#abbc5259d649363016626e2529fabe0c5a58b95af1ca96e109f85a0646a05fceb7">TrueVal</a>, <a class="code" href="namespacellvm_1_1PatternMatch.html#aaea0d5ebb8b57ddde2095f80e2e94bb2">m_AllOnes</a>()))</div>
<div class="line"><a name="l01876"></a><span class="lineno"> 1876</span>&#160;    <span class="comment">// X + Y overflows ? -1 : X + Y -&gt; uadd_sat X, Y</span></div>
<div class="line"><a name="l01877"></a><span class="lineno"> 1877</span>&#160;    NewIntrinsicID = Intrinsic::uadd_sat;</div>
<div class="line"><a name="l01878"></a><span class="lineno"> 1878</span>&#160;  <span class="keywordflow">else</span> <span class="keywordflow">if</span> (II-&gt;<a class="code" href="classllvm_1_1IntrinsicInst.html#a7ff64b3625b6f9020556ed05a5f72af4">getIntrinsicID</a>() == Intrinsic::usub_with_overflow &amp;&amp;</div>
<div class="line"><a name="l01879"></a><span class="lineno"> 1879</span>&#160;           <a class="code" href="namespacellvm_1_1PatternMatch.html#a25d956d9e0beadd47ce4bc255dfa811d">match</a>(<a class="code" href="namespacellvm_1_1tgtok.html#abbc5259d649363016626e2529fabe0c5a58b95af1ca96e109f85a0646a05fceb7">TrueVal</a>, <a class="code" href="namespacellvm_1_1PatternMatch.html#ae77be336e228cf9aa00709a8606dfb98">m_Zero</a>()))</div>
<div class="line"><a name="l01880"></a><span class="lineno"> 1880</span>&#160;    <span class="comment">// X - Y overflows ? 0 : X - Y -&gt; usub_sat X, Y</span></div>
<div class="line"><a name="l01881"></a><span class="lineno"> 1881</span>&#160;    NewIntrinsicID = Intrinsic::usub_sat;</div>
<div class="line"><a name="l01882"></a><span class="lineno"> 1882</span>&#160;  <span class="keywordflow">else</span> <span class="keywordflow">if</span> (II-&gt;<a class="code" href="classllvm_1_1IntrinsicInst.html#a7ff64b3625b6f9020556ed05a5f72af4">getIntrinsicID</a>() == Intrinsic::sadd_with_overflow &amp;&amp;</div>
<div class="line"><a name="l01883"></a><span class="lineno"> 1883</span>&#160;           IsSignedSaturateLimit(<a class="code" href="namespacellvm_1_1tgtok.html#abbc5259d649363016626e2529fabe0c5a58b95af1ca96e109f85a0646a05fceb7">TrueVal</a>, <span class="comment">/*IsAdd=*/</span><span class="keyword">true</span>))</div>
<div class="line"><a name="l01884"></a><span class="lineno"> 1884</span>&#160;    <span class="comment">// X + Y overflows ? (X &lt;s 0 ? INTMIN : INTMAX) : X + Y --&gt; sadd_sat X, Y</span></div>
<div class="line"><a name="l01885"></a><span class="lineno"> 1885</span>&#160;    <span class="comment">// X + Y overflows ? (X &lt;s 1 ? INTMIN : INTMAX) : X + Y --&gt; sadd_sat X, Y</span></div>
<div class="line"><a name="l01886"></a><span class="lineno"> 1886</span>&#160;    <span class="comment">// X + Y overflows ? (X &gt;s 0 ? INTMAX : INTMIN) : X + Y --&gt; sadd_sat X, Y</span></div>
<div class="line"><a name="l01887"></a><span class="lineno"> 1887</span>&#160;    <span class="comment">// X + Y overflows ? (X &gt;s -1 ? INTMAX : INTMIN) : X + Y --&gt; sadd_sat X, Y</span></div>
<div class="line"><a name="l01888"></a><span class="lineno"> 1888</span>&#160;    <span class="comment">// X + Y overflows ? (Y &lt;s 0 ? INTMIN : INTMAX) : X + Y --&gt; sadd_sat X, Y</span></div>
<div class="line"><a name="l01889"></a><span class="lineno"> 1889</span>&#160;    <span class="comment">// X + Y overflows ? (Y &lt;s 1 ? INTMIN : INTMAX) : X + Y --&gt; sadd_sat X, Y</span></div>
<div class="line"><a name="l01890"></a><span class="lineno"> 1890</span>&#160;    <span class="comment">// X + Y overflows ? (Y &gt;s 0 ? INTMAX : INTMIN) : X + Y --&gt; sadd_sat X, Y</span></div>
<div class="line"><a name="l01891"></a><span class="lineno"> 1891</span>&#160;    <span class="comment">// X + Y overflows ? (Y &gt;s -1 ? INTMAX : INTMIN) : X + Y --&gt; sadd_sat X, Y</span></div>
<div class="line"><a name="l01892"></a><span class="lineno"> 1892</span>&#160;    NewIntrinsicID = Intrinsic::sadd_sat;</div>
<div class="line"><a name="l01893"></a><span class="lineno"> 1893</span>&#160;  <span class="keywordflow">else</span> <span class="keywordflow">if</span> (II-&gt;<a class="code" href="classllvm_1_1IntrinsicInst.html#a7ff64b3625b6f9020556ed05a5f72af4">getIntrinsicID</a>() == Intrinsic::ssub_with_overflow &amp;&amp;</div>
<div class="line"><a name="l01894"></a><span class="lineno"> 1894</span>&#160;           IsSignedSaturateLimit(<a class="code" href="namespacellvm_1_1tgtok.html#abbc5259d649363016626e2529fabe0c5a58b95af1ca96e109f85a0646a05fceb7">TrueVal</a>, <span class="comment">/*IsAdd=*/</span><span class="keyword">false</span>))</div>
<div class="line"><a name="l01895"></a><span class="lineno"> 1895</span>&#160;    <span class="comment">// X - Y overflows ? (X &lt;s 0 ? INTMIN : INTMAX) : X - Y --&gt; ssub_sat X, Y</span></div>
<div class="line"><a name="l01896"></a><span class="lineno"> 1896</span>&#160;    <span class="comment">// X - Y overflows ? (X &lt;s -1 ? INTMIN : INTMAX) : X - Y --&gt; ssub_sat X, Y</span></div>
<div class="line"><a name="l01897"></a><span class="lineno"> 1897</span>&#160;    <span class="comment">// X - Y overflows ? (X &gt;s -1 ? INTMAX : INTMIN) : X - Y --&gt; ssub_sat X, Y</span></div>
<div class="line"><a name="l01898"></a><span class="lineno"> 1898</span>&#160;    <span class="comment">// X - Y overflows ? (X &gt;s -2 ? INTMAX : INTMIN) : X - Y --&gt; ssub_sat X, Y</span></div>
<div class="line"><a name="l01899"></a><span class="lineno"> 1899</span>&#160;    <span class="comment">// X - Y overflows ? (Y &lt;s 0 ? INTMAX : INTMIN) : X - Y --&gt; ssub_sat X, Y</span></div>
<div class="line"><a name="l01900"></a><span class="lineno"> 1900</span>&#160;    <span class="comment">// X - Y overflows ? (Y &lt;s 1 ? INTMAX : INTMIN) : X - Y --&gt; ssub_sat X, Y</span></div>
<div class="line"><a name="l01901"></a><span class="lineno"> 1901</span>&#160;    <span class="comment">// X - Y overflows ? (Y &gt;s 0 ? INTMIN : INTMAX) : X - Y --&gt; ssub_sat X, Y</span></div>
<div class="line"><a name="l01902"></a><span class="lineno"> 1902</span>&#160;    <span class="comment">// X - Y overflows ? (Y &gt;s -1 ? INTMIN : INTMAX) : X - Y --&gt; ssub_sat X, Y</span></div>
<div class="line"><a name="l01903"></a><span class="lineno"> 1903</span>&#160;    NewIntrinsicID = Intrinsic::ssub_sat;</div>
<div class="line"><a name="l01904"></a><span class="lineno"> 1904</span>&#160;  <span class="keywordflow">else</span></div>
<div class="line"><a name="l01905"></a><span class="lineno"> 1905</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l01906"></a><span class="lineno"> 1906</span>&#160; </div>
<div class="line"><a name="l01907"></a><span class="lineno"> 1907</span>&#160;  <a class="code" href="classllvm_1_1Function.html">Function</a> *<a class="code" href="MD5_8cpp.html#a96d73bbd7af15cb1fc38c3f4a3bd82e9">F</a> =</div>
<div class="line"><a name="l01908"></a><span class="lineno"> 1908</span>&#160;      <a class="code" href="namespacellvm_1_1Intrinsic.html#a842176a2c8c60a94bc788454b0828ea2">Intrinsic::getDeclaration</a>(<a class="code" href="PassBuilderBindings_8cpp.html#a0f79dad1efc582555a443cc11a8fa401">SI</a>.getModule(), NewIntrinsicID, <a class="code" href="PassBuilderBindings_8cpp.html#a0f79dad1efc582555a443cc11a8fa401">SI</a>.getType());</div>
<div class="line"><a name="l01909"></a><span class="lineno"> 1909</span>&#160;  <span class="keywordflow">return</span> <a class="code" href="classllvm_1_1CallInst.html#a850d8262cd900958b3153c4aa080b2bb">CallInst::Create</a>(<a class="code" href="MD5_8cpp.html#a96d73bbd7af15cb1fc38c3f4a3bd82e9">F</a>, {<a class="code" href="ErlangGCPrinter_8cpp.html#a74b474c0616ab55c1d9487f11fd31d26">X</a>, <a class="code" href="OcamlGCPrinter_8cpp.html#afcf2f797ed287a723263583c9b1c1bce">Y</a>});</div>
<div class="line"><a name="l01910"></a><span class="lineno"> 1910</span>&#160;}</div>
<div class="line"><a name="l01911"></a><span class="lineno"> 1911</span>&#160; </div>
<div class="line"><a name="l01912"></a><span class="lineno"> 1912</span>&#160;<a class="code" href="classllvm_1_1Instruction.html">Instruction</a> *<a class="code" href="classllvm_1_1InstCombinerImpl.html#af242bb04f4f8c88bf95916327b7c0c37">InstCombinerImpl::foldSelectExtConst</a>(<a class="code" href="classllvm_1_1SelectInst.html">SelectInst</a> &amp;Sel) {</div>
<div class="line"><a name="l01913"></a><span class="lineno"> 1913</span>&#160;  <a class="code" href="classllvm_1_1Constant.html">Constant</a> *<a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a>;</div>
<div class="line"><a name="l01914"></a><span class="lineno"> 1914</span>&#160;  <span class="keywordflow">if</span> (!<a class="code" href="namespacellvm_1_1PatternMatch.html#a25d956d9e0beadd47ce4bc255dfa811d">match</a>(Sel.<a class="code" href="classllvm_1_1SelectInst.html#a483700f6bf3ac62445850d768cf188f6">getTrueValue</a>(), <a class="code" href="namespacellvm_1_1PatternMatch.html#aadd209ba7e1bfa8113a609e09a7fe62f">m_Constant</a>(<a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a>)) &amp;&amp;</div>
<div class="line"><a name="l01915"></a><span class="lineno"> 1915</span>&#160;      !<a class="code" href="namespacellvm_1_1PatternMatch.html#a25d956d9e0beadd47ce4bc255dfa811d">match</a>(Sel.<a class="code" href="classllvm_1_1SelectInst.html#a59b0ee738ec17984b97128e7f1594db3">getFalseValue</a>(), <a class="code" href="namespacellvm_1_1PatternMatch.html#aadd209ba7e1bfa8113a609e09a7fe62f">m_Constant</a>(<a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a>)))</div>
<div class="line"><a name="l01916"></a><span class="lineno"> 1916</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l01917"></a><span class="lineno"> 1917</span>&#160; </div>
<div class="line"><a name="l01918"></a><span class="lineno"> 1918</span>&#160;  <a class="code" href="classllvm_1_1Instruction.html">Instruction</a> *ExtInst;</div>
<div class="line"><a name="l01919"></a><span class="lineno"> 1919</span>&#160;  <span class="keywordflow">if</span> (!<a class="code" href="namespacellvm_1_1PatternMatch.html#a25d956d9e0beadd47ce4bc255dfa811d">match</a>(Sel.<a class="code" href="classllvm_1_1SelectInst.html#a483700f6bf3ac62445850d768cf188f6">getTrueValue</a>(), <a class="code" href="namespacellvm_1_1PatternMatch.html#a04353aa48874f9bda89ff9059cd1a5a6">m_Instruction</a>(ExtInst)) &amp;&amp;</div>
<div class="line"><a name="l01920"></a><span class="lineno"> 1920</span>&#160;      !<a class="code" href="namespacellvm_1_1PatternMatch.html#a25d956d9e0beadd47ce4bc255dfa811d">match</a>(Sel.<a class="code" href="classllvm_1_1SelectInst.html#a59b0ee738ec17984b97128e7f1594db3">getFalseValue</a>(), <a class="code" href="namespacellvm_1_1PatternMatch.html#a04353aa48874f9bda89ff9059cd1a5a6">m_Instruction</a>(ExtInst)))</div>
<div class="line"><a name="l01921"></a><span class="lineno"> 1921</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l01922"></a><span class="lineno"> 1922</span>&#160; </div>
<div class="line"><a name="l01923"></a><span class="lineno"> 1923</span>&#160;  <span class="keyword">auto</span> ExtOpcode = ExtInst-&gt;<a class="code" href="classllvm_1_1Instruction.html#ab4e05d690df389b8b1477c90387b575f">getOpcode</a>();</div>
<div class="line"><a name="l01924"></a><span class="lineno"> 1924</span>&#160;  <span class="keywordflow">if</span> (ExtOpcode != Instruction::ZExt &amp;&amp; ExtOpcode != Instruction::SExt)</div>
<div class="line"><a name="l01925"></a><span class="lineno"> 1925</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l01926"></a><span class="lineno"> 1926</span>&#160; </div>
<div class="line"><a name="l01927"></a><span class="lineno"> 1927</span>&#160;  <span class="comment">// If we are extending from a boolean type or if we can create a select that</span></div>
<div class="line"><a name="l01928"></a><span class="lineno"> 1928</span>&#160;  <span class="comment">// has the same size operands as its condition, try to narrow the select.</span></div>
<div class="line"><a name="l01929"></a><span class="lineno"> 1929</span>&#160;  <a class="code" href="classllvm_1_1Value.html">Value</a> *<a class="code" href="ErlangGCPrinter_8cpp.html#a74b474c0616ab55c1d9487f11fd31d26">X</a> = ExtInst-&gt;<a class="code" href="classllvm_1_1User.html#abe1de1520a21f77ac57cc210bf0fb0b4">getOperand</a>(0);</div>
<div class="line"><a name="l01930"></a><span class="lineno"> 1930</span>&#160;  <a class="code" href="classllvm_1_1Type.html">Type</a> *SmallType = <a class="code" href="ErlangGCPrinter_8cpp.html#a74b474c0616ab55c1d9487f11fd31d26">X</a>-&gt;getType();</div>
<div class="line"><a name="l01931"></a><span class="lineno"> 1931</span>&#160;  <a class="code" href="classllvm_1_1Value.html">Value</a> *<a class="code" href="BasicBlockSections_8cpp.html#a5fd0741d696f28faf65b33f6c6af8fda">Cond</a> = Sel.<a class="code" href="classllvm_1_1SelectInst.html#a93a29cd4a753518a59c20c1b6ec88c76">getCondition</a>();</div>
<div class="line"><a name="l01932"></a><span class="lineno"> 1932</span>&#160;  <span class="keyword">auto</span> *Cmp = dyn_cast&lt;CmpInst&gt;(<a class="code" href="BasicBlockSections_8cpp.html#a5fd0741d696f28faf65b33f6c6af8fda">Cond</a>);</div>
<div class="line"><a name="l01933"></a><span class="lineno"> 1933</span>&#160;  <span class="keywordflow">if</span> (!SmallType-&gt;<a class="code" href="classllvm_1_1Type.html#a34ee40bb2f4f5ece47ef19e5f1f57e3c">isIntOrIntVectorTy</a>(1) &amp;&amp;</div>
<div class="line"><a name="l01934"></a><span class="lineno"> 1934</span>&#160;      (!Cmp || Cmp-&gt;<a class="code" href="classllvm_1_1User.html#abe1de1520a21f77ac57cc210bf0fb0b4">getOperand</a>(0)-&gt;<a class="code" href="classllvm_1_1Value.html#a6393a2d4fe7e10b28a0dcc35f881567b">getType</a>() != SmallType))</div>
<div class="line"><a name="l01935"></a><span class="lineno"> 1935</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l01936"></a><span class="lineno"> 1936</span>&#160; </div>
<div class="line"><a name="l01937"></a><span class="lineno"> 1937</span>&#160;  <span class="comment">// If the constant is the same after truncation to the smaller type and</span></div>
<div class="line"><a name="l01938"></a><span class="lineno"> 1938</span>&#160;  <span class="comment">// extension to the original type, we can narrow the select.</span></div>
<div class="line"><a name="l01939"></a><span class="lineno"> 1939</span>&#160;  <a class="code" href="classllvm_1_1Type.html">Type</a> *SelType = Sel.<a class="code" href="classllvm_1_1Value.html#a6393a2d4fe7e10b28a0dcc35f881567b">getType</a>();</div>
<div class="line"><a name="l01940"></a><span class="lineno"> 1940</span>&#160;  <a class="code" href="classllvm_1_1Constant.html">Constant</a> *TruncC = <a class="code" href="classllvm_1_1ConstantExpr.html#af238147cf5453729781a0fcc7322e1c6">ConstantExpr::getTrunc</a>(<a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a>, SmallType);</div>
<div class="line"><a name="l01941"></a><span class="lineno"> 1941</span>&#160;  <a class="code" href="classllvm_1_1Constant.html">Constant</a> *ExtC = <a class="code" href="classllvm_1_1ConstantExpr.html#a49b69843927f7cd96d866768b3aec92b">ConstantExpr::getCast</a>(ExtOpcode, TruncC, SelType);</div>
<div class="line"><a name="l01942"></a><span class="lineno"> 1942</span>&#160;  <span class="keywordflow">if</span> (ExtC == <a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a> &amp;&amp; ExtInst-&gt;<a class="code" href="classllvm_1_1Value.html#a3a402430a1bbe70a9282dcb0e0b6a2cd">hasOneUse</a>()) {</div>
<div class="line"><a name="l01943"></a><span class="lineno"> 1943</span>&#160;    <a class="code" href="classllvm_1_1Value.html">Value</a> *TruncCVal = cast&lt;Value&gt;(TruncC);</div>
<div class="line"><a name="l01944"></a><span class="lineno"> 1944</span>&#160;    <span class="keywordflow">if</span> (ExtInst == Sel.<a class="code" href="classllvm_1_1SelectInst.html#a59b0ee738ec17984b97128e7f1594db3">getFalseValue</a>())</div>
<div class="line"><a name="l01945"></a><span class="lineno"> 1945</span>&#160;      <a class="code" href="namespacestd.html#ab8424022895aee3e366fb9a32f2883cb">std::swap</a>(<a class="code" href="ErlangGCPrinter_8cpp.html#a74b474c0616ab55c1d9487f11fd31d26">X</a>, TruncCVal);</div>
<div class="line"><a name="l01946"></a><span class="lineno"> 1946</span>&#160; </div>
<div class="line"><a name="l01947"></a><span class="lineno"> 1947</span>&#160;    <span class="comment">// select Cond, (ext X), C --&gt; ext(select Cond, X, C&#39;)</span></div>
<div class="line"><a name="l01948"></a><span class="lineno"> 1948</span>&#160;    <span class="comment">// select Cond, C, (ext X) --&gt; ext(select Cond, C&#39;, X)</span></div>
<div class="line"><a name="l01949"></a><span class="lineno"> 1949</span>&#160;    <a class="code" href="classllvm_1_1Value.html">Value</a> *NewSel = <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.CreateSelect(<a class="code" href="BasicBlockSections_8cpp.html#a5fd0741d696f28faf65b33f6c6af8fda">Cond</a>, <a class="code" href="ErlangGCPrinter_8cpp.html#a74b474c0616ab55c1d9487f11fd31d26">X</a>, TruncCVal, <span class="stringliteral">&quot;narrow&quot;</span>, &amp;Sel);</div>
<div class="line"><a name="l01950"></a><span class="lineno"> 1950</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="classllvm_1_1CastInst.html#a643fe5a9e7042f032dae78109c2b1e72">CastInst::Create</a>(<a class="code" href="classllvm_1_1Instruction.html#afa0b2fa29ba074f2b6ec9ac11163f2d9">Instruction::CastOps</a>(ExtOpcode), NewSel, SelType);</div>
<div class="line"><a name="l01951"></a><span class="lineno"> 1951</span>&#160;  }</div>
<div class="line"><a name="l01952"></a><span class="lineno"> 1952</span>&#160; </div>
<div class="line"><a name="l01953"></a><span class="lineno"> 1953</span>&#160;  <span class="comment">// If one arm of the select is the extend of the condition, replace that arm</span></div>
<div class="line"><a name="l01954"></a><span class="lineno"> 1954</span>&#160;  <span class="comment">// with the extension of the appropriate known bool value.</span></div>
<div class="line"><a name="l01955"></a><span class="lineno"> 1955</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="BasicBlockSections_8cpp.html#a5fd0741d696f28faf65b33f6c6af8fda">Cond</a> == <a class="code" href="ErlangGCPrinter_8cpp.html#a74b474c0616ab55c1d9487f11fd31d26">X</a>) {</div>
<div class="line"><a name="l01956"></a><span class="lineno"> 1956</span>&#160;    <span class="keywordflow">if</span> (ExtInst == Sel.<a class="code" href="classllvm_1_1SelectInst.html#a483700f6bf3ac62445850d768cf188f6">getTrueValue</a>()) {</div>
<div class="line"><a name="l01957"></a><span class="lineno"> 1957</span>&#160;      <span class="comment">// select X, (sext X), C --&gt; select X, -1, C</span></div>
<div class="line"><a name="l01958"></a><span class="lineno"> 1958</span>&#160;      <span class="comment">// select X, (zext X), C --&gt; select X,  1, C</span></div>
<div class="line"><a name="l01959"></a><span class="lineno"> 1959</span>&#160;      <a class="code" href="classllvm_1_1Constant.html">Constant</a> *One = <a class="code" href="classllvm_1_1ConstantInt.html#a82dbbd8e3688b0bc1eedb338864d0d0c">ConstantInt::getTrue</a>(SmallType);</div>
<div class="line"><a name="l01960"></a><span class="lineno"> 1960</span>&#160;      <a class="code" href="classllvm_1_1Constant.html">Constant</a> *AllOnesOrOne = <a class="code" href="classllvm_1_1ConstantExpr.html#a49b69843927f7cd96d866768b3aec92b">ConstantExpr::getCast</a>(ExtOpcode, One, SelType);</div>
<div class="line"><a name="l01961"></a><span class="lineno"> 1961</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="classllvm_1_1SelectInst.html#aa55fb74dd22008fdcc26a63f44576022">SelectInst::Create</a>(<a class="code" href="BasicBlockSections_8cpp.html#a5fd0741d696f28faf65b33f6c6af8fda">Cond</a>, AllOnesOrOne, <a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a>, <span class="stringliteral">&quot;&quot;</span>, <span class="keyword">nullptr</span>, &amp;Sel);</div>
<div class="line"><a name="l01962"></a><span class="lineno"> 1962</span>&#160;    } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l01963"></a><span class="lineno"> 1963</span>&#160;      <span class="comment">// select X, C, (sext X) --&gt; select X, C, 0</span></div>
<div class="line"><a name="l01964"></a><span class="lineno"> 1964</span>&#160;      <span class="comment">// select X, C, (zext X) --&gt; select X, C, 0</span></div>
<div class="line"><a name="l01965"></a><span class="lineno"> 1965</span>&#160;      <a class="code" href="classllvm_1_1Constant.html">Constant</a> *Zero = <a class="code" href="classllvm_1_1Constant.html#aa6574d526b3e38a28f688a7bb4325c2c">ConstantInt::getNullValue</a>(SelType);</div>
<div class="line"><a name="l01966"></a><span class="lineno"> 1966</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="classllvm_1_1SelectInst.html#aa55fb74dd22008fdcc26a63f44576022">SelectInst::Create</a>(<a class="code" href="BasicBlockSections_8cpp.html#a5fd0741d696f28faf65b33f6c6af8fda">Cond</a>, <a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a>, Zero, <span class="stringliteral">&quot;&quot;</span>, <span class="keyword">nullptr</span>, &amp;Sel);</div>
<div class="line"><a name="l01967"></a><span class="lineno"> 1967</span>&#160;    }</div>
<div class="line"><a name="l01968"></a><span class="lineno"> 1968</span>&#160;  }</div>
<div class="line"><a name="l01969"></a><span class="lineno"> 1969</span>&#160; </div>
<div class="line"><a name="l01970"></a><span class="lineno"> 1970</span>&#160;  <span class="keywordflow">return</span> <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l01971"></a><span class="lineno"> 1971</span>&#160;}</div>
<div class="line"><a name="l01972"></a><span class="lineno"> 1972</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l01973"></a><span class="lineno"> 1973</span>&#160;<span class="comment">/// Try to transform a vector select with a constant condition vector into a</span></div>
<div class="line"><a name="l01974"></a><span class="lineno"> 1974</span>&#160;<span class="comment">/// shuffle for easier combining with other shuffles and insert/extract.</span></div>
<div class="line"><a name="l01975"></a><span class="lineno"> 1975</span>&#160;<span class="comment"></span><span class="keyword">static</span> <a class="code" href="classllvm_1_1Instruction.html">Instruction</a> *canonicalizeSelectToShuffle(<a class="code" href="classllvm_1_1SelectInst.html">SelectInst</a> &amp;<a class="code" href="PassBuilderBindings_8cpp.html#a0f79dad1efc582555a443cc11a8fa401">SI</a>) {</div>
<div class="line"><a name="l01976"></a><span class="lineno"> 1976</span>&#160;  <a class="code" href="classllvm_1_1Value.html">Value</a> *CondVal = <a class="code" href="PassBuilderBindings_8cpp.html#a0f79dad1efc582555a443cc11a8fa401">SI</a>.getCondition();</div>
<div class="line"><a name="l01977"></a><span class="lineno"> 1977</span>&#160;  <a class="code" href="classllvm_1_1Constant.html">Constant</a> *CondC;</div>
<div class="line"><a name="l01978"></a><span class="lineno"> 1978</span>&#160;  <span class="keyword">auto</span> *CondValTy = dyn_cast&lt;FixedVectorType&gt;(CondVal-&gt;<a class="code" href="classllvm_1_1Value.html#a6393a2d4fe7e10b28a0dcc35f881567b">getType</a>());</div>
<div class="line"><a name="l01979"></a><span class="lineno"> 1979</span>&#160;  <span class="keywordflow">if</span> (!CondValTy || !<a class="code" href="namespacellvm_1_1PatternMatch.html#a25d956d9e0beadd47ce4bc255dfa811d">match</a>(CondVal, <a class="code" href="namespacellvm_1_1PatternMatch.html#aadd209ba7e1bfa8113a609e09a7fe62f">m_Constant</a>(CondC)))</div>
<div class="line"><a name="l01980"></a><span class="lineno"> 1980</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l01981"></a><span class="lineno"> 1981</span>&#160; </div>
<div class="line"><a name="l01982"></a><span class="lineno"> 1982</span>&#160;  <span class="keywordtype">unsigned</span> NumElts = CondValTy-&gt;getNumElements();</div>
<div class="line"><a name="l01983"></a><span class="lineno"> 1983</span>&#160;  <a class="code" href="classllvm_1_1SmallVector.html">SmallVector&lt;int, 16&gt;</a> <a class="code" href="namespacellvm_1_1BitmaskEnumDetail.html#ad9273b0ee6c5e0f2367e3136c1503811">Mask</a>;</div>
<div class="line"><a name="l01984"></a><span class="lineno"> 1984</span>&#160;  <a class="code" href="namespacellvm_1_1BitmaskEnumDetail.html#ad9273b0ee6c5e0f2367e3136c1503811">Mask</a>.reserve(NumElts);</div>
<div class="line"><a name="l01985"></a><span class="lineno"> 1985</span>&#160;  <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> <a class="code" href="lib_2Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a> = 0; <a class="code" href="lib_2Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a> != NumElts; ++<a class="code" href="lib_2Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a>) {</div>
<div class="line"><a name="l01986"></a><span class="lineno"> 1986</span>&#160;    <a class="code" href="classllvm_1_1Constant.html">Constant</a> *Elt = CondC-&gt;<a class="code" href="classllvm_1_1Constant.html#acd530d0571f320d47d37e7ae51cf70ff">getAggregateElement</a>(<a class="code" href="lib_2Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a>);</div>
<div class="line"><a name="l01987"></a><span class="lineno"> 1987</span>&#160;    <span class="keywordflow">if</span> (!Elt)</div>
<div class="line"><a name="l01988"></a><span class="lineno"> 1988</span>&#160;      <span class="keywordflow">return</span> <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l01989"></a><span class="lineno"> 1989</span>&#160; </div>
<div class="line"><a name="l01990"></a><span class="lineno"> 1990</span>&#160;    <span class="keywordflow">if</span> (Elt-&gt;<a class="code" href="classllvm_1_1Constant.html#a586fb7954fcb7d759a997b3e1e979d30">isOneValue</a>()) {</div>
<div class="line"><a name="l01991"></a><span class="lineno"> 1991</span>&#160;      <span class="comment">// If the select condition element is true, choose from the 1st vector.</span></div>
<div class="line"><a name="l01992"></a><span class="lineno"> 1992</span>&#160;      <a class="code" href="namespacellvm_1_1BitmaskEnumDetail.html#ad9273b0ee6c5e0f2367e3136c1503811">Mask</a>.push_back(<a class="code" href="lib_2Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a>);</div>
<div class="line"><a name="l01993"></a><span class="lineno"> 1993</span>&#160;    } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (Elt-&gt;<a class="code" href="classllvm_1_1Constant.html#ae4b6abe77abf42fb02081a6cc41a0132">isNullValue</a>()) {</div>
<div class="line"><a name="l01994"></a><span class="lineno"> 1994</span>&#160;      <span class="comment">// If the select condition element is false, choose from the 2nd vector.</span></div>
<div class="line"><a name="l01995"></a><span class="lineno"> 1995</span>&#160;      <a class="code" href="namespacellvm_1_1BitmaskEnumDetail.html#ad9273b0ee6c5e0f2367e3136c1503811">Mask</a>.push_back(<a class="code" href="lib_2Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a> + NumElts);</div>
<div class="line"><a name="l01996"></a><span class="lineno"> 1996</span>&#160;    } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (isa&lt;UndefValue&gt;(Elt)) {</div>
<div class="line"><a name="l01997"></a><span class="lineno"> 1997</span>&#160;      <span class="comment">// Undef in a select condition (choose one of the operands) does not mean</span></div>
<div class="line"><a name="l01998"></a><span class="lineno"> 1998</span>&#160;      <span class="comment">// the same thing as undef in a shuffle mask (any value is acceptable), so</span></div>
<div class="line"><a name="l01999"></a><span class="lineno"> 1999</span>&#160;      <span class="comment">// give up.</span></div>
<div class="line"><a name="l02000"></a><span class="lineno"> 2000</span>&#160;      <span class="keywordflow">return</span> <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l02001"></a><span class="lineno"> 2001</span>&#160;    } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l02002"></a><span class="lineno"> 2002</span>&#160;      <span class="comment">// Bail out on a constant expression.</span></div>
<div class="line"><a name="l02003"></a><span class="lineno"> 2003</span>&#160;      <span class="keywordflow">return</span> <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l02004"></a><span class="lineno"> 2004</span>&#160;    }</div>
<div class="line"><a name="l02005"></a><span class="lineno"> 2005</span>&#160;  }</div>
<div class="line"><a name="l02006"></a><span class="lineno"> 2006</span>&#160; </div>
<div class="line"><a name="l02007"></a><span class="lineno"> 2007</span>&#160;  <span class="keywordflow">return</span> <span class="keyword">new</span> <a class="code" href="classllvm_1_1ShuffleVectorInst.html">ShuffleVectorInst</a>(<a class="code" href="PassBuilderBindings_8cpp.html#a0f79dad1efc582555a443cc11a8fa401">SI</a>.getTrueValue(), <a class="code" href="PassBuilderBindings_8cpp.html#a0f79dad1efc582555a443cc11a8fa401">SI</a>.getFalseValue(), <a class="code" href="namespacellvm_1_1BitmaskEnumDetail.html#ad9273b0ee6c5e0f2367e3136c1503811">Mask</a>);</div>
<div class="line"><a name="l02008"></a><span class="lineno"> 2008</span>&#160;}</div>
<div class="line"><a name="l02009"></a><span class="lineno"> 2009</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l02010"></a><span class="lineno"> 2010</span>&#160;<span class="comment">/// If we have a select of vectors with a scalar condition, try to convert that</span></div>
<div class="line"><a name="l02011"></a><span class="lineno"> 2011</span>&#160;<span class="comment">/// to a vector select by splatting the condition. A splat may get folded with</span></div>
<div class="line"><a name="l02012"></a><span class="lineno"> 2012</span>&#160;<span class="comment">/// other operations in IR and having all operands of a select be vector types</span></div>
<div class="line"><a name="l02013"></a><span class="lineno"> 2013</span>&#160;<span class="comment">/// is likely better for vector codegen.</span></div>
<div class="line"><a name="l02014"></a><span class="lineno"> 2014</span>&#160;<span class="comment"></span><span class="keyword">static</span> <a class="code" href="classllvm_1_1Instruction.html">Instruction</a> *canonicalizeScalarSelectOfVecs(<a class="code" href="classllvm_1_1SelectInst.html">SelectInst</a> &amp;Sel,</div>
<div class="line"><a name="l02015"></a><span class="lineno"> 2015</span>&#160;                                                   <a class="code" href="classllvm_1_1InstCombinerImpl.html">InstCombinerImpl</a> &amp;IC) {</div>
<div class="line"><a name="l02016"></a><span class="lineno"> 2016</span>&#160;  <span class="keyword">auto</span> *Ty = dyn_cast&lt;VectorType&gt;(Sel.<a class="code" href="classllvm_1_1Value.html#a6393a2d4fe7e10b28a0dcc35f881567b">getType</a>());</div>
<div class="line"><a name="l02017"></a><span class="lineno"> 2017</span>&#160;  <span class="keywordflow">if</span> (!Ty)</div>
<div class="line"><a name="l02018"></a><span class="lineno"> 2018</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l02019"></a><span class="lineno"> 2019</span>&#160; </div>
<div class="line"><a name="l02020"></a><span class="lineno"> 2020</span>&#160;  <span class="comment">// We can replace a single-use extract with constant index.</span></div>
<div class="line"><a name="l02021"></a><span class="lineno"> 2021</span>&#160;  <a class="code" href="classllvm_1_1Value.html">Value</a> *<a class="code" href="BasicBlockSections_8cpp.html#a5fd0741d696f28faf65b33f6c6af8fda">Cond</a> = Sel.<a class="code" href="classllvm_1_1SelectInst.html#a93a29cd4a753518a59c20c1b6ec88c76">getCondition</a>();</div>
<div class="line"><a name="l02022"></a><span class="lineno"> 2022</span>&#160;  <span class="keywordflow">if</span> (!<a class="code" href="namespacellvm_1_1PatternMatch.html#a25d956d9e0beadd47ce4bc255dfa811d">match</a>(<a class="code" href="BasicBlockSections_8cpp.html#a5fd0741d696f28faf65b33f6c6af8fda">Cond</a>, <a class="code" href="namespacellvm_1_1PatternMatch.html#aca6428e7fec51ba0b55594f469eb9691">m_OneUse</a>(<a class="code" href="namespacellvm_1_1PatternMatch.html#adf0290c7c322f0bf8b275d6b26410b52">m_ExtractElt</a>(<a class="code" href="namespacellvm_1_1PatternMatch.html#a24bca8838396aa81b87de8e7ac774b19">m_Value</a>(), <a class="code" href="namespacellvm_1_1PatternMatch.html#a677ac8d99ff3c2d32a95c21de9ed372c">m_ConstantInt</a>()))))</div>
<div class="line"><a name="l02023"></a><span class="lineno"> 2023</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l02024"></a><span class="lineno"> 2024</span>&#160; </div>
<div class="line"><a name="l02025"></a><span class="lineno"> 2025</span>&#160;  <span class="comment">// select (extelt V, Index), T, F --&gt; select (splat V, Index), T, F</span></div>
<div class="line"><a name="l02026"></a><span class="lineno"> 2026</span>&#160;  <span class="comment">// Splatting the extracted condition reduces code (we could directly create a</span></div>
<div class="line"><a name="l02027"></a><span class="lineno"> 2027</span>&#160;  <span class="comment">// splat shuffle of the source vector to eliminate the intermediate step).</span></div>
<div class="line"><a name="l02028"></a><span class="lineno"> 2028</span>&#160;  <span class="keywordflow">return</span> IC.<a class="code" href="classllvm_1_1InstCombinerImpl.html#a250c29896fae99b9235d23f7254b8809">replaceOperand</a>(</div>
<div class="line"><a name="l02029"></a><span class="lineno"> 2029</span>&#160;      Sel, 0, IC.<a class="code" href="classllvm_1_1InstCombiner.html#ae1d331bc844ecb92bdeb0b706ae04396">Builder</a>.<a class="code" href="classllvm_1_1IRBuilderBase.html#a40ed7274ff11f079e5b5eae34c818c51">CreateVectorSplat</a>(Ty-&gt;getElementCount(), <a class="code" href="BasicBlockSections_8cpp.html#a5fd0741d696f28faf65b33f6c6af8fda">Cond</a>));</div>
<div class="line"><a name="l02030"></a><span class="lineno"> 2030</span>&#160;}</div>
<div class="line"><a name="l02031"></a><span class="lineno"> 2031</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l02032"></a><span class="lineno"> 2032</span>&#160;<span class="comment">/// Reuse bitcasted operands between a compare and select:</span></div>
<div class="line"><a name="l02033"></a><span class="lineno"> 2033</span>&#160;<span class="comment">/// select (cmp (bitcast C), (bitcast D)), (bitcast&#39; C), (bitcast&#39; D) --&gt;</span></div>
<div class="line"><a name="l02034"></a><span class="lineno"> 2034</span>&#160;<span class="comment">/// bitcast (select (cmp (bitcast C), (bitcast D)), (bitcast C), (bitcast D))</span></div>
<div class="line"><a name="l02035"></a><span class="lineno"> 2035</span>&#160;<span class="comment"></span><span class="keyword">static</span> <a class="code" href="classllvm_1_1Instruction.html">Instruction</a> *foldSelectCmpBitcasts(<a class="code" href="classllvm_1_1SelectInst.html">SelectInst</a> &amp;Sel,</div>
<div class="line"><a name="l02036"></a><span class="lineno"> 2036</span>&#160;                                          <a class="code" href="classllvm_1_1IRBuilder.html">InstCombiner::BuilderTy</a> &amp;<a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>) {</div>
<div class="line"><a name="l02037"></a><span class="lineno"> 2037</span>&#160;  <a class="code" href="classllvm_1_1Value.html">Value</a> *<a class="code" href="BasicBlockSections_8cpp.html#a5fd0741d696f28faf65b33f6c6af8fda">Cond</a> = Sel.<a class="code" href="classllvm_1_1SelectInst.html#a93a29cd4a753518a59c20c1b6ec88c76">getCondition</a>();</div>
<div class="line"><a name="l02038"></a><span class="lineno"> 2038</span>&#160;  <a class="code" href="classllvm_1_1Value.html">Value</a> *TVal = Sel.<a class="code" href="classllvm_1_1SelectInst.html#a483700f6bf3ac62445850d768cf188f6">getTrueValue</a>();</div>
<div class="line"><a name="l02039"></a><span class="lineno"> 2039</span>&#160;  <a class="code" href="classllvm_1_1Value.html">Value</a> *FVal = Sel.<a class="code" href="classllvm_1_1SelectInst.html#a59b0ee738ec17984b97128e7f1594db3">getFalseValue</a>();</div>
<div class="line"><a name="l02040"></a><span class="lineno"> 2040</span>&#160; </div>
<div class="line"><a name="l02041"></a><span class="lineno"> 2041</span>&#160;  <a class="code" href="classllvm_1_1CmpInst.html#a2be3583dac92a031fa1458d4d992c78b">CmpInst::Predicate</a> Pred;</div>
<div class="line"><a name="l02042"></a><span class="lineno"> 2042</span>&#160;  <a class="code" href="classllvm_1_1Value.html">Value</a> *<a class="code" href="README__ALTIVEC_8txt.html#a015846b6188ce15e08cd94c74a9df1a3">A</a>, *<a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a>;</div>
<div class="line"><a name="l02043"></a><span class="lineno"> 2043</span>&#160;  <span class="keywordflow">if</span> (!<a class="code" href="namespacellvm_1_1PatternMatch.html#a25d956d9e0beadd47ce4bc255dfa811d">match</a>(<a class="code" href="BasicBlockSections_8cpp.html#a5fd0741d696f28faf65b33f6c6af8fda">Cond</a>, <a class="code" href="namespacellvm_1_1PatternMatch.html#a753e1338645ec04d045211b8a46d968d">m_Cmp</a>(Pred, <a class="code" href="namespacellvm_1_1PatternMatch.html#a24bca8838396aa81b87de8e7ac774b19">m_Value</a>(<a class="code" href="README__ALTIVEC_8txt.html#a015846b6188ce15e08cd94c74a9df1a3">A</a>), <a class="code" href="namespacellvm_1_1PatternMatch.html#a24bca8838396aa81b87de8e7ac774b19">m_Value</a>(<a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a>))))</div>
<div class="line"><a name="l02044"></a><span class="lineno"> 2044</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l02045"></a><span class="lineno"> 2045</span>&#160; </div>
<div class="line"><a name="l02046"></a><span class="lineno"> 2046</span>&#160;  <span class="comment">// The select condition is a compare instruction. If the select&#39;s true/false</span></div>
<div class="line"><a name="l02047"></a><span class="lineno"> 2047</span>&#160;  <span class="comment">// values are already the same as the compare operands, there&#39;s nothing to do.</span></div>
<div class="line"><a name="l02048"></a><span class="lineno"> 2048</span>&#160;  <span class="keywordflow">if</span> (TVal == <a class="code" href="README__ALTIVEC_8txt.html#a015846b6188ce15e08cd94c74a9df1a3">A</a> || TVal == <a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a> || FVal == <a class="code" href="README__ALTIVEC_8txt.html#a015846b6188ce15e08cd94c74a9df1a3">A</a> || FVal == <a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a>)</div>
<div class="line"><a name="l02049"></a><span class="lineno"> 2049</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l02050"></a><span class="lineno"> 2050</span>&#160; </div>
<div class="line"><a name="l02051"></a><span class="lineno"> 2051</span>&#160;  <a class="code" href="classllvm_1_1Value.html">Value</a> *<a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a>, *<a class="code" href="BuiltinGCs_8cpp.html#a9bf617fd3367180fb96cebccfaae8dfa">D</a>;</div>
<div class="line"><a name="l02052"></a><span class="lineno"> 2052</span>&#160;  <span class="keywordflow">if</span> (!<a class="code" href="namespacellvm_1_1PatternMatch.html#a25d956d9e0beadd47ce4bc255dfa811d">match</a>(<a class="code" href="README__ALTIVEC_8txt.html#a015846b6188ce15e08cd94c74a9df1a3">A</a>, <a class="code" href="namespacellvm_1_1PatternMatch.html#ac0467ca7fad871738b10db95feb40dad">m_BitCast</a>(<a class="code" href="namespacellvm_1_1PatternMatch.html#a24bca8838396aa81b87de8e7ac774b19">m_Value</a>(<a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a>))) || !<a class="code" href="namespacellvm_1_1PatternMatch.html#a25d956d9e0beadd47ce4bc255dfa811d">match</a>(<a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a>, <a class="code" href="namespacellvm_1_1PatternMatch.html#ac0467ca7fad871738b10db95feb40dad">m_BitCast</a>(<a class="code" href="namespacellvm_1_1PatternMatch.html#a24bca8838396aa81b87de8e7ac774b19">m_Value</a>(<a class="code" href="BuiltinGCs_8cpp.html#a9bf617fd3367180fb96cebccfaae8dfa">D</a>))))</div>
<div class="line"><a name="l02053"></a><span class="lineno"> 2053</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l02054"></a><span class="lineno"> 2054</span>&#160; </div>
<div class="line"><a name="l02055"></a><span class="lineno"> 2055</span>&#160;  <span class="comment">// select (cmp (bitcast C), (bitcast D)), (bitcast TSrc), (bitcast FSrc)</span></div>
<div class="line"><a name="l02056"></a><span class="lineno"> 2056</span>&#160;  <a class="code" href="classllvm_1_1Value.html">Value</a> *TSrc, *FSrc;</div>
<div class="line"><a name="l02057"></a><span class="lineno"> 2057</span>&#160;  <span class="keywordflow">if</span> (!<a class="code" href="namespacellvm_1_1PatternMatch.html#a25d956d9e0beadd47ce4bc255dfa811d">match</a>(TVal, <a class="code" href="namespacellvm_1_1PatternMatch.html#ac0467ca7fad871738b10db95feb40dad">m_BitCast</a>(<a class="code" href="namespacellvm_1_1PatternMatch.html#a24bca8838396aa81b87de8e7ac774b19">m_Value</a>(TSrc))) ||</div>
<div class="line"><a name="l02058"></a><span class="lineno"> 2058</span>&#160;      !<a class="code" href="namespacellvm_1_1PatternMatch.html#a25d956d9e0beadd47ce4bc255dfa811d">match</a>(FVal, <a class="code" href="namespacellvm_1_1PatternMatch.html#ac0467ca7fad871738b10db95feb40dad">m_BitCast</a>(<a class="code" href="namespacellvm_1_1PatternMatch.html#a24bca8838396aa81b87de8e7ac774b19">m_Value</a>(FSrc))))</div>
<div class="line"><a name="l02059"></a><span class="lineno"> 2059</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l02060"></a><span class="lineno"> 2060</span>&#160; </div>
<div class="line"><a name="l02061"></a><span class="lineno"> 2061</span>&#160;  <span class="comment">// If the select true/false values are *different bitcasts* of the same source</span></div>
<div class="line"><a name="l02062"></a><span class="lineno"> 2062</span>&#160;  <span class="comment">// operands, make the select operands the same as the compare operands and</span></div>
<div class="line"><a name="l02063"></a><span class="lineno"> 2063</span>&#160;  <span class="comment">// cast the result. This is the canonical select form for min/max.</span></div>
<div class="line"><a name="l02064"></a><span class="lineno"> 2064</span>&#160;  <a class="code" href="classllvm_1_1Value.html">Value</a> *NewSel;</div>
<div class="line"><a name="l02065"></a><span class="lineno"> 2065</span>&#160;  <span class="keywordflow">if</span> (TSrc == <a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a> &amp;&amp; FSrc == <a class="code" href="BuiltinGCs_8cpp.html#a9bf617fd3367180fb96cebccfaae8dfa">D</a>) {</div>
<div class="line"><a name="l02066"></a><span class="lineno"> 2066</span>&#160;    <span class="comment">// select (cmp (bitcast C), (bitcast D)), (bitcast&#39; C), (bitcast&#39; D) --&gt;</span></div>
<div class="line"><a name="l02067"></a><span class="lineno"> 2067</span>&#160;    <span class="comment">// bitcast (select (cmp A, B), A, B)</span></div>
<div class="line"><a name="l02068"></a><span class="lineno"> 2068</span>&#160;    NewSel = <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.CreateSelect(<a class="code" href="BasicBlockSections_8cpp.html#a5fd0741d696f28faf65b33f6c6af8fda">Cond</a>, <a class="code" href="README__ALTIVEC_8txt.html#a015846b6188ce15e08cd94c74a9df1a3">A</a>, <a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a>, <span class="stringliteral">&quot;&quot;</span>, &amp;Sel);</div>
<div class="line"><a name="l02069"></a><span class="lineno"> 2069</span>&#160;  } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (TSrc == <a class="code" href="BuiltinGCs_8cpp.html#a9bf617fd3367180fb96cebccfaae8dfa">D</a> &amp;&amp; FSrc == <a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a>) {</div>
<div class="line"><a name="l02070"></a><span class="lineno"> 2070</span>&#160;    <span class="comment">// select (cmp (bitcast C), (bitcast D)), (bitcast&#39; D), (bitcast&#39; C) --&gt;</span></div>
<div class="line"><a name="l02071"></a><span class="lineno"> 2071</span>&#160;    <span class="comment">// bitcast (select (cmp A, B), B, A)</span></div>
<div class="line"><a name="l02072"></a><span class="lineno"> 2072</span>&#160;    NewSel = <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.CreateSelect(<a class="code" href="BasicBlockSections_8cpp.html#a5fd0741d696f28faf65b33f6c6af8fda">Cond</a>, <a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a>, <a class="code" href="README__ALTIVEC_8txt.html#a015846b6188ce15e08cd94c74a9df1a3">A</a>, <span class="stringliteral">&quot;&quot;</span>, &amp;Sel);</div>
<div class="line"><a name="l02073"></a><span class="lineno"> 2073</span>&#160;  } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l02074"></a><span class="lineno"> 2074</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l02075"></a><span class="lineno"> 2075</span>&#160;  }</div>
<div class="line"><a name="l02076"></a><span class="lineno"> 2076</span>&#160;  <span class="keywordflow">return</span> <a class="code" href="classllvm_1_1CastInst.html#a31d2885660f654b31d8741726c3ea8d9">CastInst::CreateBitOrPointerCast</a>(NewSel, Sel.<a class="code" href="classllvm_1_1Value.html#a6393a2d4fe7e10b28a0dcc35f881567b">getType</a>());</div>
<div class="line"><a name="l02077"></a><span class="lineno"> 2077</span>&#160;}</div>
<div class="line"><a name="l02078"></a><span class="lineno"> 2078</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l02079"></a><span class="lineno"> 2079</span>&#160;<span class="comment">/// Try to eliminate select instructions that test the returned flag of cmpxchg</span></div>
<div class="line"><a name="l02080"></a><span class="lineno"> 2080</span>&#160;<span class="comment">/// instructions.</span></div>
<div class="line"><a name="l02081"></a><span class="lineno"> 2081</span>&#160;<span class="comment">///</span></div>
<div class="line"><a name="l02082"></a><span class="lineno"> 2082</span>&#160;<span class="comment">/// If a select instruction tests the returned flag of a cmpxchg instruction and</span></div>
<div class="line"><a name="l02083"></a><span class="lineno"> 2083</span>&#160;<span class="comment">/// selects between the returned value of the cmpxchg instruction its compare</span></div>
<div class="line"><a name="l02084"></a><span class="lineno"> 2084</span>&#160;<span class="comment">/// operand, the result of the select will always be equal to its false value.</span></div>
<div class="line"><a name="l02085"></a><span class="lineno"> 2085</span>&#160;<span class="comment">/// For example:</span></div>
<div class="line"><a name="l02086"></a><span class="lineno"> 2086</span>&#160;<span class="comment">///</span></div>
<div class="line"><a name="l02087"></a><span class="lineno"> 2087</span>&#160;<span class="comment">///   %0 = cmpxchg i64* %ptr, i64 %compare, i64 %new_value seq_cst seq_cst</span></div>
<div class="line"><a name="l02088"></a><span class="lineno"> 2088</span>&#160;<span class="comment">///   %1 = extractvalue { i64, i1 } %0, 1</span></div>
<div class="line"><a name="l02089"></a><span class="lineno"> 2089</span>&#160;<span class="comment">///   %2 = extractvalue { i64, i1 } %0, 0</span></div>
<div class="line"><a name="l02090"></a><span class="lineno"> 2090</span>&#160;<span class="comment">///   %3 = select i1 %1, i64 %compare, i64 %2</span></div>
<div class="line"><a name="l02091"></a><span class="lineno"> 2091</span>&#160;<span class="comment">///   ret i64 %3</span></div>
<div class="line"><a name="l02092"></a><span class="lineno"> 2092</span>&#160;<span class="comment">///</span></div>
<div class="line"><a name="l02093"></a><span class="lineno"> 2093</span>&#160;<span class="comment">/// The returned value of the cmpxchg instruction (%2) is the original value</span></div>
<div class="line"><a name="l02094"></a><span class="lineno"> 2094</span>&#160;<span class="comment">/// located at %ptr prior to any update. If the cmpxchg operation succeeds, %2</span></div>
<div class="line"><a name="l02095"></a><span class="lineno"> 2095</span>&#160;<span class="comment">/// must have been equal to %compare. Thus, the result of the select is always</span></div>
<div class="line"><a name="l02096"></a><span class="lineno"> 2096</span>&#160;<span class="comment">/// equal to %2, and the code can be simplified to:</span></div>
<div class="line"><a name="l02097"></a><span class="lineno"> 2097</span>&#160;<span class="comment">///</span></div>
<div class="line"><a name="l02098"></a><span class="lineno"> 2098</span>&#160;<span class="comment">///   %0 = cmpxchg i64* %ptr, i64 %compare, i64 %new_value seq_cst seq_cst</span></div>
<div class="line"><a name="l02099"></a><span class="lineno"> 2099</span>&#160;<span class="comment">///   %1 = extractvalue { i64, i1 } %0, 0</span></div>
<div class="line"><a name="l02100"></a><span class="lineno"> 2100</span>&#160;<span class="comment">///   ret i64 %1</span></div>
<div class="line"><a name="l02101"></a><span class="lineno"> 2101</span>&#160;<span class="comment">///</span></div>
<div class="line"><a name="l02102"></a><span class="lineno"> 2102</span>&#160;<span class="comment"></span><span class="keyword">static</span> <a class="code" href="classllvm_1_1Value.html">Value</a> *foldSelectCmpXchg(<a class="code" href="classllvm_1_1SelectInst.html">SelectInst</a> &amp;<a class="code" href="PassBuilderBindings_8cpp.html#a0f79dad1efc582555a443cc11a8fa401">SI</a>) {</div>
<div class="line"><a name="l02103"></a><span class="lineno"> 2103</span>&#160;  <span class="comment">// A helper that determines if V is an extractvalue instruction whose</span></div>
<div class="line"><a name="l02104"></a><span class="lineno"> 2104</span>&#160;  <span class="comment">// aggregate operand is a cmpxchg instruction and whose single index is equal</span></div>
<div class="line"><a name="l02105"></a><span class="lineno"> 2105</span>&#160;  <span class="comment">// to I. If such conditions are true, the helper returns the cmpxchg</span></div>
<div class="line"><a name="l02106"></a><span class="lineno"> 2106</span>&#160;  <span class="comment">// instruction; otherwise, a nullptr is returned.</span></div>
<div class="line"><a name="l02107"></a><span class="lineno"> 2107</span>&#160;  <span class="keyword">auto</span> isExtractFromCmpXchg = [](<a class="code" href="classllvm_1_1Value.html">Value</a> *V, <span class="keywordtype">unsigned</span> <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>) -&gt; <a class="code" href="classllvm_1_1AtomicCmpXchgInst.html">AtomicCmpXchgInst</a> * {</div>
<div class="line"><a name="l02108"></a><span class="lineno"> 2108</span>&#160;    <span class="keyword">auto</span> *Extract = dyn_cast&lt;ExtractValueInst&gt;(V);</div>
<div class="line"><a name="l02109"></a><span class="lineno"> 2109</span>&#160;    <span class="keywordflow">if</span> (!Extract)</div>
<div class="line"><a name="l02110"></a><span class="lineno"> 2110</span>&#160;      <span class="keywordflow">return</span> <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l02111"></a><span class="lineno"> 2111</span>&#160;    <span class="keywordflow">if</span> (Extract-&gt;getIndices()[0] != <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>)</div>
<div class="line"><a name="l02112"></a><span class="lineno"> 2112</span>&#160;      <span class="keywordflow">return</span> <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l02113"></a><span class="lineno"> 2113</span>&#160;    <span class="keywordflow">return</span> dyn_cast&lt;AtomicCmpXchgInst&gt;(Extract-&gt;getAggregateOperand());</div>
<div class="line"><a name="l02114"></a><span class="lineno"> 2114</span>&#160;  };</div>
<div class="line"><a name="l02115"></a><span class="lineno"> 2115</span>&#160; </div>
<div class="line"><a name="l02116"></a><span class="lineno"> 2116</span>&#160;  <span class="comment">// If the select has a single user, and this user is a select instruction that</span></div>
<div class="line"><a name="l02117"></a><span class="lineno"> 2117</span>&#160;  <span class="comment">// we can simplify, skip the cmpxchg simplification for now.</span></div>
<div class="line"><a name="l02118"></a><span class="lineno"> 2118</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="PassBuilderBindings_8cpp.html#a0f79dad1efc582555a443cc11a8fa401">SI</a>.hasOneUse())</div>
<div class="line"><a name="l02119"></a><span class="lineno"> 2119</span>&#160;    <span class="keywordflow">if</span> (<span class="keyword">auto</span> *<a class="code" href="namespacellvm_1_1MCID.html#ab357441fcd1ea1f9b0d27c12700f6023a32dbd2c72a98eaee90e3ad5ef7b5af16">Select</a> = dyn_cast&lt;SelectInst&gt;(<a class="code" href="PassBuilderBindings_8cpp.html#a0f79dad1efc582555a443cc11a8fa401">SI</a>.user_back()))</div>
<div class="line"><a name="l02120"></a><span class="lineno"> 2120</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="namespacellvm_1_1MCID.html#ab357441fcd1ea1f9b0d27c12700f6023a32dbd2c72a98eaee90e3ad5ef7b5af16">Select</a>-&gt;getCondition() == <a class="code" href="PassBuilderBindings_8cpp.html#a0f79dad1efc582555a443cc11a8fa401">SI</a>.getCondition())</div>
<div class="line"><a name="l02121"></a><span class="lineno"> 2121</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="namespacellvm_1_1MCID.html#ab357441fcd1ea1f9b0d27c12700f6023a32dbd2c72a98eaee90e3ad5ef7b5af16">Select</a>-&gt;getFalseValue() == <a class="code" href="PassBuilderBindings_8cpp.html#a0f79dad1efc582555a443cc11a8fa401">SI</a>.getTrueValue() ||</div>
<div class="line"><a name="l02122"></a><span class="lineno"> 2122</span>&#160;            <a class="code" href="namespacellvm_1_1MCID.html#ab357441fcd1ea1f9b0d27c12700f6023a32dbd2c72a98eaee90e3ad5ef7b5af16">Select</a>-&gt;getTrueValue() == <a class="code" href="PassBuilderBindings_8cpp.html#a0f79dad1efc582555a443cc11a8fa401">SI</a>.getFalseValue())</div>
<div class="line"><a name="l02123"></a><span class="lineno"> 2123</span>&#160;          <span class="keywordflow">return</span> <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l02124"></a><span class="lineno"> 2124</span>&#160; </div>
<div class="line"><a name="l02125"></a><span class="lineno"> 2125</span>&#160;  <span class="comment">// Ensure the select condition is the returned flag of a cmpxchg instruction.</span></div>
<div class="line"><a name="l02126"></a><span class="lineno"> 2126</span>&#160;  <span class="keyword">auto</span> *CmpXchg = isExtractFromCmpXchg(<a class="code" href="PassBuilderBindings_8cpp.html#a0f79dad1efc582555a443cc11a8fa401">SI</a>.getCondition(), 1);</div>
<div class="line"><a name="l02127"></a><span class="lineno"> 2127</span>&#160;  <span class="keywordflow">if</span> (!CmpXchg)</div>
<div class="line"><a name="l02128"></a><span class="lineno"> 2128</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l02129"></a><span class="lineno"> 2129</span>&#160; </div>
<div class="line"><a name="l02130"></a><span class="lineno"> 2130</span>&#160;  <span class="comment">// Check the true value case: The true value of the select is the returned</span></div>
<div class="line"><a name="l02131"></a><span class="lineno"> 2131</span>&#160;  <span class="comment">// value of the same cmpxchg used by the condition, and the false value is the</span></div>
<div class="line"><a name="l02132"></a><span class="lineno"> 2132</span>&#160;  <span class="comment">// cmpxchg instruction&#39;s compare operand.</span></div>
<div class="line"><a name="l02133"></a><span class="lineno"> 2133</span>&#160;  <span class="keywordflow">if</span> (<span class="keyword">auto</span> *<a class="code" href="ErlangGCPrinter_8cpp.html#a74b474c0616ab55c1d9487f11fd31d26">X</a> = isExtractFromCmpXchg(<a class="code" href="PassBuilderBindings_8cpp.html#a0f79dad1efc582555a443cc11a8fa401">SI</a>.getTrueValue(), 0))</div>
<div class="line"><a name="l02134"></a><span class="lineno"> 2134</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="ErlangGCPrinter_8cpp.html#a74b474c0616ab55c1d9487f11fd31d26">X</a> == CmpXchg &amp;&amp; <a class="code" href="ErlangGCPrinter_8cpp.html#a74b474c0616ab55c1d9487f11fd31d26">X</a>-&gt;getCompareOperand() == <a class="code" href="PassBuilderBindings_8cpp.html#a0f79dad1efc582555a443cc11a8fa401">SI</a>.getFalseValue())</div>
<div class="line"><a name="l02135"></a><span class="lineno"> 2135</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="PassBuilderBindings_8cpp.html#a0f79dad1efc582555a443cc11a8fa401">SI</a>.getFalseValue();</div>
<div class="line"><a name="l02136"></a><span class="lineno"> 2136</span>&#160; </div>
<div class="line"><a name="l02137"></a><span class="lineno"> 2137</span>&#160;  <span class="comment">// Check the false value case: The false value of the select is the returned</span></div>
<div class="line"><a name="l02138"></a><span class="lineno"> 2138</span>&#160;  <span class="comment">// value of the same cmpxchg used by the condition, and the true value is the</span></div>
<div class="line"><a name="l02139"></a><span class="lineno"> 2139</span>&#160;  <span class="comment">// cmpxchg instruction&#39;s compare operand.</span></div>
<div class="line"><a name="l02140"></a><span class="lineno"> 2140</span>&#160;  <span class="keywordflow">if</span> (<span class="keyword">auto</span> *<a class="code" href="ErlangGCPrinter_8cpp.html#a74b474c0616ab55c1d9487f11fd31d26">X</a> = isExtractFromCmpXchg(<a class="code" href="PassBuilderBindings_8cpp.html#a0f79dad1efc582555a443cc11a8fa401">SI</a>.getFalseValue(), 0))</div>
<div class="line"><a name="l02141"></a><span class="lineno"> 2141</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="ErlangGCPrinter_8cpp.html#a74b474c0616ab55c1d9487f11fd31d26">X</a> == CmpXchg &amp;&amp; <a class="code" href="ErlangGCPrinter_8cpp.html#a74b474c0616ab55c1d9487f11fd31d26">X</a>-&gt;getCompareOperand() == <a class="code" href="PassBuilderBindings_8cpp.html#a0f79dad1efc582555a443cc11a8fa401">SI</a>.getTrueValue())</div>
<div class="line"><a name="l02142"></a><span class="lineno"> 2142</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="PassBuilderBindings_8cpp.html#a0f79dad1efc582555a443cc11a8fa401">SI</a>.getFalseValue();</div>
<div class="line"><a name="l02143"></a><span class="lineno"> 2143</span>&#160; </div>
<div class="line"><a name="l02144"></a><span class="lineno"> 2144</span>&#160;  <span class="keywordflow">return</span> <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l02145"></a><span class="lineno"> 2145</span>&#160;}</div>
<div class="line"><a name="l02146"></a><span class="lineno"> 2146</span>&#160; </div>
<div class="line"><a name="l02147"></a><span class="lineno"> 2147</span>&#160;<span class="keyword">static</span> <a class="code" href="classllvm_1_1Instruction.html">Instruction</a> *moveAddAfterMinMax(<a class="code" href="namespacellvm.html#a6bf471c1030973649c2e426afc212097">SelectPatternFlavor</a> SPF, <a class="code" href="classllvm_1_1Value.html">Value</a> *<a class="code" href="ErlangGCPrinter_8cpp.html#a74b474c0616ab55c1d9487f11fd31d26">X</a>,</div>
<div class="line"><a name="l02148"></a><span class="lineno"> 2148</span>&#160;                                       <a class="code" href="classllvm_1_1Value.html">Value</a> *<a class="code" href="OcamlGCPrinter_8cpp.html#afcf2f797ed287a723263583c9b1c1bce">Y</a>,</div>
<div class="line"><a name="l02149"></a><span class="lineno"> 2149</span>&#160;                                       <a class="code" href="classllvm_1_1IRBuilder.html">InstCombiner::BuilderTy</a> &amp;<a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>) {</div>
<div class="line"><a name="l02150"></a><span class="lineno"> 2150</span>&#160;  <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(<a class="code" href="structllvm_1_1SelectPatternResult.html#a94c732c9e96c40976f0509fe0233fe7b">SelectPatternResult::isMinOrMax</a>(SPF) &amp;&amp; <span class="stringliteral">&quot;Expected min/max pattern&quot;</span>);</div>
<div class="line"><a name="l02151"></a><span class="lineno"> 2151</span>&#160;  <span class="keywordtype">bool</span> IsUnsigned = SPF == <a class="code" href="namespacellvm.html#a6bf471c1030973649c2e426afc212097a6afb3549f5028760be1bbf8ae7c04d73">SelectPatternFlavor::SPF_UMIN</a> ||</div>
<div class="line"><a name="l02152"></a><span class="lineno"> 2152</span>&#160;                    SPF == <a class="code" href="namespacellvm.html#a6bf471c1030973649c2e426afc212097a7d51d0dcfc2cc79738c77f8f5fa37138">SelectPatternFlavor::SPF_UMAX</a>;</div>
<div class="line"><a name="l02153"></a><span class="lineno"> 2153</span>&#160;  <span class="comment">// TODO: If InstSimplify could fold all cases where C2 &lt;= C1, we could change</span></div>
<div class="line"><a name="l02154"></a><span class="lineno"> 2154</span>&#160;  <span class="comment">// the constant value check to an assert.</span></div>
<div class="line"><a name="l02155"></a><span class="lineno"> 2155</span>&#160;  <a class="code" href="classllvm_1_1Value.html">Value</a> *<a class="code" href="README__ALTIVEC_8txt.html#a015846b6188ce15e08cd94c74a9df1a3">A</a>;</div>
<div class="line"><a name="l02156"></a><span class="lineno"> 2156</span>&#160;  <span class="keyword">const</span> <a class="code" href="classllvm_1_1APInt.html">APInt</a> *<a class="code" href="lib_2Target_2README_8txt.html#a2a2df5a25b9c703e74e82b48a75d0c3d">C1</a>, *C2;</div>
<div class="line"><a name="l02157"></a><span class="lineno"> 2157</span>&#160;  <span class="keywordflow">if</span> (IsUnsigned &amp;&amp; <a class="code" href="namespacellvm_1_1PatternMatch.html#a25d956d9e0beadd47ce4bc255dfa811d">match</a>(<a class="code" href="ErlangGCPrinter_8cpp.html#a74b474c0616ab55c1d9487f11fd31d26">X</a>, <a class="code" href="namespacellvm_1_1PatternMatch.html#a1b0e3cdd7316497baa075ef6fc21d2d4">m_NUWAdd</a>(<a class="code" href="namespacellvm_1_1PatternMatch.html#a24bca8838396aa81b87de8e7ac774b19">m_Value</a>(<a class="code" href="README__ALTIVEC_8txt.html#a015846b6188ce15e08cd94c74a9df1a3">A</a>), <a class="code" href="namespacellvm_1_1PatternMatch.html#aac9e78b3aa02ec087c4621358f506718">m_APInt</a>(<a class="code" href="lib_2Target_2README_8txt.html#a2a2df5a25b9c703e74e82b48a75d0c3d">C1</a>))) &amp;&amp;</div>
<div class="line"><a name="l02158"></a><span class="lineno"> 2158</span>&#160;      <a class="code" href="namespacellvm_1_1PatternMatch.html#a25d956d9e0beadd47ce4bc255dfa811d">match</a>(<a class="code" href="OcamlGCPrinter_8cpp.html#afcf2f797ed287a723263583c9b1c1bce">Y</a>, <a class="code" href="namespacellvm_1_1PatternMatch.html#aac9e78b3aa02ec087c4621358f506718">m_APInt</a>(C2)) &amp;&amp; C2-&gt;<a class="code" href="classllvm_1_1APInt.html#af4b1ccc0b78f9da9f3f3944e06007f1d">uge</a>(*<a class="code" href="lib_2Target_2README_8txt.html#a2a2df5a25b9c703e74e82b48a75d0c3d">C1</a>) &amp;&amp; <a class="code" href="ErlangGCPrinter_8cpp.html#a74b474c0616ab55c1d9487f11fd31d26">X</a>-&gt;hasNUses(2)) {</div>
<div class="line"><a name="l02159"></a><span class="lineno"> 2159</span>&#160;    <span class="comment">// umin (add nuw A, C1), C2 --&gt; add nuw (umin A, C2 - C1), C1</span></div>
<div class="line"><a name="l02160"></a><span class="lineno"> 2160</span>&#160;    <span class="comment">// umax (add nuw A, C1), C2 --&gt; add nuw (umax A, C2 - C1), C1</span></div>
<div class="line"><a name="l02161"></a><span class="lineno"> 2161</span>&#160;    <a class="code" href="classllvm_1_1Value.html">Value</a> *NewMinMax = <a class="code" href="InstCombineSelect_8cpp.html#ab9bb62fe1e1120856a8ab13089124a27">createMinMax</a>(<a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>, SPF, <a class="code" href="README__ALTIVEC_8txt.html#a015846b6188ce15e08cd94c74a9df1a3">A</a>,</div>
<div class="line"><a name="l02162"></a><span class="lineno"> 2162</span>&#160;                                    <a class="code" href="classllvm_1_1ConstantInt.html#a969709dd49c28865a482d8b870f87c46">ConstantInt::get</a>(<a class="code" href="ErlangGCPrinter_8cpp.html#a74b474c0616ab55c1d9487f11fd31d26">X</a>-&gt;getType(), *C2 - *<a class="code" href="lib_2Target_2README_8txt.html#a2a2df5a25b9c703e74e82b48a75d0c3d">C1</a>));</div>
<div class="line"><a name="l02163"></a><span class="lineno"> 2163</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="classllvm_1_1BinaryOperator.html#af85efaaa4ecdbcac97c45c8351d826b7">BinaryOperator::CreateNUW</a>(<a class="code" href="namespacellvm_1_1MCID.html#ab357441fcd1ea1f9b0d27c12700f6023a2b016c207343046b2bac45e69e76dcec">BinaryOperator::Add</a>, NewMinMax,</div>
<div class="line"><a name="l02164"></a><span class="lineno"> 2164</span>&#160;                                     <a class="code" href="classllvm_1_1ConstantInt.html#a969709dd49c28865a482d8b870f87c46">ConstantInt::get</a>(<a class="code" href="ErlangGCPrinter_8cpp.html#a74b474c0616ab55c1d9487f11fd31d26">X</a>-&gt;getType(), *<a class="code" href="lib_2Target_2README_8txt.html#a2a2df5a25b9c703e74e82b48a75d0c3d">C1</a>));</div>
<div class="line"><a name="l02165"></a><span class="lineno"> 2165</span>&#160;  }</div>
<div class="line"><a name="l02166"></a><span class="lineno"> 2166</span>&#160; </div>
<div class="line"><a name="l02167"></a><span class="lineno"> 2167</span>&#160;  <span class="keywordflow">if</span> (!IsUnsigned &amp;&amp; <a class="code" href="namespacellvm_1_1PatternMatch.html#a25d956d9e0beadd47ce4bc255dfa811d">match</a>(<a class="code" href="ErlangGCPrinter_8cpp.html#a74b474c0616ab55c1d9487f11fd31d26">X</a>, <a class="code" href="namespacellvm_1_1PatternMatch.html#a321b8e5bfbda0da1e621822399fe3960">m_NSWAdd</a>(<a class="code" href="namespacellvm_1_1PatternMatch.html#a24bca8838396aa81b87de8e7ac774b19">m_Value</a>(<a class="code" href="README__ALTIVEC_8txt.html#a015846b6188ce15e08cd94c74a9df1a3">A</a>), <a class="code" href="namespacellvm_1_1PatternMatch.html#aac9e78b3aa02ec087c4621358f506718">m_APInt</a>(<a class="code" href="lib_2Target_2README_8txt.html#a2a2df5a25b9c703e74e82b48a75d0c3d">C1</a>))) &amp;&amp;</div>
<div class="line"><a name="l02168"></a><span class="lineno"> 2168</span>&#160;      <a class="code" href="namespacellvm_1_1PatternMatch.html#a25d956d9e0beadd47ce4bc255dfa811d">match</a>(<a class="code" href="OcamlGCPrinter_8cpp.html#afcf2f797ed287a723263583c9b1c1bce">Y</a>, <a class="code" href="namespacellvm_1_1PatternMatch.html#aac9e78b3aa02ec087c4621358f506718">m_APInt</a>(C2)) &amp;&amp; <a class="code" href="ErlangGCPrinter_8cpp.html#a74b474c0616ab55c1d9487f11fd31d26">X</a>-&gt;hasNUses(2)) {</div>
<div class="line"><a name="l02169"></a><span class="lineno"> 2169</span>&#160;    <span class="keywordtype">bool</span> Overflow;</div>
<div class="line"><a name="l02170"></a><span class="lineno"> 2170</span>&#160;    <a class="code" href="classllvm_1_1APInt.html">APInt</a> Diff = C2-&gt;<a class="code" href="classllvm_1_1APInt.html#ae324de5041feaf7eb8433221cdaca9aa">ssub_ov</a>(*<a class="code" href="lib_2Target_2README_8txt.html#a2a2df5a25b9c703e74e82b48a75d0c3d">C1</a>, Overflow);</div>
<div class="line"><a name="l02171"></a><span class="lineno"> 2171</span>&#160;    <span class="keywordflow">if</span> (!Overflow) {</div>
<div class="line"><a name="l02172"></a><span class="lineno"> 2172</span>&#160;      <span class="comment">// smin (add nsw A, C1), C2 --&gt; add nsw (smin A, C2 - C1), C1</span></div>
<div class="line"><a name="l02173"></a><span class="lineno"> 2173</span>&#160;      <span class="comment">// smax (add nsw A, C1), C2 --&gt; add nsw (smax A, C2 - C1), C1</span></div>
<div class="line"><a name="l02174"></a><span class="lineno"> 2174</span>&#160;      <a class="code" href="classllvm_1_1Value.html">Value</a> *NewMinMax = <a class="code" href="InstCombineSelect_8cpp.html#ab9bb62fe1e1120856a8ab13089124a27">createMinMax</a>(<a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>, SPF, <a class="code" href="README__ALTIVEC_8txt.html#a015846b6188ce15e08cd94c74a9df1a3">A</a>,</div>
<div class="line"><a name="l02175"></a><span class="lineno"> 2175</span>&#160;                                      <a class="code" href="classllvm_1_1ConstantInt.html#a969709dd49c28865a482d8b870f87c46">ConstantInt::get</a>(<a class="code" href="ErlangGCPrinter_8cpp.html#a74b474c0616ab55c1d9487f11fd31d26">X</a>-&gt;getType(), Diff));</div>
<div class="line"><a name="l02176"></a><span class="lineno"> 2176</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="classllvm_1_1BinaryOperator.html#a82e9f72e7fce50d8b659ff72631c3793">BinaryOperator::CreateNSW</a>(<a class="code" href="namespacellvm_1_1MCID.html#ab357441fcd1ea1f9b0d27c12700f6023a2b016c207343046b2bac45e69e76dcec">BinaryOperator::Add</a>, NewMinMax,</div>
<div class="line"><a name="l02177"></a><span class="lineno"> 2177</span>&#160;                                       <a class="code" href="classllvm_1_1ConstantInt.html#a969709dd49c28865a482d8b870f87c46">ConstantInt::get</a>(<a class="code" href="ErlangGCPrinter_8cpp.html#a74b474c0616ab55c1d9487f11fd31d26">X</a>-&gt;getType(), *<a class="code" href="lib_2Target_2README_8txt.html#a2a2df5a25b9c703e74e82b48a75d0c3d">C1</a>));</div>
<div class="line"><a name="l02178"></a><span class="lineno"> 2178</span>&#160;    }</div>
<div class="line"><a name="l02179"></a><span class="lineno"> 2179</span>&#160;  }</div>
<div class="line"><a name="l02180"></a><span class="lineno"> 2180</span>&#160; </div>
<div class="line"><a name="l02181"></a><span class="lineno"> 2181</span>&#160;  <span class="keywordflow">return</span> <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l02182"></a><span class="lineno"> 2182</span>&#160;}</div>
<div class="line"><a name="l02183"></a><span class="lineno"> 2183</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l02184"></a><span class="lineno"> 2184</span>&#160;<span class="comment">/// Match a sadd_sat or ssub_sat which is using min/max to clamp the value.</span></div>
<div class="line"><a name="l02185"></a><span class="lineno"> 2185</span>&#160;<span class="comment"></span><a class="code" href="classllvm_1_1Instruction.html">Instruction</a> *InstCombinerImpl::matchSAddSubSat(<a class="code" href="classllvm_1_1SelectInst.html">SelectInst</a> &amp;MinMax1) {</div>
<div class="line"><a name="l02186"></a><span class="lineno"> 2186</span>&#160;  <a class="code" href="classllvm_1_1Type.html">Type</a> *Ty = MinMax1.<a class="code" href="classllvm_1_1Value.html#a6393a2d4fe7e10b28a0dcc35f881567b">getType</a>();</div>
<div class="line"><a name="l02187"></a><span class="lineno"> 2187</span>&#160; </div>
<div class="line"><a name="l02188"></a><span class="lineno"> 2188</span>&#160;  <span class="comment">// We are looking for a tree of:</span></div>
<div class="line"><a name="l02189"></a><span class="lineno"> 2189</span>&#160;  <span class="comment">// max(INT_MIN, min(INT_MAX, add(sext(A), sext(B))))</span></div>
<div class="line"><a name="l02190"></a><span class="lineno"> 2190</span>&#160;  <span class="comment">// Where the min and max could be reversed</span></div>
<div class="line"><a name="l02191"></a><span class="lineno"> 2191</span>&#160;  <a class="code" href="classllvm_1_1Instruction.html">Instruction</a> *MinMax2;</div>
<div class="line"><a name="l02192"></a><span class="lineno"> 2192</span>&#160;  <a class="code" href="classllvm_1_1BinaryOperator.html">BinaryOperator</a> *AddSub;</div>
<div class="line"><a name="l02193"></a><span class="lineno"> 2193</span>&#160;  <span class="keyword">const</span> <a class="code" href="classllvm_1_1APInt.html">APInt</a> *MinValue, *MaxValue;</div>
<div class="line"><a name="l02194"></a><span class="lineno"> 2194</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="namespacellvm_1_1PatternMatch.html#a25d956d9e0beadd47ce4bc255dfa811d">match</a>(&amp;MinMax1, <a class="code" href="namespacellvm_1_1PatternMatch.html#af16a6c9336ca2a17389ea709b45fe7f5">m_SMin</a>(<a class="code" href="namespacellvm_1_1PatternMatch.html#a04353aa48874f9bda89ff9059cd1a5a6">m_Instruction</a>(MinMax2), <a class="code" href="namespacellvm_1_1PatternMatch.html#aac9e78b3aa02ec087c4621358f506718">m_APInt</a>(MaxValue)))) {</div>
<div class="line"><a name="l02195"></a><span class="lineno"> 2195</span>&#160;    <span class="keywordflow">if</span> (!<a class="code" href="namespacellvm_1_1PatternMatch.html#a25d956d9e0beadd47ce4bc255dfa811d">match</a>(MinMax2, <a class="code" href="namespacellvm_1_1PatternMatch.html#a38a6a25e425f94c9836dda96f3718593">m_SMax</a>(<a class="code" href="namespacellvm_1_1PatternMatch.html#a43ac4fbaaf63a88eb5ac05f6d3e5649c">m_BinOp</a>(AddSub), <a class="code" href="namespacellvm_1_1PatternMatch.html#aac9e78b3aa02ec087c4621358f506718">m_APInt</a>(MinValue))))</div>
<div class="line"><a name="l02196"></a><span class="lineno"> 2196</span>&#160;      <span class="keywordflow">return</span> <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l02197"></a><span class="lineno"> 2197</span>&#160;  } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code" href="namespacellvm_1_1PatternMatch.html#a25d956d9e0beadd47ce4bc255dfa811d">match</a>(&amp;MinMax1,</div>
<div class="line"><a name="l02198"></a><span class="lineno"> 2198</span>&#160;                   <a class="code" href="namespacellvm_1_1PatternMatch.html#a38a6a25e425f94c9836dda96f3718593">m_SMax</a>(<a class="code" href="namespacellvm_1_1PatternMatch.html#a04353aa48874f9bda89ff9059cd1a5a6">m_Instruction</a>(MinMax2), <a class="code" href="namespacellvm_1_1PatternMatch.html#aac9e78b3aa02ec087c4621358f506718">m_APInt</a>(MinValue)))) {</div>
<div class="line"><a name="l02199"></a><span class="lineno"> 2199</span>&#160;    <span class="keywordflow">if</span> (!<a class="code" href="namespacellvm_1_1PatternMatch.html#a25d956d9e0beadd47ce4bc255dfa811d">match</a>(MinMax2, <a class="code" href="namespacellvm_1_1PatternMatch.html#af16a6c9336ca2a17389ea709b45fe7f5">m_SMin</a>(<a class="code" href="namespacellvm_1_1PatternMatch.html#a43ac4fbaaf63a88eb5ac05f6d3e5649c">m_BinOp</a>(AddSub), <a class="code" href="namespacellvm_1_1PatternMatch.html#aac9e78b3aa02ec087c4621358f506718">m_APInt</a>(MaxValue))))</div>
<div class="line"><a name="l02200"></a><span class="lineno"> 2200</span>&#160;      <span class="keywordflow">return</span> <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l02201"></a><span class="lineno"> 2201</span>&#160;  } <span class="keywordflow">else</span></div>
<div class="line"><a name="l02202"></a><span class="lineno"> 2202</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l02203"></a><span class="lineno"> 2203</span>&#160; </div>
<div class="line"><a name="l02204"></a><span class="lineno"> 2204</span>&#160;  <span class="comment">// Check that the constants clamp a saturate, and that the new type would be</span></div>
<div class="line"><a name="l02205"></a><span class="lineno"> 2205</span>&#160;  <span class="comment">// sensible to convert to.</span></div>
<div class="line"><a name="l02206"></a><span class="lineno"> 2206</span>&#160;  <span class="keywordflow">if</span> (!(*MaxValue + 1).isPowerOf2() || -*MinValue != *MaxValue + 1)</div>
<div class="line"><a name="l02207"></a><span class="lineno"> 2207</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l02208"></a><span class="lineno"> 2208</span>&#160;  <span class="comment">// In what bitwidth can this be treated as saturating arithmetics?</span></div>
<div class="line"><a name="l02209"></a><span class="lineno"> 2209</span>&#160;  <span class="keywordtype">unsigned</span> NewBitWidth = (*MaxValue + 1).logBase2() + 1;</div>
<div class="line"><a name="l02210"></a><span class="lineno"> 2210</span>&#160;  <span class="comment">// FIXME: This isn&#39;t quite right for vectors, but using the scalar type is a</span></div>
<div class="line"><a name="l02211"></a><span class="lineno"> 2211</span>&#160;  <span class="comment">// good first approximation for what should be done there.</span></div>
<div class="line"><a name="l02212"></a><span class="lineno"> 2212</span>&#160;  <span class="keywordflow">if</span> (!shouldChangeType(Ty-&gt;<a class="code" href="classllvm_1_1Type.html#a4abb39a66573f61fda80469faa5d861d">getScalarType</a>()-&gt;<a class="code" href="classllvm_1_1Type.html#a13e877ef779ba7a0688081079f4f9b03">getIntegerBitWidth</a>(), NewBitWidth))</div>
<div class="line"><a name="l02213"></a><span class="lineno"> 2213</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l02214"></a><span class="lineno"> 2214</span>&#160; </div>
<div class="line"><a name="l02215"></a><span class="lineno"> 2215</span>&#160;  <span class="comment">// Also make sure that the number of uses is as expected. The &quot;3&quot;s are for the</span></div>
<div class="line"><a name="l02216"></a><span class="lineno"> 2216</span>&#160;  <span class="comment">// the two items of min/max (the compare and the select).</span></div>
<div class="line"><a name="l02217"></a><span class="lineno"> 2217</span>&#160;  <span class="keywordflow">if</span> (MinMax2-&gt;<a class="code" href="classllvm_1_1Value.html#a72fb137716cff838d389e392b9729dc9">hasNUsesOrMore</a>(3) || AddSub-&gt;<a class="code" href="classllvm_1_1Value.html#a72fb137716cff838d389e392b9729dc9">hasNUsesOrMore</a>(3))</div>
<div class="line"><a name="l02218"></a><span class="lineno"> 2218</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l02219"></a><span class="lineno"> 2219</span>&#160; </div>
<div class="line"><a name="l02220"></a><span class="lineno"> 2220</span>&#160;  <span class="comment">// Create the new type (which can be a vector type)</span></div>
<div class="line"><a name="l02221"></a><span class="lineno"> 2221</span>&#160;  <a class="code" href="classllvm_1_1Type.html">Type</a> *NewTy = Ty-&gt;<a class="code" href="classllvm_1_1Type.html#a83725435ece9bc12c40ceb34dbd1727c">getWithNewBitWidth</a>(NewBitWidth);</div>
<div class="line"><a name="l02222"></a><span class="lineno"> 2222</span>&#160;  <span class="comment">// Match the two extends from the add/sub</span></div>
<div class="line"><a name="l02223"></a><span class="lineno"> 2223</span>&#160;  <a class="code" href="classllvm_1_1Value.html">Value</a> *<a class="code" href="README__ALTIVEC_8txt.html#a015846b6188ce15e08cd94c74a9df1a3">A</a>, *<a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a>;</div>
<div class="line"><a name="l02224"></a><span class="lineno"> 2224</span>&#160;  <span class="keywordflow">if</span>(!<a class="code" href="namespacellvm_1_1PatternMatch.html#a25d956d9e0beadd47ce4bc255dfa811d">match</a>(AddSub, <a class="code" href="namespacellvm_1_1PatternMatch.html#a43ac4fbaaf63a88eb5ac05f6d3e5649c">m_BinOp</a>(<a class="code" href="namespacellvm_1_1PatternMatch.html#aaab494a433fbb23bc68393ee8bcfc5ac">m_SExt</a>(<a class="code" href="namespacellvm_1_1PatternMatch.html#a24bca8838396aa81b87de8e7ac774b19">m_Value</a>(<a class="code" href="README__ALTIVEC_8txt.html#a015846b6188ce15e08cd94c74a9df1a3">A</a>)), <a class="code" href="namespacellvm_1_1PatternMatch.html#aaab494a433fbb23bc68393ee8bcfc5ac">m_SExt</a>(<a class="code" href="namespacellvm_1_1PatternMatch.html#a24bca8838396aa81b87de8e7ac774b19">m_Value</a>(<a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a>)))))</div>
<div class="line"><a name="l02225"></a><span class="lineno"> 2225</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l02226"></a><span class="lineno"> 2226</span>&#160;  <span class="comment">// And check the incoming values are of a type smaller than or equal to the</span></div>
<div class="line"><a name="l02227"></a><span class="lineno"> 2227</span>&#160;  <span class="comment">// size of the saturation. Otherwise the higher bits can cause different</span></div>
<div class="line"><a name="l02228"></a><span class="lineno"> 2228</span>&#160;  <span class="comment">// results.</span></div>
<div class="line"><a name="l02229"></a><span class="lineno"> 2229</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="README__ALTIVEC_8txt.html#a015846b6188ce15e08cd94c74a9df1a3">A</a>-&gt;getType()-&gt;getScalarSizeInBits() &gt; NewBitWidth ||</div>
<div class="line"><a name="l02230"></a><span class="lineno"> 2230</span>&#160;      <a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a>-&gt;getType()-&gt;getScalarSizeInBits() &gt; NewBitWidth)</div>
<div class="line"><a name="l02231"></a><span class="lineno"> 2231</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l02232"></a><span class="lineno"> 2232</span>&#160; </div>
<div class="line"><a name="l02233"></a><span class="lineno"> 2233</span>&#160;  <a class="code" href="namespacellvm_1_1Intrinsic.html#a80add6b3b1cdaec560907995127adc16">Intrinsic::ID</a> IntrinsicID;</div>
<div class="line"><a name="l02234"></a><span class="lineno"> 2234</span>&#160;  <span class="keywordflow">if</span> (AddSub-&gt;<a class="code" href="classllvm_1_1BinaryOperator.html#a31bf07f3f61525486633bc1d0bbaf029">getOpcode</a>() == <a class="code" href="namespacellvm_1_1MCID.html#ab357441fcd1ea1f9b0d27c12700f6023a2b016c207343046b2bac45e69e76dcec">Instruction::Add</a>)</div>
<div class="line"><a name="l02235"></a><span class="lineno"> 2235</span>&#160;    IntrinsicID = Intrinsic::sadd_sat;</div>
<div class="line"><a name="l02236"></a><span class="lineno"> 2236</span>&#160;  <span class="keywordflow">else</span> <span class="keywordflow">if</span> (AddSub-&gt;<a class="code" href="classllvm_1_1BinaryOperator.html#a31bf07f3f61525486633bc1d0bbaf029">getOpcode</a>() == Instruction::Sub)</div>
<div class="line"><a name="l02237"></a><span class="lineno"> 2237</span>&#160;    IntrinsicID = Intrinsic::ssub_sat;</div>
<div class="line"><a name="l02238"></a><span class="lineno"> 2238</span>&#160;  <span class="keywordflow">else</span></div>
<div class="line"><a name="l02239"></a><span class="lineno"> 2239</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l02240"></a><span class="lineno"> 2240</span>&#160; </div>
<div class="line"><a name="l02241"></a><span class="lineno"> 2241</span>&#160;  <span class="comment">// Finally create and return the sat intrinsic, truncated to the new type</span></div>
<div class="line"><a name="l02242"></a><span class="lineno"> 2242</span>&#160;  <a class="code" href="classllvm_1_1Function.html">Function</a> *<a class="code" href="MD5_8cpp.html#a96d73bbd7af15cb1fc38c3f4a3bd82e9">F</a> = <a class="code" href="namespacellvm_1_1Intrinsic.html#a842176a2c8c60a94bc788454b0828ea2">Intrinsic::getDeclaration</a>(MinMax1.<a class="code" href="classllvm_1_1Instruction.html#a4ba3a5be6c0e9b9e8a525de055836733">getModule</a>(), IntrinsicID, NewTy);</div>
<div class="line"><a name="l02243"></a><span class="lineno"> 2243</span>&#160;  <a class="code" href="classllvm_1_1Value.html">Value</a> *AT = <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.CreateSExt(<a class="code" href="README__ALTIVEC_8txt.html#a015846b6188ce15e08cd94c74a9df1a3">A</a>, NewTy);</div>
<div class="line"><a name="l02244"></a><span class="lineno"> 2244</span>&#160;  <a class="code" href="classllvm_1_1Value.html">Value</a> *<a class="code" href="structllvm_1_1BitTracker.html">BT</a> = <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.CreateSExt(<a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a>, NewTy);</div>
<div class="line"><a name="l02245"></a><span class="lineno"> 2245</span>&#160;  <a class="code" href="classllvm_1_1Value.html">Value</a> *Sat = <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.CreateCall(<a class="code" href="MD5_8cpp.html#a96d73bbd7af15cb1fc38c3f4a3bd82e9">F</a>, {AT, <a class="code" href="structllvm_1_1BitTracker.html">BT</a>});</div>
<div class="line"><a name="l02246"></a><span class="lineno"> 2246</span>&#160;  <span class="keywordflow">return</span> <a class="code" href="classllvm_1_1CastInst.html#a643fe5a9e7042f032dae78109c2b1e72">CastInst::Create</a>(Instruction::SExt, Sat, Ty);</div>
<div class="line"><a name="l02247"></a><span class="lineno"> 2247</span>&#160;}</div>
<div class="line"><a name="l02248"></a><span class="lineno"> 2248</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l02249"></a><span class="lineno"> 2249</span>&#160;<span class="comment">/// Reduce a sequence of min/max with a common operand.</span></div>
<div class="line"><a name="l02250"></a><span class="lineno"> 2250</span>&#160;<span class="comment"></span><span class="keyword">static</span> <a class="code" href="classllvm_1_1Instruction.html">Instruction</a> *factorizeMinMaxTree(<a class="code" href="namespacellvm.html#a6bf471c1030973649c2e426afc212097">SelectPatternFlavor</a> SPF, <a class="code" href="classllvm_1_1Value.html">Value</a> *LHS,</div>
<div class="line"><a name="l02251"></a><span class="lineno"> 2251</span>&#160;                                        <a class="code" href="classllvm_1_1Value.html">Value</a> *RHS,</div>
<div class="line"><a name="l02252"></a><span class="lineno"> 2252</span>&#160;                                        <a class="code" href="classllvm_1_1IRBuilder.html">InstCombiner::BuilderTy</a> &amp;<a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>) {</div>
<div class="line"><a name="l02253"></a><span class="lineno"> 2253</span>&#160;  <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(<a class="code" href="structllvm_1_1SelectPatternResult.html#a94c732c9e96c40976f0509fe0233fe7b">SelectPatternResult::isMinOrMax</a>(SPF) &amp;&amp; <span class="stringliteral">&quot;Expected a min/max&quot;</span>);</div>
<div class="line"><a name="l02254"></a><span class="lineno"> 2254</span>&#160;  <span class="comment">// TODO: Allow FP min/max with nnan/nsz.</span></div>
<div class="line"><a name="l02255"></a><span class="lineno"> 2255</span>&#160;  <span class="keywordflow">if</span> (!LHS-&gt;<a class="code" href="classllvm_1_1Value.html#a6393a2d4fe7e10b28a0dcc35f881567b">getType</a>()-&gt;<a class="code" href="classllvm_1_1Type.html#a34ee40bb2f4f5ece47ef19e5f1f57e3c">isIntOrIntVectorTy</a>())</div>
<div class="line"><a name="l02256"></a><span class="lineno"> 2256</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l02257"></a><span class="lineno"> 2257</span>&#160; </div>
<div class="line"><a name="l02258"></a><span class="lineno"> 2258</span>&#160;  <span class="comment">// Match 3 of the same min/max ops. Example: umin(umin(), umin()).</span></div>
<div class="line"><a name="l02259"></a><span class="lineno"> 2259</span>&#160;  <a class="code" href="classllvm_1_1Value.html">Value</a> *<a class="code" href="README__ALTIVEC_8txt.html#a015846b6188ce15e08cd94c74a9df1a3">A</a>, *<a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a>, *<a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a>, *<a class="code" href="BuiltinGCs_8cpp.html#a9bf617fd3367180fb96cebccfaae8dfa">D</a>;</div>
<div class="line"><a name="l02260"></a><span class="lineno"> 2260</span>&#160;  <a class="code" href="structllvm_1_1SelectPatternResult.html">SelectPatternResult</a> L = <a class="code" href="namespacellvm.html#a7aad5a0e62a54747f455651ee2dd08ed">matchSelectPattern</a>(LHS, <a class="code" href="README__ALTIVEC_8txt.html#a015846b6188ce15e08cd94c74a9df1a3">A</a>, <a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a>);</div>
<div class="line"><a name="l02261"></a><span class="lineno"> 2261</span>&#160;  <a class="code" href="structllvm_1_1SelectPatternResult.html">SelectPatternResult</a> <a class="code" href="namespacellvm_1_1RISCVFenceField.html#a147be9e9780c1e33363ea572d4c7b25fa1835091d83e0e052cd1a32c99b2be731">R</a> = <a class="code" href="namespacellvm.html#a7aad5a0e62a54747f455651ee2dd08ed">matchSelectPattern</a>(RHS, <a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a>, <a class="code" href="BuiltinGCs_8cpp.html#a9bf617fd3367180fb96cebccfaae8dfa">D</a>);</div>
<div class="line"><a name="l02262"></a><span class="lineno"> 2262</span>&#160;  <span class="keywordflow">if</span> (SPF != L.<a class="code" href="structllvm_1_1SelectPatternResult.html#a3ca9c2098248eac9051008d6eb9f321d">Flavor</a> || L.<a class="code" href="structllvm_1_1SelectPatternResult.html#a3ca9c2098248eac9051008d6eb9f321d">Flavor</a> != <a class="code" href="namespacellvm_1_1RISCVFenceField.html#a147be9e9780c1e33363ea572d4c7b25fa1835091d83e0e052cd1a32c99b2be731">R</a>.Flavor)</div>
<div class="line"><a name="l02263"></a><span class="lineno"> 2263</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l02264"></a><span class="lineno"> 2264</span>&#160; </div>
<div class="line"><a name="l02265"></a><span class="lineno"> 2265</span>&#160;  <span class="comment">// Look for a common operand. The use checks are different than usual because</span></div>
<div class="line"><a name="l02266"></a><span class="lineno"> 2266</span>&#160;  <span class="comment">// a min/max pattern typically has 2 uses of each op: 1 by the cmp and 1 by</span></div>
<div class="line"><a name="l02267"></a><span class="lineno"> 2267</span>&#160;  <span class="comment">// the select.</span></div>
<div class="line"><a name="l02268"></a><span class="lineno"> 2268</span>&#160;  <a class="code" href="classllvm_1_1Value.html">Value</a> *MinMaxOp = <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l02269"></a><span class="lineno"> 2269</span>&#160;  <a class="code" href="classllvm_1_1Value.html">Value</a> *ThirdOp = <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l02270"></a><span class="lineno"> 2270</span>&#160;  <span class="keywordflow">if</span> (!LHS-&gt;<a class="code" href="classllvm_1_1Value.html#a72fb137716cff838d389e392b9729dc9">hasNUsesOrMore</a>(3) &amp;&amp; RHS-&gt;<a class="code" href="classllvm_1_1Value.html#a72fb137716cff838d389e392b9729dc9">hasNUsesOrMore</a>(3)) {</div>
<div class="line"><a name="l02271"></a><span class="lineno"> 2271</span>&#160;    <span class="comment">// If the LHS is only used in this chain and the RHS is used outside of it,</span></div>
<div class="line"><a name="l02272"></a><span class="lineno"> 2272</span>&#160;    <span class="comment">// reuse the RHS min/max because that will eliminate the LHS.</span></div>
<div class="line"><a name="l02273"></a><span class="lineno"> 2273</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="BuiltinGCs_8cpp.html#a9bf617fd3367180fb96cebccfaae8dfa">D</a> == <a class="code" href="README__ALTIVEC_8txt.html#a015846b6188ce15e08cd94c74a9df1a3">A</a> || <a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a> == <a class="code" href="README__ALTIVEC_8txt.html#a015846b6188ce15e08cd94c74a9df1a3">A</a>) {</div>
<div class="line"><a name="l02274"></a><span class="lineno"> 2274</span>&#160;      <span class="comment">// min(min(a, b), min(c, a)) --&gt; min(min(c, a), b)</span></div>
<div class="line"><a name="l02275"></a><span class="lineno"> 2275</span>&#160;      <span class="comment">// min(min(a, b), min(a, d)) --&gt; min(min(a, d), b)</span></div>
<div class="line"><a name="l02276"></a><span class="lineno"> 2276</span>&#160;      MinMaxOp = RHS;</div>
<div class="line"><a name="l02277"></a><span class="lineno"> 2277</span>&#160;      ThirdOp = <a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a>;</div>
<div class="line"><a name="l02278"></a><span class="lineno"> 2278</span>&#160;    } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code" href="BuiltinGCs_8cpp.html#a9bf617fd3367180fb96cebccfaae8dfa">D</a> == <a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a> || <a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a> == <a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a>) {</div>
<div class="line"><a name="l02279"></a><span class="lineno"> 2279</span>&#160;      <span class="comment">// min(min(a, b), min(c, b)) --&gt; min(min(c, b), a)</span></div>
<div class="line"><a name="l02280"></a><span class="lineno"> 2280</span>&#160;      <span class="comment">// min(min(a, b), min(b, d)) --&gt; min(min(b, d), a)</span></div>
<div class="line"><a name="l02281"></a><span class="lineno"> 2281</span>&#160;      MinMaxOp = RHS;</div>
<div class="line"><a name="l02282"></a><span class="lineno"> 2282</span>&#160;      ThirdOp = <a class="code" href="README__ALTIVEC_8txt.html#a015846b6188ce15e08cd94c74a9df1a3">A</a>;</div>
<div class="line"><a name="l02283"></a><span class="lineno"> 2283</span>&#160;    }</div>
<div class="line"><a name="l02284"></a><span class="lineno"> 2284</span>&#160;  } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (!RHS-&gt;<a class="code" href="classllvm_1_1Value.html#a72fb137716cff838d389e392b9729dc9">hasNUsesOrMore</a>(3)) {</div>
<div class="line"><a name="l02285"></a><span class="lineno"> 2285</span>&#160;    <span class="comment">// Reuse the LHS. This will eliminate the RHS.</span></div>
<div class="line"><a name="l02286"></a><span class="lineno"> 2286</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="BuiltinGCs_8cpp.html#a9bf617fd3367180fb96cebccfaae8dfa">D</a> == <a class="code" href="README__ALTIVEC_8txt.html#a015846b6188ce15e08cd94c74a9df1a3">A</a> || <a class="code" href="BuiltinGCs_8cpp.html#a9bf617fd3367180fb96cebccfaae8dfa">D</a> == <a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a>) {</div>
<div class="line"><a name="l02287"></a><span class="lineno"> 2287</span>&#160;      <span class="comment">// min(min(a, b), min(c, a)) --&gt; min(min(a, b), c)</span></div>
<div class="line"><a name="l02288"></a><span class="lineno"> 2288</span>&#160;      <span class="comment">// min(min(a, b), min(c, b)) --&gt; min(min(a, b), c)</span></div>
<div class="line"><a name="l02289"></a><span class="lineno"> 2289</span>&#160;      MinMaxOp = LHS;</div>
<div class="line"><a name="l02290"></a><span class="lineno"> 2290</span>&#160;      ThirdOp = <a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a>;</div>
<div class="line"><a name="l02291"></a><span class="lineno"> 2291</span>&#160;    } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a> == <a class="code" href="README__ALTIVEC_8txt.html#a015846b6188ce15e08cd94c74a9df1a3">A</a> || <a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a> == <a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a>) {</div>
<div class="line"><a name="l02292"></a><span class="lineno"> 2292</span>&#160;      <span class="comment">// min(min(a, b), min(b, d)) --&gt; min(min(a, b), d)</span></div>
<div class="line"><a name="l02293"></a><span class="lineno"> 2293</span>&#160;      <span class="comment">// min(min(a, b), min(c, b)) --&gt; min(min(a, b), d)</span></div>
<div class="line"><a name="l02294"></a><span class="lineno"> 2294</span>&#160;      MinMaxOp = LHS;</div>
<div class="line"><a name="l02295"></a><span class="lineno"> 2295</span>&#160;      ThirdOp = <a class="code" href="BuiltinGCs_8cpp.html#a9bf617fd3367180fb96cebccfaae8dfa">D</a>;</div>
<div class="line"><a name="l02296"></a><span class="lineno"> 2296</span>&#160;    }</div>
<div class="line"><a name="l02297"></a><span class="lineno"> 2297</span>&#160;  }</div>
<div class="line"><a name="l02298"></a><span class="lineno"> 2298</span>&#160;  <span class="keywordflow">if</span> (!MinMaxOp || !ThirdOp)</div>
<div class="line"><a name="l02299"></a><span class="lineno"> 2299</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l02300"></a><span class="lineno"> 2300</span>&#160; </div>
<div class="line"><a name="l02301"></a><span class="lineno"> 2301</span>&#160;  <a class="code" href="classllvm_1_1CmpInst.html#a2be3583dac92a031fa1458d4d992c78b">CmpInst::Predicate</a> <a class="code" href="README-SSE_8txt.html#a63d206a063eefcdf8c318ded97b65020">P</a> = <a class="code" href="namespacellvm.html#a493bd393688f22538e5de34117e70236">getMinMaxPred</a>(SPF);</div>
<div class="line"><a name="l02302"></a><span class="lineno"> 2302</span>&#160;  <a class="code" href="classllvm_1_1Value.html">Value</a> *CmpABC = <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.CreateICmp(<a class="code" href="README-SSE_8txt.html#a63d206a063eefcdf8c318ded97b65020">P</a>, MinMaxOp, ThirdOp);</div>
<div class="line"><a name="l02303"></a><span class="lineno"> 2303</span>&#160;  <span class="keywordflow">return</span> <a class="code" href="classllvm_1_1SelectInst.html#aa55fb74dd22008fdcc26a63f44576022">SelectInst::Create</a>(CmpABC, MinMaxOp, ThirdOp);</div>
<div class="line"><a name="l02304"></a><span class="lineno"> 2304</span>&#160;}</div>
<div class="line"><a name="l02305"></a><span class="lineno"> 2305</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l02306"></a><span class="lineno"> 2306</span>&#160;<span class="comment">/// Try to reduce a funnel/rotate pattern that includes a compare and select</span></div>
<div class="line"><a name="l02307"></a><span class="lineno"> 2307</span>&#160;<span class="comment">/// into a funnel shift intrinsic. Example:</span></div>
<div class="line"><a name="l02308"></a><span class="lineno"> 2308</span>&#160;<span class="comment">/// rotl32(a, b) --&gt; (b == 0 ? a : ((a &gt;&gt; (32 - b)) | (a &lt;&lt; b)))</span></div>
<div class="line"><a name="l02309"></a><span class="lineno"> 2309</span>&#160;<span class="comment">///              --&gt; call llvm.fshl.i32(a, a, b)</span></div>
<div class="line"><a name="l02310"></a><span class="lineno"> 2310</span>&#160;<span class="comment">/// fshl32(a, b, c) --&gt; (c == 0 ? a : ((b &gt;&gt; (32 - c)) | (a &lt;&lt; c)))</span></div>
<div class="line"><a name="l02311"></a><span class="lineno"> 2311</span>&#160;<span class="comment">///                 --&gt; call llvm.fshl.i32(a, b, c)</span></div>
<div class="line"><a name="l02312"></a><span class="lineno"> 2312</span>&#160;<span class="comment">/// fshr32(a, b, c) --&gt; (c == 0 ? b : ((a &gt;&gt; (32 - c)) | (b &lt;&lt; c)))</span></div>
<div class="line"><a name="l02313"></a><span class="lineno"> 2313</span>&#160;<span class="comment">///                 --&gt; call llvm.fshr.i32(a, b, c)</span></div>
<div class="line"><a name="l02314"></a><span class="lineno"> 2314</span>&#160;<span class="comment"></span><span class="keyword">static</span> <a class="code" href="classllvm_1_1Instruction.html">Instruction</a> *foldSelectFunnelShift(<a class="code" href="classllvm_1_1SelectInst.html">SelectInst</a> &amp;Sel,</div>
<div class="line"><a name="l02315"></a><span class="lineno"> 2315</span>&#160;                                          <a class="code" href="classllvm_1_1IRBuilder.html">InstCombiner::BuilderTy</a> &amp;<a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>) {</div>
<div class="line"><a name="l02316"></a><span class="lineno"> 2316</span>&#160;  <span class="comment">// This must be a power-of-2 type for a bitmasking transform to be valid.</span></div>
<div class="line"><a name="l02317"></a><span class="lineno"> 2317</span>&#160;  <span class="keywordtype">unsigned</span> <a class="code" href="namespacellvm_1_1AMDGPU_1_1Hwreg.html#a6467ebe1e09a75203dd5f14bdfe21d11">Width</a> = Sel.<a class="code" href="classllvm_1_1Value.html#a6393a2d4fe7e10b28a0dcc35f881567b">getType</a>()-&gt;<a class="code" href="classllvm_1_1Type.html#a9f382207d841377156d4c7868b66b9a5">getScalarSizeInBits</a>();</div>
<div class="line"><a name="l02318"></a><span class="lineno"> 2318</span>&#160;  <span class="keywordflow">if</span> (!<a class="code" href="namespacellvm.html#a6dec2b5d3e04b47adf4d918d678e81c9">isPowerOf2_32</a>(<a class="code" href="namespacellvm_1_1AMDGPU_1_1Hwreg.html#a6467ebe1e09a75203dd5f14bdfe21d11">Width</a>))</div>
<div class="line"><a name="l02319"></a><span class="lineno"> 2319</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l02320"></a><span class="lineno"> 2320</span>&#160; </div>
<div class="line"><a name="l02321"></a><span class="lineno"> 2321</span>&#160;  <a class="code" href="classllvm_1_1BinaryOperator.html">BinaryOperator</a> *Or0, *Or1;</div>
<div class="line"><a name="l02322"></a><span class="lineno"> 2322</span>&#160;  <span class="keywordflow">if</span> (!<a class="code" href="namespacellvm_1_1PatternMatch.html#a25d956d9e0beadd47ce4bc255dfa811d">match</a>(Sel.<a class="code" href="classllvm_1_1SelectInst.html#a59b0ee738ec17984b97128e7f1594db3">getFalseValue</a>(), <a class="code" href="namespacellvm_1_1PatternMatch.html#aca6428e7fec51ba0b55594f469eb9691">m_OneUse</a>(<a class="code" href="namespacellvm_1_1PatternMatch.html#a42569041ddafba7d40243e126af07f42">m_Or</a>(<a class="code" href="namespacellvm_1_1PatternMatch.html#a43ac4fbaaf63a88eb5ac05f6d3e5649c">m_BinOp</a>(Or0), <a class="code" href="namespacellvm_1_1PatternMatch.html#a43ac4fbaaf63a88eb5ac05f6d3e5649c">m_BinOp</a>(Or1)))))</div>
<div class="line"><a name="l02323"></a><span class="lineno"> 2323</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l02324"></a><span class="lineno"> 2324</span>&#160; </div>
<div class="line"><a name="l02325"></a><span class="lineno"> 2325</span>&#160;  <a class="code" href="classllvm_1_1Value.html">Value</a> *SV0, *SV1, *SA0, *SA1;</div>
<div class="line"><a name="l02326"></a><span class="lineno"> 2326</span>&#160;  <span class="keywordflow">if</span> (!<a class="code" href="namespacellvm_1_1PatternMatch.html#a25d956d9e0beadd47ce4bc255dfa811d">match</a>(Or0, <a class="code" href="namespacellvm_1_1PatternMatch.html#aca6428e7fec51ba0b55594f469eb9691">m_OneUse</a>(<a class="code" href="namespacellvm_1_1PatternMatch.html#a595e5029858e33416e500bed9317d309">m_LogicalShift</a>(<a class="code" href="namespacellvm_1_1PatternMatch.html#a24bca8838396aa81b87de8e7ac774b19">m_Value</a>(SV0),</div>
<div class="line"><a name="l02327"></a><span class="lineno"> 2327</span>&#160;                                          <a class="code" href="namespacellvm_1_1PatternMatch.html#a92ad549d62e33f9f5b8c3bc4b510b365">m_ZExtOrSelf</a>(<a class="code" href="namespacellvm_1_1PatternMatch.html#a24bca8838396aa81b87de8e7ac774b19">m_Value</a>(SA0))))) ||</div>
<div class="line"><a name="l02328"></a><span class="lineno"> 2328</span>&#160;      !<a class="code" href="namespacellvm_1_1PatternMatch.html#a25d956d9e0beadd47ce4bc255dfa811d">match</a>(Or1, <a class="code" href="namespacellvm_1_1PatternMatch.html#aca6428e7fec51ba0b55594f469eb9691">m_OneUse</a>(<a class="code" href="namespacellvm_1_1PatternMatch.html#a595e5029858e33416e500bed9317d309">m_LogicalShift</a>(<a class="code" href="namespacellvm_1_1PatternMatch.html#a24bca8838396aa81b87de8e7ac774b19">m_Value</a>(SV1),</div>
<div class="line"><a name="l02329"></a><span class="lineno"> 2329</span>&#160;                                          <a class="code" href="namespacellvm_1_1PatternMatch.html#a92ad549d62e33f9f5b8c3bc4b510b365">m_ZExtOrSelf</a>(<a class="code" href="namespacellvm_1_1PatternMatch.html#a24bca8838396aa81b87de8e7ac774b19">m_Value</a>(SA1))))) ||</div>
<div class="line"><a name="l02330"></a><span class="lineno"> 2330</span>&#160;      Or0-&gt;<a class="code" href="classllvm_1_1BinaryOperator.html#a31bf07f3f61525486633bc1d0bbaf029">getOpcode</a>() == Or1-&gt;<a class="code" href="classllvm_1_1BinaryOperator.html#a31bf07f3f61525486633bc1d0bbaf029">getOpcode</a>())</div>
<div class="line"><a name="l02331"></a><span class="lineno"> 2331</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l02332"></a><span class="lineno"> 2332</span>&#160; </div>
<div class="line"><a name="l02333"></a><span class="lineno"> 2333</span>&#160;  <span class="comment">// Canonicalize to or(shl(SV0, SA0), lshr(SV1, SA1)).</span></div>
<div class="line"><a name="l02334"></a><span class="lineno"> 2334</span>&#160;  <span class="keywordflow">if</span> (Or0-&gt;<a class="code" href="classllvm_1_1BinaryOperator.html#a31bf07f3f61525486633bc1d0bbaf029">getOpcode</a>() == BinaryOperator::LShr) {</div>
<div class="line"><a name="l02335"></a><span class="lineno"> 2335</span>&#160;    <a class="code" href="namespacestd.html#ab8424022895aee3e366fb9a32f2883cb">std::swap</a>(Or0, Or1);</div>
<div class="line"><a name="l02336"></a><span class="lineno"> 2336</span>&#160;    <a class="code" href="namespacestd.html#ab8424022895aee3e366fb9a32f2883cb">std::swap</a>(SV0, SV1);</div>
<div class="line"><a name="l02337"></a><span class="lineno"> 2337</span>&#160;    <a class="code" href="namespacestd.html#ab8424022895aee3e366fb9a32f2883cb">std::swap</a>(SA0, SA1);</div>
<div class="line"><a name="l02338"></a><span class="lineno"> 2338</span>&#160;  }</div>
<div class="line"><a name="l02339"></a><span class="lineno"> 2339</span>&#160;  <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(Or0-&gt;<a class="code" href="classllvm_1_1BinaryOperator.html#a31bf07f3f61525486633bc1d0bbaf029">getOpcode</a>() == BinaryOperator::Shl &amp;&amp;</div>
<div class="line"><a name="l02340"></a><span class="lineno"> 2340</span>&#160;         Or1-&gt;<a class="code" href="classllvm_1_1BinaryOperator.html#a31bf07f3f61525486633bc1d0bbaf029">getOpcode</a>() == BinaryOperator::LShr &amp;&amp;</div>
<div class="line"><a name="l02341"></a><span class="lineno"> 2341</span>&#160;         <span class="stringliteral">&quot;Illegal or(shift,shift) pair&quot;</span>);</div>
<div class="line"><a name="l02342"></a><span class="lineno"> 2342</span>&#160; </div>
<div class="line"><a name="l02343"></a><span class="lineno"> 2343</span>&#160;  <span class="comment">// Check the shift amounts to see if they are an opposite pair.</span></div>
<div class="line"><a name="l02344"></a><span class="lineno"> 2344</span>&#160;  <a class="code" href="classllvm_1_1Value.html">Value</a> *ShAmt;</div>
<div class="line"><a name="l02345"></a><span class="lineno"> 2345</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="namespacellvm_1_1PatternMatch.html#a25d956d9e0beadd47ce4bc255dfa811d">match</a>(SA1, <a class="code" href="namespacellvm_1_1PatternMatch.html#aca6428e7fec51ba0b55594f469eb9691">m_OneUse</a>(<a class="code" href="namespacellvm_1_1PatternMatch.html#ac3ed5602889a22db44a16e1b97fac5b8">m_Sub</a>(<a class="code" href="namespacellvm_1_1PatternMatch.html#a3acbd0be97863e3e03e3b85641254018">m_SpecificInt</a>(<a class="code" href="namespacellvm_1_1AMDGPU_1_1Hwreg.html#a6467ebe1e09a75203dd5f14bdfe21d11">Width</a>), <a class="code" href="namespacellvm_1_1PatternMatch.html#a2d9861feadd3a09792967a012559e7b2">m_Specific</a>(SA0)))))</div>
<div class="line"><a name="l02346"></a><span class="lineno"> 2346</span>&#160;    ShAmt = SA0;</div>
<div class="line"><a name="l02347"></a><span class="lineno"> 2347</span>&#160;  <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code" href="namespacellvm_1_1PatternMatch.html#a25d956d9e0beadd47ce4bc255dfa811d">match</a>(SA0, <a class="code" href="namespacellvm_1_1PatternMatch.html#aca6428e7fec51ba0b55594f469eb9691">m_OneUse</a>(<a class="code" href="namespacellvm_1_1PatternMatch.html#ac3ed5602889a22db44a16e1b97fac5b8">m_Sub</a>(<a class="code" href="namespacellvm_1_1PatternMatch.html#a3acbd0be97863e3e03e3b85641254018">m_SpecificInt</a>(<a class="code" href="namespacellvm_1_1AMDGPU_1_1Hwreg.html#a6467ebe1e09a75203dd5f14bdfe21d11">Width</a>), <a class="code" href="namespacellvm_1_1PatternMatch.html#a2d9861feadd3a09792967a012559e7b2">m_Specific</a>(SA1)))))</div>
<div class="line"><a name="l02348"></a><span class="lineno"> 2348</span>&#160;    ShAmt = SA1;</div>
<div class="line"><a name="l02349"></a><span class="lineno"> 2349</span>&#160;  <span class="keywordflow">else</span></div>
<div class="line"><a name="l02350"></a><span class="lineno"> 2350</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l02351"></a><span class="lineno"> 2351</span>&#160; </div>
<div class="line"><a name="l02352"></a><span class="lineno"> 2352</span>&#160;  <span class="comment">// We should now have this pattern:</span></div>
<div class="line"><a name="l02353"></a><span class="lineno"> 2353</span>&#160;  <span class="comment">// select ?, TVal, (or (shl SV0, SA0), (lshr SV1, SA1))</span></div>
<div class="line"><a name="l02354"></a><span class="lineno"> 2354</span>&#160;  <span class="comment">// The false value of the select must be a funnel-shift of the true value:</span></div>
<div class="line"><a name="l02355"></a><span class="lineno"> 2355</span>&#160;  <span class="comment">// IsFShl -&gt; TVal must be SV0 else TVal must be SV1.</span></div>
<div class="line"><a name="l02356"></a><span class="lineno"> 2356</span>&#160;  <span class="keywordtype">bool</span> IsFshl = (ShAmt == SA0);</div>
<div class="line"><a name="l02357"></a><span class="lineno"> 2357</span>&#160;  <a class="code" href="classllvm_1_1Value.html">Value</a> *TVal = Sel.<a class="code" href="classllvm_1_1SelectInst.html#a483700f6bf3ac62445850d768cf188f6">getTrueValue</a>();</div>
<div class="line"><a name="l02358"></a><span class="lineno"> 2358</span>&#160;  <span class="keywordflow">if</span> ((IsFshl &amp;&amp; TVal != SV0) || (!IsFshl &amp;&amp; TVal != SV1))</div>
<div class="line"><a name="l02359"></a><span class="lineno"> 2359</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l02360"></a><span class="lineno"> 2360</span>&#160; </div>
<div class="line"><a name="l02361"></a><span class="lineno"> 2361</span>&#160;  <span class="comment">// Finally, see if the select is filtering out a shift-by-zero.</span></div>
<div class="line"><a name="l02362"></a><span class="lineno"> 2362</span>&#160;  <a class="code" href="classllvm_1_1Value.html">Value</a> *<a class="code" href="BasicBlockSections_8cpp.html#a5fd0741d696f28faf65b33f6c6af8fda">Cond</a> = Sel.<a class="code" href="classllvm_1_1SelectInst.html#a93a29cd4a753518a59c20c1b6ec88c76">getCondition</a>();</div>
<div class="line"><a name="l02363"></a><span class="lineno"> 2363</span>&#160;  <a class="code" href="classllvm_1_1CmpInst.html#a2be3583dac92a031fa1458d4d992c78b">ICmpInst::Predicate</a> Pred;</div>
<div class="line"><a name="l02364"></a><span class="lineno"> 2364</span>&#160;  <span class="keywordflow">if</span> (!<a class="code" href="namespacellvm_1_1PatternMatch.html#a25d956d9e0beadd47ce4bc255dfa811d">match</a>(<a class="code" href="BasicBlockSections_8cpp.html#a5fd0741d696f28faf65b33f6c6af8fda">Cond</a>, <a class="code" href="namespacellvm_1_1PatternMatch.html#aca6428e7fec51ba0b55594f469eb9691">m_OneUse</a>(<a class="code" href="namespacellvm_1_1PatternMatch.html#a3fe9b3ddb71b9fb53d9fc74b3a0710bf">m_ICmp</a>(Pred, <a class="code" href="namespacellvm_1_1PatternMatch.html#a2d9861feadd3a09792967a012559e7b2">m_Specific</a>(ShAmt), <a class="code" href="namespacellvm_1_1PatternMatch.html#a874d53817a4923de8e58af6b278c09b0">m_ZeroInt</a>()))) ||</div>
<div class="line"><a name="l02365"></a><span class="lineno"> 2365</span>&#160;      Pred != <a class="code" href="classllvm_1_1CmpInst.html#a2be3583dac92a031fa1458d4d992c78baa719225e2de4059f93fd3209e1f48218">ICmpInst::ICMP_EQ</a>)</div>
<div class="line"><a name="l02366"></a><span class="lineno"> 2366</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l02367"></a><span class="lineno"> 2367</span>&#160; </div>
<div class="line"><a name="l02368"></a><span class="lineno"> 2368</span>&#160;  <span class="comment">// If this is not a rotate then the select was blocking poison from the</span></div>
<div class="line"><a name="l02369"></a><span class="lineno"> 2369</span>&#160;  <span class="comment">// &#39;shift-by-zero&#39; non-TVal, but a funnel shift won&#39;t - so freeze it.</span></div>
<div class="line"><a name="l02370"></a><span class="lineno"> 2370</span>&#160;  <span class="keywordflow">if</span> (SV0 != SV1) {</div>
<div class="line"><a name="l02371"></a><span class="lineno"> 2371</span>&#160;    <span class="keywordflow">if</span> (IsFshl &amp;&amp; !<a class="code" href="namespacellvm.html#ae058c4750de2c85f12a1f96841ac9ae3">llvm::isGuaranteedNotToBePoison</a>(SV1))</div>
<div class="line"><a name="l02372"></a><span class="lineno"> 2372</span>&#160;      SV1 = <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.CreateFreeze(SV1);</div>
<div class="line"><a name="l02373"></a><span class="lineno"> 2373</span>&#160;    <span class="keywordflow">else</span> <span class="keywordflow">if</span> (!IsFshl &amp;&amp; !<a class="code" href="namespacellvm.html#ae058c4750de2c85f12a1f96841ac9ae3">llvm::isGuaranteedNotToBePoison</a>(SV0))</div>
<div class="line"><a name="l02374"></a><span class="lineno"> 2374</span>&#160;      SV0 = <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.CreateFreeze(SV0);</div>
<div class="line"><a name="l02375"></a><span class="lineno"> 2375</span>&#160;  }</div>
<div class="line"><a name="l02376"></a><span class="lineno"> 2376</span>&#160; </div>
<div class="line"><a name="l02377"></a><span class="lineno"> 2377</span>&#160;  <span class="comment">// This is a funnel/rotate that avoids shift-by-bitwidth UB in a suboptimal way.</span></div>
<div class="line"><a name="l02378"></a><span class="lineno"> 2378</span>&#160;  <span class="comment">// Convert to funnel shift intrinsic.</span></div>
<div class="line"><a name="l02379"></a><span class="lineno"> 2379</span>&#160;  <a class="code" href="namespacellvm_1_1Intrinsic.html#a80add6b3b1cdaec560907995127adc16">Intrinsic::ID</a> IID = IsFshl ? Intrinsic::fshl : Intrinsic::fshr;</div>
<div class="line"><a name="l02380"></a><span class="lineno"> 2380</span>&#160;  <a class="code" href="classllvm_1_1Function.html">Function</a> *<a class="code" href="MD5_8cpp.html#a96d73bbd7af15cb1fc38c3f4a3bd82e9">F</a> = <a class="code" href="namespacellvm_1_1Intrinsic.html#a842176a2c8c60a94bc788454b0828ea2">Intrinsic::getDeclaration</a>(Sel.<a class="code" href="classllvm_1_1Instruction.html#a4ba3a5be6c0e9b9e8a525de055836733">getModule</a>(), IID, Sel.<a class="code" href="classllvm_1_1Value.html#a6393a2d4fe7e10b28a0dcc35f881567b">getType</a>());</div>
<div class="line"><a name="l02381"></a><span class="lineno"> 2381</span>&#160;  ShAmt = <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.CreateZExt(ShAmt, Sel.<a class="code" href="classllvm_1_1Value.html#a6393a2d4fe7e10b28a0dcc35f881567b">getType</a>());</div>
<div class="line"><a name="l02382"></a><span class="lineno"> 2382</span>&#160;  <span class="keywordflow">return</span> <a class="code" href="classllvm_1_1CallInst.html#a850d8262cd900958b3153c4aa080b2bb">CallInst::Create</a>(<a class="code" href="MD5_8cpp.html#a96d73bbd7af15cb1fc38c3f4a3bd82e9">F</a>, { SV0, SV1, ShAmt });</div>
<div class="line"><a name="l02383"></a><span class="lineno"> 2383</span>&#160;}</div>
<div class="line"><a name="l02384"></a><span class="lineno"> 2384</span>&#160; </div>
<div class="line"><a name="l02385"></a><span class="lineno"> 2385</span>&#160;<span class="keyword">static</span> <a class="code" href="classllvm_1_1Instruction.html">Instruction</a> *foldSelectToCopysign(<a class="code" href="classllvm_1_1SelectInst.html">SelectInst</a> &amp;Sel,</div>
<div class="line"><a name="l02386"></a><span class="lineno"> 2386</span>&#160;                                         <a class="code" href="classllvm_1_1IRBuilder.html">InstCombiner::BuilderTy</a> &amp;<a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>) {</div>
<div class="line"><a name="l02387"></a><span class="lineno"> 2387</span>&#160;  <a class="code" href="classllvm_1_1Value.html">Value</a> *<a class="code" href="BasicBlockSections_8cpp.html#a5fd0741d696f28faf65b33f6c6af8fda">Cond</a> = Sel.<a class="code" href="classllvm_1_1SelectInst.html#a93a29cd4a753518a59c20c1b6ec88c76">getCondition</a>();</div>
<div class="line"><a name="l02388"></a><span class="lineno"> 2388</span>&#160;  <a class="code" href="classllvm_1_1Value.html">Value</a> *TVal = Sel.<a class="code" href="classllvm_1_1SelectInst.html#a483700f6bf3ac62445850d768cf188f6">getTrueValue</a>();</div>
<div class="line"><a name="l02389"></a><span class="lineno"> 2389</span>&#160;  <a class="code" href="classllvm_1_1Value.html">Value</a> *FVal = Sel.<a class="code" href="classllvm_1_1SelectInst.html#a59b0ee738ec17984b97128e7f1594db3">getFalseValue</a>();</div>
<div class="line"><a name="l02390"></a><span class="lineno"> 2390</span>&#160;  <a class="code" href="classllvm_1_1Type.html">Type</a> *SelType = Sel.<a class="code" href="classllvm_1_1Value.html#a6393a2d4fe7e10b28a0dcc35f881567b">getType</a>();</div>
<div class="line"><a name="l02391"></a><span class="lineno"> 2391</span>&#160; </div>
<div class="line"><a name="l02392"></a><span class="lineno"> 2392</span>&#160;  <span class="comment">// Match select ?, TC, FC where the constants are equal but negated.</span></div>
<div class="line"><a name="l02393"></a><span class="lineno"> 2393</span>&#160;  <span class="comment">// TODO: Generalize to handle a negated variable operand?</span></div>
<div class="line"><a name="l02394"></a><span class="lineno"> 2394</span>&#160;  <span class="keyword">const</span> <a class="code" href="classllvm_1_1APFloat.html">APFloat</a> *TC, *<a class="code" href="namespaceR600__InstFlag.html#a23106439cc906be24dc8953eedd3940da8949a42ff4563a29d1e70e18338fd522">FC</a>;</div>
<div class="line"><a name="l02395"></a><span class="lineno"> 2395</span>&#160;  <span class="keywordflow">if</span> (!<a class="code" href="namespacellvm_1_1PatternMatch.html#a25d956d9e0beadd47ce4bc255dfa811d">match</a>(TVal, <a class="code" href="namespacellvm_1_1PatternMatch.html#acd794d7b3653822f61ba126e1678e03f">m_APFloat</a>(TC)) || !<a class="code" href="namespacellvm_1_1PatternMatch.html#a25d956d9e0beadd47ce4bc255dfa811d">match</a>(FVal, <a class="code" href="namespacellvm_1_1PatternMatch.html#acd794d7b3653822f61ba126e1678e03f">m_APFloat</a>(<a class="code" href="namespaceR600__InstFlag.html#a23106439cc906be24dc8953eedd3940da8949a42ff4563a29d1e70e18338fd522">FC</a>)) ||</div>
<div class="line"><a name="l02396"></a><span class="lineno"> 2396</span>&#160;      !<a class="code" href="namespacellvm.html#a2816e84a08c108d18bc4665bc1817e01">abs</a>(*TC).<a class="code" href="classllvm_1_1APFloat.html#a28cbb0780286695406353e6a295e12c8">bitwiseIsEqual</a>(<a class="code" href="namespacellvm.html#a2816e84a08c108d18bc4665bc1817e01">abs</a>(*<a class="code" href="namespaceR600__InstFlag.html#a23106439cc906be24dc8953eedd3940da8949a42ff4563a29d1e70e18338fd522">FC</a>)))</div>
<div class="line"><a name="l02397"></a><span class="lineno"> 2397</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l02398"></a><span class="lineno"> 2398</span>&#160; </div>
<div class="line"><a name="l02399"></a><span class="lineno"> 2399</span>&#160;  <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(TC != <a class="code" href="namespaceR600__InstFlag.html#a23106439cc906be24dc8953eedd3940da8949a42ff4563a29d1e70e18338fd522">FC</a> &amp;&amp; <span class="stringliteral">&quot;Expected equal select arms to simplify&quot;</span>);</div>
<div class="line"><a name="l02400"></a><span class="lineno"> 2400</span>&#160; </div>
<div class="line"><a name="l02401"></a><span class="lineno"> 2401</span>&#160;  <a class="code" href="classllvm_1_1Value.html">Value</a> *<a class="code" href="ErlangGCPrinter_8cpp.html#a74b474c0616ab55c1d9487f11fd31d26">X</a>;</div>
<div class="line"><a name="l02402"></a><span class="lineno"> 2402</span>&#160;  <span class="keyword">const</span> <a class="code" href="classllvm_1_1APInt.html">APInt</a> *<a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a>;</div>
<div class="line"><a name="l02403"></a><span class="lineno"> 2403</span>&#160;  <span class="keywordtype">bool</span> IsTrueIfSignSet;</div>
<div class="line"><a name="l02404"></a><span class="lineno"> 2404</span>&#160;  <a class="code" href="classllvm_1_1CmpInst.html#a2be3583dac92a031fa1458d4d992c78b">ICmpInst::Predicate</a> Pred;</div>
<div class="line"><a name="l02405"></a><span class="lineno"> 2405</span>&#160;  <span class="keywordflow">if</span> (!<a class="code" href="namespacellvm_1_1PatternMatch.html#a25d956d9e0beadd47ce4bc255dfa811d">match</a>(<a class="code" href="BasicBlockSections_8cpp.html#a5fd0741d696f28faf65b33f6c6af8fda">Cond</a>, <a class="code" href="namespacellvm_1_1PatternMatch.html#aca6428e7fec51ba0b55594f469eb9691">m_OneUse</a>(<a class="code" href="namespacellvm_1_1PatternMatch.html#a3fe9b3ddb71b9fb53d9fc74b3a0710bf">m_ICmp</a>(Pred, <a class="code" href="namespacellvm_1_1PatternMatch.html#ac0467ca7fad871738b10db95feb40dad">m_BitCast</a>(<a class="code" href="namespacellvm_1_1PatternMatch.html#a24bca8838396aa81b87de8e7ac774b19">m_Value</a>(<a class="code" href="ErlangGCPrinter_8cpp.html#a74b474c0616ab55c1d9487f11fd31d26">X</a>)), <a class="code" href="namespacellvm_1_1PatternMatch.html#aac9e78b3aa02ec087c4621358f506718">m_APInt</a>(<a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a>)))) ||</div>
<div class="line"><a name="l02406"></a><span class="lineno"> 2406</span>&#160;      !<a class="code" href="classllvm_1_1InstCombiner.html#ad6a655e662d683cd55d2201b5e6a6360">InstCombiner::isSignBitCheck</a>(Pred, *<a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a>, IsTrueIfSignSet) ||</div>
<div class="line"><a name="l02407"></a><span class="lineno"> 2407</span>&#160;      <a class="code" href="ErlangGCPrinter_8cpp.html#a74b474c0616ab55c1d9487f11fd31d26">X</a>-&gt;getType() != SelType)</div>
<div class="line"><a name="l02408"></a><span class="lineno"> 2408</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l02409"></a><span class="lineno"> 2409</span>&#160; </div>
<div class="line"><a name="l02410"></a><span class="lineno"> 2410</span>&#160;  <span class="comment">// If needed, negate the value that will be the sign argument of the copysign:</span></div>
<div class="line"><a name="l02411"></a><span class="lineno"> 2411</span>&#160;  <span class="comment">// (bitcast X) &lt;  0 ? -TC :  TC --&gt; copysign(TC,  X)</span></div>
<div class="line"><a name="l02412"></a><span class="lineno"> 2412</span>&#160;  <span class="comment">// (bitcast X) &lt;  0 ?  TC : -TC --&gt; copysign(TC, -X)</span></div>
<div class="line"><a name="l02413"></a><span class="lineno"> 2413</span>&#160;  <span class="comment">// (bitcast X) &gt;= 0 ? -TC :  TC --&gt; copysign(TC, -X)</span></div>
<div class="line"><a name="l02414"></a><span class="lineno"> 2414</span>&#160;  <span class="comment">// (bitcast X) &gt;= 0 ?  TC : -TC --&gt; copysign(TC,  X)</span></div>
<div class="line"><a name="l02415"></a><span class="lineno"> 2415</span>&#160;  <span class="keywordflow">if</span> (IsTrueIfSignSet ^ TC-&gt;<a class="code" href="classllvm_1_1APFloat.html#a2b901c3a0625a7d7173e9bd4864e2775">isNegative</a>())</div>
<div class="line"><a name="l02416"></a><span class="lineno"> 2416</span>&#160;    <a class="code" href="ErlangGCPrinter_8cpp.html#a74b474c0616ab55c1d9487f11fd31d26">X</a> = <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.CreateFNegFMF(<a class="code" href="ErlangGCPrinter_8cpp.html#a74b474c0616ab55c1d9487f11fd31d26">X</a>, &amp;Sel);</div>
<div class="line"><a name="l02417"></a><span class="lineno"> 2417</span>&#160; </div>
<div class="line"><a name="l02418"></a><span class="lineno"> 2418</span>&#160;  <span class="comment">// Canonicalize the magnitude argument as the positive constant since we do</span></div>
<div class="line"><a name="l02419"></a><span class="lineno"> 2419</span>&#160;  <span class="comment">// not care about its sign.</span></div>
<div class="line"><a name="l02420"></a><span class="lineno"> 2420</span>&#160;  <a class="code" href="classllvm_1_1Value.html">Value</a> *MagArg = TC-&gt;<a class="code" href="classllvm_1_1APFloat.html#a2b901c3a0625a7d7173e9bd4864e2775">isNegative</a>() ? FVal : TVal;</div>
<div class="line"><a name="l02421"></a><span class="lineno"> 2421</span>&#160;  <a class="code" href="classllvm_1_1Function.html">Function</a> *<a class="code" href="MD5_8cpp.html#a96d73bbd7af15cb1fc38c3f4a3bd82e9">F</a> = <a class="code" href="namespacellvm_1_1Intrinsic.html#a842176a2c8c60a94bc788454b0828ea2">Intrinsic::getDeclaration</a>(Sel.<a class="code" href="classllvm_1_1Instruction.html#a4ba3a5be6c0e9b9e8a525de055836733">getModule</a>(), Intrinsic::copysign,</div>
<div class="line"><a name="l02422"></a><span class="lineno"> 2422</span>&#160;                                          Sel.<a class="code" href="classllvm_1_1Value.html#a6393a2d4fe7e10b28a0dcc35f881567b">getType</a>());</div>
<div class="line"><a name="l02423"></a><span class="lineno"> 2423</span>&#160;  <a class="code" href="classllvm_1_1Instruction.html">Instruction</a> *CopySign = <a class="code" href="classllvm_1_1CallInst.html#a850d8262cd900958b3153c4aa080b2bb">CallInst::Create</a>(<a class="code" href="MD5_8cpp.html#a96d73bbd7af15cb1fc38c3f4a3bd82e9">F</a>, { MagArg, <a class="code" href="ErlangGCPrinter_8cpp.html#a74b474c0616ab55c1d9487f11fd31d26">X</a> });</div>
<div class="line"><a name="l02424"></a><span class="lineno"> 2424</span>&#160;  CopySign-&gt;<a class="code" href="classllvm_1_1Instruction.html#a5ca8aa62fa8b3fe5bc0e8fbe5d8b8b7a">setFastMathFlags</a>(Sel.<a class="code" href="classllvm_1_1Instruction.html#a50b85ccf7f6033b54748b17753ad2253">getFastMathFlags</a>());</div>
<div class="line"><a name="l02425"></a><span class="lineno"> 2425</span>&#160;  <span class="keywordflow">return</span> CopySign;</div>
<div class="line"><a name="l02426"></a><span class="lineno"> 2426</span>&#160;}</div>
<div class="line"><a name="l02427"></a><span class="lineno"> 2427</span>&#160; </div>
<div class="line"><a name="l02428"></a><span class="lineno"> 2428</span>&#160;<a class="code" href="classllvm_1_1Instruction.html">Instruction</a> *<a class="code" href="classllvm_1_1InstCombinerImpl.html#ae649c0c42fe347f09ad971bb4ad8f35b">InstCombinerImpl::foldVectorSelect</a>(<a class="code" href="classllvm_1_1SelectInst.html">SelectInst</a> &amp;Sel) {</div>
<div class="line"><a name="l02429"></a><span class="lineno"> 2429</span>&#160;  <span class="keyword">auto</span> *VecTy = dyn_cast&lt;FixedVectorType&gt;(Sel.<a class="code" href="classllvm_1_1Value.html#a6393a2d4fe7e10b28a0dcc35f881567b">getType</a>());</div>
<div class="line"><a name="l02430"></a><span class="lineno"> 2430</span>&#160;  <span class="keywordflow">if</span> (!VecTy)</div>
<div class="line"><a name="l02431"></a><span class="lineno"> 2431</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l02432"></a><span class="lineno"> 2432</span>&#160; </div>
<div class="line"><a name="l02433"></a><span class="lineno"> 2433</span>&#160;  <span class="keywordtype">unsigned</span> NumElts = VecTy-&gt;getNumElements();</div>
<div class="line"><a name="l02434"></a><span class="lineno"> 2434</span>&#160;  <a class="code" href="classllvm_1_1APInt.html">APInt</a> UndefElts(NumElts, 0);</div>
<div class="line"><a name="l02435"></a><span class="lineno"> 2435</span>&#160;  <a class="code" href="classllvm_1_1APInt.html">APInt</a> AllOnesEltMask(<a class="code" href="classllvm_1_1APInt.html#a539bdb4fdbf46e0bfcefebf5ac6d21dd">APInt::getAllOnesValue</a>(NumElts));</div>
<div class="line"><a name="l02436"></a><span class="lineno"> 2436</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1Value.html">Value</a> *V = SimplifyDemandedVectorElts(&amp;Sel, AllOnesEltMask, UndefElts)) {</div>
<div class="line"><a name="l02437"></a><span class="lineno"> 2437</span>&#160;    <span class="keywordflow">if</span> (V != &amp;Sel)</div>
<div class="line"><a name="l02438"></a><span class="lineno"> 2438</span>&#160;      <span class="keywordflow">return</span> replaceInstUsesWith(Sel, V);</div>
<div class="line"><a name="l02439"></a><span class="lineno"> 2439</span>&#160;    <span class="keywordflow">return</span> &amp;Sel;</div>
<div class="line"><a name="l02440"></a><span class="lineno"> 2440</span>&#160;  }</div>
<div class="line"><a name="l02441"></a><span class="lineno"> 2441</span>&#160; </div>
<div class="line"><a name="l02442"></a><span class="lineno"> 2442</span>&#160;  <span class="comment">// A select of a &quot;select shuffle&quot; with a common operand can be rearranged</span></div>
<div class="line"><a name="l02443"></a><span class="lineno"> 2443</span>&#160;  <span class="comment">// to select followed by &quot;select shuffle&quot;. Because of poison, this only works</span></div>
<div class="line"><a name="l02444"></a><span class="lineno"> 2444</span>&#160;  <span class="comment">// in the case of a shuffle with no undefined mask elements.</span></div>
<div class="line"><a name="l02445"></a><span class="lineno"> 2445</span>&#160;  <a class="code" href="classllvm_1_1Value.html">Value</a> *<a class="code" href="BasicBlockSections_8cpp.html#a5fd0741d696f28faf65b33f6c6af8fda">Cond</a> = Sel.<a class="code" href="classllvm_1_1SelectInst.html#a93a29cd4a753518a59c20c1b6ec88c76">getCondition</a>();</div>
<div class="line"><a name="l02446"></a><span class="lineno"> 2446</span>&#160;  <a class="code" href="classllvm_1_1Value.html">Value</a> *TVal = Sel.<a class="code" href="classllvm_1_1SelectInst.html#a483700f6bf3ac62445850d768cf188f6">getTrueValue</a>();</div>
<div class="line"><a name="l02447"></a><span class="lineno"> 2447</span>&#160;  <a class="code" href="classllvm_1_1Value.html">Value</a> *FVal = Sel.<a class="code" href="classllvm_1_1SelectInst.html#a59b0ee738ec17984b97128e7f1594db3">getFalseValue</a>();</div>
<div class="line"><a name="l02448"></a><span class="lineno"> 2448</span>&#160;  <a class="code" href="classllvm_1_1Value.html">Value</a> *<a class="code" href="ErlangGCPrinter_8cpp.html#a74b474c0616ab55c1d9487f11fd31d26">X</a>, *<a class="code" href="OcamlGCPrinter_8cpp.html#afcf2f797ed287a723263583c9b1c1bce">Y</a>;</div>
<div class="line"><a name="l02449"></a><span class="lineno"> 2449</span>&#160;  <a class="code" href="classllvm_1_1ArrayRef.html">ArrayRef&lt;int&gt;</a> <a class="code" href="namespacellvm_1_1BitmaskEnumDetail.html#ad9273b0ee6c5e0f2367e3136c1503811">Mask</a>;</div>
<div class="line"><a name="l02450"></a><span class="lineno"> 2450</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="namespacellvm_1_1PatternMatch.html#a25d956d9e0beadd47ce4bc255dfa811d">match</a>(TVal, <a class="code" href="namespacellvm_1_1PatternMatch.html#aca6428e7fec51ba0b55594f469eb9691">m_OneUse</a>(<a class="code" href="namespacellvm_1_1PatternMatch.html#afd3e8a6706810fef8cdbaf1f9f40dfbd">m_Shuffle</a>(<a class="code" href="namespacellvm_1_1PatternMatch.html#a24bca8838396aa81b87de8e7ac774b19">m_Value</a>(<a class="code" href="ErlangGCPrinter_8cpp.html#a74b474c0616ab55c1d9487f11fd31d26">X</a>), <a class="code" href="namespacellvm_1_1PatternMatch.html#a24bca8838396aa81b87de8e7ac774b19">m_Value</a>(<a class="code" href="OcamlGCPrinter_8cpp.html#afcf2f797ed287a723263583c9b1c1bce">Y</a>), <a class="code" href="structllvm_1_1PatternMatch_1_1m__Mask.html">m_Mask</a>(<a class="code" href="namespacellvm_1_1BitmaskEnumDetail.html#ad9273b0ee6c5e0f2367e3136c1503811">Mask</a>)))) &amp;&amp;</div>
<div class="line"><a name="l02451"></a><span class="lineno"> 2451</span>&#160;      !<a class="code" href="namespacellvm.html#acd1cd968cb420c82d70926920fcdc7d7">is_contained</a>(<a class="code" href="namespacellvm_1_1BitmaskEnumDetail.html#ad9273b0ee6c5e0f2367e3136c1503811">Mask</a>, <a class="code" href="namespacellvm.html#a4e09435caee07f636a47006fa08b9ec4">UndefMaskElem</a>) &amp;&amp;</div>
<div class="line"><a name="l02452"></a><span class="lineno"> 2452</span>&#160;      cast&lt;ShuffleVectorInst&gt;(TVal)-&gt;isSelect()) {</div>
<div class="line"><a name="l02453"></a><span class="lineno"> 2453</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="ErlangGCPrinter_8cpp.html#a74b474c0616ab55c1d9487f11fd31d26">X</a> == FVal) {</div>
<div class="line"><a name="l02454"></a><span class="lineno"> 2454</span>&#160;      <span class="comment">// select Cond, (shuf_sel X, Y), X --&gt; shuf_sel X, (select Cond, Y, X)</span></div>
<div class="line"><a name="l02455"></a><span class="lineno"> 2455</span>&#160;      <a class="code" href="classllvm_1_1Value.html">Value</a> *NewSel = <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.CreateSelect(<a class="code" href="BasicBlockSections_8cpp.html#a5fd0741d696f28faf65b33f6c6af8fda">Cond</a>, <a class="code" href="OcamlGCPrinter_8cpp.html#afcf2f797ed287a723263583c9b1c1bce">Y</a>, <a class="code" href="ErlangGCPrinter_8cpp.html#a74b474c0616ab55c1d9487f11fd31d26">X</a>, <span class="stringliteral">&quot;sel&quot;</span>, &amp;Sel);</div>
<div class="line"><a name="l02456"></a><span class="lineno"> 2456</span>&#160;      <span class="keywordflow">return</span> <span class="keyword">new</span> <a class="code" href="classllvm_1_1ShuffleVectorInst.html">ShuffleVectorInst</a>(<a class="code" href="ErlangGCPrinter_8cpp.html#a74b474c0616ab55c1d9487f11fd31d26">X</a>, NewSel, <a class="code" href="namespacellvm_1_1BitmaskEnumDetail.html#ad9273b0ee6c5e0f2367e3136c1503811">Mask</a>);</div>
<div class="line"><a name="l02457"></a><span class="lineno"> 2457</span>&#160;    }</div>
<div class="line"><a name="l02458"></a><span class="lineno"> 2458</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="OcamlGCPrinter_8cpp.html#afcf2f797ed287a723263583c9b1c1bce">Y</a> == FVal) {</div>
<div class="line"><a name="l02459"></a><span class="lineno"> 2459</span>&#160;      <span class="comment">// select Cond, (shuf_sel X, Y), Y --&gt; shuf_sel (select Cond, X, Y), Y</span></div>
<div class="line"><a name="l02460"></a><span class="lineno"> 2460</span>&#160;      <a class="code" href="classllvm_1_1Value.html">Value</a> *NewSel = <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.CreateSelect(<a class="code" href="BasicBlockSections_8cpp.html#a5fd0741d696f28faf65b33f6c6af8fda">Cond</a>, <a class="code" href="ErlangGCPrinter_8cpp.html#a74b474c0616ab55c1d9487f11fd31d26">X</a>, <a class="code" href="OcamlGCPrinter_8cpp.html#afcf2f797ed287a723263583c9b1c1bce">Y</a>, <span class="stringliteral">&quot;sel&quot;</span>, &amp;Sel);</div>
<div class="line"><a name="l02461"></a><span class="lineno"> 2461</span>&#160;      <span class="keywordflow">return</span> <span class="keyword">new</span> <a class="code" href="classllvm_1_1ShuffleVectorInst.html">ShuffleVectorInst</a>(NewSel, <a class="code" href="OcamlGCPrinter_8cpp.html#afcf2f797ed287a723263583c9b1c1bce">Y</a>, <a class="code" href="namespacellvm_1_1BitmaskEnumDetail.html#ad9273b0ee6c5e0f2367e3136c1503811">Mask</a>);</div>
<div class="line"><a name="l02462"></a><span class="lineno"> 2462</span>&#160;    }</div>
<div class="line"><a name="l02463"></a><span class="lineno"> 2463</span>&#160;  }</div>
<div class="line"><a name="l02464"></a><span class="lineno"> 2464</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="namespacellvm_1_1PatternMatch.html#a25d956d9e0beadd47ce4bc255dfa811d">match</a>(FVal, <a class="code" href="namespacellvm_1_1PatternMatch.html#aca6428e7fec51ba0b55594f469eb9691">m_OneUse</a>(<a class="code" href="namespacellvm_1_1PatternMatch.html#afd3e8a6706810fef8cdbaf1f9f40dfbd">m_Shuffle</a>(<a class="code" href="namespacellvm_1_1PatternMatch.html#a24bca8838396aa81b87de8e7ac774b19">m_Value</a>(<a class="code" href="ErlangGCPrinter_8cpp.html#a74b474c0616ab55c1d9487f11fd31d26">X</a>), <a class="code" href="namespacellvm_1_1PatternMatch.html#a24bca8838396aa81b87de8e7ac774b19">m_Value</a>(<a class="code" href="OcamlGCPrinter_8cpp.html#afcf2f797ed287a723263583c9b1c1bce">Y</a>), <a class="code" href="structllvm_1_1PatternMatch_1_1m__Mask.html">m_Mask</a>(<a class="code" href="namespacellvm_1_1BitmaskEnumDetail.html#ad9273b0ee6c5e0f2367e3136c1503811">Mask</a>)))) &amp;&amp;</div>
<div class="line"><a name="l02465"></a><span class="lineno"> 2465</span>&#160;      !<a class="code" href="namespacellvm.html#acd1cd968cb420c82d70926920fcdc7d7">is_contained</a>(<a class="code" href="namespacellvm_1_1BitmaskEnumDetail.html#ad9273b0ee6c5e0f2367e3136c1503811">Mask</a>, <a class="code" href="namespacellvm.html#a4e09435caee07f636a47006fa08b9ec4">UndefMaskElem</a>) &amp;&amp;</div>
<div class="line"><a name="l02466"></a><span class="lineno"> 2466</span>&#160;      cast&lt;ShuffleVectorInst&gt;(FVal)-&gt;isSelect()) {</div>
<div class="line"><a name="l02467"></a><span class="lineno"> 2467</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="ErlangGCPrinter_8cpp.html#a74b474c0616ab55c1d9487f11fd31d26">X</a> == TVal) {</div>
<div class="line"><a name="l02468"></a><span class="lineno"> 2468</span>&#160;      <span class="comment">// select Cond, X, (shuf_sel X, Y) --&gt; shuf_sel X, (select Cond, X, Y)</span></div>
<div class="line"><a name="l02469"></a><span class="lineno"> 2469</span>&#160;      <a class="code" href="classllvm_1_1Value.html">Value</a> *NewSel = <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.CreateSelect(<a class="code" href="BasicBlockSections_8cpp.html#a5fd0741d696f28faf65b33f6c6af8fda">Cond</a>, <a class="code" href="ErlangGCPrinter_8cpp.html#a74b474c0616ab55c1d9487f11fd31d26">X</a>, <a class="code" href="OcamlGCPrinter_8cpp.html#afcf2f797ed287a723263583c9b1c1bce">Y</a>, <span class="stringliteral">&quot;sel&quot;</span>, &amp;Sel);</div>
<div class="line"><a name="l02470"></a><span class="lineno"> 2470</span>&#160;      <span class="keywordflow">return</span> <span class="keyword">new</span> <a class="code" href="classllvm_1_1ShuffleVectorInst.html">ShuffleVectorInst</a>(<a class="code" href="ErlangGCPrinter_8cpp.html#a74b474c0616ab55c1d9487f11fd31d26">X</a>, NewSel, <a class="code" href="namespacellvm_1_1BitmaskEnumDetail.html#ad9273b0ee6c5e0f2367e3136c1503811">Mask</a>);</div>
<div class="line"><a name="l02471"></a><span class="lineno"> 2471</span>&#160;    }</div>
<div class="line"><a name="l02472"></a><span class="lineno"> 2472</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="OcamlGCPrinter_8cpp.html#afcf2f797ed287a723263583c9b1c1bce">Y</a> == TVal) {</div>
<div class="line"><a name="l02473"></a><span class="lineno"> 2473</span>&#160;      <span class="comment">// select Cond, Y, (shuf_sel X, Y) --&gt; shuf_sel (select Cond, Y, X), Y</span></div>
<div class="line"><a name="l02474"></a><span class="lineno"> 2474</span>&#160;      <a class="code" href="classllvm_1_1Value.html">Value</a> *NewSel = <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.CreateSelect(<a class="code" href="BasicBlockSections_8cpp.html#a5fd0741d696f28faf65b33f6c6af8fda">Cond</a>, <a class="code" href="OcamlGCPrinter_8cpp.html#afcf2f797ed287a723263583c9b1c1bce">Y</a>, <a class="code" href="ErlangGCPrinter_8cpp.html#a74b474c0616ab55c1d9487f11fd31d26">X</a>, <span class="stringliteral">&quot;sel&quot;</span>, &amp;Sel);</div>
<div class="line"><a name="l02475"></a><span class="lineno"> 2475</span>&#160;      <span class="keywordflow">return</span> <span class="keyword">new</span> <a class="code" href="classllvm_1_1ShuffleVectorInst.html">ShuffleVectorInst</a>(NewSel, <a class="code" href="OcamlGCPrinter_8cpp.html#afcf2f797ed287a723263583c9b1c1bce">Y</a>, <a class="code" href="namespacellvm_1_1BitmaskEnumDetail.html#ad9273b0ee6c5e0f2367e3136c1503811">Mask</a>);</div>
<div class="line"><a name="l02476"></a><span class="lineno"> 2476</span>&#160;    }</div>
<div class="line"><a name="l02477"></a><span class="lineno"> 2477</span>&#160;  }</div>
<div class="line"><a name="l02478"></a><span class="lineno"> 2478</span>&#160; </div>
<div class="line"><a name="l02479"></a><span class="lineno"> 2479</span>&#160;  <span class="keywordflow">return</span> <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l02480"></a><span class="lineno"> 2480</span>&#160;}</div>
<div class="line"><a name="l02481"></a><span class="lineno"> 2481</span>&#160; </div>
<div class="line"><a name="l02482"></a><span class="lineno"> 2482</span>&#160;<span class="keyword">static</span> <a class="code" href="classllvm_1_1Instruction.html">Instruction</a> *foldSelectToPhiImpl(<a class="code" href="classllvm_1_1SelectInst.html">SelectInst</a> &amp;Sel, <a class="code" href="classllvm_1_1BasicBlock.html">BasicBlock</a> *<a class="code" href="lib_2CodeGen_2README_8txt.html#a09776db24cf586ec9f1e18f3bae14099">BB</a>,</div>
<div class="line"><a name="l02483"></a><span class="lineno"> 2483</span>&#160;                                        <span class="keyword">const</span> <a class="code" href="classllvm_1_1DominatorTree.html">DominatorTree</a> &amp;DT,</div>
<div class="line"><a name="l02484"></a><span class="lineno"> 2484</span>&#160;                                        <a class="code" href="classllvm_1_1IRBuilder.html">InstCombiner::BuilderTy</a> &amp;<a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>) {</div>
<div class="line"><a name="l02485"></a><span class="lineno"> 2485</span>&#160;  <span class="comment">// Find the block&#39;s immediate dominator that ends with a conditional branch</span></div>
<div class="line"><a name="l02486"></a><span class="lineno"> 2486</span>&#160;  <span class="comment">// that matches select&#39;s condition (maybe inverted).</span></div>
<div class="line"><a name="l02487"></a><span class="lineno"> 2487</span>&#160;  <span class="keyword">auto</span> *IDomNode = DT[<a class="code" href="lib_2CodeGen_2README_8txt.html#a09776db24cf586ec9f1e18f3bae14099">BB</a>]-&gt;getIDom();</div>
<div class="line"><a name="l02488"></a><span class="lineno"> 2488</span>&#160;  <span class="keywordflow">if</span> (!IDomNode)</div>
<div class="line"><a name="l02489"></a><span class="lineno"> 2489</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l02490"></a><span class="lineno"> 2490</span>&#160;  <a class="code" href="classllvm_1_1BasicBlock.html">BasicBlock</a> *IDom = IDomNode-&gt;getBlock();</div>
<div class="line"><a name="l02491"></a><span class="lineno"> 2491</span>&#160; </div>
<div class="line"><a name="l02492"></a><span class="lineno"> 2492</span>&#160;  <a class="code" href="classllvm_1_1Value.html">Value</a> *<a class="code" href="BasicBlockSections_8cpp.html#a5fd0741d696f28faf65b33f6c6af8fda">Cond</a> = Sel.<a class="code" href="classllvm_1_1SelectInst.html#a93a29cd4a753518a59c20c1b6ec88c76">getCondition</a>();</div>
<div class="line"><a name="l02493"></a><span class="lineno"> 2493</span>&#160;  <a class="code" href="classllvm_1_1Value.html">Value</a> *IfTrue, *IfFalse;</div>
<div class="line"><a name="l02494"></a><span class="lineno"> 2494</span>&#160;  <a class="code" href="classllvm_1_1BasicBlock.html">BasicBlock</a> *TrueSucc, *FalseSucc;</div>
<div class="line"><a name="l02495"></a><span class="lineno"> 2495</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="namespacellvm_1_1PatternMatch.html#a25d956d9e0beadd47ce4bc255dfa811d">match</a>(IDom-&gt;<a class="code" href="classllvm_1_1BasicBlock.html#a71a9eabc4318b2fc34f83b01dfee484b">getTerminator</a>(),</div>
<div class="line"><a name="l02496"></a><span class="lineno"> 2496</span>&#160;            <a class="code" href="namespacellvm_1_1PatternMatch.html#a4fd27a44c5fd9958fdd9150622129cd3">m_Br</a>(<a class="code" href="namespacellvm_1_1PatternMatch.html#a2d9861feadd3a09792967a012559e7b2">m_Specific</a>(<a class="code" href="BasicBlockSections_8cpp.html#a5fd0741d696f28faf65b33f6c6af8fda">Cond</a>), <a class="code" href="namespacellvm_1_1PatternMatch.html#acec0ee78d2266b990662e36784791999">m_BasicBlock</a>(TrueSucc),</div>
<div class="line"><a name="l02497"></a><span class="lineno"> 2497</span>&#160;                 <a class="code" href="namespacellvm_1_1PatternMatch.html#acec0ee78d2266b990662e36784791999">m_BasicBlock</a>(FalseSucc)))) {</div>
<div class="line"><a name="l02498"></a><span class="lineno"> 2498</span>&#160;    IfTrue = Sel.<a class="code" href="classllvm_1_1SelectInst.html#a483700f6bf3ac62445850d768cf188f6">getTrueValue</a>();</div>
<div class="line"><a name="l02499"></a><span class="lineno"> 2499</span>&#160;    IfFalse = Sel.<a class="code" href="classllvm_1_1SelectInst.html#a59b0ee738ec17984b97128e7f1594db3">getFalseValue</a>();</div>
<div class="line"><a name="l02500"></a><span class="lineno"> 2500</span>&#160;  } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code" href="namespacellvm_1_1PatternMatch.html#a25d956d9e0beadd47ce4bc255dfa811d">match</a>(IDom-&gt;<a class="code" href="classllvm_1_1BasicBlock.html#a71a9eabc4318b2fc34f83b01dfee484b">getTerminator</a>(),</div>
<div class="line"><a name="l02501"></a><span class="lineno"> 2501</span>&#160;                   <a class="code" href="namespacellvm_1_1PatternMatch.html#a4fd27a44c5fd9958fdd9150622129cd3">m_Br</a>(<a class="code" href="namespacellvm_1_1PatternMatch.html#ad6994fd7098916ce21d65be005666f21">m_Not</a>(<a class="code" href="namespacellvm_1_1PatternMatch.html#a2d9861feadd3a09792967a012559e7b2">m_Specific</a>(<a class="code" href="BasicBlockSections_8cpp.html#a5fd0741d696f28faf65b33f6c6af8fda">Cond</a>)), <a class="code" href="namespacellvm_1_1PatternMatch.html#acec0ee78d2266b990662e36784791999">m_BasicBlock</a>(TrueSucc),</div>
<div class="line"><a name="l02502"></a><span class="lineno"> 2502</span>&#160;                        <a class="code" href="namespacellvm_1_1PatternMatch.html#acec0ee78d2266b990662e36784791999">m_BasicBlock</a>(FalseSucc)))) {</div>
<div class="line"><a name="l02503"></a><span class="lineno"> 2503</span>&#160;    IfTrue = Sel.<a class="code" href="classllvm_1_1SelectInst.html#a59b0ee738ec17984b97128e7f1594db3">getFalseValue</a>();</div>
<div class="line"><a name="l02504"></a><span class="lineno"> 2504</span>&#160;    IfFalse = Sel.<a class="code" href="classllvm_1_1SelectInst.html#a483700f6bf3ac62445850d768cf188f6">getTrueValue</a>();</div>
<div class="line"><a name="l02505"></a><span class="lineno"> 2505</span>&#160;  } <span class="keywordflow">else</span></div>
<div class="line"><a name="l02506"></a><span class="lineno"> 2506</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l02507"></a><span class="lineno"> 2507</span>&#160; </div>
<div class="line"><a name="l02508"></a><span class="lineno"> 2508</span>&#160;  <span class="comment">// Make sure the branches are actually different.</span></div>
<div class="line"><a name="l02509"></a><span class="lineno"> 2509</span>&#160;  <span class="keywordflow">if</span> (TrueSucc == FalseSucc)</div>
<div class="line"><a name="l02510"></a><span class="lineno"> 2510</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l02511"></a><span class="lineno"> 2511</span>&#160; </div>
<div class="line"><a name="l02512"></a><span class="lineno"> 2512</span>&#160;  <span class="comment">// We want to replace select %cond, %a, %b with a phi that takes value %a</span></div>
<div class="line"><a name="l02513"></a><span class="lineno"> 2513</span>&#160;  <span class="comment">// for all incoming edges that are dominated by condition `%cond == true`,</span></div>
<div class="line"><a name="l02514"></a><span class="lineno"> 2514</span>&#160;  <span class="comment">// and value %b for edges dominated by condition `%cond == false`. If %a</span></div>
<div class="line"><a name="l02515"></a><span class="lineno"> 2515</span>&#160;  <span class="comment">// or %b are also phis from the same basic block, we can go further and take</span></div>
<div class="line"><a name="l02516"></a><span class="lineno"> 2516</span>&#160;  <span class="comment">// their incoming values from the corresponding blocks.</span></div>
<div class="line"><a name="l02517"></a><span class="lineno"> 2517</span>&#160;  <a class="code" href="classllvm_1_1BasicBlockEdge.html">BasicBlockEdge</a> TrueEdge(IDom, TrueSucc);</div>
<div class="line"><a name="l02518"></a><span class="lineno"> 2518</span>&#160;  <a class="code" href="classllvm_1_1BasicBlockEdge.html">BasicBlockEdge</a> FalseEdge(IDom, FalseSucc);</div>
<div class="line"><a name="l02519"></a><span class="lineno"> 2519</span>&#160;  <a class="code" href="classllvm_1_1DenseMap.html">DenseMap&lt;BasicBlock *, Value *&gt;</a> Inputs;</div>
<div class="line"><a name="l02520"></a><span class="lineno"> 2520</span>&#160;  <span class="keywordflow">for</span> (<span class="keyword">auto</span> *Pred : <a class="code" href="namespacellvm.html#a91d9d210ba428cc67e3c2e892f24529e">predecessors</a>(<a class="code" href="lib_2CodeGen_2README_8txt.html#a09776db24cf586ec9f1e18f3bae14099">BB</a>)) {</div>
<div class="line"><a name="l02521"></a><span class="lineno"> 2521</span>&#160;    <span class="comment">// Check implication.</span></div>
<div class="line"><a name="l02522"></a><span class="lineno"> 2522</span>&#160;    <a class="code" href="classllvm_1_1BasicBlockEdge.html">BasicBlockEdge</a> Incoming(Pred, <a class="code" href="lib_2CodeGen_2README_8txt.html#a09776db24cf586ec9f1e18f3bae14099">BB</a>);</div>
<div class="line"><a name="l02523"></a><span class="lineno"> 2523</span>&#160;    <span class="keywordflow">if</span> (DT.<a class="code" href="classllvm_1_1DominatorTree.html#a5c69311e8d44898dac36a155c3d8691d">dominates</a>(TrueEdge, Incoming))</div>
<div class="line"><a name="l02524"></a><span class="lineno"> 2524</span>&#160;      Inputs[Pred] = IfTrue-&gt;<a class="code" href="classllvm_1_1Value.html#a159bf794249e0567baf2a2a714d5c679">DoPHITranslation</a>(<a class="code" href="lib_2CodeGen_2README_8txt.html#a09776db24cf586ec9f1e18f3bae14099">BB</a>, Pred);</div>
<div class="line"><a name="l02525"></a><span class="lineno"> 2525</span>&#160;    <span class="keywordflow">else</span> <span class="keywordflow">if</span> (DT.<a class="code" href="classllvm_1_1DominatorTree.html#a5c69311e8d44898dac36a155c3d8691d">dominates</a>(FalseEdge, Incoming))</div>
<div class="line"><a name="l02526"></a><span class="lineno"> 2526</span>&#160;      Inputs[Pred] = IfFalse-&gt;<a class="code" href="classllvm_1_1Value.html#a159bf794249e0567baf2a2a714d5c679">DoPHITranslation</a>(<a class="code" href="lib_2CodeGen_2README_8txt.html#a09776db24cf586ec9f1e18f3bae14099">BB</a>, Pred);</div>
<div class="line"><a name="l02527"></a><span class="lineno"> 2527</span>&#160;    <span class="keywordflow">else</span></div>
<div class="line"><a name="l02528"></a><span class="lineno"> 2528</span>&#160;      <span class="keywordflow">return</span> <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l02529"></a><span class="lineno"> 2529</span>&#160;    <span class="comment">// Check availability.</span></div>
<div class="line"><a name="l02530"></a><span class="lineno"> 2530</span>&#160;    <span class="keywordflow">if</span> (<span class="keyword">auto</span> *Insn = dyn_cast&lt;Instruction&gt;(Inputs[Pred]))</div>
<div class="line"><a name="l02531"></a><span class="lineno"> 2531</span>&#160;      <span class="keywordflow">if</span> (!DT.<a class="code" href="classllvm_1_1DominatorTree.html#a5c69311e8d44898dac36a155c3d8691d">dominates</a>(Insn, Pred-&gt;getTerminator()))</div>
<div class="line"><a name="l02532"></a><span class="lineno"> 2532</span>&#160;        <span class="keywordflow">return</span> <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l02533"></a><span class="lineno"> 2533</span>&#160;  }</div>
<div class="line"><a name="l02534"></a><span class="lineno"> 2534</span>&#160; </div>
<div class="line"><a name="l02535"></a><span class="lineno"> 2535</span>&#160;  <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.SetInsertPoint(&amp;*<a class="code" href="lib_2CodeGen_2README_8txt.html#a09776db24cf586ec9f1e18f3bae14099">BB</a>-&gt;begin());</div>
<div class="line"><a name="l02536"></a><span class="lineno"> 2536</span>&#160;  <span class="keyword">auto</span> *PN = <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.CreatePHI(Sel.<a class="code" href="classllvm_1_1Value.html#a6393a2d4fe7e10b28a0dcc35f881567b">getType</a>(), Inputs.<a class="code" href="classllvm_1_1DenseMapBase.html#a3d95cc2d359b8d9ed5bd9504b44930b5">size</a>());</div>
<div class="line"><a name="l02537"></a><span class="lineno"> 2537</span>&#160;  <span class="keywordflow">for</span> (<span class="keyword">auto</span> *Pred : <a class="code" href="namespacellvm.html#a91d9d210ba428cc67e3c2e892f24529e">predecessors</a>(<a class="code" href="lib_2CodeGen_2README_8txt.html#a09776db24cf586ec9f1e18f3bae14099">BB</a>))</div>
<div class="line"><a name="l02538"></a><span class="lineno"> 2538</span>&#160;    PN-&gt;addIncoming(Inputs[Pred], Pred);</div>
<div class="line"><a name="l02539"></a><span class="lineno"> 2539</span>&#160;  PN-&gt;takeName(&amp;Sel);</div>
<div class="line"><a name="l02540"></a><span class="lineno"> 2540</span>&#160;  <span class="keywordflow">return</span> PN;</div>
<div class="line"><a name="l02541"></a><span class="lineno"> 2541</span>&#160;}</div>
<div class="line"><a name="l02542"></a><span class="lineno"> 2542</span>&#160; </div>
<div class="line"><a name="l02543"></a><span class="lineno"> 2543</span>&#160;<span class="keyword">static</span> <a class="code" href="classllvm_1_1Instruction.html">Instruction</a> *foldSelectToPhi(<a class="code" href="classllvm_1_1SelectInst.html">SelectInst</a> &amp;Sel, <span class="keyword">const</span> <a class="code" href="classllvm_1_1DominatorTree.html">DominatorTree</a> &amp;DT,</div>
<div class="line"><a name="l02544"></a><span class="lineno"> 2544</span>&#160;                                    <a class="code" href="classllvm_1_1IRBuilder.html">InstCombiner::BuilderTy</a> &amp;<a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>) {</div>
<div class="line"><a name="l02545"></a><span class="lineno"> 2545</span>&#160;  <span class="comment">// Try to replace this select with Phi in one of these blocks.</span></div>
<div class="line"><a name="l02546"></a><span class="lineno"> 2546</span>&#160;  <a class="code" href="classllvm_1_1SmallSetVector.html">SmallSetVector&lt;BasicBlock *, 4&gt;</a> CandidateBlocks;</div>
<div class="line"><a name="l02547"></a><span class="lineno"> 2547</span>&#160;  CandidateBlocks.<a class="code" href="classllvm_1_1SetVector.html#a72d928b7fc2c5f2d56c6ac0265fd9c6e">insert</a>(Sel.<a class="code" href="classllvm_1_1Instruction.html#a1a7f07aaef6a3bee130bf0e0f0536802">getParent</a>());</div>
<div class="line"><a name="l02548"></a><span class="lineno"> 2548</span>&#160;  <span class="keywordflow">for</span> (<a class="code" href="classllvm_1_1Value.html">Value</a> *V : Sel.<a class="code" href="classllvm_1_1User.html#a0b931781aa589c6ebe64a76c1447e5b2">operands</a>())</div>
<div class="line"><a name="l02549"></a><span class="lineno"> 2549</span>&#160;    <span class="keywordflow">if</span> (<span class="keyword">auto</span> *<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a> = dyn_cast&lt;Instruction&gt;(V))</div>
<div class="line"><a name="l02550"></a><span class="lineno"> 2550</span>&#160;      CandidateBlocks.<a class="code" href="classllvm_1_1SetVector.html#a72d928b7fc2c5f2d56c6ac0265fd9c6e">insert</a>(<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>-&gt;getParent());</div>
<div class="line"><a name="l02551"></a><span class="lineno"> 2551</span>&#160; </div>
<div class="line"><a name="l02552"></a><span class="lineno"> 2552</span>&#160;  <span class="keywordflow">for</span> (<a class="code" href="classllvm_1_1BasicBlock.html">BasicBlock</a> *<a class="code" href="lib_2CodeGen_2README_8txt.html#a09776db24cf586ec9f1e18f3bae14099">BB</a> : CandidateBlocks)</div>
<div class="line"><a name="l02553"></a><span class="lineno"> 2553</span>&#160;    <span class="keywordflow">if</span> (<span class="keyword">auto</span> *PN = foldSelectToPhiImpl(Sel, <a class="code" href="lib_2CodeGen_2README_8txt.html#a09776db24cf586ec9f1e18f3bae14099">BB</a>, DT, <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>))</div>
<div class="line"><a name="l02554"></a><span class="lineno"> 2554</span>&#160;      <span class="keywordflow">return</span> PN;</div>
<div class="line"><a name="l02555"></a><span class="lineno"> 2555</span>&#160;  <span class="keywordflow">return</span> <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l02556"></a><span class="lineno"> 2556</span>&#160;}</div>
<div class="line"><a name="l02557"></a><span class="lineno"> 2557</span>&#160; </div>
<div class="line"><a name="l02558"></a><span class="lineno"> 2558</span>&#160;<span class="keyword">static</span> <a class="code" href="classllvm_1_1Value.html">Value</a> *foldSelectWithFrozenICmp(<a class="code" href="classllvm_1_1SelectInst.html">SelectInst</a> &amp;Sel, <a class="code" href="classllvm_1_1IRBuilder.html">InstCombiner::BuilderTy</a> &amp;<a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>) {</div>
<div class="line"><a name="l02559"></a><span class="lineno"> 2559</span>&#160;  <a class="code" href="classllvm_1_1FreezeInst.html">FreezeInst</a> *FI = dyn_cast&lt;FreezeInst&gt;(Sel.<a class="code" href="classllvm_1_1SelectInst.html#a93a29cd4a753518a59c20c1b6ec88c76">getCondition</a>());</div>
<div class="line"><a name="l02560"></a><span class="lineno"> 2560</span>&#160;  <span class="keywordflow">if</span> (!FI)</div>
<div class="line"><a name="l02561"></a><span class="lineno"> 2561</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l02562"></a><span class="lineno"> 2562</span>&#160; </div>
<div class="line"><a name="l02563"></a><span class="lineno"> 2563</span>&#160;  <a class="code" href="classllvm_1_1Value.html">Value</a> *<a class="code" href="BasicBlockSections_8cpp.html#a5fd0741d696f28faf65b33f6c6af8fda">Cond</a> = FI-&gt;<a class="code" href="classllvm_1_1User.html#abe1de1520a21f77ac57cc210bf0fb0b4">getOperand</a>(0);</div>
<div class="line"><a name="l02564"></a><span class="lineno"> 2564</span>&#160;  <a class="code" href="classllvm_1_1Value.html">Value</a> *<a class="code" href="namespacellvm_1_1tgtok.html#abbc5259d649363016626e2529fabe0c5a58b95af1ca96e109f85a0646a05fceb7">TrueVal</a> = Sel.<a class="code" href="classllvm_1_1SelectInst.html#a483700f6bf3ac62445850d768cf188f6">getTrueValue</a>(), *<a class="code" href="namespacellvm_1_1tgtok.html#abbc5259d649363016626e2529fabe0c5aeb5a2908109c763377832cbb4726b6d4">FalseVal</a> = Sel.<a class="code" href="classllvm_1_1SelectInst.html#a59b0ee738ec17984b97128e7f1594db3">getFalseValue</a>();</div>
<div class="line"><a name="l02565"></a><span class="lineno"> 2565</span>&#160; </div>
<div class="line"><a name="l02566"></a><span class="lineno"> 2566</span>&#160;  <span class="comment">//   select (freeze(x == y)), x, y --&gt; y</span></div>
<div class="line"><a name="l02567"></a><span class="lineno"> 2567</span>&#160;  <span class="comment">//   select (freeze(x != y)), x, y --&gt; x</span></div>
<div class="line"><a name="l02568"></a><span class="lineno"> 2568</span>&#160;  <span class="comment">// The freeze should be only used by this select. Otherwise, remaining uses of</span></div>
<div class="line"><a name="l02569"></a><span class="lineno"> 2569</span>&#160;  <span class="comment">// the freeze can observe a contradictory value.</span></div>
<div class="line"><a name="l02570"></a><span class="lineno"> 2570</span>&#160;  <span class="comment">//   c = freeze(x == y)   ; Let&#39;s assume that y = poison &amp; x = 42; c is 0 or 1</span></div>
<div class="line"><a name="l02571"></a><span class="lineno"> 2571</span>&#160;  <span class="comment">//   a = select c, x, y   ;</span></div>
<div class="line"><a name="l02572"></a><span class="lineno"> 2572</span>&#160;  <span class="comment">//   f(a, c)              ; f(poison, 1) cannot happen, but if a is folded</span></div>
<div class="line"><a name="l02573"></a><span class="lineno"> 2573</span>&#160;  <span class="comment">//                        ; to y, this can happen.</span></div>
<div class="line"><a name="l02574"></a><span class="lineno"> 2574</span>&#160;  <a class="code" href="classllvm_1_1CmpInst.html#a2be3583dac92a031fa1458d4d992c78b">CmpInst::Predicate</a> Pred;</div>
<div class="line"><a name="l02575"></a><span class="lineno"> 2575</span>&#160;  <span class="keywordflow">if</span> (FI-&gt;<a class="code" href="classllvm_1_1Value.html#a3a402430a1bbe70a9282dcb0e0b6a2cd">hasOneUse</a>() &amp;&amp;</div>
<div class="line"><a name="l02576"></a><span class="lineno"> 2576</span>&#160;      <a class="code" href="namespacellvm_1_1PatternMatch.html#a25d956d9e0beadd47ce4bc255dfa811d">match</a>(<a class="code" href="BasicBlockSections_8cpp.html#a5fd0741d696f28faf65b33f6c6af8fda">Cond</a>, <a class="code" href="namespacellvm_1_1PatternMatch.html#a3de757fc0f1dc7f8f8e9211b32ac106d">m_c_ICmp</a>(Pred, <a class="code" href="namespacellvm_1_1PatternMatch.html#a2d9861feadd3a09792967a012559e7b2">m_Specific</a>(<a class="code" href="namespacellvm_1_1tgtok.html#abbc5259d649363016626e2529fabe0c5a58b95af1ca96e109f85a0646a05fceb7">TrueVal</a>), <a class="code" href="namespacellvm_1_1PatternMatch.html#a2d9861feadd3a09792967a012559e7b2">m_Specific</a>(<a class="code" href="namespacellvm_1_1tgtok.html#abbc5259d649363016626e2529fabe0c5aeb5a2908109c763377832cbb4726b6d4">FalseVal</a>))) &amp;&amp;</div>
<div class="line"><a name="l02577"></a><span class="lineno"> 2577</span>&#160;      (Pred == <a class="code" href="classllvm_1_1CmpInst.html#a2be3583dac92a031fa1458d4d992c78baa719225e2de4059f93fd3209e1f48218">ICmpInst::ICMP_EQ</a> || Pred == <a class="code" href="classllvm_1_1CmpInst.html#a2be3583dac92a031fa1458d4d992c78bac17897ebf2f6a6986280fc3bdf28a30a">ICmpInst::ICMP_NE</a>)) {</div>
<div class="line"><a name="l02578"></a><span class="lineno"> 2578</span>&#160;    <span class="keywordflow">return</span> Pred == <a class="code" href="classllvm_1_1CmpInst.html#a2be3583dac92a031fa1458d4d992c78baa719225e2de4059f93fd3209e1f48218">ICmpInst::ICMP_EQ</a> ? <a class="code" href="namespacellvm_1_1tgtok.html#abbc5259d649363016626e2529fabe0c5aeb5a2908109c763377832cbb4726b6d4">FalseVal</a> : <a class="code" href="namespacellvm_1_1tgtok.html#abbc5259d649363016626e2529fabe0c5a58b95af1ca96e109f85a0646a05fceb7">TrueVal</a>;</div>
<div class="line"><a name="l02579"></a><span class="lineno"> 2579</span>&#160;  }</div>
<div class="line"><a name="l02580"></a><span class="lineno"> 2580</span>&#160; </div>
<div class="line"><a name="l02581"></a><span class="lineno"> 2581</span>&#160;  <span class="keywordflow">return</span> <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l02582"></a><span class="lineno"> 2582</span>&#160;}</div>
<div class="line"><a name="l02583"></a><span class="lineno"> 2583</span>&#160; </div>
<div class="line"><a name="l02584"></a><span class="lineno"> 2584</span>&#160;<a class="code" href="classllvm_1_1Instruction.html">Instruction</a> *InstCombinerImpl::foldAndOrOfSelectUsingImpliedCond(<a class="code" href="classllvm_1_1Value.html">Value</a> *<a class="code" href="namespacellvm_1_1AMDGPU_1_1SendMsg.html#a8594419a4ddfad2c9a79279c490e466d">Op</a>,</div>
<div class="line"><a name="l02585"></a><span class="lineno"> 2585</span>&#160;                                                                 <a class="code" href="classllvm_1_1SelectInst.html">SelectInst</a> &amp;<a class="code" href="PassBuilderBindings_8cpp.html#a0f79dad1efc582555a443cc11a8fa401">SI</a>,</div>
<div class="line"><a name="l02586"></a><span class="lineno"> 2586</span>&#160;                                                                 <span class="keywordtype">bool</span> IsAnd) {</div>
<div class="line"><a name="l02587"></a><span class="lineno"> 2587</span>&#160;  <a class="code" href="classllvm_1_1Value.html">Value</a> *CondVal = <a class="code" href="PassBuilderBindings_8cpp.html#a0f79dad1efc582555a443cc11a8fa401">SI</a>.getCondition();</div>
<div class="line"><a name="l02588"></a><span class="lineno"> 2588</span>&#160;  <a class="code" href="classllvm_1_1Value.html">Value</a> *<a class="code" href="README__ALTIVEC_8txt.html#a015846b6188ce15e08cd94c74a9df1a3">A</a> = <a class="code" href="PassBuilderBindings_8cpp.html#a0f79dad1efc582555a443cc11a8fa401">SI</a>.getTrueValue();</div>
<div class="line"><a name="l02589"></a><span class="lineno"> 2589</span>&#160;  <a class="code" href="classllvm_1_1Value.html">Value</a> *<a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a> = <a class="code" href="PassBuilderBindings_8cpp.html#a0f79dad1efc582555a443cc11a8fa401">SI</a>.getFalseValue();</div>
<div class="line"><a name="l02590"></a><span class="lineno"> 2590</span>&#160; </div>
<div class="line"><a name="l02591"></a><span class="lineno"> 2591</span>&#160;  <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(<a class="code" href="namespacellvm_1_1AMDGPU_1_1SendMsg.html#a8594419a4ddfad2c9a79279c490e466d">Op</a>-&gt;getType()-&gt;isIntOrIntVectorTy(1) &amp;&amp;</div>
<div class="line"><a name="l02592"></a><span class="lineno"> 2592</span>&#160;         <span class="stringliteral">&quot;Op must be either i1 or vector of i1.&quot;</span>);</div>
<div class="line"><a name="l02593"></a><span class="lineno"> 2593</span>&#160; </div>
<div class="line"><a name="l02594"></a><span class="lineno"> 2594</span>&#160;  <a class="code" href="classllvm_1_1Optional.html">Optional&lt;bool&gt;</a> Res = <a class="code" href="namespacellvm.html#af6a303805dba0dd581a5daf9fd96002b">isImpliedCondition</a>(<a class="code" href="namespacellvm_1_1AMDGPU_1_1SendMsg.html#a8594419a4ddfad2c9a79279c490e466d">Op</a>, CondVal, <a class="code" href="AArch64SLSHardening_8cpp.html#ad467c4ab9119043f9b7750ab986be61a">DL</a>, IsAnd);</div>
<div class="line"><a name="l02595"></a><span class="lineno"> 2595</span>&#160;  <span class="keywordflow">if</span> (!Res)</div>
<div class="line"><a name="l02596"></a><span class="lineno"> 2596</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l02597"></a><span class="lineno"> 2597</span>&#160; </div>
<div class="line"><a name="l02598"></a><span class="lineno"> 2598</span>&#160;  <a class="code" href="classllvm_1_1Value.html">Value</a> *Zero = <a class="code" href="classllvm_1_1Constant.html#aa6574d526b3e38a28f688a7bb4325c2c">Constant::getNullValue</a>(<a class="code" href="README__ALTIVEC_8txt.html#a015846b6188ce15e08cd94c74a9df1a3">A</a>-&gt;getType());</div>
<div class="line"><a name="l02599"></a><span class="lineno"> 2599</span>&#160;  <a class="code" href="classllvm_1_1Value.html">Value</a> *One = <a class="code" href="classllvm_1_1Constant.html#a4d51384de6e1798bb6aa875aebeea9f0">Constant::getAllOnesValue</a>(<a class="code" href="README__ALTIVEC_8txt.html#a015846b6188ce15e08cd94c74a9df1a3">A</a>-&gt;getType());</div>
<div class="line"><a name="l02600"></a><span class="lineno"> 2600</span>&#160; </div>
<div class="line"><a name="l02601"></a><span class="lineno"> 2601</span>&#160;  <span class="keywordflow">if</span> (*Res == <span class="keyword">true</span>) {</div>
<div class="line"><a name="l02602"></a><span class="lineno"> 2602</span>&#160;    <span class="keywordflow">if</span> (IsAnd)</div>
<div class="line"><a name="l02603"></a><span class="lineno"> 2603</span>&#160;      <span class="comment">// select op, (select cond, A, B), false =&gt; select op, A, false</span></div>
<div class="line"><a name="l02604"></a><span class="lineno"> 2604</span>&#160;      <span class="comment">// and    op, (select cond, A, B)        =&gt; select op, A, false</span></div>
<div class="line"><a name="l02605"></a><span class="lineno"> 2605</span>&#160;      <span class="comment">//   if op = true implies condval = true.</span></div>
<div class="line"><a name="l02606"></a><span class="lineno"> 2606</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="classllvm_1_1SelectInst.html#aa55fb74dd22008fdcc26a63f44576022">SelectInst::Create</a>(<a class="code" href="namespacellvm_1_1AMDGPU_1_1SendMsg.html#a8594419a4ddfad2c9a79279c490e466d">Op</a>, <a class="code" href="README__ALTIVEC_8txt.html#a015846b6188ce15e08cd94c74a9df1a3">A</a>, Zero);</div>
<div class="line"><a name="l02607"></a><span class="lineno"> 2607</span>&#160;    <span class="keywordflow">else</span></div>
<div class="line"><a name="l02608"></a><span class="lineno"> 2608</span>&#160;      <span class="comment">// select op, true, (select cond, A, B) =&gt; select op, true, A</span></div>
<div class="line"><a name="l02609"></a><span class="lineno"> 2609</span>&#160;      <span class="comment">// or     op, (select cond, A, B)       =&gt; select op, true, A</span></div>
<div class="line"><a name="l02610"></a><span class="lineno"> 2610</span>&#160;      <span class="comment">//   if op = false implies condval = true.</span></div>
<div class="line"><a name="l02611"></a><span class="lineno"> 2611</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="classllvm_1_1SelectInst.html#aa55fb74dd22008fdcc26a63f44576022">SelectInst::Create</a>(<a class="code" href="namespacellvm_1_1AMDGPU_1_1SendMsg.html#a8594419a4ddfad2c9a79279c490e466d">Op</a>, One, <a class="code" href="README__ALTIVEC_8txt.html#a015846b6188ce15e08cd94c74a9df1a3">A</a>);</div>
<div class="line"><a name="l02612"></a><span class="lineno"> 2612</span>&#160;  } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l02613"></a><span class="lineno"> 2613</span>&#160;    <span class="keywordflow">if</span> (IsAnd)</div>
<div class="line"><a name="l02614"></a><span class="lineno"> 2614</span>&#160;      <span class="comment">// select op, (select cond, A, B), false =&gt; select op, B, false</span></div>
<div class="line"><a name="l02615"></a><span class="lineno"> 2615</span>&#160;      <span class="comment">// and    op, (select cond, A, B)        =&gt; select op, B, false</span></div>
<div class="line"><a name="l02616"></a><span class="lineno"> 2616</span>&#160;      <span class="comment">//   if op = true implies condval = false.</span></div>
<div class="line"><a name="l02617"></a><span class="lineno"> 2617</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="classllvm_1_1SelectInst.html#aa55fb74dd22008fdcc26a63f44576022">SelectInst::Create</a>(<a class="code" href="namespacellvm_1_1AMDGPU_1_1SendMsg.html#a8594419a4ddfad2c9a79279c490e466d">Op</a>, <a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a>, Zero);</div>
<div class="line"><a name="l02618"></a><span class="lineno"> 2618</span>&#160;    <span class="keywordflow">else</span></div>
<div class="line"><a name="l02619"></a><span class="lineno"> 2619</span>&#160;      <span class="comment">// select op, true, (select cond, A, B) =&gt; select op, true, B</span></div>
<div class="line"><a name="l02620"></a><span class="lineno"> 2620</span>&#160;      <span class="comment">// or     op, (select cond, A, B)       =&gt; select op, true, B</span></div>
<div class="line"><a name="l02621"></a><span class="lineno"> 2621</span>&#160;      <span class="comment">//   if op = false implies condval = false.</span></div>
<div class="line"><a name="l02622"></a><span class="lineno"> 2622</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="classllvm_1_1SelectInst.html#aa55fb74dd22008fdcc26a63f44576022">SelectInst::Create</a>(<a class="code" href="namespacellvm_1_1AMDGPU_1_1SendMsg.html#a8594419a4ddfad2c9a79279c490e466d">Op</a>, One, <a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a>);</div>
<div class="line"><a name="l02623"></a><span class="lineno"> 2623</span>&#160;  }</div>
<div class="line"><a name="l02624"></a><span class="lineno"> 2624</span>&#160;}</div>
<div class="line"><a name="l02625"></a><span class="lineno"> 2625</span>&#160; </div>
<div class="line"><a name="l02626"></a><span class="lineno"> 2626</span>&#160;<a class="code" href="classllvm_1_1Instruction.html">Instruction</a> *<a class="code" href="classllvm_1_1InstCombinerImpl.html#a150e27c909deae4ac2ecb0c5f4751867">InstCombinerImpl::visitSelectInst</a>(<a class="code" href="classllvm_1_1SelectInst.html">SelectInst</a> &amp;<a class="code" href="PassBuilderBindings_8cpp.html#a0f79dad1efc582555a443cc11a8fa401">SI</a>) {</div>
<div class="line"><a name="l02627"></a><span class="lineno"> 2627</span>&#160;  <a class="code" href="classllvm_1_1Value.html">Value</a> *CondVal = <a class="code" href="PassBuilderBindings_8cpp.html#a0f79dad1efc582555a443cc11a8fa401">SI</a>.getCondition();</div>
<div class="line"><a name="l02628"></a><span class="lineno"> 2628</span>&#160;  <a class="code" href="classllvm_1_1Value.html">Value</a> *<a class="code" href="namespacellvm_1_1tgtok.html#abbc5259d649363016626e2529fabe0c5a58b95af1ca96e109f85a0646a05fceb7">TrueVal</a> = <a class="code" href="PassBuilderBindings_8cpp.html#a0f79dad1efc582555a443cc11a8fa401">SI</a>.getTrueValue();</div>
<div class="line"><a name="l02629"></a><span class="lineno"> 2629</span>&#160;  <a class="code" href="classllvm_1_1Value.html">Value</a> *<a class="code" href="namespacellvm_1_1tgtok.html#abbc5259d649363016626e2529fabe0c5aeb5a2908109c763377832cbb4726b6d4">FalseVal</a> = <a class="code" href="PassBuilderBindings_8cpp.html#a0f79dad1efc582555a443cc11a8fa401">SI</a>.getFalseValue();</div>
<div class="line"><a name="l02630"></a><span class="lineno"> 2630</span>&#160;  <a class="code" href="classllvm_1_1Type.html">Type</a> *SelType = <a class="code" href="PassBuilderBindings_8cpp.html#a0f79dad1efc582555a443cc11a8fa401">SI</a>.getType();</div>
<div class="line"><a name="l02631"></a><span class="lineno"> 2631</span>&#160; </div>
<div class="line"><a name="l02632"></a><span class="lineno"> 2632</span>&#160;  <span class="comment">// FIXME: Remove this workaround when freeze related patches are done.</span></div>
<div class="line"><a name="l02633"></a><span class="lineno"> 2633</span>&#160;  <span class="comment">// For select with undef operand which feeds into an equality comparison,</span></div>
<div class="line"><a name="l02634"></a><span class="lineno"> 2634</span>&#160;  <span class="comment">// don&#39;t simplify it so loop unswitch can know the equality comparison</span></div>
<div class="line"><a name="l02635"></a><span class="lineno"> 2635</span>&#160;  <span class="comment">// may have an undef operand. This is a workaround for PR31652 caused by</span></div>
<div class="line"><a name="l02636"></a><span class="lineno"> 2636</span>&#160;  <span class="comment">// descrepancy about branch on undef between LoopUnswitch and GVN.</span></div>
<div class="line"><a name="l02637"></a><span class="lineno"> 2637</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="namespacellvm_1_1PatternMatch.html#a25d956d9e0beadd47ce4bc255dfa811d">match</a>(<a class="code" href="namespacellvm_1_1tgtok.html#abbc5259d649363016626e2529fabe0c5a58b95af1ca96e109f85a0646a05fceb7">TrueVal</a>, <a class="code" href="namespacellvm_1_1PatternMatch.html#adea6dc2e42baa345b97be48b0370313d">m_Undef</a>()) || <a class="code" href="namespacellvm_1_1PatternMatch.html#a25d956d9e0beadd47ce4bc255dfa811d">match</a>(<a class="code" href="namespacellvm_1_1tgtok.html#abbc5259d649363016626e2529fabe0c5aeb5a2908109c763377832cbb4726b6d4">FalseVal</a>, <a class="code" href="namespacellvm_1_1PatternMatch.html#adea6dc2e42baa345b97be48b0370313d">m_Undef</a>())) {</div>
<div class="line"><a name="l02638"></a><span class="lineno"> 2638</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="namespacellvm.html#a61d13d6824ec46c31260a4fd0997eda0">llvm::any_of</a>(<a class="code" href="PassBuilderBindings_8cpp.html#a0f79dad1efc582555a443cc11a8fa401">SI</a>.users(), [&amp;](<a class="code" href="classllvm_1_1User.html">User</a> *U) {</div>
<div class="line"><a name="l02639"></a><span class="lineno"> 2639</span>&#160;          ICmpInst *CI = dyn_cast&lt;ICmpInst&gt;(U);</div>
<div class="line"><a name="l02640"></a><span class="lineno"> 2640</span>&#160;          if (CI &amp;&amp; CI-&gt;isEquality())</div>
<div class="line"><a name="l02641"></a><span class="lineno"> 2641</span>&#160;            return true;</div>
<div class="line"><a name="l02642"></a><span class="lineno"> 2642</span>&#160;          return false;</div>
<div class="line"><a name="l02643"></a><span class="lineno"> 2643</span>&#160;        })) {</div>
<div class="line"><a name="l02644"></a><span class="lineno"> 2644</span>&#160;      <span class="keywordflow">return</span> <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l02645"></a><span class="lineno"> 2645</span>&#160;    }</div>
<div class="line"><a name="l02646"></a><span class="lineno"> 2646</span>&#160;  }</div>
<div class="line"><a name="l02647"></a><span class="lineno"> 2647</span>&#160; </div>
<div class="line"><a name="l02648"></a><span class="lineno"> 2648</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1Value.html">Value</a> *V = <a class="code" href="namespacellvm.html#a74a4b4e999364e537c6c8046f84f8f33">SimplifySelectInst</a>(CondVal, <a class="code" href="namespacellvm_1_1tgtok.html#abbc5259d649363016626e2529fabe0c5a58b95af1ca96e109f85a0646a05fceb7">TrueVal</a>, <a class="code" href="namespacellvm_1_1tgtok.html#abbc5259d649363016626e2529fabe0c5aeb5a2908109c763377832cbb4726b6d4">FalseVal</a>,</div>
<div class="line"><a name="l02649"></a><span class="lineno"> 2649</span>&#160;                                    SQ.getWithInstruction(&amp;<a class="code" href="PassBuilderBindings_8cpp.html#a0f79dad1efc582555a443cc11a8fa401">SI</a>)))</div>
<div class="line"><a name="l02650"></a><span class="lineno"> 2650</span>&#160;    <span class="keywordflow">return</span> replaceInstUsesWith(<a class="code" href="PassBuilderBindings_8cpp.html#a0f79dad1efc582555a443cc11a8fa401">SI</a>, V);</div>
<div class="line"><a name="l02651"></a><span class="lineno"> 2651</span>&#160; </div>
<div class="line"><a name="l02652"></a><span class="lineno"> 2652</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1Instruction.html">Instruction</a> *<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a> = canonicalizeSelectToShuffle(<a class="code" href="PassBuilderBindings_8cpp.html#a0f79dad1efc582555a443cc11a8fa401">SI</a>))</div>
<div class="line"><a name="l02653"></a><span class="lineno"> 2653</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>;</div>
<div class="line"><a name="l02654"></a><span class="lineno"> 2654</span>&#160; </div>
<div class="line"><a name="l02655"></a><span class="lineno"> 2655</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1Instruction.html">Instruction</a> *<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a> = canonicalizeScalarSelectOfVecs(<a class="code" href="PassBuilderBindings_8cpp.html#a0f79dad1efc582555a443cc11a8fa401">SI</a>, *<span class="keyword">this</span>))</div>
<div class="line"><a name="l02656"></a><span class="lineno"> 2656</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>;</div>
<div class="line"><a name="l02657"></a><span class="lineno"> 2657</span>&#160; </div>
<div class="line"><a name="l02658"></a><span class="lineno"> 2658</span>&#160;  <a class="code" href="classllvm_1_1CmpInst.html#a2be3583dac92a031fa1458d4d992c78b">CmpInst::Predicate</a> Pred;</div>
<div class="line"><a name="l02659"></a><span class="lineno"> 2659</span>&#160; </div>
<div class="line"><a name="l02660"></a><span class="lineno"> 2660</span>&#160;  <span class="comment">// Avoid potential infinite loops by checking for non-constant condition.</span></div>
<div class="line"><a name="l02661"></a><span class="lineno"> 2661</span>&#160;  <span class="comment">// TODO: Can we assert instead by improving canonicalizeSelectToShuffle()?</span></div>
<div class="line"><a name="l02662"></a><span class="lineno"> 2662</span>&#160;  <span class="comment">//       Scalar select must have simplified?</span></div>
<div class="line"><a name="l02663"></a><span class="lineno"> 2663</span>&#160;  <span class="keywordflow">if</span> (SelType-&gt;<a class="code" href="classllvm_1_1Type.html#a34ee40bb2f4f5ece47ef19e5f1f57e3c">isIntOrIntVectorTy</a>(1) &amp;&amp; !isa&lt;Constant&gt;(CondVal) &amp;&amp;</div>
<div class="line"><a name="l02664"></a><span class="lineno"> 2664</span>&#160;      <a class="code" href="namespacellvm_1_1tgtok.html#abbc5259d649363016626e2529fabe0c5a58b95af1ca96e109f85a0646a05fceb7">TrueVal</a>-&gt;getType() == CondVal-&gt;<a class="code" href="classllvm_1_1Value.html#a6393a2d4fe7e10b28a0dcc35f881567b">getType</a>()) {</div>
<div class="line"><a name="l02665"></a><span class="lineno"> 2665</span>&#160;    <span class="comment">// Folding select to and/or i1 isn&#39;t poison safe in general. impliesPoison</span></div>
<div class="line"><a name="l02666"></a><span class="lineno"> 2666</span>&#160;    <span class="comment">// checks whether folding it does not convert a well-defined value into</span></div>
<div class="line"><a name="l02667"></a><span class="lineno"> 2667</span>&#160;    <span class="comment">// poison.</span></div>
<div class="line"><a name="l02668"></a><span class="lineno"> 2668</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="namespacellvm_1_1PatternMatch.html#a25d956d9e0beadd47ce4bc255dfa811d">match</a>(<a class="code" href="namespacellvm_1_1tgtok.html#abbc5259d649363016626e2529fabe0c5a58b95af1ca96e109f85a0646a05fceb7">TrueVal</a>, <a class="code" href="namespacellvm_1_1PatternMatch.html#aebdb2700a77d10ae6f0ce115e23d9f77">m_One</a>()) &amp;&amp; <a class="code" href="namespacellvm.html#a71a4a4e0f6178682ef05a0d85891e5a9">impliesPoison</a>(<a class="code" href="namespacellvm_1_1tgtok.html#abbc5259d649363016626e2529fabe0c5aeb5a2908109c763377832cbb4726b6d4">FalseVal</a>, CondVal)) {</div>
<div class="line"><a name="l02669"></a><span class="lineno"> 2669</span>&#160;      <span class="comment">// Change: A = select B, true, C --&gt; A = or B, C</span></div>
<div class="line"><a name="l02670"></a><span class="lineno"> 2670</span>&#160;      <span class="keywordflow">return</span> BinaryOperator::CreateOr(CondVal, <a class="code" href="namespacellvm_1_1tgtok.html#abbc5259d649363016626e2529fabe0c5aeb5a2908109c763377832cbb4726b6d4">FalseVal</a>);</div>
<div class="line"><a name="l02671"></a><span class="lineno"> 2671</span>&#160;    }</div>
<div class="line"><a name="l02672"></a><span class="lineno"> 2672</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="namespacellvm_1_1PatternMatch.html#a25d956d9e0beadd47ce4bc255dfa811d">match</a>(<a class="code" href="namespacellvm_1_1tgtok.html#abbc5259d649363016626e2529fabe0c5aeb5a2908109c763377832cbb4726b6d4">FalseVal</a>, <a class="code" href="namespacellvm_1_1PatternMatch.html#ae77be336e228cf9aa00709a8606dfb98">m_Zero</a>()) &amp;&amp; <a class="code" href="namespacellvm.html#a71a4a4e0f6178682ef05a0d85891e5a9">impliesPoison</a>(<a class="code" href="namespacellvm_1_1tgtok.html#abbc5259d649363016626e2529fabe0c5a58b95af1ca96e109f85a0646a05fceb7">TrueVal</a>, CondVal)) {</div>
<div class="line"><a name="l02673"></a><span class="lineno"> 2673</span>&#160;      <span class="comment">// Change: A = select B, C, false --&gt; A = and B, C</span></div>
<div class="line"><a name="l02674"></a><span class="lineno"> 2674</span>&#160;      <span class="keywordflow">return</span> BinaryOperator::CreateAnd(CondVal, <a class="code" href="namespacellvm_1_1tgtok.html#abbc5259d649363016626e2529fabe0c5a58b95af1ca96e109f85a0646a05fceb7">TrueVal</a>);</div>
<div class="line"><a name="l02675"></a><span class="lineno"> 2675</span>&#160;    }</div>
<div class="line"><a name="l02676"></a><span class="lineno"> 2676</span>&#160; </div>
<div class="line"><a name="l02677"></a><span class="lineno"> 2677</span>&#160;    <span class="keyword">auto</span> *One = <a class="code" href="classllvm_1_1ConstantInt.html#a82dbbd8e3688b0bc1eedb338864d0d0c">ConstantInt::getTrue</a>(SelType);</div>
<div class="line"><a name="l02678"></a><span class="lineno"> 2678</span>&#160;    <span class="keyword">auto</span> *Zero = <a class="code" href="classllvm_1_1ConstantInt.html#aa7cce62ac5cc6df09cce0535874336b7">ConstantInt::getFalse</a>(SelType);</div>
<div class="line"><a name="l02679"></a><span class="lineno"> 2679</span>&#160; </div>
<div class="line"><a name="l02680"></a><span class="lineno"> 2680</span>&#160;    <span class="comment">// We match the &quot;full&quot; 0 or 1 constant here to avoid a potential infinite</span></div>
<div class="line"><a name="l02681"></a><span class="lineno"> 2681</span>&#160;    <span class="comment">// loop with vectors that may have undefined/poison elements.</span></div>
<div class="line"><a name="l02682"></a><span class="lineno"> 2682</span>&#160;    <span class="comment">// select a, false, b -&gt; select !a, b, false</span></div>
<div class="line"><a name="l02683"></a><span class="lineno"> 2683</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="namespacellvm_1_1PatternMatch.html#a25d956d9e0beadd47ce4bc255dfa811d">match</a>(<a class="code" href="namespacellvm_1_1tgtok.html#abbc5259d649363016626e2529fabe0c5a58b95af1ca96e109f85a0646a05fceb7">TrueVal</a>, <a class="code" href="namespacellvm_1_1PatternMatch.html#a2d9861feadd3a09792967a012559e7b2">m_Specific</a>(Zero))) {</div>
<div class="line"><a name="l02684"></a><span class="lineno"> 2684</span>&#160;      <a class="code" href="classllvm_1_1Value.html">Value</a> *NotCond = <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.CreateNot(CondVal, <span class="stringliteral">&quot;not.&quot;</span> + CondVal-&gt;<a class="code" href="classllvm_1_1Value.html#adb5c319f5905c1d3ca9eb5df546388c5">getName</a>());</div>
<div class="line"><a name="l02685"></a><span class="lineno"> 2685</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="classllvm_1_1SelectInst.html#aa55fb74dd22008fdcc26a63f44576022">SelectInst::Create</a>(NotCond, <a class="code" href="namespacellvm_1_1tgtok.html#abbc5259d649363016626e2529fabe0c5aeb5a2908109c763377832cbb4726b6d4">FalseVal</a>, Zero);</div>
<div class="line"><a name="l02686"></a><span class="lineno"> 2686</span>&#160;    }</div>
<div class="line"><a name="l02687"></a><span class="lineno"> 2687</span>&#160;    <span class="comment">// select a, b, true -&gt; select !a, true, b</span></div>
<div class="line"><a name="l02688"></a><span class="lineno"> 2688</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="namespacellvm_1_1PatternMatch.html#a25d956d9e0beadd47ce4bc255dfa811d">match</a>(<a class="code" href="namespacellvm_1_1tgtok.html#abbc5259d649363016626e2529fabe0c5aeb5a2908109c763377832cbb4726b6d4">FalseVal</a>, <a class="code" href="namespacellvm_1_1PatternMatch.html#a2d9861feadd3a09792967a012559e7b2">m_Specific</a>(One))) {</div>
<div class="line"><a name="l02689"></a><span class="lineno"> 2689</span>&#160;      <a class="code" href="classllvm_1_1Value.html">Value</a> *NotCond = <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.CreateNot(CondVal, <span class="stringliteral">&quot;not.&quot;</span> + CondVal-&gt;<a class="code" href="classllvm_1_1Value.html#adb5c319f5905c1d3ca9eb5df546388c5">getName</a>());</div>
<div class="line"><a name="l02690"></a><span class="lineno"> 2690</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="classllvm_1_1SelectInst.html#aa55fb74dd22008fdcc26a63f44576022">SelectInst::Create</a>(NotCond, One, <a class="code" href="namespacellvm_1_1tgtok.html#abbc5259d649363016626e2529fabe0c5a58b95af1ca96e109f85a0646a05fceb7">TrueVal</a>);</div>
<div class="line"><a name="l02691"></a><span class="lineno"> 2691</span>&#160;    }</div>
<div class="line"><a name="l02692"></a><span class="lineno"> 2692</span>&#160; </div>
<div class="line"><a name="l02693"></a><span class="lineno"> 2693</span>&#160;    <span class="comment">// select a, a, b -&gt; select a, true, b</span></div>
<div class="line"><a name="l02694"></a><span class="lineno"> 2694</span>&#160;    <span class="keywordflow">if</span> (CondVal == <a class="code" href="namespacellvm_1_1tgtok.html#abbc5259d649363016626e2529fabe0c5a58b95af1ca96e109f85a0646a05fceb7">TrueVal</a>)</div>
<div class="line"><a name="l02695"></a><span class="lineno"> 2695</span>&#160;      <span class="keywordflow">return</span> replaceOperand(<a class="code" href="PassBuilderBindings_8cpp.html#a0f79dad1efc582555a443cc11a8fa401">SI</a>, 1, One);</div>
<div class="line"><a name="l02696"></a><span class="lineno"> 2696</span>&#160;    <span class="comment">// select a, b, a -&gt; select a, b, false</span></div>
<div class="line"><a name="l02697"></a><span class="lineno"> 2697</span>&#160;    <span class="keywordflow">if</span> (CondVal == <a class="code" href="namespacellvm_1_1tgtok.html#abbc5259d649363016626e2529fabe0c5aeb5a2908109c763377832cbb4726b6d4">FalseVal</a>)</div>
<div class="line"><a name="l02698"></a><span class="lineno"> 2698</span>&#160;      <span class="keywordflow">return</span> replaceOperand(<a class="code" href="PassBuilderBindings_8cpp.html#a0f79dad1efc582555a443cc11a8fa401">SI</a>, 2, Zero);</div>
<div class="line"><a name="l02699"></a><span class="lineno"> 2699</span>&#160; </div>
<div class="line"><a name="l02700"></a><span class="lineno"> 2700</span>&#160;    <span class="comment">// select a, !a, b -&gt; select !a, b, false</span></div>
<div class="line"><a name="l02701"></a><span class="lineno"> 2701</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="namespacellvm_1_1PatternMatch.html#a25d956d9e0beadd47ce4bc255dfa811d">match</a>(<a class="code" href="namespacellvm_1_1tgtok.html#abbc5259d649363016626e2529fabe0c5a58b95af1ca96e109f85a0646a05fceb7">TrueVal</a>, <a class="code" href="namespacellvm_1_1PatternMatch.html#ad6994fd7098916ce21d65be005666f21">m_Not</a>(<a class="code" href="namespacellvm_1_1PatternMatch.html#a2d9861feadd3a09792967a012559e7b2">m_Specific</a>(CondVal))))</div>
<div class="line"><a name="l02702"></a><span class="lineno"> 2702</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="classllvm_1_1SelectInst.html#aa55fb74dd22008fdcc26a63f44576022">SelectInst::Create</a>(<a class="code" href="namespacellvm_1_1tgtok.html#abbc5259d649363016626e2529fabe0c5a58b95af1ca96e109f85a0646a05fceb7">TrueVal</a>, <a class="code" href="namespacellvm_1_1tgtok.html#abbc5259d649363016626e2529fabe0c5aeb5a2908109c763377832cbb4726b6d4">FalseVal</a>, Zero);</div>
<div class="line"><a name="l02703"></a><span class="lineno"> 2703</span>&#160;    <span class="comment">// select a, b, !a -&gt; select !a, true, b</span></div>
<div class="line"><a name="l02704"></a><span class="lineno"> 2704</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="namespacellvm_1_1PatternMatch.html#a25d956d9e0beadd47ce4bc255dfa811d">match</a>(<a class="code" href="namespacellvm_1_1tgtok.html#abbc5259d649363016626e2529fabe0c5aeb5a2908109c763377832cbb4726b6d4">FalseVal</a>, <a class="code" href="namespacellvm_1_1PatternMatch.html#ad6994fd7098916ce21d65be005666f21">m_Not</a>(<a class="code" href="namespacellvm_1_1PatternMatch.html#a2d9861feadd3a09792967a012559e7b2">m_Specific</a>(CondVal))))</div>
<div class="line"><a name="l02705"></a><span class="lineno"> 2705</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="classllvm_1_1SelectInst.html#aa55fb74dd22008fdcc26a63f44576022">SelectInst::Create</a>(<a class="code" href="namespacellvm_1_1tgtok.html#abbc5259d649363016626e2529fabe0c5aeb5a2908109c763377832cbb4726b6d4">FalseVal</a>, One, <a class="code" href="namespacellvm_1_1tgtok.html#abbc5259d649363016626e2529fabe0c5a58b95af1ca96e109f85a0646a05fceb7">TrueVal</a>);</div>
<div class="line"><a name="l02706"></a><span class="lineno"> 2706</span>&#160; </div>
<div class="line"><a name="l02707"></a><span class="lineno"> 2707</span>&#160;    <a class="code" href="classllvm_1_1Value.html">Value</a> *<a class="code" href="README__ALTIVEC_8txt.html#a015846b6188ce15e08cd94c74a9df1a3">A</a>, *<a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a>;</div>
<div class="line"><a name="l02708"></a><span class="lineno"> 2708</span>&#160; </div>
<div class="line"><a name="l02709"></a><span class="lineno"> 2709</span>&#160;    <span class="comment">// DeMorgan in select form: !a &amp;&amp; !b --&gt; !(a || b)</span></div>
<div class="line"><a name="l02710"></a><span class="lineno"> 2710</span>&#160;    <span class="comment">// select !a, !b, false --&gt; not (select a, true, b)</span></div>
<div class="line"><a name="l02711"></a><span class="lineno"> 2711</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="namespacellvm_1_1PatternMatch.html#a25d956d9e0beadd47ce4bc255dfa811d">match</a>(&amp;<a class="code" href="PassBuilderBindings_8cpp.html#a0f79dad1efc582555a443cc11a8fa401">SI</a>, <a class="code" href="namespacellvm_1_1PatternMatch.html#a213e6c0ca6e838157373b9a6018c0769">m_LogicalAnd</a>(<a class="code" href="namespacellvm_1_1PatternMatch.html#ad6994fd7098916ce21d65be005666f21">m_Not</a>(<a class="code" href="namespacellvm_1_1PatternMatch.html#a24bca8838396aa81b87de8e7ac774b19">m_Value</a>(<a class="code" href="README__ALTIVEC_8txt.html#a015846b6188ce15e08cd94c74a9df1a3">A</a>)), <a class="code" href="namespacellvm_1_1PatternMatch.html#ad6994fd7098916ce21d65be005666f21">m_Not</a>(<a class="code" href="namespacellvm_1_1PatternMatch.html#a24bca8838396aa81b87de8e7ac774b19">m_Value</a>(<a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a>)))) &amp;&amp;</div>
<div class="line"><a name="l02712"></a><span class="lineno"> 2712</span>&#160;        (CondVal-&gt;<a class="code" href="classllvm_1_1Value.html#a3a402430a1bbe70a9282dcb0e0b6a2cd">hasOneUse</a>() || <a class="code" href="namespacellvm_1_1tgtok.html#abbc5259d649363016626e2529fabe0c5a58b95af1ca96e109f85a0646a05fceb7">TrueVal</a>-&gt;hasOneUse()) &amp;&amp;</div>
<div class="line"><a name="l02713"></a><span class="lineno"> 2713</span>&#160;        !<a class="code" href="namespacellvm_1_1PatternMatch.html#a25d956d9e0beadd47ce4bc255dfa811d">match</a>(<a class="code" href="README__ALTIVEC_8txt.html#a015846b6188ce15e08cd94c74a9df1a3">A</a>, <a class="code" href="namespacellvm_1_1PatternMatch.html#a8e7f8525228484fa6149f800fe4ce505">m_ConstantExpr</a>()) &amp;&amp; !<a class="code" href="namespacellvm_1_1PatternMatch.html#a25d956d9e0beadd47ce4bc255dfa811d">match</a>(<a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a>, <a class="code" href="namespacellvm_1_1PatternMatch.html#a8e7f8525228484fa6149f800fe4ce505">m_ConstantExpr</a>()))</div>
<div class="line"><a name="l02714"></a><span class="lineno"> 2714</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="classllvm_1_1BinaryOperator.html#a4f500ae0de71695b652af4c0958d8ea8">BinaryOperator::CreateNot</a>(<a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.CreateSelect(<a class="code" href="README__ALTIVEC_8txt.html#a015846b6188ce15e08cd94c74a9df1a3">A</a>, One, <a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a>));</div>
<div class="line"><a name="l02715"></a><span class="lineno"> 2715</span>&#160; </div>
<div class="line"><a name="l02716"></a><span class="lineno"> 2716</span>&#160;    <span class="comment">// DeMorgan in select form: !a || !b --&gt; !(a &amp;&amp; b)</span></div>
<div class="line"><a name="l02717"></a><span class="lineno"> 2717</span>&#160;    <span class="comment">// select !a, true, !b --&gt; not (select a, b, false)</span></div>
<div class="line"><a name="l02718"></a><span class="lineno"> 2718</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="namespacellvm_1_1PatternMatch.html#a25d956d9e0beadd47ce4bc255dfa811d">match</a>(&amp;<a class="code" href="PassBuilderBindings_8cpp.html#a0f79dad1efc582555a443cc11a8fa401">SI</a>, <a class="code" href="namespacellvm_1_1PatternMatch.html#a1a06b1cff93069d7403ea03e6150e386">m_LogicalOr</a>(<a class="code" href="namespacellvm_1_1PatternMatch.html#ad6994fd7098916ce21d65be005666f21">m_Not</a>(<a class="code" href="namespacellvm_1_1PatternMatch.html#a24bca8838396aa81b87de8e7ac774b19">m_Value</a>(<a class="code" href="README__ALTIVEC_8txt.html#a015846b6188ce15e08cd94c74a9df1a3">A</a>)), <a class="code" href="namespacellvm_1_1PatternMatch.html#ad6994fd7098916ce21d65be005666f21">m_Not</a>(<a class="code" href="namespacellvm_1_1PatternMatch.html#a24bca8838396aa81b87de8e7ac774b19">m_Value</a>(<a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a>)))) &amp;&amp;</div>
<div class="line"><a name="l02719"></a><span class="lineno"> 2719</span>&#160;        (CondVal-&gt;<a class="code" href="classllvm_1_1Value.html#a3a402430a1bbe70a9282dcb0e0b6a2cd">hasOneUse</a>() || <a class="code" href="namespacellvm_1_1tgtok.html#abbc5259d649363016626e2529fabe0c5aeb5a2908109c763377832cbb4726b6d4">FalseVal</a>-&gt;hasOneUse()) &amp;&amp;</div>
<div class="line"><a name="l02720"></a><span class="lineno"> 2720</span>&#160;        !<a class="code" href="namespacellvm_1_1PatternMatch.html#a25d956d9e0beadd47ce4bc255dfa811d">match</a>(<a class="code" href="README__ALTIVEC_8txt.html#a015846b6188ce15e08cd94c74a9df1a3">A</a>, <a class="code" href="namespacellvm_1_1PatternMatch.html#a8e7f8525228484fa6149f800fe4ce505">m_ConstantExpr</a>()) &amp;&amp; !<a class="code" href="namespacellvm_1_1PatternMatch.html#a25d956d9e0beadd47ce4bc255dfa811d">match</a>(<a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a>, <a class="code" href="namespacellvm_1_1PatternMatch.html#a8e7f8525228484fa6149f800fe4ce505">m_ConstantExpr</a>()))</div>
<div class="line"><a name="l02721"></a><span class="lineno"> 2721</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="classllvm_1_1BinaryOperator.html#a4f500ae0de71695b652af4c0958d8ea8">BinaryOperator::CreateNot</a>(<a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.CreateSelect(<a class="code" href="README__ALTIVEC_8txt.html#a015846b6188ce15e08cd94c74a9df1a3">A</a>, <a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a>, Zero));</div>
<div class="line"><a name="l02722"></a><span class="lineno"> 2722</span>&#160; </div>
<div class="line"><a name="l02723"></a><span class="lineno"> 2723</span>&#160;    <span class="comment">// select (select a, true, b), true, b -&gt; select a, true, b</span></div>
<div class="line"><a name="l02724"></a><span class="lineno"> 2724</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="namespacellvm_1_1PatternMatch.html#a25d956d9e0beadd47ce4bc255dfa811d">match</a>(CondVal, <a class="code" href="namespacellvm_1_1PatternMatch.html#addb87fe3f509b7803d3f5933ee24b560">m_Select</a>(<a class="code" href="namespacellvm_1_1PatternMatch.html#a24bca8838396aa81b87de8e7ac774b19">m_Value</a>(<a class="code" href="README__ALTIVEC_8txt.html#a015846b6188ce15e08cd94c74a9df1a3">A</a>), <a class="code" href="namespacellvm_1_1PatternMatch.html#aebdb2700a77d10ae6f0ce115e23d9f77">m_One</a>(), <a class="code" href="namespacellvm_1_1PatternMatch.html#a24bca8838396aa81b87de8e7ac774b19">m_Value</a>(<a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a>))) &amp;&amp;</div>
<div class="line"><a name="l02725"></a><span class="lineno"> 2725</span>&#160;        <a class="code" href="namespacellvm_1_1PatternMatch.html#a25d956d9e0beadd47ce4bc255dfa811d">match</a>(<a class="code" href="namespacellvm_1_1tgtok.html#abbc5259d649363016626e2529fabe0c5a58b95af1ca96e109f85a0646a05fceb7">TrueVal</a>, <a class="code" href="namespacellvm_1_1PatternMatch.html#aebdb2700a77d10ae6f0ce115e23d9f77">m_One</a>()) &amp;&amp; <a class="code" href="namespacellvm_1_1PatternMatch.html#a25d956d9e0beadd47ce4bc255dfa811d">match</a>(<a class="code" href="namespacellvm_1_1tgtok.html#abbc5259d649363016626e2529fabe0c5aeb5a2908109c763377832cbb4726b6d4">FalseVal</a>, <a class="code" href="namespacellvm_1_1PatternMatch.html#a2d9861feadd3a09792967a012559e7b2">m_Specific</a>(<a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a>)))</div>
<div class="line"><a name="l02726"></a><span class="lineno"> 2726</span>&#160;      <span class="keywordflow">return</span> replaceOperand(<a class="code" href="PassBuilderBindings_8cpp.html#a0f79dad1efc582555a443cc11a8fa401">SI</a>, 0, <a class="code" href="README__ALTIVEC_8txt.html#a015846b6188ce15e08cd94c74a9df1a3">A</a>);</div>
<div class="line"><a name="l02727"></a><span class="lineno"> 2727</span>&#160;    <span class="comment">// select (select a, b, false), b, false -&gt; select a, b, false</span></div>
<div class="line"><a name="l02728"></a><span class="lineno"> 2728</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="namespacellvm_1_1PatternMatch.html#a25d956d9e0beadd47ce4bc255dfa811d">match</a>(CondVal, <a class="code" href="namespacellvm_1_1PatternMatch.html#addb87fe3f509b7803d3f5933ee24b560">m_Select</a>(<a class="code" href="namespacellvm_1_1PatternMatch.html#a24bca8838396aa81b87de8e7ac774b19">m_Value</a>(<a class="code" href="README__ALTIVEC_8txt.html#a015846b6188ce15e08cd94c74a9df1a3">A</a>), <a class="code" href="namespacellvm_1_1PatternMatch.html#a24bca8838396aa81b87de8e7ac774b19">m_Value</a>(<a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a>), <a class="code" href="namespacellvm_1_1PatternMatch.html#ae77be336e228cf9aa00709a8606dfb98">m_Zero</a>())) &amp;&amp;</div>
<div class="line"><a name="l02729"></a><span class="lineno"> 2729</span>&#160;        <a class="code" href="namespacellvm_1_1PatternMatch.html#a25d956d9e0beadd47ce4bc255dfa811d">match</a>(<a class="code" href="namespacellvm_1_1tgtok.html#abbc5259d649363016626e2529fabe0c5a58b95af1ca96e109f85a0646a05fceb7">TrueVal</a>, <a class="code" href="namespacellvm_1_1PatternMatch.html#a2d9861feadd3a09792967a012559e7b2">m_Specific</a>(<a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a>)) &amp;&amp; <a class="code" href="namespacellvm_1_1PatternMatch.html#a25d956d9e0beadd47ce4bc255dfa811d">match</a>(<a class="code" href="namespacellvm_1_1tgtok.html#abbc5259d649363016626e2529fabe0c5aeb5a2908109c763377832cbb4726b6d4">FalseVal</a>, <a class="code" href="namespacellvm_1_1PatternMatch.html#ae77be336e228cf9aa00709a8606dfb98">m_Zero</a>()))</div>
<div class="line"><a name="l02730"></a><span class="lineno"> 2730</span>&#160;      <span class="keywordflow">return</span> replaceOperand(<a class="code" href="PassBuilderBindings_8cpp.html#a0f79dad1efc582555a443cc11a8fa401">SI</a>, 0, <a class="code" href="README__ALTIVEC_8txt.html#a015846b6188ce15e08cd94c74a9df1a3">A</a>);</div>
<div class="line"><a name="l02731"></a><span class="lineno"> 2731</span>&#160; </div>
<div class="line"><a name="l02732"></a><span class="lineno"> 2732</span>&#160;    <span class="keywordflow">if</span> (!SelType-&gt;<a class="code" href="classllvm_1_1Type.html#a1bc022868b23918efa44df511f4d5b61">isVectorTy</a>()) {</div>
<div class="line"><a name="l02733"></a><span class="lineno"> 2733</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1Value.html">Value</a> *<a class="code" href="lib_2Target_2ARM_2README_8txt.html#a1b45f45820a60c09244a87eb59824aec">S</a> = <a class="code" href="namespacellvm.html#aec255ef4fae19e320da9585657e25a1e">simplifyWithOpReplaced</a>(<a class="code" href="namespacellvm_1_1tgtok.html#abbc5259d649363016626e2529fabe0c5a58b95af1ca96e109f85a0646a05fceb7">TrueVal</a>, CondVal, One, SQ,</div>
<div class="line"><a name="l02734"></a><span class="lineno"> 2734</span>&#160;                                            <span class="comment">/* AllowRefinement */</span> <span class="keyword">true</span>))</div>
<div class="line"><a name="l02735"></a><span class="lineno"> 2735</span>&#160;        <span class="keywordflow">return</span> replaceOperand(<a class="code" href="PassBuilderBindings_8cpp.html#a0f79dad1efc582555a443cc11a8fa401">SI</a>, 1, <a class="code" href="lib_2Target_2ARM_2README_8txt.html#a1b45f45820a60c09244a87eb59824aec">S</a>);</div>
<div class="line"><a name="l02736"></a><span class="lineno"> 2736</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1Value.html">Value</a> *<a class="code" href="lib_2Target_2ARM_2README_8txt.html#a1b45f45820a60c09244a87eb59824aec">S</a> = <a class="code" href="namespacellvm.html#aec255ef4fae19e320da9585657e25a1e">simplifyWithOpReplaced</a>(<a class="code" href="namespacellvm_1_1tgtok.html#abbc5259d649363016626e2529fabe0c5aeb5a2908109c763377832cbb4726b6d4">FalseVal</a>, CondVal, Zero, SQ,</div>
<div class="line"><a name="l02737"></a><span class="lineno"> 2737</span>&#160;                                            <span class="comment">/* AllowRefinement */</span> <span class="keyword">true</span>))</div>
<div class="line"><a name="l02738"></a><span class="lineno"> 2738</span>&#160;        <span class="keywordflow">return</span> replaceOperand(<a class="code" href="PassBuilderBindings_8cpp.html#a0f79dad1efc582555a443cc11a8fa401">SI</a>, 2, <a class="code" href="lib_2Target_2ARM_2README_8txt.html#a1b45f45820a60c09244a87eb59824aec">S</a>);</div>
<div class="line"><a name="l02739"></a><span class="lineno"> 2739</span>&#160;    }</div>
<div class="line"><a name="l02740"></a><span class="lineno"> 2740</span>&#160; </div>
<div class="line"><a name="l02741"></a><span class="lineno"> 2741</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="namespacellvm_1_1PatternMatch.html#a25d956d9e0beadd47ce4bc255dfa811d">match</a>(<a class="code" href="namespacellvm_1_1tgtok.html#abbc5259d649363016626e2529fabe0c5aeb5a2908109c763377832cbb4726b6d4">FalseVal</a>, <a class="code" href="namespacellvm_1_1PatternMatch.html#ae77be336e228cf9aa00709a8606dfb98">m_Zero</a>()) || <a class="code" href="namespacellvm_1_1PatternMatch.html#a25d956d9e0beadd47ce4bc255dfa811d">match</a>(<a class="code" href="namespacellvm_1_1tgtok.html#abbc5259d649363016626e2529fabe0c5a58b95af1ca96e109f85a0646a05fceb7">TrueVal</a>, <a class="code" href="namespacellvm_1_1PatternMatch.html#aebdb2700a77d10ae6f0ce115e23d9f77">m_One</a>())) {</div>
<div class="line"><a name="l02742"></a><span class="lineno"> 2742</span>&#160;      <a class="code" href="classllvm_1_1Use.html">Use</a> *<a class="code" href="OcamlGCPrinter_8cpp.html#afcf2f797ed287a723263583c9b1c1bce">Y</a> = <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l02743"></a><span class="lineno"> 2743</span>&#160;      <span class="keywordtype">bool</span> IsAnd = <a class="code" href="namespacellvm_1_1PatternMatch.html#a25d956d9e0beadd47ce4bc255dfa811d">match</a>(<a class="code" href="namespacellvm_1_1tgtok.html#abbc5259d649363016626e2529fabe0c5aeb5a2908109c763377832cbb4726b6d4">FalseVal</a>, <a class="code" href="namespacellvm_1_1PatternMatch.html#ae77be336e228cf9aa00709a8606dfb98">m_Zero</a>()) ? <a class="code" href="BasicAliasAnalysis_8cpp.html#af1bff759151fc332f9c9021578b15be6">true</a> : <span class="keyword">false</span>;</div>
<div class="line"><a name="l02744"></a><span class="lineno"> 2744</span>&#160;      <a class="code" href="classllvm_1_1Value.html">Value</a> *Op1 = IsAnd ? <a class="code" href="namespacellvm_1_1tgtok.html#abbc5259d649363016626e2529fabe0c5a58b95af1ca96e109f85a0646a05fceb7">TrueVal</a> : <a class="code" href="namespacellvm_1_1tgtok.html#abbc5259d649363016626e2529fabe0c5aeb5a2908109c763377832cbb4726b6d4">FalseVal</a>;</div>
<div class="line"><a name="l02745"></a><span class="lineno"> 2745</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="namespacellvm.html#aebd66f6649c1449adbcfcedf1651af18">isCheckForZeroAndMulWithOverflow</a>(CondVal, Op1, IsAnd, <a class="code" href="OcamlGCPrinter_8cpp.html#afcf2f797ed287a723263583c9b1c1bce">Y</a>)) {</div>
<div class="line"><a name="l02746"></a><span class="lineno"> 2746</span>&#160;        <span class="keyword">auto</span> *FI = <span class="keyword">new</span> <a class="code" href="classllvm_1_1FreezeInst.html">FreezeInst</a>(*<a class="code" href="OcamlGCPrinter_8cpp.html#afcf2f797ed287a723263583c9b1c1bce">Y</a>, (*Y)-&gt;getName() + <span class="stringliteral">&quot;.fr&quot;</span>);</div>
<div class="line"><a name="l02747"></a><span class="lineno"> 2747</span>&#160;        InsertNewInstBefore(FI, *cast&lt;Instruction&gt;(<a class="code" href="OcamlGCPrinter_8cpp.html#afcf2f797ed287a723263583c9b1c1bce">Y</a>-&gt;getUser()));</div>
<div class="line"><a name="l02748"></a><span class="lineno"> 2748</span>&#160;        replaceUse(*<a class="code" href="OcamlGCPrinter_8cpp.html#afcf2f797ed287a723263583c9b1c1bce">Y</a>, FI);</div>
<div class="line"><a name="l02749"></a><span class="lineno"> 2749</span>&#160;        <span class="keywordflow">return</span> replaceInstUsesWith(<a class="code" href="PassBuilderBindings_8cpp.html#a0f79dad1efc582555a443cc11a8fa401">SI</a>, Op1);</div>
<div class="line"><a name="l02750"></a><span class="lineno"> 2750</span>&#160;      }</div>
<div class="line"><a name="l02751"></a><span class="lineno"> 2751</span>&#160; </div>
<div class="line"><a name="l02752"></a><span class="lineno"> 2752</span>&#160;      <span class="keywordflow">if</span> (<span class="keyword">auto</span> *Op1SI = dyn_cast&lt;SelectInst&gt;(Op1))</div>
<div class="line"><a name="l02753"></a><span class="lineno"> 2753</span>&#160;        <span class="keywordflow">if</span> (<span class="keyword">auto</span> *<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a> = foldAndOrOfSelectUsingImpliedCond(CondVal, *Op1SI,</div>
<div class="line"><a name="l02754"></a><span class="lineno"> 2754</span>&#160;                                                        <span class="comment">/* IsAnd */</span> IsAnd))</div>
<div class="line"><a name="l02755"></a><span class="lineno"> 2755</span>&#160;          <span class="keywordflow">return</span> <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>;</div>
<div class="line"><a name="l02756"></a><span class="lineno"> 2756</span>&#160; </div>
<div class="line"><a name="l02757"></a><span class="lineno"> 2757</span>&#160;      <span class="keywordflow">if</span> (<span class="keyword">auto</span> *ICmp0 = dyn_cast&lt;ICmpInst&gt;(CondVal))</div>
<div class="line"><a name="l02758"></a><span class="lineno"> 2758</span>&#160;        <span class="keywordflow">if</span> (<span class="keyword">auto</span> *ICmp1 = dyn_cast&lt;ICmpInst&gt;(Op1))</div>
<div class="line"><a name="l02759"></a><span class="lineno"> 2759</span>&#160;          <span class="keywordflow">if</span> (<span class="keyword">auto</span> *V = foldAndOrOfICmpsOfAndWithPow2(ICmp0, ICmp1, &amp;<a class="code" href="PassBuilderBindings_8cpp.html#a0f79dad1efc582555a443cc11a8fa401">SI</a>, IsAnd,</div>
<div class="line"><a name="l02760"></a><span class="lineno"> 2760</span>&#160;                                                      <span class="comment">/* IsLogical */</span> <span class="keyword">true</span>))</div>
<div class="line"><a name="l02761"></a><span class="lineno"> 2761</span>&#160;            <span class="keywordflow">return</span> replaceInstUsesWith(<a class="code" href="PassBuilderBindings_8cpp.html#a0f79dad1efc582555a443cc11a8fa401">SI</a>, V);</div>
<div class="line"><a name="l02762"></a><span class="lineno"> 2762</span>&#160;    }</div>
<div class="line"><a name="l02763"></a><span class="lineno"> 2763</span>&#160; </div>
<div class="line"><a name="l02764"></a><span class="lineno"> 2764</span>&#160;    <span class="comment">// select (select a, true, b), c, false -&gt; select a, c, false</span></div>
<div class="line"><a name="l02765"></a><span class="lineno"> 2765</span>&#160;    <span class="comment">// select c, (select a, true, b), false -&gt; select c, a, false</span></div>
<div class="line"><a name="l02766"></a><span class="lineno"> 2766</span>&#160;    <span class="comment">//   if c implies that b is false.</span></div>
<div class="line"><a name="l02767"></a><span class="lineno"> 2767</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="namespacellvm_1_1PatternMatch.html#a25d956d9e0beadd47ce4bc255dfa811d">match</a>(CondVal, <a class="code" href="namespacellvm_1_1PatternMatch.html#addb87fe3f509b7803d3f5933ee24b560">m_Select</a>(<a class="code" href="namespacellvm_1_1PatternMatch.html#a24bca8838396aa81b87de8e7ac774b19">m_Value</a>(<a class="code" href="README__ALTIVEC_8txt.html#a015846b6188ce15e08cd94c74a9df1a3">A</a>), <a class="code" href="namespacellvm_1_1PatternMatch.html#aebdb2700a77d10ae6f0ce115e23d9f77">m_One</a>(), <a class="code" href="namespacellvm_1_1PatternMatch.html#a24bca8838396aa81b87de8e7ac774b19">m_Value</a>(<a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a>))) &amp;&amp;</div>
<div class="line"><a name="l02768"></a><span class="lineno"> 2768</span>&#160;        <a class="code" href="namespacellvm_1_1PatternMatch.html#a25d956d9e0beadd47ce4bc255dfa811d">match</a>(<a class="code" href="namespacellvm_1_1tgtok.html#abbc5259d649363016626e2529fabe0c5aeb5a2908109c763377832cbb4726b6d4">FalseVal</a>, <a class="code" href="namespacellvm_1_1PatternMatch.html#ae77be336e228cf9aa00709a8606dfb98">m_Zero</a>())) {</div>
<div class="line"><a name="l02769"></a><span class="lineno"> 2769</span>&#160;      <a class="code" href="classllvm_1_1Optional.html">Optional&lt;bool&gt;</a> Res = <a class="code" href="namespacellvm.html#af6a303805dba0dd581a5daf9fd96002b">isImpliedCondition</a>(<a class="code" href="namespacellvm_1_1tgtok.html#abbc5259d649363016626e2529fabe0c5a58b95af1ca96e109f85a0646a05fceb7">TrueVal</a>, <a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a>, <a class="code" href="AArch64SLSHardening_8cpp.html#ad467c4ab9119043f9b7750ab986be61a">DL</a>);</div>
<div class="line"><a name="l02770"></a><span class="lineno"> 2770</span>&#160;      <span class="keywordflow">if</span> (Res &amp;&amp; *Res == <span class="keyword">false</span>)</div>
<div class="line"><a name="l02771"></a><span class="lineno"> 2771</span>&#160;        <span class="keywordflow">return</span> replaceOperand(<a class="code" href="PassBuilderBindings_8cpp.html#a0f79dad1efc582555a443cc11a8fa401">SI</a>, 0, <a class="code" href="README__ALTIVEC_8txt.html#a015846b6188ce15e08cd94c74a9df1a3">A</a>);</div>
<div class="line"><a name="l02772"></a><span class="lineno"> 2772</span>&#160;    }</div>
<div class="line"><a name="l02773"></a><span class="lineno"> 2773</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="namespacellvm_1_1PatternMatch.html#a25d956d9e0beadd47ce4bc255dfa811d">match</a>(<a class="code" href="namespacellvm_1_1tgtok.html#abbc5259d649363016626e2529fabe0c5a58b95af1ca96e109f85a0646a05fceb7">TrueVal</a>, <a class="code" href="namespacellvm_1_1PatternMatch.html#addb87fe3f509b7803d3f5933ee24b560">m_Select</a>(<a class="code" href="namespacellvm_1_1PatternMatch.html#a24bca8838396aa81b87de8e7ac774b19">m_Value</a>(<a class="code" href="README__ALTIVEC_8txt.html#a015846b6188ce15e08cd94c74a9df1a3">A</a>), <a class="code" href="namespacellvm_1_1PatternMatch.html#aebdb2700a77d10ae6f0ce115e23d9f77">m_One</a>(), <a class="code" href="namespacellvm_1_1PatternMatch.html#a24bca8838396aa81b87de8e7ac774b19">m_Value</a>(<a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a>))) &amp;&amp;</div>
<div class="line"><a name="l02774"></a><span class="lineno"> 2774</span>&#160;        <a class="code" href="namespacellvm_1_1PatternMatch.html#a25d956d9e0beadd47ce4bc255dfa811d">match</a>(<a class="code" href="namespacellvm_1_1tgtok.html#abbc5259d649363016626e2529fabe0c5aeb5a2908109c763377832cbb4726b6d4">FalseVal</a>, <a class="code" href="namespacellvm_1_1PatternMatch.html#ae77be336e228cf9aa00709a8606dfb98">m_Zero</a>())) {</div>
<div class="line"><a name="l02775"></a><span class="lineno"> 2775</span>&#160;      <a class="code" href="classllvm_1_1Optional.html">Optional&lt;bool&gt;</a> Res = <a class="code" href="namespacellvm.html#af6a303805dba0dd581a5daf9fd96002b">isImpliedCondition</a>(CondVal, <a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a>, <a class="code" href="AArch64SLSHardening_8cpp.html#ad467c4ab9119043f9b7750ab986be61a">DL</a>);</div>
<div class="line"><a name="l02776"></a><span class="lineno"> 2776</span>&#160;      <span class="keywordflow">if</span> (Res &amp;&amp; *Res == <span class="keyword">false</span>)</div>
<div class="line"><a name="l02777"></a><span class="lineno"> 2777</span>&#160;        <span class="keywordflow">return</span> replaceOperand(<a class="code" href="PassBuilderBindings_8cpp.html#a0f79dad1efc582555a443cc11a8fa401">SI</a>, 1, <a class="code" href="README__ALTIVEC_8txt.html#a015846b6188ce15e08cd94c74a9df1a3">A</a>);</div>
<div class="line"><a name="l02778"></a><span class="lineno"> 2778</span>&#160;    }</div>
<div class="line"><a name="l02779"></a><span class="lineno"> 2779</span>&#160;    <span class="comment">// select c, true, (select a, b, false)  -&gt; select c, true, a</span></div>
<div class="line"><a name="l02780"></a><span class="lineno"> 2780</span>&#160;    <span class="comment">// select (select a, b, false), true, c  -&gt; select a, true, c</span></div>
<div class="line"><a name="l02781"></a><span class="lineno"> 2781</span>&#160;    <span class="comment">//   if c = false implies that b = true</span></div>
<div class="line"><a name="l02782"></a><span class="lineno"> 2782</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="namespacellvm_1_1PatternMatch.html#a25d956d9e0beadd47ce4bc255dfa811d">match</a>(<a class="code" href="namespacellvm_1_1tgtok.html#abbc5259d649363016626e2529fabe0c5a58b95af1ca96e109f85a0646a05fceb7">TrueVal</a>, <a class="code" href="namespacellvm_1_1PatternMatch.html#aebdb2700a77d10ae6f0ce115e23d9f77">m_One</a>()) &amp;&amp;</div>
<div class="line"><a name="l02783"></a><span class="lineno"> 2783</span>&#160;        <a class="code" href="namespacellvm_1_1PatternMatch.html#a25d956d9e0beadd47ce4bc255dfa811d">match</a>(<a class="code" href="namespacellvm_1_1tgtok.html#abbc5259d649363016626e2529fabe0c5aeb5a2908109c763377832cbb4726b6d4">FalseVal</a>, <a class="code" href="namespacellvm_1_1PatternMatch.html#addb87fe3f509b7803d3f5933ee24b560">m_Select</a>(<a class="code" href="namespacellvm_1_1PatternMatch.html#a24bca8838396aa81b87de8e7ac774b19">m_Value</a>(<a class="code" href="README__ALTIVEC_8txt.html#a015846b6188ce15e08cd94c74a9df1a3">A</a>), <a class="code" href="namespacellvm_1_1PatternMatch.html#a24bca8838396aa81b87de8e7ac774b19">m_Value</a>(<a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a>), <a class="code" href="namespacellvm_1_1PatternMatch.html#ae77be336e228cf9aa00709a8606dfb98">m_Zero</a>()))) {</div>
<div class="line"><a name="l02784"></a><span class="lineno"> 2784</span>&#160;      <a class="code" href="classllvm_1_1Optional.html">Optional&lt;bool&gt;</a> Res = <a class="code" href="namespacellvm.html#af6a303805dba0dd581a5daf9fd96002b">isImpliedCondition</a>(CondVal, <a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a>, <a class="code" href="AArch64SLSHardening_8cpp.html#ad467c4ab9119043f9b7750ab986be61a">DL</a>, <span class="keyword">false</span>);</div>
<div class="line"><a name="l02785"></a><span class="lineno"> 2785</span>&#160;      <span class="keywordflow">if</span> (Res &amp;&amp; *Res == <span class="keyword">true</span>)</div>
<div class="line"><a name="l02786"></a><span class="lineno"> 2786</span>&#160;        <span class="keywordflow">return</span> replaceOperand(<a class="code" href="PassBuilderBindings_8cpp.html#a0f79dad1efc582555a443cc11a8fa401">SI</a>, 2, <a class="code" href="README__ALTIVEC_8txt.html#a015846b6188ce15e08cd94c74a9df1a3">A</a>);</div>
<div class="line"><a name="l02787"></a><span class="lineno"> 2787</span>&#160;    }</div>
<div class="line"><a name="l02788"></a><span class="lineno"> 2788</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="namespacellvm_1_1PatternMatch.html#a25d956d9e0beadd47ce4bc255dfa811d">match</a>(CondVal, <a class="code" href="namespacellvm_1_1PatternMatch.html#addb87fe3f509b7803d3f5933ee24b560">m_Select</a>(<a class="code" href="namespacellvm_1_1PatternMatch.html#a24bca8838396aa81b87de8e7ac774b19">m_Value</a>(<a class="code" href="README__ALTIVEC_8txt.html#a015846b6188ce15e08cd94c74a9df1a3">A</a>), <a class="code" href="namespacellvm_1_1PatternMatch.html#a24bca8838396aa81b87de8e7ac774b19">m_Value</a>(<a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a>), <a class="code" href="namespacellvm_1_1PatternMatch.html#ae77be336e228cf9aa00709a8606dfb98">m_Zero</a>())) &amp;&amp;</div>
<div class="line"><a name="l02789"></a><span class="lineno"> 2789</span>&#160;        <a class="code" href="namespacellvm_1_1PatternMatch.html#a25d956d9e0beadd47ce4bc255dfa811d">match</a>(<a class="code" href="namespacellvm_1_1tgtok.html#abbc5259d649363016626e2529fabe0c5a58b95af1ca96e109f85a0646a05fceb7">TrueVal</a>, <a class="code" href="namespacellvm_1_1PatternMatch.html#aebdb2700a77d10ae6f0ce115e23d9f77">m_One</a>())) {</div>
<div class="line"><a name="l02790"></a><span class="lineno"> 2790</span>&#160;      <a class="code" href="classllvm_1_1Optional.html">Optional&lt;bool&gt;</a> Res = <a class="code" href="namespacellvm.html#af6a303805dba0dd581a5daf9fd96002b">isImpliedCondition</a>(<a class="code" href="namespacellvm_1_1tgtok.html#abbc5259d649363016626e2529fabe0c5aeb5a2908109c763377832cbb4726b6d4">FalseVal</a>, <a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a>, <a class="code" href="AArch64SLSHardening_8cpp.html#ad467c4ab9119043f9b7750ab986be61a">DL</a>, <span class="keyword">false</span>);</div>
<div class="line"><a name="l02791"></a><span class="lineno"> 2791</span>&#160;      <span class="keywordflow">if</span> (Res &amp;&amp; *Res == <span class="keyword">true</span>)</div>
<div class="line"><a name="l02792"></a><span class="lineno"> 2792</span>&#160;        <span class="keywordflow">return</span> replaceOperand(<a class="code" href="PassBuilderBindings_8cpp.html#a0f79dad1efc582555a443cc11a8fa401">SI</a>, 0, <a class="code" href="README__ALTIVEC_8txt.html#a015846b6188ce15e08cd94c74a9df1a3">A</a>);</div>
<div class="line"><a name="l02793"></a><span class="lineno"> 2793</span>&#160;    }</div>
<div class="line"><a name="l02794"></a><span class="lineno"> 2794</span>&#160; </div>
<div class="line"><a name="l02795"></a><span class="lineno"> 2795</span>&#160;    <span class="comment">// sel (sel c, a, false), true, (sel !c, b, false) -&gt; sel c, a, b</span></div>
<div class="line"><a name="l02796"></a><span class="lineno"> 2796</span>&#160;    <span class="comment">// sel (sel !c, a, false), true, (sel c, b, false) -&gt; sel c, b, a</span></div>
<div class="line"><a name="l02797"></a><span class="lineno"> 2797</span>&#160;    <a class="code" href="classllvm_1_1Value.html">Value</a> *<a class="code" href="lib_2Target_2README_8txt.html#a2a2df5a25b9c703e74e82b48a75d0c3d">C1</a>, *C2;</div>
<div class="line"><a name="l02798"></a><span class="lineno"> 2798</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="namespacellvm_1_1PatternMatch.html#a25d956d9e0beadd47ce4bc255dfa811d">match</a>(CondVal, <a class="code" href="namespacellvm_1_1PatternMatch.html#addb87fe3f509b7803d3f5933ee24b560">m_Select</a>(<a class="code" href="namespacellvm_1_1PatternMatch.html#a24bca8838396aa81b87de8e7ac774b19">m_Value</a>(<a class="code" href="lib_2Target_2README_8txt.html#a2a2df5a25b9c703e74e82b48a75d0c3d">C1</a>), <a class="code" href="namespacellvm_1_1PatternMatch.html#a24bca8838396aa81b87de8e7ac774b19">m_Value</a>(<a class="code" href="README__ALTIVEC_8txt.html#a015846b6188ce15e08cd94c74a9df1a3">A</a>), <a class="code" href="namespacellvm_1_1PatternMatch.html#ae77be336e228cf9aa00709a8606dfb98">m_Zero</a>())) &amp;&amp;</div>
<div class="line"><a name="l02799"></a><span class="lineno"> 2799</span>&#160;        <a class="code" href="namespacellvm_1_1PatternMatch.html#a25d956d9e0beadd47ce4bc255dfa811d">match</a>(<a class="code" href="namespacellvm_1_1tgtok.html#abbc5259d649363016626e2529fabe0c5a58b95af1ca96e109f85a0646a05fceb7">TrueVal</a>, <a class="code" href="namespacellvm_1_1PatternMatch.html#aebdb2700a77d10ae6f0ce115e23d9f77">m_One</a>()) &amp;&amp;</div>
<div class="line"><a name="l02800"></a><span class="lineno"> 2800</span>&#160;        <a class="code" href="namespacellvm_1_1PatternMatch.html#a25d956d9e0beadd47ce4bc255dfa811d">match</a>(<a class="code" href="namespacellvm_1_1tgtok.html#abbc5259d649363016626e2529fabe0c5aeb5a2908109c763377832cbb4726b6d4">FalseVal</a>, <a class="code" href="namespacellvm_1_1PatternMatch.html#addb87fe3f509b7803d3f5933ee24b560">m_Select</a>(<a class="code" href="namespacellvm_1_1PatternMatch.html#a24bca8838396aa81b87de8e7ac774b19">m_Value</a>(C2), <a class="code" href="namespacellvm_1_1PatternMatch.html#a24bca8838396aa81b87de8e7ac774b19">m_Value</a>(<a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a>), <a class="code" href="namespacellvm_1_1PatternMatch.html#ae77be336e228cf9aa00709a8606dfb98">m_Zero</a>()))) {</div>
<div class="line"><a name="l02801"></a><span class="lineno"> 2801</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="namespacellvm_1_1PatternMatch.html#a25d956d9e0beadd47ce4bc255dfa811d">match</a>(C2, <a class="code" href="namespacellvm_1_1PatternMatch.html#ad6994fd7098916ce21d65be005666f21">m_Not</a>(<a class="code" href="namespacellvm_1_1PatternMatch.html#a2d9861feadd3a09792967a012559e7b2">m_Specific</a>(<a class="code" href="lib_2Target_2README_8txt.html#a2a2df5a25b9c703e74e82b48a75d0c3d">C1</a>)))) <span class="comment">// first case</span></div>
<div class="line"><a name="l02802"></a><span class="lineno"> 2802</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="classllvm_1_1SelectInst.html#aa55fb74dd22008fdcc26a63f44576022">SelectInst::Create</a>(<a class="code" href="lib_2Target_2README_8txt.html#a2a2df5a25b9c703e74e82b48a75d0c3d">C1</a>, <a class="code" href="README__ALTIVEC_8txt.html#a015846b6188ce15e08cd94c74a9df1a3">A</a>, <a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a>);</div>
<div class="line"><a name="l02803"></a><span class="lineno"> 2803</span>&#160;      <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code" href="namespacellvm_1_1PatternMatch.html#a25d956d9e0beadd47ce4bc255dfa811d">match</a>(<a class="code" href="lib_2Target_2README_8txt.html#a2a2df5a25b9c703e74e82b48a75d0c3d">C1</a>, <a class="code" href="namespacellvm_1_1PatternMatch.html#ad6994fd7098916ce21d65be005666f21">m_Not</a>(<a class="code" href="namespacellvm_1_1PatternMatch.html#a2d9861feadd3a09792967a012559e7b2">m_Specific</a>(C2)))) <span class="comment">// second case</span></div>
<div class="line"><a name="l02804"></a><span class="lineno"> 2804</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="classllvm_1_1SelectInst.html#aa55fb74dd22008fdcc26a63f44576022">SelectInst::Create</a>(C2, <a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a>, <a class="code" href="README__ALTIVEC_8txt.html#a015846b6188ce15e08cd94c74a9df1a3">A</a>);</div>
<div class="line"><a name="l02805"></a><span class="lineno"> 2805</span>&#160;    }</div>
<div class="line"><a name="l02806"></a><span class="lineno"> 2806</span>&#160;  }</div>
<div class="line"><a name="l02807"></a><span class="lineno"> 2807</span>&#160; </div>
<div class="line"><a name="l02808"></a><span class="lineno"> 2808</span>&#160;  <span class="comment">// Selecting between two integer or vector splat integer constants?</span></div>
<div class="line"><a name="l02809"></a><span class="lineno"> 2809</span>&#160;  <span class="comment">//</span></div>
<div class="line"><a name="l02810"></a><span class="lineno"> 2810</span>&#160;  <span class="comment">// Note that we don&#39;t handle a scalar select of vectors:</span></div>
<div class="line"><a name="l02811"></a><span class="lineno"> 2811</span>&#160;  <span class="comment">// select i1 %c, &lt;2 x i8&gt; &lt;1, 1&gt;, &lt;2 x i8&gt; &lt;0, 0&gt;</span></div>
<div class="line"><a name="l02812"></a><span class="lineno"> 2812</span>&#160;  <span class="comment">// because that may need 3 instructions to splat the condition value:</span></div>
<div class="line"><a name="l02813"></a><span class="lineno"> 2813</span>&#160;  <span class="comment">// extend, insertelement, shufflevector.</span></div>
<div class="line"><a name="l02814"></a><span class="lineno"> 2814</span>&#160;  <span class="comment">//</span></div>
<div class="line"><a name="l02815"></a><span class="lineno"> 2815</span>&#160;  <span class="comment">// Do not handle i1 TrueVal and FalseVal otherwise would result in</span></div>
<div class="line"><a name="l02816"></a><span class="lineno"> 2816</span>&#160;  <span class="comment">// zext/sext i1 to i1.</span></div>
<div class="line"><a name="l02817"></a><span class="lineno"> 2817</span>&#160;  <span class="keywordflow">if</span> (SelType-&gt;<a class="code" href="classllvm_1_1Type.html#a34ee40bb2f4f5ece47ef19e5f1f57e3c">isIntOrIntVectorTy</a>() &amp;&amp; !SelType-&gt;<a class="code" href="classllvm_1_1Type.html#a34ee40bb2f4f5ece47ef19e5f1f57e3c">isIntOrIntVectorTy</a>(1) &amp;&amp;</div>
<div class="line"><a name="l02818"></a><span class="lineno"> 2818</span>&#160;      CondVal-&gt;<a class="code" href="classllvm_1_1Value.html#a6393a2d4fe7e10b28a0dcc35f881567b">getType</a>()-&gt;<a class="code" href="classllvm_1_1Type.html#a1bc022868b23918efa44df511f4d5b61">isVectorTy</a>() == SelType-&gt;<a class="code" href="classllvm_1_1Type.html#a1bc022868b23918efa44df511f4d5b61">isVectorTy</a>()) {</div>
<div class="line"><a name="l02819"></a><span class="lineno"> 2819</span>&#160;    <span class="comment">// select C, 1, 0 -&gt; zext C to int</span></div>
<div class="line"><a name="l02820"></a><span class="lineno"> 2820</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="namespacellvm_1_1PatternMatch.html#a25d956d9e0beadd47ce4bc255dfa811d">match</a>(<a class="code" href="namespacellvm_1_1tgtok.html#abbc5259d649363016626e2529fabe0c5a58b95af1ca96e109f85a0646a05fceb7">TrueVal</a>, <a class="code" href="namespacellvm_1_1PatternMatch.html#aebdb2700a77d10ae6f0ce115e23d9f77">m_One</a>()) &amp;&amp; <a class="code" href="namespacellvm_1_1PatternMatch.html#a25d956d9e0beadd47ce4bc255dfa811d">match</a>(<a class="code" href="namespacellvm_1_1tgtok.html#abbc5259d649363016626e2529fabe0c5aeb5a2908109c763377832cbb4726b6d4">FalseVal</a>, <a class="code" href="namespacellvm_1_1PatternMatch.html#ae77be336e228cf9aa00709a8606dfb98">m_Zero</a>()))</div>
<div class="line"><a name="l02821"></a><span class="lineno"> 2821</span>&#160;      <span class="keywordflow">return</span> <span class="keyword">new</span> <a class="code" href="classllvm_1_1ZExtInst.html">ZExtInst</a>(CondVal, SelType);</div>
<div class="line"><a name="l02822"></a><span class="lineno"> 2822</span>&#160; </div>
<div class="line"><a name="l02823"></a><span class="lineno"> 2823</span>&#160;    <span class="comment">// select C, -1, 0 -&gt; sext C to int</span></div>
<div class="line"><a name="l02824"></a><span class="lineno"> 2824</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="namespacellvm_1_1PatternMatch.html#a25d956d9e0beadd47ce4bc255dfa811d">match</a>(<a class="code" href="namespacellvm_1_1tgtok.html#abbc5259d649363016626e2529fabe0c5a58b95af1ca96e109f85a0646a05fceb7">TrueVal</a>, <a class="code" href="namespacellvm_1_1PatternMatch.html#aaea0d5ebb8b57ddde2095f80e2e94bb2">m_AllOnes</a>()) &amp;&amp; <a class="code" href="namespacellvm_1_1PatternMatch.html#a25d956d9e0beadd47ce4bc255dfa811d">match</a>(<a class="code" href="namespacellvm_1_1tgtok.html#abbc5259d649363016626e2529fabe0c5aeb5a2908109c763377832cbb4726b6d4">FalseVal</a>, <a class="code" href="namespacellvm_1_1PatternMatch.html#ae77be336e228cf9aa00709a8606dfb98">m_Zero</a>()))</div>
<div class="line"><a name="l02825"></a><span class="lineno"> 2825</span>&#160;      <span class="keywordflow">return</span> <span class="keyword">new</span> <a class="code" href="classllvm_1_1SExtInst.html">SExtInst</a>(CondVal, SelType);</div>
<div class="line"><a name="l02826"></a><span class="lineno"> 2826</span>&#160; </div>
<div class="line"><a name="l02827"></a><span class="lineno"> 2827</span>&#160;    <span class="comment">// select C, 0, 1 -&gt; zext !C to int</span></div>
<div class="line"><a name="l02828"></a><span class="lineno"> 2828</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="namespacellvm_1_1PatternMatch.html#a25d956d9e0beadd47ce4bc255dfa811d">match</a>(<a class="code" href="namespacellvm_1_1tgtok.html#abbc5259d649363016626e2529fabe0c5a58b95af1ca96e109f85a0646a05fceb7">TrueVal</a>, <a class="code" href="namespacellvm_1_1PatternMatch.html#ae77be336e228cf9aa00709a8606dfb98">m_Zero</a>()) &amp;&amp; <a class="code" href="namespacellvm_1_1PatternMatch.html#a25d956d9e0beadd47ce4bc255dfa811d">match</a>(<a class="code" href="namespacellvm_1_1tgtok.html#abbc5259d649363016626e2529fabe0c5aeb5a2908109c763377832cbb4726b6d4">FalseVal</a>, <a class="code" href="namespacellvm_1_1PatternMatch.html#aebdb2700a77d10ae6f0ce115e23d9f77">m_One</a>())) {</div>
<div class="line"><a name="l02829"></a><span class="lineno"> 2829</span>&#160;      <a class="code" href="classllvm_1_1Value.html">Value</a> *NotCond = <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.CreateNot(CondVal, <span class="stringliteral">&quot;not.&quot;</span> + CondVal-&gt;<a class="code" href="classllvm_1_1Value.html#adb5c319f5905c1d3ca9eb5df546388c5">getName</a>());</div>
<div class="line"><a name="l02830"></a><span class="lineno"> 2830</span>&#160;      <span class="keywordflow">return</span> <span class="keyword">new</span> <a class="code" href="classllvm_1_1ZExtInst.html">ZExtInst</a>(NotCond, SelType);</div>
<div class="line"><a name="l02831"></a><span class="lineno"> 2831</span>&#160;    }</div>
<div class="line"><a name="l02832"></a><span class="lineno"> 2832</span>&#160; </div>
<div class="line"><a name="l02833"></a><span class="lineno"> 2833</span>&#160;    <span class="comment">// select C, 0, -1 -&gt; sext !C to int</span></div>
<div class="line"><a name="l02834"></a><span class="lineno"> 2834</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="namespacellvm_1_1PatternMatch.html#a25d956d9e0beadd47ce4bc255dfa811d">match</a>(<a class="code" href="namespacellvm_1_1tgtok.html#abbc5259d649363016626e2529fabe0c5a58b95af1ca96e109f85a0646a05fceb7">TrueVal</a>, <a class="code" href="namespacellvm_1_1PatternMatch.html#ae77be336e228cf9aa00709a8606dfb98">m_Zero</a>()) &amp;&amp; <a class="code" href="namespacellvm_1_1PatternMatch.html#a25d956d9e0beadd47ce4bc255dfa811d">match</a>(<a class="code" href="namespacellvm_1_1tgtok.html#abbc5259d649363016626e2529fabe0c5aeb5a2908109c763377832cbb4726b6d4">FalseVal</a>, <a class="code" href="namespacellvm_1_1PatternMatch.html#aaea0d5ebb8b57ddde2095f80e2e94bb2">m_AllOnes</a>())) {</div>
<div class="line"><a name="l02835"></a><span class="lineno"> 2835</span>&#160;      <a class="code" href="classllvm_1_1Value.html">Value</a> *NotCond = <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.CreateNot(CondVal, <span class="stringliteral">&quot;not.&quot;</span> + CondVal-&gt;<a class="code" href="classllvm_1_1Value.html#adb5c319f5905c1d3ca9eb5df546388c5">getName</a>());</div>
<div class="line"><a name="l02836"></a><span class="lineno"> 2836</span>&#160;      <span class="keywordflow">return</span> <span class="keyword">new</span> <a class="code" href="classllvm_1_1SExtInst.html">SExtInst</a>(NotCond, SelType);</div>
<div class="line"><a name="l02837"></a><span class="lineno"> 2837</span>&#160;    }</div>
<div class="line"><a name="l02838"></a><span class="lineno"> 2838</span>&#160;  }</div>
<div class="line"><a name="l02839"></a><span class="lineno"> 2839</span>&#160; </div>
<div class="line"><a name="l02840"></a><span class="lineno"> 2840</span>&#160;  <span class="keywordflow">if</span> (<span class="keyword">auto</span> *FCmp = dyn_cast&lt;FCmpInst&gt;(CondVal)) {</div>
<div class="line"><a name="l02841"></a><span class="lineno"> 2841</span>&#160;    <a class="code" href="classllvm_1_1Value.html">Value</a> *Cmp0 = FCmp-&gt;<a class="code" href="classllvm_1_1User.html#abe1de1520a21f77ac57cc210bf0fb0b4">getOperand</a>(0), *Cmp1 = FCmp-&gt;getOperand(1);</div>
<div class="line"><a name="l02842"></a><span class="lineno"> 2842</span>&#160;    <span class="comment">// Are we selecting a value based on a comparison of the two values?</span></div>
<div class="line"><a name="l02843"></a><span class="lineno"> 2843</span>&#160;    <span class="keywordflow">if</span> ((Cmp0 == <a class="code" href="namespacellvm_1_1tgtok.html#abbc5259d649363016626e2529fabe0c5a58b95af1ca96e109f85a0646a05fceb7">TrueVal</a> &amp;&amp; Cmp1 == <a class="code" href="namespacellvm_1_1tgtok.html#abbc5259d649363016626e2529fabe0c5aeb5a2908109c763377832cbb4726b6d4">FalseVal</a>) ||</div>
<div class="line"><a name="l02844"></a><span class="lineno"> 2844</span>&#160;        (Cmp0 == <a class="code" href="namespacellvm_1_1tgtok.html#abbc5259d649363016626e2529fabe0c5aeb5a2908109c763377832cbb4726b6d4">FalseVal</a> &amp;&amp; Cmp1 == <a class="code" href="namespacellvm_1_1tgtok.html#abbc5259d649363016626e2529fabe0c5a58b95af1ca96e109f85a0646a05fceb7">TrueVal</a>)) {</div>
<div class="line"><a name="l02845"></a><span class="lineno"> 2845</span>&#160;      <span class="comment">// Canonicalize to use ordered comparisons by swapping the select</span></div>
<div class="line"><a name="l02846"></a><span class="lineno"> 2846</span>&#160;      <span class="comment">// operands.</span></div>
<div class="line"><a name="l02847"></a><span class="lineno"> 2847</span>&#160;      <span class="comment">//</span></div>
<div class="line"><a name="l02848"></a><span class="lineno"> 2848</span>&#160;      <span class="comment">// e.g.</span></div>
<div class="line"><a name="l02849"></a><span class="lineno"> 2849</span>&#160;      <span class="comment">// (X ugt Y) ? X : Y -&gt; (X ole Y) ? Y : X</span></div>
<div class="line"><a name="l02850"></a><span class="lineno"> 2850</span>&#160;      <span class="keywordflow">if</span> (FCmp-&gt;hasOneUse() &amp;&amp; <a class="code" href="classllvm_1_1CmpInst.html#aae55ea42185b7528c0c149625b998968">FCmpInst::isUnordered</a>(FCmp-&gt;getPredicate())) {</div>
<div class="line"><a name="l02851"></a><span class="lineno"> 2851</span>&#160;        <a class="code" href="classllvm_1_1CmpInst.html#a2be3583dac92a031fa1458d4d992c78b">FCmpInst::Predicate</a> InvPred = FCmp-&gt;getInversePredicate();</div>
<div class="line"><a name="l02852"></a><span class="lineno"> 2852</span>&#160;        <a class="code" href="classllvm_1_1IRBuilder.html">IRBuilder&lt;&gt;::FastMathFlagGuard</a> FMFG(<a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>);</div>
<div class="line"><a name="l02853"></a><span class="lineno"> 2853</span>&#160;        <span class="comment">// FIXME: The FMF should propagate from the select, not the fcmp.</span></div>
<div class="line"><a name="l02854"></a><span class="lineno"> 2854</span>&#160;        <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.setFastMathFlags(FCmp-&gt;getFastMathFlags());</div>
<div class="line"><a name="l02855"></a><span class="lineno"> 2855</span>&#160;        <a class="code" href="classllvm_1_1Value.html">Value</a> *NewCond = <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.CreateFCmp(InvPred, Cmp0, Cmp1,</div>
<div class="line"><a name="l02856"></a><span class="lineno"> 2856</span>&#160;                                            FCmp-&gt;getName() + <span class="stringliteral">&quot;.inv&quot;</span>);</div>
<div class="line"><a name="l02857"></a><span class="lineno"> 2857</span>&#160;        <a class="code" href="classllvm_1_1Value.html">Value</a> *NewSel = <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.CreateSelect(NewCond, <a class="code" href="namespacellvm_1_1tgtok.html#abbc5259d649363016626e2529fabe0c5aeb5a2908109c763377832cbb4726b6d4">FalseVal</a>, <a class="code" href="namespacellvm_1_1tgtok.html#abbc5259d649363016626e2529fabe0c5a58b95af1ca96e109f85a0646a05fceb7">TrueVal</a>);</div>
<div class="line"><a name="l02858"></a><span class="lineno"> 2858</span>&#160;        <span class="keywordflow">return</span> replaceInstUsesWith(<a class="code" href="PassBuilderBindings_8cpp.html#a0f79dad1efc582555a443cc11a8fa401">SI</a>, NewSel);</div>
<div class="line"><a name="l02859"></a><span class="lineno"> 2859</span>&#160;      }</div>
<div class="line"><a name="l02860"></a><span class="lineno"> 2860</span>&#160; </div>
<div class="line"><a name="l02861"></a><span class="lineno"> 2861</span>&#160;      <span class="comment">// NOTE: if we wanted to, this is where to detect MIN/MAX</span></div>
<div class="line"><a name="l02862"></a><span class="lineno"> 2862</span>&#160;    }</div>
<div class="line"><a name="l02863"></a><span class="lineno"> 2863</span>&#160;  }</div>
<div class="line"><a name="l02864"></a><span class="lineno"> 2864</span>&#160; </div>
<div class="line"><a name="l02865"></a><span class="lineno"> 2865</span>&#160;  <span class="comment">// Canonicalize select with fcmp to fabs(). -0.0 makes this tricky. We need</span></div>
<div class="line"><a name="l02866"></a><span class="lineno"> 2866</span>&#160;  <span class="comment">// fast-math-flags (nsz) or fsub with +0.0 (not fneg) for this to work. We</span></div>
<div class="line"><a name="l02867"></a><span class="lineno"> 2867</span>&#160;  <span class="comment">// also require nnan because we do not want to unintentionally change the</span></div>
<div class="line"><a name="l02868"></a><span class="lineno"> 2868</span>&#160;  <span class="comment">// sign of a NaN value.</span></div>
<div class="line"><a name="l02869"></a><span class="lineno"> 2869</span>&#160;  <span class="comment">// (X &lt;= +/-0.0) ? (0.0 - X) : X --&gt; fabs(X)</span></div>
<div class="line"><a name="l02870"></a><span class="lineno"> 2870</span>&#160;  <a class="code" href="classllvm_1_1Instruction.html">Instruction</a> *FSub;</div>
<div class="line"><a name="l02871"></a><span class="lineno"> 2871</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="namespacellvm_1_1PatternMatch.html#a25d956d9e0beadd47ce4bc255dfa811d">match</a>(CondVal, <a class="code" href="namespacellvm_1_1PatternMatch.html#a5772946ca265c6a5c951cb331983daa5">m_FCmp</a>(Pred, <a class="code" href="namespacellvm_1_1PatternMatch.html#a2d9861feadd3a09792967a012559e7b2">m_Specific</a>(<a class="code" href="namespacellvm_1_1tgtok.html#abbc5259d649363016626e2529fabe0c5aeb5a2908109c763377832cbb4726b6d4">FalseVal</a>), <a class="code" href="namespacellvm_1_1PatternMatch.html#ab9370b798ae530641518075b0832723a">m_AnyZeroFP</a>())) &amp;&amp;</div>
<div class="line"><a name="l02872"></a><span class="lineno"> 2872</span>&#160;      <a class="code" href="namespacellvm_1_1PatternMatch.html#a25d956d9e0beadd47ce4bc255dfa811d">match</a>(<a class="code" href="namespacellvm_1_1tgtok.html#abbc5259d649363016626e2529fabe0c5a58b95af1ca96e109f85a0646a05fceb7">TrueVal</a>, <a class="code" href="namespacellvm_1_1PatternMatch.html#aac83d9218356dfe82518cb81e3a53f2f">m_FSub</a>(<a class="code" href="namespacellvm_1_1PatternMatch.html#a7a371c4faf8e41f7cac98ad694f504dc">m_PosZeroFP</a>(), <a class="code" href="namespacellvm_1_1PatternMatch.html#a2d9861feadd3a09792967a012559e7b2">m_Specific</a>(<a class="code" href="namespacellvm_1_1tgtok.html#abbc5259d649363016626e2529fabe0c5aeb5a2908109c763377832cbb4726b6d4">FalseVal</a>))) &amp;&amp;</div>
<div class="line"><a name="l02873"></a><span class="lineno"> 2873</span>&#160;      <a class="code" href="namespacellvm_1_1PatternMatch.html#a25d956d9e0beadd47ce4bc255dfa811d">match</a>(<a class="code" href="namespacellvm_1_1tgtok.html#abbc5259d649363016626e2529fabe0c5a58b95af1ca96e109f85a0646a05fceb7">TrueVal</a>, <a class="code" href="namespacellvm_1_1PatternMatch.html#a04353aa48874f9bda89ff9059cd1a5a6">m_Instruction</a>(FSub)) &amp;&amp; FSub-&gt;<a class="code" href="classllvm_1_1Instruction.html#a9bfa7d72e5906c4ff9c7c04fcffcb354">hasNoNaNs</a>() &amp;&amp;</div>
<div class="line"><a name="l02874"></a><span class="lineno"> 2874</span>&#160;      (Pred == <a class="code" href="classllvm_1_1CmpInst.html#a2be3583dac92a031fa1458d4d992c78ba9835cfe02fb5027680bd7203b024f77a">FCmpInst::FCMP_OLE</a> || Pred == <a class="code" href="classllvm_1_1CmpInst.html#a2be3583dac92a031fa1458d4d992c78ba396dda2571cd3c575f1d9cb44dc2cc09">FCmpInst::FCMP_ULE</a>)) {</div>
<div class="line"><a name="l02875"></a><span class="lineno"> 2875</span>&#160;    <a class="code" href="classllvm_1_1Value.html">Value</a> *Fabs = <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.CreateUnaryIntrinsic(Intrinsic::fabs, <a class="code" href="namespacellvm_1_1tgtok.html#abbc5259d649363016626e2529fabe0c5aeb5a2908109c763377832cbb4726b6d4">FalseVal</a>, &amp;<a class="code" href="PassBuilderBindings_8cpp.html#a0f79dad1efc582555a443cc11a8fa401">SI</a>);</div>
<div class="line"><a name="l02876"></a><span class="lineno"> 2876</span>&#160;    <span class="keywordflow">return</span> replaceInstUsesWith(<a class="code" href="PassBuilderBindings_8cpp.html#a0f79dad1efc582555a443cc11a8fa401">SI</a>, Fabs);</div>
<div class="line"><a name="l02877"></a><span class="lineno"> 2877</span>&#160;  }</div>
<div class="line"><a name="l02878"></a><span class="lineno"> 2878</span>&#160;  <span class="comment">// (X &gt;  +/-0.0) ? X : (0.0 - X) --&gt; fabs(X)</span></div>
<div class="line"><a name="l02879"></a><span class="lineno"> 2879</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="namespacellvm_1_1PatternMatch.html#a25d956d9e0beadd47ce4bc255dfa811d">match</a>(CondVal, <a class="code" href="namespacellvm_1_1PatternMatch.html#a5772946ca265c6a5c951cb331983daa5">m_FCmp</a>(Pred, <a class="code" href="namespacellvm_1_1PatternMatch.html#a2d9861feadd3a09792967a012559e7b2">m_Specific</a>(<a class="code" href="namespacellvm_1_1tgtok.html#abbc5259d649363016626e2529fabe0c5a58b95af1ca96e109f85a0646a05fceb7">TrueVal</a>), <a class="code" href="namespacellvm_1_1PatternMatch.html#ab9370b798ae530641518075b0832723a">m_AnyZeroFP</a>())) &amp;&amp;</div>
<div class="line"><a name="l02880"></a><span class="lineno"> 2880</span>&#160;      <a class="code" href="namespacellvm_1_1PatternMatch.html#a25d956d9e0beadd47ce4bc255dfa811d">match</a>(<a class="code" href="namespacellvm_1_1tgtok.html#abbc5259d649363016626e2529fabe0c5aeb5a2908109c763377832cbb4726b6d4">FalseVal</a>, <a class="code" href="namespacellvm_1_1PatternMatch.html#aac83d9218356dfe82518cb81e3a53f2f">m_FSub</a>(<a class="code" href="namespacellvm_1_1PatternMatch.html#a7a371c4faf8e41f7cac98ad694f504dc">m_PosZeroFP</a>(), <a class="code" href="namespacellvm_1_1PatternMatch.html#a2d9861feadd3a09792967a012559e7b2">m_Specific</a>(<a class="code" href="namespacellvm_1_1tgtok.html#abbc5259d649363016626e2529fabe0c5a58b95af1ca96e109f85a0646a05fceb7">TrueVal</a>))) &amp;&amp;</div>
<div class="line"><a name="l02881"></a><span class="lineno"> 2881</span>&#160;      <a class="code" href="namespacellvm_1_1PatternMatch.html#a25d956d9e0beadd47ce4bc255dfa811d">match</a>(<a class="code" href="namespacellvm_1_1tgtok.html#abbc5259d649363016626e2529fabe0c5aeb5a2908109c763377832cbb4726b6d4">FalseVal</a>, <a class="code" href="namespacellvm_1_1PatternMatch.html#a04353aa48874f9bda89ff9059cd1a5a6">m_Instruction</a>(FSub)) &amp;&amp; FSub-&gt;<a class="code" href="classllvm_1_1Instruction.html#a9bfa7d72e5906c4ff9c7c04fcffcb354">hasNoNaNs</a>() &amp;&amp;</div>
<div class="line"><a name="l02882"></a><span class="lineno"> 2882</span>&#160;      (Pred == <a class="code" href="classllvm_1_1CmpInst.html#a2be3583dac92a031fa1458d4d992c78ba4c399f525bbcf03d72af4b303e6eeca8">FCmpInst::FCMP_OGT</a> || Pred == <a class="code" href="classllvm_1_1CmpInst.html#a2be3583dac92a031fa1458d4d992c78ba959268ceeae23abe5c9ad9e895669d0c">FCmpInst::FCMP_UGT</a>)) {</div>
<div class="line"><a name="l02883"></a><span class="lineno"> 2883</span>&#160;    <a class="code" href="classllvm_1_1Value.html">Value</a> *Fabs = <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.CreateUnaryIntrinsic(Intrinsic::fabs, <a class="code" href="namespacellvm_1_1tgtok.html#abbc5259d649363016626e2529fabe0c5a58b95af1ca96e109f85a0646a05fceb7">TrueVal</a>, &amp;<a class="code" href="PassBuilderBindings_8cpp.html#a0f79dad1efc582555a443cc11a8fa401">SI</a>);</div>
<div class="line"><a name="l02884"></a><span class="lineno"> 2884</span>&#160;    <span class="keywordflow">return</span> replaceInstUsesWith(<a class="code" href="PassBuilderBindings_8cpp.html#a0f79dad1efc582555a443cc11a8fa401">SI</a>, Fabs);</div>
<div class="line"><a name="l02885"></a><span class="lineno"> 2885</span>&#160;  }</div>
<div class="line"><a name="l02886"></a><span class="lineno"> 2886</span>&#160;  <span class="comment">// With nnan and nsz:</span></div>
<div class="line"><a name="l02887"></a><span class="lineno"> 2887</span>&#160;  <span class="comment">// (X &lt;  +/-0.0) ? -X : X --&gt; fabs(X)</span></div>
<div class="line"><a name="l02888"></a><span class="lineno"> 2888</span>&#160;  <span class="comment">// (X &lt;= +/-0.0) ? -X : X --&gt; fabs(X)</span></div>
<div class="line"><a name="l02889"></a><span class="lineno"> 2889</span>&#160;  <a class="code" href="classllvm_1_1Instruction.html">Instruction</a> *FNeg;</div>
<div class="line"><a name="l02890"></a><span class="lineno"> 2890</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="namespacellvm_1_1PatternMatch.html#a25d956d9e0beadd47ce4bc255dfa811d">match</a>(CondVal, <a class="code" href="namespacellvm_1_1PatternMatch.html#a5772946ca265c6a5c951cb331983daa5">m_FCmp</a>(Pred, <a class="code" href="namespacellvm_1_1PatternMatch.html#a2d9861feadd3a09792967a012559e7b2">m_Specific</a>(<a class="code" href="namespacellvm_1_1tgtok.html#abbc5259d649363016626e2529fabe0c5aeb5a2908109c763377832cbb4726b6d4">FalseVal</a>), <a class="code" href="namespacellvm_1_1PatternMatch.html#ab9370b798ae530641518075b0832723a">m_AnyZeroFP</a>())) &amp;&amp;</div>
<div class="line"><a name="l02891"></a><span class="lineno"> 2891</span>&#160;      <a class="code" href="namespacellvm_1_1PatternMatch.html#a25d956d9e0beadd47ce4bc255dfa811d">match</a>(<a class="code" href="namespacellvm_1_1tgtok.html#abbc5259d649363016626e2529fabe0c5a58b95af1ca96e109f85a0646a05fceb7">TrueVal</a>, <a class="code" href="namespacellvm_1_1PatternMatch.html#af431ec215bba8bb9c56e7541d99920f2">m_FNeg</a>(<a class="code" href="namespacellvm_1_1PatternMatch.html#a2d9861feadd3a09792967a012559e7b2">m_Specific</a>(<a class="code" href="namespacellvm_1_1tgtok.html#abbc5259d649363016626e2529fabe0c5aeb5a2908109c763377832cbb4726b6d4">FalseVal</a>))) &amp;&amp;</div>
<div class="line"><a name="l02892"></a><span class="lineno"> 2892</span>&#160;      <a class="code" href="namespacellvm_1_1PatternMatch.html#a25d956d9e0beadd47ce4bc255dfa811d">match</a>(<a class="code" href="namespacellvm_1_1tgtok.html#abbc5259d649363016626e2529fabe0c5a58b95af1ca96e109f85a0646a05fceb7">TrueVal</a>, <a class="code" href="namespacellvm_1_1PatternMatch.html#a04353aa48874f9bda89ff9059cd1a5a6">m_Instruction</a>(FNeg)) &amp;&amp; FNeg-&gt;<a class="code" href="classllvm_1_1Instruction.html#a9bfa7d72e5906c4ff9c7c04fcffcb354">hasNoNaNs</a>() &amp;&amp;</div>
<div class="line"><a name="l02893"></a><span class="lineno"> 2893</span>&#160;      FNeg-&gt;<a class="code" href="classllvm_1_1Instruction.html#a3e06c3da2e05f581e6beee145fb2cd65">hasNoSignedZeros</a>() &amp;&amp; <a class="code" href="PassBuilderBindings_8cpp.html#a0f79dad1efc582555a443cc11a8fa401">SI</a>.hasNoSignedZeros() &amp;&amp;</div>
<div class="line"><a name="l02894"></a><span class="lineno"> 2894</span>&#160;      (Pred == <a class="code" href="classllvm_1_1CmpInst.html#a2be3583dac92a031fa1458d4d992c78ba326bee0a4a424cef21c1cf8adb8b8dd8">FCmpInst::FCMP_OLT</a> || Pred == <a class="code" href="classllvm_1_1CmpInst.html#a2be3583dac92a031fa1458d4d992c78ba9835cfe02fb5027680bd7203b024f77a">FCmpInst::FCMP_OLE</a> ||</div>
<div class="line"><a name="l02895"></a><span class="lineno"> 2895</span>&#160;       Pred == <a class="code" href="classllvm_1_1CmpInst.html#a2be3583dac92a031fa1458d4d992c78ba75016d5872d90adf89cc1cbf5763f474">FCmpInst::FCMP_ULT</a> || Pred == <a class="code" href="classllvm_1_1CmpInst.html#a2be3583dac92a031fa1458d4d992c78ba396dda2571cd3c575f1d9cb44dc2cc09">FCmpInst::FCMP_ULE</a>)) {</div>
<div class="line"><a name="l02896"></a><span class="lineno"> 2896</span>&#160;    <a class="code" href="classllvm_1_1Value.html">Value</a> *Fabs = <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.CreateUnaryIntrinsic(Intrinsic::fabs, <a class="code" href="namespacellvm_1_1tgtok.html#abbc5259d649363016626e2529fabe0c5aeb5a2908109c763377832cbb4726b6d4">FalseVal</a>, &amp;<a class="code" href="PassBuilderBindings_8cpp.html#a0f79dad1efc582555a443cc11a8fa401">SI</a>);</div>
<div class="line"><a name="l02897"></a><span class="lineno"> 2897</span>&#160;    <span class="keywordflow">return</span> replaceInstUsesWith(<a class="code" href="PassBuilderBindings_8cpp.html#a0f79dad1efc582555a443cc11a8fa401">SI</a>, Fabs);</div>
<div class="line"><a name="l02898"></a><span class="lineno"> 2898</span>&#160;  }</div>
<div class="line"><a name="l02899"></a><span class="lineno"> 2899</span>&#160;  <span class="comment">// With nnan and nsz:</span></div>
<div class="line"><a name="l02900"></a><span class="lineno"> 2900</span>&#160;  <span class="comment">// (X &gt;  +/-0.0) ? X : -X --&gt; fabs(X)</span></div>
<div class="line"><a name="l02901"></a><span class="lineno"> 2901</span>&#160;  <span class="comment">// (X &gt;= +/-0.0) ? X : -X --&gt; fabs(X)</span></div>
<div class="line"><a name="l02902"></a><span class="lineno"> 2902</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="namespacellvm_1_1PatternMatch.html#a25d956d9e0beadd47ce4bc255dfa811d">match</a>(CondVal, <a class="code" href="namespacellvm_1_1PatternMatch.html#a5772946ca265c6a5c951cb331983daa5">m_FCmp</a>(Pred, <a class="code" href="namespacellvm_1_1PatternMatch.html#a2d9861feadd3a09792967a012559e7b2">m_Specific</a>(<a class="code" href="namespacellvm_1_1tgtok.html#abbc5259d649363016626e2529fabe0c5a58b95af1ca96e109f85a0646a05fceb7">TrueVal</a>), <a class="code" href="namespacellvm_1_1PatternMatch.html#ab9370b798ae530641518075b0832723a">m_AnyZeroFP</a>())) &amp;&amp;</div>
<div class="line"><a name="l02903"></a><span class="lineno"> 2903</span>&#160;      <a class="code" href="namespacellvm_1_1PatternMatch.html#a25d956d9e0beadd47ce4bc255dfa811d">match</a>(<a class="code" href="namespacellvm_1_1tgtok.html#abbc5259d649363016626e2529fabe0c5aeb5a2908109c763377832cbb4726b6d4">FalseVal</a>, <a class="code" href="namespacellvm_1_1PatternMatch.html#af431ec215bba8bb9c56e7541d99920f2">m_FNeg</a>(<a class="code" href="namespacellvm_1_1PatternMatch.html#a2d9861feadd3a09792967a012559e7b2">m_Specific</a>(<a class="code" href="namespacellvm_1_1tgtok.html#abbc5259d649363016626e2529fabe0c5a58b95af1ca96e109f85a0646a05fceb7">TrueVal</a>))) &amp;&amp;</div>
<div class="line"><a name="l02904"></a><span class="lineno"> 2904</span>&#160;      <a class="code" href="namespacellvm_1_1PatternMatch.html#a25d956d9e0beadd47ce4bc255dfa811d">match</a>(<a class="code" href="namespacellvm_1_1tgtok.html#abbc5259d649363016626e2529fabe0c5aeb5a2908109c763377832cbb4726b6d4">FalseVal</a>, <a class="code" href="namespacellvm_1_1PatternMatch.html#a04353aa48874f9bda89ff9059cd1a5a6">m_Instruction</a>(FNeg)) &amp;&amp; FNeg-&gt;<a class="code" href="classllvm_1_1Instruction.html#a9bfa7d72e5906c4ff9c7c04fcffcb354">hasNoNaNs</a>() &amp;&amp;</div>
<div class="line"><a name="l02905"></a><span class="lineno"> 2905</span>&#160;      FNeg-&gt;<a class="code" href="classllvm_1_1Instruction.html#a3e06c3da2e05f581e6beee145fb2cd65">hasNoSignedZeros</a>() &amp;&amp; <a class="code" href="PassBuilderBindings_8cpp.html#a0f79dad1efc582555a443cc11a8fa401">SI</a>.hasNoSignedZeros() &amp;&amp;</div>
<div class="line"><a name="l02906"></a><span class="lineno"> 2906</span>&#160;      (Pred == <a class="code" href="classllvm_1_1CmpInst.html#a2be3583dac92a031fa1458d4d992c78ba4c399f525bbcf03d72af4b303e6eeca8">FCmpInst::FCMP_OGT</a> || Pred == <a class="code" href="classllvm_1_1CmpInst.html#a2be3583dac92a031fa1458d4d992c78ba541533f34077bbbcfb703a90f6d2da9b">FCmpInst::FCMP_OGE</a> ||</div>
<div class="line"><a name="l02907"></a><span class="lineno"> 2907</span>&#160;       Pred == <a class="code" href="classllvm_1_1CmpInst.html#a2be3583dac92a031fa1458d4d992c78ba959268ceeae23abe5c9ad9e895669d0c">FCmpInst::FCMP_UGT</a> || Pred == <a class="code" href="classllvm_1_1CmpInst.html#a2be3583dac92a031fa1458d4d992c78bae51609fc6a425f849d37c28cb9bc0344">FCmpInst::FCMP_UGE</a>)) {</div>
<div class="line"><a name="l02908"></a><span class="lineno"> 2908</span>&#160;    <a class="code" href="classllvm_1_1Value.html">Value</a> *Fabs = <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.CreateUnaryIntrinsic(Intrinsic::fabs, <a class="code" href="namespacellvm_1_1tgtok.html#abbc5259d649363016626e2529fabe0c5a58b95af1ca96e109f85a0646a05fceb7">TrueVal</a>, &amp;<a class="code" href="PassBuilderBindings_8cpp.html#a0f79dad1efc582555a443cc11a8fa401">SI</a>);</div>
<div class="line"><a name="l02909"></a><span class="lineno"> 2909</span>&#160;    <span class="keywordflow">return</span> replaceInstUsesWith(<a class="code" href="PassBuilderBindings_8cpp.html#a0f79dad1efc582555a443cc11a8fa401">SI</a>, Fabs);</div>
<div class="line"><a name="l02910"></a><span class="lineno"> 2910</span>&#160;  }</div>
<div class="line"><a name="l02911"></a><span class="lineno"> 2911</span>&#160; </div>
<div class="line"><a name="l02912"></a><span class="lineno"> 2912</span>&#160;  <span class="comment">// See if we are selecting two values based on a comparison of the two values.</span></div>
<div class="line"><a name="l02913"></a><span class="lineno"> 2913</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1ICmpInst.html">ICmpInst</a> *ICI = dyn_cast&lt;ICmpInst&gt;(CondVal))</div>
<div class="line"><a name="l02914"></a><span class="lineno"> 2914</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1Instruction.html">Instruction</a> *Result = foldSelectInstWithICmp(<a class="code" href="PassBuilderBindings_8cpp.html#a0f79dad1efc582555a443cc11a8fa401">SI</a>, ICI))</div>
<div class="line"><a name="l02915"></a><span class="lineno"> 2915</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="namespacellvm_1_1ms__demangle.html#afb795990ffc0cb7321e7d1eacc246324a3e679cff5b3a6f6f8f32aead541a0a12">Result</a>;</div>
<div class="line"><a name="l02916"></a><span class="lineno"> 2916</span>&#160; </div>
<div class="line"><a name="l02917"></a><span class="lineno"> 2917</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1Instruction.html">Instruction</a> *<a class="code" href="namespacellvm_1_1MCID.html#ab357441fcd1ea1f9b0d27c12700f6023a2b016c207343046b2bac45e69e76dcec">Add</a> = foldAddSubSelect(<a class="code" href="PassBuilderBindings_8cpp.html#a0f79dad1efc582555a443cc11a8fa401">SI</a>, <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>))</div>
<div class="line"><a name="l02918"></a><span class="lineno"> 2918</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="namespacellvm_1_1MCID.html#ab357441fcd1ea1f9b0d27c12700f6023a2b016c207343046b2bac45e69e76dcec">Add</a>;</div>
<div class="line"><a name="l02919"></a><span class="lineno"> 2919</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1Instruction.html">Instruction</a> *<a class="code" href="namespacellvm_1_1MCID.html#ab357441fcd1ea1f9b0d27c12700f6023a2b016c207343046b2bac45e69e76dcec">Add</a> = foldOverflowingAddSubSelect(<a class="code" href="PassBuilderBindings_8cpp.html#a0f79dad1efc582555a443cc11a8fa401">SI</a>, <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>))</div>
<div class="line"><a name="l02920"></a><span class="lineno"> 2920</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="namespacellvm_1_1MCID.html#ab357441fcd1ea1f9b0d27c12700f6023a2b016c207343046b2bac45e69e76dcec">Add</a>;</div>
<div class="line"><a name="l02921"></a><span class="lineno"> 2921</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1Instruction.html">Instruction</a> *Or = <a class="code" href="InstCombineSelect_8cpp.html#acb4bb6f77172696150754bd732d07e30">foldSetClearBits</a>(<a class="code" href="PassBuilderBindings_8cpp.html#a0f79dad1efc582555a443cc11a8fa401">SI</a>, <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>))</div>
<div class="line"><a name="l02922"></a><span class="lineno"> 2922</span>&#160;    <span class="keywordflow">return</span> Or;</div>
<div class="line"><a name="l02923"></a><span class="lineno"> 2923</span>&#160; </div>
<div class="line"><a name="l02924"></a><span class="lineno"> 2924</span>&#160;  <span class="comment">// Turn (select C, (op X, Y), (op X, Z)) -&gt; (op X, (select C, Y, Z))</span></div>
<div class="line"><a name="l02925"></a><span class="lineno"> 2925</span>&#160;  <span class="keyword">auto</span> *TI = dyn_cast&lt;Instruction&gt;(<a class="code" href="namespacellvm_1_1tgtok.html#abbc5259d649363016626e2529fabe0c5a58b95af1ca96e109f85a0646a05fceb7">TrueVal</a>);</div>
<div class="line"><a name="l02926"></a><span class="lineno"> 2926</span>&#160;  <span class="keyword">auto</span> *FI = dyn_cast&lt;Instruction&gt;(<a class="code" href="namespacellvm_1_1tgtok.html#abbc5259d649363016626e2529fabe0c5aeb5a2908109c763377832cbb4726b6d4">FalseVal</a>);</div>
<div class="line"><a name="l02927"></a><span class="lineno"> 2927</span>&#160;  <span class="keywordflow">if</span> (TI &amp;&amp; FI &amp;&amp; TI-&gt;getOpcode() == FI-&gt;<a class="code" href="classllvm_1_1Instruction.html#ab4e05d690df389b8b1477c90387b575f">getOpcode</a>())</div>
<div class="line"><a name="l02928"></a><span class="lineno"> 2928</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1Instruction.html">Instruction</a> *IV = foldSelectOpOp(<a class="code" href="PassBuilderBindings_8cpp.html#a0f79dad1efc582555a443cc11a8fa401">SI</a>, TI, FI))</div>
<div class="line"><a name="l02929"></a><span class="lineno"> 2929</span>&#160;      <span class="keywordflow">return</span> IV;</div>
<div class="line"><a name="l02930"></a><span class="lineno"> 2930</span>&#160; </div>
<div class="line"><a name="l02931"></a><span class="lineno"> 2931</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1Instruction.html">Instruction</a> *<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a> = foldSelectExtConst(<a class="code" href="PassBuilderBindings_8cpp.html#a0f79dad1efc582555a443cc11a8fa401">SI</a>))</div>
<div class="line"><a name="l02932"></a><span class="lineno"> 2932</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>;</div>
<div class="line"><a name="l02933"></a><span class="lineno"> 2933</span>&#160; </div>
<div class="line"><a name="l02934"></a><span class="lineno"> 2934</span>&#160;  <span class="comment">// Fold (select C, (gep Ptr, Idx), Ptr) -&gt; (gep Ptr, (select C, Idx, 0))</span></div>
<div class="line"><a name="l02935"></a><span class="lineno"> 2935</span>&#160;  <span class="comment">// Fold (select C, Ptr, (gep Ptr, Idx)) -&gt; (gep Ptr, (select C, 0, Idx))</span></div>
<div class="line"><a name="l02936"></a><span class="lineno"> 2936</span>&#160;  <span class="keyword">auto</span> SelectGepWithBase = [&amp;](<a class="code" href="classllvm_1_1GetElementPtrInst.html">GetElementPtrInst</a> *Gep, <a class="code" href="classllvm_1_1Value.html">Value</a> *<a class="code" href="namespacellvm_1_1sampleprof.html#a702f69807459cc25db5754a5f179d3fcaf6fbeb8fa9f451468611536b00878d41">Base</a>,</div>
<div class="line"><a name="l02937"></a><span class="lineno"> 2937</span>&#160;                               <span class="keywordtype">bool</span> Swap) -&gt; <a class="code" href="classllvm_1_1GetElementPtrInst.html">GetElementPtrInst</a> * {</div>
<div class="line"><a name="l02938"></a><span class="lineno"> 2938</span>&#160;    <a class="code" href="classllvm_1_1Value.html">Value</a> *Ptr = Gep-&gt;<a class="code" href="classllvm_1_1GetElementPtrInst.html#ad200825f26189cd43f3b80728649c4a9">getPointerOperand</a>();</div>
<div class="line"><a name="l02939"></a><span class="lineno"> 2939</span>&#160;    <span class="keywordflow">if</span> (Gep-&gt;<a class="code" href="classllvm_1_1User.html#addec638786f763d967811b45cb662f1f">getNumOperands</a>() != 2 || Gep-&gt;<a class="code" href="classllvm_1_1GetElementPtrInst.html#ad200825f26189cd43f3b80728649c4a9">getPointerOperand</a>() != <a class="code" href="namespacellvm_1_1sampleprof.html#a702f69807459cc25db5754a5f179d3fcaf6fbeb8fa9f451468611536b00878d41">Base</a> ||</div>
<div class="line"><a name="l02940"></a><span class="lineno"> 2940</span>&#160;        !Gep-&gt;<a class="code" href="classllvm_1_1Value.html#a3a402430a1bbe70a9282dcb0e0b6a2cd">hasOneUse</a>())</div>
<div class="line"><a name="l02941"></a><span class="lineno"> 2941</span>&#160;      <span class="keywordflow">return</span> <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l02942"></a><span class="lineno"> 2942</span>&#160;    <a class="code" href="classllvm_1_1Type.html">Type</a> *ElementType = Gep-&gt;<a class="code" href="classllvm_1_1GetElementPtrInst.html#a45d67d61fc2ab6079b6271f7b67edc7c">getResultElementType</a>();</div>
<div class="line"><a name="l02943"></a><span class="lineno"> 2943</span>&#160;    <a class="code" href="classllvm_1_1Value.html">Value</a> *Idx = Gep-&gt;<a class="code" href="classllvm_1_1User.html#abe1de1520a21f77ac57cc210bf0fb0b4">getOperand</a>(1);</div>
<div class="line"><a name="l02944"></a><span class="lineno"> 2944</span>&#160;    <a class="code" href="classllvm_1_1Value.html">Value</a> *NewT = Idx;</div>
<div class="line"><a name="l02945"></a><span class="lineno"> 2945</span>&#160;    <a class="code" href="classllvm_1_1Value.html">Value</a> *NewF = <a class="code" href="classllvm_1_1Constant.html#aa6574d526b3e38a28f688a7bb4325c2c">Constant::getNullValue</a>(Idx-&gt;<a class="code" href="classllvm_1_1Value.html#a6393a2d4fe7e10b28a0dcc35f881567b">getType</a>());</div>
<div class="line"><a name="l02946"></a><span class="lineno"> 2946</span>&#160;    <span class="keywordflow">if</span> (Swap)</div>
<div class="line"><a name="l02947"></a><span class="lineno"> 2947</span>&#160;      <a class="code" href="namespacestd.html#ab8424022895aee3e366fb9a32f2883cb">std::swap</a>(NewT, NewF);</div>
<div class="line"><a name="l02948"></a><span class="lineno"> 2948</span>&#160;    <a class="code" href="classllvm_1_1Value.html">Value</a> *NewSI =</div>
<div class="line"><a name="l02949"></a><span class="lineno"> 2949</span>&#160;        <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.CreateSelect(CondVal, NewT, NewF, <a class="code" href="PassBuilderBindings_8cpp.html#a0f79dad1efc582555a443cc11a8fa401">SI</a>.getName() + <span class="stringliteral">&quot;.idx&quot;</span>, &amp;<a class="code" href="PassBuilderBindings_8cpp.html#a0f79dad1efc582555a443cc11a8fa401">SI</a>);</div>
<div class="line"><a name="l02950"></a><span class="lineno"> 2950</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="classllvm_1_1GetElementPtrInst.html#a74c47d18ecd4ca3399785e6ae07134dc">GetElementPtrInst::Create</a>(ElementType, Ptr, {NewSI});</div>
<div class="line"><a name="l02951"></a><span class="lineno"> 2951</span>&#160;  };</div>
<div class="line"><a name="l02952"></a><span class="lineno"> 2952</span>&#160;  <span class="keywordflow">if</span> (<span class="keyword">auto</span> *TrueGep = dyn_cast&lt;GetElementPtrInst&gt;(<a class="code" href="namespacellvm_1_1tgtok.html#abbc5259d649363016626e2529fabe0c5a58b95af1ca96e109f85a0646a05fceb7">TrueVal</a>))</div>
<div class="line"><a name="l02953"></a><span class="lineno"> 2953</span>&#160;    <span class="keywordflow">if</span> (<span class="keyword">auto</span> *NewGep = SelectGepWithBase(TrueGep, <a class="code" href="namespacellvm_1_1tgtok.html#abbc5259d649363016626e2529fabe0c5aeb5a2908109c763377832cbb4726b6d4">FalseVal</a>, <span class="keyword">false</span>))</div>
<div class="line"><a name="l02954"></a><span class="lineno"> 2954</span>&#160;      <span class="keywordflow">return</span> NewGep;</div>
<div class="line"><a name="l02955"></a><span class="lineno"> 2955</span>&#160;  <span class="keywordflow">if</span> (<span class="keyword">auto</span> *FalseGep = dyn_cast&lt;GetElementPtrInst&gt;(<a class="code" href="namespacellvm_1_1tgtok.html#abbc5259d649363016626e2529fabe0c5aeb5a2908109c763377832cbb4726b6d4">FalseVal</a>))</div>
<div class="line"><a name="l02956"></a><span class="lineno"> 2956</span>&#160;    <span class="keywordflow">if</span> (<span class="keyword">auto</span> *NewGep = SelectGepWithBase(FalseGep, <a class="code" href="namespacellvm_1_1tgtok.html#abbc5259d649363016626e2529fabe0c5a58b95af1ca96e109f85a0646a05fceb7">TrueVal</a>, <span class="keyword">true</span>))</div>
<div class="line"><a name="l02957"></a><span class="lineno"> 2957</span>&#160;      <span class="keywordflow">return</span> NewGep;</div>
<div class="line"><a name="l02958"></a><span class="lineno"> 2958</span>&#160; </div>
<div class="line"><a name="l02959"></a><span class="lineno"> 2959</span>&#160;  <span class="comment">// See if we can fold the select into one of our operands.</span></div>
<div class="line"><a name="l02960"></a><span class="lineno"> 2960</span>&#160;  <span class="keywordflow">if</span> (SelType-&gt;<a class="code" href="classllvm_1_1Type.html#a34ee40bb2f4f5ece47ef19e5f1f57e3c">isIntOrIntVectorTy</a>() || SelType-&gt;<a class="code" href="classllvm_1_1Type.html#ad0709baa705ae62c4e09cdd47fb4b420">isFPOrFPVectorTy</a>()) {</div>
<div class="line"><a name="l02961"></a><span class="lineno"> 2961</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1Instruction.html">Instruction</a> *FoldI = foldSelectIntoOp(<a class="code" href="PassBuilderBindings_8cpp.html#a0f79dad1efc582555a443cc11a8fa401">SI</a>, <a class="code" href="namespacellvm_1_1tgtok.html#abbc5259d649363016626e2529fabe0c5a58b95af1ca96e109f85a0646a05fceb7">TrueVal</a>, <a class="code" href="namespacellvm_1_1tgtok.html#abbc5259d649363016626e2529fabe0c5aeb5a2908109c763377832cbb4726b6d4">FalseVal</a>))</div>
<div class="line"><a name="l02962"></a><span class="lineno"> 2962</span>&#160;      <span class="keywordflow">return</span> FoldI;</div>
<div class="line"><a name="l02963"></a><span class="lineno"> 2963</span>&#160; </div>
<div class="line"><a name="l02964"></a><span class="lineno"> 2964</span>&#160;    <a class="code" href="classllvm_1_1Value.html">Value</a> *LHS, *RHS;</div>
<div class="line"><a name="l02965"></a><span class="lineno"> 2965</span>&#160;    <a class="code" href="classllvm_1_1Instruction.html#afa0b2fa29ba074f2b6ec9ac11163f2d9">Instruction::CastOps</a> CastOp;</div>
<div class="line"><a name="l02966"></a><span class="lineno"> 2966</span>&#160;    <a class="code" href="structllvm_1_1SelectPatternResult.html">SelectPatternResult</a> SPR = <a class="code" href="namespacellvm.html#a7aad5a0e62a54747f455651ee2dd08ed">matchSelectPattern</a>(&amp;<a class="code" href="PassBuilderBindings_8cpp.html#a0f79dad1efc582555a443cc11a8fa401">SI</a>, LHS, RHS, &amp;CastOp);</div>
<div class="line"><a name="l02967"></a><span class="lineno"> 2967</span>&#160;    <span class="keyword">auto</span> SPF = SPR.<a class="code" href="structllvm_1_1SelectPatternResult.html#a3ca9c2098248eac9051008d6eb9f321d">Flavor</a>;</div>
<div class="line"><a name="l02968"></a><span class="lineno"> 2968</span>&#160;    <span class="keywordflow">if</span> (SPF) {</div>
<div class="line"><a name="l02969"></a><span class="lineno"> 2969</span>&#160;      <a class="code" href="classllvm_1_1Value.html">Value</a> *LHS2, *RHS2;</div>
<div class="line"><a name="l02970"></a><span class="lineno"> 2970</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="namespacellvm.html#a6bf471c1030973649c2e426afc212097">SelectPatternFlavor</a> SPF2 = <a class="code" href="namespacellvm.html#a7aad5a0e62a54747f455651ee2dd08ed">matchSelectPattern</a>(LHS, LHS2, RHS2).Flavor)</div>
<div class="line"><a name="l02971"></a><span class="lineno"> 2971</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1Instruction.html">Instruction</a> *<a class="code" href="namespacellvm_1_1RISCVFenceField.html#a147be9e9780c1e33363ea572d4c7b25fa1835091d83e0e052cd1a32c99b2be731">R</a> = foldSPFofSPF(cast&lt;Instruction&gt;(LHS), SPF2, LHS2,</div>
<div class="line"><a name="l02972"></a><span class="lineno"> 2972</span>&#160;                                          RHS2, <a class="code" href="PassBuilderBindings_8cpp.html#a0f79dad1efc582555a443cc11a8fa401">SI</a>, SPF, RHS))</div>
<div class="line"><a name="l02973"></a><span class="lineno"> 2973</span>&#160;          <span class="keywordflow">return</span> <a class="code" href="namespacellvm_1_1RISCVFenceField.html#a147be9e9780c1e33363ea572d4c7b25fa1835091d83e0e052cd1a32c99b2be731">R</a>;</div>
<div class="line"><a name="l02974"></a><span class="lineno"> 2974</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="namespacellvm.html#a6bf471c1030973649c2e426afc212097">SelectPatternFlavor</a> SPF2 = <a class="code" href="namespacellvm.html#a7aad5a0e62a54747f455651ee2dd08ed">matchSelectPattern</a>(RHS, LHS2, RHS2).Flavor)</div>
<div class="line"><a name="l02975"></a><span class="lineno"> 2975</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1Instruction.html">Instruction</a> *<a class="code" href="namespacellvm_1_1RISCVFenceField.html#a147be9e9780c1e33363ea572d4c7b25fa1835091d83e0e052cd1a32c99b2be731">R</a> = foldSPFofSPF(cast&lt;Instruction&gt;(RHS), SPF2, LHS2,</div>
<div class="line"><a name="l02976"></a><span class="lineno"> 2976</span>&#160;                                          RHS2, <a class="code" href="PassBuilderBindings_8cpp.html#a0f79dad1efc582555a443cc11a8fa401">SI</a>, SPF, LHS))</div>
<div class="line"><a name="l02977"></a><span class="lineno"> 2977</span>&#160;          <span class="keywordflow">return</span> <a class="code" href="namespacellvm_1_1RISCVFenceField.html#a147be9e9780c1e33363ea572d4c7b25fa1835091d83e0e052cd1a32c99b2be731">R</a>;</div>
<div class="line"><a name="l02978"></a><span class="lineno"> 2978</span>&#160;      <span class="comment">// TODO.</span></div>
<div class="line"><a name="l02979"></a><span class="lineno"> 2979</span>&#160;      <span class="comment">// ABS(-X) -&gt; ABS(X)</span></div>
<div class="line"><a name="l02980"></a><span class="lineno"> 2980</span>&#160;    }</div>
<div class="line"><a name="l02981"></a><span class="lineno"> 2981</span>&#160; </div>
<div class="line"><a name="l02982"></a><span class="lineno"> 2982</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="structllvm_1_1SelectPatternResult.html#a94c732c9e96c40976f0509fe0233fe7b">SelectPatternResult::isMinOrMax</a>(SPF)) {</div>
<div class="line"><a name="l02983"></a><span class="lineno"> 2983</span>&#160;      <span class="comment">// Canonicalize so that</span></div>
<div class="line"><a name="l02984"></a><span class="lineno"> 2984</span>&#160;      <span class="comment">// - type casts are outside select patterns.</span></div>
<div class="line"><a name="l02985"></a><span class="lineno"> 2985</span>&#160;      <span class="comment">// - float clamp is transformed to min/max pattern</span></div>
<div class="line"><a name="l02986"></a><span class="lineno"> 2986</span>&#160; </div>
<div class="line"><a name="l02987"></a><span class="lineno"> 2987</span>&#160;      <span class="keywordtype">bool</span> IsCastNeeded = LHS-&gt;<a class="code" href="classllvm_1_1Value.html#a6393a2d4fe7e10b28a0dcc35f881567b">getType</a>() != SelType;</div>
<div class="line"><a name="l02988"></a><span class="lineno"> 2988</span>&#160;      <a class="code" href="classllvm_1_1Value.html">Value</a> *CmpLHS = cast&lt;CmpInst&gt;(CondVal)-&gt;getOperand(0);</div>
<div class="line"><a name="l02989"></a><span class="lineno"> 2989</span>&#160;      <a class="code" href="classllvm_1_1Value.html">Value</a> *CmpRHS = cast&lt;CmpInst&gt;(CondVal)-&gt;getOperand(1);</div>
<div class="line"><a name="l02990"></a><span class="lineno"> 2990</span>&#160;      <span class="keywordflow">if</span> (IsCastNeeded ||</div>
<div class="line"><a name="l02991"></a><span class="lineno"> 2991</span>&#160;          (LHS-&gt;<a class="code" href="classllvm_1_1Value.html#a6393a2d4fe7e10b28a0dcc35f881567b">getType</a>()-&gt;<a class="code" href="classllvm_1_1Type.html#ad0709baa705ae62c4e09cdd47fb4b420">isFPOrFPVectorTy</a>() &amp;&amp;</div>
<div class="line"><a name="l02992"></a><span class="lineno"> 2992</span>&#160;           ((CmpLHS != LHS &amp;&amp; CmpLHS != RHS) ||</div>
<div class="line"><a name="l02993"></a><span class="lineno"> 2993</span>&#160;            (CmpRHS != LHS &amp;&amp; CmpRHS != RHS)))) {</div>
<div class="line"><a name="l02994"></a><span class="lineno"> 2994</span>&#160;        <a class="code" href="classllvm_1_1CmpInst.html#a2be3583dac92a031fa1458d4d992c78b">CmpInst::Predicate</a> MinMaxPred = <a class="code" href="namespacellvm.html#a493bd393688f22538e5de34117e70236">getMinMaxPred</a>(SPF, SPR.<a class="code" href="structllvm_1_1SelectPatternResult.html#a6af27f528f038a2334dd80b7c77246fe">Ordered</a>);</div>
<div class="line"><a name="l02995"></a><span class="lineno"> 2995</span>&#160; </div>
<div class="line"><a name="l02996"></a><span class="lineno"> 2996</span>&#160;        <a class="code" href="classllvm_1_1Value.html">Value</a> *Cmp;</div>
<div class="line"><a name="l02997"></a><span class="lineno"> 2997</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1CmpInst.html#ad73f009e1b3b060bcdf6c2c1dd86600e">CmpInst::isIntPredicate</a>(MinMaxPred)) {</div>
<div class="line"><a name="l02998"></a><span class="lineno"> 2998</span>&#160;          Cmp = <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.CreateICmp(MinMaxPred, LHS, RHS);</div>
<div class="line"><a name="l02999"></a><span class="lineno"> 2999</span>&#160;        } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l03000"></a><span class="lineno"> 3000</span>&#160;          <a class="code" href="classllvm_1_1IRBuilder.html">IRBuilder&lt;&gt;::FastMathFlagGuard</a> FMFG(<a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>);</div>
<div class="line"><a name="l03001"></a><span class="lineno"> 3001</span>&#160;          <span class="keyword">auto</span> FMF =</div>
<div class="line"><a name="l03002"></a><span class="lineno"> 3002</span>&#160;              cast&lt;FPMathOperator&gt;(<a class="code" href="PassBuilderBindings_8cpp.html#a0f79dad1efc582555a443cc11a8fa401">SI</a>.getCondition())-&gt;getFastMathFlags();</div>
<div class="line"><a name="l03003"></a><span class="lineno"> 3003</span>&#160;          <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.setFastMathFlags(FMF);</div>
<div class="line"><a name="l03004"></a><span class="lineno"> 3004</span>&#160;          Cmp = <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.CreateFCmp(MinMaxPred, LHS, RHS);</div>
<div class="line"><a name="l03005"></a><span class="lineno"> 3005</span>&#160;        }</div>
<div class="line"><a name="l03006"></a><span class="lineno"> 3006</span>&#160; </div>
<div class="line"><a name="l03007"></a><span class="lineno"> 3007</span>&#160;        <a class="code" href="classllvm_1_1Value.html">Value</a> *NewSI = <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.CreateSelect(Cmp, LHS, RHS, <a class="code" href="PassBuilderBindings_8cpp.html#a0f79dad1efc582555a443cc11a8fa401">SI</a>.getName(), &amp;<a class="code" href="PassBuilderBindings_8cpp.html#a0f79dad1efc582555a443cc11a8fa401">SI</a>);</div>
<div class="line"><a name="l03008"></a><span class="lineno"> 3008</span>&#160;        <span class="keywordflow">if</span> (!IsCastNeeded)</div>
<div class="line"><a name="l03009"></a><span class="lineno"> 3009</span>&#160;          <span class="keywordflow">return</span> replaceInstUsesWith(<a class="code" href="PassBuilderBindings_8cpp.html#a0f79dad1efc582555a443cc11a8fa401">SI</a>, NewSI);</div>
<div class="line"><a name="l03010"></a><span class="lineno"> 3010</span>&#160; </div>
<div class="line"><a name="l03011"></a><span class="lineno"> 3011</span>&#160;        <a class="code" href="classllvm_1_1Value.html">Value</a> *NewCast = <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.CreateCast(CastOp, NewSI, SelType);</div>
<div class="line"><a name="l03012"></a><span class="lineno"> 3012</span>&#160;        <span class="keywordflow">return</span> replaceInstUsesWith(<a class="code" href="PassBuilderBindings_8cpp.html#a0f79dad1efc582555a443cc11a8fa401">SI</a>, NewCast);</div>
<div class="line"><a name="l03013"></a><span class="lineno"> 3013</span>&#160;      }</div>
<div class="line"><a name="l03014"></a><span class="lineno"> 3014</span>&#160; </div>
<div class="line"><a name="l03015"></a><span class="lineno"> 3015</span>&#160;      <span class="comment">// MAX(~a, ~b) -&gt; ~MIN(a, b)</span></div>
<div class="line"><a name="l03016"></a><span class="lineno"> 3016</span>&#160;      <span class="comment">// MAX(~a, C)  -&gt; ~MIN(a, ~C)</span></div>
<div class="line"><a name="l03017"></a><span class="lineno"> 3017</span>&#160;      <span class="comment">// MIN(~a, ~b) -&gt; ~MAX(a, b)</span></div>
<div class="line"><a name="l03018"></a><span class="lineno"> 3018</span>&#160;      <span class="comment">// MIN(~a, C)  -&gt; ~MAX(a, ~C)</span></div>
<div class="line"><a name="l03019"></a><span class="lineno"> 3019</span>&#160;      <span class="keyword">auto</span> moveNotAfterMinMax = [&amp;](<a class="code" href="classllvm_1_1Value.html">Value</a> *<a class="code" href="ErlangGCPrinter_8cpp.html#a74b474c0616ab55c1d9487f11fd31d26">X</a>, <a class="code" href="classllvm_1_1Value.html">Value</a> *<a class="code" href="OcamlGCPrinter_8cpp.html#afcf2f797ed287a723263583c9b1c1bce">Y</a>) -&gt; <a class="code" href="classllvm_1_1Instruction.html">Instruction</a> * {</div>
<div class="line"><a name="l03020"></a><span class="lineno"> 3020</span>&#160;        <a class="code" href="classllvm_1_1Value.html">Value</a> *<a class="code" href="README__ALTIVEC_8txt.html#a015846b6188ce15e08cd94c74a9df1a3">A</a>;</div>
<div class="line"><a name="l03021"></a><span class="lineno"> 3021</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="namespacellvm_1_1PatternMatch.html#a25d956d9e0beadd47ce4bc255dfa811d">match</a>(<a class="code" href="ErlangGCPrinter_8cpp.html#a74b474c0616ab55c1d9487f11fd31d26">X</a>, <a class="code" href="namespacellvm_1_1PatternMatch.html#ad6994fd7098916ce21d65be005666f21">m_Not</a>(<a class="code" href="namespacellvm_1_1PatternMatch.html#a24bca8838396aa81b87de8e7ac774b19">m_Value</a>(<a class="code" href="README__ALTIVEC_8txt.html#a015846b6188ce15e08cd94c74a9df1a3">A</a>))) &amp;&amp; !<a class="code" href="ErlangGCPrinter_8cpp.html#a74b474c0616ab55c1d9487f11fd31d26">X</a>-&gt;hasNUsesOrMore(3) &amp;&amp;</div>
<div class="line"><a name="l03022"></a><span class="lineno"> 3022</span>&#160;            !isFreeToInvert(<a class="code" href="README__ALTIVEC_8txt.html#a015846b6188ce15e08cd94c74a9df1a3">A</a>, <a class="code" href="README__ALTIVEC_8txt.html#a015846b6188ce15e08cd94c74a9df1a3">A</a>-&gt;hasOneUse()) &amp;&amp;</div>
<div class="line"><a name="l03023"></a><span class="lineno"> 3023</span>&#160;            <span class="comment">// Passing false to only consider m_Not and constants.</span></div>
<div class="line"><a name="l03024"></a><span class="lineno"> 3024</span>&#160;            isFreeToInvert(<a class="code" href="OcamlGCPrinter_8cpp.html#afcf2f797ed287a723263583c9b1c1bce">Y</a>, <span class="keyword">false</span>)) {</div>
<div class="line"><a name="l03025"></a><span class="lineno"> 3025</span>&#160;          <a class="code" href="classllvm_1_1Value.html">Value</a> *<a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a> = <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.CreateNot(<a class="code" href="OcamlGCPrinter_8cpp.html#afcf2f797ed287a723263583c9b1c1bce">Y</a>);</div>
<div class="line"><a name="l03026"></a><span class="lineno"> 3026</span>&#160;          <a class="code" href="classllvm_1_1Value.html">Value</a> *NewMinMax = <a class="code" href="InstCombineSelect_8cpp.html#ab9bb62fe1e1120856a8ab13089124a27">createMinMax</a>(<a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>, <a class="code" href="namespacellvm.html#a6626b9250a7ec4cc54a9e8ce78bc0cc3">getInverseMinMaxFlavor</a>(SPF),</div>
<div class="line"><a name="l03027"></a><span class="lineno"> 3027</span>&#160;                                          <a class="code" href="README__ALTIVEC_8txt.html#a015846b6188ce15e08cd94c74a9df1a3">A</a>, <a class="code" href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a>);</div>
<div class="line"><a name="l03028"></a><span class="lineno"> 3028</span>&#160;          <span class="comment">// Copy the profile metadata.</span></div>
<div class="line"><a name="l03029"></a><span class="lineno"> 3029</span>&#160;          <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1MDNode.html">MDNode</a> *MD = <a class="code" href="PassBuilderBindings_8cpp.html#a0f79dad1efc582555a443cc11a8fa401">SI</a>.getMetadata(LLVMContext::MD_prof)) {</div>
<div class="line"><a name="l03030"></a><span class="lineno"> 3030</span>&#160;            cast&lt;SelectInst&gt;(NewMinMax)-&gt;setMetadata(LLVMContext::MD_prof, MD);</div>
<div class="line"><a name="l03031"></a><span class="lineno"> 3031</span>&#160;            <span class="comment">// Swap the metadata if the operands are swapped.</span></div>
<div class="line"><a name="l03032"></a><span class="lineno"> 3032</span>&#160;            <span class="keywordflow">if</span> (<a class="code" href="ErlangGCPrinter_8cpp.html#a74b474c0616ab55c1d9487f11fd31d26">X</a> == <a class="code" href="PassBuilderBindings_8cpp.html#a0f79dad1efc582555a443cc11a8fa401">SI</a>.getFalseValue() &amp;&amp; <a class="code" href="OcamlGCPrinter_8cpp.html#afcf2f797ed287a723263583c9b1c1bce">Y</a> == <a class="code" href="PassBuilderBindings_8cpp.html#a0f79dad1efc582555a443cc11a8fa401">SI</a>.getTrueValue())</div>
<div class="line"><a name="l03033"></a><span class="lineno"> 3033</span>&#160;              cast&lt;SelectInst&gt;(NewMinMax)-&gt;swapProfMetadata();</div>
<div class="line"><a name="l03034"></a><span class="lineno"> 3034</span>&#160;          }</div>
<div class="line"><a name="l03035"></a><span class="lineno"> 3035</span>&#160; </div>
<div class="line"><a name="l03036"></a><span class="lineno"> 3036</span>&#160;          <span class="keywordflow">return</span> <a class="code" href="classllvm_1_1BinaryOperator.html#a4f500ae0de71695b652af4c0958d8ea8">BinaryOperator::CreateNot</a>(NewMinMax);</div>
<div class="line"><a name="l03037"></a><span class="lineno"> 3037</span>&#160;        }</div>
<div class="line"><a name="l03038"></a><span class="lineno"> 3038</span>&#160; </div>
<div class="line"><a name="l03039"></a><span class="lineno"> 3039</span>&#160;        <span class="keywordflow">return</span> <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l03040"></a><span class="lineno"> 3040</span>&#160;      };</div>
<div class="line"><a name="l03041"></a><span class="lineno"> 3041</span>&#160; </div>
<div class="line"><a name="l03042"></a><span class="lineno"> 3042</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1Instruction.html">Instruction</a> *<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a> = moveNotAfterMinMax(LHS, RHS))</div>
<div class="line"><a name="l03043"></a><span class="lineno"> 3043</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>;</div>
<div class="line"><a name="l03044"></a><span class="lineno"> 3044</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1Instruction.html">Instruction</a> *<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a> = moveNotAfterMinMax(RHS, LHS))</div>
<div class="line"><a name="l03045"></a><span class="lineno"> 3045</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>;</div>
<div class="line"><a name="l03046"></a><span class="lineno"> 3046</span>&#160; </div>
<div class="line"><a name="l03047"></a><span class="lineno"> 3047</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1Instruction.html">Instruction</a> *<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a> = moveAddAfterMinMax(SPF, LHS, RHS, <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>))</div>
<div class="line"><a name="l03048"></a><span class="lineno"> 3048</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>;</div>
<div class="line"><a name="l03049"></a><span class="lineno"> 3049</span>&#160; </div>
<div class="line"><a name="l03050"></a><span class="lineno"> 3050</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1Instruction.html">Instruction</a> *<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a> = factorizeMinMaxTree(SPF, LHS, RHS, <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>))</div>
<div class="line"><a name="l03051"></a><span class="lineno"> 3051</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>;</div>
<div class="line"><a name="l03052"></a><span class="lineno"> 3052</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1Instruction.html">Instruction</a> *<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a> = matchSAddSubSat(<a class="code" href="PassBuilderBindings_8cpp.html#a0f79dad1efc582555a443cc11a8fa401">SI</a>))</div>
<div class="line"><a name="l03053"></a><span class="lineno"> 3053</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>;</div>
<div class="line"><a name="l03054"></a><span class="lineno"> 3054</span>&#160;    }</div>
<div class="line"><a name="l03055"></a><span class="lineno"> 3055</span>&#160;  }</div>
<div class="line"><a name="l03056"></a><span class="lineno"> 3056</span>&#160; </div>
<div class="line"><a name="l03057"></a><span class="lineno"> 3057</span>&#160;  <span class="comment">// Canonicalize select of FP values where NaN and -0.0 are not valid as</span></div>
<div class="line"><a name="l03058"></a><span class="lineno"> 3058</span>&#160;  <span class="comment">// minnum/maxnum intrinsics.</span></div>
<div class="line"><a name="l03059"></a><span class="lineno"> 3059</span>&#160;  <span class="keywordflow">if</span> (isa&lt;FPMathOperator&gt;(<a class="code" href="PassBuilderBindings_8cpp.html#a0f79dad1efc582555a443cc11a8fa401">SI</a>) &amp;&amp; <a class="code" href="PassBuilderBindings_8cpp.html#a0f79dad1efc582555a443cc11a8fa401">SI</a>.hasNoNaNs() &amp;&amp; <a class="code" href="PassBuilderBindings_8cpp.html#a0f79dad1efc582555a443cc11a8fa401">SI</a>.hasNoSignedZeros()) {</div>
<div class="line"><a name="l03060"></a><span class="lineno"> 3060</span>&#160;    <a class="code" href="classllvm_1_1Value.html">Value</a> *<a class="code" href="ErlangGCPrinter_8cpp.html#a74b474c0616ab55c1d9487f11fd31d26">X</a>, *<a class="code" href="OcamlGCPrinter_8cpp.html#afcf2f797ed287a723263583c9b1c1bce">Y</a>;</div>
<div class="line"><a name="l03061"></a><span class="lineno"> 3061</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="namespacellvm_1_1PatternMatch.html#a25d956d9e0beadd47ce4bc255dfa811d">match</a>(&amp;<a class="code" href="PassBuilderBindings_8cpp.html#a0f79dad1efc582555a443cc11a8fa401">SI</a>, <a class="code" href="namespacellvm_1_1PatternMatch.html#a235364424b2c4c8261f4030681d9630b">m_OrdFMax</a>(<a class="code" href="namespacellvm_1_1PatternMatch.html#a24bca8838396aa81b87de8e7ac774b19">m_Value</a>(<a class="code" href="ErlangGCPrinter_8cpp.html#a74b474c0616ab55c1d9487f11fd31d26">X</a>), <a class="code" href="namespacellvm_1_1PatternMatch.html#a24bca8838396aa81b87de8e7ac774b19">m_Value</a>(<a class="code" href="OcamlGCPrinter_8cpp.html#afcf2f797ed287a723263583c9b1c1bce">Y</a>))))</div>
<div class="line"><a name="l03062"></a><span class="lineno"> 3062</span>&#160;      <span class="keywordflow">return</span> replaceInstUsesWith(</div>
<div class="line"><a name="l03063"></a><span class="lineno"> 3063</span>&#160;          <a class="code" href="PassBuilderBindings_8cpp.html#a0f79dad1efc582555a443cc11a8fa401">SI</a>, <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.CreateBinaryIntrinsic(<a class="code" href="namespacellvm.html#a636de400e4dd2bc090b729329a99e75b">Intrinsic::maxnum</a>, <a class="code" href="ErlangGCPrinter_8cpp.html#a74b474c0616ab55c1d9487f11fd31d26">X</a>, <a class="code" href="OcamlGCPrinter_8cpp.html#afcf2f797ed287a723263583c9b1c1bce">Y</a>, &amp;<a class="code" href="PassBuilderBindings_8cpp.html#a0f79dad1efc582555a443cc11a8fa401">SI</a>));</div>
<div class="line"><a name="l03064"></a><span class="lineno"> 3064</span>&#160; </div>
<div class="line"><a name="l03065"></a><span class="lineno"> 3065</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="namespacellvm_1_1PatternMatch.html#a25d956d9e0beadd47ce4bc255dfa811d">match</a>(&amp;<a class="code" href="PassBuilderBindings_8cpp.html#a0f79dad1efc582555a443cc11a8fa401">SI</a>, <a class="code" href="namespacellvm_1_1PatternMatch.html#aa437a212f5c7987d6b0e6cf722e25a2e">m_OrdFMin</a>(<a class="code" href="namespacellvm_1_1PatternMatch.html#a24bca8838396aa81b87de8e7ac774b19">m_Value</a>(<a class="code" href="ErlangGCPrinter_8cpp.html#a74b474c0616ab55c1d9487f11fd31d26">X</a>), <a class="code" href="namespacellvm_1_1PatternMatch.html#a24bca8838396aa81b87de8e7ac774b19">m_Value</a>(<a class="code" href="OcamlGCPrinter_8cpp.html#afcf2f797ed287a723263583c9b1c1bce">Y</a>))))</div>
<div class="line"><a name="l03066"></a><span class="lineno"> 3066</span>&#160;      <span class="keywordflow">return</span> replaceInstUsesWith(</div>
<div class="line"><a name="l03067"></a><span class="lineno"> 3067</span>&#160;          <a class="code" href="PassBuilderBindings_8cpp.html#a0f79dad1efc582555a443cc11a8fa401">SI</a>, <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.CreateBinaryIntrinsic(<a class="code" href="namespacellvm.html#aa656aa475d13ec6a900414eadabe86b0">Intrinsic::minnum</a>, <a class="code" href="ErlangGCPrinter_8cpp.html#a74b474c0616ab55c1d9487f11fd31d26">X</a>, <a class="code" href="OcamlGCPrinter_8cpp.html#afcf2f797ed287a723263583c9b1c1bce">Y</a>, &amp;<a class="code" href="PassBuilderBindings_8cpp.html#a0f79dad1efc582555a443cc11a8fa401">SI</a>));</div>
<div class="line"><a name="l03068"></a><span class="lineno"> 3068</span>&#160;  }</div>
<div class="line"><a name="l03069"></a><span class="lineno"> 3069</span>&#160; </div>
<div class="line"><a name="l03070"></a><span class="lineno"> 3070</span>&#160;  <span class="comment">// See if we can fold the select into a phi node if the condition is a select.</span></div>
<div class="line"><a name="l03071"></a><span class="lineno"> 3071</span>&#160;  <span class="keywordflow">if</span> (<span class="keyword">auto</span> *PN = dyn_cast&lt;PHINode&gt;(<a class="code" href="PassBuilderBindings_8cpp.html#a0f79dad1efc582555a443cc11a8fa401">SI</a>.getCondition()))</div>
<div class="line"><a name="l03072"></a><span class="lineno"> 3072</span>&#160;    <span class="comment">// The true/false values have to be live in the PHI predecessor&#39;s blocks.</span></div>
<div class="line"><a name="l03073"></a><span class="lineno"> 3073</span>&#160;    <span class="keywordflow">if</span> (canSelectOperandBeMappingIntoPredBlock(<a class="code" href="namespacellvm_1_1tgtok.html#abbc5259d649363016626e2529fabe0c5a58b95af1ca96e109f85a0646a05fceb7">TrueVal</a>, <a class="code" href="PassBuilderBindings_8cpp.html#a0f79dad1efc582555a443cc11a8fa401">SI</a>) &amp;&amp;</div>
<div class="line"><a name="l03074"></a><span class="lineno"> 3074</span>&#160;        canSelectOperandBeMappingIntoPredBlock(<a class="code" href="namespacellvm_1_1tgtok.html#abbc5259d649363016626e2529fabe0c5aeb5a2908109c763377832cbb4726b6d4">FalseVal</a>, <a class="code" href="PassBuilderBindings_8cpp.html#a0f79dad1efc582555a443cc11a8fa401">SI</a>))</div>
<div class="line"><a name="l03075"></a><span class="lineno"> 3075</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1Instruction.html">Instruction</a> *<a class="code" href="namespacellvm_1_1ore.html#a8f5533240c6722d987a2443cba42019d">NV</a> = foldOpIntoPhi(<a class="code" href="PassBuilderBindings_8cpp.html#a0f79dad1efc582555a443cc11a8fa401">SI</a>, PN))</div>
<div class="line"><a name="l03076"></a><span class="lineno"> 3076</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="namespacellvm_1_1ore.html#a8f5533240c6722d987a2443cba42019d">NV</a>;</div>
<div class="line"><a name="l03077"></a><span class="lineno"> 3077</span>&#160; </div>
<div class="line"><a name="l03078"></a><span class="lineno"> 3078</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1SelectInst.html">SelectInst</a> *TrueSI = dyn_cast&lt;SelectInst&gt;(<a class="code" href="namespacellvm_1_1tgtok.html#abbc5259d649363016626e2529fabe0c5a58b95af1ca96e109f85a0646a05fceb7">TrueVal</a>)) {</div>
<div class="line"><a name="l03079"></a><span class="lineno"> 3079</span>&#160;    <span class="keywordflow">if</span> (TrueSI-&gt;getCondition()-&gt;getType() == CondVal-&gt;<a class="code" href="classllvm_1_1Value.html#a6393a2d4fe7e10b28a0dcc35f881567b">getType</a>()) {</div>
<div class="line"><a name="l03080"></a><span class="lineno"> 3080</span>&#160;      <span class="comment">// select(C, select(C, a, b), c) -&gt; select(C, a, c)</span></div>
<div class="line"><a name="l03081"></a><span class="lineno"> 3081</span>&#160;      <span class="keywordflow">if</span> (TrueSI-&gt;getCondition() == CondVal) {</div>
<div class="line"><a name="l03082"></a><span class="lineno"> 3082</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="PassBuilderBindings_8cpp.html#a0f79dad1efc582555a443cc11a8fa401">SI</a>.getTrueValue() == TrueSI-&gt;getTrueValue())</div>
<div class="line"><a name="l03083"></a><span class="lineno"> 3083</span>&#160;          <span class="keywordflow">return</span> <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l03084"></a><span class="lineno"> 3084</span>&#160;        <span class="keywordflow">return</span> replaceOperand(<a class="code" href="PassBuilderBindings_8cpp.html#a0f79dad1efc582555a443cc11a8fa401">SI</a>, 1, TrueSI-&gt;getTrueValue());</div>
<div class="line"><a name="l03085"></a><span class="lineno"> 3085</span>&#160;      }</div>
<div class="line"><a name="l03086"></a><span class="lineno"> 3086</span>&#160;      <span class="comment">// select(C0, select(C1, a, b), b) -&gt; select(C0&amp;C1, a, b)</span></div>
<div class="line"><a name="l03087"></a><span class="lineno"> 3087</span>&#160;      <span class="comment">// We choose this as normal form to enable folding on the And and</span></div>
<div class="line"><a name="l03088"></a><span class="lineno"> 3088</span>&#160;      <span class="comment">// shortening paths for the values (this helps getUnderlyingObjects() for</span></div>
<div class="line"><a name="l03089"></a><span class="lineno"> 3089</span>&#160;      <span class="comment">// example).</span></div>
<div class="line"><a name="l03090"></a><span class="lineno"> 3090</span>&#160;      <span class="keywordflow">if</span> (TrueSI-&gt;getFalseValue() == <a class="code" href="namespacellvm_1_1tgtok.html#abbc5259d649363016626e2529fabe0c5aeb5a2908109c763377832cbb4726b6d4">FalseVal</a> &amp;&amp; TrueSI-&gt;hasOneUse()) {</div>
<div class="line"><a name="l03091"></a><span class="lineno"> 3091</span>&#160;        <a class="code" href="classllvm_1_1Value.html">Value</a> *And = <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.CreateLogicalAnd(CondVal, TrueSI-&gt;getCondition());</div>
<div class="line"><a name="l03092"></a><span class="lineno"> 3092</span>&#160;        replaceOperand(<a class="code" href="PassBuilderBindings_8cpp.html#a0f79dad1efc582555a443cc11a8fa401">SI</a>, 0, And);</div>
<div class="line"><a name="l03093"></a><span class="lineno"> 3093</span>&#160;        replaceOperand(<a class="code" href="PassBuilderBindings_8cpp.html#a0f79dad1efc582555a443cc11a8fa401">SI</a>, 1, TrueSI-&gt;getTrueValue());</div>
<div class="line"><a name="l03094"></a><span class="lineno"> 3094</span>&#160;        <span class="keywordflow">return</span> &amp;<a class="code" href="PassBuilderBindings_8cpp.html#a0f79dad1efc582555a443cc11a8fa401">SI</a>;</div>
<div class="line"><a name="l03095"></a><span class="lineno"> 3095</span>&#160;      }</div>
<div class="line"><a name="l03096"></a><span class="lineno"> 3096</span>&#160;    }</div>
<div class="line"><a name="l03097"></a><span class="lineno"> 3097</span>&#160;  }</div>
<div class="line"><a name="l03098"></a><span class="lineno"> 3098</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1SelectInst.html">SelectInst</a> *FalseSI = dyn_cast&lt;SelectInst&gt;(<a class="code" href="namespacellvm_1_1tgtok.html#abbc5259d649363016626e2529fabe0c5aeb5a2908109c763377832cbb4726b6d4">FalseVal</a>)) {</div>
<div class="line"><a name="l03099"></a><span class="lineno"> 3099</span>&#160;    <span class="keywordflow">if</span> (FalseSI-&gt;getCondition()-&gt;getType() == CondVal-&gt;<a class="code" href="classllvm_1_1Value.html#a6393a2d4fe7e10b28a0dcc35f881567b">getType</a>()) {</div>
<div class="line"><a name="l03100"></a><span class="lineno"> 3100</span>&#160;      <span class="comment">// select(C, a, select(C, b, c)) -&gt; select(C, a, c)</span></div>
<div class="line"><a name="l03101"></a><span class="lineno"> 3101</span>&#160;      <span class="keywordflow">if</span> (FalseSI-&gt;getCondition() == CondVal) {</div>
<div class="line"><a name="l03102"></a><span class="lineno"> 3102</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="PassBuilderBindings_8cpp.html#a0f79dad1efc582555a443cc11a8fa401">SI</a>.getFalseValue() == FalseSI-&gt;getFalseValue())</div>
<div class="line"><a name="l03103"></a><span class="lineno"> 3103</span>&#160;          <span class="keywordflow">return</span> <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l03104"></a><span class="lineno"> 3104</span>&#160;        <span class="keywordflow">return</span> replaceOperand(<a class="code" href="PassBuilderBindings_8cpp.html#a0f79dad1efc582555a443cc11a8fa401">SI</a>, 2, FalseSI-&gt;getFalseValue());</div>
<div class="line"><a name="l03105"></a><span class="lineno"> 3105</span>&#160;      }</div>
<div class="line"><a name="l03106"></a><span class="lineno"> 3106</span>&#160;      <span class="comment">// select(C0, a, select(C1, a, b)) -&gt; select(C0|C1, a, b)</span></div>
<div class="line"><a name="l03107"></a><span class="lineno"> 3107</span>&#160;      <span class="keywordflow">if</span> (FalseSI-&gt;getTrueValue() == <a class="code" href="namespacellvm_1_1tgtok.html#abbc5259d649363016626e2529fabe0c5a58b95af1ca96e109f85a0646a05fceb7">TrueVal</a> &amp;&amp; FalseSI-&gt;hasOneUse()) {</div>
<div class="line"><a name="l03108"></a><span class="lineno"> 3108</span>&#160;        <a class="code" href="classllvm_1_1Value.html">Value</a> *Or = <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.CreateLogicalOr(CondVal, FalseSI-&gt;getCondition());</div>
<div class="line"><a name="l03109"></a><span class="lineno"> 3109</span>&#160;        replaceOperand(<a class="code" href="PassBuilderBindings_8cpp.html#a0f79dad1efc582555a443cc11a8fa401">SI</a>, 0, Or);</div>
<div class="line"><a name="l03110"></a><span class="lineno"> 3110</span>&#160;        replaceOperand(<a class="code" href="PassBuilderBindings_8cpp.html#a0f79dad1efc582555a443cc11a8fa401">SI</a>, 2, FalseSI-&gt;getFalseValue());</div>
<div class="line"><a name="l03111"></a><span class="lineno"> 3111</span>&#160;        <span class="keywordflow">return</span> &amp;<a class="code" href="PassBuilderBindings_8cpp.html#a0f79dad1efc582555a443cc11a8fa401">SI</a>;</div>
<div class="line"><a name="l03112"></a><span class="lineno"> 3112</span>&#160;      }</div>
<div class="line"><a name="l03113"></a><span class="lineno"> 3113</span>&#160;    }</div>
<div class="line"><a name="l03114"></a><span class="lineno"> 3114</span>&#160;  }</div>
<div class="line"><a name="l03115"></a><span class="lineno"> 3115</span>&#160; </div>
<div class="line"><a name="l03116"></a><span class="lineno"> 3116</span>&#160;  <span class="keyword">auto</span> canMergeSelectThroughBinop = [](<a class="code" href="classllvm_1_1BinaryOperator.html">BinaryOperator</a> *BO) {</div>
<div class="line"><a name="l03117"></a><span class="lineno"> 3117</span>&#160;    <span class="comment">// The select might be preventing a division by 0.</span></div>
<div class="line"><a name="l03118"></a><span class="lineno"> 3118</span>&#160;    <span class="keywordflow">switch</span> (BO-&gt;getOpcode()) {</div>
<div class="line"><a name="l03119"></a><span class="lineno"> 3119</span>&#160;    <span class="keywordflow">default</span>:</div>
<div class="line"><a name="l03120"></a><span class="lineno"> 3120</span>&#160;      <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l03121"></a><span class="lineno"> 3121</span>&#160;    <span class="keywordflow">case</span> Instruction::SRem:</div>
<div class="line"><a name="l03122"></a><span class="lineno"> 3122</span>&#160;    <span class="keywordflow">case</span> Instruction::URem:</div>
<div class="line"><a name="l03123"></a><span class="lineno"> 3123</span>&#160;    <span class="keywordflow">case</span> Instruction::SDiv:</div>
<div class="line"><a name="l03124"></a><span class="lineno"> 3124</span>&#160;    <span class="keywordflow">case</span> Instruction::UDiv:</div>
<div class="line"><a name="l03125"></a><span class="lineno"> 3125</span>&#160;      <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l03126"></a><span class="lineno"> 3126</span>&#160;    }</div>
<div class="line"><a name="l03127"></a><span class="lineno"> 3127</span>&#160;  };</div>
<div class="line"><a name="l03128"></a><span class="lineno"> 3128</span>&#160; </div>
<div class="line"><a name="l03129"></a><span class="lineno"> 3129</span>&#160;  <span class="comment">// Try to simplify a binop sandwiched between 2 selects with the same</span></div>
<div class="line"><a name="l03130"></a><span class="lineno"> 3130</span>&#160;  <span class="comment">// condition.</span></div>
<div class="line"><a name="l03131"></a><span class="lineno"> 3131</span>&#160;  <span class="comment">// select(C, binop(select(C, X, Y), W), Z) -&gt; select(C, binop(X, W), Z)</span></div>
<div class="line"><a name="l03132"></a><span class="lineno"> 3132</span>&#160;  <a class="code" href="classllvm_1_1BinaryOperator.html">BinaryOperator</a> *TrueBO;</div>
<div class="line"><a name="l03133"></a><span class="lineno"> 3133</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="namespacellvm_1_1PatternMatch.html#a25d956d9e0beadd47ce4bc255dfa811d">match</a>(<a class="code" href="namespacellvm_1_1tgtok.html#abbc5259d649363016626e2529fabe0c5a58b95af1ca96e109f85a0646a05fceb7">TrueVal</a>, <a class="code" href="namespacellvm_1_1PatternMatch.html#aca6428e7fec51ba0b55594f469eb9691">m_OneUse</a>(<a class="code" href="namespacellvm_1_1PatternMatch.html#a43ac4fbaaf63a88eb5ac05f6d3e5649c">m_BinOp</a>(TrueBO))) &amp;&amp;</div>
<div class="line"><a name="l03134"></a><span class="lineno"> 3134</span>&#160;      canMergeSelectThroughBinop(TrueBO)) {</div>
<div class="line"><a name="l03135"></a><span class="lineno"> 3135</span>&#160;    <span class="keywordflow">if</span> (<span class="keyword">auto</span> *TrueBOSI = dyn_cast&lt;SelectInst&gt;(TrueBO-&gt;<a class="code" href="classllvm_1_1User.html#abe1de1520a21f77ac57cc210bf0fb0b4">getOperand</a>(0))) {</div>
<div class="line"><a name="l03136"></a><span class="lineno"> 3136</span>&#160;      <span class="keywordflow">if</span> (TrueBOSI-&gt;getCondition() == CondVal) {</div>
<div class="line"><a name="l03137"></a><span class="lineno"> 3137</span>&#160;        replaceOperand(*TrueBO, 0, TrueBOSI-&gt;getTrueValue());</div>
<div class="line"><a name="l03138"></a><span class="lineno"> 3138</span>&#160;        Worklist.push(TrueBO);</div>
<div class="line"><a name="l03139"></a><span class="lineno"> 3139</span>&#160;        <span class="keywordflow">return</span> &amp;<a class="code" href="PassBuilderBindings_8cpp.html#a0f79dad1efc582555a443cc11a8fa401">SI</a>;</div>
<div class="line"><a name="l03140"></a><span class="lineno"> 3140</span>&#160;      }</div>
<div class="line"><a name="l03141"></a><span class="lineno"> 3141</span>&#160;    }</div>
<div class="line"><a name="l03142"></a><span class="lineno"> 3142</span>&#160;    <span class="keywordflow">if</span> (<span class="keyword">auto</span> *TrueBOSI = dyn_cast&lt;SelectInst&gt;(TrueBO-&gt;<a class="code" href="classllvm_1_1User.html#abe1de1520a21f77ac57cc210bf0fb0b4">getOperand</a>(1))) {</div>
<div class="line"><a name="l03143"></a><span class="lineno"> 3143</span>&#160;      <span class="keywordflow">if</span> (TrueBOSI-&gt;getCondition() == CondVal) {</div>
<div class="line"><a name="l03144"></a><span class="lineno"> 3144</span>&#160;        replaceOperand(*TrueBO, 1, TrueBOSI-&gt;getTrueValue());</div>
<div class="line"><a name="l03145"></a><span class="lineno"> 3145</span>&#160;        Worklist.push(TrueBO);</div>
<div class="line"><a name="l03146"></a><span class="lineno"> 3146</span>&#160;        <span class="keywordflow">return</span> &amp;<a class="code" href="PassBuilderBindings_8cpp.html#a0f79dad1efc582555a443cc11a8fa401">SI</a>;</div>
<div class="line"><a name="l03147"></a><span class="lineno"> 3147</span>&#160;      }</div>
<div class="line"><a name="l03148"></a><span class="lineno"> 3148</span>&#160;    }</div>
<div class="line"><a name="l03149"></a><span class="lineno"> 3149</span>&#160;  }</div>
<div class="line"><a name="l03150"></a><span class="lineno"> 3150</span>&#160; </div>
<div class="line"><a name="l03151"></a><span class="lineno"> 3151</span>&#160;  <span class="comment">// select(C, Z, binop(select(C, X, Y), W)) -&gt; select(C, Z, binop(Y, W))</span></div>
<div class="line"><a name="l03152"></a><span class="lineno"> 3152</span>&#160;  <a class="code" href="classllvm_1_1BinaryOperator.html">BinaryOperator</a> *FalseBO;</div>
<div class="line"><a name="l03153"></a><span class="lineno"> 3153</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="namespacellvm_1_1PatternMatch.html#a25d956d9e0beadd47ce4bc255dfa811d">match</a>(<a class="code" href="namespacellvm_1_1tgtok.html#abbc5259d649363016626e2529fabe0c5aeb5a2908109c763377832cbb4726b6d4">FalseVal</a>, <a class="code" href="namespacellvm_1_1PatternMatch.html#aca6428e7fec51ba0b55594f469eb9691">m_OneUse</a>(<a class="code" href="namespacellvm_1_1PatternMatch.html#a43ac4fbaaf63a88eb5ac05f6d3e5649c">m_BinOp</a>(FalseBO))) &amp;&amp;</div>
<div class="line"><a name="l03154"></a><span class="lineno"> 3154</span>&#160;      canMergeSelectThroughBinop(FalseBO)) {</div>
<div class="line"><a name="l03155"></a><span class="lineno"> 3155</span>&#160;    <span class="keywordflow">if</span> (<span class="keyword">auto</span> *FalseBOSI = dyn_cast&lt;SelectInst&gt;(FalseBO-&gt;<a class="code" href="classllvm_1_1User.html#abe1de1520a21f77ac57cc210bf0fb0b4">getOperand</a>(0))) {</div>
<div class="line"><a name="l03156"></a><span class="lineno"> 3156</span>&#160;      <span class="keywordflow">if</span> (FalseBOSI-&gt;getCondition() == CondVal) {</div>
<div class="line"><a name="l03157"></a><span class="lineno"> 3157</span>&#160;        replaceOperand(*FalseBO, 0, FalseBOSI-&gt;getFalseValue());</div>
<div class="line"><a name="l03158"></a><span class="lineno"> 3158</span>&#160;        Worklist.push(FalseBO);</div>
<div class="line"><a name="l03159"></a><span class="lineno"> 3159</span>&#160;        <span class="keywordflow">return</span> &amp;<a class="code" href="PassBuilderBindings_8cpp.html#a0f79dad1efc582555a443cc11a8fa401">SI</a>;</div>
<div class="line"><a name="l03160"></a><span class="lineno"> 3160</span>&#160;      }</div>
<div class="line"><a name="l03161"></a><span class="lineno"> 3161</span>&#160;    }</div>
<div class="line"><a name="l03162"></a><span class="lineno"> 3162</span>&#160;    <span class="keywordflow">if</span> (<span class="keyword">auto</span> *FalseBOSI = dyn_cast&lt;SelectInst&gt;(FalseBO-&gt;<a class="code" href="classllvm_1_1User.html#abe1de1520a21f77ac57cc210bf0fb0b4">getOperand</a>(1))) {</div>
<div class="line"><a name="l03163"></a><span class="lineno"> 3163</span>&#160;      <span class="keywordflow">if</span> (FalseBOSI-&gt;getCondition() == CondVal) {</div>
<div class="line"><a name="l03164"></a><span class="lineno"> 3164</span>&#160;        replaceOperand(*FalseBO, 1, FalseBOSI-&gt;getFalseValue());</div>
<div class="line"><a name="l03165"></a><span class="lineno"> 3165</span>&#160;        Worklist.push(FalseBO);</div>
<div class="line"><a name="l03166"></a><span class="lineno"> 3166</span>&#160;        <span class="keywordflow">return</span> &amp;<a class="code" href="PassBuilderBindings_8cpp.html#a0f79dad1efc582555a443cc11a8fa401">SI</a>;</div>
<div class="line"><a name="l03167"></a><span class="lineno"> 3167</span>&#160;      }</div>
<div class="line"><a name="l03168"></a><span class="lineno"> 3168</span>&#160;    }</div>
<div class="line"><a name="l03169"></a><span class="lineno"> 3169</span>&#160;  }</div>
<div class="line"><a name="l03170"></a><span class="lineno"> 3170</span>&#160; </div>
<div class="line"><a name="l03171"></a><span class="lineno"> 3171</span>&#160;  <a class="code" href="classllvm_1_1Value.html">Value</a> *NotCond;</div>
<div class="line"><a name="l03172"></a><span class="lineno"> 3172</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="namespacellvm_1_1PatternMatch.html#a25d956d9e0beadd47ce4bc255dfa811d">match</a>(CondVal, <a class="code" href="namespacellvm_1_1PatternMatch.html#ad6994fd7098916ce21d65be005666f21">m_Not</a>(<a class="code" href="namespacellvm_1_1PatternMatch.html#a24bca8838396aa81b87de8e7ac774b19">m_Value</a>(NotCond))) &amp;&amp;</div>
<div class="line"><a name="l03173"></a><span class="lineno"> 3173</span>&#160;      !<a class="code" href="classllvm_1_1InstCombiner.html#a4ffe5454cf09255ace0804d9c8044004">InstCombiner::shouldAvoidAbsorbingNotIntoSelect</a>(<a class="code" href="PassBuilderBindings_8cpp.html#a0f79dad1efc582555a443cc11a8fa401">SI</a>)) {</div>
<div class="line"><a name="l03174"></a><span class="lineno"> 3174</span>&#160;    replaceOperand(<a class="code" href="PassBuilderBindings_8cpp.html#a0f79dad1efc582555a443cc11a8fa401">SI</a>, 0, NotCond);</div>
<div class="line"><a name="l03175"></a><span class="lineno"> 3175</span>&#160;    <a class="code" href="PassBuilderBindings_8cpp.html#a0f79dad1efc582555a443cc11a8fa401">SI</a>.swapValues();</div>
<div class="line"><a name="l03176"></a><span class="lineno"> 3176</span>&#160;    <a class="code" href="PassBuilderBindings_8cpp.html#a0f79dad1efc582555a443cc11a8fa401">SI</a>.swapProfMetadata();</div>
<div class="line"><a name="l03177"></a><span class="lineno"> 3177</span>&#160;    <span class="keywordflow">return</span> &amp;<a class="code" href="PassBuilderBindings_8cpp.html#a0f79dad1efc582555a443cc11a8fa401">SI</a>;</div>
<div class="line"><a name="l03178"></a><span class="lineno"> 3178</span>&#160;  }</div>
<div class="line"><a name="l03179"></a><span class="lineno"> 3179</span>&#160; </div>
<div class="line"><a name="l03180"></a><span class="lineno"> 3180</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1Instruction.html">Instruction</a> *<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a> = foldVectorSelect(<a class="code" href="PassBuilderBindings_8cpp.html#a0f79dad1efc582555a443cc11a8fa401">SI</a>))</div>
<div class="line"><a name="l03181"></a><span class="lineno"> 3181</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>;</div>
<div class="line"><a name="l03182"></a><span class="lineno"> 3182</span>&#160; </div>
<div class="line"><a name="l03183"></a><span class="lineno"> 3183</span>&#160;  <span class="comment">// If we can compute the condition, there&#39;s no need for a select.</span></div>
<div class="line"><a name="l03184"></a><span class="lineno"> 3184</span>&#160;  <span class="comment">// Like the above fold, we are attempting to reduce compile-time cost by</span></div>
<div class="line"><a name="l03185"></a><span class="lineno"> 3185</span>&#160;  <span class="comment">// putting this fold here with limitations rather than in InstSimplify.</span></div>
<div class="line"><a name="l03186"></a><span class="lineno"> 3186</span>&#160;  <span class="comment">// The motivation for this call into value tracking is to take advantage of</span></div>
<div class="line"><a name="l03187"></a><span class="lineno"> 3187</span>&#160;  <span class="comment">// the assumption cache, so make sure that is populated.</span></div>
<div class="line"><a name="l03188"></a><span class="lineno"> 3188</span>&#160;  <span class="keywordflow">if</span> (!CondVal-&gt;<a class="code" href="classllvm_1_1Value.html#a6393a2d4fe7e10b28a0dcc35f881567b">getType</a>()-&gt;<a class="code" href="classllvm_1_1Type.html#a1bc022868b23918efa44df511f4d5b61">isVectorTy</a>() &amp;&amp; !AC.assumptions().empty()) {</div>
<div class="line"><a name="l03189"></a><span class="lineno"> 3189</span>&#160;    <a class="code" href="structllvm_1_1KnownBits.html">KnownBits</a> Known(1);</div>
<div class="line"><a name="l03190"></a><span class="lineno"> 3190</span>&#160;    <a class="code" href="namespacellvm.html#aa1f8f0633edd8b9a1c5ec15bb9fc5640">computeKnownBits</a>(CondVal, Known, 0, &amp;<a class="code" href="PassBuilderBindings_8cpp.html#a0f79dad1efc582555a443cc11a8fa401">SI</a>);</div>
<div class="line"><a name="l03191"></a><span class="lineno"> 3191</span>&#160;    <span class="keywordflow">if</span> (Known.One.isOneValue())</div>
<div class="line"><a name="l03192"></a><span class="lineno"> 3192</span>&#160;      <span class="keywordflow">return</span> replaceInstUsesWith(<a class="code" href="PassBuilderBindings_8cpp.html#a0f79dad1efc582555a443cc11a8fa401">SI</a>, <a class="code" href="namespacellvm_1_1tgtok.html#abbc5259d649363016626e2529fabe0c5a58b95af1ca96e109f85a0646a05fceb7">TrueVal</a>);</div>
<div class="line"><a name="l03193"></a><span class="lineno"> 3193</span>&#160;    <span class="keywordflow">if</span> (Known.Zero.isOneValue())</div>
<div class="line"><a name="l03194"></a><span class="lineno"> 3194</span>&#160;      <span class="keywordflow">return</span> replaceInstUsesWith(<a class="code" href="PassBuilderBindings_8cpp.html#a0f79dad1efc582555a443cc11a8fa401">SI</a>, <a class="code" href="namespacellvm_1_1tgtok.html#abbc5259d649363016626e2529fabe0c5aeb5a2908109c763377832cbb4726b6d4">FalseVal</a>);</div>
<div class="line"><a name="l03195"></a><span class="lineno"> 3195</span>&#160;  }</div>
<div class="line"><a name="l03196"></a><span class="lineno"> 3196</span>&#160; </div>
<div class="line"><a name="l03197"></a><span class="lineno"> 3197</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1Instruction.html">Instruction</a> *BitCastSel = foldSelectCmpBitcasts(<a class="code" href="PassBuilderBindings_8cpp.html#a0f79dad1efc582555a443cc11a8fa401">SI</a>, <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>))</div>
<div class="line"><a name="l03198"></a><span class="lineno"> 3198</span>&#160;    <span class="keywordflow">return</span> BitCastSel;</div>
<div class="line"><a name="l03199"></a><span class="lineno"> 3199</span>&#160; </div>
<div class="line"><a name="l03200"></a><span class="lineno"> 3200</span>&#160;  <span class="comment">// Simplify selects that test the returned flag of cmpxchg instructions.</span></div>
<div class="line"><a name="l03201"></a><span class="lineno"> 3201</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1Value.html">Value</a> *V = foldSelectCmpXchg(<a class="code" href="PassBuilderBindings_8cpp.html#a0f79dad1efc582555a443cc11a8fa401">SI</a>))</div>
<div class="line"><a name="l03202"></a><span class="lineno"> 3202</span>&#160;    <span class="keywordflow">return</span> replaceInstUsesWith(<a class="code" href="PassBuilderBindings_8cpp.html#a0f79dad1efc582555a443cc11a8fa401">SI</a>, V);</div>
<div class="line"><a name="l03203"></a><span class="lineno"> 3203</span>&#160; </div>
<div class="line"><a name="l03204"></a><span class="lineno"> 3204</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1Instruction.html">Instruction</a> *<a class="code" href="namespacellvm_1_1MCID.html#ab357441fcd1ea1f9b0d27c12700f6023a32dbd2c72a98eaee90e3ad5ef7b5af16">Select</a> = <a class="code" href="InstCombineSelect_8cpp.html#a23c4f37b63adadb274d8689a1784b1c4">foldSelectBinOpIdentity</a>(<a class="code" href="PassBuilderBindings_8cpp.html#a0f79dad1efc582555a443cc11a8fa401">SI</a>, TLI, *<span class="keyword">this</span>))</div>
<div class="line"><a name="l03205"></a><span class="lineno"> 3205</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="namespacellvm_1_1MCID.html#ab357441fcd1ea1f9b0d27c12700f6023a32dbd2c72a98eaee90e3ad5ef7b5af16">Select</a>;</div>
<div class="line"><a name="l03206"></a><span class="lineno"> 3206</span>&#160; </div>
<div class="line"><a name="l03207"></a><span class="lineno"> 3207</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1Instruction.html">Instruction</a> *Funnel = foldSelectFunnelShift(<a class="code" href="PassBuilderBindings_8cpp.html#a0f79dad1efc582555a443cc11a8fa401">SI</a>, <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>))</div>
<div class="line"><a name="l03208"></a><span class="lineno"> 3208</span>&#160;    <span class="keywordflow">return</span> Funnel;</div>
<div class="line"><a name="l03209"></a><span class="lineno"> 3209</span>&#160; </div>
<div class="line"><a name="l03210"></a><span class="lineno"> 3210</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1Instruction.html">Instruction</a> *Copysign = foldSelectToCopysign(<a class="code" href="PassBuilderBindings_8cpp.html#a0f79dad1efc582555a443cc11a8fa401">SI</a>, <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>))</div>
<div class="line"><a name="l03211"></a><span class="lineno"> 3211</span>&#160;    <span class="keywordflow">return</span> Copysign;</div>
<div class="line"><a name="l03212"></a><span class="lineno"> 3212</span>&#160; </div>
<div class="line"><a name="l03213"></a><span class="lineno"> 3213</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1Instruction.html">Instruction</a> *PN = foldSelectToPhi(<a class="code" href="PassBuilderBindings_8cpp.html#a0f79dad1efc582555a443cc11a8fa401">SI</a>, DT, <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>))</div>
<div class="line"><a name="l03214"></a><span class="lineno"> 3214</span>&#160;    <span class="keywordflow">return</span> replaceInstUsesWith(<a class="code" href="PassBuilderBindings_8cpp.html#a0f79dad1efc582555a443cc11a8fa401">SI</a>, PN);</div>
<div class="line"><a name="l03215"></a><span class="lineno"> 3215</span>&#160; </div>
<div class="line"><a name="l03216"></a><span class="lineno"> 3216</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1Value.html">Value</a> *Fr = foldSelectWithFrozenICmp(<a class="code" href="PassBuilderBindings_8cpp.html#a0f79dad1efc582555a443cc11a8fa401">SI</a>, <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>))</div>
<div class="line"><a name="l03217"></a><span class="lineno"> 3217</span>&#160;    <span class="keywordflow">return</span> replaceInstUsesWith(<a class="code" href="PassBuilderBindings_8cpp.html#a0f79dad1efc582555a443cc11a8fa401">SI</a>, Fr);</div>
<div class="line"><a name="l03218"></a><span class="lineno"> 3218</span>&#160; </div>
<div class="line"><a name="l03219"></a><span class="lineno"> 3219</span>&#160;  <span class="comment">// select(mask, mload(,,mask,0), 0) -&gt; mload(,,mask,0)</span></div>
<div class="line"><a name="l03220"></a><span class="lineno"> 3220</span>&#160;  <span class="comment">// Load inst is intentionally not checked for hasOneUse()</span></div>
<div class="line"><a name="l03221"></a><span class="lineno"> 3221</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="namespacellvm_1_1PatternMatch.html#a25d956d9e0beadd47ce4bc255dfa811d">match</a>(<a class="code" href="namespacellvm_1_1tgtok.html#abbc5259d649363016626e2529fabe0c5aeb5a2908109c763377832cbb4726b6d4">FalseVal</a>, <a class="code" href="namespacellvm_1_1PatternMatch.html#ae77be336e228cf9aa00709a8606dfb98">m_Zero</a>()) &amp;&amp;</div>
<div class="line"><a name="l03222"></a><span class="lineno"> 3222</span>&#160;      <a class="code" href="namespacellvm_1_1PatternMatch.html#a25d956d9e0beadd47ce4bc255dfa811d">match</a>(<a class="code" href="namespacellvm_1_1tgtok.html#abbc5259d649363016626e2529fabe0c5a58b95af1ca96e109f85a0646a05fceb7">TrueVal</a>, <a class="code" href="namespacellvm_1_1PatternMatch.html#aee515990e714a596e14ffe986e2d451d">m_MaskedLoad</a>(<a class="code" href="namespacellvm_1_1PatternMatch.html#a24bca8838396aa81b87de8e7ac774b19">m_Value</a>(), <a class="code" href="namespacellvm_1_1PatternMatch.html#a24bca8838396aa81b87de8e7ac774b19">m_Value</a>(), <a class="code" href="namespacellvm_1_1PatternMatch.html#a2d9861feadd3a09792967a012559e7b2">m_Specific</a>(CondVal),</div>
<div class="line"><a name="l03223"></a><span class="lineno"> 3223</span>&#160;                                  <a class="code" href="namespacellvm_1_1PatternMatch.html#af4feec45578e32fe65d8efc59112bc8e">m_CombineOr</a>(<a class="code" href="namespacellvm_1_1PatternMatch.html#adea6dc2e42baa345b97be48b0370313d">m_Undef</a>(), <a class="code" href="namespacellvm_1_1PatternMatch.html#ae77be336e228cf9aa00709a8606dfb98">m_Zero</a>())))) {</div>
<div class="line"><a name="l03224"></a><span class="lineno"> 3224</span>&#160;    <span class="keyword">auto</span> *MaskedLoad = cast&lt;IntrinsicInst&gt;(<a class="code" href="namespacellvm_1_1tgtok.html#abbc5259d649363016626e2529fabe0c5a58b95af1ca96e109f85a0646a05fceb7">TrueVal</a>);</div>
<div class="line"><a name="l03225"></a><span class="lineno"> 3225</span>&#160;    <span class="keywordflow">if</span> (isa&lt;UndefValue&gt;(MaskedLoad-&gt;getArgOperand(3)))</div>
<div class="line"><a name="l03226"></a><span class="lineno"> 3226</span>&#160;      MaskedLoad-&gt;setArgOperand(3, <a class="code" href="namespacellvm_1_1tgtok.html#abbc5259d649363016626e2529fabe0c5aeb5a2908109c763377832cbb4726b6d4">FalseVal</a> <span class="comment">/* Zero */</span>);</div>
<div class="line"><a name="l03227"></a><span class="lineno"> 3227</span>&#160;    <span class="keywordflow">return</span> replaceInstUsesWith(<a class="code" href="PassBuilderBindings_8cpp.html#a0f79dad1efc582555a443cc11a8fa401">SI</a>, MaskedLoad);</div>
<div class="line"><a name="l03228"></a><span class="lineno"> 3228</span>&#160;  }</div>
<div class="line"><a name="l03229"></a><span class="lineno"> 3229</span>&#160; </div>
<div class="line"><a name="l03230"></a><span class="lineno"> 3230</span>&#160;  <a class="code" href="classllvm_1_1Value.html">Value</a> *<a class="code" href="namespacellvm_1_1BitmaskEnumDetail.html#ad9273b0ee6c5e0f2367e3136c1503811">Mask</a>;</div>
<div class="line"><a name="l03231"></a><span class="lineno"> 3231</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="namespacellvm_1_1PatternMatch.html#a25d956d9e0beadd47ce4bc255dfa811d">match</a>(<a class="code" href="namespacellvm_1_1tgtok.html#abbc5259d649363016626e2529fabe0c5a58b95af1ca96e109f85a0646a05fceb7">TrueVal</a>, <a class="code" href="namespacellvm_1_1PatternMatch.html#ae77be336e228cf9aa00709a8606dfb98">m_Zero</a>()) &amp;&amp;</div>
<div class="line"><a name="l03232"></a><span class="lineno"> 3232</span>&#160;      <a class="code" href="namespacellvm_1_1PatternMatch.html#a25d956d9e0beadd47ce4bc255dfa811d">match</a>(<a class="code" href="namespacellvm_1_1tgtok.html#abbc5259d649363016626e2529fabe0c5aeb5a2908109c763377832cbb4726b6d4">FalseVal</a>, <a class="code" href="namespacellvm_1_1PatternMatch.html#aee515990e714a596e14ffe986e2d451d">m_MaskedLoad</a>(<a class="code" href="namespacellvm_1_1PatternMatch.html#a24bca8838396aa81b87de8e7ac774b19">m_Value</a>(), <a class="code" href="namespacellvm_1_1PatternMatch.html#a24bca8838396aa81b87de8e7ac774b19">m_Value</a>(), <a class="code" href="namespacellvm_1_1PatternMatch.html#a24bca8838396aa81b87de8e7ac774b19">m_Value</a>(<a class="code" href="namespacellvm_1_1BitmaskEnumDetail.html#ad9273b0ee6c5e0f2367e3136c1503811">Mask</a>),</div>
<div class="line"><a name="l03233"></a><span class="lineno"> 3233</span>&#160;                                   <a class="code" href="namespacellvm_1_1PatternMatch.html#af4feec45578e32fe65d8efc59112bc8e">m_CombineOr</a>(<a class="code" href="namespacellvm_1_1PatternMatch.html#adea6dc2e42baa345b97be48b0370313d">m_Undef</a>(), <a class="code" href="namespacellvm_1_1PatternMatch.html#ae77be336e228cf9aa00709a8606dfb98">m_Zero</a>()))) &amp;&amp;</div>
<div class="line"><a name="l03234"></a><span class="lineno"> 3234</span>&#160;      (CondVal-&gt;<a class="code" href="classllvm_1_1Value.html#a6393a2d4fe7e10b28a0dcc35f881567b">getType</a>() == <a class="code" href="namespacellvm_1_1BitmaskEnumDetail.html#ad9273b0ee6c5e0f2367e3136c1503811">Mask</a>-&gt;getType())) {</div>
<div class="line"><a name="l03235"></a><span class="lineno"> 3235</span>&#160;    <span class="comment">// We can remove the select by ensuring the load zeros all lanes the</span></div>
<div class="line"><a name="l03236"></a><span class="lineno"> 3236</span>&#160;    <span class="comment">// select would have.  We determine this by proving there is no overlap</span></div>
<div class="line"><a name="l03237"></a><span class="lineno"> 3237</span>&#160;    <span class="comment">// between the load and select masks.</span></div>
<div class="line"><a name="l03238"></a><span class="lineno"> 3238</span>&#160;    <span class="comment">// (i.e (load_mask &amp; select_mask) == 0 == no overlap)</span></div>
<div class="line"><a name="l03239"></a><span class="lineno"> 3239</span>&#160;    <span class="keywordtype">bool</span> CanMergeSelectIntoLoad = <span class="keyword">false</span>;</div>
<div class="line"><a name="l03240"></a><span class="lineno"> 3240</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1Value.html">Value</a> *V = <a class="code" href="namespacellvm.html#a6cc4b1fa4df287216e3bc23d26017096">SimplifyAndInst</a>(CondVal, <a class="code" href="namespacellvm_1_1BitmaskEnumDetail.html#ad9273b0ee6c5e0f2367e3136c1503811">Mask</a>, SQ.getWithInstruction(&amp;<a class="code" href="PassBuilderBindings_8cpp.html#a0f79dad1efc582555a443cc11a8fa401">SI</a>)))</div>
<div class="line"><a name="l03241"></a><span class="lineno"> 3241</span>&#160;      CanMergeSelectIntoLoad = <a class="code" href="namespacellvm_1_1PatternMatch.html#a25d956d9e0beadd47ce4bc255dfa811d">match</a>(V, <a class="code" href="namespacellvm_1_1PatternMatch.html#ae77be336e228cf9aa00709a8606dfb98">m_Zero</a>());</div>
<div class="line"><a name="l03242"></a><span class="lineno"> 3242</span>&#160; </div>
<div class="line"><a name="l03243"></a><span class="lineno"> 3243</span>&#160;    <span class="keywordflow">if</span> (CanMergeSelectIntoLoad) {</div>
<div class="line"><a name="l03244"></a><span class="lineno"> 3244</span>&#160;      <span class="keyword">auto</span> *MaskedLoad = cast&lt;IntrinsicInst&gt;(<a class="code" href="namespacellvm_1_1tgtok.html#abbc5259d649363016626e2529fabe0c5aeb5a2908109c763377832cbb4726b6d4">FalseVal</a>);</div>
<div class="line"><a name="l03245"></a><span class="lineno"> 3245</span>&#160;      <span class="keywordflow">if</span> (isa&lt;UndefValue&gt;(MaskedLoad-&gt;getArgOperand(3)))</div>
<div class="line"><a name="l03246"></a><span class="lineno"> 3246</span>&#160;        MaskedLoad-&gt;setArgOperand(3, <a class="code" href="namespacellvm_1_1tgtok.html#abbc5259d649363016626e2529fabe0c5a58b95af1ca96e109f85a0646a05fceb7">TrueVal</a> <span class="comment">/* Zero */</span>);</div>
<div class="line"><a name="l03247"></a><span class="lineno"> 3247</span>&#160;      <span class="keywordflow">return</span> replaceInstUsesWith(<a class="code" href="PassBuilderBindings_8cpp.html#a0f79dad1efc582555a443cc11a8fa401">SI</a>, MaskedLoad);</div>
<div class="line"><a name="l03248"></a><span class="lineno"> 3248</span>&#160;    }</div>
<div class="line"><a name="l03249"></a><span class="lineno"> 3249</span>&#160;  }</div>
<div class="line"><a name="l03250"></a><span class="lineno"> 3250</span>&#160; </div>
<div class="line"><a name="l03251"></a><span class="lineno"> 3251</span>&#160;  <span class="keywordflow">return</span> <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l03252"></a><span class="lineno"> 3252</span>&#160;}</div>
</div><!-- fragment --></div><!-- contents -->
<div class="ttc" id="alib_2Target_2README_8txt_html_acb559820d9ca11295b4500f179ef6392"><div class="ttname"><a href="lib_2Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a></div><div class="ttdeci">i</div><div class="ttdef"><b>Definition:</b> <a href="lib_2Target_2README_8txt_source.html#l00029">README.txt:29</a></div></div>
<div class="ttc" id="aclassllvm_1_1CmpInst_html_a2be3583dac92a031fa1458d4d992c78ba396dda2571cd3c575f1d9cb44dc2cc09"><div class="ttname"><a href="classllvm_1_1CmpInst.html#a2be3583dac92a031fa1458d4d992c78ba396dda2571cd3c575f1d9cb44dc2cc09">llvm::CmpInst::FCMP_ULE</a></div><div class="ttdeci">@ FCMP_ULE</div><div class="ttdoc">1 1 0 1 True if unordered, less than, or equal</div><div class="ttdef"><b>Definition:</b> <a href="InstrTypes_8h_source.html#l00735">InstrTypes.h:735</a></div></div>
<div class="ttc" id="aAssumptionCache_8h_html"><div class="ttname"><a href="AssumptionCache_8h.html">AssumptionCache.h</a></div></div>
<div class="ttc" id="aclassllvm_1_1InstCombiner_html_a4ffe5454cf09255ace0804d9c8044004"><div class="ttname"><a href="classllvm_1_1InstCombiner.html#a4ffe5454cf09255ace0804d9c8044004">llvm::InstCombiner::shouldAvoidAbsorbingNotIntoSelect</a></div><div class="ttdeci">static bool shouldAvoidAbsorbingNotIntoSelect(const SelectInst &amp;SI)</div><div class="ttdef"><b>Definition:</b> <a href="InstCombiner_8h_source.html#l00216">InstCombiner.h:216</a></div></div>
<div class="ttc" id="anamespacellvm_html_a91d9d210ba428cc67e3c2e892f24529e"><div class="ttname"><a href="namespacellvm.html#a91d9d210ba428cc67e3c2e892f24529e">llvm::predecessors</a></div><div class="ttdeci">pred_range predecessors(BasicBlock *BB)</div><div class="ttdef"><b>Definition:</b> <a href="IR_2CFG_8h_source.html#l00127">CFG.h:127</a></div></div>
<div class="ttc" id="anamespacellvm_html_a6bf471c1030973649c2e426afc212097ac8062350ff8114c3ffe79a339f2a1ece"><div class="ttname"><a href="namespacellvm.html#a6bf471c1030973649c2e426afc212097ac8062350ff8114c3ffe79a339f2a1ece">llvm::SPF_SMAX</a></div><div class="ttdeci">@ SPF_SMAX</div><div class="ttdoc">Unsigned minimum.</div><div class="ttdef"><b>Definition:</b> <a href="ValueTracking_8h_source.html#l00661">ValueTracking.h:661</a></div></div>
<div class="ttc" id="aInstCombineSelect_8cpp_html_a23c4f37b63adadb274d8689a1784b1c4"><div class="ttname"><a href="InstCombineSelect_8cpp.html#a23c4f37b63adadb274d8689a1784b1c4">foldSelectBinOpIdentity</a></div><div class="ttdeci">static Instruction * foldSelectBinOpIdentity(SelectInst &amp;Sel, const TargetLibraryInfo &amp;TLI, InstCombinerImpl &amp;IC)</div><div class="ttdoc">Replace a select operand based on an equality comparison with the identity constant of a binop.</div><div class="ttdef"><b>Definition:</b> <a href="InstCombineSelect_8cpp_source.html#l00060">InstCombineSelect.cpp:60</a></div></div>
<div class="ttc" id="aInstCombineSelect_8cpp_html_a81f942049771fb3a626f9fa4ec5f0f25"><div class="ttname"><a href="InstCombineSelect_8cpp.html#a81f942049771fb3a626f9fa4ec5f0f25">foldSelectICmpAnd</a></div><div class="ttdeci">static Value * foldSelectICmpAnd(SelectInst &amp;Sel, ICmpInst *Cmp, InstCombiner::BuilderTy &amp;Builder)</div><div class="ttdoc">This folds: select (icmp eq (and X, C1)), TC, FC iff C1 is a power 2 and the difference between TC an...</div><div class="ttdef"><b>Definition:</b> <a href="InstCombineSelect_8cpp_source.html#l00125">InstCombineSelect.cpp:125</a></div></div>
<div class="ttc" id="aclassllvm_1_1CmpInst_html_a49a2d8f483ea08a3d6ea75f90c640d76"><div class="ttname"><a href="classllvm_1_1CmpInst.html#a49a2d8f483ea08a3d6ea75f90c640d76">llvm::CmpInst::getSwappedPredicate</a></div><div class="ttdeci">Predicate getSwappedPredicate() const</div><div class="ttdoc">For example, EQ-&gt;EQ, SLE-&gt;SGE, ULT-&gt;UGT, OEQ-&gt;OEQ, ULE-&gt;UGE, OLT-&gt;OGT, etc.</div><div class="ttdef"><b>Definition:</b> <a href="InstrTypes_8h_source.html#l00836">InstrTypes.h:836</a></div></div>
<div class="ttc" id="aclassllvm_1_1IRBuilderBase_html_ace45cae6925c65e9d6916e09dd5b17cc"><div class="ttname"><a href="classllvm_1_1IRBuilderBase.html#ace45cae6925c65e9d6916e09dd5b17cc">llvm::IRBuilderBase::SetInsertPoint</a></div><div class="ttdeci">void SetInsertPoint(BasicBlock *TheBB)</div><div class="ttdoc">This specifies that created instructions should be appended to the end of the specified block.</div><div class="ttdef"><b>Definition:</b> <a href="IRBuilder_8h_source.html#l00184">IRBuilder.h:184</a></div></div>
<div class="ttc" id="anamespacellvm_html"><div class="ttname"><a href="namespacellvm.html">llvm</a></div><div class="ttdoc">--------------------- PointerInfo ------------------------------------</div><div class="ttdef"><b>Definition:</b> <a href="AllocatorList_8h_source.html#l00023">AllocatorList.h:23</a></div></div>
<div class="ttc" id="anamespacellvm_html_aebd66f6649c1449adbcfcedf1651af18"><div class="ttname"><a href="namespacellvm.html#aebd66f6649c1449adbcfcedf1651af18">llvm::isCheckForZeroAndMulWithOverflow</a></div><div class="ttdeci">bool isCheckForZeroAndMulWithOverflow(Value *Op0, Value *Op1, bool IsAnd, Use *&amp;Y)</div><div class="ttdoc">Match one of the patterns up to the select/logic op: Op0 = icmp ne i4 X, 0 Agg = call { i4,...</div><div class="ttdef"><b>Definition:</b> <a href="OverflowInstAnalysis_8cpp_source.html#l00022">OverflowInstAnalysis.cpp:22</a></div></div>
<div class="ttc" id="aclassllvm_1_1Type_html_aa75984a442f2379de0c66018201fa628"><div class="ttname"><a href="classllvm_1_1Type.html#aa75984a442f2379de0c66018201fa628">llvm::Type::getInt1Ty</a></div><div class="ttdeci">static IntegerType * getInt1Ty(LLVMContext &amp;C)</div><div class="ttdef"><b>Definition:</b> <a href="Type_8cpp_source.html#l00200">Type.cpp:200</a></div></div>
<div class="ttc" id="aclassllvm_1_1Instruction_html_a4ba3a5be6c0e9b9e8a525de055836733"><div class="ttname"><a href="classllvm_1_1Instruction.html#a4ba3a5be6c0e9b9e8a525de055836733">llvm::Instruction::getModule</a></div><div class="ttdeci">const Module * getModule() const</div><div class="ttdoc">Return the module owning the function this instruction belongs to or nullptr it the function does not...</div><div class="ttdef"><b>Definition:</b> <a href="IR_2Instruction_8cpp_source.html#l00066">Instruction.cpp:66</a></div></div>
<div class="ttc" id="aclassllvm_1_1CmpInst_html_a2be3583dac92a031fa1458d4d992c78baa719225e2de4059f93fd3209e1f48218"><div class="ttname"><a href="classllvm_1_1CmpInst.html#a2be3583dac92a031fa1458d4d992c78baa719225e2de4059f93fd3209e1f48218">llvm::CmpInst::ICMP_EQ</a></div><div class="ttdeci">@ ICMP_EQ</div><div class="ttdoc">equal</div><div class="ttdef"><b>Definition:</b> <a href="InstrTypes_8h_source.html#l00741">InstrTypes.h:741</a></div></div>
<div class="ttc" id="aOptional_8h_html"><div class="ttname"><a href="Optional_8h.html">Optional.h</a></div></div>
<div class="ttc" id="astructllvm_1_1PatternMatch_1_1m__Mask_html"><div class="ttname"><a href="structllvm_1_1PatternMatch_1_1m__Mask.html">llvm::PatternMatch::m_Mask</a></div><div class="ttdef"><b>Definition:</b> <a href="PatternMatch_8h_source.html#l01524">PatternMatch.h:1524</a></div></div>
<div class="ttc" id="aCmpInstAnalysis_8h_html"><div class="ttname"><a href="CmpInstAnalysis_8h.html">CmpInstAnalysis.h</a></div></div>
<div class="ttc" id="aclassllvm_1_1Value_html_a3a402430a1bbe70a9282dcb0e0b6a2cd"><div class="ttname"><a href="classllvm_1_1Value.html#a3a402430a1bbe70a9282dcb0e0b6a2cd">llvm::Value::hasOneUse</a></div><div class="ttdeci">bool hasOneUse() const</div><div class="ttdoc">Return true if there is exactly one use of this value.</div><div class="ttdef"><b>Definition:</b> <a href="Value_8h_source.html#l00435">Value.h:435</a></div></div>
<div class="ttc" id="aInstCombiner_8h_html"><div class="ttname"><a href="InstCombiner_8h.html">InstCombiner.h</a></div><div class="ttdoc">This file provides the interface for the instcombine pass implementation.</div></div>
<div class="ttc" id="anamespacellvm_1_1Intrinsic_html_a842176a2c8c60a94bc788454b0828ea2"><div class="ttname"><a href="namespacellvm_1_1Intrinsic.html#a842176a2c8c60a94bc788454b0828ea2">llvm::Intrinsic::getDeclaration</a></div><div class="ttdeci">Function * getDeclaration(Module *M, ID id, ArrayRef&lt; Type * &gt; Tys=None)</div><div class="ttdoc">Create or insert an LLVM Function declaration for an intrinsic, and return it.</div><div class="ttdef"><b>Definition:</b> <a href="Function_8cpp_source.html#l01336">Function.cpp:1336</a></div></div>
<div class="ttc" id="aclassllvm_1_1CmpInst_html_a2be3583dac92a031fa1458d4d992c78b"><div class="ttname"><a href="classllvm_1_1CmpInst.html#a2be3583dac92a031fa1458d4d992c78b">llvm::CmpInst::Predicate</a></div><div class="ttdeci">Predicate</div><div class="ttdoc">This enumeration lists the possible predicates for CmpInst subclasses.</div><div class="ttdef"><b>Definition:</b> <a href="InstrTypes_8h_source.html#l00720">InstrTypes.h:720</a></div></div>
<div class="ttc" id="aclassllvm_1_1User_html_a0b931781aa589c6ebe64a76c1447e5b2"><div class="ttname"><a href="classllvm_1_1User.html#a0b931781aa589c6ebe64a76c1447e5b2">llvm::User::operands</a></div><div class="ttdeci">op_range operands()</div><div class="ttdef"><b>Definition:</b> <a href="User_8h_source.html#l00242">User.h:242</a></div></div>
<div class="ttc" id="anamespacellvm_html_a0a77857cbf5e1575cf475ce6a9671a7e"><div class="ttname"><a href="namespacellvm.html#a0a77857cbf5e1575cf475ce6a9671a7e">llvm::isSafeToSpeculativelyExecute</a></div><div class="ttdeci">bool isSafeToSpeculativelyExecute(const Value *V, const Instruction *CtxI=nullptr, const DominatorTree *DT=nullptr, const TargetLibraryInfo *TLI=nullptr)</div><div class="ttdoc">Return true if the instruction does not have any effects besides calculating the result and does not ...</div><div class="ttdef"><b>Definition:</b> <a href="ValueTracking_8cpp_source.html#l04583">ValueTracking.cpp:4583</a></div></div>
<div class="ttc" id="aIntrinsicInst_8h_html"><div class="ttname"><a href="IntrinsicInst_8h.html">IntrinsicInst.h</a></div></div>
<div class="ttc" id="aclassllvm_1_1ConstantExpr_html_a58d6359cee16e5da66861058836dcca9"><div class="ttname"><a href="classllvm_1_1ConstantExpr.html#a58d6359cee16e5da66861058836dcca9">llvm::ConstantExpr::getZExt</a></div><div class="ttdeci">static Constant * getZExt(Constant *C, Type *Ty, bool OnlyIfReduced=false)</div><div class="ttdef"><b>Definition:</b> <a href="Constants_8cpp_source.html#l02113">Constants.cpp:2113</a></div></div>
<div class="ttc" id="aclassT_html"><div class="ttname"><a href="classT.html">T</a></div></div>
<div class="ttc" id="aclassllvm_1_1Function_html"><div class="ttname"><a href="classllvm_1_1Function.html">llvm::Function</a></div><div class="ttdef"><b>Definition:</b> <a href="Function_8h_source.html#l00061">Function.h:62</a></div></div>
<div class="ttc" id="aclassllvm_1_1Instruction_html_a27997849d8982bf226891024fd68daee"><div class="ttname"><a href="classllvm_1_1Instruction.html#a27997849d8982bf226891024fd68daee">llvm::Instruction::isCast</a></div><div class="ttdeci">bool isCast() const</div><div class="ttdef"><b>Definition:</b> <a href="IR_2Instruction_8h_source.html#l00168">Instruction.h:168</a></div></div>
<div class="ttc" id="aclassllvm_1_1APInt_html_aca14d9ec64ba4ab7fb2cef37c57d9ce4"><div class="ttname"><a href="classllvm_1_1APInt.html#aca14d9ec64ba4ab7fb2cef37c57d9ce4">llvm::APInt::ule</a></div><div class="ttdeci">bool ule(const APInt &amp;RHS) const</div><div class="ttdoc">Unsigned less or equal comparison.</div><div class="ttdef"><b>Definition:</b> <a href="APInt_8h_source.html#l01243">APInt.h:1243</a></div></div>
<div class="ttc" id="aREADME-SSE_8txt_html_a63d206a063eefcdf8c318ded97b65020"><div class="ttname"><a href="README-SSE_8txt.html#a63d206a063eefcdf8c318ded97b65020">P</a></div><div class="ttdeci">This currently compiles esp xmm0 movsd esp eax eax esp ret We should use not the dag combiner This is because dagcombine2 needs to be able to see through the X86ISD::Wrapper which DAGCombine can t really do The code for turning x load into a single vector load is target independent and should be moved to the dag combiner The code for turning x load into a vector load can only handle a direct load from a global or a direct load from the stack It should be generalized to handle any load from P</div><div class="ttdef"><b>Definition:</b> <a href="README-SSE_8txt_source.html#l00411">README-SSE.txt:411</a></div></div>
<div class="ttc" id="anamespacellvm_html_af6a303805dba0dd581a5daf9fd96002b"><div class="ttname"><a href="namespacellvm.html#af6a303805dba0dd581a5daf9fd96002b">llvm::isImpliedCondition</a></div><div class="ttdeci">Optional&lt; bool &gt; isImpliedCondition(const Value *LHS, const Value *RHS, const DataLayout &amp;DL, bool LHSIsTrue=true, unsigned Depth=0)</div><div class="ttdoc">Return true if RHS is known to be implied true by LHS.</div><div class="ttdef"><b>Definition:</b> <a href="ValueTracking_8cpp_source.html#l06621">ValueTracking.cpp:6621</a></div></div>
<div class="ttc" id="anamespacellvm_html_a6cc4b1fa4df287216e3bc23d26017096"><div class="ttname"><a href="namespacellvm.html#a6cc4b1fa4df287216e3bc23d26017096">llvm::SimplifyAndInst</a></div><div class="ttdeci">Value * SimplifyAndInst(Value *LHS, Value *RHS, const SimplifyQuery &amp;Q)</div><div class="ttdoc">Given operands for an And, fold the result or return null.</div><div class="ttdef"><b>Definition:</b> <a href="InstructionSimplify_8cpp_source.html#l02171">InstructionSimplify.cpp:2171</a></div></div>
<div class="ttc" id="aclassllvm_1_1BinaryOperator_html_a4f500ae0de71695b652af4c0958d8ea8"><div class="ttname"><a href="classllvm_1_1BinaryOperator.html#a4f500ae0de71695b652af4c0958d8ea8">llvm::BinaryOperator::CreateNot</a></div><div class="ttdeci">static BinaryOperator * CreateNot(Value *Op, const Twine &amp;Name=&quot;&quot;, Instruction *InsertBefore=nullptr)</div><div class="ttdef"><b>Definition:</b> <a href="Instructions_8cpp_source.html#l02620">Instructions.cpp:2620</a></div></div>
<div class="ttc" id="aclassllvm_1_1IntrinsicInst_html_a7ff64b3625b6f9020556ed05a5f72af4"><div class="ttname"><a href="classllvm_1_1IntrinsicInst.html#a7ff64b3625b6f9020556ed05a5f72af4">llvm::IntrinsicInst::getIntrinsicID</a></div><div class="ttdeci">Intrinsic::ID getIntrinsicID() const</div><div class="ttdoc">Return the intrinsic ID of this intrinsic.</div><div class="ttdef"><b>Definition:</b> <a href="IntrinsicInst_8h_source.html#l00052">IntrinsicInst.h:52</a></div></div>
<div class="ttc" id="astructllvm_1_1SelectPatternResult_html_a3ca9c2098248eac9051008d6eb9f321d"><div class="ttname"><a href="structllvm_1_1SelectPatternResult.html#a3ca9c2098248eac9051008d6eb9f321d">llvm::SelectPatternResult::Flavor</a></div><div class="ttdeci">SelectPatternFlavor Flavor</div><div class="ttdef"><b>Definition:</b> <a href="ValueTracking_8h_source.html#l00681">ValueTracking.h:681</a></div></div>
<div class="ttc" id="anamespacellvm_1_1PatternMatch_html_aa08fee11e8a5ec10c0cc2a7abbbd799a"><div class="ttname"><a href="namespacellvm_1_1PatternMatch.html#aa08fee11e8a5ec10c0cc2a7abbbd799a">llvm::PatternMatch::m_LShr</a></div><div class="ttdeci">BinaryOp_match&lt; LHS, RHS, Instruction::LShr &gt; m_LShr(const LHS &amp;L, const RHS &amp;R)</div><div class="ttdef"><b>Definition:</b> <a href="PatternMatch_8h_source.html#l01147">PatternMatch.h:1147</a></div></div>
<div class="ttc" id="aclassllvm_1_1APInt_html_ad1b0513de876d1c85cf6268ca21b2c86"><div class="ttname"><a href="classllvm_1_1APInt.html#ad1b0513de876d1c85cf6268ca21b2c86">llvm::APInt::isPowerOf2</a></div><div class="ttdeci">bool isPowerOf2() const</div><div class="ttdoc">Check if this APInt's value is a power of two greater than zero.</div><div class="ttdef"><b>Definition:</b> <a href="APInt_8h_source.html#l00469">APInt.h:469</a></div></div>
<div class="ttc" id="aInstCombineSelect_8cpp_html_adcce576b2fe9a589249be2adce38a2e8"><div class="ttname"><a href="InstCombineSelect_8cpp.html#adcce576b2fe9a589249be2adce38a2e8">isSelect01</a></div><div class="ttdeci">static bool isSelect01(const APInt &amp;C1I, const APInt &amp;C2I)</div><div class="ttdef"><b>Definition:</b> <a href="InstCombineSelect_8cpp_source.html#l00422">InstCombineSelect.cpp:422</a></div></div>
<div class="ttc" id="alib_2Target_2README_8txt_html_a2a2df5a25b9c703e74e82b48a75d0c3d"><div class="ttname"><a href="lib_2Target_2README_8txt.html#a2a2df5a25b9c703e74e82b48a75d0c3d">C1</a></div><div class="ttdeci">instcombine should handle this C2 when C1</div><div class="ttdef"><b>Definition:</b> <a href="lib_2Target_2README_8txt_source.html#l00263">README.txt:263</a></div></div>
<div class="ttc" id="aclassllvm_1_1InstCombiner_html_a2eee2366d9e86879550a433b0adbe051"><div class="ttname"><a href="classllvm_1_1InstCombiner.html#a2eee2366d9e86879550a433b0adbe051">llvm::InstCombiner::getFlippedStrictnessPredicateAndConstant</a></div><div class="ttdeci">static llvm::Optional&lt; std::pair&lt; CmpInst::Predicate, Constant * &gt; &gt; getFlippedStrictnessPredicateAndConstant(CmpInst::Predicate Pred, Constant *C)</div><div class="ttdef"><b>Definition:</b> <a href="InstCombineCompares_8cpp_source.html#l05371">InstCombineCompares.cpp:5371</a></div></div>
<div class="ttc" id="anamespacellvm_html_ab8a7ef433279aabf7f30fa5504a4d4ef"><div class="ttname"><a href="namespacellvm.html#ab8a7ef433279aabf7f30fa5504a4d4ef">llvm::isGuaranteedNotToBeUndefOrPoison</a></div><div class="ttdeci">bool isGuaranteedNotToBeUndefOrPoison(const Value *V, AssumptionCache *AC=nullptr, const Instruction *CtxI=nullptr, const DominatorTree *DT=nullptr, unsigned Depth=0)</div><div class="ttdoc">Return true if this function can prove that V does not have undef bits and is never poison.</div><div class="ttdef"><b>Definition:</b> <a href="ValueTracking_8cpp_source.html#l05235">ValueTracking.cpp:5235</a></div></div>
<div class="ttc" id="aclassllvm_1_1Type_html_a4abb39a66573f61fda80469faa5d861d"><div class="ttname"><a href="classllvm_1_1Type.html#a4abb39a66573f61fda80469faa5d861d">llvm::Type::getScalarType</a></div><div class="ttdeci">Type * getScalarType() const</div><div class="ttdoc">If this is a vector type, return the element type, otherwise return 'this'.</div><div class="ttdef"><b>Definition:</b> <a href="Type_8h_source.html#l00319">Type.h:319</a></div></div>
<div class="ttc" id="aclassllvm_1_1BinaryOpIntrinsic_html_a6822c506d77c8ba56e85bee5cd1ed01b"><div class="ttname"><a href="classllvm_1_1BinaryOpIntrinsic.html#a6822c506d77c8ba56e85bee5cd1ed01b">llvm::BinaryOpIntrinsic::getRHS</a></div><div class="ttdeci">Value * getRHS() const</div><div class="ttdef"><b>Definition:</b> <a href="IntrinsicInst_8h_source.html#l00554">IntrinsicInst.h:554</a></div></div>
<div class="ttc" id="aclassllvm_1_1ConstantExpr_html_aa342c9b3d47cd9bde63b80c83ead429b"><div class="ttname"><a href="classllvm_1_1ConstantExpr.html#aa342c9b3d47cd9bde63b80c83ead429b">llvm::ConstantExpr::getSExt</a></div><div class="ttdeci">static Constant * getSExt(Constant *C, Type *Ty, bool OnlyIfReduced=false)</div><div class="ttdef"><b>Definition:</b> <a href="Constants_8cpp_source.html#l02099">Constants.cpp:2099</a></div></div>
<div class="ttc" id="anamespacellvm_html_a74a4b4e999364e537c6c8046f84f8f33"><div class="ttname"><a href="namespacellvm.html#a74a4b4e999364e537c6c8046f84f8f33">llvm::SimplifySelectInst</a></div><div class="ttdeci">Value * SimplifySelectInst(Value *Cond, Value *TrueVal, Value *FalseVal, const SimplifyQuery &amp;Q)</div><div class="ttdoc">Given operands for a SelectInst, fold the result or return null.</div><div class="ttdef"><b>Definition:</b> <a href="InstructionSimplify_8cpp_source.html#l04307">InstructionSimplify.cpp:4307</a></div></div>
<div class="ttc" id="aclassllvm_1_1SmallVector_html"><div class="ttname"><a href="classllvm_1_1SmallVector.html">llvm::SmallVector</a></div><div class="ttdoc">This is a 'vector' (really, a variable-sized array), optimized for the case when the array is small.</div><div class="ttdef"><b>Definition:</b> <a href="SmallVector_8h_source.html#l01168">SmallVector.h:1169</a></div></div>
<div class="ttc" id="aclassllvm_1_1InstCombiner_html_ae1d331bc844ecb92bdeb0b706ae04396"><div class="ttname"><a href="classllvm_1_1InstCombiner.html#ae1d331bc844ecb92bdeb0b706ae04396">llvm::InstCombiner::Builder</a></div><div class="ttdeci">BuilderTy &amp; Builder</div><div class="ttdef"><b>Definition:</b> <a href="InstCombiner_8h_source.html#l00056">InstCombiner.h:56</a></div></div>
<div class="ttc" id="aclassllvm_1_1ConstantExpr_html_a68fce0638c5ec7b96b8572cad9c20488"><div class="ttname"><a href="classllvm_1_1ConstantExpr.html#a68fce0638c5ec7b96b8572cad9c20488">llvm::ConstantExpr::getICmp</a></div><div class="ttdeci">static Constant * getICmp(unsigned short pred, Constant *LHS, Constant *RHS, bool OnlyIfReduced=false)</div><div class="ttdoc">get* - Return some common constants without having to specify the full Instruction::OPCODE identifier...</div><div class="ttdef"><b>Definition:</b> <a href="Constants_8cpp_source.html#l02492">Constants.cpp:2492</a></div></div>
<div class="ttc" id="anamespacellvm_1_1PatternMatch_html_a944c25ac9b73b02a17a20a08a25b9b21"><div class="ttname"><a href="namespacellvm_1_1PatternMatch.html#a944c25ac9b73b02a17a20a08a25b9b21">llvm::PatternMatch::m_Add</a></div><div class="ttdeci">BinaryOp_match&lt; LHS, RHS, Instruction::Add &gt; m_Add(const LHS &amp;L, const RHS &amp;R)</div><div class="ttdef"><b>Definition:</b> <a href="PatternMatch_8h_source.html#l01008">PatternMatch.h:1008</a></div></div>
<div class="ttc" id="aclassllvm_1_1BinaryOpIntrinsic_html_a8818b44063f9f3339d4ced72bd76b107"><div class="ttname"><a href="classllvm_1_1BinaryOpIntrinsic.html#a8818b44063f9f3339d4ced72bd76b107">llvm::BinaryOpIntrinsic::getLHS</a></div><div class="ttdeci">Value * getLHS() const</div><div class="ttdef"><b>Definition:</b> <a href="IntrinsicInst_8h_source.html#l00553">IntrinsicInst.h:553</a></div></div>
<div class="ttc" id="anamespacellvm_1_1PatternMatch_html_af4feec45578e32fe65d8efc59112bc8e"><div class="ttname"><a href="namespacellvm_1_1PatternMatch.html#af4feec45578e32fe65d8efc59112bc8e">llvm::PatternMatch::m_CombineOr</a></div><div class="ttdeci">match_combine_or&lt; LTy, RTy &gt; m_CombineOr(const LTy &amp;L, const RTy &amp;R)</div><div class="ttdoc">Combine two pattern matchers matching L || R.</div><div class="ttdef"><b>Definition:</b> <a href="PatternMatch_8h_source.html#l00210">PatternMatch.h:210</a></div></div>
<div class="ttc" id="aclassllvm_1_1IRBuilder_html"><div class="ttname"><a href="classllvm_1_1IRBuilder.html">llvm::IRBuilder&lt; TargetFolder, IRBuilderCallbackInserter &gt;</a></div></div>
<div class="ttc" id="aclassllvm_1_1CastInst_html_a643fe5a9e7042f032dae78109c2b1e72"><div class="ttname"><a href="classllvm_1_1CastInst.html#a643fe5a9e7042f032dae78109c2b1e72">llvm::CastInst::Create</a></div><div class="ttdeci">static CastInst * Create(Instruction::CastOps, Value *S, Type *Ty, const Twine &amp;Name=&quot;&quot;, Instruction *InsertBefore=nullptr)</div><div class="ttdoc">Provides a way to construct any of the CastInst subclasses using an opcode instead of the subclass's ...</div><div class="ttdef"><b>Definition:</b> <a href="Instructions_8cpp_source.html#l02966">Instructions.cpp:2966</a></div></div>
<div class="ttc" id="aclassllvm_1_1CmpInst_html_a2be3583dac92a031fa1458d4d992c78bac17897ebf2f6a6986280fc3bdf28a30a"><div class="ttname"><a href="classllvm_1_1CmpInst.html#a2be3583dac92a031fa1458d4d992c78bac17897ebf2f6a6986280fc3bdf28a30a">llvm::CmpInst::ICMP_NE</a></div><div class="ttdeci">@ ICMP_NE</div><div class="ttdoc">not equal</div><div class="ttdef"><b>Definition:</b> <a href="InstrTypes_8h_source.html#l00742">InstrTypes.h:742</a></div></div>
<div class="ttc" id="aclassllvm_1_1CmpInst_html_aa2a54b545d237ecfe450fd1292f7675e"><div class="ttname"><a href="classllvm_1_1CmpInst.html#aa2a54b545d237ecfe450fd1292f7675e">llvm::CmpInst::getInversePredicate</a></div><div class="ttdeci">Predicate getInversePredicate() const</div><div class="ttdoc">For example, EQ -&gt; NE, UGT -&gt; ULE, SLT -&gt; SGE, OEQ -&gt; UNE, UGT -&gt; OLE, OLT -&gt; UGE,...</div><div class="ttdef"><b>Definition:</b> <a href="InstrTypes_8h_source.html#l00820">InstrTypes.h:820</a></div></div>
<div class="ttc" id="anamespaceR600__InstFlag_html_a23106439cc906be24dc8953eedd3940da8949a42ff4563a29d1e70e18338fd522"><div class="ttname"><a href="namespaceR600__InstFlag.html#a23106439cc906be24dc8953eedd3940da8949a42ff4563a29d1e70e18338fd522">R600_InstFlag::FC</a></div><div class="ttdeci">@ FC</div><div class="ttdef"><b>Definition:</b> <a href="R600Defines_8h_source.html#l00032">R600Defines.h:32</a></div></div>
<div class="ttc" id="aValueTracking_8h_html"><div class="ttname"><a href="ValueTracking_8h.html">ValueTracking.h</a></div></div>
<div class="ttc" id="aInstCombineSelect_8cpp_html_a06a4ce71d0eb134807ac144ccb9f47a1"><div class="ttname"><a href="InstCombineSelect_8cpp.html#a06a4ce71d0eb134807ac144ccb9f47a1">canonicalizeSaturatedAdd</a></div><div class="ttdeci">static Value * canonicalizeSaturatedAdd(ICmpInst *Cmp, Value *TVal, Value *FVal, InstCombiner::BuilderTy &amp;Builder)</div><div class="ttdef"><b>Definition:</b> <a href="InstCombineSelect_8cpp_source.html#l00776">InstCombineSelect.cpp:776</a></div></div>
<div class="ttc" id="anamespacellvm_1_1PatternMatch_html_acd794d7b3653822f61ba126e1678e03f"><div class="ttname"><a href="namespacellvm_1_1PatternMatch.html#acd794d7b3653822f61ba126e1678e03f">llvm::PatternMatch::m_APFloat</a></div><div class="ttdeci">apfloat_match m_APFloat(const APFloat *&amp;Res)</div><div class="ttdoc">Match a ConstantFP or splatted ConstantVector, binding the specified pointer to the contained APFloat...</div><div class="ttdef"><b>Definition:</b> <a href="PatternMatch_8h_source.html#l00287">PatternMatch.h:287</a></div></div>
<div class="ttc" id="aclassllvm_1_1DominatorTree_html"><div class="ttname"><a href="classllvm_1_1DominatorTree.html">llvm::DominatorTree</a></div><div class="ttdoc">Concrete subclass of DominatorTreeBase that is used to compute a normal dominator tree.</div><div class="ttdef"><b>Definition:</b> <a href="Dominators_8h_source.html#l00151">Dominators.h:151</a></div></div>
<div class="ttc" id="aclassllvm_1_1Type_html_ad0709baa705ae62c4e09cdd47fb4b420"><div class="ttname"><a href="classllvm_1_1Type.html#ad0709baa705ae62c4e09cdd47fb4b420">llvm::Type::isFPOrFPVectorTy</a></div><div class="ttdeci">bool isFPOrFPVectorTy() const</div><div class="ttdoc">Return true if this is a FP type or a vector of FP.</div><div class="ttdef"><b>Definition:</b> <a href="Type_8h_source.html#l00189">Type.h:189</a></div></div>
<div class="ttc" id="anamespacellvm_1_1PatternMatch_html_a4fd27a44c5fd9958fdd9150622129cd3"><div class="ttname"><a href="namespacellvm_1_1PatternMatch.html#a4fd27a44c5fd9958fdd9150622129cd3">llvm::PatternMatch::m_Br</a></div><div class="ttdeci">brc_match&lt; Cond_t, bind_ty&lt; BasicBlock &gt;, bind_ty&lt; BasicBlock &gt; &gt; m_Br(const Cond_t &amp;C, BasicBlock *&amp;T, BasicBlock *&amp;F)</div><div class="ttdef"><b>Definition:</b> <a href="PatternMatch_8h_source.html#l01741">PatternMatch.h:1741</a></div></div>
<div class="ttc" id="aAPInt_8h_html"><div class="ttname"><a href="APInt_8h.html">APInt.h</a></div><div class="ttdoc">This file implements a class to represent arbitrary precision integral constant values and operations...</div></div>
<div class="ttc" id="aclassllvm_1_1CmpInst_html_a2be3583dac92a031fa1458d4d992c78ba720a42e85f7e981afd61e28473b0000a"><div class="ttname"><a href="classllvm_1_1CmpInst.html#a2be3583dac92a031fa1458d4d992c78ba720a42e85f7e981afd61e28473b0000a">llvm::CmpInst::ICMP_SGT</a></div><div class="ttdeci">@ ICMP_SGT</div><div class="ttdoc">signed greater than</div><div class="ttdef"><b>Definition:</b> <a href="InstrTypes_8h_source.html#l00747">InstrTypes.h:747</a></div></div>
<div class="ttc" id="aclassllvm_1_1APInt_html_a562c9513409b74f02cb3a5c9bae672ea"><div class="ttname"><a href="classllvm_1_1APInt.html#a562c9513409b74f02cb3a5c9bae672ea">llvm::APInt::getSignedMaxValue</a></div><div class="ttdeci">static APInt getSignedMaxValue(unsigned numBits)</div><div class="ttdoc">Gets maximum signed value of APInt for a specific bit width.</div><div class="ttdef"><b>Definition:</b> <a href="APInt_8h_source.html#l00540">APInt.h:540</a></div></div>
<div class="ttc" id="aclassllvm_1_1Type_html"><div class="ttname"><a href="classllvm_1_1Type.html">llvm::Type</a></div><div class="ttdoc">The instances of the Type class are immutable: once they are created, they are never changed.</div><div class="ttdef"><b>Definition:</b> <a href="Type_8h_source.html#l00045">Type.h:45</a></div></div>
<div class="ttc" id="aclassllvm_1_1APInt_html_a512fe2c15ea651294688eeec1341644c"><div class="ttname"><a href="classllvm_1_1APInt.html#a512fe2c15ea651294688eeec1341644c">llvm::APInt::getBitWidth</a></div><div class="ttdeci">unsigned getBitWidth() const</div><div class="ttdoc">Return the number of bits in the APInt.</div><div class="ttdef"><b>Definition:</b> <a href="APInt_8h_source.html#l01581">APInt.h:1581</a></div></div>
<div class="ttc" id="aclassllvm_1_1ICmpInst_html_aaaeded5d0cab77f531b294638459aca5"><div class="ttname"><a href="classllvm_1_1ICmpInst.html#aaaeded5d0cab77f531b294638459aca5">llvm::ICmpInst::isEquality</a></div><div class="ttdeci">bool isEquality() const</div><div class="ttdoc">Return true if this predicate is either EQ or NE.</div><div class="ttdef"><b>Definition:</b> <a href="Instructions_8h_source.html#l01298">Instructions.h:1298</a></div></div>
<div class="ttc" id="aclassllvm_1_1BasicBlockEdge_html"><div class="ttname"><a href="classllvm_1_1BasicBlockEdge.html">llvm::BasicBlockEdge</a></div><div class="ttdef"><b>Definition:</b> <a href="Dominators_8h_source.html#l00083">Dominators.h:83</a></div></div>
<div class="ttc" id="aMips16ISelLowering_8cpp_html_ac16509a75e3d3fc46b9df1726be486ec"><div class="ttname"><a href="Mips16ISelLowering_8cpp.html#ac16509a75e3d3fc46b9df1726be486ec">T1</a></div><div class="ttdeci">#define T1</div><div class="ttdef"><b>Definition:</b> <a href="Mips16ISelLowering_8cpp_source.html#l00340">Mips16ISelLowering.cpp:340</a></div></div>
<div class="ttc" id="anamespacellvm_html_a6bf471c1030973649c2e426afc212097a7d51d0dcfc2cc79738c77f8f5fa37138"><div class="ttname"><a href="namespacellvm.html#a6bf471c1030973649c2e426afc212097a7d51d0dcfc2cc79738c77f8f5fa37138">llvm::SPF_UMAX</a></div><div class="ttdeci">@ SPF_UMAX</div><div class="ttdoc">Signed maximum.</div><div class="ttdef"><b>Definition:</b> <a href="ValueTracking_8h_source.html#l00662">ValueTracking.h:662</a></div></div>
<div class="ttc" id="aclassllvm_1_1APInt_html_a46a7cbf3724080a5f4f4c7e7a4551e26"><div class="ttname"><a href="classllvm_1_1APInt.html#a46a7cbf3724080a5f4f4c7e7a4551e26">llvm::APInt::ugt</a></div><div class="ttdeci">bool ugt(const APInt &amp;RHS) const</div><div class="ttdoc">Unsigned greater than comparison.</div><div class="ttdef"><b>Definition:</b> <a href="APInt_8h_source.html#l01275">APInt.h:1275</a></div></div>
<div class="ttc" id="aclassllvm_1_1InstCombinerImpl_html_a2b4d03f65a7b212db567dd81b5c1039f"><div class="ttname"><a href="classllvm_1_1InstCombinerImpl.html#a2b4d03f65a7b212db567dd81b5c1039f">llvm::InstCombinerImpl::replaceInstUsesWith</a></div><div class="ttdeci">Instruction * replaceInstUsesWith(Instruction &amp;I, Value *V)</div><div class="ttdoc">A combiner-aware RAUW-like routine.</div><div class="ttdef"><b>Definition:</b> <a href="InstCombineInternal_8h_source.html#l00397">InstCombineInternal.h:397</a></div></div>
<div class="ttc" id="aclassllvm_1_1IRBuilderBase_html_a9dd3b826858e2830f89aa99b46fb166f"><div class="ttname"><a href="classllvm_1_1IRBuilderBase.html#a9dd3b826858e2830f89aa99b46fb166f">llvm::IRBuilderBase::CreateBinaryIntrinsic</a></div><div class="ttdeci">CallInst * CreateBinaryIntrinsic(Intrinsic::ID ID, Value *LHS, Value *RHS, Instruction *FMFSource=nullptr, const Twine &amp;Name=&quot;&quot;)</div><div class="ttdoc">Create a call to intrinsic ID with 2 operands which is mangled on the first type.</div><div class="ttdef"><b>Definition:</b> <a href="IRBuilder_8cpp_source.html#l00831">IRBuilder.cpp:831</a></div></div>
<div class="ttc" id="aclassllvm_1_1Optional_html"><div class="ttname"><a href="classllvm_1_1Optional.html">llvm::Optional&lt; bool &gt;</a></div></div>
<div class="ttc" id="anamespacellvm_1_1PatternMatch_html_a43ac4fbaaf63a88eb5ac05f6d3e5649c"><div class="ttname"><a href="namespacellvm_1_1PatternMatch.html#a43ac4fbaaf63a88eb5ac05f6d3e5649c">llvm::PatternMatch::m_BinOp</a></div><div class="ttdeci">class_match&lt; BinaryOperator &gt; m_BinOp()</div><div class="ttdoc">Match an arbitrary binary operation and ignore it.</div><div class="ttdef"><b>Definition:</b> <a href="PatternMatch_8h_source.html#l00084">PatternMatch.h:84</a></div></div>
<div class="ttc" id="anamespacellvm_1_1ore_html_a8f5533240c6722d987a2443cba42019d"><div class="ttname"><a href="namespacellvm_1_1ore.html#a8f5533240c6722d987a2443cba42019d">llvm::ore::NV</a></div><div class="ttdeci">DiagnosticInfoOptimizationBase::Argument NV</div><div class="ttdef"><b>Definition:</b> <a href="OptimizationRemarkEmitter_8h_source.html#l00136">OptimizationRemarkEmitter.h:136</a></div></div>
<div class="ttc" id="anamespacellvm_1_1PatternMatch_html_a64153676e101a130bbbaaf91635d253a"><div class="ttname"><a href="namespacellvm_1_1PatternMatch.html#a64153676e101a130bbbaaf91635d253a">llvm::PatternMatch::m_AShr</a></div><div class="ttdeci">BinaryOp_match&lt; LHS, RHS, Instruction::AShr &gt; m_AShr(const LHS &amp;L, const RHS &amp;R)</div><div class="ttdef"><b>Definition:</b> <a href="PatternMatch_8h_source.html#l01153">PatternMatch.h:1153</a></div></div>
<div class="ttc" id="anamespacellvm_1_1tgtok_html_abbc5259d649363016626e2529fabe0c5aeb5a2908109c763377832cbb4726b6d4"><div class="ttname"><a href="namespacellvm_1_1tgtok.html#abbc5259d649363016626e2529fabe0c5aeb5a2908109c763377832cbb4726b6d4">llvm::tgtok::FalseVal</a></div><div class="ttdeci">@ FalseVal</div><div class="ttdef"><b>Definition:</b> <a href="TGLexer_8h_source.html#l00061">TGLexer.h:61</a></div></div>
<div class="ttc" id="aclassllvm_1_1SelectInst_html_a59b0ee738ec17984b97128e7f1594db3"><div class="ttname"><a href="classllvm_1_1SelectInst.html#a59b0ee738ec17984b97128e7f1594db3">llvm::SelectInst::getFalseValue</a></div><div class="ttdeci">const Value * getFalseValue() const</div><div class="ttdef"><b>Definition:</b> <a href="Instructions_8h_source.html#l01789">Instructions.h:1789</a></div></div>
<div class="ttc" id="aInstCombineSelect_8cpp_html_a5462cae8957c6ce96a65d693e2dac674"><div class="ttname"><a href="InstCombineSelect_8cpp.html#a5462cae8957c6ce96a65d693e2dac674">getSelectFoldableOperands</a></div><div class="ttdeci">static unsigned getSelectFoldableOperands(BinaryOperator *I)</div><div class="ttdoc">We want to turn code that looks like this: C = or A, B D = select cond, C, A into: C = select cond,...</div><div class="ttdef"><b>Definition:</b> <a href="InstCombineSelect_8cpp_source.html#l00245">InstCombineSelect.cpp:245</a></div></div>
<div class="ttc" id="aOperator_8h_html"><div class="ttname"><a href="Operator_8h.html">Operator.h</a></div></div>
<div class="ttc" id="aSTLExtras_8h_html"><div class="ttname"><a href="STLExtras_8h.html">STLExtras.h</a></div></div>
<div class="ttc" id="anamespacellvm_html_a6dec2b5d3e04b47adf4d918d678e81c9"><div class="ttname"><a href="namespacellvm.html#a6dec2b5d3e04b47adf4d918d678e81c9">llvm::isPowerOf2_32</a></div><div class="ttdeci">constexpr bool isPowerOf2_32(uint32_t Value)</div><div class="ttdoc">Return true if the argument is a power of two &gt; 0.</div><div class="ttdef"><b>Definition:</b> <a href="MathExtras_8h_source.html#l00491">MathExtras.h:491</a></div></div>
<div class="ttc" id="anamespacellvm_html_a7aad5a0e62a54747f455651ee2dd08ed"><div class="ttname"><a href="namespacellvm.html#a7aad5a0e62a54747f455651ee2dd08ed">llvm::matchSelectPattern</a></div><div class="ttdeci">SelectPatternResult matchSelectPattern(Value *V, Value *&amp;LHS, Value *&amp;RHS, Instruction::CastOps *CastOp=nullptr, unsigned Depth=0)</div><div class="ttdoc">Pattern match integer [SU]MIN, [SU]MAX and ABS idioms, returning the kind and providing the out param...</div><div class="ttdef"><b>Definition:</b> <a href="ValueTracking_8cpp_source.html#l06164">ValueTracking.cpp:6164</a></div></div>
<div class="ttc" id="anamespacellvm_1_1PatternMatch_html_ae9d735be1ececf149966a4da253f0320"><div class="ttname"><a href="namespacellvm_1_1PatternMatch.html#ae9d735be1ececf149966a4da253f0320">llvm::PatternMatch::m_c_And</a></div><div class="ttdeci">BinaryOp_match&lt; LHS, RHS, Instruction::And, true &gt; m_c_And(const LHS &amp;L, const RHS &amp;R)</div><div class="ttdoc">Matches an And with LHS and RHS in either order.</div><div class="ttdef"><b>Definition:</b> <a href="PatternMatch_8h_source.html#l02242">PatternMatch.h:2242</a></div></div>
<div class="ttc" id="aclassllvm_1_1BinaryOperator_html_a19cdbeffd437228c47a4410a4ed34aca"><div class="ttname"><a href="classllvm_1_1BinaryOperator.html#a19cdbeffd437228c47a4410a4ed34aca">llvm::BinaryOperator::CreateNeg</a></div><div class="ttdeci">NUW NUW NUW NUW Exact static Exact BinaryOperator * CreateNeg(Value *Op, const Twine &amp;Name=&quot;&quot;, Instruction *InsertBefore=nullptr)</div><div class="ttdoc">Helper functions to construct and inspect unary operations (NEG and NOT) via binary operators SUB and...</div><div class="ttdef"><b>Definition:</b> <a href="Instructions_8cpp_source.html#l02580">Instructions.cpp:2580</a></div></div>
<div class="ttc" id="anamespacellvm_1_1PatternMatch_html_ad6994fd7098916ce21d65be005666f21"><div class="ttname"><a href="namespacellvm_1_1PatternMatch.html#ad6994fd7098916ce21d65be005666f21">llvm::PatternMatch::m_Not</a></div><div class="ttdeci">BinaryOp_match&lt; ValTy, cst_pred_ty&lt; is_all_ones &gt;, Instruction::Xor, true &gt; m_Not(const ValTy &amp;V)</div><div class="ttdoc">Matches a 'Not' as 'xor V, -1' or 'xor -1, V'.</div><div class="ttdef"><b>Definition:</b> <a href="PatternMatch_8h_source.html#l02280">PatternMatch.h:2280</a></div></div>
<div class="ttc" id="aclassllvm_1_1FastMathFlags_html"><div class="ttname"><a href="classllvm_1_1FastMathFlags.html">llvm::FastMathFlags</a></div><div class="ttdoc">Convenience struct for specifying and reasoning about fast-math flags.</div><div class="ttdef"><b>Definition:</b> <a href="Operator_8h_source.html#l00161">Operator.h:161</a></div></div>
<div class="ttc" id="anamespacellvm_html_a6bf471c1030973649c2e426afc212097"><div class="ttname"><a href="namespacellvm.html#a6bf471c1030973649c2e426afc212097">llvm::SelectPatternFlavor</a></div><div class="ttdeci">SelectPatternFlavor</div><div class="ttdoc">Specific patterns of select instructions we can match.</div><div class="ttdef"><b>Definition:</b> <a href="ValueTracking_8h_source.html#l00657">ValueTracking.h:657</a></div></div>
<div class="ttc" id="anamespacellvm_1_1PatternMatch_html_ac0467ca7fad871738b10db95feb40dad"><div class="ttname"><a href="namespacellvm_1_1PatternMatch.html#ac0467ca7fad871738b10db95feb40dad">llvm::PatternMatch::m_BitCast</a></div><div class="ttdeci">CastClass_match&lt; OpTy, Instruction::BitCast &gt; m_BitCast(const OpTy &amp;Op)</div><div class="ttdoc">Matches BitCast.</div><div class="ttdef"><b>Definition:</b> <a href="PatternMatch_8h_source.html#l01603">PatternMatch.h:1603</a></div></div>
<div class="ttc" id="aclassllvm_1_1Constant_html_a586fb7954fcb7d759a997b3e1e979d30"><div class="ttname"><a href="classllvm_1_1Constant.html#a586fb7954fcb7d759a997b3e1e979d30">llvm::Constant::isOneValue</a></div><div class="ttdeci">bool isOneValue() const</div><div class="ttdoc">Returns true if the value is one.</div><div class="ttdef"><b>Definition:</b> <a href="Constants_8cpp_source.html#l00108">Constants.cpp:108</a></div></div>
<div class="ttc" id="aclassllvm_1_1CmpInst_html_a2be3583dac92a031fa1458d4d992c78ba4c399f525bbcf03d72af4b303e6eeca8"><div class="ttname"><a href="classllvm_1_1CmpInst.html#a2be3583dac92a031fa1458d4d992c78ba4c399f525bbcf03d72af4b303e6eeca8">llvm::CmpInst::FCMP_OGT</a></div><div class="ttdeci">@ FCMP_OGT</div><div class="ttdoc">0 0 1 0 True if ordered and greater than</div><div class="ttdef"><b>Definition:</b> <a href="InstrTypes_8h_source.html#l00724">InstrTypes.h:724</a></div></div>
<div class="ttc" id="anamespacellvm_1_1BitmaskEnumDetail_html_ad9273b0ee6c5e0f2367e3136c1503811"><div class="ttname"><a href="namespacellvm_1_1BitmaskEnumDetail.html#ad9273b0ee6c5e0f2367e3136c1503811">llvm::BitmaskEnumDetail::Mask</a></div><div class="ttdeci">std::underlying_type_t&lt; E &gt; Mask()</div><div class="ttdoc">Get a bitmask with 1s in all places up to the high-order bit of E's largest value.</div><div class="ttdef"><b>Definition:</b> <a href="BitmaskEnum_8h_source.html#l00080">BitmaskEnum.h:80</a></div></div>
<div class="ttc" id="anamespacellvm_1_1PatternMatch_html_a94bf3939e0bea91b481096473d0e549f"><div class="ttname"><a href="namespacellvm_1_1PatternMatch.html#a94bf3939e0bea91b481096473d0e549f">llvm::PatternMatch::m_Deferred</a></div><div class="ttdeci">deferredval_ty&lt; Value &gt; m_Deferred(Value *const &amp;V)</div><div class="ttdoc">Like m_Specific(), but works if the specific value to match is determined as part of the same match()...</div><div class="ttdef"><b>Definition:</b> <a href="PatternMatch_8h_source.html#l00820">PatternMatch.h:820</a></div></div>
<div class="ttc" id="aMD5_8cpp_html_a96d73bbd7af15cb1fc38c3f4a3bd82e9"><div class="ttname"><a href="MD5_8cpp.html#a96d73bbd7af15cb1fc38c3f4a3bd82e9">F</a></div><div class="ttdeci">#define F(x, y, z)</div><div class="ttdef"><b>Definition:</b> <a href="MD5_8cpp_source.html#l00056">MD5.cpp:56</a></div></div>
<div class="ttc" id="anamespacellvm_1_1RISCVFenceField_html_a147be9e9780c1e33363ea572d4c7b25fa1835091d83e0e052cd1a32c99b2be731"><div class="ttname"><a href="namespacellvm_1_1RISCVFenceField.html#a147be9e9780c1e33363ea572d4c7b25fa1835091d83e0e052cd1a32c99b2be731">llvm::RISCVFenceField::R</a></div><div class="ttdeci">@ R</div><div class="ttdef"><b>Definition:</b> <a href="RISCVBaseInfo_8h_source.html#l00180">RISCVBaseInfo.h:180</a></div></div>
<div class="ttc" id="aInstCombineSelect_8cpp_html_ab9bb62fe1e1120856a8ab13089124a27"><div class="ttname"><a href="InstCombineSelect_8cpp.html#ab9bb62fe1e1120856a8ab13089124a27">createMinMax</a></div><div class="ttdeci">static Value * createMinMax(InstCombiner::BuilderTy &amp;Builder, SelectPatternFlavor SPF, Value *A, Value *B)</div><div class="ttdef"><b>Definition:</b> <a href="InstCombineSelect_8cpp_source.html#l00051">InstCombineSelect.cpp:51</a></div></div>
<div class="ttc" id="aKnownBits_8h_html"><div class="ttname"><a href="KnownBits_8h.html">KnownBits.h</a></div></div>
<div class="ttc" id="anamespacellvm_1_1PatternMatch_html_aac83d9218356dfe82518cb81e3a53f2f"><div class="ttname"><a href="namespacellvm_1_1PatternMatch.html#aac83d9218356dfe82518cb81e3a53f2f">llvm::PatternMatch::m_FSub</a></div><div class="ttdeci">BinaryOp_match&lt; LHS, RHS, Instruction::FSub &gt; m_FSub(const LHS &amp;L, const RHS &amp;R)</div><div class="ttdef"><b>Definition:</b> <a href="PatternMatch_8h_source.html#l01026">PatternMatch.h:1026</a></div></div>
<div class="ttc" id="aclassllvm_1_1BasicBlock_html"><div class="ttname"><a href="classllvm_1_1BasicBlock.html">llvm::BasicBlock</a></div><div class="ttdoc">LLVM Basic Block Representation.</div><div class="ttdef"><b>Definition:</b> <a href="BasicBlock_8h_source.html#l00058">BasicBlock.h:59</a></div></div>
<div class="ttc" id="anamespacellvm_html_a4e09435caee07f636a47006fa08b9ec4"><div class="ttname"><a href="namespacellvm.html#a4e09435caee07f636a47006fa08b9ec4">llvm::UndefMaskElem</a></div><div class="ttdeci">constexpr int UndefMaskElem</div><div class="ttdef"><b>Definition:</b> <a href="Instructions_8h_source.html#l01999">Instructions.h:1999</a></div></div>
<div class="ttc" id="anamespacellvm_1_1PatternMatch_html_a3de757fc0f1dc7f8f8e9211b32ac106d"><div class="ttname"><a href="namespacellvm_1_1PatternMatch.html#a3de757fc0f1dc7f8f8e9211b32ac106d">llvm::PatternMatch::m_c_ICmp</a></div><div class="ttdeci">CmpClass_match&lt; LHS, RHS, ICmpInst, ICmpInst::Predicate, true &gt; m_c_ICmp(ICmpInst::Predicate &amp;Pred, const LHS &amp;L, const RHS &amp;R)</div><div class="ttdoc">Matches an ICmp with a predicate over LHS and RHS in either order.</div><div class="ttdef"><b>Definition:</b> <a href="PatternMatch_8h_source.html#l02221">PatternMatch.h:2221</a></div></div>
<div class="ttc" id="anamespacellvm_1_1PatternMatch_html_aca6428e7fec51ba0b55594f469eb9691"><div class="ttname"><a href="namespacellvm_1_1PatternMatch.html#aca6428e7fec51ba0b55594f469eb9691">llvm::PatternMatch::m_OneUse</a></div><div class="ttdeci">OneUse_match&lt; T &gt; m_OneUse(const T &amp;SubPattern)</div><div class="ttdef"><b>Definition:</b> <a href="PatternMatch_8h_source.html#l00067">PatternMatch.h:67</a></div></div>
<div class="ttc" id="aclassllvm_1_1CmpInst_html_a2be3583dac92a031fa1458d4d992c78ba75016d5872d90adf89cc1cbf5763f474"><div class="ttname"><a href="classllvm_1_1CmpInst.html#a2be3583dac92a031fa1458d4d992c78ba75016d5872d90adf89cc1cbf5763f474">llvm::CmpInst::FCMP_ULT</a></div><div class="ttdeci">@ FCMP_ULT</div><div class="ttdoc">1 1 0 0 True if unordered or less than</div><div class="ttdef"><b>Definition:</b> <a href="InstrTypes_8h_source.html#l00734">InstrTypes.h:734</a></div></div>
<div class="ttc" id="aclassllvm_1_1ConstantExpr_html_a554ab77949b0a16670a83ec3307501eb"><div class="ttname"><a href="classllvm_1_1ConstantExpr.html#a554ab77949b0a16670a83ec3307501eb">llvm::ConstantExpr::getSub</a></div><div class="ttdeci">static Constant * getSub(Constant *C1, Constant *C2, bool HasNUW=false, bool HasNSW=false)</div><div class="ttdef"><b>Definition:</b> <a href="Constants_8cpp_source.html#l02691">Constants.cpp:2691</a></div></div>
<div class="ttc" id="aclassllvm_1_1InstCombinerImpl_html_a907b1696e080e08a9f4d10084e5d615a"><div class="ttname"><a href="classllvm_1_1InstCombinerImpl.html#a907b1696e080e08a9f4d10084e5d615a">llvm::InstCombinerImpl::foldSelectInstWithICmp</a></div><div class="ttdeci">Instruction * foldSelectInstWithICmp(SelectInst &amp;SI, ICmpInst *ICI)</div></div>
<div class="ttc" id="aclassllvm_1_1DominatorTree_html_a5c69311e8d44898dac36a155c3d8691d"><div class="ttname"><a href="classllvm_1_1DominatorTree.html#a5c69311e8d44898dac36a155c3d8691d">llvm::DominatorTree::dominates</a></div><div class="ttdeci">bool dominates(const BasicBlock *BB, const Use &amp;U) const</div><div class="ttdoc">Return true if the (end of the) basic block BB dominates the use U.</div><div class="ttdef"><b>Definition:</b> <a href="Dominators_8cpp_source.html#l00115">Dominators.cpp:115</a></div></div>
<div class="ttc" id="aIR_2Instruction_8h_html"><div class="ttname"><a href="IR_2Instruction_8h.html">Instruction.h</a></div></div>
<div class="ttc" id="anamespacellvm_1_1PatternMatch_html_aac9e78b3aa02ec087c4621358f506718"><div class="ttname"><a href="namespacellvm_1_1PatternMatch.html#aac9e78b3aa02ec087c4621358f506718">llvm::PatternMatch::m_APInt</a></div><div class="ttdeci">apint_match m_APInt(const APInt *&amp;Res)</div><div class="ttdoc">Match a ConstantInt or splatted ConstantVector, binding the specified pointer to the contained APInt.</div><div class="ttdef"><b>Definition:</b> <a href="PatternMatch_8h_source.html#l00270">PatternMatch.h:270</a></div></div>
<div class="ttc" id="anamespacellvm_html_a6bf471c1030973649c2e426afc212097a08658871fecea100ad724bd8b1c3ae56"><div class="ttname"><a href="namespacellvm.html#a6bf471c1030973649c2e426afc212097a08658871fecea100ad724bd8b1c3ae56">llvm::SPF_NABS</a></div><div class="ttdeci">@ SPF_NABS</div><div class="ttdoc">Absolute value.</div><div class="ttdef"><b>Definition:</b> <a href="ValueTracking_8h_source.html#l00667">ValueTracking.h:666</a></div></div>
<div class="ttc" id="anamespacellvm_1_1PatternMatch_html_ac56cd25f664c1497623d26158a6c5997"><div class="ttname"><a href="namespacellvm_1_1PatternMatch.html#ac56cd25f664c1497623d26158a6c5997">llvm::PatternMatch::m_c_BinOp</a></div><div class="ttdeci">AnyBinaryOp_match&lt; LHS, RHS, true &gt; m_c_BinOp(const LHS &amp;L, const RHS &amp;R)</div><div class="ttdoc">Matches a BinaryOperator with LHS and RHS in either order.</div><div class="ttdef"><b>Definition:</b> <a href="PatternMatch_8h_source.html#l02213">PatternMatch.h:2213</a></div></div>
<div class="ttc" id="aclassllvm_1_1APInt_html_af4b1ccc0b78f9da9f3f3944e06007f1d"><div class="ttname"><a href="classllvm_1_1APInt.html#af4b1ccc0b78f9da9f3f3944e06007f1d">llvm::APInt::uge</a></div><div class="ttdeci">bool uge(const APInt &amp;RHS) const</div><div class="ttdoc">Unsigned greater or equal comparison.</div><div class="ttdef"><b>Definition:</b> <a href="APInt_8h_source.html#l01313">APInt.h:1313</a></div></div>
<div class="ttc" id="anamespacellvm_1_1PatternMatch_html_ae5a9f5c71425f38b8874296c380567ad"><div class="ttname"><a href="namespacellvm_1_1PatternMatch.html#ae5a9f5c71425f38b8874296c380567ad">llvm::PatternMatch::m_UMax</a></div><div class="ttdeci">MaxMin_match&lt; ICmpInst, LHS, RHS, umax_pred_ty &gt; m_UMax(const LHS &amp;L, const RHS &amp;R)</div><div class="ttdef"><b>Definition:</b> <a href="PatternMatch_8h_source.html#l01875">PatternMatch.h:1875</a></div></div>
<div class="ttc" id="anamespacellvm_1_1PatternMatch_html_aa437a212f5c7987d6b0e6cf722e25a2e"><div class="ttname"><a href="namespacellvm_1_1PatternMatch.html#aa437a212f5c7987d6b0e6cf722e25a2e">llvm::PatternMatch::m_OrdFMin</a></div><div class="ttdeci">MaxMin_match&lt; FCmpInst, LHS, RHS, ofmin_pred_ty &gt; m_OrdFMin(const LHS &amp;L, const RHS &amp;R)</div><div class="ttdoc">Match an 'ordered' floating point minimum function.</div><div class="ttdef"><b>Definition:</b> <a href="PatternMatch_8h_source.html#l01922">PatternMatch.h:1922</a></div></div>
<div class="ttc" id="aInstCombineSelect_8cpp_html_ae1c9046639894b4a7f8177e21c97a79c"><div class="ttname"><a href="InstCombineSelect_8cpp.html#ae1c9046639894b4a7f8177e21c97a79c">foldSelectICmpLshrAshr</a></div><div class="ttdeci">static Value * foldSelectICmpLshrAshr(const ICmpInst *IC, Value *TrueVal, Value *FalseVal, InstCombiner::BuilderTy &amp;Builder)</div><div class="ttdoc">We want to turn: (select (icmp sgt x, C), lshr (X, Y), ashr (X, Y)); iff C s&gt;= -1 (select (icmp slt x...</div><div class="ttdef"><b>Definition:</b> <a href="InstCombineSelect_8cpp_source.html#l00548">InstCombineSelect.cpp:548</a></div></div>
<div class="ttc" id="aclassllvm_1_1Instruction_html_ab4e05d690df389b8b1477c90387b575f"><div class="ttname"><a href="classllvm_1_1Instruction.html#ab4e05d690df389b8b1477c90387b575f">llvm::Instruction::getOpcode</a></div><div class="ttdeci">unsigned getOpcode() const</div><div class="ttdoc">Returns a member of one of the enums like Instruction::Add.</div><div class="ttdef"><b>Definition:</b> <a href="IR_2Instruction_8h_source.html#l00160">Instruction.h:160</a></div></div>
<div class="ttc" id="aclassllvm_1_1SelectInst_html_aa55fb74dd22008fdcc26a63f44576022"><div class="ttname"><a href="classllvm_1_1SelectInst.html#aa55fb74dd22008fdcc26a63f44576022">llvm::SelectInst::Create</a></div><div class="ttdeci">static SelectInst * Create(Value *C, Value *S1, Value *S2, const Twine &amp;NameStr=&quot;&quot;, Instruction *InsertBefore=nullptr, Instruction *MDFrom=nullptr)</div><div class="ttdef"><b>Definition:</b> <a href="Instructions_8h_source.html#l01771">Instructions.h:1771</a></div></div>
<div class="ttc" id="aclassllvm_1_1SelectInst_html_a93a29cd4a753518a59c20c1b6ec88c76"><div class="ttname"><a href="classllvm_1_1SelectInst.html#a93a29cd4a753518a59c20c1b6ec88c76">llvm::SelectInst::getCondition</a></div><div class="ttdeci">const Value * getCondition() const</div><div class="ttdef"><b>Definition:</b> <a href="Instructions_8h_source.html#l01787">Instructions.h:1787</a></div></div>
<div class="ttc" id="aInstCombineInternal_8h_html"><div class="ttname"><a href="InstCombineInternal_8h.html">InstCombineInternal.h</a></div><div class="ttdoc">This file provides internal interfaces used to implement the InstCombine.</div></div>
<div class="ttc" id="aclassllvm_1_1InstCombinerImpl_html_a9eeb1caaa920e692849cb94d64b7d66f"><div class="ttname"><a href="classllvm_1_1InstCombinerImpl.html#a9eeb1caaa920e692849cb94d64b7d66f">llvm::InstCombinerImpl::foldSelectIntoOp</a></div><div class="ttdeci">Instruction * foldSelectIntoOp(SelectInst &amp;SI, Value *, Value *)</div><div class="ttdoc">Try to fold the select into one of the operands to allow further optimization.</div><div class="ttdef"><b>Definition:</b> <a href="InstCombineSelect_8cpp_source.html#l00431">InstCombineSelect.cpp:431</a></div></div>
<div class="ttc" id="anamespacellvm_1_1PatternMatch_html_addb87fe3f509b7803d3f5933ee24b560"><div class="ttname"><a href="namespacellvm_1_1PatternMatch.html#addb87fe3f509b7803d3f5933ee24b560">llvm::PatternMatch::m_Select</a></div><div class="ttdeci">ThreeOps_match&lt; Cond, LHS, RHS, Instruction::Select &gt; m_Select(const Cond &amp;C, const LHS &amp;L, const RHS &amp;R)</div><div class="ttdoc">Matches SelectInst.</div><div class="ttdef"><b>Definition:</b> <a href="PatternMatch_8h_source.html#l01472">PatternMatch.h:1472</a></div></div>
<div class="ttc" id="aclassllvm_1_1CmpInst_html_a7bd850492d35a34f0fe419e5555997a9"><div class="ttname"><a href="classllvm_1_1CmpInst.html#a7bd850492d35a34f0fe419e5555997a9">llvm::CmpInst::isFPPredicate</a></div><div class="ttdeci">bool isFPPredicate() const</div><div class="ttdef"><b>Definition:</b> <a href="InstrTypes_8h_source.html#l00813">InstrTypes.h:813</a></div></div>
<div class="ttc" id="aConstants_8h_html"><div class="ttname"><a href="Constants_8h.html">Constants.h</a></div><div class="ttdoc">This file contains the declarations for the subclasses of Constant, which represent the different fla...</div></div>
<div class="ttc" id="anamespacellvm_1_1PatternMatch_html_a25d956d9e0beadd47ce4bc255dfa811d"><div class="ttname"><a href="namespacellvm_1_1PatternMatch.html#a25d956d9e0beadd47ce4bc255dfa811d">llvm::PatternMatch::match</a></div><div class="ttdeci">bool match(Val *V, const Pattern &amp;P)</div><div class="ttdef"><b>Definition:</b> <a href="PatternMatch_8h_source.html#l00049">PatternMatch.h:49</a></div></div>
<div class="ttc" id="aclassllvm_1_1Constant_html_ae4b6abe77abf42fb02081a6cc41a0132"><div class="ttname"><a href="classllvm_1_1Constant.html#ae4b6abe77abf42fb02081a6cc41a0132">llvm::Constant::isNullValue</a></div><div class="ttdeci">bool isNullValue() const</div><div class="ttdoc">Return true if this is the value that would be returned by getNullValue.</div><div class="ttdef"><b>Definition:</b> <a href="Constants_8cpp_source.html#l00074">Constants.cpp:74</a></div></div>
<div class="ttc" id="aclassllvm_1_1User_html"><div class="ttname"><a href="classllvm_1_1User.html">llvm::User</a></div><div class="ttdef"><b>Definition:</b> <a href="User_8h_source.html#l00044">User.h:44</a></div></div>
<div class="ttc" id="aIntrinsics_8h_html"><div class="ttname"><a href="Intrinsics_8h.html">Intrinsics.h</a></div></div>
<div class="ttc" id="aREADME__ALTIVEC_8txt_html_a9aacd9146afe44bf656cd664e2a88c8c"><div class="ttname"><a href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a></div><div class="ttdeci">(vector float) vec_cmpeq(*A, *B) C</div><div class="ttdef"><b>Definition:</b> <a href="README__ALTIVEC_8txt_source.html#l00086">README_ALTIVEC.txt:86</a></div></div>
<div class="ttc" id="aclassllvm_1_1CmpInst_html_a2be3583dac92a031fa1458d4d992c78bad92f160316221fd4090520bb2b3cefc5"><div class="ttname"><a href="classllvm_1_1CmpInst.html#a2be3583dac92a031fa1458d4d992c78bad92f160316221fd4090520bb2b3cefc5">llvm::CmpInst::ICMP_ULE</a></div><div class="ttdeci">@ ICMP_ULE</div><div class="ttdoc">unsigned less or equal</div><div class="ttdef"><b>Definition:</b> <a href="InstrTypes_8h_source.html#l00746">InstrTypes.h:746</a></div></div>
<div class="ttc" id="aInstrTypes_8h_html"><div class="ttname"><a href="InstrTypes_8h.html">InstrTypes.h</a></div></div>
<div class="ttc" id="astructllvm_1_1SelectPatternResult_html_a94c732c9e96c40976f0509fe0233fe7b"><div class="ttname"><a href="structllvm_1_1SelectPatternResult.html#a94c732c9e96c40976f0509fe0233fe7b">llvm::SelectPatternResult::isMinOrMax</a></div><div class="ttdeci">static bool isMinOrMax(SelectPatternFlavor SPF)</div><div class="ttdoc">When implementing this min/max pattern as fcmp; select, does the fcmp have to be ordered?</div><div class="ttdef"><b>Definition:</b> <a href="ValueTracking_8h_source.html#l00689">ValueTracking.h:689</a></div></div>
<div class="ttc" id="aclassllvm_1_1BinaryOperator_html_a82e9f72e7fce50d8b659ff72631c3793"><div class="ttname"><a href="classllvm_1_1BinaryOperator.html#a82e9f72e7fce50d8b659ff72631c3793">llvm::BinaryOperator::CreateNSW</a></div><div class="ttdeci">static BinaryOperator * CreateNSW(BinaryOps Opc, Value *V1, Value *V2, const Twine &amp;Name=&quot;&quot;)</div><div class="ttdef"><b>Definition:</b> <a href="InstrTypes_8h_source.html#l00284">InstrTypes.h:284</a></div></div>
<div class="ttc" id="aOcamlGCPrinter_8cpp_html_afcf2f797ed287a723263583c9b1c1bce"><div class="ttname"><a href="OcamlGCPrinter_8cpp.html#afcf2f797ed287a723263583c9b1c1bce">Y</a></div><div class="ttdeci">static GCMetadataPrinterRegistry::Add&lt; OcamlGCMetadataPrinter &gt; Y(&quot;ocaml&quot;, &quot;ocaml 3.10-compatible collector&quot;)</div></div>
<div class="ttc" id="anamespacellvm_1_1PatternMatch_html_a7a371c4faf8e41f7cac98ad694f504dc"><div class="ttname"><a href="namespacellvm_1_1PatternMatch.html#a7a371c4faf8e41f7cac98ad694f504dc">llvm::PatternMatch::m_PosZeroFP</a></div><div class="ttdeci">cstfp_pred_ty&lt; is_pos_zero_fp &gt; m_PosZeroFP()</div><div class="ttdoc">Match a floating-point positive zero.</div><div class="ttdef"><b>Definition:</b> <a href="PatternMatch_8h_source.html#l00705">PatternMatch.h:705</a></div></div>
<div class="ttc" id="aclassllvm_1_1CallInst_html_a850d8262cd900958b3153c4aa080b2bb"><div class="ttname"><a href="classllvm_1_1CallInst.html#a850d8262cd900958b3153c4aa080b2bb">llvm::CallInst::Create</a></div><div class="ttdeci">static CallInst * Create(FunctionType *Ty, Value *F, const Twine &amp;NameStr=&quot;&quot;, Instruction *InsertBefore=nullptr)</div><div class="ttdef"><b>Definition:</b> <a href="Instructions_8h_source.html#l01518">Instructions.h:1518</a></div></div>
<div class="ttc" id="aclassllvm_1_1CmpInst_html_a2be3583dac92a031fa1458d4d992c78bae51609fc6a425f849d37c28cb9bc0344"><div class="ttname"><a href="classllvm_1_1CmpInst.html#a2be3583dac92a031fa1458d4d992c78bae51609fc6a425f849d37c28cb9bc0344">llvm::CmpInst::FCMP_UGE</a></div><div class="ttdeci">@ FCMP_UGE</div><div class="ttdoc">1 0 1 1 True if unordered, greater than, or equal</div><div class="ttdef"><b>Definition:</b> <a href="InstrTypes_8h_source.html#l00733">InstrTypes.h:733</a></div></div>
<div class="ttc" id="aclassllvm_1_1Type_html_a1bc022868b23918efa44df511f4d5b61"><div class="ttname"><a href="classllvm_1_1Type.html#a1bc022868b23918efa44df511f4d5b61">llvm::Type::isVectorTy</a></div><div class="ttdeci">bool isVectorTy() const</div><div class="ttdoc">True if this is an instance of VectorType.</div><div class="ttdef"><b>Definition:</b> <a href="Type_8h_source.html#l00237">Type.h:237</a></div></div>
<div class="ttc" id="astructllvm_1_1BitTracker_html"><div class="ttname"><a href="structllvm_1_1BitTracker.html">llvm::BitTracker</a></div><div class="ttdef"><b>Definition:</b> <a href="BitTracker_8h_source.html#l00035">BitTracker.h:35</a></div></div>
<div class="ttc" id="anamespacellvm_1_1PatternMatch_html_a04353aa48874f9bda89ff9059cd1a5a6"><div class="ttname"><a href="namespacellvm_1_1PatternMatch.html#a04353aa48874f9bda89ff9059cd1a5a6">llvm::PatternMatch::m_Instruction</a></div><div class="ttdeci">bind_ty&lt; Instruction &gt; m_Instruction(Instruction *&amp;I)</div><div class="ttdoc">Match an instruction, capturing it if we match.</div><div class="ttdef"><b>Definition:</b> <a href="PatternMatch_8h_source.html#l00748">PatternMatch.h:748</a></div></div>
<div class="ttc" id="aHexagonCopyToCombine_8cpp_html_a1d40004718218dbdf06b496766299101"><div class="ttname"><a href="HexagonCopyToCombine_8cpp.html#a1d40004718218dbdf06b496766299101">TII</a></div><div class="ttdeci">const HexagonInstrInfo * TII</div><div class="ttdef"><b>Definition:</b> <a href="HexagonCopyToCombine_8cpp_source.html#l00129">HexagonCopyToCombine.cpp:129</a></div></div>
<div class="ttc" id="anamespacellvm_1_1PatternMatch_html_a2cbdca7c8267aac6914d674f8e81841b"><div class="ttname"><a href="namespacellvm_1_1PatternMatch.html#a2cbdca7c8267aac6914d674f8e81841b">llvm::PatternMatch::m_ZExt</a></div><div class="ttdeci">CastClass_match&lt; OpTy, Instruction::ZExt &gt; m_ZExt(const OpTy &amp;Op)</div><div class="ttdoc">Matches ZExt.</div><div class="ttdef"><b>Definition:</b> <a href="PatternMatch_8h_source.html#l01639">PatternMatch.h:1639</a></div></div>
<div class="ttc" id="anamespacellvm_1_1PatternMatch_html_ad191220adaaedcfba833985509a17452"><div class="ttname"><a href="namespacellvm_1_1PatternMatch.html#ad191220adaaedcfba833985509a17452">llvm::PatternMatch::m_c_Add</a></div><div class="ttdeci">BinaryOp_match&lt; LHS, RHS, Instruction::Add, true &gt; m_c_Add(const LHS &amp;L, const RHS &amp;R)</div><div class="ttdoc">Matches a Add with LHS and RHS in either order.</div><div class="ttdef"><b>Definition:</b> <a href="PatternMatch_8h_source.html#l02228">PatternMatch.h:2228</a></div></div>
<div class="ttc" id="aBuiltinGCs_8cpp_html_a7abf5fb4071cb25dbce06dfb5ee3c937"><div class="ttname"><a href="BuiltinGCs_8cpp.html#a7abf5fb4071cb25dbce06dfb5ee3c937">B</a></div><div class="ttdeci">static GCRegistry::Add&lt; OcamlGC &gt; B(&quot;ocaml&quot;, &quot;ocaml 3.10-compatible GC&quot;)</div></div>
<div class="ttc" id="anamespacellvm_1_1PatternMatch_html_a74a8221adbd09a9076a1ab471644b223"><div class="ttname"><a href="namespacellvm_1_1PatternMatch.html#a74a8221adbd09a9076a1ab471644b223">llvm::PatternMatch::m_MaxOrMin</a></div><div class="ttdeci">match_combine_or&lt; match_combine_or&lt; MaxMin_match&lt; ICmpInst, LHS, RHS, smax_pred_ty &gt;, MaxMin_match&lt; ICmpInst, LHS, RHS, smin_pred_ty &gt; &gt;, match_combine_or&lt; MaxMin_match&lt; ICmpInst, LHS, RHS, umax_pred_ty &gt;, MaxMin_match&lt; ICmpInst, LHS, RHS, umin_pred_ty &gt; &gt; &gt; m_MaxOrMin(const LHS &amp;L, const RHS &amp;R)</div><div class="ttdef"><b>Definition:</b> <a href="PatternMatch_8h_source.html#l01892">PatternMatch.h:1892</a></div></div>
<div class="ttc" id="aclassllvm_1_1Instruction_html_afa0b2fa29ba074f2b6ec9ac11163f2d9"><div class="ttname"><a href="classllvm_1_1Instruction.html#afa0b2fa29ba074f2b6ec9ac11163f2d9">llvm::Instruction::CastOps</a></div><div class="ttdeci">CastOps</div><div class="ttdef"><b>Definition:</b> <a href="IR_2Instruction_8h_source.html#l00801">Instruction.h:801</a></div></div>
<div class="ttc" id="anamespacellvm_1_1PatternMatch_html_af431ec215bba8bb9c56e7541d99920f2"><div class="ttname"><a href="namespacellvm_1_1PatternMatch.html#af431ec215bba8bb9c56e7541d99920f2">llvm::PatternMatch::m_FNeg</a></div><div class="ttdeci">FNeg_match&lt; OpTy &gt; m_FNeg(const OpTy &amp;X)</div><div class="ttdoc">Match 'fneg X' as 'fsub -0.0, X'.</div><div class="ttdef"><b>Definition:</b> <a href="PatternMatch_8h_source.html#l01063">PatternMatch.h:1063</a></div></div>
<div class="ttc" id="aclassllvm_1_1APFloat_html_a2b901c3a0625a7d7173e9bd4864e2775"><div class="ttname"><a href="classllvm_1_1APFloat.html#a2b901c3a0625a7d7173e9bd4864e2775">llvm::APFloat::isNegative</a></div><div class="ttdeci">bool isNegative() const</div><div class="ttdef"><b>Definition:</b> <a href="APFloat_8h_source.html#l01217">APFloat.h:1217</a></div></div>
<div class="ttc" id="aclassllvm_1_1Constant_html_a4d51384de6e1798bb6aa875aebeea9f0"><div class="ttname"><a href="classllvm_1_1Constant.html#a4d51384de6e1798bb6aa875aebeea9f0">llvm::Constant::getAllOnesValue</a></div><div class="ttdeci">static Constant * getAllOnesValue(Type *Ty)</div><div class="ttdef"><b>Definition:</b> <a href="Constants_8cpp_source.html#l00406">Constants.cpp:406</a></div></div>
<div class="ttc" id="aclassllvm_1_1BinaryOperator_html_a31bf07f3f61525486633bc1d0bbaf029"><div class="ttname"><a href="classllvm_1_1BinaryOperator.html#a31bf07f3f61525486633bc1d0bbaf029">llvm::BinaryOperator::getOpcode</a></div><div class="ttdeci">BinaryOps getOpcode() const</div><div class="ttdef"><b>Definition:</b> <a href="InstrTypes_8h_source.html#l00393">InstrTypes.h:393</a></div></div>
<div class="ttc" id="anamespacellvm_1_1PatternMatch_html_a677ac8d99ff3c2d32a95c21de9ed372c"><div class="ttname"><a href="namespacellvm_1_1PatternMatch.html#a677ac8d99ff3c2d32a95c21de9ed372c">llvm::PatternMatch::m_ConstantInt</a></div><div class="ttdeci">class_match&lt; ConstantInt &gt; m_ConstantInt()</div><div class="ttdoc">Match an arbitrary ConstantInt and ignore it.</div><div class="ttdef"><b>Definition:</b> <a href="PatternMatch_8h_source.html#l00145">PatternMatch.h:145</a></div></div>
<div class="ttc" id="aclassllvm_1_1Instruction_html"><div class="ttname"><a href="classllvm_1_1Instruction.html">llvm::Instruction</a></div><div class="ttdef"><b>Definition:</b> <a href="IR_2Instruction_8h_source.html#l00045">Instruction.h:46</a></div></div>
<div class="ttc" id="aclassllvm_1_1Type_html_a9f382207d841377156d4c7868b66b9a5"><div class="ttname"><a href="classllvm_1_1Type.html#a9f382207d841377156d4c7868b66b9a5">llvm::Type::getScalarSizeInBits</a></div><div class="ttdeci">unsigned getScalarSizeInBits() const LLVM_READONLY</div><div class="ttdoc">If this is a vector type, return the getPrimitiveSizeInBits value for the element type.</div><div class="ttdef"><b>Definition:</b> <a href="Type_8cpp_source.html#l00153">Type.cpp:153</a></div></div>
<div class="ttc" id="anamespacellvm_1_1PatternMatch_html_adc571425e9aecccf7ebf5fcc3c678d94"><div class="ttname"><a href="namespacellvm_1_1PatternMatch.html#adc571425e9aecccf7ebf5fcc3c678d94">llvm::PatternMatch::m_UMin</a></div><div class="ttdeci">MaxMin_match&lt; ICmpInst, LHS, RHS, umin_pred_ty &gt; m_UMin(const LHS &amp;L, const RHS &amp;R)</div><div class="ttdef"><b>Definition:</b> <a href="PatternMatch_8h_source.html#l01881">PatternMatch.h:1881</a></div></div>
<div class="ttc" id="aclassllvm_1_1APFloat_html_a28cbb0780286695406353e6a295e12c8"><div class="ttname"><a href="classllvm_1_1APFloat.html#a28cbb0780286695406353e6a295e12c8">llvm::APFloat::bitwiseIsEqual</a></div><div class="ttdeci">bool bitwiseIsEqual(const APFloat &amp;RHS) const</div><div class="ttdef"><b>Definition:</b> <a href="APFloat_8h_source.html#l01182">APFloat.h:1182</a></div></div>
<div class="ttc" id="anamespacellvm_html_a6626b9250a7ec4cc54a9e8ce78bc0cc3"><div class="ttname"><a href="namespacellvm.html#a6626b9250a7ec4cc54a9e8ce78bc0cc3">llvm::getInverseMinMaxFlavor</a></div><div class="ttdeci">SelectPatternFlavor getInverseMinMaxFlavor(SelectPatternFlavor SPF)</div><div class="ttdoc">Return the inverse minimum/maximum flavor of the specified flavor.</div><div class="ttdef"><b>Definition:</b> <a href="ValueTracking_8cpp_source.html#l06234">ValueTracking.cpp:6234</a></div></div>
<div class="ttc" id="aclassllvm_1_1InstCombinerImpl_html"><div class="ttname"><a href="classllvm_1_1InstCombinerImpl.html">llvm::InstCombinerImpl</a></div><div class="ttdef"><b>Definition:</b> <a href="InstCombineInternal_8h_source.html#l00060">InstCombineInternal.h:62</a></div></div>
<div class="ttc" id="allvm_2Support_2ErrorHandling_8h_html"><div class="ttname"><a href="llvm_2Support_2ErrorHandling_8h.html">ErrorHandling.h</a></div></div>
<div class="ttc" id="aclassllvm_1_1ConstantInt_html_a969709dd49c28865a482d8b870f87c46"><div class="ttname"><a href="classllvm_1_1ConstantInt.html#a969709dd49c28865a482d8b870f87c46">llvm::ConstantInt::get</a></div><div class="ttdeci">static Constant * get(Type *Ty, uint64_t V, bool IsSigned=false)</div><div class="ttdoc">If Ty is a vector type, return a Constant with a splat of the given value.</div><div class="ttdef"><b>Definition:</b> <a href="Constants_8cpp_source.html#l00901">Constants.cpp:901</a></div></div>
<div class="ttc" id="aInstCombineWorklist_8h_html"><div class="ttname"><a href="InstCombineWorklist_8h.html">InstCombineWorklist.h</a></div></div>
<div class="ttc" id="aclassllvm_1_1CmpInst_html_a2be3583dac92a031fa1458d4d992c78ba024db78a5ed74f64666f3ca4955e6eca"><div class="ttname"><a href="classllvm_1_1CmpInst.html#a2be3583dac92a031fa1458d4d992c78ba024db78a5ed74f64666f3ca4955e6eca">llvm::CmpInst::FCMP_OEQ</a></div><div class="ttdeci">@ FCMP_OEQ</div><div class="ttdoc">0 0 0 1 True if ordered and equal</div><div class="ttdef"><b>Definition:</b> <a href="InstrTypes_8h_source.html#l00723">InstrTypes.h:723</a></div></div>
<div class="ttc" id="anamespacellvm_1_1ms__demangle_html_afb795990ffc0cb7321e7d1eacc246324a3e679cff5b3a6f6f8f32aead541a0a12"><div class="ttname"><a href="namespacellvm_1_1ms__demangle.html#afb795990ffc0cb7321e7d1eacc246324a3e679cff5b3a6f6f8f32aead541a0a12">llvm::ms_demangle::QualifierMangleMode::Drop</a></div><div class="ttdeci">@ Drop</div></div>
<div class="ttc" id="aclassllvm_1_1CmpInst_html_a2be3583dac92a031fa1458d4d992c78ba326bee0a4a424cef21c1cf8adb8b8dd8"><div class="ttname"><a href="classllvm_1_1CmpInst.html#a2be3583dac92a031fa1458d4d992c78ba326bee0a4a424cef21c1cf8adb8b8dd8">llvm::CmpInst::FCMP_OLT</a></div><div class="ttdeci">@ FCMP_OLT</div><div class="ttdoc">0 1 0 0 True if ordered and less than</div><div class="ttdef"><b>Definition:</b> <a href="InstrTypes_8h_source.html#l00726">InstrTypes.h:726</a></div></div>
<div class="ttc" id="aclassllvm_1_1APInt_html_a7e8226e6453c8bcf7e5c06d28b1e207b"><div class="ttname"><a href="classllvm_1_1APInt.html#a7e8226e6453c8bcf7e5c06d28b1e207b">llvm::APInt::sle</a></div><div class="ttdeci">bool sle(const APInt &amp;RHS) const</div><div class="ttdoc">Signed less or equal comparison.</div><div class="ttdef"><b>Definition:</b> <a href="APInt_8h_source.html#l01259">APInt.h:1259</a></div></div>
<div class="ttc" id="aPatternMatch_8h_html"><div class="ttname"><a href="PatternMatch_8h.html">PatternMatch.h</a></div></div>
<div class="ttc" id="anamespacellvm_html_a71a4a4e0f6178682ef05a0d85891e5a9"><div class="ttname"><a href="namespacellvm.html#a71a4a4e0f6178682ef05a0d85891e5a9">llvm::impliesPoison</a></div><div class="ttdeci">bool impliesPoison(const Value *ValAssumedPoison, const Value *V)</div><div class="ttdoc">Return true if V is poison given that ValAssumedPoison is already poison.</div><div class="ttdef"><b>Definition:</b> <a href="ValueTracking_8cpp_source.html#l05098">ValueTracking.cpp:5098</a></div></div>
<div class="ttc" id="anamespacellvm_1_1pdb_html_a81a0fae24e6bdfe240da4249a8da5978a35ea4c99f863ce15ab2ba69d09942e0a"><div class="ttname"><a href="namespacellvm_1_1pdb.html#a81a0fae24e6bdfe240da4249a8da5978a35ea4c99f863ce15ab2ba69d09942e0a">llvm::pdb::DbgHeaderType::FPO</a></div><div class="ttdeci">@ FPO</div></div>
<div class="ttc" id="aclassllvm_1_1Type_html_a13e877ef779ba7a0688081079f4f9b03"><div class="ttname"><a href="classllvm_1_1Type.html#a13e877ef779ba7a0688081079f4f9b03">llvm::Type::getIntegerBitWidth</a></div><div class="ttdeci">unsigned getIntegerBitWidth() const</div><div class="ttdef"><b>Definition:</b> <a href="DerivedTypes_8h_source.html#l00096">DerivedTypes.h:96</a></div></div>
<div class="ttc" id="anamespacellvm_1_1PatternMatch_html_aaa1ec19d8da987f818acfcfd9111f480"><div class="ttname"><a href="namespacellvm_1_1PatternMatch.html#aaa1ec19d8da987f818acfcfd9111f480">llvm::PatternMatch::m_c_UMax</a></div><div class="ttdeci">MaxMin_match&lt; ICmpInst, LHS, RHS, umax_pred_ty, true &gt; m_c_UMax(const LHS &amp;L, const RHS &amp;R)</div><div class="ttdoc">Matches a UMax with LHS and RHS in either order.</div><div class="ttdef"><b>Definition:</b> <a href="PatternMatch_8h_source.html#l02305">PatternMatch.h:2305</a></div></div>
<div class="ttc" id="anamespacellvm_html_a6bf471c1030973649c2e426afc212097abfed1bd97e2e6b014cbe76e02930d54b"><div class="ttname"><a href="namespacellvm.html#a6bf471c1030973649c2e426afc212097abfed1bd97e2e6b014cbe76e02930d54b">llvm::SPF_SMIN</a></div><div class="ttdeci">@ SPF_SMIN</div><div class="ttdef"><b>Definition:</b> <a href="ValueTracking_8h_source.html#l00659">ValueTracking.h:659</a></div></div>
<div class="ttc" id="aType_8h_html"><div class="ttname"><a href="Type_8h.html">Type.h</a></div></div>
<div class="ttc" id="aclassllvm_1_1APInt_html_ab242ccd4f07a4c82ec8150971616b491"><div class="ttname"><a href="classllvm_1_1APInt.html#ab242ccd4f07a4c82ec8150971616b491">llvm::APInt::isAllOnesValue</a></div><div class="ttdeci">bool isAllOnesValue() const</div><div class="ttdoc">Determine if all bits are set.</div><div class="ttdef"><b>Definition:</b> <a href="APInt_8h_source.html#l00401">APInt.h:401</a></div></div>
<div class="ttc" id="aErlangGCPrinter_8cpp_html_a74b474c0616ab55c1d9487f11fd31d26"><div class="ttname"><a href="ErlangGCPrinter_8cpp.html#a74b474c0616ab55c1d9487f11fd31d26">X</a></div><div class="ttdeci">static GCMetadataPrinterRegistry::Add&lt; ErlangGCPrinter &gt; X(&quot;erlang&quot;, &quot;erlang-compatible garbage collector&quot;)</div></div>
<div class="ttc" id="anamespacellvm_1_1PatternMatch_html_aebdb2700a77d10ae6f0ce115e23d9f77"><div class="ttname"><a href="namespacellvm_1_1PatternMatch.html#aebdb2700a77d10ae6f0ce115e23d9f77">llvm::PatternMatch::m_One</a></div><div class="ttdeci">cst_pred_ty&lt; is_one &gt; m_One()</div><div class="ttdoc">Match an integer 1 or a vector with all elements equal to 1.</div><div class="ttdef"><b>Definition:</b> <a href="PatternMatch_8h_source.html#l00513">PatternMatch.h:513</a></div></div>
<div class="ttc" id="aclassllvm_1_1Instruction_html_a55743bd32282bf6f87aeb49237b1fb68"><div class="ttname"><a href="classllvm_1_1Instruction.html#a55743bd32282bf6f87aeb49237b1fb68">llvm::Instruction::isCommutative</a></div><div class="ttdeci">bool isCommutative() const LLVM_READONLY</div><div class="ttdoc">Return true if the instruction is commutative:</div><div class="ttdef"><b>Definition:</b> <a href="IR_2Instruction_8cpp_source.html#l00758">Instruction.cpp:758</a></div></div>
<div class="ttc" id="anamespacellvm_html_a636de400e4dd2bc090b729329a99e75b"><div class="ttname"><a href="namespacellvm.html#a636de400e4dd2bc090b729329a99e75b">llvm::maxnum</a></div><div class="ttdeci">LLVM_READONLY APFloat maxnum(const APFloat &amp;A, const APFloat &amp;B)</div><div class="ttdoc">Implements IEEE maxNum semantics.</div><div class="ttdef"><b>Definition:</b> <a href="APFloat_8h_source.html#l01309">APFloat.h:1309</a></div></div>
<div class="ttc" id="anamespacellvm_1_1PatternMatch_html_adf0290c7c322f0bf8b275d6b26410b52"><div class="ttname"><a href="namespacellvm_1_1PatternMatch.html#adf0290c7c322f0bf8b275d6b26410b52">llvm::PatternMatch::m_ExtractElt</a></div><div class="ttdeci">TwoOps_match&lt; Val_t, Idx_t, Instruction::ExtractElement &gt; m_ExtractElt(const Val_t &amp;Val, const Idx_t &amp;Idx)</div><div class="ttdoc">Matches ExtractElementInst.</div><div class="ttdef"><b>Definition:</b> <a href="PatternMatch_8h_source.html#l01502">PatternMatch.h:1502</a></div></div>
<div class="ttc" id="anamespacellvm_1_1PatternMatch_html_a321b8e5bfbda0da1e621822399fe3960"><div class="ttname"><a href="namespacellvm_1_1PatternMatch.html#a321b8e5bfbda0da1e621822399fe3960">llvm::PatternMatch::m_NSWAdd</a></div><div class="ttdeci">OverflowingBinaryOp_match&lt; LHS, RHS, Instruction::Add, OverflowingBinaryOperator::NoSignedWrap &gt; m_NSWAdd(const LHS &amp;L, const RHS &amp;R)</div><div class="ttdef"><b>Definition:</b> <a href="PatternMatch_8h_source.html#l01186">PatternMatch.h:1186</a></div></div>
<div class="ttc" id="anamespacellvm_1_1PatternMatch_html_ad5e60756e331a97669d11b5c9d8691a2"><div class="ttname"><a href="namespacellvm_1_1PatternMatch.html#ad5e60756e331a97669d11b5c9d8691a2">llvm::PatternMatch::m_Power2</a></div><div class="ttdeci">cst_pred_ty&lt; is_power2 &gt; m_Power2()</div><div class="ttdoc">Match an integer or vector power-of-2.</div><div class="ttdef"><b>Definition:</b> <a href="PatternMatch_8h_source.html#l00544">PatternMatch.h:544</a></div></div>
<div class="ttc" id="anamespacellvm_1_1PatternMatch_html_a82e2ea7f0ab67e33e22b3a2a188feaba"><div class="ttname"><a href="namespacellvm_1_1PatternMatch.html#a82e2ea7f0ab67e33e22b3a2a188feaba">llvm::PatternMatch::m_Xor</a></div><div class="ttdeci">BinaryOp_match&lt; LHS, RHS, Instruction::Xor &gt; m_Xor(const LHS &amp;L, const RHS &amp;R)</div><div class="ttdef"><b>Definition:</b> <a href="PatternMatch_8h_source.html#l01135">PatternMatch.h:1135</a></div></div>
<div class="ttc" id="aclassllvm_1_1APInt_html_aec662ee6ab1490a4cabebf2812e5b9ca"><div class="ttname"><a href="classllvm_1_1APInt.html#aec662ee6ab1490a4cabebf2812e5b9ca">llvm::APInt::getOneBitSet</a></div><div class="ttdeci">static APInt getOneBitSet(unsigned numBits, unsigned BitNo)</div><div class="ttdoc">Return an APInt with exactly one bit set in the result.</div><div class="ttdef"><b>Definition:</b> <a href="APInt_8h_source.html#l00593">APInt.h:593</a></div></div>
<div class="ttc" id="astructllvm_1_1SelectPatternResult_html"><div class="ttname"><a href="structllvm_1_1SelectPatternResult.html">llvm::SelectPatternResult</a></div><div class="ttdef"><b>Definition:</b> <a href="ValueTracking_8h_source.html#l00680">ValueTracking.h:680</a></div></div>
<div class="ttc" id="aclassllvm_1_1Instruction_html_a4ea9acbe7fd20332ea6ccdb0183d6395"><div class="ttname"><a href="classllvm_1_1Instruction.html#a4ea9acbe7fd20332ea6ccdb0183d6395">llvm::Instruction::andIRFlags</a></div><div class="ttdeci">void andIRFlags(const Value *V)</div><div class="ttdoc">Logical 'and' of any supported wrapping, exact, and fast-math flags of V and this instruction.</div><div class="ttdef"><b>Definition:</b> <a href="IR_2Instruction_8cpp_source.html#l00313">Instruction.cpp:313</a></div></div>
<div class="ttc" id="anamespacellvm_1_1PatternMatch_html_a92ad549d62e33f9f5b8c3bc4b510b365"><div class="ttname"><a href="namespacellvm_1_1PatternMatch.html#a92ad549d62e33f9f5b8c3bc4b510b365">llvm::PatternMatch::m_ZExtOrSelf</a></div><div class="ttdeci">match_combine_or&lt; CastClass_match&lt; OpTy, Instruction::ZExt &gt;, OpTy &gt; m_ZExtOrSelf(const OpTy &amp;Op)</div><div class="ttdef"><b>Definition:</b> <a href="PatternMatch_8h_source.html#l01645">PatternMatch.h:1645</a></div></div>
<div class="ttc" id="aclassllvm_1_1APInt_html_a70b776533a213161c23bacae02f07c7b"><div class="ttname"><a href="classllvm_1_1APInt.html#a70b776533a213161c23bacae02f07c7b">llvm::APInt::isOneValue</a></div><div class="ttdeci">bool isOneValue() const</div><div class="ttdoc">Determine if this is a value of 1.</div><div class="ttdef"><b>Definition:</b> <a href="APInt_8h_source.html#l00416">APInt.h:416</a></div></div>
<div class="ttc" id="aclassllvm_1_1ConstantExpr_html_af238147cf5453729781a0fcc7322e1c6"><div class="ttname"><a href="classllvm_1_1ConstantExpr.html#af238147cf5453729781a0fcc7322e1c6">llvm::ConstantExpr::getTrunc</a></div><div class="ttdeci">static Constant * getTrunc(Constant *C, Type *Ty, bool OnlyIfReduced=false)</div><div class="ttdef"><b>Definition:</b> <a href="Constants_8cpp_source.html#l02085">Constants.cpp:2085</a></div></div>
<div class="ttc" id="aBasicBlock_8h_html"><div class="ttname"><a href="BasicBlock_8h.html">BasicBlock.h</a></div></div>
<div class="ttc" id="aclassllvm_1_1APFloat_html"><div class="ttname"><a href="classllvm_1_1APFloat.html">llvm::APFloat</a></div><div class="ttdef"><b>Definition:</b> <a href="APFloat_8h_source.html#l00701">APFloat.h:701</a></div></div>
<div class="ttc" id="aclassllvm_1_1APInt_html_adafa9575780f9246d1df0b7e2a619356"><div class="ttname"><a href="classllvm_1_1APInt.html#adafa9575780f9246d1df0b7e2a619356">llvm::APInt::slt</a></div><div class="ttdeci">bool slt(const APInt &amp;RHS) const</div><div class="ttdoc">Signed less than comparison.</div><div class="ttdef"><b>Definition:</b> <a href="APInt_8h_source.html#l01224">APInt.h:1224</a></div></div>
<div class="ttc" id="aInstCombineSelect_8cpp_html_ae86843953575db0d4a34ba09ca5f2c76"><div class="ttname"><a href="InstCombineSelect_8cpp.html#ae86843953575db0d4a34ba09ca5f2c76">canonicalizeSaturatedSubtract</a></div><div class="ttdeci">static Value * canonicalizeSaturatedSubtract(const ICmpInst *ICI, const Value *TrueVal, const Value *FalseVal, InstCombiner::BuilderTy &amp;Builder)</div><div class="ttdoc">Transform patterns such as (a &gt; b) ? a - b : 0 into usub.sat(a, b).</div><div class="ttdef"><b>Definition:</b> <a href="InstCombineSelect_8cpp_source.html#l00721">InstCombineSelect.cpp:721</a></div></div>
<div class="ttc" id="anamespacellvm_1_1PatternMatch_html_ae77be336e228cf9aa00709a8606dfb98"><div class="ttname"><a href="namespacellvm_1_1PatternMatch.html#ae77be336e228cf9aa00709a8606dfb98">llvm::PatternMatch::m_Zero</a></div><div class="ttdeci">is_zero m_Zero()</div><div class="ttdoc">Match any null constant or a vector with all elements equal to 0.</div><div class="ttdef"><b>Definition:</b> <a href="PatternMatch_8h_source.html#l00535">PatternMatch.h:535</a></div></div>
<div class="ttc" id="anamespacellvm_1_1PatternMatch_html_a1b0e3cdd7316497baa075ef6fc21d2d4"><div class="ttname"><a href="namespacellvm_1_1PatternMatch.html#a1b0e3cdd7316497baa075ef6fc21d2d4">llvm::PatternMatch::m_NUWAdd</a></div><div class="ttdeci">OverflowingBinaryOp_match&lt; LHS, RHS, Instruction::Add, OverflowingBinaryOperator::NoUnsignedWrap &gt; m_NUWAdd(const LHS &amp;L, const RHS &amp;R)</div><div class="ttdef"><b>Definition:</b> <a href="PatternMatch_8h_source.html#l01219">PatternMatch.h:1219</a></div></div>
<div class="ttc" id="aclassllvm_1_1Constant_html"><div class="ttname"><a href="classllvm_1_1Constant.html">llvm::Constant</a></div><div class="ttdoc">This is an important base class in LLVM.</div><div class="ttdef"><b>Definition:</b> <a href="Constant_8h_source.html#l00041">Constant.h:41</a></div></div>
<div class="ttc" id="aclassllvm_1_1UnaryOperator_html_a9f731708e681757d51c4dc2a004873c8"><div class="ttname"><a href="classllvm_1_1UnaryOperator.html#a9f731708e681757d51c4dc2a004873c8">llvm::UnaryOperator::CreateFNegFMF</a></div><div class="ttdeci">static UnaryOperator * CreateFNegFMF(Value *Op, Instruction *FMFSource, const Twine &amp;Name=&quot;&quot;, Instruction *InsertBefore=nullptr)</div><div class="ttdef"><b>Definition:</b> <a href="InstrTypes_8h_source.html#l00165">InstrTypes.h:165</a></div></div>
<div class="ttc" id="anamespacellvm_1_1PatternMatch_html_a35a04e57f5de22ee102fc03558d5e6b1"><div class="ttname"><a href="namespacellvm_1_1PatternMatch.html#a35a04e57f5de22ee102fc03558d5e6b1">llvm::PatternMatch::m_ImmConstant</a></div><div class="ttdeci">match_combine_and&lt; class_match&lt; Constant &gt;, match_unless&lt; class_match&lt; ConstantExpr &gt; &gt; &gt; m_ImmConstant()</div><div class="ttdoc">Match an arbitrary immediate Constant and ignore it.</div><div class="ttdef"><b>Definition:</b> <a href="PatternMatch_8h_source.html#l00781">PatternMatch.h:781</a></div></div>
<div class="ttc" id="aclassllvm_1_1IRBuilderBase_html_a7ca3b58ad6dc93128afd44fbe61a1174"><div class="ttname"><a href="classllvm_1_1IRBuilderBase.html#a7ca3b58ad6dc93128afd44fbe61a1174">llvm::IRBuilderBase::CreateICmp</a></div><div class="ttdeci">Value * CreateICmp(CmpInst::Predicate P, Value *LHS, Value *RHS, const Twine &amp;Name=&quot;&quot;)</div><div class="ttdef"><b>Definition:</b> <a href="IRBuilder_8h_source.html#l02337">IRBuilder.h:2337</a></div></div>
<div class="ttc" id="aclassllvm_1_1ICmpInst_html"><div class="ttname"><a href="classllvm_1_1ICmpInst.html">llvm::ICmpInst</a></div><div class="ttdoc">This instruction compares its operands according to the predicate given to the constructor.</div><div class="ttdef"><b>Definition:</b> <a href="Instructions_8h_source.html#l01203">Instructions.h:1203</a></div></div>
<div class="ttc" id="aclassllvm_1_1ConstantExpr_html_a0bd26d8a07f226878a618ece056ff10c"><div class="ttname"><a href="classllvm_1_1ConstantExpr.html#a0bd26d8a07f226878a618ece056ff10c">llvm::ConstantExpr::getBinOpIdentity</a></div><div class="ttdeci">static Constant * getBinOpIdentity(unsigned Opcode, Type *Ty, bool AllowRHSConstant=false)</div><div class="ttdoc">Return the identity constant for a binary opcode.</div><div class="ttdef"><b>Definition:</b> <a href="Constants_8cpp_source.html#l02802">Constants.cpp:2802</a></div></div>
<div class="ttc" id="aclassllvm_1_1InstCombiner_html_a25129446fbad8ac355a52944904a1ec6"><div class="ttname"><a href="classllvm_1_1InstCombiner.html#a25129446fbad8ac355a52944904a1ec6">llvm::InstCombiner::AddOne</a></div><div class="ttdeci">static Constant * AddOne(Constant *C)</div><div class="ttdoc">Add one to a Constant.</div><div class="ttdef"><b>Definition:</b> <a href="InstCombiner_8h_source.html#l00200">InstCombiner.h:200</a></div></div>
<div class="ttc" id="aclassllvm_1_1Type_html_a83725435ece9bc12c40ceb34dbd1727c"><div class="ttname"><a href="classllvm_1_1Type.html#a83725435ece9bc12c40ceb34dbd1727c">llvm::Type::getWithNewBitWidth</a></div><div class="ttdeci">Type * getWithNewBitWidth(unsigned NewBitWidth) const</div><div class="ttdoc">Given an integer or vector type, change the lane bitwidth to NewBitwidth, whilst keeping the old numb...</div><div class="ttdef"><b>Definition:</b> <a href="DerivedTypes_8h_source.html#l00726">DerivedTypes.h:726</a></div></div>
<div class="ttc" id="aBuiltinGCs_8cpp_html_a9bf617fd3367180fb96cebccfaae8dfa"><div class="ttname"><a href="BuiltinGCs_8cpp.html#a9bf617fd3367180fb96cebccfaae8dfa">D</a></div><div class="ttdeci">static GCRegistry::Add&lt; StatepointGC &gt; D(&quot;statepoint-example&quot;, &quot;an example strategy for statepoint&quot;)</div></div>
<div class="ttc" id="anamespacellvm_1_1PatternMatch_html_a1a06b1cff93069d7403ea03e6150e386"><div class="ttname"><a href="namespacellvm_1_1PatternMatch.html#a1a06b1cff93069d7403ea03e6150e386">llvm::PatternMatch::m_LogicalOr</a></div><div class="ttdeci">LogicalOp_match&lt; LHS, RHS, Instruction::Or &gt; m_LogicalOr(const LHS &amp;L, const RHS &amp;R)</div><div class="ttdoc">Matches L || R either in the form of L | R or L ? true : R.</div><div class="ttdef"><b>Definition:</b> <a href="PatternMatch_8h_source.html#l02510">PatternMatch.h:2510</a></div></div>
<div class="ttc" id="aclassllvm_1_1InstCombiner_html_a17baa08df1b509edb0429cb2676e1079"><div class="ttname"><a href="classllvm_1_1InstCombiner.html#a17baa08df1b509edb0429cb2676e1079">llvm::InstCombiner::isCanonicalPredicate</a></div><div class="ttdeci">static bool isCanonicalPredicate(CmpInst::Predicate Pred)</div><div class="ttdoc">Predicate canonicalization reduces the number of patterns that need to be matched by other transforms...</div><div class="ttdef"><b>Definition:</b> <a href="InstCombiner_8h_source.html#l00143">InstCombiner.h:143</a></div></div>
<div class="ttc" id="aclassllvm_1_1APInt_html_aae3b959a0a2981340fd03c29f528f2f0"><div class="ttname"><a href="classllvm_1_1APInt.html#aae3b959a0a2981340fd03c29f528f2f0">llvm::APInt::logBase2</a></div><div class="ttdeci">unsigned logBase2() const</div><div class="ttdef"><b>Definition:</b> <a href="APInt_8h_source.html#l01811">APInt.h:1811</a></div></div>
<div class="ttc" id="anamespacellvm_1_1PatternMatch_html_a42569041ddafba7d40243e126af07f42"><div class="ttname"><a href="namespacellvm_1_1PatternMatch.html#a42569041ddafba7d40243e126af07f42">llvm::PatternMatch::m_Or</a></div><div class="ttdeci">BinaryOp_match&lt; LHS, RHS, Instruction::Or &gt; m_Or(const LHS &amp;L, const RHS &amp;R)</div><div class="ttdef"><b>Definition:</b> <a href="PatternMatch_8h_source.html#l01129">PatternMatch.h:1129</a></div></div>
<div class="ttc" id="anamespacellvm_1_1PatternMatch_html_aaea0d5ebb8b57ddde2095f80e2e94bb2"><div class="ttname"><a href="namespacellvm_1_1PatternMatch.html#aaea0d5ebb8b57ddde2095f80e2e94bb2">llvm::PatternMatch::m_AllOnes</a></div><div class="ttdeci">cst_pred_ty&lt; is_all_ones &gt; m_AllOnes()</div><div class="ttdoc">Match an integer or vector with all bits set.</div><div class="ttdef"><b>Definition:</b> <a href="PatternMatch_8h_source.html#l00445">PatternMatch.h:445</a></div></div>
<div class="ttc" id="aclassllvm_1_1Value_html_a72fb137716cff838d389e392b9729dc9"><div class="ttname"><a href="classllvm_1_1Value.html#a72fb137716cff838d389e392b9729dc9">llvm::Value::hasNUsesOrMore</a></div><div class="ttdeci">bool hasNUsesOrMore(unsigned N) const</div><div class="ttdoc">Return true if this value has N uses or more.</div><div class="ttdef"><b>Definition:</b> <a href="Value_8cpp_source.html#l00153">Value.cpp:153</a></div></div>
<div class="ttc" id="aclassllvm_1_1DenseMap_html"><div class="ttname"><a href="classllvm_1_1DenseMap.html">llvm::DenseMap</a></div><div class="ttdef"><b>Definition:</b> <a href="DenseMap_8h_source.html#l00714">DenseMap.h:715</a></div></div>
<div class="ttc" id="aMD5_8cpp_html_ac0eafdc9ee161b71e7af98af736952fd"><div class="ttname"><a href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a></div><div class="ttdeci">#define I(x, y, z)</div><div class="ttdef"><b>Definition:</b> <a href="MD5_8cpp_source.html#l00059">MD5.cpp:59</a></div></div>
<div class="ttc" id="aclassllvm_1_1GetElementPtrInst_html"><div class="ttname"><a href="classllvm_1_1GetElementPtrInst.html">llvm::GetElementPtrInst</a></div><div class="ttdoc">an instruction for type-safe pointer arithmetic to access elements of arrays and structs</div><div class="ttdef"><b>Definition:</b> <a href="Instructions_8h_source.html#l00928">Instructions.h:928</a></div></div>
<div class="ttc" id="aclassllvm_1_1SelectInst_html_a483700f6bf3ac62445850d768cf188f6"><div class="ttname"><a href="classllvm_1_1SelectInst.html#a483700f6bf3ac62445850d768cf188f6">llvm::SelectInst::getTrueValue</a></div><div class="ttdeci">const Value * getTrueValue() const</div><div class="ttdef"><b>Definition:</b> <a href="Instructions_8h_source.html#l01788">Instructions.h:1788</a></div></div>
<div class="ttc" id="anamespacellvm_1_1PatternMatch_html_aee515990e714a596e14ffe986e2d451d"><div class="ttname"><a href="namespacellvm_1_1PatternMatch.html#aee515990e714a596e14ffe986e2d451d">llvm::PatternMatch::m_MaskedLoad</a></div><div class="ttdeci">m_Intrinsic_Ty&lt; Opnd0, Opnd1, Opnd2, Opnd3 &gt;::Ty m_MaskedLoad(const Opnd0 &amp;Op0, const Opnd1 &amp;Op1, const Opnd2 &amp;Op2, const Opnd3 &amp;Op3)</div><div class="ttdoc">Matches MaskedLoad Intrinsic.</div><div class="ttdef"><b>Definition:</b> <a href="PatternMatch_8h_source.html#l02115">PatternMatch.h:2115</a></div></div>
<div class="ttc" id="anamespacellvm_1_1PatternMatch_html_a427435d4da769ae680a8e77ef89520aa"><div class="ttname"><a href="namespacellvm_1_1PatternMatch.html#a427435d4da769ae680a8e77ef89520aa">llvm::PatternMatch::m_And</a></div><div class="ttdeci">BinaryOp_match&lt; LHS, RHS, Instruction::And &gt; m_And(const LHS &amp;L, const RHS &amp;R)</div><div class="ttdef"><b>Definition:</b> <a href="PatternMatch_8h_source.html#l01123">PatternMatch.h:1123</a></div></div>
<div class="ttc" id="anamespacellvm_html_acd1cd968cb420c82d70926920fcdc7d7"><div class="ttname"><a href="namespacellvm.html#acd1cd968cb420c82d70926920fcdc7d7">llvm::is_contained</a></div><div class="ttdeci">bool is_contained(R &amp;&amp;Range, const E &amp;Element)</div><div class="ttdoc">Wrapper function around std::find to detect if an element exists in a container.</div><div class="ttdef"><b>Definition:</b> <a href="STLExtras_8h_source.html#l01599">STLExtras.h:1599</a></div></div>
<div class="ttc" id="aclassllvm_1_1GetElementPtrInst_html_a45d67d61fc2ab6079b6271f7b67edc7c"><div class="ttname"><a href="classllvm_1_1GetElementPtrInst.html#a45d67d61fc2ab6079b6271f7b67edc7c">llvm::GetElementPtrInst::getResultElementType</a></div><div class="ttdeci">Type * getResultElementType() const</div><div class="ttdef"><b>Definition:</b> <a href="Instructions_8h_source.html#l01026">Instructions.h:1026</a></div></div>
<div class="ttc" id="aclassllvm_1_1ICmpInst_html_abe8988eef2e6fc2baba032cb22afedd7"><div class="ttname"><a href="classllvm_1_1ICmpInst.html#abe8988eef2e6fc2baba032cb22afedd7">llvm::ICmpInst::isEquality</a></div><div class="ttdeci">static bool isEquality(Predicate P)</div><div class="ttdoc">Return true if this predicate is either EQ or NE.</div><div class="ttdef"><b>Definition:</b> <a href="Instructions_8h_source.html#l01292">Instructions.h:1292</a></div></div>
<div class="ttc" id="aInstCombineSelect_8cpp_html_acb4bb6f77172696150754bd732d07e30"><div class="ttname"><a href="InstCombineSelect_8cpp.html#acb4bb6f77172696150754bd732d07e30">foldSetClearBits</a></div><div class="ttdeci">static Instruction * foldSetClearBits(SelectInst &amp;Sel, InstCombiner::BuilderTy &amp;Builder)</div><div class="ttdoc">Canonicalize a set or clear of a masked set of constant bits to select-of-constants form.</div><div class="ttdef"><b>Definition:</b> <a href="InstCombineSelect_8cpp_source.html#l00688">InstCombineSelect.cpp:688</a></div></div>
<div class="ttc" id="aclassllvm_1_1GetElementPtrInst_html_a9a94c15dff322a963b566d486dd673b5"><div class="ttname"><a href="classllvm_1_1GetElementPtrInst.html#a9a94c15dff322a963b566d486dd673b5">llvm::GetElementPtrInst::CreateInBounds</a></div><div class="ttdeci">static GetElementPtrInst * CreateInBounds(Type *PointeeType, Value *Ptr, ArrayRef&lt; Value * &gt; IdxList, const Twine &amp;NameStr=&quot;&quot;, Instruction *InsertBefore=nullptr)</div><div class="ttdoc">Create an &quot;inbounds&quot; getelementptr.</div><div class="ttdef"><b>Definition:</b> <a href="Instructions_8h_source.html#l00990">Instructions.h:990</a></div></div>
<div class="ttc" id="anamespacellvm_html_aa1f8f0633edd8b9a1c5ec15bb9fc5640"><div class="ttname"><a href="namespacellvm.html#aa1f8f0633edd8b9a1c5ec15bb9fc5640">llvm::computeKnownBits</a></div><div class="ttdeci">void computeKnownBits(const Value *V, KnownBits &amp;Known, const DataLayout &amp;DL, unsigned Depth=0, AssumptionCache *AC=nullptr, const Instruction *CxtI=nullptr, const DominatorTree *DT=nullptr, OptimizationRemarkEmitter *ORE=nullptr, bool UseInstrInfo=true)</div><div class="ttdoc">Determine which bits of V are known to be either zero or one and return them in the KnownZero/KnownOn...</div><div class="ttdef"><b>Definition:</b> <a href="ValueTracking_8cpp_source.html#l00213">ValueTracking.cpp:213</a></div></div>
<div class="ttc" id="aIRBuilder_8h_html"><div class="ttname"><a href="IRBuilder_8h.html">IRBuilder.h</a></div></div>
<div class="ttc" id="aSILowerControlFlow_8cpp_html_a4868c5d81c5ccc98c47aeab6244346a0"><div class="ttname"><a href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a></div><div class="ttdeci">assert(ImpDefSCC.getReg()==AMDGPU::SCC &amp;&amp;ImpDefSCC.isDef())</div></div>
<div class="ttc" id="aclassllvm_1_1APInt_html_ae2b7d8c018c8a37fa8ea422a13bfd412"><div class="ttname"><a href="classllvm_1_1APInt.html#ae2b7d8c018c8a37fa8ea422a13bfd412">llvm::APInt::sge</a></div><div class="ttdeci">bool sge(const APInt &amp;RHS) const</div><div class="ttdoc">Signed greater or equal comparison.</div><div class="ttdef"><b>Definition:</b> <a href="APInt_8h_source.html#l01329">APInt.h:1329</a></div></div>
<div class="ttc" id="anamespacellvm_1_1PatternMatch_html_ac3ed5602889a22db44a16e1b97fac5b8"><div class="ttname"><a href="namespacellvm_1_1PatternMatch.html#ac3ed5602889a22db44a16e1b97fac5b8">llvm::PatternMatch::m_Sub</a></div><div class="ttdeci">BinaryOp_match&lt; LHS, RHS, Instruction::Sub &gt; m_Sub(const LHS &amp;L, const RHS &amp;R)</div><div class="ttdef"><b>Definition:</b> <a href="PatternMatch_8h_source.html#l01020">PatternMatch.h:1020</a></div></div>
<div class="ttc" id="anamespacellvm_html_a6bf471c1030973649c2e426afc212097a07d293fd946951d9655259c5e9b93356"><div class="ttname"><a href="namespacellvm.html#a6bf471c1030973649c2e426afc212097a07d293fd946951d9655259c5e9b93356">llvm::SPF_ABS</a></div><div class="ttdeci">@ SPF_ABS</div><div class="ttdoc">Floating point maxnum.</div><div class="ttdef"><b>Definition:</b> <a href="ValueTracking_8h_source.html#l00665">ValueTracking.h:665</a></div></div>
<div class="ttc" id="anamespacestd_html_ab8424022895aee3e366fb9a32f2883cb"><div class="ttname"><a href="namespacestd.html#ab8424022895aee3e366fb9a32f2883cb">std::swap</a></div><div class="ttdeci">void swap(llvm::BitVector &amp;LHS, llvm::BitVector &amp;RHS)</div><div class="ttdoc">Implement std::swap in terms of BitVector swap.</div><div class="ttdef"><b>Definition:</b> <a href="BitVector_8h_source.html#l00840">BitVector.h:840</a></div></div>
<div class="ttc" id="aPassBuilderBindings_8cpp_html_a0f79dad1efc582555a443cc11a8fa401"><div class="ttname"><a href="PassBuilderBindings_8cpp.html#a0f79dad1efc582555a443cc11a8fa401">SI</a></div><div class="ttdeci">StandardInstrumentations SI(Debug, VerifyEach)</div></div>
<div class="ttc" id="aclassllvm_1_1CmpInst_html_a2be3583dac92a031fa1458d4d992c78ba541533f34077bbbcfb703a90f6d2da9b"><div class="ttname"><a href="classllvm_1_1CmpInst.html#a2be3583dac92a031fa1458d4d992c78ba541533f34077bbbcfb703a90f6d2da9b">llvm::CmpInst::FCMP_OGE</a></div><div class="ttdeci">@ FCMP_OGE</div><div class="ttdoc">0 0 1 1 True if ordered and greater than or equal</div><div class="ttdef"><b>Definition:</b> <a href="InstrTypes_8h_source.html#l00725">InstrTypes.h:725</a></div></div>
<div class="ttc" id="aclassllvm_1_1User_html_a1f0b9358936e3e00c42a460abbfb2868"><div class="ttname"><a href="classllvm_1_1User.html#a1f0b9358936e3e00c42a460abbfb2868">llvm::User::replaceUsesOfWith</a></div><div class="ttdeci">void replaceUsesOfWith(Value *From, Value *To)</div><div class="ttdoc">Replace uses of one Value with another.</div><div class="ttdef"><b>Definition:</b> <a href="User_8cpp_source.html#l00021">User.cpp:21</a></div></div>
<div class="ttc" id="aclassllvm_1_1ConstantExpr_html_a49b69843927f7cd96d866768b3aec92b"><div class="ttname"><a href="classllvm_1_1ConstantExpr.html#a49b69843927f7cd96d866768b3aec92b">llvm::ConstantExpr::getCast</a></div><div class="ttdeci">static Constant * getCast(unsigned ops, Constant *C, Type *Ty, bool OnlyIfReduced=false)</div><div class="ttdoc">Convenience function for getting a Cast operation.</div><div class="ttdef"><b>Definition:</b> <a href="Constants_8cpp_source.html#l01978">Constants.cpp:1978</a></div></div>
<div class="ttc" id="aclassllvm_1_1CmpInst_html_a2be3583dac92a031fa1458d4d992c78ba573bcd571c938fce863525330bbfc4b8"><div class="ttname"><a href="classllvm_1_1CmpInst.html#a2be3583dac92a031fa1458d4d992c78ba573bcd571c938fce863525330bbfc4b8">llvm::CmpInst::ICMP_UGE</a></div><div class="ttdeci">@ ICMP_UGE</div><div class="ttdoc">unsigned greater or equal</div><div class="ttdef"><b>Definition:</b> <a href="InstrTypes_8h_source.html#l00744">InstrTypes.h:744</a></div></div>
<div class="ttc" id="allvm_2Support_2ErrorHandling_8h_html_ace243f5c25697a1107cce46626b3dc94"><div class="ttname"><a href="llvm_2Support_2ErrorHandling_8h.html#ace243f5c25697a1107cce46626b3dc94">llvm_unreachable</a></div><div class="ttdeci">#define llvm_unreachable(msg)</div><div class="ttdoc">Marks that the current location is not supposed to be reachable.</div><div class="ttdef"><b>Definition:</b> <a href="llvm_2Support_2ErrorHandling_8h_source.html#l00136">ErrorHandling.h:136</a></div></div>
<div class="ttc" id="aclassllvm_1_1SelectInst_html"><div class="ttname"><a href="classllvm_1_1SelectInst.html">llvm::SelectInst</a></div><div class="ttdoc">This class represents the LLVM 'select' instruction.</div><div class="ttdef"><b>Definition:</b> <a href="Instructions_8h_source.html#l01740">Instructions.h:1740</a></div></div>
<div class="ttc" id="anamespacellvm_1_1PatternMatch_html_adc96aac34b80bf17222592bce8f95079"><div class="ttname"><a href="namespacellvm_1_1PatternMatch.html#adc96aac34b80bf17222592bce8f95079">llvm::PatternMatch::m_WithOverflowInst</a></div><div class="ttdeci">bind_ty&lt; WithOverflowInst &gt; m_WithOverflowInst(WithOverflowInst *&amp;I)</div><div class="ttdoc">Match a with overflow intrinsic, capturing it if we match.</div><div class="ttdef"><b>Definition:</b> <a href="PatternMatch_8h_source.html#l00754">PatternMatch.h:754</a></div></div>
<div class="ttc" id="anamespacellvm_1_1PatternMatch_html_af16a6c9336ca2a17389ea709b45fe7f5"><div class="ttname"><a href="namespacellvm_1_1PatternMatch.html#af16a6c9336ca2a17389ea709b45fe7f5">llvm::PatternMatch::m_SMin</a></div><div class="ttdeci">MaxMin_match&lt; ICmpInst, LHS, RHS, smin_pred_ty &gt; m_SMin(const LHS &amp;L, const RHS &amp;R)</div><div class="ttdef"><b>Definition:</b> <a href="PatternMatch_8h_source.html#l01869">PatternMatch.h:1869</a></div></div>
<div class="ttc" id="aclassllvm_1_1SelectInst_html_a42c392f97e21ca9e5ab05520eaf9f99a"><div class="ttname"><a href="classllvm_1_1SelectInst.html#a42c392f97e21ca9e5ab05520eaf9f99a">llvm::SelectInst::swapValues</a></div><div class="ttdeci">void swapValues()</div><div class="ttdoc">Swap the true and false values of the select instruction.</div><div class="ttdef"><b>Definition:</b> <a href="Instructions_8h_source.html#l01800">Instructions.h:1800</a></div></div>
<div class="ttc" id="aclassllvm_1_1MDNode_html"><div class="ttname"><a href="classllvm_1_1MDNode.html">llvm::MDNode</a></div><div class="ttdoc">Metadata node.</div><div class="ttdef"><b>Definition:</b> <a href="Metadata_8h_source.html#l00897">Metadata.h:897</a></div></div>
<div class="ttc" id="anamespacellvm_1_1PatternMatch_html_aadd209ba7e1bfa8113a609e09a7fe62f"><div class="ttname"><a href="namespacellvm_1_1PatternMatch.html#aadd209ba7e1bfa8113a609e09a7fe62f">llvm::PatternMatch::m_Constant</a></div><div class="ttdeci">class_match&lt; Constant &gt; m_Constant()</div><div class="ttdoc">Match an arbitrary Constant and ignore it.</div><div class="ttdef"><b>Definition:</b> <a href="PatternMatch_8h_source.html#l00142">PatternMatch.h:142</a></div></div>
<div class="ttc" id="aclassllvm_1_1InstCombinerImpl_html_af242bb04f4f8c88bf95916327b7c0c37"><div class="ttname"><a href="classllvm_1_1InstCombinerImpl.html#af242bb04f4f8c88bf95916327b7c0c37">llvm::InstCombinerImpl::foldSelectExtConst</a></div><div class="ttdeci">Instruction * foldSelectExtConst(SelectInst &amp;Sel)</div></div>
<div class="ttc" id="aAssumeBundleBuilder_8cpp_html_afb136e0532bcaed86521b462e6538d62"><div class="ttname"><a href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a></div><div class="ttdeci">assume Assume Builder</div><div class="ttdef"><b>Definition:</b> <a href="AssumeBundleBuilder_8cpp_source.html#l00651">AssumeBundleBuilder.cpp:651</a></div></div>
<div class="ttc" id="anamespacellvm_1_1PatternMatch_html_a24bca8838396aa81b87de8e7ac774b19"><div class="ttname"><a href="namespacellvm_1_1PatternMatch.html#a24bca8838396aa81b87de8e7ac774b19">llvm::PatternMatch::m_Value</a></div><div class="ttdeci">class_match&lt; Value &gt; m_Value()</div><div class="ttdoc">Match an arbitrary value and ignore it.</div><div class="ttdef"><b>Definition:</b> <a href="PatternMatch_8h_source.html#l00076">PatternMatch.h:76</a></div></div>
<div class="ttc" id="aclassllvm_1_1ZExtInst_html"><div class="ttname"><a href="classllvm_1_1ZExtInst.html">llvm::ZExtInst</a></div><div class="ttdoc">This class represents zero extension of integer types.</div><div class="ttdef"><b>Definition:</b> <a href="Instructions_8h_source.html#l04758">Instructions.h:4758</a></div></div>
<div class="ttc" id="aclassllvm_1_1APInt_html"><div class="ttname"><a href="classllvm_1_1APInt.html">llvm::APInt</a></div><div class="ttdoc">Class for arbitrary precision integers.</div><div class="ttdef"><b>Definition:</b> <a href="APInt_8h_source.html#l00070">APInt.h:70</a></div></div>
<div class="ttc" id="aclassllvm_1_1User_html_a5fa9b8e1842b354f64c1ba6be0a4a17f"><div class="ttname"><a href="classllvm_1_1User.html#a5fa9b8e1842b354f64c1ba6be0a4a17f">llvm::User::setOperand</a></div><div class="ttdeci">void setOperand(unsigned i, Value *Val)</div><div class="ttdef"><b>Definition:</b> <a href="User_8h_source.html#l00174">User.h:174</a></div></div>
<div class="ttc" id="aclassllvm_1_1SetVector_html_a72d928b7fc2c5f2d56c6ac0265fd9c6e"><div class="ttname"><a href="classllvm_1_1SetVector.html#a72d928b7fc2c5f2d56c6ac0265fd9c6e">llvm::SetVector&lt; T, SmallVector&lt; T, N &gt;, SmallDenseSet&lt; T, N &gt; &gt;::insert</a></div><div class="ttdeci">bool insert(const value_type &amp;X)</div><div class="ttdoc">Insert a new element into the SetVector.</div><div class="ttdef"><b>Definition:</b> <a href="SetVector_8h_source.html#l00141">SetVector.h:141</a></div></div>
<div class="ttc" id="aclassllvm_1_1CmpInst_html_a2be3583dac92a031fa1458d4d992c78ba15ae464950ac676919c2f0c7aafc706c"><div class="ttname"><a href="classllvm_1_1CmpInst.html#a2be3583dac92a031fa1458d4d992c78ba15ae464950ac676919c2f0c7aafc706c">llvm::CmpInst::ICMP_SLT</a></div><div class="ttdeci">@ ICMP_SLT</div><div class="ttdoc">signed less than</div><div class="ttdef"><b>Definition:</b> <a href="InstrTypes_8h_source.html#l00749">InstrTypes.h:749</a></div></div>
<div class="ttc" id="aclassllvm_1_1CmpInst_html_ad73f009e1b3b060bcdf6c2c1dd86600e"><div class="ttname"><a href="classllvm_1_1CmpInst.html#ad73f009e1b3b060bcdf6c2c1dd86600e">llvm::CmpInst::isIntPredicate</a></div><div class="ttdeci">bool isIntPredicate() const</div><div class="ttdef"><b>Definition:</b> <a href="InstrTypes_8h_source.html#l00814">InstrTypes.h:814</a></div></div>
<div class="ttc" id="aclassllvm_1_1GetElementPtrInst_html_a74c47d18ecd4ca3399785e6ae07134dc"><div class="ttname"><a href="classllvm_1_1GetElementPtrInst.html#a74c47d18ecd4ca3399785e6ae07134dc">llvm::GetElementPtrInst::Create</a></div><div class="ttdeci">static GetElementPtrInst * Create(Type *PointeeType, Value *Ptr, ArrayRef&lt; Value * &gt; IdxList, const Twine &amp;NameStr=&quot;&quot;, Instruction *InsertBefore=nullptr)</div><div class="ttdef"><b>Definition:</b> <a href="Instructions_8h_source.html#l00954">Instructions.h:954</a></div></div>
<div class="ttc" id="anamespacellvm_1_1PatternMatch_html_aaab494a433fbb23bc68393ee8bcfc5ac"><div class="ttname"><a href="namespacellvm_1_1PatternMatch.html#aaab494a433fbb23bc68393ee8bcfc5ac">llvm::PatternMatch::m_SExt</a></div><div class="ttdeci">CastClass_match&lt; OpTy, Instruction::SExt &gt; m_SExt(const OpTy &amp;Op)</div><div class="ttdoc">Matches SExt.</div><div class="ttdef"><b>Definition:</b> <a href="PatternMatch_8h_source.html#l01633">PatternMatch.h:1633</a></div></div>
<div class="ttc" id="aInstCombineSelect_8cpp_html_ac688735a31429ba396e9252a4c49543e"><div class="ttname"><a href="InstCombineSelect_8cpp.html#ac688735a31429ba396e9252a4c49543e">foldSelectICmpAndOr</a></div><div class="ttdeci">static Value * foldSelectICmpAndOr(const ICmpInst *IC, Value *TrueVal, Value *FalseVal, InstCombiner::BuilderTy &amp;Builder)</div><div class="ttdoc">We want to turn: (select (icmp eq (and X, C1), 0), Y, (or Y, C2)) into: (or (shl (and X,...</div><div class="ttdef"><b>Definition:</b> <a href="InstCombineSelect_8cpp_source.html#l00596">InstCombineSelect.cpp:596</a></div></div>
<div class="ttc" id="anamespacellvm_1_1PatternMatch_html_a3acbd0be97863e3e03e3b85641254018"><div class="ttname"><a href="namespacellvm_1_1PatternMatch.html#a3acbd0be97863e3e03e3b85641254018">llvm::PatternMatch::m_SpecificInt</a></div><div class="ttdeci">specific_intval&lt; false &gt; m_SpecificInt(APInt V)</div><div class="ttdoc">Match a specific integer value or vector with all elements equal to the value.</div><div class="ttdef"><b>Definition:</b> <a href="PatternMatch_8h_source.html#l00885">PatternMatch.h:885</a></div></div>
<div class="ttc" id="anamespacellvm_1_1PatternMatch_html_a575c2299c6f145ba3a12efa20829db43"><div class="ttname"><a href="namespacellvm_1_1PatternMatch.html#a575c2299c6f145ba3a12efa20829db43">llvm::PatternMatch::m_CombineAnd</a></div><div class="ttdeci">match_combine_and&lt; LTy, RTy &gt; m_CombineAnd(const LTy &amp;L, const RTy &amp;R)</div><div class="ttdoc">Combine two pattern matchers matching L &amp;&amp; R.</div><div class="ttdef"><b>Definition:</b> <a href="PatternMatch_8h_source.html#l00216">PatternMatch.h:216</a></div></div>
<div class="ttc" id="aclassllvm_1_1ArrayRef_html"><div class="ttname"><a href="classllvm_1_1ArrayRef.html">llvm::ArrayRef&lt; int &gt;</a></div></div>
<div class="ttc" id="aclassllvm_1_1Instruction_html_a50b85ccf7f6033b54748b17753ad2253"><div class="ttname"><a href="classllvm_1_1Instruction.html#a50b85ccf7f6033b54748b17753ad2253">llvm::Instruction::getFastMathFlags</a></div><div class="ttdeci">FastMathFlags getFastMathFlags() const</div><div class="ttdoc">Convenience function for getting all the fast-math flags, which must be an operator which supports th...</div><div class="ttdef"><b>Definition:</b> <a href="IR_2Instruction_8cpp_source.html#l00280">Instruction.cpp:280</a></div></div>
<div class="ttc" id="aclassllvm_1_1BinaryOperator_html"><div class="ttname"><a href="classllvm_1_1BinaryOperator.html">llvm::BinaryOperator</a></div><div class="ttdef"><b>Definition:</b> <a href="InstrTypes_8h_source.html#l00189">InstrTypes.h:189</a></div></div>
<div class="ttc" id="aclassllvm_1_1APInt_html_ae324de5041feaf7eb8433221cdaca9aa"><div class="ttname"><a href="classllvm_1_1APInt.html#ae324de5041feaf7eb8433221cdaca9aa">llvm::APInt::ssub_ov</a></div><div class="ttdeci">APInt ssub_ov(const APInt &amp;RHS, bool &amp;Overflow) const</div><div class="ttdef"><b>Definition:</b> <a href="APInt_8cpp_source.html#l01972">APInt.cpp:1972</a></div></div>
<div class="ttc" id="aclassllvm_1_1APInt_html_a539bdb4fdbf46e0bfcefebf5ac6d21dd"><div class="ttname"><a href="classllvm_1_1APInt.html#a539bdb4fdbf46e0bfcefebf5ac6d21dd">llvm::APInt::getAllOnesValue</a></div><div class="ttdeci">static APInt getAllOnesValue(unsigned numBits)</div><div class="ttdoc">Get the all-ones value.</div><div class="ttdef"><b>Definition:</b> <a href="APInt_8h_source.html#l00567">APInt.h:567</a></div></div>
<div class="ttc" id="anamespacellvm_html_a61d13d6824ec46c31260a4fd0997eda0"><div class="ttname"><a href="namespacellvm.html#a61d13d6824ec46c31260a4fd0997eda0">llvm::any_of</a></div><div class="ttdeci">bool any_of(R &amp;&amp;range, UnaryPredicate P)</div><div class="ttdoc">Provide wrappers to std::any_of which take ranges instead of having to pass begin/end explicitly.</div><div class="ttdef"><b>Definition:</b> <a href="STLExtras_8h_source.html#l01541">STLExtras.h:1541</a></div></div>
<div class="ttc" id="anamespacellvm_1_1PatternMatch_html_abb22519fa3bf66d9e0bc6d1a733a5821"><div class="ttname"><a href="namespacellvm_1_1PatternMatch.html#abb22519fa3bf66d9e0bc6d1a733a5821">llvm::PatternMatch::m_SpecificInt_ICMP</a></div><div class="ttdeci">cst_pred_ty&lt; icmp_pred_with_threshold &gt; m_SpecificInt_ICMP(ICmpInst::Predicate Predicate, const APInt &amp;Threshold)</div><div class="ttdoc">Match an integer or vector with every element comparing 'pred' (eg/ne/...) to Threshold.</div><div class="ttdef"><b>Definition:</b> <a href="PatternMatch_8h_source.html#l00626">PatternMatch.h:626</a></div></div>
<div class="ttc" id="aBasicBlockSections_8cpp_html_a5fd0741d696f28faf65b33f6c6af8fda"><div class="ttname"><a href="BasicBlockSections_8cpp.html#a5fd0741d696f28faf65b33f6c6af8fda">Cond</a></div><div class="ttdeci">SmallVector&lt; MachineOperand, 4 &gt; Cond</div><div class="ttdef"><b>Definition:</b> <a href="BasicBlockSections_8cpp_source.html#l00167">BasicBlockSections.cpp:167</a></div></div>
<div class="ttc" id="anamespacellvm_1_1PatternMatch_html_adea6dc2e42baa345b97be48b0370313d"><div class="ttname"><a href="namespacellvm_1_1PatternMatch.html#adea6dc2e42baa345b97be48b0370313d">llvm::PatternMatch::m_Undef</a></div><div class="ttdeci">auto m_Undef()</div><div class="ttdoc">Match an arbitrary undef constant.</div><div class="ttdef"><b>Definition:</b> <a href="PatternMatch_8h_source.html#l00136">PatternMatch.h:136</a></div></div>
<div class="ttc" id="aclassllvm_1_1CmpInst_html_a2be3583dac92a031fa1458d4d992c78ba91d86a4753c8bd7624e01bf565d87f8e"><div class="ttname"><a href="classllvm_1_1CmpInst.html#a2be3583dac92a031fa1458d4d992c78ba91d86a4753c8bd7624e01bf565d87f8e">llvm::CmpInst::ICMP_ULT</a></div><div class="ttdeci">@ ICMP_ULT</div><div class="ttdoc">unsigned less than</div><div class="ttdef"><b>Definition:</b> <a href="InstrTypes_8h_source.html#l00745">InstrTypes.h:745</a></div></div>
<div class="ttc" id="aclassllvm_1_1Constant_html_acd530d0571f320d47d37e7ae51cf70ff"><div class="ttname"><a href="classllvm_1_1Constant.html#acd530d0571f320d47d37e7ae51cf70ff">llvm::Constant::getAggregateElement</a></div><div class="ttdeci">Constant * getAggregateElement(unsigned Elt) const</div><div class="ttdoc">For aggregates (struct/array/vector) return the constant that corresponds to the specified element if...</div><div class="ttdef"><b>Definition:</b> <a href="Constants_8cpp_source.html#l00422">Constants.cpp:422</a></div></div>
<div class="ttc" id="aclassllvm_1_1Value_html_a6393a2d4fe7e10b28a0dcc35f881567b"><div class="ttname"><a href="classllvm_1_1Value.html#a6393a2d4fe7e10b28a0dcc35f881567b">llvm::Value::getType</a></div><div class="ttdeci">Type * getType() const</div><div class="ttdoc">All values are typed, get the type of this value.</div><div class="ttdef"><b>Definition:</b> <a href="Value_8h_source.html#l00256">Value.h:256</a></div></div>
<div class="ttc" id="anamespacellvm_1_1PatternMatch_html_afd3e8a6706810fef8cdbaf1f9f40dfbd"><div class="ttname"><a href="namespacellvm_1_1PatternMatch.html#afd3e8a6706810fef8cdbaf1f9f40dfbd">llvm::PatternMatch::m_Shuffle</a></div><div class="ttdeci">TwoOps_match&lt; V1_t, V2_t, Instruction::ShuffleVector &gt; m_Shuffle(const V1_t &amp;v1, const V2_t &amp;v2)</div><div class="ttdoc">Matches ShuffleVectorInst independently of mask value.</div><div class="ttdef"><b>Definition:</b> <a href="PatternMatch_8h_source.html#l01561">PatternMatch.h:1561</a></div></div>
<div class="ttc" id="aREADME__ALTIVEC_8txt_html_a015846b6188ce15e08cd94c74a9df1a3"><div class="ttname"><a href="README__ALTIVEC_8txt.html#a015846b6188ce15e08cd94c74a9df1a3">A</a></div><div class="ttdeci">* A</div><div class="ttdef"><b>Definition:</b> <a href="README__ALTIVEC_8txt_source.html#l00089">README_ALTIVEC.txt:89</a></div></div>
<div class="ttc" id="aclassllvm_1_1Value_html_ab3fc0225d8aaf8434026c3573f961f2c"><div class="ttname"><a href="classllvm_1_1Value.html#ab3fc0225d8aaf8434026c3573f961f2c">llvm::Value::getContext</a></div><div class="ttdeci">LLVMContext &amp; getContext() const</div><div class="ttdoc">All values hold a context through their type.</div><div class="ttdef"><b>Definition:</b> <a href="Value_8cpp_source.html#l00979">Value.cpp:979</a></div></div>
<div class="ttc" id="aAArch64SLSHardening_8cpp_html_ad467c4ab9119043f9b7750ab986be61a"><div class="ttname"><a href="AArch64SLSHardening_8cpp.html#ad467c4ab9119043f9b7750ab986be61a">DL</a></div><div class="ttdeci">MachineBasicBlock MachineBasicBlock::iterator DebugLoc DL</div><div class="ttdef"><b>Definition:</b> <a href="AArch64SLSHardening_8cpp_source.html#l00076">AArch64SLSHardening.cpp:76</a></div></div>
<div class="ttc" id="alib_2Target_2ARM_2README_8txt_html_a1b45f45820a60c09244a87eb59824aec"><div class="ttname"><a href="lib_2Target_2ARM_2README_8txt.html#a1b45f45820a60c09244a87eb59824aec">S</a></div><div class="ttdeci">add sub stmia L5 ldr r0 bl L_printf $stub Instead of a and a wouldn t it be better to do three moves *Return an aggregate type is even return S</div><div class="ttdef"><b>Definition:</b> <a href="lib_2Target_2ARM_2README_8txt_source.html#l00211">README.txt:210</a></div></div>
<div class="ttc" id="aclassllvm_1_1WithOverflowInst_html"><div class="ttname"><a href="classllvm_1_1WithOverflowInst.html">llvm::WithOverflowInst</a></div><div class="ttdoc">Represents an op.with.overflow intrinsic.</div><div class="ttdef"><b>Definition:</b> <a href="IntrinsicInst_8h_source.html#l00567">IntrinsicInst.h:567</a></div></div>
<div class="ttc" id="aclassllvm_1_1APInt_html_a545e8d5dfa1688acea0d0e275b03682f"><div class="ttname"><a href="classllvm_1_1APInt.html#a545e8d5dfa1688acea0d0e275b03682f">llvm::APInt::ult</a></div><div class="ttdeci">bool ult(const APInt &amp;RHS) const</div><div class="ttdoc">Unsigned less than comparison.</div><div class="ttdef"><b>Definition:</b> <a href="APInt_8h_source.html#l01205">APInt.h:1205</a></div></div>
<div class="ttc" id="aclassllvm_1_1SExtInst_html"><div class="ttname"><a href="classllvm_1_1SExtInst.html">llvm::SExtInst</a></div><div class="ttdoc">This class represents a sign extension of integer types.</div><div class="ttdef"><b>Definition:</b> <a href="Instructions_8h_source.html#l04797">Instructions.h:4797</a></div></div>
<div class="ttc" id="aCompiler_8h_html_a9579881de06b1560d242d15171ca1b86"><div class="ttname"><a href="Compiler_8h.html#a9579881de06b1560d242d15171ca1b86">LLVM_FALLTHROUGH</a></div><div class="ttdeci">#define LLVM_FALLTHROUGH</div><div class="ttdoc">LLVM_FALLTHROUGH - Mark fallthrough cases in switch statements.</div><div class="ttdef"><b>Definition:</b> <a href="Compiler_8h_source.html#l00281">Compiler.h:281</a></div></div>
<div class="ttc" id="anamespacellvm_1_1PatternMatch_html_a38a6a25e425f94c9836dda96f3718593"><div class="ttname"><a href="namespacellvm_1_1PatternMatch.html#a38a6a25e425f94c9836dda96f3718593">llvm::PatternMatch::m_SMax</a></div><div class="ttdeci">MaxMin_match&lt; ICmpInst, LHS, RHS, smax_pred_ty &gt; m_SMax(const LHS &amp;L, const RHS &amp;R)</div><div class="ttdef"><b>Definition:</b> <a href="PatternMatch_8h_source.html#l01863">PatternMatch.h:1863</a></div></div>
<div class="ttc" id="aclassllvm_1_1Value_html_adb5c319f5905c1d3ca9eb5df546388c5"><div class="ttname"><a href="classllvm_1_1Value.html#adb5c319f5905c1d3ca9eb5df546388c5">llvm::Value::getName</a></div><div class="ttdeci">StringRef getName() const</div><div class="ttdoc">Return a constant reference to the value's name.</div><div class="ttdef"><b>Definition:</b> <a href="Value_8cpp_source.html#l00297">Value.cpp:297</a></div></div>
<div class="ttc" id="aclassllvm_1_1BasicBlock_html_a71a9eabc4318b2fc34f83b01dfee484b"><div class="ttname"><a href="classllvm_1_1BasicBlock.html#a71a9eabc4318b2fc34f83b01dfee484b">llvm::BasicBlock::getTerminator</a></div><div class="ttdeci">const Instruction * getTerminator() const LLVM_READONLY</div><div class="ttdoc">Returns the terminator instruction if the block is well formed or null if the block is not well forme...</div><div class="ttdef"><b>Definition:</b> <a href="BasicBlock_8cpp_source.html#l00148">BasicBlock.cpp:148</a></div></div>
<div class="ttc" id="aclassllvm_1_1CallBase_html_abc10b887caad109288ffceb230493a85"><div class="ttname"><a href="classllvm_1_1CallBase.html#abc10b887caad109288ffceb230493a85">llvm::CallBase::setArgOperand</a></div><div class="ttdeci">void setArgOperand(unsigned i, Value *v)</div><div class="ttdef"><b>Definition:</b> <a href="InstrTypes_8h_source.html#l01343">InstrTypes.h:1343</a></div></div>
<div class="ttc" id="anamespacellvm_1_1PatternMatch_html_a235364424b2c4c8261f4030681d9630b"><div class="ttname"><a href="namespacellvm_1_1PatternMatch.html#a235364424b2c4c8261f4030681d9630b">llvm::PatternMatch::m_OrdFMax</a></div><div class="ttdeci">MaxMin_match&lt; FCmpInst, LHS, RHS, ofmax_pred_ty &gt; m_OrdFMax(const LHS &amp;L, const RHS &amp;R)</div><div class="ttdoc">Match an 'ordered' floating point maximum function.</div><div class="ttdef"><b>Definition:</b> <a href="PatternMatch_8h_source.html#l01907">PatternMatch.h:1907</a></div></div>
<div class="ttc" id="aclassllvm_1_1ConstantInt_html_aa7cce62ac5cc6df09cce0535874336b7"><div class="ttname"><a href="classllvm_1_1ConstantInt.html#aa7cce62ac5cc6df09cce0535874336b7">llvm::ConstantInt::getFalse</a></div><div class="ttdeci">static ConstantInt * getFalse(LLVMContext &amp;Context)</div><div class="ttdef"><b>Definition:</b> <a href="Constants_8cpp_source.html#l00856">Constants.cpp:856</a></div></div>
<div class="ttc" id="anamespacellvm_1_1PatternMatch_html_a39ad7ce51b0add3af5ac2577d1b45c7b"><div class="ttname"><a href="namespacellvm_1_1PatternMatch.html#a39ad7ce51b0add3af5ac2577d1b45c7b">llvm::PatternMatch::m_c_SMax</a></div><div class="ttdeci">MaxMin_match&lt; ICmpInst, LHS, RHS, smax_pred_ty, true &gt; m_c_SMax(const LHS &amp;L, const RHS &amp;R)</div><div class="ttdoc">Matches an SMax with LHS and RHS in either order.</div><div class="ttdef"><b>Definition:</b> <a href="PatternMatch_8h_source.html#l02293">PatternMatch.h:2293</a></div></div>
<div class="ttc" id="aHexagonGenExtract_8cpp_html_a2510a160fea14eba093f818fd9230f25"><div class="ttname"><a href="HexagonGenExtract_8cpp.html#a2510a160fea14eba093f818fd9230f25">NeedAnd</a></div><div class="ttdeci">static cl::opt&lt; bool &gt; NeedAnd(&quot;extract-needand&quot;, cl::init(true), cl::Hidden, cl::desc(&quot;Require &amp; in extract patterns&quot;))</div></div>
<div class="ttc" id="anamespacellvm_1_1MCID_html_ab357441fcd1ea1f9b0d27c12700f6023a32dbd2c72a98eaee90e3ad5ef7b5af16"><div class="ttname"><a href="namespacellvm_1_1MCID.html#ab357441fcd1ea1f9b0d27c12700f6023a32dbd2c72a98eaee90e3ad5ef7b5af16">llvm::MCID::Select</a></div><div class="ttdeci">@ Select</div><div class="ttdef"><b>Definition:</b> <a href="MCInstrDesc_8h_source.html#l00162">MCInstrDesc.h:162</a></div></div>
<div class="ttc" id="aclassllvm_1_1Instruction_html_a5ca8aa62fa8b3fe5bc0e8fbe5d8b8b7a"><div class="ttname"><a href="classllvm_1_1Instruction.html#a5ca8aa62fa8b3fe5bc0e8fbe5d8b8b7a">llvm::Instruction::setFastMathFlags</a></div><div class="ttdeci">void setFastMathFlags(FastMathFlags FMF)</div><div class="ttdoc">Convenience function for setting multiple fast-math flags on this instruction, which must be an opera...</div><div class="ttdef"><b>Definition:</b> <a href="IR_2Instruction_8cpp_source.html#l00230">Instruction.cpp:230</a></div></div>
<div class="ttc" id="aclassllvm_1_1CmpInst_html_a2be3583dac92a031fa1458d4d992c78ba959268ceeae23abe5c9ad9e895669d0c"><div class="ttname"><a href="classllvm_1_1CmpInst.html#a2be3583dac92a031fa1458d4d992c78ba959268ceeae23abe5c9ad9e895669d0c">llvm::CmpInst::FCMP_UGT</a></div><div class="ttdeci">@ FCMP_UGT</div><div class="ttdoc">1 0 1 0 True if unordered or greater than</div><div class="ttdef"><b>Definition:</b> <a href="InstrTypes_8h_source.html#l00732">InstrTypes.h:732</a></div></div>
<div class="ttc" id="aConstant_8h_html"><div class="ttname"><a href="Constant_8h.html">Constant.h</a></div></div>
<div class="ttc" id="anamespacellvm_html_aa656aa475d13ec6a900414eadabe86b0"><div class="ttname"><a href="namespacellvm.html#aa656aa475d13ec6a900414eadabe86b0">llvm::minnum</a></div><div class="ttdeci">LLVM_READONLY APFloat minnum(const APFloat &amp;A, const APFloat &amp;B)</div><div class="ttdoc">Implements IEEE minNum semantics.</div><div class="ttdef"><b>Definition:</b> <a href="APFloat_8h_source.html#l01298">APFloat.h:1298</a></div></div>
<div class="ttc" id="aclassllvm_1_1InstCombinerImpl_html_ab0c0704d2d0aa45b859812aeb234b224"><div class="ttname"><a href="classllvm_1_1InstCombinerImpl.html#ab0c0704d2d0aa45b859812aeb234b224">llvm::InstCombinerImpl::foldSelectValueEquivalence</a></div><div class="ttdeci">Instruction * foldSelectValueEquivalence(SelectInst &amp;SI, ICmpInst &amp;ICI)</div></div>
<div class="ttc" id="anamespacellvm_html_aec255ef4fae19e320da9585657e25a1e"><div class="ttname"><a href="namespacellvm.html#aec255ef4fae19e320da9585657e25a1e">llvm::simplifyWithOpReplaced</a></div><div class="ttdeci">Value * simplifyWithOpReplaced(Value *V, Value *Op, Value *RepOp, const SimplifyQuery &amp;Q, bool AllowRefinement)</div><div class="ttdoc">See if V simplifies when its operand Op is replaced with RepOp.</div><div class="ttdef"><b>Definition:</b> <a href="InstructionSimplify_8cpp_source.html#l04011">InstructionSimplify.cpp:4011</a></div></div>
<div class="ttc" id="aclassllvm_1_1ConstantInt_html_a82dbbd8e3688b0bc1eedb338864d0d0c"><div class="ttname"><a href="classllvm_1_1ConstantInt.html#a82dbbd8e3688b0bc1eedb338864d0d0c">llvm::ConstantInt::getTrue</a></div><div class="ttdeci">static ConstantInt * getTrue(LLVMContext &amp;Context)</div><div class="ttdef"><b>Definition:</b> <a href="Constants_8cpp_source.html#l00849">Constants.cpp:849</a></div></div>
<div class="ttc" id="aclassllvm_1_1Constant_html_aa6574d526b3e38a28f688a7bb4325c2c"><div class="ttname"><a href="classllvm_1_1Constant.html#aa6574d526b3e38a28f688a7bb4325c2c">llvm::Constant::getNullValue</a></div><div class="ttdeci">static Constant * getNullValue(Type *Ty)</div><div class="ttdoc">Constructor to create a '0' constant of arbitrary type.</div><div class="ttdef"><b>Definition:</b> <a href="Constants_8cpp_source.html#l00348">Constants.cpp:348</a></div></div>
<div class="ttc" id="astructllvm_1_1KnownBits_html"><div class="ttname"><a href="structllvm_1_1KnownBits.html">llvm::KnownBits</a></div><div class="ttdef"><b>Definition:</b> <a href="KnownBits_8h_source.html#l00023">KnownBits.h:23</a></div></div>
<div class="ttc" id="anamespacellvm_html_ad4d2f143e181b60a4f70d791bbcba8b3"><div class="ttname"><a href="namespacellvm.html#ad4d2f143e181b60a4f70d791bbcba8b3">llvm::decomposeBitTestICmp</a></div><div class="ttdeci">bool decomposeBitTestICmp(Value *LHS, Value *RHS, CmpInst::Predicate &amp;Pred, Value *&amp;X, APInt &amp;Mask, bool LookThroughTrunc=true)</div><div class="ttdoc">Decompose an icmp into the form ((X &amp; Mask) pred 0) if possible.</div><div class="ttdef"><b>Definition:</b> <a href="CmpInstAnalysis_8cpp_source.html#l00066">CmpInstAnalysis.cpp:66</a></div></div>
<div class="ttc" id="aclassllvm_1_1ConstantExpr_html_afa29f0cd072ab9b3a2630681ffe5760f"><div class="ttname"><a href="classllvm_1_1ConstantExpr.html#afa29f0cd072ab9b3a2630681ffe5760f">llvm::ConstantExpr::getNeg</a></div><div class="ttdeci">static Constant * getNeg(Constant *C, bool HasNUW=false, bool HasNSW=false)</div><div class="ttdef"><b>Definition:</b> <a href="Constants_8cpp_source.html#l02661">Constants.cpp:2661</a></div></div>
<div class="ttc" id="astructllvm_1_1SelectPatternResult_html_a6af27f528f038a2334dd80b7c77246fe"><div class="ttname"><a href="structllvm_1_1SelectPatternResult.html#a6af27f528f038a2334dd80b7c77246fe">llvm::SelectPatternResult::Ordered</a></div><div class="ttdeci">bool Ordered</div><div class="ttdoc">Only applicable if Flavor is SPF_FMINNUM or SPF_FMAXNUM.</div><div class="ttdef"><b>Definition:</b> <a href="ValueTracking_8h_source.html#l00684">ValueTracking.h:684</a></div></div>
<div class="ttc" id="aclassllvm_1_1CastInst_html_a31d2885660f654b31d8741726c3ea8d9"><div class="ttname"><a href="classllvm_1_1CastInst.html#a31d2885660f654b31d8741726c3ea8d9">llvm::CastInst::CreateBitOrPointerCast</a></div><div class="ttdeci">static CastInst * CreateBitOrPointerCast(Value *S, Type *Ty, const Twine &amp;Name=&quot;&quot;, Instruction *InsertBefore=nullptr)</div><div class="ttdoc">Create a BitCast, a PtrToInt, or an IntToPTr cast instruction.</div><div class="ttdef"><b>Definition:</b> <a href="Instructions_8cpp_source.html#l03121">Instructions.cpp:3121</a></div></div>
<div class="ttc" id="aclassllvm_1_1BinaryOperator_html_af85efaaa4ecdbcac97c45c8351d826b7"><div class="ttname"><a href="classllvm_1_1BinaryOperator.html#af85efaaa4ecdbcac97c45c8351d826b7">llvm::BinaryOperator::CreateNUW</a></div><div class="ttdeci">static BinaryOperator * CreateNUW(BinaryOps Opc, Value *V1, Value *V2, const Twine &amp;Name=&quot;&quot;)</div><div class="ttdef"><b>Definition:</b> <a href="InstrTypes_8h_source.html#l00303">InstrTypes.h:303</a></div></div>
<div class="ttc" id="anamespacellvm_1_1AMDGPU_1_1SendMsg_html_a8594419a4ddfad2c9a79279c490e466d"><div class="ttname"><a href="namespacellvm_1_1AMDGPU_1_1SendMsg.html#a8594419a4ddfad2c9a79279c490e466d">llvm::AMDGPU::SendMsg::Op</a></div><div class="ttdeci">Op</div><div class="ttdef"><b>Definition:</b> <a href="SIDefines_8h_source.html#l00314">SIDefines.h:314</a></div></div>
<div class="ttc" id="aclassllvm_1_1Type_html_a34ee40bb2f4f5ece47ef19e5f1f57e3c"><div class="ttname"><a href="classllvm_1_1Type.html#a34ee40bb2f4f5ece47ef19e5f1f57e3c">llvm::Type::isIntOrIntVectorTy</a></div><div class="ttdeci">bool isIntOrIntVectorTy() const</div><div class="ttdoc">Return true if this is an integer type or a vector of integer types.</div><div class="ttdef"><b>Definition:</b> <a href="Type_8h_source.html#l00207">Type.h:207</a></div></div>
<div class="ttc" id="anamespacellvm_1_1PatternMatch_html_afd71f5991b2fcbd948c1d74e9eb7e1ee"><div class="ttname"><a href="namespacellvm_1_1PatternMatch.html#afd71f5991b2fcbd948c1d74e9eb7e1ee">llvm::PatternMatch::m_c_SMin</a></div><div class="ttdeci">MaxMin_match&lt; ICmpInst, LHS, RHS, smin_pred_ty, true &gt; m_c_SMin(const LHS &amp;L, const RHS &amp;R)</div><div class="ttdoc">Matches an SMin with LHS and RHS in either order.</div><div class="ttdef"><b>Definition:</b> <a href="PatternMatch_8h_source.html#l02287">PatternMatch.h:2287</a></div></div>
<div class="ttc" id="aclassllvm_1_1CmpInst_html_af206a3d6f58d9e53b074460f0d1ecb86"><div class="ttname"><a href="classllvm_1_1CmpInst.html#af206a3d6f58d9e53b074460f0d1ecb86">llvm::CmpInst::isUnsigned</a></div><div class="ttdeci">bool isUnsigned() const</div><div class="ttdef"><b>Definition:</b> <a href="InstrTypes_8h_source.html#l00940">InstrTypes.h:940</a></div></div>
<div class="ttc" id="aCasting_8h_html"><div class="ttname"><a href="Casting_8h.html">Casting.h</a></div></div>
<div class="ttc" id="anamespacellvm_html_abee0df5f7f703bb4462aba260ba0a60f"><div class="ttname"><a href="namespacellvm.html#abee0df5f7f703bb4462aba260ba0a60f">llvm::BitWidth</a></div><div class="ttdeci">constexpr unsigned BitWidth</div><div class="ttdef"><b>Definition:</b> <a href="BitmaskEnum_8h_source.html#l00147">BitmaskEnum.h:147</a></div></div>
<div class="ttc" id="aclassllvm_1_1DenseMapBase_html_a3d95cc2d359b8d9ed5bd9504b44930b5"><div class="ttname"><a href="classllvm_1_1DenseMapBase.html#a3d95cc2d359b8d9ed5bd9504b44930b5">llvm::DenseMapBase&lt; DenseMap&lt; KeyT, ValueT, DenseMapInfo&lt; KeyT &gt;, llvm::detail::DenseMapPair&lt; KeyT, ValueT &gt; &gt;, KeyT, ValueT, DenseMapInfo&lt; KeyT &gt;, llvm::detail::DenseMapPair&lt; KeyT, ValueT &gt; &gt;::size</a></div><div class="ttdeci">unsigned size() const</div><div class="ttdef"><b>Definition:</b> <a href="DenseMap_8h_source.html#l00100">DenseMap.h:100</a></div></div>
<div class="ttc" id="aclassllvm_1_1TargetLibraryInfo_html"><div class="ttname"><a href="classllvm_1_1TargetLibraryInfo.html">llvm::TargetLibraryInfo</a></div><div class="ttdoc">Provides information about what library functions are available for the current target.</div><div class="ttdef"><b>Definition:</b> <a href="TargetLibraryInfo_8h_source.html#l00219">TargetLibraryInfo.h:219</a></div></div>
<div class="ttc" id="aOverflowInstAnalysis_8h_html"><div class="ttname"><a href="OverflowInstAnalysis_8h.html">OverflowInstAnalysis.h</a></div></div>
<div class="ttc" id="aclassllvm_1_1InstCombinerImpl_html_a150e27c909deae4ac2ecb0c5f4751867"><div class="ttname"><a href="classllvm_1_1InstCombinerImpl.html#a150e27c909deae4ac2ecb0c5f4751867">llvm::InstCombinerImpl::visitSelectInst</a></div><div class="ttdeci">Instruction * visitSelectInst(SelectInst &amp;SI)</div></div>
<div class="ttc" id="anamespacellvm_1_1PatternMatch_html_a874d53817a4923de8e58af6b278c09b0"><div class="ttname"><a href="namespacellvm_1_1PatternMatch.html#a874d53817a4923de8e58af6b278c09b0">llvm::PatternMatch::m_ZeroInt</a></div><div class="ttdeci">cst_pred_ty&lt; is_zero_int &gt; m_ZeroInt()</div><div class="ttdoc">Match an integer 0 or a vector with all elements equal to 0.</div><div class="ttdef"><b>Definition:</b> <a href="PatternMatch_8h_source.html#l00522">PatternMatch.h:522</a></div></div>
<div class="ttc" id="aclassllvm_1_1CmpInst_html_a2be3583dac92a031fa1458d4d992c78bac1aa7b798ba11d2e497d5cce6ce6d3dc"><div class="ttname"><a href="classllvm_1_1CmpInst.html#a2be3583dac92a031fa1458d4d992c78bac1aa7b798ba11d2e497d5cce6ce6d3dc">llvm::CmpInst::ICMP_SGE</a></div><div class="ttdeci">@ ICMP_SGE</div><div class="ttdoc">signed greater or equal</div><div class="ttdef"><b>Definition:</b> <a href="InstrTypes_8h_source.html#l00748">InstrTypes.h:748</a></div></div>
<div class="ttc" id="anamespacellvm_1_1MCID_html_ab357441fcd1ea1f9b0d27c12700f6023a2b016c207343046b2bac45e69e76dcec"><div class="ttname"><a href="namespacellvm_1_1MCID.html#ab357441fcd1ea1f9b0d27c12700f6023a2b016c207343046b2bac45e69e76dcec">llvm::MCID::Add</a></div><div class="ttdeci">@ Add</div><div class="ttdef"><b>Definition:</b> <a href="MCInstrDesc_8h_source.html#l00183">MCInstrDesc.h:183</a></div></div>
<div class="ttc" id="aclassllvm_1_1CmpInst_html_a126a12b67fa620ad28ec0c919ca7a3e8"><div class="ttname"><a href="classllvm_1_1CmpInst.html#a126a12b67fa620ad28ec0c919ca7a3e8">llvm::CmpInst::setPredicate</a></div><div class="ttdeci">void setPredicate(Predicate P)</div><div class="ttdoc">Set the predicate for this instruction to the specified value.</div><div class="ttdef"><b>Definition:</b> <a href="InstrTypes_8h_source.html#l00799">InstrTypes.h:799</a></div></div>
<div class="ttc" id="aclassllvm_1_1APInt_html_a8f877403433892e14ff0c692cbe9efdf"><div class="ttname"><a href="classllvm_1_1APInt.html#a8f877403433892e14ff0c692cbe9efdf">llvm::APInt::getSignedMinValue</a></div><div class="ttdeci">static APInt getSignedMinValue(unsigned numBits)</div><div class="ttdoc">Gets minimum signed value of APInt for a specific bit width.</div><div class="ttdef"><b>Definition:</b> <a href="APInt_8h_source.html#l00550">APInt.h:550</a></div></div>
<div class="ttc" id="anamespacellvm_1_1AMDGPU_1_1Hwreg_html_a6467ebe1e09a75203dd5f14bdfe21d11"><div class="ttname"><a href="namespacellvm_1_1AMDGPU_1_1Hwreg.html#a6467ebe1e09a75203dd5f14bdfe21d11">llvm::AMDGPU::Hwreg::Width</a></div><div class="ttdeci">Width</div><div class="ttdef"><b>Definition:</b> <a href="SIDefines_8h_source.html#l00403">SIDefines.h:403</a></div></div>
<div class="ttc" id="aclassllvm_1_1Instruction_html_a9bfa7d72e5906c4ff9c7c04fcffcb354"><div class="ttname"><a href="classllvm_1_1Instruction.html#a9bfa7d72e5906c4ff9c7c04fcffcb354">llvm::Instruction::hasNoNaNs</a></div><div class="ttdeci">bool hasNoNaNs() const</div><div class="ttdoc">Determine whether the no-NaNs flag is set.</div><div class="ttdef"><b>Definition:</b> <a href="IR_2Instruction_8cpp_source.html#l00250">Instruction.cpp:250</a></div></div>
<div class="ttc" id="aclassllvm_1_1InstCombinerImpl_html_a4bd29d381405675f36964e4a5382dae4"><div class="ttname"><a href="classllvm_1_1InstCombinerImpl.html#a4bd29d381405675f36964e4a5382dae4">llvm::InstCombinerImpl::foldSelectOpOp</a></div><div class="ttdeci">Instruction * foldSelectOpOp(SelectInst &amp;SI, Instruction *TI, Instruction *FI)</div><div class="ttdoc">We have (select c, TI, FI), and we know that TI and FI have the same opcode.</div><div class="ttdef"><b>Definition:</b> <a href="InstCombineSelect_8cpp_source.html#l00264">InstCombineSelect.cpp:264</a></div></div>
<div class="ttc" id="aclassllvm_1_1IntrinsicInst_html"><div class="ttname"><a href="classllvm_1_1IntrinsicInst.html">llvm::IntrinsicInst</a></div><div class="ttdoc">A wrapper class for inspecting calls to intrinsic functions.</div><div class="ttdef"><b>Definition:</b> <a href="IntrinsicInst_8h_source.html#l00045">IntrinsicInst.h:45</a></div></div>
<div class="ttc" id="anamespacellvm_1_1PatternMatch_html_a595e5029858e33416e500bed9317d309"><div class="ttname"><a href="namespacellvm_1_1PatternMatch.html#a595e5029858e33416e500bed9317d309">llvm::PatternMatch::m_LogicalShift</a></div><div class="ttdeci">BinOpPred_match&lt; LHS, RHS, is_logical_shift_op &gt; m_LogicalShift(const LHS &amp;L, const RHS &amp;R)</div><div class="ttdoc">Matches logical shift operations.</div><div class="ttdef"><b>Definition:</b> <a href="PatternMatch_8h_source.html#l01321">PatternMatch.h:1321</a></div></div>
<div class="ttc" id="anamespacellvm_1_1PatternMatch_html_ab9370b798ae530641518075b0832723a"><div class="ttname"><a href="namespacellvm_1_1PatternMatch.html#ab9370b798ae530641518075b0832723a">llvm::PatternMatch::m_AnyZeroFP</a></div><div class="ttdeci">cstfp_pred_ty&lt; is_any_zero_fp &gt; m_AnyZeroFP()</div><div class="ttdoc">Match a floating-point negative zero or positive zero.</div><div class="ttdef"><b>Definition:</b> <a href="PatternMatch_8h_source.html#l00696">PatternMatch.h:696</a></div></div>
<div class="ttc" id="aclassllvm_1_1APInt_html_aba0bb0cce2530e8403a18f1bbd6ae610"><div class="ttname"><a href="classllvm_1_1APInt.html#aba0bb0cce2530e8403a18f1bbd6ae610">llvm::APInt::isNullValue</a></div><div class="ttdeci">bool isNullValue() const</div><div class="ttdoc">Determine if all bits are clear.</div><div class="ttdef"><b>Definition:</b> <a href="APInt_8h_source.html#l00411">APInt.h:411</a></div></div>
<div class="ttc" id="aclassllvm_1_1InstCombinerImpl_html_a250c29896fae99b9235d23f7254b8809"><div class="ttname"><a href="classllvm_1_1InstCombinerImpl.html#a250c29896fae99b9235d23f7254b8809">llvm::InstCombinerImpl::replaceOperand</a></div><div class="ttdeci">Instruction * replaceOperand(Instruction &amp;I, unsigned OpNum, Value *V)</div><div class="ttdoc">Replace operand of instruction and add old operand to the worklist.</div><div class="ttdef"><b>Definition:</b> <a href="InstCombineInternal_8h_source.html#l00418">InstCombineInternal.h:418</a></div></div>
<div class="ttc" id="anamespacellvm_1_1PatternMatch_html_a8e7f8525228484fa6149f800fe4ce505"><div class="ttname"><a href="namespacellvm_1_1PatternMatch.html#a8e7f8525228484fa6149f800fe4ce505">llvm::PatternMatch::m_ConstantExpr</a></div><div class="ttdeci">class_match&lt; ConstantExpr &gt; m_ConstantExpr()</div><div class="ttdoc">Match an arbitrary ConstantExpr and ignore it.</div><div class="ttdef"><b>Definition:</b> <a href="PatternMatch_8h_source.html#l00155">PatternMatch.h:155</a></div></div>
<div class="ttc" id="aclassllvm_1_1ShuffleVectorInst_html"><div class="ttname"><a href="classllvm_1_1ShuffleVectorInst.html">llvm::ShuffleVectorInst</a></div><div class="ttdoc">This instruction constructs a fixed permutation of two input vectors.</div><div class="ttdef"><b>Definition:</b> <a href="Instructions_8h_source.html#l02011">Instructions.h:2011</a></div></div>
<div class="ttc" id="anamespacellvm_html_ae23e16c67aeaf23c68bf86fe04df42ee"><div class="ttname"><a href="namespacellvm.html#ae23e16c67aeaf23c68bf86fe04df42ee">llvm::CannotBeNegativeZero</a></div><div class="ttdeci">bool CannotBeNegativeZero(const Value *V, const TargetLibraryInfo *TLI, unsigned Depth=0)</div><div class="ttdoc">Return true if we can prove that the specified FP value is never equal to -0.0.</div><div class="ttdef"><b>Definition:</b> <a href="ValueTracking_8cpp_source.html#l03440">ValueTracking.cpp:3440</a></div></div>
<div class="ttc" id="aInstructions_8h_html"><div class="ttname"><a href="Instructions_8h.html">Instructions.h</a></div></div>
<div class="ttc" id="aclassllvm_1_1User_html_addec638786f763d967811b45cb662f1f"><div class="ttname"><a href="classllvm_1_1User.html#addec638786f763d967811b45cb662f1f">llvm::User::getNumOperands</a></div><div class="ttdeci">unsigned getNumOperands() const</div><div class="ttdef"><b>Definition:</b> <a href="User_8h_source.html#l00191">User.h:191</a></div></div>
<div class="ttc" id="anamespacellvm_1_1PatternMatch_html_a1955ef05e08a44c7e45ea15eedf7a33e"><div class="ttname"><a href="namespacellvm_1_1PatternMatch.html#a1955ef05e08a44c7e45ea15eedf7a33e">llvm::PatternMatch::m_AnyIntegralConstant</a></div><div class="ttdeci">cst_pred_ty&lt; is_any_apint &gt; m_AnyIntegralConstant()</div><div class="ttdoc">Match an integer or vector with any integral constant.</div><div class="ttdef"><b>Definition:</b> <a href="PatternMatch_8h_source.html#l00436">PatternMatch.h:436</a></div></div>
<div class="ttc" id="aSmallVector_8h_html"><div class="ttname"><a href="SmallVector_8h.html">SmallVector.h</a></div></div>
<div class="ttc" id="anamespacellvm_1_1PatternMatch_html_a2d9861feadd3a09792967a012559e7b2"><div class="ttname"><a href="namespacellvm_1_1PatternMatch.html#a2d9861feadd3a09792967a012559e7b2">llvm::PatternMatch::m_Specific</a></div><div class="ttdeci">specificval_ty m_Specific(const Value *V)</div><div class="ttdoc">Match if we have a specific specified value.</div><div class="ttdef"><b>Definition:</b> <a href="PatternMatch_8h_source.html#l00802">PatternMatch.h:802</a></div></div>
<div class="ttc" id="aUser_8h_html"><div class="ttname"><a href="User_8h.html">User.h</a></div></div>
<div class="ttc" id="anamespacellvm_1_1PatternMatch_html_a3fe9b3ddb71b9fb53d9fc74b3a0710bf"><div class="ttname"><a href="namespacellvm_1_1PatternMatch.html#a3fe9b3ddb71b9fb53d9fc74b3a0710bf">llvm::PatternMatch::m_ICmp</a></div><div class="ttdeci">CmpClass_match&lt; LHS, RHS, ICmpInst, ICmpInst::Predicate &gt; m_ICmp(ICmpInst::Predicate &amp;Pred, const LHS &amp;L, const RHS &amp;R)</div><div class="ttdef"><b>Definition:</b> <a href="PatternMatch_8h_source.html#l01404">PatternMatch.h:1404</a></div></div>
<div class="ttc" id="aclassllvm_1_1Value_html_a159bf794249e0567baf2a2a714d5c679"><div class="ttname"><a href="classllvm_1_1Value.html#a159bf794249e0567baf2a2a714d5c679">llvm::Value::DoPHITranslation</a></div><div class="ttdeci">const Value * DoPHITranslation(const BasicBlock *CurBB, const BasicBlock *PredBB) const</div><div class="ttdoc">Translate PHI node to its predecessor from the given basic block.</div><div class="ttdef"><b>Definition:</b> <a href="Value_8cpp_source.html#l00971">Value.cpp:971</a></div></div>
<div class="ttc" id="aclassllvm_1_1CmpInst_html_a2be3583dac92a031fa1458d4d992c78ba607cecdc5172814382033e001ed11fad"><div class="ttname"><a href="classllvm_1_1CmpInst.html#a2be3583dac92a031fa1458d4d992c78ba607cecdc5172814382033e001ed11fad">llvm::CmpInst::ICMP_UGT</a></div><div class="ttdeci">@ ICMP_UGT</div><div class="ttdoc">unsigned greater than</div><div class="ttdef"><b>Definition:</b> <a href="InstrTypes_8h_source.html#l00743">InstrTypes.h:743</a></div></div>
<div class="ttc" id="aclassllvm_1_1CmpInst_html_a2be3583dac92a031fa1458d4d992c78bad601460c9371d0f0ada5ae006bdba2bd"><div class="ttname"><a href="classllvm_1_1CmpInst.html#a2be3583dac92a031fa1458d4d992c78bad601460c9371d0f0ada5ae006bdba2bd">llvm::CmpInst::FCMP_UNE</a></div><div class="ttdeci">@ FCMP_UNE</div><div class="ttdoc">1 1 1 0 True if unordered or not equal</div><div class="ttdef"><b>Definition:</b> <a href="InstrTypes_8h_source.html#l00736">InstrTypes.h:736</a></div></div>
<div class="ttc" id="aclassllvm_1_1CallBase_html_ab2caa29167597390ab2fc3cf30d70389"><div class="ttname"><a href="classllvm_1_1CallBase.html#ab2caa29167597390ab2fc3cf30d70389">llvm::CallBase::getArgOperand</a></div><div class="ttdeci">Value * getArgOperand(unsigned i) const</div><div class="ttdef"><b>Definition:</b> <a href="InstrTypes_8h_source.html#l01338">InstrTypes.h:1338</a></div></div>
<div class="ttc" id="aclassllvm_1_1FreezeInst_html"><div class="ttname"><a href="classllvm_1_1FreezeInst.html">llvm::FreezeInst</a></div><div class="ttdoc">This class represents a freeze function that returns random concrete value if an operand is either a ...</div><div class="ttdef"><b>Definition:</b> <a href="Instructions_8h_source.html#l05324">Instructions.h:5324</a></div></div>
<div class="ttc" id="anamespacellvm_html_a6bf471c1030973649c2e426afc212097a6afb3549f5028760be1bbf8ae7c04d73"><div class="ttname"><a href="namespacellvm.html#a6bf471c1030973649c2e426afc212097a6afb3549f5028760be1bbf8ae7c04d73">llvm::SPF_UMIN</a></div><div class="ttdeci">@ SPF_UMIN</div><div class="ttdoc">Signed minimum.</div><div class="ttdef"><b>Definition:</b> <a href="ValueTracking_8h_source.html#l00660">ValueTracking.h:660</a></div></div>
<div class="ttc" id="aclassllvm_1_1Instruction_html_a1a7f07aaef6a3bee130bf0e0f0536802"><div class="ttname"><a href="classllvm_1_1Instruction.html#a1a7f07aaef6a3bee130bf0e0f0536802">llvm::Instruction::getParent</a></div><div class="ttdeci">const BasicBlock * getParent() const</div><div class="ttdef"><b>Definition:</b> <a href="IR_2Instruction_8h_source.html#l00094">Instruction.h:94</a></div></div>
<div class="ttc" id="aInstructionSimplify_8h_html"><div class="ttname"><a href="InstructionSimplify_8h.html">InstructionSimplify.h</a></div></div>
<div class="ttc" id="aclassllvm_1_1CmpInst_html_aa7414ba9f658ff1287d22a4b8fe81bcb"><div class="ttname"><a href="classllvm_1_1CmpInst.html#aa7414ba9f658ff1287d22a4b8fe81bcb">llvm::CmpInst::getPredicate</a></div><div class="ttdeci">Predicate getPredicate() const</div><div class="ttdoc">Return the predicate for this instruction.</div><div class="ttdef"><b>Definition:</b> <a href="InstrTypes_8h_source.html#l00796">InstrTypes.h:796</a></div></div>
<div class="ttc" id="anamespacellvm_html_a493bd393688f22538e5de34117e70236"><div class="ttname"><a href="namespacellvm.html#a493bd393688f22538e5de34117e70236">llvm::getMinMaxPred</a></div><div class="ttdeci">CmpInst::Predicate getMinMaxPred(SelectPatternFlavor SPF, bool Ordered=false)</div><div class="ttdoc">Return the canonical comparison predicate for the specified minimum/maximum flavor.</div><div class="ttdef"><b>Definition:</b> <a href="ValueTracking_8cpp_source.html#l06222">ValueTracking.cpp:6222</a></div></div>
<div class="ttc" id="aclassllvm_1_1InstCombinerImpl_html_ae649c0c42fe347f09ad971bb4ad8f35b"><div class="ttname"><a href="classllvm_1_1InstCombinerImpl.html#ae649c0c42fe347f09ad971bb4ad8f35b">llvm::InstCombinerImpl::foldVectorSelect</a></div><div class="ttdeci">Instruction * foldVectorSelect(SelectInst &amp;Sel)</div></div>
<div class="ttc" id="anamespacellvm_1_1PatternMatch_html_ab50076cb704b1bd42c536d9f51c5100e"><div class="ttname"><a href="namespacellvm_1_1PatternMatch.html#ab50076cb704b1bd42c536d9f51c5100e">llvm::PatternMatch::m_NSWNeg</a></div><div class="ttdeci">OverflowingBinaryOp_match&lt; cst_pred_ty&lt; is_zero_int &gt;, ValTy, Instruction::Sub, OverflowingBinaryOperator::NoSignedWrap &gt; m_NSWNeg(const ValTy &amp;V)</div><div class="ttdoc">Matches a 'Neg' as 'sub nsw 0, V'.</div><div class="ttdef"><b>Definition:</b> <a href="PatternMatch_8h_source.html#l02273">PatternMatch.h:2273</a></div></div>
<div class="ttc" id="aclassllvm_1_1Instruction_html_a6e324daba99cb1d67713a562f9a778d2"><div class="ttname"><a href="classllvm_1_1Instruction.html#a6e324daba99cb1d67713a562f9a778d2">llvm::Instruction::swapProfMetadata</a></div><div class="ttdeci">void swapProfMetadata()</div><div class="ttdoc">If the instruction has &quot;branch_weights&quot; MD_prof metadata and the MDNode has three operands (including...</div><div class="ttdef"><b>Definition:</b> <a href="IR_2Instruction_8cpp_source.html#l00812">Instruction.cpp:812</a></div></div>
<div class="ttc" id="aclassllvm_1_1PHINode_html"><div class="ttname"><a href="classllvm_1_1PHINode.html">llvm::PHINode</a></div><div class="ttdef"><b>Definition:</b> <a href="Instructions_8h_source.html#l02597">Instructions.h:2597</a></div></div>
<div class="ttc" id="aclassllvm_1_1Instruction_html_a3e6d2896c39a84cfa6c47f34cdc584ff"><div class="ttname"><a href="classllvm_1_1Instruction.html#a3e6d2896c39a84cfa6c47f34cdc584ff">llvm::Instruction::copyIRFlags</a></div><div class="ttdeci">void copyIRFlags(const Value *V, bool IncludeWrapFlags=true)</div><div class="ttdoc">Convenience method to copy supported exact, fast-math, and (optionally) wrapping flags from V to this...</div><div class="ttdef"><b>Definition:</b> <a href="IR_2Instruction_8cpp_source.html#l00289">Instruction.cpp:289</a></div></div>
<div class="ttc" id="aclassllvm_1_1CmpInst_html_a2be3583dac92a031fa1458d4d992c78ba9835cfe02fb5027680bd7203b024f77a"><div class="ttname"><a href="classllvm_1_1CmpInst.html#a2be3583dac92a031fa1458d4d992c78ba9835cfe02fb5027680bd7203b024f77a">llvm::CmpInst::FCMP_OLE</a></div><div class="ttdeci">@ FCMP_OLE</div><div class="ttdoc">0 1 0 1 True if ordered and less than or equal</div><div class="ttdef"><b>Definition:</b> <a href="InstrTypes_8h_source.html#l00727">InstrTypes.h:727</a></div></div>
<div class="ttc" id="anamespacellvm_1_1PatternMatch_html_a5772946ca265c6a5c951cb331983daa5"><div class="ttname"><a href="namespacellvm_1_1PatternMatch.html#a5772946ca265c6a5c951cb331983daa5">llvm::PatternMatch::m_FCmp</a></div><div class="ttdeci">CmpClass_match&lt; LHS, RHS, FCmpInst, FCmpInst::Predicate &gt; m_FCmp(FCmpInst::Predicate &amp;Pred, const LHS &amp;L, const RHS &amp;R)</div><div class="ttdef"><b>Definition:</b> <a href="PatternMatch_8h_source.html#l01410">PatternMatch.h:1410</a></div></div>
<div class="ttc" id="aclassllvm_1_1Instruction_html_a3e06c3da2e05f581e6beee145fb2cd65"><div class="ttname"><a href="classllvm_1_1Instruction.html#a3e06c3da2e05f581e6beee145fb2cd65">llvm::Instruction::hasNoSignedZeros</a></div><div class="ttdeci">bool hasNoSignedZeros() const</div><div class="ttdoc">Determine whether the no-signed-zeros flag is set.</div><div class="ttdef"><b>Definition:</b> <a href="IR_2Instruction_8cpp_source.html#l00260">Instruction.cpp:260</a></div></div>
<div class="ttc" id="aclassllvm_1_1InstCombiner_html_ad6a655e662d683cd55d2201b5e6a6360"><div class="ttname"><a href="classllvm_1_1InstCombiner.html#ad6a655e662d683cd55d2201b5e6a6360">llvm::InstCombiner::isSignBitCheck</a></div><div class="ttdeci">static bool isSignBitCheck(ICmpInst::Predicate Pred, const APInt &amp;RHS, bool &amp;TrueIfSigned)</div><div class="ttdoc">Given an exploded icmp instruction, return true if the comparison only checks the sign bit.</div><div class="ttdef"><b>Definition:</b> <a href="InstCombiner_8h_source.html#l00163">InstCombiner.h:163</a></div></div>
<div class="ttc" id="aclassllvm_1_1APInt_html_a3d430216d32f4363e4df154599b98055"><div class="ttname"><a href="classllvm_1_1APInt.html#a3d430216d32f4363e4df154599b98055">llvm::APInt::sgt</a></div><div class="ttdeci">bool sgt(const APInt &amp;RHS) const</div><div class="ttdoc">Signed greater than comparison.</div><div class="ttdef"><b>Definition:</b> <a href="APInt_8h_source.html#l01294">APInt.h:1294</a></div></div>
<div class="ttc" id="aclassllvm_1_1IRBuilderBase_html_a40ed7274ff11f079e5b5eae34c818c51"><div class="ttname"><a href="classllvm_1_1IRBuilderBase.html#a40ed7274ff11f079e5b5eae34c818c51">llvm::IRBuilderBase::CreateVectorSplat</a></div><div class="ttdeci">Value * CreateVectorSplat(unsigned NumElts, Value *V, const Twine &amp;Name=&quot;&quot;)</div><div class="ttdoc">Return a vector value that contains.</div><div class="ttdef"><b>Definition:</b> <a href="IRBuilder_8cpp_source.html#l01098">IRBuilder.cpp:1098</a></div></div>
<div class="ttc" id="aDerivedTypes_8h_html"><div class="ttname"><a href="DerivedTypes_8h.html">DerivedTypes.h</a></div></div>
<div class="ttc" id="aclassllvm_1_1SmallSetVector_html"><div class="ttname"><a href="classllvm_1_1SmallSetVector.html">llvm::SmallSetVector</a></div><div class="ttdoc">A SetVector that performs no allocations if smaller than a certain size.</div><div class="ttdef"><b>Definition:</b> <a href="SetVector_8h_source.html#l00307">SetVector.h:308</a></div></div>
<div class="ttc" id="aclassllvm_1_1CmpInst_html_aae55ea42185b7528c0c149625b998968"><div class="ttname"><a href="classllvm_1_1CmpInst.html#aae55ea42185b7528c0c149625b998968">llvm::CmpInst::isUnordered</a></div><div class="ttdeci">static bool isUnordered(Predicate predicate)</div><div class="ttdoc">Determine if the predicate is an unordered operation.</div><div class="ttdef"><b>Definition:</b> <a href="Instructions_8cpp_source.html#l03969">Instructions.cpp:3969</a></div></div>
<div class="ttc" id="anamespacellvm_1_1PatternMatch_html_a2fed53ed2b3225752bd9e4fce4967361"><div class="ttname"><a href="namespacellvm_1_1PatternMatch.html#a2fed53ed2b3225752bd9e4fce4967361">llvm::PatternMatch::m_Neg</a></div><div class="ttdeci">BinaryOp_match&lt; cst_pred_ty&lt; is_zero_int &gt;, ValTy, Instruction::Sub &gt; m_Neg(const ValTy &amp;V)</div><div class="ttdoc">Matches a 'Neg' as 'sub 0, V'.</div><div class="ttdef"><b>Definition:</b> <a href="PatternMatch_8h_source.html#l02264">PatternMatch.h:2264</a></div></div>
<div class="ttc" id="anamespacellvm_html_ae058c4750de2c85f12a1f96841ac9ae3"><div class="ttname"><a href="namespacellvm.html#ae058c4750de2c85f12a1f96841ac9ae3">llvm::isGuaranteedNotToBePoison</a></div><div class="ttdeci">bool isGuaranteedNotToBePoison(const Value *V, AssumptionCache *AC=nullptr, const Instruction *CtxI=nullptr, const DominatorTree *DT=nullptr, unsigned Depth=0)</div><div class="ttdef"><b>Definition:</b> <a href="ValueTracking_8cpp_source.html#l05242">ValueTracking.cpp:5242</a></div></div>
<div class="ttc" id="alib_2CodeGen_2README_8txt_html_a09776db24cf586ec9f1e18f3bae14099"><div class="ttname"><a href="lib_2CodeGen_2README_8txt.html#a09776db24cf586ec9f1e18f3bae14099">BB</a></div><div class="ttdeci">Common register allocation spilling lr str ldr sxth r3 ldr mla r4 can lr mov lr str ldr sxth r3 mla r4 and then merge mul and lr str ldr sxth r3 mla r4 It also increase the likelihood the store may become dead bb27 Successors according to LLVM BB</div><div class="ttdef"><b>Definition:</b> <a href="lib_2CodeGen_2README_8txt_source.html#l00039">README.txt:39</a></div></div>
<div class="ttc" id="aHexagonCommonGEP_8cpp_html_ad532e8710e50302e0a376b61c91fa91d"><div class="ttname"><a href="HexagonCommonGEP_8cpp.html#ad532e8710e50302e0a376b61c91fa91d">GEP</a></div><div class="ttdeci">Hexagon Common GEP</div><div class="ttdef"><b>Definition:</b> <a href="HexagonCommonGEP_8cpp_source.html#l00172">HexagonCommonGEP.cpp:172</a></div></div>
<div class="ttc" id="aReassociate_8cpp_html_a680ae08c1b9b93cebdd6cbb726fe8f3d"><div class="ttname"><a href="Reassociate_8cpp.html#a680ae08c1b9b93cebdd6cbb726fe8f3d">CreateAdd</a></div><div class="ttdeci">static BinaryOperator * CreateAdd(Value *S1, Value *S2, const Twine &amp;Name, Instruction *InsertBefore, Value *FlagsOp)</div><div class="ttdef"><b>Definition:</b> <a href="Reassociate_8cpp_source.html#l00234">Reassociate.cpp:234</a></div></div>
<div class="ttc" id="aclassllvm_1_1Value_html_ae855357b6c5e6e7ed1869272708a3a84"><div class="ttname"><a href="classllvm_1_1Value.html#ae855357b6c5e6e7ed1869272708a3a84">llvm::Value::takeName</a></div><div class="ttdeci">void takeName(Value *V)</div><div class="ttdoc">Transfer the name from V to this value.</div><div class="ttdef"><b>Definition:</b> <a href="Value_8cpp_source.html#l00370">Value.cpp:370</a></div></div>
<div class="ttc" id="anamespacellvm_1_1PatternMatch_html_acec0ee78d2266b990662e36784791999"><div class="ttname"><a href="namespacellvm_1_1PatternMatch.html#acec0ee78d2266b990662e36784791999">llvm::PatternMatch::m_BasicBlock</a></div><div class="ttdeci">class_match&lt; BasicBlock &gt; m_BasicBlock()</div><div class="ttdoc">Match an arbitrary basic block value and ignore it.</div><div class="ttdef"><b>Definition:</b> <a href="PatternMatch_8h_source.html#l00160">PatternMatch.h:160</a></div></div>
<div class="ttc" id="aclassllvm_1_1User_html_abe1de1520a21f77ac57cc210bf0fb0b4"><div class="ttname"><a href="classllvm_1_1User.html#abe1de1520a21f77ac57cc210bf0fb0b4">llvm::User::getOperand</a></div><div class="ttdeci">Value * getOperand(unsigned i) const</div><div class="ttdef"><b>Definition:</b> <a href="User_8h_source.html#l00169">User.h:169</a></div></div>
<div class="ttc" id="anamespacellvm_1_1PatternMatch_html_a5b844aada27c4c6fdb87146ac458c0d8"><div class="ttname"><a href="namespacellvm_1_1PatternMatch.html#a5b844aada27c4c6fdb87146ac458c0d8">llvm::PatternMatch::m_Trunc</a></div><div class="ttdeci">CastClass_match&lt; OpTy, Instruction::Trunc &gt; m_Trunc(const OpTy &amp;Op)</div><div class="ttdoc">Matches Trunc.</div><div class="ttdef"><b>Definition:</b> <a href="PatternMatch_8h_source.html#l01621">PatternMatch.h:1621</a></div></div>
<div class="ttc" id="aInstCombineSelect_8cpp_html_a464e0e0d56a175971fa98a2f24d1432a"><div class="ttname"><a href="InstCombineSelect_8cpp.html#a464e0e0d56a175971fa98a2f24d1432a">foldSelectICmpAndAnd</a></div><div class="ttdeci">static Instruction * foldSelectICmpAndAnd(Type *SelType, const ICmpInst *Cmp, Value *TVal, Value *FVal, InstCombiner::BuilderTy &amp;Builder)</div><div class="ttdoc">We want to turn: (select (icmp eq (and X, Y), 0), (and (lshr X, Z), 1), 1) into: zext (icmp ne i32 (a...</div><div class="ttdef"><b>Definition:</b> <a href="InstCombineSelect_8cpp_source.html#l00510">InstCombineSelect.cpp:510</a></div></div>
<div class="ttc" id="aclassllvm_1_1BinaryOperator_html_a02ce9966395063ac501ecbc1623deda4"><div class="ttname"><a href="classllvm_1_1BinaryOperator.html#a02ce9966395063ac501ecbc1623deda4">llvm::BinaryOperator::Create</a></div><div class="ttdeci">static BinaryOperator * Create(BinaryOps Op, Value *S1, Value *S2, const Twine &amp;Name=Twine(), Instruction *InsertBefore=nullptr)</div><div class="ttdoc">Construct a binary instruction, given the opcode and the two operands.</div><div class="ttdef"><b>Definition:</b> <a href="Instructions_8cpp_source.html#l02564">Instructions.cpp:2564</a></div></div>
<div class="ttc" id="aBasicAliasAnalysis_8cpp_html_af1bff759151fc332f9c9021578b15be6"><div class="ttname"><a href="BasicAliasAnalysis_8cpp.html#af1bff759151fc332f9c9021578b15be6">true</a></div><div class="ttdeci">basic Basic Alias true</div><div class="ttdef"><b>Definition:</b> <a href="BasicAliasAnalysis_8cpp_source.html#l01815">BasicAliasAnalysis.cpp:1815</a></div></div>
<div class="ttc" id="anamespacellvm_1_1tgtok_html_abbc5259d649363016626e2529fabe0c5a58b95af1ca96e109f85a0646a05fceb7"><div class="ttname"><a href="namespacellvm_1_1tgtok.html#abbc5259d649363016626e2529fabe0c5a58b95af1ca96e109f85a0646a05fceb7">llvm::tgtok::TrueVal</a></div><div class="ttdeci">@ TrueVal</div><div class="ttdef"><b>Definition:</b> <a href="TGLexer_8h_source.html#l00061">TGLexer.h:61</a></div></div>
<div class="ttc" id="aValue_8h_html"><div class="ttname"><a href="Value_8h.html">Value.h</a></div></div>
<div class="ttc" id="anamespacellvm_html_a2816e84a08c108d18bc4665bc1817e01"><div class="ttname"><a href="namespacellvm.html#a2816e84a08c108d18bc4665bc1817e01">llvm::abs</a></div><div class="ttdeci">APFloat abs(APFloat X)</div><div class="ttdoc">Returns the absolute value of the argument.</div><div class="ttdef"><b>Definition:</b> <a href="APFloat_8h_source.html#l01284">APFloat.h:1284</a></div></div>
<div class="ttc" id="anamespacellvm_1_1PatternMatch_html_a753e1338645ec04d045211b8a46d968d"><div class="ttname"><a href="namespacellvm_1_1PatternMatch.html#a753e1338645ec04d045211b8a46d968d">llvm::PatternMatch::m_Cmp</a></div><div class="ttdeci">class_match&lt; CmpInst &gt; m_Cmp()</div><div class="ttdoc">Matches any compare instruction and ignore it.</div><div class="ttdef"><b>Definition:</b> <a href="PatternMatch_8h_source.html#l00089">PatternMatch.h:89</a></div></div>
<div class="ttc" id="aclassllvm_1_1GetElementPtrInst_html_ad200825f26189cd43f3b80728649c4a9"><div class="ttname"><a href="classllvm_1_1GetElementPtrInst.html#ad200825f26189cd43f3b80728649c4a9">llvm::GetElementPtrInst::getPointerOperand</a></div><div class="ttdeci">Value * getPointerOperand()</div><div class="ttdef"><b>Definition:</b> <a href="Instructions_8h_source.html#l01069">Instructions.h:1069</a></div></div>
<div class="ttc" id="aclassllvm_1_1Value_html"><div class="ttname"><a href="classllvm_1_1Value.html">llvm::Value</a></div><div class="ttdoc">LLVM Value Representation.</div><div class="ttdef"><b>Definition:</b> <a href="Value_8h_source.html#l00075">Value.h:75</a></div></div>
<div class="ttc" id="aclassllvm_1_1AtomicCmpXchgInst_html"><div class="ttname"><a href="classllvm_1_1AtomicCmpXchgInst.html">llvm::AtomicCmpXchgInst</a></div><div class="ttdoc">An instruction that atomically checks whether a specified value is in a memory location,...</div><div class="ttdef"><b>Definition:</b> <a href="Instructions_8h_source.html#l00521">Instructions.h:521</a></div></div>
<div class="ttc" id="anamespacellvm_1_1PatternMatch_html_a213e6c0ca6e838157373b9a6018c0769"><div class="ttname"><a href="namespacellvm_1_1PatternMatch.html#a213e6c0ca6e838157373b9a6018c0769">llvm::PatternMatch::m_LogicalAnd</a></div><div class="ttdeci">LogicalOp_match&lt; LHS, RHS, Instruction::And &gt; m_LogicalAnd(const LHS &amp;L, const RHS &amp;R)</div><div class="ttdoc">Matches L &amp;&amp; R either in the form of L &amp; R or L ? R : false.</div><div class="ttdef"><b>Definition:</b> <a href="PatternMatch_8h_source.html#l02499">PatternMatch.h:2499</a></div></div>
<div class="ttc" id="anamespacellvm_1_1PatternMatch_html_a858f42cd002d944befe9675788d94ba7"><div class="ttname"><a href="namespacellvm_1_1PatternMatch.html#a858f42cd002d944befe9675788d94ba7">llvm::PatternMatch::m_c_UMin</a></div><div class="ttdeci">MaxMin_match&lt; ICmpInst, LHS, RHS, umin_pred_ty, true &gt; m_c_UMin(const LHS &amp;L, const RHS &amp;R)</div><div class="ttdoc">Matches a UMin with LHS and RHS in either order.</div><div class="ttdef"><b>Definition:</b> <a href="PatternMatch_8h_source.html#l02299">PatternMatch.h:2299</a></div></div>
<div class="ttc" id="aclassllvm_1_1InstCombinerImpl_html_afb4c0a5459a2ce00cf77dd947e91d610"><div class="ttname"><a href="classllvm_1_1InstCombinerImpl.html#afb4c0a5459a2ce00cf77dd947e91d610">llvm::InstCombinerImpl::foldSPFofSPF</a></div><div class="ttdeci">Instruction * foldSPFofSPF(Instruction *Inner, SelectPatternFlavor SPF1, Value *A, Value *B, Instruction &amp;Outer, SelectPatternFlavor SPF2, Value *C)</div></div>
<div class="ttc" id="anamespacellvm_1_1sampleprof_html_a702f69807459cc25db5754a5f179d3fcaf6fbeb8fa9f451468611536b00878d41"><div class="ttname"><a href="namespacellvm_1_1sampleprof.html#a702f69807459cc25db5754a5f179d3fcaf6fbeb8fa9f451468611536b00878d41">llvm::sampleprof::Base</a></div><div class="ttdeci">@ Base</div><div class="ttdef"><b>Definition:</b> <a href="Discriminator_8h_source.html#l00058">Discriminator.h:58</a></div></div>
<div class="ttc" id="aclassllvm_1_1Instruction_html_af67d1f3a518964d80a109bb3d9d5cf1e"><div class="ttname"><a href="classllvm_1_1Instruction.html#af67d1f3a518964d80a109bb3d9d5cf1e">llvm::Instruction::moveBefore</a></div><div class="ttdeci">void moveBefore(Instruction *MovePos)</div><div class="ttdoc">Unlink this instruction from its current basic block and insert it into the basic block that MovePos ...</div><div class="ttdef"><b>Definition:</b> <a href="IR_2Instruction_8cpp_source.html#l00097">Instruction.cpp:97</a></div></div>
<div class="ttc" id="aclassllvm_1_1Use_html"><div class="ttname"><a href="classllvm_1_1Use.html">llvm::Use</a></div><div class="ttdoc">A Use represents the edge between a Value definition and its users.</div><div class="ttdef"><b>Definition:</b> <a href="Use_8h_source.html#l00044">Use.h:44</a></div></div>
<div class="ttc" id="anamespacellvm_1_1Intrinsic_html_a80add6b3b1cdaec560907995127adc16"><div class="ttname"><a href="namespacellvm_1_1Intrinsic.html#a80add6b3b1cdaec560907995127adc16">llvm::Intrinsic::ID</a></div><div class="ttdeci">unsigned ID</div><div class="ttdef"><b>Definition:</b> <a href="TargetTransformInfo_8h_source.html#l00038">TargetTransformInfo.h:38</a></div></div>
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated on Tue Feb 8 2022 04:54:03 for LLVM by&#160;<a href="http://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.8.20
</small></address>
</body>
</html>
