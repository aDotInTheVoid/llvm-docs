<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.20"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>LLVM: lib/Transforms/Scalar/LoopUnswitch.cpp Source File</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<script type="text/x-mathjax-config">
  MathJax.Hub.Config({
    extensions: ["tex2jax.js"],
    jax: ["input/TeX","output/HTML-CSS"],
});
</script>
<script type="text/javascript" async="async" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.7/MathJax.js/MathJax.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">LLVM
   &#160;<span id="projectnumber">13.0.1</span>
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.20 -->
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',false,false,'search.php','Search');
});
/* @license-end */</script>
<div id="main-nav"></div>
<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="dir_97aefd0d527b934f1d99a682da8fe6a9.html">lib</a></li><li class="navelem"><a class="el" href="dir_a72932e0778af28115095468f6286ff8.html">Transforms</a></li><li class="navelem"><a class="el" href="dir_e6e1f1f37d351595fa984b942927b205.html">Scalar</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="headertitle">
<div class="title">LoopUnswitch.cpp</div>  </div>
</div><!--header-->
<div class="contents">
<a href="LoopUnswitch_8cpp.html">Go to the documentation of this file.</a><div class="fragment"><div class="line"><a name="l00001"></a><span class="lineno">    1</span>&#160;<span class="comment">//===- LoopUnswitch.cpp - Hoist loop-invariant conditionals in loop -------===//</span></div>
<div class="line"><a name="l00002"></a><span class="lineno">    2</span>&#160;<span class="comment">//</span></div>
<div class="line"><a name="l00003"></a><span class="lineno">    3</span>&#160;<span class="comment">// Part of the LLVM Project, under the Apache License v2.0 with LLVM Exceptions.</span></div>
<div class="line"><a name="l00004"></a><span class="lineno">    4</span>&#160;<span class="comment">// See https://llvm.org/LICENSE.txt for license information.</span></div>
<div class="line"><a name="l00005"></a><span class="lineno">    5</span>&#160;<span class="comment">// SPDX-License-Identifier: Apache-2.0 WITH LLVM-exception</span></div>
<div class="line"><a name="l00006"></a><span class="lineno">    6</span>&#160;<span class="comment">//</span></div>
<div class="line"><a name="l00007"></a><span class="lineno">    7</span>&#160;<span class="comment">//===----------------------------------------------------------------------===//</span></div>
<div class="line"><a name="l00008"></a><span class="lineno">    8</span>&#160;<span class="comment">//</span></div>
<div class="line"><a name="l00009"></a><span class="lineno">    9</span>&#160;<span class="comment">// This pass transforms loops that contain branches on loop-invariant conditions</span></div>
<div class="line"><a name="l00010"></a><span class="lineno">   10</span>&#160;<span class="comment">// to multiple loops.  For example, it turns the left into the right code:</span></div>
<div class="line"><a name="l00011"></a><span class="lineno">   11</span>&#160;<span class="comment">//</span></div>
<div class="line"><a name="l00012"></a><span class="lineno">   12</span>&#160;<span class="comment">//  for (...)                  if (lic)</span></div>
<div class="line"><a name="l00013"></a><span class="lineno">   13</span>&#160;<span class="comment">//    A                          for (...)</span></div>
<div class="line"><a name="l00014"></a><span class="lineno">   14</span>&#160;<span class="comment">//    if (lic)                     A; B; C</span></div>
<div class="line"><a name="l00015"></a><span class="lineno">   15</span>&#160;<span class="comment">//      B                      else</span></div>
<div class="line"><a name="l00016"></a><span class="lineno">   16</span>&#160;<span class="comment">//    C                          for (...)</span></div>
<div class="line"><a name="l00017"></a><span class="lineno">   17</span>&#160;<span class="comment">//                                 A; C</span></div>
<div class="line"><a name="l00018"></a><span class="lineno">   18</span>&#160;<span class="comment">//</span></div>
<div class="line"><a name="l00019"></a><span class="lineno">   19</span>&#160;<span class="comment">// This can increase the size of the code exponentially (doubling it every time</span></div>
<div class="line"><a name="l00020"></a><span class="lineno">   20</span>&#160;<span class="comment">// a loop is unswitched) so we only unswitch if the resultant code will be</span></div>
<div class="line"><a name="l00021"></a><span class="lineno">   21</span>&#160;<span class="comment">// smaller than a threshold.</span></div>
<div class="line"><a name="l00022"></a><span class="lineno">   22</span>&#160;<span class="comment">//</span></div>
<div class="line"><a name="l00023"></a><span class="lineno">   23</span>&#160;<span class="comment">// This pass expects LICM to be run before it to hoist invariant conditions out</span></div>
<div class="line"><a name="l00024"></a><span class="lineno">   24</span>&#160;<span class="comment">// of the loop, to make the unswitching opportunity obvious.</span></div>
<div class="line"><a name="l00025"></a><span class="lineno">   25</span>&#160;<span class="comment">//</span></div>
<div class="line"><a name="l00026"></a><span class="lineno">   26</span>&#160;<span class="comment">//===----------------------------------------------------------------------===//</span></div>
<div class="line"><a name="l00027"></a><span class="lineno">   27</span>&#160; </div>
<div class="line"><a name="l00028"></a><span class="lineno">   28</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="DenseMap_8h.html">llvm/ADT/DenseMap.h</a>&quot;</span></div>
<div class="line"><a name="l00029"></a><span class="lineno">   29</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="STLExtras_8h.html">llvm/ADT/STLExtras.h</a>&quot;</span></div>
<div class="line"><a name="l00030"></a><span class="lineno">   30</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="SmallPtrSet_8h.html">llvm/ADT/SmallPtrSet.h</a>&quot;</span></div>
<div class="line"><a name="l00031"></a><span class="lineno">   31</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="SmallVector_8h.html">llvm/ADT/SmallVector.h</a>&quot;</span></div>
<div class="line"><a name="l00032"></a><span class="lineno">   32</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="Statistic_8h.html">llvm/ADT/Statistic.h</a>&quot;</span></div>
<div class="line"><a name="l00033"></a><span class="lineno">   33</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="AssumptionCache_8h.html">llvm/Analysis/AssumptionCache.h</a>&quot;</span></div>
<div class="line"><a name="l00034"></a><span class="lineno">   34</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="CodeMetrics_8h.html">llvm/Analysis/CodeMetrics.h</a>&quot;</span></div>
<div class="line"><a name="l00035"></a><span class="lineno">   35</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="InstructionSimplify_8h.html">llvm/Analysis/InstructionSimplify.h</a>&quot;</span></div>
<div class="line"><a name="l00036"></a><span class="lineno">   36</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="LazyBlockFrequencyInfo_8h.html">llvm/Analysis/LazyBlockFrequencyInfo.h</a>&quot;</span></div>
<div class="line"><a name="l00037"></a><span class="lineno">   37</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="LegacyDivergenceAnalysis_8h.html">llvm/Analysis/LegacyDivergenceAnalysis.h</a>&quot;</span></div>
<div class="line"><a name="l00038"></a><span class="lineno">   38</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="LoopInfo_8h.html">llvm/Analysis/LoopInfo.h</a>&quot;</span></div>
<div class="line"><a name="l00039"></a><span class="lineno">   39</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="LoopIterator_8h.html">llvm/Analysis/LoopIterator.h</a>&quot;</span></div>
<div class="line"><a name="l00040"></a><span class="lineno">   40</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="LoopPass_8h.html">llvm/Analysis/LoopPass.h</a>&quot;</span></div>
<div class="line"><a name="l00041"></a><span class="lineno">   41</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="MemorySSA_8h.html">llvm/Analysis/MemorySSA.h</a>&quot;</span></div>
<div class="line"><a name="l00042"></a><span class="lineno">   42</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="MemorySSAUpdater_8h.html">llvm/Analysis/MemorySSAUpdater.h</a>&quot;</span></div>
<div class="line"><a name="l00043"></a><span class="lineno">   43</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="MustExecute_8h.html">llvm/Analysis/MustExecute.h</a>&quot;</span></div>
<div class="line"><a name="l00044"></a><span class="lineno">   44</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="ScalarEvolution_8h.html">llvm/Analysis/ScalarEvolution.h</a>&quot;</span></div>
<div class="line"><a name="l00045"></a><span class="lineno">   45</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="TargetTransformInfo_8h.html">llvm/Analysis/TargetTransformInfo.h</a>&quot;</span></div>
<div class="line"><a name="l00046"></a><span class="lineno">   46</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="Attributes_8h.html">llvm/IR/Attributes.h</a>&quot;</span></div>
<div class="line"><a name="l00047"></a><span class="lineno">   47</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="BasicBlock_8h.html">llvm/IR/BasicBlock.h</a>&quot;</span></div>
<div class="line"><a name="l00048"></a><span class="lineno">   48</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="Constant_8h.html">llvm/IR/Constant.h</a>&quot;</span></div>
<div class="line"><a name="l00049"></a><span class="lineno">   49</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="Constants_8h.html">llvm/IR/Constants.h</a>&quot;</span></div>
<div class="line"><a name="l00050"></a><span class="lineno">   50</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="DerivedTypes_8h.html">llvm/IR/DerivedTypes.h</a>&quot;</span></div>
<div class="line"><a name="l00051"></a><span class="lineno">   51</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="Dominators_8h.html">llvm/IR/Dominators.h</a>&quot;</span></div>
<div class="line"><a name="l00052"></a><span class="lineno">   52</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="Function_8h.html">llvm/IR/Function.h</a>&quot;</span></div>
<div class="line"><a name="l00053"></a><span class="lineno">   53</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="IRBuilder_8h.html">llvm/IR/IRBuilder.h</a>&quot;</span></div>
<div class="line"><a name="l00054"></a><span class="lineno">   54</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="InstrTypes_8h.html">llvm/IR/InstrTypes.h</a>&quot;</span></div>
<div class="line"><a name="l00055"></a><span class="lineno">   55</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="IR_2Instruction_8h.html">llvm/IR/Instruction.h</a>&quot;</span></div>
<div class="line"><a name="l00056"></a><span class="lineno">   56</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="Instructions_8h.html">llvm/IR/Instructions.h</a>&quot;</span></div>
<div class="line"><a name="l00057"></a><span class="lineno">   57</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="IntrinsicInst_8h.html">llvm/IR/IntrinsicInst.h</a>&quot;</span></div>
<div class="line"><a name="l00058"></a><span class="lineno">   58</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="Intrinsics_8h.html">llvm/IR/Intrinsics.h</a>&quot;</span></div>
<div class="line"><a name="l00059"></a><span class="lineno">   59</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="Module_8h.html">llvm/IR/Module.h</a>&quot;</span></div>
<div class="line"><a name="l00060"></a><span class="lineno">   60</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="Type_8h.html">llvm/IR/Type.h</a>&quot;</span></div>
<div class="line"><a name="l00061"></a><span class="lineno">   61</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="User_8h.html">llvm/IR/User.h</a>&quot;</span></div>
<div class="line"><a name="l00062"></a><span class="lineno">   62</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="Value_8h.html">llvm/IR/Value.h</a>&quot;</span></div>
<div class="line"><a name="l00063"></a><span class="lineno">   63</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="ValueHandle_8h.html">llvm/IR/ValueHandle.h</a>&quot;</span></div>
<div class="line"><a name="l00064"></a><span class="lineno">   64</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="InitializePasses_8h.html">llvm/InitializePasses.h</a>&quot;</span></div>
<div class="line"><a name="l00065"></a><span class="lineno">   65</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="Pass_8h.html">llvm/Pass.h</a>&quot;</span></div>
<div class="line"><a name="l00066"></a><span class="lineno">   66</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="Casting_8h.html">llvm/Support/Casting.h</a>&quot;</span></div>
<div class="line"><a name="l00067"></a><span class="lineno">   67</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="CommandLine_8h.html">llvm/Support/CommandLine.h</a>&quot;</span></div>
<div class="line"><a name="l00068"></a><span class="lineno">   68</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="Debug_8h.html">llvm/Support/Debug.h</a>&quot;</span></div>
<div class="line"><a name="l00069"></a><span class="lineno">   69</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="raw__ostream_8h.html">llvm/Support/raw_ostream.h</a>&quot;</span></div>
<div class="line"><a name="l00070"></a><span class="lineno">   70</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="llvm_2Transforms_2Scalar_8h.html">llvm/Transforms/Scalar.h</a>&quot;</span></div>
<div class="line"><a name="l00071"></a><span class="lineno">   71</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="LoopPassManager_8h.html">llvm/Transforms/Scalar/LoopPassManager.h</a>&quot;</span></div>
<div class="line"><a name="l00072"></a><span class="lineno">   72</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="BasicBlockUtils_8h.html">llvm/Transforms/Utils/BasicBlockUtils.h</a>&quot;</span></div>
<div class="line"><a name="l00073"></a><span class="lineno">   73</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="Cloning_8h.html">llvm/Transforms/Utils/Cloning.h</a>&quot;</span></div>
<div class="line"><a name="l00074"></a><span class="lineno">   74</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="Transforms_2Utils_2Local_8h.html">llvm/Transforms/Utils/Local.h</a>&quot;</span></div>
<div class="line"><a name="l00075"></a><span class="lineno">   75</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="LoopUtils_8h.html">llvm/Transforms/Utils/LoopUtils.h</a>&quot;</span></div>
<div class="line"><a name="l00076"></a><span class="lineno">   76</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="ValueMapper_8h.html">llvm/Transforms/Utils/ValueMapper.h</a>&quot;</span></div>
<div class="line"><a name="l00077"></a><span class="lineno">   77</span>&#160;<span class="preprocessor">#include &lt;algorithm&gt;</span></div>
<div class="line"><a name="l00078"></a><span class="lineno">   78</span>&#160;<span class="preprocessor">#include &lt;cassert&gt;</span></div>
<div class="line"><a name="l00079"></a><span class="lineno">   79</span>&#160;<span class="preprocessor">#include &lt;map&gt;</span></div>
<div class="line"><a name="l00080"></a><span class="lineno">   80</span>&#160;<span class="preprocessor">#include &lt;set&gt;</span></div>
<div class="line"><a name="l00081"></a><span class="lineno">   81</span>&#160;<span class="preprocessor">#include &lt;tuple&gt;</span></div>
<div class="line"><a name="l00082"></a><span class="lineno">   82</span>&#160;<span class="preprocessor">#include &lt;utility&gt;</span></div>
<div class="line"><a name="l00083"></a><span class="lineno">   83</span>&#160;<span class="preprocessor">#include &lt;vector&gt;</span></div>
<div class="line"><a name="l00084"></a><span class="lineno">   84</span>&#160; </div>
<div class="line"><a name="l00085"></a><span class="lineno">   85</span>&#160;<span class="keyword">using namespace </span><a class="code" href="namespacellvm.html">llvm</a>;</div>
<div class="line"><a name="l00086"></a><span class="lineno">   86</span>&#160; </div>
<div class="line"><a name="l00087"></a><span class="lineno"><a class="line" href="LoopUnswitch_8cpp.html#ad78e062f62e0d6e453941fb4ca843e4d">   87</a></span>&#160;<span class="preprocessor">#define DEBUG_TYPE &quot;loop-unswitch&quot;</span></div>
<div class="line"><a name="l00088"></a><span class="lineno">   88</span>&#160; </div>
<div class="line"><a name="l00089"></a><span class="lineno"><a class="line" href="LoopUnswitch_8cpp.html#ad5b466cbd242079ab18347e5248fd1b9">   89</a></span>&#160;<a class="code" href="namespacellvm.html#a0bf75467957937ad23ad7be19f489934">STATISTIC</a>(NumBranches, <span class="stringliteral">&quot;Number of branches unswitched&quot;</span>);</div>
<div class="line"><a name="l00090"></a><span class="lineno"><a class="line" href="LoopUnswitch_8cpp.html#ab3ab9463ab2f6721ceff43efa0ba37e5">   90</a></span>&#160;<a class="code" href="namespacellvm.html#a0bf75467957937ad23ad7be19f489934">STATISTIC</a>(NumSwitches, <span class="stringliteral">&quot;Number of switches unswitched&quot;</span>);</div>
<div class="line"><a name="l00091"></a><span class="lineno"><a class="line" href="LoopUnswitch_8cpp.html#ad7e4470428e4daa8e0e8b7db14d2b2fb">   91</a></span>&#160;<a class="code" href="namespacellvm.html#a0bf75467957937ad23ad7be19f489934">STATISTIC</a>(NumGuards,   <span class="stringliteral">&quot;Number of guards unswitched&quot;</span>);</div>
<div class="line"><a name="l00092"></a><span class="lineno"><a class="line" href="LoopUnswitch_8cpp.html#a3d6e3348c4d549b337da5585e76306e4">   92</a></span>&#160;<a class="code" href="namespacellvm.html#a0bf75467957937ad23ad7be19f489934">STATISTIC</a>(NumSelects , <span class="stringliteral">&quot;Number of selects unswitched&quot;</span>);</div>
<div class="line"><a name="l00093"></a><span class="lineno"><a class="line" href="LoopUnswitch_8cpp.html#aa6e446decc15b9df1996f94f20798fbf">   93</a></span>&#160;<a class="code" href="namespacellvm.html#a0bf75467957937ad23ad7be19f489934">STATISTIC</a>(NumTrivial , <span class="stringliteral">&quot;Number of unswitches that are trivial&quot;</span>);</div>
<div class="line"><a name="l00094"></a><span class="lineno"><a class="line" href="LoopUnswitch_8cpp.html#a8f51e858aa0fe0db603a699cc536fabc">   94</a></span>&#160;<a class="code" href="namespacellvm.html#a0bf75467957937ad23ad7be19f489934">STATISTIC</a>(NumSimplify, <span class="stringliteral">&quot;Number of simplifications of unswitched code&quot;</span>);</div>
<div class="line"><a name="l00095"></a><span class="lineno"><a class="line" href="LoopUnswitch_8cpp.html#a864251846f60e87807549ce3031f5df6">   95</a></span>&#160;<a class="code" href="namespacellvm.html#a0bf75467957937ad23ad7be19f489934">STATISTIC</a>(TotalInsts,  <span class="stringliteral">&quot;Total number of instructions analyzed&quot;</span>);</div>
<div class="line"><a name="l00096"></a><span class="lineno">   96</span>&#160; </div>
<div class="line"><a name="l00097"></a><span class="lineno">   97</span>&#160;<span class="comment">// The specific value of 100 here was chosen based only on intuition and a</span></div>
<div class="line"><a name="l00098"></a><span class="lineno">   98</span>&#160;<span class="comment">// few specific examples.</span></div>
<div class="line"><a name="l00099"></a><span class="lineno">   99</span>&#160;<span class="keyword">static</span> <a class="code" href="classllvm_1_1cl_1_1opt.html">cl::opt&lt;unsigned&gt;</a></div>
<div class="line"><a name="l00100"></a><span class="lineno"><a class="line" href="LoopUnswitch_8cpp.html#a815e638c738b221b797674c5c63524bb">  100</a></span>&#160;<a class="code" href="LoopUnswitch_8cpp.html#a815e638c738b221b797674c5c63524bb">Threshold</a>(<span class="stringliteral">&quot;loop-unswitch-threshold&quot;</span>, <a class="code" href="structllvm_1_1cl_1_1desc.html">cl::desc</a>(<span class="stringliteral">&quot;Max loop size to unswitch&quot;</span>),</div>
<div class="line"><a name="l00101"></a><span class="lineno">  101</span>&#160;          <a class="code" href="namespacellvm_1_1cl.html#a10a041239ae1870cfcc064bfaa79fb65">cl::init</a>(100), <a class="code" href="namespacellvm_1_1cl.html#a68075925a54790e71ca790e1d4f21a40a263ac008d8d31f13ce460395fc4cf7e6">cl::Hidden</a>);</div>
<div class="line"><a name="l00102"></a><span class="lineno">  102</span>&#160; </div>
<div class="line"><a name="l00103"></a><span class="lineno">  103</span>&#160;<span class="keyword">static</span> <a class="code" href="classllvm_1_1cl_1_1opt.html">cl::opt&lt;unsigned&gt;</a></div>
<div class="line"><a name="l00104"></a><span class="lineno"><a class="line" href="LoopUnswitch_8cpp.html#a4477a1aca6efad3d0fbcc4e7224fd2c3">  104</a></span>&#160;    <a class="code" href="LoopUnswitch_8cpp.html#a4477a1aca6efad3d0fbcc4e7224fd2c3">MSSAThreshold</a>(<span class="stringliteral">&quot;loop-unswitch-memoryssa-threshold&quot;</span>,</div>
<div class="line"><a name="l00105"></a><span class="lineno">  105</span>&#160;                  <a class="code" href="structllvm_1_1cl_1_1desc.html">cl::desc</a>(<span class="stringliteral">&quot;Max number of memory uses to explore during &quot;</span></div>
<div class="line"><a name="l00106"></a><span class="lineno">  106</span>&#160;                           <span class="stringliteral">&quot;partial unswitching analysis&quot;</span>),</div>
<div class="line"><a name="l00107"></a><span class="lineno">  107</span>&#160;                  <a class="code" href="namespacellvm_1_1cl.html#a10a041239ae1870cfcc064bfaa79fb65">cl::init</a>(100), <a class="code" href="namespacellvm_1_1cl.html#a68075925a54790e71ca790e1d4f21a40a263ac008d8d31f13ce460395fc4cf7e6">cl::Hidden</a>);</div>
<div class="line"><a name="l00108"></a><span class="lineno">  108</span>&#160; </div>
<div class="line"><a name="l00109"></a><span class="lineno">  109</span>&#160;<span class="keyword">namespace </span>{</div>
<div class="line"><a name="l00110"></a><span class="lineno">  110</span>&#160; </div>
<div class="line"><a name="l00111"></a><span class="lineno">  111</span>&#160;  <span class="keyword">class </span>LUAnalysisCache {</div>
<div class="line"><a name="l00112"></a><span class="lineno">  112</span>&#160;    <span class="keyword">using</span> UnswitchedValsMap =</div>
<div class="line"><a name="l00113"></a><span class="lineno">  113</span>&#160;        <a class="code" href="classllvm_1_1DenseMap.html">DenseMap&lt;const SwitchInst *, SmallPtrSet&lt;const Value *, 8&gt;</a>&gt;;</div>
<div class="line"><a name="l00114"></a><span class="lineno">  114</span>&#160;    <span class="keyword">using</span> UnswitchedValsIt = UnswitchedValsMap::iterator;</div>
<div class="line"><a name="l00115"></a><span class="lineno">  115</span>&#160; </div>
<div class="line"><a name="l00116"></a><span class="lineno">  116</span>&#160;    <span class="keyword">struct </span>LoopProperties {</div>
<div class="line"><a name="l00117"></a><span class="lineno">  117</span>&#160;      <span class="keywordtype">unsigned</span> CanBeUnswitchedCount;</div>
<div class="line"><a name="l00118"></a><span class="lineno">  118</span>&#160;      <span class="keywordtype">unsigned</span> WasUnswitchedCount;</div>
<div class="line"><a name="l00119"></a><span class="lineno">  119</span>&#160;      <span class="keywordtype">unsigned</span> SizeEstimation;</div>
<div class="line"><a name="l00120"></a><span class="lineno">  120</span>&#160;      UnswitchedValsMap UnswitchedVals;</div>
<div class="line"><a name="l00121"></a><span class="lineno">  121</span>&#160;    };</div>
<div class="line"><a name="l00122"></a><span class="lineno">  122</span>&#160; </div>
<div class="line"><a name="l00123"></a><span class="lineno">  123</span>&#160;    <span class="comment">// Here we use std::map instead of DenseMap, since we need to keep valid</span></div>
<div class="line"><a name="l00124"></a><span class="lineno">  124</span>&#160;    <span class="comment">// LoopProperties pointer for current loop for better performance.</span></div>
<div class="line"><a name="l00125"></a><span class="lineno">  125</span>&#160;    <span class="keyword">using</span> LoopPropsMap = std::map&lt;const Loop *, LoopProperties&gt;;</div>
<div class="line"><a name="l00126"></a><span class="lineno">  126</span>&#160;    <span class="keyword">using</span> LoopPropsMapIt = LoopPropsMap::iterator;</div>
<div class="line"><a name="l00127"></a><span class="lineno">  127</span>&#160; </div>
<div class="line"><a name="l00128"></a><span class="lineno">  128</span>&#160;    LoopPropsMap LoopsProperties;</div>
<div class="line"><a name="l00129"></a><span class="lineno">  129</span>&#160;    UnswitchedValsMap *CurLoopInstructions = <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l00130"></a><span class="lineno">  130</span>&#160;    LoopProperties *CurrentLoopProperties = <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l00131"></a><span class="lineno">  131</span>&#160; </div>
<div class="line"><a name="l00132"></a><span class="lineno">  132</span>&#160;    <span class="comment">// A loop unswitching with an estimated cost above this threshold</span></div>
<div class="line"><a name="l00133"></a><span class="lineno">  133</span>&#160;    <span class="comment">// is not performed. MaxSize is turned into unswitching quota for</span></div>
<div class="line"><a name="l00134"></a><span class="lineno">  134</span>&#160;    <span class="comment">// the current loop, and reduced correspondingly, though note that</span></div>
<div class="line"><a name="l00135"></a><span class="lineno">  135</span>&#160;    <span class="comment">// the quota is returned by releaseMemory() when the loop has been</span></div>
<div class="line"><a name="l00136"></a><span class="lineno">  136</span>&#160;    <span class="comment">// processed, so that MaxSize will return to its previous</span></div>
<div class="line"><a name="l00137"></a><span class="lineno">  137</span>&#160;    <span class="comment">// value. So in most cases MaxSize will equal the Threshold flag</span></div>
<div class="line"><a name="l00138"></a><span class="lineno">  138</span>&#160;    <span class="comment">// when a new loop is processed. An exception to that is that</span></div>
<div class="line"><a name="l00139"></a><span class="lineno">  139</span>&#160;    <span class="comment">// MaxSize will have a smaller value while processing nested loops</span></div>
<div class="line"><a name="l00140"></a><span class="lineno">  140</span>&#160;    <span class="comment">// that were introduced due to loop unswitching of an outer loop.</span></div>
<div class="line"><a name="l00141"></a><span class="lineno">  141</span>&#160;    <span class="comment">//</span></div>
<div class="line"><a name="l00142"></a><span class="lineno">  142</span>&#160;    <span class="comment">// FIXME: The way that MaxSize works is subtle and depends on the</span></div>
<div class="line"><a name="l00143"></a><span class="lineno">  143</span>&#160;    <span class="comment">// pass manager processing loops and calling releaseMemory() in a</span></div>
<div class="line"><a name="l00144"></a><span class="lineno">  144</span>&#160;    <span class="comment">// specific order. It would be good to find a more straightforward</span></div>
<div class="line"><a name="l00145"></a><span class="lineno">  145</span>&#160;    <span class="comment">// way of doing what MaxSize does.</span></div>
<div class="line"><a name="l00146"></a><span class="lineno">  146</span>&#160;    <span class="keywordtype">unsigned</span> MaxSize;</div>
<div class="line"><a name="l00147"></a><span class="lineno">  147</span>&#160; </div>
<div class="line"><a name="l00148"></a><span class="lineno">  148</span>&#160;  <span class="keyword">public</span>:</div>
<div class="line"><a name="l00149"></a><span class="lineno">  149</span>&#160;    LUAnalysisCache() : MaxSize(<a class="code" href="LoopUnswitch_8cpp.html#a815e638c738b221b797674c5c63524bb">Threshold</a>) {}</div>
<div class="line"><a name="l00150"></a><span class="lineno">  150</span>&#160; </div>
<div class="line"><a name="l00151"></a><span class="lineno">  151</span>&#160;    <span class="comment">// Analyze loop. Check its size, calculate is it possible to unswitch</span></div>
<div class="line"><a name="l00152"></a><span class="lineno">  152</span>&#160;    <span class="comment">// it. Returns true if we can unswitch this loop.</span></div>
<div class="line"><a name="l00153"></a><span class="lineno">  153</span>&#160;    <span class="keywordtype">bool</span> countLoop(<span class="keyword">const</span> <a class="code" href="classllvm_1_1Loop.html">Loop</a> *L, <span class="keyword">const</span> <a class="code" href="classllvm_1_1TargetTransformInfo.html">TargetTransformInfo</a> &amp;<a class="code" href="classllvm_1_1TargetTransformInfo.html">TTI</a>,</div>
<div class="line"><a name="l00154"></a><span class="lineno">  154</span>&#160;                   <a class="code" href="classllvm_1_1AssumptionCache.html">AssumptionCache</a> *AC);</div>
<div class="line"><a name="l00155"></a><span class="lineno">  155</span>&#160; </div>
<div class="line"><a name="l00156"></a><span class="lineno">  156</span>&#160;    <span class="comment">// Clean all data related to given loop.</span></div>
<div class="line"><a name="l00157"></a><span class="lineno">  157</span>&#160;    <span class="keywordtype">void</span> forgetLoop(<span class="keyword">const</span> <a class="code" href="classllvm_1_1Loop.html">Loop</a> *L);</div>
<div class="line"><a name="l00158"></a><span class="lineno">  158</span>&#160; </div>
<div class="line"><a name="l00159"></a><span class="lineno">  159</span>&#160;    <span class="comment">// Mark case value as unswitched.</span></div>
<div class="line"><a name="l00160"></a><span class="lineno">  160</span>&#160;    <span class="comment">// Since SI instruction can be partly unswitched, in order to avoid</span></div>
<div class="line"><a name="l00161"></a><span class="lineno">  161</span>&#160;    <span class="comment">// extra unswitching in cloned loops keep track all unswitched values.</span></div>
<div class="line"><a name="l00162"></a><span class="lineno">  162</span>&#160;    <span class="keywordtype">void</span> setUnswitched(<span class="keyword">const</span> <a class="code" href="classllvm_1_1SwitchInst.html">SwitchInst</a> *<a class="code" href="PassBuilderBindings_8cpp.html#a0f79dad1efc582555a443cc11a8fa401">SI</a>, <span class="keyword">const</span> <a class="code" href="classllvm_1_1Value.html">Value</a> *V);</div>
<div class="line"><a name="l00163"></a><span class="lineno">  163</span>&#160; </div>
<div class="line"><a name="l00164"></a><span class="lineno">  164</span>&#160;    <span class="comment">// Check was this case value unswitched before or not.</span></div>
<div class="line"><a name="l00165"></a><span class="lineno">  165</span>&#160;    <span class="keywordtype">bool</span> isUnswitched(<span class="keyword">const</span> <a class="code" href="classllvm_1_1SwitchInst.html">SwitchInst</a> *<a class="code" href="PassBuilderBindings_8cpp.html#a0f79dad1efc582555a443cc11a8fa401">SI</a>, <span class="keyword">const</span> <a class="code" href="classllvm_1_1Value.html">Value</a> *V);</div>
<div class="line"><a name="l00166"></a><span class="lineno">  166</span>&#160; </div>
<div class="line"><a name="l00167"></a><span class="lineno">  167</span>&#160;    <span class="comment">// Returns true if another unswitching could be done within the cost</span></div>
<div class="line"><a name="l00168"></a><span class="lineno">  168</span>&#160;    <span class="comment">// threshold.</span></div>
<div class="line"><a name="l00169"></a><span class="lineno">  169</span>&#160;    <span class="keywordtype">bool</span> costAllowsUnswitching();</div>
<div class="line"><a name="l00170"></a><span class="lineno">  170</span>&#160; </div>
<div class="line"><a name="l00171"></a><span class="lineno">  171</span>&#160;    <span class="comment">// Clone all loop-unswitch related loop properties.</span></div>
<div class="line"><a name="l00172"></a><span class="lineno">  172</span>&#160;    <span class="comment">// Redistribute unswitching quotas.</span></div>
<div class="line"><a name="l00173"></a><span class="lineno">  173</span>&#160;    <span class="comment">// Note, that new loop data is stored inside the VMap.</span></div>
<div class="line"><a name="l00174"></a><span class="lineno">  174</span>&#160;    <span class="keywordtype">void</span> cloneData(<span class="keyword">const</span> <a class="code" href="classllvm_1_1Loop.html">Loop</a> *NewLoop, <span class="keyword">const</span> <a class="code" href="classllvm_1_1Loop.html">Loop</a> *OldLoop,</div>
<div class="line"><a name="l00175"></a><span class="lineno">  175</span>&#160;                   <span class="keyword">const</span> <a class="code" href="classllvm_1_1ValueMap.html">ValueToValueMapTy</a> &amp;VMap);</div>
<div class="line"><a name="l00176"></a><span class="lineno">  176</span>&#160;  };</div>
<div class="line"><a name="l00177"></a><span class="lineno">  177</span>&#160; </div>
<div class="line"><a name="l00178"></a><span class="lineno">  178</span>&#160;  <span class="keyword">class </span>LoopUnswitch : <span class="keyword">public</span> <a class="code" href="classllvm_1_1LoopPass.html">LoopPass</a> {</div>
<div class="line"><a name="l00179"></a><span class="lineno">  179</span>&#160;    <a class="code" href="classllvm_1_1LoopInfo.html">LoopInfo</a> *LI;  <span class="comment">// Loop information</span></div>
<div class="line"><a name="l00180"></a><span class="lineno">  180</span>&#160;    <a class="code" href="classllvm_1_1LPPassManager.html">LPPassManager</a> *LPM;</div>
<div class="line"><a name="l00181"></a><span class="lineno">  181</span>&#160;    <a class="code" href="classllvm_1_1AssumptionCache.html">AssumptionCache</a> *AC;</div>
<div class="line"><a name="l00182"></a><span class="lineno">  182</span>&#160; </div>
<div class="line"><a name="l00183"></a><span class="lineno">  183</span>&#160;    <span class="comment">// Used to check if second loop needs processing after</span></div>
<div class="line"><a name="l00184"></a><span class="lineno">  184</span>&#160;    <span class="comment">// rewriteLoopBodyWithConditionConstant rewrites first loop.</span></div>
<div class="line"><a name="l00185"></a><span class="lineno">  185</span>&#160;    std::vector&lt;Loop*&gt; LoopProcessWorklist;</div>
<div class="line"><a name="l00186"></a><span class="lineno">  186</span>&#160; </div>
<div class="line"><a name="l00187"></a><span class="lineno">  187</span>&#160;    LUAnalysisCache BranchesInfo;</div>
<div class="line"><a name="l00188"></a><span class="lineno">  188</span>&#160; </div>
<div class="line"><a name="l00189"></a><span class="lineno">  189</span>&#160;    <span class="keywordtype">bool</span> OptimizeForSize;</div>
<div class="line"><a name="l00190"></a><span class="lineno">  190</span>&#160;    <span class="keywordtype">bool</span> RedoLoop = <span class="keyword">false</span>;</div>
<div class="line"><a name="l00191"></a><span class="lineno">  191</span>&#160; </div>
<div class="line"><a name="l00192"></a><span class="lineno">  192</span>&#160;    <a class="code" href="classllvm_1_1Loop.html">Loop</a> *CurrentLoop = <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l00193"></a><span class="lineno">  193</span>&#160;    <a class="code" href="classllvm_1_1DominatorTree.html">DominatorTree</a> *DT = <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l00194"></a><span class="lineno">  194</span>&#160;    <a class="code" href="classllvm_1_1MemorySSA.html">MemorySSA</a> *MSSA = <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l00195"></a><span class="lineno">  195</span>&#160;    <a class="code" href="classllvm_1_1AAResults.html">AAResults</a> *AA = <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l00196"></a><span class="lineno">  196</span>&#160;    std::unique_ptr&lt;MemorySSAUpdater&gt; MSSAU;</div>
<div class="line"><a name="l00197"></a><span class="lineno">  197</span>&#160;    <a class="code" href="classllvm_1_1BasicBlock.html">BasicBlock</a> *LoopHeader = <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l00198"></a><span class="lineno">  198</span>&#160;    <a class="code" href="classllvm_1_1BasicBlock.html">BasicBlock</a> *LoopPreheader = <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l00199"></a><span class="lineno">  199</span>&#160; </div>
<div class="line"><a name="l00200"></a><span class="lineno">  200</span>&#160;    <span class="keywordtype">bool</span> SanitizeMemory;</div>
<div class="line"><a name="l00201"></a><span class="lineno">  201</span>&#160;    <a class="code" href="classllvm_1_1SimpleLoopSafetyInfo.html">SimpleLoopSafetyInfo</a> SafetyInfo;</div>
<div class="line"><a name="l00202"></a><span class="lineno">  202</span>&#160; </div>
<div class="line"><a name="l00203"></a><span class="lineno">  203</span>&#160;    <span class="comment">// LoopBlocks contains all of the basic blocks of the loop, including the</span></div>
<div class="line"><a name="l00204"></a><span class="lineno">  204</span>&#160;    <span class="comment">// preheader of the loop, the body of the loop, and the exit blocks of the</span></div>
<div class="line"><a name="l00205"></a><span class="lineno">  205</span>&#160;    <span class="comment">// loop, in that order.</span></div>
<div class="line"><a name="l00206"></a><span class="lineno">  206</span>&#160;    std::vector&lt;BasicBlock*&gt; LoopBlocks;</div>
<div class="line"><a name="l00207"></a><span class="lineno">  207</span>&#160;    <span class="comment">// NewBlocks contained cloned copy of basic blocks from LoopBlocks.</span></div>
<div class="line"><a name="l00208"></a><span class="lineno">  208</span>&#160;    std::vector&lt;BasicBlock*&gt; NewBlocks;</div>
<div class="line"><a name="l00209"></a><span class="lineno">  209</span>&#160; </div>
<div class="line"><a name="l00210"></a><span class="lineno">  210</span>&#160;    <span class="keywordtype">bool</span> HasBranchDivergence;</div>
<div class="line"><a name="l00211"></a><span class="lineno">  211</span>&#160; </div>
<div class="line"><a name="l00212"></a><span class="lineno">  212</span>&#160;  <span class="keyword">public</span>:</div>
<div class="line"><a name="l00213"></a><span class="lineno">  213</span>&#160;    <span class="keyword">static</span> <span class="keywordtype">char</span> <a class="code" href="namespacellvm_1_1Intrinsic.html#a80add6b3b1cdaec560907995127adc16">ID</a>; <span class="comment">// Pass ID, replacement for typeid</span></div>
<div class="line"><a name="l00214"></a><span class="lineno">  214</span>&#160; </div>
<div class="line"><a name="l00215"></a><span class="lineno">  215</span>&#160;    <span class="keyword">explicit</span> LoopUnswitch(<span class="keywordtype">bool</span> Os = <span class="keyword">false</span>, <span class="keywordtype">bool</span> HasBranchDivergence = <span class="keyword">false</span>)</div>
<div class="line"><a name="l00216"></a><span class="lineno">  216</span>&#160;        : <a class="code" href="classllvm_1_1LoopPass.html">LoopPass</a>(<a class="code" href="namespacellvm_1_1Intrinsic.html#a80add6b3b1cdaec560907995127adc16">ID</a>), OptimizeForSize(Os),</div>
<div class="line"><a name="l00217"></a><span class="lineno">  217</span>&#160;          HasBranchDivergence(HasBranchDivergence) {</div>
<div class="line"><a name="l00218"></a><span class="lineno">  218</span>&#160;      <a class="code" href="namespacellvm.html#a2a32b2fa5923a14be683607b50e6bf2b">initializeLoopUnswitchPass</a>(*<a class="code" href="classllvm_1_1PassRegistry.html#a05a729900b76c89e808c6c3094921b2f">PassRegistry::getPassRegistry</a>());</div>
<div class="line"><a name="l00219"></a><span class="lineno">  219</span>&#160;    }</div>
<div class="line"><a name="l00220"></a><span class="lineno">  220</span>&#160; </div>
<div class="line"><a name="l00221"></a><span class="lineno">  221</span>&#160;    <span class="keywordtype">bool</span> runOnLoop(<a class="code" href="classllvm_1_1Loop.html">Loop</a> *L, <a class="code" href="classllvm_1_1LPPassManager.html">LPPassManager</a> &amp;LPM) <span class="keyword">override</span>;</div>
<div class="line"><a name="l00222"></a><span class="lineno">  222</span>&#160;    <span class="keywordtype">bool</span> processCurrentLoop();</div>
<div class="line"><a name="l00223"></a><span class="lineno">  223</span>&#160;    <span class="keywordtype">bool</span> isUnreachableDueToPreviousUnswitching(<a class="code" href="classllvm_1_1BasicBlock.html">BasicBlock</a> *);</div>
<div class="line"><a name="l00224"></a><span class="lineno">  224</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l00225"></a><span class="lineno">  225</span>&#160;<span class="comment">    /// This transformation requires natural loop information &amp; requires that</span></div>
<div class="line"><a name="l00226"></a><span class="lineno">  226</span>&#160;<span class="comment">    /// loop preheaders be inserted into the CFG.</span></div>
<div class="line"><a name="l00227"></a><span class="lineno">  227</span>&#160;<span class="comment">    ///</span></div>
<div class="line"><a name="l00228"></a><span class="lineno">  228</span>&#160;<span class="comment"></span>    <span class="keywordtype">void</span> getAnalysisUsage(<a class="code" href="classllvm_1_1AnalysisUsage.html">AnalysisUsage</a> &amp;AU)<span class="keyword"> const override </span>{</div>
<div class="line"><a name="l00229"></a><span class="lineno">  229</span>&#160;      <span class="comment">// Lazy BFI and BPI are marked as preserved here so Loop Unswitching</span></div>
<div class="line"><a name="l00230"></a><span class="lineno">  230</span>&#160;      <span class="comment">// can remain part of the same loop pass as LICM</span></div>
<div class="line"><a name="l00231"></a><span class="lineno">  231</span>&#160;      AU.<a class="code" href="classllvm_1_1AnalysisUsage.html#a884f90190bca4bd354f2d5c91c264028">addPreserved</a>&lt;<a class="code" href="classllvm_1_1LazyBlockFrequencyInfoPass.html">LazyBlockFrequencyInfoPass</a>&gt;();</div>
<div class="line"><a name="l00232"></a><span class="lineno">  232</span>&#160;      AU.<a class="code" href="classllvm_1_1AnalysisUsage.html#a884f90190bca4bd354f2d5c91c264028">addPreserved</a>&lt;<a class="code" href="classllvm_1_1LazyBranchProbabilityInfoPass.html">LazyBranchProbabilityInfoPass</a>&gt;();</div>
<div class="line"><a name="l00233"></a><span class="lineno">  233</span>&#160;      AU.<a class="code" href="classllvm_1_1AnalysisUsage.html#ae5c60fd282ee894c87ea02c3f0fcb6d0">addRequired</a>&lt;<a class="code" href="classllvm_1_1AssumptionCacheTracker.html">AssumptionCacheTracker</a>&gt;();</div>
<div class="line"><a name="l00234"></a><span class="lineno">  234</span>&#160;      AU.<a class="code" href="classllvm_1_1AnalysisUsage.html#ae5c60fd282ee894c87ea02c3f0fcb6d0">addRequired</a>&lt;<a class="code" href="classllvm_1_1TargetTransformInfoWrapperPass.html">TargetTransformInfoWrapperPass</a>&gt;();</div>
<div class="line"><a name="l00235"></a><span class="lineno">  235</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="namespacellvm.html#a1b08b801426881b2a106ccb2e1c79cf3">EnableMSSALoopDependency</a>) {</div>
<div class="line"><a name="l00236"></a><span class="lineno">  236</span>&#160;        AU.<a class="code" href="classllvm_1_1AnalysisUsage.html#ae5c60fd282ee894c87ea02c3f0fcb6d0">addRequired</a>&lt;<a class="code" href="classllvm_1_1MemorySSAWrapperPass.html">MemorySSAWrapperPass</a>&gt;();</div>
<div class="line"><a name="l00237"></a><span class="lineno">  237</span>&#160;        AU.<a class="code" href="classllvm_1_1AnalysisUsage.html#a884f90190bca4bd354f2d5c91c264028">addPreserved</a>&lt;<a class="code" href="classllvm_1_1MemorySSAWrapperPass.html">MemorySSAWrapperPass</a>&gt;();</div>
<div class="line"><a name="l00238"></a><span class="lineno">  238</span>&#160;      }</div>
<div class="line"><a name="l00239"></a><span class="lineno">  239</span>&#160;      <span class="keywordflow">if</span> (HasBranchDivergence)</div>
<div class="line"><a name="l00240"></a><span class="lineno">  240</span>&#160;        AU.<a class="code" href="classllvm_1_1AnalysisUsage.html#ae5c60fd282ee894c87ea02c3f0fcb6d0">addRequired</a>&lt;<a class="code" href="classllvm_1_1LegacyDivergenceAnalysis.html">LegacyDivergenceAnalysis</a>&gt;();</div>
<div class="line"><a name="l00241"></a><span class="lineno">  241</span>&#160;      <a class="code" href="namespacellvm.html#a92caae34bfacc63bda0f23d5d005a89e">getLoopAnalysisUsage</a>(AU);</div>
<div class="line"><a name="l00242"></a><span class="lineno">  242</span>&#160;    }</div>
<div class="line"><a name="l00243"></a><span class="lineno">  243</span>&#160; </div>
<div class="line"><a name="l00244"></a><span class="lineno">  244</span>&#160;  <span class="keyword">private</span>:</div>
<div class="line"><a name="l00245"></a><span class="lineno">  245</span>&#160;    <span class="keywordtype">void</span> releaseMemory()<span class="keyword"> override </span>{ BranchesInfo.forgetLoop(CurrentLoop); }</div>
<div class="line"><a name="l00246"></a><span class="lineno">  246</span>&#160; </div>
<div class="line"><a name="l00247"></a><span class="lineno">  247</span>&#160;    <span class="keywordtype">void</span> initLoopData() {</div>
<div class="line"><a name="l00248"></a><span class="lineno">  248</span>&#160;      LoopHeader = CurrentLoop-&gt;<a class="code" href="classllvm_1_1LoopBase.html#a58c5b170ea68b41e94ebb0019523a68f">getHeader</a>();</div>
<div class="line"><a name="l00249"></a><span class="lineno">  249</span>&#160;      LoopPreheader = CurrentLoop-&gt;<a class="code" href="classllvm_1_1LoopBase.html#ac3280e7f76f955403fe17eacf126b90d">getLoopPreheader</a>();</div>
<div class="line"><a name="l00250"></a><span class="lineno">  250</span>&#160;    }</div>
<div class="line"><a name="l00251"></a><span class="lineno">  251</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l00252"></a><span class="lineno">  252</span>&#160;<span class="comment">    /// Split all of the edges from inside the loop to their exit blocks.</span></div>
<div class="line"><a name="l00253"></a><span class="lineno">  253</span>&#160;<span class="comment">    /// Update the appropriate Phi nodes as we do so.</span></div>
<div class="line"><a name="l00254"></a><span class="lineno">  254</span>&#160;<span class="comment"></span>    <span class="keywordtype">void</span> splitExitEdges(<a class="code" href="classllvm_1_1Loop.html">Loop</a> *L,</div>
<div class="line"><a name="l00255"></a><span class="lineno">  255</span>&#160;                        <span class="keyword">const</span> <a class="code" href="classllvm_1_1SmallVectorImpl.html">SmallVectorImpl&lt;BasicBlock *&gt;</a> &amp;ExitBlocks);</div>
<div class="line"><a name="l00256"></a><span class="lineno">  256</span>&#160; </div>
<div class="line"><a name="l00257"></a><span class="lineno">  257</span>&#160;    <span class="keywordtype">bool</span> tryTrivialLoopUnswitch(<span class="keywordtype">bool</span> &amp;Changed);</div>
<div class="line"><a name="l00258"></a><span class="lineno">  258</span>&#160; </div>
<div class="line"><a name="l00259"></a><span class="lineno">  259</span>&#160;    <span class="keywordtype">bool</span> unswitchIfProfitable(<a class="code" href="classllvm_1_1Value.html">Value</a> *LoopCond, <a class="code" href="classllvm_1_1Constant.html">Constant</a> *Val,</div>
<div class="line"><a name="l00260"></a><span class="lineno">  260</span>&#160;                              <a class="code" href="classllvm_1_1Instruction.html">Instruction</a> *TI = <span class="keyword">nullptr</span>,</div>
<div class="line"><a name="l00261"></a><span class="lineno">  261</span>&#160;                              <a class="code" href="classllvm_1_1ArrayRef.html">ArrayRef&lt;Instruction *&gt;</a> ToDuplicate = {});</div>
<div class="line"><a name="l00262"></a><span class="lineno">  262</span>&#160;    <span class="keywordtype">void</span> unswitchTrivialCondition(<a class="code" href="classllvm_1_1Loop.html">Loop</a> *L, <a class="code" href="classllvm_1_1Value.html">Value</a> *<a class="code" href="BasicBlockSections_8cpp.html#a5fd0741d696f28faf65b33f6c6af8fda">Cond</a>, <a class="code" href="classllvm_1_1Constant.html">Constant</a> *Val,</div>
<div class="line"><a name="l00263"></a><span class="lineno">  263</span>&#160;                                  <a class="code" href="classllvm_1_1BasicBlock.html">BasicBlock</a> *ExitBlock, <a class="code" href="classllvm_1_1Instruction.html">Instruction</a> *TI);</div>
<div class="line"><a name="l00264"></a><span class="lineno">  264</span>&#160;    <span class="keywordtype">void</span> unswitchNontrivialCondition(<a class="code" href="classllvm_1_1Value.html">Value</a> *LIC, <a class="code" href="classllvm_1_1Constant.html">Constant</a> *OnVal, <a class="code" href="classllvm_1_1Loop.html">Loop</a> *L,</div>
<div class="line"><a name="l00265"></a><span class="lineno">  265</span>&#160;                                     <a class="code" href="classllvm_1_1Instruction.html">Instruction</a> *TI,</div>
<div class="line"><a name="l00266"></a><span class="lineno">  266</span>&#160;                                     <a class="code" href="classllvm_1_1ArrayRef.html">ArrayRef&lt;Instruction *&gt;</a> ToDuplicate = {});</div>
<div class="line"><a name="l00267"></a><span class="lineno">  267</span>&#160; </div>
<div class="line"><a name="l00268"></a><span class="lineno">  268</span>&#160;    <span class="keywordtype">void</span> rewriteLoopBodyWithConditionConstant(<a class="code" href="classllvm_1_1Loop.html">Loop</a> *L, <a class="code" href="classllvm_1_1Value.html">Value</a> *LIC,</div>
<div class="line"><a name="l00269"></a><span class="lineno">  269</span>&#160;                                              <a class="code" href="classllvm_1_1Constant.html">Constant</a> *Val, <span class="keywordtype">bool</span> IsEqual);</div>
<div class="line"><a name="l00270"></a><span class="lineno">  270</span>&#160; </div>
<div class="line"><a name="l00271"></a><span class="lineno">  271</span>&#160;    <span class="keywordtype">void</span></div>
<div class="line"><a name="l00272"></a><span class="lineno">  272</span>&#160;    emitPreheaderBranchOnCondition(<a class="code" href="classllvm_1_1Value.html">Value</a> *LIC, <a class="code" href="classllvm_1_1Constant.html">Constant</a> *Val,</div>
<div class="line"><a name="l00273"></a><span class="lineno">  273</span>&#160;                                   <a class="code" href="classllvm_1_1BasicBlock.html">BasicBlock</a> *TrueDest, <a class="code" href="classllvm_1_1BasicBlock.html">BasicBlock</a> *FalseDest,</div>
<div class="line"><a name="l00274"></a><span class="lineno">  274</span>&#160;                                   <a class="code" href="classllvm_1_1BranchInst.html">BranchInst</a> *OldBranch, <a class="code" href="classllvm_1_1Instruction.html">Instruction</a> *TI,</div>
<div class="line"><a name="l00275"></a><span class="lineno">  275</span>&#160;                                   <a class="code" href="classllvm_1_1ArrayRef.html">ArrayRef&lt;Instruction *&gt;</a> ToDuplicate = {});</div>
<div class="line"><a name="l00276"></a><span class="lineno">  276</span>&#160; </div>
<div class="line"><a name="l00277"></a><span class="lineno">  277</span>&#160;    <span class="keywordtype">void</span> simplifyCode(std::vector&lt;Instruction *&gt; &amp;Worklist, <a class="code" href="classllvm_1_1Loop.html">Loop</a> *L);</div>
<div class="line"><a name="l00278"></a><span class="lineno">  278</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l00279"></a><span class="lineno">  279</span>&#160;<span class="comment">    /// Given that the Invariant is not equal to Val. Simplify instructions</span></div>
<div class="line"><a name="l00280"></a><span class="lineno">  280</span>&#160;<span class="comment">    /// in the loop.</span></div>
<div class="line"><a name="l00281"></a><span class="lineno">  281</span>&#160;<span class="comment"></span>    <a class="code" href="classllvm_1_1Value.html">Value</a> *simplifyInstructionWithNotEqual(<a class="code" href="classllvm_1_1Instruction.html">Instruction</a> *Inst, <a class="code" href="classllvm_1_1Value.html">Value</a> *Invariant,</div>
<div class="line"><a name="l00282"></a><span class="lineno">  282</span>&#160;                                           <a class="code" href="classllvm_1_1Constant.html">Constant</a> *Val);</div>
<div class="line"><a name="l00283"></a><span class="lineno">  283</span>&#160;  };</div>
<div class="line"><a name="l00284"></a><span class="lineno">  284</span>&#160; </div>
<div class="line"><a name="l00285"></a><span class="lineno">  285</span>&#160;} <span class="comment">// end anonymous namespace</span></div>
<div class="line"><a name="l00286"></a><span class="lineno">  286</span>&#160; </div>
<div class="line"><a name="l00287"></a><span class="lineno">  287</span>&#160;<span class="comment">// Analyze loop. Check its size, calculate is it possible to unswitch</span></div>
<div class="line"><a name="l00288"></a><span class="lineno">  288</span>&#160;<span class="comment">// it. Returns true if we can unswitch this loop.</span></div>
<div class="line"><a name="l00289"></a><span class="lineno">  289</span>&#160;<span class="keywordtype">bool</span> LUAnalysisCache::countLoop(<span class="keyword">const</span> <a class="code" href="classllvm_1_1Loop.html">Loop</a> *L, <span class="keyword">const</span> <a class="code" href="classllvm_1_1TargetTransformInfo.html">TargetTransformInfo</a> &amp;<a class="code" href="classllvm_1_1TargetTransformInfo.html">TTI</a>,</div>
<div class="line"><a name="l00290"></a><span class="lineno">  290</span>&#160;                                <a class="code" href="classllvm_1_1AssumptionCache.html">AssumptionCache</a> *AC) {</div>
<div class="line"><a name="l00291"></a><span class="lineno">  291</span>&#160;  LoopPropsMapIt PropsIt;</div>
<div class="line"><a name="l00292"></a><span class="lineno">  292</span>&#160;  <span class="keywordtype">bool</span> Inserted;</div>
<div class="line"><a name="l00293"></a><span class="lineno">  293</span>&#160;  std::tie(PropsIt, Inserted) =</div>
<div class="line"><a name="l00294"></a><span class="lineno">  294</span>&#160;      LoopsProperties.insert(std::make_pair(L, LoopProperties()));</div>
<div class="line"><a name="l00295"></a><span class="lineno">  295</span>&#160; </div>
<div class="line"><a name="l00296"></a><span class="lineno">  296</span>&#160;  LoopProperties &amp;Props = PropsIt-&gt;second;</div>
<div class="line"><a name="l00297"></a><span class="lineno">  297</span>&#160; </div>
<div class="line"><a name="l00298"></a><span class="lineno">  298</span>&#160;  <span class="keywordflow">if</span> (Inserted) {</div>
<div class="line"><a name="l00299"></a><span class="lineno">  299</span>&#160;    <span class="comment">// New loop.</span></div>
<div class="line"><a name="l00300"></a><span class="lineno">  300</span>&#160; </div>
<div class="line"><a name="l00301"></a><span class="lineno">  301</span>&#160;    <span class="comment">// Limit the number of instructions to avoid causing significant code</span></div>
<div class="line"><a name="l00302"></a><span class="lineno">  302</span>&#160;    <span class="comment">// expansion, and the number of basic blocks, to avoid loops with</span></div>
<div class="line"><a name="l00303"></a><span class="lineno">  303</span>&#160;    <span class="comment">// large numbers of branches which cause loop unswitching to go crazy.</span></div>
<div class="line"><a name="l00304"></a><span class="lineno">  304</span>&#160;    <span class="comment">// This is a very ad-hoc heuristic.</span></div>
<div class="line"><a name="l00305"></a><span class="lineno">  305</span>&#160; </div>
<div class="line"><a name="l00306"></a><span class="lineno">  306</span>&#160;    <a class="code" href="classllvm_1_1SmallPtrSet.html">SmallPtrSet&lt;const Value *, 32&gt;</a> EphValues;</div>
<div class="line"><a name="l00307"></a><span class="lineno">  307</span>&#160;    <a class="code" href="structllvm_1_1CodeMetrics.html#a7e174506b52ad46ea1f746a7f727d999">CodeMetrics::collectEphemeralValues</a>(L, AC, EphValues);</div>
<div class="line"><a name="l00308"></a><span class="lineno">  308</span>&#160; </div>
<div class="line"><a name="l00309"></a><span class="lineno">  309</span>&#160;    <span class="comment">// FIXME: This is overly conservative because it does not take into</span></div>
<div class="line"><a name="l00310"></a><span class="lineno">  310</span>&#160;    <span class="comment">// consideration code simplification opportunities and code that can</span></div>
<div class="line"><a name="l00311"></a><span class="lineno">  311</span>&#160;    <span class="comment">// be shared by the resultant unswitched loops.</span></div>
<div class="line"><a name="l00312"></a><span class="lineno">  312</span>&#160;    <a class="code" href="structllvm_1_1CodeMetrics.html">CodeMetrics</a> <a class="code" href="MachineTraceMetrics_8cpp.html#a6f3004139ef53bc2cf206b8864976928">Metrics</a>;</div>
<div class="line"><a name="l00313"></a><span class="lineno">  313</span>&#160;    <span class="keywordflow">for</span> (<a class="code" href="classllvm_1_1BasicBlock.html">BasicBlock</a> *<a class="code" href="lib_2CodeGen_2README_8txt.html#a09776db24cf586ec9f1e18f3bae14099">BB</a> : L-&gt;<a class="code" href="classllvm_1_1LoopBase.html#a40f34cc77d2b3bc73384f535c8101858">blocks</a>())</div>
<div class="line"><a name="l00314"></a><span class="lineno">  314</span>&#160;      <a class="code" href="MachineTraceMetrics_8cpp.html#a6f3004139ef53bc2cf206b8864976928">Metrics</a>.analyzeBasicBlock(<a class="code" href="lib_2CodeGen_2README_8txt.html#a09776db24cf586ec9f1e18f3bae14099">BB</a>, <a class="code" href="classllvm_1_1TargetTransformInfo.html">TTI</a>, EphValues);</div>
<div class="line"><a name="l00315"></a><span class="lineno">  315</span>&#160; </div>
<div class="line"><a name="l00316"></a><span class="lineno">  316</span>&#160;    Props.SizeEstimation = <a class="code" href="MachineTraceMetrics_8cpp.html#a6f3004139ef53bc2cf206b8864976928">Metrics</a>.NumInsts;</div>
<div class="line"><a name="l00317"></a><span class="lineno">  317</span>&#160;    Props.CanBeUnswitchedCount = MaxSize / (Props.SizeEstimation);</div>
<div class="line"><a name="l00318"></a><span class="lineno">  318</span>&#160;    Props.WasUnswitchedCount = 0;</div>
<div class="line"><a name="l00319"></a><span class="lineno">  319</span>&#160;    MaxSize -= Props.SizeEstimation * Props.CanBeUnswitchedCount;</div>
<div class="line"><a name="l00320"></a><span class="lineno">  320</span>&#160; </div>
<div class="line"><a name="l00321"></a><span class="lineno">  321</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="MachineTraceMetrics_8cpp.html#a6f3004139ef53bc2cf206b8864976928">Metrics</a>.notDuplicatable) {</div>
<div class="line"><a name="l00322"></a><span class="lineno">  322</span>&#160;      <a class="code" href="Debug_8h.html#a08efc68d15935eb8889400a46c3749ba">LLVM_DEBUG</a>(<a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <span class="stringliteral">&quot;NOT unswitching loop %&quot;</span> &lt;&lt; L-&gt;<a class="code" href="classllvm_1_1LoopBase.html#a58c5b170ea68b41e94ebb0019523a68f">getHeader</a>()-&gt;<a class="code" href="classllvm_1_1Value.html#adb5c319f5905c1d3ca9eb5df546388c5">getName</a>()</div>
<div class="line"><a name="l00323"></a><span class="lineno">  323</span>&#160;                        &lt;&lt; <span class="stringliteral">&quot;, contents cannot be &quot;</span></div>
<div class="line"><a name="l00324"></a><span class="lineno">  324</span>&#160;                        &lt;&lt; <span class="stringliteral">&quot;duplicated!\n&quot;</span>);</div>
<div class="line"><a name="l00325"></a><span class="lineno">  325</span>&#160;      <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l00326"></a><span class="lineno">  326</span>&#160;    }</div>
<div class="line"><a name="l00327"></a><span class="lineno">  327</span>&#160;  }</div>
<div class="line"><a name="l00328"></a><span class="lineno">  328</span>&#160; </div>
<div class="line"><a name="l00329"></a><span class="lineno">  329</span>&#160;  <span class="comment">// Be careful. This links are good only before new loop addition.</span></div>
<div class="line"><a name="l00330"></a><span class="lineno">  330</span>&#160;  CurrentLoopProperties = &amp;Props;</div>
<div class="line"><a name="l00331"></a><span class="lineno">  331</span>&#160;  CurLoopInstructions = &amp;Props.UnswitchedVals;</div>
<div class="line"><a name="l00332"></a><span class="lineno">  332</span>&#160; </div>
<div class="line"><a name="l00333"></a><span class="lineno">  333</span>&#160;  <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l00334"></a><span class="lineno">  334</span>&#160;}</div>
<div class="line"><a name="l00335"></a><span class="lineno">  335</span>&#160; </div>
<div class="line"><a name="l00336"></a><span class="lineno">  336</span>&#160;<span class="comment">// Clean all data related to given loop.</span></div>
<div class="line"><a name="l00337"></a><span class="lineno">  337</span>&#160;<span class="keywordtype">void</span> LUAnalysisCache::forgetLoop(<span class="keyword">const</span> <a class="code" href="classllvm_1_1Loop.html">Loop</a> *L) {</div>
<div class="line"><a name="l00338"></a><span class="lineno">  338</span>&#160;  LoopPropsMapIt LIt = LoopsProperties.find(L);</div>
<div class="line"><a name="l00339"></a><span class="lineno">  339</span>&#160; </div>
<div class="line"><a name="l00340"></a><span class="lineno">  340</span>&#160;  <span class="keywordflow">if</span> (LIt != LoopsProperties.end()) {</div>
<div class="line"><a name="l00341"></a><span class="lineno">  341</span>&#160;    LoopProperties &amp;Props = LIt-&gt;second;</div>
<div class="line"><a name="l00342"></a><span class="lineno">  342</span>&#160;    MaxSize += (Props.CanBeUnswitchedCount + Props.WasUnswitchedCount) *</div>
<div class="line"><a name="l00343"></a><span class="lineno">  343</span>&#160;               Props.SizeEstimation;</div>
<div class="line"><a name="l00344"></a><span class="lineno">  344</span>&#160;    LoopsProperties.erase(LIt);</div>
<div class="line"><a name="l00345"></a><span class="lineno">  345</span>&#160;  }</div>
<div class="line"><a name="l00346"></a><span class="lineno">  346</span>&#160; </div>
<div class="line"><a name="l00347"></a><span class="lineno">  347</span>&#160;  CurrentLoopProperties = <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l00348"></a><span class="lineno">  348</span>&#160;  CurLoopInstructions = <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l00349"></a><span class="lineno">  349</span>&#160;}</div>
<div class="line"><a name="l00350"></a><span class="lineno">  350</span>&#160; </div>
<div class="line"><a name="l00351"></a><span class="lineno">  351</span>&#160;<span class="comment">// Mark case value as unswitched.</span></div>
<div class="line"><a name="l00352"></a><span class="lineno">  352</span>&#160;<span class="comment">// Since SI instruction can be partly unswitched, in order to avoid</span></div>
<div class="line"><a name="l00353"></a><span class="lineno">  353</span>&#160;<span class="comment">// extra unswitching in cloned loops keep track all unswitched values.</span></div>
<div class="line"><a name="l00354"></a><span class="lineno">  354</span>&#160;<span class="keywordtype">void</span> LUAnalysisCache::setUnswitched(<span class="keyword">const</span> <a class="code" href="classllvm_1_1SwitchInst.html">SwitchInst</a> *<a class="code" href="PassBuilderBindings_8cpp.html#a0f79dad1efc582555a443cc11a8fa401">SI</a>, <span class="keyword">const</span> <a class="code" href="classllvm_1_1Value.html">Value</a> *V) {</div>
<div class="line"><a name="l00355"></a><span class="lineno">  355</span>&#160;  (*CurLoopInstructions)[<a class="code" href="PassBuilderBindings_8cpp.html#a0f79dad1efc582555a443cc11a8fa401">SI</a>].insert(V);</div>
<div class="line"><a name="l00356"></a><span class="lineno">  356</span>&#160;}</div>
<div class="line"><a name="l00357"></a><span class="lineno">  357</span>&#160; </div>
<div class="line"><a name="l00358"></a><span class="lineno">  358</span>&#160;<span class="comment">// Check was this case value unswitched before or not.</span></div>
<div class="line"><a name="l00359"></a><span class="lineno">  359</span>&#160;<span class="keywordtype">bool</span> LUAnalysisCache::isUnswitched(<span class="keyword">const</span> <a class="code" href="classllvm_1_1SwitchInst.html">SwitchInst</a> *<a class="code" href="PassBuilderBindings_8cpp.html#a0f79dad1efc582555a443cc11a8fa401">SI</a>, <span class="keyword">const</span> <a class="code" href="classllvm_1_1Value.html">Value</a> *V) {</div>
<div class="line"><a name="l00360"></a><span class="lineno">  360</span>&#160;  <span class="keywordflow">return</span> (*CurLoopInstructions)[<a class="code" href="PassBuilderBindings_8cpp.html#a0f79dad1efc582555a443cc11a8fa401">SI</a>].count(V);</div>
<div class="line"><a name="l00361"></a><span class="lineno">  361</span>&#160;}</div>
<div class="line"><a name="l00362"></a><span class="lineno">  362</span>&#160; </div>
<div class="line"><a name="l00363"></a><span class="lineno">  363</span>&#160;<span class="keywordtype">bool</span> LUAnalysisCache::costAllowsUnswitching() {</div>
<div class="line"><a name="l00364"></a><span class="lineno">  364</span>&#160;  <span class="keywordflow">return</span> CurrentLoopProperties-&gt;CanBeUnswitchedCount &gt; 0;</div>
<div class="line"><a name="l00365"></a><span class="lineno">  365</span>&#160;}</div>
<div class="line"><a name="l00366"></a><span class="lineno">  366</span>&#160; </div>
<div class="line"><a name="l00367"></a><span class="lineno">  367</span>&#160;<span class="comment">// Clone all loop-unswitch related loop properties.</span></div>
<div class="line"><a name="l00368"></a><span class="lineno">  368</span>&#160;<span class="comment">// Redistribute unswitching quotas.</span></div>
<div class="line"><a name="l00369"></a><span class="lineno">  369</span>&#160;<span class="comment">// Note, that new loop data is stored inside the VMap.</span></div>
<div class="line"><a name="l00370"></a><span class="lineno">  370</span>&#160;<span class="keywordtype">void</span> LUAnalysisCache::cloneData(<span class="keyword">const</span> <a class="code" href="classllvm_1_1Loop.html">Loop</a> *NewLoop, <span class="keyword">const</span> <a class="code" href="classllvm_1_1Loop.html">Loop</a> *OldLoop,</div>
<div class="line"><a name="l00371"></a><span class="lineno">  371</span>&#160;                                <span class="keyword">const</span> <a class="code" href="classllvm_1_1ValueMap.html">ValueToValueMapTy</a> &amp;VMap) {</div>
<div class="line"><a name="l00372"></a><span class="lineno">  372</span>&#160;  LoopProperties &amp;NewLoopProps = LoopsProperties[NewLoop];</div>
<div class="line"><a name="l00373"></a><span class="lineno">  373</span>&#160;  LoopProperties &amp;OldLoopProps = *CurrentLoopProperties;</div>
<div class="line"><a name="l00374"></a><span class="lineno">  374</span>&#160;  UnswitchedValsMap &amp;Insts = OldLoopProps.UnswitchedVals;</div>
<div class="line"><a name="l00375"></a><span class="lineno">  375</span>&#160; </div>
<div class="line"><a name="l00376"></a><span class="lineno">  376</span>&#160;  <span class="comment">// Reallocate &quot;can-be-unswitched quota&quot;</span></div>
<div class="line"><a name="l00377"></a><span class="lineno">  377</span>&#160; </div>
<div class="line"><a name="l00378"></a><span class="lineno">  378</span>&#160;  --OldLoopProps.CanBeUnswitchedCount;</div>
<div class="line"><a name="l00379"></a><span class="lineno">  379</span>&#160;  ++OldLoopProps.WasUnswitchedCount;</div>
<div class="line"><a name="l00380"></a><span class="lineno">  380</span>&#160;  NewLoopProps.WasUnswitchedCount = 0;</div>
<div class="line"><a name="l00381"></a><span class="lineno">  381</span>&#160;  <span class="keywordtype">unsigned</span> Quota = OldLoopProps.CanBeUnswitchedCount;</div>
<div class="line"><a name="l00382"></a><span class="lineno">  382</span>&#160;  NewLoopProps.CanBeUnswitchedCount = Quota / 2;</div>
<div class="line"><a name="l00383"></a><span class="lineno">  383</span>&#160;  OldLoopProps.CanBeUnswitchedCount = Quota - Quota / 2;</div>
<div class="line"><a name="l00384"></a><span class="lineno">  384</span>&#160; </div>
<div class="line"><a name="l00385"></a><span class="lineno">  385</span>&#160;  NewLoopProps.SizeEstimation = OldLoopProps.SizeEstimation;</div>
<div class="line"><a name="l00386"></a><span class="lineno">  386</span>&#160; </div>
<div class="line"><a name="l00387"></a><span class="lineno">  387</span>&#160;  <span class="comment">// Clone unswitched values info:</span></div>
<div class="line"><a name="l00388"></a><span class="lineno">  388</span>&#160;  <span class="comment">// for new loop switches we clone info about values that was</span></div>
<div class="line"><a name="l00389"></a><span class="lineno">  389</span>&#160;  <span class="comment">// already unswitched and has redundant successors.</span></div>
<div class="line"><a name="l00390"></a><span class="lineno">  390</span>&#160;  <span class="keywordflow">for</span> (<span class="keyword">const</span> <span class="keyword">auto</span> &amp;<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a> : Insts) {</div>
<div class="line"><a name="l00391"></a><span class="lineno">  391</span>&#160;    <span class="keyword">const</span> <a class="code" href="classllvm_1_1SwitchInst.html">SwitchInst</a> *OldInst = <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>.first;</div>
<div class="line"><a name="l00392"></a><span class="lineno">  392</span>&#160;    <a class="code" href="classllvm_1_1Value.html">Value</a> *NewI = VMap.<a class="code" href="classllvm_1_1ValueMap.html#a15f92579a5fc316dab8cd1fad51015ef">lookup</a>(OldInst);</div>
<div class="line"><a name="l00393"></a><span class="lineno">  393</span>&#160;    <span class="keyword">const</span> <a class="code" href="classllvm_1_1SwitchInst.html">SwitchInst</a> *NewInst = cast_or_null&lt;SwitchInst&gt;(NewI);</div>
<div class="line"><a name="l00394"></a><span class="lineno">  394</span>&#160;    <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(NewInst &amp;&amp; <span class="stringliteral">&quot;All instructions that are in SrcBB must be in VMap.&quot;</span>);</div>
<div class="line"><a name="l00395"></a><span class="lineno">  395</span>&#160; </div>
<div class="line"><a name="l00396"></a><span class="lineno">  396</span>&#160;    NewLoopProps.UnswitchedVals[NewInst] = OldLoopProps.UnswitchedVals[OldInst];</div>
<div class="line"><a name="l00397"></a><span class="lineno">  397</span>&#160;  }</div>
<div class="line"><a name="l00398"></a><span class="lineno">  398</span>&#160;}</div>
<div class="line"><a name="l00399"></a><span class="lineno">  399</span>&#160; </div>
<div class="line"><a name="l00400"></a><span class="lineno">  400</span>&#160;<span class="keywordtype">char</span> <a class="code" href="namespacellvm_1_1Intrinsic.html#a80add6b3b1cdaec560907995127adc16">LoopUnswitch::ID</a> = 0;</div>
<div class="line"><a name="l00401"></a><span class="lineno">  401</span>&#160; </div>
<div class="line"><a name="l00402"></a><span class="lineno"><a class="line" href="LoopUnswitch_8cpp.html#a13444ab05280d582a5abac4ee2530691">  402</a></span>&#160;<a class="code" href="LoopUnswitch_8cpp.html#a13444ab05280d582a5abac4ee2530691">INITIALIZE_PASS_BEGIN</a>(LoopUnswitch, <span class="stringliteral">&quot;loop-unswitch&quot;</span>, <span class="stringliteral">&quot;Unswitch loops&quot;</span>,</div>
<div class="line"><a name="l00403"></a><span class="lineno">  403</span>&#160;                      <span class="keyword">false</span>, <span class="keyword">false</span>)</div>
<div class="line"><a name="l00404"></a><span class="lineno">  404</span>&#160;<a class="code" href="SVEIntrinsicOpts_8cpp.html#a2bb87eb1bcbc74783a83ae945eb8fa36">INITIALIZE_PASS_DEPENDENCY</a>(<a class="code" href="classllvm_1_1AssumptionCacheTracker.html">AssumptionCacheTracker</a>)</div>
<div class="line"><a name="l00405"></a><span class="lineno">  405</span>&#160;<a class="code" href="SVEIntrinsicOpts_8cpp.html#a2bb87eb1bcbc74783a83ae945eb8fa36">INITIALIZE_PASS_DEPENDENCY</a>(<a class="code" href="classllvm_1_1LoopPass.html">LoopPass</a>)</div>
<div class="line"><a name="l00406"></a><span class="lineno">  406</span>&#160;<a class="code" href="SVEIntrinsicOpts_8cpp.html#a2bb87eb1bcbc74783a83ae945eb8fa36">INITIALIZE_PASS_DEPENDENCY</a>(<a class="code" href="classllvm_1_1TargetTransformInfoWrapperPass.html">TargetTransformInfoWrapperPass</a>)</div>
<div class="line"><a name="l00407"></a><span class="lineno">  407</span>&#160;<a class="code" href="SVEIntrinsicOpts_8cpp.html#a2bb87eb1bcbc74783a83ae945eb8fa36">INITIALIZE_PASS_DEPENDENCY</a>(<a class="code" href="classllvm_1_1LegacyDivergenceAnalysis.html">LegacyDivergenceAnalysis</a>)</div>
<div class="line"><a name="l00408"></a><span class="lineno">  408</span>&#160;<a class="code" href="SVEIntrinsicOpts_8cpp.html#a2bb87eb1bcbc74783a83ae945eb8fa36">INITIALIZE_PASS_DEPENDENCY</a>(<a class="code" href="classllvm_1_1MemorySSAWrapperPass.html">MemorySSAWrapperPass</a>)</div>
<div class="line"><a name="l00409"></a><span class="lineno"><a class="line" href="LoopUnswitch_8cpp.html#a2dabdd15f3a22a346eb20585b4c5bf31">  409</a></span>&#160;<a class="code" href="PassSupport_8h.html#a74ce8276b89067e806f67c45a6d92575">INITIALIZE_PASS_END</a>(LoopUnswitch, &quot;<a class="code" href="lib_2Analysis_2README_8txt.html#a01d2af4eee7c40485a0ce3683a2e907a">loop</a>-<a class="code" href="LoopUnswitch_8cpp.html#a2dabdd15f3a22a346eb20585b4c5bf31">unswitch</a>&quot;, &quot;Unswitch <a class="code" href="LoopUnswitch_8cpp.html#a0aa18bdfdde7435ee8015bcfb6c80849">loops</a>&quot;,</div>
<div class="line"><a name="l00410"></a><span class="lineno"><a class="line" href="LoopUnswitch_8cpp.html#a6cad830b96d9f397a77b632dbbfa0a3e">  410</a></span>&#160;                      <a class="code" href="namespacefalse.html">false</a>, <a class="code" href="namespacefalse.html">false</a>)</div>
<div class="line"><a name="l00411"></a><span class="lineno">  411</span>&#160; </div>
<div class="line"><a name="l00412"></a><span class="lineno"><a class="line" href="namespacellvm.html#a399a2e4746faa019d2989fde08c93567">  412</a></span>&#160;<a class="code" href="classllvm_1_1Pass.html">Pass</a> *<a class="code" href="namespacellvm.html">llvm</a>::<a class="code" href="namespacellvm.html#a399a2e4746faa019d2989fde08c93567">createLoopUnswitchPass</a>(<span class="keywordtype">bool</span> Os, <span class="keywordtype">bool</span> HasBranchDivergence) {</div>
<div class="line"><a name="l00413"></a><span class="lineno">  413</span>&#160;  <span class="keywordflow">return</span> <span class="keyword">new</span> LoopUnswitch(Os, HasBranchDivergence);</div>
<div class="line"><a name="l00414"></a><span class="lineno">  414</span>&#160;}</div>
<div class="line"><a name="l00415"></a><span class="lineno">  415</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l00416"></a><span class="lineno">  416</span>&#160;<span class="comment">/// Operator chain lattice.</span></div>
<div class="line"><a name="l00417"></a><span class="lineno"><a class="line" href="LoopUnswitch_8cpp.html#a488610869ffea06bc4eefcd4592fca9f">  417</a></span>&#160;<span class="comment"></span><span class="keyword">enum</span> <a class="code" href="LoopUnswitch_8cpp.html#a488610869ffea06bc4eefcd4592fca9f">OperatorChain</a> {</div>
<div class="line"><a name="l00418"></a><span class="lineno"><a class="line" href="LoopUnswitch_8cpp.html#a488610869ffea06bc4eefcd4592fca9fa9d8893109f11fee0c7829aabbc8e5f42">  418</a></span>&#160;  <a class="code" href="LoopUnswitch_8cpp.html#a488610869ffea06bc4eefcd4592fca9fa9d8893109f11fee0c7829aabbc8e5f42">OC_OpChainNone</a>,    <span class="comment">///&lt; There is no operator.</span></div>
<div class="line"><a name="l00419"></a><span class="lineno"><a class="line" href="LoopUnswitch_8cpp.html#a488610869ffea06bc4eefcd4592fca9fa391236be716257cd22a3b77f48baba8b">  419</a></span>&#160;<span class="comment"></span>  <a class="code" href="LoopUnswitch_8cpp.html#a488610869ffea06bc4eefcd4592fca9fa391236be716257cd22a3b77f48baba8b">OC_OpChainOr</a>,      <span class="comment">///&lt; There are only ORs.</span></div>
<div class="line"><a name="l00420"></a><span class="lineno"><a class="line" href="LoopUnswitch_8cpp.html#a488610869ffea06bc4eefcd4592fca9fae7493b8ace82c60402b77a20b8bfe17a">  420</a></span>&#160;<span class="comment"></span>  <a class="code" href="LoopUnswitch_8cpp.html#a488610869ffea06bc4eefcd4592fca9fae7493b8ace82c60402b77a20b8bfe17a">OC_OpChainAnd</a>,     <span class="comment">///&lt; There are only ANDs.</span></div>
<div class="line"><a name="l00421"></a><span class="lineno">  421</span>&#160;<span class="comment"></span>  <a class="code" href="LoopUnswitch_8cpp.html#a488610869ffea06bc4eefcd4592fca9fafbf28b984bde89995c3b39b4e331449b">OC_OpChainMixed</a>    <span class="comment">///&lt; There are ANDs and ORs.</span></div>
<div class="line"><a name="l00422"></a><span class="lineno"><a class="line" href="LoopUnswitch_8cpp.html#a488610869ffea06bc4eefcd4592fca9fafbf28b984bde89995c3b39b4e331449b">  422</a></span>&#160;<span class="comment"></span>};</div>
<div class="line"><a name="l00423"></a><span class="lineno">  423</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l00424"></a><span class="lineno">  424</span>&#160;<span class="comment">/// Cond is a condition that occurs in L. If it is invariant in the loop, or has</span></div>
<div class="line"><a name="l00425"></a><span class="lineno">  425</span>&#160;<span class="comment">/// an invariant piece, return the invariant. Otherwise, return null.</span></div>
<div class="line"><a name="l00426"></a><span class="lineno">  426</span>&#160;<span class="comment"></span><span class="comment">//</span><span class="comment"></span></div>
<div class="line"><a name="l00427"></a><span class="lineno">  427</span>&#160;<span class="comment">/// NOTE: findLIVLoopCondition will not return a partial LIV by walking up a</span></div>
<div class="line"><a name="l00428"></a><span class="lineno">  428</span>&#160;<span class="comment">/// mixed operator chain, as we can not reliably find a value which will</span></div>
<div class="line"><a name="l00429"></a><span class="lineno">  429</span>&#160;<span class="comment">/// simplify the operator chain. If the chain is AND-only or OR-only, we can use</span></div>
<div class="line"><a name="l00430"></a><span class="lineno">  430</span>&#160;<span class="comment">/// 0 or ~0 to simplify the chain.</span></div>
<div class="line"><a name="l00431"></a><span class="lineno">  431</span>&#160;<span class="comment">///</span></div>
<div class="line"><a name="l00432"></a><span class="lineno">  432</span>&#160;<span class="comment">/// NOTE: In case a partial LIV and a mixed operator chain, we may be able to</span></div>
<div class="line"><a name="l00433"></a><span class="lineno">  433</span>&#160;<span class="comment">/// simplify the condition itself to a loop variant condition, but at the</span></div>
<div class="line"><a name="l00434"></a><span class="lineno">  434</span>&#160;<span class="comment">/// cost of creating an entirely new loop.</span></div>
<div class="line"><a name="l00435"></a><span class="lineno"><a class="line" href="LoopUnswitch_8cpp.html#a9666818bb4bec9f66119ddb9fb3c2c63">  435</a></span>&#160;<span class="comment"></span><span class="keyword">static</span> <a class="code" href="classllvm_1_1Value.html">Value</a> *<a class="code" href="LoopUnswitch_8cpp.html#a9666818bb4bec9f66119ddb9fb3c2c63">findLIVLoopCondition</a>(<a class="code" href="classllvm_1_1Value.html">Value</a> *<a class="code" href="BasicBlockSections_8cpp.html#a5fd0741d696f28faf65b33f6c6af8fda">Cond</a>, <a class="code" href="classllvm_1_1Loop.html">Loop</a> *L, <span class="keywordtype">bool</span> &amp;Changed,</div>
<div class="line"><a name="l00436"></a><span class="lineno">  436</span>&#160;                                   <a class="code" href="LoopUnswitch_8cpp.html#a488610869ffea06bc4eefcd4592fca9f">OperatorChain</a> &amp;ParentChain,</div>
<div class="line"><a name="l00437"></a><span class="lineno">  437</span>&#160;                                   <a class="code" href="classllvm_1_1DenseMap.html">DenseMap&lt;Value *, Value *&gt;</a> &amp;Cache,</div>
<div class="line"><a name="l00438"></a><span class="lineno">  438</span>&#160;                                   <a class="code" href="classllvm_1_1MemorySSAUpdater.html">MemorySSAUpdater</a> *MSSAU) {</div>
<div class="line"><a name="l00439"></a><span class="lineno">  439</span>&#160;  <span class="keyword">auto</span> CacheIt = Cache.<a class="code" href="classllvm_1_1DenseMapBase.html#a0c047f127ed4380a6f383d70bec4eb94">find</a>(<a class="code" href="BasicBlockSections_8cpp.html#a5fd0741d696f28faf65b33f6c6af8fda">Cond</a>);</div>
<div class="line"><a name="l00440"></a><span class="lineno">  440</span>&#160;  <span class="keywordflow">if</span> (CacheIt != Cache.<a class="code" href="classllvm_1_1DenseMapBase.html#a65520b9c67759099e313d0f4e7b5ff9e">end</a>())</div>
<div class="line"><a name="l00441"></a><span class="lineno">  441</span>&#160;    <span class="keywordflow">return</span> CacheIt-&gt;second;</div>
<div class="line"><a name="l00442"></a><span class="lineno">  442</span>&#160; </div>
<div class="line"><a name="l00443"></a><span class="lineno">  443</span>&#160;  <span class="comment">// We started analyze new instruction, increment scanned instructions counter.</span></div>
<div class="line"><a name="l00444"></a><span class="lineno">  444</span>&#160;  ++TotalInsts;</div>
<div class="line"><a name="l00445"></a><span class="lineno">  445</span>&#160; </div>
<div class="line"><a name="l00446"></a><span class="lineno">  446</span>&#160;  <span class="comment">// We can never unswitch on vector conditions.</span></div>
<div class="line"><a name="l00447"></a><span class="lineno">  447</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="BasicBlockSections_8cpp.html#a5fd0741d696f28faf65b33f6c6af8fda">Cond</a>-&gt;getType()-&gt;isVectorTy())</div>
<div class="line"><a name="l00448"></a><span class="lineno">  448</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l00449"></a><span class="lineno">  449</span>&#160; </div>
<div class="line"><a name="l00450"></a><span class="lineno">  450</span>&#160;  <span class="comment">// Constants should be folded, not unswitched on!</span></div>
<div class="line"><a name="l00451"></a><span class="lineno">  451</span>&#160;  <span class="keywordflow">if</span> (isa&lt;Constant&gt;(<a class="code" href="BasicBlockSections_8cpp.html#a5fd0741d696f28faf65b33f6c6af8fda">Cond</a>)) <span class="keywordflow">return</span> <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l00452"></a><span class="lineno">  452</span>&#160; </div>
<div class="line"><a name="l00453"></a><span class="lineno">  453</span>&#160;  <span class="comment">// TODO: Handle: br (VARIANT|INVARIANT).</span></div>
<div class="line"><a name="l00454"></a><span class="lineno">  454</span>&#160; </div>
<div class="line"><a name="l00455"></a><span class="lineno">  455</span>&#160;  <span class="comment">// Hoist simple values out.</span></div>
<div class="line"><a name="l00456"></a><span class="lineno">  456</span>&#160;  <span class="keywordflow">if</span> (L-&gt;<a class="code" href="classllvm_1_1Loop.html#af32b39e148b070e04e18fccbed19cded">makeLoopInvariant</a>(<a class="code" href="BasicBlockSections_8cpp.html#a5fd0741d696f28faf65b33f6c6af8fda">Cond</a>, Changed, <span class="keyword">nullptr</span>, MSSAU)) {</div>
<div class="line"><a name="l00457"></a><span class="lineno">  457</span>&#160;    Cache[<a class="code" href="BasicBlockSections_8cpp.html#a5fd0741d696f28faf65b33f6c6af8fda">Cond</a>] = <a class="code" href="BasicBlockSections_8cpp.html#a5fd0741d696f28faf65b33f6c6af8fda">Cond</a>;</div>
<div class="line"><a name="l00458"></a><span class="lineno">  458</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="BasicBlockSections_8cpp.html#a5fd0741d696f28faf65b33f6c6af8fda">Cond</a>;</div>
<div class="line"><a name="l00459"></a><span class="lineno">  459</span>&#160;  }</div>
<div class="line"><a name="l00460"></a><span class="lineno">  460</span>&#160; </div>
<div class="line"><a name="l00461"></a><span class="lineno">  461</span>&#160;  <span class="comment">// Walk up the operator chain to find partial invariant conditions.</span></div>
<div class="line"><a name="l00462"></a><span class="lineno">  462</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1BinaryOperator.html">BinaryOperator</a> *BO = dyn_cast&lt;BinaryOperator&gt;(<a class="code" href="BasicBlockSections_8cpp.html#a5fd0741d696f28faf65b33f6c6af8fda">Cond</a>))</div>
<div class="line"><a name="l00463"></a><span class="lineno">  463</span>&#160;    <span class="keywordflow">if</span> (BO-&gt;getOpcode() == Instruction::And ||</div>
<div class="line"><a name="l00464"></a><span class="lineno">  464</span>&#160;        BO-&gt;getOpcode() == Instruction::Or) {</div>
<div class="line"><a name="l00465"></a><span class="lineno">  465</span>&#160;      <span class="comment">// Given the previous operator, compute the current operator chain status.</span></div>
<div class="line"><a name="l00466"></a><span class="lineno">  466</span>&#160;      <a class="code" href="LoopUnswitch_8cpp.html#a488610869ffea06bc4eefcd4592fca9f">OperatorChain</a> NewChain;</div>
<div class="line"><a name="l00467"></a><span class="lineno">  467</span>&#160;      <span class="keywordflow">switch</span> (ParentChain) {</div>
<div class="line"><a name="l00468"></a><span class="lineno">  468</span>&#160;      <span class="keywordflow">case</span> <a class="code" href="LoopUnswitch_8cpp.html#a488610869ffea06bc4eefcd4592fca9fa9d8893109f11fee0c7829aabbc8e5f42">OC_OpChainNone</a>:</div>
<div class="line"><a name="l00469"></a><span class="lineno">  469</span>&#160;        NewChain = BO-&gt;getOpcode() == Instruction::And ? <a class="code" href="LoopUnswitch_8cpp.html#a488610869ffea06bc4eefcd4592fca9fae7493b8ace82c60402b77a20b8bfe17a">OC_OpChainAnd</a> :</div>
<div class="line"><a name="l00470"></a><span class="lineno">  470</span>&#160;                                      <a class="code" href="LoopUnswitch_8cpp.html#a488610869ffea06bc4eefcd4592fca9fa391236be716257cd22a3b77f48baba8b">OC_OpChainOr</a>;</div>
<div class="line"><a name="l00471"></a><span class="lineno">  471</span>&#160;        <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00472"></a><span class="lineno">  472</span>&#160;      <span class="keywordflow">case</span> <a class="code" href="LoopUnswitch_8cpp.html#a488610869ffea06bc4eefcd4592fca9fa391236be716257cd22a3b77f48baba8b">OC_OpChainOr</a>:</div>
<div class="line"><a name="l00473"></a><span class="lineno">  473</span>&#160;        NewChain = BO-&gt;getOpcode() == Instruction::Or ? <a class="code" href="LoopUnswitch_8cpp.html#a488610869ffea06bc4eefcd4592fca9fa391236be716257cd22a3b77f48baba8b">OC_OpChainOr</a> :</div>
<div class="line"><a name="l00474"></a><span class="lineno">  474</span>&#160;                                      <a class="code" href="LoopUnswitch_8cpp.html#a488610869ffea06bc4eefcd4592fca9fafbf28b984bde89995c3b39b4e331449b">OC_OpChainMixed</a>;</div>
<div class="line"><a name="l00475"></a><span class="lineno">  475</span>&#160;        <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00476"></a><span class="lineno">  476</span>&#160;      <span class="keywordflow">case</span> <a class="code" href="LoopUnswitch_8cpp.html#a488610869ffea06bc4eefcd4592fca9fae7493b8ace82c60402b77a20b8bfe17a">OC_OpChainAnd</a>:</div>
<div class="line"><a name="l00477"></a><span class="lineno">  477</span>&#160;        NewChain = BO-&gt;getOpcode() == Instruction::And ? <a class="code" href="LoopUnswitch_8cpp.html#a488610869ffea06bc4eefcd4592fca9fae7493b8ace82c60402b77a20b8bfe17a">OC_OpChainAnd</a> :</div>
<div class="line"><a name="l00478"></a><span class="lineno">  478</span>&#160;                                      <a class="code" href="LoopUnswitch_8cpp.html#a488610869ffea06bc4eefcd4592fca9fafbf28b984bde89995c3b39b4e331449b">OC_OpChainMixed</a>;</div>
<div class="line"><a name="l00479"></a><span class="lineno">  479</span>&#160;        <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00480"></a><span class="lineno">  480</span>&#160;      <span class="keywordflow">case</span> <a class="code" href="LoopUnswitch_8cpp.html#a488610869ffea06bc4eefcd4592fca9fafbf28b984bde89995c3b39b4e331449b">OC_OpChainMixed</a>:</div>
<div class="line"><a name="l00481"></a><span class="lineno">  481</span>&#160;        NewChain = <a class="code" href="LoopUnswitch_8cpp.html#a488610869ffea06bc4eefcd4592fca9fafbf28b984bde89995c3b39b4e331449b">OC_OpChainMixed</a>;</div>
<div class="line"><a name="l00482"></a><span class="lineno">  482</span>&#160;        <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00483"></a><span class="lineno">  483</span>&#160;      }</div>
<div class="line"><a name="l00484"></a><span class="lineno">  484</span>&#160; </div>
<div class="line"><a name="l00485"></a><span class="lineno">  485</span>&#160;      <span class="comment">// If we reach a Mixed state, we do not want to keep walking up as we can not</span></div>
<div class="line"><a name="l00486"></a><span class="lineno">  486</span>&#160;      <span class="comment">// reliably find a value that will simplify the chain. With this check, we</span></div>
<div class="line"><a name="l00487"></a><span class="lineno">  487</span>&#160;      <span class="comment">// will return null on the first sight of mixed chain and the caller will</span></div>
<div class="line"><a name="l00488"></a><span class="lineno">  488</span>&#160;      <span class="comment">// either backtrack to find partial LIV in other operand or return null.</span></div>
<div class="line"><a name="l00489"></a><span class="lineno">  489</span>&#160;      <span class="keywordflow">if</span> (NewChain != <a class="code" href="LoopUnswitch_8cpp.html#a488610869ffea06bc4eefcd4592fca9fafbf28b984bde89995c3b39b4e331449b">OC_OpChainMixed</a>) {</div>
<div class="line"><a name="l00490"></a><span class="lineno">  490</span>&#160;        <span class="comment">// Update the current operator chain type before we search up the chain.</span></div>
<div class="line"><a name="l00491"></a><span class="lineno">  491</span>&#160;        ParentChain = NewChain;</div>
<div class="line"><a name="l00492"></a><span class="lineno">  492</span>&#160;        <span class="comment">// If either the left or right side is invariant, we can unswitch on this,</span></div>
<div class="line"><a name="l00493"></a><span class="lineno">  493</span>&#160;        <span class="comment">// which will cause the branch to go away in one loop and the condition to</span></div>
<div class="line"><a name="l00494"></a><span class="lineno">  494</span>&#160;        <span class="comment">// simplify in the other one.</span></div>
<div class="line"><a name="l00495"></a><span class="lineno">  495</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1Value.html">Value</a> *LHS = <a class="code" href="LoopUnswitch_8cpp.html#a9666818bb4bec9f66119ddb9fb3c2c63">findLIVLoopCondition</a>(BO-&gt;getOperand(0), L, Changed,</div>
<div class="line"><a name="l00496"></a><span class="lineno">  496</span>&#160;                                              ParentChain, Cache, MSSAU)) {</div>
<div class="line"><a name="l00497"></a><span class="lineno">  497</span>&#160;          Cache[<a class="code" href="BasicBlockSections_8cpp.html#a5fd0741d696f28faf65b33f6c6af8fda">Cond</a>] = LHS;</div>
<div class="line"><a name="l00498"></a><span class="lineno">  498</span>&#160;          <span class="keywordflow">return</span> LHS;</div>
<div class="line"><a name="l00499"></a><span class="lineno">  499</span>&#160;        }</div>
<div class="line"><a name="l00500"></a><span class="lineno">  500</span>&#160;        <span class="comment">// We did not manage to find a partial LIV in operand(0). Backtrack and try</span></div>
<div class="line"><a name="l00501"></a><span class="lineno">  501</span>&#160;        <span class="comment">// operand(1).</span></div>
<div class="line"><a name="l00502"></a><span class="lineno">  502</span>&#160;        ParentChain = NewChain;</div>
<div class="line"><a name="l00503"></a><span class="lineno">  503</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1Value.html">Value</a> *RHS = <a class="code" href="LoopUnswitch_8cpp.html#a9666818bb4bec9f66119ddb9fb3c2c63">findLIVLoopCondition</a>(BO-&gt;getOperand(1), L, Changed,</div>
<div class="line"><a name="l00504"></a><span class="lineno">  504</span>&#160;                                              ParentChain, Cache, MSSAU)) {</div>
<div class="line"><a name="l00505"></a><span class="lineno">  505</span>&#160;          Cache[<a class="code" href="BasicBlockSections_8cpp.html#a5fd0741d696f28faf65b33f6c6af8fda">Cond</a>] = RHS;</div>
<div class="line"><a name="l00506"></a><span class="lineno">  506</span>&#160;          <span class="keywordflow">return</span> RHS;</div>
<div class="line"><a name="l00507"></a><span class="lineno">  507</span>&#160;        }</div>
<div class="line"><a name="l00508"></a><span class="lineno">  508</span>&#160;      }</div>
<div class="line"><a name="l00509"></a><span class="lineno">  509</span>&#160;    }</div>
<div class="line"><a name="l00510"></a><span class="lineno">  510</span>&#160; </div>
<div class="line"><a name="l00511"></a><span class="lineno">  511</span>&#160;  Cache[<a class="code" href="BasicBlockSections_8cpp.html#a5fd0741d696f28faf65b33f6c6af8fda">Cond</a>] = <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l00512"></a><span class="lineno">  512</span>&#160;  <span class="keywordflow">return</span> <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l00513"></a><span class="lineno">  513</span>&#160;}</div>
<div class="line"><a name="l00514"></a><span class="lineno">  514</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l00515"></a><span class="lineno">  515</span>&#160;<span class="comment">/// Cond is a condition that occurs in L. If it is invariant in the loop, or has</span></div>
<div class="line"><a name="l00516"></a><span class="lineno">  516</span>&#160;<span class="comment">/// an invariant piece, return the invariant along with the operator chain type.</span></div>
<div class="line"><a name="l00517"></a><span class="lineno">  517</span>&#160;<span class="comment">/// Otherwise, return null.</span></div>
<div class="line"><a name="l00518"></a><span class="lineno">  518</span>&#160;<span class="comment"></span><span class="keyword">static</span> std::pair&lt;Value *, OperatorChain&gt;</div>
<div class="line"><a name="l00519"></a><span class="lineno"><a class="line" href="LoopUnswitch_8cpp.html#a87f20dfe1a0a97ad0ee6f27f2cbaa388">  519</a></span>&#160;<a class="code" href="LoopUnswitch_8cpp.html#a9666818bb4bec9f66119ddb9fb3c2c63">findLIVLoopCondition</a>(<a class="code" href="classllvm_1_1Value.html">Value</a> *<a class="code" href="BasicBlockSections_8cpp.html#a5fd0741d696f28faf65b33f6c6af8fda">Cond</a>, <a class="code" href="classllvm_1_1Loop.html">Loop</a> *L, <span class="keywordtype">bool</span> &amp;Changed,</div>
<div class="line"><a name="l00520"></a><span class="lineno">  520</span>&#160;                     <a class="code" href="classllvm_1_1MemorySSAUpdater.html">MemorySSAUpdater</a> *MSSAU) {</div>
<div class="line"><a name="l00521"></a><span class="lineno">  521</span>&#160;  <a class="code" href="classllvm_1_1DenseMap.html">DenseMap&lt;Value *, Value *&gt;</a> Cache;</div>
<div class="line"><a name="l00522"></a><span class="lineno">  522</span>&#160;  <a class="code" href="LoopUnswitch_8cpp.html#a488610869ffea06bc4eefcd4592fca9f">OperatorChain</a> OpChain = <a class="code" href="LoopUnswitch_8cpp.html#a488610869ffea06bc4eefcd4592fca9fa9d8893109f11fee0c7829aabbc8e5f42">OC_OpChainNone</a>;</div>
<div class="line"><a name="l00523"></a><span class="lineno">  523</span>&#160;  <a class="code" href="classllvm_1_1Value.html">Value</a> *FCond = <a class="code" href="LoopUnswitch_8cpp.html#a9666818bb4bec9f66119ddb9fb3c2c63">findLIVLoopCondition</a>(<a class="code" href="BasicBlockSections_8cpp.html#a5fd0741d696f28faf65b33f6c6af8fda">Cond</a>, L, Changed, OpChain, Cache, MSSAU);</div>
<div class="line"><a name="l00524"></a><span class="lineno">  524</span>&#160; </div>
<div class="line"><a name="l00525"></a><span class="lineno">  525</span>&#160;  <span class="comment">// In case we do find a LIV, it can not be obtained by walking up a mixed</span></div>
<div class="line"><a name="l00526"></a><span class="lineno">  526</span>&#160;  <span class="comment">// operator chain.</span></div>
<div class="line"><a name="l00527"></a><span class="lineno">  527</span>&#160;  <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>((!FCond || OpChain != <a class="code" href="LoopUnswitch_8cpp.html#a488610869ffea06bc4eefcd4592fca9fafbf28b984bde89995c3b39b4e331449b">OC_OpChainMixed</a>) &amp;&amp;</div>
<div class="line"><a name="l00528"></a><span class="lineno">  528</span>&#160;        <span class="stringliteral">&quot;Do not expect a partial LIV with mixed operator chain&quot;</span>);</div>
<div class="line"><a name="l00529"></a><span class="lineno">  529</span>&#160;  <span class="keywordflow">return</span> {FCond, OpChain};</div>
<div class="line"><a name="l00530"></a><span class="lineno">  530</span>&#160;}</div>
<div class="line"><a name="l00531"></a><span class="lineno">  531</span>&#160; </div>
<div class="line"><a name="l00532"></a><span class="lineno">  532</span>&#160;<span class="keywordtype">bool</span> LoopUnswitch::runOnLoop(<a class="code" href="classllvm_1_1Loop.html">Loop</a> *L, <a class="code" href="classllvm_1_1LPPassManager.html">LPPassManager</a> &amp;LPMRef) {</div>
<div class="line"><a name="l00533"></a><span class="lineno">  533</span>&#160;  <span class="keywordflow">if</span> (skipLoop(L))</div>
<div class="line"><a name="l00534"></a><span class="lineno">  534</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l00535"></a><span class="lineno">  535</span>&#160; </div>
<div class="line"><a name="l00536"></a><span class="lineno">  536</span>&#160;  AC = &amp;getAnalysis&lt;AssumptionCacheTracker&gt;().getAssumptionCache(</div>
<div class="line"><a name="l00537"></a><span class="lineno">  537</span>&#160;      *L-&gt;<a class="code" href="classllvm_1_1LoopBase.html#a58c5b170ea68b41e94ebb0019523a68f">getHeader</a>()-&gt;<a class="code" href="classllvm_1_1BasicBlock.html#a38bee869ad41aebfef3de2641b12004c">getParent</a>());</div>
<div class="line"><a name="l00538"></a><span class="lineno">  538</span>&#160;  LI = &amp;getAnalysis&lt;LoopInfoWrapperPass&gt;().getLoopInfo();</div>
<div class="line"><a name="l00539"></a><span class="lineno">  539</span>&#160;  LPM = &amp;LPMRef;</div>
<div class="line"><a name="l00540"></a><span class="lineno">  540</span>&#160;  DT = &amp;getAnalysis&lt;DominatorTreeWrapperPass&gt;().getDomTree();</div>
<div class="line"><a name="l00541"></a><span class="lineno">  541</span>&#160;  AA = &amp;getAnalysis&lt;AAResultsWrapperPass&gt;().getAAResults();</div>
<div class="line"><a name="l00542"></a><span class="lineno">  542</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="namespacellvm.html#a1b08b801426881b2a106ccb2e1c79cf3">EnableMSSALoopDependency</a>) {</div>
<div class="line"><a name="l00543"></a><span class="lineno">  543</span>&#160;    MSSA = &amp;getAnalysis&lt;MemorySSAWrapperPass&gt;().getMSSA();</div>
<div class="line"><a name="l00544"></a><span class="lineno">  544</span>&#160;    MSSAU = std::make_unique&lt;MemorySSAUpdater&gt;(MSSA);</div>
<div class="line"><a name="l00545"></a><span class="lineno">  545</span>&#160;    <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(DT &amp;&amp; <span class="stringliteral">&quot;Cannot update MemorySSA without a valid DomTree.&quot;</span>);</div>
<div class="line"><a name="l00546"></a><span class="lineno">  546</span>&#160;  }</div>
<div class="line"><a name="l00547"></a><span class="lineno">  547</span>&#160;  CurrentLoop = L;</div>
<div class="line"><a name="l00548"></a><span class="lineno">  548</span>&#160;  <a class="code" href="classllvm_1_1Function.html">Function</a> *<a class="code" href="MD5_8cpp.html#a96d73bbd7af15cb1fc38c3f4a3bd82e9">F</a> = CurrentLoop-&gt;<a class="code" href="classllvm_1_1LoopBase.html#a58c5b170ea68b41e94ebb0019523a68f">getHeader</a>()-&gt;<a class="code" href="classllvm_1_1BasicBlock.html#a38bee869ad41aebfef3de2641b12004c">getParent</a>();</div>
<div class="line"><a name="l00549"></a><span class="lineno">  549</span>&#160; </div>
<div class="line"><a name="l00550"></a><span class="lineno">  550</span>&#160;  SanitizeMemory = <a class="code" href="MD5_8cpp.html#a96d73bbd7af15cb1fc38c3f4a3bd82e9">F</a>-&gt;hasFnAttribute(Attribute::SanitizeMemory);</div>
<div class="line"><a name="l00551"></a><span class="lineno">  551</span>&#160;  <span class="keywordflow">if</span> (SanitizeMemory)</div>
<div class="line"><a name="l00552"></a><span class="lineno">  552</span>&#160;    SafetyInfo.<a class="code" href="classllvm_1_1SimpleLoopSafetyInfo.html#a262c2df9639d3f71b8d2a8158b819809">computeLoopSafetyInfo</a>(L);</div>
<div class="line"><a name="l00553"></a><span class="lineno">  553</span>&#160; </div>
<div class="line"><a name="l00554"></a><span class="lineno">  554</span>&#160;  <span class="keywordflow">if</span> (MSSA &amp;&amp; <a class="code" href="namespacellvm.html#aa29fe161c408879ada30c90ebbf55dcf">VerifyMemorySSA</a>)</div>
<div class="line"><a name="l00555"></a><span class="lineno">  555</span>&#160;    MSSA-&gt;<a class="code" href="classllvm_1_1MemorySSA.html#a1b675075f5fd5a025edeca069612042e">verifyMemorySSA</a>();</div>
<div class="line"><a name="l00556"></a><span class="lineno">  556</span>&#160; </div>
<div class="line"><a name="l00557"></a><span class="lineno">  557</span>&#160;  <span class="keywordtype">bool</span> Changed = <span class="keyword">false</span>;</div>
<div class="line"><a name="l00558"></a><span class="lineno">  558</span>&#160;  <span class="keywordflow">do</span> {</div>
<div class="line"><a name="l00559"></a><span class="lineno">  559</span>&#160;    <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(CurrentLoop-&gt;<a class="code" href="classllvm_1_1Loop.html#a6633de38a82ca61150d48f9860ab127d">isLCSSAForm</a>(*DT));</div>
<div class="line"><a name="l00560"></a><span class="lineno">  560</span>&#160;    <span class="keywordflow">if</span> (MSSA &amp;&amp; <a class="code" href="namespacellvm.html#aa29fe161c408879ada30c90ebbf55dcf">VerifyMemorySSA</a>)</div>
<div class="line"><a name="l00561"></a><span class="lineno">  561</span>&#160;      MSSA-&gt;<a class="code" href="classllvm_1_1MemorySSA.html#a1b675075f5fd5a025edeca069612042e">verifyMemorySSA</a>();</div>
<div class="line"><a name="l00562"></a><span class="lineno">  562</span>&#160;    RedoLoop = <span class="keyword">false</span>;</div>
<div class="line"><a name="l00563"></a><span class="lineno">  563</span>&#160;    Changed |= processCurrentLoop();</div>
<div class="line"><a name="l00564"></a><span class="lineno">  564</span>&#160;  } <span class="keywordflow">while</span> (RedoLoop);</div>
<div class="line"><a name="l00565"></a><span class="lineno">  565</span>&#160; </div>
<div class="line"><a name="l00566"></a><span class="lineno">  566</span>&#160;  <span class="keywordflow">if</span> (MSSA &amp;&amp; <a class="code" href="namespacellvm.html#aa29fe161c408879ada30c90ebbf55dcf">VerifyMemorySSA</a>)</div>
<div class="line"><a name="l00567"></a><span class="lineno">  567</span>&#160;    MSSA-&gt;<a class="code" href="classllvm_1_1MemorySSA.html#a1b675075f5fd5a025edeca069612042e">verifyMemorySSA</a>();</div>
<div class="line"><a name="l00568"></a><span class="lineno">  568</span>&#160; </div>
<div class="line"><a name="l00569"></a><span class="lineno">  569</span>&#160;  <span class="keywordflow">return</span> Changed;</div>
<div class="line"><a name="l00570"></a><span class="lineno">  570</span>&#160;}</div>
<div class="line"><a name="l00571"></a><span class="lineno">  571</span>&#160; </div>
<div class="line"><a name="l00572"></a><span class="lineno">  572</span>&#160;<span class="comment">// Return true if the BasicBlock BB is unreachable from the loop header.</span></div>
<div class="line"><a name="l00573"></a><span class="lineno">  573</span>&#160;<span class="comment">// Return false, otherwise.</span></div>
<div class="line"><a name="l00574"></a><span class="lineno">  574</span>&#160;<span class="keywordtype">bool</span> LoopUnswitch::isUnreachableDueToPreviousUnswitching(<a class="code" href="classllvm_1_1BasicBlock.html">BasicBlock</a> *<a class="code" href="lib_2CodeGen_2README_8txt.html#a09776db24cf586ec9f1e18f3bae14099">BB</a>) {</div>
<div class="line"><a name="l00575"></a><span class="lineno">  575</span>&#160;  <span class="keyword">auto</span> *Node = DT-&gt;<a class="code" href="classllvm_1_1DominatorTreeBase.html#a4344e66fb61ea313a85a9e054124ac55">getNode</a>(<a class="code" href="lib_2CodeGen_2README_8txt.html#a09776db24cf586ec9f1e18f3bae14099">BB</a>)-&gt;<a class="code" href="classllvm_1_1DomTreeNodeBase.html#aa22cb3ff8c95bb05185acad8c569d4b6">getIDom</a>();</div>
<div class="line"><a name="l00576"></a><span class="lineno">  576</span>&#160;  <a class="code" href="classllvm_1_1BasicBlock.html">BasicBlock</a> *DomBB = Node-&gt;getBlock();</div>
<div class="line"><a name="l00577"></a><span class="lineno">  577</span>&#160;  <span class="keywordflow">while</span> (CurrentLoop-&gt;<a class="code" href="classllvm_1_1LoopBase.html#a04337b572d34ea413c35dbac5d75530b">contains</a>(DomBB)) {</div>
<div class="line"><a name="l00578"></a><span class="lineno">  578</span>&#160;    <a class="code" href="classllvm_1_1BranchInst.html">BranchInst</a> *BInst = dyn_cast&lt;BranchInst&gt;(DomBB-&gt;<a class="code" href="classllvm_1_1BasicBlock.html#a71a9eabc4318b2fc34f83b01dfee484b">getTerminator</a>());</div>
<div class="line"><a name="l00579"></a><span class="lineno">  579</span>&#160; </div>
<div class="line"><a name="l00580"></a><span class="lineno">  580</span>&#160;    Node = DT-&gt;<a class="code" href="classllvm_1_1DominatorTreeBase.html#a4344e66fb61ea313a85a9e054124ac55">getNode</a>(DomBB)-&gt;<a class="code" href="classllvm_1_1DomTreeNodeBase.html#aa22cb3ff8c95bb05185acad8c569d4b6">getIDom</a>();</div>
<div class="line"><a name="l00581"></a><span class="lineno">  581</span>&#160;    DomBB = Node-&gt;getBlock();</div>
<div class="line"><a name="l00582"></a><span class="lineno">  582</span>&#160; </div>
<div class="line"><a name="l00583"></a><span class="lineno">  583</span>&#160;    <span class="keywordflow">if</span> (!BInst || !BInst-&gt;<a class="code" href="classllvm_1_1BranchInst.html#a7e4be8b16fbd68c9045a388904044e01">isConditional</a>())</div>
<div class="line"><a name="l00584"></a><span class="lineno">  584</span>&#160;      <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l00585"></a><span class="lineno">  585</span>&#160; </div>
<div class="line"><a name="l00586"></a><span class="lineno">  586</span>&#160;    <a class="code" href="classllvm_1_1Value.html">Value</a> *<a class="code" href="BasicBlockSections_8cpp.html#a5fd0741d696f28faf65b33f6c6af8fda">Cond</a> = BInst-&gt;<a class="code" href="classllvm_1_1BranchInst.html#aac456a62894c9f0f8e9f06373bbf40f0">getCondition</a>();</div>
<div class="line"><a name="l00587"></a><span class="lineno">  587</span>&#160;    <span class="keywordflow">if</span> (!isa&lt;ConstantInt&gt;(<a class="code" href="BasicBlockSections_8cpp.html#a5fd0741d696f28faf65b33f6c6af8fda">Cond</a>))</div>
<div class="line"><a name="l00588"></a><span class="lineno">  588</span>&#160;      <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l00589"></a><span class="lineno">  589</span>&#160; </div>
<div class="line"><a name="l00590"></a><span class="lineno">  590</span>&#160;    <a class="code" href="classllvm_1_1BasicBlock.html">BasicBlock</a> *UnreachableSucc =</div>
<div class="line"><a name="l00591"></a><span class="lineno">  591</span>&#160;        <a class="code" href="BasicBlockSections_8cpp.html#a5fd0741d696f28faf65b33f6c6af8fda">Cond</a> == <a class="code" href="classllvm_1_1ConstantInt.html#a82dbbd8e3688b0bc1eedb338864d0d0c">ConstantInt::getTrue</a>(<a class="code" href="BasicBlockSections_8cpp.html#a5fd0741d696f28faf65b33f6c6af8fda">Cond</a>-&gt;getContext())</div>
<div class="line"><a name="l00592"></a><span class="lineno">  592</span>&#160;            ? BInst-&gt;<a class="code" href="classllvm_1_1BranchInst.html#ad97f2e60cf22f15e0cf617af52309031">getSuccessor</a>(1)</div>
<div class="line"><a name="l00593"></a><span class="lineno">  593</span>&#160;            : BInst-&gt;<a class="code" href="classllvm_1_1BranchInst.html#ad97f2e60cf22f15e0cf617af52309031">getSuccessor</a>(0);</div>
<div class="line"><a name="l00594"></a><span class="lineno">  594</span>&#160; </div>
<div class="line"><a name="l00595"></a><span class="lineno">  595</span>&#160;    <span class="keywordflow">if</span> (DT-&gt;<a class="code" href="classllvm_1_1DominatorTree.html#a5c69311e8d44898dac36a155c3d8691d">dominates</a>(UnreachableSucc, <a class="code" href="lib_2CodeGen_2README_8txt.html#a09776db24cf586ec9f1e18f3bae14099">BB</a>))</div>
<div class="line"><a name="l00596"></a><span class="lineno">  596</span>&#160;      <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l00597"></a><span class="lineno">  597</span>&#160;  }</div>
<div class="line"><a name="l00598"></a><span class="lineno">  598</span>&#160;  <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l00599"></a><span class="lineno">  599</span>&#160;}</div>
<div class="line"><a name="l00600"></a><span class="lineno">  600</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l00601"></a><span class="lineno">  601</span>&#160;<span class="comment">/// FIXME: Remove this workaround when freeze related patches are done.</span></div>
<div class="line"><a name="l00602"></a><span class="lineno">  602</span>&#160;<span class="comment">/// LoopUnswitch and Equality propagation in GVN have discrepancy about</span></div>
<div class="line"><a name="l00603"></a><span class="lineno">  603</span>&#160;<span class="comment">/// whether branch on undef/poison has undefine behavior. Here it is to</span></div>
<div class="line"><a name="l00604"></a><span class="lineno">  604</span>&#160;<span class="comment">/// rule out some common cases that we found such discrepancy already</span></div>
<div class="line"><a name="l00605"></a><span class="lineno">  605</span>&#160;<span class="comment">/// causing problems. Detail could be found in PR31652. Note if the</span></div>
<div class="line"><a name="l00606"></a><span class="lineno">  606</span>&#160;<span class="comment">/// func returns true, it is unsafe. But if it is false, it doesn&#39;t mean</span></div>
<div class="line"><a name="l00607"></a><span class="lineno">  607</span>&#160;<span class="comment">/// it is necessarily safe.</span></div>
<div class="line"><a name="l00608"></a><span class="lineno"><a class="line" href="LoopUnswitch_8cpp.html#a052e6e0563b0e12cd740eb375184c9e5">  608</a></span>&#160;<span class="comment"></span><span class="keyword">static</span> <span class="keywordtype">bool</span> <a class="code" href="LoopUnswitch_8cpp.html#a052e6e0563b0e12cd740eb375184c9e5">equalityPropUnSafe</a>(<a class="code" href="classllvm_1_1Value.html">Value</a> &amp;LoopCond) {</div>
<div class="line"><a name="l00609"></a><span class="lineno">  609</span>&#160;  <a class="code" href="classllvm_1_1ICmpInst.html">ICmpInst</a> *CI = dyn_cast&lt;ICmpInst&gt;(&amp;LoopCond);</div>
<div class="line"><a name="l00610"></a><span class="lineno">  610</span>&#160;  <span class="keywordflow">if</span> (!CI || !CI-&gt;<a class="code" href="classllvm_1_1ICmpInst.html#abe8988eef2e6fc2baba032cb22afedd7">isEquality</a>())</div>
<div class="line"><a name="l00611"></a><span class="lineno">  611</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l00612"></a><span class="lineno">  612</span>&#160; </div>
<div class="line"><a name="l00613"></a><span class="lineno">  613</span>&#160;  <a class="code" href="classllvm_1_1Value.html">Value</a> *LHS = CI-&gt;<a class="code" href="classllvm_1_1User.html#abe1de1520a21f77ac57cc210bf0fb0b4">getOperand</a>(0);</div>
<div class="line"><a name="l00614"></a><span class="lineno">  614</span>&#160;  <a class="code" href="classllvm_1_1Value.html">Value</a> *RHS = CI-&gt;<a class="code" href="classllvm_1_1User.html#abe1de1520a21f77ac57cc210bf0fb0b4">getOperand</a>(1);</div>
<div class="line"><a name="l00615"></a><span class="lineno">  615</span>&#160;  <span class="keywordflow">if</span> (isa&lt;UndefValue&gt;(LHS) || isa&lt;UndefValue&gt;(RHS))</div>
<div class="line"><a name="l00616"></a><span class="lineno">  616</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l00617"></a><span class="lineno">  617</span>&#160; </div>
<div class="line"><a name="l00618"></a><span class="lineno">  618</span>&#160;  <span class="keyword">auto</span> HasUndefInPHI = [](<a class="code" href="classllvm_1_1PHINode.html">PHINode</a> &amp;PN) {</div>
<div class="line"><a name="l00619"></a><span class="lineno">  619</span>&#160;    <span class="keywordflow">for</span> (<a class="code" href="classllvm_1_1Value.html">Value</a> *Opd : PN.incoming_values()) {</div>
<div class="line"><a name="l00620"></a><span class="lineno">  620</span>&#160;      <span class="keywordflow">if</span> (isa&lt;UndefValue&gt;(Opd))</div>
<div class="line"><a name="l00621"></a><span class="lineno">  621</span>&#160;        <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l00622"></a><span class="lineno">  622</span>&#160;    }</div>
<div class="line"><a name="l00623"></a><span class="lineno">  623</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l00624"></a><span class="lineno">  624</span>&#160;  };</div>
<div class="line"><a name="l00625"></a><span class="lineno">  625</span>&#160;  <a class="code" href="classllvm_1_1PHINode.html">PHINode</a> *LPHI = dyn_cast&lt;PHINode&gt;(LHS);</div>
<div class="line"><a name="l00626"></a><span class="lineno">  626</span>&#160;  <a class="code" href="classllvm_1_1PHINode.html">PHINode</a> *RPHI = dyn_cast&lt;PHINode&gt;(RHS);</div>
<div class="line"><a name="l00627"></a><span class="lineno">  627</span>&#160;  <span class="keywordflow">if</span> ((LPHI &amp;&amp; HasUndefInPHI(*LPHI)) || (RPHI &amp;&amp; HasUndefInPHI(*RPHI)))</div>
<div class="line"><a name="l00628"></a><span class="lineno">  628</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l00629"></a><span class="lineno">  629</span>&#160; </div>
<div class="line"><a name="l00630"></a><span class="lineno">  630</span>&#160;  <span class="keyword">auto</span> HasUndefInSelect = [](<a class="code" href="classllvm_1_1SelectInst.html">SelectInst</a> &amp;<a class="code" href="PassBuilderBindings_8cpp.html#a0f79dad1efc582555a443cc11a8fa401">SI</a>) {</div>
<div class="line"><a name="l00631"></a><span class="lineno">  631</span>&#160;    <span class="keywordflow">if</span> (isa&lt;UndefValue&gt;(<a class="code" href="PassBuilderBindings_8cpp.html#a0f79dad1efc582555a443cc11a8fa401">SI</a>.getTrueValue()) ||</div>
<div class="line"><a name="l00632"></a><span class="lineno">  632</span>&#160;        isa&lt;UndefValue&gt;(<a class="code" href="PassBuilderBindings_8cpp.html#a0f79dad1efc582555a443cc11a8fa401">SI</a>.getFalseValue()))</div>
<div class="line"><a name="l00633"></a><span class="lineno">  633</span>&#160;      <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l00634"></a><span class="lineno">  634</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l00635"></a><span class="lineno">  635</span>&#160;  };</div>
<div class="line"><a name="l00636"></a><span class="lineno">  636</span>&#160;  <a class="code" href="classllvm_1_1SelectInst.html">SelectInst</a> *LSI = dyn_cast&lt;SelectInst&gt;(LHS);</div>
<div class="line"><a name="l00637"></a><span class="lineno">  637</span>&#160;  <a class="code" href="classllvm_1_1SelectInst.html">SelectInst</a> *RSI = dyn_cast&lt;SelectInst&gt;(RHS);</div>
<div class="line"><a name="l00638"></a><span class="lineno">  638</span>&#160;  <span class="keywordflow">if</span> ((LSI &amp;&amp; HasUndefInSelect(*LSI)) || (RSI &amp;&amp; HasUndefInSelect(*RSI)))</div>
<div class="line"><a name="l00639"></a><span class="lineno">  639</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l00640"></a><span class="lineno">  640</span>&#160;  <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l00641"></a><span class="lineno">  641</span>&#160;}</div>
<div class="line"><a name="l00642"></a><span class="lineno">  642</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l00643"></a><span class="lineno">  643</span>&#160;<span class="comment">/// Do actual work and unswitch loop if possible and profitable.</span></div>
<div class="line"><a name="l00644"></a><span class="lineno">  644</span>&#160;<span class="comment"></span><span class="keywordtype">bool</span> LoopUnswitch::processCurrentLoop() {</div>
<div class="line"><a name="l00645"></a><span class="lineno">  645</span>&#160;  <span class="keywordtype">bool</span> Changed = <span class="keyword">false</span>;</div>
<div class="line"><a name="l00646"></a><span class="lineno">  646</span>&#160; </div>
<div class="line"><a name="l00647"></a><span class="lineno">  647</span>&#160;  initLoopData();</div>
<div class="line"><a name="l00648"></a><span class="lineno">  648</span>&#160; </div>
<div class="line"><a name="l00649"></a><span class="lineno">  649</span>&#160;  <span class="comment">// If LoopSimplify was unable to form a preheader, don&#39;t do any unswitching.</span></div>
<div class="line"><a name="l00650"></a><span class="lineno">  650</span>&#160;  <span class="keywordflow">if</span> (!LoopPreheader)</div>
<div class="line"><a name="l00651"></a><span class="lineno">  651</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l00652"></a><span class="lineno">  652</span>&#160; </div>
<div class="line"><a name="l00653"></a><span class="lineno">  653</span>&#160;  <span class="comment">// Loops with indirectbr cannot be cloned.</span></div>
<div class="line"><a name="l00654"></a><span class="lineno">  654</span>&#160;  <span class="keywordflow">if</span> (!CurrentLoop-&gt;<a class="code" href="classllvm_1_1Loop.html#a1b0ea1f1455192f5e0b0d033784c2d22">isSafeToClone</a>())</div>
<div class="line"><a name="l00655"></a><span class="lineno">  655</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l00656"></a><span class="lineno">  656</span>&#160; </div>
<div class="line"><a name="l00657"></a><span class="lineno">  657</span>&#160;  <span class="comment">// Without dedicated exits, splitting the exit edge may fail.</span></div>
<div class="line"><a name="l00658"></a><span class="lineno">  658</span>&#160;  <span class="keywordflow">if</span> (!CurrentLoop-&gt;<a class="code" href="classllvm_1_1LoopBase.html#ae7ebc88c9b32b51b749bd5bbcfaa5fb8">hasDedicatedExits</a>())</div>
<div class="line"><a name="l00659"></a><span class="lineno">  659</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l00660"></a><span class="lineno">  660</span>&#160; </div>
<div class="line"><a name="l00661"></a><span class="lineno">  661</span>&#160;  <a class="code" href="classllvm_1_1LLVMContext.html">LLVMContext</a> &amp;<a class="code" href="NVVMIntrRange_8cpp.html#afad351d7bf10ac0446b64e7827634e94">Context</a> = LoopHeader-&gt;<a class="code" href="classllvm_1_1BasicBlock.html#aa286a0f7f5d38488d593bb7ef0ba183e">getContext</a>();</div>
<div class="line"><a name="l00662"></a><span class="lineno">  662</span>&#160; </div>
<div class="line"><a name="l00663"></a><span class="lineno">  663</span>&#160;  <span class="comment">// Analyze loop cost, and stop unswitching if loop content can not be duplicated.</span></div>
<div class="line"><a name="l00664"></a><span class="lineno">  664</span>&#160;  <span class="keywordflow">if</span> (!BranchesInfo.countLoop(</div>
<div class="line"><a name="l00665"></a><span class="lineno">  665</span>&#160;          CurrentLoop,</div>
<div class="line"><a name="l00666"></a><span class="lineno">  666</span>&#160;          getAnalysis&lt;TargetTransformInfoWrapperPass&gt;().getTTI(</div>
<div class="line"><a name="l00667"></a><span class="lineno">  667</span>&#160;              *CurrentLoop-&gt;<a class="code" href="classllvm_1_1LoopBase.html#a58c5b170ea68b41e94ebb0019523a68f">getHeader</a>()-&gt;<a class="code" href="classllvm_1_1BasicBlock.html#a38bee869ad41aebfef3de2641b12004c">getParent</a>()),</div>
<div class="line"><a name="l00668"></a><span class="lineno">  668</span>&#160;          AC))</div>
<div class="line"><a name="l00669"></a><span class="lineno">  669</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l00670"></a><span class="lineno">  670</span>&#160; </div>
<div class="line"><a name="l00671"></a><span class="lineno">  671</span>&#160;  <span class="comment">// Try trivial unswitch first before loop over other basic blocks in the loop.</span></div>
<div class="line"><a name="l00672"></a><span class="lineno">  672</span>&#160;  <span class="keywordflow">if</span> (tryTrivialLoopUnswitch(Changed)) {</div>
<div class="line"><a name="l00673"></a><span class="lineno">  673</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l00674"></a><span class="lineno">  674</span>&#160;  }</div>
<div class="line"><a name="l00675"></a><span class="lineno">  675</span>&#160; </div>
<div class="line"><a name="l00676"></a><span class="lineno">  676</span>&#160;  <span class="comment">// Do not do non-trivial unswitch while optimizing for size.</span></div>
<div class="line"><a name="l00677"></a><span class="lineno">  677</span>&#160;  <span class="comment">// FIXME: Use Function::hasOptSize().</span></div>
<div class="line"><a name="l00678"></a><span class="lineno">  678</span>&#160;  <span class="keywordflow">if</span> (OptimizeForSize ||</div>
<div class="line"><a name="l00679"></a><span class="lineno">  679</span>&#160;      LoopHeader-&gt;<a class="code" href="classllvm_1_1BasicBlock.html#a38bee869ad41aebfef3de2641b12004c">getParent</a>()-&gt;<a class="code" href="classllvm_1_1Function.html#aa84505c70a7f4ae97082df0b91bd7a9a">hasFnAttribute</a>(Attribute::OptimizeForSize))</div>
<div class="line"><a name="l00680"></a><span class="lineno">  680</span>&#160;    <span class="keywordflow">return</span> Changed;</div>
<div class="line"><a name="l00681"></a><span class="lineno">  681</span>&#160; </div>
<div class="line"><a name="l00682"></a><span class="lineno">  682</span>&#160;  <span class="comment">// Run through the instructions in the loop, keeping track of three things:</span></div>
<div class="line"><a name="l00683"></a><span class="lineno">  683</span>&#160;  <span class="comment">//</span></div>
<div class="line"><a name="l00684"></a><span class="lineno">  684</span>&#160;  <span class="comment">//  - That we do not unswitch loops containing convergent operations, as we</span></div>
<div class="line"><a name="l00685"></a><span class="lineno">  685</span>&#160;  <span class="comment">//    might be making them control dependent on the unswitch value when they</span></div>
<div class="line"><a name="l00686"></a><span class="lineno">  686</span>&#160;  <span class="comment">//    were not before.</span></div>
<div class="line"><a name="l00687"></a><span class="lineno">  687</span>&#160;  <span class="comment">//    FIXME: This could be refined to only bail if the convergent operation is</span></div>
<div class="line"><a name="l00688"></a><span class="lineno">  688</span>&#160;  <span class="comment">//    not already control-dependent on the unswitch value.</span></div>
<div class="line"><a name="l00689"></a><span class="lineno">  689</span>&#160;  <span class="comment">//</span></div>
<div class="line"><a name="l00690"></a><span class="lineno">  690</span>&#160;  <span class="comment">//  - That basic blocks in the loop contain invokes whose predecessor edges we</span></div>
<div class="line"><a name="l00691"></a><span class="lineno">  691</span>&#160;  <span class="comment">//    cannot split.</span></div>
<div class="line"><a name="l00692"></a><span class="lineno">  692</span>&#160;  <span class="comment">//</span></div>
<div class="line"><a name="l00693"></a><span class="lineno">  693</span>&#160;  <span class="comment">//  - The set of guard intrinsics encountered (these are non terminator</span></div>
<div class="line"><a name="l00694"></a><span class="lineno">  694</span>&#160;  <span class="comment">//    instructions that are also profitable to be unswitched).</span></div>
<div class="line"><a name="l00695"></a><span class="lineno">  695</span>&#160; </div>
<div class="line"><a name="l00696"></a><span class="lineno">  696</span>&#160;  <a class="code" href="classllvm_1_1SmallVector.html">SmallVector&lt;IntrinsicInst *, 4&gt;</a> Guards;</div>
<div class="line"><a name="l00697"></a><span class="lineno">  697</span>&#160; </div>
<div class="line"><a name="l00698"></a><span class="lineno">  698</span>&#160;  <span class="keywordflow">for</span> (<span class="keyword">const</span> <span class="keyword">auto</span> <a class="code" href="lib_2CodeGen_2README_8txt.html#a09776db24cf586ec9f1e18f3bae14099">BB</a> : CurrentLoop-&gt;<a class="code" href="classllvm_1_1LoopBase.html#a40f34cc77d2b3bc73384f535c8101858">blocks</a>()) {</div>
<div class="line"><a name="l00699"></a><span class="lineno">  699</span>&#160;    <span class="keywordflow">for</span> (<span class="keyword">auto</span> &amp;<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a> : *<a class="code" href="lib_2CodeGen_2README_8txt.html#a09776db24cf586ec9f1e18f3bae14099">BB</a>) {</div>
<div class="line"><a name="l00700"></a><span class="lineno">  700</span>&#160;      <span class="keyword">auto</span> *CB = dyn_cast&lt;CallBase&gt;(&amp;<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>);</div>
<div class="line"><a name="l00701"></a><span class="lineno">  701</span>&#160;      <span class="keywordflow">if</span> (!CB)</div>
<div class="line"><a name="l00702"></a><span class="lineno">  702</span>&#160;        <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l00703"></a><span class="lineno">  703</span>&#160;      <span class="keywordflow">if</span> (CB-&gt;isConvergent())</div>
<div class="line"><a name="l00704"></a><span class="lineno">  704</span>&#160;        <span class="keywordflow">return</span> Changed;</div>
<div class="line"><a name="l00705"></a><span class="lineno">  705</span>&#160;      <span class="keywordflow">if</span> (<span class="keyword">auto</span> *II = dyn_cast&lt;InvokeInst&gt;(&amp;<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>))</div>
<div class="line"><a name="l00706"></a><span class="lineno">  706</span>&#160;        <span class="keywordflow">if</span> (!II-&gt;getUnwindDest()-&gt;canSplitPredecessors())</div>
<div class="line"><a name="l00707"></a><span class="lineno">  707</span>&#160;          <span class="keywordflow">return</span> Changed;</div>
<div class="line"><a name="l00708"></a><span class="lineno">  708</span>&#160;      <span class="keywordflow">if</span> (<span class="keyword">auto</span> *II = dyn_cast&lt;IntrinsicInst&gt;(&amp;<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>))</div>
<div class="line"><a name="l00709"></a><span class="lineno">  709</span>&#160;        <span class="keywordflow">if</span> (II-&gt;getIntrinsicID() == Intrinsic::experimental_guard)</div>
<div class="line"><a name="l00710"></a><span class="lineno">  710</span>&#160;          Guards.push_back(II);</div>
<div class="line"><a name="l00711"></a><span class="lineno">  711</span>&#160;    }</div>
<div class="line"><a name="l00712"></a><span class="lineno">  712</span>&#160;  }</div>
<div class="line"><a name="l00713"></a><span class="lineno">  713</span>&#160; </div>
<div class="line"><a name="l00714"></a><span class="lineno">  714</span>&#160;  <span class="keywordflow">for</span> (<a class="code" href="classllvm_1_1IntrinsicInst.html">IntrinsicInst</a> *Guard : Guards) {</div>
<div class="line"><a name="l00715"></a><span class="lineno">  715</span>&#160;    <a class="code" href="classllvm_1_1Value.html">Value</a> *LoopCond = <a class="code" href="LoopUnswitch_8cpp.html#a9666818bb4bec9f66119ddb9fb3c2c63">findLIVLoopCondition</a>(Guard-&gt;getOperand(0), CurrentLoop,</div>
<div class="line"><a name="l00716"></a><span class="lineno">  716</span>&#160;                                           Changed, MSSAU.get())</div>
<div class="line"><a name="l00717"></a><span class="lineno">  717</span>&#160;                          .first;</div>
<div class="line"><a name="l00718"></a><span class="lineno">  718</span>&#160;    <span class="keywordflow">if</span> (LoopCond &amp;&amp;</div>
<div class="line"><a name="l00719"></a><span class="lineno">  719</span>&#160;        unswitchIfProfitable(LoopCond, <a class="code" href="classllvm_1_1ConstantInt.html#a82dbbd8e3688b0bc1eedb338864d0d0c">ConstantInt::getTrue</a>(<a class="code" href="NVVMIntrRange_8cpp.html#afad351d7bf10ac0446b64e7827634e94">Context</a>))) {</div>
<div class="line"><a name="l00720"></a><span class="lineno">  720</span>&#160;      <span class="comment">// NB! Unswitching (if successful) could have erased some of the</span></div>
<div class="line"><a name="l00721"></a><span class="lineno">  721</span>&#160;      <span class="comment">// instructions in Guards leaving dangling pointers there.  This is fine</span></div>
<div class="line"><a name="l00722"></a><span class="lineno">  722</span>&#160;      <span class="comment">// because we&#39;re returning now, and won&#39;t look at Guards again.</span></div>
<div class="line"><a name="l00723"></a><span class="lineno">  723</span>&#160;      ++NumGuards;</div>
<div class="line"><a name="l00724"></a><span class="lineno">  724</span>&#160;      <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l00725"></a><span class="lineno">  725</span>&#160;    }</div>
<div class="line"><a name="l00726"></a><span class="lineno">  726</span>&#160;  }</div>
<div class="line"><a name="l00727"></a><span class="lineno">  727</span>&#160; </div>
<div class="line"><a name="l00728"></a><span class="lineno">  728</span>&#160;  <span class="comment">// Loop over all of the basic blocks in the loop.  If we find an interior</span></div>
<div class="line"><a name="l00729"></a><span class="lineno">  729</span>&#160;  <span class="comment">// block that is branching on a loop-invariant condition, we can unswitch this</span></div>
<div class="line"><a name="l00730"></a><span class="lineno">  730</span>&#160;  <span class="comment">// loop.</span></div>
<div class="line"><a name="l00731"></a><span class="lineno">  731</span>&#160;  <span class="keywordflow">for</span> (<a class="code" href="classllvm_1_1LoopBase.html#a77e238ea0765cf983b5413de5c0a84d5">Loop::block_iterator</a> <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a> = CurrentLoop-&gt;<a class="code" href="classllvm_1_1LoopBase.html#af9096a02aa326d9a55f4d16ba9f9d243">block_begin</a>(),</div>
<div class="line"><a name="l00732"></a><span class="lineno">  732</span>&#160;                            <a class="code" href="BuiltinGCs_8cpp.html#a6742d2e0a668baf1196ec69e158d5f15">E</a> = CurrentLoop-&gt;<a class="code" href="classllvm_1_1LoopBase.html#a7a7815ad3e094df37f2312a4bba8c13e">block_end</a>();</div>
<div class="line"><a name="l00733"></a><span class="lineno">  733</span>&#160;       <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a> != <a class="code" href="BuiltinGCs_8cpp.html#a6742d2e0a668baf1196ec69e158d5f15">E</a>; ++<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>) {</div>
<div class="line"><a name="l00734"></a><span class="lineno">  734</span>&#160;    <a class="code" href="classllvm_1_1Instruction.html">Instruction</a> *TI = (*I)-&gt;getTerminator();</div>
<div class="line"><a name="l00735"></a><span class="lineno">  735</span>&#160; </div>
<div class="line"><a name="l00736"></a><span class="lineno">  736</span>&#160;    <span class="comment">// Unswitching on a potentially uninitialized predicate is not</span></div>
<div class="line"><a name="l00737"></a><span class="lineno">  737</span>&#160;    <span class="comment">// MSan-friendly. Limit this to the cases when the original predicate is</span></div>
<div class="line"><a name="l00738"></a><span class="lineno">  738</span>&#160;    <span class="comment">// guaranteed to execute, to avoid creating a use-of-uninitialized-value</span></div>
<div class="line"><a name="l00739"></a><span class="lineno">  739</span>&#160;    <span class="comment">// in the code that did not have one.</span></div>
<div class="line"><a name="l00740"></a><span class="lineno">  740</span>&#160;    <span class="comment">// This is a workaround for the discrepancy between LLVM IR and MSan</span></div>
<div class="line"><a name="l00741"></a><span class="lineno">  741</span>&#160;    <span class="comment">// semantics. See PR28054 for more details.</span></div>
<div class="line"><a name="l00742"></a><span class="lineno">  742</span>&#160;    <span class="keywordflow">if</span> (SanitizeMemory &amp;&amp;</div>
<div class="line"><a name="l00743"></a><span class="lineno">  743</span>&#160;        !SafetyInfo.<a class="code" href="classllvm_1_1SimpleLoopSafetyInfo.html#a0d72ea03ecc07b164934986286ea086d">isGuaranteedToExecute</a>(*TI, DT, CurrentLoop))</div>
<div class="line"><a name="l00744"></a><span class="lineno">  744</span>&#160;      <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l00745"></a><span class="lineno">  745</span>&#160; </div>
<div class="line"><a name="l00746"></a><span class="lineno">  746</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1BranchInst.html">BranchInst</a> *BI = dyn_cast&lt;BranchInst&gt;(TI)) {</div>
<div class="line"><a name="l00747"></a><span class="lineno">  747</span>&#160;      <span class="comment">// Some branches may be rendered unreachable because of previous</span></div>
<div class="line"><a name="l00748"></a><span class="lineno">  748</span>&#160;      <span class="comment">// unswitching.</span></div>
<div class="line"><a name="l00749"></a><span class="lineno">  749</span>&#160;      <span class="comment">// Unswitch only those branches that are reachable.</span></div>
<div class="line"><a name="l00750"></a><span class="lineno">  750</span>&#160;      <span class="keywordflow">if</span> (isUnreachableDueToPreviousUnswitching(*<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>))</div>
<div class="line"><a name="l00751"></a><span class="lineno">  751</span>&#160;        <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l00752"></a><span class="lineno">  752</span>&#160; </div>
<div class="line"><a name="l00753"></a><span class="lineno">  753</span>&#160;      <span class="comment">// If this isn&#39;t branching on an invariant condition, we can&#39;t unswitch</span></div>
<div class="line"><a name="l00754"></a><span class="lineno">  754</span>&#160;      <span class="comment">// it.</span></div>
<div class="line"><a name="l00755"></a><span class="lineno">  755</span>&#160;      <span class="keywordflow">if</span> (BI-&gt;isConditional()) {</div>
<div class="line"><a name="l00756"></a><span class="lineno">  756</span>&#160;        <span class="comment">// See if this, or some part of it, is loop invariant.  If so, we can</span></div>
<div class="line"><a name="l00757"></a><span class="lineno">  757</span>&#160;        <span class="comment">// unswitch on it if we desire.</span></div>
<div class="line"><a name="l00758"></a><span class="lineno">  758</span>&#160;        <a class="code" href="classllvm_1_1Value.html">Value</a> *LoopCond = <a class="code" href="LoopUnswitch_8cpp.html#a9666818bb4bec9f66119ddb9fb3c2c63">findLIVLoopCondition</a>(BI-&gt;getCondition(), CurrentLoop,</div>
<div class="line"><a name="l00759"></a><span class="lineno">  759</span>&#160;                                               Changed, MSSAU.get())</div>
<div class="line"><a name="l00760"></a><span class="lineno">  760</span>&#160;                              .first;</div>
<div class="line"><a name="l00761"></a><span class="lineno">  761</span>&#160;        <span class="keywordflow">if</span> (LoopCond &amp;&amp; !<a class="code" href="LoopUnswitch_8cpp.html#a052e6e0563b0e12cd740eb375184c9e5">equalityPropUnSafe</a>(*LoopCond) &amp;&amp;</div>
<div class="line"><a name="l00762"></a><span class="lineno">  762</span>&#160;            unswitchIfProfitable(LoopCond, <a class="code" href="classllvm_1_1ConstantInt.html#a82dbbd8e3688b0bc1eedb338864d0d0c">ConstantInt::getTrue</a>(<a class="code" href="NVVMIntrRange_8cpp.html#afad351d7bf10ac0446b64e7827634e94">Context</a>), TI)) {</div>
<div class="line"><a name="l00763"></a><span class="lineno">  763</span>&#160;          ++NumBranches;</div>
<div class="line"><a name="l00764"></a><span class="lineno">  764</span>&#160;          <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l00765"></a><span class="lineno">  765</span>&#160;        }</div>
<div class="line"><a name="l00766"></a><span class="lineno">  766</span>&#160;      }</div>
<div class="line"><a name="l00767"></a><span class="lineno">  767</span>&#160;    } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1SwitchInst.html">SwitchInst</a> *<a class="code" href="PassBuilderBindings_8cpp.html#a0f79dad1efc582555a443cc11a8fa401">SI</a> = dyn_cast&lt;SwitchInst&gt;(TI)) {</div>
<div class="line"><a name="l00768"></a><span class="lineno">  768</span>&#160;      <a class="code" href="classllvm_1_1Value.html">Value</a> *<a class="code" href="namespacellvm_1_1PPCISD.html#ad1c32e5bb1cb213fb836bc3d221e4f19a2ae057e4de45c51c89b7e5dc5053df62">SC</a> = <a class="code" href="PassBuilderBindings_8cpp.html#a0f79dad1efc582555a443cc11a8fa401">SI</a>-&gt;getCondition();</div>
<div class="line"><a name="l00769"></a><span class="lineno">  769</span>&#160;      <a class="code" href="classllvm_1_1Value.html">Value</a> *LoopCond;</div>
<div class="line"><a name="l00770"></a><span class="lineno">  770</span>&#160;      <a class="code" href="LoopUnswitch_8cpp.html#a488610869ffea06bc4eefcd4592fca9f">OperatorChain</a> OpChain;</div>
<div class="line"><a name="l00771"></a><span class="lineno">  771</span>&#160;      std::tie(LoopCond, OpChain) =</div>
<div class="line"><a name="l00772"></a><span class="lineno">  772</span>&#160;          <a class="code" href="LoopUnswitch_8cpp.html#a9666818bb4bec9f66119ddb9fb3c2c63">findLIVLoopCondition</a>(<a class="code" href="namespacellvm_1_1PPCISD.html#ad1c32e5bb1cb213fb836bc3d221e4f19a2ae057e4de45c51c89b7e5dc5053df62">SC</a>, CurrentLoop, Changed, MSSAU.get());</div>
<div class="line"><a name="l00773"></a><span class="lineno">  773</span>&#160; </div>
<div class="line"><a name="l00774"></a><span class="lineno">  774</span>&#160;      <span class="keywordtype">unsigned</span> NumCases = <a class="code" href="PassBuilderBindings_8cpp.html#a0f79dad1efc582555a443cc11a8fa401">SI</a>-&gt;getNumCases();</div>
<div class="line"><a name="l00775"></a><span class="lineno">  775</span>&#160;      <span class="keywordflow">if</span> (LoopCond &amp;&amp; NumCases) {</div>
<div class="line"><a name="l00776"></a><span class="lineno">  776</span>&#160;        <span class="comment">// Find a value to unswitch on:</span></div>
<div class="line"><a name="l00777"></a><span class="lineno">  777</span>&#160;        <span class="comment">// FIXME: this should chose the most expensive case!</span></div>
<div class="line"><a name="l00778"></a><span class="lineno">  778</span>&#160;        <span class="comment">// FIXME: scan for a case with a non-critical edge?</span></div>
<div class="line"><a name="l00779"></a><span class="lineno">  779</span>&#160;        <a class="code" href="classllvm_1_1Constant.html">Constant</a> *UnswitchVal = <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l00780"></a><span class="lineno">  780</span>&#160;        <span class="comment">// Find a case value such that at least one case value is unswitched</span></div>
<div class="line"><a name="l00781"></a><span class="lineno">  781</span>&#160;        <span class="comment">// out.</span></div>
<div class="line"><a name="l00782"></a><span class="lineno">  782</span>&#160;        <span class="keywordflow">if</span> (OpChain == <a class="code" href="LoopUnswitch_8cpp.html#a488610869ffea06bc4eefcd4592fca9fae7493b8ace82c60402b77a20b8bfe17a">OC_OpChainAnd</a>) {</div>
<div class="line"><a name="l00783"></a><span class="lineno">  783</span>&#160;          <span class="comment">// If the chain only has ANDs and the switch has a case value of 0.</span></div>
<div class="line"><a name="l00784"></a><span class="lineno">  784</span>&#160;          <span class="comment">// Dropping in a 0 to the chain will unswitch out the 0-casevalue.</span></div>
<div class="line"><a name="l00785"></a><span class="lineno">  785</span>&#160;          <span class="keyword">auto</span> *AllZero = cast&lt;ConstantInt&gt;(<a class="code" href="classllvm_1_1Constant.html#aa6574d526b3e38a28f688a7bb4325c2c">Constant::getNullValue</a>(<a class="code" href="namespacellvm_1_1PPCISD.html#ad1c32e5bb1cb213fb836bc3d221e4f19a2ae057e4de45c51c89b7e5dc5053df62">SC</a>-&gt;getType()));</div>
<div class="line"><a name="l00786"></a><span class="lineno">  786</span>&#160;          <span class="keywordflow">if</span> (BranchesInfo.isUnswitched(<a class="code" href="PassBuilderBindings_8cpp.html#a0f79dad1efc582555a443cc11a8fa401">SI</a>, AllZero))</div>
<div class="line"><a name="l00787"></a><span class="lineno">  787</span>&#160;            <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l00788"></a><span class="lineno">  788</span>&#160;          <span class="comment">// We are unswitching 0 out.</span></div>
<div class="line"><a name="l00789"></a><span class="lineno">  789</span>&#160;          UnswitchVal = AllZero;</div>
<div class="line"><a name="l00790"></a><span class="lineno">  790</span>&#160;        } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (OpChain == <a class="code" href="LoopUnswitch_8cpp.html#a488610869ffea06bc4eefcd4592fca9fa391236be716257cd22a3b77f48baba8b">OC_OpChainOr</a>) {</div>
<div class="line"><a name="l00791"></a><span class="lineno">  791</span>&#160;          <span class="comment">// If the chain only has ORs and the switch has a case value of ~0.</span></div>
<div class="line"><a name="l00792"></a><span class="lineno">  792</span>&#160;          <span class="comment">// Dropping in a ~0 to the chain will unswitch out the ~0-casevalue.</span></div>
<div class="line"><a name="l00793"></a><span class="lineno">  793</span>&#160;          <span class="keyword">auto</span> *AllOne = cast&lt;ConstantInt&gt;(<a class="code" href="classllvm_1_1Constant.html#a4d51384de6e1798bb6aa875aebeea9f0">Constant::getAllOnesValue</a>(<a class="code" href="namespacellvm_1_1PPCISD.html#ad1c32e5bb1cb213fb836bc3d221e4f19a2ae057e4de45c51c89b7e5dc5053df62">SC</a>-&gt;getType()));</div>
<div class="line"><a name="l00794"></a><span class="lineno">  794</span>&#160;          <span class="keywordflow">if</span> (BranchesInfo.isUnswitched(<a class="code" href="PassBuilderBindings_8cpp.html#a0f79dad1efc582555a443cc11a8fa401">SI</a>, AllOne))</div>
<div class="line"><a name="l00795"></a><span class="lineno">  795</span>&#160;            <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l00796"></a><span class="lineno">  796</span>&#160;          <span class="comment">// We are unswitching ~0 out.</span></div>
<div class="line"><a name="l00797"></a><span class="lineno">  797</span>&#160;          UnswitchVal = AllOne;</div>
<div class="line"><a name="l00798"></a><span class="lineno">  798</span>&#160;        } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00799"></a><span class="lineno">  799</span>&#160;          <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(OpChain == <a class="code" href="LoopUnswitch_8cpp.html#a488610869ffea06bc4eefcd4592fca9fa9d8893109f11fee0c7829aabbc8e5f42">OC_OpChainNone</a> &amp;&amp;</div>
<div class="line"><a name="l00800"></a><span class="lineno">  800</span>&#160;                 <span class="stringliteral">&quot;Expect to unswitch on trivial chain&quot;</span>);</div>
<div class="line"><a name="l00801"></a><span class="lineno">  801</span>&#160;          <span class="comment">// Do not process same value again and again.</span></div>
<div class="line"><a name="l00802"></a><span class="lineno">  802</span>&#160;          <span class="comment">// At this point we have some cases already unswitched and</span></div>
<div class="line"><a name="l00803"></a><span class="lineno">  803</span>&#160;          <span class="comment">// some not yet unswitched. Let&#39;s find the first not yet unswitched one.</span></div>
<div class="line"><a name="l00804"></a><span class="lineno">  804</span>&#160;          <span class="keywordflow">for</span> (<span class="keyword">auto</span> Case : <a class="code" href="PassBuilderBindings_8cpp.html#a0f79dad1efc582555a443cc11a8fa401">SI</a>-&gt;cases()) {</div>
<div class="line"><a name="l00805"></a><span class="lineno">  805</span>&#160;            <a class="code" href="classllvm_1_1Constant.html">Constant</a> *UnswitchValCandidate = Case.getCaseValue();</div>
<div class="line"><a name="l00806"></a><span class="lineno">  806</span>&#160;            <span class="keywordflow">if</span> (!BranchesInfo.isUnswitched(<a class="code" href="PassBuilderBindings_8cpp.html#a0f79dad1efc582555a443cc11a8fa401">SI</a>, UnswitchValCandidate)) {</div>
<div class="line"><a name="l00807"></a><span class="lineno">  807</span>&#160;              UnswitchVal = UnswitchValCandidate;</div>
<div class="line"><a name="l00808"></a><span class="lineno">  808</span>&#160;              <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00809"></a><span class="lineno">  809</span>&#160;            }</div>
<div class="line"><a name="l00810"></a><span class="lineno">  810</span>&#160;          }</div>
<div class="line"><a name="l00811"></a><span class="lineno">  811</span>&#160;        }</div>
<div class="line"><a name="l00812"></a><span class="lineno">  812</span>&#160; </div>
<div class="line"><a name="l00813"></a><span class="lineno">  813</span>&#160;        <span class="keywordflow">if</span> (!UnswitchVal)</div>
<div class="line"><a name="l00814"></a><span class="lineno">  814</span>&#160;          <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l00815"></a><span class="lineno">  815</span>&#160; </div>
<div class="line"><a name="l00816"></a><span class="lineno">  816</span>&#160;        <span class="keywordflow">if</span> (unswitchIfProfitable(LoopCond, UnswitchVal)) {</div>
<div class="line"><a name="l00817"></a><span class="lineno">  817</span>&#160;          ++NumSwitches;</div>
<div class="line"><a name="l00818"></a><span class="lineno">  818</span>&#160;          <span class="comment">// In case of a full LIV, UnswitchVal is the value we unswitched out.</span></div>
<div class="line"><a name="l00819"></a><span class="lineno">  819</span>&#160;          <span class="comment">// In case of a partial LIV, we only unswitch when its an AND-chain</span></div>
<div class="line"><a name="l00820"></a><span class="lineno">  820</span>&#160;          <span class="comment">// or OR-chain. In both cases switch input value simplifies to</span></div>
<div class="line"><a name="l00821"></a><span class="lineno">  821</span>&#160;          <span class="comment">// UnswitchVal.</span></div>
<div class="line"><a name="l00822"></a><span class="lineno">  822</span>&#160;          BranchesInfo.setUnswitched(<a class="code" href="PassBuilderBindings_8cpp.html#a0f79dad1efc582555a443cc11a8fa401">SI</a>, UnswitchVal);</div>
<div class="line"><a name="l00823"></a><span class="lineno">  823</span>&#160;          <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l00824"></a><span class="lineno">  824</span>&#160;        }</div>
<div class="line"><a name="l00825"></a><span class="lineno">  825</span>&#160;      }</div>
<div class="line"><a name="l00826"></a><span class="lineno">  826</span>&#160;    }</div>
<div class="line"><a name="l00827"></a><span class="lineno">  827</span>&#160; </div>
<div class="line"><a name="l00828"></a><span class="lineno">  828</span>&#160;    <span class="comment">// Scan the instructions to check for unswitchable values.</span></div>
<div class="line"><a name="l00829"></a><span class="lineno">  829</span>&#160;    <span class="keywordflow">for</span> (<a class="code" href="classllvm_1_1BasicBlock.html#a98c0a84a5dfa8bce341c829709f171e5">BasicBlock::iterator</a> BBI = (*I)-&gt;begin(), <a class="code" href="BuiltinGCs_8cpp.html#a6742d2e0a668baf1196ec69e158d5f15">E</a> = (*I)-&gt;end();</div>
<div class="line"><a name="l00830"></a><span class="lineno">  830</span>&#160;         BBI != <a class="code" href="BuiltinGCs_8cpp.html#a6742d2e0a668baf1196ec69e158d5f15">E</a>; ++BBI)</div>
<div class="line"><a name="l00831"></a><span class="lineno">  831</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1SelectInst.html">SelectInst</a> *<a class="code" href="PassBuilderBindings_8cpp.html#a0f79dad1efc582555a443cc11a8fa401">SI</a> = dyn_cast&lt;SelectInst&gt;(BBI)) {</div>
<div class="line"><a name="l00832"></a><span class="lineno">  832</span>&#160;        <a class="code" href="classllvm_1_1Value.html">Value</a> *LoopCond = <a class="code" href="LoopUnswitch_8cpp.html#a9666818bb4bec9f66119ddb9fb3c2c63">findLIVLoopCondition</a>(<a class="code" href="PassBuilderBindings_8cpp.html#a0f79dad1efc582555a443cc11a8fa401">SI</a>-&gt;getCondition(), CurrentLoop,</div>
<div class="line"><a name="l00833"></a><span class="lineno">  833</span>&#160;                                               Changed, MSSAU.get())</div>
<div class="line"><a name="l00834"></a><span class="lineno">  834</span>&#160;                              .first;</div>
<div class="line"><a name="l00835"></a><span class="lineno">  835</span>&#160;        <span class="keywordflow">if</span> (LoopCond &amp;&amp;</div>
<div class="line"><a name="l00836"></a><span class="lineno">  836</span>&#160;            unswitchIfProfitable(LoopCond, <a class="code" href="classllvm_1_1ConstantInt.html#a82dbbd8e3688b0bc1eedb338864d0d0c">ConstantInt::getTrue</a>(<a class="code" href="NVVMIntrRange_8cpp.html#afad351d7bf10ac0446b64e7827634e94">Context</a>))) {</div>
<div class="line"><a name="l00837"></a><span class="lineno">  837</span>&#160;          ++NumSelects;</div>
<div class="line"><a name="l00838"></a><span class="lineno">  838</span>&#160;          <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l00839"></a><span class="lineno">  839</span>&#160;        }</div>
<div class="line"><a name="l00840"></a><span class="lineno">  840</span>&#160;      }</div>
<div class="line"><a name="l00841"></a><span class="lineno">  841</span>&#160;  }</div>
<div class="line"><a name="l00842"></a><span class="lineno">  842</span>&#160; </div>
<div class="line"><a name="l00843"></a><span class="lineno">  843</span>&#160;  <span class="comment">// Check if there is a header condition that is invariant along the patch from</span></div>
<div class="line"><a name="l00844"></a><span class="lineno">  844</span>&#160;  <span class="comment">// either the true or false successors to the header. This allows unswitching</span></div>
<div class="line"><a name="l00845"></a><span class="lineno">  845</span>&#160;  <span class="comment">// conditions depending on memory accesses, if there&#39;s a path not clobbering</span></div>
<div class="line"><a name="l00846"></a><span class="lineno">  846</span>&#160;  <span class="comment">// the memory locations. Check if this transform has been disabled using</span></div>
<div class="line"><a name="l00847"></a><span class="lineno">  847</span>&#160;  <span class="comment">// metadata, to avoid unswitching the same loop multiple times.</span></div>
<div class="line"><a name="l00848"></a><span class="lineno">  848</span>&#160;  <span class="keywordflow">if</span> (MSSA &amp;&amp;</div>
<div class="line"><a name="l00849"></a><span class="lineno">  849</span>&#160;      !<a class="code" href="namespacellvm.html#a3f91ce019424451ab50bf348826fa270">findOptionMDForLoop</a>(CurrentLoop, <span class="stringliteral">&quot;llvm.loop.unswitch.partial.disable&quot;</span>)) {</div>
<div class="line"><a name="l00850"></a><span class="lineno">  850</span>&#160;    <span class="keywordflow">if</span> (<span class="keyword">auto</span> <a class="code" href="CSEInfo_8cpp.html#a75f8a8519c2c9b30e7c06dc5e256fffa">Info</a> =</div>
<div class="line"><a name="l00851"></a><span class="lineno">  851</span>&#160;            <a class="code" href="namespacellvm.html#a40b448eb29770bce68ab118d5570f28f">hasPartialIVCondition</a>(*CurrentLoop, <a class="code" href="LoopUnswitch_8cpp.html#a4477a1aca6efad3d0fbcc4e7224fd2c3">MSSAThreshold</a>, *MSSA, *AA)) {</div>
<div class="line"><a name="l00852"></a><span class="lineno">  852</span>&#160;      <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(!<a class="code" href="CSEInfo_8cpp.html#a75f8a8519c2c9b30e7c06dc5e256fffa">Info</a>-&gt;InstToDuplicate.empty() &amp;&amp;</div>
<div class="line"><a name="l00853"></a><span class="lineno">  853</span>&#160;             <span class="stringliteral">&quot;need at least a partially invariant condition&quot;</span>);</div>
<div class="line"><a name="l00854"></a><span class="lineno">  854</span>&#160;      <a class="code" href="Debug_8h.html#a08efc68d15935eb8889400a46c3749ba">LLVM_DEBUG</a>(<a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <span class="stringliteral">&quot;loop-unswitch: Found partially invariant condition &quot;</span></div>
<div class="line"><a name="l00855"></a><span class="lineno">  855</span>&#160;                        &lt;&lt; *<a class="code" href="CSEInfo_8cpp.html#a75f8a8519c2c9b30e7c06dc5e256fffa">Info</a>-&gt;InstToDuplicate[0] &lt;&lt; <span class="stringliteral">&quot;\n&quot;</span>);</div>
<div class="line"><a name="l00856"></a><span class="lineno">  856</span>&#160; </div>
<div class="line"><a name="l00857"></a><span class="lineno">  857</span>&#160;      <a class="code" href="classllvm_1_1Instruction.html">Instruction</a> *TI = CurrentLoop-&gt;<a class="code" href="classllvm_1_1LoopBase.html#a58c5b170ea68b41e94ebb0019523a68f">getHeader</a>()-&gt;<a class="code" href="classllvm_1_1BasicBlock.html#a71a9eabc4318b2fc34f83b01dfee484b">getTerminator</a>();</div>
<div class="line"><a name="l00858"></a><span class="lineno">  858</span>&#160;      <a class="code" href="classllvm_1_1Value.html">Value</a> *LoopCond = <a class="code" href="CSEInfo_8cpp.html#a75f8a8519c2c9b30e7c06dc5e256fffa">Info</a>-&gt;InstToDuplicate[0];</div>
<div class="line"><a name="l00859"></a><span class="lineno">  859</span>&#160; </div>
<div class="line"><a name="l00860"></a><span class="lineno">  860</span>&#160;      <span class="comment">// If the partially unswitched path is a no-op and has a single exit</span></div>
<div class="line"><a name="l00861"></a><span class="lineno">  861</span>&#160;      <span class="comment">// block, we do not need to do full unswitching. Instead, we can directly</span></div>
<div class="line"><a name="l00862"></a><span class="lineno">  862</span>&#160;      <span class="comment">// branch to the exit.</span></div>
<div class="line"><a name="l00863"></a><span class="lineno">  863</span>&#160;      <span class="comment">// TODO: Instead of duplicating the checks, we could also just directly</span></div>
<div class="line"><a name="l00864"></a><span class="lineno">  864</span>&#160;      <span class="comment">// branch to the exit from the conditional branch in the loop.</span></div>
<div class="line"><a name="l00865"></a><span class="lineno">  865</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="CSEInfo_8cpp.html#a75f8a8519c2c9b30e7c06dc5e256fffa">Info</a>-&gt;PathIsNoop) {</div>
<div class="line"><a name="l00866"></a><span class="lineno">  866</span>&#160;        <span class="keywordflow">if</span> (HasBranchDivergence &amp;&amp;</div>
<div class="line"><a name="l00867"></a><span class="lineno">  867</span>&#160;            getAnalysis&lt;LegacyDivergenceAnalysis&gt;().isDivergent(LoopCond)) {</div>
<div class="line"><a name="l00868"></a><span class="lineno">  868</span>&#160;          <a class="code" href="Debug_8h.html#a08efc68d15935eb8889400a46c3749ba">LLVM_DEBUG</a>(<a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <span class="stringliteral">&quot;NOT unswitching loop %&quot;</span></div>
<div class="line"><a name="l00869"></a><span class="lineno">  869</span>&#160;                            &lt;&lt; CurrentLoop-&gt;<a class="code" href="classllvm_1_1LoopBase.html#a58c5b170ea68b41e94ebb0019523a68f">getHeader</a>()-&gt;<a class="code" href="classllvm_1_1Value.html#adb5c319f5905c1d3ca9eb5df546388c5">getName</a>()</div>
<div class="line"><a name="l00870"></a><span class="lineno">  870</span>&#160;                            &lt;&lt; <span class="stringliteral">&quot; at non-trivial condition &#39;&quot;</span></div>
<div class="line"><a name="l00871"></a><span class="lineno">  871</span>&#160;                            &lt;&lt; *<a class="code" href="CSEInfo_8cpp.html#a75f8a8519c2c9b30e7c06dc5e256fffa">Info</a>-&gt;KnownValue &lt;&lt; <span class="stringliteral">&quot;&#39; == &quot;</span> &lt;&lt; *LoopCond &lt;&lt; <span class="stringliteral">&quot;\n&quot;</span></div>
<div class="line"><a name="l00872"></a><span class="lineno">  872</span>&#160;                            &lt;&lt; <span class="stringliteral">&quot;. Condition is divergent.\n&quot;</span>);</div>
<div class="line"><a name="l00873"></a><span class="lineno">  873</span>&#160;          <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l00874"></a><span class="lineno">  874</span>&#160;        }</div>
<div class="line"><a name="l00875"></a><span class="lineno">  875</span>&#160; </div>
<div class="line"><a name="l00876"></a><span class="lineno">  876</span>&#160;        ++NumBranches;</div>
<div class="line"><a name="l00877"></a><span class="lineno">  877</span>&#160; </div>
<div class="line"><a name="l00878"></a><span class="lineno">  878</span>&#160;        <a class="code" href="classllvm_1_1BasicBlock.html">BasicBlock</a> *TrueDest = LoopHeader;</div>
<div class="line"><a name="l00879"></a><span class="lineno">  879</span>&#160;        <a class="code" href="classllvm_1_1BasicBlock.html">BasicBlock</a> *FalseDest = <a class="code" href="CSEInfo_8cpp.html#a75f8a8519c2c9b30e7c06dc5e256fffa">Info</a>-&gt;ExitForPath;</div>
<div class="line"><a name="l00880"></a><span class="lineno">  880</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="CSEInfo_8cpp.html#a75f8a8519c2c9b30e7c06dc5e256fffa">Info</a>-&gt;KnownValue-&gt;isOneValue())</div>
<div class="line"><a name="l00881"></a><span class="lineno">  881</span>&#160;          <a class="code" href="namespacestd.html#ab8424022895aee3e366fb9a32f2883cb">std::swap</a>(TrueDest, FalseDest);</div>
<div class="line"><a name="l00882"></a><span class="lineno">  882</span>&#160; </div>
<div class="line"><a name="l00883"></a><span class="lineno">  883</span>&#160;        <span class="keyword">auto</span> *OldBr =</div>
<div class="line"><a name="l00884"></a><span class="lineno">  884</span>&#160;            cast&lt;BranchInst&gt;(CurrentLoop-&gt;<a class="code" href="classllvm_1_1LoopBase.html#ac3280e7f76f955403fe17eacf126b90d">getLoopPreheader</a>()-&gt;<a class="code" href="classllvm_1_1BasicBlock.html#a71a9eabc4318b2fc34f83b01dfee484b">getTerminator</a>());</div>
<div class="line"><a name="l00885"></a><span class="lineno">  885</span>&#160;        emitPreheaderBranchOnCondition(LoopCond, <a class="code" href="CSEInfo_8cpp.html#a75f8a8519c2c9b30e7c06dc5e256fffa">Info</a>-&gt;KnownValue, TrueDest,</div>
<div class="line"><a name="l00886"></a><span class="lineno">  886</span>&#160;                                       FalseDest, OldBr, TI,</div>
<div class="line"><a name="l00887"></a><span class="lineno">  887</span>&#160;                                       <a class="code" href="CSEInfo_8cpp.html#a75f8a8519c2c9b30e7c06dc5e256fffa">Info</a>-&gt;InstToDuplicate);</div>
<div class="line"><a name="l00888"></a><span class="lineno">  888</span>&#160;        <span class="keyword">delete</span> OldBr;</div>
<div class="line"><a name="l00889"></a><span class="lineno">  889</span>&#160;        RedoLoop = <span class="keyword">false</span>;</div>
<div class="line"><a name="l00890"></a><span class="lineno">  890</span>&#160;        <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l00891"></a><span class="lineno">  891</span>&#160;      }</div>
<div class="line"><a name="l00892"></a><span class="lineno">  892</span>&#160; </div>
<div class="line"><a name="l00893"></a><span class="lineno">  893</span>&#160;      <span class="comment">// Otherwise, the path is not a no-op. Run regular unswitching.</span></div>
<div class="line"><a name="l00894"></a><span class="lineno">  894</span>&#160;      <span class="keywordflow">if</span> (unswitchIfProfitable(LoopCond, <a class="code" href="CSEInfo_8cpp.html#a75f8a8519c2c9b30e7c06dc5e256fffa">Info</a>-&gt;KnownValue,</div>
<div class="line"><a name="l00895"></a><span class="lineno">  895</span>&#160;                               CurrentLoop-&gt;<a class="code" href="classllvm_1_1LoopBase.html#a58c5b170ea68b41e94ebb0019523a68f">getHeader</a>()-&gt;<a class="code" href="classllvm_1_1BasicBlock.html#a71a9eabc4318b2fc34f83b01dfee484b">getTerminator</a>(),</div>
<div class="line"><a name="l00896"></a><span class="lineno">  896</span>&#160;                               <a class="code" href="CSEInfo_8cpp.html#a75f8a8519c2c9b30e7c06dc5e256fffa">Info</a>-&gt;InstToDuplicate)) {</div>
<div class="line"><a name="l00897"></a><span class="lineno">  897</span>&#160;        ++NumBranches;</div>
<div class="line"><a name="l00898"></a><span class="lineno">  898</span>&#160;        RedoLoop = <span class="keyword">false</span>;</div>
<div class="line"><a name="l00899"></a><span class="lineno">  899</span>&#160;        <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l00900"></a><span class="lineno">  900</span>&#160;      }</div>
<div class="line"><a name="l00901"></a><span class="lineno">  901</span>&#160;    }</div>
<div class="line"><a name="l00902"></a><span class="lineno">  902</span>&#160;  }</div>
<div class="line"><a name="l00903"></a><span class="lineno">  903</span>&#160; </div>
<div class="line"><a name="l00904"></a><span class="lineno">  904</span>&#160;  <span class="keywordflow">return</span> Changed;</div>
<div class="line"><a name="l00905"></a><span class="lineno">  905</span>&#160;}</div>
<div class="line"><a name="l00906"></a><span class="lineno">  906</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l00907"></a><span class="lineno">  907</span>&#160;<span class="comment">/// Check to see if all paths from BB exit the loop with no side effects</span></div>
<div class="line"><a name="l00908"></a><span class="lineno">  908</span>&#160;<span class="comment">/// (including infinite loops).</span></div>
<div class="line"><a name="l00909"></a><span class="lineno">  909</span>&#160;<span class="comment">///</span></div>
<div class="line"><a name="l00910"></a><span class="lineno">  910</span>&#160;<span class="comment">/// If true, we return true and set ExitBB to the block we</span></div>
<div class="line"><a name="l00911"></a><span class="lineno">  911</span>&#160;<span class="comment">/// exit through.</span></div>
<div class="line"><a name="l00912"></a><span class="lineno">  912</span>&#160;<span class="comment">///</span></div>
<div class="line"><a name="l00913"></a><span class="lineno"><a class="line" href="LoopUnswitch_8cpp.html#a8d46c5e008b296b0924284d8fa6dfa00">  913</a></span>&#160;<span class="comment"></span><span class="keyword">static</span> <span class="keywordtype">bool</span> <a class="code" href="LoopUnswitch_8cpp.html#a8d46c5e008b296b0924284d8fa6dfa00">isTrivialLoopExitBlockHelper</a>(<a class="code" href="classllvm_1_1Loop.html">Loop</a> *L, <a class="code" href="classllvm_1_1BasicBlock.html">BasicBlock</a> *<a class="code" href="lib_2CodeGen_2README_8txt.html#a09776db24cf586ec9f1e18f3bae14099">BB</a>,</div>
<div class="line"><a name="l00914"></a><span class="lineno">  914</span>&#160;                                         <a class="code" href="classllvm_1_1BasicBlock.html">BasicBlock</a> *&amp;ExitBB,</div>
<div class="line"><a name="l00915"></a><span class="lineno">  915</span>&#160;                                         std::set&lt;BasicBlock*&gt; &amp;Visited) {</div>
<div class="line"><a name="l00916"></a><span class="lineno">  916</span>&#160;  <span class="keywordflow">if</span> (!Visited.insert(<a class="code" href="lib_2CodeGen_2README_8txt.html#a09776db24cf586ec9f1e18f3bae14099">BB</a>).second) {</div>
<div class="line"><a name="l00917"></a><span class="lineno">  917</span>&#160;    <span class="comment">// Already visited. Without more analysis, this could indicate an infinite</span></div>
<div class="line"><a name="l00918"></a><span class="lineno">  918</span>&#160;    <span class="comment">// loop.</span></div>
<div class="line"><a name="l00919"></a><span class="lineno">  919</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l00920"></a><span class="lineno">  920</span>&#160;  }</div>
<div class="line"><a name="l00921"></a><span class="lineno">  921</span>&#160;  <span class="keywordflow">if</span> (!L-&gt;<a class="code" href="classllvm_1_1LoopBase.html#a04337b572d34ea413c35dbac5d75530b">contains</a>(<a class="code" href="lib_2CodeGen_2README_8txt.html#a09776db24cf586ec9f1e18f3bae14099">BB</a>)) {</div>
<div class="line"><a name="l00922"></a><span class="lineno">  922</span>&#160;    <span class="comment">// Otherwise, this is a loop exit, this is fine so long as this is the</span></div>
<div class="line"><a name="l00923"></a><span class="lineno">  923</span>&#160;    <span class="comment">// first exit.</span></div>
<div class="line"><a name="l00924"></a><span class="lineno">  924</span>&#160;    <span class="keywordflow">if</span> (ExitBB) <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l00925"></a><span class="lineno">  925</span>&#160;    ExitBB = <a class="code" href="lib_2CodeGen_2README_8txt.html#a09776db24cf586ec9f1e18f3bae14099">BB</a>;</div>
<div class="line"><a name="l00926"></a><span class="lineno">  926</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l00927"></a><span class="lineno">  927</span>&#160;  }</div>
<div class="line"><a name="l00928"></a><span class="lineno">  928</span>&#160; </div>
<div class="line"><a name="l00929"></a><span class="lineno">  929</span>&#160;  <span class="comment">// Otherwise, this is an unvisited intra-loop node.  Check all successors.</span></div>
<div class="line"><a name="l00930"></a><span class="lineno">  930</span>&#160;  <span class="keywordflow">for</span> (<a class="code" href="classllvm_1_1BasicBlock.html">BasicBlock</a> *Succ : <a class="code" href="namespacellvm.html#a3493591c859b8ae672dfa20950608c86">successors</a>(<a class="code" href="lib_2CodeGen_2README_8txt.html#a09776db24cf586ec9f1e18f3bae14099">BB</a>)) {</div>
<div class="line"><a name="l00931"></a><span class="lineno">  931</span>&#160;    <span class="comment">// Check to see if the successor is a trivial loop exit.</span></div>
<div class="line"><a name="l00932"></a><span class="lineno">  932</span>&#160;    <span class="keywordflow">if</span> (!<a class="code" href="LoopUnswitch_8cpp.html#a8d46c5e008b296b0924284d8fa6dfa00">isTrivialLoopExitBlockHelper</a>(L, Succ, ExitBB, Visited))</div>
<div class="line"><a name="l00933"></a><span class="lineno">  933</span>&#160;      <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l00934"></a><span class="lineno">  934</span>&#160;  }</div>
<div class="line"><a name="l00935"></a><span class="lineno">  935</span>&#160; </div>
<div class="line"><a name="l00936"></a><span class="lineno">  936</span>&#160;  <span class="comment">// Okay, everything after this looks good, check to make sure that this block</span></div>
<div class="line"><a name="l00937"></a><span class="lineno">  937</span>&#160;  <span class="comment">// doesn&#39;t include any side effects.</span></div>
<div class="line"><a name="l00938"></a><span class="lineno">  938</span>&#160;  <span class="keywordflow">for</span> (<a class="code" href="classllvm_1_1Instruction.html">Instruction</a> &amp;<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a> : *<a class="code" href="lib_2CodeGen_2README_8txt.html#a09776db24cf586ec9f1e18f3bae14099">BB</a>)</div>
<div class="line"><a name="l00939"></a><span class="lineno">  939</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>.mayHaveSideEffects())</div>
<div class="line"><a name="l00940"></a><span class="lineno">  940</span>&#160;      <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l00941"></a><span class="lineno">  941</span>&#160; </div>
<div class="line"><a name="l00942"></a><span class="lineno">  942</span>&#160;  <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l00943"></a><span class="lineno">  943</span>&#160;}</div>
<div class="line"><a name="l00944"></a><span class="lineno">  944</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l00945"></a><span class="lineno">  945</span>&#160;<span class="comment">/// Return true if the specified block unconditionally leads to an exit from</span></div>
<div class="line"><a name="l00946"></a><span class="lineno">  946</span>&#160;<span class="comment">/// the specified loop, and has no side-effects in the process. If so, return</span></div>
<div class="line"><a name="l00947"></a><span class="lineno">  947</span>&#160;<span class="comment">/// the block that is exited to, otherwise return null.</span></div>
<div class="line"><a name="l00948"></a><span class="lineno"><a class="line" href="LoopUnswitch_8cpp.html#a9ab6a0cab40eae4e54ed18308f8826ff">  948</a></span>&#160;<span class="comment"></span><span class="keyword">static</span> <a class="code" href="classllvm_1_1BasicBlock.html">BasicBlock</a> *<a class="code" href="LoopUnswitch_8cpp.html#a9ab6a0cab40eae4e54ed18308f8826ff">isTrivialLoopExitBlock</a>(<a class="code" href="classllvm_1_1Loop.html">Loop</a> *L, <a class="code" href="classllvm_1_1BasicBlock.html">BasicBlock</a> *<a class="code" href="lib_2CodeGen_2README_8txt.html#a09776db24cf586ec9f1e18f3bae14099">BB</a>) {</div>
<div class="line"><a name="l00949"></a><span class="lineno">  949</span>&#160;  std::set&lt;BasicBlock*&gt; Visited;</div>
<div class="line"><a name="l00950"></a><span class="lineno">  950</span>&#160;  Visited.insert(L-&gt;<a class="code" href="classllvm_1_1LoopBase.html#a58c5b170ea68b41e94ebb0019523a68f">getHeader</a>());  <span class="comment">// Branches to header make infinite loops.</span></div>
<div class="line"><a name="l00951"></a><span class="lineno">  951</span>&#160;  <a class="code" href="classllvm_1_1BasicBlock.html">BasicBlock</a> *ExitBB = <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l00952"></a><span class="lineno">  952</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="LoopUnswitch_8cpp.html#a8d46c5e008b296b0924284d8fa6dfa00">isTrivialLoopExitBlockHelper</a>(L, <a class="code" href="lib_2CodeGen_2README_8txt.html#a09776db24cf586ec9f1e18f3bae14099">BB</a>, ExitBB, Visited))</div>
<div class="line"><a name="l00953"></a><span class="lineno">  953</span>&#160;    <span class="keywordflow">return</span> ExitBB;</div>
<div class="line"><a name="l00954"></a><span class="lineno">  954</span>&#160;  <span class="keywordflow">return</span> <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l00955"></a><span class="lineno">  955</span>&#160;}</div>
<div class="line"><a name="l00956"></a><span class="lineno">  956</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l00957"></a><span class="lineno">  957</span>&#160;<span class="comment">/// We have found that we can unswitch CurrentLoop when LoopCond == Val to</span></div>
<div class="line"><a name="l00958"></a><span class="lineno">  958</span>&#160;<span class="comment">/// simplify the loop.  If we decide that this is profitable,</span></div>
<div class="line"><a name="l00959"></a><span class="lineno">  959</span>&#160;<span class="comment">/// unswitch the loop, reprocess the pieces, then return true.</span></div>
<div class="line"><a name="l00960"></a><span class="lineno">  960</span>&#160;<span class="comment"></span><span class="keywordtype">bool</span> LoopUnswitch::unswitchIfProfitable(<a class="code" href="classllvm_1_1Value.html">Value</a> *LoopCond, <a class="code" href="classllvm_1_1Constant.html">Constant</a> *Val,</div>
<div class="line"><a name="l00961"></a><span class="lineno">  961</span>&#160;                                        <a class="code" href="classllvm_1_1Instruction.html">Instruction</a> *TI,</div>
<div class="line"><a name="l00962"></a><span class="lineno">  962</span>&#160;                                        <a class="code" href="classllvm_1_1ArrayRef.html">ArrayRef&lt;Instruction *&gt;</a> ToDuplicate) {</div>
<div class="line"><a name="l00963"></a><span class="lineno">  963</span>&#160;  <span class="comment">// Check to see if it would be profitable to unswitch current loop.</span></div>
<div class="line"><a name="l00964"></a><span class="lineno">  964</span>&#160;  <span class="keywordflow">if</span> (!BranchesInfo.costAllowsUnswitching()) {</div>
<div class="line"><a name="l00965"></a><span class="lineno">  965</span>&#160;    <a class="code" href="Debug_8h.html#a08efc68d15935eb8889400a46c3749ba">LLVM_DEBUG</a>(<a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <span class="stringliteral">&quot;NOT unswitching loop %&quot;</span></div>
<div class="line"><a name="l00966"></a><span class="lineno">  966</span>&#160;                      &lt;&lt; CurrentLoop-&gt;<a class="code" href="classllvm_1_1LoopBase.html#a58c5b170ea68b41e94ebb0019523a68f">getHeader</a>()-&gt;<a class="code" href="classllvm_1_1Value.html#adb5c319f5905c1d3ca9eb5df546388c5">getName</a>()</div>
<div class="line"><a name="l00967"></a><span class="lineno">  967</span>&#160;                      &lt;&lt; <span class="stringliteral">&quot; at non-trivial condition &#39;&quot;</span> &lt;&lt; *Val</div>
<div class="line"><a name="l00968"></a><span class="lineno">  968</span>&#160;                      &lt;&lt; <span class="stringliteral">&quot;&#39; == &quot;</span> &lt;&lt; *LoopCond &lt;&lt; <span class="stringliteral">&quot;\n&quot;</span></div>
<div class="line"><a name="l00969"></a><span class="lineno">  969</span>&#160;                      &lt;&lt; <span class="stringliteral">&quot;. Cost too high.\n&quot;</span>);</div>
<div class="line"><a name="l00970"></a><span class="lineno">  970</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l00971"></a><span class="lineno">  971</span>&#160;  }</div>
<div class="line"><a name="l00972"></a><span class="lineno">  972</span>&#160;  <span class="keywordflow">if</span> (HasBranchDivergence &amp;&amp;</div>
<div class="line"><a name="l00973"></a><span class="lineno">  973</span>&#160;      getAnalysis&lt;LegacyDivergenceAnalysis&gt;().isDivergent(LoopCond)) {</div>
<div class="line"><a name="l00974"></a><span class="lineno">  974</span>&#160;    <a class="code" href="Debug_8h.html#a08efc68d15935eb8889400a46c3749ba">LLVM_DEBUG</a>(<a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <span class="stringliteral">&quot;NOT unswitching loop %&quot;</span></div>
<div class="line"><a name="l00975"></a><span class="lineno">  975</span>&#160;                      &lt;&lt; CurrentLoop-&gt;<a class="code" href="classllvm_1_1LoopBase.html#a58c5b170ea68b41e94ebb0019523a68f">getHeader</a>()-&gt;<a class="code" href="classllvm_1_1Value.html#adb5c319f5905c1d3ca9eb5df546388c5">getName</a>()</div>
<div class="line"><a name="l00976"></a><span class="lineno">  976</span>&#160;                      &lt;&lt; <span class="stringliteral">&quot; at non-trivial condition &#39;&quot;</span> &lt;&lt; *Val</div>
<div class="line"><a name="l00977"></a><span class="lineno">  977</span>&#160;                      &lt;&lt; <span class="stringliteral">&quot;&#39; == &quot;</span> &lt;&lt; *LoopCond &lt;&lt; <span class="stringliteral">&quot;\n&quot;</span></div>
<div class="line"><a name="l00978"></a><span class="lineno">  978</span>&#160;                      &lt;&lt; <span class="stringliteral">&quot;. Condition is divergent.\n&quot;</span>);</div>
<div class="line"><a name="l00979"></a><span class="lineno">  979</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l00980"></a><span class="lineno">  980</span>&#160;  }</div>
<div class="line"><a name="l00981"></a><span class="lineno">  981</span>&#160; </div>
<div class="line"><a name="l00982"></a><span class="lineno">  982</span>&#160;  unswitchNontrivialCondition(LoopCond, Val, CurrentLoop, TI, ToDuplicate);</div>
<div class="line"><a name="l00983"></a><span class="lineno">  983</span>&#160;  <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l00984"></a><span class="lineno">  984</span>&#160;}</div>
<div class="line"><a name="l00985"></a><span class="lineno">  985</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l00986"></a><span class="lineno">  986</span>&#160;<span class="comment">/// Emit a conditional branch on two values if LIC == Val, branch to TrueDst,</span></div>
<div class="line"><a name="l00987"></a><span class="lineno">  987</span>&#160;<span class="comment">/// otherwise branch to FalseDest. Insert the code immediately before OldBranch</span></div>
<div class="line"><a name="l00988"></a><span class="lineno">  988</span>&#160;<span class="comment">/// and remove (but not erase!) it from the function.</span></div>
<div class="line"><a name="l00989"></a><span class="lineno">  989</span>&#160;<span class="comment"></span><span class="keywordtype">void</span> LoopUnswitch::emitPreheaderBranchOnCondition(</div>
<div class="line"><a name="l00990"></a><span class="lineno">  990</span>&#160;    <a class="code" href="classllvm_1_1Value.html">Value</a> *LIC, <a class="code" href="classllvm_1_1Constant.html">Constant</a> *Val, <a class="code" href="classllvm_1_1BasicBlock.html">BasicBlock</a> *TrueDest, <a class="code" href="classllvm_1_1BasicBlock.html">BasicBlock</a> *FalseDest,</div>
<div class="line"><a name="l00991"></a><span class="lineno">  991</span>&#160;    <a class="code" href="classllvm_1_1BranchInst.html">BranchInst</a> *OldBranch, <a class="code" href="classllvm_1_1Instruction.html">Instruction</a> *TI,</div>
<div class="line"><a name="l00992"></a><span class="lineno">  992</span>&#160;    <a class="code" href="classllvm_1_1ArrayRef.html">ArrayRef&lt;Instruction *&gt;</a> ToDuplicate) {</div>
<div class="line"><a name="l00993"></a><span class="lineno">  993</span>&#160;  <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(OldBranch-&gt;<a class="code" href="classllvm_1_1BranchInst.html#ad56f6a9b5cd05940017c4544df48bc30">isUnconditional</a>() &amp;&amp; <span class="stringliteral">&quot;Preheader is not split correctly&quot;</span>);</div>
<div class="line"><a name="l00994"></a><span class="lineno">  994</span>&#160;  <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(TrueDest != FalseDest &amp;&amp; <span class="stringliteral">&quot;Branch targets should be different&quot;</span>);</div>
<div class="line"><a name="l00995"></a><span class="lineno">  995</span>&#160; </div>
<div class="line"><a name="l00996"></a><span class="lineno">  996</span>&#160;  <span class="comment">// Insert a conditional branch on LIC to the two preheaders.  The original</span></div>
<div class="line"><a name="l00997"></a><span class="lineno">  997</span>&#160;  <span class="comment">// code is the true version and the new code is the false version.</span></div>
<div class="line"><a name="l00998"></a><span class="lineno">  998</span>&#160;  <a class="code" href="classllvm_1_1Value.html">Value</a> *BranchVal = LIC;</div>
<div class="line"><a name="l00999"></a><span class="lineno">  999</span>&#160;  <span class="keywordtype">bool</span> Swapped = <span class="keyword">false</span>;</div>
<div class="line"><a name="l01000"></a><span class="lineno"> 1000</span>&#160; </div>
<div class="line"><a name="l01001"></a><span class="lineno"> 1001</span>&#160;  <span class="keywordflow">if</span> (!ToDuplicate.<a class="code" href="classllvm_1_1ArrayRef.html#ac835b8735b1b2faec0efdca236e37d94">empty</a>()) {</div>
<div class="line"><a name="l01002"></a><span class="lineno"> 1002</span>&#160;    <a class="code" href="classllvm_1_1ValueMap.html">ValueToValueMapTy</a> Old2New;</div>
<div class="line"><a name="l01003"></a><span class="lineno"> 1003</span>&#160;    <span class="keywordflow">for</span> (<a class="code" href="classllvm_1_1Instruction.html">Instruction</a> *<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a> : <a class="code" href="namespacellvm.html#a469101ea87b8b432a1b4f7935c97f35c">reverse</a>(ToDuplicate)) {</div>
<div class="line"><a name="l01004"></a><span class="lineno"> 1004</span>&#160;      <span class="keyword">auto</span> *New = <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>-&gt;clone();</div>
<div class="line"><a name="l01005"></a><span class="lineno"> 1005</span>&#160;      New-&gt;insertBefore(OldBranch);</div>
<div class="line"><a name="l01006"></a><span class="lineno"> 1006</span>&#160;      <a class="code" href="namespacellvm.html#a8f2893ab869a806d78af17691eb97be3">RemapInstruction</a>(New, Old2New,</div>
<div class="line"><a name="l01007"></a><span class="lineno"> 1007</span>&#160;                       <a class="code" href="namespacellvm.html#a77724415203930efd07d7098cb1e437da9a24bd8dba1bef2753bc3f087435ae7f">RF_NoModuleLevelChanges</a> | <a class="code" href="namespacellvm.html#a77724415203930efd07d7098cb1e437da5633028bc27ffa8eab39cc5de65b3108">RF_IgnoreMissingLocals</a>);</div>
<div class="line"><a name="l01008"></a><span class="lineno"> 1008</span>&#160;      Old2New[<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>] = New;</div>
<div class="line"><a name="l01009"></a><span class="lineno"> 1009</span>&#160; </div>
<div class="line"><a name="l01010"></a><span class="lineno"> 1010</span>&#160;      <span class="keywordflow">if</span> (MSSAU) {</div>
<div class="line"><a name="l01011"></a><span class="lineno"> 1011</span>&#160;        <a class="code" href="classllvm_1_1MemorySSA.html">MemorySSA</a> *MSSA = MSSAU-&gt;getMemorySSA();</div>
<div class="line"><a name="l01012"></a><span class="lineno"> 1012</span>&#160;        <span class="keyword">auto</span> *MemA = dyn_cast_or_null&lt;MemoryUse&gt;(MSSA-&gt;<a class="code" href="classllvm_1_1MemorySSA.html#a4ece07ee1030856099726901d0eef81b">getMemoryAccess</a>(<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>));</div>
<div class="line"><a name="l01013"></a><span class="lineno"> 1013</span>&#160;        <span class="keywordflow">if</span> (!MemA)</div>
<div class="line"><a name="l01014"></a><span class="lineno"> 1014</span>&#160;          <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l01015"></a><span class="lineno"> 1015</span>&#160; </div>
<div class="line"><a name="l01016"></a><span class="lineno"> 1016</span>&#160;        <a class="code" href="classllvm_1_1Loop.html">Loop</a> *L = LI-&gt;<a class="code" href="classllvm_1_1LoopInfoBase.html#a7a7c8e0e4f836c13c015b62e18f386bd">getLoopFor</a>(<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>-&gt;getParent());</div>
<div class="line"><a name="l01017"></a><span class="lineno"> 1017</span>&#160;        <span class="keyword">auto</span> *DefiningAccess = MemA-&gt;getDefiningAccess();</div>
<div class="line"><a name="l01018"></a><span class="lineno"> 1018</span>&#160;        <span class="comment">// Get the first defining access before the loop.</span></div>
<div class="line"><a name="l01019"></a><span class="lineno"> 1019</span>&#160;        <span class="keywordflow">while</span> (L-&gt;<a class="code" href="classllvm_1_1LoopBase.html#a04337b572d34ea413c35dbac5d75530b">contains</a>(DefiningAccess-&gt;getBlock())) {</div>
<div class="line"><a name="l01020"></a><span class="lineno"> 1020</span>&#160;          <span class="comment">// If the defining access is a MemoryPhi, get the incoming</span></div>
<div class="line"><a name="l01021"></a><span class="lineno"> 1021</span>&#160;          <span class="comment">// value for the pre-header as defining access.</span></div>
<div class="line"><a name="l01022"></a><span class="lineno"> 1022</span>&#160;          <span class="keywordflow">if</span> (<span class="keyword">auto</span> *MemPhi = dyn_cast&lt;MemoryPhi&gt;(DefiningAccess)) {</div>
<div class="line"><a name="l01023"></a><span class="lineno"> 1023</span>&#160;            DefiningAccess =</div>
<div class="line"><a name="l01024"></a><span class="lineno"> 1024</span>&#160;                MemPhi-&gt;getIncomingValueForBlock(L-&gt;<a class="code" href="classllvm_1_1LoopBase.html#ac3280e7f76f955403fe17eacf126b90d">getLoopPreheader</a>());</div>
<div class="line"><a name="l01025"></a><span class="lineno"> 1025</span>&#160;          } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l01026"></a><span class="lineno"> 1026</span>&#160;            DefiningAccess =</div>
<div class="line"><a name="l01027"></a><span class="lineno"> 1027</span>&#160;                cast&lt;MemoryDef&gt;(DefiningAccess)-&gt;getDefiningAccess();</div>
<div class="line"><a name="l01028"></a><span class="lineno"> 1028</span>&#160;          }</div>
<div class="line"><a name="l01029"></a><span class="lineno"> 1029</span>&#160;        }</div>
<div class="line"><a name="l01030"></a><span class="lineno"> 1030</span>&#160;        MSSAU-&gt;createMemoryAccessInBB(New, DefiningAccess, New-&gt;getParent(),</div>
<div class="line"><a name="l01031"></a><span class="lineno"> 1031</span>&#160;                                      <a class="code" href="classllvm_1_1MemorySSA.html#a9773fde54683945b9e34a0f2e5c1a5a5a7806c120eb87aea9fbb52fed327e09de">MemorySSA::BeforeTerminator</a>);</div>
<div class="line"><a name="l01032"></a><span class="lineno"> 1032</span>&#160;      }</div>
<div class="line"><a name="l01033"></a><span class="lineno"> 1033</span>&#160;    }</div>
<div class="line"><a name="l01034"></a><span class="lineno"> 1034</span>&#160;    BranchVal = Old2New[ToDuplicate[0]];</div>
<div class="line"><a name="l01035"></a><span class="lineno"> 1035</span>&#160;  } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l01036"></a><span class="lineno"> 1036</span>&#160; </div>
<div class="line"><a name="l01037"></a><span class="lineno"> 1037</span>&#160;    <span class="keywordflow">if</span> (!isa&lt;ConstantInt&gt;(Val) ||</div>
<div class="line"><a name="l01038"></a><span class="lineno"> 1038</span>&#160;        Val-&gt;<a class="code" href="classllvm_1_1Value.html#a6393a2d4fe7e10b28a0dcc35f881567b">getType</a>() != <a class="code" href="classllvm_1_1Type.html#aa75984a442f2379de0c66018201fa628">Type::getInt1Ty</a>(LIC-&gt;<a class="code" href="classllvm_1_1Value.html#ab3fc0225d8aaf8434026c3573f961f2c">getContext</a>()))</div>
<div class="line"><a name="l01039"></a><span class="lineno"> 1039</span>&#160;      BranchVal = <span class="keyword">new</span> <a class="code" href="classllvm_1_1ICmpInst.html">ICmpInst</a>(OldBranch, <a class="code" href="classllvm_1_1CmpInst.html#a2be3583dac92a031fa1458d4d992c78baa719225e2de4059f93fd3209e1f48218">ICmpInst::ICMP_EQ</a>, LIC, Val);</div>
<div class="line"><a name="l01040"></a><span class="lineno"> 1040</span>&#160;    <span class="keywordflow">else</span> <span class="keywordflow">if</span> (Val != <a class="code" href="classllvm_1_1ConstantInt.html#a82dbbd8e3688b0bc1eedb338864d0d0c">ConstantInt::getTrue</a>(Val-&gt;<a class="code" href="classllvm_1_1Value.html#ab3fc0225d8aaf8434026c3573f961f2c">getContext</a>())) {</div>
<div class="line"><a name="l01041"></a><span class="lineno"> 1041</span>&#160;      <span class="comment">// We want to enter the new loop when the condition is true.</span></div>
<div class="line"><a name="l01042"></a><span class="lineno"> 1042</span>&#160;      <a class="code" href="namespacestd.html#ab8424022895aee3e366fb9a32f2883cb">std::swap</a>(TrueDest, FalseDest);</div>
<div class="line"><a name="l01043"></a><span class="lineno"> 1043</span>&#160;      Swapped = <span class="keyword">true</span>;</div>
<div class="line"><a name="l01044"></a><span class="lineno"> 1044</span>&#160;    }</div>
<div class="line"><a name="l01045"></a><span class="lineno"> 1045</span>&#160;  }</div>
<div class="line"><a name="l01046"></a><span class="lineno"> 1046</span>&#160; </div>
<div class="line"><a name="l01047"></a><span class="lineno"> 1047</span>&#160;  <span class="comment">// Old branch will be removed, so save its parent and successor to update the</span></div>
<div class="line"><a name="l01048"></a><span class="lineno"> 1048</span>&#160;  <span class="comment">// DomTree.</span></div>
<div class="line"><a name="l01049"></a><span class="lineno"> 1049</span>&#160;  <span class="keyword">auto</span> *OldBranchSucc = OldBranch-&gt;<a class="code" href="classllvm_1_1BranchInst.html#ad97f2e60cf22f15e0cf617af52309031">getSuccessor</a>(0);</div>
<div class="line"><a name="l01050"></a><span class="lineno"> 1050</span>&#160;  <span class="keyword">auto</span> *OldBranchParent = OldBranch-&gt;<a class="code" href="classllvm_1_1Instruction.html#a1a7f07aaef6a3bee130bf0e0f0536802">getParent</a>();</div>
<div class="line"><a name="l01051"></a><span class="lineno"> 1051</span>&#160; </div>
<div class="line"><a name="l01052"></a><span class="lineno"> 1052</span>&#160;  <span class="comment">// Insert the new branch.</span></div>
<div class="line"><a name="l01053"></a><span class="lineno"> 1053</span>&#160;  <a class="code" href="classllvm_1_1BranchInst.html">BranchInst</a> *BI =</div>
<div class="line"><a name="l01054"></a><span class="lineno"> 1054</span>&#160;      <a class="code" href="classllvm_1_1IRBuilder.html">IRBuilder&lt;&gt;</a>(OldBranch).<a class="code" href="classllvm_1_1IRBuilderBase.html#a8e9aa4e5a6d9f4480322e154153bec2b">CreateCondBr</a>(BranchVal, TrueDest, FalseDest, TI);</div>
<div class="line"><a name="l01055"></a><span class="lineno"> 1055</span>&#160;  <span class="keywordflow">if</span> (Swapped)</div>
<div class="line"><a name="l01056"></a><span class="lineno"> 1056</span>&#160;    BI-&gt;<a class="code" href="classllvm_1_1Instruction.html#a6e324daba99cb1d67713a562f9a778d2">swapProfMetadata</a>();</div>
<div class="line"><a name="l01057"></a><span class="lineno"> 1057</span>&#160; </div>
<div class="line"><a name="l01058"></a><span class="lineno"> 1058</span>&#160;  <span class="comment">// Remove the old branch so there is only one branch at the end. This is</span></div>
<div class="line"><a name="l01059"></a><span class="lineno"> 1059</span>&#160;  <span class="comment">// needed to perform DomTree&#39;s internal DFS walk on the function&#39;s CFG.</span></div>
<div class="line"><a name="l01060"></a><span class="lineno"> 1060</span>&#160;  OldBranch-&gt;<a class="code" href="classllvm_1_1Instruction.html#a0fd53f63d349dc8a7c5fc0cdd7a94c8d">removeFromParent</a>();</div>
<div class="line"><a name="l01061"></a><span class="lineno"> 1061</span>&#160; </div>
<div class="line"><a name="l01062"></a><span class="lineno"> 1062</span>&#160;  <span class="comment">// Inform the DT about the new branch.</span></div>
<div class="line"><a name="l01063"></a><span class="lineno"> 1063</span>&#160;  <span class="keywordflow">if</span> (DT) {</div>
<div class="line"><a name="l01064"></a><span class="lineno"> 1064</span>&#160;    <span class="comment">// First, add both successors.</span></div>
<div class="line"><a name="l01065"></a><span class="lineno"> 1065</span>&#160;    <a class="code" href="classllvm_1_1SmallVector.html">SmallVector&lt;DominatorTree::UpdateType, 3&gt;</a> Updates;</div>
<div class="line"><a name="l01066"></a><span class="lineno"> 1066</span>&#160;    <span class="keywordflow">if</span> (TrueDest != OldBranchSucc)</div>
<div class="line"><a name="l01067"></a><span class="lineno"> 1067</span>&#160;      Updates.push_back({<a class="code" href="classllvm_1_1DominatorTreeBase.html#a9aeeca2833810f01b20545a46fe22503">DominatorTree::Insert</a>, OldBranchParent, TrueDest});</div>
<div class="line"><a name="l01068"></a><span class="lineno"> 1068</span>&#160;    <span class="keywordflow">if</span> (FalseDest != OldBranchSucc)</div>
<div class="line"><a name="l01069"></a><span class="lineno"> 1069</span>&#160;      Updates.push_back({<a class="code" href="classllvm_1_1DominatorTreeBase.html#a9aeeca2833810f01b20545a46fe22503">DominatorTree::Insert</a>, OldBranchParent, FalseDest});</div>
<div class="line"><a name="l01070"></a><span class="lineno"> 1070</span>&#160;    <span class="comment">// If both of the new successors are different from the old one, inform the</span></div>
<div class="line"><a name="l01071"></a><span class="lineno"> 1071</span>&#160;    <span class="comment">// DT that the edge was deleted.</span></div>
<div class="line"><a name="l01072"></a><span class="lineno"> 1072</span>&#160;    <span class="keywordflow">if</span> (OldBranchSucc != TrueDest &amp;&amp; OldBranchSucc != FalseDest) {</div>
<div class="line"><a name="l01073"></a><span class="lineno"> 1073</span>&#160;      Updates.push_back({<a class="code" href="classllvm_1_1DominatorTreeBase.html#a71c91cbbfc1c0ecf9a69e10ccf739bd7">DominatorTree::Delete</a>, OldBranchParent, OldBranchSucc});</div>
<div class="line"><a name="l01074"></a><span class="lineno"> 1074</span>&#160;    }</div>
<div class="line"><a name="l01075"></a><span class="lineno"> 1075</span>&#160; </div>
<div class="line"><a name="l01076"></a><span class="lineno"> 1076</span>&#160;    <span class="keywordflow">if</span> (MSSAU)</div>
<div class="line"><a name="l01077"></a><span class="lineno"> 1077</span>&#160;      MSSAU-&gt;applyUpdates(Updates, *DT, <span class="comment">/*UpdateDT=*/</span><span class="keyword">true</span>);</div>
<div class="line"><a name="l01078"></a><span class="lineno"> 1078</span>&#160;    <span class="keywordflow">else</span></div>
<div class="line"><a name="l01079"></a><span class="lineno"> 1079</span>&#160;      DT-&gt;<a class="code" href="classllvm_1_1DominatorTreeBase.html#a470b5b573c7915fe13bd529b22c9adbc">applyUpdates</a>(Updates);</div>
<div class="line"><a name="l01080"></a><span class="lineno"> 1080</span>&#160;  }</div>
<div class="line"><a name="l01081"></a><span class="lineno"> 1081</span>&#160; </div>
<div class="line"><a name="l01082"></a><span class="lineno"> 1082</span>&#160;  <span class="comment">// If either edge is critical, split it. This helps preserve LoopSimplify</span></div>
<div class="line"><a name="l01083"></a><span class="lineno"> 1083</span>&#160;  <span class="comment">// form for enclosing loops.</span></div>
<div class="line"><a name="l01084"></a><span class="lineno"> 1084</span>&#160;  <span class="keyword">auto</span> <a class="code" href="PassBuilderBindings_8cpp.html#a47c521bf7ba0bb2147b96d068af30d04">Options</a> =</div>
<div class="line"><a name="l01085"></a><span class="lineno"> 1085</span>&#160;      <a class="code" href="structllvm_1_1CriticalEdgeSplittingOptions.html">CriticalEdgeSplittingOptions</a>(DT, LI, MSSAU.get()).<a class="code" href="structllvm_1_1CriticalEdgeSplittingOptions.html#a277551f64f2e4e19c1b254126995a316">setPreserveLCSSA</a>();</div>
<div class="line"><a name="l01086"></a><span class="lineno"> 1086</span>&#160;  <a class="code" href="namespacellvm.html#ab61955a622d233750894890e0704da5c">SplitCriticalEdge</a>(BI, 0, <a class="code" href="PassBuilderBindings_8cpp.html#a47c521bf7ba0bb2147b96d068af30d04">Options</a>);</div>
<div class="line"><a name="l01087"></a><span class="lineno"> 1087</span>&#160;  <a class="code" href="namespacellvm.html#ab61955a622d233750894890e0704da5c">SplitCriticalEdge</a>(BI, 1, <a class="code" href="PassBuilderBindings_8cpp.html#a47c521bf7ba0bb2147b96d068af30d04">Options</a>);</div>
<div class="line"><a name="l01088"></a><span class="lineno"> 1088</span>&#160;}</div>
<div class="line"><a name="l01089"></a><span class="lineno"> 1089</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l01090"></a><span class="lineno"> 1090</span>&#160;<span class="comment">/// Given a loop that has a trivial unswitchable condition in it (a cond branch</span></div>
<div class="line"><a name="l01091"></a><span class="lineno"> 1091</span>&#160;<span class="comment">/// from its header block to its latch block, where the path through the loop</span></div>
<div class="line"><a name="l01092"></a><span class="lineno"> 1092</span>&#160;<span class="comment">/// that doesn&#39;t execute its body has no side-effects), unswitch it. This</span></div>
<div class="line"><a name="l01093"></a><span class="lineno"> 1093</span>&#160;<span class="comment">/// doesn&#39;t involve any code duplication, just moving the conditional branch</span></div>
<div class="line"><a name="l01094"></a><span class="lineno"> 1094</span>&#160;<span class="comment">/// outside of the loop and updating loop info.</span></div>
<div class="line"><a name="l01095"></a><span class="lineno"> 1095</span>&#160;<span class="comment"></span><span class="keywordtype">void</span> LoopUnswitch::unswitchTrivialCondition(<a class="code" href="classllvm_1_1Loop.html">Loop</a> *L, <a class="code" href="classllvm_1_1Value.html">Value</a> *<a class="code" href="BasicBlockSections_8cpp.html#a5fd0741d696f28faf65b33f6c6af8fda">Cond</a>, <a class="code" href="classllvm_1_1Constant.html">Constant</a> *Val,</div>
<div class="line"><a name="l01096"></a><span class="lineno"> 1096</span>&#160;                                            <a class="code" href="classllvm_1_1BasicBlock.html">BasicBlock</a> *ExitBlock,</div>
<div class="line"><a name="l01097"></a><span class="lineno"> 1097</span>&#160;                                            <a class="code" href="classllvm_1_1Instruction.html">Instruction</a> *TI) {</div>
<div class="line"><a name="l01098"></a><span class="lineno"> 1098</span>&#160;  <a class="code" href="Debug_8h.html#a08efc68d15935eb8889400a46c3749ba">LLVM_DEBUG</a>(<a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <span class="stringliteral">&quot;loop-unswitch: Trivial-Unswitch loop %&quot;</span></div>
<div class="line"><a name="l01099"></a><span class="lineno"> 1099</span>&#160;                    &lt;&lt; LoopHeader-&gt;<a class="code" href="classllvm_1_1Value.html#adb5c319f5905c1d3ca9eb5df546388c5">getName</a>() &lt;&lt; <span class="stringliteral">&quot; [&quot;</span> &lt;&lt; L-&gt;<a class="code" href="classllvm_1_1LoopBase.html#a5cc113cb783ab6e5ca7b69241431c19c">getBlocks</a>().size()</div>
<div class="line"><a name="l01100"></a><span class="lineno"> 1100</span>&#160;                    &lt;&lt; <span class="stringliteral">&quot; blocks] in Function &quot;</span></div>
<div class="line"><a name="l01101"></a><span class="lineno"> 1101</span>&#160;                    &lt;&lt; L-&gt;<a class="code" href="classllvm_1_1LoopBase.html#a58c5b170ea68b41e94ebb0019523a68f">getHeader</a>()-&gt;<a class="code" href="classllvm_1_1BasicBlock.html#a38bee869ad41aebfef3de2641b12004c">getParent</a>()-&gt;<a class="code" href="classllvm_1_1Value.html#adb5c319f5905c1d3ca9eb5df546388c5">getName</a>()</div>
<div class="line"><a name="l01102"></a><span class="lineno"> 1102</span>&#160;                    &lt;&lt; <span class="stringliteral">&quot; on cond: &quot;</span> &lt;&lt; *Val &lt;&lt; <span class="stringliteral">&quot; == &quot;</span> &lt;&lt; *<a class="code" href="BasicBlockSections_8cpp.html#a5fd0741d696f28faf65b33f6c6af8fda">Cond</a> &lt;&lt; <span class="stringliteral">&quot;\n&quot;</span>);</div>
<div class="line"><a name="l01103"></a><span class="lineno"> 1103</span>&#160;  <span class="comment">// We are going to make essential changes to CFG. This may invalidate cached</span></div>
<div class="line"><a name="l01104"></a><span class="lineno"> 1104</span>&#160;  <span class="comment">// information for L or one of its parent loops in SCEV.</span></div>
<div class="line"><a name="l01105"></a><span class="lineno"> 1105</span>&#160;  <span class="keywordflow">if</span> (<span class="keyword">auto</span> *SEWP = getAnalysisIfAvailable&lt;ScalarEvolutionWrapperPass&gt;())</div>
<div class="line"><a name="l01106"></a><span class="lineno"> 1106</span>&#160;    SEWP-&gt;getSE().forgetTopmostLoop(L);</div>
<div class="line"><a name="l01107"></a><span class="lineno"> 1107</span>&#160; </div>
<div class="line"><a name="l01108"></a><span class="lineno"> 1108</span>&#160;  <span class="comment">// First step, split the preheader, so that we know that there is a safe place</span></div>
<div class="line"><a name="l01109"></a><span class="lineno"> 1109</span>&#160;  <span class="comment">// to insert the conditional branch.  We will change LoopPreheader to have a</span></div>
<div class="line"><a name="l01110"></a><span class="lineno"> 1110</span>&#160;  <span class="comment">// conditional branch on Cond.</span></div>
<div class="line"><a name="l01111"></a><span class="lineno"> 1111</span>&#160;  <a class="code" href="classllvm_1_1BasicBlock.html">BasicBlock</a> *NewPH = <a class="code" href="namespacellvm.html#adf83581f514774264d616eef5706cf6e">SplitEdge</a>(LoopPreheader, LoopHeader, DT, LI, MSSAU.get());</div>
<div class="line"><a name="l01112"></a><span class="lineno"> 1112</span>&#160; </div>
<div class="line"><a name="l01113"></a><span class="lineno"> 1113</span>&#160;  <span class="comment">// Now that we have a place to insert the conditional branch, create a place</span></div>
<div class="line"><a name="l01114"></a><span class="lineno"> 1114</span>&#160;  <span class="comment">// to branch to: this is the exit block out of the loop that we should</span></div>
<div class="line"><a name="l01115"></a><span class="lineno"> 1115</span>&#160;  <span class="comment">// short-circuit to.</span></div>
<div class="line"><a name="l01116"></a><span class="lineno"> 1116</span>&#160; </div>
<div class="line"><a name="l01117"></a><span class="lineno"> 1117</span>&#160;  <span class="comment">// Split this block now, so that the loop maintains its exit block, and so</span></div>
<div class="line"><a name="l01118"></a><span class="lineno"> 1118</span>&#160;  <span class="comment">// that the jump from the preheader can execute the contents of the exit block</span></div>
<div class="line"><a name="l01119"></a><span class="lineno"> 1119</span>&#160;  <span class="comment">// without actually branching to it (the exit block should be dominated by the</span></div>
<div class="line"><a name="l01120"></a><span class="lineno"> 1120</span>&#160;  <span class="comment">// loop header, not the preheader).</span></div>
<div class="line"><a name="l01121"></a><span class="lineno"> 1121</span>&#160;  <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(!L-&gt;<a class="code" href="classllvm_1_1LoopBase.html#a04337b572d34ea413c35dbac5d75530b">contains</a>(ExitBlock) &amp;&amp; <span class="stringliteral">&quot;Exit block is in the loop?&quot;</span>);</div>
<div class="line"><a name="l01122"></a><span class="lineno"> 1122</span>&#160;  <a class="code" href="classllvm_1_1BasicBlock.html">BasicBlock</a> *NewExit =</div>
<div class="line"><a name="l01123"></a><span class="lineno"> 1123</span>&#160;      <a class="code" href="namespacellvm.html#ad295cb34421c21507bc9cdefe1ba3f16">SplitBlock</a>(ExitBlock, &amp;ExitBlock-&gt;<a class="code" href="classllvm_1_1BasicBlock.html#ab706e7ebb1969c5e34f28bfcf2ff719e">front</a>(), DT, LI, MSSAU.get());</div>
<div class="line"><a name="l01124"></a><span class="lineno"> 1124</span>&#160; </div>
<div class="line"><a name="l01125"></a><span class="lineno"> 1125</span>&#160;  <span class="comment">// Okay, now we have a position to branch from and a position to branch to,</span></div>
<div class="line"><a name="l01126"></a><span class="lineno"> 1126</span>&#160;  <span class="comment">// insert the new conditional branch.</span></div>
<div class="line"><a name="l01127"></a><span class="lineno"> 1127</span>&#160;  <span class="keyword">auto</span> *OldBranch = dyn_cast&lt;BranchInst&gt;(LoopPreheader-&gt;<a class="code" href="classllvm_1_1BasicBlock.html#a71a9eabc4318b2fc34f83b01dfee484b">getTerminator</a>());</div>
<div class="line"><a name="l01128"></a><span class="lineno"> 1128</span>&#160;  <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(OldBranch &amp;&amp; <span class="stringliteral">&quot;Failed to split the preheader&quot;</span>);</div>
<div class="line"><a name="l01129"></a><span class="lineno"> 1129</span>&#160;  emitPreheaderBranchOnCondition(<a class="code" href="BasicBlockSections_8cpp.html#a5fd0741d696f28faf65b33f6c6af8fda">Cond</a>, Val, NewExit, NewPH, OldBranch, TI);</div>
<div class="line"><a name="l01130"></a><span class="lineno"> 1130</span>&#160; </div>
<div class="line"><a name="l01131"></a><span class="lineno"> 1131</span>&#160;  <span class="comment">// emitPreheaderBranchOnCondition removed the OldBranch from the function.</span></div>
<div class="line"><a name="l01132"></a><span class="lineno"> 1132</span>&#160;  <span class="comment">// Delete it, as it is no longer needed.</span></div>
<div class="line"><a name="l01133"></a><span class="lineno"> 1133</span>&#160;  <span class="keyword">delete</span> OldBranch;</div>
<div class="line"><a name="l01134"></a><span class="lineno"> 1134</span>&#160; </div>
<div class="line"><a name="l01135"></a><span class="lineno"> 1135</span>&#160;  <span class="comment">// We need to reprocess this loop, it could be unswitched again.</span></div>
<div class="line"><a name="l01136"></a><span class="lineno"> 1136</span>&#160;  RedoLoop = <span class="keyword">true</span>;</div>
<div class="line"><a name="l01137"></a><span class="lineno"> 1137</span>&#160; </div>
<div class="line"><a name="l01138"></a><span class="lineno"> 1138</span>&#160;  <span class="comment">// Now that we know that the loop is never entered when this condition is a</span></div>
<div class="line"><a name="l01139"></a><span class="lineno"> 1139</span>&#160;  <span class="comment">// particular value, rewrite the loop with this info.  We know that this will</span></div>
<div class="line"><a name="l01140"></a><span class="lineno"> 1140</span>&#160;  <span class="comment">// at least eliminate the old branch.</span></div>
<div class="line"><a name="l01141"></a><span class="lineno"> 1141</span>&#160;  rewriteLoopBodyWithConditionConstant(L, <a class="code" href="BasicBlockSections_8cpp.html#a5fd0741d696f28faf65b33f6c6af8fda">Cond</a>, Val, <span class="comment">/*IsEqual=*/</span><span class="keyword">false</span>);</div>
<div class="line"><a name="l01142"></a><span class="lineno"> 1142</span>&#160; </div>
<div class="line"><a name="l01143"></a><span class="lineno"> 1143</span>&#160;  ++NumTrivial;</div>
<div class="line"><a name="l01144"></a><span class="lineno"> 1144</span>&#160;}</div>
<div class="line"><a name="l01145"></a><span class="lineno"> 1145</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l01146"></a><span class="lineno"> 1146</span>&#160;<span class="comment">/// Check if the first non-constant condition starting from the loop header is</span></div>
<div class="line"><a name="l01147"></a><span class="lineno"> 1147</span>&#160;<span class="comment">/// a trivial unswitch condition: that is, a condition controls whether or not</span></div>
<div class="line"><a name="l01148"></a><span class="lineno"> 1148</span>&#160;<span class="comment">/// the loop does anything at all. If it is a trivial condition, unswitching</span></div>
<div class="line"><a name="l01149"></a><span class="lineno"> 1149</span>&#160;<span class="comment">/// produces no code duplications (equivalently, it produces a simpler loop and</span></div>
<div class="line"><a name="l01150"></a><span class="lineno"> 1150</span>&#160;<span class="comment">/// a new empty loop, which gets deleted). Therefore always unswitch trivial</span></div>
<div class="line"><a name="l01151"></a><span class="lineno"> 1151</span>&#160;<span class="comment">/// condition.</span></div>
<div class="line"><a name="l01152"></a><span class="lineno"> 1152</span>&#160;<span class="comment"></span><span class="keywordtype">bool</span> LoopUnswitch::tryTrivialLoopUnswitch(<span class="keywordtype">bool</span> &amp;Changed) {</div>
<div class="line"><a name="l01153"></a><span class="lineno"> 1153</span>&#160;  <a class="code" href="classllvm_1_1BasicBlock.html">BasicBlock</a> *CurrentBB = CurrentLoop-&gt;<a class="code" href="classllvm_1_1LoopBase.html#a58c5b170ea68b41e94ebb0019523a68f">getHeader</a>();</div>
<div class="line"><a name="l01154"></a><span class="lineno"> 1154</span>&#160;  <a class="code" href="classllvm_1_1Instruction.html">Instruction</a> *CurrentTerm = CurrentBB-&gt;<a class="code" href="classllvm_1_1BasicBlock.html#a71a9eabc4318b2fc34f83b01dfee484b">getTerminator</a>();</div>
<div class="line"><a name="l01155"></a><span class="lineno"> 1155</span>&#160;  <a class="code" href="classllvm_1_1LLVMContext.html">LLVMContext</a> &amp;<a class="code" href="NVVMIntrRange_8cpp.html#afad351d7bf10ac0446b64e7827634e94">Context</a> = CurrentBB-&gt;<a class="code" href="classllvm_1_1BasicBlock.html#aa286a0f7f5d38488d593bb7ef0ba183e">getContext</a>();</div>
<div class="line"><a name="l01156"></a><span class="lineno"> 1156</span>&#160; </div>
<div class="line"><a name="l01157"></a><span class="lineno"> 1157</span>&#160;  <span class="comment">// If loop header has only one reachable successor (currently via an</span></div>
<div class="line"><a name="l01158"></a><span class="lineno"> 1158</span>&#160;  <span class="comment">// unconditional branch or constant foldable conditional branch, but</span></div>
<div class="line"><a name="l01159"></a><span class="lineno"> 1159</span>&#160;  <span class="comment">// should also consider adding constant foldable switch instruction in</span></div>
<div class="line"><a name="l01160"></a><span class="lineno"> 1160</span>&#160;  <span class="comment">// future), we should keep looking for trivial condition candidates in</span></div>
<div class="line"><a name="l01161"></a><span class="lineno"> 1161</span>&#160;  <span class="comment">// the successor as well. An alternative is to constant fold conditions</span></div>
<div class="line"><a name="l01162"></a><span class="lineno"> 1162</span>&#160;  <span class="comment">// and merge successors into loop header (then we only need to check header&#39;s</span></div>
<div class="line"><a name="l01163"></a><span class="lineno"> 1163</span>&#160;  <span class="comment">// terminator). The reason for not doing this in LoopUnswitch pass is that</span></div>
<div class="line"><a name="l01164"></a><span class="lineno"> 1164</span>&#160;  <span class="comment">// it could potentially break LoopPassManager&#39;s invariants. Folding dead</span></div>
<div class="line"><a name="l01165"></a><span class="lineno"> 1165</span>&#160;  <span class="comment">// branches could either eliminate the current loop or make other loops</span></div>
<div class="line"><a name="l01166"></a><span class="lineno"> 1166</span>&#160;  <span class="comment">// unreachable. LCSSA form might also not be preserved after deleting</span></div>
<div class="line"><a name="l01167"></a><span class="lineno"> 1167</span>&#160;  <span class="comment">// branches. The following code keeps traversing loop header&#39;s successors</span></div>
<div class="line"><a name="l01168"></a><span class="lineno"> 1168</span>&#160;  <span class="comment">// until it finds the trivial condition candidate (condition that is not a</span></div>
<div class="line"><a name="l01169"></a><span class="lineno"> 1169</span>&#160;  <span class="comment">// constant). Since unswitching generates branches with constant conditions,</span></div>
<div class="line"><a name="l01170"></a><span class="lineno"> 1170</span>&#160;  <span class="comment">// this scenario could be very common in practice.</span></div>
<div class="line"><a name="l01171"></a><span class="lineno"> 1171</span>&#160;  <a class="code" href="classllvm_1_1SmallPtrSet.html">SmallPtrSet&lt;BasicBlock*, 8&gt;</a> Visited;</div>
<div class="line"><a name="l01172"></a><span class="lineno"> 1172</span>&#160; </div>
<div class="line"><a name="l01173"></a><span class="lineno"> 1173</span>&#160;  <span class="keywordflow">while</span> (<span class="keyword">true</span>) {</div>
<div class="line"><a name="l01174"></a><span class="lineno"> 1174</span>&#160;    <span class="comment">// If we exit loop or reach a previous visited block, then</span></div>
<div class="line"><a name="l01175"></a><span class="lineno"> 1175</span>&#160;    <span class="comment">// we can not reach any trivial condition candidates (unfoldable</span></div>
<div class="line"><a name="l01176"></a><span class="lineno"> 1176</span>&#160;    <span class="comment">// branch instructions or switch instructions) and no unswitch</span></div>
<div class="line"><a name="l01177"></a><span class="lineno"> 1177</span>&#160;    <span class="comment">// can happen. Exit and return false.</span></div>
<div class="line"><a name="l01178"></a><span class="lineno"> 1178</span>&#160;    <span class="keywordflow">if</span> (!CurrentLoop-&gt;<a class="code" href="classllvm_1_1LoopBase.html#a04337b572d34ea413c35dbac5d75530b">contains</a>(CurrentBB) || !Visited.<a class="code" href="classllvm_1_1SmallPtrSetImpl.html#a6bc6fb89fe2e91c25559a8631f56e27e">insert</a>(CurrentBB).second)</div>
<div class="line"><a name="l01179"></a><span class="lineno"> 1179</span>&#160;      <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l01180"></a><span class="lineno"> 1180</span>&#160; </div>
<div class="line"><a name="l01181"></a><span class="lineno"> 1181</span>&#160;    <span class="comment">// Check if this loop will execute any side-effecting instructions (e.g.</span></div>
<div class="line"><a name="l01182"></a><span class="lineno"> 1182</span>&#160;    <span class="comment">// stores, calls, volatile loads) in the part of the loop that the code</span></div>
<div class="line"><a name="l01183"></a><span class="lineno"> 1183</span>&#160;    <span class="comment">// *would* execute. Check the header first.</span></div>
<div class="line"><a name="l01184"></a><span class="lineno"> 1184</span>&#160;    <span class="keywordflow">for</span> (<a class="code" href="classllvm_1_1Instruction.html">Instruction</a> &amp;<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a> : *CurrentBB)</div>
<div class="line"><a name="l01185"></a><span class="lineno"> 1185</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>.mayHaveSideEffects())</div>
<div class="line"><a name="l01186"></a><span class="lineno"> 1186</span>&#160;        <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l01187"></a><span class="lineno"> 1187</span>&#160; </div>
<div class="line"><a name="l01188"></a><span class="lineno"> 1188</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1BranchInst.html">BranchInst</a> *BI = dyn_cast&lt;BranchInst&gt;(CurrentTerm)) {</div>
<div class="line"><a name="l01189"></a><span class="lineno"> 1189</span>&#160;      <span class="keywordflow">if</span> (BI-&gt;<a class="code" href="classllvm_1_1BranchInst.html#ad56f6a9b5cd05940017c4544df48bc30">isUnconditional</a>()) {</div>
<div class="line"><a name="l01190"></a><span class="lineno"> 1190</span>&#160;        CurrentBB = BI-&gt;<a class="code" href="classllvm_1_1BranchInst.html#ad97f2e60cf22f15e0cf617af52309031">getSuccessor</a>(0);</div>
<div class="line"><a name="l01191"></a><span class="lineno"> 1191</span>&#160;      } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (BI-&gt;<a class="code" href="classllvm_1_1BranchInst.html#aac456a62894c9f0f8e9f06373bbf40f0">getCondition</a>() == <a class="code" href="classllvm_1_1ConstantInt.html#a82dbbd8e3688b0bc1eedb338864d0d0c">ConstantInt::getTrue</a>(<a class="code" href="NVVMIntrRange_8cpp.html#afad351d7bf10ac0446b64e7827634e94">Context</a>)) {</div>
<div class="line"><a name="l01192"></a><span class="lineno"> 1192</span>&#160;        CurrentBB = BI-&gt;<a class="code" href="classllvm_1_1BranchInst.html#ad97f2e60cf22f15e0cf617af52309031">getSuccessor</a>(0);</div>
<div class="line"><a name="l01193"></a><span class="lineno"> 1193</span>&#160;      } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (BI-&gt;<a class="code" href="classllvm_1_1BranchInst.html#aac456a62894c9f0f8e9f06373bbf40f0">getCondition</a>() == <a class="code" href="classllvm_1_1ConstantInt.html#aa7cce62ac5cc6df09cce0535874336b7">ConstantInt::getFalse</a>(<a class="code" href="NVVMIntrRange_8cpp.html#afad351d7bf10ac0446b64e7827634e94">Context</a>)) {</div>
<div class="line"><a name="l01194"></a><span class="lineno"> 1194</span>&#160;        CurrentBB = BI-&gt;<a class="code" href="classllvm_1_1BranchInst.html#ad97f2e60cf22f15e0cf617af52309031">getSuccessor</a>(1);</div>
<div class="line"><a name="l01195"></a><span class="lineno"> 1195</span>&#160;      } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l01196"></a><span class="lineno"> 1196</span>&#160;        <span class="comment">// Found a trivial condition candidate: non-foldable conditional branch.</span></div>
<div class="line"><a name="l01197"></a><span class="lineno"> 1197</span>&#160;        <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l01198"></a><span class="lineno"> 1198</span>&#160;      }</div>
<div class="line"><a name="l01199"></a><span class="lineno"> 1199</span>&#160;    } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1SwitchInst.html">SwitchInst</a> *<a class="code" href="PassBuilderBindings_8cpp.html#a0f79dad1efc582555a443cc11a8fa401">SI</a> = dyn_cast&lt;SwitchInst&gt;(CurrentTerm)) {</div>
<div class="line"><a name="l01200"></a><span class="lineno"> 1200</span>&#160;      <span class="comment">// At this point, any constant-foldable instructions should have probably</span></div>
<div class="line"><a name="l01201"></a><span class="lineno"> 1201</span>&#160;      <span class="comment">// been folded.</span></div>
<div class="line"><a name="l01202"></a><span class="lineno"> 1202</span>&#160;      <a class="code" href="classllvm_1_1ConstantInt.html">ConstantInt</a> *<a class="code" href="BasicBlockSections_8cpp.html#a5fd0741d696f28faf65b33f6c6af8fda">Cond</a> = dyn_cast&lt;ConstantInt&gt;(<a class="code" href="PassBuilderBindings_8cpp.html#a0f79dad1efc582555a443cc11a8fa401">SI</a>-&gt;getCondition());</div>
<div class="line"><a name="l01203"></a><span class="lineno"> 1203</span>&#160;      <span class="keywordflow">if</span> (!<a class="code" href="BasicBlockSections_8cpp.html#a5fd0741d696f28faf65b33f6c6af8fda">Cond</a>)</div>
<div class="line"><a name="l01204"></a><span class="lineno"> 1204</span>&#160;        <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l01205"></a><span class="lineno"> 1205</span>&#160;      <span class="comment">// Find the target block we are definitely going to.</span></div>
<div class="line"><a name="l01206"></a><span class="lineno"> 1206</span>&#160;      CurrentBB = <a class="code" href="PassBuilderBindings_8cpp.html#a0f79dad1efc582555a443cc11a8fa401">SI</a>-&gt;findCaseValue(<a class="code" href="BasicBlockSections_8cpp.html#a5fd0741d696f28faf65b33f6c6af8fda">Cond</a>)-&gt;getCaseSuccessor();</div>
<div class="line"><a name="l01207"></a><span class="lineno"> 1207</span>&#160;    } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l01208"></a><span class="lineno"> 1208</span>&#160;      <span class="comment">// We do not understand these terminator instructions.</span></div>
<div class="line"><a name="l01209"></a><span class="lineno"> 1209</span>&#160;      <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l01210"></a><span class="lineno"> 1210</span>&#160;    }</div>
<div class="line"><a name="l01211"></a><span class="lineno"> 1211</span>&#160; </div>
<div class="line"><a name="l01212"></a><span class="lineno"> 1212</span>&#160;    CurrentTerm = CurrentBB-&gt;getTerminator();</div>
<div class="line"><a name="l01213"></a><span class="lineno"> 1213</span>&#160;  }</div>
<div class="line"><a name="l01214"></a><span class="lineno"> 1214</span>&#160; </div>
<div class="line"><a name="l01215"></a><span class="lineno"> 1215</span>&#160;  <span class="comment">// CondVal is the condition that controls the trivial condition.</span></div>
<div class="line"><a name="l01216"></a><span class="lineno"> 1216</span>&#160;  <span class="comment">// LoopExitBB is the BasicBlock that loop exits when meets trivial condition.</span></div>
<div class="line"><a name="l01217"></a><span class="lineno"> 1217</span>&#160;  <a class="code" href="classllvm_1_1Constant.html">Constant</a> *CondVal = <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l01218"></a><span class="lineno"> 1218</span>&#160;  <a class="code" href="classllvm_1_1BasicBlock.html">BasicBlock</a> *LoopExitBB = <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l01219"></a><span class="lineno"> 1219</span>&#160; </div>
<div class="line"><a name="l01220"></a><span class="lineno"> 1220</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1BranchInst.html">BranchInst</a> *BI = dyn_cast&lt;BranchInst&gt;(CurrentTerm)) {</div>
<div class="line"><a name="l01221"></a><span class="lineno"> 1221</span>&#160;    <span class="comment">// If this isn&#39;t branching on an invariant condition, we can&#39;t unswitch it.</span></div>
<div class="line"><a name="l01222"></a><span class="lineno"> 1222</span>&#160;    <span class="keywordflow">if</span> (!BI-&gt;<a class="code" href="classllvm_1_1BranchInst.html#a7e4be8b16fbd68c9045a388904044e01">isConditional</a>())</div>
<div class="line"><a name="l01223"></a><span class="lineno"> 1223</span>&#160;      <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l01224"></a><span class="lineno"> 1224</span>&#160; </div>
<div class="line"><a name="l01225"></a><span class="lineno"> 1225</span>&#160;    <a class="code" href="classllvm_1_1Value.html">Value</a> *LoopCond = <a class="code" href="LoopUnswitch_8cpp.html#a9666818bb4bec9f66119ddb9fb3c2c63">findLIVLoopCondition</a>(BI-&gt;<a class="code" href="classllvm_1_1BranchInst.html#aac456a62894c9f0f8e9f06373bbf40f0">getCondition</a>(), CurrentLoop,</div>
<div class="line"><a name="l01226"></a><span class="lineno"> 1226</span>&#160;                                           Changed, MSSAU.get())</div>
<div class="line"><a name="l01227"></a><span class="lineno"> 1227</span>&#160;                          .first;</div>
<div class="line"><a name="l01228"></a><span class="lineno"> 1228</span>&#160; </div>
<div class="line"><a name="l01229"></a><span class="lineno"> 1229</span>&#160;    <span class="comment">// Unswitch only if the trivial condition itself is an LIV (not</span></div>
<div class="line"><a name="l01230"></a><span class="lineno"> 1230</span>&#160;    <span class="comment">// partial LIV which could occur in and/or)</span></div>
<div class="line"><a name="l01231"></a><span class="lineno"> 1231</span>&#160;    <span class="keywordflow">if</span> (!LoopCond || LoopCond != BI-&gt;<a class="code" href="classllvm_1_1BranchInst.html#aac456a62894c9f0f8e9f06373bbf40f0">getCondition</a>())</div>
<div class="line"><a name="l01232"></a><span class="lineno"> 1232</span>&#160;      <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l01233"></a><span class="lineno"> 1233</span>&#160; </div>
<div class="line"><a name="l01234"></a><span class="lineno"> 1234</span>&#160;    <span class="comment">// Check to see if a successor of the branch is guaranteed to</span></div>
<div class="line"><a name="l01235"></a><span class="lineno"> 1235</span>&#160;    <span class="comment">// exit through a unique exit block without having any</span></div>
<div class="line"><a name="l01236"></a><span class="lineno"> 1236</span>&#160;    <span class="comment">// side-effects.  If so, determine the value of Cond that causes</span></div>
<div class="line"><a name="l01237"></a><span class="lineno"> 1237</span>&#160;    <span class="comment">// it to do this.</span></div>
<div class="line"><a name="l01238"></a><span class="lineno"> 1238</span>&#160;    <span class="keywordflow">if</span> ((LoopExitBB =</div>
<div class="line"><a name="l01239"></a><span class="lineno"> 1239</span>&#160;             <a class="code" href="LoopUnswitch_8cpp.html#a9ab6a0cab40eae4e54ed18308f8826ff">isTrivialLoopExitBlock</a>(CurrentLoop, BI-&gt;<a class="code" href="classllvm_1_1BranchInst.html#ad97f2e60cf22f15e0cf617af52309031">getSuccessor</a>(0)))) {</div>
<div class="line"><a name="l01240"></a><span class="lineno"> 1240</span>&#160;      CondVal = <a class="code" href="classllvm_1_1ConstantInt.html#a82dbbd8e3688b0bc1eedb338864d0d0c">ConstantInt::getTrue</a>(<a class="code" href="NVVMIntrRange_8cpp.html#afad351d7bf10ac0446b64e7827634e94">Context</a>);</div>
<div class="line"><a name="l01241"></a><span class="lineno"> 1241</span>&#160;    } <span class="keywordflow">else</span> <span class="keywordflow">if</span> ((LoopExitBB =</div>
<div class="line"><a name="l01242"></a><span class="lineno"> 1242</span>&#160;                    <a class="code" href="LoopUnswitch_8cpp.html#a9ab6a0cab40eae4e54ed18308f8826ff">isTrivialLoopExitBlock</a>(CurrentLoop, BI-&gt;<a class="code" href="classllvm_1_1BranchInst.html#ad97f2e60cf22f15e0cf617af52309031">getSuccessor</a>(1)))) {</div>
<div class="line"><a name="l01243"></a><span class="lineno"> 1243</span>&#160;      CondVal = <a class="code" href="classllvm_1_1ConstantInt.html#aa7cce62ac5cc6df09cce0535874336b7">ConstantInt::getFalse</a>(<a class="code" href="NVVMIntrRange_8cpp.html#afad351d7bf10ac0446b64e7827634e94">Context</a>);</div>
<div class="line"><a name="l01244"></a><span class="lineno"> 1244</span>&#160;    }</div>
<div class="line"><a name="l01245"></a><span class="lineno"> 1245</span>&#160; </div>
<div class="line"><a name="l01246"></a><span class="lineno"> 1246</span>&#160;    <span class="comment">// If we didn&#39;t find a single unique LoopExit block, or if the loop exit</span></div>
<div class="line"><a name="l01247"></a><span class="lineno"> 1247</span>&#160;    <span class="comment">// block contains phi nodes, this isn&#39;t trivial.</span></div>
<div class="line"><a name="l01248"></a><span class="lineno"> 1248</span>&#160;    <span class="keywordflow">if</span> (!LoopExitBB || isa&lt;PHINode&gt;(LoopExitBB-&gt;<a class="code" href="classllvm_1_1BasicBlock.html#a0ed5f3ab3c2e4196ee0cffffa080c062">begin</a>()))</div>
<div class="line"><a name="l01249"></a><span class="lineno"> 1249</span>&#160;      <span class="keywordflow">return</span> <span class="keyword">false</span>;   <span class="comment">// Can&#39;t handle this.</span></div>
<div class="line"><a name="l01250"></a><span class="lineno"> 1250</span>&#160; </div>
<div class="line"><a name="l01251"></a><span class="lineno"> 1251</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="LoopUnswitch_8cpp.html#a052e6e0563b0e12cd740eb375184c9e5">equalityPropUnSafe</a>(*LoopCond))</div>
<div class="line"><a name="l01252"></a><span class="lineno"> 1252</span>&#160;      <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l01253"></a><span class="lineno"> 1253</span>&#160; </div>
<div class="line"><a name="l01254"></a><span class="lineno"> 1254</span>&#160;    unswitchTrivialCondition(CurrentLoop, LoopCond, CondVal, LoopExitBB,</div>
<div class="line"><a name="l01255"></a><span class="lineno"> 1255</span>&#160;                             CurrentTerm);</div>
<div class="line"><a name="l01256"></a><span class="lineno"> 1256</span>&#160;    ++NumBranches;</div>
<div class="line"><a name="l01257"></a><span class="lineno"> 1257</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l01258"></a><span class="lineno"> 1258</span>&#160;  } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1SwitchInst.html">SwitchInst</a> *<a class="code" href="PassBuilderBindings_8cpp.html#a0f79dad1efc582555a443cc11a8fa401">SI</a> = dyn_cast&lt;SwitchInst&gt;(CurrentTerm)) {</div>
<div class="line"><a name="l01259"></a><span class="lineno"> 1259</span>&#160;    <span class="comment">// If this isn&#39;t switching on an invariant condition, we can&#39;t unswitch it.</span></div>
<div class="line"><a name="l01260"></a><span class="lineno"> 1260</span>&#160;    <a class="code" href="classllvm_1_1Value.html">Value</a> *LoopCond = <a class="code" href="LoopUnswitch_8cpp.html#a9666818bb4bec9f66119ddb9fb3c2c63">findLIVLoopCondition</a>(<a class="code" href="PassBuilderBindings_8cpp.html#a0f79dad1efc582555a443cc11a8fa401">SI</a>-&gt;getCondition(), CurrentLoop,</div>
<div class="line"><a name="l01261"></a><span class="lineno"> 1261</span>&#160;                                           Changed, MSSAU.get())</div>
<div class="line"><a name="l01262"></a><span class="lineno"> 1262</span>&#160;                          .first;</div>
<div class="line"><a name="l01263"></a><span class="lineno"> 1263</span>&#160; </div>
<div class="line"><a name="l01264"></a><span class="lineno"> 1264</span>&#160;    <span class="comment">// Unswitch only if the trivial condition itself is an LIV (not</span></div>
<div class="line"><a name="l01265"></a><span class="lineno"> 1265</span>&#160;    <span class="comment">// partial LIV which could occur in and/or)</span></div>
<div class="line"><a name="l01266"></a><span class="lineno"> 1266</span>&#160;    <span class="keywordflow">if</span> (!LoopCond || LoopCond != <a class="code" href="PassBuilderBindings_8cpp.html#a0f79dad1efc582555a443cc11a8fa401">SI</a>-&gt;getCondition())</div>
<div class="line"><a name="l01267"></a><span class="lineno"> 1267</span>&#160;      <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l01268"></a><span class="lineno"> 1268</span>&#160; </div>
<div class="line"><a name="l01269"></a><span class="lineno"> 1269</span>&#160;    <span class="comment">// Check to see if a successor of the switch is guaranteed to go to the</span></div>
<div class="line"><a name="l01270"></a><span class="lineno"> 1270</span>&#160;    <span class="comment">// latch block or exit through a one exit block without having any</span></div>
<div class="line"><a name="l01271"></a><span class="lineno"> 1271</span>&#160;    <span class="comment">// side-effects.  If so, determine the value of Cond that causes it to do</span></div>
<div class="line"><a name="l01272"></a><span class="lineno"> 1272</span>&#160;    <span class="comment">// this.</span></div>
<div class="line"><a name="l01273"></a><span class="lineno"> 1273</span>&#160;    <span class="comment">// Note that we can&#39;t trivially unswitch on the default case or</span></div>
<div class="line"><a name="l01274"></a><span class="lineno"> 1274</span>&#160;    <span class="comment">// on already unswitched cases.</span></div>
<div class="line"><a name="l01275"></a><span class="lineno"> 1275</span>&#160;    <span class="keywordflow">for</span> (<span class="keyword">auto</span> Case : <a class="code" href="PassBuilderBindings_8cpp.html#a0f79dad1efc582555a443cc11a8fa401">SI</a>-&gt;cases()) {</div>
<div class="line"><a name="l01276"></a><span class="lineno"> 1276</span>&#160;      <a class="code" href="classllvm_1_1BasicBlock.html">BasicBlock</a> *LoopExitCandidate;</div>
<div class="line"><a name="l01277"></a><span class="lineno"> 1277</span>&#160;      <span class="keywordflow">if</span> ((LoopExitCandidate =</div>
<div class="line"><a name="l01278"></a><span class="lineno"> 1278</span>&#160;               <a class="code" href="LoopUnswitch_8cpp.html#a9ab6a0cab40eae4e54ed18308f8826ff">isTrivialLoopExitBlock</a>(CurrentLoop, Case.getCaseSuccessor()))) {</div>
<div class="line"><a name="l01279"></a><span class="lineno"> 1279</span>&#160;        <span class="comment">// Okay, we found a trivial case, remember the value that is trivial.</span></div>
<div class="line"><a name="l01280"></a><span class="lineno"> 1280</span>&#160;        <a class="code" href="classllvm_1_1ConstantInt.html">ConstantInt</a> *CaseVal = Case.getCaseValue();</div>
<div class="line"><a name="l01281"></a><span class="lineno"> 1281</span>&#160; </div>
<div class="line"><a name="l01282"></a><span class="lineno"> 1282</span>&#160;        <span class="comment">// Check that it was not unswitched before, since already unswitched</span></div>
<div class="line"><a name="l01283"></a><span class="lineno"> 1283</span>&#160;        <span class="comment">// trivial vals are looks trivial too.</span></div>
<div class="line"><a name="l01284"></a><span class="lineno"> 1284</span>&#160;        <span class="keywordflow">if</span> (BranchesInfo.isUnswitched(<a class="code" href="PassBuilderBindings_8cpp.html#a0f79dad1efc582555a443cc11a8fa401">SI</a>, CaseVal))</div>
<div class="line"><a name="l01285"></a><span class="lineno"> 1285</span>&#160;          <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l01286"></a><span class="lineno"> 1286</span>&#160;        LoopExitBB = LoopExitCandidate;</div>
<div class="line"><a name="l01287"></a><span class="lineno"> 1287</span>&#160;        CondVal = CaseVal;</div>
<div class="line"><a name="l01288"></a><span class="lineno"> 1288</span>&#160;        <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l01289"></a><span class="lineno"> 1289</span>&#160;      }</div>
<div class="line"><a name="l01290"></a><span class="lineno"> 1290</span>&#160;    }</div>
<div class="line"><a name="l01291"></a><span class="lineno"> 1291</span>&#160; </div>
<div class="line"><a name="l01292"></a><span class="lineno"> 1292</span>&#160;    <span class="comment">// If we didn&#39;t find a single unique LoopExit block, or if the loop exit</span></div>
<div class="line"><a name="l01293"></a><span class="lineno"> 1293</span>&#160;    <span class="comment">// block contains phi nodes, this isn&#39;t trivial.</span></div>
<div class="line"><a name="l01294"></a><span class="lineno"> 1294</span>&#160;    <span class="keywordflow">if</span> (!LoopExitBB || isa&lt;PHINode&gt;(LoopExitBB-&gt;<a class="code" href="classllvm_1_1BasicBlock.html#a0ed5f3ab3c2e4196ee0cffffa080c062">begin</a>()))</div>
<div class="line"><a name="l01295"></a><span class="lineno"> 1295</span>&#160;      <span class="keywordflow">return</span> <span class="keyword">false</span>;   <span class="comment">// Can&#39;t handle this.</span></div>
<div class="line"><a name="l01296"></a><span class="lineno"> 1296</span>&#160; </div>
<div class="line"><a name="l01297"></a><span class="lineno"> 1297</span>&#160;    unswitchTrivialCondition(CurrentLoop, LoopCond, CondVal, LoopExitBB,</div>
<div class="line"><a name="l01298"></a><span class="lineno"> 1298</span>&#160;                             <span class="keyword">nullptr</span>);</div>
<div class="line"><a name="l01299"></a><span class="lineno"> 1299</span>&#160; </div>
<div class="line"><a name="l01300"></a><span class="lineno"> 1300</span>&#160;    <span class="comment">// We are only unswitching full LIV.</span></div>
<div class="line"><a name="l01301"></a><span class="lineno"> 1301</span>&#160;    BranchesInfo.setUnswitched(<a class="code" href="PassBuilderBindings_8cpp.html#a0f79dad1efc582555a443cc11a8fa401">SI</a>, CondVal);</div>
<div class="line"><a name="l01302"></a><span class="lineno"> 1302</span>&#160;    ++NumSwitches;</div>
<div class="line"><a name="l01303"></a><span class="lineno"> 1303</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l01304"></a><span class="lineno"> 1304</span>&#160;  }</div>
<div class="line"><a name="l01305"></a><span class="lineno"> 1305</span>&#160;  <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l01306"></a><span class="lineno"> 1306</span>&#160;}</div>
<div class="line"><a name="l01307"></a><span class="lineno"> 1307</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l01308"></a><span class="lineno"> 1308</span>&#160;<span class="comment">/// Split all of the edges from inside the loop to their exit blocks.</span></div>
<div class="line"><a name="l01309"></a><span class="lineno"> 1309</span>&#160;<span class="comment">/// Update the appropriate Phi nodes as we do so.</span></div>
<div class="line"><a name="l01310"></a><span class="lineno"> 1310</span>&#160;<span class="comment"></span><span class="keywordtype">void</span> LoopUnswitch::splitExitEdges(</div>
<div class="line"><a name="l01311"></a><span class="lineno"> 1311</span>&#160;    <a class="code" href="classllvm_1_1Loop.html">Loop</a> *L, <span class="keyword">const</span> <a class="code" href="classllvm_1_1SmallVectorImpl.html">SmallVectorImpl&lt;BasicBlock *&gt;</a> &amp;ExitBlocks) {</div>
<div class="line"><a name="l01312"></a><span class="lineno"> 1312</span>&#160; </div>
<div class="line"><a name="l01313"></a><span class="lineno"> 1313</span>&#160;  <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a> = 0, <a class="code" href="BuiltinGCs_8cpp.html#a6742d2e0a668baf1196ec69e158d5f15">E</a> = ExitBlocks.size(); <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a> != <a class="code" href="BuiltinGCs_8cpp.html#a6742d2e0a668baf1196ec69e158d5f15">E</a>; ++<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>) {</div>
<div class="line"><a name="l01314"></a><span class="lineno"> 1314</span>&#160;    <a class="code" href="classllvm_1_1BasicBlock.html">BasicBlock</a> *ExitBlock = ExitBlocks[<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>];</div>
<div class="line"><a name="l01315"></a><span class="lineno"> 1315</span>&#160;    <a class="code" href="classllvm_1_1SmallVector.html">SmallVector&lt;BasicBlock *, 4&gt;</a> Preds(<a class="code" href="namespacellvm.html#a7e108932dc3da5294aed99a353aac9c4">pred_begin</a>(ExitBlock),</div>
<div class="line"><a name="l01316"></a><span class="lineno"> 1316</span>&#160;                                       <a class="code" href="namespacellvm.html#a5eeaf08e96168c2cac8960f87f0ef360">pred_end</a>(ExitBlock));</div>
<div class="line"><a name="l01317"></a><span class="lineno"> 1317</span>&#160; </div>
<div class="line"><a name="l01318"></a><span class="lineno"> 1318</span>&#160;    <span class="comment">// Although SplitBlockPredecessors doesn&#39;t preserve loop-simplify in</span></div>
<div class="line"><a name="l01319"></a><span class="lineno"> 1319</span>&#160;    <span class="comment">// general, if we call it on all predecessors of all exits then it does.</span></div>
<div class="line"><a name="l01320"></a><span class="lineno"> 1320</span>&#160;    <a class="code" href="namespacellvm.html#a9d391b6acc6d90c9b8a8442324b1aa6f">SplitBlockPredecessors</a>(ExitBlock, Preds, <span class="stringliteral">&quot;.us-lcssa&quot;</span>, DT, LI, MSSAU.get(),</div>
<div class="line"><a name="l01321"></a><span class="lineno"> 1321</span>&#160;                           <span class="comment">/*PreserveLCSSA*/</span> <span class="keyword">true</span>);</div>
<div class="line"><a name="l01322"></a><span class="lineno"> 1322</span>&#160;  }</div>
<div class="line"><a name="l01323"></a><span class="lineno"> 1323</span>&#160;}</div>
<div class="line"><a name="l01324"></a><span class="lineno"> 1324</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l01325"></a><span class="lineno"> 1325</span>&#160;<span class="comment">/// We determined that the loop is profitable to unswitch when LIC equal Val.</span></div>
<div class="line"><a name="l01326"></a><span class="lineno"> 1326</span>&#160;<span class="comment">/// Split it into loop versions and test the condition outside of either loop.</span></div>
<div class="line"><a name="l01327"></a><span class="lineno"> 1327</span>&#160;<span class="comment">/// Return the loops created as Out1/Out2.</span></div>
<div class="line"><a name="l01328"></a><span class="lineno"> 1328</span>&#160;<span class="comment"></span><span class="keywordtype">void</span> LoopUnswitch::unswitchNontrivialCondition(</div>
<div class="line"><a name="l01329"></a><span class="lineno"> 1329</span>&#160;    <a class="code" href="classllvm_1_1Value.html">Value</a> *LIC, <a class="code" href="classllvm_1_1Constant.html">Constant</a> *Val, <a class="code" href="classllvm_1_1Loop.html">Loop</a> *L, <a class="code" href="classllvm_1_1Instruction.html">Instruction</a> *TI,</div>
<div class="line"><a name="l01330"></a><span class="lineno"> 1330</span>&#160;    <a class="code" href="classllvm_1_1ArrayRef.html">ArrayRef&lt;Instruction *&gt;</a> ToDuplicate) {</div>
<div class="line"><a name="l01331"></a><span class="lineno"> 1331</span>&#160;  <a class="code" href="classllvm_1_1Function.html">Function</a> *<a class="code" href="MD5_8cpp.html#a96d73bbd7af15cb1fc38c3f4a3bd82e9">F</a> = LoopHeader-&gt;<a class="code" href="classllvm_1_1BasicBlock.html#a38bee869ad41aebfef3de2641b12004c">getParent</a>();</div>
<div class="line"><a name="l01332"></a><span class="lineno"> 1332</span>&#160;  <a class="code" href="Debug_8h.html#a08efc68d15935eb8889400a46c3749ba">LLVM_DEBUG</a>(<a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <span class="stringliteral">&quot;loop-unswitch: Unswitching loop %&quot;</span></div>
<div class="line"><a name="l01333"></a><span class="lineno"> 1333</span>&#160;                    &lt;&lt; LoopHeader-&gt;<a class="code" href="classllvm_1_1Value.html#adb5c319f5905c1d3ca9eb5df546388c5">getName</a>() &lt;&lt; <span class="stringliteral">&quot; [&quot;</span> &lt;&lt; L-&gt;<a class="code" href="classllvm_1_1LoopBase.html#a5cc113cb783ab6e5ca7b69241431c19c">getBlocks</a>().size()</div>
<div class="line"><a name="l01334"></a><span class="lineno"> 1334</span>&#160;                    &lt;&lt; <span class="stringliteral">&quot; blocks] in Function &quot;</span> &lt;&lt; <a class="code" href="MD5_8cpp.html#a96d73bbd7af15cb1fc38c3f4a3bd82e9">F</a>-&gt;getName() &lt;&lt; <span class="stringliteral">&quot; when &#39;&quot;</span></div>
<div class="line"><a name="l01335"></a><span class="lineno"> 1335</span>&#160;                    &lt;&lt; *Val &lt;&lt; <span class="stringliteral">&quot;&#39; == &quot;</span> &lt;&lt; *LIC &lt;&lt; <span class="stringliteral">&quot;\n&quot;</span>);</div>
<div class="line"><a name="l01336"></a><span class="lineno"> 1336</span>&#160; </div>
<div class="line"><a name="l01337"></a><span class="lineno"> 1337</span>&#160;  <span class="comment">// We are going to make essential changes to CFG. This may invalidate cached</span></div>
<div class="line"><a name="l01338"></a><span class="lineno"> 1338</span>&#160;  <span class="comment">// information for L or one of its parent loops in SCEV.</span></div>
<div class="line"><a name="l01339"></a><span class="lineno"> 1339</span>&#160;  <span class="keywordflow">if</span> (<span class="keyword">auto</span> *SEWP = getAnalysisIfAvailable&lt;ScalarEvolutionWrapperPass&gt;())</div>
<div class="line"><a name="l01340"></a><span class="lineno"> 1340</span>&#160;    SEWP-&gt;getSE().forgetTopmostLoop(L);</div>
<div class="line"><a name="l01341"></a><span class="lineno"> 1341</span>&#160; </div>
<div class="line"><a name="l01342"></a><span class="lineno"> 1342</span>&#160;  LoopBlocks.clear();</div>
<div class="line"><a name="l01343"></a><span class="lineno"> 1343</span>&#160;  NewBlocks.clear();</div>
<div class="line"><a name="l01344"></a><span class="lineno"> 1344</span>&#160; </div>
<div class="line"><a name="l01345"></a><span class="lineno"> 1345</span>&#160;  <span class="keywordflow">if</span> (MSSAU &amp;&amp; <a class="code" href="namespacellvm.html#aa29fe161c408879ada30c90ebbf55dcf">VerifyMemorySSA</a>)</div>
<div class="line"><a name="l01346"></a><span class="lineno"> 1346</span>&#160;    MSSA-&gt;<a class="code" href="classllvm_1_1MemorySSA.html#a1b675075f5fd5a025edeca069612042e">verifyMemorySSA</a>();</div>
<div class="line"><a name="l01347"></a><span class="lineno"> 1347</span>&#160; </div>
<div class="line"><a name="l01348"></a><span class="lineno"> 1348</span>&#160;  <span class="comment">// First step, split the preheader and exit blocks, and add these blocks to</span></div>
<div class="line"><a name="l01349"></a><span class="lineno"> 1349</span>&#160;  <span class="comment">// the LoopBlocks list.</span></div>
<div class="line"><a name="l01350"></a><span class="lineno"> 1350</span>&#160;  <a class="code" href="classllvm_1_1BasicBlock.html">BasicBlock</a> *NewPreheader =</div>
<div class="line"><a name="l01351"></a><span class="lineno"> 1351</span>&#160;      <a class="code" href="namespacellvm.html#adf83581f514774264d616eef5706cf6e">SplitEdge</a>(LoopPreheader, LoopHeader, DT, LI, MSSAU.get());</div>
<div class="line"><a name="l01352"></a><span class="lineno"> 1352</span>&#160;  LoopBlocks.push_back(NewPreheader);</div>
<div class="line"><a name="l01353"></a><span class="lineno"> 1353</span>&#160; </div>
<div class="line"><a name="l01354"></a><span class="lineno"> 1354</span>&#160;  <span class="comment">// We want the loop to come after the preheader, but before the exit blocks.</span></div>
<div class="line"><a name="l01355"></a><span class="lineno"> 1355</span>&#160;  <a class="code" href="namespacellvm.html#a39d3d23a084c4544ee5903203db10e8a">llvm::append_range</a>(LoopBlocks, L-&gt;<a class="code" href="classllvm_1_1LoopBase.html#a40f34cc77d2b3bc73384f535c8101858">blocks</a>());</div>
<div class="line"><a name="l01356"></a><span class="lineno"> 1356</span>&#160; </div>
<div class="line"><a name="l01357"></a><span class="lineno"> 1357</span>&#160;  <a class="code" href="classllvm_1_1SmallVector.html">SmallVector&lt;BasicBlock*, 8&gt;</a> ExitBlocks;</div>
<div class="line"><a name="l01358"></a><span class="lineno"> 1358</span>&#160;  L-&gt;<a class="code" href="classllvm_1_1LoopBase.html#ae069a12f0a2d2deb69e30b439a91190e">getUniqueExitBlocks</a>(ExitBlocks);</div>
<div class="line"><a name="l01359"></a><span class="lineno"> 1359</span>&#160; </div>
<div class="line"><a name="l01360"></a><span class="lineno"> 1360</span>&#160;  <span class="comment">// Split all of the edges from inside the loop to their exit blocks.  Update</span></div>
<div class="line"><a name="l01361"></a><span class="lineno"> 1361</span>&#160;  <span class="comment">// the appropriate Phi nodes as we do so.</span></div>
<div class="line"><a name="l01362"></a><span class="lineno"> 1362</span>&#160;  splitExitEdges(L, ExitBlocks);</div>
<div class="line"><a name="l01363"></a><span class="lineno"> 1363</span>&#160; </div>
<div class="line"><a name="l01364"></a><span class="lineno"> 1364</span>&#160;  <span class="comment">// The exit blocks may have been changed due to edge splitting, recompute.</span></div>
<div class="line"><a name="l01365"></a><span class="lineno"> 1365</span>&#160;  ExitBlocks.<a class="code" href="classllvm_1_1SmallVectorImpl.html#aac0ea55010b7b1a301e65a0baea057aa">clear</a>();</div>
<div class="line"><a name="l01366"></a><span class="lineno"> 1366</span>&#160;  L-&gt;<a class="code" href="classllvm_1_1LoopBase.html#ae069a12f0a2d2deb69e30b439a91190e">getUniqueExitBlocks</a>(ExitBlocks);</div>
<div class="line"><a name="l01367"></a><span class="lineno"> 1367</span>&#160; </div>
<div class="line"><a name="l01368"></a><span class="lineno"> 1368</span>&#160;  <span class="comment">// Add exit blocks to the loop blocks.</span></div>
<div class="line"><a name="l01369"></a><span class="lineno"> 1369</span>&#160;  <a class="code" href="namespacellvm.html#a39d3d23a084c4544ee5903203db10e8a">llvm::append_range</a>(LoopBlocks, ExitBlocks);</div>
<div class="line"><a name="l01370"></a><span class="lineno"> 1370</span>&#160; </div>
<div class="line"><a name="l01371"></a><span class="lineno"> 1371</span>&#160;  <span class="comment">// Next step, clone all of the basic blocks that make up the loop (including</span></div>
<div class="line"><a name="l01372"></a><span class="lineno"> 1372</span>&#160;  <span class="comment">// the loop preheader and exit blocks), keeping track of the mapping between</span></div>
<div class="line"><a name="l01373"></a><span class="lineno"> 1373</span>&#160;  <span class="comment">// the instructions and blocks.</span></div>
<div class="line"><a name="l01374"></a><span class="lineno"> 1374</span>&#160;  NewBlocks.reserve(LoopBlocks.size());</div>
<div class="line"><a name="l01375"></a><span class="lineno"> 1375</span>&#160;  <a class="code" href="classllvm_1_1ValueMap.html">ValueToValueMapTy</a> VMap;</div>
<div class="line"><a name="l01376"></a><span class="lineno"> 1376</span>&#160;  <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a> = 0, <a class="code" href="BuiltinGCs_8cpp.html#a6742d2e0a668baf1196ec69e158d5f15">E</a> = LoopBlocks.size(); <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a> != <a class="code" href="BuiltinGCs_8cpp.html#a6742d2e0a668baf1196ec69e158d5f15">E</a>; ++<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>) {</div>
<div class="line"><a name="l01377"></a><span class="lineno"> 1377</span>&#160;    <a class="code" href="classllvm_1_1BasicBlock.html">BasicBlock</a> *NewBB = <a class="code" href="namespacellvm.html#a6befe133f42d6a8e07ba98372d7f9c60">CloneBasicBlock</a>(LoopBlocks[<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>], VMap, <span class="stringliteral">&quot;.us&quot;</span>, <a class="code" href="MD5_8cpp.html#a96d73bbd7af15cb1fc38c3f4a3bd82e9">F</a>);</div>
<div class="line"><a name="l01378"></a><span class="lineno"> 1378</span>&#160; </div>
<div class="line"><a name="l01379"></a><span class="lineno"> 1379</span>&#160;    NewBlocks.push_back(NewBB);</div>
<div class="line"><a name="l01380"></a><span class="lineno"> 1380</span>&#160;    VMap[LoopBlocks[<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>]] = NewBB; <span class="comment">// Keep the BB mapping.</span></div>
<div class="line"><a name="l01381"></a><span class="lineno"> 1381</span>&#160;  }</div>
<div class="line"><a name="l01382"></a><span class="lineno"> 1382</span>&#160; </div>
<div class="line"><a name="l01383"></a><span class="lineno"> 1383</span>&#160;  <span class="comment">// Splice the newly inserted blocks into the function right before the</span></div>
<div class="line"><a name="l01384"></a><span class="lineno"> 1384</span>&#160;  <span class="comment">// original preheader.</span></div>
<div class="line"><a name="l01385"></a><span class="lineno"> 1385</span>&#160;  <a class="code" href="MD5_8cpp.html#a96d73bbd7af15cb1fc38c3f4a3bd82e9">F</a>-&gt;getBasicBlockList().splice(NewPreheader-&gt;<a class="code" href="classllvm_1_1ilist__node__impl.html#af719fc783be6589465137d997701a432">getIterator</a>(),</div>
<div class="line"><a name="l01386"></a><span class="lineno"> 1386</span>&#160;                                <a class="code" href="MD5_8cpp.html#a96d73bbd7af15cb1fc38c3f4a3bd82e9">F</a>-&gt;getBasicBlockList(),</div>
<div class="line"><a name="l01387"></a><span class="lineno"> 1387</span>&#160;                                NewBlocks[0]-&gt;getIterator(), <a class="code" href="MD5_8cpp.html#a96d73bbd7af15cb1fc38c3f4a3bd82e9">F</a>-&gt;end());</div>
<div class="line"><a name="l01388"></a><span class="lineno"> 1388</span>&#160; </div>
<div class="line"><a name="l01389"></a><span class="lineno"> 1389</span>&#160;  <span class="comment">// Now we create the new Loop object for the versioned loop.</span></div>
<div class="line"><a name="l01390"></a><span class="lineno"> 1390</span>&#160;  <a class="code" href="classllvm_1_1Loop.html">Loop</a> *NewLoop = <a class="code" href="namespacellvm.html#afe8e2e0edcd7756ff5985b8798270c5d">cloneLoop</a>(L, L-&gt;<a class="code" href="classllvm_1_1LoopBase.html#a62733c3335a87750623dbfc5b3ae4f6c">getParentLoop</a>(), VMap, LI, LPM);</div>
<div class="line"><a name="l01391"></a><span class="lineno"> 1391</span>&#160; </div>
<div class="line"><a name="l01392"></a><span class="lineno"> 1392</span>&#160;  <span class="comment">// Recalculate unswitching quota, inherit simplified switches info for NewBB,</span></div>
<div class="line"><a name="l01393"></a><span class="lineno"> 1393</span>&#160;  <span class="comment">// Probably clone more loop-unswitch related loop properties.</span></div>
<div class="line"><a name="l01394"></a><span class="lineno"> 1394</span>&#160;  BranchesInfo.cloneData(NewLoop, L, VMap);</div>
<div class="line"><a name="l01395"></a><span class="lineno"> 1395</span>&#160; </div>
<div class="line"><a name="l01396"></a><span class="lineno"> 1396</span>&#160;  <a class="code" href="classllvm_1_1Loop.html">Loop</a> *ParentLoop = L-&gt;<a class="code" href="classllvm_1_1LoopBase.html#a62733c3335a87750623dbfc5b3ae4f6c">getParentLoop</a>();</div>
<div class="line"><a name="l01397"></a><span class="lineno"> 1397</span>&#160;  <span class="keywordflow">if</span> (ParentLoop) {</div>
<div class="line"><a name="l01398"></a><span class="lineno"> 1398</span>&#160;    <span class="comment">// Make sure to add the cloned preheader and exit blocks to the parent loop</span></div>
<div class="line"><a name="l01399"></a><span class="lineno"> 1399</span>&#160;    <span class="comment">// as well.</span></div>
<div class="line"><a name="l01400"></a><span class="lineno"> 1400</span>&#160;    ParentLoop-&gt;<a class="code" href="classllvm_1_1LoopBase.html#a63f099d3bf7cf97eb3ae2d630e3d1afc">addBasicBlockToLoop</a>(NewBlocks[0], *LI);</div>
<div class="line"><a name="l01401"></a><span class="lineno"> 1401</span>&#160;  }</div>
<div class="line"><a name="l01402"></a><span class="lineno"> 1402</span>&#160; </div>
<div class="line"><a name="l01403"></a><span class="lineno"> 1403</span>&#160;  <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> EBI = 0, EBE = ExitBlocks.size(); EBI != EBE; ++EBI) {</div>
<div class="line"><a name="l01404"></a><span class="lineno"> 1404</span>&#160;    <a class="code" href="classllvm_1_1BasicBlock.html">BasicBlock</a> *NewExit = cast&lt;BasicBlock&gt;(VMap[ExitBlocks[EBI]]);</div>
<div class="line"><a name="l01405"></a><span class="lineno"> 1405</span>&#160;    <span class="comment">// The new exit block should be in the same loop as the old one.</span></div>
<div class="line"><a name="l01406"></a><span class="lineno"> 1406</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1Loop.html">Loop</a> *ExitBBLoop = LI-&gt;<a class="code" href="classllvm_1_1LoopInfoBase.html#a7a7c8e0e4f836c13c015b62e18f386bd">getLoopFor</a>(ExitBlocks[EBI]))</div>
<div class="line"><a name="l01407"></a><span class="lineno"> 1407</span>&#160;      ExitBBLoop-&gt;addBasicBlockToLoop(NewExit, *LI);</div>
<div class="line"><a name="l01408"></a><span class="lineno"> 1408</span>&#160; </div>
<div class="line"><a name="l01409"></a><span class="lineno"> 1409</span>&#160;    <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(NewExit-&gt;<a class="code" href="classllvm_1_1BasicBlock.html#a71a9eabc4318b2fc34f83b01dfee484b">getTerminator</a>()-&gt;<a class="code" href="classllvm_1_1Instruction.html#ad449a11cc9b14b0ac93bd61bd0bd9293">getNumSuccessors</a>() == 1 &amp;&amp;</div>
<div class="line"><a name="l01410"></a><span class="lineno"> 1410</span>&#160;           <span class="stringliteral">&quot;Exit block should have been split to have one successor!&quot;</span>);</div>
<div class="line"><a name="l01411"></a><span class="lineno"> 1411</span>&#160;    <a class="code" href="classllvm_1_1BasicBlock.html">BasicBlock</a> *ExitSucc = NewExit-&gt;<a class="code" href="classllvm_1_1BasicBlock.html#a71a9eabc4318b2fc34f83b01dfee484b">getTerminator</a>()-&gt;<a class="code" href="classllvm_1_1Instruction.html#a944c50b4f5440b3914f5e2a157bb0fd3">getSuccessor</a>(0);</div>
<div class="line"><a name="l01412"></a><span class="lineno"> 1412</span>&#160; </div>
<div class="line"><a name="l01413"></a><span class="lineno"> 1413</span>&#160;    <span class="comment">// If the successor of the exit block had PHI nodes, add an entry for</span></div>
<div class="line"><a name="l01414"></a><span class="lineno"> 1414</span>&#160;    <span class="comment">// NewExit.</span></div>
<div class="line"><a name="l01415"></a><span class="lineno"> 1415</span>&#160;    <span class="keywordflow">for</span> (<a class="code" href="classllvm_1_1PHINode.html">PHINode</a> &amp;PN : ExitSucc-&gt;<a class="code" href="classllvm_1_1BasicBlock.html#a233eb15d557dbd3af7221dd9be5cb02d">phis</a>()) {</div>
<div class="line"><a name="l01416"></a><span class="lineno"> 1416</span>&#160;      <a class="code" href="classllvm_1_1Value.html">Value</a> *V = PN.getIncomingValueForBlock(ExitBlocks[EBI]);</div>
<div class="line"><a name="l01417"></a><span class="lineno"> 1417</span>&#160;      <a class="code" href="classllvm_1_1ValueMapIterator.html">ValueToValueMapTy::iterator</a> It = VMap.<a class="code" href="classllvm_1_1ValueMap.html#a7629b8c5f6a6802ee0fdc5c290769692">find</a>(V);</div>
<div class="line"><a name="l01418"></a><span class="lineno"> 1418</span>&#160;      <span class="keywordflow">if</span> (It != VMap.<a class="code" href="classllvm_1_1ValueMap.html#ab871e2d0ebded563edfebd6766fc1a04">end</a>()) V = It-&gt;<a class="code" href="structllvm_1_1ValueMapIterator_1_1ValueTypeProxy.html#a5bcf5b029fa9492c00d2329def9b5137">second</a>;</div>
<div class="line"><a name="l01419"></a><span class="lineno"> 1419</span>&#160;      PN.addIncoming(V, NewExit);</div>
<div class="line"><a name="l01420"></a><span class="lineno"> 1420</span>&#160;    }</div>
<div class="line"><a name="l01421"></a><span class="lineno"> 1421</span>&#160; </div>
<div class="line"><a name="l01422"></a><span class="lineno"> 1422</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1LandingPadInst.html">LandingPadInst</a> *LPad = NewExit-&gt;<a class="code" href="classllvm_1_1BasicBlock.html#a1553a166adb52e29e3a240dd37627ad9">getLandingPadInst</a>()) {</div>
<div class="line"><a name="l01423"></a><span class="lineno"> 1423</span>&#160;      <a class="code" href="classllvm_1_1PHINode.html">PHINode</a> *PN = <a class="code" href="classllvm_1_1PHINode.html#ab0ff669b12c20c07137705c38872ec63">PHINode::Create</a>(LPad-&gt;getType(), 0, <span class="stringliteral">&quot;&quot;</span>,</div>
<div class="line"><a name="l01424"></a><span class="lineno"> 1424</span>&#160;                                    &amp;*ExitSucc-&gt;<a class="code" href="classllvm_1_1BasicBlock.html#a161fd4e9fa5367f64c2a4c9e921c3ad3">getFirstInsertionPt</a>());</div>
<div class="line"><a name="l01425"></a><span class="lineno"> 1425</span>&#160; </div>
<div class="line"><a name="l01426"></a><span class="lineno"> 1426</span>&#160;      <span class="keywordflow">for</span> (<a class="code" href="classllvm_1_1BasicBlock.html">BasicBlock</a> *<a class="code" href="lib_2CodeGen_2README_8txt.html#a09776db24cf586ec9f1e18f3bae14099">BB</a> : <a class="code" href="namespacellvm.html#a91d9d210ba428cc67e3c2e892f24529e">predecessors</a>(ExitSucc)) {</div>
<div class="line"><a name="l01427"></a><span class="lineno"> 1427</span>&#160;        <a class="code" href="classllvm_1_1LandingPadInst.html">LandingPadInst</a> *LPI = <a class="code" href="lib_2CodeGen_2README_8txt.html#a09776db24cf586ec9f1e18f3bae14099">BB</a>-&gt;getLandingPadInst();</div>
<div class="line"><a name="l01428"></a><span class="lineno"> 1428</span>&#160;        LPI-&gt;<a class="code" href="classllvm_1_1Value.html#a3ab5fc45117b450e8bb04e564cb6e5f2">replaceAllUsesWith</a>(PN);</div>
<div class="line"><a name="l01429"></a><span class="lineno"> 1429</span>&#160;        PN-&gt;<a class="code" href="classllvm_1_1PHINode.html#a089cccb6f231efee72abc76d0f9c695f">addIncoming</a>(LPI, <a class="code" href="lib_2CodeGen_2README_8txt.html#a09776db24cf586ec9f1e18f3bae14099">BB</a>);</div>
<div class="line"><a name="l01430"></a><span class="lineno"> 1430</span>&#160;      }</div>
<div class="line"><a name="l01431"></a><span class="lineno"> 1431</span>&#160;    }</div>
<div class="line"><a name="l01432"></a><span class="lineno"> 1432</span>&#160;  }</div>
<div class="line"><a name="l01433"></a><span class="lineno"> 1433</span>&#160; </div>
<div class="line"><a name="l01434"></a><span class="lineno"> 1434</span>&#160;  <span class="comment">// Rewrite the code to refer to itself.</span></div>
<div class="line"><a name="l01435"></a><span class="lineno"> 1435</span>&#160;  <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> NBI = 0, NBE = NewBlocks.size(); NBI != NBE; ++NBI) {</div>
<div class="line"><a name="l01436"></a><span class="lineno"> 1436</span>&#160;    <span class="keywordflow">for</span> (<a class="code" href="classllvm_1_1Instruction.html">Instruction</a> &amp;<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a> : *NewBlocks[NBI]) {</div>
<div class="line"><a name="l01437"></a><span class="lineno"> 1437</span>&#160;      <a class="code" href="namespacellvm.html#a8f2893ab869a806d78af17691eb97be3">RemapInstruction</a>(&amp;<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>, VMap,</div>
<div class="line"><a name="l01438"></a><span class="lineno"> 1438</span>&#160;                       <a class="code" href="namespacellvm.html#a77724415203930efd07d7098cb1e437da9a24bd8dba1bef2753bc3f087435ae7f">RF_NoModuleLevelChanges</a> | <a class="code" href="namespacellvm.html#a77724415203930efd07d7098cb1e437da5633028bc27ffa8eab39cc5de65b3108">RF_IgnoreMissingLocals</a>);</div>
<div class="line"><a name="l01439"></a><span class="lineno"> 1439</span>&#160;      <span class="keywordflow">if</span> (<span class="keyword">auto</span> *II = dyn_cast&lt;AssumeInst&gt;(&amp;<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>))</div>
<div class="line"><a name="l01440"></a><span class="lineno"> 1440</span>&#160;        AC-&gt;<a class="code" href="classllvm_1_1AssumptionCache.html#a23187618f079555e127ba0e7b4581530">registerAssumption</a>(II);</div>
<div class="line"><a name="l01441"></a><span class="lineno"> 1441</span>&#160;    }</div>
<div class="line"><a name="l01442"></a><span class="lineno"> 1442</span>&#160;  }</div>
<div class="line"><a name="l01443"></a><span class="lineno"> 1443</span>&#160; </div>
<div class="line"><a name="l01444"></a><span class="lineno"> 1444</span>&#160;  <span class="comment">// Rewrite the original preheader to select between versions of the loop.</span></div>
<div class="line"><a name="l01445"></a><span class="lineno"> 1445</span>&#160;  <a class="code" href="classllvm_1_1BranchInst.html">BranchInst</a> *OldBR = cast&lt;BranchInst&gt;(LoopPreheader-&gt;<a class="code" href="classllvm_1_1BasicBlock.html#a71a9eabc4318b2fc34f83b01dfee484b">getTerminator</a>());</div>
<div class="line"><a name="l01446"></a><span class="lineno"> 1446</span>&#160;  <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(OldBR-&gt;<a class="code" href="classllvm_1_1BranchInst.html#ad56f6a9b5cd05940017c4544df48bc30">isUnconditional</a>() &amp;&amp; OldBR-&gt;<a class="code" href="classllvm_1_1BranchInst.html#ad97f2e60cf22f15e0cf617af52309031">getSuccessor</a>(0) == LoopBlocks[0] &amp;&amp;</div>
<div class="line"><a name="l01447"></a><span class="lineno"> 1447</span>&#160;         <span class="stringliteral">&quot;Preheader splitting did not work correctly!&quot;</span>);</div>
<div class="line"><a name="l01448"></a><span class="lineno"> 1448</span>&#160; </div>
<div class="line"><a name="l01449"></a><span class="lineno"> 1449</span>&#160;  <span class="keywordflow">if</span> (MSSAU) {</div>
<div class="line"><a name="l01450"></a><span class="lineno"> 1450</span>&#160;    <span class="comment">// Update MemorySSA after cloning, and before splitting to unreachables,</span></div>
<div class="line"><a name="l01451"></a><span class="lineno"> 1451</span>&#160;    <span class="comment">// since that invalidates the 1:1 mapping of clones in VMap.</span></div>
<div class="line"><a name="l01452"></a><span class="lineno"> 1452</span>&#160;    <a class="code" href="classllvm_1_1LoopBlocksRPO.html">LoopBlocksRPO</a> LBRPO(L);</div>
<div class="line"><a name="l01453"></a><span class="lineno"> 1453</span>&#160;    LBRPO.perform(LI);</div>
<div class="line"><a name="l01454"></a><span class="lineno"> 1454</span>&#160;    MSSAU-&gt;updateForClonedLoop(LBRPO, ExitBlocks, VMap);</div>
<div class="line"><a name="l01455"></a><span class="lineno"> 1455</span>&#160;  }</div>
<div class="line"><a name="l01456"></a><span class="lineno"> 1456</span>&#160; </div>
<div class="line"><a name="l01457"></a><span class="lineno"> 1457</span>&#160;  <span class="comment">// Emit the new branch that selects between the two versions of this loop.</span></div>
<div class="line"><a name="l01458"></a><span class="lineno"> 1458</span>&#160;  emitPreheaderBranchOnCondition(LIC, Val, NewBlocks[0], LoopBlocks[0], OldBR,</div>
<div class="line"><a name="l01459"></a><span class="lineno"> 1459</span>&#160;                                 TI, ToDuplicate);</div>
<div class="line"><a name="l01460"></a><span class="lineno"> 1460</span>&#160;  <span class="keywordflow">if</span> (MSSAU) {</div>
<div class="line"><a name="l01461"></a><span class="lineno"> 1461</span>&#160;    <span class="comment">// Update MemoryPhis in Exit blocks.</span></div>
<div class="line"><a name="l01462"></a><span class="lineno"> 1462</span>&#160;    MSSAU-&gt;updateExitBlocksForClonedLoop(ExitBlocks, VMap, *DT);</div>
<div class="line"><a name="l01463"></a><span class="lineno"> 1463</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="namespacellvm.html#aa29fe161c408879ada30c90ebbf55dcf">VerifyMemorySSA</a>)</div>
<div class="line"><a name="l01464"></a><span class="lineno"> 1464</span>&#160;      MSSA-&gt;<a class="code" href="classllvm_1_1MemorySSA.html#a1b675075f5fd5a025edeca069612042e">verifyMemorySSA</a>();</div>
<div class="line"><a name="l01465"></a><span class="lineno"> 1465</span>&#160;  }</div>
<div class="line"><a name="l01466"></a><span class="lineno"> 1466</span>&#160; </div>
<div class="line"><a name="l01467"></a><span class="lineno"> 1467</span>&#160;  <span class="comment">// The OldBr was replaced by a new one and removed (but not erased) by</span></div>
<div class="line"><a name="l01468"></a><span class="lineno"> 1468</span>&#160;  <span class="comment">// emitPreheaderBranchOnCondition. It is no longer needed, so delete it.</span></div>
<div class="line"><a name="l01469"></a><span class="lineno"> 1469</span>&#160;  <span class="keyword">delete</span> OldBR;</div>
<div class="line"><a name="l01470"></a><span class="lineno"> 1470</span>&#160; </div>
<div class="line"><a name="l01471"></a><span class="lineno"> 1471</span>&#160;  LoopProcessWorklist.push_back(NewLoop);</div>
<div class="line"><a name="l01472"></a><span class="lineno"> 1472</span>&#160;  RedoLoop = <span class="keyword">true</span>;</div>
<div class="line"><a name="l01473"></a><span class="lineno"> 1473</span>&#160; </div>
<div class="line"><a name="l01474"></a><span class="lineno"> 1474</span>&#160;  <span class="comment">// Keep a WeakTrackingVH holding onto LIC.  If the first call to</span></div>
<div class="line"><a name="l01475"></a><span class="lineno"> 1475</span>&#160;  <span class="comment">// RewriteLoopBody</span></div>
<div class="line"><a name="l01476"></a><span class="lineno"> 1476</span>&#160;  <span class="comment">// deletes the instruction (for example by simplifying a PHI that feeds into</span></div>
<div class="line"><a name="l01477"></a><span class="lineno"> 1477</span>&#160;  <span class="comment">// the condition that we&#39;re unswitching on), we don&#39;t rewrite the second</span></div>
<div class="line"><a name="l01478"></a><span class="lineno"> 1478</span>&#160;  <span class="comment">// iteration.</span></div>
<div class="line"><a name="l01479"></a><span class="lineno"> 1479</span>&#160;  <a class="code" href="classllvm_1_1WeakTrackingVH.html">WeakTrackingVH</a> LICHandle(LIC);</div>
<div class="line"><a name="l01480"></a><span class="lineno"> 1480</span>&#160; </div>
<div class="line"><a name="l01481"></a><span class="lineno"> 1481</span>&#160;  <span class="keywordflow">if</span> (ToDuplicate.<a class="code" href="classllvm_1_1ArrayRef.html#ac835b8735b1b2faec0efdca236e37d94">empty</a>()) {</div>
<div class="line"><a name="l01482"></a><span class="lineno"> 1482</span>&#160;    <span class="comment">// Now we rewrite the original code to know that the condition is true and</span></div>
<div class="line"><a name="l01483"></a><span class="lineno"> 1483</span>&#160;    <span class="comment">// the new code to know that the condition is false.</span></div>
<div class="line"><a name="l01484"></a><span class="lineno"> 1484</span>&#160;    rewriteLoopBodyWithConditionConstant(L, LIC, Val, <span class="comment">/*IsEqual=*/</span><span class="keyword">false</span>);</div>
<div class="line"><a name="l01485"></a><span class="lineno"> 1485</span>&#160; </div>
<div class="line"><a name="l01486"></a><span class="lineno"> 1486</span>&#160;    <span class="comment">// It&#39;s possible that simplifying one loop could cause the other to be</span></div>
<div class="line"><a name="l01487"></a><span class="lineno"> 1487</span>&#160;    <span class="comment">// changed to another value or a constant.  If its a constant, don&#39;t</span></div>
<div class="line"><a name="l01488"></a><span class="lineno"> 1488</span>&#160;    <span class="comment">// simplify it.</span></div>
<div class="line"><a name="l01489"></a><span class="lineno"> 1489</span>&#160;    <span class="keywordflow">if</span> (!LoopProcessWorklist.empty() &amp;&amp; LoopProcessWorklist.back() == NewLoop &amp;&amp;</div>
<div class="line"><a name="l01490"></a><span class="lineno"> 1490</span>&#160;        LICHandle &amp;&amp; !isa&lt;Constant&gt;(LICHandle))</div>
<div class="line"><a name="l01491"></a><span class="lineno"> 1491</span>&#160;      rewriteLoopBodyWithConditionConstant(NewLoop, LICHandle, Val,</div>
<div class="line"><a name="l01492"></a><span class="lineno"> 1492</span>&#160;                                           <span class="comment">/*IsEqual=*/</span><span class="keyword">true</span>);</div>
<div class="line"><a name="l01493"></a><span class="lineno"> 1493</span>&#160;  } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l01494"></a><span class="lineno"> 1494</span>&#160;    <span class="comment">// Partial unswitching. Update the condition in the right loop with the</span></div>
<div class="line"><a name="l01495"></a><span class="lineno"> 1495</span>&#160;    <span class="comment">// constant.</span></div>
<div class="line"><a name="l01496"></a><span class="lineno"> 1496</span>&#160;    <span class="keyword">auto</span> *CC = cast&lt;ConstantInt&gt;(Val);</div>
<div class="line"><a name="l01497"></a><span class="lineno"> 1497</span>&#160;    <span class="keywordflow">if</span> (CC-&gt;isOneValue()) {</div>
<div class="line"><a name="l01498"></a><span class="lineno"> 1498</span>&#160;      rewriteLoopBodyWithConditionConstant(NewLoop, VMap[LIC], Val,</div>
<div class="line"><a name="l01499"></a><span class="lineno"> 1499</span>&#160;                                           <span class="comment">/*IsEqual=*/</span><span class="keyword">true</span>);</div>
<div class="line"><a name="l01500"></a><span class="lineno"> 1500</span>&#160;    } <span class="keywordflow">else</span></div>
<div class="line"><a name="l01501"></a><span class="lineno"> 1501</span>&#160;      rewriteLoopBodyWithConditionConstant(L, LIC, Val, <span class="comment">/*IsEqual=*/</span><span class="keyword">true</span>);</div>
<div class="line"><a name="l01502"></a><span class="lineno"> 1502</span>&#160; </div>
<div class="line"><a name="l01503"></a><span class="lineno"> 1503</span>&#160;    <span class="comment">// Mark the new loop as partially unswitched, to avoid unswitching on the</span></div>
<div class="line"><a name="l01504"></a><span class="lineno"> 1504</span>&#160;    <span class="comment">// same condition again.</span></div>
<div class="line"><a name="l01505"></a><span class="lineno"> 1505</span>&#160;    <span class="keyword">auto</span> &amp;<a class="code" href="NVVMIntrRange_8cpp.html#afad351d7bf10ac0446b64e7827634e94">Context</a> = NewLoop-&gt;<a class="code" href="classllvm_1_1LoopBase.html#a58c5b170ea68b41e94ebb0019523a68f">getHeader</a>()-&gt;<a class="code" href="classllvm_1_1BasicBlock.html#aa286a0f7f5d38488d593bb7ef0ba183e">getContext</a>();</div>
<div class="line"><a name="l01506"></a><span class="lineno"> 1506</span>&#160;    <a class="code" href="classllvm_1_1MDNode.html">MDNode</a> *DisableUnswitchMD = <a class="code" href="classllvm_1_1MDNode.html#a7d10a7b9b7f40b04d27ed97c38ea1950">MDNode::get</a>(</div>
<div class="line"><a name="l01507"></a><span class="lineno"> 1507</span>&#160;        <a class="code" href="NVVMIntrRange_8cpp.html#afad351d7bf10ac0446b64e7827634e94">Context</a>, <a class="code" href="classllvm_1_1MDString.html#affbb7e2e9ad8d18114816f2443d672b9">MDString::get</a>(<a class="code" href="NVVMIntrRange_8cpp.html#afad351d7bf10ac0446b64e7827634e94">Context</a>, <span class="stringliteral">&quot;llvm.loop.unswitch.partial.disable&quot;</span>));</div>
<div class="line"><a name="l01508"></a><span class="lineno"> 1508</span>&#160;    <a class="code" href="classllvm_1_1MDNode.html">MDNode</a> *NewLoopID = <a class="code" href="namespacellvm.html#ac8a1ae2e1de53a840bee516d1f5bb173">makePostTransformationMetadata</a>(</div>
<div class="line"><a name="l01509"></a><span class="lineno"> 1509</span>&#160;        <a class="code" href="NVVMIntrRange_8cpp.html#afad351d7bf10ac0446b64e7827634e94">Context</a>, L-&gt;<a class="code" href="classllvm_1_1Loop.html#afbcd78588d5235f99698b5c30f591382">getLoopID</a>(), {<span class="stringliteral">&quot;llvm.loop.unswitch.partial&quot;</span>},</div>
<div class="line"><a name="l01510"></a><span class="lineno"> 1510</span>&#160;        {DisableUnswitchMD});</div>
<div class="line"><a name="l01511"></a><span class="lineno"> 1511</span>&#160;    NewLoop-&gt;<a class="code" href="classllvm_1_1Loop.html#adf4be757fa30ca7fe3e8b119438100f0">setLoopID</a>(NewLoopID);</div>
<div class="line"><a name="l01512"></a><span class="lineno"> 1512</span>&#160;  }</div>
<div class="line"><a name="l01513"></a><span class="lineno"> 1513</span>&#160; </div>
<div class="line"><a name="l01514"></a><span class="lineno"> 1514</span>&#160;  <span class="keywordflow">if</span> (MSSA &amp;&amp; <a class="code" href="namespacellvm.html#aa29fe161c408879ada30c90ebbf55dcf">VerifyMemorySSA</a>)</div>
<div class="line"><a name="l01515"></a><span class="lineno"> 1515</span>&#160;    MSSA-&gt;<a class="code" href="classllvm_1_1MemorySSA.html#a1b675075f5fd5a025edeca069612042e">verifyMemorySSA</a>();</div>
<div class="line"><a name="l01516"></a><span class="lineno"> 1516</span>&#160;}</div>
<div class="line"><a name="l01517"></a><span class="lineno"> 1517</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l01518"></a><span class="lineno"> 1518</span>&#160;<span class="comment">/// Remove all instances of I from the worklist vector specified.</span></div>
<div class="line"><a name="l01519"></a><span class="lineno"><a class="line" href="LoopUnswitch_8cpp.html#a6479ba91ba69fc3e3965cf288330444a"> 1519</a></span>&#160;<span class="comment"></span><span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code" href="LoopUnswitch_8cpp.html#a6479ba91ba69fc3e3965cf288330444a">removeFromWorklist</a>(<a class="code" href="classllvm_1_1Instruction.html">Instruction</a> *<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>,</div>
<div class="line"><a name="l01520"></a><span class="lineno"> 1520</span>&#160;                               std::vector&lt;Instruction *&gt; &amp;Worklist) {</div>
<div class="line"><a name="l01521"></a><span class="lineno"> 1521</span>&#160;  <a class="code" href="namespacellvm.html#aa82bb12b2879425012b3742487e10964">llvm::erase_value</a>(Worklist, <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>);</div>
<div class="line"><a name="l01522"></a><span class="lineno"> 1522</span>&#160;}</div>
<div class="line"><a name="l01523"></a><span class="lineno"> 1523</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l01524"></a><span class="lineno"> 1524</span>&#160;<span class="comment">/// When we find that I really equals V, remove I from the</span></div>
<div class="line"><a name="l01525"></a><span class="lineno"> 1525</span>&#160;<span class="comment">/// program, replacing all uses with V and update the worklist.</span></div>
<div class="line"><a name="l01526"></a><span class="lineno"><a class="line" href="LoopUnswitch_8cpp.html#aec0f8308a1a4cd48e078d52bc0d07878"> 1526</a></span>&#160;<span class="comment"></span><span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code" href="LoopUnswitch_8cpp.html#aec0f8308a1a4cd48e078d52bc0d07878">replaceUsesOfWith</a>(<a class="code" href="classllvm_1_1Instruction.html">Instruction</a> *<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>, <a class="code" href="classllvm_1_1Value.html">Value</a> *V,</div>
<div class="line"><a name="l01527"></a><span class="lineno"> 1527</span>&#160;                              std::vector&lt;Instruction *&gt; &amp;Worklist, <a class="code" href="classllvm_1_1Loop.html">Loop</a> *L,</div>
<div class="line"><a name="l01528"></a><span class="lineno"> 1528</span>&#160;                              <a class="code" href="classllvm_1_1LPPassManager.html">LPPassManager</a> *LPM, <a class="code" href="classllvm_1_1MemorySSAUpdater.html">MemorySSAUpdater</a> *MSSAU) {</div>
<div class="line"><a name="l01529"></a><span class="lineno"> 1529</span>&#160;  <a class="code" href="Debug_8h.html#a08efc68d15935eb8889400a46c3749ba">LLVM_DEBUG</a>(<a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <span class="stringliteral">&quot;Replace with &#39;&quot;</span> &lt;&lt; *V &lt;&lt; <span class="stringliteral">&quot;&#39;: &quot;</span> &lt;&lt; *<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a> &lt;&lt; <span class="stringliteral">&quot;\n&quot;</span>);</div>
<div class="line"><a name="l01530"></a><span class="lineno"> 1530</span>&#160; </div>
<div class="line"><a name="l01531"></a><span class="lineno"> 1531</span>&#160;  <span class="comment">// Add uses to the worklist, which may be dead now.</span></div>
<div class="line"><a name="l01532"></a><span class="lineno"> 1532</span>&#160;  <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> <a class="code" href="lib_2Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a> = 0, <a class="code" href="namespacellvm_1_1numbers.html#a92f4283d4e0e2ea1776894b3ae93640f">e</a> = <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>-&gt;getNumOperands(); <a class="code" href="lib_2Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a> != <a class="code" href="namespacellvm_1_1numbers.html#a92f4283d4e0e2ea1776894b3ae93640f">e</a>; ++<a class="code" href="lib_2Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a>)</div>
<div class="line"><a name="l01533"></a><span class="lineno"> 1533</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1Instruction.html">Instruction</a> *<a class="code" href="classllvm_1_1Use.html">Use</a> = dyn_cast&lt;Instruction&gt;(<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>-&gt;getOperand(<a class="code" href="lib_2Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a>)))</div>
<div class="line"><a name="l01534"></a><span class="lineno"> 1534</span>&#160;      Worklist.push_back(<a class="code" href="classllvm_1_1Use.html">Use</a>);</div>
<div class="line"><a name="l01535"></a><span class="lineno"> 1535</span>&#160; </div>
<div class="line"><a name="l01536"></a><span class="lineno"> 1536</span>&#160;  <span class="comment">// Add users to the worklist which may be simplified now.</span></div>
<div class="line"><a name="l01537"></a><span class="lineno"> 1537</span>&#160;  <span class="keywordflow">for</span> (<a class="code" href="classllvm_1_1User.html">User</a> *U : <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>-&gt;users())</div>
<div class="line"><a name="l01538"></a><span class="lineno"> 1538</span>&#160;    Worklist.push_back(cast&lt;Instruction&gt;(U));</div>
<div class="line"><a name="l01539"></a><span class="lineno"> 1539</span>&#160;  <a class="code" href="LoopUnswitch_8cpp.html#a6479ba91ba69fc3e3965cf288330444a">removeFromWorklist</a>(<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>, Worklist);</div>
<div class="line"><a name="l01540"></a><span class="lineno"> 1540</span>&#160;  <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>-&gt;replaceAllUsesWith(V);</div>
<div class="line"><a name="l01541"></a><span class="lineno"> 1541</span>&#160;  <span class="keywordflow">if</span> (!<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>-&gt;mayHaveSideEffects()) {</div>
<div class="line"><a name="l01542"></a><span class="lineno"> 1542</span>&#160;    <span class="keywordflow">if</span> (MSSAU)</div>
<div class="line"><a name="l01543"></a><span class="lineno"> 1543</span>&#160;      MSSAU-&gt;<a class="code" href="classllvm_1_1MemorySSAUpdater.html#abcf78af37d56a9b72a49c65428210758">removeMemoryAccess</a>(<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>);</div>
<div class="line"><a name="l01544"></a><span class="lineno"> 1544</span>&#160;    <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>-&gt;eraseFromParent();</div>
<div class="line"><a name="l01545"></a><span class="lineno"> 1545</span>&#160;  }</div>
<div class="line"><a name="l01546"></a><span class="lineno"> 1546</span>&#160;  ++NumSimplify;</div>
<div class="line"><a name="l01547"></a><span class="lineno"> 1547</span>&#160;}</div>
<div class="line"><a name="l01548"></a><span class="lineno"> 1548</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l01549"></a><span class="lineno"> 1549</span>&#160;<span class="comment">/// We know either that the value LIC has the value specified by Val in the</span></div>
<div class="line"><a name="l01550"></a><span class="lineno"> 1550</span>&#160;<span class="comment">/// specified loop, or we know it does NOT have that value.</span></div>
<div class="line"><a name="l01551"></a><span class="lineno"> 1551</span>&#160;<span class="comment">/// Rewrite any uses of LIC or of properties correlated to it.</span></div>
<div class="line"><a name="l01552"></a><span class="lineno"> 1552</span>&#160;<span class="comment"></span><span class="keywordtype">void</span> LoopUnswitch::rewriteLoopBodyWithConditionConstant(<a class="code" href="classllvm_1_1Loop.html">Loop</a> *L, <a class="code" href="classllvm_1_1Value.html">Value</a> *LIC,</div>
<div class="line"><a name="l01553"></a><span class="lineno"> 1553</span>&#160;                                                        <a class="code" href="classllvm_1_1Constant.html">Constant</a> *Val,</div>
<div class="line"><a name="l01554"></a><span class="lineno"> 1554</span>&#160;                                                        <span class="keywordtype">bool</span> IsEqual) {</div>
<div class="line"><a name="l01555"></a><span class="lineno"> 1555</span>&#160;  <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(!isa&lt;Constant&gt;(LIC) &amp;&amp; <span class="stringliteral">&quot;Why are we unswitching on a constant?&quot;</span>);</div>
<div class="line"><a name="l01556"></a><span class="lineno"> 1556</span>&#160; </div>
<div class="line"><a name="l01557"></a><span class="lineno"> 1557</span>&#160;  <span class="comment">// FIXME: Support correlated properties, like:</span></div>
<div class="line"><a name="l01558"></a><span class="lineno"> 1558</span>&#160;  <span class="comment">//  for (...)</span></div>
<div class="line"><a name="l01559"></a><span class="lineno"> 1559</span>&#160;  <span class="comment">//    if (li1 &lt; li2)</span></div>
<div class="line"><a name="l01560"></a><span class="lineno"> 1560</span>&#160;  <span class="comment">//      ...</span></div>
<div class="line"><a name="l01561"></a><span class="lineno"> 1561</span>&#160;  <span class="comment">//    if (li1 &gt; li2)</span></div>
<div class="line"><a name="l01562"></a><span class="lineno"> 1562</span>&#160;  <span class="comment">//      ...</span></div>
<div class="line"><a name="l01563"></a><span class="lineno"> 1563</span>&#160; </div>
<div class="line"><a name="l01564"></a><span class="lineno"> 1564</span>&#160;  <span class="comment">// FOLD boolean conditions (X|LIC), (X&amp;LIC).  Fold conditional branches,</span></div>
<div class="line"><a name="l01565"></a><span class="lineno"> 1565</span>&#160;  <span class="comment">// selects, switches.</span></div>
<div class="line"><a name="l01566"></a><span class="lineno"> 1566</span>&#160;  std::vector&lt;Instruction*&gt; Worklist;</div>
<div class="line"><a name="l01567"></a><span class="lineno"> 1567</span>&#160;  <a class="code" href="classllvm_1_1LLVMContext.html">LLVMContext</a> &amp;<a class="code" href="NVVMIntrRange_8cpp.html#afad351d7bf10ac0446b64e7827634e94">Context</a> = Val-&gt;<a class="code" href="classllvm_1_1Value.html#ab3fc0225d8aaf8434026c3573f961f2c">getContext</a>();</div>
<div class="line"><a name="l01568"></a><span class="lineno"> 1568</span>&#160; </div>
<div class="line"><a name="l01569"></a><span class="lineno"> 1569</span>&#160;  <span class="comment">// If we know that LIC == Val, or that LIC == NotVal, just replace uses of LIC</span></div>
<div class="line"><a name="l01570"></a><span class="lineno"> 1570</span>&#160;  <span class="comment">// in the loop with the appropriate one directly.</span></div>
<div class="line"><a name="l01571"></a><span class="lineno"> 1571</span>&#160;  <span class="keywordflow">if</span> (IsEqual || (isa&lt;ConstantInt&gt;(Val) &amp;&amp;</div>
<div class="line"><a name="l01572"></a><span class="lineno"> 1572</span>&#160;      Val-&gt;<a class="code" href="classllvm_1_1Value.html#a6393a2d4fe7e10b28a0dcc35f881567b">getType</a>()-&gt;<a class="code" href="classllvm_1_1Type.html#ac6d28a9b11139182134a9618028a0d07">isIntegerTy</a>(1))) {</div>
<div class="line"><a name="l01573"></a><span class="lineno"> 1573</span>&#160;    <a class="code" href="classllvm_1_1Value.html">Value</a> *Replacement;</div>
<div class="line"><a name="l01574"></a><span class="lineno"> 1574</span>&#160;    <span class="keywordflow">if</span> (IsEqual)</div>
<div class="line"><a name="l01575"></a><span class="lineno"> 1575</span>&#160;      Replacement = Val;</div>
<div class="line"><a name="l01576"></a><span class="lineno"> 1576</span>&#160;    <span class="keywordflow">else</span></div>
<div class="line"><a name="l01577"></a><span class="lineno"> 1577</span>&#160;      Replacement = <a class="code" href="classllvm_1_1ConstantInt.html#a969709dd49c28865a482d8b870f87c46">ConstantInt::get</a>(<a class="code" href="classllvm_1_1Type.html#aa75984a442f2379de0c66018201fa628">Type::getInt1Ty</a>(Val-&gt;<a class="code" href="classllvm_1_1Value.html#ab3fc0225d8aaf8434026c3573f961f2c">getContext</a>()),</div>
<div class="line"><a name="l01578"></a><span class="lineno"> 1578</span>&#160;                                     !cast&lt;ConstantInt&gt;(Val)-&gt;getZExtValue());</div>
<div class="line"><a name="l01579"></a><span class="lineno"> 1579</span>&#160; </div>
<div class="line"><a name="l01580"></a><span class="lineno"> 1580</span>&#160;    <span class="keywordflow">for</span> (<a class="code" href="classllvm_1_1User.html">User</a> *U : LIC-&gt;<a class="code" href="classllvm_1_1Value.html#ab4e0512c7e1c7adaa56677e3155685f1">users</a>()) {</div>
<div class="line"><a name="l01581"></a><span class="lineno"> 1581</span>&#160;      <a class="code" href="classllvm_1_1Instruction.html">Instruction</a> *UI = dyn_cast&lt;Instruction&gt;(U);</div>
<div class="line"><a name="l01582"></a><span class="lineno"> 1582</span>&#160;      <span class="keywordflow">if</span> (!UI || !L-&gt;<a class="code" href="classllvm_1_1LoopBase.html#a04337b572d34ea413c35dbac5d75530b">contains</a>(UI))</div>
<div class="line"><a name="l01583"></a><span class="lineno"> 1583</span>&#160;        <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l01584"></a><span class="lineno"> 1584</span>&#160;      Worklist.push_back(UI);</div>
<div class="line"><a name="l01585"></a><span class="lineno"> 1585</span>&#160;    }</div>
<div class="line"><a name="l01586"></a><span class="lineno"> 1586</span>&#160; </div>
<div class="line"><a name="l01587"></a><span class="lineno"> 1587</span>&#160;    <span class="keywordflow">for</span> (<a class="code" href="classllvm_1_1Instruction.html">Instruction</a> *UI : Worklist)</div>
<div class="line"><a name="l01588"></a><span class="lineno"> 1588</span>&#160;      UI-&gt;<a class="code" href="classllvm_1_1User.html#a1f0b9358936e3e00c42a460abbfb2868">replaceUsesOfWith</a>(LIC, Replacement);</div>
<div class="line"><a name="l01589"></a><span class="lineno"> 1589</span>&#160; </div>
<div class="line"><a name="l01590"></a><span class="lineno"> 1590</span>&#160;    simplifyCode(Worklist, L);</div>
<div class="line"><a name="l01591"></a><span class="lineno"> 1591</span>&#160;    <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l01592"></a><span class="lineno"> 1592</span>&#160;  }</div>
<div class="line"><a name="l01593"></a><span class="lineno"> 1593</span>&#160; </div>
<div class="line"><a name="l01594"></a><span class="lineno"> 1594</span>&#160;  <span class="comment">// Otherwise, we don&#39;t know the precise value of LIC, but we do know that it</span></div>
<div class="line"><a name="l01595"></a><span class="lineno"> 1595</span>&#160;  <span class="comment">// is certainly NOT &quot;Val&quot;.  As such, simplify any uses in the loop that we</span></div>
<div class="line"><a name="l01596"></a><span class="lineno"> 1596</span>&#160;  <span class="comment">// can.  This case occurs when we unswitch switch statements.</span></div>
<div class="line"><a name="l01597"></a><span class="lineno"> 1597</span>&#160;  <span class="keywordflow">for</span> (<a class="code" href="classllvm_1_1User.html">User</a> *U : LIC-&gt;<a class="code" href="classllvm_1_1Value.html#ab4e0512c7e1c7adaa56677e3155685f1">users</a>()) {</div>
<div class="line"><a name="l01598"></a><span class="lineno"> 1598</span>&#160;    <a class="code" href="classllvm_1_1Instruction.html">Instruction</a> *UI = dyn_cast&lt;Instruction&gt;(U);</div>
<div class="line"><a name="l01599"></a><span class="lineno"> 1599</span>&#160;    <span class="keywordflow">if</span> (!UI || !L-&gt;<a class="code" href="classllvm_1_1LoopBase.html#a04337b572d34ea413c35dbac5d75530b">contains</a>(UI))</div>
<div class="line"><a name="l01600"></a><span class="lineno"> 1600</span>&#160;      <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l01601"></a><span class="lineno"> 1601</span>&#160; </div>
<div class="line"><a name="l01602"></a><span class="lineno"> 1602</span>&#160;    <span class="comment">// At this point, we know LIC is definitely not Val. Try to use some simple</span></div>
<div class="line"><a name="l01603"></a><span class="lineno"> 1603</span>&#160;    <span class="comment">// logic to simplify the user w.r.t. to the context.</span></div>
<div class="line"><a name="l01604"></a><span class="lineno"> 1604</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1Value.html">Value</a> *Replacement = simplifyInstructionWithNotEqual(UI, LIC, Val)) {</div>
<div class="line"><a name="l01605"></a><span class="lineno"> 1605</span>&#160;      <span class="keywordflow">if</span> (LI-&gt;<a class="code" href="classllvm_1_1LoopInfo.html#ab12b535502b86394c84bfd24d58e4657">replacementPreservesLCSSAForm</a>(UI, Replacement)) {</div>
<div class="line"><a name="l01606"></a><span class="lineno"> 1606</span>&#160;        <span class="comment">// This in-loop instruction has been simplified w.r.t. its context,</span></div>
<div class="line"><a name="l01607"></a><span class="lineno"> 1607</span>&#160;        <span class="comment">// i.e. LIC != Val, make sure we propagate its replacement value to</span></div>
<div class="line"><a name="l01608"></a><span class="lineno"> 1608</span>&#160;        <span class="comment">// all its users.</span></div>
<div class="line"><a name="l01609"></a><span class="lineno"> 1609</span>&#160;        <span class="comment">//</span></div>
<div class="line"><a name="l01610"></a><span class="lineno"> 1610</span>&#160;        <span class="comment">// We can not yet delete UI, the LIC user, yet, because that would invalidate</span></div>
<div class="line"><a name="l01611"></a><span class="lineno"> 1611</span>&#160;        <span class="comment">// the LIC-&gt;users() iterator !. However, we can make this instruction</span></div>
<div class="line"><a name="l01612"></a><span class="lineno"> 1612</span>&#160;        <span class="comment">// dead by replacing all its users and push it onto the worklist so that</span></div>
<div class="line"><a name="l01613"></a><span class="lineno"> 1613</span>&#160;        <span class="comment">// it can be properly deleted and its operands simplified.</span></div>
<div class="line"><a name="l01614"></a><span class="lineno"> 1614</span>&#160;        UI-&gt;<a class="code" href="classllvm_1_1Value.html#a3ab5fc45117b450e8bb04e564cb6e5f2">replaceAllUsesWith</a>(Replacement);</div>
<div class="line"><a name="l01615"></a><span class="lineno"> 1615</span>&#160;      }</div>
<div class="line"><a name="l01616"></a><span class="lineno"> 1616</span>&#160;    }</div>
<div class="line"><a name="l01617"></a><span class="lineno"> 1617</span>&#160; </div>
<div class="line"><a name="l01618"></a><span class="lineno"> 1618</span>&#160;    <span class="comment">// This is a LIC user, push it into the worklist so that simplifyCode can</span></div>
<div class="line"><a name="l01619"></a><span class="lineno"> 1619</span>&#160;    <span class="comment">// attempt to simplify it.</span></div>
<div class="line"><a name="l01620"></a><span class="lineno"> 1620</span>&#160;    Worklist.push_back(UI);</div>
<div class="line"><a name="l01621"></a><span class="lineno"> 1621</span>&#160; </div>
<div class="line"><a name="l01622"></a><span class="lineno"> 1622</span>&#160;    <span class="comment">// If we know that LIC is not Val, use this info to simplify code.</span></div>
<div class="line"><a name="l01623"></a><span class="lineno"> 1623</span>&#160;    <a class="code" href="classllvm_1_1SwitchInst.html">SwitchInst</a> *<a class="code" href="PassBuilderBindings_8cpp.html#a0f79dad1efc582555a443cc11a8fa401">SI</a> = dyn_cast&lt;SwitchInst&gt;(UI);</div>
<div class="line"><a name="l01624"></a><span class="lineno"> 1624</span>&#160;    <span class="keywordflow">if</span> (!<a class="code" href="PassBuilderBindings_8cpp.html#a0f79dad1efc582555a443cc11a8fa401">SI</a> || !isa&lt;ConstantInt&gt;(Val)) <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l01625"></a><span class="lineno"> 1625</span>&#160; </div>
<div class="line"><a name="l01626"></a><span class="lineno"> 1626</span>&#160;    <span class="comment">// NOTE: if a case value for the switch is unswitched out, we record it</span></div>
<div class="line"><a name="l01627"></a><span class="lineno"> 1627</span>&#160;    <span class="comment">// after the unswitch finishes. We can not record it here as the switch</span></div>
<div class="line"><a name="l01628"></a><span class="lineno"> 1628</span>&#160;    <span class="comment">// is not a direct user of the partial LIV.</span></div>
<div class="line"><a name="l01629"></a><span class="lineno"> 1629</span>&#160;    <a class="code" href="classllvm_1_1SwitchInst_1_1CaseHandle.html">SwitchInst::CaseHandle</a> DeadCase =</div>
<div class="line"><a name="l01630"></a><span class="lineno"> 1630</span>&#160;        *<a class="code" href="PassBuilderBindings_8cpp.html#a0f79dad1efc582555a443cc11a8fa401">SI</a>-&gt;findCaseValue(cast&lt;ConstantInt&gt;(Val));</div>
<div class="line"><a name="l01631"></a><span class="lineno"> 1631</span>&#160;    <span class="comment">// Default case is live for multiple values.</span></div>
<div class="line"><a name="l01632"></a><span class="lineno"> 1632</span>&#160;    <span class="keywordflow">if</span> (DeadCase == *<a class="code" href="PassBuilderBindings_8cpp.html#a0f79dad1efc582555a443cc11a8fa401">SI</a>-&gt;case_default())</div>
<div class="line"><a name="l01633"></a><span class="lineno"> 1633</span>&#160;      <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l01634"></a><span class="lineno"> 1634</span>&#160; </div>
<div class="line"><a name="l01635"></a><span class="lineno"> 1635</span>&#160;    <span class="comment">// Found a dead case value.  Don&#39;t remove PHI nodes in the</span></div>
<div class="line"><a name="l01636"></a><span class="lineno"> 1636</span>&#160;    <span class="comment">// successor if they become single-entry, those PHI nodes may</span></div>
<div class="line"><a name="l01637"></a><span class="lineno"> 1637</span>&#160;    <span class="comment">// be in the Users list.</span></div>
<div class="line"><a name="l01638"></a><span class="lineno"> 1638</span>&#160; </div>
<div class="line"><a name="l01639"></a><span class="lineno"> 1639</span>&#160;    <a class="code" href="classllvm_1_1BasicBlock.html">BasicBlock</a> *Switch = <a class="code" href="PassBuilderBindings_8cpp.html#a0f79dad1efc582555a443cc11a8fa401">SI</a>-&gt;getParent();</div>
<div class="line"><a name="l01640"></a><span class="lineno"> 1640</span>&#160;    <a class="code" href="classllvm_1_1BasicBlock.html">BasicBlock</a> *SISucc = DeadCase.<a class="code" href="classllvm_1_1SwitchInst_1_1CaseHandleImpl.html#a9b78f2b8e325ee61b90420c2495b03d5">getCaseSuccessor</a>();</div>
<div class="line"><a name="l01641"></a><span class="lineno"> 1641</span>&#160;    <a class="code" href="classllvm_1_1BasicBlock.html">BasicBlock</a> *Latch = L-&gt;<a class="code" href="classllvm_1_1LoopBase.html#a1230fd674d2609b96527fe65eaf40b1b">getLoopLatch</a>();</div>
<div class="line"><a name="l01642"></a><span class="lineno"> 1642</span>&#160; </div>
<div class="line"><a name="l01643"></a><span class="lineno"> 1643</span>&#160;    <span class="keywordflow">if</span> (!<a class="code" href="PassBuilderBindings_8cpp.html#a0f79dad1efc582555a443cc11a8fa401">SI</a>-&gt;findCaseDest(SISucc)) <span class="keywordflow">continue</span>;  <span class="comment">// Edge is critical.</span></div>
<div class="line"><a name="l01644"></a><span class="lineno"> 1644</span>&#160;    <span class="comment">// If the DeadCase successor dominates the loop latch, then the</span></div>
<div class="line"><a name="l01645"></a><span class="lineno"> 1645</span>&#160;    <span class="comment">// transformation isn&#39;t safe since it will delete the sole predecessor edge</span></div>
<div class="line"><a name="l01646"></a><span class="lineno"> 1646</span>&#160;    <span class="comment">// to the latch.</span></div>
<div class="line"><a name="l01647"></a><span class="lineno"> 1647</span>&#160;    <span class="keywordflow">if</span> (Latch &amp;&amp; DT-&gt;<a class="code" href="classllvm_1_1DominatorTree.html#a5c69311e8d44898dac36a155c3d8691d">dominates</a>(SISucc, Latch))</div>
<div class="line"><a name="l01648"></a><span class="lineno"> 1648</span>&#160;      <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l01649"></a><span class="lineno"> 1649</span>&#160; </div>
<div class="line"><a name="l01650"></a><span class="lineno"> 1650</span>&#160;    <span class="comment">// FIXME: This is a hack.  We need to keep the successor around</span></div>
<div class="line"><a name="l01651"></a><span class="lineno"> 1651</span>&#160;    <span class="comment">// and hooked up so as to preserve the loop structure, because</span></div>
<div class="line"><a name="l01652"></a><span class="lineno"> 1652</span>&#160;    <span class="comment">// trying to update it is complicated.  So instead we preserve the</span></div>
<div class="line"><a name="l01653"></a><span class="lineno"> 1653</span>&#160;    <span class="comment">// loop structure and put the block on a dead code path.</span></div>
<div class="line"><a name="l01654"></a><span class="lineno"> 1654</span>&#160;    <a class="code" href="namespacellvm.html#adf83581f514774264d616eef5706cf6e">SplitEdge</a>(Switch, SISucc, DT, LI, MSSAU.get());</div>
<div class="line"><a name="l01655"></a><span class="lineno"> 1655</span>&#160;    <span class="comment">// Compute the successors instead of relying on the return value</span></div>
<div class="line"><a name="l01656"></a><span class="lineno"> 1656</span>&#160;    <span class="comment">// of SplitEdge, since it may have split the switch successor</span></div>
<div class="line"><a name="l01657"></a><span class="lineno"> 1657</span>&#160;    <span class="comment">// after PHI nodes.</span></div>
<div class="line"><a name="l01658"></a><span class="lineno"> 1658</span>&#160;    <a class="code" href="classllvm_1_1BasicBlock.html">BasicBlock</a> *NewSISucc = DeadCase.<a class="code" href="classllvm_1_1SwitchInst_1_1CaseHandleImpl.html#a9b78f2b8e325ee61b90420c2495b03d5">getCaseSuccessor</a>();</div>
<div class="line"><a name="l01659"></a><span class="lineno"> 1659</span>&#160;    <a class="code" href="classllvm_1_1BasicBlock.html">BasicBlock</a> *OldSISucc = *<a class="code" href="namespacellvm.html#a3720211f6e6389ab53734b989bfb6fce">succ_begin</a>(NewSISucc);</div>
<div class="line"><a name="l01660"></a><span class="lineno"> 1660</span>&#160;    <span class="comment">// Create an &quot;unreachable&quot; destination.</span></div>
<div class="line"><a name="l01661"></a><span class="lineno"> 1661</span>&#160;    <a class="code" href="classllvm_1_1BasicBlock.html">BasicBlock</a> *Abort = <a class="code" href="classllvm_1_1BasicBlock.html#ace940beeee97c222f836fe0ac70f6cf5">BasicBlock::Create</a>(<a class="code" href="NVVMIntrRange_8cpp.html#afad351d7bf10ac0446b64e7827634e94">Context</a>, <span class="stringliteral">&quot;us-unreachable&quot;</span>,</div>
<div class="line"><a name="l01662"></a><span class="lineno"> 1662</span>&#160;                                           Switch-&gt;<a class="code" href="classllvm_1_1BasicBlock.html#a38bee869ad41aebfef3de2641b12004c">getParent</a>(),</div>
<div class="line"><a name="l01663"></a><span class="lineno"> 1663</span>&#160;                                           OldSISucc);</div>
<div class="line"><a name="l01664"></a><span class="lineno"> 1664</span>&#160;    <span class="keyword">new</span> <a class="code" href="classllvm_1_1UnreachableInst.html">UnreachableInst</a>(<a class="code" href="NVVMIntrRange_8cpp.html#afad351d7bf10ac0446b64e7827634e94">Context</a>, Abort);</div>
<div class="line"><a name="l01665"></a><span class="lineno"> 1665</span>&#160;    <span class="comment">// Force the new case destination to branch to the &quot;unreachable&quot;</span></div>
<div class="line"><a name="l01666"></a><span class="lineno"> 1666</span>&#160;    <span class="comment">// block while maintaining a (dead) CFG edge to the old block.</span></div>
<div class="line"><a name="l01667"></a><span class="lineno"> 1667</span>&#160;    NewSISucc-&gt;<a class="code" href="classllvm_1_1BasicBlock.html#a71a9eabc4318b2fc34f83b01dfee484b">getTerminator</a>()-&gt;<a class="code" href="classllvm_1_1Instruction.html#ae6b978645b8ac72d1a35e1298ffdd4f0">eraseFromParent</a>();</div>
<div class="line"><a name="l01668"></a><span class="lineno"> 1668</span>&#160;    <a class="code" href="classllvm_1_1BranchInst.html#a38df51256d4b415b6a817b5e1c6d4d36">BranchInst::Create</a>(Abort, OldSISucc,</div>
<div class="line"><a name="l01669"></a><span class="lineno"> 1669</span>&#160;                       <a class="code" href="classllvm_1_1ConstantInt.html#a82dbbd8e3688b0bc1eedb338864d0d0c">ConstantInt::getTrue</a>(<a class="code" href="NVVMIntrRange_8cpp.html#afad351d7bf10ac0446b64e7827634e94">Context</a>), NewSISucc);</div>
<div class="line"><a name="l01670"></a><span class="lineno"> 1670</span>&#160;    <span class="comment">// Release the PHI operands for this edge.</span></div>
<div class="line"><a name="l01671"></a><span class="lineno"> 1671</span>&#160;    <span class="keywordflow">for</span> (<a class="code" href="classllvm_1_1PHINode.html">PHINode</a> &amp;PN : NewSISucc-&gt;<a class="code" href="classllvm_1_1BasicBlock.html#a233eb15d557dbd3af7221dd9be5cb02d">phis</a>())</div>
<div class="line"><a name="l01672"></a><span class="lineno"> 1672</span>&#160;      PN.<a class="code" href="classllvm_1_1PHINode.html#a506bcfb6f92a2184453e1fa9655f62a1">setIncomingValueForBlock</a>(Switch, <a class="code" href="classllvm_1_1UndefValue.html#a4ae5ff22b700a42bcc5d889233721335">UndefValue::get</a>(PN.<a class="code" href="classllvm_1_1Value.html#a6393a2d4fe7e10b28a0dcc35f881567b">getType</a>()));</div>
<div class="line"><a name="l01673"></a><span class="lineno"> 1673</span>&#160;    <span class="comment">// Tell the domtree about the new block. We don&#39;t fully update the</span></div>
<div class="line"><a name="l01674"></a><span class="lineno"> 1674</span>&#160;    <span class="comment">// domtree here -- instead we force it to do a full recomputation</span></div>
<div class="line"><a name="l01675"></a><span class="lineno"> 1675</span>&#160;    <span class="comment">// after the pass is complete -- but we do need to inform it of</span></div>
<div class="line"><a name="l01676"></a><span class="lineno"> 1676</span>&#160;    <span class="comment">// new blocks.</span></div>
<div class="line"><a name="l01677"></a><span class="lineno"> 1677</span>&#160;    DT-&gt;<a class="code" href="classllvm_1_1DominatorTreeBase.html#a4d417f72d43729d07de3b3d2f58893cc">addNewBlock</a>(Abort, NewSISucc);</div>
<div class="line"><a name="l01678"></a><span class="lineno"> 1678</span>&#160;  }</div>
<div class="line"><a name="l01679"></a><span class="lineno"> 1679</span>&#160; </div>
<div class="line"><a name="l01680"></a><span class="lineno"> 1680</span>&#160;  simplifyCode(Worklist, L);</div>
<div class="line"><a name="l01681"></a><span class="lineno"> 1681</span>&#160;}</div>
<div class="line"><a name="l01682"></a><span class="lineno"> 1682</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l01683"></a><span class="lineno"> 1683</span>&#160;<span class="comment">/// Now that we have simplified some instructions in the loop, walk over it and</span></div>
<div class="line"><a name="l01684"></a><span class="lineno"> 1684</span>&#160;<span class="comment">/// constant prop, dce, and fold control flow where possible. Note that this is</span></div>
<div class="line"><a name="l01685"></a><span class="lineno"> 1685</span>&#160;<span class="comment">/// effectively a very simple loop-structure-aware optimizer. During processing</span></div>
<div class="line"><a name="l01686"></a><span class="lineno"> 1686</span>&#160;<span class="comment">/// of this loop, L could very well be deleted, so it must not be used.</span></div>
<div class="line"><a name="l01687"></a><span class="lineno"> 1687</span>&#160;<span class="comment">///</span></div>
<div class="line"><a name="l01688"></a><span class="lineno"> 1688</span>&#160;<span class="comment">/// FIXME: When the loop optimizer is more mature, separate this out to a new</span></div>
<div class="line"><a name="l01689"></a><span class="lineno"> 1689</span>&#160;<span class="comment">/// pass.</span></div>
<div class="line"><a name="l01690"></a><span class="lineno"> 1690</span>&#160;<span class="comment">///</span></div>
<div class="line"><a name="l01691"></a><span class="lineno"> 1691</span>&#160;<span class="comment"></span><span class="keywordtype">void</span> LoopUnswitch::simplifyCode(std::vector&lt;Instruction *&gt; &amp;Worklist, <a class="code" href="classllvm_1_1Loop.html">Loop</a> *L) {</div>
<div class="line"><a name="l01692"></a><span class="lineno"> 1692</span>&#160;  <span class="keyword">const</span> <a class="code" href="classllvm_1_1DataLayout.html">DataLayout</a> &amp;<a class="code" href="AArch64SLSHardening_8cpp.html#ad467c4ab9119043f9b7750ab986be61a">DL</a> = L-&gt;<a class="code" href="classllvm_1_1LoopBase.html#a58c5b170ea68b41e94ebb0019523a68f">getHeader</a>()-&gt;<a class="code" href="classllvm_1_1BasicBlock.html#afc70e919c88c86159cc94cea29b6c210">getModule</a>()-&gt;<a class="code" href="classllvm_1_1Module.html#a6d883605206368bc536cc9ded97209b8">getDataLayout</a>();</div>
<div class="line"><a name="l01693"></a><span class="lineno"> 1693</span>&#160;  <span class="keywordflow">while</span> (!Worklist.empty()) {</div>
<div class="line"><a name="l01694"></a><span class="lineno"> 1694</span>&#160;    <a class="code" href="classllvm_1_1Instruction.html">Instruction</a> *<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a> = Worklist.back();</div>
<div class="line"><a name="l01695"></a><span class="lineno"> 1695</span>&#160;    Worklist.pop_back();</div>
<div class="line"><a name="l01696"></a><span class="lineno"> 1696</span>&#160; </div>
<div class="line"><a name="l01697"></a><span class="lineno"> 1697</span>&#160;    <span class="comment">// Simple DCE.</span></div>
<div class="line"><a name="l01698"></a><span class="lineno"> 1698</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="namespacellvm.html#a627b2f86ac433d829482d5a5a0f50668">isInstructionTriviallyDead</a>(<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>)) {</div>
<div class="line"><a name="l01699"></a><span class="lineno"> 1699</span>&#160;      <a class="code" href="Debug_8h.html#a08efc68d15935eb8889400a46c3749ba">LLVM_DEBUG</a>(<a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <span class="stringliteral">&quot;Remove dead instruction &#39;&quot;</span> &lt;&lt; *<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a> &lt;&lt; <span class="stringliteral">&quot;\n&quot;</span>);</div>
<div class="line"><a name="l01700"></a><span class="lineno"> 1700</span>&#160; </div>
<div class="line"><a name="l01701"></a><span class="lineno"> 1701</span>&#160;      <span class="comment">// Add uses to the worklist, which may be dead now.</span></div>
<div class="line"><a name="l01702"></a><span class="lineno"> 1702</span>&#160;      <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> <a class="code" href="lib_2Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a> = 0, <a class="code" href="namespacellvm_1_1numbers.html#a92f4283d4e0e2ea1776894b3ae93640f">e</a> = <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>-&gt;getNumOperands(); <a class="code" href="lib_2Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a> != <a class="code" href="namespacellvm_1_1numbers.html#a92f4283d4e0e2ea1776894b3ae93640f">e</a>; ++<a class="code" href="lib_2Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a>)</div>
<div class="line"><a name="l01703"></a><span class="lineno"> 1703</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1Instruction.html">Instruction</a> *<a class="code" href="classllvm_1_1Use.html">Use</a> = dyn_cast&lt;Instruction&gt;(<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>-&gt;getOperand(<a class="code" href="lib_2Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a>)))</div>
<div class="line"><a name="l01704"></a><span class="lineno"> 1704</span>&#160;          Worklist.push_back(<a class="code" href="classllvm_1_1Use.html">Use</a>);</div>
<div class="line"><a name="l01705"></a><span class="lineno"> 1705</span>&#160;      <a class="code" href="LoopUnswitch_8cpp.html#a6479ba91ba69fc3e3965cf288330444a">removeFromWorklist</a>(<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>, Worklist);</div>
<div class="line"><a name="l01706"></a><span class="lineno"> 1706</span>&#160;      <span class="keywordflow">if</span> (MSSAU)</div>
<div class="line"><a name="l01707"></a><span class="lineno"> 1707</span>&#160;        MSSAU-&gt;removeMemoryAccess(<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>);</div>
<div class="line"><a name="l01708"></a><span class="lineno"> 1708</span>&#160;      <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>-&gt;eraseFromParent();</div>
<div class="line"><a name="l01709"></a><span class="lineno"> 1709</span>&#160;      ++NumSimplify;</div>
<div class="line"><a name="l01710"></a><span class="lineno"> 1710</span>&#160;      <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l01711"></a><span class="lineno"> 1711</span>&#160;    }</div>
<div class="line"><a name="l01712"></a><span class="lineno"> 1712</span>&#160; </div>
<div class="line"><a name="l01713"></a><span class="lineno"> 1713</span>&#160;    <span class="comment">// See if instruction simplification can hack this up.  This is common for</span></div>
<div class="line"><a name="l01714"></a><span class="lineno"> 1714</span>&#160;    <span class="comment">// things like &quot;select false, X, Y&quot; after unswitching made the condition be</span></div>
<div class="line"><a name="l01715"></a><span class="lineno"> 1715</span>&#160;    <span class="comment">// &#39;false&#39;.  TODO: update the domtree properly so we can pass it here.</span></div>
<div class="line"><a name="l01716"></a><span class="lineno"> 1716</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1Value.html">Value</a> *V = <a class="code" href="namespacellvm.html#a57790783d1c27d76d6295d41ba751c63">SimplifyInstruction</a>(<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>, <a class="code" href="AArch64SLSHardening_8cpp.html#ad467c4ab9119043f9b7750ab986be61a">DL</a>))</div>
<div class="line"><a name="l01717"></a><span class="lineno"> 1717</span>&#160;      <span class="keywordflow">if</span> (LI-&gt;<a class="code" href="classllvm_1_1LoopInfo.html#ab12b535502b86394c84bfd24d58e4657">replacementPreservesLCSSAForm</a>(<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>, V)) {</div>
<div class="line"><a name="l01718"></a><span class="lineno"> 1718</span>&#160;        <a class="code" href="LoopUnswitch_8cpp.html#aec0f8308a1a4cd48e078d52bc0d07878">replaceUsesOfWith</a>(<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>, V, Worklist, L, LPM, MSSAU.get());</div>
<div class="line"><a name="l01719"></a><span class="lineno"> 1719</span>&#160;        <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l01720"></a><span class="lineno"> 1720</span>&#160;      }</div>
<div class="line"><a name="l01721"></a><span class="lineno"> 1721</span>&#160; </div>
<div class="line"><a name="l01722"></a><span class="lineno"> 1722</span>&#160;    <span class="comment">// Special case hacks that appear commonly in unswitched code.</span></div>
<div class="line"><a name="l01723"></a><span class="lineno"> 1723</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1BranchInst.html">BranchInst</a> *BI = dyn_cast&lt;BranchInst&gt;(<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>)) {</div>
<div class="line"><a name="l01724"></a><span class="lineno"> 1724</span>&#160;      <span class="keywordflow">if</span> (BI-&gt;<a class="code" href="classllvm_1_1BranchInst.html#ad56f6a9b5cd05940017c4544df48bc30">isUnconditional</a>()) {</div>
<div class="line"><a name="l01725"></a><span class="lineno"> 1725</span>&#160;        <span class="comment">// If BI&#39;s parent is the only pred of the successor, fold the two blocks</span></div>
<div class="line"><a name="l01726"></a><span class="lineno"> 1726</span>&#160;        <span class="comment">// together.</span></div>
<div class="line"><a name="l01727"></a><span class="lineno"> 1727</span>&#160;        <a class="code" href="classllvm_1_1BasicBlock.html">BasicBlock</a> *Pred = BI-&gt;<a class="code" href="classllvm_1_1Instruction.html#a1a7f07aaef6a3bee130bf0e0f0536802">getParent</a>();</div>
<div class="line"><a name="l01728"></a><span class="lineno"> 1728</span>&#160;        (void)Pred;</div>
<div class="line"><a name="l01729"></a><span class="lineno"> 1729</span>&#160;        <a class="code" href="classllvm_1_1BasicBlock.html">BasicBlock</a> *Succ = BI-&gt;<a class="code" href="classllvm_1_1BranchInst.html#ad97f2e60cf22f15e0cf617af52309031">getSuccessor</a>(0);</div>
<div class="line"><a name="l01730"></a><span class="lineno"> 1730</span>&#160;        <a class="code" href="classllvm_1_1BasicBlock.html">BasicBlock</a> *SinglePred = Succ-&gt;<a class="code" href="classllvm_1_1BasicBlock.html#a59fb91d1691350f7d1b8e8a114e3f2a4">getSinglePredecessor</a>();</div>
<div class="line"><a name="l01731"></a><span class="lineno"> 1731</span>&#160;        <span class="keywordflow">if</span> (!SinglePred) <span class="keywordflow">continue</span>;  <span class="comment">// Nothing to do.</span></div>
<div class="line"><a name="l01732"></a><span class="lineno"> 1732</span>&#160;        <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(SinglePred == Pred &amp;&amp; <span class="stringliteral">&quot;CFG broken&quot;</span>);</div>
<div class="line"><a name="l01733"></a><span class="lineno"> 1733</span>&#160; </div>
<div class="line"><a name="l01734"></a><span class="lineno"> 1734</span>&#160;        <span class="comment">// Make the LPM and Worklist updates specific to LoopUnswitch.</span></div>
<div class="line"><a name="l01735"></a><span class="lineno"> 1735</span>&#160;        <a class="code" href="LoopUnswitch_8cpp.html#a6479ba91ba69fc3e3965cf288330444a">removeFromWorklist</a>(BI, Worklist);</div>
<div class="line"><a name="l01736"></a><span class="lineno"> 1736</span>&#160;        <span class="keyword">auto</span> SuccIt = Succ-&gt;<a class="code" href="classllvm_1_1BasicBlock.html#a0ed5f3ab3c2e4196ee0cffffa080c062">begin</a>();</div>
<div class="line"><a name="l01737"></a><span class="lineno"> 1737</span>&#160;        <span class="keywordflow">while</span> (<a class="code" href="classllvm_1_1PHINode.html">PHINode</a> *PN = dyn_cast&lt;PHINode&gt;(SuccIt++)) {</div>
<div class="line"><a name="l01738"></a><span class="lineno"> 1738</span>&#160;          <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> It = 0, <a class="code" href="BuiltinGCs_8cpp.html#a6742d2e0a668baf1196ec69e158d5f15">E</a> = PN-&gt;<a class="code" href="classllvm_1_1User.html#addec638786f763d967811b45cb662f1f">getNumOperands</a>(); It != <a class="code" href="BuiltinGCs_8cpp.html#a6742d2e0a668baf1196ec69e158d5f15">E</a>; ++It)</div>
<div class="line"><a name="l01739"></a><span class="lineno"> 1739</span>&#160;            <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1Instruction.html">Instruction</a> *<a class="code" href="classllvm_1_1Use.html">Use</a> = dyn_cast&lt;Instruction&gt;(PN-&gt;<a class="code" href="classllvm_1_1User.html#abe1de1520a21f77ac57cc210bf0fb0b4">getOperand</a>(It)))</div>
<div class="line"><a name="l01740"></a><span class="lineno"> 1740</span>&#160;              Worklist.push_back(<a class="code" href="classllvm_1_1Use.html">Use</a>);</div>
<div class="line"><a name="l01741"></a><span class="lineno"> 1741</span>&#160;          <span class="keywordflow">for</span> (<a class="code" href="classllvm_1_1User.html">User</a> *U : PN-&gt;<a class="code" href="classllvm_1_1Value.html#ab4e0512c7e1c7adaa56677e3155685f1">users</a>())</div>
<div class="line"><a name="l01742"></a><span class="lineno"> 1742</span>&#160;            Worklist.push_back(cast&lt;Instruction&gt;(U));</div>
<div class="line"><a name="l01743"></a><span class="lineno"> 1743</span>&#160;          <a class="code" href="LoopUnswitch_8cpp.html#a6479ba91ba69fc3e3965cf288330444a">removeFromWorklist</a>(PN, Worklist);</div>
<div class="line"><a name="l01744"></a><span class="lineno"> 1744</span>&#160;          ++NumSimplify;</div>
<div class="line"><a name="l01745"></a><span class="lineno"> 1745</span>&#160;        }</div>
<div class="line"><a name="l01746"></a><span class="lineno"> 1746</span>&#160;        <span class="comment">// Merge the block and make the remaining analyses updates.</span></div>
<div class="line"><a name="l01747"></a><span class="lineno"> 1747</span>&#160;        <a class="code" href="classllvm_1_1DomTreeUpdater.html">DomTreeUpdater</a> DTU(DT, <a class="code" href="classllvm_1_1DomTreeUpdater.html#a8bf4c30be33831d7882d6880b8ae433da483c336d7d9fe614a8b5aae1e746e01f">DomTreeUpdater::UpdateStrategy::Eager</a>);</div>
<div class="line"><a name="l01748"></a><span class="lineno"> 1748</span>&#160;        <a class="code" href="namespacellvm.html#a23ddcf4630aa7c7c250a1af5c9e7e20d">MergeBlockIntoPredecessor</a>(Succ, &amp;DTU, LI, MSSAU.get());</div>
<div class="line"><a name="l01749"></a><span class="lineno"> 1749</span>&#160;        ++NumSimplify;</div>
<div class="line"><a name="l01750"></a><span class="lineno"> 1750</span>&#160;        <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l01751"></a><span class="lineno"> 1751</span>&#160;      }</div>
<div class="line"><a name="l01752"></a><span class="lineno"> 1752</span>&#160; </div>
<div class="line"><a name="l01753"></a><span class="lineno"> 1753</span>&#160;      <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l01754"></a><span class="lineno"> 1754</span>&#160;    }</div>
<div class="line"><a name="l01755"></a><span class="lineno"> 1755</span>&#160;  }</div>
<div class="line"><a name="l01756"></a><span class="lineno"> 1756</span>&#160;}</div>
<div class="line"><a name="l01757"></a><span class="lineno"> 1757</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l01758"></a><span class="lineno"> 1758</span>&#160;<span class="comment">/// Simple simplifications we can do given the information that Cond is</span></div>
<div class="line"><a name="l01759"></a><span class="lineno"> 1759</span>&#160;<span class="comment">/// definitely not equal to Val.</span></div>
<div class="line"><a name="l01760"></a><span class="lineno"> 1760</span>&#160;<span class="comment"></span><a class="code" href="classllvm_1_1Value.html">Value</a> *LoopUnswitch::simplifyInstructionWithNotEqual(<a class="code" href="classllvm_1_1Instruction.html">Instruction</a> *Inst,</div>
<div class="line"><a name="l01761"></a><span class="lineno"> 1761</span>&#160;                                                     <a class="code" href="classllvm_1_1Value.html">Value</a> *Invariant,</div>
<div class="line"><a name="l01762"></a><span class="lineno"> 1762</span>&#160;                                                     <a class="code" href="classllvm_1_1Constant.html">Constant</a> *Val) {</div>
<div class="line"><a name="l01763"></a><span class="lineno"> 1763</span>&#160;  <span class="comment">// icmp eq cond, val -&gt; false</span></div>
<div class="line"><a name="l01764"></a><span class="lineno"> 1764</span>&#160;  <a class="code" href="classllvm_1_1ICmpInst.html">ICmpInst</a> *CI = dyn_cast&lt;ICmpInst&gt;(Inst);</div>
<div class="line"><a name="l01765"></a><span class="lineno"> 1765</span>&#160;  <span class="keywordflow">if</span> (CI &amp;&amp; CI-&gt;<a class="code" href="classllvm_1_1ICmpInst.html#abe8988eef2e6fc2baba032cb22afedd7">isEquality</a>()) {</div>
<div class="line"><a name="l01766"></a><span class="lineno"> 1766</span>&#160;    <a class="code" href="classllvm_1_1Value.html">Value</a> *Op0 = CI-&gt;<a class="code" href="classllvm_1_1User.html#abe1de1520a21f77ac57cc210bf0fb0b4">getOperand</a>(0);</div>
<div class="line"><a name="l01767"></a><span class="lineno"> 1767</span>&#160;    <a class="code" href="classllvm_1_1Value.html">Value</a> *Op1 = CI-&gt;<a class="code" href="classllvm_1_1User.html#abe1de1520a21f77ac57cc210bf0fb0b4">getOperand</a>(1);</div>
<div class="line"><a name="l01768"></a><span class="lineno"> 1768</span>&#160;    <span class="keywordflow">if</span> ((Op0 == Invariant &amp;&amp; Op1 == Val) || (Op0 == Val &amp;&amp; Op1 == Invariant)) {</div>
<div class="line"><a name="l01769"></a><span class="lineno"> 1769</span>&#160;      <a class="code" href="classllvm_1_1LLVMContext.html">LLVMContext</a> &amp;Ctx = Inst-&gt;<a class="code" href="classllvm_1_1Value.html#ab3fc0225d8aaf8434026c3573f961f2c">getContext</a>();</div>
<div class="line"><a name="l01770"></a><span class="lineno"> 1770</span>&#160;      <span class="keywordflow">if</span> (CI-&gt;<a class="code" href="classllvm_1_1CmpInst.html#aa7414ba9f658ff1287d22a4b8fe81bcb">getPredicate</a>() == <a class="code" href="classllvm_1_1CmpInst.html#a2be3583dac92a031fa1458d4d992c78baa719225e2de4059f93fd3209e1f48218">CmpInst::ICMP_EQ</a>)</div>
<div class="line"><a name="l01771"></a><span class="lineno"> 1771</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="classllvm_1_1ConstantInt.html#aa7cce62ac5cc6df09cce0535874336b7">ConstantInt::getFalse</a>(Ctx);</div>
<div class="line"><a name="l01772"></a><span class="lineno"> 1772</span>&#160;      <span class="keywordflow">else</span></div>
<div class="line"><a name="l01773"></a><span class="lineno"> 1773</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="classllvm_1_1ConstantInt.html#a82dbbd8e3688b0bc1eedb338864d0d0c">ConstantInt::getTrue</a>(Ctx);</div>
<div class="line"><a name="l01774"></a><span class="lineno"> 1774</span>&#160;     }</div>
<div class="line"><a name="l01775"></a><span class="lineno"> 1775</span>&#160;  }</div>
<div class="line"><a name="l01776"></a><span class="lineno"> 1776</span>&#160; </div>
<div class="line"><a name="l01777"></a><span class="lineno"> 1777</span>&#160;  <span class="comment">// FIXME: there may be other opportunities, e.g. comparison with floating</span></div>
<div class="line"><a name="l01778"></a><span class="lineno"> 1778</span>&#160;  <span class="comment">// point, or Invariant - Val != 0, etc.</span></div>
<div class="line"><a name="l01779"></a><span class="lineno"> 1779</span>&#160;  <span class="keywordflow">return</span> <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l01780"></a><span class="lineno"> 1780</span>&#160;}</div>
</div><!-- fragment --></div><!-- contents -->
<div class="ttc" id="alib_2Target_2README_8txt_html_acb559820d9ca11295b4500f179ef6392"><div class="ttname"><a href="lib_2Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a></div><div class="ttdeci">i</div><div class="ttdef"><b>Definition:</b> <a href="lib_2Target_2README_8txt_source.html#l00029">README.txt:29</a></div></div>
<div class="ttc" id="aAssumptionCache_8h_html"><div class="ttname"><a href="AssumptionCache_8h.html">AssumptionCache.h</a></div></div>
<div class="ttc" id="anamespacellvm_html_a91d9d210ba428cc67e3c2e892f24529e"><div class="ttname"><a href="namespacellvm.html#a91d9d210ba428cc67e3c2e892f24529e">llvm::predecessors</a></div><div class="ttdeci">pred_range predecessors(BasicBlock *BB)</div><div class="ttdef"><b>Definition:</b> <a href="IR_2CFG_8h_source.html#l00127">CFG.h:127</a></div></div>
<div class="ttc" id="anamespacellvm_html"><div class="ttname"><a href="namespacellvm.html">llvm</a></div><div class="ttdoc">--------------------- PointerInfo ------------------------------------</div><div class="ttdef"><b>Definition:</b> <a href="AllocatorList_8h_source.html#l00023">AllocatorList.h:23</a></div></div>
<div class="ttc" id="aclassllvm_1_1Type_html_aa75984a442f2379de0c66018201fa628"><div class="ttname"><a href="classllvm_1_1Type.html#aa75984a442f2379de0c66018201fa628">llvm::Type::getInt1Ty</a></div><div class="ttdeci">static IntegerType * getInt1Ty(LLVMContext &amp;C)</div><div class="ttdef"><b>Definition:</b> <a href="Type_8cpp_source.html#l00200">Type.cpp:200</a></div></div>
<div class="ttc" id="aclassllvm_1_1CmpInst_html_a2be3583dac92a031fa1458d4d992c78baa719225e2de4059f93fd3209e1f48218"><div class="ttname"><a href="classllvm_1_1CmpInst.html#a2be3583dac92a031fa1458d4d992c78baa719225e2de4059f93fd3209e1f48218">llvm::CmpInst::ICMP_EQ</a></div><div class="ttdeci">@ ICMP_EQ</div><div class="ttdoc">equal</div><div class="ttdef"><b>Definition:</b> <a href="InstrTypes_8h_source.html#l00741">InstrTypes.h:741</a></div></div>
<div class="ttc" id="aclassllvm_1_1AssumptionCache_html_a23187618f079555e127ba0e7b4581530"><div class="ttname"><a href="classllvm_1_1AssumptionCache.html#a23187618f079555e127ba0e7b4581530">llvm::AssumptionCache::registerAssumption</a></div><div class="ttdeci">void registerAssumption(AssumeInst *CI)</div><div class="ttdoc">Add an @llvm.assume intrinsic to this function's cache.</div><div class="ttdef"><b>Definition:</b> <a href="AssumptionCache_8cpp_source.html#l00217">AssumptionCache.cpp:217</a></div></div>
<div class="ttc" id="aclassllvm_1_1WeakTrackingVH_html"><div class="ttname"><a href="classllvm_1_1WeakTrackingVH.html">llvm::WeakTrackingVH</a></div><div class="ttdoc">Value handle that is nullable, but tries to track the Value.</div><div class="ttdef"><b>Definition:</b> <a href="ValueHandle_8h_source.html#l00204">ValueHandle.h:204</a></div></div>
<div class="ttc" id="aValueMapper_8h_html"><div class="ttname"><a href="ValueMapper_8h.html">ValueMapper.h</a></div></div>
<div class="ttc" id="aclassllvm_1_1DataLayout_html"><div class="ttname"><a href="classllvm_1_1DataLayout.html">llvm::DataLayout</a></div><div class="ttdoc">A parsed version of the target data layout string in and methods for querying it.</div><div class="ttdef"><b>Definition:</b> <a href="DataLayout_8h_source.html#l00112">DataLayout.h:112</a></div></div>
<div class="ttc" id="aLoopUnswitch_8cpp_html_a488610869ffea06bc4eefcd4592fca9fae7493b8ace82c60402b77a20b8bfe17a"><div class="ttname"><a href="LoopUnswitch_8cpp.html#a488610869ffea06bc4eefcd4592fca9fae7493b8ace82c60402b77a20b8bfe17a">OC_OpChainAnd</a></div><div class="ttdeci">@ OC_OpChainAnd</div><div class="ttdoc">There are only ANDs.</div><div class="ttdef"><b>Definition:</b> <a href="LoopUnswitch_8cpp_source.html#l00420">LoopUnswitch.cpp:420</a></div></div>
<div class="ttc" id="aclassllvm_1_1BasicBlock_html_a98c0a84a5dfa8bce341c829709f171e5"><div class="ttname"><a href="classllvm_1_1BasicBlock.html#a98c0a84a5dfa8bce341c829709f171e5">llvm::BasicBlock::iterator</a></div><div class="ttdeci">InstListType::iterator iterator</div><div class="ttdoc">Instruction iterators...</div><div class="ttdef"><b>Definition:</b> <a href="BasicBlock_8h_source.html#l00090">BasicBlock.h:90</a></div></div>
<div class="ttc" id="aclassllvm_1_1BasicBlock_html_a38bee869ad41aebfef3de2641b12004c"><div class="ttname"><a href="classllvm_1_1BasicBlock.html#a38bee869ad41aebfef3de2641b12004c">llvm::BasicBlock::getParent</a></div><div class="ttdeci">const Function * getParent() const</div><div class="ttdoc">Return the enclosing method, or null if none.</div><div class="ttdef"><b>Definition:</b> <a href="BasicBlock_8h_source.html#l00107">BasicBlock.h:107</a></div></div>
<div class="ttc" id="aIntrinsicInst_8h_html"><div class="ttname"><a href="IntrinsicInst_8h.html">IntrinsicInst.h</a></div></div>
<div class="ttc" id="aclassllvm_1_1ValueMap_html_ab871e2d0ebded563edfebd6766fc1a04"><div class="ttname"><a href="classllvm_1_1ValueMap.html#ab871e2d0ebded563edfebd6766fc1a04">llvm::ValueMap::end</a></div><div class="ttdeci">iterator end()</div><div class="ttdef"><b>Definition:</b> <a href="ValueMap_8h_source.html#l00136">ValueMap.h:136</a></div></div>
<div class="ttc" id="aMemorySSAUpdater_8h_html"><div class="ttname"><a href="MemorySSAUpdater_8h.html">MemorySSAUpdater.h</a></div></div>
<div class="ttc" id="aclassllvm_1_1Function_html"><div class="ttname"><a href="classllvm_1_1Function.html">llvm::Function</a></div><div class="ttdef"><b>Definition:</b> <a href="Function_8h_source.html#l00061">Function.h:62</a></div></div>
<div class="ttc" id="aclassllvm_1_1Loop_html"><div class="ttname"><a href="classllvm_1_1Loop.html">llvm::Loop</a></div><div class="ttdoc">Represents a single loop in the control flow graph.</div><div class="ttdef"><b>Definition:</b> <a href="LoopInfo_8h_source.html#l00530">LoopInfo.h:530</a></div></div>
<div class="ttc" id="aPass_8h_html"><div class="ttname"><a href="Pass_8h.html">Pass.h</a></div></div>
<div class="ttc" id="aclassllvm_1_1LoopBase_html_a04337b572d34ea413c35dbac5d75530b"><div class="ttname"><a href="classllvm_1_1LoopBase.html#a04337b572d34ea413c35dbac5d75530b">llvm::LoopBase::contains</a></div><div class="ttdeci">bool contains(const LoopT *L) const</div><div class="ttdoc">Return true if the specified loop is contained within in this loop.</div><div class="ttdef"><b>Definition:</b> <a href="LoopInfo_8h_source.html#l00122">LoopInfo.h:122</a></div></div>
<div class="ttc" id="aclassllvm_1_1SmallVector_html"><div class="ttname"><a href="classllvm_1_1SmallVector.html">llvm::SmallVector</a></div><div class="ttdoc">This is a 'vector' (really, a variable-sized array), optimized for the case when the array is small.</div><div class="ttdef"><b>Definition:</b> <a href="SmallVector_8h_source.html#l01168">SmallVector.h:1169</a></div></div>
<div class="ttc" id="aStatistic_8h_html"><div class="ttname"><a href="Statistic_8h.html">Statistic.h</a></div></div>
<div class="ttc" id="aclassllvm_1_1LandingPadInst_html"><div class="ttname"><a href="classllvm_1_1LandingPadInst.html">llvm::LandingPadInst</a></div><div class="ttdoc">The landingpad instruction holds all of the information necessary to generate correct exception handl...</div><div class="ttdef"><b>Definition:</b> <a href="Instructions_8h_source.html#l02849">Instructions.h:2849</a></div></div>
<div class="ttc" id="astructllvm_1_1CodeMetrics_html"><div class="ttname"><a href="structllvm_1_1CodeMetrics.html">llvm::CodeMetrics</a></div><div class="ttdoc">Utility to calculate the size and a few similar metrics for a set of basic blocks.</div><div class="ttdef"><b>Definition:</b> <a href="CodeMetrics_8h_source.html#l00030">CodeMetrics.h:30</a></div></div>
<div class="ttc" id="aclassllvm_1_1TargetTransformInfo_html"><div class="ttname"><a href="classllvm_1_1TargetTransformInfo.html">llvm::TargetTransformInfo</a></div><div class="ttdoc">This pass provides access to the codegen interfaces that are needed for IR-level transformations.</div><div class="ttdef"><b>Definition:</b> <a href="TargetTransformInfo_8h_source.html#l00167">TargetTransformInfo.h:167</a></div></div>
<div class="ttc" id="aLazyBlockFrequencyInfo_8h_html"><div class="ttname"><a href="LazyBlockFrequencyInfo_8h.html">LazyBlockFrequencyInfo.h</a></div></div>
<div class="ttc" id="aclassllvm_1_1IRBuilder_html"><div class="ttname"><a href="classllvm_1_1IRBuilder.html">llvm::IRBuilder&lt;&gt;</a></div></div>
<div class="ttc" id="aTransforms_2Utils_2Local_8h_html"><div class="ttname"><a href="Transforms_2Utils_2Local_8h.html">Local.h</a></div></div>
<div class="ttc" id="aclassllvm_1_1DominatorTree_html"><div class="ttname"><a href="classllvm_1_1DominatorTree.html">llvm::DominatorTree</a></div><div class="ttdoc">Concrete subclass of DominatorTreeBase that is used to compute a normal dominator tree.</div><div class="ttdef"><b>Definition:</b> <a href="Dominators_8h_source.html#l00151">Dominators.h:151</a></div></div>
<div class="ttc" id="anamespacellvm_html_a92caae34bfacc63bda0f23d5d005a89e"><div class="ttname"><a href="namespacellvm.html#a92caae34bfacc63bda0f23d5d005a89e">llvm::getLoopAnalysisUsage</a></div><div class="ttdeci">void getLoopAnalysisUsage(AnalysisUsage &amp;AU)</div><div class="ttdoc">Helper to consistently add the set of standard passes to a loop pass's AnalysisUsage.</div><div class="ttdef"><b>Definition:</b> <a href="LoopUtils_8cpp_source.html#l00149">LoopUtils.cpp:149</a></div></div>
<div class="ttc" id="anamespacellvm_1_1cl_html_a68075925a54790e71ca790e1d4f21a40a263ac008d8d31f13ce460395fc4cf7e6"><div class="ttname"><a href="namespacellvm_1_1cl.html#a68075925a54790e71ca790e1d4f21a40a263ac008d8d31f13ce460395fc4cf7e6">llvm::cl::Hidden</a></div><div class="ttdeci">@ Hidden</div><div class="ttdef"><b>Definition:</b> <a href="CommandLine_8h_source.html#l00143">CommandLine.h:143</a></div></div>
<div class="ttc" id="aScalarEvolution_8h_html"><div class="ttname"><a href="ScalarEvolution_8h.html">ScalarEvolution.h</a></div></div>
<div class="ttc" id="aDenseMap_8h_html"><div class="ttname"><a href="DenseMap_8h.html">DenseMap.h</a></div></div>
<div class="ttc" id="anamespacellvm_html_ab61955a622d233750894890e0704da5c"><div class="ttname"><a href="namespacellvm.html#ab61955a622d233750894890e0704da5c">llvm::SplitCriticalEdge</a></div><div class="ttdeci">BasicBlock * SplitCriticalEdge(Instruction *TI, unsigned SuccNum, const CriticalEdgeSplittingOptions &amp;Options=CriticalEdgeSplittingOptions(), const Twine &amp;BBName=&quot;&quot;)</div><div class="ttdoc">If this edge is a critical edge, insert a new node to split the critical edge.</div><div class="ttdef"><b>Definition:</b> <a href="BreakCriticalEdges_8cpp_source.html#l00103">BreakCriticalEdges.cpp:103</a></div></div>
<div class="ttc" id="aModule_8h_html"><div class="ttname"><a href="Module_8h.html">Module.h</a></div><div class="ttdoc">Module.h This file contains the declarations for the Module class.</div></div>
<div class="ttc" id="anamespacellvm_html_a469101ea87b8b432a1b4f7935c97f35c"><div class="ttname"><a href="namespacellvm.html#a469101ea87b8b432a1b4f7935c97f35c">llvm::reverse</a></div><div class="ttdeci">auto reverse(ContainerTy &amp;&amp;C, std::enable_if_t&lt; has_rbegin&lt; ContainerTy &gt;::value &gt; *=nullptr)</div><div class="ttdef"><b>Definition:</b> <a href="STLExtras_8h_source.html#l00329">STLExtras.h:329</a></div></div>
<div class="ttc" id="aclassllvm_1_1DominatorTreeBase_html_a9aeeca2833810f01b20545a46fe22503"><div class="ttname"><a href="classllvm_1_1DominatorTreeBase.html#a9aeeca2833810f01b20545a46fe22503">llvm::DominatorTreeBase&lt; BasicBlock, false &gt;::Insert</a></div><div class="ttdeci">static constexpr UpdateKind Insert</div><div class="ttdef"><b>Definition:</b> <a href="GenericDomTree_8h_source.html#l00242">GenericDomTree.h:242</a></div></div>
<div class="ttc" id="aclassllvm_1_1DominatorTreeBase_html_a4344e66fb61ea313a85a9e054124ac55"><div class="ttname"><a href="classllvm_1_1DominatorTreeBase.html#a4344e66fb61ea313a85a9e054124ac55">llvm::DominatorTreeBase::getNode</a></div><div class="ttdeci">DomTreeNodeBase&lt; NodeT &gt; * getNode(const NodeT *BB) const</div><div class="ttdoc">getNode - return the (Post)DominatorTree node for the specified basic block.</div><div class="ttdef"><b>Definition:</b> <a href="GenericDomTree_8h_source.html#l00351">GenericDomTree.h:351</a></div></div>
<div class="ttc" id="aclassllvm_1_1Function_html_aa84505c70a7f4ae97082df0b91bd7a9a"><div class="ttname"><a href="classllvm_1_1Function.html#aa84505c70a7f4ae97082df0b91bd7a9a">llvm::Function::hasFnAttribute</a></div><div class="ttdeci">bool hasFnAttribute(Attribute::AttrKind Kind) const</div><div class="ttdoc">Return true if the function has the attribute.</div><div class="ttdef"><b>Definition:</b> <a href="Function_8h_source.html#l00356">Function.h:356</a></div></div>
<div class="ttc" id="aclassllvm_1_1SmallPtrSet_html"><div class="ttname"><a href="classllvm_1_1SmallPtrSet.html">llvm::SmallPtrSet</a></div><div class="ttdoc">SmallPtrSet - This class implements a set which is optimized for holding SmallSize or less elements.</div><div class="ttdef"><b>Definition:</b> <a href="SmallPtrSet_8h_source.html#l00449">SmallPtrSet.h:449</a></div></div>
<div class="ttc" id="aclassllvm_1_1BasicBlock_html_a59fb91d1691350f7d1b8e8a114e3f2a4"><div class="ttname"><a href="classllvm_1_1BasicBlock.html#a59fb91d1691350f7d1b8e8a114e3f2a4">llvm::BasicBlock::getSinglePredecessor</a></div><div class="ttdeci">const BasicBlock * getSinglePredecessor() const</div><div class="ttdoc">Return the predecessor of this block if it has a single predecessor block.</div><div class="ttdef"><b>Definition:</b> <a href="BasicBlock_8cpp_source.html#l00264">BasicBlock.cpp:264</a></div></div>
<div class="ttc" id="aSTLExtras_8h_html"><div class="ttname"><a href="STLExtras_8h.html">STLExtras.h</a></div></div>
<div class="ttc" id="anamespacellvm_html_a1b08b801426881b2a106ccb2e1c79cf3"><div class="ttname"><a href="namespacellvm.html#a1b08b801426881b2a106ccb2e1c79cf3">llvm::EnableMSSALoopDependency</a></div><div class="ttdeci">cl::opt&lt; bool &gt; EnableMSSALoopDependency</div><div class="ttdoc">Enables memory ssa as a dependency for loop passes.</div></div>
<div class="ttc" id="aclassllvm_1_1DomTreeNodeBase_html_aa22cb3ff8c95bb05185acad8c569d4b6"><div class="ttname"><a href="classllvm_1_1DomTreeNodeBase.html#aa22cb3ff8c95bb05185acad8c569d4b6">llvm::DomTreeNodeBase::getIDom</a></div><div class="ttdeci">DomTreeNodeBase * getIDom() const</div><div class="ttdef"><b>Definition:</b> <a href="GenericDomTree_8h_source.html#l00089">GenericDomTree.h:89</a></div></div>
<div class="ttc" id="anamespacellvm_html_a3493591c859b8ae672dfa20950608c86"><div class="ttname"><a href="namespacellvm.html#a3493591c859b8ae672dfa20950608c86">llvm::successors</a></div><div class="ttdeci">succ_range successors(Instruction *I)</div><div class="ttdef"><b>Definition:</b> <a href="IR_2CFG_8h_source.html#l00262">CFG.h:262</a></div></div>
<div class="ttc" id="aclassllvm_1_1SimpleLoopSafetyInfo_html"><div class="ttname"><a href="classllvm_1_1SimpleLoopSafetyInfo.html">llvm::SimpleLoopSafetyInfo</a></div><div class="ttdoc">Simple and conservative implementation of LoopSafetyInfo that can give false-positive answers to its ...</div><div class="ttdef"><b>Definition:</b> <a href="MustExecute_8h_source.html#l00110">MustExecute.h:110</a></div></div>
<div class="ttc" id="aMustExecute_8h_html"><div class="ttname"><a href="MustExecute_8h.html">MustExecute.h</a></div><div class="ttdoc">Contains a collection of routines for determining if a given instruction is guaranteed to execute if ...</div></div>
<div class="ttc" id="aclassllvm_1_1DominatorTreeBase_html_a470b5b573c7915fe13bd529b22c9adbc"><div class="ttname"><a href="classllvm_1_1DominatorTreeBase.html#a470b5b573c7915fe13bd529b22c9adbc">llvm::DominatorTreeBase::applyUpdates</a></div><div class="ttdeci">void applyUpdates(ArrayRef&lt; UpdateType &gt; Updates)</div><div class="ttdoc">Inform the dominator tree about a sequence of CFG edge insertions and deletions and perform a batch u...</div><div class="ttdef"><b>Definition:</b> <a href="GenericDomTree_8h_source.html#l00544">GenericDomTree.h:544</a></div></div>
<div class="ttc" id="aclassllvm_1_1ArrayRef_html_ac835b8735b1b2faec0efdca236e37d94"><div class="ttname"><a href="classllvm_1_1ArrayRef.html#ac835b8735b1b2faec0efdca236e37d94">llvm::ArrayRef::empty</a></div><div class="ttdeci">bool empty() const</div><div class="ttdoc">empty - Check if the array is empty.</div><div class="ttdef"><b>Definition:</b> <a href="ArrayRef_8h_source.html#l00160">ArrayRef.h:160</a></div></div>
<div class="ttc" id="aDebug_8h_html_a08efc68d15935eb8889400a46c3749ba"><div class="ttname"><a href="Debug_8h.html#a08efc68d15935eb8889400a46c3749ba">LLVM_DEBUG</a></div><div class="ttdeci">#define LLVM_DEBUG(X)</div><div class="ttdef"><b>Definition:</b> <a href="Debug_8h_source.html#l00122">Debug.h:122</a></div></div>
<div class="ttc" id="aclassllvm_1_1MDNode_html_a7d10a7b9b7f40b04d27ed97c38ea1950"><div class="ttname"><a href="classllvm_1_1MDNode.html#a7d10a7b9b7f40b04d27ed97c38ea1950">llvm::MDNode::get</a></div><div class="ttdeci">static MDTuple * get(LLVMContext &amp;Context, ArrayRef&lt; Metadata * &gt; MDs)</div><div class="ttdef"><b>Definition:</b> <a href="Metadata_8h_source.html#l01199">Metadata.h:1199</a></div></div>
<div class="ttc" id="aMD5_8cpp_html_a96d73bbd7af15cb1fc38c3f4a3bd82e9"><div class="ttname"><a href="MD5_8cpp.html#a96d73bbd7af15cb1fc38c3f4a3bd82e9">F</a></div><div class="ttdeci">#define F(x, y, z)</div><div class="ttdef"><b>Definition:</b> <a href="MD5_8cpp_source.html#l00056">MD5.cpp:56</a></div></div>
<div class="ttc" id="aclassllvm_1_1LoopBase_html_a7a7815ad3e094df37f2312a4bba8c13e"><div class="ttname"><a href="classllvm_1_1LoopBase.html#a7a7815ad3e094df37f2312a4bba8c13e">llvm::LoopBase::block_end</a></div><div class="ttdeci">block_iterator block_end() const</div><div class="ttdef"><b>Definition:</b> <a href="LoopInfo_8h_source.html#l00177">LoopInfo.h:177</a></div></div>
<div class="ttc" id="aclassllvm_1_1LazyBlockFrequencyInfoPass_html"><div class="ttname"><a href="classllvm_1_1LazyBlockFrequencyInfoPass.html">llvm::LazyBlockFrequencyInfoPass</a></div><div class="ttdoc">This is an alternative analysis pass to BlockFrequencyInfoWrapperPass.</div><div class="ttdef"><b>Definition:</b> <a href="LazyBlockFrequencyInfo_8h_source.html#l00100">LazyBlockFrequencyInfo.h:100</a></div></div>
<div class="ttc" id="alib_2Analysis_2README_8txt_html_a01d2af4eee7c40485a0ce3683a2e907a"><div class="ttname"><a href="lib_2Analysis_2README_8txt.html#a01d2af4eee7c40485a0ce3683a2e907a">loop</a></div><div class="ttdeci">Analysis the ScalarEvolution expression for r is&lt; loop &gt; Outside the loop</div><div class="ttdef"><b>Definition:</b> <a href="lib_2Analysis_2README_8txt_source.html#l00010">README.txt:8</a></div></div>
<div class="ttc" id="aclassllvm_1_1BasicBlock_html"><div class="ttname"><a href="classllvm_1_1BasicBlock.html">llvm::BasicBlock</a></div><div class="ttdoc">LLVM Basic Block Representation.</div><div class="ttdef"><b>Definition:</b> <a href="BasicBlock_8h_source.html#l00058">BasicBlock.h:59</a></div></div>
<div class="ttc" id="anamespacellvm_html_ac8a1ae2e1de53a840bee516d1f5bb173"><div class="ttname"><a href="namespacellvm.html#ac8a1ae2e1de53a840bee516d1f5bb173">llvm::makePostTransformationMetadata</a></div><div class="ttdeci">llvm::MDNode * makePostTransformationMetadata(llvm::LLVMContext &amp;Context, MDNode *OrigLoopID, llvm::ArrayRef&lt; llvm::StringRef &gt; RemovePrefixes, llvm::ArrayRef&lt; llvm::MDNode * &gt; AddAttrs)</div><div class="ttdoc">Create a new LoopID after the loop has been transformed.</div><div class="ttdef"><b>Definition:</b> <a href="LoopInfo_8cpp_source.html#l01119">LoopInfo.cpp:1119</a></div></div>
<div class="ttc" id="aclassllvm_1_1LoopBlocksRPO_html"><div class="ttname"><a href="classllvm_1_1LoopBlocksRPO.html">llvm::LoopBlocksRPO</a></div><div class="ttdoc">Wrapper class to LoopBlocksDFS that provides a standard begin()/end() interface for the DFS reverse p...</div><div class="ttdef"><b>Definition:</b> <a href="LoopIterator_8h_source.html#l00172">LoopIterator.h:172</a></div></div>
<div class="ttc" id="aNVVMIntrRange_8cpp_html_afad351d7bf10ac0446b64e7827634e94"><div class="ttname"><a href="NVVMIntrRange_8cpp.html#afad351d7bf10ac0446b64e7827634e94">Context</a></div><div class="ttdeci">LLVMContext &amp; Context</div><div class="ttdef"><b>Definition:</b> <a href="NVVMIntrRange_8cpp_source.html#l00066">NVVMIntrRange.cpp:66</a></div></div>
<div class="ttc" id="anamespacellvm_html_a7c46c742c31be54870e2038048e6b391"><div class="ttname"><a href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">llvm::dbgs</a></div><div class="ttdeci">raw_ostream &amp; dbgs()</div><div class="ttdoc">dbgs() - This returns a reference to a raw_ostream for debugging messages.</div><div class="ttdef"><b>Definition:</b> <a href="Debug_8cpp_source.html#l00163">Debug.cpp:163</a></div></div>
<div class="ttc" id="aclassllvm_1_1DominatorTree_html_a5c69311e8d44898dac36a155c3d8691d"><div class="ttname"><a href="classllvm_1_1DominatorTree.html#a5c69311e8d44898dac36a155c3d8691d">llvm::DominatorTree::dominates</a></div><div class="ttdeci">bool dominates(const BasicBlock *BB, const Use &amp;U) const</div><div class="ttdoc">Return true if the (end of the) basic block BB dominates the use U.</div><div class="ttdef"><b>Definition:</b> <a href="Dominators_8cpp_source.html#l00115">Dominators.cpp:115</a></div></div>
<div class="ttc" id="aIR_2Instruction_8h_html"><div class="ttname"><a href="IR_2Instruction_8h.html">Instruction.h</a></div></div>
<div class="ttc" id="aCommandLine_8h_html"><div class="ttname"><a href="CommandLine_8h.html">CommandLine.h</a></div></div>
<div class="ttc" id="aCodeMetrics_8h_html"><div class="ttname"><a href="CodeMetrics_8h.html">CodeMetrics.h</a></div></div>
<div class="ttc" id="aclassllvm_1_1SwitchInst_1_1CaseHandleImpl_html_a9b78f2b8e325ee61b90420c2495b03d5"><div class="ttname"><a href="classllvm_1_1SwitchInst_1_1CaseHandleImpl.html#a9b78f2b8e325ee61b90420c2495b03d5">llvm::SwitchInst::CaseHandleImpl::getCaseSuccessor</a></div><div class="ttdeci">BasicBlockT * getCaseSuccessor() const</div><div class="ttdoc">Resolves successor for current case.</div><div class="ttdef"><b>Definition:</b> <a href="Instructions_8h_source.html#l03249">Instructions.h:3249</a></div></div>
<div class="ttc" id="aclassllvm_1_1ConstantInt_html"><div class="ttname"><a href="classllvm_1_1ConstantInt.html">llvm::ConstantInt</a></div><div class="ttdoc">This is the shared class of boolean and integer constants.</div><div class="ttdef"><b>Definition:</b> <a href="Constants_8h_source.html#l00079">Constants.h:79</a></div></div>
<div class="ttc" id="aclassllvm_1_1LoopBase_html_a62733c3335a87750623dbfc5b3ae4f6c"><div class="ttname"><a href="classllvm_1_1LoopBase.html#a62733c3335a87750623dbfc5b3ae4f6c">llvm::LoopBase::getParentLoop</a></div><div class="ttdeci">LoopT * getParentLoop() const</div><div class="ttdoc">Return the parent loop if it exists or nullptr for top level loops.</div><div class="ttdef"><b>Definition:</b> <a href="LoopInfo_8h_source.html#l00113">LoopInfo.h:113</a></div></div>
<div class="ttc" id="aclassllvm_1_1Instruction_html_ad449a11cc9b14b0ac93bd61bd0bd9293"><div class="ttname"><a href="classllvm_1_1Instruction.html#ad449a11cc9b14b0ac93bd61bd0bd9293">llvm::Instruction::getNumSuccessors</a></div><div class="ttdeci">unsigned getNumSuccessors() const</div><div class="ttdoc">Return the number of successors that this instruction has.</div><div class="ttdef"><b>Definition:</b> <a href="IR_2Instruction_8cpp_source.html#l00765">Instruction.cpp:765</a></div></div>
<div class="ttc" id="anamespacellvm_html_a399a2e4746faa019d2989fde08c93567"><div class="ttname"><a href="namespacellvm.html#a399a2e4746faa019d2989fde08c93567">llvm::createLoopUnswitchPass</a></div><div class="ttdeci">Pass * createLoopUnswitchPass(bool OptimizeForSize=false, bool hasBranchDivergence=false)</div><div class="ttdef"><b>Definition:</b> <a href="LoopUnswitch_8cpp_source.html#l00412">LoopUnswitch.cpp:412</a></div></div>
<div class="ttc" id="anamespacellvm_html_a8f2893ab869a806d78af17691eb97be3"><div class="ttname"><a href="namespacellvm.html#a8f2893ab869a806d78af17691eb97be3">llvm::RemapInstruction</a></div><div class="ttdeci">void RemapInstruction(Instruction *I, ValueToValueMapTy &amp;VM, RemapFlags Flags=RF_None, ValueMapTypeRemapper *TypeMapper=nullptr, ValueMaterializer *Materializer=nullptr)</div><div class="ttdoc">Convert the instruction operands from referencing the current values into those specified by VM.</div><div class="ttdef"><b>Definition:</b> <a href="ValueMapper_8h_source.html#l00253">ValueMapper.h:253</a></div></div>
<div class="ttc" id="aclassllvm_1_1BasicBlock_html_a233eb15d557dbd3af7221dd9be5cb02d"><div class="ttname"><a href="classllvm_1_1BasicBlock.html#a233eb15d557dbd3af7221dd9be5cb02d">llvm::BasicBlock::phis</a></div><div class="ttdeci">iterator_range&lt; const_phi_iterator &gt; phis() const</div><div class="ttdoc">Returns a range that iterates over the phis in the basic block.</div><div class="ttdef"><b>Definition:</b> <a href="BasicBlock_8h_source.html#l00354">BasicBlock.h:354</a></div></div>
<div class="ttc" id="aclassllvm_1_1MemorySSAWrapperPass_html"><div class="ttname"><a href="classllvm_1_1MemorySSAWrapperPass.html">llvm::MemorySSAWrapperPass</a></div><div class="ttdoc">Legacy analysis pass which computes MemorySSA.</div><div class="ttdef"><b>Definition:</b> <a href="MemorySSA_8h_source.html#l00965">MemorySSA.h:965</a></div></div>
<div class="ttc" id="aclassllvm_1_1PassRegistry_html_a05a729900b76c89e808c6c3094921b2f"><div class="ttname"><a href="classllvm_1_1PassRegistry.html#a05a729900b76c89e808c6c3094921b2f">llvm::PassRegistry::getPassRegistry</a></div><div class="ttdeci">static PassRegistry * getPassRegistry()</div><div class="ttdoc">getPassRegistry - Access the global registry object, which is automatically initialized at applicatio...</div><div class="ttdef"><b>Definition:</b> <a href="PassRegistry_8cpp_source.html#l00031">PassRegistry.cpp:31</a></div></div>
<div class="ttc" id="anamespacellvm_1_1PPCISD_html_ad1c32e5bb1cb213fb836bc3d221e4f19a2ae057e4de45c51c89b7e5dc5053df62"><div class="ttname"><a href="namespacellvm_1_1PPCISD.html#ad1c32e5bb1cb213fb836bc3d221e4f19a2ae057e4de45c51c89b7e5dc5053df62">llvm::PPCISD::SC</a></div><div class="ttdeci">@ SC</div><div class="ttdoc">CHAIN = SC CHAIN, Imm128 - System call.</div><div class="ttdef"><b>Definition:</b> <a href="PPCISelLowering_8h_source.html#l00410">PPCISelLowering.h:410</a></div></div>
<div class="ttc" id="aConstants_8h_html"><div class="ttname"><a href="Constants_8h.html">Constants.h</a></div><div class="ttdoc">This file contains the declarations for the subclasses of Constant, which represent the different fla...</div></div>
<div class="ttc" id="aclassllvm_1_1AAResults_html"><div class="ttname"><a href="classllvm_1_1AAResults.html">llvm::AAResults</a></div><div class="ttdef"><b>Definition:</b> <a href="AliasAnalysis_8h_source.html#l00456">AliasAnalysis.h:456</a></div></div>
<div class="ttc" id="aBuiltinGCs_8cpp_html_a6742d2e0a668baf1196ec69e158d5f15"><div class="ttname"><a href="BuiltinGCs_8cpp.html#a6742d2e0a668baf1196ec69e158d5f15">E</a></div><div class="ttdeci">static GCRegistry::Add&lt; CoreCLRGC &gt; E(&quot;coreclr&quot;, &quot;CoreCLR-compatible GC&quot;)</div></div>
<div class="ttc" id="aclassllvm_1_1User_html"><div class="ttname"><a href="classllvm_1_1User.html">llvm::User</a></div><div class="ttdef"><b>Definition:</b> <a href="User_8h_source.html#l00044">User.h:44</a></div></div>
<div class="ttc" id="aIntrinsics_8h_html"><div class="ttname"><a href="Intrinsics_8h.html">Intrinsics.h</a></div></div>
<div class="ttc" id="aInstrTypes_8h_html"><div class="ttname"><a href="InstrTypes_8h.html">InstrTypes.h</a></div></div>
<div class="ttc" id="aclassllvm_1_1BasicBlock_html_a0ed5f3ab3c2e4196ee0cffffa080c062"><div class="ttname"><a href="classllvm_1_1BasicBlock.html#a0ed5f3ab3c2e4196ee0cffffa080c062">llvm::BasicBlock::begin</a></div><div class="ttdeci">iterator begin()</div><div class="ttdoc">Instruction iterator methods.</div><div class="ttdef"><b>Definition:</b> <a href="BasicBlock_8h_source.html#l00296">BasicBlock.h:296</a></div></div>
<div class="ttc" id="aLoopUnswitch_8cpp_html_a13444ab05280d582a5abac4ee2530691"><div class="ttname"><a href="LoopUnswitch_8cpp.html#a13444ab05280d582a5abac4ee2530691">INITIALIZE_PASS_BEGIN</a></div><div class="ttdeci">INITIALIZE_PASS_BEGIN(LoopUnswitch, &quot;loop-unswitch&quot;, &quot;Unswitch loops&quot;, false, false) INITIALIZE_PASS_END(LoopUnswitch</div></div>
<div class="ttc" id="aclassllvm_1_1AnalysisUsage_html"><div class="ttname"><a href="classllvm_1_1AnalysisUsage.html">llvm::AnalysisUsage</a></div><div class="ttdoc">Represent the analysis usage information of a pass.</div><div class="ttdef"><b>Definition:</b> <a href="PassAnalysisSupport_8h_source.html#l00047">PassAnalysisSupport.h:47</a></div></div>
<div class="ttc" id="anamespacellvm_html_afe8e2e0edcd7756ff5985b8798270c5d"><div class="ttname"><a href="namespacellvm.html#afe8e2e0edcd7756ff5985b8798270c5d">llvm::cloneLoop</a></div><div class="ttdeci">Loop * cloneLoop(Loop *L, Loop *PL, ValueToValueMapTy &amp;VM, LoopInfo *LI, LPPassManager *LPM)</div><div class="ttdoc">Recursively clone the specified loop and all of its children, mapping the blocks with the specified m...</div><div class="ttdef"><b>Definition:</b> <a href="LoopUtils_8cpp_source.html#l01489">LoopUtils.cpp:1489</a></div></div>
<div class="ttc" id="aclassllvm_1_1LoopBase_html_a40f34cc77d2b3bc73384f535c8101858"><div class="ttname"><a href="classllvm_1_1LoopBase.html#a40f34cc77d2b3bc73384f535c8101858">llvm::LoopBase::blocks</a></div><div class="ttdeci">iterator_range&lt; block_iterator &gt; blocks() const</div><div class="ttdef"><b>Definition:</b> <a href="LoopInfo_8h_source.html#l00178">LoopInfo.h:178</a></div></div>
<div class="ttc" id="astructllvm_1_1CriticalEdgeSplittingOptions_html"><div class="ttname"><a href="structllvm_1_1CriticalEdgeSplittingOptions.html">llvm::CriticalEdgeSplittingOptions</a></div><div class="ttdoc">Option class for critical edge splitting.</div><div class="ttdef"><b>Definition:</b> <a href="BasicBlockUtils_8h_source.html#l00136">BasicBlockUtils.h:136</a></div></div>
<div class="ttc" id="aclassllvm_1_1LoopInfo_html_ab12b535502b86394c84bfd24d58e4657"><div class="ttname"><a href="classllvm_1_1LoopInfo.html#ab12b535502b86394c84bfd24d58e4657">llvm::LoopInfo::replacementPreservesLCSSAForm</a></div><div class="ttdeci">bool replacementPreservesLCSSAForm(Instruction *From, Value *To)</div><div class="ttdoc">Returns true if replacing From with To everywhere is guaranteed to preserve LCSSA form.</div><div class="ttdef"><b>Definition:</b> <a href="LoopInfo_8h_source.html#l01115">LoopInfo.h:1115</a></div></div>
<div class="ttc" id="aclassllvm_1_1BasicBlock_html_a161fd4e9fa5367f64c2a4c9e921c3ad3"><div class="ttname"><a href="classllvm_1_1BasicBlock.html#a161fd4e9fa5367f64c2a4c9e921c3ad3">llvm::BasicBlock::getFirstInsertionPt</a></div><div class="ttdeci">const_iterator getFirstInsertionPt() const</div><div class="ttdoc">Returns an iterator to the first instruction in this block that is suitable for inserting a non-PHI i...</div><div class="ttdef"><b>Definition:</b> <a href="BasicBlock_8cpp_source.html#l00249">BasicBlock.cpp:249</a></div></div>
<div class="ttc" id="anamespacefalse_html"><div class="ttname"><a href="namespacefalse.html">false</a></div><div class="ttdef"><b>Definition:</b> <a href="StackSlotColoring_8cpp_source.html#l00142">StackSlotColoring.cpp:142</a></div></div>
<div class="ttc" id="aclassllvm_1_1LoopBase_html_a5cc113cb783ab6e5ca7b69241431c19c"><div class="ttname"><a href="classllvm_1_1LoopBase.html#a5cc113cb783ab6e5ca7b69241431c19c">llvm::LoopBase::getBlocks</a></div><div class="ttdeci">ArrayRef&lt; BlockT * &gt; getBlocks() const</div><div class="ttdoc">Get a list of the basic blocks which make up this loop.</div><div class="ttdef"><b>Definition:</b> <a href="LoopInfo_8h_source.html#l00171">LoopInfo.h:171</a></div></div>
<div class="ttc" id="aclassllvm_1_1Constant_html_a4d51384de6e1798bb6aa875aebeea9f0"><div class="ttname"><a href="classllvm_1_1Constant.html#a4d51384de6e1798bb6aa875aebeea9f0">llvm::Constant::getAllOnesValue</a></div><div class="ttdeci">static Constant * getAllOnesValue(Type *Ty)</div><div class="ttdef"><b>Definition:</b> <a href="Constants_8cpp_source.html#l00406">Constants.cpp:406</a></div></div>
<div class="ttc" id="aclassllvm_1_1Instruction_html"><div class="ttname"><a href="classllvm_1_1Instruction.html">llvm::Instruction</a></div><div class="ttdef"><b>Definition:</b> <a href="IR_2Instruction_8h_source.html#l00045">Instruction.h:46</a></div></div>
<div class="ttc" id="anamespacellvm_html_a57790783d1c27d76d6295d41ba751c63"><div class="ttname"><a href="namespacellvm.html#a57790783d1c27d76d6295d41ba751c63">llvm::SimplifyInstruction</a></div><div class="ttdeci">Value * SimplifyInstruction(Instruction *I, const SimplifyQuery &amp;Q, OptimizationRemarkEmitter *ORE=nullptr)</div><div class="ttdoc">See if we can compute a simplified version of this instruction.</div><div class="ttdef"><b>Definition:</b> <a href="InstructionSimplify_8cpp_source.html#l06243">InstructionSimplify.cpp:6243</a></div></div>
<div class="ttc" id="aPassBuilderBindings_8cpp_html_a47c521bf7ba0bb2147b96d068af30d04"><div class="ttname"><a href="PassBuilderBindings_8cpp.html#a47c521bf7ba0bb2147b96d068af30d04">Options</a></div><div class="ttdeci">const char LLVMTargetMachineRef LLVMPassBuilderOptionsRef Options</div><div class="ttdef"><b>Definition:</b> <a href="PassBuilderBindings_8cpp_source.html#l00048">PassBuilderBindings.cpp:48</a></div></div>
<div class="ttc" id="anamespacellvm_html_a0bf75467957937ad23ad7be19f489934"><div class="ttname"><a href="namespacellvm.html#a0bf75467957937ad23ad7be19f489934">llvm::STATISTIC</a></div><div class="ttdeci">STATISTIC(NumFunctions, &quot;Total number of functions&quot;)</div></div>
<div class="ttc" id="aclassllvm_1_1UndefValue_html_a4ae5ff22b700a42bcc5d889233721335"><div class="ttname"><a href="classllvm_1_1UndefValue.html#a4ae5ff22b700a42bcc5d889233721335">llvm::UndefValue::get</a></div><div class="ttdeci">static UndefValue * get(Type *T)</div><div class="ttdoc">Static factory methods - Return an 'undef' object of the specified type.</div><div class="ttdef"><b>Definition:</b> <a href="Constants_8cpp_source.html#l01786">Constants.cpp:1786</a></div></div>
<div class="ttc" id="aclassllvm_1_1DomTreeUpdater_html"><div class="ttname"><a href="classllvm_1_1DomTreeUpdater.html">llvm::DomTreeUpdater</a></div><div class="ttdef"><b>Definition:</b> <a href="DomTreeUpdater_8h_source.html#l00028">DomTreeUpdater.h:28</a></div></div>
<div class="ttc" id="aclassllvm_1_1ConstantInt_html_a969709dd49c28865a482d8b870f87c46"><div class="ttname"><a href="classllvm_1_1ConstantInt.html#a969709dd49c28865a482d8b870f87c46">llvm::ConstantInt::get</a></div><div class="ttdeci">static Constant * get(Type *Ty, uint64_t V, bool IsSigned=false)</div><div class="ttdoc">If Ty is a vector type, return a Constant with a splat of the given value.</div><div class="ttdef"><b>Definition:</b> <a href="Constants_8cpp_source.html#l00901">Constants.cpp:901</a></div></div>
<div class="ttc" id="aLoopUtils_8h_html"><div class="ttname"><a href="LoopUtils_8h.html">LoopUtils.h</a></div></div>
<div class="ttc" id="aclassllvm_1_1LegacyDivergenceAnalysis_html"><div class="ttname"><a href="classllvm_1_1LegacyDivergenceAnalysis.html">llvm::LegacyDivergenceAnalysis</a></div><div class="ttdef"><b>Definition:</b> <a href="LegacyDivergenceAnalysis_8h_source.html#l00031">LegacyDivergenceAnalysis.h:31</a></div></div>
<div class="ttc" id="astructllvm_1_1CodeMetrics_html_a7e174506b52ad46ea1f746a7f727d999"><div class="ttname"><a href="structllvm_1_1CodeMetrics.html#a7e174506b52ad46ea1f746a7f727d999">llvm::CodeMetrics::collectEphemeralValues</a></div><div class="ttdeci">static void collectEphemeralValues(const Loop *L, AssumptionCache *AC, SmallPtrSetImpl&lt; const Value * &gt; &amp;EphValues)</div><div class="ttdoc">Collect a loop's ephemeral values (those used only by an assume or similar intrinsics in the loop).</div><div class="ttdef"><b>Definition:</b> <a href="CodeMetrics_8cpp_source.html#l00070">CodeMetrics.cpp:70</a></div></div>
<div class="ttc" id="aclassllvm_1_1LPPassManager_html"><div class="ttname"><a href="classllvm_1_1LPPassManager.html">llvm::LPPassManager</a></div><div class="ttdef"><b>Definition:</b> <a href="LoopPass_8h_source.html#l00075">LoopPass.h:75</a></div></div>
<div class="ttc" id="aSmallPtrSet_8h_html"><div class="ttname"><a href="SmallPtrSet_8h.html">SmallPtrSet.h</a></div></div>
<div class="ttc" id="aclassllvm_1_1Instruction_html_a944c50b4f5440b3914f5e2a157bb0fd3"><div class="ttname"><a href="classllvm_1_1Instruction.html#a944c50b4f5440b3914f5e2a157bb0fd3">llvm::Instruction::getSuccessor</a></div><div class="ttdeci">BasicBlock * getSuccessor(unsigned Idx) const</div><div class="ttdoc">Return the specified successor. This instruction must be a terminator.</div><div class="ttdef"><b>Definition:</b> <a href="IR_2Instruction_8cpp_source.html#l00777">Instruction.cpp:777</a></div></div>
<div class="ttc" id="anamespacellvm_html_a9d391b6acc6d90c9b8a8442324b1aa6f"><div class="ttname"><a href="namespacellvm.html#a9d391b6acc6d90c9b8a8442324b1aa6f">llvm::SplitBlockPredecessors</a></div><div class="ttdeci">BasicBlock * SplitBlockPredecessors(BasicBlock *BB, ArrayRef&lt; BasicBlock * &gt; Preds, const char *Suffix, DominatorTree *DT, LoopInfo *LI=nullptr, MemorySSAUpdater *MSSAU=nullptr, bool PreserveLCSSA=false)</div><div class="ttdoc">This method introduces at least one new basic block into the function and moves some of the predecess...</div><div class="ttdef"><b>Definition:</b> <a href="BasicBlockUtils_8cpp_source.html#l01148">BasicBlockUtils.cpp:1148</a></div></div>
<div class="ttc" id="aCSEInfo_8cpp_html_a75f8a8519c2c9b30e7c06dc5e256fffa"><div class="ttname"><a href="CSEInfo_8cpp.html#a75f8a8519c2c9b30e7c06dc5e256fffa">Info</a></div><div class="ttdeci">Analysis containing CSE Info</div><div class="ttdef"><b>Definition:</b> <a href="CSEInfo_8cpp_source.html#l00027">CSEInfo.cpp:27</a></div></div>
<div class="ttc" id="aclassllvm_1_1BasicBlock_html_afc70e919c88c86159cc94cea29b6c210"><div class="ttname"><a href="classllvm_1_1BasicBlock.html#afc70e919c88c86159cc94cea29b6c210">llvm::BasicBlock::getModule</a></div><div class="ttdeci">const Module * getModule() const</div><div class="ttdoc">Return the module owning the function this basic block belongs to, or nullptr if the function does no...</div><div class="ttdef"><b>Definition:</b> <a href="BasicBlock_8cpp_source.html#l00144">BasicBlock.cpp:144</a></div></div>
<div class="ttc" id="aclassllvm_1_1Instruction_html_a0fd53f63d349dc8a7c5fc0cdd7a94c8d"><div class="ttname"><a href="classllvm_1_1Instruction.html#a0fd53f63d349dc8a7c5fc0cdd7a94c8d">llvm::Instruction::removeFromParent</a></div><div class="ttdeci">void removeFromParent()</div><div class="ttdoc">This method unlinks 'this' from the containing basic block, but does not delete it.</div><div class="ttdef"><b>Definition:</b> <a href="IR_2Instruction_8cpp_source.html#l00074">Instruction.cpp:74</a></div></div>
<div class="ttc" id="aLoopUnswitch_8cpp_html_a2dabdd15f3a22a346eb20585b4c5bf31"><div class="ttname"><a href="LoopUnswitch_8cpp.html#a2dabdd15f3a22a346eb20585b4c5bf31">unswitch</a></div><div class="ttdeci">loop unswitch</div><div class="ttdef"><b>Definition:</b> <a href="LoopUnswitch_8cpp_source.html#l00409">LoopUnswitch.cpp:409</a></div></div>
<div class="ttc" id="anamespacellvm_html_a77724415203930efd07d7098cb1e437da9a24bd8dba1bef2753bc3f087435ae7f"><div class="ttname"><a href="namespacellvm.html#a77724415203930efd07d7098cb1e437da9a24bd8dba1bef2753bc3f087435ae7f">llvm::RF_NoModuleLevelChanges</a></div><div class="ttdeci">@ RF_NoModuleLevelChanges</div><div class="ttdoc">If this flag is set, the remapper knows that only local values within a function (such as an instruct...</div><div class="ttdef"><b>Definition:</b> <a href="ValueMapper_8h_source.html#l00072">ValueMapper.h:72</a></div></div>
<div class="ttc" id="aLoopIterator_8h_html"><div class="ttname"><a href="LoopIterator_8h.html">LoopIterator.h</a></div></div>
<div class="ttc" id="anamespacellvm_html_aa82bb12b2879425012b3742487e10964"><div class="ttname"><a href="namespacellvm.html#aa82bb12b2879425012b3742487e10964">llvm::erase_value</a></div><div class="ttdeci">void erase_value(Container &amp;C, ValueType V)</div><div class="ttdoc">Wrapper function to remove a value from a container:</div><div class="ttdef"><b>Definition:</b> <a href="STLExtras_8h_source.html#l01723">STLExtras.h:1723</a></div></div>
<div class="ttc" id="aType_8h_html"><div class="ttname"><a href="Type_8h.html">Type.h</a></div></div>
<div class="ttc" id="aLoopUnswitch_8cpp_html_a052e6e0563b0e12cd740eb375184c9e5"><div class="ttname"><a href="LoopUnswitch_8cpp.html#a052e6e0563b0e12cd740eb375184c9e5">equalityPropUnSafe</a></div><div class="ttdeci">static bool equalityPropUnSafe(Value &amp;LoopCond)</div><div class="ttdoc">FIXME: Remove this workaround when freeze related patches are done.</div><div class="ttdef"><b>Definition:</b> <a href="LoopUnswitch_8cpp_source.html#l00608">LoopUnswitch.cpp:608</a></div></div>
<div class="ttc" id="aPassSupport_8h_html_a74ce8276b89067e806f67c45a6d92575"><div class="ttname"><a href="PassSupport_8h.html#a74ce8276b89067e806f67c45a6d92575">INITIALIZE_PASS_END</a></div><div class="ttdeci">#define INITIALIZE_PASS_END(passName, arg, name, cfg, analysis)</div><div class="ttdef"><b>Definition:</b> <a href="PassSupport_8h_source.html#l00058">PassSupport.h:58</a></div></div>
<div class="ttc" id="aLoopInfo_8h_html"><div class="ttname"><a href="LoopInfo_8h.html">LoopInfo.h</a></div></div>
<div class="ttc" id="aclassllvm_1_1BranchInst_html_aac456a62894c9f0f8e9f06373bbf40f0"><div class="ttname"><a href="classllvm_1_1BranchInst.html#aac456a62894c9f0f8e9f06373bbf40f0">llvm::BranchInst::getCondition</a></div><div class="ttdeci">Value * getCondition() const</div><div class="ttdef"><b>Definition:</b> <a href="Instructions_8h_source.html#l03113">Instructions.h:3113</a></div></div>
<div class="ttc" id="aclassllvm_1_1LoopBase_html_af9096a02aa326d9a55f4d16ba9f9d243"><div class="ttname"><a href="classllvm_1_1LoopBase.html#af9096a02aa326d9a55f4d16ba9f9d243">llvm::LoopBase::block_begin</a></div><div class="ttdeci">block_iterator block_begin() const</div><div class="ttdef"><b>Definition:</b> <a href="LoopInfo_8h_source.html#l00176">LoopInfo.h:176</a></div></div>
<div class="ttc" id="aclassllvm_1_1Type_html_ac6d28a9b11139182134a9618028a0d07"><div class="ttname"><a href="classllvm_1_1Type.html#ac6d28a9b11139182134a9618028a0d07">llvm::Type::isIntegerTy</a></div><div class="ttdeci">bool isIntegerTy() const</div><div class="ttdoc">True if this is an instance of IntegerType.</div><div class="ttdef"><b>Definition:</b> <a href="Type_8h_source.html#l00201">Type.h:201</a></div></div>
<div class="ttc" id="anamespacellvm_html_a6befe133f42d6a8e07ba98372d7f9c60"><div class="ttname"><a href="namespacellvm.html#a6befe133f42d6a8e07ba98372d7f9c60">llvm::CloneBasicBlock</a></div><div class="ttdeci">BasicBlock * CloneBasicBlock(const BasicBlock *BB, ValueToValueMapTy &amp;VMap, const Twine &amp;NameSuffix=&quot;&quot;, Function *F=nullptr, ClonedCodeInfo *CodeInfo=nullptr, DebugInfoFinder *DIFinder=nullptr)</div><div class="ttdoc">Return a copy of the specified basic block, but without embedding the block into a particular functio...</div><div class="ttdef"><b>Definition:</b> <a href="CloneFunction_8cpp_source.html#l00043">CloneFunction.cpp:43</a></div></div>
<div class="ttc" id="aBasicBlock_8h_html"><div class="ttname"><a href="BasicBlock_8h.html">BasicBlock.h</a></div></div>
<div class="ttc" id="aclassllvm_1_1cl_1_1opt_html"><div class="ttname"><a href="classllvm_1_1cl_1_1opt.html">llvm::cl::opt</a></div><div class="ttdef"><b>Definition:</b> <a href="CommandLine_8h_source.html#l01422">CommandLine.h:1424</a></div></div>
<div class="ttc" id="aclassllvm_1_1LoopBase_html_a77e238ea0765cf983b5413de5c0a84d5"><div class="ttname"><a href="classllvm_1_1LoopBase.html#a77e238ea0765cf983b5413de5c0a84d5">llvm::LoopBase&lt; BasicBlock, Loop &gt;::block_iterator</a></div><div class="ttdeci">ArrayRef&lt; BasicBlock * &gt;::const_iterator block_iterator</div><div class="ttdef"><b>Definition:</b> <a href="LoopInfo_8h_source.html#l00175">LoopInfo.h:175</a></div></div>
<div class="ttc" id="aclassllvm_1_1Constant_html"><div class="ttname"><a href="classllvm_1_1Constant.html">llvm::Constant</a></div><div class="ttdoc">This is an important base class in LLVM.</div><div class="ttdef"><b>Definition:</b> <a href="Constant_8h_source.html#l00041">Constant.h:41</a></div></div>
<div class="ttc" id="aclassllvm_1_1Instruction_html_ae6b978645b8ac72d1a35e1298ffdd4f0"><div class="ttname"><a href="classllvm_1_1Instruction.html#ae6b978645b8ac72d1a35e1298ffdd4f0">llvm::Instruction::eraseFromParent</a></div><div class="ttdeci">SymbolTableList&lt; Instruction &gt;::iterator eraseFromParent()</div><div class="ttdoc">This method unlinks 'this' from the containing basic block and deletes it.</div><div class="ttdef"><b>Definition:</b> <a href="IR_2Instruction_8cpp_source.html#l00078">Instruction.cpp:78</a></div></div>
<div class="ttc" id="aclassllvm_1_1ICmpInst_html"><div class="ttname"><a href="classllvm_1_1ICmpInst.html">llvm::ICmpInst</a></div><div class="ttdoc">This instruction compares its operands according to the predicate given to the constructor.</div><div class="ttdef"><b>Definition:</b> <a href="Instructions_8h_source.html#l01203">Instructions.h:1203</a></div></div>
<div class="ttc" id="aclassllvm_1_1LoopPass_html"><div class="ttname"><a href="classllvm_1_1LoopPass.html">llvm::LoopPass</a></div><div class="ttdef"><b>Definition:</b> <a href="LoopPass_8h_source.html#l00027">LoopPass.h:27</a></div></div>
<div class="ttc" id="aclassllvm_1_1TargetTransformInfoWrapperPass_html"><div class="ttname"><a href="classllvm_1_1TargetTransformInfoWrapperPass.html">llvm::TargetTransformInfoWrapperPass</a></div><div class="ttdoc">Wrapper pass for TargetTransformInfo.</div><div class="ttdef"><b>Definition:</b> <a href="TargetTransformInfo_8h_source.html#l02365">TargetTransformInfo.h:2365</a></div></div>
<div class="ttc" id="aclassllvm_1_1MemorySSAUpdater_html"><div class="ttname"><a href="classllvm_1_1MemorySSAUpdater.html">llvm::MemorySSAUpdater</a></div><div class="ttdef"><b>Definition:</b> <a href="MemorySSAUpdater_8h_source.html#l00056">MemorySSAUpdater.h:56</a></div></div>
<div class="ttc" id="aclassllvm_1_1LoopBase_html_ae069a12f0a2d2deb69e30b439a91190e"><div class="ttname"><a href="classllvm_1_1LoopBase.html#ae069a12f0a2d2deb69e30b439a91190e">llvm::LoopBase::getUniqueExitBlocks</a></div><div class="ttdeci">void getUniqueExitBlocks(SmallVectorImpl&lt; BlockT * &gt; &amp;ExitBlocks) const</div><div class="ttdoc">Return all unique successor blocks of this loop.</div><div class="ttdef"><b>Definition:</b> <a href="LoopInfoImpl_8h_source.html#l00122">LoopInfoImpl.h:122</a></div></div>
<div class="ttc" id="aSVEIntrinsicOpts_8cpp_html_a2bb87eb1bcbc74783a83ae945eb8fa36"><div class="ttname"><a href="SVEIntrinsicOpts_8cpp.html#a2bb87eb1bcbc74783a83ae945eb8fa36">INITIALIZE_PASS_DEPENDENCY</a></div><div class="ttdeci">INITIALIZE_PASS_DEPENDENCY(DominatorTreeWrapperPass)</div></div>
<div class="ttc" id="aclassllvm_1_1PHINode_html_a089cccb6f231efee72abc76d0f9c695f"><div class="ttname"><a href="classllvm_1_1PHINode.html#a089cccb6f231efee72abc76d0f9c695f">llvm::PHINode::addIncoming</a></div><div class="ttdeci">void addIncoming(Value *V, BasicBlock *BB)</div><div class="ttdoc">Add an incoming value to the end of the PHI list.</div><div class="ttdef"><b>Definition:</b> <a href="Instructions_8h_source.html#l02747">Instructions.h:2747</a></div></div>
<div class="ttc" id="aclassllvm_1_1LLVMContext_html"><div class="ttname"><a href="classllvm_1_1LLVMContext.html">llvm::LLVMContext</a></div><div class="ttdoc">This is an important class for using LLVM in a threaded context.</div><div class="ttdef"><b>Definition:</b> <a href="LLVMContext_8h_source.html#l00068">LLVMContext.h:68</a></div></div>
<div class="ttc" id="anamespacellvm_1_1numbers_html_a92f4283d4e0e2ea1776894b3ae93640f"><div class="ttname"><a href="namespacellvm_1_1numbers.html#a92f4283d4e0e2ea1776894b3ae93640f">llvm::numbers::e</a></div><div class="ttdeci">constexpr double e</div><div class="ttdef"><b>Definition:</b> <a href="MathExtras_8h_source.html#l00057">MathExtras.h:57</a></div></div>
<div class="ttc" id="aclassllvm_1_1BranchInst_html_a38df51256d4b415b6a817b5e1c6d4d36"><div class="ttname"><a href="classllvm_1_1BranchInst.html#a38df51256d4b415b6a817b5e1c6d4d36">llvm::BranchInst::Create</a></div><div class="ttdeci">static BranchInst * Create(BasicBlock *IfTrue, Instruction *InsertBefore=nullptr)</div><div class="ttdef"><b>Definition:</b> <a href="Instructions_8h_source.html#l03088">Instructions.h:3088</a></div></div>
<div class="ttc" id="aclassllvm_1_1DenseMap_html"><div class="ttname"><a href="classllvm_1_1DenseMap.html">llvm::DenseMap</a></div><div class="ttdef"><b>Definition:</b> <a href="DenseMap_8h_source.html#l00714">DenseMap.h:715</a></div></div>
<div class="ttc" id="aclassllvm_1_1MemorySSA_html"><div class="ttname"><a href="classllvm_1_1MemorySSA.html">llvm::MemorySSA</a></div><div class="ttdoc">Encapsulates MemorySSA, including all data associated with memory accesses.</div><div class="ttdef"><b>Definition:</b> <a href="MemorySSA_8h_source.html#l00708">MemorySSA.h:708</a></div></div>
<div class="ttc" id="aclassllvm_1_1LoopInfoBase_html_a7a7c8e0e4f836c13c015b62e18f386bd"><div class="ttname"><a href="classllvm_1_1LoopInfoBase.html#a7a7c8e0e4f836c13c015b62e18f386bd">llvm::LoopInfoBase::getLoopFor</a></div><div class="ttdeci">LoopT * getLoopFor(const BlockT *BB) const</div><div class="ttdoc">Return the inner most loop that BB lives in.</div><div class="ttdef"><b>Definition:</b> <a href="LoopInfo_8h_source.html#l00967">LoopInfo.h:967</a></div></div>
<div class="ttc" id="aMD5_8cpp_html_ac0eafdc9ee161b71e7af98af736952fd"><div class="ttname"><a href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a></div><div class="ttdeci">#define I(x, y, z)</div><div class="ttdef"><b>Definition:</b> <a href="MD5_8cpp_source.html#l00059">MD5.cpp:59</a></div></div>
<div class="ttc" id="aclassllvm_1_1MemorySSA_html_a4ece07ee1030856099726901d0eef81b"><div class="ttname"><a href="classllvm_1_1MemorySSA.html#a4ece07ee1030856099726901d0eef81b">llvm::MemorySSA::getMemoryAccess</a></div><div class="ttdeci">MemoryUseOrDef * getMemoryAccess(const Instruction *I) const</div><div class="ttdoc">Given a memory Mod/Ref'ing instruction, get the MemorySSA access associated with it.</div><div class="ttdef"><b>Definition:</b> <a href="MemorySSA_8h_source.html#l00725">MemorySSA.h:725</a></div></div>
<div class="ttc" id="aCloning_8h_html"><div class="ttname"><a href="Cloning_8h.html">Cloning.h</a></div></div>
<div class="ttc" id="anamespacellvm_html_a3720211f6e6389ab53734b989bfb6fce"><div class="ttname"><a href="namespacellvm.html#a3720211f6e6389ab53734b989bfb6fce">llvm::succ_begin</a></div><div class="ttdeci">Interval::succ_iterator succ_begin(Interval *I)</div><div class="ttdoc">succ_begin/succ_end - define methods so that Intervals may be used just like BasicBlocks can with the...</div><div class="ttdef"><b>Definition:</b> <a href="Interval_8h_source.html#l00099">Interval.h:99</a></div></div>
<div class="ttc" id="anamespacellvm_1_1cl_html_a10a041239ae1870cfcc064bfaa79fb65"><div class="ttname"><a href="namespacellvm_1_1cl.html#a10a041239ae1870cfcc064bfaa79fb65">llvm::cl::init</a></div><div class="ttdeci">initializer&lt; Ty &gt; init(const Ty &amp;Val)</div><div class="ttdef"><b>Definition:</b> <a href="CommandLine_8h_source.html#l00443">CommandLine.h:443</a></div></div>
<div class="ttc" id="aMachineTraceMetrics_8cpp_html_a6f3004139ef53bc2cf206b8864976928"><div class="ttname"><a href="MachineTraceMetrics_8cpp.html#a6f3004139ef53bc2cf206b8864976928">Metrics</a></div><div class="ttdeci">Machine Trace Metrics</div><div class="ttdef"><b>Definition:</b> <a href="MachineTraceMetrics_8cpp_source.html#l00053">MachineTraceMetrics.cpp:53</a></div></div>
<div class="ttc" id="aclassllvm_1_1LoopBase_html_ac3280e7f76f955403fe17eacf126b90d"><div class="ttname"><a href="classllvm_1_1LoopBase.html#ac3280e7f76f955403fe17eacf126b90d">llvm::LoopBase::getLoopPreheader</a></div><div class="ttdeci">BlockT * getLoopPreheader() const</div><div class="ttdoc">If there is a preheader for this loop, return it.</div><div class="ttdef"><b>Definition:</b> <a href="LoopInfoImpl_8h_source.html#l00167">LoopInfoImpl.h:167</a></div></div>
<div class="ttc" id="aclassllvm_1_1ICmpInst_html_abe8988eef2e6fc2baba032cb22afedd7"><div class="ttname"><a href="classllvm_1_1ICmpInst.html#abe8988eef2e6fc2baba032cb22afedd7">llvm::ICmpInst::isEquality</a></div><div class="ttdeci">static bool isEquality(Predicate P)</div><div class="ttdoc">Return true if this predicate is either EQ or NE.</div><div class="ttdef"><b>Definition:</b> <a href="Instructions_8h_source.html#l01292">Instructions.h:1292</a></div></div>
<div class="ttc" id="aclassllvm_1_1MDString_html_affbb7e2e9ad8d18114816f2443d672b9"><div class="ttname"><a href="classllvm_1_1MDString.html#affbb7e2e9ad8d18114816f2443d672b9">llvm::MDString::get</a></div><div class="ttdeci">static MDString * get(LLVMContext &amp;Context, StringRef Str)</div><div class="ttdef"><b>Definition:</b> <a href="Metadata_8cpp_source.html#l00473">Metadata.cpp:473</a></div></div>
<div class="ttc" id="aclassllvm_1_1LoopBase_html_a1230fd674d2609b96527fe65eaf40b1b"><div class="ttname"><a href="classllvm_1_1LoopBase.html#a1230fd674d2609b96527fe65eaf40b1b">llvm::LoopBase::getLoopLatch</a></div><div class="ttdeci">BlockT * getLoopLatch() const</div><div class="ttdoc">If there is a single latch block for this loop, return it.</div><div class="ttdef"><b>Definition:</b> <a href="LoopInfoImpl_8h_source.html#l00216">LoopInfoImpl.h:216</a></div></div>
<div class="ttc" id="aclassllvm_1_1DenseMapBase_html_a0c047f127ed4380a6f383d70bec4eb94"><div class="ttname"><a href="classllvm_1_1DenseMapBase.html#a0c047f127ed4380a6f383d70bec4eb94">llvm::DenseMapBase&lt; DenseMap&lt; KeyT, ValueT, DenseMapInfo&lt; KeyT &gt;, llvm::detail::DenseMapPair&lt; KeyT, ValueT &gt; &gt;, KeyT, ValueT, DenseMapInfo&lt; KeyT &gt;, llvm::detail::DenseMapPair&lt; KeyT, ValueT &gt; &gt;::find</a></div><div class="ttdeci">iterator find(const_arg_type_t&lt; KeyT &gt; Val)</div><div class="ttdef"><b>Definition:</b> <a href="DenseMap_8h_source.html#l00150">DenseMap.h:150</a></div></div>
<div class="ttc" id="aclassllvm_1_1LoopBase_html_ae7ebc88c9b32b51b749bd5bbcfaa5fb8"><div class="ttname"><a href="classllvm_1_1LoopBase.html#ae7ebc88c9b32b51b749bd5bbcfaa5fb8">llvm::LoopBase::hasDedicatedExits</a></div><div class="ttdeci">bool hasDedicatedExits() const</div><div class="ttdoc">Return true if no exit block for the loop has a predecessor that is outside the loop.</div><div class="ttdef"><b>Definition:</b> <a href="LoopInfoImpl_8h_source.html#l00092">LoopInfoImpl.h:92</a></div></div>
<div class="ttc" id="aIRBuilder_8h_html"><div class="ttname"><a href="IRBuilder_8h.html">IRBuilder.h</a></div></div>
<div class="ttc" id="aSILowerControlFlow_8cpp_html_a4868c5d81c5ccc98c47aeab6244346a0"><div class="ttname"><a href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a></div><div class="ttdeci">assert(ImpDefSCC.getReg()==AMDGPU::SCC &amp;&amp;ImpDefSCC.isDef())</div></div>
<div class="ttc" id="anamespacellvm_html_a2a32b2fa5923a14be683607b50e6bf2b"><div class="ttname"><a href="namespacellvm.html#a2a32b2fa5923a14be683607b50e6bf2b">llvm::initializeLoopUnswitchPass</a></div><div class="ttdeci">void initializeLoopUnswitchPass(PassRegistry &amp;)</div></div>
<div class="ttc" id="astructllvm_1_1ValueMapIterator_1_1ValueTypeProxy_html_a5bcf5b029fa9492c00d2329def9b5137"><div class="ttname"><a href="structllvm_1_1ValueMapIterator_1_1ValueTypeProxy.html#a5bcf5b029fa9492c00d2329def9b5137">llvm::ValueMapIterator::ValueTypeProxy::second</a></div><div class="ttdeci">ValueT &amp; second</div><div class="ttdef"><b>Definition:</b> <a href="ValueMap_8h_source.html#l00346">ValueMap.h:346</a></div></div>
<div class="ttc" id="anamespacestd_html_ab8424022895aee3e366fb9a32f2883cb"><div class="ttname"><a href="namespacestd.html#ab8424022895aee3e366fb9a32f2883cb">std::swap</a></div><div class="ttdeci">void swap(llvm::BitVector &amp;LHS, llvm::BitVector &amp;RHS)</div><div class="ttdoc">Implement std::swap in terms of BitVector swap.</div><div class="ttdef"><b>Definition:</b> <a href="BitVector_8h_source.html#l00840">BitVector.h:840</a></div></div>
<div class="ttc" id="aclassllvm_1_1PHINode_html_a506bcfb6f92a2184453e1fa9655f62a1"><div class="ttname"><a href="classllvm_1_1PHINode.html#a506bcfb6f92a2184453e1fa9655f62a1">llvm::PHINode::setIncomingValueForBlock</a></div><div class="ttdeci">void setIncomingValueForBlock(const BasicBlock *BB, Value *V)</div><div class="ttdoc">Set every incoming value(s) for block BB to V.</div><div class="ttdef"><b>Definition:</b> <a href="Instructions_8h_source.html#l02789">Instructions.h:2789</a></div></div>
<div class="ttc" id="aPassBuilderBindings_8cpp_html_a0f79dad1efc582555a443cc11a8fa401"><div class="ttname"><a href="PassBuilderBindings_8cpp.html#a0f79dad1efc582555a443cc11a8fa401">SI</a></div><div class="ttdeci">StandardInstrumentations SI(Debug, VerifyEach)</div></div>
<div class="ttc" id="aclassllvm_1_1User_html_a1f0b9358936e3e00c42a460abbfb2868"><div class="ttname"><a href="classllvm_1_1User.html#a1f0b9358936e3e00c42a460abbfb2868">llvm::User::replaceUsesOfWith</a></div><div class="ttdeci">void replaceUsesOfWith(Value *From, Value *To)</div><div class="ttdoc">Replace uses of one Value with another.</div><div class="ttdef"><b>Definition:</b> <a href="User_8cpp_source.html#l00021">User.cpp:21</a></div></div>
<div class="ttc" id="aLoopUnswitch_8cpp_html_a8d46c5e008b296b0924284d8fa6dfa00"><div class="ttname"><a href="LoopUnswitch_8cpp.html#a8d46c5e008b296b0924284d8fa6dfa00">isTrivialLoopExitBlockHelper</a></div><div class="ttdeci">static bool isTrivialLoopExitBlockHelper(Loop *L, BasicBlock *BB, BasicBlock *&amp;ExitBB, std::set&lt; BasicBlock * &gt; &amp;Visited)</div><div class="ttdoc">Check to see if all paths from BB exit the loop with no side effects (including infinite loops).</div><div class="ttdef"><b>Definition:</b> <a href="LoopUnswitch_8cpp_source.html#l00913">LoopUnswitch.cpp:913</a></div></div>
<div class="ttc" id="aLoopUnswitch_8cpp_html_a488610869ffea06bc4eefcd4592fca9fa391236be716257cd22a3b77f48baba8b"><div class="ttname"><a href="LoopUnswitch_8cpp.html#a488610869ffea06bc4eefcd4592fca9fa391236be716257cd22a3b77f48baba8b">OC_OpChainOr</a></div><div class="ttdeci">@ OC_OpChainOr</div><div class="ttdoc">There are only ORs.</div><div class="ttdef"><b>Definition:</b> <a href="LoopUnswitch_8cpp_source.html#l00419">LoopUnswitch.cpp:419</a></div></div>
<div class="ttc" id="aclassllvm_1_1SelectInst_html"><div class="ttname"><a href="classllvm_1_1SelectInst.html">llvm::SelectInst</a></div><div class="ttdoc">This class represents the LLVM 'select' instruction.</div><div class="ttdef"><b>Definition:</b> <a href="Instructions_8h_source.html#l01740">Instructions.h:1740</a></div></div>
<div class="ttc" id="aclassllvm_1_1MemorySSA_html_a1b675075f5fd5a025edeca069612042e"><div class="ttname"><a href="classllvm_1_1MemorySSA.html#a1b675075f5fd5a025edeca069612042e">llvm::MemorySSA::verifyMemorySSA</a></div><div class="ttdeci">void verifyMemorySSA() const</div><div class="ttdoc">Verify that MemorySSA is self consistent (IE definitions dominate all uses, uses appear in the right ...</div><div class="ttdef"><b>Definition:</b> <a href="MemorySSA_8cpp_source.html#l01867">MemorySSA.cpp:1867</a></div></div>
<div class="ttc" id="aclassllvm_1_1MDNode_html"><div class="ttname"><a href="classllvm_1_1MDNode.html">llvm::MDNode</a></div><div class="ttdoc">Metadata node.</div><div class="ttdef"><b>Definition:</b> <a href="Metadata_8h_source.html#l00897">Metadata.h:897</a></div></div>
<div class="ttc" id="aLoopPassManager_8h_html"><div class="ttname"><a href="LoopPassManager_8h.html">LoopPassManager.h</a></div><div class="ttdoc">This header provides classes for managing a pipeline of passes over loops in LLVM IR.</div></div>
<div class="ttc" id="aclassllvm_1_1SimpleLoopSafetyInfo_html_a262c2df9639d3f71b8d2a8158b819809"><div class="ttname"><a href="classllvm_1_1SimpleLoopSafetyInfo.html#a262c2df9639d3f71b8d2a8158b819809">llvm::SimpleLoopSafetyInfo::computeLoopSafetyInfo</a></div><div class="ttdeci">void computeLoopSafetyInfo(const Loop *CurLoop) override</div><div class="ttdoc">Computes safety information for a loop checks loop body &amp; header for the possibility of may throw exc...</div><div class="ttdef"><b>Definition:</b> <a href="MustExecute_8cpp_source.html#l00054">MustExecute.cpp:54</a></div></div>
<div class="ttc" id="aLoopUnswitch_8cpp_html_a4477a1aca6efad3d0fbcc4e7224fd2c3"><div class="ttname"><a href="LoopUnswitch_8cpp.html#a4477a1aca6efad3d0fbcc4e7224fd2c3">MSSAThreshold</a></div><div class="ttdeci">static cl::opt&lt; unsigned &gt; MSSAThreshold(&quot;loop-unswitch-memoryssa-threshold&quot;, cl::desc(&quot;Max number of memory uses to explore during &quot; &quot;partial unswitching analysis&quot;), cl::init(100), cl::Hidden)</div></div>
<div class="ttc" id="aclassllvm_1_1BranchInst_html_ad56f6a9b5cd05940017c4544df48bc30"><div class="ttname"><a href="classllvm_1_1BranchInst.html#ad56f6a9b5cd05940017c4544df48bc30">llvm::BranchInst::isUnconditional</a></div><div class="ttdeci">bool isUnconditional() const</div><div class="ttdef"><b>Definition:</b> <a href="Instructions_8h_source.html#l03110">Instructions.h:3110</a></div></div>
<div class="ttc" id="aLoopUnswitch_8cpp_html_a488610869ffea06bc4eefcd4592fca9fafbf28b984bde89995c3b39b4e331449b"><div class="ttname"><a href="LoopUnswitch_8cpp.html#a488610869ffea06bc4eefcd4592fca9fafbf28b984bde89995c3b39b4e331449b">OC_OpChainMixed</a></div><div class="ttdeci">@ OC_OpChainMixed</div><div class="ttdoc">There are ANDs and ORs.</div><div class="ttdef"><b>Definition:</b> <a href="LoopUnswitch_8cpp_source.html#l00422">LoopUnswitch.cpp:421</a></div></div>
<div class="ttc" id="allvm_2Transforms_2Scalar_8h_html"><div class="ttname"><a href="llvm_2Transforms_2Scalar_8h.html">Scalar.h</a></div></div>
<div class="ttc" id="aclassllvm_1_1AssumptionCacheTracker_html"><div class="ttname"><a href="classllvm_1_1AssumptionCacheTracker.html">llvm::AssumptionCacheTracker</a></div><div class="ttdoc">An immutable pass that tracks lazily created AssumptionCache objects.</div><div class="ttdef"><b>Definition:</b> <a href="AssumptionCache_8h_source.html#l00200">AssumptionCache.h:200</a></div></div>
<div class="ttc" id="aclassllvm_1_1ArrayRef_html"><div class="ttname"><a href="classllvm_1_1ArrayRef.html">llvm::ArrayRef</a></div><div class="ttdoc">ArrayRef - Represent a constant reference to an array (0 or more elements consecutively in memory),...</div><div class="ttdef"><b>Definition:</b> <a href="ArrayRef_8h_source.html#l00043">ArrayRef.h:43</a></div></div>
<div class="ttc" id="anamespacellvm_html_a627b2f86ac433d829482d5a5a0f50668"><div class="ttname"><a href="namespacellvm.html#a627b2f86ac433d829482d5a5a0f50668">llvm::isInstructionTriviallyDead</a></div><div class="ttdeci">bool isInstructionTriviallyDead(Instruction *I, const TargetLibraryInfo *TLI=nullptr)</div><div class="ttdoc">Return true if the result produced by the instruction is not used, and the instruction has no side ef...</div><div class="ttdef"><b>Definition:</b> <a href="Local_8cpp_source.html#l00398">Local.cpp:398</a></div></div>
<div class="ttc" id="aclassllvm_1_1LoopInfo_html"><div class="ttname"><a href="classllvm_1_1LoopInfo.html">llvm::LoopInfo</a></div><div class="ttdef"><b>Definition:</b> <a href="LoopInfo_8h_source.html#l01083">LoopInfo.h:1083</a></div></div>
<div class="ttc" id="aclassllvm_1_1BinaryOperator_html"><div class="ttname"><a href="classllvm_1_1BinaryOperator.html">llvm::BinaryOperator</a></div><div class="ttdef"><b>Definition:</b> <a href="InstrTypes_8h_source.html#l00189">InstrTypes.h:189</a></div></div>
<div class="ttc" id="anamespacellvm_html_a23ddcf4630aa7c7c250a1af5c9e7e20d"><div class="ttname"><a href="namespacellvm.html#a23ddcf4630aa7c7c250a1af5c9e7e20d">llvm::MergeBlockIntoPredecessor</a></div><div class="ttdeci">bool MergeBlockIntoPredecessor(BasicBlock *BB, DomTreeUpdater *DTU=nullptr, LoopInfo *LI=nullptr, MemorySSAUpdater *MSSAU=nullptr, MemoryDependenceResults *MemDep=nullptr, bool PredecessorWithTwoSuccessors=false)</div><div class="ttdoc">Attempts to merge a block into its predecessor, if possible.</div><div class="ttdef"><b>Definition:</b> <a href="BasicBlockUtils_8cpp_source.html#l00173">BasicBlockUtils.cpp:173</a></div></div>
<div class="ttc" id="aBasicBlockSections_8cpp_html_a5fd0741d696f28faf65b33f6c6af8fda"><div class="ttname"><a href="BasicBlockSections_8cpp.html#a5fd0741d696f28faf65b33f6c6af8fda">Cond</a></div><div class="ttdeci">SmallVector&lt; MachineOperand, 4 &gt; Cond</div><div class="ttdef"><b>Definition:</b> <a href="BasicBlockSections_8cpp_source.html#l00167">BasicBlockSections.cpp:167</a></div></div>
<div class="ttc" id="aclassllvm_1_1Loop_html_af32b39e148b070e04e18fccbed19cded"><div class="ttname"><a href="classllvm_1_1Loop.html#af32b39e148b070e04e18fccbed19cded">llvm::Loop::makeLoopInvariant</a></div><div class="ttdeci">bool makeLoopInvariant(Value *V, bool &amp;Changed, Instruction *InsertPt=nullptr, MemorySSAUpdater *MSSAU=nullptr) const</div><div class="ttdoc">If the given value is an instruction inside of the loop and it can be hoisted, do so to make it trivi...</div><div class="ttdef"><b>Definition:</b> <a href="LoopInfo_8cpp_source.html#l00074">LoopInfo.cpp:74</a></div></div>
<div class="ttc" id="aclassllvm_1_1AssumptionCache_html"><div class="ttname"><a href="classllvm_1_1AssumptionCache.html">llvm::AssumptionCache</a></div><div class="ttdoc">A cache of @llvm.assume calls within a function.</div><div class="ttdef"><b>Definition:</b> <a href="AssumptionCache_8h_source.html#l00041">AssumptionCache.h:41</a></div></div>
<div class="ttc" id="aLoopPass_8h_html"><div class="ttname"><a href="LoopPass_8h.html">LoopPass.h</a></div></div>
<div class="ttc" id="aclassllvm_1_1Value_html_a6393a2d4fe7e10b28a0dcc35f881567b"><div class="ttname"><a href="classllvm_1_1Value.html#a6393a2d4fe7e10b28a0dcc35f881567b">llvm::Value::getType</a></div><div class="ttdeci">Type * getType() const</div><div class="ttdoc">All values are typed, get the type of this value.</div><div class="ttdef"><b>Definition:</b> <a href="Value_8h_source.html#l00256">Value.h:256</a></div></div>
<div class="ttc" id="aclassllvm_1_1AnalysisUsage_html_a884f90190bca4bd354f2d5c91c264028"><div class="ttname"><a href="classllvm_1_1AnalysisUsage.html#a884f90190bca4bd354f2d5c91c264028">llvm::AnalysisUsage::addPreserved</a></div><div class="ttdeci">AnalysisUsage &amp; addPreserved()</div><div class="ttdoc">Add the specified Pass class to the set of analyses preserved by this pass.</div><div class="ttdef"><b>Definition:</b> <a href="PassAnalysisSupport_8h_source.html#l00098">PassAnalysisSupport.h:98</a></div></div>
<div class="ttc" id="aclassllvm_1_1Value_html_a3ab5fc45117b450e8bb04e564cb6e5f2"><div class="ttname"><a href="classllvm_1_1Value.html#a3ab5fc45117b450e8bb04e564cb6e5f2">llvm::Value::replaceAllUsesWith</a></div><div class="ttdeci">void replaceAllUsesWith(Value *V)</div><div class="ttdoc">Change all uses of this to point to a new Value.</div><div class="ttdef"><b>Definition:</b> <a href="Value_8cpp_source.html#l00520">Value.cpp:520</a></div></div>
<div class="ttc" id="aclassllvm_1_1BasicBlock_html_ace940beeee97c222f836fe0ac70f6cf5"><div class="ttname"><a href="classllvm_1_1BasicBlock.html#ace940beeee97c222f836fe0ac70f6cf5">llvm::BasicBlock::Create</a></div><div class="ttdeci">static BasicBlock * Create(LLVMContext &amp;Context, const Twine &amp;Name=&quot;&quot;, Function *Parent=nullptr, BasicBlock *InsertBefore=nullptr)</div><div class="ttdoc">Creates a new BasicBlock.</div><div class="ttdef"><b>Definition:</b> <a href="BasicBlock_8h_source.html#l00100">BasicBlock.h:100</a></div></div>
<div class="ttc" id="anamespacellvm_html_a39d3d23a084c4544ee5903203db10e8a"><div class="ttname"><a href="namespacellvm.html#a39d3d23a084c4544ee5903203db10e8a">llvm::append_range</a></div><div class="ttdeci">void append_range(Container &amp;C, Range &amp;&amp;R)</div><div class="ttdoc">Wrapper function to append a range to a container.</div><div class="ttdef"><b>Definition:</b> <a href="STLExtras_8h_source.html#l01731">STLExtras.h:1731</a></div></div>
<div class="ttc" id="aclassllvm_1_1Value_html_ab3fc0225d8aaf8434026c3573f961f2c"><div class="ttname"><a href="classllvm_1_1Value.html#ab3fc0225d8aaf8434026c3573f961f2c">llvm::Value::getContext</a></div><div class="ttdeci">LLVMContext &amp; getContext() const</div><div class="ttdoc">All values hold a context through their type.</div><div class="ttdef"><b>Definition:</b> <a href="Value_8cpp_source.html#l00979">Value.cpp:979</a></div></div>
<div class="ttc" id="aclassllvm_1_1ilist__node__impl_html_af719fc783be6589465137d997701a432"><div class="ttname"><a href="classllvm_1_1ilist__node__impl.html#af719fc783be6589465137d997701a432">llvm::ilist_node_impl::getIterator</a></div><div class="ttdeci">self_iterator getIterator()</div><div class="ttdef"><b>Definition:</b> <a href="ilist__node_8h_source.html#l00081">ilist_node.h:81</a></div></div>
<div class="ttc" id="aAArch64SLSHardening_8cpp_html_ad467c4ab9119043f9b7750ab986be61a"><div class="ttname"><a href="AArch64SLSHardening_8cpp.html#ad467c4ab9119043f9b7750ab986be61a">DL</a></div><div class="ttdeci">MachineBasicBlock MachineBasicBlock::iterator DebugLoc DL</div><div class="ttdef"><b>Definition:</b> <a href="AArch64SLSHardening_8cpp_source.html#l00076">AArch64SLSHardening.cpp:76</a></div></div>
<div class="ttc" id="aLoopUnswitch_8cpp_html_a9666818bb4bec9f66119ddb9fb3c2c63"><div class="ttname"><a href="LoopUnswitch_8cpp.html#a9666818bb4bec9f66119ddb9fb3c2c63">findLIVLoopCondition</a></div><div class="ttdeci">static Value * findLIVLoopCondition(Value *Cond, Loop *L, bool &amp;Changed, OperatorChain &amp;ParentChain, DenseMap&lt; Value *, Value * &gt; &amp;Cache, MemorySSAUpdater *MSSAU)</div><div class="ttdoc">Cond is a condition that occurs in L.</div><div class="ttdef"><b>Definition:</b> <a href="LoopUnswitch_8cpp_source.html#l00435">LoopUnswitch.cpp:435</a></div></div>
<div class="ttc" id="aclassllvm_1_1DomTreeUpdater_html_a8bf4c30be33831d7882d6880b8ae433da483c336d7d9fe614a8b5aae1e746e01f"><div class="ttname"><a href="classllvm_1_1DomTreeUpdater.html#a8bf4c30be33831d7882d6880b8ae433da483c336d7d9fe614a8b5aae1e746e01f">llvm::DomTreeUpdater::UpdateStrategy::Eager</a></div><div class="ttdeci">@ Eager</div></div>
<div class="ttc" id="anamespacellvm_html_a3f91ce019424451ab50bf348826fa270"><div class="ttname"><a href="namespacellvm.html#a3f91ce019424451ab50bf348826fa270">llvm::findOptionMDForLoop</a></div><div class="ttdeci">MDNode * findOptionMDForLoop(const Loop *TheLoop, StringRef Name)</div><div class="ttdoc">Find string metadata for a loop.</div><div class="ttdef"><b>Definition:</b> <a href="LoopInfo_8cpp_source.html#l01045">LoopInfo.cpp:1045</a></div></div>
<div class="ttc" id="aLoopUnswitch_8cpp_html_a6479ba91ba69fc3e3965cf288330444a"><div class="ttname"><a href="LoopUnswitch_8cpp.html#a6479ba91ba69fc3e3965cf288330444a">removeFromWorklist</a></div><div class="ttdeci">static void removeFromWorklist(Instruction *I, std::vector&lt; Instruction * &gt; &amp;Worklist)</div><div class="ttdoc">Remove all instances of I from the worklist vector specified.</div><div class="ttdef"><b>Definition:</b> <a href="LoopUnswitch_8cpp_source.html#l01519">LoopUnswitch.cpp:1519</a></div></div>
<div class="ttc" id="aclassllvm_1_1IRBuilderBase_html_a8e9aa4e5a6d9f4480322e154153bec2b"><div class="ttname"><a href="classllvm_1_1IRBuilderBase.html#a8e9aa4e5a6d9f4480322e154153bec2b">llvm::IRBuilderBase::CreateCondBr</a></div><div class="ttdeci">BranchInst * CreateCondBr(Value *Cond, BasicBlock *True, BasicBlock *False, MDNode *BranchWeights=nullptr, MDNode *Unpredictable=nullptr)</div><div class="ttdoc">Create a conditional 'br Cond, TrueDest, FalseDest' instruction.</div><div class="ttdef"><b>Definition:</b> <a href="IRBuilder_8h_source.html#l00991">IRBuilder.h:991</a></div></div>
<div class="ttc" id="aclassllvm_1_1Value_html_adb5c319f5905c1d3ca9eb5df546388c5"><div class="ttname"><a href="classllvm_1_1Value.html#adb5c319f5905c1d3ca9eb5df546388c5">llvm::Value::getName</a></div><div class="ttdeci">StringRef getName() const</div><div class="ttdoc">Return a constant reference to the value's name.</div><div class="ttdef"><b>Definition:</b> <a href="Value_8cpp_source.html#l00297">Value.cpp:297</a></div></div>
<div class="ttc" id="aclassllvm_1_1ValueMap_html"><div class="ttname"><a href="classllvm_1_1ValueMap.html">llvm::ValueMap&lt; const Value *, WeakTrackingVH &gt;</a></div></div>
<div class="ttc" id="aValueHandle_8h_html"><div class="ttname"><a href="ValueHandle_8h.html">ValueHandle.h</a></div></div>
<div class="ttc" id="aclassllvm_1_1BasicBlock_html_a71a9eabc4318b2fc34f83b01dfee484b"><div class="ttname"><a href="classllvm_1_1BasicBlock.html#a71a9eabc4318b2fc34f83b01dfee484b">llvm::BasicBlock::getTerminator</a></div><div class="ttdeci">const Instruction * getTerminator() const LLVM_READONLY</div><div class="ttdoc">Returns the terminator instruction if the block is well formed or null if the block is not well forme...</div><div class="ttdef"><b>Definition:</b> <a href="BasicBlock_8cpp_source.html#l00148">BasicBlock.cpp:148</a></div></div>
<div class="ttc" id="aclassllvm_1_1DominatorTreeBase_html_a4d417f72d43729d07de3b3d2f58893cc"><div class="ttname"><a href="classllvm_1_1DominatorTreeBase.html#a4d417f72d43729d07de3b3d2f58893cc">llvm::DominatorTreeBase::addNewBlock</a></div><div class="ttdeci">DomTreeNodeBase&lt; NodeT &gt; * addNewBlock(NodeT *BB, NodeT *DomBB)</div><div class="ttdoc">Add a new node to the dominator tree information.</div><div class="ttdef"><b>Definition:</b> <a href="GenericDomTree_8h_source.html#l00619">GenericDomTree.h:619</a></div></div>
<div class="ttc" id="aclassllvm_1_1ConstantInt_html_aa7cce62ac5cc6df09cce0535874336b7"><div class="ttname"><a href="classllvm_1_1ConstantInt.html#aa7cce62ac5cc6df09cce0535874336b7">llvm::ConstantInt::getFalse</a></div><div class="ttdeci">static ConstantInt * getFalse(LLVMContext &amp;Context)</div><div class="ttdef"><b>Definition:</b> <a href="Constants_8cpp_source.html#l00856">Constants.cpp:856</a></div></div>
<div class="ttc" id="aclassllvm_1_1BasicBlock_html_ab706e7ebb1969c5e34f28bfcf2ff719e"><div class="ttname"><a href="classllvm_1_1BasicBlock.html#ab706e7ebb1969c5e34f28bfcf2ff719e">llvm::BasicBlock::front</a></div><div class="ttdeci">const Instruction &amp; front() const</div><div class="ttdef"><b>Definition:</b> <a href="BasicBlock_8h_source.html#l00308">BasicBlock.h:308</a></div></div>
<div class="ttc" id="anamespacellvm_html_a77724415203930efd07d7098cb1e437da5633028bc27ffa8eab39cc5de65b3108"><div class="ttname"><a href="namespacellvm.html#a77724415203930efd07d7098cb1e437da5633028bc27ffa8eab39cc5de65b3108">llvm::RF_IgnoreMissingLocals</a></div><div class="ttdeci">@ RF_IgnoreMissingLocals</div><div class="ttdoc">If this flag is set, the remapper ignores missing function-local entries (Argument,...</div><div class="ttdef"><b>Definition:</b> <a href="ValueMapper_8h_source.html#l00090">ValueMapper.h:90</a></div></div>
<div class="ttc" id="aclassllvm_1_1BasicBlock_html_aa286a0f7f5d38488d593bb7ef0ba183e"><div class="ttname"><a href="classllvm_1_1BasicBlock.html#aa286a0f7f5d38488d593bb7ef0ba183e">llvm::BasicBlock::getContext</a></div><div class="ttdeci">LLVMContext &amp; getContext() const</div><div class="ttdoc">Get the context in which this basic block lives.</div><div class="ttdef"><b>Definition:</b> <a href="BasicBlock_8cpp_source.html#l00032">BasicBlock.cpp:32</a></div></div>
<div class="ttc" id="aAttributes_8h_html"><div class="ttname"><a href="Attributes_8h.html">Attributes.h</a></div><div class="ttdoc">This file contains the simple types necessary to represent the attributes associated with functions a...</div></div>
<div class="ttc" id="aConstant_8h_html"><div class="ttname"><a href="Constant_8h.html">Constant.h</a></div></div>
<div class="ttc" id="anamespacellvm_html_adf83581f514774264d616eef5706cf6e"><div class="ttname"><a href="namespacellvm.html#adf83581f514774264d616eef5706cf6e">llvm::SplitEdge</a></div><div class="ttdeci">BasicBlock * SplitEdge(BasicBlock *From, BasicBlock *To, DominatorTree *DT=nullptr, LoopInfo *LI=nullptr, MemorySSAUpdater *MSSAU=nullptr, const Twine &amp;BBName=&quot;&quot;)</div><div class="ttdoc">Split the edge connecting the specified blocks, and return the newly created basic block between From...</div><div class="ttdef"><b>Definition:</b> <a href="BasicBlockUtils_8cpp_source.html#l00493">BasicBlockUtils.cpp:493</a></div></div>
<div class="ttc" id="aclassllvm_1_1ConstantInt_html_a82dbbd8e3688b0bc1eedb338864d0d0c"><div class="ttname"><a href="classllvm_1_1ConstantInt.html#a82dbbd8e3688b0bc1eedb338864d0d0c">llvm::ConstantInt::getTrue</a></div><div class="ttdeci">static ConstantInt * getTrue(LLVMContext &amp;Context)</div><div class="ttdef"><b>Definition:</b> <a href="Constants_8cpp_source.html#l00849">Constants.cpp:849</a></div></div>
<div class="ttc" id="aclassllvm_1_1Constant_html_aa6574d526b3e38a28f688a7bb4325c2c"><div class="ttname"><a href="classllvm_1_1Constant.html#aa6574d526b3e38a28f688a7bb4325c2c">llvm::Constant::getNullValue</a></div><div class="ttdeci">static Constant * getNullValue(Type *Ty)</div><div class="ttdoc">Constructor to create a '0' constant of arbitrary type.</div><div class="ttdef"><b>Definition:</b> <a href="Constants_8cpp_source.html#l00348">Constants.cpp:348</a></div></div>
<div class="ttc" id="aclassllvm_1_1ValueMapIterator_html"><div class="ttname"><a href="classllvm_1_1ValueMapIterator.html">llvm::ValueMapIterator</a></div><div class="ttdef"><b>Definition:</b> <a href="ValueMap_8h_source.html#l00326">ValueMap.h:326</a></div></div>
<div class="ttc" id="aLoopUnswitch_8cpp_html_a9ab6a0cab40eae4e54ed18308f8826ff"><div class="ttname"><a href="LoopUnswitch_8cpp.html#a9ab6a0cab40eae4e54ed18308f8826ff">isTrivialLoopExitBlock</a></div><div class="ttdeci">static BasicBlock * isTrivialLoopExitBlock(Loop *L, BasicBlock *BB)</div><div class="ttdoc">Return true if the specified block unconditionally leads to an exit from the specified loop,...</div><div class="ttdef"><b>Definition:</b> <a href="LoopUnswitch_8cpp_source.html#l00948">LoopUnswitch.cpp:948</a></div></div>
<div class="ttc" id="aclassllvm_1_1Loop_html_adf4be757fa30ca7fe3e8b119438100f0"><div class="ttname"><a href="classllvm_1_1Loop.html#adf4be757fa30ca7fe3e8b119438100f0">llvm::Loop::setLoopID</a></div><div class="ttdeci">void setLoopID(MDNode *LoopID) const</div><div class="ttdoc">Set the llvm.loop loop id metadata for this loop.</div><div class="ttdef"><b>Definition:</b> <a href="LoopInfo_8cpp_source.html#l00527">LoopInfo.cpp:527</a></div></div>
<div class="ttc" id="aclassllvm_1_1Loop_html_a6633de38a82ca61150d48f9860ab127d"><div class="ttname"><a href="classllvm_1_1Loop.html#a6633de38a82ca61150d48f9860ab127d">llvm::Loop::isLCSSAForm</a></div><div class="ttdeci">bool isLCSSAForm(const DominatorTree &amp;DT) const</div><div class="ttdoc">Return true if the Loop is in LCSSA form.</div><div class="ttdef"><b>Definition:</b> <a href="LoopInfo_8cpp_source.html#l00461">LoopInfo.cpp:461</a></div></div>
<div class="ttc" id="aclassllvm_1_1DenseMapBase_html_a65520b9c67759099e313d0f4e7b5ff9e"><div class="ttname"><a href="classllvm_1_1DenseMapBase.html#a65520b9c67759099e313d0f4e7b5ff9e">llvm::DenseMapBase&lt; DenseMap&lt; KeyT, ValueT, DenseMapInfo&lt; KeyT &gt;, llvm::detail::DenseMapPair&lt; KeyT, ValueT &gt; &gt;, KeyT, ValueT, DenseMapInfo&lt; KeyT &gt;, llvm::detail::DenseMapPair&lt; KeyT, ValueT &gt; &gt;::end</a></div><div class="ttdeci">iterator end()</div><div class="ttdef"><b>Definition:</b> <a href="DenseMap_8h_source.html#l00083">DenseMap.h:83</a></div></div>
<div class="ttc" id="aclassllvm_1_1PHINode_html_ab0ff669b12c20c07137705c38872ec63"><div class="ttname"><a href="classllvm_1_1PHINode.html#ab0ff669b12c20c07137705c38872ec63">llvm::PHINode::Create</a></div><div class="ttdeci">static PHINode * Create(Type *Ty, unsigned NumReservedValues, const Twine &amp;NameStr=&quot;&quot;, Instruction *InsertBefore=nullptr)</div><div class="ttdoc">Constructors - NumReservedValues is a hint for the number of incoming edges that this phi node will h...</div><div class="ttdef"><b>Definition:</b> <a href="Instructions_8h_source.html#l02639">Instructions.h:2639</a></div></div>
<div class="ttc" id="anamespacellvm_html_a5eeaf08e96168c2cac8960f87f0ef360"><div class="ttname"><a href="namespacellvm.html#a5eeaf08e96168c2cac8960f87f0ef360">llvm::pred_end</a></div><div class="ttdeci">Interval::pred_iterator pred_end(Interval *I)</div><div class="ttdef"><b>Definition:</b> <a href="Interval_8h_source.html#l00112">Interval.h:112</a></div></div>
<div class="ttc" id="aclassllvm_1_1Loop_html_afbcd78588d5235f99698b5c30f591382"><div class="ttname"><a href="classllvm_1_1Loop.html#afbcd78588d5235f99698b5c30f591382">llvm::Loop::getLoopID</a></div><div class="ttdeci">MDNode * getLoopID() const</div><div class="ttdoc">Return the llvm.loop loop id metadata node for this loop if it is present.</div><div class="ttdef"><b>Definition:</b> <a href="LoopInfo_8cpp_source.html#l00503">LoopInfo.cpp:503</a></div></div>
<div class="ttc" id="aclassllvm_1_1MemorySSA_html_a9773fde54683945b9e34a0f2e5c1a5a5a7806c120eb87aea9fbb52fed327e09de"><div class="ttname"><a href="classllvm_1_1MemorySSA.html#a9773fde54683945b9e34a0f2e5c1a5a5a7806c120eb87aea9fbb52fed327e09de">llvm::MemorySSA::BeforeTerminator</a></div><div class="ttdeci">@ BeforeTerminator</div><div class="ttdef"><b>Definition:</b> <a href="MemorySSA_8h_source.html#l00795">MemorySSA.h:795</a></div></div>
<div class="ttc" id="astructllvm_1_1CriticalEdgeSplittingOptions_html_a277551f64f2e4e19c1b254126995a316"><div class="ttname"><a href="structllvm_1_1CriticalEdgeSplittingOptions.html#a277551f64f2e4e19c1b254126995a316">llvm::CriticalEdgeSplittingOptions::setPreserveLCSSA</a></div><div class="ttdeci">CriticalEdgeSplittingOptions &amp; setPreserveLCSSA()</div><div class="ttdef"><b>Definition:</b> <a href="BasicBlockUtils_8h_source.html#l00166">BasicBlockUtils.h:166</a></div></div>
<div class="ttc" id="aCasting_8h_html"><div class="ttname"><a href="Casting_8h.html">Casting.h</a></div></div>
<div class="ttc" id="aFunction_8h_html"><div class="ttname"><a href="Function_8h.html">Function.h</a></div></div>
<div class="ttc" id="aclassllvm_1_1LoopBase_html_a58c5b170ea68b41e94ebb0019523a68f"><div class="ttname"><a href="classllvm_1_1LoopBase.html#a58c5b170ea68b41e94ebb0019523a68f">llvm::LoopBase::getHeader</a></div><div class="ttdeci">BlockT * getHeader() const</div><div class="ttdef"><b>Definition:</b> <a href="LoopInfo_8h_source.html#l00104">LoopInfo.h:104</a></div></div>
<div class="ttc" id="aclassllvm_1_1ValueMap_html_a7629b8c5f6a6802ee0fdc5c290769692"><div class="ttname"><a href="classllvm_1_1ValueMap.html#a7629b8c5f6a6802ee0fdc5c290769692">llvm::ValueMap::find</a></div><div class="ttdeci">iterator find(const KeyT &amp;Val)</div><div class="ttdef"><b>Definition:</b> <a href="ValueMap_8h_source.html#l00156">ValueMap.h:156</a></div></div>
<div class="ttc" id="anamespacellvm_html_a40b448eb29770bce68ab118d5570f28f"><div class="ttname"><a href="namespacellvm.html#a40b448eb29770bce68ab118d5570f28f">llvm::hasPartialIVCondition</a></div><div class="ttdeci">Optional&lt; IVConditionInfo &gt; hasPartialIVCondition(Loop &amp;L, unsigned MSSAThreshold, MemorySSA &amp;MSSA, AAResults &amp;AA)</div><div class="ttdoc">Check if the loop header has a conditional branch that is not loop-invariant, because it involves loa...</div><div class="ttdef"><b>Definition:</b> <a href="LoopUtils_8cpp_source.html#l01636">LoopUtils.cpp:1636</a></div></div>
<div class="ttc" id="aclassllvm_1_1SmallVectorImpl_html_aac0ea55010b7b1a301e65a0baea057aa"><div class="ttname"><a href="classllvm_1_1SmallVectorImpl.html#aac0ea55010b7b1a301e65a0baea057aa">llvm::SmallVectorImpl::clear</a></div><div class="ttdeci">void clear()</div><div class="ttdef"><b>Definition:</b> <a href="SmallVector_8h_source.html#l00585">SmallVector.h:585</a></div></div>
<div class="ttc" id="aclassllvm_1_1IntrinsicInst_html"><div class="ttname"><a href="classllvm_1_1IntrinsicInst.html">llvm::IntrinsicInst</a></div><div class="ttdoc">A wrapper class for inspecting calls to intrinsic functions.</div><div class="ttdef"><b>Definition:</b> <a href="IntrinsicInst_8h_source.html#l00045">IntrinsicInst.h:45</a></div></div>
<div class="ttc" id="anamespacellvm_html_a7e108932dc3da5294aed99a353aac9c4"><div class="ttname"><a href="namespacellvm.html#a7e108932dc3da5294aed99a353aac9c4">llvm::pred_begin</a></div><div class="ttdeci">Interval::pred_iterator pred_begin(Interval *I)</div><div class="ttdoc">pred_begin/pred_end - define methods so that Intervals may be used just like BasicBlocks can with the...</div><div class="ttdef"><b>Definition:</b> <a href="Interval_8h_source.html#l00109">Interval.h:109</a></div></div>
<div class="ttc" id="aclassllvm_1_1Pass_html"><div class="ttname"><a href="classllvm_1_1Pass.html">llvm::Pass</a></div><div class="ttdoc">Pass interface - Implemented by all 'passes'.</div><div class="ttdef"><b>Definition:</b> <a href="Pass_8h_source.html#l00091">Pass.h:91</a></div></div>
<div class="ttc" id="aMemorySSA_8h_html"><div class="ttname"><a href="MemorySSA_8h.html">MemorySSA.h</a></div><div class="ttdoc">This file exposes an interface to building/using memory SSA to walk memory instructions using a use/d...</div></div>
<div class="ttc" id="aInstructions_8h_html"><div class="ttname"><a href="Instructions_8h.html">Instructions.h</a></div></div>
<div class="ttc" id="aclassllvm_1_1User_html_addec638786f763d967811b45cb662f1f"><div class="ttname"><a href="classllvm_1_1User.html#addec638786f763d967811b45cb662f1f">llvm::User::getNumOperands</a></div><div class="ttdeci">unsigned getNumOperands() const</div><div class="ttdef"><b>Definition:</b> <a href="User_8h_source.html#l00191">User.h:191</a></div></div>
<div class="ttc" id="aLegacyDivergenceAnalysis_8h_html"><div class="ttname"><a href="LegacyDivergenceAnalysis_8h.html">LegacyDivergenceAnalysis.h</a></div></div>
<div class="ttc" id="aLoopUnswitch_8cpp_html_aec0f8308a1a4cd48e078d52bc0d07878"><div class="ttname"><a href="LoopUnswitch_8cpp.html#aec0f8308a1a4cd48e078d52bc0d07878">replaceUsesOfWith</a></div><div class="ttdeci">static void replaceUsesOfWith(Instruction *I, Value *V, std::vector&lt; Instruction * &gt; &amp;Worklist, Loop *L, LPPassManager *LPM, MemorySSAUpdater *MSSAU)</div><div class="ttdoc">When we find that I really equals V, remove I from the program, replacing all uses with V and update ...</div><div class="ttdef"><b>Definition:</b> <a href="LoopUnswitch_8cpp_source.html#l01526">LoopUnswitch.cpp:1526</a></div></div>
<div class="ttc" id="aSmallVector_8h_html"><div class="ttname"><a href="SmallVector_8h.html">SmallVector.h</a></div></div>
<div class="ttc" id="aUser_8h_html"><div class="ttname"><a href="User_8h.html">User.h</a></div></div>
<div class="ttc" id="aclassllvm_1_1LoopBase_html_a63f099d3bf7cf97eb3ae2d630e3d1afc"><div class="ttname"><a href="classllvm_1_1LoopBase.html#a63f099d3bf7cf97eb3ae2d630e3d1afc">llvm::LoopBase::addBasicBlockToLoop</a></div><div class="ttdeci">void addBasicBlockToLoop(BlockT *NewBB, LoopInfoBase&lt; BlockT, LoopT &gt; &amp;LI)</div><div class="ttdoc">This method is used by other analyses to update loop information.</div><div class="ttdef"><b>Definition:</b> <a href="LoopInfoImpl_8h_source.html#l00242">LoopInfoImpl.h:242</a></div></div>
<div class="ttc" id="aDominators_8h_html"><div class="ttname"><a href="Dominators_8h.html">Dominators.h</a></div></div>
<div class="ttc" id="aclassllvm_1_1SwitchInst_1_1CaseHandle_html"><div class="ttname"><a href="classllvm_1_1SwitchInst_1_1CaseHandle.html">llvm::SwitchInst::CaseHandle</a></div><div class="ttdef"><b>Definition:</b> <a href="Instructions_8h_source.html#l03276">Instructions.h:3277</a></div></div>
<div class="ttc" id="aclassllvm_1_1Instruction_html_a1a7f07aaef6a3bee130bf0e0f0536802"><div class="ttname"><a href="classllvm_1_1Instruction.html#a1a7f07aaef6a3bee130bf0e0f0536802">llvm::Instruction::getParent</a></div><div class="ttdeci">const BasicBlock * getParent() const</div><div class="ttdef"><b>Definition:</b> <a href="IR_2Instruction_8h_source.html#l00094">Instruction.h:94</a></div></div>
<div class="ttc" id="aclassllvm_1_1Loop_html_a1b0ea1f1455192f5e0b0d033784c2d22"><div class="ttname"><a href="classllvm_1_1Loop.html#a1b0ea1f1455192f5e0b0d033784c2d22">llvm::Loop::isSafeToClone</a></div><div class="ttdeci">bool isSafeToClone() const</div><div class="ttdoc">Return true if the loop body is safe to clone in practice.</div><div class="ttdef"><b>Definition:</b> <a href="LoopInfo_8cpp_source.html#l00485">LoopInfo.cpp:485</a></div></div>
<div class="ttc" id="aInstructionSimplify_8h_html"><div class="ttname"><a href="InstructionSimplify_8h.html">InstructionSimplify.h</a></div></div>
<div class="ttc" id="aclassllvm_1_1CmpInst_html_aa7414ba9f658ff1287d22a4b8fe81bcb"><div class="ttname"><a href="classllvm_1_1CmpInst.html#aa7414ba9f658ff1287d22a4b8fe81bcb">llvm::CmpInst::getPredicate</a></div><div class="ttdeci">Predicate getPredicate() const</div><div class="ttdoc">Return the predicate for this instruction.</div><div class="ttdef"><b>Definition:</b> <a href="InstrTypes_8h_source.html#l00796">InstrTypes.h:796</a></div></div>
<div class="ttc" id="aTargetTransformInfo_8h_html"><div class="ttname"><a href="TargetTransformInfo_8h.html">TargetTransformInfo.h</a></div><div class="ttdoc">This pass exposes codegen information to IR-level passes.</div></div>
<div class="ttc" id="aclassllvm_1_1Instruction_html_a6e324daba99cb1d67713a562f9a778d2"><div class="ttname"><a href="classllvm_1_1Instruction.html#a6e324daba99cb1d67713a562f9a778d2">llvm::Instruction::swapProfMetadata</a></div><div class="ttdeci">void swapProfMetadata()</div><div class="ttdoc">If the instruction has &quot;branch_weights&quot; MD_prof metadata and the MDNode has three operands (including...</div><div class="ttdef"><b>Definition:</b> <a href="IR_2Instruction_8cpp_source.html#l00812">Instruction.cpp:812</a></div></div>
<div class="ttc" id="aclassllvm_1_1PHINode_html"><div class="ttname"><a href="classllvm_1_1PHINode.html">llvm::PHINode</a></div><div class="ttdef"><b>Definition:</b> <a href="Instructions_8h_source.html#l02597">Instructions.h:2597</a></div></div>
<div class="ttc" id="aLoopUnswitch_8cpp_html_a815e638c738b221b797674c5c63524bb"><div class="ttname"><a href="LoopUnswitch_8cpp.html#a815e638c738b221b797674c5c63524bb">Threshold</a></div><div class="ttdeci">static cl::opt&lt; unsigned &gt; Threshold(&quot;loop-unswitch-threshold&quot;, cl::desc(&quot;Max loop size to unswitch&quot;), cl::init(100), cl::Hidden)</div></div>
<div class="ttc" id="aclassllvm_1_1SmallVectorImpl_html"><div class="ttname"><a href="classllvm_1_1SmallVectorImpl.html">llvm::SmallVectorImpl&lt; BasicBlock * &gt;</a></div></div>
<div class="ttc" id="aclassllvm_1_1Module_html_a6d883605206368bc536cc9ded97209b8"><div class="ttname"><a href="classllvm_1_1Module.html#a6d883605206368bc536cc9ded97209b8">llvm::Module::getDataLayout</a></div><div class="ttdeci">const DataLayout &amp; getDataLayout() const</div><div class="ttdoc">Get the data layout for the module's target platform.</div><div class="ttdef"><b>Definition:</b> <a href="Module_8cpp_source.html#l00401">Module.cpp:401</a></div></div>
<div class="ttc" id="aclassllvm_1_1BasicBlock_html_a1553a166adb52e29e3a240dd37627ad9"><div class="ttname"><a href="classllvm_1_1BasicBlock.html#a1553a166adb52e29e3a240dd37627ad9">llvm::BasicBlock::getLandingPadInst</a></div><div class="ttdeci">const LandingPadInst * getLandingPadInst() const</div><div class="ttdoc">Return the landingpad instruction associated with the landing pad.</div><div class="ttdef"><b>Definition:</b> <a href="BasicBlock_8cpp_source.html#l00476">BasicBlock.cpp:476</a></div></div>
<div class="ttc" id="aDerivedTypes_8h_html"><div class="ttname"><a href="DerivedTypes_8h.html">DerivedTypes.h</a></div></div>
<div class="ttc" id="alib_2CodeGen_2README_8txt_html_a09776db24cf586ec9f1e18f3bae14099"><div class="ttname"><a href="lib_2CodeGen_2README_8txt.html#a09776db24cf586ec9f1e18f3bae14099">BB</a></div><div class="ttdeci">Common register allocation spilling lr str ldr sxth r3 ldr mla r4 can lr mov lr str ldr sxth r3 mla r4 and then merge mul and lr str ldr sxth r3 mla r4 It also increase the likelihood the store may become dead bb27 Successors according to LLVM BB</div><div class="ttdef"><b>Definition:</b> <a href="lib_2CodeGen_2README_8txt_source.html#l00039">README.txt:39</a></div></div>
<div class="ttc" id="aclassllvm_1_1UnreachableInst_html"><div class="ttname"><a href="classllvm_1_1UnreachableInst.html">llvm::UnreachableInst</a></div><div class="ttdoc">This function has undefined behavior.</div><div class="ttdef"><b>Definition:</b> <a href="Instructions_8h_source.html#l04679">Instructions.h:4679</a></div></div>
<div class="ttc" id="aclassllvm_1_1SimpleLoopSafetyInfo_html_a0d72ea03ecc07b164934986286ea086d"><div class="ttname"><a href="classllvm_1_1SimpleLoopSafetyInfo.html#a0d72ea03ecc07b164934986286ea086d">llvm::SimpleLoopSafetyInfo::isGuaranteedToExecute</a></div><div class="ttdeci">bool isGuaranteedToExecute(const Instruction &amp;Inst, const DominatorTree *DT, const Loop *CurLoop) const override</div><div class="ttdoc">Returns true if the instruction in a loop is guaranteed to execute at least once.</div><div class="ttdef"><b>Definition:</b> <a href="MustExecute_8cpp_source.html#l00251">MustExecute.cpp:251</a></div></div>
<div class="ttc" id="aclassllvm_1_1ValueMap_html_a15f92579a5fc316dab8cd1fad51015ef"><div class="ttname"><a href="classllvm_1_1ValueMap.html#a15f92579a5fc316dab8cd1fad51015ef">llvm::ValueMap::lookup</a></div><div class="ttdeci">ValueT lookup(const KeyT &amp;Val) const</div><div class="ttdoc">lookup - Return the entry for the specified key, or a default constructed value if no such entry exis...</div><div class="ttdef"><b>Definition:</b> <a href="ValueMap_8h_source.html#l00165">ValueMap.h:165</a></div></div>
<div class="ttc" id="aclassllvm_1_1AnalysisUsage_html_ae5c60fd282ee894c87ea02c3f0fcb6d0"><div class="ttname"><a href="classllvm_1_1AnalysisUsage.html#ae5c60fd282ee894c87ea02c3f0fcb6d0">llvm::AnalysisUsage::addRequired</a></div><div class="ttdeci">AnalysisUsage &amp; addRequired()</div><div class="ttdef"><b>Definition:</b> <a href="PassAnalysisSupport_8h_source.html#l00075">PassAnalysisSupport.h:75</a></div></div>
<div class="ttc" id="anamespacellvm_html_aa29fe161c408879ada30c90ebbf55dcf"><div class="ttname"><a href="namespacellvm.html#aa29fe161c408879ada30c90ebbf55dcf">llvm::VerifyMemorySSA</a></div><div class="ttdeci">bool VerifyMemorySSA</div><div class="ttdoc">Enables verification of MemorySSA.</div><div class="ttdef"><b>Definition:</b> <a href="MemorySSA_8cpp_source.html#l00091">MemorySSA.cpp:91</a></div></div>
<div class="ttc" id="aclassllvm_1_1SwitchInst_html"><div class="ttname"><a href="classllvm_1_1SwitchInst.html">llvm::SwitchInst</a></div><div class="ttdoc">Multiway switch.</div><div class="ttdef"><b>Definition:</b> <a href="Instructions_8h_source.html#l03176">Instructions.h:3176</a></div></div>
<div class="ttc" id="aLoopUnswitch_8cpp_html_a0aa18bdfdde7435ee8015bcfb6c80849"><div class="ttname"><a href="LoopUnswitch_8cpp.html#a0aa18bdfdde7435ee8015bcfb6c80849">loops</a></div><div class="ttdeci">loop Unswitch loops</div><div class="ttdef"><b>Definition:</b> <a href="LoopUnswitch_8cpp_source.html#l00409">LoopUnswitch.cpp:409</a></div></div>
<div class="ttc" id="aLoopUnswitch_8cpp_html_a488610869ffea06bc4eefcd4592fca9f"><div class="ttname"><a href="LoopUnswitch_8cpp.html#a488610869ffea06bc4eefcd4592fca9f">OperatorChain</a></div><div class="ttdeci">OperatorChain</div><div class="ttdoc">Operator chain lattice.</div><div class="ttdef"><b>Definition:</b> <a href="LoopUnswitch_8cpp_source.html#l00417">LoopUnswitch.cpp:417</a></div></div>
<div class="ttc" id="aclassllvm_1_1User_html_abe1de1520a21f77ac57cc210bf0fb0b4"><div class="ttname"><a href="classllvm_1_1User.html#abe1de1520a21f77ac57cc210bf0fb0b4">llvm::User::getOperand</a></div><div class="ttdeci">Value * getOperand(unsigned i) const</div><div class="ttdef"><b>Definition:</b> <a href="User_8h_source.html#l00169">User.h:169</a></div></div>
<div class="ttc" id="astructllvm_1_1cl_1_1desc_html"><div class="ttname"><a href="structllvm_1_1cl_1_1desc.html">llvm::cl::desc</a></div><div class="ttdef"><b>Definition:</b> <a href="CommandLine_8h_source.html#l00414">CommandLine.h:414</a></div></div>
<div class="ttc" id="aclassllvm_1_1BranchInst_html"><div class="ttname"><a href="classllvm_1_1BranchInst.html">llvm::BranchInst</a></div><div class="ttdoc">Conditional or Unconditional Branch instruction.</div><div class="ttdef"><b>Definition:</b> <a href="Instructions_8h_source.html#l03032">Instructions.h:3032</a></div></div>
<div class="ttc" id="araw__ostream_8h_html"><div class="ttname"><a href="raw__ostream_8h.html">raw_ostream.h</a></div></div>
<div class="ttc" id="aBasicBlockUtils_8h_html"><div class="ttname"><a href="BasicBlockUtils_8h.html">BasicBlockUtils.h</a></div></div>
<div class="ttc" id="anamespacellvm_html_ad295cb34421c21507bc9cdefe1ba3f16"><div class="ttname"><a href="namespacellvm.html#ad295cb34421c21507bc9cdefe1ba3f16">llvm::SplitBlock</a></div><div class="ttdeci">BasicBlock * SplitBlock(BasicBlock *Old, Instruction *SplitPt, DominatorTree *DT, LoopInfo *LI=nullptr, MemorySSAUpdater *MSSAU=nullptr, const Twine &amp;BBName=&quot;&quot;, bool Before=false)</div><div class="ttdoc">Split the specified block at the specified instruction.</div><div class="ttdef"><b>Definition:</b> <a href="BasicBlockUtils_8cpp_source.html#l00814">BasicBlockUtils.cpp:814</a></div></div>
<div class="ttc" id="aValue_8h_html"><div class="ttname"><a href="Value_8h.html">Value.h</a></div></div>
<div class="ttc" id="aclassllvm_1_1LazyBranchProbabilityInfoPass_html"><div class="ttname"><a href="classllvm_1_1LazyBranchProbabilityInfoPass.html">llvm::LazyBranchProbabilityInfoPass</a></div><div class="ttdoc">This is an alternative analysis pass to BranchProbabilityInfoWrapperPass.</div><div class="ttdef"><b>Definition:</b> <a href="LazyBranchProbabilityInfo_8h_source.html#l00050">LazyBranchProbabilityInfo.h:50</a></div></div>
<div class="ttc" id="aInitializePasses_8h_html"><div class="ttname"><a href="InitializePasses_8h.html">InitializePasses.h</a></div></div>
<div class="ttc" id="aLoopUnswitch_8cpp_html_a488610869ffea06bc4eefcd4592fca9fa9d8893109f11fee0c7829aabbc8e5f42"><div class="ttname"><a href="LoopUnswitch_8cpp.html#a488610869ffea06bc4eefcd4592fca9fa9d8893109f11fee0c7829aabbc8e5f42">OC_OpChainNone</a></div><div class="ttdeci">@ OC_OpChainNone</div><div class="ttdoc">There is no operator.</div><div class="ttdef"><b>Definition:</b> <a href="LoopUnswitch_8cpp_source.html#l00418">LoopUnswitch.cpp:418</a></div></div>
<div class="ttc" id="aclassllvm_1_1Value_html"><div class="ttname"><a href="classllvm_1_1Value.html">llvm::Value</a></div><div class="ttdoc">LLVM Value Representation.</div><div class="ttdef"><b>Definition:</b> <a href="Value_8h_source.html#l00075">Value.h:75</a></div></div>
<div class="ttc" id="aDebug_8h_html"><div class="ttname"><a href="Debug_8h.html">Debug.h</a></div></div>
<div class="ttc" id="aclassllvm_1_1Value_html_ab4e0512c7e1c7adaa56677e3155685f1"><div class="ttname"><a href="classllvm_1_1Value.html#ab4e0512c7e1c7adaa56677e3155685f1">llvm::Value::users</a></div><div class="ttdeci">iterator_range&lt; user_iterator &gt; users()</div><div class="ttdef"><b>Definition:</b> <a href="Value_8h_source.html#l00422">Value.h:422</a></div></div>
<div class="ttc" id="aclassllvm_1_1BranchInst_html_a7e4be8b16fbd68c9045a388904044e01"><div class="ttname"><a href="classllvm_1_1BranchInst.html#a7e4be8b16fbd68c9045a388904044e01">llvm::BranchInst::isConditional</a></div><div class="ttdeci">bool isConditional() const</div><div class="ttdef"><b>Definition:</b> <a href="Instructions_8h_source.html#l03111">Instructions.h:3111</a></div></div>
<div class="ttc" id="aclassllvm_1_1BranchInst_html_ad97f2e60cf22f15e0cf617af52309031"><div class="ttname"><a href="classllvm_1_1BranchInst.html#ad97f2e60cf22f15e0cf617af52309031">llvm::BranchInst::getSuccessor</a></div><div class="ttdeci">BasicBlock * getSuccessor(unsigned i) const</div><div class="ttdef"><b>Definition:</b> <a href="Instructions_8h_source.html#l03125">Instructions.h:3125</a></div></div>
<div class="ttc" id="aclassllvm_1_1MemorySSAUpdater_html_abcf78af37d56a9b72a49c65428210758"><div class="ttname"><a href="classllvm_1_1MemorySSAUpdater.html#abcf78af37d56a9b72a49c65428210758">llvm::MemorySSAUpdater::removeMemoryAccess</a></div><div class="ttdeci">void removeMemoryAccess(MemoryAccess *, bool OptimizePhis=false)</div><div class="ttdoc">Remove a MemoryAccess from MemorySSA, including updating all definitions and uses.</div><div class="ttdef"><b>Definition:</b> <a href="MemorySSAUpdater_8cpp_source.html#l01305">MemorySSAUpdater.cpp:1305</a></div></div>
<div class="ttc" id="aclassllvm_1_1DominatorTreeBase_html_a71c91cbbfc1c0ecf9a69e10ccf739bd7"><div class="ttname"><a href="classllvm_1_1DominatorTreeBase.html#a71c91cbbfc1c0ecf9a69e10ccf739bd7">llvm::DominatorTreeBase&lt; BasicBlock, false &gt;::Delete</a></div><div class="ttdeci">static constexpr UpdateKind Delete</div><div class="ttdef"><b>Definition:</b> <a href="GenericDomTree_8h_source.html#l00243">GenericDomTree.h:243</a></div></div>
<div class="ttc" id="aclassllvm_1_1Use_html"><div class="ttname"><a href="classllvm_1_1Use.html">llvm::Use</a></div><div class="ttdoc">A Use represents the edge between a Value definition and its users.</div><div class="ttdef"><b>Definition:</b> <a href="Use_8h_source.html#l00044">Use.h:44</a></div></div>
<div class="ttc" id="aclassllvm_1_1SmallPtrSetImpl_html_a6bc6fb89fe2e91c25559a8631f56e27e"><div class="ttname"><a href="classllvm_1_1SmallPtrSetImpl.html#a6bc6fb89fe2e91c25559a8631f56e27e">llvm::SmallPtrSetImpl::insert</a></div><div class="ttdeci">std::pair&lt; iterator, bool &gt; insert(PtrType Ptr)</div><div class="ttdoc">Inserts Ptr if and only if there is no element in the container equal to Ptr.</div><div class="ttdef"><b>Definition:</b> <a href="SmallPtrSet_8h_source.html#l00364">SmallPtrSet.h:364</a></div></div>
<div class="ttc" id="anamespacellvm_1_1Intrinsic_html_a80add6b3b1cdaec560907995127adc16"><div class="ttname"><a href="namespacellvm_1_1Intrinsic.html#a80add6b3b1cdaec560907995127adc16">llvm::Intrinsic::ID</a></div><div class="ttdeci">unsigned ID</div><div class="ttdef"><b>Definition:</b> <a href="TargetTransformInfo_8h_source.html#l00038">TargetTransformInfo.h:38</a></div></div>
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated on Tue Feb 8 2022 05:00:32 for LLVM by&#160;<a href="http://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.8.20
</small></address>
</body>
</html>
