<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.20"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>LLVM: lib/Transforms/Scalar/StructurizeCFG.cpp Source File</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<script type="text/x-mathjax-config">
  MathJax.Hub.Config({
    extensions: ["tex2jax.js"],
    jax: ["input/TeX","output/HTML-CSS"],
});
</script>
<script type="text/javascript" async="async" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.7/MathJax.js/MathJax.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">LLVM
   &#160;<span id="projectnumber">13.0.1</span>
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.20 -->
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',false,false,'search.php','Search');
});
/* @license-end */</script>
<div id="main-nav"></div>
<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="dir_97aefd0d527b934f1d99a682da8fe6a9.html">lib</a></li><li class="navelem"><a class="el" href="dir_a72932e0778af28115095468f6286ff8.html">Transforms</a></li><li class="navelem"><a class="el" href="dir_e6e1f1f37d351595fa984b942927b205.html">Scalar</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="headertitle">
<div class="title">StructurizeCFG.cpp</div>  </div>
</div><!--header-->
<div class="contents">
<a href="StructurizeCFG_8cpp.html">Go to the documentation of this file.</a><div class="fragment"><div class="line"><a name="l00001"></a><span class="lineno">    1</span>&#160;<span class="comment">//===- StructurizeCFG.cpp -------------------------------------------------===//</span></div>
<div class="line"><a name="l00002"></a><span class="lineno">    2</span>&#160;<span class="comment">//</span></div>
<div class="line"><a name="l00003"></a><span class="lineno">    3</span>&#160;<span class="comment">// Part of the LLVM Project, under the Apache License v2.0 with LLVM Exceptions.</span></div>
<div class="line"><a name="l00004"></a><span class="lineno">    4</span>&#160;<span class="comment">// See https://llvm.org/LICENSE.txt for license information.</span></div>
<div class="line"><a name="l00005"></a><span class="lineno">    5</span>&#160;<span class="comment">// SPDX-License-Identifier: Apache-2.0 WITH LLVM-exception</span></div>
<div class="line"><a name="l00006"></a><span class="lineno">    6</span>&#160;<span class="comment">//</span></div>
<div class="line"><a name="l00007"></a><span class="lineno">    7</span>&#160;<span class="comment">//===----------------------------------------------------------------------===//</span></div>
<div class="line"><a name="l00008"></a><span class="lineno">    8</span>&#160; </div>
<div class="line"><a name="l00009"></a><span class="lineno">    9</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="StructurizeCFG_8h.html">llvm/Transforms/Scalar/StructurizeCFG.h</a>&quot;</span></div>
<div class="line"><a name="l00010"></a><span class="lineno">   10</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="DenseMap_8h.html">llvm/ADT/DenseMap.h</a>&quot;</span></div>
<div class="line"><a name="l00011"></a><span class="lineno">   11</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="MapVector_8h.html">llvm/ADT/MapVector.h</a>&quot;</span></div>
<div class="line"><a name="l00012"></a><span class="lineno">   12</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="SCCIterator_8h.html">llvm/ADT/SCCIterator.h</a>&quot;</span></div>
<div class="line"><a name="l00013"></a><span class="lineno">   13</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="STLExtras_8h.html">llvm/ADT/STLExtras.h</a>&quot;</span></div>
<div class="line"><a name="l00014"></a><span class="lineno">   14</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="SmallPtrSet_8h.html">llvm/ADT/SmallPtrSet.h</a>&quot;</span></div>
<div class="line"><a name="l00015"></a><span class="lineno">   15</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="SmallVector_8h.html">llvm/ADT/SmallVector.h</a>&quot;</span></div>
<div class="line"><a name="l00016"></a><span class="lineno">   16</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="InstructionSimplify_8h.html">llvm/Analysis/InstructionSimplify.h</a>&quot;</span></div>
<div class="line"><a name="l00017"></a><span class="lineno">   17</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="LegacyDivergenceAnalysis_8h.html">llvm/Analysis/LegacyDivergenceAnalysis.h</a>&quot;</span></div>
<div class="line"><a name="l00018"></a><span class="lineno">   18</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="RegionInfo_8h.html">llvm/Analysis/RegionInfo.h</a>&quot;</span></div>
<div class="line"><a name="l00019"></a><span class="lineno">   19</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="RegionIterator_8h.html">llvm/Analysis/RegionIterator.h</a>&quot;</span></div>
<div class="line"><a name="l00020"></a><span class="lineno">   20</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="RegionPass_8h.html">llvm/Analysis/RegionPass.h</a>&quot;</span></div>
<div class="line"><a name="l00021"></a><span class="lineno">   21</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="Argument_8h.html">llvm/IR/Argument.h</a>&quot;</span></div>
<div class="line"><a name="l00022"></a><span class="lineno">   22</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="BasicBlock_8h.html">llvm/IR/BasicBlock.h</a>&quot;</span></div>
<div class="line"><a name="l00023"></a><span class="lineno">   23</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="IR_2CFG_8h.html">llvm/IR/CFG.h</a>&quot;</span></div>
<div class="line"><a name="l00024"></a><span class="lineno">   24</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="Constant_8h.html">llvm/IR/Constant.h</a>&quot;</span></div>
<div class="line"><a name="l00025"></a><span class="lineno">   25</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="Constants_8h.html">llvm/IR/Constants.h</a>&quot;</span></div>
<div class="line"><a name="l00026"></a><span class="lineno">   26</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="Dominators_8h.html">llvm/IR/Dominators.h</a>&quot;</span></div>
<div class="line"><a name="l00027"></a><span class="lineno">   27</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="Function_8h.html">llvm/IR/Function.h</a>&quot;</span></div>
<div class="line"><a name="l00028"></a><span class="lineno">   28</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="InstrTypes_8h.html">llvm/IR/InstrTypes.h</a>&quot;</span></div>
<div class="line"><a name="l00029"></a><span class="lineno">   29</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="IR_2Instruction_8h.html">llvm/IR/Instruction.h</a>&quot;</span></div>
<div class="line"><a name="l00030"></a><span class="lineno">   30</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="Instructions_8h.html">llvm/IR/Instructions.h</a>&quot;</span></div>
<div class="line"><a name="l00031"></a><span class="lineno">   31</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="Metadata_8h.html">llvm/IR/Metadata.h</a>&quot;</span></div>
<div class="line"><a name="l00032"></a><span class="lineno">   32</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="PassManager_8h.html">llvm/IR/PassManager.h</a>&quot;</span></div>
<div class="line"><a name="l00033"></a><span class="lineno">   33</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="PatternMatch_8h.html">llvm/IR/PatternMatch.h</a>&quot;</span></div>
<div class="line"><a name="l00034"></a><span class="lineno">   34</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="Type_8h.html">llvm/IR/Type.h</a>&quot;</span></div>
<div class="line"><a name="l00035"></a><span class="lineno">   35</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="Use_8h.html">llvm/IR/Use.h</a>&quot;</span></div>
<div class="line"><a name="l00036"></a><span class="lineno">   36</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="User_8h.html">llvm/IR/User.h</a>&quot;</span></div>
<div class="line"><a name="l00037"></a><span class="lineno">   37</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="Value_8h.html">llvm/IR/Value.h</a>&quot;</span></div>
<div class="line"><a name="l00038"></a><span class="lineno">   38</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="ValueHandle_8h.html">llvm/IR/ValueHandle.h</a>&quot;</span></div>
<div class="line"><a name="l00039"></a><span class="lineno">   39</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="InitializePasses_8h.html">llvm/InitializePasses.h</a>&quot;</span></div>
<div class="line"><a name="l00040"></a><span class="lineno">   40</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="Pass_8h.html">llvm/Pass.h</a>&quot;</span></div>
<div class="line"><a name="l00041"></a><span class="lineno">   41</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="Casting_8h.html">llvm/Support/Casting.h</a>&quot;</span></div>
<div class="line"><a name="l00042"></a><span class="lineno">   42</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="CommandLine_8h.html">llvm/Support/CommandLine.h</a>&quot;</span></div>
<div class="line"><a name="l00043"></a><span class="lineno">   43</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="Debug_8h.html">llvm/Support/Debug.h</a>&quot;</span></div>
<div class="line"><a name="l00044"></a><span class="lineno">   44</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="llvm_2Support_2ErrorHandling_8h.html">llvm/Support/ErrorHandling.h</a>&quot;</span></div>
<div class="line"><a name="l00045"></a><span class="lineno">   45</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="raw__ostream_8h.html">llvm/Support/raw_ostream.h</a>&quot;</span></div>
<div class="line"><a name="l00046"></a><span class="lineno">   46</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="llvm_2Transforms_2Scalar_8h.html">llvm/Transforms/Scalar.h</a>&quot;</span></div>
<div class="line"><a name="l00047"></a><span class="lineno">   47</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="llvm_2Transforms_2Utils_8h.html">llvm/Transforms/Utils.h</a>&quot;</span></div>
<div class="line"><a name="l00048"></a><span class="lineno">   48</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="Transforms_2Utils_2Local_8h.html">llvm/Transforms/Utils/Local.h</a>&quot;</span></div>
<div class="line"><a name="l00049"></a><span class="lineno">   49</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="SSAUpdater_8h.html">llvm/Transforms/Utils/SSAUpdater.h</a>&quot;</span></div>
<div class="line"><a name="l00050"></a><span class="lineno">   50</span>&#160;<span class="preprocessor">#include &lt;algorithm&gt;</span></div>
<div class="line"><a name="l00051"></a><span class="lineno">   51</span>&#160;<span class="preprocessor">#include &lt;cassert&gt;</span></div>
<div class="line"><a name="l00052"></a><span class="lineno">   52</span>&#160;<span class="preprocessor">#include &lt;utility&gt;</span></div>
<div class="line"><a name="l00053"></a><span class="lineno">   53</span>&#160; </div>
<div class="line"><a name="l00054"></a><span class="lineno">   54</span>&#160;<span class="keyword">using namespace </span><a class="code" href="namespacellvm.html">llvm</a>;</div>
<div class="line"><a name="l00055"></a><span class="lineno">   55</span>&#160;<span class="keyword">using namespace </span><a class="code" href="namespacellvm_1_1PatternMatch.html">llvm::PatternMatch</a>;</div>
<div class="line"><a name="l00056"></a><span class="lineno">   56</span>&#160; </div>
<div class="line"><a name="l00057"></a><span class="lineno"><a class="line" href="StructurizeCFG_8cpp.html#ad78e062f62e0d6e453941fb4ca843e4d">   57</a></span>&#160;<span class="preprocessor">#define DEBUG_TYPE &quot;structurizecfg&quot;</span></div>
<div class="line"><a name="l00058"></a><span class="lineno">   58</span>&#160; </div>
<div class="line"><a name="l00059"></a><span class="lineno">   59</span>&#160;<span class="comment">// The name for newly created blocks.</span></div>
<div class="line"><a name="l00060"></a><span class="lineno"><a class="line" href="StructurizeCFG_8cpp.html#a8ccfde1a2bda991468e3e81b0e41ab97">   60</a></span>&#160;<span class="keyword">const</span> <span class="keywordtype">char</span> <a class="code" href="StructurizeCFG_8cpp.html#a8ccfde1a2bda991468e3e81b0e41ab97">FlowBlockName</a>[] = <span class="stringliteral">&quot;Flow&quot;</span>;</div>
<div class="line"><a name="l00061"></a><span class="lineno">   61</span>&#160; </div>
<div class="line"><a name="l00062"></a><span class="lineno">   62</span>&#160;<span class="keyword">namespace </span>{</div>
<div class="line"><a name="l00063"></a><span class="lineno">   63</span>&#160; </div>
<div class="line"><a name="l00064"></a><span class="lineno">   64</span>&#160;<span class="keyword">static</span> <a class="code" href="classllvm_1_1cl_1_1opt.html">cl::opt&lt;bool&gt;</a> ForceSkipUniformRegions(</div>
<div class="line"><a name="l00065"></a><span class="lineno">   65</span>&#160;  <span class="stringliteral">&quot;structurizecfg-skip-uniform-regions&quot;</span>,</div>
<div class="line"><a name="l00066"></a><span class="lineno">   66</span>&#160;  <a class="code" href="namespacellvm_1_1cl.html#a68075925a54790e71ca790e1d4f21a40a263ac008d8d31f13ce460395fc4cf7e6">cl::Hidden</a>,</div>
<div class="line"><a name="l00067"></a><span class="lineno">   67</span>&#160;  <a class="code" href="structllvm_1_1cl_1_1desc.html">cl::desc</a>(<span class="stringliteral">&quot;Force whether the StructurizeCFG pass skips uniform regions&quot;</span>),</div>
<div class="line"><a name="l00068"></a><span class="lineno">   68</span>&#160;  <a class="code" href="namespacellvm_1_1cl.html#a10a041239ae1870cfcc064bfaa79fb65">cl::init</a>(<span class="keyword">false</span>));</div>
<div class="line"><a name="l00069"></a><span class="lineno">   69</span>&#160; </div>
<div class="line"><a name="l00070"></a><span class="lineno">   70</span>&#160;<span class="keyword">static</span> <a class="code" href="classllvm_1_1cl_1_1opt.html">cl::opt&lt;bool&gt;</a></div>
<div class="line"><a name="l00071"></a><span class="lineno">   71</span>&#160;    RelaxedUniformRegions(<span class="stringliteral">&quot;structurizecfg-relaxed-uniform-regions&quot;</span>, <a class="code" href="namespacellvm_1_1cl.html#a68075925a54790e71ca790e1d4f21a40a263ac008d8d31f13ce460395fc4cf7e6">cl::Hidden</a>,</div>
<div class="line"><a name="l00072"></a><span class="lineno">   72</span>&#160;                          <a class="code" href="structllvm_1_1cl_1_1desc.html">cl::desc</a>(<span class="stringliteral">&quot;Allow relaxed uniform region checks&quot;</span>),</div>
<div class="line"><a name="l00073"></a><span class="lineno">   73</span>&#160;                          <a class="code" href="namespacellvm_1_1cl.html#a10a041239ae1870cfcc064bfaa79fb65">cl::init</a>(<span class="keyword">true</span>));</div>
<div class="line"><a name="l00074"></a><span class="lineno">   74</span>&#160; </div>
<div class="line"><a name="l00075"></a><span class="lineno">   75</span>&#160;<span class="comment">// Definition of the complex types used in this pass.</span></div>
<div class="line"><a name="l00076"></a><span class="lineno">   76</span>&#160; </div>
<div class="line"><a name="l00077"></a><span class="lineno">   77</span>&#160;<span class="keyword">using</span> BBValuePair = std::pair&lt;BasicBlock *, Value *&gt;;</div>
<div class="line"><a name="l00078"></a><span class="lineno">   78</span>&#160; </div>
<div class="line"><a name="l00079"></a><span class="lineno">   79</span>&#160;<span class="keyword">using</span> RNVector = <a class="code" href="classllvm_1_1SmallVector.html">SmallVector&lt;RegionNode *, 8&gt;</a>;</div>
<div class="line"><a name="l00080"></a><span class="lineno">   80</span>&#160;<span class="keyword">using</span> BBVector = <a class="code" href="classllvm_1_1SmallVector.html">SmallVector&lt;BasicBlock *, 8&gt;</a>;</div>
<div class="line"><a name="l00081"></a><span class="lineno">   81</span>&#160;<span class="keyword">using</span> BranchVector = <a class="code" href="classllvm_1_1SmallVector.html">SmallVector&lt;BranchInst *, 8&gt;</a>;</div>
<div class="line"><a name="l00082"></a><span class="lineno">   82</span>&#160;<span class="keyword">using</span> BBValueVector = <a class="code" href="classllvm_1_1SmallVector.html">SmallVector&lt;BBValuePair, 2&gt;</a>;</div>
<div class="line"><a name="l00083"></a><span class="lineno">   83</span>&#160; </div>
<div class="line"><a name="l00084"></a><span class="lineno">   84</span>&#160;<span class="keyword">using</span> BBSet = <a class="code" href="classllvm_1_1SmallPtrSet.html">SmallPtrSet&lt;BasicBlock *, 8&gt;</a>;</div>
<div class="line"><a name="l00085"></a><span class="lineno">   85</span>&#160; </div>
<div class="line"><a name="l00086"></a><span class="lineno">   86</span>&#160;<span class="keyword">using</span> PhiMap = <a class="code" href="classllvm_1_1MapVector.html">MapVector&lt;PHINode *, BBValueVector&gt;</a>;</div>
<div class="line"><a name="l00087"></a><span class="lineno">   87</span>&#160;<span class="keyword">using</span> BB2BBVecMap = <a class="code" href="classllvm_1_1MapVector.html">MapVector&lt;BasicBlock *, BBVector&gt;</a>;</div>
<div class="line"><a name="l00088"></a><span class="lineno">   88</span>&#160; </div>
<div class="line"><a name="l00089"></a><span class="lineno">   89</span>&#160;<span class="keyword">using</span> BBPhiMap = <a class="code" href="classllvm_1_1DenseMap.html">DenseMap&lt;BasicBlock *, PhiMap&gt;</a>;</div>
<div class="line"><a name="l00090"></a><span class="lineno">   90</span>&#160;<span class="keyword">using</span> <a class="code" href="classllvm_1_1DenseMap.html">BBPredicates</a> = <a class="code" href="classllvm_1_1DenseMap.html">DenseMap&lt;BasicBlock *, Value *&gt;</a>;</div>
<div class="line"><a name="l00091"></a><span class="lineno">   91</span>&#160;<span class="keyword">using</span> PredMap = <a class="code" href="classllvm_1_1DenseMap.html">DenseMap&lt;BasicBlock *, BBPredicates&gt;</a>;</div>
<div class="line"><a name="l00092"></a><span class="lineno">   92</span>&#160;<span class="keyword">using</span> BB2BBMap = <a class="code" href="classllvm_1_1DenseMap.html">DenseMap&lt;BasicBlock *, BasicBlock *&gt;</a>;</div>
<div class="line"><a name="l00093"></a><span class="lineno">   93</span>&#160; </div>
<div class="line"><a name="l00094"></a><span class="lineno">   94</span>&#160;<span class="comment">// A traits type that is intended to be used in graph algorithms. The graph</span></div>
<div class="line"><a name="l00095"></a><span class="lineno">   95</span>&#160;<span class="comment">// traits starts at an entry node, and traverses the RegionNodes that are in</span></div>
<div class="line"><a name="l00096"></a><span class="lineno">   96</span>&#160;<span class="comment">// the Nodes set.</span></div>
<div class="line"><a name="l00097"></a><span class="lineno">   97</span>&#160;<span class="keyword">struct </span>SubGraphTraits {</div>
<div class="line"><a name="l00098"></a><span class="lineno">   98</span>&#160;  <span class="keyword">using</span> <a class="code" href="namespacellvm_1_1rdf_1_1detail.html#a4e4412e524f5a4a2773066dffd854ea1">NodeRef</a> = std::pair&lt;RegionNode *, SmallDenseSet&lt;RegionNode *&gt; *&gt;;</div>
<div class="line"><a name="l00099"></a><span class="lineno">   99</span>&#160;  <span class="keyword">using</span> BaseSuccIterator = <a class="code" href="structllvm_1_1GraphTraits.html">GraphTraits&lt;RegionNode *&gt;::ChildIteratorType</a>;</div>
<div class="line"><a name="l00100"></a><span class="lineno">  100</span>&#160; </div>
<div class="line"><a name="l00101"></a><span class="lineno">  101</span>&#160;  <span class="comment">// This wraps a set of Nodes into the iterator, so we know which edges to</span></div>
<div class="line"><a name="l00102"></a><span class="lineno">  102</span>&#160;  <span class="comment">// filter out.</span></div>
<div class="line"><a name="l00103"></a><span class="lineno">  103</span>&#160;  <span class="keyword">class </span>WrappedSuccIterator</div>
<div class="line"><a name="l00104"></a><span class="lineno">  104</span>&#160;      : <span class="keyword">public</span> <a class="code" href="classllvm_1_1iterator__adaptor__base.html">iterator_adaptor_base</a>&lt;</div>
<div class="line"><a name="l00105"></a><span class="lineno">  105</span>&#160;            WrappedSuccIterator, BaseSuccIterator,</div>
<div class="line"><a name="l00106"></a><span class="lineno">  106</span>&#160;            typename std::iterator_traits&lt;BaseSuccIterator&gt;::iterator_category,</div>
<div class="line"><a name="l00107"></a><span class="lineno">  107</span>&#160;            NodeRef, std::ptrdiff_t, NodeRef *, NodeRef&gt; {</div>
<div class="line"><a name="l00108"></a><span class="lineno">  108</span>&#160;    <a class="code" href="classllvm_1_1SmallDenseSet.html">SmallDenseSet&lt;RegionNode *&gt;</a> *Nodes;</div>
<div class="line"><a name="l00109"></a><span class="lineno">  109</span>&#160; </div>
<div class="line"><a name="l00110"></a><span class="lineno">  110</span>&#160;  <span class="keyword">public</span>:</div>
<div class="line"><a name="l00111"></a><span class="lineno">  111</span>&#160;    WrappedSuccIterator(BaseSuccIterator It, <a class="code" href="classllvm_1_1SmallDenseSet.html">SmallDenseSet&lt;RegionNode *&gt;</a> *Nodes)</div>
<div class="line"><a name="l00112"></a><span class="lineno">  112</span>&#160;        : <a class="code" href="classllvm_1_1iterator__adaptor__base.html">iterator_adaptor_base</a>(It), Nodes(Nodes) {}</div>
<div class="line"><a name="l00113"></a><span class="lineno">  113</span>&#160; </div>
<div class="line"><a name="l00114"></a><span class="lineno">  114</span>&#160;    <a class="code" href="namespacellvm_1_1rdf_1_1detail.html#a4e4412e524f5a4a2773066dffd854ea1">NodeRef</a> <a class="code" href="namespacellvm.html#a2366b4a30c90d2207626fb717dfb778d">operator*</a>()<span class="keyword"> const </span>{ <span class="keywordflow">return</span> {*<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>, Nodes}; }</div>
<div class="line"><a name="l00115"></a><span class="lineno">  115</span>&#160;  };</div>
<div class="line"><a name="l00116"></a><span class="lineno">  116</span>&#160; </div>
<div class="line"><a name="l00117"></a><span class="lineno">  117</span>&#160;  <span class="keyword">static</span> <span class="keywordtype">bool</span> filterAll(<span class="keyword">const</span> <a class="code" href="namespacellvm_1_1rdf_1_1detail.html#a4e4412e524f5a4a2773066dffd854ea1">NodeRef</a> &amp;<a class="code" href="regcomp_8c.html#a0240ac851181b84ac374872dc5434ee4">N</a>) { <span class="keywordflow">return</span> <span class="keyword">true</span>; }</div>
<div class="line"><a name="l00118"></a><span class="lineno">  118</span>&#160;  <span class="keyword">static</span> <span class="keywordtype">bool</span> filterSet(<span class="keyword">const</span> <a class="code" href="namespacellvm_1_1rdf_1_1detail.html#a4e4412e524f5a4a2773066dffd854ea1">NodeRef</a> &amp;<a class="code" href="regcomp_8c.html#a0240ac851181b84ac374872dc5434ee4">N</a>) { <span class="keywordflow">return</span> <a class="code" href="regcomp_8c.html#a0240ac851181b84ac374872dc5434ee4">N</a>.second-&gt;count(<a class="code" href="regcomp_8c.html#a0240ac851181b84ac374872dc5434ee4">N</a>.first); }</div>
<div class="line"><a name="l00119"></a><span class="lineno">  119</span>&#160; </div>
<div class="line"><a name="l00120"></a><span class="lineno">  120</span>&#160;  <span class="keyword">using</span> ChildIteratorType =</div>
<div class="line"><a name="l00121"></a><span class="lineno">  121</span>&#160;      <a class="code" href="classllvm_1_1filter__iterator__impl.html">filter_iterator</a>&lt;WrappedSuccIterator, bool (*)(<span class="keyword">const</span> <a class="code" href="namespacellvm_1_1rdf_1_1detail.html#a4e4412e524f5a4a2773066dffd854ea1">NodeRef</a> &amp;)&gt;;</div>
<div class="line"><a name="l00122"></a><span class="lineno">  122</span>&#160; </div>
<div class="line"><a name="l00123"></a><span class="lineno">  123</span>&#160;  <span class="keyword">static</span> <a class="code" href="namespacellvm_1_1rdf_1_1detail.html#a4e4412e524f5a4a2773066dffd854ea1">NodeRef</a> getEntryNode(<a class="code" href="classllvm_1_1Region.html">Region</a> *<a class="code" href="namespacellvm_1_1RISCVFenceField.html#a147be9e9780c1e33363ea572d4c7b25fa1835091d83e0e052cd1a32c99b2be731">R</a>) {</div>
<div class="line"><a name="l00124"></a><span class="lineno">  124</span>&#160;    <span class="keywordflow">return</span> {<a class="code" href="structllvm_1_1GraphTraits.html">GraphTraits&lt;Region *&gt;::getEntryNode</a>(<a class="code" href="namespacellvm_1_1RISCVFenceField.html#a147be9e9780c1e33363ea572d4c7b25fa1835091d83e0e052cd1a32c99b2be731">R</a>), <span class="keyword">nullptr</span>};</div>
<div class="line"><a name="l00125"></a><span class="lineno">  125</span>&#160;  }</div>
<div class="line"><a name="l00126"></a><span class="lineno">  126</span>&#160; </div>
<div class="line"><a name="l00127"></a><span class="lineno">  127</span>&#160;  <span class="keyword">static</span> <a class="code" href="namespacellvm_1_1rdf_1_1detail.html#a4e4412e524f5a4a2773066dffd854ea1">NodeRef</a> getEntryNode(<a class="code" href="namespacellvm_1_1rdf_1_1detail.html#a4e4412e524f5a4a2773066dffd854ea1">NodeRef</a> <a class="code" href="regcomp_8c.html#a0240ac851181b84ac374872dc5434ee4">N</a>) { <span class="keywordflow">return</span> <a class="code" href="regcomp_8c.html#a0240ac851181b84ac374872dc5434ee4">N</a>; }</div>
<div class="line"><a name="l00128"></a><span class="lineno">  128</span>&#160; </div>
<div class="line"><a name="l00129"></a><span class="lineno">  129</span>&#160;  <span class="keyword">static</span> <a class="code" href="classllvm_1_1iterator__range.html">iterator_range&lt;ChildIteratorType&gt;</a> <a class="code" href="namespacellvm.html#a77e0432868a8d88e98b2fdb383790e4a">children</a>(<span class="keyword">const</span> <a class="code" href="namespacellvm_1_1rdf_1_1detail.html#a4e4412e524f5a4a2773066dffd854ea1">NodeRef</a> &amp;<a class="code" href="regcomp_8c.html#a0240ac851181b84ac374872dc5434ee4">N</a>) {</div>
<div class="line"><a name="l00130"></a><span class="lineno">  130</span>&#160;    <span class="keyword">auto</span> *filter = <a class="code" href="regcomp_8c.html#a0240ac851181b84ac374872dc5434ee4">N</a>.second ? &amp;filterSet : &amp;filterAll;</div>
<div class="line"><a name="l00131"></a><span class="lineno">  131</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="namespacellvm.html#a943f22024cba236f495239754ca3c74b">make_filter_range</a>(</div>
<div class="line"><a name="l00132"></a><span class="lineno">  132</span>&#160;        make_range&lt;WrappedSuccIterator&gt;(</div>
<div class="line"><a name="l00133"></a><span class="lineno">  133</span>&#160;            {<a class="code" href="structllvm_1_1GraphTraits.html">GraphTraits&lt;RegionNode *&gt;::child_begin</a>(<a class="code" href="regcomp_8c.html#a0240ac851181b84ac374872dc5434ee4">N</a>.first), <a class="code" href="regcomp_8c.html#a0240ac851181b84ac374872dc5434ee4">N</a>.second},</div>
<div class="line"><a name="l00134"></a><span class="lineno">  134</span>&#160;            {<a class="code" href="structllvm_1_1GraphTraits.html">GraphTraits&lt;RegionNode *&gt;::child_end</a>(<a class="code" href="regcomp_8c.html#a0240ac851181b84ac374872dc5434ee4">N</a>.first), <a class="code" href="regcomp_8c.html#a0240ac851181b84ac374872dc5434ee4">N</a>.second}),</div>
<div class="line"><a name="l00135"></a><span class="lineno">  135</span>&#160;        filter);</div>
<div class="line"><a name="l00136"></a><span class="lineno">  136</span>&#160;  }</div>
<div class="line"><a name="l00137"></a><span class="lineno">  137</span>&#160; </div>
<div class="line"><a name="l00138"></a><span class="lineno">  138</span>&#160;  <span class="keyword">static</span> ChildIteratorType child_begin(<span class="keyword">const</span> <a class="code" href="namespacellvm_1_1rdf_1_1detail.html#a4e4412e524f5a4a2773066dffd854ea1">NodeRef</a> &amp;<a class="code" href="regcomp_8c.html#a0240ac851181b84ac374872dc5434ee4">N</a>) {</div>
<div class="line"><a name="l00139"></a><span class="lineno">  139</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="namespacellvm.html#a77e0432868a8d88e98b2fdb383790e4a">children</a>(<a class="code" href="regcomp_8c.html#a0240ac851181b84ac374872dc5434ee4">N</a>).begin();</div>
<div class="line"><a name="l00140"></a><span class="lineno">  140</span>&#160;  }</div>
<div class="line"><a name="l00141"></a><span class="lineno">  141</span>&#160; </div>
<div class="line"><a name="l00142"></a><span class="lineno">  142</span>&#160;  <span class="keyword">static</span> ChildIteratorType child_end(<span class="keyword">const</span> <a class="code" href="namespacellvm_1_1rdf_1_1detail.html#a4e4412e524f5a4a2773066dffd854ea1">NodeRef</a> &amp;<a class="code" href="regcomp_8c.html#a0240ac851181b84ac374872dc5434ee4">N</a>) {</div>
<div class="line"><a name="l00143"></a><span class="lineno">  143</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="namespacellvm.html#a77e0432868a8d88e98b2fdb383790e4a">children</a>(<a class="code" href="regcomp_8c.html#a0240ac851181b84ac374872dc5434ee4">N</a>).end();</div>
<div class="line"><a name="l00144"></a><span class="lineno">  144</span>&#160;  }</div>
<div class="line"><a name="l00145"></a><span class="lineno">  145</span>&#160;};</div>
<div class="line"><a name="l00146"></a><span class="lineno">  146</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l00147"></a><span class="lineno">  147</span>&#160;<span class="comment">/// Finds the nearest common dominator of a set of BasicBlocks.</span></div>
<div class="line"><a name="l00148"></a><span class="lineno">  148</span>&#160;<span class="comment">///</span></div>
<div class="line"><a name="l00149"></a><span class="lineno">  149</span>&#160;<span class="comment">/// For every BB you add to the set, you can specify whether we &quot;remember&quot; the</span></div>
<div class="line"><a name="l00150"></a><span class="lineno">  150</span>&#160;<span class="comment">/// block.  When you get the common dominator, you can also ask whether it&#39;s one</span></div>
<div class="line"><a name="l00151"></a><span class="lineno">  151</span>&#160;<span class="comment">/// of the blocks we remembered.</span></div>
<div class="line"><a name="l00152"></a><span class="lineno">  152</span>&#160;<span class="comment"></span><span class="keyword">class </span>NearestCommonDominator {</div>
<div class="line"><a name="l00153"></a><span class="lineno">  153</span>&#160;  <a class="code" href="classllvm_1_1DominatorTree.html">DominatorTree</a> *DT;</div>
<div class="line"><a name="l00154"></a><span class="lineno">  154</span>&#160;  <a class="code" href="classllvm_1_1BasicBlock.html">BasicBlock</a> *Result = <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l00155"></a><span class="lineno">  155</span>&#160;  <span class="keywordtype">bool</span> ResultIsRemembered = <span class="keyword">false</span>;</div>
<div class="line"><a name="l00156"></a><span class="lineno">  156</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l00157"></a><span class="lineno">  157</span>&#160;<span class="comment">  /// Add BB to the resulting dominator.</span></div>
<div class="line"><a name="l00158"></a><span class="lineno">  158</span>&#160;<span class="comment"></span>  <span class="keywordtype">void</span> addBlock(<a class="code" href="classllvm_1_1BasicBlock.html">BasicBlock</a> *<a class="code" href="lib_2CodeGen_2README_8txt.html#a09776db24cf586ec9f1e18f3bae14099">BB</a>, <span class="keywordtype">bool</span> Remember) {</div>
<div class="line"><a name="l00159"></a><span class="lineno">  159</span>&#160;    <span class="keywordflow">if</span> (!Result) {</div>
<div class="line"><a name="l00160"></a><span class="lineno">  160</span>&#160;      Result = <a class="code" href="lib_2CodeGen_2README_8txt.html#a09776db24cf586ec9f1e18f3bae14099">BB</a>;</div>
<div class="line"><a name="l00161"></a><span class="lineno">  161</span>&#160;      ResultIsRemembered = Remember;</div>
<div class="line"><a name="l00162"></a><span class="lineno">  162</span>&#160;      <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l00163"></a><span class="lineno">  163</span>&#160;    }</div>
<div class="line"><a name="l00164"></a><span class="lineno">  164</span>&#160; </div>
<div class="line"><a name="l00165"></a><span class="lineno">  165</span>&#160;    <a class="code" href="classllvm_1_1BasicBlock.html">BasicBlock</a> *NewResult = DT-&gt;<a class="code" href="classllvm_1_1DominatorTreeBase.html#af555c3593d46d5f057fbebc8d292eac8">findNearestCommonDominator</a>(Result, <a class="code" href="lib_2CodeGen_2README_8txt.html#a09776db24cf586ec9f1e18f3bae14099">BB</a>);</div>
<div class="line"><a name="l00166"></a><span class="lineno">  166</span>&#160;    <span class="keywordflow">if</span> (NewResult != Result)</div>
<div class="line"><a name="l00167"></a><span class="lineno">  167</span>&#160;      ResultIsRemembered = <span class="keyword">false</span>;</div>
<div class="line"><a name="l00168"></a><span class="lineno">  168</span>&#160;    <span class="keywordflow">if</span> (NewResult == <a class="code" href="lib_2CodeGen_2README_8txt.html#a09776db24cf586ec9f1e18f3bae14099">BB</a>)</div>
<div class="line"><a name="l00169"></a><span class="lineno">  169</span>&#160;      ResultIsRemembered |= Remember;</div>
<div class="line"><a name="l00170"></a><span class="lineno">  170</span>&#160;    Result = NewResult;</div>
<div class="line"><a name="l00171"></a><span class="lineno">  171</span>&#160;  }</div>
<div class="line"><a name="l00172"></a><span class="lineno">  172</span>&#160; </div>
<div class="line"><a name="l00173"></a><span class="lineno">  173</span>&#160;<span class="keyword">public</span>:</div>
<div class="line"><a name="l00174"></a><span class="lineno">  174</span>&#160;  <span class="keyword">explicit</span> NearestCommonDominator(<a class="code" href="classllvm_1_1DominatorTree.html">DominatorTree</a> *DomTree) : DT(DomTree) {}</div>
<div class="line"><a name="l00175"></a><span class="lineno">  175</span>&#160; </div>
<div class="line"><a name="l00176"></a><span class="lineno">  176</span>&#160;  <span class="keywordtype">void</span> addBlock(<a class="code" href="classllvm_1_1BasicBlock.html">BasicBlock</a> *<a class="code" href="lib_2CodeGen_2README_8txt.html#a09776db24cf586ec9f1e18f3bae14099">BB</a>) {</div>
<div class="line"><a name="l00177"></a><span class="lineno">  177</span>&#160;    addBlock(<a class="code" href="lib_2CodeGen_2README_8txt.html#a09776db24cf586ec9f1e18f3bae14099">BB</a>, <span class="comment">/* Remember = */</span> <span class="keyword">false</span>);</div>
<div class="line"><a name="l00178"></a><span class="lineno">  178</span>&#160;  }</div>
<div class="line"><a name="l00179"></a><span class="lineno">  179</span>&#160; </div>
<div class="line"><a name="l00180"></a><span class="lineno">  180</span>&#160;  <span class="keywordtype">void</span> addAndRememberBlock(<a class="code" href="classllvm_1_1BasicBlock.html">BasicBlock</a> *<a class="code" href="lib_2CodeGen_2README_8txt.html#a09776db24cf586ec9f1e18f3bae14099">BB</a>) {</div>
<div class="line"><a name="l00181"></a><span class="lineno">  181</span>&#160;    addBlock(<a class="code" href="lib_2CodeGen_2README_8txt.html#a09776db24cf586ec9f1e18f3bae14099">BB</a>, <span class="comment">/* Remember = */</span> <span class="keyword">true</span>);</div>
<div class="line"><a name="l00182"></a><span class="lineno">  182</span>&#160;  }</div>
<div class="line"><a name="l00183"></a><span class="lineno">  183</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l00184"></a><span class="lineno">  184</span>&#160;<span class="comment">  /// Get the nearest common dominator of all the BBs added via addBlock() and</span></div>
<div class="line"><a name="l00185"></a><span class="lineno">  185</span>&#160;<span class="comment">  /// addAndRememberBlock().</span></div>
<div class="line"><a name="l00186"></a><span class="lineno">  186</span>&#160;<span class="comment"></span>  <a class="code" href="classllvm_1_1BasicBlock.html">BasicBlock</a> *<a class="code" href="README__P9_8txt.html#ae070adaf1b4bf0e7c12fcae2b9c5ae67">result</a>() { <span class="keywordflow">return</span> Result; }</div>
<div class="line"><a name="l00187"></a><span class="lineno">  187</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l00188"></a><span class="lineno">  188</span>&#160;<span class="comment">  /// Is the BB returned by getResult() one of the blocks we added to the set</span></div>
<div class="line"><a name="l00189"></a><span class="lineno">  189</span>&#160;<span class="comment">  /// with addAndRememberBlock()?</span></div>
<div class="line"><a name="l00190"></a><span class="lineno">  190</span>&#160;<span class="comment"></span>  <span class="keywordtype">bool</span> resultIsRememberedBlock() { <span class="keywordflow">return</span> ResultIsRemembered; }</div>
<div class="line"><a name="l00191"></a><span class="lineno">  191</span>&#160;};</div>
<div class="line"><a name="l00192"></a><span class="lineno">  192</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l00193"></a><span class="lineno">  193</span>&#160;<span class="comment">/// Transforms the control flow graph on one single entry/exit region</span></div>
<div class="line"><a name="l00194"></a><span class="lineno">  194</span>&#160;<span class="comment">/// at a time.</span></div>
<div class="line"><a name="l00195"></a><span class="lineno">  195</span>&#160;<span class="comment">///</span></div>
<div class="line"><a name="l00196"></a><span class="lineno">  196</span>&#160;<span class="comment">/// After the transform all &quot;If&quot;/&quot;Then&quot;/&quot;Else&quot; style control flow looks like</span></div>
<div class="line"><a name="l00197"></a><span class="lineno">  197</span>&#160;<span class="comment">/// this:</span></div>
<div class="line"><a name="l00198"></a><span class="lineno">  198</span>&#160;<span class="comment">///</span></div>
<div class="line"><a name="l00199"></a><span class="lineno">  199</span>&#160;<span class="comment">/// \verbatim</span></div>
<div class="line"><a name="l00200"></a><span class="lineno">  200</span>&#160;<span class="comment">/// 1</span></div>
<div class="line"><a name="l00201"></a><span class="lineno">  201</span>&#160;<span class="comment">/// ||</span></div>
<div class="line"><a name="l00202"></a><span class="lineno">  202</span>&#160;<span class="comment">/// | |</span></div>
<div class="line"><a name="l00203"></a><span class="lineno">  203</span>&#160;<span class="comment">/// 2 |</span></div>
<div class="line"><a name="l00204"></a><span class="lineno">  204</span>&#160;<span class="comment">/// | /</span></div>
<div class="line"><a name="l00205"></a><span class="lineno">  205</span>&#160;<span class="comment">/// |/</span></div>
<div class="line"><a name="l00206"></a><span class="lineno">  206</span>&#160;<span class="comment">/// 3</span></div>
<div class="line"><a name="l00207"></a><span class="lineno">  207</span>&#160;<span class="comment">/// ||   Where:</span></div>
<div class="line"><a name="l00208"></a><span class="lineno">  208</span>&#160;<span class="comment">/// | |  1 = &quot;If&quot; block, calculates the condition</span></div>
<div class="line"><a name="l00209"></a><span class="lineno">  209</span>&#160;<span class="comment">/// 4 |  2 = &quot;Then&quot; subregion, runs if the condition is true</span></div>
<div class="line"><a name="l00210"></a><span class="lineno">  210</span>&#160;<span class="comment">/// | /  3 = &quot;Flow&quot; blocks, newly inserted flow blocks, rejoins the flow</span></div>
<div class="line"><a name="l00211"></a><span class="lineno">  211</span>&#160;<span class="comment">/// |/   4 = &quot;Else&quot; optional subregion, runs if the condition is false</span></div>
<div class="line"><a name="l00212"></a><span class="lineno">  212</span>&#160;<span class="comment">/// 5    5 = &quot;End&quot; block, also rejoins the control flow</span></div>
<div class="line"><a name="l00213"></a><span class="lineno">  213</span>&#160;<span class="comment">/// \endverbatim</span></div>
<div class="line"><a name="l00214"></a><span class="lineno">  214</span>&#160;<span class="comment">///</span></div>
<div class="line"><a name="l00215"></a><span class="lineno">  215</span>&#160;<span class="comment">/// Control flow is expressed as a branch where the true exit goes into the</span></div>
<div class="line"><a name="l00216"></a><span class="lineno">  216</span>&#160;<span class="comment">/// &quot;Then&quot;/&quot;Else&quot; region, while the false exit skips the region</span></div>
<div class="line"><a name="l00217"></a><span class="lineno">  217</span>&#160;<span class="comment">/// The condition for the optional &quot;Else&quot; region is expressed as a PHI node.</span></div>
<div class="line"><a name="l00218"></a><span class="lineno">  218</span>&#160;<span class="comment">/// The incoming values of the PHI node are true for the &quot;If&quot; edge and false</span></div>
<div class="line"><a name="l00219"></a><span class="lineno">  219</span>&#160;<span class="comment">/// for the &quot;Then&quot; edge.</span></div>
<div class="line"><a name="l00220"></a><span class="lineno">  220</span>&#160;<span class="comment">///</span></div>
<div class="line"><a name="l00221"></a><span class="lineno">  221</span>&#160;<span class="comment">/// Additionally to that even complicated loops look like this:</span></div>
<div class="line"><a name="l00222"></a><span class="lineno">  222</span>&#160;<span class="comment">///</span></div>
<div class="line"><a name="l00223"></a><span class="lineno">  223</span>&#160;<span class="comment">/// \verbatim</span></div>
<div class="line"><a name="l00224"></a><span class="lineno">  224</span>&#160;<span class="comment">/// 1</span></div>
<div class="line"><a name="l00225"></a><span class="lineno">  225</span>&#160;<span class="comment">/// ||</span></div>
<div class="line"><a name="l00226"></a><span class="lineno">  226</span>&#160;<span class="comment">/// | |</span></div>
<div class="line"><a name="l00227"></a><span class="lineno">  227</span>&#160;<span class="comment">/// 2 ^  Where:</span></div>
<div class="line"><a name="l00228"></a><span class="lineno">  228</span>&#160;<span class="comment">/// | /  1 = &quot;Entry&quot; block</span></div>
<div class="line"><a name="l00229"></a><span class="lineno">  229</span>&#160;<span class="comment">/// |/   2 = &quot;Loop&quot; optional subregion, with all exits at &quot;Flow&quot; block</span></div>
<div class="line"><a name="l00230"></a><span class="lineno">  230</span>&#160;<span class="comment">/// 3    3 = &quot;Flow&quot; block, with back edge to entry block</span></div>
<div class="line"><a name="l00231"></a><span class="lineno">  231</span>&#160;<span class="comment">/// |</span></div>
<div class="line"><a name="l00232"></a><span class="lineno">  232</span>&#160;<span class="comment">/// \endverbatim</span></div>
<div class="line"><a name="l00233"></a><span class="lineno">  233</span>&#160;<span class="comment">///</span></div>
<div class="line"><a name="l00234"></a><span class="lineno">  234</span>&#160;<span class="comment">/// The back edge of the &quot;Flow&quot; block is always on the false side of the branch</span></div>
<div class="line"><a name="l00235"></a><span class="lineno">  235</span>&#160;<span class="comment">/// while the true side continues the general flow. So the loop condition</span></div>
<div class="line"><a name="l00236"></a><span class="lineno">  236</span>&#160;<span class="comment">/// consist of a network of PHI nodes where the true incoming values expresses</span></div>
<div class="line"><a name="l00237"></a><span class="lineno">  237</span>&#160;<span class="comment">/// breaks and the false values expresses continue states.</span></div>
<div class="line"><a name="l00238"></a><span class="lineno">  238</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l00239"></a><span class="lineno">  239</span>&#160;<span class="keyword">class </span>StructurizeCFG {</div>
<div class="line"><a name="l00240"></a><span class="lineno">  240</span>&#160;  <a class="code" href="classllvm_1_1Type.html">Type</a> *<a class="code" href="namespacellvm.html#a965a7b0afb2678973d155a103b9f55b5">Boolean</a>;</div>
<div class="line"><a name="l00241"></a><span class="lineno">  241</span>&#160;  <a class="code" href="classllvm_1_1ConstantInt.html">ConstantInt</a> *BoolTrue;</div>
<div class="line"><a name="l00242"></a><span class="lineno">  242</span>&#160;  <a class="code" href="classllvm_1_1ConstantInt.html">ConstantInt</a> *BoolFalse;</div>
<div class="line"><a name="l00243"></a><span class="lineno">  243</span>&#160;  <a class="code" href="classllvm_1_1UndefValue.html">UndefValue</a> *BoolUndef;</div>
<div class="line"><a name="l00244"></a><span class="lineno">  244</span>&#160; </div>
<div class="line"><a name="l00245"></a><span class="lineno">  245</span>&#160;  <a class="code" href="classllvm_1_1Function.html">Function</a> *Func;</div>
<div class="line"><a name="l00246"></a><span class="lineno">  246</span>&#160;  <a class="code" href="classllvm_1_1Region.html">Region</a> *ParentRegion;</div>
<div class="line"><a name="l00247"></a><span class="lineno">  247</span>&#160; </div>
<div class="line"><a name="l00248"></a><span class="lineno">  248</span>&#160;  <a class="code" href="classllvm_1_1LegacyDivergenceAnalysis.html">LegacyDivergenceAnalysis</a> *<a class="code" href="namespacellvm_1_1M68kBeads.html#afbb60528aad372e0f063768acfde38adaa98d0c355559e96d77f0eb2adb883db9">DA</a> = <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l00249"></a><span class="lineno">  249</span>&#160;  <a class="code" href="classllvm_1_1DominatorTree.html">DominatorTree</a> *DT;</div>
<div class="line"><a name="l00250"></a><span class="lineno">  250</span>&#160; </div>
<div class="line"><a name="l00251"></a><span class="lineno">  251</span>&#160;  <a class="code" href="classllvm_1_1SmallVector.html">SmallVector&lt;RegionNode *, 8&gt;</a> Order;</div>
<div class="line"><a name="l00252"></a><span class="lineno">  252</span>&#160;  BBSet Visited;</div>
<div class="line"><a name="l00253"></a><span class="lineno">  253</span>&#160; </div>
<div class="line"><a name="l00254"></a><span class="lineno">  254</span>&#160;  <a class="code" href="classllvm_1_1SmallVector.html">SmallVector&lt;WeakVH, 8&gt;</a> AffectedPhis;</div>
<div class="line"><a name="l00255"></a><span class="lineno">  255</span>&#160;  BBPhiMap DeletedPhis;</div>
<div class="line"><a name="l00256"></a><span class="lineno">  256</span>&#160;  BB2BBVecMap AddedPhis;</div>
<div class="line"><a name="l00257"></a><span class="lineno">  257</span>&#160; </div>
<div class="line"><a name="l00258"></a><span class="lineno">  258</span>&#160;  PredMap Predicates;</div>
<div class="line"><a name="l00259"></a><span class="lineno">  259</span>&#160;  BranchVector Conditions;</div>
<div class="line"><a name="l00260"></a><span class="lineno">  260</span>&#160; </div>
<div class="line"><a name="l00261"></a><span class="lineno">  261</span>&#160;  BB2BBMap <a class="code" href="HexagonHardwareLoops_8cpp.html#ada7c1594a393ede3ce32602d64d7ddb2">Loops</a>;</div>
<div class="line"><a name="l00262"></a><span class="lineno">  262</span>&#160;  PredMap LoopPreds;</div>
<div class="line"><a name="l00263"></a><span class="lineno">  263</span>&#160;  BranchVector LoopConds;</div>
<div class="line"><a name="l00264"></a><span class="lineno">  264</span>&#160; </div>
<div class="line"><a name="l00265"></a><span class="lineno">  265</span>&#160;  <a class="code" href="classllvm_1_1RegionNode.html">RegionNode</a> *PrevNode;</div>
<div class="line"><a name="l00266"></a><span class="lineno">  266</span>&#160; </div>
<div class="line"><a name="l00267"></a><span class="lineno">  267</span>&#160;  <span class="keywordtype">void</span> orderNodes();</div>
<div class="line"><a name="l00268"></a><span class="lineno">  268</span>&#160; </div>
<div class="line"><a name="l00269"></a><span class="lineno">  269</span>&#160;  <span class="keywordtype">void</span> analyzeLoops(<a class="code" href="classllvm_1_1RegionNode.html">RegionNode</a> *<a class="code" href="regcomp_8c.html#a0240ac851181b84ac374872dc5434ee4">N</a>);</div>
<div class="line"><a name="l00270"></a><span class="lineno">  270</span>&#160; </div>
<div class="line"><a name="l00271"></a><span class="lineno">  271</span>&#160;  <a class="code" href="classllvm_1_1Value.html">Value</a> *buildCondition(<a class="code" href="classllvm_1_1BranchInst.html">BranchInst</a> *<a class="code" href="namespacellvm_1_1M68kBeads.html#ac808f5f233066c25641be8a6c1e2b100a27d0e059322508a76f918503800ef1bd">Term</a>, <span class="keywordtype">unsigned</span> Idx, <span class="keywordtype">bool</span> Invert);</div>
<div class="line"><a name="l00272"></a><span class="lineno">  272</span>&#160; </div>
<div class="line"><a name="l00273"></a><span class="lineno">  273</span>&#160;  <span class="keywordtype">void</span> gatherPredicates(<a class="code" href="classllvm_1_1RegionNode.html">RegionNode</a> *<a class="code" href="regcomp_8c.html#a0240ac851181b84ac374872dc5434ee4">N</a>);</div>
<div class="line"><a name="l00274"></a><span class="lineno">  274</span>&#160; </div>
<div class="line"><a name="l00275"></a><span class="lineno">  275</span>&#160;  <span class="keywordtype">void</span> collectInfos();</div>
<div class="line"><a name="l00276"></a><span class="lineno">  276</span>&#160; </div>
<div class="line"><a name="l00277"></a><span class="lineno">  277</span>&#160;  <span class="keywordtype">void</span> insertConditions(<span class="keywordtype">bool</span> <a class="code" href="HexagonHardwareLoops_8cpp.html#ada7c1594a393ede3ce32602d64d7ddb2">Loops</a>);</div>
<div class="line"><a name="l00278"></a><span class="lineno">  278</span>&#160; </div>
<div class="line"><a name="l00279"></a><span class="lineno">  279</span>&#160;  <span class="keywordtype">void</span> delPhiValues(<a class="code" href="classllvm_1_1BasicBlock.html">BasicBlock</a> *<a class="code" href="BlockVerifier_8cpp.html#ae45c7d73c0ff5d177b59153ffae77f84">From</a>, <a class="code" href="classllvm_1_1BasicBlock.html">BasicBlock</a> *To);</div>
<div class="line"><a name="l00280"></a><span class="lineno">  280</span>&#160; </div>
<div class="line"><a name="l00281"></a><span class="lineno">  281</span>&#160;  <span class="keywordtype">void</span> addPhiValues(<a class="code" href="classllvm_1_1BasicBlock.html">BasicBlock</a> *<a class="code" href="BlockVerifier_8cpp.html#ae45c7d73c0ff5d177b59153ffae77f84">From</a>, <a class="code" href="classllvm_1_1BasicBlock.html">BasicBlock</a> *To);</div>
<div class="line"><a name="l00282"></a><span class="lineno">  282</span>&#160; </div>
<div class="line"><a name="l00283"></a><span class="lineno">  283</span>&#160;  <span class="keywordtype">void</span> setPhiValues();</div>
<div class="line"><a name="l00284"></a><span class="lineno">  284</span>&#160; </div>
<div class="line"><a name="l00285"></a><span class="lineno">  285</span>&#160;  <span class="keywordtype">void</span> simplifyAffectedPhis();</div>
<div class="line"><a name="l00286"></a><span class="lineno">  286</span>&#160; </div>
<div class="line"><a name="l00287"></a><span class="lineno">  287</span>&#160;  <span class="keywordtype">void</span> killTerminator(<a class="code" href="classllvm_1_1BasicBlock.html">BasicBlock</a> *<a class="code" href="lib_2CodeGen_2README_8txt.html#a09776db24cf586ec9f1e18f3bae14099">BB</a>);</div>
<div class="line"><a name="l00288"></a><span class="lineno">  288</span>&#160; </div>
<div class="line"><a name="l00289"></a><span class="lineno">  289</span>&#160;  <span class="keywordtype">void</span> changeExit(<a class="code" href="classllvm_1_1RegionNode.html">RegionNode</a> *Node, <a class="code" href="classllvm_1_1BasicBlock.html">BasicBlock</a> *NewExit,</div>
<div class="line"><a name="l00290"></a><span class="lineno">  290</span>&#160;                  <span class="keywordtype">bool</span> IncludeDominator);</div>
<div class="line"><a name="l00291"></a><span class="lineno">  291</span>&#160; </div>
<div class="line"><a name="l00292"></a><span class="lineno">  292</span>&#160;  <a class="code" href="classllvm_1_1BasicBlock.html">BasicBlock</a> *getNextFlow(<a class="code" href="classllvm_1_1BasicBlock.html">BasicBlock</a> *Dominator);</div>
<div class="line"><a name="l00293"></a><span class="lineno">  293</span>&#160; </div>
<div class="line"><a name="l00294"></a><span class="lineno">  294</span>&#160;  <a class="code" href="classllvm_1_1BasicBlock.html">BasicBlock</a> *needPrefix(<span class="keywordtype">bool</span> NeedEmpty);</div>
<div class="line"><a name="l00295"></a><span class="lineno">  295</span>&#160; </div>
<div class="line"><a name="l00296"></a><span class="lineno">  296</span>&#160;  <a class="code" href="classllvm_1_1BasicBlock.html">BasicBlock</a> *needPostfix(<a class="code" href="classllvm_1_1BasicBlock.html">BasicBlock</a> *<a class="code" href="SIAnnotateControlFlow_8cpp.html#acf797fa91d5b7065dfb68a2492df28c1">Flow</a>, <span class="keywordtype">bool</span> ExitUseAllowed);</div>
<div class="line"><a name="l00297"></a><span class="lineno">  297</span>&#160; </div>
<div class="line"><a name="l00298"></a><span class="lineno">  298</span>&#160;  <span class="keywordtype">void</span> setPrevNode(<a class="code" href="classllvm_1_1BasicBlock.html">BasicBlock</a> *<a class="code" href="lib_2CodeGen_2README_8txt.html#a09776db24cf586ec9f1e18f3bae14099">BB</a>);</div>
<div class="line"><a name="l00299"></a><span class="lineno">  299</span>&#160; </div>
<div class="line"><a name="l00300"></a><span class="lineno">  300</span>&#160;  <span class="keywordtype">bool</span> dominatesPredicates(<a class="code" href="classllvm_1_1BasicBlock.html">BasicBlock</a> *<a class="code" href="lib_2CodeGen_2README_8txt.html#a09776db24cf586ec9f1e18f3bae14099">BB</a>, <a class="code" href="classllvm_1_1RegionNode.html">RegionNode</a> *Node);</div>
<div class="line"><a name="l00301"></a><span class="lineno">  301</span>&#160; </div>
<div class="line"><a name="l00302"></a><span class="lineno">  302</span>&#160;  <span class="keywordtype">bool</span> isPredictableTrue(<a class="code" href="classllvm_1_1RegionNode.html">RegionNode</a> *Node);</div>
<div class="line"><a name="l00303"></a><span class="lineno">  303</span>&#160; </div>
<div class="line"><a name="l00304"></a><span class="lineno">  304</span>&#160;  <span class="keywordtype">void</span> wireFlow(<span class="keywordtype">bool</span> ExitUseAllowed, <a class="code" href="classllvm_1_1BasicBlock.html">BasicBlock</a> *LoopEnd);</div>
<div class="line"><a name="l00305"></a><span class="lineno">  305</span>&#160; </div>
<div class="line"><a name="l00306"></a><span class="lineno">  306</span>&#160;  <span class="keywordtype">void</span> handleLoops(<span class="keywordtype">bool</span> ExitUseAllowed, <a class="code" href="classllvm_1_1BasicBlock.html">BasicBlock</a> *LoopEnd);</div>
<div class="line"><a name="l00307"></a><span class="lineno">  307</span>&#160; </div>
<div class="line"><a name="l00308"></a><span class="lineno">  308</span>&#160;  <span class="keywordtype">void</span> createFlow();</div>
<div class="line"><a name="l00309"></a><span class="lineno">  309</span>&#160; </div>
<div class="line"><a name="l00310"></a><span class="lineno">  310</span>&#160;  <span class="keywordtype">void</span> rebuildSSA();</div>
<div class="line"><a name="l00311"></a><span class="lineno">  311</span>&#160; </div>
<div class="line"><a name="l00312"></a><span class="lineno">  312</span>&#160;<span class="keyword">public</span>:</div>
<div class="line"><a name="l00313"></a><span class="lineno">  313</span>&#160;  <span class="keywordtype">void</span> <a class="code" href="namespacellvm_1_1cl.html#a10a041239ae1870cfcc064bfaa79fb65">init</a>(<a class="code" href="classllvm_1_1Region.html">Region</a> *<a class="code" href="namespacellvm_1_1RISCVFenceField.html#a147be9e9780c1e33363ea572d4c7b25fa1835091d83e0e052cd1a32c99b2be731">R</a>);</div>
<div class="line"><a name="l00314"></a><span class="lineno">  314</span>&#160;  <span class="keywordtype">bool</span> run(<a class="code" href="classllvm_1_1Region.html">Region</a> *<a class="code" href="namespacellvm_1_1RISCVFenceField.html#a147be9e9780c1e33363ea572d4c7b25fa1835091d83e0e052cd1a32c99b2be731">R</a>, <a class="code" href="classllvm_1_1DominatorTree.html">DominatorTree</a> *DT);</div>
<div class="line"><a name="l00315"></a><span class="lineno">  315</span>&#160;  <span class="keywordtype">bool</span> makeUniformRegion(<a class="code" href="classllvm_1_1Region.html">Region</a> *<a class="code" href="namespacellvm_1_1RISCVFenceField.html#a147be9e9780c1e33363ea572d4c7b25fa1835091d83e0e052cd1a32c99b2be731">R</a>, <a class="code" href="classllvm_1_1LegacyDivergenceAnalysis.html">LegacyDivergenceAnalysis</a> *<a class="code" href="namespacellvm_1_1M68kBeads.html#afbb60528aad372e0f063768acfde38adaa98d0c355559e96d77f0eb2adb883db9">DA</a>);</div>
<div class="line"><a name="l00316"></a><span class="lineno">  316</span>&#160;};</div>
<div class="line"><a name="l00317"></a><span class="lineno">  317</span>&#160; </div>
<div class="line"><a name="l00318"></a><span class="lineno">  318</span>&#160;<span class="keyword">class </span>StructurizeCFGLegacyPass : <span class="keyword">public</span> <a class="code" href="classllvm_1_1RegionPass.html">RegionPass</a> {</div>
<div class="line"><a name="l00319"></a><span class="lineno">  319</span>&#160;  <span class="keywordtype">bool</span> SkipUniformRegions;</div>
<div class="line"><a name="l00320"></a><span class="lineno">  320</span>&#160; </div>
<div class="line"><a name="l00321"></a><span class="lineno">  321</span>&#160;<span class="keyword">public</span>:</div>
<div class="line"><a name="l00322"></a><span class="lineno">  322</span>&#160;  <span class="keyword">static</span> <span class="keywordtype">char</span> <a class="code" href="namespacellvm_1_1Intrinsic.html#a80add6b3b1cdaec560907995127adc16">ID</a>;</div>
<div class="line"><a name="l00323"></a><span class="lineno">  323</span>&#160; </div>
<div class="line"><a name="l00324"></a><span class="lineno">  324</span>&#160;  <span class="keyword">explicit</span> StructurizeCFGLegacyPass(<span class="keywordtype">bool</span> SkipUniformRegions_ = <span class="keyword">false</span>)</div>
<div class="line"><a name="l00325"></a><span class="lineno">  325</span>&#160;      : <a class="code" href="classllvm_1_1RegionPass.html">RegionPass</a>(<a class="code" href="namespacellvm_1_1Intrinsic.html#a80add6b3b1cdaec560907995127adc16">ID</a>), SkipUniformRegions(SkipUniformRegions_) {</div>
<div class="line"><a name="l00326"></a><span class="lineno">  326</span>&#160;    <span class="keywordflow">if</span> (ForceSkipUniformRegions.<a class="code" href="classllvm_1_1cl_1_1Option.html#a2dc75fafb68e7669e776e19da7857cdf">getNumOccurrences</a>())</div>
<div class="line"><a name="l00327"></a><span class="lineno">  327</span>&#160;      SkipUniformRegions = ForceSkipUniformRegions.<a class="code" href="classllvm_1_1cl_1_1opt__storage.html#ac7ec9daaeeb00c69371e7f68bcd96938">getValue</a>();</div>
<div class="line"><a name="l00328"></a><span class="lineno">  328</span>&#160;    <a class="code" href="namespacellvm.html#a585c08a8817ef3bb09680baec46542f6">initializeStructurizeCFGLegacyPassPass</a>(*<a class="code" href="classllvm_1_1PassRegistry.html#a05a729900b76c89e808c6c3094921b2f">PassRegistry::getPassRegistry</a>());</div>
<div class="line"><a name="l00329"></a><span class="lineno">  329</span>&#160;  }</div>
<div class="line"><a name="l00330"></a><span class="lineno">  330</span>&#160; </div>
<div class="line"><a name="l00331"></a><span class="lineno">  331</span>&#160;  <span class="keywordtype">bool</span> runOnRegion(<a class="code" href="classllvm_1_1Region.html">Region</a> *<a class="code" href="namespacellvm_1_1RISCVFenceField.html#a147be9e9780c1e33363ea572d4c7b25fa1835091d83e0e052cd1a32c99b2be731">R</a>, <a class="code" href="classllvm_1_1RGPassManager.html">RGPassManager</a> &amp;RGM)<span class="keyword"> override </span>{</div>
<div class="line"><a name="l00332"></a><span class="lineno">  332</span>&#160;    StructurizeCFG SCFG;</div>
<div class="line"><a name="l00333"></a><span class="lineno">  333</span>&#160;    SCFG.init(<a class="code" href="namespacellvm_1_1RISCVFenceField.html#a147be9e9780c1e33363ea572d4c7b25fa1835091d83e0e052cd1a32c99b2be731">R</a>);</div>
<div class="line"><a name="l00334"></a><span class="lineno">  334</span>&#160;    <span class="keywordflow">if</span> (SkipUniformRegions) {</div>
<div class="line"><a name="l00335"></a><span class="lineno">  335</span>&#160;      <a class="code" href="classllvm_1_1LegacyDivergenceAnalysis.html">LegacyDivergenceAnalysis</a> *<a class="code" href="namespacellvm_1_1M68kBeads.html#afbb60528aad372e0f063768acfde38adaa98d0c355559e96d77f0eb2adb883db9">DA</a> = &amp;getAnalysis&lt;LegacyDivergenceAnalysis&gt;();</div>
<div class="line"><a name="l00336"></a><span class="lineno">  336</span>&#160;      <span class="keywordflow">if</span> (SCFG.makeUniformRegion(<a class="code" href="namespacellvm_1_1RISCVFenceField.html#a147be9e9780c1e33363ea572d4c7b25fa1835091d83e0e052cd1a32c99b2be731">R</a>, <a class="code" href="namespacellvm_1_1M68kBeads.html#afbb60528aad372e0f063768acfde38adaa98d0c355559e96d77f0eb2adb883db9">DA</a>))</div>
<div class="line"><a name="l00337"></a><span class="lineno">  337</span>&#160;        <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l00338"></a><span class="lineno">  338</span>&#160;    }</div>
<div class="line"><a name="l00339"></a><span class="lineno">  339</span>&#160;    <a class="code" href="classllvm_1_1DominatorTree.html">DominatorTree</a> *DT = &amp;getAnalysis&lt;DominatorTreeWrapperPass&gt;().getDomTree();</div>
<div class="line"><a name="l00340"></a><span class="lineno">  340</span>&#160;    <span class="keywordflow">return</span> SCFG.run(<a class="code" href="namespacellvm_1_1RISCVFenceField.html#a147be9e9780c1e33363ea572d4c7b25fa1835091d83e0e052cd1a32c99b2be731">R</a>, DT);</div>
<div class="line"><a name="l00341"></a><span class="lineno">  341</span>&#160;  }</div>
<div class="line"><a name="l00342"></a><span class="lineno">  342</span>&#160; </div>
<div class="line"><a name="l00343"></a><span class="lineno">  343</span>&#160;  <a class="code" href="classllvm_1_1StringRef.html">StringRef</a> getPassName()<span class="keyword"> const override </span>{ <span class="keywordflow">return</span> <span class="stringliteral">&quot;Structurize control flow&quot;</span>; }</div>
<div class="line"><a name="l00344"></a><span class="lineno">  344</span>&#160; </div>
<div class="line"><a name="l00345"></a><span class="lineno">  345</span>&#160;  <span class="keywordtype">void</span> getAnalysisUsage(<a class="code" href="classllvm_1_1AnalysisUsage.html">AnalysisUsage</a> &amp;AU)<span class="keyword"> const override </span>{</div>
<div class="line"><a name="l00346"></a><span class="lineno">  346</span>&#160;    <span class="keywordflow">if</span> (SkipUniformRegions)</div>
<div class="line"><a name="l00347"></a><span class="lineno">  347</span>&#160;      AU.<a class="code" href="classllvm_1_1AnalysisUsage.html#ae5c60fd282ee894c87ea02c3f0fcb6d0">addRequired</a>&lt;<a class="code" href="classllvm_1_1LegacyDivergenceAnalysis.html">LegacyDivergenceAnalysis</a>&gt;();</div>
<div class="line"><a name="l00348"></a><span class="lineno">  348</span>&#160;    AU.<a class="code" href="classllvm_1_1AnalysisUsage.html#a053677ebc731b47a534f841b11b5cf0c">addRequiredID</a>(<a class="code" href="namespacellvm.html#a6befa52763ee29f8df2bd2ea9c3525c7">LowerSwitchID</a>);</div>
<div class="line"><a name="l00349"></a><span class="lineno">  349</span>&#160;    AU.<a class="code" href="classllvm_1_1AnalysisUsage.html#ae5c60fd282ee894c87ea02c3f0fcb6d0">addRequired</a>&lt;<a class="code" href="classllvm_1_1DominatorTreeWrapperPass.html">DominatorTreeWrapperPass</a>&gt;();</div>
<div class="line"><a name="l00350"></a><span class="lineno">  350</span>&#160; </div>
<div class="line"><a name="l00351"></a><span class="lineno">  351</span>&#160;    AU.<a class="code" href="classllvm_1_1AnalysisUsage.html#a884f90190bca4bd354f2d5c91c264028">addPreserved</a>&lt;<a class="code" href="classllvm_1_1DominatorTreeWrapperPass.html">DominatorTreeWrapperPass</a>&gt;();</div>
<div class="line"><a name="l00352"></a><span class="lineno">  352</span>&#160;    <a class="code" href="classllvm_1_1Pass.html#a6590d0486104165ca40c7df0707f7b9e">RegionPass::getAnalysisUsage</a>(AU);</div>
<div class="line"><a name="l00353"></a><span class="lineno">  353</span>&#160;  }</div>
<div class="line"><a name="l00354"></a><span class="lineno">  354</span>&#160;};</div>
<div class="line"><a name="l00355"></a><span class="lineno">  355</span>&#160; </div>
<div class="line"><a name="l00356"></a><span class="lineno">  356</span>&#160;} <span class="comment">// end anonymous namespace</span></div>
<div class="line"><a name="l00357"></a><span class="lineno">  357</span>&#160; </div>
<div class="line"><a name="l00358"></a><span class="lineno">  358</span>&#160;<span class="keywordtype">char</span> <a class="code" href="namespacellvm_1_1Intrinsic.html#a80add6b3b1cdaec560907995127adc16">StructurizeCFGLegacyPass::ID</a> = 0;</div>
<div class="line"><a name="l00359"></a><span class="lineno">  359</span>&#160; </div>
<div class="line"><a name="l00360"></a><span class="lineno"><a class="line" href="StructurizeCFG_8cpp.html#aec6c42f972ff6a31d7483b408a246b3f">  360</a></span>&#160;<a class="code" href="StructurizeCFG_8cpp.html#aec6c42f972ff6a31d7483b408a246b3f">INITIALIZE_PASS_BEGIN</a>(StructurizeCFGLegacyPass, <span class="stringliteral">&quot;structurizecfg&quot;</span>,</div>
<div class="line"><a name="l00361"></a><span class="lineno">  361</span>&#160;                      <span class="stringliteral">&quot;Structurize the CFG&quot;</span>, <span class="keyword">false</span>, <span class="keyword">false</span>)</div>
<div class="line"><a name="l00362"></a><span class="lineno">  362</span>&#160;<a class="code" href="SVEIntrinsicOpts_8cpp.html#a2bb87eb1bcbc74783a83ae945eb8fa36">INITIALIZE_PASS_DEPENDENCY</a>(<a class="code" href="classllvm_1_1LegacyDivergenceAnalysis.html">LegacyDivergenceAnalysis</a>)</div>
<div class="line"><a name="l00363"></a><span class="lineno">  363</span>&#160;<a class="code" href="SVEIntrinsicOpts_8cpp.html#a2bb87eb1bcbc74783a83ae945eb8fa36">INITIALIZE_PASS_DEPENDENCY</a>(LowerSwitchLegacyPass)</div>
<div class="line"><a name="l00364"></a><span class="lineno">  364</span>&#160;<a class="code" href="SVEIntrinsicOpts_8cpp.html#a2bb87eb1bcbc74783a83ae945eb8fa36">INITIALIZE_PASS_DEPENDENCY</a>(<a class="code" href="classllvm_1_1DominatorTreeWrapperPass.html">DominatorTreeWrapperPass</a>)</div>
<div class="line"><a name="l00365"></a><span class="lineno">  365</span>&#160;<a class="code" href="SVEIntrinsicOpts_8cpp.html#a2bb87eb1bcbc74783a83ae945eb8fa36">INITIALIZE_PASS_DEPENDENCY</a>(<a class="code" href="classllvm_1_1RegionInfoPass.html">RegionInfoPass</a>)</div>
<div class="line"><a name="l00366"></a><span class="lineno"><a class="line" href="StructurizeCFG_8cpp.html#a53b11141046597311361c18a5b718d1b">  366</a></span>&#160;<a class="code" href="PassSupport_8h.html#a74ce8276b89067e806f67c45a6d92575">INITIALIZE_PASS_END</a>(StructurizeCFGLegacyPass, &quot;<a class="code" href="StructurizeCFG_8cpp.html#a53b11141046597311361c18a5b718d1b">structurizecfg</a>&quot;,</div>
<div class="line"><a name="l00367"></a><span class="lineno"><a class="line" href="StructurizeCFG_8cpp.html#a72d56124ae747d013c77ee0174434e33">  367</a></span>&#160;                    &quot;Structurize the <a class="code" href="StructurizeCFG_8cpp.html#a80eb276f1afe1f81669f43ab330fe521">CFG</a>&quot;, <a class="code" href="namespacefalse.html">false</a>, <a class="code" href="namespacefalse.html">false</a>)</div>
<div class="line"><a name="l00368"></a><span class="lineno">  368</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l00369"></a><span class="lineno">  369</span>&#160;<span class="comment">/// Build up the general order of nodes, by performing a topological sort of the</span></div>
<div class="line"><a name="l00370"></a><span class="lineno">  370</span>&#160;<span class="comment">/// parent region&#39;s nodes, while ensuring that there is no outer cycle node</span></div>
<div class="line"><a name="l00371"></a><span class="lineno">  371</span>&#160;<span class="comment">/// between any two inner cycle nodes.</span></div>
<div class="line"><a name="l00372"></a><span class="lineno">  372</span>&#160;<span class="comment"></span><span class="keywordtype">void</span> StructurizeCFG::orderNodes() {</div>
<div class="line"><a name="l00373"></a><span class="lineno">  373</span>&#160;  Order.resize(std::distance(<a class="code" href="structllvm_1_1GraphTraits.html">GraphTraits&lt;Region *&gt;::nodes_begin</a>(ParentRegion),</div>
<div class="line"><a name="l00374"></a><span class="lineno">  374</span>&#160;                             <a class="code" href="structllvm_1_1GraphTraits.html">GraphTraits&lt;Region *&gt;::nodes_end</a>(ParentRegion)));</div>
<div class="line"><a name="l00375"></a><span class="lineno">  375</span>&#160;  <span class="keywordflow">if</span> (Order.empty())</div>
<div class="line"><a name="l00376"></a><span class="lineno">  376</span>&#160;    <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l00377"></a><span class="lineno">  377</span>&#160; </div>
<div class="line"><a name="l00378"></a><span class="lineno">  378</span>&#160;  <a class="code" href="classllvm_1_1SmallDenseSet.html">SmallDenseSet&lt;RegionNode *&gt;</a> Nodes;</div>
<div class="line"><a name="l00379"></a><span class="lineno">  379</span>&#160;  <span class="keyword">auto</span> EntryNode = SubGraphTraits::getEntryNode(ParentRegion);</div>
<div class="line"><a name="l00380"></a><span class="lineno">  380</span>&#160; </div>
<div class="line"><a name="l00381"></a><span class="lineno">  381</span>&#160;  <span class="comment">// A list of range indices of SCCs in Order, to be processed.</span></div>
<div class="line"><a name="l00382"></a><span class="lineno">  382</span>&#160;  <a class="code" href="classllvm_1_1SmallVector.html">SmallVector&lt;std::pair&lt;unsigned, unsigned&gt;</a>, 8&gt; WorkList;</div>
<div class="line"><a name="l00383"></a><span class="lineno">  383</span>&#160;  <span class="keywordtype">unsigned</span> <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a> = 0, <a class="code" href="BuiltinGCs_8cpp.html#a6742d2e0a668baf1196ec69e158d5f15">E</a> = Order.size();</div>
<div class="line"><a name="l00384"></a><span class="lineno">  384</span>&#160;  <span class="keywordflow">while</span> (<span class="keyword">true</span>) {</div>
<div class="line"><a name="l00385"></a><span class="lineno">  385</span>&#160;    <span class="comment">// Run through all the SCCs in the subgraph starting with Entry.</span></div>
<div class="line"><a name="l00386"></a><span class="lineno">  386</span>&#160;    <span class="keywordflow">for</span> (<span class="keyword">auto</span> SCCI =</div>
<div class="line"><a name="l00387"></a><span class="lineno">  387</span>&#160;             <a class="code" href="classllvm_1_1scc__iterator.html">scc_iterator&lt;SubGraphTraits::NodeRef, SubGraphTraits&gt;::begin</a>(</div>
<div class="line"><a name="l00388"></a><span class="lineno">  388</span>&#160;                 EntryNode);</div>
<div class="line"><a name="l00389"></a><span class="lineno">  389</span>&#160;         !SCCI.<a class="code" href="classllvm_1_1scc__iterator.html#a7d6ec03718a5e48f3ec7ce22fefcb91d">isAtEnd</a>(); ++SCCI) {</div>
<div class="line"><a name="l00390"></a><span class="lineno">  390</span>&#160;      <span class="keyword">auto</span> &amp;<a class="code" href="namespacellvm_1_1AMDGPU_1_1CPol.html#a7d79a4b341da8ac60b91c1f4b1ea42c4aca1659af59093b2b14c2f8aad41e8e2a">SCC</a> = *SCCI;</div>
<div class="line"><a name="l00391"></a><span class="lineno">  391</span>&#160; </div>
<div class="line"><a name="l00392"></a><span class="lineno">  392</span>&#160;      <span class="comment">// An SCC up to the size of 2, can be reduced to an entry (the last node),</span></div>
<div class="line"><a name="l00393"></a><span class="lineno">  393</span>&#160;      <span class="comment">// and a possible additional node. Therefore, it is already in order, and</span></div>
<div class="line"><a name="l00394"></a><span class="lineno">  394</span>&#160;      <span class="comment">// there is no need to add it to the work-list.</span></div>
<div class="line"><a name="l00395"></a><span class="lineno">  395</span>&#160;      <span class="keywordtype">unsigned</span> <a class="code" href="namespacellvm_1_1Check.html#a067ee17412e800f03802fa9517685732a3450a9712780ac26b071f9da4288a396">Size</a> = <a class="code" href="namespacellvm_1_1AMDGPU_1_1CPol.html#a7d79a4b341da8ac60b91c1f4b1ea42c4aca1659af59093b2b14c2f8aad41e8e2a">SCC</a>.size();</div>
<div class="line"><a name="l00396"></a><span class="lineno">  396</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="namespacellvm_1_1Check.html#a067ee17412e800f03802fa9517685732a3450a9712780ac26b071f9da4288a396">Size</a> &gt; 2)</div>
<div class="line"><a name="l00397"></a><span class="lineno">  397</span>&#160;        WorkList.<a class="code" href="classllvm_1_1SmallVectorImpl.html#a396fcfee6914c76974b73c3d203da6a5">emplace_back</a>(<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>, <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a> + <a class="code" href="namespacellvm_1_1Check.html#a067ee17412e800f03802fa9517685732a3450a9712780ac26b071f9da4288a396">Size</a>);</div>
<div class="line"><a name="l00398"></a><span class="lineno">  398</span>&#160; </div>
<div class="line"><a name="l00399"></a><span class="lineno">  399</span>&#160;      <span class="comment">// Add the SCC nodes to the Order array.</span></div>
<div class="line"><a name="l00400"></a><span class="lineno">  400</span>&#160;      <span class="keywordflow">for</span> (<span class="keyword">auto</span> &amp;<a class="code" href="regcomp_8c.html#a0240ac851181b84ac374872dc5434ee4">N</a> : <a class="code" href="namespacellvm_1_1AMDGPU_1_1CPol.html#a7d79a4b341da8ac60b91c1f4b1ea42c4aca1659af59093b2b14c2f8aad41e8e2a">SCC</a>) {</div>
<div class="line"><a name="l00401"></a><span class="lineno">  401</span>&#160;        <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a> &lt; <a class="code" href="BuiltinGCs_8cpp.html#a6742d2e0a668baf1196ec69e158d5f15">E</a> &amp;&amp; <span class="stringliteral">&quot;SCC size mismatch!&quot;</span>);</div>
<div class="line"><a name="l00402"></a><span class="lineno">  402</span>&#160;        Order[<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>++] = <a class="code" href="regcomp_8c.html#a0240ac851181b84ac374872dc5434ee4">N</a>.first;</div>
<div class="line"><a name="l00403"></a><span class="lineno">  403</span>&#160;      }</div>
<div class="line"><a name="l00404"></a><span class="lineno">  404</span>&#160;    }</div>
<div class="line"><a name="l00405"></a><span class="lineno">  405</span>&#160;    <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a> == <a class="code" href="BuiltinGCs_8cpp.html#a6742d2e0a668baf1196ec69e158d5f15">E</a> &amp;&amp; <span class="stringliteral">&quot;SCC size mismatch!&quot;</span>);</div>
<div class="line"><a name="l00406"></a><span class="lineno">  406</span>&#160; </div>
<div class="line"><a name="l00407"></a><span class="lineno">  407</span>&#160;    <span class="comment">// If there are no more SCCs to order, then we are done.</span></div>
<div class="line"><a name="l00408"></a><span class="lineno">  408</span>&#160;    <span class="keywordflow">if</span> (WorkList.empty())</div>
<div class="line"><a name="l00409"></a><span class="lineno">  409</span>&#160;      <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00410"></a><span class="lineno">  410</span>&#160; </div>
<div class="line"><a name="l00411"></a><span class="lineno">  411</span>&#160;    std::tie(<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>, <a class="code" href="BuiltinGCs_8cpp.html#a6742d2e0a668baf1196ec69e158d5f15">E</a>) = WorkList.<a class="code" href="classllvm_1_1SmallVectorImpl.html#a07e23ae504e2b8c72fd055f93ded8899">pop_back_val</a>();</div>
<div class="line"><a name="l00412"></a><span class="lineno">  412</span>&#160; </div>
<div class="line"><a name="l00413"></a><span class="lineno">  413</span>&#160;    <span class="comment">// Collect the set of nodes in the SCC&#39;s subgraph. These are only the</span></div>
<div class="line"><a name="l00414"></a><span class="lineno">  414</span>&#160;    <span class="comment">// possible child nodes; we do not add the entry (last node) otherwise we</span></div>
<div class="line"><a name="l00415"></a><span class="lineno">  415</span>&#160;    <span class="comment">// will have the same exact SCC all over again.</span></div>
<div class="line"><a name="l00416"></a><span class="lineno">  416</span>&#160;    Nodes.<a class="code" href="classllvm_1_1detail_1_1DenseSetImpl.html#a1fbf4d66a9eeaa9ade03e8febee097ee">clear</a>();</div>
<div class="line"><a name="l00417"></a><span class="lineno">  417</span>&#160;    Nodes.<a class="code" href="classllvm_1_1detail_1_1DenseSetImpl.html#a79eed48913651aeedda2eed25201ea84">insert</a>(Order.begin() + <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>, Order.begin() + <a class="code" href="BuiltinGCs_8cpp.html#a6742d2e0a668baf1196ec69e158d5f15">E</a> - 1);</div>
<div class="line"><a name="l00418"></a><span class="lineno">  418</span>&#160; </div>
<div class="line"><a name="l00419"></a><span class="lineno">  419</span>&#160;    <span class="comment">// Update the entry node.</span></div>
<div class="line"><a name="l00420"></a><span class="lineno">  420</span>&#160;    EntryNode.first = Order[<a class="code" href="BuiltinGCs_8cpp.html#a6742d2e0a668baf1196ec69e158d5f15">E</a> - 1];</div>
<div class="line"><a name="l00421"></a><span class="lineno">  421</span>&#160;    EntryNode.second = &amp;Nodes;</div>
<div class="line"><a name="l00422"></a><span class="lineno">  422</span>&#160;  }</div>
<div class="line"><a name="l00423"></a><span class="lineno">  423</span>&#160;}</div>
<div class="line"><a name="l00424"></a><span class="lineno">  424</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l00425"></a><span class="lineno">  425</span>&#160;<span class="comment">/// Determine the end of the loops</span></div>
<div class="line"><a name="l00426"></a><span class="lineno">  426</span>&#160;<span class="comment"></span><span class="keywordtype">void</span> StructurizeCFG::analyzeLoops(<a class="code" href="classllvm_1_1RegionNode.html">RegionNode</a> *<a class="code" href="regcomp_8c.html#a0240ac851181b84ac374872dc5434ee4">N</a>) {</div>
<div class="line"><a name="l00427"></a><span class="lineno">  427</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="regcomp_8c.html#a0240ac851181b84ac374872dc5434ee4">N</a>-&gt;isSubRegion()) {</div>
<div class="line"><a name="l00428"></a><span class="lineno">  428</span>&#160;    <span class="comment">// Test for exit as back edge</span></div>
<div class="line"><a name="l00429"></a><span class="lineno">  429</span>&#160;    <a class="code" href="classllvm_1_1BasicBlock.html">BasicBlock</a> *Exit = <a class="code" href="regcomp_8c.html#a0240ac851181b84ac374872dc5434ee4">N</a>-&gt;getNodeAs&lt;<a class="code" href="classllvm_1_1Region.html">Region</a>&gt;()-&gt;getExit();</div>
<div class="line"><a name="l00430"></a><span class="lineno">  430</span>&#160;    <span class="keywordflow">if</span> (Visited.count(Exit))</div>
<div class="line"><a name="l00431"></a><span class="lineno">  431</span>&#160;      <a class="code" href="HexagonHardwareLoops_8cpp.html#ada7c1594a393ede3ce32602d64d7ddb2">Loops</a>[Exit] = <a class="code" href="regcomp_8c.html#a0240ac851181b84ac374872dc5434ee4">N</a>-&gt;getEntry();</div>
<div class="line"><a name="l00432"></a><span class="lineno">  432</span>&#160; </div>
<div class="line"><a name="l00433"></a><span class="lineno">  433</span>&#160;  } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00434"></a><span class="lineno">  434</span>&#160;    <span class="comment">// Test for successors as back edge</span></div>
<div class="line"><a name="l00435"></a><span class="lineno">  435</span>&#160;    <a class="code" href="classllvm_1_1BasicBlock.html">BasicBlock</a> *<a class="code" href="lib_2CodeGen_2README_8txt.html#a09776db24cf586ec9f1e18f3bae14099">BB</a> = <a class="code" href="regcomp_8c.html#a0240ac851181b84ac374872dc5434ee4">N</a>-&gt;getNodeAs&lt;<a class="code" href="classllvm_1_1BasicBlock.html">BasicBlock</a>&gt;();</div>
<div class="line"><a name="l00436"></a><span class="lineno">  436</span>&#160;    <a class="code" href="classllvm_1_1BranchInst.html">BranchInst</a> *<a class="code" href="namespacellvm_1_1M68kBeads.html#ac808f5f233066c25641be8a6c1e2b100a27d0e059322508a76f918503800ef1bd">Term</a> = cast&lt;BranchInst&gt;(<a class="code" href="lib_2CodeGen_2README_8txt.html#a09776db24cf586ec9f1e18f3bae14099">BB</a>-&gt;getTerminator());</div>
<div class="line"><a name="l00437"></a><span class="lineno">  437</span>&#160; </div>
<div class="line"><a name="l00438"></a><span class="lineno">  438</span>&#160;    <span class="keywordflow">for</span> (<a class="code" href="classllvm_1_1BasicBlock.html">BasicBlock</a> *Succ : <a class="code" href="namespacellvm_1_1M68kBeads.html#ac808f5f233066c25641be8a6c1e2b100a27d0e059322508a76f918503800ef1bd">Term</a>-&gt;successors())</div>
<div class="line"><a name="l00439"></a><span class="lineno">  439</span>&#160;      <span class="keywordflow">if</span> (Visited.count(Succ))</div>
<div class="line"><a name="l00440"></a><span class="lineno">  440</span>&#160;        <a class="code" href="HexagonHardwareLoops_8cpp.html#ada7c1594a393ede3ce32602d64d7ddb2">Loops</a>[Succ] = <a class="code" href="lib_2CodeGen_2README_8txt.html#a09776db24cf586ec9f1e18f3bae14099">BB</a>;</div>
<div class="line"><a name="l00441"></a><span class="lineno">  441</span>&#160;  }</div>
<div class="line"><a name="l00442"></a><span class="lineno">  442</span>&#160;}</div>
<div class="line"><a name="l00443"></a><span class="lineno">  443</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l00444"></a><span class="lineno">  444</span>&#160;<span class="comment">/// Build the condition for one edge</span></div>
<div class="line"><a name="l00445"></a><span class="lineno">  445</span>&#160;<span class="comment"></span><a class="code" href="classllvm_1_1Value.html">Value</a> *StructurizeCFG::buildCondition(<a class="code" href="classllvm_1_1BranchInst.html">BranchInst</a> *<a class="code" href="namespacellvm_1_1M68kBeads.html#ac808f5f233066c25641be8a6c1e2b100a27d0e059322508a76f918503800ef1bd">Term</a>, <span class="keywordtype">unsigned</span> Idx,</div>
<div class="line"><a name="l00446"></a><span class="lineno">  446</span>&#160;                                      <span class="keywordtype">bool</span> Invert) {</div>
<div class="line"><a name="l00447"></a><span class="lineno">  447</span>&#160;  <a class="code" href="classllvm_1_1Value.html">Value</a> *<a class="code" href="BasicBlockSections_8cpp.html#a5fd0741d696f28faf65b33f6c6af8fda">Cond</a> = Invert ? BoolFalse : BoolTrue;</div>
<div class="line"><a name="l00448"></a><span class="lineno">  448</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="namespacellvm_1_1M68kBeads.html#ac808f5f233066c25641be8a6c1e2b100a27d0e059322508a76f918503800ef1bd">Term</a>-&gt;isConditional()) {</div>
<div class="line"><a name="l00449"></a><span class="lineno">  449</span>&#160;    <a class="code" href="BasicBlockSections_8cpp.html#a5fd0741d696f28faf65b33f6c6af8fda">Cond</a> = <a class="code" href="namespacellvm_1_1M68kBeads.html#ac808f5f233066c25641be8a6c1e2b100a27d0e059322508a76f918503800ef1bd">Term</a>-&gt;getCondition();</div>
<div class="line"><a name="l00450"></a><span class="lineno">  450</span>&#160; </div>
<div class="line"><a name="l00451"></a><span class="lineno">  451</span>&#160;    <span class="keywordflow">if</span> (Idx != (<span class="keywordtype">unsigned</span>)Invert)</div>
<div class="line"><a name="l00452"></a><span class="lineno">  452</span>&#160;      <a class="code" href="BasicBlockSections_8cpp.html#a5fd0741d696f28faf65b33f6c6af8fda">Cond</a> = <a class="code" href="namespacellvm.html#add2fcd2292dd9e51480a2f43d41acfe2">invertCondition</a>(<a class="code" href="BasicBlockSections_8cpp.html#a5fd0741d696f28faf65b33f6c6af8fda">Cond</a>);</div>
<div class="line"><a name="l00453"></a><span class="lineno">  453</span>&#160;  }</div>
<div class="line"><a name="l00454"></a><span class="lineno">  454</span>&#160;  <span class="keywordflow">return</span> <a class="code" href="BasicBlockSections_8cpp.html#a5fd0741d696f28faf65b33f6c6af8fda">Cond</a>;</div>
<div class="line"><a name="l00455"></a><span class="lineno">  455</span>&#160;}</div>
<div class="line"><a name="l00456"></a><span class="lineno">  456</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l00457"></a><span class="lineno">  457</span>&#160;<span class="comment">/// Analyze the predecessors of each block and build up predicates</span></div>
<div class="line"><a name="l00458"></a><span class="lineno">  458</span>&#160;<span class="comment"></span><span class="keywordtype">void</span> StructurizeCFG::gatherPredicates(<a class="code" href="classllvm_1_1RegionNode.html">RegionNode</a> *<a class="code" href="regcomp_8c.html#a0240ac851181b84ac374872dc5434ee4">N</a>) {</div>
<div class="line"><a name="l00459"></a><span class="lineno">  459</span>&#160;  <a class="code" href="classllvm_1_1RegionInfo.html">RegionInfo</a> *RI = ParentRegion-&gt;getRegionInfo();</div>
<div class="line"><a name="l00460"></a><span class="lineno">  460</span>&#160;  <a class="code" href="classllvm_1_1BasicBlock.html">BasicBlock</a> *<a class="code" href="lib_2CodeGen_2README_8txt.html#a09776db24cf586ec9f1e18f3bae14099">BB</a> = <a class="code" href="regcomp_8c.html#a0240ac851181b84ac374872dc5434ee4">N</a>-&gt;getEntry();</div>
<div class="line"><a name="l00461"></a><span class="lineno">  461</span>&#160;  <a class="code" href="classllvm_1_1DenseMap.html">BBPredicates</a> &amp;Pred = Predicates[<a class="code" href="lib_2CodeGen_2README_8txt.html#a09776db24cf586ec9f1e18f3bae14099">BB</a>];</div>
<div class="line"><a name="l00462"></a><span class="lineno">  462</span>&#160;  <a class="code" href="classllvm_1_1DenseMap.html">BBPredicates</a> &amp;LPred = LoopPreds[<a class="code" href="lib_2CodeGen_2README_8txt.html#a09776db24cf586ec9f1e18f3bae14099">BB</a>];</div>
<div class="line"><a name="l00463"></a><span class="lineno">  463</span>&#160; </div>
<div class="line"><a name="l00464"></a><span class="lineno">  464</span>&#160;  <span class="keywordflow">for</span> (<a class="code" href="classllvm_1_1BasicBlock.html">BasicBlock</a> *<a class="code" href="README-SSE_8txt.html#a63d206a063eefcdf8c318ded97b65020">P</a> : <a class="code" href="namespacellvm.html#a91d9d210ba428cc67e3c2e892f24529e">predecessors</a>(<a class="code" href="lib_2CodeGen_2README_8txt.html#a09776db24cf586ec9f1e18f3bae14099">BB</a>)) {</div>
<div class="line"><a name="l00465"></a><span class="lineno">  465</span>&#160;    <span class="comment">// Ignore it if it&#39;s a branch from outside into our region entry</span></div>
<div class="line"><a name="l00466"></a><span class="lineno">  466</span>&#160;    <span class="keywordflow">if</span> (!ParentRegion-&gt;contains(<a class="code" href="README-SSE_8txt.html#a63d206a063eefcdf8c318ded97b65020">P</a>))</div>
<div class="line"><a name="l00467"></a><span class="lineno">  467</span>&#160;      <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l00468"></a><span class="lineno">  468</span>&#160; </div>
<div class="line"><a name="l00469"></a><span class="lineno">  469</span>&#160;    <a class="code" href="classllvm_1_1Region.html">Region</a> *<a class="code" href="namespacellvm_1_1RISCVFenceField.html#a147be9e9780c1e33363ea572d4c7b25fa1835091d83e0e052cd1a32c99b2be731">R</a> = RI-&gt;<a class="code" href="classllvm_1_1RegionInfoBase.html#a7100d3aafc08a45cc49421f186a0db6c">getRegionFor</a>(<a class="code" href="README-SSE_8txt.html#a63d206a063eefcdf8c318ded97b65020">P</a>);</div>
<div class="line"><a name="l00470"></a><span class="lineno">  470</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="namespacellvm_1_1RISCVFenceField.html#a147be9e9780c1e33363ea572d4c7b25fa1835091d83e0e052cd1a32c99b2be731">R</a> == ParentRegion) {</div>
<div class="line"><a name="l00471"></a><span class="lineno">  471</span>&#160;      <span class="comment">// It&#39;s a top level block in our region</span></div>
<div class="line"><a name="l00472"></a><span class="lineno">  472</span>&#160;      <a class="code" href="classllvm_1_1BranchInst.html">BranchInst</a> *<a class="code" href="namespacellvm_1_1M68kBeads.html#ac808f5f233066c25641be8a6c1e2b100a27d0e059322508a76f918503800ef1bd">Term</a> = cast&lt;BranchInst&gt;(<a class="code" href="README-SSE_8txt.html#a63d206a063eefcdf8c318ded97b65020">P</a>-&gt;getTerminator());</div>
<div class="line"><a name="l00473"></a><span class="lineno">  473</span>&#160;      <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> <a class="code" href="lib_2Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a> = 0, <a class="code" href="namespacellvm_1_1numbers.html#a92f4283d4e0e2ea1776894b3ae93640f">e</a> = <a class="code" href="namespacellvm_1_1M68kBeads.html#ac808f5f233066c25641be8a6c1e2b100a27d0e059322508a76f918503800ef1bd">Term</a>-&gt;getNumSuccessors(); <a class="code" href="lib_2Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a> != <a class="code" href="namespacellvm_1_1numbers.html#a92f4283d4e0e2ea1776894b3ae93640f">e</a>; ++<a class="code" href="lib_2Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a>) {</div>
<div class="line"><a name="l00474"></a><span class="lineno">  474</span>&#160;        <a class="code" href="classllvm_1_1BasicBlock.html">BasicBlock</a> *Succ = <a class="code" href="namespacellvm_1_1M68kBeads.html#ac808f5f233066c25641be8a6c1e2b100a27d0e059322508a76f918503800ef1bd">Term</a>-&gt;getSuccessor(<a class="code" href="lib_2Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a>);</div>
<div class="line"><a name="l00475"></a><span class="lineno">  475</span>&#160;        <span class="keywordflow">if</span> (Succ != <a class="code" href="lib_2CodeGen_2README_8txt.html#a09776db24cf586ec9f1e18f3bae14099">BB</a>)</div>
<div class="line"><a name="l00476"></a><span class="lineno">  476</span>&#160;          <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l00477"></a><span class="lineno">  477</span>&#160; </div>
<div class="line"><a name="l00478"></a><span class="lineno">  478</span>&#160;        <span class="keywordflow">if</span> (Visited.count(<a class="code" href="README-SSE_8txt.html#a63d206a063eefcdf8c318ded97b65020">P</a>)) {</div>
<div class="line"><a name="l00479"></a><span class="lineno">  479</span>&#160;          <span class="comment">// Normal forward edge</span></div>
<div class="line"><a name="l00480"></a><span class="lineno">  480</span>&#160;          <span class="keywordflow">if</span> (<a class="code" href="namespacellvm_1_1M68kBeads.html#ac808f5f233066c25641be8a6c1e2b100a27d0e059322508a76f918503800ef1bd">Term</a>-&gt;isConditional()) {</div>
<div class="line"><a name="l00481"></a><span class="lineno">  481</span>&#160;            <span class="comment">// Try to treat it like an ELSE block</span></div>
<div class="line"><a name="l00482"></a><span class="lineno">  482</span>&#160;            <a class="code" href="classllvm_1_1BasicBlock.html">BasicBlock</a> *<a class="code" href="ELFYAML_8cpp.html#a2a91b094e777dacc21de2a7f35da6805">Other</a> = <a class="code" href="namespacellvm_1_1M68kBeads.html#ac808f5f233066c25641be8a6c1e2b100a27d0e059322508a76f918503800ef1bd">Term</a>-&gt;getSuccessor(!<a class="code" href="lib_2Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a>);</div>
<div class="line"><a name="l00483"></a><span class="lineno">  483</span>&#160;            <span class="keywordflow">if</span> (Visited.count(Other) &amp;&amp; !<a class="code" href="HexagonHardwareLoops_8cpp.html#ada7c1594a393ede3ce32602d64d7ddb2">Loops</a>.count(Other) &amp;&amp;</div>
<div class="line"><a name="l00484"></a><span class="lineno">  484</span>&#160;                !Pred.<a class="code" href="classllvm_1_1DenseMapBase.html#a53408c95a7bfb5443b43fb2134c3eb23">count</a>(Other) &amp;&amp; !Pred.<a class="code" href="classllvm_1_1DenseMapBase.html#a53408c95a7bfb5443b43fb2134c3eb23">count</a>(<a class="code" href="README-SSE_8txt.html#a63d206a063eefcdf8c318ded97b65020">P</a>)) {</div>
<div class="line"><a name="l00485"></a><span class="lineno">  485</span>&#160; </div>
<div class="line"><a name="l00486"></a><span class="lineno">  486</span>&#160;              Pred[<a class="code" href="ELFYAML_8cpp.html#a2a91b094e777dacc21de2a7f35da6805">Other</a>] = BoolFalse;</div>
<div class="line"><a name="l00487"></a><span class="lineno">  487</span>&#160;              Pred[<a class="code" href="README-SSE_8txt.html#a63d206a063eefcdf8c318ded97b65020">P</a>] = BoolTrue;</div>
<div class="line"><a name="l00488"></a><span class="lineno">  488</span>&#160;              <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l00489"></a><span class="lineno">  489</span>&#160;            }</div>
<div class="line"><a name="l00490"></a><span class="lineno">  490</span>&#160;          }</div>
<div class="line"><a name="l00491"></a><span class="lineno">  491</span>&#160;          Pred[<a class="code" href="README-SSE_8txt.html#a63d206a063eefcdf8c318ded97b65020">P</a>] = buildCondition(<a class="code" href="namespacellvm_1_1M68kBeads.html#ac808f5f233066c25641be8a6c1e2b100a27d0e059322508a76f918503800ef1bd">Term</a>, <a class="code" href="lib_2Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a>, <span class="keyword">false</span>);</div>
<div class="line"><a name="l00492"></a><span class="lineno">  492</span>&#160;        } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00493"></a><span class="lineno">  493</span>&#160;          <span class="comment">// Back edge</span></div>
<div class="line"><a name="l00494"></a><span class="lineno">  494</span>&#160;          LPred[<a class="code" href="README-SSE_8txt.html#a63d206a063eefcdf8c318ded97b65020">P</a>] = buildCondition(<a class="code" href="namespacellvm_1_1M68kBeads.html#ac808f5f233066c25641be8a6c1e2b100a27d0e059322508a76f918503800ef1bd">Term</a>, <a class="code" href="lib_2Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a>, <span class="keyword">true</span>);</div>
<div class="line"><a name="l00495"></a><span class="lineno">  495</span>&#160;        }</div>
<div class="line"><a name="l00496"></a><span class="lineno">  496</span>&#160;      }</div>
<div class="line"><a name="l00497"></a><span class="lineno">  497</span>&#160;    } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00498"></a><span class="lineno">  498</span>&#160;      <span class="comment">// It&#39;s an exit from a sub region</span></div>
<div class="line"><a name="l00499"></a><span class="lineno">  499</span>&#160;      <span class="keywordflow">while</span> (<a class="code" href="namespacellvm_1_1RISCVFenceField.html#a147be9e9780c1e33363ea572d4c7b25fa1835091d83e0e052cd1a32c99b2be731">R</a>-&gt;getParent() != ParentRegion)</div>
<div class="line"><a name="l00500"></a><span class="lineno">  500</span>&#160;        <a class="code" href="namespacellvm_1_1RISCVFenceField.html#a147be9e9780c1e33363ea572d4c7b25fa1835091d83e0e052cd1a32c99b2be731">R</a> = <a class="code" href="namespacellvm_1_1RISCVFenceField.html#a147be9e9780c1e33363ea572d4c7b25fa1835091d83e0e052cd1a32c99b2be731">R</a>-&gt;getParent();</div>
<div class="line"><a name="l00501"></a><span class="lineno">  501</span>&#160; </div>
<div class="line"><a name="l00502"></a><span class="lineno">  502</span>&#160;      <span class="comment">// Edge from inside a subregion to its entry, ignore it</span></div>
<div class="line"><a name="l00503"></a><span class="lineno">  503</span>&#160;      <span class="keywordflow">if</span> (*<a class="code" href="namespacellvm_1_1RISCVFenceField.html#a147be9e9780c1e33363ea572d4c7b25fa1835091d83e0e052cd1a32c99b2be731">R</a> == *<a class="code" href="regcomp_8c.html#a0240ac851181b84ac374872dc5434ee4">N</a>)</div>
<div class="line"><a name="l00504"></a><span class="lineno">  504</span>&#160;        <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l00505"></a><span class="lineno">  505</span>&#160; </div>
<div class="line"><a name="l00506"></a><span class="lineno">  506</span>&#160;      <a class="code" href="classllvm_1_1BasicBlock.html">BasicBlock</a> *Entry = <a class="code" href="namespacellvm_1_1RISCVFenceField.html#a147be9e9780c1e33363ea572d4c7b25fa1835091d83e0e052cd1a32c99b2be731">R</a>-&gt;getEntry();</div>
<div class="line"><a name="l00507"></a><span class="lineno">  507</span>&#160;      <span class="keywordflow">if</span> (Visited.count(Entry))</div>
<div class="line"><a name="l00508"></a><span class="lineno">  508</span>&#160;        Pred[Entry] = BoolTrue;</div>
<div class="line"><a name="l00509"></a><span class="lineno">  509</span>&#160;      <span class="keywordflow">else</span></div>
<div class="line"><a name="l00510"></a><span class="lineno">  510</span>&#160;        LPred[Entry] = BoolFalse;</div>
<div class="line"><a name="l00511"></a><span class="lineno">  511</span>&#160;    }</div>
<div class="line"><a name="l00512"></a><span class="lineno">  512</span>&#160;  }</div>
<div class="line"><a name="l00513"></a><span class="lineno">  513</span>&#160;}</div>
<div class="line"><a name="l00514"></a><span class="lineno">  514</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l00515"></a><span class="lineno">  515</span>&#160;<span class="comment">/// Collect various loop and predicate infos</span></div>
<div class="line"><a name="l00516"></a><span class="lineno">  516</span>&#160;<span class="comment"></span><span class="keywordtype">void</span> StructurizeCFG::collectInfos() {</div>
<div class="line"><a name="l00517"></a><span class="lineno">  517</span>&#160;  <span class="comment">// Reset predicate</span></div>
<div class="line"><a name="l00518"></a><span class="lineno">  518</span>&#160;  Predicates.<a class="code" href="classllvm_1_1DenseMapBase.html#adf4e7878fc0b3b8dcde545178564190d">clear</a>();</div>
<div class="line"><a name="l00519"></a><span class="lineno">  519</span>&#160; </div>
<div class="line"><a name="l00520"></a><span class="lineno">  520</span>&#160;  <span class="comment">// and loop infos</span></div>
<div class="line"><a name="l00521"></a><span class="lineno">  521</span>&#160;  <a class="code" href="HexagonHardwareLoops_8cpp.html#ada7c1594a393ede3ce32602d64d7ddb2">Loops</a>.clear();</div>
<div class="line"><a name="l00522"></a><span class="lineno">  522</span>&#160;  LoopPreds.clear();</div>
<div class="line"><a name="l00523"></a><span class="lineno">  523</span>&#160; </div>
<div class="line"><a name="l00524"></a><span class="lineno">  524</span>&#160;  <span class="comment">// Reset the visited nodes</span></div>
<div class="line"><a name="l00525"></a><span class="lineno">  525</span>&#160;  Visited.clear();</div>
<div class="line"><a name="l00526"></a><span class="lineno">  526</span>&#160; </div>
<div class="line"><a name="l00527"></a><span class="lineno">  527</span>&#160;  <span class="keywordflow">for</span> (<a class="code" href="classllvm_1_1RegionNode.html">RegionNode</a> *<a class="code" href="README__P9_8txt.html#aea3337f3785f600391756877218a55ba">RN</a> : <a class="code" href="namespacellvm.html#a469101ea87b8b432a1b4f7935c97f35c">reverse</a>(Order)) {</div>
<div class="line"><a name="l00528"></a><span class="lineno">  528</span>&#160;    <a class="code" href="Debug_8h.html#a08efc68d15935eb8889400a46c3749ba">LLVM_DEBUG</a>(<a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <span class="stringliteral">&quot;Visiting: &quot;</span></div>
<div class="line"><a name="l00529"></a><span class="lineno">  529</span>&#160;                      &lt;&lt; (<a class="code" href="README__P9_8txt.html#aea3337f3785f600391756877218a55ba">RN</a>-&gt;isSubRegion() ? <span class="stringliteral">&quot;SubRegion with entry: &quot;</span> : <span class="stringliteral">&quot;&quot;</span>)</div>
<div class="line"><a name="l00530"></a><span class="lineno">  530</span>&#160;                      &lt;&lt; <a class="code" href="README__P9_8txt.html#aea3337f3785f600391756877218a55ba">RN</a>-&gt;getEntry()-&gt;getName() &lt;&lt; <span class="stringliteral">&quot;\n&quot;</span>);</div>
<div class="line"><a name="l00531"></a><span class="lineno">  531</span>&#160; </div>
<div class="line"><a name="l00532"></a><span class="lineno">  532</span>&#160;    <span class="comment">// Analyze all the conditions leading to a node</span></div>
<div class="line"><a name="l00533"></a><span class="lineno">  533</span>&#160;    gatherPredicates(<a class="code" href="README__P9_8txt.html#aea3337f3785f600391756877218a55ba">RN</a>);</div>
<div class="line"><a name="l00534"></a><span class="lineno">  534</span>&#160; </div>
<div class="line"><a name="l00535"></a><span class="lineno">  535</span>&#160;    <span class="comment">// Remember that we&#39;ve seen this node</span></div>
<div class="line"><a name="l00536"></a><span class="lineno">  536</span>&#160;    Visited.insert(<a class="code" href="README__P9_8txt.html#aea3337f3785f600391756877218a55ba">RN</a>-&gt;getEntry());</div>
<div class="line"><a name="l00537"></a><span class="lineno">  537</span>&#160; </div>
<div class="line"><a name="l00538"></a><span class="lineno">  538</span>&#160;    <span class="comment">// Find the last back edges</span></div>
<div class="line"><a name="l00539"></a><span class="lineno">  539</span>&#160;    analyzeLoops(<a class="code" href="README__P9_8txt.html#aea3337f3785f600391756877218a55ba">RN</a>);</div>
<div class="line"><a name="l00540"></a><span class="lineno">  540</span>&#160;  }</div>
<div class="line"><a name="l00541"></a><span class="lineno">  541</span>&#160;}</div>
<div class="line"><a name="l00542"></a><span class="lineno">  542</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l00543"></a><span class="lineno">  543</span>&#160;<span class="comment">/// Insert the missing branch conditions</span></div>
<div class="line"><a name="l00544"></a><span class="lineno">  544</span>&#160;<span class="comment"></span><span class="keywordtype">void</span> StructurizeCFG::insertConditions(<span class="keywordtype">bool</span> <a class="code" href="HexagonHardwareLoops_8cpp.html#ada7c1594a393ede3ce32602d64d7ddb2">Loops</a>) {</div>
<div class="line"><a name="l00545"></a><span class="lineno">  545</span>&#160;  BranchVector &amp;Conds = <a class="code" href="HexagonHardwareLoops_8cpp.html#ada7c1594a393ede3ce32602d64d7ddb2">Loops</a> ? LoopConds : Conditions;</div>
<div class="line"><a name="l00546"></a><span class="lineno">  546</span>&#160;  <a class="code" href="classllvm_1_1Value.html">Value</a> *<a class="code" href="namespacellvm_1_1TargetStackID.html#a71392100eb15ba746b1f898986f5d8a5af2af9eb94ff1bc08308bc738d744ee85">Default</a> = <a class="code" href="HexagonHardwareLoops_8cpp.html#ada7c1594a393ede3ce32602d64d7ddb2">Loops</a> ? BoolTrue : BoolFalse;</div>
<div class="line"><a name="l00547"></a><span class="lineno">  547</span>&#160;  <a class="code" href="classllvm_1_1SSAUpdater.html">SSAUpdater</a> PhiInserter;</div>
<div class="line"><a name="l00548"></a><span class="lineno">  548</span>&#160; </div>
<div class="line"><a name="l00549"></a><span class="lineno">  549</span>&#160;  <span class="keywordflow">for</span> (<a class="code" href="classllvm_1_1BranchInst.html">BranchInst</a> *<a class="code" href="namespacellvm_1_1M68kBeads.html#ac808f5f233066c25641be8a6c1e2b100a27d0e059322508a76f918503800ef1bd">Term</a> : Conds) {</div>
<div class="line"><a name="l00550"></a><span class="lineno">  550</span>&#160;    <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(<a class="code" href="namespacellvm_1_1M68kBeads.html#ac808f5f233066c25641be8a6c1e2b100a27d0e059322508a76f918503800ef1bd">Term</a>-&gt;isConditional());</div>
<div class="line"><a name="l00551"></a><span class="lineno">  551</span>&#160; </div>
<div class="line"><a name="l00552"></a><span class="lineno">  552</span>&#160;    <a class="code" href="classllvm_1_1BasicBlock.html">BasicBlock</a> *Parent = <a class="code" href="namespacellvm_1_1M68kBeads.html#ac808f5f233066c25641be8a6c1e2b100a27d0e059322508a76f918503800ef1bd">Term</a>-&gt;getParent();</div>
<div class="line"><a name="l00553"></a><span class="lineno">  553</span>&#160;    <a class="code" href="classllvm_1_1BasicBlock.html">BasicBlock</a> *SuccTrue = <a class="code" href="namespacellvm_1_1M68kBeads.html#ac808f5f233066c25641be8a6c1e2b100a27d0e059322508a76f918503800ef1bd">Term</a>-&gt;getSuccessor(0);</div>
<div class="line"><a name="l00554"></a><span class="lineno">  554</span>&#160;    <a class="code" href="classllvm_1_1BasicBlock.html">BasicBlock</a> *SuccFalse = <a class="code" href="namespacellvm_1_1M68kBeads.html#ac808f5f233066c25641be8a6c1e2b100a27d0e059322508a76f918503800ef1bd">Term</a>-&gt;getSuccessor(1);</div>
<div class="line"><a name="l00555"></a><span class="lineno">  555</span>&#160; </div>
<div class="line"><a name="l00556"></a><span class="lineno">  556</span>&#160;    PhiInserter.<a class="code" href="classllvm_1_1SSAUpdater.html#a4fe3279aae4f726813a672d4a9b26cb1">Initialize</a>(<a class="code" href="namespacellvm.html#a965a7b0afb2678973d155a103b9f55b5">Boolean</a>, <span class="stringliteral">&quot;&quot;</span>);</div>
<div class="line"><a name="l00557"></a><span class="lineno">  557</span>&#160;    PhiInserter.<a class="code" href="classllvm_1_1SSAUpdater.html#af0d1a82b4e629e834c2ed53e5cbe22ef">AddAvailableValue</a>(&amp;Func-&gt;getEntryBlock(), Default);</div>
<div class="line"><a name="l00558"></a><span class="lineno">  558</span>&#160;    PhiInserter.<a class="code" href="classllvm_1_1SSAUpdater.html#af0d1a82b4e629e834c2ed53e5cbe22ef">AddAvailableValue</a>(<a class="code" href="HexagonHardwareLoops_8cpp.html#ada7c1594a393ede3ce32602d64d7ddb2">Loops</a> ? SuccFalse : Parent, Default);</div>
<div class="line"><a name="l00559"></a><span class="lineno">  559</span>&#160; </div>
<div class="line"><a name="l00560"></a><span class="lineno">  560</span>&#160;    <a class="code" href="classllvm_1_1DenseMap.html">BBPredicates</a> &amp;Preds = <a class="code" href="HexagonHardwareLoops_8cpp.html#ada7c1594a393ede3ce32602d64d7ddb2">Loops</a> ? LoopPreds[SuccFalse] : Predicates[SuccTrue];</div>
<div class="line"><a name="l00561"></a><span class="lineno">  561</span>&#160; </div>
<div class="line"><a name="l00562"></a><span class="lineno">  562</span>&#160;    NearestCommonDominator Dominator(DT);</div>
<div class="line"><a name="l00563"></a><span class="lineno">  563</span>&#160;    Dominator.addBlock(Parent);</div>
<div class="line"><a name="l00564"></a><span class="lineno">  564</span>&#160; </div>
<div class="line"><a name="l00565"></a><span class="lineno">  565</span>&#160;    <a class="code" href="classllvm_1_1Value.html">Value</a> *ParentValue = <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l00566"></a><span class="lineno">  566</span>&#160;    <span class="keywordflow">for</span> (std::pair&lt;BasicBlock *, Value *&gt; BBAndPred : Preds) {</div>
<div class="line"><a name="l00567"></a><span class="lineno">  567</span>&#160;      <a class="code" href="classllvm_1_1BasicBlock.html">BasicBlock</a> *<a class="code" href="lib_2CodeGen_2README_8txt.html#a09776db24cf586ec9f1e18f3bae14099">BB</a> = BBAndPred.first;</div>
<div class="line"><a name="l00568"></a><span class="lineno">  568</span>&#160;      <a class="code" href="classllvm_1_1Value.html">Value</a> *Pred = BBAndPred.second;</div>
<div class="line"><a name="l00569"></a><span class="lineno">  569</span>&#160; </div>
<div class="line"><a name="l00570"></a><span class="lineno">  570</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="lib_2CodeGen_2README_8txt.html#a09776db24cf586ec9f1e18f3bae14099">BB</a> == Parent) {</div>
<div class="line"><a name="l00571"></a><span class="lineno">  571</span>&#160;        ParentValue = Pred;</div>
<div class="line"><a name="l00572"></a><span class="lineno">  572</span>&#160;        <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00573"></a><span class="lineno">  573</span>&#160;      }</div>
<div class="line"><a name="l00574"></a><span class="lineno">  574</span>&#160;      PhiInserter.<a class="code" href="classllvm_1_1SSAUpdater.html#af0d1a82b4e629e834c2ed53e5cbe22ef">AddAvailableValue</a>(<a class="code" href="lib_2CodeGen_2README_8txt.html#a09776db24cf586ec9f1e18f3bae14099">BB</a>, Pred);</div>
<div class="line"><a name="l00575"></a><span class="lineno">  575</span>&#160;      Dominator.addAndRememberBlock(<a class="code" href="lib_2CodeGen_2README_8txt.html#a09776db24cf586ec9f1e18f3bae14099">BB</a>);</div>
<div class="line"><a name="l00576"></a><span class="lineno">  576</span>&#160;    }</div>
<div class="line"><a name="l00577"></a><span class="lineno">  577</span>&#160; </div>
<div class="line"><a name="l00578"></a><span class="lineno">  578</span>&#160;    <span class="keywordflow">if</span> (ParentValue) {</div>
<div class="line"><a name="l00579"></a><span class="lineno">  579</span>&#160;      <a class="code" href="namespacellvm_1_1M68kBeads.html#ac808f5f233066c25641be8a6c1e2b100a27d0e059322508a76f918503800ef1bd">Term</a>-&gt;setCondition(ParentValue);</div>
<div class="line"><a name="l00580"></a><span class="lineno">  580</span>&#160;    } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00581"></a><span class="lineno">  581</span>&#160;      <span class="keywordflow">if</span> (!Dominator.resultIsRememberedBlock())</div>
<div class="line"><a name="l00582"></a><span class="lineno">  582</span>&#160;        PhiInserter.<a class="code" href="classllvm_1_1SSAUpdater.html#af0d1a82b4e629e834c2ed53e5cbe22ef">AddAvailableValue</a>(Dominator.result(), Default);</div>
<div class="line"><a name="l00583"></a><span class="lineno">  583</span>&#160; </div>
<div class="line"><a name="l00584"></a><span class="lineno">  584</span>&#160;      <a class="code" href="namespacellvm_1_1M68kBeads.html#ac808f5f233066c25641be8a6c1e2b100a27d0e059322508a76f918503800ef1bd">Term</a>-&gt;setCondition(PhiInserter.<a class="code" href="classllvm_1_1SSAUpdater.html#a5b0e45dbba53e985f1b9c532fb5f200b">GetValueInMiddleOfBlock</a>(Parent));</div>
<div class="line"><a name="l00585"></a><span class="lineno">  585</span>&#160;    }</div>
<div class="line"><a name="l00586"></a><span class="lineno">  586</span>&#160;  }</div>
<div class="line"><a name="l00587"></a><span class="lineno">  587</span>&#160;}</div>
<div class="line"><a name="l00588"></a><span class="lineno">  588</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l00589"></a><span class="lineno">  589</span>&#160;<span class="comment">/// Remove all PHI values coming from &quot;From&quot; into &quot;To&quot; and remember</span></div>
<div class="line"><a name="l00590"></a><span class="lineno">  590</span>&#160;<span class="comment">/// them in DeletedPhis</span></div>
<div class="line"><a name="l00591"></a><span class="lineno">  591</span>&#160;<span class="comment"></span><span class="keywordtype">void</span> StructurizeCFG::delPhiValues(<a class="code" href="classllvm_1_1BasicBlock.html">BasicBlock</a> *<a class="code" href="BlockVerifier_8cpp.html#ae45c7d73c0ff5d177b59153ffae77f84">From</a>, <a class="code" href="classllvm_1_1BasicBlock.html">BasicBlock</a> *To) {</div>
<div class="line"><a name="l00592"></a><span class="lineno">  592</span>&#160;  PhiMap &amp;Map = DeletedPhis[To];</div>
<div class="line"><a name="l00593"></a><span class="lineno">  593</span>&#160;  <span class="keywordflow">for</span> (<a class="code" href="classllvm_1_1PHINode.html">PHINode</a> &amp;Phi : To-&gt;<a class="code" href="classllvm_1_1BasicBlock.html#a233eb15d557dbd3af7221dd9be5cb02d">phis</a>()) {</div>
<div class="line"><a name="l00594"></a><span class="lineno">  594</span>&#160;    <span class="keywordtype">bool</span> Recorded = <span class="keyword">false</span>;</div>
<div class="line"><a name="l00595"></a><span class="lineno">  595</span>&#160;    <span class="keywordflow">while</span> (Phi.getBasicBlockIndex(<a class="code" href="BlockVerifier_8cpp.html#ae45c7d73c0ff5d177b59153ffae77f84">From</a>) != -1) {</div>
<div class="line"><a name="l00596"></a><span class="lineno">  596</span>&#160;      <a class="code" href="classllvm_1_1Value.html">Value</a> *<a class="code" href="LoopDeletion_8cpp.html#a0f1c83c3d08d80b12c424962a5e94ce8aac5e6ff0bb9cd22f9f55570e7b318c84">Deleted</a> = Phi.removeIncomingValue(<a class="code" href="BlockVerifier_8cpp.html#ae45c7d73c0ff5d177b59153ffae77f84">From</a>, <span class="keyword">false</span>);</div>
<div class="line"><a name="l00597"></a><span class="lineno">  597</span>&#160;      Map[&amp;Phi].push_back(std::make_pair(<a class="code" href="BlockVerifier_8cpp.html#ae45c7d73c0ff5d177b59153ffae77f84">From</a>, Deleted));</div>
<div class="line"><a name="l00598"></a><span class="lineno">  598</span>&#160;      <span class="keywordflow">if</span> (!Recorded) {</div>
<div class="line"><a name="l00599"></a><span class="lineno">  599</span>&#160;        AffectedPhis.push_back(&amp;Phi);</div>
<div class="line"><a name="l00600"></a><span class="lineno">  600</span>&#160;        Recorded = <span class="keyword">true</span>;</div>
<div class="line"><a name="l00601"></a><span class="lineno">  601</span>&#160;      }</div>
<div class="line"><a name="l00602"></a><span class="lineno">  602</span>&#160;    }</div>
<div class="line"><a name="l00603"></a><span class="lineno">  603</span>&#160;  }</div>
<div class="line"><a name="l00604"></a><span class="lineno">  604</span>&#160;}</div>
<div class="line"><a name="l00605"></a><span class="lineno">  605</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l00606"></a><span class="lineno">  606</span>&#160;<span class="comment">/// Add a dummy PHI value as soon as we knew the new predecessor</span></div>
<div class="line"><a name="l00607"></a><span class="lineno">  607</span>&#160;<span class="comment"></span><span class="keywordtype">void</span> StructurizeCFG::addPhiValues(<a class="code" href="classllvm_1_1BasicBlock.html">BasicBlock</a> *<a class="code" href="BlockVerifier_8cpp.html#ae45c7d73c0ff5d177b59153ffae77f84">From</a>, <a class="code" href="classllvm_1_1BasicBlock.html">BasicBlock</a> *To) {</div>
<div class="line"><a name="l00608"></a><span class="lineno">  608</span>&#160;  <span class="keywordflow">for</span> (<a class="code" href="classllvm_1_1PHINode.html">PHINode</a> &amp;Phi : To-&gt;<a class="code" href="classllvm_1_1BasicBlock.html#a233eb15d557dbd3af7221dd9be5cb02d">phis</a>()) {</div>
<div class="line"><a name="l00609"></a><span class="lineno">  609</span>&#160;    <a class="code" href="classllvm_1_1Value.html">Value</a> *<a class="code" href="namespacellvm_1_1RegState.html#a5a2c54ccd4089208481258b7803e01a8ab502f975742e9bff6d6dd7b49439b806">Undef</a> = <a class="code" href="classllvm_1_1UndefValue.html#a4ae5ff22b700a42bcc5d889233721335">UndefValue::get</a>(Phi.getType());</div>
<div class="line"><a name="l00610"></a><span class="lineno">  610</span>&#160;    Phi.addIncoming(<a class="code" href="namespacellvm_1_1RegState.html#a5a2c54ccd4089208481258b7803e01a8ab502f975742e9bff6d6dd7b49439b806">Undef</a>, <a class="code" href="BlockVerifier_8cpp.html#ae45c7d73c0ff5d177b59153ffae77f84">From</a>);</div>
<div class="line"><a name="l00611"></a><span class="lineno">  611</span>&#160;  }</div>
<div class="line"><a name="l00612"></a><span class="lineno">  612</span>&#160;  AddedPhis[To].push_back(<a class="code" href="BlockVerifier_8cpp.html#ae45c7d73c0ff5d177b59153ffae77f84">From</a>);</div>
<div class="line"><a name="l00613"></a><span class="lineno">  613</span>&#160;}</div>
<div class="line"><a name="l00614"></a><span class="lineno">  614</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l00615"></a><span class="lineno">  615</span>&#160;<span class="comment">/// Add the real PHI value as soon as everything is set up</span></div>
<div class="line"><a name="l00616"></a><span class="lineno">  616</span>&#160;<span class="comment"></span><span class="keywordtype">void</span> StructurizeCFG::setPhiValues() {</div>
<div class="line"><a name="l00617"></a><span class="lineno">  617</span>&#160;  <a class="code" href="classllvm_1_1SmallVector.html">SmallVector&lt;PHINode *, 8&gt;</a> InsertedPhis;</div>
<div class="line"><a name="l00618"></a><span class="lineno">  618</span>&#160;  <a class="code" href="classllvm_1_1SSAUpdater.html">SSAUpdater</a> Updater(&amp;InsertedPhis);</div>
<div class="line"><a name="l00619"></a><span class="lineno">  619</span>&#160;  <span class="keywordflow">for</span> (<span class="keyword">const</span> <span class="keyword">auto</span> &amp;AddedPhi : AddedPhis) {</div>
<div class="line"><a name="l00620"></a><span class="lineno">  620</span>&#160;    <a class="code" href="classllvm_1_1BasicBlock.html">BasicBlock</a> *To = AddedPhi.first;</div>
<div class="line"><a name="l00621"></a><span class="lineno">  621</span>&#160;    <span class="keyword">const</span> BBVector &amp;<a class="code" href="BlockVerifier_8cpp.html#ae45c7d73c0ff5d177b59153ffae77f84">From</a> = AddedPhi.second;</div>
<div class="line"><a name="l00622"></a><span class="lineno">  622</span>&#160; </div>
<div class="line"><a name="l00623"></a><span class="lineno">  623</span>&#160;    <span class="keywordflow">if</span> (!DeletedPhis.count(To))</div>
<div class="line"><a name="l00624"></a><span class="lineno">  624</span>&#160;      <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l00625"></a><span class="lineno">  625</span>&#160; </div>
<div class="line"><a name="l00626"></a><span class="lineno">  626</span>&#160;    PhiMap &amp;Map = DeletedPhis[To];</div>
<div class="line"><a name="l00627"></a><span class="lineno">  627</span>&#160;    <span class="keywordflow">for</span> (<span class="keyword">const</span> <span class="keyword">auto</span> &amp;PI : Map) {</div>
<div class="line"><a name="l00628"></a><span class="lineno">  628</span>&#160;      <a class="code" href="classllvm_1_1PHINode.html">PHINode</a> *Phi = PI.first;</div>
<div class="line"><a name="l00629"></a><span class="lineno">  629</span>&#160;      <a class="code" href="classllvm_1_1Value.html">Value</a> *<a class="code" href="namespacellvm_1_1RegState.html#a5a2c54ccd4089208481258b7803e01a8ab502f975742e9bff6d6dd7b49439b806">Undef</a> = <a class="code" href="classllvm_1_1UndefValue.html#a4ae5ff22b700a42bcc5d889233721335">UndefValue::get</a>(Phi-&gt;<a class="code" href="classllvm_1_1Value.html#a6393a2d4fe7e10b28a0dcc35f881567b">getType</a>());</div>
<div class="line"><a name="l00630"></a><span class="lineno">  630</span>&#160;      Updater.Initialize(Phi-&gt;<a class="code" href="classllvm_1_1Value.html#a6393a2d4fe7e10b28a0dcc35f881567b">getType</a>(), <span class="stringliteral">&quot;&quot;</span>);</div>
<div class="line"><a name="l00631"></a><span class="lineno">  631</span>&#160;      Updater.AddAvailableValue(&amp;Func-&gt;getEntryBlock(), <a class="code" href="namespacellvm_1_1RegState.html#a5a2c54ccd4089208481258b7803e01a8ab502f975742e9bff6d6dd7b49439b806">Undef</a>);</div>
<div class="line"><a name="l00632"></a><span class="lineno">  632</span>&#160;      Updater.AddAvailableValue(To, <a class="code" href="namespacellvm_1_1RegState.html#a5a2c54ccd4089208481258b7803e01a8ab502f975742e9bff6d6dd7b49439b806">Undef</a>);</div>
<div class="line"><a name="l00633"></a><span class="lineno">  633</span>&#160; </div>
<div class="line"><a name="l00634"></a><span class="lineno">  634</span>&#160;      NearestCommonDominator Dominator(DT);</div>
<div class="line"><a name="l00635"></a><span class="lineno">  635</span>&#160;      Dominator.addBlock(To);</div>
<div class="line"><a name="l00636"></a><span class="lineno">  636</span>&#160;      <span class="keywordflow">for</span> (<span class="keyword">const</span> <span class="keyword">auto</span> &amp;<a class="code" href="SIInstrInfo_8cpp.html#a0dfd55eaf0bcb495f09ecf8c55b256b2a97bce951e4585a39601c04d86bb14ffd">VI</a> : PI.second) {</div>
<div class="line"><a name="l00637"></a><span class="lineno">  637</span>&#160;        Updater.AddAvailableValue(<a class="code" href="SIInstrInfo_8cpp.html#a0dfd55eaf0bcb495f09ecf8c55b256b2a97bce951e4585a39601c04d86bb14ffd">VI</a>.first, <a class="code" href="SIInstrInfo_8cpp.html#a0dfd55eaf0bcb495f09ecf8c55b256b2a97bce951e4585a39601c04d86bb14ffd">VI</a>.second);</div>
<div class="line"><a name="l00638"></a><span class="lineno">  638</span>&#160;        Dominator.addAndRememberBlock(<a class="code" href="SIInstrInfo_8cpp.html#a0dfd55eaf0bcb495f09ecf8c55b256b2a97bce951e4585a39601c04d86bb14ffd">VI</a>.first);</div>
<div class="line"><a name="l00639"></a><span class="lineno">  639</span>&#160;      }</div>
<div class="line"><a name="l00640"></a><span class="lineno">  640</span>&#160; </div>
<div class="line"><a name="l00641"></a><span class="lineno">  641</span>&#160;      <span class="keywordflow">if</span> (!Dominator.resultIsRememberedBlock())</div>
<div class="line"><a name="l00642"></a><span class="lineno">  642</span>&#160;        Updater.AddAvailableValue(Dominator.result(), <a class="code" href="namespacellvm_1_1RegState.html#a5a2c54ccd4089208481258b7803e01a8ab502f975742e9bff6d6dd7b49439b806">Undef</a>);</div>
<div class="line"><a name="l00643"></a><span class="lineno">  643</span>&#160; </div>
<div class="line"><a name="l00644"></a><span class="lineno">  644</span>&#160;      <span class="keywordflow">for</span> (<a class="code" href="classllvm_1_1BasicBlock.html">BasicBlock</a> *FI : <a class="code" href="BlockVerifier_8cpp.html#ae45c7d73c0ff5d177b59153ffae77f84">From</a>)</div>
<div class="line"><a name="l00645"></a><span class="lineno">  645</span>&#160;        Phi-&gt;<a class="code" href="classllvm_1_1PHINode.html#a506bcfb6f92a2184453e1fa9655f62a1">setIncomingValueForBlock</a>(FI, Updater.GetValueAtEndOfBlock(FI));</div>
<div class="line"><a name="l00646"></a><span class="lineno">  646</span>&#160;      AffectedPhis.push_back(Phi);</div>
<div class="line"><a name="l00647"></a><span class="lineno">  647</span>&#160;    }</div>
<div class="line"><a name="l00648"></a><span class="lineno">  648</span>&#160; </div>
<div class="line"><a name="l00649"></a><span class="lineno">  649</span>&#160;    DeletedPhis.erase(To);</div>
<div class="line"><a name="l00650"></a><span class="lineno">  650</span>&#160;  }</div>
<div class="line"><a name="l00651"></a><span class="lineno">  651</span>&#160;  <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(DeletedPhis.empty());</div>
<div class="line"><a name="l00652"></a><span class="lineno">  652</span>&#160; </div>
<div class="line"><a name="l00653"></a><span class="lineno">  653</span>&#160;  AffectedPhis.append(InsertedPhis.begin(), InsertedPhis.end());</div>
<div class="line"><a name="l00654"></a><span class="lineno">  654</span>&#160;}</div>
<div class="line"><a name="l00655"></a><span class="lineno">  655</span>&#160; </div>
<div class="line"><a name="l00656"></a><span class="lineno">  656</span>&#160;<span class="keywordtype">void</span> StructurizeCFG::simplifyAffectedPhis() {</div>
<div class="line"><a name="l00657"></a><span class="lineno">  657</span>&#160;  <span class="keywordtype">bool</span> Changed;</div>
<div class="line"><a name="l00658"></a><span class="lineno">  658</span>&#160;  <span class="keywordflow">do</span> {</div>
<div class="line"><a name="l00659"></a><span class="lineno">  659</span>&#160;    Changed = <span class="keyword">false</span>;</div>
<div class="line"><a name="l00660"></a><span class="lineno">  660</span>&#160;    <a class="code" href="structllvm_1_1SimplifyQuery.html">SimplifyQuery</a> Q(Func-&gt;getParent()-&gt;getDataLayout());</div>
<div class="line"><a name="l00661"></a><span class="lineno">  661</span>&#160;    Q.DT = DT;</div>
<div class="line"><a name="l00662"></a><span class="lineno">  662</span>&#160;    <span class="keywordflow">for</span> (<a class="code" href="classllvm_1_1WeakVH.html">WeakVH</a> VH : AffectedPhis) {</div>
<div class="line"><a name="l00663"></a><span class="lineno">  663</span>&#160;      <span class="keywordflow">if</span> (<span class="keyword">auto</span> Phi = dyn_cast_or_null&lt;PHINode&gt;(VH)) {</div>
<div class="line"><a name="l00664"></a><span class="lineno">  664</span>&#160;        <span class="keywordflow">if</span> (<span class="keyword">auto</span> NewValue = <a class="code" href="namespacellvm.html#a57790783d1c27d76d6295d41ba751c63">SimplifyInstruction</a>(Phi, Q)) {</div>
<div class="line"><a name="l00665"></a><span class="lineno">  665</span>&#160;          Phi-&gt;<a class="code" href="classllvm_1_1Value.html#a3ab5fc45117b450e8bb04e564cb6e5f2">replaceAllUsesWith</a>(NewValue);</div>
<div class="line"><a name="l00666"></a><span class="lineno">  666</span>&#160;          Phi-&gt;<a class="code" href="classllvm_1_1Instruction.html#ae6b978645b8ac72d1a35e1298ffdd4f0">eraseFromParent</a>();</div>
<div class="line"><a name="l00667"></a><span class="lineno">  667</span>&#160;          Changed = <span class="keyword">true</span>;</div>
<div class="line"><a name="l00668"></a><span class="lineno">  668</span>&#160;        }</div>
<div class="line"><a name="l00669"></a><span class="lineno">  669</span>&#160;      }</div>
<div class="line"><a name="l00670"></a><span class="lineno">  670</span>&#160;    }</div>
<div class="line"><a name="l00671"></a><span class="lineno">  671</span>&#160;  } <span class="keywordflow">while</span> (Changed);</div>
<div class="line"><a name="l00672"></a><span class="lineno">  672</span>&#160;}</div>
<div class="line"><a name="l00673"></a><span class="lineno">  673</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l00674"></a><span class="lineno">  674</span>&#160;<span class="comment">/// Remove phi values from all successors and then remove the terminator.</span></div>
<div class="line"><a name="l00675"></a><span class="lineno">  675</span>&#160;<span class="comment"></span><span class="keywordtype">void</span> StructurizeCFG::killTerminator(<a class="code" href="classllvm_1_1BasicBlock.html">BasicBlock</a> *<a class="code" href="lib_2CodeGen_2README_8txt.html#a09776db24cf586ec9f1e18f3bae14099">BB</a>) {</div>
<div class="line"><a name="l00676"></a><span class="lineno">  676</span>&#160;  <a class="code" href="classllvm_1_1Instruction.html">Instruction</a> *<a class="code" href="namespacellvm_1_1M68kBeads.html#ac808f5f233066c25641be8a6c1e2b100a27d0e059322508a76f918503800ef1bd">Term</a> = <a class="code" href="lib_2CodeGen_2README_8txt.html#a09776db24cf586ec9f1e18f3bae14099">BB</a>-&gt;getTerminator();</div>
<div class="line"><a name="l00677"></a><span class="lineno">  677</span>&#160;  <span class="keywordflow">if</span> (!<a class="code" href="namespacellvm_1_1M68kBeads.html#ac808f5f233066c25641be8a6c1e2b100a27d0e059322508a76f918503800ef1bd">Term</a>)</div>
<div class="line"><a name="l00678"></a><span class="lineno">  678</span>&#160;    <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l00679"></a><span class="lineno">  679</span>&#160; </div>
<div class="line"><a name="l00680"></a><span class="lineno">  680</span>&#160;  <span class="keywordflow">for</span> (<a class="code" href="classllvm_1_1BasicBlock.html">BasicBlock</a> *Succ : <a class="code" href="namespacellvm.html#a3493591c859b8ae672dfa20950608c86">successors</a>(<a class="code" href="lib_2CodeGen_2README_8txt.html#a09776db24cf586ec9f1e18f3bae14099">BB</a>))</div>
<div class="line"><a name="l00681"></a><span class="lineno">  681</span>&#160;    delPhiValues(<a class="code" href="lib_2CodeGen_2README_8txt.html#a09776db24cf586ec9f1e18f3bae14099">BB</a>, Succ);</div>
<div class="line"><a name="l00682"></a><span class="lineno">  682</span>&#160; </div>
<div class="line"><a name="l00683"></a><span class="lineno">  683</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="namespacellvm_1_1M68kBeads.html#afbb60528aad372e0f063768acfde38adaa98d0c355559e96d77f0eb2adb883db9">DA</a>)</div>
<div class="line"><a name="l00684"></a><span class="lineno">  684</span>&#160;    <a class="code" href="namespacellvm_1_1M68kBeads.html#afbb60528aad372e0f063768acfde38adaa98d0c355559e96d77f0eb2adb883db9">DA</a>-&gt;removeValue(<a class="code" href="namespacellvm_1_1M68kBeads.html#ac808f5f233066c25641be8a6c1e2b100a27d0e059322508a76f918503800ef1bd">Term</a>);</div>
<div class="line"><a name="l00685"></a><span class="lineno">  685</span>&#160;  <a class="code" href="namespacellvm_1_1M68kBeads.html#ac808f5f233066c25641be8a6c1e2b100a27d0e059322508a76f918503800ef1bd">Term</a>-&gt;eraseFromParent();</div>
<div class="line"><a name="l00686"></a><span class="lineno">  686</span>&#160;}</div>
<div class="line"><a name="l00687"></a><span class="lineno">  687</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l00688"></a><span class="lineno">  688</span>&#160;<span class="comment">/// Let node exit(s) point to NewExit</span></div>
<div class="line"><a name="l00689"></a><span class="lineno">  689</span>&#160;<span class="comment"></span><span class="keywordtype">void</span> StructurizeCFG::changeExit(<a class="code" href="classllvm_1_1RegionNode.html">RegionNode</a> *Node, <a class="code" href="classllvm_1_1BasicBlock.html">BasicBlock</a> *NewExit,</div>
<div class="line"><a name="l00690"></a><span class="lineno">  690</span>&#160;                                <span class="keywordtype">bool</span> IncludeDominator) {</div>
<div class="line"><a name="l00691"></a><span class="lineno">  691</span>&#160;  <span class="keywordflow">if</span> (Node-&gt;isSubRegion()) {</div>
<div class="line"><a name="l00692"></a><span class="lineno">  692</span>&#160;    <a class="code" href="classllvm_1_1Region.html">Region</a> *SubRegion = Node-&gt;getNodeAs&lt;<a class="code" href="classllvm_1_1Region.html">Region</a>&gt;();</div>
<div class="line"><a name="l00693"></a><span class="lineno">  693</span>&#160;    <a class="code" href="classllvm_1_1BasicBlock.html">BasicBlock</a> *OldExit = SubRegion-&gt;<a class="code" href="classllvm_1_1RegionBase.html#a1e4d2a9707cc6d2a71a1ffea59516ad5">getExit</a>();</div>
<div class="line"><a name="l00694"></a><span class="lineno">  694</span>&#160;    <a class="code" href="classllvm_1_1BasicBlock.html">BasicBlock</a> *Dominator = <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l00695"></a><span class="lineno">  695</span>&#160; </div>
<div class="line"><a name="l00696"></a><span class="lineno">  696</span>&#160;    <span class="comment">// Find all the edges from the sub region to the exit.</span></div>
<div class="line"><a name="l00697"></a><span class="lineno">  697</span>&#160;    <span class="comment">// We use make_early_inc_range here because we modify BB&#39;s terminator.</span></div>
<div class="line"><a name="l00698"></a><span class="lineno">  698</span>&#160;    <span class="keywordflow">for</span> (<a class="code" href="classllvm_1_1BasicBlock.html">BasicBlock</a> *<a class="code" href="lib_2CodeGen_2README_8txt.html#a09776db24cf586ec9f1e18f3bae14099">BB</a> : <a class="code" href="namespacellvm.html#a8154638df88e4eaa568b67b23d463dac">llvm::make_early_inc_range</a>(<a class="code" href="namespacellvm.html#a91d9d210ba428cc67e3c2e892f24529e">predecessors</a>(OldExit))) {</div>
<div class="line"><a name="l00699"></a><span class="lineno">  699</span>&#160;      <span class="keywordflow">if</span> (!SubRegion-&gt;<a class="code" href="classllvm_1_1RegionBase.html#a75479f44e7157d1a8592231addb67c9c">contains</a>(<a class="code" href="lib_2CodeGen_2README_8txt.html#a09776db24cf586ec9f1e18f3bae14099">BB</a>))</div>
<div class="line"><a name="l00700"></a><span class="lineno">  700</span>&#160;        <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l00701"></a><span class="lineno">  701</span>&#160; </div>
<div class="line"><a name="l00702"></a><span class="lineno">  702</span>&#160;      <span class="comment">// Modify the edges to point to the new exit</span></div>
<div class="line"><a name="l00703"></a><span class="lineno">  703</span>&#160;      delPhiValues(<a class="code" href="lib_2CodeGen_2README_8txt.html#a09776db24cf586ec9f1e18f3bae14099">BB</a>, OldExit);</div>
<div class="line"><a name="l00704"></a><span class="lineno">  704</span>&#160;      <a class="code" href="lib_2CodeGen_2README_8txt.html#a09776db24cf586ec9f1e18f3bae14099">BB</a>-&gt;getTerminator()-&gt;replaceUsesOfWith(OldExit, NewExit);</div>
<div class="line"><a name="l00705"></a><span class="lineno">  705</span>&#160;      addPhiValues(<a class="code" href="lib_2CodeGen_2README_8txt.html#a09776db24cf586ec9f1e18f3bae14099">BB</a>, NewExit);</div>
<div class="line"><a name="l00706"></a><span class="lineno">  706</span>&#160; </div>
<div class="line"><a name="l00707"></a><span class="lineno">  707</span>&#160;      <span class="comment">// Find the new dominator (if requested)</span></div>
<div class="line"><a name="l00708"></a><span class="lineno">  708</span>&#160;      <span class="keywordflow">if</span> (IncludeDominator) {</div>
<div class="line"><a name="l00709"></a><span class="lineno">  709</span>&#160;        <span class="keywordflow">if</span> (!Dominator)</div>
<div class="line"><a name="l00710"></a><span class="lineno">  710</span>&#160;          Dominator = <a class="code" href="lib_2CodeGen_2README_8txt.html#a09776db24cf586ec9f1e18f3bae14099">BB</a>;</div>
<div class="line"><a name="l00711"></a><span class="lineno">  711</span>&#160;        <span class="keywordflow">else</span></div>
<div class="line"><a name="l00712"></a><span class="lineno">  712</span>&#160;          Dominator = DT-&gt;findNearestCommonDominator(Dominator, <a class="code" href="lib_2CodeGen_2README_8txt.html#a09776db24cf586ec9f1e18f3bae14099">BB</a>);</div>
<div class="line"><a name="l00713"></a><span class="lineno">  713</span>&#160;      }</div>
<div class="line"><a name="l00714"></a><span class="lineno">  714</span>&#160;    }</div>
<div class="line"><a name="l00715"></a><span class="lineno">  715</span>&#160; </div>
<div class="line"><a name="l00716"></a><span class="lineno">  716</span>&#160;    <span class="comment">// Change the dominator (if requested)</span></div>
<div class="line"><a name="l00717"></a><span class="lineno">  717</span>&#160;    <span class="keywordflow">if</span> (Dominator)</div>
<div class="line"><a name="l00718"></a><span class="lineno">  718</span>&#160;      DT-&gt;changeImmediateDominator(NewExit, Dominator);</div>
<div class="line"><a name="l00719"></a><span class="lineno">  719</span>&#160; </div>
<div class="line"><a name="l00720"></a><span class="lineno">  720</span>&#160;    <span class="comment">// Update the region info</span></div>
<div class="line"><a name="l00721"></a><span class="lineno">  721</span>&#160;    SubRegion-&gt;<a class="code" href="classllvm_1_1RegionBase.html#a03bb82a7322410a03468d0963ab845e4">replaceExit</a>(NewExit);</div>
<div class="line"><a name="l00722"></a><span class="lineno">  722</span>&#160;  } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00723"></a><span class="lineno">  723</span>&#160;    <a class="code" href="classllvm_1_1BasicBlock.html">BasicBlock</a> *<a class="code" href="lib_2CodeGen_2README_8txt.html#a09776db24cf586ec9f1e18f3bae14099">BB</a> = Node-&gt;getNodeAs&lt;<a class="code" href="classllvm_1_1BasicBlock.html">BasicBlock</a>&gt;();</div>
<div class="line"><a name="l00724"></a><span class="lineno">  724</span>&#160;    killTerminator(<a class="code" href="lib_2CodeGen_2README_8txt.html#a09776db24cf586ec9f1e18f3bae14099">BB</a>);</div>
<div class="line"><a name="l00725"></a><span class="lineno">  725</span>&#160;    <a class="code" href="classllvm_1_1BranchInst.html#a38df51256d4b415b6a817b5e1c6d4d36">BranchInst::Create</a>(NewExit, <a class="code" href="lib_2CodeGen_2README_8txt.html#a09776db24cf586ec9f1e18f3bae14099">BB</a>);</div>
<div class="line"><a name="l00726"></a><span class="lineno">  726</span>&#160;    addPhiValues(<a class="code" href="lib_2CodeGen_2README_8txt.html#a09776db24cf586ec9f1e18f3bae14099">BB</a>, NewExit);</div>
<div class="line"><a name="l00727"></a><span class="lineno">  727</span>&#160;    <span class="keywordflow">if</span> (IncludeDominator)</div>
<div class="line"><a name="l00728"></a><span class="lineno">  728</span>&#160;      DT-&gt;changeImmediateDominator(NewExit, <a class="code" href="lib_2CodeGen_2README_8txt.html#a09776db24cf586ec9f1e18f3bae14099">BB</a>);</div>
<div class="line"><a name="l00729"></a><span class="lineno">  729</span>&#160;  }</div>
<div class="line"><a name="l00730"></a><span class="lineno">  730</span>&#160;}</div>
<div class="line"><a name="l00731"></a><span class="lineno">  731</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l00732"></a><span class="lineno">  732</span>&#160;<span class="comment">/// Create a new flow node and update dominator tree and region info</span></div>
<div class="line"><a name="l00733"></a><span class="lineno">  733</span>&#160;<span class="comment"></span><a class="code" href="classllvm_1_1BasicBlock.html">BasicBlock</a> *StructurizeCFG::getNextFlow(<a class="code" href="classllvm_1_1BasicBlock.html">BasicBlock</a> *Dominator) {</div>
<div class="line"><a name="l00734"></a><span class="lineno">  734</span>&#160;  <a class="code" href="classllvm_1_1LLVMContext.html">LLVMContext</a> &amp;<a class="code" href="NVVMIntrRange_8cpp.html#afad351d7bf10ac0446b64e7827634e94">Context</a> = Func-&gt;getContext();</div>
<div class="line"><a name="l00735"></a><span class="lineno">  735</span>&#160;  <a class="code" href="classllvm_1_1BasicBlock.html">BasicBlock</a> *<a class="code" href="README__P9_8txt.html#aa793083a95c48c23abfa352d4335685a">Insert</a> = Order.empty() ? ParentRegion-&gt;getExit() :</div>
<div class="line"><a name="l00736"></a><span class="lineno">  736</span>&#160;                       Order.back()-&gt;getEntry();</div>
<div class="line"><a name="l00737"></a><span class="lineno">  737</span>&#160;  <a class="code" href="classllvm_1_1BasicBlock.html">BasicBlock</a> *<a class="code" href="SIAnnotateControlFlow_8cpp.html#acf797fa91d5b7065dfb68a2492df28c1">Flow</a> = <a class="code" href="classllvm_1_1BasicBlock.html#ace940beeee97c222f836fe0ac70f6cf5">BasicBlock::Create</a>(<a class="code" href="NVVMIntrRange_8cpp.html#afad351d7bf10ac0446b64e7827634e94">Context</a>, <a class="code" href="StructurizeCFG_8cpp.html#a8ccfde1a2bda991468e3e81b0e41ab97">FlowBlockName</a>,</div>
<div class="line"><a name="l00738"></a><span class="lineno">  738</span>&#160;                                        Func, <a class="code" href="README__P9_8txt.html#aa793083a95c48c23abfa352d4335685a">Insert</a>);</div>
<div class="line"><a name="l00739"></a><span class="lineno">  739</span>&#160;  DT-&gt;addNewBlock(<a class="code" href="SIAnnotateControlFlow_8cpp.html#acf797fa91d5b7065dfb68a2492df28c1">Flow</a>, Dominator);</div>
<div class="line"><a name="l00740"></a><span class="lineno">  740</span>&#160;  ParentRegion-&gt;getRegionInfo()-&gt;setRegionFor(<a class="code" href="SIAnnotateControlFlow_8cpp.html#acf797fa91d5b7065dfb68a2492df28c1">Flow</a>, ParentRegion);</div>
<div class="line"><a name="l00741"></a><span class="lineno">  741</span>&#160;  <span class="keywordflow">return</span> <a class="code" href="SIAnnotateControlFlow_8cpp.html#acf797fa91d5b7065dfb68a2492df28c1">Flow</a>;</div>
<div class="line"><a name="l00742"></a><span class="lineno">  742</span>&#160;}</div>
<div class="line"><a name="l00743"></a><span class="lineno">  743</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l00744"></a><span class="lineno">  744</span>&#160;<span class="comment">/// Create a new or reuse the previous node as flow node</span></div>
<div class="line"><a name="l00745"></a><span class="lineno">  745</span>&#160;<span class="comment"></span><a class="code" href="classllvm_1_1BasicBlock.html">BasicBlock</a> *StructurizeCFG::needPrefix(<span class="keywordtype">bool</span> NeedEmpty) {</div>
<div class="line"><a name="l00746"></a><span class="lineno">  746</span>&#160;  <a class="code" href="classllvm_1_1BasicBlock.html">BasicBlock</a> *Entry = PrevNode-&gt;getEntry();</div>
<div class="line"><a name="l00747"></a><span class="lineno">  747</span>&#160; </div>
<div class="line"><a name="l00748"></a><span class="lineno">  748</span>&#160;  <span class="keywordflow">if</span> (!PrevNode-&gt;isSubRegion()) {</div>
<div class="line"><a name="l00749"></a><span class="lineno">  749</span>&#160;    killTerminator(Entry);</div>
<div class="line"><a name="l00750"></a><span class="lineno">  750</span>&#160;    <span class="keywordflow">if</span> (!NeedEmpty || Entry-&gt;getFirstInsertionPt() == Entry-&gt;end())</div>
<div class="line"><a name="l00751"></a><span class="lineno">  751</span>&#160;      <span class="keywordflow">return</span> Entry;</div>
<div class="line"><a name="l00752"></a><span class="lineno">  752</span>&#160;  }</div>
<div class="line"><a name="l00753"></a><span class="lineno">  753</span>&#160; </div>
<div class="line"><a name="l00754"></a><span class="lineno">  754</span>&#160;  <span class="comment">// create a new flow node</span></div>
<div class="line"><a name="l00755"></a><span class="lineno">  755</span>&#160;  <a class="code" href="classllvm_1_1BasicBlock.html">BasicBlock</a> *<a class="code" href="SIAnnotateControlFlow_8cpp.html#acf797fa91d5b7065dfb68a2492df28c1">Flow</a> = getNextFlow(Entry);</div>
<div class="line"><a name="l00756"></a><span class="lineno">  756</span>&#160; </div>
<div class="line"><a name="l00757"></a><span class="lineno">  757</span>&#160;  <span class="comment">// and wire it up</span></div>
<div class="line"><a name="l00758"></a><span class="lineno">  758</span>&#160;  changeExit(PrevNode, <a class="code" href="SIAnnotateControlFlow_8cpp.html#acf797fa91d5b7065dfb68a2492df28c1">Flow</a>, <span class="keyword">true</span>);</div>
<div class="line"><a name="l00759"></a><span class="lineno">  759</span>&#160;  PrevNode = ParentRegion-&gt;getBBNode(<a class="code" href="SIAnnotateControlFlow_8cpp.html#acf797fa91d5b7065dfb68a2492df28c1">Flow</a>);</div>
<div class="line"><a name="l00760"></a><span class="lineno">  760</span>&#160;  <span class="keywordflow">return</span> <a class="code" href="SIAnnotateControlFlow_8cpp.html#acf797fa91d5b7065dfb68a2492df28c1">Flow</a>;</div>
<div class="line"><a name="l00761"></a><span class="lineno">  761</span>&#160;}</div>
<div class="line"><a name="l00762"></a><span class="lineno">  762</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l00763"></a><span class="lineno">  763</span>&#160;<span class="comment">/// Returns the region exit if possible, otherwise just a new flow node</span></div>
<div class="line"><a name="l00764"></a><span class="lineno">  764</span>&#160;<span class="comment"></span><a class="code" href="classllvm_1_1BasicBlock.html">BasicBlock</a> *StructurizeCFG::needPostfix(<a class="code" href="classllvm_1_1BasicBlock.html">BasicBlock</a> *<a class="code" href="SIAnnotateControlFlow_8cpp.html#acf797fa91d5b7065dfb68a2492df28c1">Flow</a>,</div>
<div class="line"><a name="l00765"></a><span class="lineno">  765</span>&#160;                                        <span class="keywordtype">bool</span> ExitUseAllowed) {</div>
<div class="line"><a name="l00766"></a><span class="lineno">  766</span>&#160;  <span class="keywordflow">if</span> (!Order.empty() || !ExitUseAllowed)</div>
<div class="line"><a name="l00767"></a><span class="lineno">  767</span>&#160;    <span class="keywordflow">return</span> getNextFlow(<a class="code" href="SIAnnotateControlFlow_8cpp.html#acf797fa91d5b7065dfb68a2492df28c1">Flow</a>);</div>
<div class="line"><a name="l00768"></a><span class="lineno">  768</span>&#160; </div>
<div class="line"><a name="l00769"></a><span class="lineno">  769</span>&#160;  <a class="code" href="classllvm_1_1BasicBlock.html">BasicBlock</a> *Exit = ParentRegion-&gt;getExit();</div>
<div class="line"><a name="l00770"></a><span class="lineno">  770</span>&#160;  DT-&gt;changeImmediateDominator(Exit, <a class="code" href="SIAnnotateControlFlow_8cpp.html#acf797fa91d5b7065dfb68a2492df28c1">Flow</a>);</div>
<div class="line"><a name="l00771"></a><span class="lineno">  771</span>&#160;  addPhiValues(<a class="code" href="SIAnnotateControlFlow_8cpp.html#acf797fa91d5b7065dfb68a2492df28c1">Flow</a>, Exit);</div>
<div class="line"><a name="l00772"></a><span class="lineno">  772</span>&#160;  <span class="keywordflow">return</span> Exit;</div>
<div class="line"><a name="l00773"></a><span class="lineno">  773</span>&#160;}</div>
<div class="line"><a name="l00774"></a><span class="lineno">  774</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l00775"></a><span class="lineno">  775</span>&#160;<span class="comment">/// Set the previous node</span></div>
<div class="line"><a name="l00776"></a><span class="lineno">  776</span>&#160;<span class="comment"></span><span class="keywordtype">void</span> StructurizeCFG::setPrevNode(<a class="code" href="classllvm_1_1BasicBlock.html">BasicBlock</a> *<a class="code" href="lib_2CodeGen_2README_8txt.html#a09776db24cf586ec9f1e18f3bae14099">BB</a>) {</div>
<div class="line"><a name="l00777"></a><span class="lineno">  777</span>&#160;  PrevNode = ParentRegion-&gt;contains(<a class="code" href="lib_2CodeGen_2README_8txt.html#a09776db24cf586ec9f1e18f3bae14099">BB</a>) ? ParentRegion-&gt;getBBNode(<a class="code" href="lib_2CodeGen_2README_8txt.html#a09776db24cf586ec9f1e18f3bae14099">BB</a>)</div>
<div class="line"><a name="l00778"></a><span class="lineno">  778</span>&#160;                                        : <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l00779"></a><span class="lineno">  779</span>&#160;}</div>
<div class="line"><a name="l00780"></a><span class="lineno">  780</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l00781"></a><span class="lineno">  781</span>&#160;<span class="comment">/// Does BB dominate all the predicates of Node?</span></div>
<div class="line"><a name="l00782"></a><span class="lineno">  782</span>&#160;<span class="comment"></span><span class="keywordtype">bool</span> StructurizeCFG::dominatesPredicates(<a class="code" href="classllvm_1_1BasicBlock.html">BasicBlock</a> *<a class="code" href="lib_2CodeGen_2README_8txt.html#a09776db24cf586ec9f1e18f3bae14099">BB</a>, <a class="code" href="classllvm_1_1RegionNode.html">RegionNode</a> *Node) {</div>
<div class="line"><a name="l00783"></a><span class="lineno">  783</span>&#160;  <a class="code" href="classllvm_1_1DenseMap.html">BBPredicates</a> &amp;Preds = Predicates[Node-&gt;getEntry()];</div>
<div class="line"><a name="l00784"></a><span class="lineno">  784</span>&#160;  <span class="keywordflow">return</span> <a class="code" href="namespacellvm.html#a0d10fe510ced2849a8074fe81e5d04ce">llvm::all_of</a>(Preds, [&amp;](std::pair&lt;BasicBlock *, Value *&gt; Pred) {</div>
<div class="line"><a name="l00785"></a><span class="lineno">  785</span>&#160;    <span class="keywordflow">return</span> DT-&gt;dominates(<a class="code" href="lib_2CodeGen_2README_8txt.html#a09776db24cf586ec9f1e18f3bae14099">BB</a>, Pred.first);</div>
<div class="line"><a name="l00786"></a><span class="lineno">  786</span>&#160;  });</div>
<div class="line"><a name="l00787"></a><span class="lineno">  787</span>&#160;}</div>
<div class="line"><a name="l00788"></a><span class="lineno">  788</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l00789"></a><span class="lineno">  789</span>&#160;<span class="comment">/// Can we predict that this node will always be called?</span></div>
<div class="line"><a name="l00790"></a><span class="lineno">  790</span>&#160;<span class="comment"></span><span class="keywordtype">bool</span> StructurizeCFG::isPredictableTrue(<a class="code" href="classllvm_1_1RegionNode.html">RegionNode</a> *Node) {</div>
<div class="line"><a name="l00791"></a><span class="lineno">  791</span>&#160;  <a class="code" href="classllvm_1_1DenseMap.html">BBPredicates</a> &amp;Preds = Predicates[Node-&gt;getEntry()];</div>
<div class="line"><a name="l00792"></a><span class="lineno">  792</span>&#160;  <span class="keywordtype">bool</span> Dominated = <span class="keyword">false</span>;</div>
<div class="line"><a name="l00793"></a><span class="lineno">  793</span>&#160; </div>
<div class="line"><a name="l00794"></a><span class="lineno">  794</span>&#160;  <span class="comment">// Regionentry is always true</span></div>
<div class="line"><a name="l00795"></a><span class="lineno">  795</span>&#160;  <span class="keywordflow">if</span> (!PrevNode)</div>
<div class="line"><a name="l00796"></a><span class="lineno">  796</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l00797"></a><span class="lineno">  797</span>&#160; </div>
<div class="line"><a name="l00798"></a><span class="lineno">  798</span>&#160;  <span class="keywordflow">for</span> (std::pair&lt;BasicBlock*, Value*&gt; Pred : Preds) {</div>
<div class="line"><a name="l00799"></a><span class="lineno">  799</span>&#160;    <a class="code" href="classllvm_1_1BasicBlock.html">BasicBlock</a> *<a class="code" href="lib_2CodeGen_2README_8txt.html#a09776db24cf586ec9f1e18f3bae14099">BB</a> = Pred.first;</div>
<div class="line"><a name="l00800"></a><span class="lineno">  800</span>&#160;    <a class="code" href="classllvm_1_1Value.html">Value</a> *V = Pred.second;</div>
<div class="line"><a name="l00801"></a><span class="lineno">  801</span>&#160; </div>
<div class="line"><a name="l00802"></a><span class="lineno">  802</span>&#160;    <span class="keywordflow">if</span> (V != BoolTrue)</div>
<div class="line"><a name="l00803"></a><span class="lineno">  803</span>&#160;      <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l00804"></a><span class="lineno">  804</span>&#160; </div>
<div class="line"><a name="l00805"></a><span class="lineno">  805</span>&#160;    <span class="keywordflow">if</span> (!Dominated &amp;&amp; DT-&gt;dominates(<a class="code" href="lib_2CodeGen_2README_8txt.html#a09776db24cf586ec9f1e18f3bae14099">BB</a>, PrevNode-&gt;getEntry()))</div>
<div class="line"><a name="l00806"></a><span class="lineno">  806</span>&#160;      Dominated = <span class="keyword">true</span>;</div>
<div class="line"><a name="l00807"></a><span class="lineno">  807</span>&#160;  }</div>
<div class="line"><a name="l00808"></a><span class="lineno">  808</span>&#160; </div>
<div class="line"><a name="l00809"></a><span class="lineno">  809</span>&#160;  <span class="comment">// TODO: The dominator check is too strict</span></div>
<div class="line"><a name="l00810"></a><span class="lineno">  810</span>&#160;  <span class="keywordflow">return</span> Dominated;</div>
<div class="line"><a name="l00811"></a><span class="lineno">  811</span>&#160;}</div>
<div class="line"><a name="l00812"></a><span class="lineno">  812</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l00813"></a><span class="lineno">  813</span>&#160;<span class="comment">/// Take one node from the order vector and wire it up</span></div>
<div class="line"><a name="l00814"></a><span class="lineno">  814</span>&#160;<span class="comment"></span><span class="keywordtype">void</span> StructurizeCFG::wireFlow(<span class="keywordtype">bool</span> ExitUseAllowed,</div>
<div class="line"><a name="l00815"></a><span class="lineno">  815</span>&#160;                              <a class="code" href="classllvm_1_1BasicBlock.html">BasicBlock</a> *LoopEnd) {</div>
<div class="line"><a name="l00816"></a><span class="lineno">  816</span>&#160;  <a class="code" href="classllvm_1_1RegionNode.html">RegionNode</a> *Node = Order.pop_back_val();</div>
<div class="line"><a name="l00817"></a><span class="lineno">  817</span>&#160;  Visited.insert(Node-&gt;getEntry());</div>
<div class="line"><a name="l00818"></a><span class="lineno">  818</span>&#160; </div>
<div class="line"><a name="l00819"></a><span class="lineno">  819</span>&#160;  <span class="keywordflow">if</span> (isPredictableTrue(Node)) {</div>
<div class="line"><a name="l00820"></a><span class="lineno">  820</span>&#160;    <span class="comment">// Just a linear flow</span></div>
<div class="line"><a name="l00821"></a><span class="lineno">  821</span>&#160;    <span class="keywordflow">if</span> (PrevNode) {</div>
<div class="line"><a name="l00822"></a><span class="lineno">  822</span>&#160;      changeExit(PrevNode, Node-&gt;getEntry(), <span class="keyword">true</span>);</div>
<div class="line"><a name="l00823"></a><span class="lineno">  823</span>&#160;    }</div>
<div class="line"><a name="l00824"></a><span class="lineno">  824</span>&#160;    PrevNode = Node;</div>
<div class="line"><a name="l00825"></a><span class="lineno">  825</span>&#160;  } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00826"></a><span class="lineno">  826</span>&#160;    <span class="comment">// Insert extra prefix node (or reuse last one)</span></div>
<div class="line"><a name="l00827"></a><span class="lineno">  827</span>&#160;    <a class="code" href="classllvm_1_1BasicBlock.html">BasicBlock</a> *<a class="code" href="SIAnnotateControlFlow_8cpp.html#acf797fa91d5b7065dfb68a2492df28c1">Flow</a> = needPrefix(<span class="keyword">false</span>);</div>
<div class="line"><a name="l00828"></a><span class="lineno">  828</span>&#160; </div>
<div class="line"><a name="l00829"></a><span class="lineno">  829</span>&#160;    <span class="comment">// Insert extra postfix node (or use exit instead)</span></div>
<div class="line"><a name="l00830"></a><span class="lineno">  830</span>&#160;    <a class="code" href="classllvm_1_1BasicBlock.html">BasicBlock</a> *Entry = Node-&gt;getEntry();</div>
<div class="line"><a name="l00831"></a><span class="lineno">  831</span>&#160;    <a class="code" href="classllvm_1_1BasicBlock.html">BasicBlock</a> *Next = needPostfix(<a class="code" href="SIAnnotateControlFlow_8cpp.html#acf797fa91d5b7065dfb68a2492df28c1">Flow</a>, ExitUseAllowed);</div>
<div class="line"><a name="l00832"></a><span class="lineno">  832</span>&#160; </div>
<div class="line"><a name="l00833"></a><span class="lineno">  833</span>&#160;    <span class="comment">// let it point to entry and next block</span></div>
<div class="line"><a name="l00834"></a><span class="lineno">  834</span>&#160;    Conditions.push_back(<a class="code" href="classllvm_1_1BranchInst.html#a38df51256d4b415b6a817b5e1c6d4d36">BranchInst::Create</a>(Entry, Next, BoolUndef, <a class="code" href="SIAnnotateControlFlow_8cpp.html#acf797fa91d5b7065dfb68a2492df28c1">Flow</a>));</div>
<div class="line"><a name="l00835"></a><span class="lineno">  835</span>&#160;    addPhiValues(<a class="code" href="SIAnnotateControlFlow_8cpp.html#acf797fa91d5b7065dfb68a2492df28c1">Flow</a>, Entry);</div>
<div class="line"><a name="l00836"></a><span class="lineno">  836</span>&#160;    DT-&gt;changeImmediateDominator(Entry, <a class="code" href="SIAnnotateControlFlow_8cpp.html#acf797fa91d5b7065dfb68a2492df28c1">Flow</a>);</div>
<div class="line"><a name="l00837"></a><span class="lineno">  837</span>&#160; </div>
<div class="line"><a name="l00838"></a><span class="lineno">  838</span>&#160;    PrevNode = Node;</div>
<div class="line"><a name="l00839"></a><span class="lineno">  839</span>&#160;    <span class="keywordflow">while</span> (!Order.empty() &amp;&amp; !Visited.count(LoopEnd) &amp;&amp;</div>
<div class="line"><a name="l00840"></a><span class="lineno">  840</span>&#160;           dominatesPredicates(Entry, Order.back())) {</div>
<div class="line"><a name="l00841"></a><span class="lineno">  841</span>&#160;      handleLoops(<span class="keyword">false</span>, LoopEnd);</div>
<div class="line"><a name="l00842"></a><span class="lineno">  842</span>&#160;    }</div>
<div class="line"><a name="l00843"></a><span class="lineno">  843</span>&#160; </div>
<div class="line"><a name="l00844"></a><span class="lineno">  844</span>&#160;    changeExit(PrevNode, Next, <span class="keyword">false</span>);</div>
<div class="line"><a name="l00845"></a><span class="lineno">  845</span>&#160;    setPrevNode(Next);</div>
<div class="line"><a name="l00846"></a><span class="lineno">  846</span>&#160;  }</div>
<div class="line"><a name="l00847"></a><span class="lineno">  847</span>&#160;}</div>
<div class="line"><a name="l00848"></a><span class="lineno">  848</span>&#160; </div>
<div class="line"><a name="l00849"></a><span class="lineno">  849</span>&#160;<span class="keywordtype">void</span> StructurizeCFG::handleLoops(<span class="keywordtype">bool</span> ExitUseAllowed,</div>
<div class="line"><a name="l00850"></a><span class="lineno">  850</span>&#160;                                 <a class="code" href="classllvm_1_1BasicBlock.html">BasicBlock</a> *LoopEnd) {</div>
<div class="line"><a name="l00851"></a><span class="lineno">  851</span>&#160;  <a class="code" href="classllvm_1_1RegionNode.html">RegionNode</a> *Node = Order.back();</div>
<div class="line"><a name="l00852"></a><span class="lineno">  852</span>&#160;  <a class="code" href="classllvm_1_1BasicBlock.html">BasicBlock</a> *LoopStart = Node-&gt;getEntry();</div>
<div class="line"><a name="l00853"></a><span class="lineno">  853</span>&#160; </div>
<div class="line"><a name="l00854"></a><span class="lineno">  854</span>&#160;  <span class="keywordflow">if</span> (!<a class="code" href="HexagonHardwareLoops_8cpp.html#ada7c1594a393ede3ce32602d64d7ddb2">Loops</a>.count(LoopStart)) {</div>
<div class="line"><a name="l00855"></a><span class="lineno">  855</span>&#160;    wireFlow(ExitUseAllowed, LoopEnd);</div>
<div class="line"><a name="l00856"></a><span class="lineno">  856</span>&#160;    <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l00857"></a><span class="lineno">  857</span>&#160;  }</div>
<div class="line"><a name="l00858"></a><span class="lineno">  858</span>&#160; </div>
<div class="line"><a name="l00859"></a><span class="lineno">  859</span>&#160;  <span class="keywordflow">if</span> (!isPredictableTrue(Node))</div>
<div class="line"><a name="l00860"></a><span class="lineno">  860</span>&#160;    LoopStart = needPrefix(<span class="keyword">true</span>);</div>
<div class="line"><a name="l00861"></a><span class="lineno">  861</span>&#160; </div>
<div class="line"><a name="l00862"></a><span class="lineno">  862</span>&#160;  LoopEnd = <a class="code" href="HexagonHardwareLoops_8cpp.html#ada7c1594a393ede3ce32602d64d7ddb2">Loops</a>[Node-&gt;getEntry()];</div>
<div class="line"><a name="l00863"></a><span class="lineno">  863</span>&#160;  wireFlow(<span class="keyword">false</span>, LoopEnd);</div>
<div class="line"><a name="l00864"></a><span class="lineno">  864</span>&#160;  <span class="keywordflow">while</span> (!Visited.count(LoopEnd)) {</div>
<div class="line"><a name="l00865"></a><span class="lineno">  865</span>&#160;    handleLoops(<span class="keyword">false</span>, LoopEnd);</div>
<div class="line"><a name="l00866"></a><span class="lineno">  866</span>&#160;  }</div>
<div class="line"><a name="l00867"></a><span class="lineno">  867</span>&#160; </div>
<div class="line"><a name="l00868"></a><span class="lineno">  868</span>&#160;  <span class="comment">// If the start of the loop is the entry block, we can&#39;t branch to it so</span></div>
<div class="line"><a name="l00869"></a><span class="lineno">  869</span>&#160;  <span class="comment">// insert a new dummy entry block.</span></div>
<div class="line"><a name="l00870"></a><span class="lineno">  870</span>&#160;  <a class="code" href="classllvm_1_1Function.html">Function</a> *LoopFunc = LoopStart-&gt;<a class="code" href="classllvm_1_1BasicBlock.html#a38bee869ad41aebfef3de2641b12004c">getParent</a>();</div>
<div class="line"><a name="l00871"></a><span class="lineno">  871</span>&#160;  <span class="keywordflow">if</span> (LoopStart == &amp;LoopFunc-&gt;<a class="code" href="classllvm_1_1Function.html#ae6a4da5f41fc6a36735cc1704c01ce60">getEntryBlock</a>()) {</div>
<div class="line"><a name="l00872"></a><span class="lineno">  872</span>&#160;    LoopStart-&gt;<a class="code" href="classllvm_1_1Value.html#a35ee267850af7c235474a8c46c7ac5af">setName</a>(<span class="stringliteral">&quot;entry.orig&quot;</span>);</div>
<div class="line"><a name="l00873"></a><span class="lineno">  873</span>&#160; </div>
<div class="line"><a name="l00874"></a><span class="lineno">  874</span>&#160;    <a class="code" href="classllvm_1_1BasicBlock.html">BasicBlock</a> *NewEntry =</div>
<div class="line"><a name="l00875"></a><span class="lineno">  875</span>&#160;      <a class="code" href="classllvm_1_1BasicBlock.html#ace940beeee97c222f836fe0ac70f6cf5">BasicBlock::Create</a>(LoopStart-&gt;<a class="code" href="classllvm_1_1BasicBlock.html#aa286a0f7f5d38488d593bb7ef0ba183e">getContext</a>(),</div>
<div class="line"><a name="l00876"></a><span class="lineno">  876</span>&#160;                         <span class="stringliteral">&quot;entry&quot;</span>,</div>
<div class="line"><a name="l00877"></a><span class="lineno">  877</span>&#160;                         LoopFunc,</div>
<div class="line"><a name="l00878"></a><span class="lineno">  878</span>&#160;                         LoopStart);</div>
<div class="line"><a name="l00879"></a><span class="lineno">  879</span>&#160;    <a class="code" href="classllvm_1_1BranchInst.html#a38df51256d4b415b6a817b5e1c6d4d36">BranchInst::Create</a>(LoopStart, NewEntry);</div>
<div class="line"><a name="l00880"></a><span class="lineno">  880</span>&#160;    DT-&gt;setNewRoot(NewEntry);</div>
<div class="line"><a name="l00881"></a><span class="lineno">  881</span>&#160;  }</div>
<div class="line"><a name="l00882"></a><span class="lineno">  882</span>&#160; </div>
<div class="line"><a name="l00883"></a><span class="lineno">  883</span>&#160;  <span class="comment">// Create an extra loop end node</span></div>
<div class="line"><a name="l00884"></a><span class="lineno">  884</span>&#160;  LoopEnd = needPrefix(<span class="keyword">false</span>);</div>
<div class="line"><a name="l00885"></a><span class="lineno">  885</span>&#160;  <a class="code" href="classllvm_1_1BasicBlock.html">BasicBlock</a> *Next = needPostfix(LoopEnd, ExitUseAllowed);</div>
<div class="line"><a name="l00886"></a><span class="lineno">  886</span>&#160;  LoopConds.push_back(<a class="code" href="classllvm_1_1BranchInst.html#a38df51256d4b415b6a817b5e1c6d4d36">BranchInst::Create</a>(Next, LoopStart,</div>
<div class="line"><a name="l00887"></a><span class="lineno">  887</span>&#160;                                         BoolUndef, LoopEnd));</div>
<div class="line"><a name="l00888"></a><span class="lineno">  888</span>&#160;  addPhiValues(LoopEnd, LoopStart);</div>
<div class="line"><a name="l00889"></a><span class="lineno">  889</span>&#160;  setPrevNode(Next);</div>
<div class="line"><a name="l00890"></a><span class="lineno">  890</span>&#160;}</div>
<div class="line"><a name="l00891"></a><span class="lineno">  891</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l00892"></a><span class="lineno">  892</span>&#160;<span class="comment">/// After this function control flow looks like it should be, but</span></div>
<div class="line"><a name="l00893"></a><span class="lineno">  893</span>&#160;<span class="comment">/// branches and PHI nodes only have undefined conditions.</span></div>
<div class="line"><a name="l00894"></a><span class="lineno">  894</span>&#160;<span class="comment"></span><span class="keywordtype">void</span> StructurizeCFG::createFlow() {</div>
<div class="line"><a name="l00895"></a><span class="lineno">  895</span>&#160;  <a class="code" href="classllvm_1_1BasicBlock.html">BasicBlock</a> *Exit = ParentRegion-&gt;getExit();</div>
<div class="line"><a name="l00896"></a><span class="lineno">  896</span>&#160;  <span class="keywordtype">bool</span> EntryDominatesExit = DT-&gt;dominates(ParentRegion-&gt;getEntry(), Exit);</div>
<div class="line"><a name="l00897"></a><span class="lineno">  897</span>&#160; </div>
<div class="line"><a name="l00898"></a><span class="lineno">  898</span>&#160;  AffectedPhis.clear();</div>
<div class="line"><a name="l00899"></a><span class="lineno">  899</span>&#160;  DeletedPhis.clear();</div>
<div class="line"><a name="l00900"></a><span class="lineno">  900</span>&#160;  AddedPhis.clear();</div>
<div class="line"><a name="l00901"></a><span class="lineno">  901</span>&#160;  Conditions.clear();</div>
<div class="line"><a name="l00902"></a><span class="lineno">  902</span>&#160;  LoopConds.clear();</div>
<div class="line"><a name="l00903"></a><span class="lineno">  903</span>&#160; </div>
<div class="line"><a name="l00904"></a><span class="lineno">  904</span>&#160;  PrevNode = <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l00905"></a><span class="lineno">  905</span>&#160;  Visited.clear();</div>
<div class="line"><a name="l00906"></a><span class="lineno">  906</span>&#160; </div>
<div class="line"><a name="l00907"></a><span class="lineno">  907</span>&#160;  <span class="keywordflow">while</span> (!Order.empty()) {</div>
<div class="line"><a name="l00908"></a><span class="lineno">  908</span>&#160;    handleLoops(EntryDominatesExit, <span class="keyword">nullptr</span>);</div>
<div class="line"><a name="l00909"></a><span class="lineno">  909</span>&#160;  }</div>
<div class="line"><a name="l00910"></a><span class="lineno">  910</span>&#160; </div>
<div class="line"><a name="l00911"></a><span class="lineno">  911</span>&#160;  <span class="keywordflow">if</span> (PrevNode)</div>
<div class="line"><a name="l00912"></a><span class="lineno">  912</span>&#160;    changeExit(PrevNode, Exit, EntryDominatesExit);</div>
<div class="line"><a name="l00913"></a><span class="lineno">  913</span>&#160;  <span class="keywordflow">else</span></div>
<div class="line"><a name="l00914"></a><span class="lineno">  914</span>&#160;    <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(EntryDominatesExit);</div>
<div class="line"><a name="l00915"></a><span class="lineno">  915</span>&#160;}</div>
<div class="line"><a name="l00916"></a><span class="lineno">  916</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l00917"></a><span class="lineno">  917</span>&#160;<span class="comment">/// Handle a rare case where the disintegrated nodes instructions</span></div>
<div class="line"><a name="l00918"></a><span class="lineno">  918</span>&#160;<span class="comment">/// no longer dominate all their uses. Not sure if this is really necessary</span></div>
<div class="line"><a name="l00919"></a><span class="lineno">  919</span>&#160;<span class="comment"></span><span class="keywordtype">void</span> StructurizeCFG::rebuildSSA() {</div>
<div class="line"><a name="l00920"></a><span class="lineno">  920</span>&#160;  <a class="code" href="classllvm_1_1SSAUpdater.html">SSAUpdater</a> Updater;</div>
<div class="line"><a name="l00921"></a><span class="lineno">  921</span>&#160;  <span class="keywordflow">for</span> (<a class="code" href="classllvm_1_1BasicBlock.html">BasicBlock</a> *<a class="code" href="lib_2CodeGen_2README_8txt.html#a09776db24cf586ec9f1e18f3bae14099">BB</a> : ParentRegion-&gt;blocks())</div>
<div class="line"><a name="l00922"></a><span class="lineno">  922</span>&#160;    <span class="keywordflow">for</span> (<a class="code" href="classllvm_1_1Instruction.html">Instruction</a> &amp;<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a> : *<a class="code" href="lib_2CodeGen_2README_8txt.html#a09776db24cf586ec9f1e18f3bae14099">BB</a>) {</div>
<div class="line"><a name="l00923"></a><span class="lineno">  923</span>&#160;      <span class="keywordtype">bool</span> Initialized = <span class="keyword">false</span>;</div>
<div class="line"><a name="l00924"></a><span class="lineno">  924</span>&#160;      <span class="comment">// We may modify the use list as we iterate over it, so we use</span></div>
<div class="line"><a name="l00925"></a><span class="lineno">  925</span>&#160;      <span class="comment">// make_early_inc_range.</span></div>
<div class="line"><a name="l00926"></a><span class="lineno">  926</span>&#160;      <span class="keywordflow">for</span> (<a class="code" href="classllvm_1_1Use.html">Use</a> &amp;U : <a class="code" href="namespacellvm.html#a8154638df88e4eaa568b67b23d463dac">llvm::make_early_inc_range</a>(<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>.uses())) {</div>
<div class="line"><a name="l00927"></a><span class="lineno">  927</span>&#160;        <a class="code" href="classllvm_1_1Instruction.html">Instruction</a> *<a class="code" href="classllvm_1_1User.html">User</a> = cast&lt;Instruction&gt;(U.getUser());</div>
<div class="line"><a name="l00928"></a><span class="lineno">  928</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1User.html">User</a>-&gt;getParent() == <a class="code" href="lib_2CodeGen_2README_8txt.html#a09776db24cf586ec9f1e18f3bae14099">BB</a>) {</div>
<div class="line"><a name="l00929"></a><span class="lineno">  929</span>&#160;          <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l00930"></a><span class="lineno">  930</span>&#160;        } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1PHINode.html">PHINode</a> *UserPN = dyn_cast&lt;PHINode&gt;(<a class="code" href="classllvm_1_1User.html">User</a>)) {</div>
<div class="line"><a name="l00931"></a><span class="lineno">  931</span>&#160;          <span class="keywordflow">if</span> (UserPN-&gt;getIncomingBlock(U) == <a class="code" href="lib_2CodeGen_2README_8txt.html#a09776db24cf586ec9f1e18f3bae14099">BB</a>)</div>
<div class="line"><a name="l00932"></a><span class="lineno">  932</span>&#160;            <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l00933"></a><span class="lineno">  933</span>&#160;        }</div>
<div class="line"><a name="l00934"></a><span class="lineno">  934</span>&#160; </div>
<div class="line"><a name="l00935"></a><span class="lineno">  935</span>&#160;        <span class="keywordflow">if</span> (DT-&gt;dominates(&amp;<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>, <a class="code" href="classllvm_1_1User.html">User</a>))</div>
<div class="line"><a name="l00936"></a><span class="lineno">  936</span>&#160;          <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l00937"></a><span class="lineno">  937</span>&#160; </div>
<div class="line"><a name="l00938"></a><span class="lineno">  938</span>&#160;        <span class="keywordflow">if</span> (!Initialized) {</div>
<div class="line"><a name="l00939"></a><span class="lineno">  939</span>&#160;          <a class="code" href="classllvm_1_1Value.html">Value</a> *<a class="code" href="namespacellvm_1_1RegState.html#a5a2c54ccd4089208481258b7803e01a8ab502f975742e9bff6d6dd7b49439b806">Undef</a> = <a class="code" href="classllvm_1_1UndefValue.html#a4ae5ff22b700a42bcc5d889233721335">UndefValue::get</a>(<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>.getType());</div>
<div class="line"><a name="l00940"></a><span class="lineno">  940</span>&#160;          Updater.<a class="code" href="classllvm_1_1SSAUpdater.html#a4fe3279aae4f726813a672d4a9b26cb1">Initialize</a>(<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>.getType(), <span class="stringliteral">&quot;&quot;</span>);</div>
<div class="line"><a name="l00941"></a><span class="lineno">  941</span>&#160;          Updater.<a class="code" href="classllvm_1_1SSAUpdater.html#af0d1a82b4e629e834c2ed53e5cbe22ef">AddAvailableValue</a>(&amp;Func-&gt;getEntryBlock(), <a class="code" href="namespacellvm_1_1RegState.html#a5a2c54ccd4089208481258b7803e01a8ab502f975742e9bff6d6dd7b49439b806">Undef</a>);</div>
<div class="line"><a name="l00942"></a><span class="lineno">  942</span>&#160;          Updater.<a class="code" href="classllvm_1_1SSAUpdater.html#af0d1a82b4e629e834c2ed53e5cbe22ef">AddAvailableValue</a>(<a class="code" href="lib_2CodeGen_2README_8txt.html#a09776db24cf586ec9f1e18f3bae14099">BB</a>, &amp;<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>);</div>
<div class="line"><a name="l00943"></a><span class="lineno">  943</span>&#160;          Initialized = <span class="keyword">true</span>;</div>
<div class="line"><a name="l00944"></a><span class="lineno">  944</span>&#160;        }</div>
<div class="line"><a name="l00945"></a><span class="lineno">  945</span>&#160;        Updater.<a class="code" href="classllvm_1_1SSAUpdater.html#a248544705875de8ef1c533827ec73a2e">RewriteUseAfterInsertions</a>(U);</div>
<div class="line"><a name="l00946"></a><span class="lineno">  946</span>&#160;      }</div>
<div class="line"><a name="l00947"></a><span class="lineno">  947</span>&#160;    }</div>
<div class="line"><a name="l00948"></a><span class="lineno">  948</span>&#160;}</div>
<div class="line"><a name="l00949"></a><span class="lineno">  949</span>&#160; </div>
<div class="line"><a name="l00950"></a><span class="lineno"><a class="line" href="StructurizeCFG_8cpp.html#a6fbd91860c82b5edf2c179f4449e49e7">  950</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">bool</span> <a class="code" href="StructurizeCFG_8cpp.html#a6fbd91860c82b5edf2c179f4449e49e7">hasOnlyUniformBranches</a>(<a class="code" href="classllvm_1_1Region.html">Region</a> *<a class="code" href="namespacellvm_1_1RISCVFenceField.html#a147be9e9780c1e33363ea572d4c7b25fa1835091d83e0e052cd1a32c99b2be731">R</a>, <span class="keywordtype">unsigned</span> UniformMDKindID,</div>
<div class="line"><a name="l00951"></a><span class="lineno">  951</span>&#160;                                   <span class="keyword">const</span> <a class="code" href="classllvm_1_1LegacyDivergenceAnalysis.html">LegacyDivergenceAnalysis</a> &amp;<a class="code" href="namespacellvm_1_1M68kBeads.html#afbb60528aad372e0f063768acfde38adaa98d0c355559e96d77f0eb2adb883db9">DA</a>) {</div>
<div class="line"><a name="l00952"></a><span class="lineno">  952</span>&#160;  <span class="comment">// Bool for if all sub-regions are uniform.</span></div>
<div class="line"><a name="l00953"></a><span class="lineno">  953</span>&#160;  <span class="keywordtype">bool</span> SubRegionsAreUniform = <span class="keyword">true</span>;</div>
<div class="line"><a name="l00954"></a><span class="lineno">  954</span>&#160;  <span class="comment">// Count of how many direct children are conditional.</span></div>
<div class="line"><a name="l00955"></a><span class="lineno">  955</span>&#160;  <span class="keywordtype">unsigned</span> ConditionalDirectChildren = 0;</div>
<div class="line"><a name="l00956"></a><span class="lineno">  956</span>&#160; </div>
<div class="line"><a name="l00957"></a><span class="lineno">  957</span>&#160;  <span class="keywordflow">for</span> (<span class="keyword">auto</span> <a class="code" href="BuiltinGCs_8cpp.html#a6742d2e0a668baf1196ec69e158d5f15">E</a> : <a class="code" href="namespacellvm_1_1RISCVFenceField.html#a147be9e9780c1e33363ea572d4c7b25fa1835091d83e0e052cd1a32c99b2be731">R</a>-&gt;elements()) {</div>
<div class="line"><a name="l00958"></a><span class="lineno">  958</span>&#160;    <span class="keywordflow">if</span> (!<a class="code" href="BuiltinGCs_8cpp.html#a6742d2e0a668baf1196ec69e158d5f15">E</a>-&gt;isSubRegion()) {</div>
<div class="line"><a name="l00959"></a><span class="lineno">  959</span>&#160;      <span class="keyword">auto</span> Br = dyn_cast&lt;BranchInst&gt;(<a class="code" href="BuiltinGCs_8cpp.html#a6742d2e0a668baf1196ec69e158d5f15">E</a>-&gt;getEntry()-&gt;getTerminator());</div>
<div class="line"><a name="l00960"></a><span class="lineno">  960</span>&#160;      <span class="keywordflow">if</span> (!Br || !Br-&gt;isConditional())</div>
<div class="line"><a name="l00961"></a><span class="lineno">  961</span>&#160;        <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l00962"></a><span class="lineno">  962</span>&#160; </div>
<div class="line"><a name="l00963"></a><span class="lineno">  963</span>&#160;      <span class="keywordflow">if</span> (!<a class="code" href="namespacellvm_1_1M68kBeads.html#afbb60528aad372e0f063768acfde38adaa98d0c355559e96d77f0eb2adb883db9">DA</a>.isUniform(Br))</div>
<div class="line"><a name="l00964"></a><span class="lineno">  964</span>&#160;        <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l00965"></a><span class="lineno">  965</span>&#160; </div>
<div class="line"><a name="l00966"></a><span class="lineno">  966</span>&#160;      <span class="comment">// One of our direct children is conditional.</span></div>
<div class="line"><a name="l00967"></a><span class="lineno">  967</span>&#160;      ConditionalDirectChildren++;</div>
<div class="line"><a name="l00968"></a><span class="lineno">  968</span>&#160; </div>
<div class="line"><a name="l00969"></a><span class="lineno">  969</span>&#160;      <a class="code" href="Debug_8h.html#a08efc68d15935eb8889400a46c3749ba">LLVM_DEBUG</a>(<a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <span class="stringliteral">&quot;BB: &quot;</span> &lt;&lt; Br-&gt;getParent()-&gt;getName()</div>
<div class="line"><a name="l00970"></a><span class="lineno">  970</span>&#160;                        &lt;&lt; <span class="stringliteral">&quot; has uniform terminator\n&quot;</span>);</div>
<div class="line"><a name="l00971"></a><span class="lineno">  971</span>&#160;    } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00972"></a><span class="lineno">  972</span>&#160;      <span class="comment">// Explicitly refuse to treat regions as uniform if they have non-uniform</span></div>
<div class="line"><a name="l00973"></a><span class="lineno">  973</span>&#160;      <span class="comment">// subregions. We cannot rely on DivergenceAnalysis for branches in</span></div>
<div class="line"><a name="l00974"></a><span class="lineno">  974</span>&#160;      <span class="comment">// subregions because those branches may have been removed and re-created,</span></div>
<div class="line"><a name="l00975"></a><span class="lineno">  975</span>&#160;      <span class="comment">// so we look for our metadata instead.</span></div>
<div class="line"><a name="l00976"></a><span class="lineno">  976</span>&#160;      <span class="comment">//</span></div>
<div class="line"><a name="l00977"></a><span class="lineno">  977</span>&#160;      <span class="comment">// Warning: It would be nice to treat regions as uniform based only on</span></div>
<div class="line"><a name="l00978"></a><span class="lineno">  978</span>&#160;      <span class="comment">// their direct child basic blocks&#39; terminators, regardless of whether</span></div>
<div class="line"><a name="l00979"></a><span class="lineno">  979</span>&#160;      <span class="comment">// subregions are uniform or not. However, this requires a very careful</span></div>
<div class="line"><a name="l00980"></a><span class="lineno">  980</span>&#160;      <span class="comment">// look at SIAnnotateControlFlow to make sure nothing breaks there.</span></div>
<div class="line"><a name="l00981"></a><span class="lineno">  981</span>&#160;      <span class="keywordflow">for</span> (<span class="keyword">auto</span> <a class="code" href="lib_2CodeGen_2README_8txt.html#a09776db24cf586ec9f1e18f3bae14099">BB</a> : <a class="code" href="BuiltinGCs_8cpp.html#a6742d2e0a668baf1196ec69e158d5f15">E</a>-&gt;getNodeAs&lt;<a class="code" href="classllvm_1_1Region.html">Region</a>&gt;()-&gt;<a class="code" href="classllvm_1_1RegionBase.html#a10ba1eb8cf2fd3581b7929c2eac028b3">blocks</a>()) {</div>
<div class="line"><a name="l00982"></a><span class="lineno">  982</span>&#160;        <span class="keyword">auto</span> Br = dyn_cast&lt;BranchInst&gt;(<a class="code" href="lib_2CodeGen_2README_8txt.html#a09776db24cf586ec9f1e18f3bae14099">BB</a>-&gt;getTerminator());</div>
<div class="line"><a name="l00983"></a><span class="lineno">  983</span>&#160;        <span class="keywordflow">if</span> (!Br || !Br-&gt;isConditional())</div>
<div class="line"><a name="l00984"></a><span class="lineno">  984</span>&#160;          <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l00985"></a><span class="lineno">  985</span>&#160; </div>
<div class="line"><a name="l00986"></a><span class="lineno">  986</span>&#160;        <span class="keywordflow">if</span> (!Br-&gt;getMetadata(UniformMDKindID)) {</div>
<div class="line"><a name="l00987"></a><span class="lineno">  987</span>&#160;          <span class="comment">// Early exit if we cannot have relaxed uniform regions.</span></div>
<div class="line"><a name="l00988"></a><span class="lineno">  988</span>&#160;          <span class="keywordflow">if</span> (!RelaxedUniformRegions)</div>
<div class="line"><a name="l00989"></a><span class="lineno">  989</span>&#160;            <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l00990"></a><span class="lineno">  990</span>&#160; </div>
<div class="line"><a name="l00991"></a><span class="lineno">  991</span>&#160;          SubRegionsAreUniform = <span class="keyword">false</span>;</div>
<div class="line"><a name="l00992"></a><span class="lineno">  992</span>&#160;          <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00993"></a><span class="lineno">  993</span>&#160;        }</div>
<div class="line"><a name="l00994"></a><span class="lineno">  994</span>&#160;      }</div>
<div class="line"><a name="l00995"></a><span class="lineno">  995</span>&#160;    }</div>
<div class="line"><a name="l00996"></a><span class="lineno">  996</span>&#160;  }</div>
<div class="line"><a name="l00997"></a><span class="lineno">  997</span>&#160; </div>
<div class="line"><a name="l00998"></a><span class="lineno">  998</span>&#160;  <span class="comment">// Our region is uniform if:</span></div>
<div class="line"><a name="l00999"></a><span class="lineno">  999</span>&#160;  <span class="comment">// 1. All conditional branches that are direct children are uniform (checked</span></div>
<div class="line"><a name="l01000"></a><span class="lineno"> 1000</span>&#160;  <span class="comment">// above).</span></div>
<div class="line"><a name="l01001"></a><span class="lineno"> 1001</span>&#160;  <span class="comment">// 2. And either:</span></div>
<div class="line"><a name="l01002"></a><span class="lineno"> 1002</span>&#160;  <span class="comment">//   a. All sub-regions are uniform.</span></div>
<div class="line"><a name="l01003"></a><span class="lineno"> 1003</span>&#160;  <span class="comment">//   b. There is one or less conditional branches among the direct children.</span></div>
<div class="line"><a name="l01004"></a><span class="lineno"> 1004</span>&#160;  <span class="keywordflow">return</span> SubRegionsAreUniform || (ConditionalDirectChildren &lt;= 1);</div>
<div class="line"><a name="l01005"></a><span class="lineno"> 1005</span>&#160;}</div>
<div class="line"><a name="l01006"></a><span class="lineno"> 1006</span>&#160; </div>
<div class="line"><a name="l01007"></a><span class="lineno"> 1007</span>&#160;<span class="keywordtype">void</span> <a class="code" href="namespacellvm_1_1cl.html#a10a041239ae1870cfcc064bfaa79fb65">StructurizeCFG::init</a>(<a class="code" href="classllvm_1_1Region.html">Region</a> *<a class="code" href="namespacellvm_1_1RISCVFenceField.html#a147be9e9780c1e33363ea572d4c7b25fa1835091d83e0e052cd1a32c99b2be731">R</a>) {</div>
<div class="line"><a name="l01008"></a><span class="lineno"> 1008</span>&#160;  <a class="code" href="classllvm_1_1LLVMContext.html">LLVMContext</a> &amp;<a class="code" href="NVVMIntrRange_8cpp.html#afad351d7bf10ac0446b64e7827634e94">Context</a> = <a class="code" href="namespacellvm_1_1RISCVFenceField.html#a147be9e9780c1e33363ea572d4c7b25fa1835091d83e0e052cd1a32c99b2be731">R</a>-&gt;getEntry()-&gt;getContext();</div>
<div class="line"><a name="l01009"></a><span class="lineno"> 1009</span>&#160; </div>
<div class="line"><a name="l01010"></a><span class="lineno"> 1010</span>&#160;  <a class="code" href="namespacellvm.html#a965a7b0afb2678973d155a103b9f55b5">Boolean</a> = <a class="code" href="classllvm_1_1Type.html#aa75984a442f2379de0c66018201fa628">Type::getInt1Ty</a>(<a class="code" href="NVVMIntrRange_8cpp.html#afad351d7bf10ac0446b64e7827634e94">Context</a>);</div>
<div class="line"><a name="l01011"></a><span class="lineno"> 1011</span>&#160;  BoolTrue = <a class="code" href="classllvm_1_1ConstantInt.html#a82dbbd8e3688b0bc1eedb338864d0d0c">ConstantInt::getTrue</a>(<a class="code" href="NVVMIntrRange_8cpp.html#afad351d7bf10ac0446b64e7827634e94">Context</a>);</div>
<div class="line"><a name="l01012"></a><span class="lineno"> 1012</span>&#160;  BoolFalse = <a class="code" href="classllvm_1_1ConstantInt.html#aa7cce62ac5cc6df09cce0535874336b7">ConstantInt::getFalse</a>(<a class="code" href="NVVMIntrRange_8cpp.html#afad351d7bf10ac0446b64e7827634e94">Context</a>);</div>
<div class="line"><a name="l01013"></a><span class="lineno"> 1013</span>&#160;  BoolUndef = <a class="code" href="classllvm_1_1UndefValue.html#a4ae5ff22b700a42bcc5d889233721335">UndefValue::get</a>(<a class="code" href="namespacellvm.html#a965a7b0afb2678973d155a103b9f55b5">Boolean</a>);</div>
<div class="line"><a name="l01014"></a><span class="lineno"> 1014</span>&#160; </div>
<div class="line"><a name="l01015"></a><span class="lineno"> 1015</span>&#160;  this-&gt;<a class="code" href="namespacellvm_1_1M68kBeads.html#afbb60528aad372e0f063768acfde38adaa98d0c355559e96d77f0eb2adb883db9">DA</a> = <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l01016"></a><span class="lineno"> 1016</span>&#160;}</div>
<div class="line"><a name="l01017"></a><span class="lineno"> 1017</span>&#160; </div>
<div class="line"><a name="l01018"></a><span class="lineno"> 1018</span>&#160;<span class="keywordtype">bool</span> StructurizeCFG::makeUniformRegion(<a class="code" href="classllvm_1_1Region.html">Region</a> *<a class="code" href="namespacellvm_1_1RISCVFenceField.html#a147be9e9780c1e33363ea572d4c7b25fa1835091d83e0e052cd1a32c99b2be731">R</a>,</div>
<div class="line"><a name="l01019"></a><span class="lineno"> 1019</span>&#160;                                       <a class="code" href="classllvm_1_1LegacyDivergenceAnalysis.html">LegacyDivergenceAnalysis</a> *<a class="code" href="namespacellvm_1_1M68kBeads.html#afbb60528aad372e0f063768acfde38adaa98d0c355559e96d77f0eb2adb883db9">DA</a>) {</div>
<div class="line"><a name="l01020"></a><span class="lineno"> 1020</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="namespacellvm_1_1RISCVFenceField.html#a147be9e9780c1e33363ea572d4c7b25fa1835091d83e0e052cd1a32c99b2be731">R</a>-&gt;isTopLevelRegion())</div>
<div class="line"><a name="l01021"></a><span class="lineno"> 1021</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l01022"></a><span class="lineno"> 1022</span>&#160; </div>
<div class="line"><a name="l01023"></a><span class="lineno"> 1023</span>&#160;  this-&gt;DA = <a class="code" href="namespacellvm_1_1M68kBeads.html#afbb60528aad372e0f063768acfde38adaa98d0c355559e96d77f0eb2adb883db9">DA</a>;</div>
<div class="line"><a name="l01024"></a><span class="lineno"> 1024</span>&#160;  <span class="comment">// TODO: We could probably be smarter here with how we handle sub-regions.</span></div>
<div class="line"><a name="l01025"></a><span class="lineno"> 1025</span>&#160;  <span class="comment">// We currently rely on the fact that metadata is set by earlier invocations</span></div>
<div class="line"><a name="l01026"></a><span class="lineno"> 1026</span>&#160;  <span class="comment">// of the pass on sub-regions, and that this metadata doesn&#39;t get lost --</span></div>
<div class="line"><a name="l01027"></a><span class="lineno"> 1027</span>&#160;  <span class="comment">// but we shouldn&#39;t rely on metadata for correctness!</span></div>
<div class="line"><a name="l01028"></a><span class="lineno"> 1028</span>&#160;  <span class="keywordtype">unsigned</span> UniformMDKindID =</div>
<div class="line"><a name="l01029"></a><span class="lineno"> 1029</span>&#160;      <a class="code" href="namespacellvm_1_1RISCVFenceField.html#a147be9e9780c1e33363ea572d4c7b25fa1835091d83e0e052cd1a32c99b2be731">R</a>-&gt;getEntry()-&gt;getContext().getMDKindID(<span class="stringliteral">&quot;structurizecfg.uniform&quot;</span>);</div>
<div class="line"><a name="l01030"></a><span class="lineno"> 1030</span>&#160; </div>
<div class="line"><a name="l01031"></a><span class="lineno"> 1031</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="StructurizeCFG_8cpp.html#a6fbd91860c82b5edf2c179f4449e49e7">hasOnlyUniformBranches</a>(<a class="code" href="namespacellvm_1_1RISCVFenceField.html#a147be9e9780c1e33363ea572d4c7b25fa1835091d83e0e052cd1a32c99b2be731">R</a>, UniformMDKindID, *<a class="code" href="namespacellvm_1_1M68kBeads.html#afbb60528aad372e0f063768acfde38adaa98d0c355559e96d77f0eb2adb883db9">DA</a>)) {</div>
<div class="line"><a name="l01032"></a><span class="lineno"> 1032</span>&#160;    <a class="code" href="Debug_8h.html#a08efc68d15935eb8889400a46c3749ba">LLVM_DEBUG</a>(<a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <span class="stringliteral">&quot;Skipping region with uniform control flow: &quot;</span> &lt;&lt; *<a class="code" href="namespacellvm_1_1RISCVFenceField.html#a147be9e9780c1e33363ea572d4c7b25fa1835091d83e0e052cd1a32c99b2be731">R</a></div>
<div class="line"><a name="l01033"></a><span class="lineno"> 1033</span>&#160;                      &lt;&lt; <span class="charliteral">&#39;\n&#39;</span>);</div>
<div class="line"><a name="l01034"></a><span class="lineno"> 1034</span>&#160; </div>
<div class="line"><a name="l01035"></a><span class="lineno"> 1035</span>&#160;    <span class="comment">// Mark all direct child block terminators as having been treated as</span></div>
<div class="line"><a name="l01036"></a><span class="lineno"> 1036</span>&#160;    <span class="comment">// uniform. To account for a possible future in which non-uniform</span></div>
<div class="line"><a name="l01037"></a><span class="lineno"> 1037</span>&#160;    <span class="comment">// sub-regions are treated more cleverly, indirect children are not</span></div>
<div class="line"><a name="l01038"></a><span class="lineno"> 1038</span>&#160;    <span class="comment">// marked as uniform.</span></div>
<div class="line"><a name="l01039"></a><span class="lineno"> 1039</span>&#160;    <a class="code" href="classllvm_1_1MDNode.html">MDNode</a> *MD = <a class="code" href="classllvm_1_1MDNode.html#a7d10a7b9b7f40b04d27ed97c38ea1950">MDNode::get</a>(<a class="code" href="namespacellvm_1_1RISCVFenceField.html#a147be9e9780c1e33363ea572d4c7b25fa1835091d83e0e052cd1a32c99b2be731">R</a>-&gt;getEntry()-&gt;getParent()-&gt;getContext(), {});</div>
<div class="line"><a name="l01040"></a><span class="lineno"> 1040</span>&#160;    <span class="keywordflow">for</span> (<a class="code" href="classllvm_1_1RegionNode.html">RegionNode</a> *<a class="code" href="BuiltinGCs_8cpp.html#a6742d2e0a668baf1196ec69e158d5f15">E</a> : <a class="code" href="namespacellvm_1_1RISCVFenceField.html#a147be9e9780c1e33363ea572d4c7b25fa1835091d83e0e052cd1a32c99b2be731">R</a>-&gt;elements()) {</div>
<div class="line"><a name="l01041"></a><span class="lineno"> 1041</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="BuiltinGCs_8cpp.html#a6742d2e0a668baf1196ec69e158d5f15">E</a>-&gt;isSubRegion())</div>
<div class="line"><a name="l01042"></a><span class="lineno"> 1042</span>&#160;        <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l01043"></a><span class="lineno"> 1043</span>&#160; </div>
<div class="line"><a name="l01044"></a><span class="lineno"> 1044</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1Instruction.html">Instruction</a> *<a class="code" href="namespacellvm_1_1M68kBeads.html#ac808f5f233066c25641be8a6c1e2b100a27d0e059322508a76f918503800ef1bd">Term</a> = <a class="code" href="BuiltinGCs_8cpp.html#a6742d2e0a668baf1196ec69e158d5f15">E</a>-&gt;getEntry()-&gt;getTerminator())</div>
<div class="line"><a name="l01045"></a><span class="lineno"> 1045</span>&#160;        <a class="code" href="namespacellvm_1_1M68kBeads.html#ac808f5f233066c25641be8a6c1e2b100a27d0e059322508a76f918503800ef1bd">Term</a>-&gt;setMetadata(UniformMDKindID, MD);</div>
<div class="line"><a name="l01046"></a><span class="lineno"> 1046</span>&#160;    }</div>
<div class="line"><a name="l01047"></a><span class="lineno"> 1047</span>&#160; </div>
<div class="line"><a name="l01048"></a><span class="lineno"> 1048</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l01049"></a><span class="lineno"> 1049</span>&#160;  }</div>
<div class="line"><a name="l01050"></a><span class="lineno"> 1050</span>&#160;  <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l01051"></a><span class="lineno"> 1051</span>&#160;}</div>
<div class="line"><a name="l01052"></a><span class="lineno"> 1052</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l01053"></a><span class="lineno"> 1053</span>&#160;<span class="comment">/// Run the transformation for each region found</span></div>
<div class="line"><a name="l01054"></a><span class="lineno"> 1054</span>&#160;<span class="comment"></span><span class="keywordtype">bool</span> StructurizeCFG::run(<a class="code" href="classllvm_1_1Region.html">Region</a> *<a class="code" href="namespacellvm_1_1RISCVFenceField.html#a147be9e9780c1e33363ea572d4c7b25fa1835091d83e0e052cd1a32c99b2be731">R</a>, <a class="code" href="classllvm_1_1DominatorTree.html">DominatorTree</a> *DT) {</div>
<div class="line"><a name="l01055"></a><span class="lineno"> 1055</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="namespacellvm_1_1RISCVFenceField.html#a147be9e9780c1e33363ea572d4c7b25fa1835091d83e0e052cd1a32c99b2be731">R</a>-&gt;isTopLevelRegion())</div>
<div class="line"><a name="l01056"></a><span class="lineno"> 1056</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l01057"></a><span class="lineno"> 1057</span>&#160; </div>
<div class="line"><a name="l01058"></a><span class="lineno"> 1058</span>&#160;  this-&gt;DT = DT;</div>
<div class="line"><a name="l01059"></a><span class="lineno"> 1059</span>&#160; </div>
<div class="line"><a name="l01060"></a><span class="lineno"> 1060</span>&#160;  Func = <a class="code" href="namespacellvm_1_1RISCVFenceField.html#a147be9e9780c1e33363ea572d4c7b25fa1835091d83e0e052cd1a32c99b2be731">R</a>-&gt;getEntry()-&gt;getParent();</div>
<div class="line"><a name="l01061"></a><span class="lineno"> 1061</span>&#160;  ParentRegion = <a class="code" href="namespacellvm_1_1RISCVFenceField.html#a147be9e9780c1e33363ea572d4c7b25fa1835091d83e0e052cd1a32c99b2be731">R</a>;</div>
<div class="line"><a name="l01062"></a><span class="lineno"> 1062</span>&#160; </div>
<div class="line"><a name="l01063"></a><span class="lineno"> 1063</span>&#160;  orderNodes();</div>
<div class="line"><a name="l01064"></a><span class="lineno"> 1064</span>&#160;  collectInfos();</div>
<div class="line"><a name="l01065"></a><span class="lineno"> 1065</span>&#160;  createFlow();</div>
<div class="line"><a name="l01066"></a><span class="lineno"> 1066</span>&#160;  insertConditions(<span class="keyword">false</span>);</div>
<div class="line"><a name="l01067"></a><span class="lineno"> 1067</span>&#160;  insertConditions(<span class="keyword">true</span>);</div>
<div class="line"><a name="l01068"></a><span class="lineno"> 1068</span>&#160;  setPhiValues();</div>
<div class="line"><a name="l01069"></a><span class="lineno"> 1069</span>&#160;  simplifyAffectedPhis();</div>
<div class="line"><a name="l01070"></a><span class="lineno"> 1070</span>&#160;  rebuildSSA();</div>
<div class="line"><a name="l01071"></a><span class="lineno"> 1071</span>&#160; </div>
<div class="line"><a name="l01072"></a><span class="lineno"> 1072</span>&#160;  <span class="comment">// Cleanup</span></div>
<div class="line"><a name="l01073"></a><span class="lineno"> 1073</span>&#160;  Order.clear();</div>
<div class="line"><a name="l01074"></a><span class="lineno"> 1074</span>&#160;  Visited.clear();</div>
<div class="line"><a name="l01075"></a><span class="lineno"> 1075</span>&#160;  DeletedPhis.clear();</div>
<div class="line"><a name="l01076"></a><span class="lineno"> 1076</span>&#160;  AddedPhis.clear();</div>
<div class="line"><a name="l01077"></a><span class="lineno"> 1077</span>&#160;  Predicates.clear();</div>
<div class="line"><a name="l01078"></a><span class="lineno"> 1078</span>&#160;  Conditions.clear();</div>
<div class="line"><a name="l01079"></a><span class="lineno"> 1079</span>&#160;  <a class="code" href="HexagonHardwareLoops_8cpp.html#ada7c1594a393ede3ce32602d64d7ddb2">Loops</a>.clear();</div>
<div class="line"><a name="l01080"></a><span class="lineno"> 1080</span>&#160;  LoopPreds.clear();</div>
<div class="line"><a name="l01081"></a><span class="lineno"> 1081</span>&#160;  LoopConds.clear();</div>
<div class="line"><a name="l01082"></a><span class="lineno"> 1082</span>&#160; </div>
<div class="line"><a name="l01083"></a><span class="lineno"> 1083</span>&#160;  <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l01084"></a><span class="lineno"> 1084</span>&#160;}</div>
<div class="line"><a name="l01085"></a><span class="lineno"> 1085</span>&#160; </div>
<div class="line"><a name="l01086"></a><span class="lineno"><a class="line" href="namespacellvm.html#a4fb815c8f9920e07c3ab6bfc0e144658"> 1086</a></span>&#160;<a class="code" href="classllvm_1_1Pass.html">Pass</a> *<a class="code" href="namespacellvm.html#a4fb815c8f9920e07c3ab6bfc0e144658">llvm::createStructurizeCFGPass</a>(<span class="keywordtype">bool</span> SkipUniformRegions) {</div>
<div class="line"><a name="l01087"></a><span class="lineno"> 1087</span>&#160;  <span class="keywordflow">return</span> <span class="keyword">new</span> StructurizeCFGLegacyPass(SkipUniformRegions);</div>
<div class="line"><a name="l01088"></a><span class="lineno"> 1088</span>&#160;}</div>
<div class="line"><a name="l01089"></a><span class="lineno"> 1089</span>&#160; </div>
<div class="line"><a name="l01090"></a><span class="lineno"><a class="line" href="StructurizeCFG_8cpp.html#a63566350276289ccb7ad5f0e9f11bf2b"> 1090</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code" href="StructurizeCFG_8cpp.html#a63566350276289ccb7ad5f0e9f11bf2b">addRegionIntoQueue</a>(<a class="code" href="classllvm_1_1Region.html">Region</a> &amp;<a class="code" href="namespacellvm_1_1RISCVFenceField.html#a147be9e9780c1e33363ea572d4c7b25fa1835091d83e0e052cd1a32c99b2be731">R</a>, std::vector&lt;Region *&gt; &amp;Regions) {</div>
<div class="line"><a name="l01091"></a><span class="lineno"> 1091</span>&#160;  Regions.push_back(&amp;<a class="code" href="namespacellvm_1_1RISCVFenceField.html#a147be9e9780c1e33363ea572d4c7b25fa1835091d83e0e052cd1a32c99b2be731">R</a>);</div>
<div class="line"><a name="l01092"></a><span class="lineno"> 1092</span>&#160;  <span class="keywordflow">for</span> (<span class="keyword">const</span> <span class="keyword">auto</span> &amp;<a class="code" href="BuiltinGCs_8cpp.html#a6742d2e0a668baf1196ec69e158d5f15">E</a> : <a class="code" href="namespacellvm_1_1RISCVFenceField.html#a147be9e9780c1e33363ea572d4c7b25fa1835091d83e0e052cd1a32c99b2be731">R</a>)</div>
<div class="line"><a name="l01093"></a><span class="lineno"> 1093</span>&#160;    <a class="code" href="StructurizeCFG_8cpp.html#a63566350276289ccb7ad5f0e9f11bf2b">addRegionIntoQueue</a>(*<a class="code" href="BuiltinGCs_8cpp.html#a6742d2e0a668baf1196ec69e158d5f15">E</a>, Regions);</div>
<div class="line"><a name="l01094"></a><span class="lineno"> 1094</span>&#160;}</div>
<div class="line"><a name="l01095"></a><span class="lineno"> 1095</span>&#160; </div>
<div class="line"><a name="l01096"></a><span class="lineno"><a class="line" href="structllvm_1_1StructurizeCFGPass.html#aeb3e7a1f92ba7129a43fdfe85ea9c000"> 1096</a></span>&#160;<a class="code" href="classllvm_1_1PreservedAnalyses.html">PreservedAnalyses</a> <a class="code" href="structllvm_1_1StructurizeCFGPass.html#aeb3e7a1f92ba7129a43fdfe85ea9c000">StructurizeCFGPass::run</a>(<a class="code" href="classllvm_1_1Function.html">Function</a> &amp;<a class="code" href="MD5_8cpp.html#a96d73bbd7af15cb1fc38c3f4a3bd82e9">F</a>,</div>
<div class="line"><a name="l01097"></a><span class="lineno"> 1097</span>&#160;                                          <a class="code" href="classllvm_1_1AnalysisManager.html">FunctionAnalysisManager</a> &amp;AM) {</div>
<div class="line"><a name="l01098"></a><span class="lineno"> 1098</span>&#160; </div>
<div class="line"><a name="l01099"></a><span class="lineno"> 1099</span>&#160;  <span class="keywordtype">bool</span> Changed = <span class="keyword">false</span>;</div>
<div class="line"><a name="l01100"></a><span class="lineno"> 1100</span>&#160;  <a class="code" href="classllvm_1_1DominatorTree.html">DominatorTree</a> *DT = &amp;AM.<a class="code" href="classllvm_1_1AnalysisManager.html#ab9d3d5412c20747fd0110a046604f09a">getResult</a>&lt;<a class="code" href="classllvm_1_1DominatorTreeAnalysis.html">DominatorTreeAnalysis</a>&gt;(<a class="code" href="MD5_8cpp.html#a96d73bbd7af15cb1fc38c3f4a3bd82e9">F</a>);</div>
<div class="line"><a name="l01101"></a><span class="lineno"> 1101</span>&#160;  <span class="keyword">auto</span> &amp;RI = AM.<a class="code" href="classllvm_1_1AnalysisManager.html#ab9d3d5412c20747fd0110a046604f09a">getResult</a>&lt;<a class="code" href="classllvm_1_1RegionInfoAnalysis.html">RegionInfoAnalysis</a>&gt;(<a class="code" href="MD5_8cpp.html#a96d73bbd7af15cb1fc38c3f4a3bd82e9">F</a>);</div>
<div class="line"><a name="l01102"></a><span class="lineno"> 1102</span>&#160;  std::vector&lt;Region *&gt; Regions;</div>
<div class="line"><a name="l01103"></a><span class="lineno"> 1103</span>&#160;  <a class="code" href="StructurizeCFG_8cpp.html#a63566350276289ccb7ad5f0e9f11bf2b">addRegionIntoQueue</a>(*RI.getTopLevelRegion(), Regions);</div>
<div class="line"><a name="l01104"></a><span class="lineno"> 1104</span>&#160;  <span class="keywordflow">while</span> (!Regions.empty()) {</div>
<div class="line"><a name="l01105"></a><span class="lineno"> 1105</span>&#160;    <a class="code" href="classllvm_1_1Region.html">Region</a> *<a class="code" href="namespacellvm_1_1RISCVFenceField.html#a147be9e9780c1e33363ea572d4c7b25fa1835091d83e0e052cd1a32c99b2be731">R</a> = Regions.back();</div>
<div class="line"><a name="l01106"></a><span class="lineno"> 1106</span>&#160;    StructurizeCFG SCFG;</div>
<div class="line"><a name="l01107"></a><span class="lineno"> 1107</span>&#160;    SCFG.init(<a class="code" href="namespacellvm_1_1RISCVFenceField.html#a147be9e9780c1e33363ea572d4c7b25fa1835091d83e0e052cd1a32c99b2be731">R</a>);</div>
<div class="line"><a name="l01108"></a><span class="lineno"> 1108</span>&#160;    Changed |= SCFG.run(<a class="code" href="namespacellvm_1_1RISCVFenceField.html#a147be9e9780c1e33363ea572d4c7b25fa1835091d83e0e052cd1a32c99b2be731">R</a>, DT);</div>
<div class="line"><a name="l01109"></a><span class="lineno"> 1109</span>&#160;    Regions.pop_back();</div>
<div class="line"><a name="l01110"></a><span class="lineno"> 1110</span>&#160;  }</div>
<div class="line"><a name="l01111"></a><span class="lineno"> 1111</span>&#160;  <span class="keywordflow">if</span> (!Changed)</div>
<div class="line"><a name="l01112"></a><span class="lineno"> 1112</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="classllvm_1_1PreservedAnalyses.html#a1258a1ff55557c27684010ebd7283712">PreservedAnalyses::all</a>();</div>
<div class="line"><a name="l01113"></a><span class="lineno"> 1113</span>&#160;  <a class="code" href="classllvm_1_1PreservedAnalyses.html">PreservedAnalyses</a> PA;</div>
<div class="line"><a name="l01114"></a><span class="lineno"> 1114</span>&#160;  PA.<a class="code" href="classllvm_1_1PreservedAnalyses.html#ad966bea18aa62ffb9e040509adc7c99f">preserve</a>&lt;<a class="code" href="classllvm_1_1DominatorTreeAnalysis.html">DominatorTreeAnalysis</a>&gt;();</div>
<div class="line"><a name="l01115"></a><span class="lineno"> 1115</span>&#160;  <span class="keywordflow">return</span> PA;</div>
<div class="line"><a name="l01116"></a><span class="lineno"> 1116</span>&#160;}</div>
</div><!-- fragment --></div><!-- contents -->
<div class="ttc" id="anamespacellvm_1_1Check_html_a067ee17412e800f03802fa9517685732a3450a9712780ac26b071f9da4288a396"><div class="ttname"><a href="namespacellvm_1_1Check.html#a067ee17412e800f03802fa9517685732a3450a9712780ac26b071f9da4288a396">llvm::Check::Size</a></div><div class="ttdeci">@ Size</div><div class="ttdef"><b>Definition:</b> <a href="FileCheck_8h_source.html#l00074">FileCheck.h:73</a></div></div>
<div class="ttc" id="alib_2Target_2README_8txt_html_acb559820d9ca11295b4500f179ef6392"><div class="ttname"><a href="lib_2Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a></div><div class="ttdeci">i</div><div class="ttdef"><b>Definition:</b> <a href="lib_2Target_2README_8txt_source.html#l00029">README.txt:29</a></div></div>
<div class="ttc" id="aclassllvm_1_1SSAUpdater_html_a4fe3279aae4f726813a672d4a9b26cb1"><div class="ttname"><a href="classllvm_1_1SSAUpdater.html#a4fe3279aae4f726813a672d4a9b26cb1">llvm::SSAUpdater::Initialize</a></div><div class="ttdeci">void Initialize(Type *Ty, StringRef Name)</div><div class="ttdoc">Reset this object to get ready for a new set of SSA updates with type 'Ty'.</div><div class="ttdef"><b>Definition:</b> <a href="SSAUpdater_8cpp_source.html#l00053">SSAUpdater.cpp:53</a></div></div>
<div class="ttc" id="aRegionInfo_8h_html"><div class="ttname"><a href="RegionInfo_8h.html">RegionInfo.h</a></div></div>
<div class="ttc" id="aclassllvm_1_1PreservedAnalyses_html"><div class="ttname"><a href="classllvm_1_1PreservedAnalyses.html">llvm::PreservedAnalyses</a></div><div class="ttdoc">A set of analyses that are preserved following a run of a transformation pass.</div><div class="ttdef"><b>Definition:</b> <a href="PassManager_8h_source.html#l00155">PassManager.h:155</a></div></div>
<div class="ttc" id="anamespacellvm_html_add2fcd2292dd9e51480a2f43d41acfe2"><div class="ttname"><a href="namespacellvm.html#add2fcd2292dd9e51480a2f43d41acfe2">llvm::invertCondition</a></div><div class="ttdeci">Value * invertCondition(Value *Condition)</div><div class="ttdoc">Invert the given true/false value, possibly reusing an existing copy.</div><div class="ttdef"><b>Definition:</b> <a href="Local_8cpp_source.html#l03314">Local.cpp:3314</a></div></div>
<div class="ttc" id="anamespacellvm_html_a91d9d210ba428cc67e3c2e892f24529e"><div class="ttname"><a href="namespacellvm.html#a91d9d210ba428cc67e3c2e892f24529e">llvm::predecessors</a></div><div class="ttdeci">pred_range predecessors(BasicBlock *BB)</div><div class="ttdef"><b>Definition:</b> <a href="IR_2CFG_8h_source.html#l00127">CFG.h:127</a></div></div>
<div class="ttc" id="anamespacellvm_html"><div class="ttname"><a href="namespacellvm.html">llvm</a></div><div class="ttdoc">--------------------- PointerInfo ------------------------------------</div><div class="ttdef"><b>Definition:</b> <a href="AllocatorList_8h_source.html#l00023">AllocatorList.h:23</a></div></div>
<div class="ttc" id="aclassllvm_1_1DominatorTreeBase_html_af555c3593d46d5f057fbebc8d292eac8"><div class="ttname"><a href="classllvm_1_1DominatorTreeBase.html#af555c3593d46d5f057fbebc8d292eac8">llvm::DominatorTreeBase::findNearestCommonDominator</a></div><div class="ttdeci">NodeT * findNearestCommonDominator(NodeT *A, NodeT *B) const</div><div class="ttdoc">Find nearest common dominator basic block for basic block A and B.</div><div class="ttdef"><b>Definition:</b> <a href="GenericDomTree_8h_source.html#l00468">GenericDomTree.h:468</a></div></div>
<div class="ttc" id="anamespacellvm_html_a585c08a8817ef3bb09680baec46542f6"><div class="ttname"><a href="namespacellvm.html#a585c08a8817ef3bb09680baec46542f6">llvm::initializeStructurizeCFGLegacyPassPass</a></div><div class="ttdeci">void initializeStructurizeCFGLegacyPassPass(PassRegistry &amp;)</div></div>
<div class="ttc" id="aclassllvm_1_1Type_html_aa75984a442f2379de0c66018201fa628"><div class="ttname"><a href="classllvm_1_1Type.html#aa75984a442f2379de0c66018201fa628">llvm::Type::getInt1Ty</a></div><div class="ttdeci">static IntegerType * getInt1Ty(LLVMContext &amp;C)</div><div class="ttdef"><b>Definition:</b> <a href="Type_8cpp_source.html#l00200">Type.cpp:200</a></div></div>
<div class="ttc" id="aStructurizeCFG_8cpp_html_aec6c42f972ff6a31d7483b408a246b3f"><div class="ttname"><a href="StructurizeCFG_8cpp.html#aec6c42f972ff6a31d7483b408a246b3f">INITIALIZE_PASS_BEGIN</a></div><div class="ttdeci">INITIALIZE_PASS_BEGIN(StructurizeCFGLegacyPass, &quot;structurizecfg&quot;, &quot;Structurize the CFG&quot;, false, false) INITIALIZE_PASS_END(StructurizeCFGLegacyPass</div></div>
<div class="ttc" id="aMetadata_8h_html"><div class="ttname"><a href="Metadata_8h.html">Metadata.h</a></div><div class="ttdoc">This file contains the declarations for metadata subclasses.</div></div>
<div class="ttc" id="aREADME__P9_8txt_html_aa793083a95c48c23abfa352d4335685a"><div class="ttname"><a href="README__P9_8txt.html#aa793083a95c48c23abfa352d4335685a">Insert</a></div><div class="ttdeci">Vector Rotate Left Mask Mask Insert</div><div class="ttdef"><b>Definition:</b> <a href="README__P9_8txt_source.html#l00110">README_P9.txt:112</a></div></div>
<div class="ttc" id="aclassllvm_1_1BasicBlock_html_a38bee869ad41aebfef3de2641b12004c"><div class="ttname"><a href="classllvm_1_1BasicBlock.html#a38bee869ad41aebfef3de2641b12004c">llvm::BasicBlock::getParent</a></div><div class="ttdeci">const Function * getParent() const</div><div class="ttdoc">Return the enclosing method, or null if none.</div><div class="ttdef"><b>Definition:</b> <a href="BasicBlock_8h_source.html#l00107">BasicBlock.h:107</a></div></div>
<div class="ttc" id="aRegionPass_8h_html"><div class="ttname"><a href="RegionPass_8h.html">RegionPass.h</a></div></div>
<div class="ttc" id="astructllvm_1_1SimplifyQuery_html"><div class="ttname"><a href="structllvm_1_1SimplifyQuery.html">llvm::SimplifyQuery</a></div><div class="ttdef"><b>Definition:</b> <a href="InstructionSimplify_8h_source.html#l00094">InstructionSimplify.h:94</a></div></div>
<div class="ttc" id="aSCCIterator_8h_html"><div class="ttname"><a href="SCCIterator_8h.html">SCCIterator.h</a></div><div class="ttdoc">This builds on the llvm/ADT/GraphTraits.h file to find the strongly connected components (SCCs) of a ...</div></div>
<div class="ttc" id="aclassllvm_1_1AnalysisManager_html_ab9d3d5412c20747fd0110a046604f09a"><div class="ttname"><a href="classllvm_1_1AnalysisManager.html#ab9d3d5412c20747fd0110a046604f09a">llvm::AnalysisManager::getResult</a></div><div class="ttdeci">PassT::Result &amp; getResult(IRUnitT &amp;IR, ExtraArgTs... ExtraArgs)</div><div class="ttdoc">Get the result of an analysis pass for a given IR unit.</div><div class="ttdef"><b>Definition:</b> <a href="PassManager_8h_source.html#l00769">PassManager.h:769</a></div></div>
<div class="ttc" id="aclassllvm_1_1Function_html"><div class="ttname"><a href="classllvm_1_1Function.html">llvm::Function</a></div><div class="ttdef"><b>Definition:</b> <a href="Function_8h_source.html#l00061">Function.h:62</a></div></div>
<div class="ttc" id="aREADME-SSE_8txt_html_a63d206a063eefcdf8c318ded97b65020"><div class="ttname"><a href="README-SSE_8txt.html#a63d206a063eefcdf8c318ded97b65020">P</a></div><div class="ttdeci">This currently compiles esp xmm0 movsd esp eax eax esp ret We should use not the dag combiner This is because dagcombine2 needs to be able to see through the X86ISD::Wrapper which DAGCombine can t really do The code for turning x load into a single vector load is target independent and should be moved to the dag combiner The code for turning x load into a vector load can only handle a direct load from a global or a direct load from the stack It should be generalized to handle any load from P</div><div class="ttdef"><b>Definition:</b> <a href="README-SSE_8txt_source.html#l00411">README-SSE.txt:411</a></div></div>
<div class="ttc" id="aPass_8h_html"><div class="ttname"><a href="Pass_8h.html">Pass.h</a></div></div>
<div class="ttc" id="aHexagonHardwareLoops_8cpp_html_ada7c1594a393ede3ce32602d64d7ddb2"><div class="ttname"><a href="HexagonHardwareLoops_8cpp.html#ada7c1594a393ede3ce32602d64d7ddb2">Loops</a></div><div class="ttdeci">Hexagon Hardware Loops</div><div class="ttdef"><b>Definition:</b> <a href="HexagonHardwareLoops_8cpp_source.html#l00372">HexagonHardwareLoops.cpp:372</a></div></div>
<div class="ttc" id="aclassllvm_1_1SmallVector_html"><div class="ttname"><a href="classllvm_1_1SmallVector.html">llvm::SmallVector</a></div><div class="ttdoc">This is a 'vector' (really, a variable-sized array), optimized for the case when the array is small.</div><div class="ttdef"><b>Definition:</b> <a href="SmallVector_8h_source.html#l01168">SmallVector.h:1169</a></div></div>
<div class="ttc" id="anamespacellvm_1_1RegState_html_a5a2c54ccd4089208481258b7803e01a8ab502f975742e9bff6d6dd7b49439b806"><div class="ttname"><a href="namespacellvm_1_1RegState.html#a5a2c54ccd4089208481258b7803e01a8ab502f975742e9bff6d6dd7b49439b806">llvm::RegState::Undef</a></div><div class="ttdeci">@ Undef</div><div class="ttdoc">Value of the register doesn't matter.</div><div class="ttdef"><b>Definition:</b> <a href="MachineInstrBuilder_8h_source.html#l00052">MachineInstrBuilder.h:52</a></div></div>
<div class="ttc" id="aStructurizeCFG_8cpp_html_a6fbd91860c82b5edf2c179f4449e49e7"><div class="ttname"><a href="StructurizeCFG_8cpp.html#a6fbd91860c82b5edf2c179f4449e49e7">hasOnlyUniformBranches</a></div><div class="ttdeci">static bool hasOnlyUniformBranches(Region *R, unsigned UniformMDKindID, const LegacyDivergenceAnalysis &amp;DA)</div><div class="ttdef"><b>Definition:</b> <a href="StructurizeCFG_8cpp_source.html#l00950">StructurizeCFG.cpp:950</a></div></div>
<div class="ttc" id="aclassllvm_1_1Function_html_ae6a4da5f41fc6a36735cc1704c01ce60"><div class="ttname"><a href="classllvm_1_1Function.html#ae6a4da5f41fc6a36735cc1704c01ce60">llvm::Function::getEntryBlock</a></div><div class="ttdeci">const BasicBlock &amp; getEntryBlock() const</div><div class="ttdef"><b>Definition:</b> <a href="Function_8h_source.html#l00763">Function.h:763</a></div></div>
<div class="ttc" id="aclassllvm_1_1SmallDenseSet_html"><div class="ttname"><a href="classllvm_1_1SmallDenseSet.html">llvm::SmallDenseSet</a></div><div class="ttdoc">Implements a dense probed hash-table based set with some number of buckets stored inline.</div><div class="ttdef"><b>Definition:</b> <a href="DenseSet_8h_source.html#l00286">DenseSet.h:290</a></div></div>
<div class="ttc" id="aMapVector_8h_html"><div class="ttname"><a href="MapVector_8h.html">MapVector.h</a></div></div>
<div class="ttc" id="aTransforms_2Utils_2Local_8h_html"><div class="ttname"><a href="Transforms_2Utils_2Local_8h.html">Local.h</a></div></div>
<div class="ttc" id="aclassllvm_1_1DominatorTree_html"><div class="ttname"><a href="classllvm_1_1DominatorTree.html">llvm::DominatorTree</a></div><div class="ttdoc">Concrete subclass of DominatorTreeBase that is used to compute a normal dominator tree.</div><div class="ttdef"><b>Definition:</b> <a href="Dominators_8h_source.html#l00151">Dominators.h:151</a></div></div>
<div class="ttc" id="anamespacellvm_1_1cl_html_a68075925a54790e71ca790e1d4f21a40a263ac008d8d31f13ce460395fc4cf7e6"><div class="ttname"><a href="namespacellvm_1_1cl.html#a68075925a54790e71ca790e1d4f21a40a263ac008d8d31f13ce460395fc4cf7e6">llvm::cl::Hidden</a></div><div class="ttdeci">@ Hidden</div><div class="ttdef"><b>Definition:</b> <a href="CommandLine_8h_source.html#l00143">CommandLine.h:143</a></div></div>
<div class="ttc" id="aclassllvm_1_1WeakVH_html"><div class="ttname"><a href="classllvm_1_1WeakVH.html">llvm::WeakVH</a></div><div class="ttdoc">A nullable Value handle that is nullable.</div><div class="ttdef"><b>Definition:</b> <a href="ValueHandle_8h_source.html#l00144">ValueHandle.h:144</a></div></div>
<div class="ttc" id="aclassllvm_1_1Type_html"><div class="ttname"><a href="classllvm_1_1Type.html">llvm::Type</a></div><div class="ttdoc">The instances of the Type class are immutable: once they are created, they are never changed.</div><div class="ttdef"><b>Definition:</b> <a href="Type_8h_source.html#l00045">Type.h:45</a></div></div>
<div class="ttc" id="aDenseMap_8h_html"><div class="ttname"><a href="DenseMap_8h.html">DenseMap.h</a></div></div>
<div class="ttc" id="aclassllvm_1_1filter__iterator__impl_html"><div class="ttname"><a href="classllvm_1_1filter__iterator__impl.html">llvm::filter_iterator_impl</a></div><div class="ttdoc">Specialization of filter_iterator_base for forward iteration only.</div><div class="ttdef"><b>Definition:</b> <a href="STLExtras_8h_source.html#l00412">STLExtras.h:413</a></div></div>
<div class="ttc" id="anamespacellvm_html_a469101ea87b8b432a1b4f7935c97f35c"><div class="ttname"><a href="namespacellvm.html#a469101ea87b8b432a1b4f7935c97f35c">llvm::reverse</a></div><div class="ttdeci">auto reverse(ContainerTy &amp;&amp;C, std::enable_if_t&lt; has_rbegin&lt; ContainerTy &gt;::value &gt; *=nullptr)</div><div class="ttdef"><b>Definition:</b> <a href="STLExtras_8h_source.html#l00329">STLExtras.h:329</a></div></div>
<div class="ttc" id="anamespacellvm_html_a965a7b0afb2678973d155a103b9f55b5"><div class="ttname"><a href="namespacellvm.html#a965a7b0afb2678973d155a103b9f55b5">llvm::Boolean</a></div><div class="ttdeci">unsigned char Boolean</div><div class="ttdef"><b>Definition:</b> <a href="ConvertUTF_8h_source.html#l00112">ConvertUTF.h:112</a></div></div>
<div class="ttc" id="aclassllvm_1_1iterator__adaptor__base_html"><div class="ttname"><a href="classllvm_1_1iterator__adaptor__base.html">llvm::iterator_adaptor_base</a></div><div class="ttdoc">CRTP base class for adapting an iterator to a different type.</div><div class="ttdef"><b>Definition:</b> <a href="iterator_8h_source.html#l00211">iterator.h:213</a></div></div>
<div class="ttc" id="aclassllvm_1_1DenseMapBase_html_a53408c95a7bfb5443b43fb2134c3eb23"><div class="ttname"><a href="classllvm_1_1DenseMapBase.html#a53408c95a7bfb5443b43fb2134c3eb23">llvm::DenseMapBase::count</a></div><div class="ttdeci">size_type count(const_arg_type_t&lt; KeyT &gt; Val) const</div><div class="ttdoc">Return 1 if the specified key is in the map, 0 otherwise.</div><div class="ttdef"><b>Definition:</b> <a href="DenseMap_8h_source.html#l00145">DenseMap.h:145</a></div></div>
<div class="ttc" id="anamespacellvm_1_1M68kBeads_html_ac808f5f233066c25641be8a6c1e2b100a27d0e059322508a76f918503800ef1bd"><div class="ttname"><a href="namespacellvm_1_1M68kBeads.html#ac808f5f233066c25641be8a6c1e2b100a27d0e059322508a76f918503800ef1bd">llvm::M68kBeads::Term</a></div><div class="ttdeci">@ Term</div><div class="ttdef"><b>Definition:</b> <a href="M68kBaseInfo_8h_source.html#l00071">M68kBaseInfo.h:71</a></div></div>
<div class="ttc" id="aclassllvm_1_1MapVector_html"><div class="ttname"><a href="classllvm_1_1MapVector.html">llvm::MapVector</a></div><div class="ttdoc">This class implements a map that also provides access to all stored values in a deterministic order.</div><div class="ttdef"><b>Definition:</b> <a href="MapVector_8h_source.html#l00037">MapVector.h:37</a></div></div>
<div class="ttc" id="aclassllvm_1_1SmallPtrSet_html"><div class="ttname"><a href="classllvm_1_1SmallPtrSet.html">llvm::SmallPtrSet</a></div><div class="ttdoc">SmallPtrSet - This class implements a set which is optimized for holding SmallSize or less elements.</div><div class="ttdef"><b>Definition:</b> <a href="SmallPtrSet_8h_source.html#l00449">SmallPtrSet.h:449</a></div></div>
<div class="ttc" id="allvm_2Transforms_2Utils_8h_html"><div class="ttname"><a href="llvm_2Transforms_2Utils_8h.html">Utils.h</a></div></div>
<div class="ttc" id="aSTLExtras_8h_html"><div class="ttname"><a href="STLExtras_8h.html">STLExtras.h</a></div></div>
<div class="ttc" id="aclassllvm_1_1SmallVectorImpl_html_a07e23ae504e2b8c72fd055f93ded8899"><div class="ttname"><a href="classllvm_1_1SmallVectorImpl.html#a07e23ae504e2b8c72fd055f93ded8899">llvm::SmallVectorImpl::pop_back_val</a></div><div class="ttdeci">LLVM_NODISCARD T pop_back_val()</div><div class="ttdef"><b>Definition:</b> <a href="SmallVector_8h_source.html#l00635">SmallVector.h:635</a></div></div>
<div class="ttc" id="anamespacellvm_html_a3493591c859b8ae672dfa20950608c86"><div class="ttname"><a href="namespacellvm.html#a3493591c859b8ae672dfa20950608c86">llvm::successors</a></div><div class="ttdeci">succ_range successors(Instruction *I)</div><div class="ttdef"><b>Definition:</b> <a href="IR_2CFG_8h_source.html#l00262">CFG.h:262</a></div></div>
<div class="ttc" id="aclassllvm_1_1detail_1_1DenseSetImpl_html_a79eed48913651aeedda2eed25201ea84"><div class="ttname"><a href="classllvm_1_1detail_1_1DenseSetImpl.html#a79eed48913651aeedda2eed25201ea84">llvm::detail::DenseSetImpl&lt; ValueT, SmallDenseMap&lt; ValueT, detail::DenseSetEmpty, 4, DenseMapInfo&lt; ValueT &gt;, detail::DenseSetPair&lt; ValueT &gt; &gt;, DenseMapInfo&lt; ValueT &gt; &gt;::insert</a></div><div class="ttdeci">std::pair&lt; iterator, bool &gt; insert(const ValueT &amp;V)</div><div class="ttdef"><b>Definition:</b> <a href="DenseSet_8h_source.html#l00206">DenseSet.h:206</a></div></div>
<div class="ttc" id="aUse_8h_html"><div class="ttname"><a href="Use_8h.html">Use.h</a></div><div class="ttdoc">This defines the Use class.</div></div>
<div class="ttc" id="aDebug_8h_html_a08efc68d15935eb8889400a46c3749ba"><div class="ttname"><a href="Debug_8h.html#a08efc68d15935eb8889400a46c3749ba">LLVM_DEBUG</a></div><div class="ttdeci">#define LLVM_DEBUG(X)</div><div class="ttdef"><b>Definition:</b> <a href="Debug_8h_source.html#l00122">Debug.h:122</a></div></div>
<div class="ttc" id="aclassllvm_1_1MDNode_html_a7d10a7b9b7f40b04d27ed97c38ea1950"><div class="ttname"><a href="classllvm_1_1MDNode.html#a7d10a7b9b7f40b04d27ed97c38ea1950">llvm::MDNode::get</a></div><div class="ttdeci">static MDTuple * get(LLVMContext &amp;Context, ArrayRef&lt; Metadata * &gt; MDs)</div><div class="ttdef"><b>Definition:</b> <a href="Metadata_8h_source.html#l01199">Metadata.h:1199</a></div></div>
<div class="ttc" id="aMD5_8cpp_html_a96d73bbd7af15cb1fc38c3f4a3bd82e9"><div class="ttname"><a href="MD5_8cpp.html#a96d73bbd7af15cb1fc38c3f4a3bd82e9">F</a></div><div class="ttdeci">#define F(x, y, z)</div><div class="ttdef"><b>Definition:</b> <a href="MD5_8cpp_source.html#l00056">MD5.cpp:56</a></div></div>
<div class="ttc" id="anamespacellvm_1_1RISCVFenceField_html_a147be9e9780c1e33363ea572d4c7b25fa1835091d83e0e052cd1a32c99b2be731"><div class="ttname"><a href="namespacellvm_1_1RISCVFenceField.html#a147be9e9780c1e33363ea572d4c7b25fa1835091d83e0e052cd1a32c99b2be731">llvm::RISCVFenceField::R</a></div><div class="ttdeci">@ R</div><div class="ttdef"><b>Definition:</b> <a href="RISCVBaseInfo_8h_source.html#l00180">RISCVBaseInfo.h:180</a></div></div>
<div class="ttc" id="aclassllvm_1_1BasicBlock_html"><div class="ttname"><a href="classllvm_1_1BasicBlock.html">llvm::BasicBlock</a></div><div class="ttdoc">LLVM Basic Block Representation.</div><div class="ttdef"><b>Definition:</b> <a href="BasicBlock_8h_source.html#l00058">BasicBlock.h:59</a></div></div>
<div class="ttc" id="aREADME__P9_8txt_html_ae070adaf1b4bf0e7c12fcae2b9c5ae67"><div class="ttname"><a href="README__P9_8txt.html#ae070adaf1b4bf0e7c12fcae2b9c5ae67">result</a></div><div class="ttdeci">It looks like we only need to define PPCfmarto for these because according to these instructions perform RTO on fma s result</div><div class="ttdef"><b>Definition:</b> <a href="README__P9_8txt_source.html#l00254">README_P9.txt:256</a></div></div>
<div class="ttc" id="aNVVMIntrRange_8cpp_html_afad351d7bf10ac0446b64e7827634e94"><div class="ttname"><a href="NVVMIntrRange_8cpp.html#afad351d7bf10ac0446b64e7827634e94">Context</a></div><div class="ttdeci">LLVMContext &amp; Context</div><div class="ttdef"><b>Definition:</b> <a href="NVVMIntrRange_8cpp_source.html#l00066">NVVMIntrRange.cpp:66</a></div></div>
<div class="ttc" id="anamespacellvm_html_a7c46c742c31be54870e2038048e6b391"><div class="ttname"><a href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">llvm::dbgs</a></div><div class="ttdeci">raw_ostream &amp; dbgs()</div><div class="ttdoc">dbgs() - This returns a reference to a raw_ostream for debugging messages.</div><div class="ttdef"><b>Definition:</b> <a href="Debug_8cpp_source.html#l00163">Debug.cpp:163</a></div></div>
<div class="ttc" id="aIR_2Instruction_8h_html"><div class="ttname"><a href="IR_2Instruction_8h.html">Instruction.h</a></div></div>
<div class="ttc" id="aCommandLine_8h_html"><div class="ttname"><a href="CommandLine_8h.html">CommandLine.h</a></div></div>
<div class="ttc" id="aclassllvm_1_1ConstantInt_html"><div class="ttname"><a href="classllvm_1_1ConstantInt.html">llvm::ConstantInt</a></div><div class="ttdoc">This is the shared class of boolean and integer constants.</div><div class="ttdef"><b>Definition:</b> <a href="Constants_8h_source.html#l00079">Constants.h:79</a></div></div>
<div class="ttc" id="anamespacellvm_html_a0d10fe510ced2849a8074fe81e5d04ce"><div class="ttname"><a href="namespacellvm.html#a0d10fe510ced2849a8074fe81e5d04ce">llvm::all_of</a></div><div class="ttdeci">bool all_of(R &amp;&amp;range, UnaryPredicate P)</div><div class="ttdoc">Provide wrappers to std::all_of which take ranges instead of having to pass begin/end explicitly.</div><div class="ttdef"><b>Definition:</b> <a href="STLExtras_8h_source.html#l01534">STLExtras.h:1534</a></div></div>
<div class="ttc" id="aclassllvm_1_1BasicBlock_html_a233eb15d557dbd3af7221dd9be5cb02d"><div class="ttname"><a href="classllvm_1_1BasicBlock.html#a233eb15d557dbd3af7221dd9be5cb02d">llvm::BasicBlock::phis</a></div><div class="ttdeci">iterator_range&lt; const_phi_iterator &gt; phis() const</div><div class="ttdoc">Returns a range that iterates over the phis in the basic block.</div><div class="ttdef"><b>Definition:</b> <a href="BasicBlock_8h_source.html#l00354">BasicBlock.h:354</a></div></div>
<div class="ttc" id="aclassllvm_1_1PassRegistry_html_a05a729900b76c89e808c6c3094921b2f"><div class="ttname"><a href="classllvm_1_1PassRegistry.html#a05a729900b76c89e808c6c3094921b2f">llvm::PassRegistry::getPassRegistry</a></div><div class="ttdeci">static PassRegistry * getPassRegistry()</div><div class="ttdoc">getPassRegistry - Access the global registry object, which is automatically initialized at applicatio...</div><div class="ttdef"><b>Definition:</b> <a href="PassRegistry_8cpp_source.html#l00031">PassRegistry.cpp:31</a></div></div>
<div class="ttc" id="aConstants_8h_html"><div class="ttname"><a href="Constants_8h.html">Constants.h</a></div><div class="ttdoc">This file contains the declarations for the subclasses of Constant, which represent the different fla...</div></div>
<div class="ttc" id="aStructurizeCFG_8cpp_html_a8ccfde1a2bda991468e3e81b0e41ab97"><div class="ttname"><a href="StructurizeCFG_8cpp.html#a8ccfde1a2bda991468e3e81b0e41ab97">FlowBlockName</a></div><div class="ttdeci">const char FlowBlockName[]</div><div class="ttdef"><b>Definition:</b> <a href="StructurizeCFG_8cpp_source.html#l00060">StructurizeCFG.cpp:60</a></div></div>
<div class="ttc" id="aBuiltinGCs_8cpp_html_a6742d2e0a668baf1196ec69e158d5f15"><div class="ttname"><a href="BuiltinGCs_8cpp.html#a6742d2e0a668baf1196ec69e158d5f15">E</a></div><div class="ttdeci">static GCRegistry::Add&lt; CoreCLRGC &gt; E(&quot;coreclr&quot;, &quot;CoreCLR-compatible GC&quot;)</div></div>
<div class="ttc" id="aclassllvm_1_1RegionInfoAnalysis_html"><div class="ttname"><a href="classllvm_1_1RegionInfoAnalysis.html">llvm::RegionInfoAnalysis</a></div><div class="ttdoc">Analysis pass that exposes the RegionInfo for a function.</div><div class="ttdef"><b>Definition:</b> <a href="RegionInfo_8h_source.html#l00967">RegionInfo.h:967</a></div></div>
<div class="ttc" id="aclassllvm_1_1User_html"><div class="ttname"><a href="classllvm_1_1User.html">llvm::User</a></div><div class="ttdef"><b>Definition:</b> <a href="User_8h_source.html#l00044">User.h:44</a></div></div>
<div class="ttc" id="aInstrTypes_8h_html"><div class="ttname"><a href="InstrTypes_8h.html">InstrTypes.h</a></div></div>
<div class="ttc" id="aclassllvm_1_1AnalysisUsage_html"><div class="ttname"><a href="classllvm_1_1AnalysisUsage.html">llvm::AnalysisUsage</a></div><div class="ttdoc">Represent the analysis usage information of a pass.</div><div class="ttdef"><b>Definition:</b> <a href="PassAnalysisSupport_8h_source.html#l00047">PassAnalysisSupport.h:47</a></div></div>
<div class="ttc" id="anamespacefalse_html"><div class="ttname"><a href="namespacefalse.html">false</a></div><div class="ttdef"><b>Definition:</b> <a href="StackSlotColoring_8cpp_source.html#l00142">StackSlotColoring.cpp:142</a></div></div>
<div class="ttc" id="aclassllvm_1_1SSAUpdater_html_a248544705875de8ef1c533827ec73a2e"><div class="ttname"><a href="classllvm_1_1SSAUpdater.html#a248544705875de8ef1c533827ec73a2e">llvm::SSAUpdater::RewriteUseAfterInsertions</a></div><div class="ttdeci">void RewriteUseAfterInsertions(Use &amp;U)</div><div class="ttdoc">Rewrite a use like RewriteUse but handling in-block definitions.</div><div class="ttdef"><b>Definition:</b> <a href="SSAUpdater_8cpp_source.html#l00199">SSAUpdater.cpp:199</a></div></div>
<div class="ttc" id="aStructurizeCFG_8h_html"><div class="ttname"><a href="StructurizeCFG_8h.html">StructurizeCFG.h</a></div></div>
<div class="ttc" id="aclassllvm_1_1Instruction_html"><div class="ttname"><a href="classllvm_1_1Instruction.html">llvm::Instruction</a></div><div class="ttdef"><b>Definition:</b> <a href="IR_2Instruction_8h_source.html#l00045">Instruction.h:46</a></div></div>
<div class="ttc" id="anamespacellvm_html_a57790783d1c27d76d6295d41ba751c63"><div class="ttname"><a href="namespacellvm.html#a57790783d1c27d76d6295d41ba751c63">llvm::SimplifyInstruction</a></div><div class="ttdeci">Value * SimplifyInstruction(Instruction *I, const SimplifyQuery &amp;Q, OptimizationRemarkEmitter *ORE=nullptr)</div><div class="ttdoc">See if we can compute a simplified version of this instruction.</div><div class="ttdef"><b>Definition:</b> <a href="InstructionSimplify_8cpp_source.html#l06243">InstructionSimplify.cpp:6243</a></div></div>
<div class="ttc" id="aclassllvm_1_1DominatorTreeWrapperPass_html"><div class="ttname"><a href="classllvm_1_1DominatorTreeWrapperPass.html">llvm::DominatorTreeWrapperPass</a></div><div class="ttdoc">Legacy analysis pass which computes a DominatorTree.</div><div class="ttdef"><b>Definition:</b> <a href="Dominators_8h_source.html#l00281">Dominators.h:281</a></div></div>
<div class="ttc" id="anamespacellvm_1_1rdf_1_1detail_html_a4e4412e524f5a4a2773066dffd854ea1"><div class="ttname"><a href="namespacellvm_1_1rdf_1_1detail.html#a4e4412e524f5a4a2773066dffd854ea1">llvm::rdf::detail::NodeRef</a></div><div class="ttdeci">std::pair&lt; NodeId, LaneBitmask &gt; NodeRef</div><div class="ttdef"><b>Definition:</b> <a href="RDFLiveness_8h_source.html#l00039">RDFLiveness.h:39</a></div></div>
<div class="ttc" id="aclassllvm_1_1Value_html_a35ee267850af7c235474a8c46c7ac5af"><div class="ttname"><a href="classllvm_1_1Value.html#a35ee267850af7c235474a8c46c7ac5af">llvm::Value::setName</a></div><div class="ttdeci">void setName(const Twine &amp;Name)</div><div class="ttdoc">Change the name of the value.</div><div class="ttdef"><b>Definition:</b> <a href="Value_8cpp_source.html#l00364">Value.cpp:364</a></div></div>
<div class="ttc" id="aclassllvm_1_1UndefValue_html_a4ae5ff22b700a42bcc5d889233721335"><div class="ttname"><a href="classllvm_1_1UndefValue.html#a4ae5ff22b700a42bcc5d889233721335">llvm::UndefValue::get</a></div><div class="ttdeci">static UndefValue * get(Type *T)</div><div class="ttdoc">Static factory methods - Return an 'undef' object of the specified type.</div><div class="ttdef"><b>Definition:</b> <a href="Constants_8cpp_source.html#l01786">Constants.cpp:1786</a></div></div>
<div class="ttc" id="aclassllvm_1_1cl_1_1Option_html_a2dc75fafb68e7669e776e19da7857cdf"><div class="ttname"><a href="classllvm_1_1cl_1_1Option.html#a2dc75fafb68e7669e776e19da7857cdf">llvm::cl::Option::getNumOccurrences</a></div><div class="ttdeci">int getNumOccurrences() const</div><div class="ttdef"><b>Definition:</b> <a href="CommandLine_8h_source.html#l00404">CommandLine.h:404</a></div></div>
<div class="ttc" id="allvm_2Support_2ErrorHandling_8h_html"><div class="ttname"><a href="llvm_2Support_2ErrorHandling_8h.html">ErrorHandling.h</a></div></div>
<div class="ttc" id="aclassllvm_1_1LegacyDivergenceAnalysis_html"><div class="ttname"><a href="classllvm_1_1LegacyDivergenceAnalysis.html">llvm::LegacyDivergenceAnalysis</a></div><div class="ttdef"><b>Definition:</b> <a href="LegacyDivergenceAnalysis_8h_source.html#l00031">LegacyDivergenceAnalysis.h:31</a></div></div>
<div class="ttc" id="aSmallPtrSet_8h_html"><div class="ttname"><a href="SmallPtrSet_8h.html">SmallPtrSet.h</a></div></div>
<div class="ttc" id="aPatternMatch_8h_html"><div class="ttname"><a href="PatternMatch_8h.html">PatternMatch.h</a></div></div>
<div class="ttc" id="aType_8h_html"><div class="ttname"><a href="Type_8h.html">Type.h</a></div></div>
<div class="ttc" id="anamespacellvm_1_1M68kBeads_html_afbb60528aad372e0f063768acfde38adaa98d0c355559e96d77f0eb2adb883db9"><div class="ttname"><a href="namespacellvm_1_1M68kBeads.html#afbb60528aad372e0f063768acfde38adaa98d0c355559e96d77f0eb2adb883db9">llvm::M68kBeads::DA</a></div><div class="ttdeci">@ DA</div><div class="ttdef"><b>Definition:</b> <a href="M68kBaseInfo_8h_source.html#l00059">M68kBaseInfo.h:59</a></div></div>
<div class="ttc" id="aPassSupport_8h_html_a74ce8276b89067e806f67c45a6d92575"><div class="ttname"><a href="PassSupport_8h.html#a74ce8276b89067e806f67c45a6d92575">INITIALIZE_PASS_END</a></div><div class="ttdeci">#define INITIALIZE_PASS_END(passName, arg, name, cfg, analysis)</div><div class="ttdef"><b>Definition:</b> <a href="PassSupport_8h_source.html#l00058">PassSupport.h:58</a></div></div>
<div class="ttc" id="aIR_2CFG_8h_html"><div class="ttname"><a href="IR_2CFG_8h.html">CFG.h</a></div><div class="ttdoc">This file provides various utilities for inspecting and working with the control flow graph in LLVM I...</div></div>
<div class="ttc" id="aclassllvm_1_1RegionNode_html"><div class="ttname"><a href="classllvm_1_1RegionNode.html">llvm::RegionNode</a></div><div class="ttdef"><b>Definition:</b> <a href="RegionInfo_8h_source.html#l00879">RegionInfo.h:879</a></div></div>
<div class="ttc" id="aclassllvm_1_1RegionBase_html_a10ba1eb8cf2fd3581b7929c2eac028b3"><div class="ttname"><a href="classllvm_1_1RegionBase.html#a10ba1eb8cf2fd3581b7929c2eac028b3">llvm::RegionBase::blocks</a></div><div class="ttdeci">block_range blocks()</div><div class="ttdoc">Returns a range view of the basic blocks in the region.</div><div class="ttdef"><b>Definition:</b> <a href="RegionInfo_8h_source.html#l00622">RegionInfo.h:622</a></div></div>
<div class="ttc" id="aclassllvm_1_1RegionInfoBase_html_a7100d3aafc08a45cc49421f186a0db6c"><div class="ttname"><a href="classllvm_1_1RegionInfoBase.html#a7100d3aafc08a45cc49421f186a0db6c">llvm::RegionInfoBase::getRegionFor</a></div><div class="ttdeci">RegionT * getRegionFor(BlockT *BB) const</div><div class="ttdoc">Get the smallest region that contains a BasicBlock.</div><div class="ttdef"><b>Definition:</b> <a href="RegionInfoImpl_8h_source.html#l00817">RegionInfoImpl.h:817</a></div></div>
<div class="ttc" id="aBasicBlock_8h_html"><div class="ttname"><a href="BasicBlock_8h.html">BasicBlock.h</a></div></div>
<div class="ttc" id="aclassllvm_1_1cl_1_1opt_html"><div class="ttname"><a href="classllvm_1_1cl_1_1opt.html">llvm::cl::opt&lt; bool &gt;</a></div></div>
<div class="ttc" id="aSIInstrInfo_8cpp_html_a0dfd55eaf0bcb495f09ecf8c55b256b2a97bce951e4585a39601c04d86bb14ffd"><div class="ttname"><a href="SIInstrInfo_8cpp.html#a0dfd55eaf0bcb495f09ecf8c55b256b2a97bce951e4585a39601c04d86bb14ffd">VI</a></div><div class="ttdeci">@ VI</div><div class="ttdef"><b>Definition:</b> <a href="SIInstrInfo_8cpp_source.html#l07542">SIInstrInfo.cpp:7542</a></div></div>
<div class="ttc" id="aclassllvm_1_1Instruction_html_ae6b978645b8ac72d1a35e1298ffdd4f0"><div class="ttname"><a href="classllvm_1_1Instruction.html#ae6b978645b8ac72d1a35e1298ffdd4f0">llvm::Instruction::eraseFromParent</a></div><div class="ttdeci">SymbolTableList&lt; Instruction &gt;::iterator eraseFromParent()</div><div class="ttdoc">This method unlinks 'this' from the containing basic block and deletes it.</div><div class="ttdef"><b>Definition:</b> <a href="IR_2Instruction_8cpp_source.html#l00078">Instruction.cpp:78</a></div></div>
<div class="ttc" id="aclassllvm_1_1DenseMapBase_html_adf4e7878fc0b3b8dcde545178564190d"><div class="ttname"><a href="classllvm_1_1DenseMapBase.html#adf4e7878fc0b3b8dcde545178564190d">llvm::DenseMapBase::clear</a></div><div class="ttdeci">void clear()</div><div class="ttdef"><b>Definition:</b> <a href="DenseMap_8h_source.html#l00111">DenseMap.h:111</a></div></div>
<div class="ttc" id="aStructurizeCFG_8cpp_html_a53b11141046597311361c18a5b718d1b"><div class="ttname"><a href="StructurizeCFG_8cpp.html#a53b11141046597311361c18a5b718d1b">structurizecfg</a></div><div class="ttdeci">structurizecfg</div><div class="ttdef"><b>Definition:</b> <a href="StructurizeCFG_8cpp_source.html#l00366">StructurizeCFG.cpp:366</a></div></div>
<div class="ttc" id="aclassllvm_1_1SSAUpdater_html_a5b0e45dbba53e985f1b9c532fb5f200b"><div class="ttname"><a href="classllvm_1_1SSAUpdater.html#a5b0e45dbba53e985f1b9c532fb5f200b">llvm::SSAUpdater::GetValueInMiddleOfBlock</a></div><div class="ttdeci">Value * GetValueInMiddleOfBlock(BasicBlock *BB)</div><div class="ttdoc">Construct SSA form, materializing a value that is live in the middle of the specified block.</div><div class="ttdef"><b>Definition:</b> <a href="SSAUpdater_8cpp_source.html#l00098">SSAUpdater.cpp:98</a></div></div>
<div class="ttc" id="aclassllvm_1_1scc__iterator_html"><div class="ttname"><a href="classllvm_1_1scc__iterator.html">llvm::scc_iterator</a></div><div class="ttdoc">Enumerate the SCCs of a directed graph in reverse topological order of the SCC DAG.</div><div class="ttdef"><b>Definition:</b> <a href="SCCIterator_8h_source.html#l00042">SCCIterator.h:44</a></div></div>
<div class="ttc" id="aclassllvm_1_1PreservedAnalyses_html_ad966bea18aa62ffb9e040509adc7c99f"><div class="ttname"><a href="classllvm_1_1PreservedAnalyses.html#ad966bea18aa62ffb9e040509adc7c99f">llvm::PreservedAnalyses::preserve</a></div><div class="ttdeci">void preserve()</div><div class="ttdoc">Mark an analysis as preserved.</div><div class="ttdef"><b>Definition:</b> <a href="PassManager_8h_source.html#l00176">PassManager.h:176</a></div></div>
<div class="ttc" id="aSVEIntrinsicOpts_8cpp_html_a2bb87eb1bcbc74783a83ae945eb8fa36"><div class="ttname"><a href="SVEIntrinsicOpts_8cpp.html#a2bb87eb1bcbc74783a83ae945eb8fa36">INITIALIZE_PASS_DEPENDENCY</a></div><div class="ttdeci">INITIALIZE_PASS_DEPENDENCY(DominatorTreeWrapperPass)</div></div>
<div class="ttc" id="aclassllvm_1_1LLVMContext_html"><div class="ttname"><a href="classllvm_1_1LLVMContext.html">llvm::LLVMContext</a></div><div class="ttdoc">This is an important class for using LLVM in a threaded context.</div><div class="ttdef"><b>Definition:</b> <a href="LLVMContext_8h_source.html#l00068">LLVMContext.h:68</a></div></div>
<div class="ttc" id="astructllvm_1_1StructurizeCFGPass_html_aeb3e7a1f92ba7129a43fdfe85ea9c000"><div class="ttname"><a href="structllvm_1_1StructurizeCFGPass.html#aeb3e7a1f92ba7129a43fdfe85ea9c000">llvm::StructurizeCFGPass::run</a></div><div class="ttdeci">PreservedAnalyses run(Function &amp;F, FunctionAnalysisManager &amp;AM)</div><div class="ttdef"><b>Definition:</b> <a href="StructurizeCFG_8cpp_source.html#l01096">StructurizeCFG.cpp:1096</a></div></div>
<div class="ttc" id="anamespacellvm_1_1numbers_html_a92f4283d4e0e2ea1776894b3ae93640f"><div class="ttname"><a href="namespacellvm_1_1numbers.html#a92f4283d4e0e2ea1776894b3ae93640f">llvm::numbers::e</a></div><div class="ttdeci">constexpr double e</div><div class="ttdef"><b>Definition:</b> <a href="MathExtras_8h_source.html#l00057">MathExtras.h:57</a></div></div>
<div class="ttc" id="aclassllvm_1_1BranchInst_html_a38df51256d4b415b6a817b5e1c6d4d36"><div class="ttname"><a href="classllvm_1_1BranchInst.html#a38df51256d4b415b6a817b5e1c6d4d36">llvm::BranchInst::Create</a></div><div class="ttdeci">static BranchInst * Create(BasicBlock *IfTrue, Instruction *InsertBefore=nullptr)</div><div class="ttdef"><b>Definition:</b> <a href="Instructions_8h_source.html#l03088">Instructions.h:3088</a></div></div>
<div class="ttc" id="aclassllvm_1_1DenseMap_html"><div class="ttname"><a href="classllvm_1_1DenseMap.html">llvm::DenseMap</a></div><div class="ttdef"><b>Definition:</b> <a href="DenseMap_8h_source.html#l00714">DenseMap.h:715</a></div></div>
<div class="ttc" id="aMD5_8cpp_html_ac0eafdc9ee161b71e7af98af736952fd"><div class="ttname"><a href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a></div><div class="ttdeci">#define I(x, y, z)</div><div class="ttdef"><b>Definition:</b> <a href="MD5_8cpp_source.html#l00059">MD5.cpp:59</a></div></div>
<div class="ttc" id="aclassllvm_1_1UndefValue_html"><div class="ttname"><a href="classllvm_1_1UndefValue.html">llvm::UndefValue</a></div><div class="ttdoc">'undef' values are things that do not have specified contents.</div><div class="ttdef"><b>Definition:</b> <a href="Constants_8h_source.html#l01352">Constants.h:1352</a></div></div>
<div class="ttc" id="anamespacellvm_1_1cl_html_a10a041239ae1870cfcc064bfaa79fb65"><div class="ttname"><a href="namespacellvm_1_1cl.html#a10a041239ae1870cfcc064bfaa79fb65">llvm::cl::init</a></div><div class="ttdeci">initializer&lt; Ty &gt; init(const Ty &amp;Val)</div><div class="ttdef"><b>Definition:</b> <a href="CommandLine_8h_source.html#l00443">CommandLine.h:443</a></div></div>
<div class="ttc" id="anamespacellvm_html_a8154638df88e4eaa568b67b23d463dac"><div class="ttname"><a href="namespacellvm.html#a8154638df88e4eaa568b67b23d463dac">llvm::make_early_inc_range</a></div><div class="ttdeci">iterator_range&lt; early_inc_iterator_impl&lt; detail::IterOfRange&lt; RangeT &gt; &gt; &gt; make_early_inc_range(RangeT &amp;&amp;Range)</div><div class="ttdoc">Make a range that does early increment to allow mutation of the underlying range without disrupting i...</div><div class="ttdef"><b>Definition:</b> <a href="STLExtras_8h_source.html#l00572">STLExtras.h:572</a></div></div>
<div class="ttc" id="aSILowerControlFlow_8cpp_html_a4868c5d81c5ccc98c47aeab6244346a0"><div class="ttname"><a href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a></div><div class="ttdeci">assert(ImpDefSCC.getReg()==AMDGPU::SCC &amp;&amp;ImpDefSCC.isDef())</div></div>
<div class="ttc" id="aRegionIterator_8h_html"><div class="ttname"><a href="RegionIterator_8h.html">RegionIterator.h</a></div></div>
<div class="ttc" id="aclassllvm_1_1PHINode_html_a506bcfb6f92a2184453e1fa9655f62a1"><div class="ttname"><a href="classllvm_1_1PHINode.html#a506bcfb6f92a2184453e1fa9655f62a1">llvm::PHINode::setIncomingValueForBlock</a></div><div class="ttdeci">void setIncomingValueForBlock(const BasicBlock *BB, Value *V)</div><div class="ttdoc">Set every incoming value(s) for block BB to V.</div><div class="ttdef"><b>Definition:</b> <a href="Instructions_8h_source.html#l02789">Instructions.h:2789</a></div></div>
<div class="ttc" id="anamespacellvm_html_a77e0432868a8d88e98b2fdb383790e4a"><div class="ttname"><a href="namespacellvm.html#a77e0432868a8d88e98b2fdb383790e4a">llvm::children</a></div><div class="ttdeci">iterator_range&lt; typename GraphTraits&lt; GraphType &gt;::ChildIteratorType &gt; children(const typename GraphTraits&lt; GraphType &gt;::NodeRef &amp;G)</div><div class="ttdef"><b>Definition:</b> <a href="GraphTraits_8h_source.html#l00121">GraphTraits.h:121</a></div></div>
<div class="ttc" id="aStructurizeCFG_8cpp_html_a80eb276f1afe1f81669f43ab330fe521"><div class="ttname"><a href="StructurizeCFG_8cpp.html#a80eb276f1afe1f81669f43ab330fe521">CFG</a></div><div class="ttdeci">Structurize the CFG</div><div class="ttdef"><b>Definition:</b> <a href="StructurizeCFG_8cpp_source.html#l00367">StructurizeCFG.cpp:367</a></div></div>
<div class="ttc" id="aclassllvm_1_1MDNode_html"><div class="ttname"><a href="classllvm_1_1MDNode.html">llvm::MDNode</a></div><div class="ttdoc">Metadata node.</div><div class="ttdef"><b>Definition:</b> <a href="Metadata_8h_source.html#l00897">Metadata.h:897</a></div></div>
<div class="ttc" id="aclassllvm_1_1RGPassManager_html"><div class="ttname"><a href="classllvm_1_1RGPassManager.html">llvm::RGPassManager</a></div><div class="ttdoc">The pass manager to schedule RegionPasses.</div><div class="ttdef"><b>Definition:</b> <a href="RegionPass_8h_source.html#l00086">RegionPass.h:86</a></div></div>
<div class="ttc" id="aclassllvm_1_1detail_1_1DenseSetImpl_html_a1fbf4d66a9eeaa9ade03e8febee097ee"><div class="ttname"><a href="classllvm_1_1detail_1_1DenseSetImpl.html#a1fbf4d66a9eeaa9ade03e8febee097ee">llvm::detail::DenseSetImpl&lt; ValueT, SmallDenseMap&lt; ValueT, detail::DenseSetEmpty, 4, DenseMapInfo&lt; ValueT &gt;, detail::DenseSetPair&lt; ValueT &gt; &gt;, DenseMapInfo&lt; ValueT &gt; &gt;::clear</a></div><div class="ttdeci">void clear()</div><div class="ttdef"><b>Definition:</b> <a href="DenseSet_8h_source.html#l00092">DenseSet.h:92</a></div></div>
<div class="ttc" id="aclassllvm_1_1RegionPass_html"><div class="ttname"><a href="classllvm_1_1RegionPass.html">llvm::RegionPass</a></div><div class="ttdoc">A pass that runs on each Region in a function.</div><div class="ttdef"><b>Definition:</b> <a href="RegionPass_8h_source.html#l00031">RegionPass.h:31</a></div></div>
<div class="ttc" id="anamespacellvm_1_1AMDGPU_1_1CPol_html_a7d79a4b341da8ac60b91c1f4b1ea42c4aca1659af59093b2b14c2f8aad41e8e2a"><div class="ttname"><a href="namespacellvm_1_1AMDGPU_1_1CPol.html#a7d79a4b341da8ac60b91c1f4b1ea42c4aca1659af59093b2b14c2f8aad41e8e2a">llvm::AMDGPU::CPol::SCC</a></div><div class="ttdeci">@ SCC</div><div class="ttdef"><b>Definition:</b> <a href="SIDefines_8h_source.html#l00285">SIDefines.h:285</a></div></div>
<div class="ttc" id="aclassllvm_1_1RegionInfoPass_html"><div class="ttname"><a href="classllvm_1_1RegionInfoPass.html">llvm::RegionInfoPass</a></div><div class="ttdef"><b>Definition:</b> <a href="RegionInfo_8h_source.html#l00942">RegionInfo.h:942</a></div></div>
<div class="ttc" id="anamespacellvm_html_a2366b4a30c90d2207626fb717dfb778d"><div class="ttname"><a href="namespacellvm.html#a2366b4a30c90d2207626fb717dfb778d">llvm::operator*</a></div><div class="ttdeci">APInt operator*(APInt a, uint64_t RHS)</div><div class="ttdef"><b>Definition:</b> <a href="APInt_8h_source.html#l02154">APInt.h:2154</a></div></div>
<div class="ttc" id="allvm_2Transforms_2Scalar_8h_html"><div class="ttname"><a href="llvm_2Transforms_2Scalar_8h.html">Scalar.h</a></div></div>
<div class="ttc" id="aStructurizeCFG_8cpp_html_a63566350276289ccb7ad5f0e9f11bf2b"><div class="ttname"><a href="StructurizeCFG_8cpp.html#a63566350276289ccb7ad5f0e9f11bf2b">addRegionIntoQueue</a></div><div class="ttdeci">static void addRegionIntoQueue(Region &amp;R, std::vector&lt; Region * &gt; &amp;Regions)</div><div class="ttdef"><b>Definition:</b> <a href="StructurizeCFG_8cpp_source.html#l01090">StructurizeCFG.cpp:1090</a></div></div>
<div class="ttc" id="aBasicBlockSections_8cpp_html_a5fd0741d696f28faf65b33f6c6af8fda"><div class="ttname"><a href="BasicBlockSections_8cpp.html#a5fd0741d696f28faf65b33f6c6af8fda">Cond</a></div><div class="ttdeci">SmallVector&lt; MachineOperand, 4 &gt; Cond</div><div class="ttdef"><b>Definition:</b> <a href="BasicBlockSections_8cpp_source.html#l00167">BasicBlockSections.cpp:167</a></div></div>
<div class="ttc" id="aclassllvm_1_1StringRef_html"><div class="ttname"><a href="classllvm_1_1StringRef.html">llvm::StringRef</a></div><div class="ttdoc">StringRef - Represent a constant reference to a string, i.e.</div><div class="ttdef"><b>Definition:</b> <a href="StringRef_8h_source.html#l00058">StringRef.h:58</a></div></div>
<div class="ttc" id="aclassllvm_1_1Value_html_a6393a2d4fe7e10b28a0dcc35f881567b"><div class="ttname"><a href="classllvm_1_1Value.html#a6393a2d4fe7e10b28a0dcc35f881567b">llvm::Value::getType</a></div><div class="ttdeci">Type * getType() const</div><div class="ttdoc">All values are typed, get the type of this value.</div><div class="ttdef"><b>Definition:</b> <a href="Value_8h_source.html#l00256">Value.h:256</a></div></div>
<div class="ttc" id="aclassllvm_1_1AnalysisUsage_html_a884f90190bca4bd354f2d5c91c264028"><div class="ttname"><a href="classllvm_1_1AnalysisUsage.html#a884f90190bca4bd354f2d5c91c264028">llvm::AnalysisUsage::addPreserved</a></div><div class="ttdeci">AnalysisUsage &amp; addPreserved()</div><div class="ttdoc">Add the specified Pass class to the set of analyses preserved by this pass.</div><div class="ttdef"><b>Definition:</b> <a href="PassAnalysisSupport_8h_source.html#l00098">PassAnalysisSupport.h:98</a></div></div>
<div class="ttc" id="aclassllvm_1_1Value_html_a3ab5fc45117b450e8bb04e564cb6e5f2"><div class="ttname"><a href="classllvm_1_1Value.html#a3ab5fc45117b450e8bb04e564cb6e5f2">llvm::Value::replaceAllUsesWith</a></div><div class="ttdeci">void replaceAllUsesWith(Value *V)</div><div class="ttdoc">Change all uses of this to point to a new Value.</div><div class="ttdef"><b>Definition:</b> <a href="Value_8cpp_source.html#l00520">Value.cpp:520</a></div></div>
<div class="ttc" id="aclassllvm_1_1BasicBlock_html_ace940beeee97c222f836fe0ac70f6cf5"><div class="ttname"><a href="classllvm_1_1BasicBlock.html#ace940beeee97c222f836fe0ac70f6cf5">llvm::BasicBlock::Create</a></div><div class="ttdeci">static BasicBlock * Create(LLVMContext &amp;Context, const Twine &amp;Name=&quot;&quot;, Function *Parent=nullptr, BasicBlock *InsertBefore=nullptr)</div><div class="ttdoc">Creates a new BasicBlock.</div><div class="ttdef"><b>Definition:</b> <a href="BasicBlock_8h_source.html#l00100">BasicBlock.h:100</a></div></div>
<div class="ttc" id="aclassllvm_1_1RegionInfo_html"><div class="ttname"><a href="classllvm_1_1RegionInfo.html">llvm::RegionInfo</a></div><div class="ttdef"><b>Definition:</b> <a href="RegionInfo_8h_source.html#l00900">RegionInfo.h:900</a></div></div>
<div class="ttc" id="aSSAUpdater_8h_html"><div class="ttname"><a href="SSAUpdater_8h.html">SSAUpdater.h</a></div></div>
<div class="ttc" id="aValueHandle_8h_html"><div class="ttname"><a href="ValueHandle_8h.html">ValueHandle.h</a></div></div>
<div class="ttc" id="anamespacellvm_html_a6befa52763ee29f8df2bd2ea9c3525c7"><div class="ttname"><a href="namespacellvm.html#a6befa52763ee29f8df2bd2ea9c3525c7">llvm::LowerSwitchID</a></div><div class="ttdeci">char &amp; LowerSwitchID</div><div class="ttdef"><b>Definition:</b> <a href="LowerSwitch_8cpp_source.html#l00572">LowerSwitch.cpp:572</a></div></div>
<div class="ttc" id="anamespacellvm_html_a943f22024cba236f495239754ca3c74b"><div class="ttname"><a href="namespacellvm.html#a943f22024cba236f495239754ca3c74b">llvm::make_filter_range</a></div><div class="ttdeci">iterator_range&lt; filter_iterator&lt; detail::IterOfRange&lt; RangeT &gt;, PredicateT &gt; &gt; make_filter_range(RangeT &amp;&amp;Range, PredicateT Pred)</div><div class="ttdoc">Convenience function that takes a range of elements and a predicate, and return a new filter_iterator...</div><div class="ttdef"><b>Definition:</b> <a href="STLExtras_8h_source.html#l00486">STLExtras.h:486</a></div></div>
<div class="ttc" id="aclassllvm_1_1ConstantInt_html_aa7cce62ac5cc6df09cce0535874336b7"><div class="ttname"><a href="classllvm_1_1ConstantInt.html#aa7cce62ac5cc6df09cce0535874336b7">llvm::ConstantInt::getFalse</a></div><div class="ttdeci">static ConstantInt * getFalse(LLVMContext &amp;Context)</div><div class="ttdef"><b>Definition:</b> <a href="Constants_8cpp_source.html#l00856">Constants.cpp:856</a></div></div>
<div class="ttc" id="anamespacellvm_html_a4fb815c8f9920e07c3ab6bfc0e144658"><div class="ttname"><a href="namespacellvm.html#a4fb815c8f9920e07c3ab6bfc0e144658">llvm::createStructurizeCFGPass</a></div><div class="ttdeci">Pass * createStructurizeCFGPass(bool SkipUniformRegions=false)</div><div class="ttdoc">When SkipUniformRegions is true the structizer will not structurize regions that only contain uniform...</div><div class="ttdef"><b>Definition:</b> <a href="StructurizeCFG_8cpp_source.html#l01086">StructurizeCFG.cpp:1086</a></div></div>
<div class="ttc" id="aArgument_8h_html"><div class="ttname"><a href="Argument_8h.html">Argument.h</a></div></div>
<div class="ttc" id="aclassllvm_1_1BasicBlock_html_aa286a0f7f5d38488d593bb7ef0ba183e"><div class="ttname"><a href="classllvm_1_1BasicBlock.html#aa286a0f7f5d38488d593bb7ef0ba183e">llvm::BasicBlock::getContext</a></div><div class="ttdeci">LLVMContext &amp; getContext() const</div><div class="ttdoc">Get the context in which this basic block lives.</div><div class="ttdef"><b>Definition:</b> <a href="BasicBlock_8cpp_source.html#l00032">BasicBlock.cpp:32</a></div></div>
<div class="ttc" id="aConstant_8h_html"><div class="ttname"><a href="Constant_8h.html">Constant.h</a></div></div>
<div class="ttc" id="aclassllvm_1_1ConstantInt_html_a82dbbd8e3688b0bc1eedb338864d0d0c"><div class="ttname"><a href="classllvm_1_1ConstantInt.html#a82dbbd8e3688b0bc1eedb338864d0d0c">llvm::ConstantInt::getTrue</a></div><div class="ttdeci">static ConstantInt * getTrue(LLVMContext &amp;Context)</div><div class="ttdef"><b>Definition:</b> <a href="Constants_8cpp_source.html#l00849">Constants.cpp:849</a></div></div>
<div class="ttc" id="aclassllvm_1_1PreservedAnalyses_html_a1258a1ff55557c27684010ebd7283712"><div class="ttname"><a href="classllvm_1_1PreservedAnalyses.html#a1258a1ff55557c27684010ebd7283712">llvm::PreservedAnalyses::all</a></div><div class="ttdeci">static PreservedAnalyses all()</div><div class="ttdoc">Construct a special preserved set that preserves all passes.</div><div class="ttdef"><b>Definition:</b> <a href="PassManager_8h_source.html#l00161">PassManager.h:161</a></div></div>
<div class="ttc" id="aCasting_8h_html"><div class="ttname"><a href="Casting_8h.html">Casting.h</a></div></div>
<div class="ttc" id="aFunction_8h_html"><div class="ttname"><a href="Function_8h.html">Function.h</a></div></div>
<div class="ttc" id="aPassManager_8h_html"><div class="ttname"><a href="PassManager_8h.html">PassManager.h</a></div><div class="ttdoc">This header defines various interfaces for pass management in LLVM.</div></div>
<div class="ttc" id="anamespacellvm_1_1TargetStackID_html_a71392100eb15ba746b1f898986f5d8a5af2af9eb94ff1bc08308bc738d744ee85"><div class="ttname"><a href="namespacellvm_1_1TargetStackID.html#a71392100eb15ba746b1f898986f5d8a5af2af9eb94ff1bc08308bc738d744ee85">llvm::TargetStackID::Default</a></div><div class="ttdeci">@ Default</div><div class="ttdef"><b>Definition:</b> <a href="TargetFrameLowering_8h_source.html#l00028">TargetFrameLowering.h:28</a></div></div>
<div class="ttc" id="aclassllvm_1_1RegionBase_html_a75479f44e7157d1a8592231addb67c9c"><div class="ttname"><a href="classllvm_1_1RegionBase.html#a75479f44e7157d1a8592231addb67c9c">llvm::RegionBase::contains</a></div><div class="ttdeci">bool contains(const BlockT *BB) const</div><div class="ttdoc">Check if the region contains a BasicBlock.</div><div class="ttdef"><b>Definition:</b> <a href="RegionInfoImpl_8h_source.html#l00104">RegionInfoImpl.h:104</a></div></div>
<div class="ttc" id="aclassllvm_1_1scc__iterator_html_a7d6ec03718a5e48f3ec7ce22fefcb91d"><div class="ttname"><a href="classllvm_1_1scc__iterator.html#a7d6ec03718a5e48f3ec7ce22fefcb91d">llvm::scc_iterator::isAtEnd</a></div><div class="ttdeci">bool isAtEnd() const</div><div class="ttdoc">Direct loop termination test which is more efficient than comparison with end().</div><div class="ttdef"><b>Definition:</b> <a href="SCCIterator_8h_source.html#l00108">SCCIterator.h:108</a></div></div>
<div class="ttc" id="aclassllvm_1_1DominatorTreeAnalysis_html"><div class="ttname"><a href="classllvm_1_1DominatorTreeAnalysis.html">llvm::DominatorTreeAnalysis</a></div><div class="ttdoc">Analysis pass which computes a DominatorTree.</div><div class="ttdef"><b>Definition:</b> <a href="Dominators_8h_source.html#l00252">Dominators.h:252</a></div></div>
<div class="ttc" id="aclassllvm_1_1Pass_html"><div class="ttname"><a href="classllvm_1_1Pass.html">llvm::Pass</a></div><div class="ttdoc">Pass interface - Implemented by all 'passes'.</div><div class="ttdef"><b>Definition:</b> <a href="Pass_8h_source.html#l00091">Pass.h:91</a></div></div>
<div class="ttc" id="aInstructions_8h_html"><div class="ttname"><a href="Instructions_8h.html">Instructions.h</a></div></div>
<div class="ttc" id="aLegacyDivergenceAnalysis_8h_html"><div class="ttname"><a href="LegacyDivergenceAnalysis_8h.html">LegacyDivergenceAnalysis.h</a></div></div>
<div class="ttc" id="aSmallVector_8h_html"><div class="ttname"><a href="SmallVector_8h.html">SmallVector.h</a></div></div>
<div class="ttc" id="aSIAnnotateControlFlow_8cpp_html_acf797fa91d5b7065dfb68a2492df28c1"><div class="ttname"><a href="SIAnnotateControlFlow_8cpp.html#acf797fa91d5b7065dfb68a2492df28c1">Flow</a></div><div class="ttdeci">Annotate SI Control Flow</div><div class="ttdef"><b>Definition:</b> <a href="SIAnnotateControlFlow_8cpp_source.html#l00118">SIAnnotateControlFlow.cpp:118</a></div></div>
<div class="ttc" id="aLoopDeletion_8cpp_html_a0f1c83c3d08d80b12c424962a5e94ce8aac5e6ff0bb9cd22f9f55570e7b318c84"><div class="ttname"><a href="LoopDeletion_8cpp.html#a0f1c83c3d08d80b12c424962a5e94ce8aac5e6ff0bb9cd22f9f55570e7b318c84">LoopDeletionResult::Unmodified</a></div><div class="ttdeci">@ Unmodified</div></div>
<div class="ttc" id="aUser_8h_html"><div class="ttname"><a href="User_8h.html">User.h</a></div></div>
<div class="ttc" id="aDominators_8h_html"><div class="ttname"><a href="Dominators_8h.html">Dominators.h</a></div></div>
<div class="ttc" id="aregcomp_8c_html_a0240ac851181b84ac374872dc5434ee4"><div class="ttname"><a href="regcomp_8c.html#a0240ac851181b84ac374872dc5434ee4">N</a></div><div class="ttdeci">#define N</div></div>
<div class="ttc" id="aclassllvm_1_1cl_1_1opt__storage_html_ac7ec9daaeeb00c69371e7f68bcd96938"><div class="ttname"><a href="classllvm_1_1cl_1_1opt__storage.html#ac7ec9daaeeb00c69371e7f68bcd96938">llvm::cl::opt_storage::getValue</a></div><div class="ttdeci">DataType &amp; getValue()</div><div class="ttdef"><b>Definition:</b> <a href="CommandLine_8h_source.html#l01353">CommandLine.h:1353</a></div></div>
<div class="ttc" id="aInstructionSimplify_8h_html"><div class="ttname"><a href="InstructionSimplify_8h.html">InstructionSimplify.h</a></div></div>
<div class="ttc" id="aclassllvm_1_1iterator__range_html"><div class="ttname"><a href="classllvm_1_1iterator__range.html">llvm::iterator_range</a></div><div class="ttdoc">A range adaptor for a pair of iterators.</div><div class="ttdef"><b>Definition:</b> <a href="iterator__range_8h_source.html#l00030">iterator_range.h:30</a></div></div>
<div class="ttc" id="aclassllvm_1_1PHINode_html"><div class="ttname"><a href="classllvm_1_1PHINode.html">llvm::PHINode</a></div><div class="ttdef"><b>Definition:</b> <a href="Instructions_8h_source.html#l02597">Instructions.h:2597</a></div></div>
<div class="ttc" id="anamespacellvm_1_1PatternMatch_html"><div class="ttname"><a href="namespacellvm_1_1PatternMatch.html">llvm::PatternMatch</a></div><div class="ttdef"><b>Definition:</b> <a href="PatternMatch_8h_source.html#l00047">PatternMatch.h:47</a></div></div>
<div class="ttc" id="aclassllvm_1_1Pass_html_a6590d0486104165ca40c7df0707f7b9e"><div class="ttname"><a href="classllvm_1_1Pass.html#a6590d0486104165ca40c7df0707f7b9e">llvm::Pass::getAnalysisUsage</a></div><div class="ttdeci">virtual void getAnalysisUsage(AnalysisUsage &amp;) const</div><div class="ttdoc">getAnalysisUsage - This function should be overriden by passes that need analysis information to do t...</div><div class="ttdef"><b>Definition:</b> <a href="Pass_8cpp_source.html#l00093">Pass.cpp:93</a></div></div>
<div class="ttc" id="aclassllvm_1_1AnalysisManager_html"><div class="ttname"><a href="classllvm_1_1AnalysisManager.html">llvm::AnalysisManager</a></div><div class="ttdoc">A container for analyses that lazily runs them and caches their results.</div><div class="ttdef"><b>Definition:</b> <a href="PassManager_8h_source.html#l00615">PassManager.h:615</a></div></div>
<div class="ttc" id="aclassllvm_1_1AnalysisUsage_html_a053677ebc731b47a534f841b11b5cf0c"><div class="ttname"><a href="classllvm_1_1AnalysisUsage.html#a053677ebc731b47a534f841b11b5cf0c">llvm::AnalysisUsage::addRequiredID</a></div><div class="ttdeci">AnalysisUsage &amp; addRequiredID(const void *ID)</div><div class="ttdef"><b>Definition:</b> <a href="Pass_8cpp_source.html#l00267">Pass.cpp:267</a></div></div>
<div class="ttc" id="alib_2CodeGen_2README_8txt_html_a09776db24cf586ec9f1e18f3bae14099"><div class="ttname"><a href="lib_2CodeGen_2README_8txt.html#a09776db24cf586ec9f1e18f3bae14099">BB</a></div><div class="ttdeci">Common register allocation spilling lr str ldr sxth r3 ldr mla r4 can lr mov lr str ldr sxth r3 mla r4 and then merge mul and lr str ldr sxth r3 mla r4 It also increase the likelihood the store may become dead bb27 Successors according to LLVM BB</div><div class="ttdef"><b>Definition:</b> <a href="lib_2CodeGen_2README_8txt_source.html#l00039">README.txt:39</a></div></div>
<div class="ttc" id="aREADME__P9_8txt_html_aea3337f3785f600391756877218a55ba"><div class="ttname"><a href="README__P9_8txt.html#aea3337f3785f600391756877218a55ba">RN</a></div><div class="ttdeci">It looks like we only need to define PPCfmarto for these because according to these instructions perform RTO on fma s src2 rnd  FPSCR RN</div><div class="ttdef"><b>Definition:</b> <a href="README__P9_8txt_source.html#l00262">README_P9.txt:262</a></div></div>
<div class="ttc" id="aclassllvm_1_1AnalysisUsage_html_ae5c60fd282ee894c87ea02c3f0fcb6d0"><div class="ttname"><a href="classllvm_1_1AnalysisUsage.html#ae5c60fd282ee894c87ea02c3f0fcb6d0">llvm::AnalysisUsage::addRequired</a></div><div class="ttdeci">AnalysisUsage &amp; addRequired()</div><div class="ttdef"><b>Definition:</b> <a href="PassAnalysisSupport_8h_source.html#l00075">PassAnalysisSupport.h:75</a></div></div>
<div class="ttc" id="astructllvm_1_1GraphTraits_html"><div class="ttname"><a href="structllvm_1_1GraphTraits.html">llvm::GraphTraits</a></div><div class="ttdef"><b>Definition:</b> <a href="GraphTraits_8h_source.html#l00035">GraphTraits.h:35</a></div></div>
<div class="ttc" id="aBlockVerifier_8cpp_html_ae45c7d73c0ff5d177b59153ffae77f84"><div class="ttname"><a href="BlockVerifier_8cpp.html#ae45c7d73c0ff5d177b59153ffae77f84">From</a></div><div class="ttdeci">BlockVerifier::State From</div><div class="ttdef"><b>Definition:</b> <a href="BlockVerifier_8cpp_source.html#l00055">BlockVerifier.cpp:55</a></div></div>
<div class="ttc" id="aclassllvm_1_1SSAUpdater_html_af0d1a82b4e629e834c2ed53e5cbe22ef"><div class="ttname"><a href="classllvm_1_1SSAUpdater.html#af0d1a82b4e629e834c2ed53e5cbe22ef">llvm::SSAUpdater::AddAvailableValue</a></div><div class="ttdeci">void AddAvailableValue(BasicBlock *BB, Value *V)</div><div class="ttdoc">Indicate that a rewritten value is available in the specified block with the specified value.</div><div class="ttdef"><b>Definition:</b> <a href="SSAUpdater_8cpp_source.html#l00070">SSAUpdater.cpp:70</a></div></div>
<div class="ttc" id="astructllvm_1_1cl_1_1desc_html"><div class="ttname"><a href="structllvm_1_1cl_1_1desc.html">llvm::cl::desc</a></div><div class="ttdef"><b>Definition:</b> <a href="CommandLine_8h_source.html#l00414">CommandLine.h:414</a></div></div>
<div class="ttc" id="aclassllvm_1_1Region_html"><div class="ttname"><a href="classllvm_1_1Region.html">llvm::Region</a></div><div class="ttdef"><b>Definition:</b> <a href="RegionInfo_8h_source.html#l00889">RegionInfo.h:889</a></div></div>
<div class="ttc" id="aclassllvm_1_1BranchInst_html"><div class="ttname"><a href="classllvm_1_1BranchInst.html">llvm::BranchInst</a></div><div class="ttdoc">Conditional or Unconditional Branch instruction.</div><div class="ttdef"><b>Definition:</b> <a href="Instructions_8h_source.html#l03032">Instructions.h:3032</a></div></div>
<div class="ttc" id="araw__ostream_8h_html"><div class="ttname"><a href="raw__ostream_8h.html">raw_ostream.h</a></div></div>
<div class="ttc" id="aclassllvm_1_1SSAUpdater_html"><div class="ttname"><a href="classllvm_1_1SSAUpdater.html">llvm::SSAUpdater</a></div><div class="ttdoc">Helper class for SSA formation on a set of values defined in multiple blocks.</div><div class="ttdef"><b>Definition:</b> <a href="SSAUpdater_8h_source.html#l00038">SSAUpdater.h:38</a></div></div>
<div class="ttc" id="aValue_8h_html"><div class="ttname"><a href="Value_8h.html">Value.h</a></div></div>
<div class="ttc" id="aclassllvm_1_1RegionBase_html_a1e4d2a9707cc6d2a71a1ffea59516ad5"><div class="ttname"><a href="classllvm_1_1RegionBase.html#a1e4d2a9707cc6d2a71a1ffea59516ad5">llvm::RegionBase::getExit</a></div><div class="ttdeci">BlockT * getExit() const</div><div class="ttdoc">Get the exit BasicBlock of the Region.</div><div class="ttdef"><b>Definition:</b> <a href="RegionInfo_8h_source.html#l00359">RegionInfo.h:359</a></div></div>
<div class="ttc" id="aInitializePasses_8h_html"><div class="ttname"><a href="InitializePasses_8h.html">InitializePasses.h</a></div></div>
<div class="ttc" id="aclassllvm_1_1Value_html"><div class="ttname"><a href="classllvm_1_1Value.html">llvm::Value</a></div><div class="ttdoc">LLVM Value Representation.</div><div class="ttdef"><b>Definition:</b> <a href="Value_8h_source.html#l00075">Value.h:75</a></div></div>
<div class="ttc" id="aDebug_8h_html"><div class="ttname"><a href="Debug_8h.html">Debug.h</a></div></div>
<div class="ttc" id="aclassllvm_1_1RegionBase_html_a03bb82a7322410a03468d0963ab845e4"><div class="ttname"><a href="classllvm_1_1RegionBase.html#a03bb82a7322410a03468d0963ab845e4">llvm::RegionBase::replaceExit</a></div><div class="ttdeci">void replaceExit(BlockT *BB)</div><div class="ttdoc">Replace the exit basic block of the region with the new basic block.</div><div class="ttdef"><b>Definition:</b> <a href="RegionInfoImpl_8h_source.html#l00062">RegionInfoImpl.h:62</a></div></div>
<div class="ttc" id="aELFYAML_8cpp_html_a2a91b094e777dacc21de2a7f35da6805"><div class="ttname"><a href="ELFYAML_8cpp.html#a2a91b094e777dacc21de2a7f35da6805">Other</a></div><div class="ttdeci">Optional&lt; std::vector&lt; StOtherPiece &gt; &gt; Other</div><div class="ttdef"><b>Definition:</b> <a href="ELFYAML_8cpp_source.html#l01172">ELFYAML.cpp:1172</a></div></div>
<div class="ttc" id="aclassllvm_1_1Use_html"><div class="ttname"><a href="classllvm_1_1Use.html">llvm::Use</a></div><div class="ttdoc">A Use represents the edge between a Value definition and its users.</div><div class="ttdef"><b>Definition:</b> <a href="Use_8h_source.html#l00044">Use.h:44</a></div></div>
<div class="ttc" id="aclassllvm_1_1SmallVectorImpl_html_a396fcfee6914c76974b73c3d203da6a5"><div class="ttname"><a href="classllvm_1_1SmallVectorImpl.html#a396fcfee6914c76974b73c3d203da6a5">llvm::SmallVectorImpl::emplace_back</a></div><div class="ttdeci">reference emplace_back(ArgTypes &amp;&amp;... Args)</div><div class="ttdef"><b>Definition:</b> <a href="SmallVector_8h_source.html#l00908">SmallVector.h:908</a></div></div>
<div class="ttc" id="anamespacellvm_1_1Intrinsic_html_a80add6b3b1cdaec560907995127adc16"><div class="ttname"><a href="namespacellvm_1_1Intrinsic.html#a80add6b3b1cdaec560907995127adc16">llvm::Intrinsic::ID</a></div><div class="ttdeci">unsigned ID</div><div class="ttdef"><b>Definition:</b> <a href="TargetTransformInfo_8h_source.html#l00038">TargetTransformInfo.h:38</a></div></div>
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated on Tue Feb 8 2022 05:01:19 for LLVM by&#160;<a href="http://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.8.20
</small></address>
</body>
</html>
