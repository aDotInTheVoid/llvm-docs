<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.20"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>LLVM: lib/Transforms/IPO/FunctionSpecialization.cpp Source File</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<script type="text/x-mathjax-config">
  MathJax.Hub.Config({
    extensions: ["tex2jax.js"],
    jax: ["input/TeX","output/HTML-CSS"],
});
</script>
<script type="text/javascript" async="async" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.7/MathJax.js/MathJax.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">LLVM
   &#160;<span id="projectnumber">13.0.1</span>
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.20 -->
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',false,false,'search.php','Search');
});
/* @license-end */</script>
<div id="main-nav"></div>
<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="dir_97aefd0d527b934f1d99a682da8fe6a9.html">lib</a></li><li class="navelem"><a class="el" href="dir_a72932e0778af28115095468f6286ff8.html">Transforms</a></li><li class="navelem"><a class="el" href="dir_13abb262e9c52ddea8d07639819afd6c.html">IPO</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="headertitle">
<div class="title">FunctionSpecialization.cpp</div>  </div>
</div><!--header-->
<div class="contents">
<a href="FunctionSpecialization_8cpp.html">Go to the documentation of this file.</a><div class="fragment"><div class="line"><a name="l00001"></a><span class="lineno">    1</span>&#160;<span class="comment">//===- FunctionSpecialization.cpp - Function Specialization ---------------===//</span></div>
<div class="line"><a name="l00002"></a><span class="lineno">    2</span>&#160;<span class="comment">//</span></div>
<div class="line"><a name="l00003"></a><span class="lineno">    3</span>&#160;<span class="comment">// Part of the LLVM Project, under the Apache License v2.0 with LLVM Exceptions.</span></div>
<div class="line"><a name="l00004"></a><span class="lineno">    4</span>&#160;<span class="comment">// See https://llvm.org/LICENSE.txt for license information.</span></div>
<div class="line"><a name="l00005"></a><span class="lineno">    5</span>&#160;<span class="comment">// SPDX-License-Identifier: Apache-2.0 WITH LLVM-exception</span></div>
<div class="line"><a name="l00006"></a><span class="lineno">    6</span>&#160;<span class="comment">//</span></div>
<div class="line"><a name="l00007"></a><span class="lineno">    7</span>&#160;<span class="comment">//===----------------------------------------------------------------------===//</span></div>
<div class="line"><a name="l00008"></a><span class="lineno">    8</span>&#160;<span class="comment">//</span></div>
<div class="line"><a name="l00009"></a><span class="lineno">    9</span>&#160;<span class="comment">// This specialises functions with constant parameters (e.g. functions,</span></div>
<div class="line"><a name="l00010"></a><span class="lineno">   10</span>&#160;<span class="comment">// globals). Constant parameters like function pointers and constant globals</span></div>
<div class="line"><a name="l00011"></a><span class="lineno">   11</span>&#160;<span class="comment">// are propagated to the callee by specializing the function.</span></div>
<div class="line"><a name="l00012"></a><span class="lineno">   12</span>&#160;<span class="comment">//</span></div>
<div class="line"><a name="l00013"></a><span class="lineno">   13</span>&#160;<span class="comment">// Current limitations:</span></div>
<div class="line"><a name="l00014"></a><span class="lineno">   14</span>&#160;<span class="comment">// - It does not handle specialization of recursive functions,</span></div>
<div class="line"><a name="l00015"></a><span class="lineno">   15</span>&#160;<span class="comment">// - It does not yet handle integer ranges.</span></div>
<div class="line"><a name="l00016"></a><span class="lineno">   16</span>&#160;<span class="comment">// - Only 1 argument per function is specialised,</span></div>
<div class="line"><a name="l00017"></a><span class="lineno">   17</span>&#160;<span class="comment">// - The cost-model could be further looked into,</span></div>
<div class="line"><a name="l00018"></a><span class="lineno">   18</span>&#160;<span class="comment">// - We are not yet caching analysis results.</span></div>
<div class="line"><a name="l00019"></a><span class="lineno">   19</span>&#160;<span class="comment">//</span></div>
<div class="line"><a name="l00020"></a><span class="lineno">   20</span>&#160;<span class="comment">// Ideas:</span></div>
<div class="line"><a name="l00021"></a><span class="lineno">   21</span>&#160;<span class="comment">// - With a function specialization attribute for arguments, we could have</span></div>
<div class="line"><a name="l00022"></a><span class="lineno">   22</span>&#160;<span class="comment">//   a direct way to steer function specialization, avoiding the cost-model,</span></div>
<div class="line"><a name="l00023"></a><span class="lineno">   23</span>&#160;<span class="comment">//   and thus control compile-times / code-size.</span></div>
<div class="line"><a name="l00024"></a><span class="lineno">   24</span>&#160;<span class="comment">//</span></div>
<div class="line"><a name="l00025"></a><span class="lineno">   25</span>&#160;<span class="comment">//===----------------------------------------------------------------------===//</span></div>
<div class="line"><a name="l00026"></a><span class="lineno">   26</span>&#160; </div>
<div class="line"><a name="l00027"></a><span class="lineno">   27</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="Statistic_8h.html">llvm/ADT/Statistic.h</a>&quot;</span></div>
<div class="line"><a name="l00028"></a><span class="lineno">   28</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="AssumptionCache_8h.html">llvm/Analysis/AssumptionCache.h</a>&quot;</span></div>
<div class="line"><a name="l00029"></a><span class="lineno">   29</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="CodeMetrics_8h.html">llvm/Analysis/CodeMetrics.h</a>&quot;</span></div>
<div class="line"><a name="l00030"></a><span class="lineno">   30</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="DomTreeUpdater_8h.html">llvm/Analysis/DomTreeUpdater.h</a>&quot;</span></div>
<div class="line"><a name="l00031"></a><span class="lineno">   31</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="InlineCost_8h.html">llvm/Analysis/InlineCost.h</a>&quot;</span></div>
<div class="line"><a name="l00032"></a><span class="lineno">   32</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="LoopInfo_8h.html">llvm/Analysis/LoopInfo.h</a>&quot;</span></div>
<div class="line"><a name="l00033"></a><span class="lineno">   33</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="TargetLibraryInfo_8h.html">llvm/Analysis/TargetLibraryInfo.h</a>&quot;</span></div>
<div class="line"><a name="l00034"></a><span class="lineno">   34</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="TargetTransformInfo_8h.html">llvm/Analysis/TargetTransformInfo.h</a>&quot;</span></div>
<div class="line"><a name="l00035"></a><span class="lineno">   35</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="Scalar_2SCCP_8h.html">llvm/Transforms/Scalar/SCCP.h</a>&quot;</span></div>
<div class="line"><a name="l00036"></a><span class="lineno">   36</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="Cloning_8h.html">llvm/Transforms/Utils/Cloning.h</a>&quot;</span></div>
<div class="line"><a name="l00037"></a><span class="lineno">   37</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="SizeOpts_8h.html">llvm/Transforms/Utils/SizeOpts.h</a>&quot;</span></div>
<div class="line"><a name="l00038"></a><span class="lineno">   38</span>&#160;<span class="preprocessor">#include &lt;cmath&gt;</span></div>
<div class="line"><a name="l00039"></a><span class="lineno">   39</span>&#160; </div>
<div class="line"><a name="l00040"></a><span class="lineno">   40</span>&#160;<span class="keyword">using namespace </span><a class="code" href="namespacellvm.html">llvm</a>;</div>
<div class="line"><a name="l00041"></a><span class="lineno">   41</span>&#160; </div>
<div class="line"><a name="l00042"></a><span class="lineno"><a class="line" href="FunctionSpecialization_8cpp.html#ad78e062f62e0d6e453941fb4ca843e4d">   42</a></span>&#160;<span class="preprocessor">#define DEBUG_TYPE &quot;function-specialization&quot;</span></div>
<div class="line"><a name="l00043"></a><span class="lineno">   43</span>&#160; </div>
<div class="line"><a name="l00044"></a><span class="lineno"><a class="line" href="FunctionSpecialization_8cpp.html#ab50990de8f98675ddfc3ab54717bf24f">   44</a></span>&#160;<a class="code" href="namespacellvm.html#a0bf75467957937ad23ad7be19f489934">STATISTIC</a>(NumFuncSpecialized, <span class="stringliteral">&quot;Number of functions specialized&quot;</span>);</div>
<div class="line"><a name="l00045"></a><span class="lineno">   45</span>&#160; </div>
<div class="line"><a name="l00046"></a><span class="lineno"><a class="line" href="FunctionSpecialization_8cpp.html#a1ab61b5210a970e66d3240dfda58ca3a">   46</a></span>&#160;<span class="keyword">static</span> <a class="code" href="classllvm_1_1cl_1_1opt.html">cl::opt&lt;bool&gt;</a> <a class="code" href="FunctionSpecialization_8cpp.html#a1ab61b5210a970e66d3240dfda58ca3a">ForceFunctionSpecialization</a>(</div>
<div class="line"><a name="l00047"></a><span class="lineno">   47</span>&#160;    <span class="stringliteral">&quot;force-function-specialization&quot;</span>, <a class="code" href="namespacellvm_1_1cl.html#a10a041239ae1870cfcc064bfaa79fb65">cl::init</a>(<span class="keyword">false</span>), <a class="code" href="namespacellvm_1_1cl.html#a68075925a54790e71ca790e1d4f21a40a263ac008d8d31f13ce460395fc4cf7e6">cl::Hidden</a>,</div>
<div class="line"><a name="l00048"></a><span class="lineno">   48</span>&#160;    <a class="code" href="structllvm_1_1cl_1_1desc.html">cl::desc</a>(<span class="stringliteral">&quot;Force function specialization for every call site with a &quot;</span></div>
<div class="line"><a name="l00049"></a><span class="lineno">   49</span>&#160;             <span class="stringliteral">&quot;constant argument&quot;</span>));</div>
<div class="line"><a name="l00050"></a><span class="lineno">   50</span>&#160; </div>
<div class="line"><a name="l00051"></a><span class="lineno"><a class="line" href="FunctionSpecialization_8cpp.html#aeaef9f460c3e938ea7cb648291db4f1e">   51</a></span>&#160;<span class="keyword">static</span> <a class="code" href="classllvm_1_1cl_1_1opt.html">cl::opt&lt;unsigned&gt;</a> <a class="code" href="FunctionSpecialization_8cpp.html#aeaef9f460c3e938ea7cb648291db4f1e">FuncSpecializationMaxIters</a>(</div>
<div class="line"><a name="l00052"></a><span class="lineno">   52</span>&#160;    <span class="stringliteral">&quot;func-specialization-max-iters&quot;</span>, <a class="code" href="namespacellvm_1_1cl.html#a68075925a54790e71ca790e1d4f21a40a263ac008d8d31f13ce460395fc4cf7e6">cl::Hidden</a>,</div>
<div class="line"><a name="l00053"></a><span class="lineno">   53</span>&#160;    <a class="code" href="structllvm_1_1cl_1_1desc.html">cl::desc</a>(<span class="stringliteral">&quot;The maximum number of iterations function specialization is run&quot;</span>),</div>
<div class="line"><a name="l00054"></a><span class="lineno">   54</span>&#160;    <a class="code" href="namespacellvm_1_1cl.html#a10a041239ae1870cfcc064bfaa79fb65">cl::init</a>(1));</div>
<div class="line"><a name="l00055"></a><span class="lineno">   55</span>&#160; </div>
<div class="line"><a name="l00056"></a><span class="lineno"><a class="line" href="FunctionSpecialization_8cpp.html#a67c4f460f43d34e59782530466a2abd3">   56</a></span>&#160;<span class="keyword">static</span> <a class="code" href="classllvm_1_1cl_1_1opt.html">cl::opt&lt;unsigned&gt;</a> <a class="code" href="FunctionSpecialization_8cpp.html#a67c4f460f43d34e59782530466a2abd3">MaxConstantsThreshold</a>(</div>
<div class="line"><a name="l00057"></a><span class="lineno">   57</span>&#160;    <span class="stringliteral">&quot;func-specialization-max-constants&quot;</span>, <a class="code" href="namespacellvm_1_1cl.html#a68075925a54790e71ca790e1d4f21a40a263ac008d8d31f13ce460395fc4cf7e6">cl::Hidden</a>,</div>
<div class="line"><a name="l00058"></a><span class="lineno">   58</span>&#160;    <a class="code" href="structllvm_1_1cl_1_1desc.html">cl::desc</a>(<span class="stringliteral">&quot;The maximum number of clones allowed for a single function &quot;</span></div>
<div class="line"><a name="l00059"></a><span class="lineno">   59</span>&#160;             <span class="stringliteral">&quot;specialization&quot;</span>),</div>
<div class="line"><a name="l00060"></a><span class="lineno">   60</span>&#160;    <a class="code" href="namespacellvm_1_1cl.html#a10a041239ae1870cfcc064bfaa79fb65">cl::init</a>(3));</div>
<div class="line"><a name="l00061"></a><span class="lineno">   61</span>&#160; </div>
<div class="line"><a name="l00062"></a><span class="lineno">   62</span>&#160;<span class="keyword">static</span> <a class="code" href="classllvm_1_1cl_1_1opt.html">cl::opt&lt;unsigned&gt;</a></div>
<div class="line"><a name="l00063"></a><span class="lineno"><a class="line" href="FunctionSpecialization_8cpp.html#a5c81c9004e171e6d4f131a7e38fac142">   63</a></span>&#160;    <a class="code" href="FunctionSpecialization_8cpp.html#a5c81c9004e171e6d4f131a7e38fac142">AvgLoopIterationCount</a>(<span class="stringliteral">&quot;func-specialization-avg-iters-cost&quot;</span>, <a class="code" href="namespacellvm_1_1cl.html#a68075925a54790e71ca790e1d4f21a40a263ac008d8d31f13ce460395fc4cf7e6">cl::Hidden</a>,</div>
<div class="line"><a name="l00064"></a><span class="lineno">   64</span>&#160;                          <a class="code" href="structllvm_1_1cl_1_1desc.html">cl::desc</a>(<span class="stringliteral">&quot;Average loop iteration count cost&quot;</span>),</div>
<div class="line"><a name="l00065"></a><span class="lineno">   65</span>&#160;                          <a class="code" href="namespacellvm_1_1cl.html#a10a041239ae1870cfcc064bfaa79fb65">cl::init</a>(10));</div>
<div class="line"><a name="l00066"></a><span class="lineno">   66</span>&#160; </div>
<div class="line"><a name="l00067"></a><span class="lineno"><a class="line" href="FunctionSpecialization_8cpp.html#aa12ef560d221650c45e0510df3dd35a2">   67</a></span>&#160;<span class="keyword">static</span> <a class="code" href="classllvm_1_1cl_1_1opt.html">cl::opt&lt;bool&gt;</a> <a class="code" href="FunctionSpecialization_8cpp.html#aa12ef560d221650c45e0510df3dd35a2">EnableSpecializationForLiteralConstant</a>(</div>
<div class="line"><a name="l00068"></a><span class="lineno">   68</span>&#160;    <span class="stringliteral">&quot;function-specialization-for-literal-constant&quot;</span>, <a class="code" href="namespacellvm_1_1cl.html#a10a041239ae1870cfcc064bfaa79fb65">cl::init</a>(<span class="keyword">false</span>), <a class="code" href="namespacellvm_1_1cl.html#a68075925a54790e71ca790e1d4f21a40a263ac008d8d31f13ce460395fc4cf7e6">cl::Hidden</a>,</div>
<div class="line"><a name="l00069"></a><span class="lineno">   69</span>&#160;    <a class="code" href="structllvm_1_1cl_1_1desc.html">cl::desc</a>(<span class="stringliteral">&quot;Make function specialization available for literal constant.&quot;</span>));</div>
<div class="line"><a name="l00070"></a><span class="lineno">   70</span>&#160; </div>
<div class="line"><a name="l00071"></a><span class="lineno">   71</span>&#160;<span class="comment">// Helper to check if \p LV is either overdefined or a constant int.</span></div>
<div class="line"><a name="l00072"></a><span class="lineno"><a class="line" href="FunctionSpecialization_8cpp.html#a1c82b8d474d95ecb35975ac9694938cc">   72</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">bool</span> <a class="code" href="FunctionSpecialization_8cpp.html#a1c82b8d474d95ecb35975ac9694938cc">isOverdefined</a>(<span class="keyword">const</span> <a class="code" href="classllvm_1_1ValueLatticeElement.html">ValueLatticeElement</a> &amp;LV) {</div>
<div class="line"><a name="l00073"></a><span class="lineno">   73</span>&#160;  <span class="keywordflow">return</span> !LV.<a class="code" href="classllvm_1_1ValueLatticeElement.html#ab20e06908032fd7028c20c1d2d5a248a">isUnknownOrUndef</a>() &amp;&amp; !LV.<a class="code" href="classllvm_1_1ValueLatticeElement.html#a62d37ceb318e78806df7e0a928b0eb1c">isConstant</a>();</div>
<div class="line"><a name="l00074"></a><span class="lineno">   74</span>&#160;}</div>
<div class="line"><a name="l00075"></a><span class="lineno">   75</span>&#160; </div>
<div class="line"><a name="l00076"></a><span class="lineno"><a class="line" href="classFunctionSpecializer.html">   76</a></span>&#160;<span class="keyword">class </span><a class="code" href="classFunctionSpecializer.html">FunctionSpecializer</a> {</div>
<div class="line"><a name="l00077"></a><span class="lineno">   77</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l00078"></a><span class="lineno">   78</span>&#160;<span class="comment">  /// The IPSCCP Solver.</span></div>
<div class="line"><a name="l00079"></a><span class="lineno">   79</span>&#160;<span class="comment"></span>  <a class="code" href="classllvm_1_1SCCPSolver.html">SCCPSolver</a> &amp;Solver;</div>
<div class="line"><a name="l00080"></a><span class="lineno">   80</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l00081"></a><span class="lineno">   81</span>&#160;<span class="comment">  /// Analyses used to help determine if a function should be specialized.</span></div>
<div class="line"><a name="l00082"></a><span class="lineno">   82</span>&#160;<span class="comment"></span>  <a class="code" href="MemDepPrinter_8cpp.html#a470d8721ad7c3b718e9daeabdaeb4700">std::function</a>&lt;<a class="code" href="classllvm_1_1AssumptionCache.html">AssumptionCache</a> &amp;(<a class="code" href="classllvm_1_1Function.html">Function</a> &amp;)&gt; GetAC;</div>
<div class="line"><a name="l00083"></a><span class="lineno">   83</span>&#160;  <a class="code" href="MemDepPrinter_8cpp.html#a470d8721ad7c3b718e9daeabdaeb4700">std::function</a>&lt;<a class="code" href="classllvm_1_1TargetTransformInfo.html">TargetTransformInfo</a> &amp;(<a class="code" href="classllvm_1_1Function.html">Function</a> &amp;)&gt; GetTTI;</div>
<div class="line"><a name="l00084"></a><span class="lineno">   84</span>&#160;  <a class="code" href="MemDepPrinter_8cpp.html#a470d8721ad7c3b718e9daeabdaeb4700">std::function</a>&lt;<a class="code" href="classllvm_1_1TargetLibraryInfo.html">TargetLibraryInfo</a> &amp;(<a class="code" href="classllvm_1_1Function.html">Function</a> &amp;)&gt; GetTLI;</div>
<div class="line"><a name="l00085"></a><span class="lineno">   85</span>&#160; </div>
<div class="line"><a name="l00086"></a><span class="lineno">   86</span>&#160;  <a class="code" href="classllvm_1_1SmallPtrSet.html">SmallPtrSet&lt;Function *, 2&gt;</a> SpecializedFuncs;</div>
<div class="line"><a name="l00087"></a><span class="lineno">   87</span>&#160; </div>
<div class="line"><a name="l00088"></a><span class="lineno">   88</span>&#160;<span class="keyword">public</span>:</div>
<div class="line"><a name="l00089"></a><span class="lineno"><a class="line" href="classFunctionSpecializer.html#a243f5489f063dd829b619655a466c1cd">   89</a></span>&#160;  <a class="code" href="classFunctionSpecializer.html#a243f5489f063dd829b619655a466c1cd">FunctionSpecializer</a>(<a class="code" href="classllvm_1_1SCCPSolver.html">SCCPSolver</a> &amp;Solver,</div>
<div class="line"><a name="l00090"></a><span class="lineno">   90</span>&#160;                      <a class="code" href="MemDepPrinter_8cpp.html#a470d8721ad7c3b718e9daeabdaeb4700">std::function</a>&lt;<a class="code" href="classllvm_1_1AssumptionCache.html">AssumptionCache</a> &amp;(<a class="code" href="classllvm_1_1Function.html">Function</a> &amp;)&gt; GetAC,</div>
<div class="line"><a name="l00091"></a><span class="lineno">   91</span>&#160;                      <a class="code" href="MemDepPrinter_8cpp.html#a470d8721ad7c3b718e9daeabdaeb4700">std::function</a>&lt;<a class="code" href="classllvm_1_1TargetTransformInfo.html">TargetTransformInfo</a> &amp;(<a class="code" href="classllvm_1_1Function.html">Function</a> &amp;)&gt; GetTTI,</div>
<div class="line"><a name="l00092"></a><span class="lineno">   92</span>&#160;                      <a class="code" href="MemDepPrinter_8cpp.html#a470d8721ad7c3b718e9daeabdaeb4700">std::function</a>&lt;<a class="code" href="classllvm_1_1TargetLibraryInfo.html">TargetLibraryInfo</a> &amp;(<a class="code" href="classllvm_1_1Function.html">Function</a> &amp;)&gt; GetTLI)</div>
<div class="line"><a name="l00093"></a><span class="lineno">   93</span>&#160;      : Solver(Solver), GetAC(GetAC), GetTTI(GetTTI), GetTLI(GetTLI) {}</div>
<div class="line"><a name="l00094"></a><span class="lineno">   94</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l00095"></a><span class="lineno">   95</span>&#160;<span class="comment">  /// Attempt to specialize functions in the module to enable constant</span></div>
<div class="line"><a name="l00096"></a><span class="lineno">   96</span>&#160;<span class="comment">  /// propagation across function boundaries.</span></div>
<div class="line"><a name="l00097"></a><span class="lineno">   97</span>&#160;<span class="comment">  ///</span></div>
<div class="line"><a name="l00098"></a><span class="lineno">   98</span>&#160;<span class="comment">  /// \returns true if at least one function is specialized.</span></div>
<div class="line"><a name="l00099"></a><span class="lineno">   99</span>&#160;<span class="comment"></span>  <span class="keywordtype">bool</span></div>
<div class="line"><a name="l00100"></a><span class="lineno"><a class="line" href="classFunctionSpecializer.html#aea00ac43169a26c8d279d81b1a7e8b70">  100</a></span>&#160;  <a class="code" href="classFunctionSpecializer.html#aea00ac43169a26c8d279d81b1a7e8b70">specializeFunctions</a>(<a class="code" href="classllvm_1_1SmallVectorImpl.html">SmallVectorImpl&lt;Function *&gt;</a> &amp;FuncDecls,</div>
<div class="line"><a name="l00101"></a><span class="lineno">  101</span>&#160;                      <a class="code" href="classllvm_1_1SmallVectorImpl.html">SmallVectorImpl&lt;Function *&gt;</a> &amp;CurrentSpecializations) {</div>
<div class="line"><a name="l00102"></a><span class="lineno">  102</span>&#160; </div>
<div class="line"><a name="l00103"></a><span class="lineno">  103</span>&#160;    <span class="comment">// Attempt to specialize the argument-tracked functions.</span></div>
<div class="line"><a name="l00104"></a><span class="lineno">  104</span>&#160;    <span class="keywordtype">bool</span> Changed = <span class="keyword">false</span>;</div>
<div class="line"><a name="l00105"></a><span class="lineno">  105</span>&#160;    <span class="keywordflow">for</span> (<span class="keyword">auto</span> *<a class="code" href="MD5_8cpp.html#a96d73bbd7af15cb1fc38c3f4a3bd82e9">F</a> : FuncDecls) {</div>
<div class="line"><a name="l00106"></a><span class="lineno">  106</span>&#160;      <span class="keywordflow">if</span> (specializeFunction(<a class="code" href="MD5_8cpp.html#a96d73bbd7af15cb1fc38c3f4a3bd82e9">F</a>, CurrentSpecializations)) {</div>
<div class="line"><a name="l00107"></a><span class="lineno">  107</span>&#160;        Changed = <span class="keyword">true</span>;</div>
<div class="line"><a name="l00108"></a><span class="lineno">  108</span>&#160;        <a class="code" href="Debug_8h.html#a08efc68d15935eb8889400a46c3749ba">LLVM_DEBUG</a>(<a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <span class="stringliteral">&quot;FnSpecialization: Can specialize this func.\n&quot;</span>);</div>
<div class="line"><a name="l00109"></a><span class="lineno">  109</span>&#160;      } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00110"></a><span class="lineno">  110</span>&#160;        <a class="code" href="Debug_8h.html#a08efc68d15935eb8889400a46c3749ba">LLVM_DEBUG</a>(</div>
<div class="line"><a name="l00111"></a><span class="lineno">  111</span>&#160;            <a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <span class="stringliteral">&quot;FnSpecialization: Cannot specialize this func.\n&quot;</span>);</div>
<div class="line"><a name="l00112"></a><span class="lineno">  112</span>&#160;      }</div>
<div class="line"><a name="l00113"></a><span class="lineno">  113</span>&#160;    }</div>
<div class="line"><a name="l00114"></a><span class="lineno">  114</span>&#160; </div>
<div class="line"><a name="l00115"></a><span class="lineno">  115</span>&#160;    <span class="keywordflow">for</span> (<span class="keyword">auto</span> *SpecializedFunc : CurrentSpecializations) {</div>
<div class="line"><a name="l00116"></a><span class="lineno">  116</span>&#160;      SpecializedFuncs.insert(SpecializedFunc);</div>
<div class="line"><a name="l00117"></a><span class="lineno">  117</span>&#160; </div>
<div class="line"><a name="l00118"></a><span class="lineno">  118</span>&#160;      <span class="comment">// TODO: If we want to support specializing specialized functions,</span></div>
<div class="line"><a name="l00119"></a><span class="lineno">  119</span>&#160;      <span class="comment">// initialize here the state of the newly created functions, marking</span></div>
<div class="line"><a name="l00120"></a><span class="lineno">  120</span>&#160;      <span class="comment">// them argument-tracked and executable.</span></div>
<div class="line"><a name="l00121"></a><span class="lineno">  121</span>&#160; </div>
<div class="line"><a name="l00122"></a><span class="lineno">  122</span>&#160;      <span class="comment">// Replace the function arguments for the specialized functions.</span></div>
<div class="line"><a name="l00123"></a><span class="lineno">  123</span>&#160;      <span class="keywordflow">for</span> (<a class="code" href="classllvm_1_1Argument.html">Argument</a> &amp;<a class="code" href="AMDGPULibCalls_8cpp.html#afecf1cc1292b07f57d343c0f4d682044">Arg</a> : SpecializedFunc-&gt;args())</div>
<div class="line"><a name="l00124"></a><span class="lineno">  124</span>&#160;        <span class="keywordflow">if</span> (!<a class="code" href="AMDGPULibCalls_8cpp.html#afecf1cc1292b07f57d343c0f4d682044">Arg</a>.use_empty() &amp;&amp; <a class="code" href="Scalar_2SCCP_8cpp.html#a931fab9761cd3c39e4a894226a4eab6b">tryToReplaceWithConstant</a>(&amp;<a class="code" href="AMDGPULibCalls_8cpp.html#afecf1cc1292b07f57d343c0f4d682044">Arg</a>))</div>
<div class="line"><a name="l00125"></a><span class="lineno">  125</span>&#160;          <a class="code" href="Debug_8h.html#a08efc68d15935eb8889400a46c3749ba">LLVM_DEBUG</a>(<a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <span class="stringliteral">&quot;FnSpecialization: Replaced constant argument: &quot;</span></div>
<div class="line"><a name="l00126"></a><span class="lineno">  126</span>&#160;                            &lt;&lt; <a class="code" href="AMDGPULibCalls_8cpp.html#afecf1cc1292b07f57d343c0f4d682044">Arg</a>.getName() &lt;&lt; <span class="stringliteral">&quot;\n&quot;</span>);</div>
<div class="line"><a name="l00127"></a><span class="lineno">  127</span>&#160;    }</div>
<div class="line"><a name="l00128"></a><span class="lineno">  128</span>&#160; </div>
<div class="line"><a name="l00129"></a><span class="lineno">  129</span>&#160;    NumFuncSpecialized += NbFunctionsSpecialized;</div>
<div class="line"><a name="l00130"></a><span class="lineno">  130</span>&#160;    <span class="keywordflow">return</span> Changed;</div>
<div class="line"><a name="l00131"></a><span class="lineno">  131</span>&#160;  }</div>
<div class="line"><a name="l00132"></a><span class="lineno">  132</span>&#160; </div>
<div class="line"><a name="l00133"></a><span class="lineno"><a class="line" href="classFunctionSpecializer.html#adda562f7cb7cce90a6dd71d16c5c2fa6">  133</a></span>&#160;  <span class="keywordtype">bool</span> <a class="code" href="classFunctionSpecializer.html#adda562f7cb7cce90a6dd71d16c5c2fa6">tryToReplaceWithConstant</a>(<a class="code" href="classllvm_1_1Value.html">Value</a> *V) {</div>
<div class="line"><a name="l00134"></a><span class="lineno">  134</span>&#160;    <span class="keywordflow">if</span> (!V-&gt;<a class="code" href="classllvm_1_1Value.html#a6393a2d4fe7e10b28a0dcc35f881567b">getType</a>()-&gt;<a class="code" href="classllvm_1_1Type.html#a5f6edc5246188225b3f49bd5c974c759">isSingleValueType</a>() || isa&lt;CallBase&gt;(V) ||</div>
<div class="line"><a name="l00135"></a><span class="lineno">  135</span>&#160;        V-&gt;<a class="code" href="classllvm_1_1Value.html#af21f61086e696a788f549768fdc26a93">user_empty</a>())</div>
<div class="line"><a name="l00136"></a><span class="lineno">  136</span>&#160;      <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l00137"></a><span class="lineno">  137</span>&#160; </div>
<div class="line"><a name="l00138"></a><span class="lineno">  138</span>&#160;    <span class="keyword">const</span> <a class="code" href="classllvm_1_1ValueLatticeElement.html">ValueLatticeElement</a> &amp;IV = Solver.<a class="code" href="classllvm_1_1SCCPSolver.html#ab146e74d42b852877cc1e935d808005a">getLatticeValueFor</a>(V);</div>
<div class="line"><a name="l00139"></a><span class="lineno">  139</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="FunctionSpecialization_8cpp.html#a1c82b8d474d95ecb35975ac9694938cc">isOverdefined</a>(IV))</div>
<div class="line"><a name="l00140"></a><span class="lineno">  140</span>&#160;      <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l00141"></a><span class="lineno">  141</span>&#160;    <span class="keyword">auto</span> *Const = IV.<a class="code" href="classllvm_1_1ValueLatticeElement.html#a62d37ceb318e78806df7e0a928b0eb1c">isConstant</a>() ? Solver.<a class="code" href="classllvm_1_1SCCPSolver.html#a615b751032d180df408ee2ef915bf6a6">getConstant</a>(IV)</div>
<div class="line"><a name="l00142"></a><span class="lineno">  142</span>&#160;                                  : <a class="code" href="classllvm_1_1UndefValue.html#a4ae5ff22b700a42bcc5d889233721335">UndefValue::get</a>(V-&gt;<a class="code" href="classllvm_1_1Value.html#a6393a2d4fe7e10b28a0dcc35f881567b">getType</a>());</div>
<div class="line"><a name="l00143"></a><span class="lineno">  143</span>&#160;    V-&gt;<a class="code" href="classllvm_1_1Value.html#a3ab5fc45117b450e8bb04e564cb6e5f2">replaceAllUsesWith</a>(Const);</div>
<div class="line"><a name="l00144"></a><span class="lineno">  144</span>&#160; </div>
<div class="line"><a name="l00145"></a><span class="lineno">  145</span>&#160;    <span class="comment">// TODO: Update the solver here if we want to specialize specialized</span></div>
<div class="line"><a name="l00146"></a><span class="lineno">  146</span>&#160;    <span class="comment">// functions.</span></div>
<div class="line"><a name="l00147"></a><span class="lineno">  147</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l00148"></a><span class="lineno">  148</span>&#160;  }</div>
<div class="line"><a name="l00149"></a><span class="lineno">  149</span>&#160; </div>
<div class="line"><a name="l00150"></a><span class="lineno">  150</span>&#160;<span class="keyword">private</span>:</div>
<div class="line"><a name="l00151"></a><span class="lineno">  151</span>&#160;  <span class="comment">// The number of functions specialised, used for collecting statistics and</span></div>
<div class="line"><a name="l00152"></a><span class="lineno">  152</span>&#160;  <span class="comment">// also in the cost model.</span></div>
<div class="line"><a name="l00153"></a><span class="lineno">  153</span>&#160;  <span class="keywordtype">unsigned</span> NbFunctionsSpecialized = 0;</div>
<div class="line"><a name="l00154"></a><span class="lineno">  154</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l00155"></a><span class="lineno">  155</span>&#160;<span class="comment">  /// This function decides whether to specialize function \p F based on the</span></div>
<div class="line"><a name="l00156"></a><span class="lineno">  156</span>&#160;<span class="comment">  /// known constant values its arguments can take on. Specialization is</span></div>
<div class="line"><a name="l00157"></a><span class="lineno">  157</span>&#160;<span class="comment">  /// performed on the first interesting argument. Specializations based on</span></div>
<div class="line"><a name="l00158"></a><span class="lineno">  158</span>&#160;<span class="comment">  /// additional arguments will be evaluated on following iterations of the</span></div>
<div class="line"><a name="l00159"></a><span class="lineno">  159</span>&#160;<span class="comment">  /// main IPSCCP solve loop. \returns true if the function is specialized and</span></div>
<div class="line"><a name="l00160"></a><span class="lineno">  160</span>&#160;<span class="comment">  /// false otherwise.</span></div>
<div class="line"><a name="l00161"></a><span class="lineno">  161</span>&#160;<span class="comment"></span>  <span class="keywordtype">bool</span> specializeFunction(<a class="code" href="classllvm_1_1Function.html">Function</a> *<a class="code" href="MD5_8cpp.html#a96d73bbd7af15cb1fc38c3f4a3bd82e9">F</a>,</div>
<div class="line"><a name="l00162"></a><span class="lineno">  162</span>&#160;                          <a class="code" href="classllvm_1_1SmallVectorImpl.html">SmallVectorImpl&lt;Function *&gt;</a> &amp;Specializations) {</div>
<div class="line"><a name="l00163"></a><span class="lineno">  163</span>&#160; </div>
<div class="line"><a name="l00164"></a><span class="lineno">  164</span>&#160;    <span class="comment">// Do not specialize the cloned function again.</span></div>
<div class="line"><a name="l00165"></a><span class="lineno">  165</span>&#160;    <span class="keywordflow">if</span> (SpecializedFuncs.contains(<a class="code" href="MD5_8cpp.html#a96d73bbd7af15cb1fc38c3f4a3bd82e9">F</a>)) {</div>
<div class="line"><a name="l00166"></a><span class="lineno">  166</span>&#160;      <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l00167"></a><span class="lineno">  167</span>&#160;    }</div>
<div class="line"><a name="l00168"></a><span class="lineno">  168</span>&#160; </div>
<div class="line"><a name="l00169"></a><span class="lineno">  169</span>&#160;    <span class="comment">// If we&#39;re optimizing the function for size, we shouldn&#39;t specialize it.</span></div>
<div class="line"><a name="l00170"></a><span class="lineno">  170</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="MD5_8cpp.html#a96d73bbd7af15cb1fc38c3f4a3bd82e9">F</a>-&gt;hasOptSize() ||</div>
<div class="line"><a name="l00171"></a><span class="lineno">  171</span>&#160;        <a class="code" href="namespacellvm.html#a3af72f14ea20f2c762c751d2d49e5ea3">shouldOptimizeForSize</a>(<a class="code" href="MD5_8cpp.html#a96d73bbd7af15cb1fc38c3f4a3bd82e9">F</a>, <span class="keyword">nullptr</span>, <span class="keyword">nullptr</span>, PGSOQueryType::IRPass))</div>
<div class="line"><a name="l00172"></a><span class="lineno">  172</span>&#160;      <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l00173"></a><span class="lineno">  173</span>&#160; </div>
<div class="line"><a name="l00174"></a><span class="lineno">  174</span>&#160;    <span class="comment">// Exit if the function is not executable. There&#39;s no point in specializing</span></div>
<div class="line"><a name="l00175"></a><span class="lineno">  175</span>&#160;    <span class="comment">// a dead function.</span></div>
<div class="line"><a name="l00176"></a><span class="lineno">  176</span>&#160;    <span class="keywordflow">if</span> (!Solver.<a class="code" href="classllvm_1_1SCCPSolver.html#ac16a1026117ac160108d8a5bab0ae445">isBlockExecutable</a>(&amp;<a class="code" href="MD5_8cpp.html#a96d73bbd7af15cb1fc38c3f4a3bd82e9">F</a>-&gt;getEntryBlock()))</div>
<div class="line"><a name="l00177"></a><span class="lineno">  177</span>&#160;      <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l00178"></a><span class="lineno">  178</span>&#160; </div>
<div class="line"><a name="l00179"></a><span class="lineno">  179</span>&#160;    <a class="code" href="Debug_8h.html#a08efc68d15935eb8889400a46c3749ba">LLVM_DEBUG</a>(<a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <span class="stringliteral">&quot;FnSpecialization: Try function: &quot;</span> &lt;&lt; <a class="code" href="MD5_8cpp.html#a96d73bbd7af15cb1fc38c3f4a3bd82e9">F</a>-&gt;getName()</div>
<div class="line"><a name="l00180"></a><span class="lineno">  180</span>&#160;                      &lt;&lt; <span class="stringliteral">&quot;\n&quot;</span>);</div>
<div class="line"><a name="l00181"></a><span class="lineno">  181</span>&#160;    <span class="comment">// Determine if we should specialize the function based on the values the</span></div>
<div class="line"><a name="l00182"></a><span class="lineno">  182</span>&#160;    <span class="comment">// argument can take on. If specialization is not profitable, we continue</span></div>
<div class="line"><a name="l00183"></a><span class="lineno">  183</span>&#160;    <span class="comment">// on to the next argument.</span></div>
<div class="line"><a name="l00184"></a><span class="lineno">  184</span>&#160;    <span class="keywordflow">for</span> (<a class="code" href="classllvm_1_1Argument.html">Argument</a> &amp;<a class="code" href="README__ALTIVEC_8txt.html#a015846b6188ce15e08cd94c74a9df1a3">A</a> : <a class="code" href="MD5_8cpp.html#a96d73bbd7af15cb1fc38c3f4a3bd82e9">F</a>-&gt;args()) {</div>
<div class="line"><a name="l00185"></a><span class="lineno">  185</span>&#160;      <a class="code" href="Debug_8h.html#a08efc68d15935eb8889400a46c3749ba">LLVM_DEBUG</a>(<a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <span class="stringliteral">&quot;FnSpecialization: Analysing arg: &quot;</span> &lt;&lt; <a class="code" href="README__ALTIVEC_8txt.html#a015846b6188ce15e08cd94c74a9df1a3">A</a>.getName()</div>
<div class="line"><a name="l00186"></a><span class="lineno">  186</span>&#160;                        &lt;&lt; <span class="stringliteral">&quot;\n&quot;</span>);</div>
<div class="line"><a name="l00187"></a><span class="lineno">  187</span>&#160;      <span class="comment">// True if this will be a partial specialization. We will need to keep</span></div>
<div class="line"><a name="l00188"></a><span class="lineno">  188</span>&#160;      <span class="comment">// the original function around in addition to the added specializations.</span></div>
<div class="line"><a name="l00189"></a><span class="lineno">  189</span>&#160;      <span class="keywordtype">bool</span> IsPartial = <span class="keyword">true</span>;</div>
<div class="line"><a name="l00190"></a><span class="lineno">  190</span>&#160; </div>
<div class="line"><a name="l00191"></a><span class="lineno">  191</span>&#160;      <span class="comment">// Determine if this argument is interesting. If we know the argument can</span></div>
<div class="line"><a name="l00192"></a><span class="lineno">  192</span>&#160;      <span class="comment">// take on any constant values, they are collected in Constants. If the</span></div>
<div class="line"><a name="l00193"></a><span class="lineno">  193</span>&#160;      <span class="comment">// argument can only ever equal a constant value in Constants, the</span></div>
<div class="line"><a name="l00194"></a><span class="lineno">  194</span>&#160;      <span class="comment">// function will be completely specialized, and the IsPartial flag will</span></div>
<div class="line"><a name="l00195"></a><span class="lineno">  195</span>&#160;      <span class="comment">// be set to false by isArgumentInteresting (that function only adds</span></div>
<div class="line"><a name="l00196"></a><span class="lineno">  196</span>&#160;      <span class="comment">// values to the Constants list that are deemed profitable).</span></div>
<div class="line"><a name="l00197"></a><span class="lineno">  197</span>&#160;      <a class="code" href="classllvm_1_1SmallVector.html">SmallVector&lt;Constant *, 4&gt;</a> <a class="code" href="namespacellvm_1_1dwarf.html#ab4fde659cfd2ad21ef1920dca7f22255">Constants</a>;</div>
<div class="line"><a name="l00198"></a><span class="lineno">  198</span>&#160;      <span class="keywordflow">if</span> (!isArgumentInteresting(&amp;<a class="code" href="README__ALTIVEC_8txt.html#a015846b6188ce15e08cd94c74a9df1a3">A</a>, <a class="code" href="namespacellvm_1_1dwarf.html#ab4fde659cfd2ad21ef1920dca7f22255">Constants</a>, IsPartial)) {</div>
<div class="line"><a name="l00199"></a><span class="lineno">  199</span>&#160;        <a class="code" href="Debug_8h.html#a08efc68d15935eb8889400a46c3749ba">LLVM_DEBUG</a>(<a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <span class="stringliteral">&quot;FnSpecialization: Argument is not interesting\n&quot;</span>);</div>
<div class="line"><a name="l00200"></a><span class="lineno">  200</span>&#160;        <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l00201"></a><span class="lineno">  201</span>&#160;      }</div>
<div class="line"><a name="l00202"></a><span class="lineno">  202</span>&#160; </div>
<div class="line"><a name="l00203"></a><span class="lineno">  203</span>&#160;      <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(!<a class="code" href="namespacellvm_1_1dwarf.html#ab4fde659cfd2ad21ef1920dca7f22255">Constants</a>.empty() &amp;&amp; <span class="stringliteral">&quot;No constants on which to specialize&quot;</span>);</div>
<div class="line"><a name="l00204"></a><span class="lineno">  204</span>&#160;      <a class="code" href="Debug_8h.html#a08efc68d15935eb8889400a46c3749ba">LLVM_DEBUG</a>(<a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <span class="stringliteral">&quot;FnSpecialization: Argument is interesting!\n&quot;</span></div>
<div class="line"><a name="l00205"></a><span class="lineno">  205</span>&#160;                        &lt;&lt; <span class="stringliteral">&quot;FnSpecialization: Specializing &#39;&quot;</span> &lt;&lt; <a class="code" href="MD5_8cpp.html#a96d73bbd7af15cb1fc38c3f4a3bd82e9">F</a>-&gt;getName()</div>
<div class="line"><a name="l00206"></a><span class="lineno">  206</span>&#160;                        &lt;&lt; <span class="stringliteral">&quot;&#39; on argument: &quot;</span> &lt;&lt; <a class="code" href="README__ALTIVEC_8txt.html#a015846b6188ce15e08cd94c74a9df1a3">A</a> &lt;&lt; <span class="stringliteral">&quot;\n&quot;</span></div>
<div class="line"><a name="l00207"></a><span class="lineno">  207</span>&#160;                        &lt;&lt; <span class="stringliteral">&quot;FnSpecialization: Constants are:\n\n&quot;</span>;</div>
<div class="line"><a name="l00208"></a><span class="lineno">  208</span>&#160;                 <a class="code" href="lib_2Target_2README_8txt.html#a7df6ed7588301267782c2bd4b7f6899d">for</a> (<span class="keywordtype">unsigned</span> <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a> = 0; <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a> &lt; <a class="code" href="namespacellvm_1_1dwarf.html#ab4fde659cfd2ad21ef1920dca7f22255">Constants</a>.size(); ++<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>) <a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>()</div>
<div class="line"><a name="l00209"></a><span class="lineno">  209</span>&#160;                 &lt;&lt; *<a class="code" href="namespacellvm_1_1dwarf.html#ab4fde659cfd2ad21ef1920dca7f22255">Constants</a>[<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>] &lt;&lt; <span class="stringliteral">&quot;\n&quot;</span>;</div>
<div class="line"><a name="l00210"></a><span class="lineno">  210</span>&#160;                 <a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <span class="stringliteral">&quot;FnSpecialization: End of constants\n\n&quot;</span>);</div>
<div class="line"><a name="l00211"></a><span class="lineno">  211</span>&#160; </div>
<div class="line"><a name="l00212"></a><span class="lineno">  212</span>&#160;      <span class="comment">// Create a version of the function in which the argument is marked</span></div>
<div class="line"><a name="l00213"></a><span class="lineno">  213</span>&#160;      <span class="comment">// constant with the given value.</span></div>
<div class="line"><a name="l00214"></a><span class="lineno">  214</span>&#160;      <span class="keywordflow">for</span> (<span class="keyword">auto</span> *<a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a> : <a class="code" href="namespacellvm_1_1dwarf.html#ab4fde659cfd2ad21ef1920dca7f22255">Constants</a>) {</div>
<div class="line"><a name="l00215"></a><span class="lineno">  215</span>&#160;        <span class="comment">// Clone the function. We leave the ValueToValueMap empty to allow</span></div>
<div class="line"><a name="l00216"></a><span class="lineno">  216</span>&#160;        <span class="comment">// IPSCCP to propagate the constant arguments.</span></div>
<div class="line"><a name="l00217"></a><span class="lineno">  217</span>&#160;        <a class="code" href="classllvm_1_1ValueMap.html">ValueToValueMapTy</a> EmptyMap;</div>
<div class="line"><a name="l00218"></a><span class="lineno">  218</span>&#160;        <a class="code" href="classllvm_1_1Function.html">Function</a> *Clone = <a class="code" href="namespacellvm.html#aedeb89fa4ceb608d9d49bcd53ddcd2c1">CloneFunction</a>(<a class="code" href="MD5_8cpp.html#a96d73bbd7af15cb1fc38c3f4a3bd82e9">F</a>, EmptyMap);</div>
<div class="line"><a name="l00219"></a><span class="lineno">  219</span>&#160;        <a class="code" href="classllvm_1_1Argument.html">Argument</a> *ClonedArg = Clone-&gt;<a class="code" href="classllvm_1_1Function.html#a8bf193a781a92cae52d7f9216d0824f8">arg_begin</a>() + <a class="code" href="README__ALTIVEC_8txt.html#a015846b6188ce15e08cd94c74a9df1a3">A</a>.getArgNo();</div>
<div class="line"><a name="l00220"></a><span class="lineno">  220</span>&#160; </div>
<div class="line"><a name="l00221"></a><span class="lineno">  221</span>&#160;        <span class="comment">// Rewrite calls to the function so that they call the clone instead.</span></div>
<div class="line"><a name="l00222"></a><span class="lineno">  222</span>&#160;        rewriteCallSites(<a class="code" href="MD5_8cpp.html#a96d73bbd7af15cb1fc38c3f4a3bd82e9">F</a>, Clone, *ClonedArg, <a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a>);</div>
<div class="line"><a name="l00223"></a><span class="lineno">  223</span>&#160; </div>
<div class="line"><a name="l00224"></a><span class="lineno">  224</span>&#160;        <span class="comment">// Initialize the lattice state of the arguments of the function clone,</span></div>
<div class="line"><a name="l00225"></a><span class="lineno">  225</span>&#160;        <span class="comment">// marking the argument on which we specialized the function constant</span></div>
<div class="line"><a name="l00226"></a><span class="lineno">  226</span>&#160;        <span class="comment">// with the given value.</span></div>
<div class="line"><a name="l00227"></a><span class="lineno">  227</span>&#160;        Solver.<a class="code" href="classllvm_1_1SCCPSolver.html#a87f1f96fcc61ca8722e2b32f40a141bc">markArgInFuncSpecialization</a>(<a class="code" href="MD5_8cpp.html#a96d73bbd7af15cb1fc38c3f4a3bd82e9">F</a>, ClonedArg, <a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a>);</div>
<div class="line"><a name="l00228"></a><span class="lineno">  228</span>&#160; </div>
<div class="line"><a name="l00229"></a><span class="lineno">  229</span>&#160;        <span class="comment">// Mark all the specialized functions</span></div>
<div class="line"><a name="l00230"></a><span class="lineno">  230</span>&#160;        Specializations.push_back(Clone);</div>
<div class="line"><a name="l00231"></a><span class="lineno">  231</span>&#160;        NbFunctionsSpecialized++;</div>
<div class="line"><a name="l00232"></a><span class="lineno">  232</span>&#160;      }</div>
<div class="line"><a name="l00233"></a><span class="lineno">  233</span>&#160; </div>
<div class="line"><a name="l00234"></a><span class="lineno">  234</span>&#160;      <span class="comment">// TODO: if we want to support specialize specialized functions, and if</span></div>
<div class="line"><a name="l00235"></a><span class="lineno">  235</span>&#160;      <span class="comment">// the function has been completely specialized, the original function is</span></div>
<div class="line"><a name="l00236"></a><span class="lineno">  236</span>&#160;      <span class="comment">// no longer needed, so we would need to mark it unreachable here.</span></div>
<div class="line"><a name="l00237"></a><span class="lineno">  237</span>&#160; </div>
<div class="line"><a name="l00238"></a><span class="lineno">  238</span>&#160;      <span class="comment">// FIXME: Only one argument per function.</span></div>
<div class="line"><a name="l00239"></a><span class="lineno">  239</span>&#160;      <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l00240"></a><span class="lineno">  240</span>&#160;    }</div>
<div class="line"><a name="l00241"></a><span class="lineno">  241</span>&#160; </div>
<div class="line"><a name="l00242"></a><span class="lineno">  242</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l00243"></a><span class="lineno">  243</span>&#160;  }</div>
<div class="line"><a name="l00244"></a><span class="lineno">  244</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l00245"></a><span class="lineno">  245</span>&#160;<span class="comment">  /// Compute the cost of specializing function \p F.</span></div>
<div class="line"><a name="l00246"></a><span class="lineno">  246</span>&#160;<span class="comment"></span>  <a class="code" href="classllvm_1_1InstructionCost.html">InstructionCost</a> getSpecializationCost(<a class="code" href="classllvm_1_1Function.html">Function</a> *<a class="code" href="MD5_8cpp.html#a96d73bbd7af15cb1fc38c3f4a3bd82e9">F</a>) {</div>
<div class="line"><a name="l00247"></a><span class="lineno">  247</span>&#160;    <span class="comment">// Compute the code metrics for the function.</span></div>
<div class="line"><a name="l00248"></a><span class="lineno">  248</span>&#160;    <a class="code" href="classllvm_1_1SmallPtrSet.html">SmallPtrSet&lt;const Value *, 32&gt;</a> EphValues;</div>
<div class="line"><a name="l00249"></a><span class="lineno">  249</span>&#160;    <a class="code" href="structllvm_1_1CodeMetrics.html#a7e174506b52ad46ea1f746a7f727d999">CodeMetrics::collectEphemeralValues</a>(<a class="code" href="MD5_8cpp.html#a96d73bbd7af15cb1fc38c3f4a3bd82e9">F</a>, &amp;(GetAC)(*<a class="code" href="MD5_8cpp.html#a96d73bbd7af15cb1fc38c3f4a3bd82e9">F</a>), EphValues);</div>
<div class="line"><a name="l00250"></a><span class="lineno">  250</span>&#160;    <a class="code" href="structllvm_1_1CodeMetrics.html">CodeMetrics</a> <a class="code" href="MachineTraceMetrics_8cpp.html#a6f3004139ef53bc2cf206b8864976928">Metrics</a>;</div>
<div class="line"><a name="l00251"></a><span class="lineno">  251</span>&#160;    <span class="keywordflow">for</span> (<a class="code" href="classllvm_1_1BasicBlock.html">BasicBlock</a> &amp;<a class="code" href="lib_2CodeGen_2README_8txt.html#a09776db24cf586ec9f1e18f3bae14099">BB</a> : *<a class="code" href="MD5_8cpp.html#a96d73bbd7af15cb1fc38c3f4a3bd82e9">F</a>)</div>
<div class="line"><a name="l00252"></a><span class="lineno">  252</span>&#160;      <a class="code" href="MachineTraceMetrics_8cpp.html#a6f3004139ef53bc2cf206b8864976928">Metrics</a>.analyzeBasicBlock(&amp;<a class="code" href="lib_2CodeGen_2README_8txt.html#a09776db24cf586ec9f1e18f3bae14099">BB</a>, (GetTTI)(*<a class="code" href="MD5_8cpp.html#a96d73bbd7af15cb1fc38c3f4a3bd82e9">F</a>), EphValues);</div>
<div class="line"><a name="l00253"></a><span class="lineno">  253</span>&#160; </div>
<div class="line"><a name="l00254"></a><span class="lineno">  254</span>&#160;    <span class="comment">// If the code metrics reveal that we shouldn&#39;t duplicate the function, we</span></div>
<div class="line"><a name="l00255"></a><span class="lineno">  255</span>&#160;    <span class="comment">// shouldn&#39;t specialize it. Set the specialization cost to Invalid.</span></div>
<div class="line"><a name="l00256"></a><span class="lineno">  256</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="MachineTraceMetrics_8cpp.html#a6f3004139ef53bc2cf206b8864976928">Metrics</a>.notDuplicatable) {</div>
<div class="line"><a name="l00257"></a><span class="lineno">  257</span>&#160;      <a class="code" href="classllvm_1_1InstructionCost.html">InstructionCost</a> <a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a>{};</div>
<div class="line"><a name="l00258"></a><span class="lineno">  258</span>&#160;      <a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a>.<a class="code" href="classllvm_1_1InstructionCost.html#a0e2de49134b2835ec083cd3d15dfa2a5">setInvalid</a>();</div>
<div class="line"><a name="l00259"></a><span class="lineno">  259</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a>;</div>
<div class="line"><a name="l00260"></a><span class="lineno">  260</span>&#160;    }</div>
<div class="line"><a name="l00261"></a><span class="lineno">  261</span>&#160; </div>
<div class="line"><a name="l00262"></a><span class="lineno">  262</span>&#160;    <span class="comment">// Otherwise, set the specialization cost to be the cost of all the</span></div>
<div class="line"><a name="l00263"></a><span class="lineno">  263</span>&#160;    <span class="comment">// instructions in the function and penalty for specializing more functions.</span></div>
<div class="line"><a name="l00264"></a><span class="lineno">  264</span>&#160;    <span class="keywordtype">unsigned</span> Penalty = NbFunctionsSpecialized + 1;</div>
<div class="line"><a name="l00265"></a><span class="lineno">  265</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="MachineTraceMetrics_8cpp.html#a6f3004139ef53bc2cf206b8864976928">Metrics</a>.NumInsts * <a class="code" href="namespacellvm_1_1InlineConstants.html#ac3ac11f694a6c40ee45f49ac94068124">InlineConstants::InstrCost</a> * Penalty;</div>
<div class="line"><a name="l00266"></a><span class="lineno">  266</span>&#160;  }</div>
<div class="line"><a name="l00267"></a><span class="lineno">  267</span>&#160; </div>
<div class="line"><a name="l00268"></a><span class="lineno">  268</span>&#160;  <a class="code" href="classllvm_1_1InstructionCost.html">InstructionCost</a> getUserBonus(<a class="code" href="classllvm_1_1User.html">User</a> *U, <a class="code" href="classllvm_1_1TargetTransformInfo.html">llvm::TargetTransformInfo</a> &amp;<a class="code" href="classllvm_1_1TargetTransformInfo.html">TTI</a>,</div>
<div class="line"><a name="l00269"></a><span class="lineno">  269</span>&#160;                               <a class="code" href="classllvm_1_1LoopInfo.html">LoopInfo</a> &amp;LI) {</div>
<div class="line"><a name="l00270"></a><span class="lineno">  270</span>&#160;    <span class="keyword">auto</span> *<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a> = dyn_cast_or_null&lt;Instruction&gt;(U);</div>
<div class="line"><a name="l00271"></a><span class="lineno">  271</span>&#160;    <span class="comment">// If not an instruction we do not know how to evaluate.</span></div>
<div class="line"><a name="l00272"></a><span class="lineno">  272</span>&#160;    <span class="comment">// Keep minimum possible cost for now so that it doesnt affect</span></div>
<div class="line"><a name="l00273"></a><span class="lineno">  273</span>&#160;    <span class="comment">// specialization.</span></div>
<div class="line"><a name="l00274"></a><span class="lineno">  274</span>&#160;    <span class="keywordflow">if</span> (!<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>)</div>
<div class="line"><a name="l00275"></a><span class="lineno">  275</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="namespacellvm.html#a57f2ca0e57f4f7b13f56f9aa16af3e0d">std::numeric_limits&lt;unsigned&gt;::min</a>();</div>
<div class="line"><a name="l00276"></a><span class="lineno">  276</span>&#160; </div>
<div class="line"><a name="l00277"></a><span class="lineno">  277</span>&#160;    <span class="keyword">auto</span> Cost = <a class="code" href="classllvm_1_1TargetTransformInfo.html">TTI</a>.<a class="code" href="classllvm_1_1TargetTransformInfo.html#af06cc06fa170538ab8025ebe05e5f0a2">getUserCost</a>(U, <a class="code" href="classllvm_1_1TargetTransformInfo.html#a706f223f760b55668fbae74202b816bba7f80055e1969cb850739546467460ad8">TargetTransformInfo::TCK_SizeAndLatency</a>);</div>
<div class="line"><a name="l00278"></a><span class="lineno">  278</span>&#160; </div>
<div class="line"><a name="l00279"></a><span class="lineno">  279</span>&#160;    <span class="comment">// Traverse recursively if there are more uses.</span></div>
<div class="line"><a name="l00280"></a><span class="lineno">  280</span>&#160;    <span class="comment">// TODO: Any other instructions to be added here?</span></div>
<div class="line"><a name="l00281"></a><span class="lineno">  281</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>-&gt;mayReadFromMemory() || <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>-&gt;isCast())</div>
<div class="line"><a name="l00282"></a><span class="lineno">  282</span>&#160;      <span class="keywordflow">for</span> (<span class="keyword">auto</span> *<a class="code" href="classllvm_1_1User.html">User</a> : <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>-&gt;users())</div>
<div class="line"><a name="l00283"></a><span class="lineno">  283</span>&#160;        Cost += getUserBonus(<a class="code" href="classllvm_1_1User.html">User</a>, <a class="code" href="classllvm_1_1TargetTransformInfo.html">TTI</a>, LI);</div>
<div class="line"><a name="l00284"></a><span class="lineno">  284</span>&#160; </div>
<div class="line"><a name="l00285"></a><span class="lineno">  285</span>&#160;    <span class="comment">// Increase the cost if it is inside the loop.</span></div>
<div class="line"><a name="l00286"></a><span class="lineno">  286</span>&#160;    <span class="keyword">auto</span> LoopDepth = LI.<a class="code" href="classllvm_1_1LoopInfoBase.html#aa4defa64d17f14bd55204cac1b3a0c3a">getLoopDepth</a>(<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>-&gt;getParent());</div>
<div class="line"><a name="l00287"></a><span class="lineno">  287</span>&#160;    Cost *= std::pow((<span class="keywordtype">double</span>)<a class="code" href="FunctionSpecialization_8cpp.html#a5c81c9004e171e6d4f131a7e38fac142">AvgLoopIterationCount</a>, LoopDepth);</div>
<div class="line"><a name="l00288"></a><span class="lineno">  288</span>&#160;    <span class="keywordflow">return</span> Cost;</div>
<div class="line"><a name="l00289"></a><span class="lineno">  289</span>&#160;  }</div>
<div class="line"><a name="l00290"></a><span class="lineno">  290</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l00291"></a><span class="lineno">  291</span>&#160;<span class="comment">  /// Compute a bonus for replacing argument \p A with constant \p C.</span></div>
<div class="line"><a name="l00292"></a><span class="lineno">  292</span>&#160;<span class="comment"></span>  <a class="code" href="classllvm_1_1InstructionCost.html">InstructionCost</a> getSpecializationBonus(<a class="code" href="classllvm_1_1Argument.html">Argument</a> *<a class="code" href="README__ALTIVEC_8txt.html#a015846b6188ce15e08cd94c74a9df1a3">A</a>, <a class="code" href="classllvm_1_1Constant.html">Constant</a> *<a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a>) {</div>
<div class="line"><a name="l00293"></a><span class="lineno">  293</span>&#160;    <a class="code" href="classllvm_1_1Function.html">Function</a> *<a class="code" href="MD5_8cpp.html#a96d73bbd7af15cb1fc38c3f4a3bd82e9">F</a> = <a class="code" href="README__ALTIVEC_8txt.html#a015846b6188ce15e08cd94c74a9df1a3">A</a>-&gt;getParent();</div>
<div class="line"><a name="l00294"></a><span class="lineno">  294</span>&#160;    <a class="code" href="classllvm_1_1DominatorTree.html">DominatorTree</a> DT(*<a class="code" href="MD5_8cpp.html#a96d73bbd7af15cb1fc38c3f4a3bd82e9">F</a>);</div>
<div class="line"><a name="l00295"></a><span class="lineno">  295</span>&#160;    <a class="code" href="classllvm_1_1LoopInfo.html">LoopInfo</a> LI(DT);</div>
<div class="line"><a name="l00296"></a><span class="lineno">  296</span>&#160;    <span class="keyword">auto</span> &amp;<a class="code" href="classllvm_1_1TargetTransformInfo.html">TTI</a> = (GetTTI)(*<a class="code" href="MD5_8cpp.html#a96d73bbd7af15cb1fc38c3f4a3bd82e9">F</a>);</div>
<div class="line"><a name="l00297"></a><span class="lineno">  297</span>&#160;    <a class="code" href="Debug_8h.html#a08efc68d15935eb8889400a46c3749ba">LLVM_DEBUG</a>(<a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <span class="stringliteral">&quot;FnSpecialization: Analysing bonus for: &quot;</span> &lt;&lt; *<a class="code" href="README__ALTIVEC_8txt.html#a015846b6188ce15e08cd94c74a9df1a3">A</a></div>
<div class="line"><a name="l00298"></a><span class="lineno">  298</span>&#160;                      &lt;&lt; <span class="stringliteral">&quot;\n&quot;</span>);</div>
<div class="line"><a name="l00299"></a><span class="lineno">  299</span>&#160; </div>
<div class="line"><a name="l00300"></a><span class="lineno">  300</span>&#160;    <a class="code" href="classllvm_1_1InstructionCost.html">InstructionCost</a> TotalCost = 0;</div>
<div class="line"><a name="l00301"></a><span class="lineno">  301</span>&#160;    <span class="keywordflow">for</span> (<span class="keyword">auto</span> *U : <a class="code" href="README__ALTIVEC_8txt.html#a015846b6188ce15e08cd94c74a9df1a3">A</a>-&gt;users()) {</div>
<div class="line"><a name="l00302"></a><span class="lineno">  302</span>&#160;      TotalCost += getUserBonus(U, <a class="code" href="classllvm_1_1TargetTransformInfo.html">TTI</a>, LI);</div>
<div class="line"><a name="l00303"></a><span class="lineno">  303</span>&#160;      <a class="code" href="Debug_8h.html#a08efc68d15935eb8889400a46c3749ba">LLVM_DEBUG</a>(<a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <span class="stringliteral">&quot;FnSpecialization: User cost &quot;</span>;</div>
<div class="line"><a name="l00304"></a><span class="lineno">  304</span>&#160;                 TotalCost.<a class="code" href="classllvm_1_1InstructionCost.html#a6589fbc679c11bf3b94f7a70c9c89f7c">print</a>(<a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>()); <a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <span class="stringliteral">&quot; for: &quot;</span> &lt;&lt; *U &lt;&lt; <span class="stringliteral">&quot;\n&quot;</span>);</div>
<div class="line"><a name="l00305"></a><span class="lineno">  305</span>&#160;    }</div>
<div class="line"><a name="l00306"></a><span class="lineno">  306</span>&#160; </div>
<div class="line"><a name="l00307"></a><span class="lineno">  307</span>&#160;    <span class="comment">// The below heuristic is only concerned with exposing inlining</span></div>
<div class="line"><a name="l00308"></a><span class="lineno">  308</span>&#160;    <span class="comment">// opportunities via indirect call promotion. If the argument is not a</span></div>
<div class="line"><a name="l00309"></a><span class="lineno">  309</span>&#160;    <span class="comment">// function pointer, give up.</span></div>
<div class="line"><a name="l00310"></a><span class="lineno">  310</span>&#160;    <span class="keywordflow">if</span> (!isa&lt;PointerType&gt;(<a class="code" href="README__ALTIVEC_8txt.html#a015846b6188ce15e08cd94c74a9df1a3">A</a>-&gt;getType()) ||</div>
<div class="line"><a name="l00311"></a><span class="lineno">  311</span>&#160;        !isa&lt;FunctionType&gt;(<a class="code" href="README__ALTIVEC_8txt.html#a015846b6188ce15e08cd94c74a9df1a3">A</a>-&gt;getType()-&gt;getPointerElementType()))</div>
<div class="line"><a name="l00312"></a><span class="lineno">  312</span>&#160;      <span class="keywordflow">return</span> TotalCost;</div>
<div class="line"><a name="l00313"></a><span class="lineno">  313</span>&#160; </div>
<div class="line"><a name="l00314"></a><span class="lineno">  314</span>&#160;    <span class="comment">// Since the argument is a function pointer, its incoming constant values</span></div>
<div class="line"><a name="l00315"></a><span class="lineno">  315</span>&#160;    <span class="comment">// should be functions or constant expressions. The code below attempts to</span></div>
<div class="line"><a name="l00316"></a><span class="lineno">  316</span>&#160;    <span class="comment">// look through cast expressions to find the function that will be called.</span></div>
<div class="line"><a name="l00317"></a><span class="lineno">  317</span>&#160;    <a class="code" href="classllvm_1_1Value.html">Value</a> *CalledValue = <a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a>;</div>
<div class="line"><a name="l00318"></a><span class="lineno">  318</span>&#160;    <span class="keywordflow">while</span> (isa&lt;ConstantExpr&gt;(CalledValue) &amp;&amp;</div>
<div class="line"><a name="l00319"></a><span class="lineno">  319</span>&#160;           cast&lt;ConstantExpr&gt;(CalledValue)-&gt;isCast())</div>
<div class="line"><a name="l00320"></a><span class="lineno">  320</span>&#160;      CalledValue = cast&lt;User&gt;(CalledValue)-&gt;getOperand(0);</div>
<div class="line"><a name="l00321"></a><span class="lineno">  321</span>&#160;    <a class="code" href="classllvm_1_1Function.html">Function</a> *CalledFunction = dyn_cast&lt;Function&gt;(CalledValue);</div>
<div class="line"><a name="l00322"></a><span class="lineno">  322</span>&#160;    <span class="keywordflow">if</span> (!CalledFunction)</div>
<div class="line"><a name="l00323"></a><span class="lineno">  323</span>&#160;      <span class="keywordflow">return</span> TotalCost;</div>
<div class="line"><a name="l00324"></a><span class="lineno">  324</span>&#160; </div>
<div class="line"><a name="l00325"></a><span class="lineno">  325</span>&#160;    <span class="comment">// Get TTI for the called function (used for the inline cost).</span></div>
<div class="line"><a name="l00326"></a><span class="lineno">  326</span>&#160;    <span class="keyword">auto</span> &amp;CalleeTTI = (GetTTI)(*CalledFunction);</div>
<div class="line"><a name="l00327"></a><span class="lineno">  327</span>&#160; </div>
<div class="line"><a name="l00328"></a><span class="lineno">  328</span>&#160;    <span class="comment">// Look at all the call sites whose called value is the argument.</span></div>
<div class="line"><a name="l00329"></a><span class="lineno">  329</span>&#160;    <span class="comment">// Specializing the function on the argument would allow these indirect</span></div>
<div class="line"><a name="l00330"></a><span class="lineno">  330</span>&#160;    <span class="comment">// calls to be promoted to direct calls. If the indirect call promotion</span></div>
<div class="line"><a name="l00331"></a><span class="lineno">  331</span>&#160;    <span class="comment">// would likely enable the called function to be inlined, specializing is a</span></div>
<div class="line"><a name="l00332"></a><span class="lineno">  332</span>&#160;    <span class="comment">// good idea.</span></div>
<div class="line"><a name="l00333"></a><span class="lineno">  333</span>&#160;    <span class="keywordtype">int</span> Bonus = 0;</div>
<div class="line"><a name="l00334"></a><span class="lineno">  334</span>&#160;    <span class="keywordflow">for</span> (<a class="code" href="classllvm_1_1User.html">User</a> *U : <a class="code" href="README__ALTIVEC_8txt.html#a015846b6188ce15e08cd94c74a9df1a3">A</a>-&gt;users()) {</div>
<div class="line"><a name="l00335"></a><span class="lineno">  335</span>&#160;      <span class="keywordflow">if</span> (!isa&lt;CallInst&gt;(U) &amp;&amp; !isa&lt;InvokeInst&gt;(U))</div>
<div class="line"><a name="l00336"></a><span class="lineno">  336</span>&#160;        <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l00337"></a><span class="lineno">  337</span>&#160;      <span class="keyword">auto</span> *CS = cast&lt;CallBase&gt;(U);</div>
<div class="line"><a name="l00338"></a><span class="lineno">  338</span>&#160;      <span class="keywordflow">if</span> (CS-&gt;getCalledOperand() != <a class="code" href="README__ALTIVEC_8txt.html#a015846b6188ce15e08cd94c74a9df1a3">A</a>)</div>
<div class="line"><a name="l00339"></a><span class="lineno">  339</span>&#160;        <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l00340"></a><span class="lineno">  340</span>&#160; </div>
<div class="line"><a name="l00341"></a><span class="lineno">  341</span>&#160;      <span class="comment">// Get the cost of inlining the called function at this call site. Note</span></div>
<div class="line"><a name="l00342"></a><span class="lineno">  342</span>&#160;      <span class="comment">// that this is only an estimate. The called function may eventually</span></div>
<div class="line"><a name="l00343"></a><span class="lineno">  343</span>&#160;      <span class="comment">// change in a way that leads to it not being inlined here, even though</span></div>
<div class="line"><a name="l00344"></a><span class="lineno">  344</span>&#160;      <span class="comment">// inlining looks profitable now. For example, one of its called</span></div>
<div class="line"><a name="l00345"></a><span class="lineno">  345</span>&#160;      <span class="comment">// functions may be inlined into it, making the called function too large</span></div>
<div class="line"><a name="l00346"></a><span class="lineno">  346</span>&#160;      <span class="comment">// to be inlined into this call site.</span></div>
<div class="line"><a name="l00347"></a><span class="lineno">  347</span>&#160;      <span class="comment">//</span></div>
<div class="line"><a name="l00348"></a><span class="lineno">  348</span>&#160;      <span class="comment">// We apply a boost for performing indirect call promotion by increasing</span></div>
<div class="line"><a name="l00349"></a><span class="lineno">  349</span>&#160;      <span class="comment">// the default threshold by the threshold for indirect calls.</span></div>
<div class="line"><a name="l00350"></a><span class="lineno">  350</span>&#160;      <span class="keyword">auto</span> Params = <a class="code" href="namespacellvm.html#aba7063dea024346c7b70099c63703f50">getInlineParams</a>();</div>
<div class="line"><a name="l00351"></a><span class="lineno">  351</span>&#160;      Params.DefaultThreshold += <a class="code" href="namespacellvm_1_1InlineConstants.html#a6e878d84d424326fd6132b320f075c97">InlineConstants::IndirectCallThreshold</a>;</div>
<div class="line"><a name="l00352"></a><span class="lineno">  352</span>&#160;      <a class="code" href="classllvm_1_1InlineCost.html">InlineCost</a> IC =</div>
<div class="line"><a name="l00353"></a><span class="lineno">  353</span>&#160;          <a class="code" href="namespacellvm.html#a5f5f248d08aa55c63e5bc7a8304a7319">getInlineCost</a>(*CS, CalledFunction, Params, CalleeTTI, GetAC, GetTLI);</div>
<div class="line"><a name="l00354"></a><span class="lineno">  354</span>&#160; </div>
<div class="line"><a name="l00355"></a><span class="lineno">  355</span>&#160;      <span class="comment">// We clamp the bonus for this call to be between zero and the default</span></div>
<div class="line"><a name="l00356"></a><span class="lineno">  356</span>&#160;      <span class="comment">// threshold.</span></div>
<div class="line"><a name="l00357"></a><span class="lineno">  357</span>&#160;      <span class="keywordflow">if</span> (IC.<a class="code" href="classllvm_1_1InlineCost.html#ad166c05849a74acb5e56415f7533e8ad">isAlways</a>())</div>
<div class="line"><a name="l00358"></a><span class="lineno">  358</span>&#160;        Bonus += Params.DefaultThreshold;</div>
<div class="line"><a name="l00359"></a><span class="lineno">  359</span>&#160;      <span class="keywordflow">else</span> <span class="keywordflow">if</span> (IC.<a class="code" href="classllvm_1_1InlineCost.html#aeb15e0a412ebed4724ab6e68346a666b">isVariable</a>() &amp;&amp; IC.<a class="code" href="classllvm_1_1InlineCost.html#ad1798a4114dad2820cb163dc5b2db758">getCostDelta</a>() &gt; 0)</div>
<div class="line"><a name="l00360"></a><span class="lineno">  360</span>&#160;        Bonus += IC.<a class="code" href="classllvm_1_1InlineCost.html#ad1798a4114dad2820cb163dc5b2db758">getCostDelta</a>();</div>
<div class="line"><a name="l00361"></a><span class="lineno">  361</span>&#160;    }</div>
<div class="line"><a name="l00362"></a><span class="lineno">  362</span>&#160; </div>
<div class="line"><a name="l00363"></a><span class="lineno">  363</span>&#160;    <span class="keywordflow">return</span> TotalCost + Bonus;</div>
<div class="line"><a name="l00364"></a><span class="lineno">  364</span>&#160;  }</div>
<div class="line"><a name="l00365"></a><span class="lineno">  365</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l00366"></a><span class="lineno">  366</span>&#160;<span class="comment">  /// Determine if we should specialize a function based on the incoming values</span></div>
<div class="line"><a name="l00367"></a><span class="lineno">  367</span>&#160;<span class="comment">  /// of the given argument.</span></div>
<div class="line"><a name="l00368"></a><span class="lineno">  368</span>&#160;<span class="comment">  ///</span></div>
<div class="line"><a name="l00369"></a><span class="lineno">  369</span>&#160;<span class="comment">  /// This function implements the goal-directed heuristic. It determines if</span></div>
<div class="line"><a name="l00370"></a><span class="lineno">  370</span>&#160;<span class="comment">  /// specializing the function based on the incoming values of argument \p A</span></div>
<div class="line"><a name="l00371"></a><span class="lineno">  371</span>&#160;<span class="comment">  /// would result in any significant optimization opportunities. If</span></div>
<div class="line"><a name="l00372"></a><span class="lineno">  372</span>&#160;<span class="comment">  /// optimization opportunities exist, the constant values of \p A on which to</span></div>
<div class="line"><a name="l00373"></a><span class="lineno">  373</span>&#160;<span class="comment">  /// specialize the function are collected in \p Constants. If the values in</span></div>
<div class="line"><a name="l00374"></a><span class="lineno">  374</span>&#160;<span class="comment">  /// \p Constants represent the complete set of values that \p A can take on,</span></div>
<div class="line"><a name="l00375"></a><span class="lineno">  375</span>&#160;<span class="comment">  /// the function will be completely specialized, and the \p IsPartial flag is</span></div>
<div class="line"><a name="l00376"></a><span class="lineno">  376</span>&#160;<span class="comment">  /// set to false.</span></div>
<div class="line"><a name="l00377"></a><span class="lineno">  377</span>&#160;<span class="comment">  ///</span></div>
<div class="line"><a name="l00378"></a><span class="lineno">  378</span>&#160;<span class="comment">  /// \returns true if the function should be specialized on the given</span></div>
<div class="line"><a name="l00379"></a><span class="lineno">  379</span>&#160;<span class="comment">  /// argument.</span></div>
<div class="line"><a name="l00380"></a><span class="lineno">  380</span>&#160;<span class="comment"></span>  <span class="keywordtype">bool</span> isArgumentInteresting(<a class="code" href="classllvm_1_1Argument.html">Argument</a> *<a class="code" href="README__ALTIVEC_8txt.html#a015846b6188ce15e08cd94c74a9df1a3">A</a>,</div>
<div class="line"><a name="l00381"></a><span class="lineno">  381</span>&#160;                             <a class="code" href="classllvm_1_1SmallVectorImpl.html">SmallVectorImpl&lt;Constant *&gt;</a> &amp;<a class="code" href="namespacellvm_1_1dwarf.html#ab4fde659cfd2ad21ef1920dca7f22255">Constants</a>,</div>
<div class="line"><a name="l00382"></a><span class="lineno">  382</span>&#160;                             <span class="keywordtype">bool</span> &amp;IsPartial) {</div>
<div class="line"><a name="l00383"></a><span class="lineno">  383</span>&#160;    <a class="code" href="classllvm_1_1Function.html">Function</a> *<a class="code" href="MD5_8cpp.html#a96d73bbd7af15cb1fc38c3f4a3bd82e9">F</a> = <a class="code" href="README__ALTIVEC_8txt.html#a015846b6188ce15e08cd94c74a9df1a3">A</a>-&gt;getParent();</div>
<div class="line"><a name="l00384"></a><span class="lineno">  384</span>&#160; </div>
<div class="line"><a name="l00385"></a><span class="lineno">  385</span>&#160;    <span class="comment">// For now, don&#39;t attempt to specialize functions based on the values of</span></div>
<div class="line"><a name="l00386"></a><span class="lineno">  386</span>&#160;    <span class="comment">// composite types.</span></div>
<div class="line"><a name="l00387"></a><span class="lineno">  387</span>&#160;    <span class="keywordflow">if</span> (!<a class="code" href="README__ALTIVEC_8txt.html#a015846b6188ce15e08cd94c74a9df1a3">A</a>-&gt;getType()-&gt;isSingleValueType() || <a class="code" href="README__ALTIVEC_8txt.html#a015846b6188ce15e08cd94c74a9df1a3">A</a>-&gt;user_empty())</div>
<div class="line"><a name="l00388"></a><span class="lineno">  388</span>&#160;      <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l00389"></a><span class="lineno">  389</span>&#160; </div>
<div class="line"><a name="l00390"></a><span class="lineno">  390</span>&#160;    <span class="comment">// If the argument isn&#39;t overdefined, there&#39;s nothing to do. It should</span></div>
<div class="line"><a name="l00391"></a><span class="lineno">  391</span>&#160;    <span class="comment">// already be constant.</span></div>
<div class="line"><a name="l00392"></a><span class="lineno">  392</span>&#160;    <span class="keywordflow">if</span> (!Solver.<a class="code" href="classllvm_1_1SCCPSolver.html#ab146e74d42b852877cc1e935d808005a">getLatticeValueFor</a>(<a class="code" href="README__ALTIVEC_8txt.html#a015846b6188ce15e08cd94c74a9df1a3">A</a>).<a class="code" href="classllvm_1_1ValueLatticeElement.html#a226c3252bd1261be2ff904697586f6d8">isOverdefined</a>()) {</div>
<div class="line"><a name="l00393"></a><span class="lineno">  393</span>&#160;      <a class="code" href="Debug_8h.html#a08efc68d15935eb8889400a46c3749ba">LLVM_DEBUG</a>(<a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <span class="stringliteral">&quot;FnSpecialization: nothing to do, arg is already &quot;</span></div>
<div class="line"><a name="l00394"></a><span class="lineno">  394</span>&#160;                        &lt;&lt; <span class="stringliteral">&quot;constant?\n&quot;</span>);</div>
<div class="line"><a name="l00395"></a><span class="lineno">  395</span>&#160;      <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l00396"></a><span class="lineno">  396</span>&#160;    }</div>
<div class="line"><a name="l00397"></a><span class="lineno">  397</span>&#160; </div>
<div class="line"><a name="l00398"></a><span class="lineno">  398</span>&#160;    <span class="comment">// Collect the constant values that the argument can take on. If the</span></div>
<div class="line"><a name="l00399"></a><span class="lineno">  399</span>&#160;    <span class="comment">// argument can&#39;t take on any constant values, we aren&#39;t going to</span></div>
<div class="line"><a name="l00400"></a><span class="lineno">  400</span>&#160;    <span class="comment">// specialize the function. While it&#39;s possible to specialize the function</span></div>
<div class="line"><a name="l00401"></a><span class="lineno">  401</span>&#160;    <span class="comment">// based on non-constant arguments, there&#39;s likely not much benefit to</span></div>
<div class="line"><a name="l00402"></a><span class="lineno">  402</span>&#160;    <span class="comment">// constant propagation in doing so.</span></div>
<div class="line"><a name="l00403"></a><span class="lineno">  403</span>&#160;    <span class="comment">//</span></div>
<div class="line"><a name="l00404"></a><span class="lineno">  404</span>&#160;    <span class="comment">// TODO 1: currently it won&#39;t specialize if there are over the threshold of</span></div>
<div class="line"><a name="l00405"></a><span class="lineno">  405</span>&#160;    <span class="comment">// calls using the same argument, e.g foo(a) x 4 and foo(b) x 1, but it</span></div>
<div class="line"><a name="l00406"></a><span class="lineno">  406</span>&#160;    <span class="comment">// might be beneficial to take the occurrences into account in the cost</span></div>
<div class="line"><a name="l00407"></a><span class="lineno">  407</span>&#160;    <span class="comment">// model, so we would need to find the unique constants.</span></div>
<div class="line"><a name="l00408"></a><span class="lineno">  408</span>&#160;    <span class="comment">//</span></div>
<div class="line"><a name="l00409"></a><span class="lineno">  409</span>&#160;    <span class="comment">// TODO 2: this currently does not support constants, i.e. integer ranges.</span></div>
<div class="line"><a name="l00410"></a><span class="lineno">  410</span>&#160;    <span class="comment">//</span></div>
<div class="line"><a name="l00411"></a><span class="lineno">  411</span>&#160;    <a class="code" href="classllvm_1_1SmallVector.html">SmallVector&lt;Constant *, 4&gt;</a> PossibleConstants;</div>
<div class="line"><a name="l00412"></a><span class="lineno">  412</span>&#160;    <span class="keywordtype">bool</span> AllConstant = getPossibleConstants(<a class="code" href="README__ALTIVEC_8txt.html#a015846b6188ce15e08cd94c74a9df1a3">A</a>, PossibleConstants);</div>
<div class="line"><a name="l00413"></a><span class="lineno">  413</span>&#160;    <span class="keywordflow">if</span> (PossibleConstants.empty()) {</div>
<div class="line"><a name="l00414"></a><span class="lineno">  414</span>&#160;      <a class="code" href="Debug_8h.html#a08efc68d15935eb8889400a46c3749ba">LLVM_DEBUG</a>(<a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <span class="stringliteral">&quot;FnSpecialization: no possible constants found\n&quot;</span>);</div>
<div class="line"><a name="l00415"></a><span class="lineno">  415</span>&#160;      <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l00416"></a><span class="lineno">  416</span>&#160;    }</div>
<div class="line"><a name="l00417"></a><span class="lineno">  417</span>&#160;    <span class="keywordflow">if</span> (PossibleConstants.size() &gt; <a class="code" href="FunctionSpecialization_8cpp.html#a67c4f460f43d34e59782530466a2abd3">MaxConstantsThreshold</a>) {</div>
<div class="line"><a name="l00418"></a><span class="lineno">  418</span>&#160;      <a class="code" href="Debug_8h.html#a08efc68d15935eb8889400a46c3749ba">LLVM_DEBUG</a>(<a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <span class="stringliteral">&quot;FnSpecialization: number of constants found exceed &quot;</span></div>
<div class="line"><a name="l00419"></a><span class="lineno">  419</span>&#160;                        &lt;&lt; <span class="stringliteral">&quot;the maximum number of constants threshold.\n&quot;</span>);</div>
<div class="line"><a name="l00420"></a><span class="lineno">  420</span>&#160;      <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l00421"></a><span class="lineno">  421</span>&#160;    }</div>
<div class="line"><a name="l00422"></a><span class="lineno">  422</span>&#160; </div>
<div class="line"><a name="l00423"></a><span class="lineno">  423</span>&#160;    <span class="comment">// Determine if it would be profitable to create a specialization of the</span></div>
<div class="line"><a name="l00424"></a><span class="lineno">  424</span>&#160;    <span class="comment">// function where the argument takes on the given constant value. If so,</span></div>
<div class="line"><a name="l00425"></a><span class="lineno">  425</span>&#160;    <span class="comment">// add the constant to Constants.</span></div>
<div class="line"><a name="l00426"></a><span class="lineno">  426</span>&#160;    <span class="keyword">auto</span> FnSpecCost = getSpecializationCost(<a class="code" href="MD5_8cpp.html#a96d73bbd7af15cb1fc38c3f4a3bd82e9">F</a>);</div>
<div class="line"><a name="l00427"></a><span class="lineno">  427</span>&#160;    <span class="keywordflow">if</span> (!FnSpecCost.isValid()) {</div>
<div class="line"><a name="l00428"></a><span class="lineno">  428</span>&#160;      <a class="code" href="Debug_8h.html#a08efc68d15935eb8889400a46c3749ba">LLVM_DEBUG</a>(<a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <span class="stringliteral">&quot;FnSpecialization: Invalid specialisation cost.\n&quot;</span>);</div>
<div class="line"><a name="l00429"></a><span class="lineno">  429</span>&#160;      <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l00430"></a><span class="lineno">  430</span>&#160;    }</div>
<div class="line"><a name="l00431"></a><span class="lineno">  431</span>&#160; </div>
<div class="line"><a name="l00432"></a><span class="lineno">  432</span>&#160;    <a class="code" href="Debug_8h.html#a08efc68d15935eb8889400a46c3749ba">LLVM_DEBUG</a>(<a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <span class="stringliteral">&quot;FnSpecialization: func specialisation cost: &quot;</span>;</div>
<div class="line"><a name="l00433"></a><span class="lineno">  433</span>&#160;               FnSpecCost.print(<a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>()); <a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <span class="stringliteral">&quot;\n&quot;</span>);</div>
<div class="line"><a name="l00434"></a><span class="lineno">  434</span>&#160; </div>
<div class="line"><a name="l00435"></a><span class="lineno">  435</span>&#160;    <span class="keywordflow">for</span> (<span class="keyword">auto</span> *<a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a> : PossibleConstants) {</div>
<div class="line"><a name="l00436"></a><span class="lineno">  436</span>&#160;      <a class="code" href="Debug_8h.html#a08efc68d15935eb8889400a46c3749ba">LLVM_DEBUG</a>(<a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <span class="stringliteral">&quot;FnSpecialization: Constant: &quot;</span> &lt;&lt; *<a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a> &lt;&lt; <span class="stringliteral">&quot;\n&quot;</span>);</div>
<div class="line"><a name="l00437"></a><span class="lineno">  437</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="FunctionSpecialization_8cpp.html#a1ab61b5210a970e66d3240dfda58ca3a">ForceFunctionSpecialization</a>) {</div>
<div class="line"><a name="l00438"></a><span class="lineno">  438</span>&#160;        <a class="code" href="Debug_8h.html#a08efc68d15935eb8889400a46c3749ba">LLVM_DEBUG</a>(<a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <span class="stringliteral">&quot;FnSpecialization: Forced!\n&quot;</span>);</div>
<div class="line"><a name="l00439"></a><span class="lineno">  439</span>&#160;        <a class="code" href="namespacellvm_1_1dwarf.html#ab4fde659cfd2ad21ef1920dca7f22255">Constants</a>.push_back(<a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a>);</div>
<div class="line"><a name="l00440"></a><span class="lineno">  440</span>&#160;        <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l00441"></a><span class="lineno">  441</span>&#160;      }</div>
<div class="line"><a name="l00442"></a><span class="lineno">  442</span>&#160;      <span class="keywordflow">if</span> (getSpecializationBonus(<a class="code" href="README__ALTIVEC_8txt.html#a015846b6188ce15e08cd94c74a9df1a3">A</a>, <a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a>) &gt; FnSpecCost) {</div>
<div class="line"><a name="l00443"></a><span class="lineno">  443</span>&#160;        <a class="code" href="Debug_8h.html#a08efc68d15935eb8889400a46c3749ba">LLVM_DEBUG</a>(<a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <span class="stringliteral">&quot;FnSpecialization: profitable!\n&quot;</span>);</div>
<div class="line"><a name="l00444"></a><span class="lineno">  444</span>&#160;        <a class="code" href="namespacellvm_1_1dwarf.html#ab4fde659cfd2ad21ef1920dca7f22255">Constants</a>.push_back(<a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a>);</div>
<div class="line"><a name="l00445"></a><span class="lineno">  445</span>&#160;      } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00446"></a><span class="lineno">  446</span>&#160;        <a class="code" href="Debug_8h.html#a08efc68d15935eb8889400a46c3749ba">LLVM_DEBUG</a>(<a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <span class="stringliteral">&quot;FnSpecialization: not profitable\n&quot;</span>);</div>
<div class="line"><a name="l00447"></a><span class="lineno">  447</span>&#160;      }</div>
<div class="line"><a name="l00448"></a><span class="lineno">  448</span>&#160;    }</div>
<div class="line"><a name="l00449"></a><span class="lineno">  449</span>&#160; </div>
<div class="line"><a name="l00450"></a><span class="lineno">  450</span>&#160;    <span class="comment">// None of the constant values the argument can take on were deemed good</span></div>
<div class="line"><a name="l00451"></a><span class="lineno">  451</span>&#160;    <span class="comment">// candidates on which to specialize the function.</span></div>
<div class="line"><a name="l00452"></a><span class="lineno">  452</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="namespacellvm_1_1dwarf.html#ab4fde659cfd2ad21ef1920dca7f22255">Constants</a>.empty())</div>
<div class="line"><a name="l00453"></a><span class="lineno">  453</span>&#160;      <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l00454"></a><span class="lineno">  454</span>&#160; </div>
<div class="line"><a name="l00455"></a><span class="lineno">  455</span>&#160;    <span class="comment">// This will be a partial specialization if some of the constants were</span></div>
<div class="line"><a name="l00456"></a><span class="lineno">  456</span>&#160;    <span class="comment">// rejected due to their profitability.</span></div>
<div class="line"><a name="l00457"></a><span class="lineno">  457</span>&#160;    IsPartial = !AllConstant || PossibleConstants.size() != <a class="code" href="namespacellvm_1_1dwarf.html#ab4fde659cfd2ad21ef1920dca7f22255">Constants</a>.size();</div>
<div class="line"><a name="l00458"></a><span class="lineno">  458</span>&#160; </div>
<div class="line"><a name="l00459"></a><span class="lineno">  459</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l00460"></a><span class="lineno">  460</span>&#160;  }</div>
<div class="line"><a name="l00461"></a><span class="lineno">  461</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l00462"></a><span class="lineno">  462</span>&#160;<span class="comment">  /// Collect in \p Constants all the constant values that argument \p A can</span></div>
<div class="line"><a name="l00463"></a><span class="lineno">  463</span>&#160;<span class="comment">  /// take on.</span></div>
<div class="line"><a name="l00464"></a><span class="lineno">  464</span>&#160;<span class="comment">  ///</span></div>
<div class="line"><a name="l00465"></a><span class="lineno">  465</span>&#160;<span class="comment">  /// \returns true if all of the values the argument can take on are constant</span></div>
<div class="line"><a name="l00466"></a><span class="lineno">  466</span>&#160;<span class="comment">  /// (e.g., the argument&#39;s parent function cannot be called with an</span></div>
<div class="line"><a name="l00467"></a><span class="lineno">  467</span>&#160;<span class="comment">  /// overdefined value).</span></div>
<div class="line"><a name="l00468"></a><span class="lineno">  468</span>&#160;<span class="comment"></span>  <span class="keywordtype">bool</span> getPossibleConstants(<a class="code" href="classllvm_1_1Argument.html">Argument</a> *<a class="code" href="README__ALTIVEC_8txt.html#a015846b6188ce15e08cd94c74a9df1a3">A</a>,</div>
<div class="line"><a name="l00469"></a><span class="lineno">  469</span>&#160;                            <a class="code" href="classllvm_1_1SmallVectorImpl.html">SmallVectorImpl&lt;Constant *&gt;</a> &amp;<a class="code" href="namespacellvm_1_1dwarf.html#ab4fde659cfd2ad21ef1920dca7f22255">Constants</a>) {</div>
<div class="line"><a name="l00470"></a><span class="lineno">  470</span>&#160;    <a class="code" href="classllvm_1_1Function.html">Function</a> *<a class="code" href="MD5_8cpp.html#a96d73bbd7af15cb1fc38c3f4a3bd82e9">F</a> = <a class="code" href="README__ALTIVEC_8txt.html#a015846b6188ce15e08cd94c74a9df1a3">A</a>-&gt;getParent();</div>
<div class="line"><a name="l00471"></a><span class="lineno">  471</span>&#160;    <span class="keywordtype">bool</span> AllConstant = <span class="keyword">true</span>;</div>
<div class="line"><a name="l00472"></a><span class="lineno">  472</span>&#160; </div>
<div class="line"><a name="l00473"></a><span class="lineno">  473</span>&#160;    <span class="comment">// Iterate over all the call sites of the argument&#39;s parent function.</span></div>
<div class="line"><a name="l00474"></a><span class="lineno">  474</span>&#160;    <span class="keywordflow">for</span> (<a class="code" href="classllvm_1_1User.html">User</a> *U : <a class="code" href="MD5_8cpp.html#a96d73bbd7af15cb1fc38c3f4a3bd82e9">F</a>-&gt;users()) {</div>
<div class="line"><a name="l00475"></a><span class="lineno">  475</span>&#160;      <span class="keywordflow">if</span> (!isa&lt;CallInst&gt;(U) &amp;&amp; !isa&lt;InvokeInst&gt;(U))</div>
<div class="line"><a name="l00476"></a><span class="lineno">  476</span>&#160;        <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l00477"></a><span class="lineno">  477</span>&#160;      <span class="keyword">auto</span> &amp;CS = *cast&lt;CallBase&gt;(U);</div>
<div class="line"><a name="l00478"></a><span class="lineno">  478</span>&#160; </div>
<div class="line"><a name="l00479"></a><span class="lineno">  479</span>&#160;      <span class="comment">// If the parent of the call site will never be executed, we don&#39;t need</span></div>
<div class="line"><a name="l00480"></a><span class="lineno">  480</span>&#160;      <span class="comment">// to worry about the passed value.</span></div>
<div class="line"><a name="l00481"></a><span class="lineno">  481</span>&#160;      <span class="keywordflow">if</span> (!Solver.<a class="code" href="classllvm_1_1SCCPSolver.html#ac16a1026117ac160108d8a5bab0ae445">isBlockExecutable</a>(CS.getParent()))</div>
<div class="line"><a name="l00482"></a><span class="lineno">  482</span>&#160;        <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l00483"></a><span class="lineno">  483</span>&#160; </div>
<div class="line"><a name="l00484"></a><span class="lineno">  484</span>&#160;      <span class="keyword">auto</span> *V = CS.getArgOperand(<a class="code" href="README__ALTIVEC_8txt.html#a015846b6188ce15e08cd94c74a9df1a3">A</a>-&gt;getArgNo());</div>
<div class="line"><a name="l00485"></a><span class="lineno">  485</span>&#160;      <span class="comment">// TrackValueOfGlobalVariable only tracks scalar global variables.</span></div>
<div class="line"><a name="l00486"></a><span class="lineno">  486</span>&#160;      <span class="keywordflow">if</span> (<span class="keyword">auto</span> *GV = dyn_cast&lt;GlobalVariable&gt;(V)) {</div>
<div class="line"><a name="l00487"></a><span class="lineno">  487</span>&#160;        <span class="keywordflow">if</span> (!GV-&gt;getValueType()-&gt;isSingleValueType()) {</div>
<div class="line"><a name="l00488"></a><span class="lineno">  488</span>&#160;          <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l00489"></a><span class="lineno">  489</span>&#160;        }</div>
<div class="line"><a name="l00490"></a><span class="lineno">  490</span>&#160;      }</div>
<div class="line"><a name="l00491"></a><span class="lineno">  491</span>&#160; </div>
<div class="line"><a name="l00492"></a><span class="lineno">  492</span>&#160;      <span class="keywordflow">if</span> (isa&lt;Constant&gt;(V) &amp;&amp; (Solver.<a class="code" href="classllvm_1_1SCCPSolver.html#ab146e74d42b852877cc1e935d808005a">getLatticeValueFor</a>(V).<a class="code" href="classllvm_1_1ValueLatticeElement.html#a62d37ceb318e78806df7e0a928b0eb1c">isConstant</a>() ||</div>
<div class="line"><a name="l00493"></a><span class="lineno">  493</span>&#160;                               <a class="code" href="FunctionSpecialization_8cpp.html#aa12ef560d221650c45e0510df3dd35a2">EnableSpecializationForLiteralConstant</a>))</div>
<div class="line"><a name="l00494"></a><span class="lineno">  494</span>&#160;        <a class="code" href="namespacellvm_1_1dwarf.html#ab4fde659cfd2ad21ef1920dca7f22255">Constants</a>.push_back(cast&lt;Constant&gt;(V));</div>
<div class="line"><a name="l00495"></a><span class="lineno">  495</span>&#160;      <span class="keywordflow">else</span></div>
<div class="line"><a name="l00496"></a><span class="lineno">  496</span>&#160;        AllConstant = <span class="keyword">false</span>;</div>
<div class="line"><a name="l00497"></a><span class="lineno">  497</span>&#160;    }</div>
<div class="line"><a name="l00498"></a><span class="lineno">  498</span>&#160; </div>
<div class="line"><a name="l00499"></a><span class="lineno">  499</span>&#160;    <span class="comment">// If the argument can only take on constant values, AllConstant will be</span></div>
<div class="line"><a name="l00500"></a><span class="lineno">  500</span>&#160;    <span class="comment">// true.</span></div>
<div class="line"><a name="l00501"></a><span class="lineno">  501</span>&#160;    <span class="keywordflow">return</span> AllConstant;</div>
<div class="line"><a name="l00502"></a><span class="lineno">  502</span>&#160;  }</div>
<div class="line"><a name="l00503"></a><span class="lineno">  503</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l00504"></a><span class="lineno">  504</span>&#160;<span class="comment">  /// Rewrite calls to function \p F to call function \p Clone instead.</span></div>
<div class="line"><a name="l00505"></a><span class="lineno">  505</span>&#160;<span class="comment">  ///</span></div>
<div class="line"><a name="l00506"></a><span class="lineno">  506</span>&#160;<span class="comment">  /// This function modifies calls to function \p F whose argument at index \p</span></div>
<div class="line"><a name="l00507"></a><span class="lineno">  507</span>&#160;<span class="comment">  /// ArgNo is equal to constant \p C. The calls are rewritten to call function</span></div>
<div class="line"><a name="l00508"></a><span class="lineno">  508</span>&#160;<span class="comment">  /// \p Clone instead.</span></div>
<div class="line"><a name="l00509"></a><span class="lineno">  509</span>&#160;<span class="comment"></span>  <span class="keywordtype">void</span> rewriteCallSites(<a class="code" href="classllvm_1_1Function.html">Function</a> *<a class="code" href="MD5_8cpp.html#a96d73bbd7af15cb1fc38c3f4a3bd82e9">F</a>, <a class="code" href="classllvm_1_1Function.html">Function</a> *Clone, <a class="code" href="classllvm_1_1Argument.html">Argument</a> &amp;<a class="code" href="AMDGPULibCalls_8cpp.html#afecf1cc1292b07f57d343c0f4d682044">Arg</a>,</div>
<div class="line"><a name="l00510"></a><span class="lineno">  510</span>&#160;                        <a class="code" href="classllvm_1_1Constant.html">Constant</a> *<a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a>) {</div>
<div class="line"><a name="l00511"></a><span class="lineno">  511</span>&#160;    <span class="keywordtype">unsigned</span> ArgNo = <a class="code" href="AMDGPULibCalls_8cpp.html#afecf1cc1292b07f57d343c0f4d682044">Arg</a>.getArgNo();</div>
<div class="line"><a name="l00512"></a><span class="lineno">  512</span>&#160;    <a class="code" href="classllvm_1_1SmallVector.html">SmallVector&lt;CallBase *, 4&gt;</a> CallSitesToRewrite;</div>
<div class="line"><a name="l00513"></a><span class="lineno">  513</span>&#160;    <span class="keywordflow">for</span> (<span class="keyword">auto</span> *U : <a class="code" href="MD5_8cpp.html#a96d73bbd7af15cb1fc38c3f4a3bd82e9">F</a>-&gt;users()) {</div>
<div class="line"><a name="l00514"></a><span class="lineno">  514</span>&#160;      <span class="keywordflow">if</span> (!isa&lt;CallInst&gt;(U) &amp;&amp; !isa&lt;InvokeInst&gt;(U))</div>
<div class="line"><a name="l00515"></a><span class="lineno">  515</span>&#160;        <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l00516"></a><span class="lineno">  516</span>&#160;      <span class="keyword">auto</span> &amp;CS = *cast&lt;CallBase&gt;(U);</div>
<div class="line"><a name="l00517"></a><span class="lineno">  517</span>&#160;      <span class="keywordflow">if</span> (!CS.getCalledFunction() || CS.getCalledFunction() != <a class="code" href="MD5_8cpp.html#a96d73bbd7af15cb1fc38c3f4a3bd82e9">F</a>)</div>
<div class="line"><a name="l00518"></a><span class="lineno">  518</span>&#160;        <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l00519"></a><span class="lineno">  519</span>&#160;      CallSitesToRewrite.push_back(&amp;CS);</div>
<div class="line"><a name="l00520"></a><span class="lineno">  520</span>&#160;    }</div>
<div class="line"><a name="l00521"></a><span class="lineno">  521</span>&#160;    <span class="keywordflow">for</span> (<span class="keyword">auto</span> *CS : CallSitesToRewrite) {</div>
<div class="line"><a name="l00522"></a><span class="lineno">  522</span>&#160;      <span class="keywordflow">if</span> ((CS-&gt;getFunction() == Clone &amp;&amp; CS-&gt;getArgOperand(ArgNo) == &amp;<a class="code" href="AMDGPULibCalls_8cpp.html#afecf1cc1292b07f57d343c0f4d682044">Arg</a>) ||</div>
<div class="line"><a name="l00523"></a><span class="lineno">  523</span>&#160;          CS-&gt;getArgOperand(ArgNo) == <a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a>) {</div>
<div class="line"><a name="l00524"></a><span class="lineno">  524</span>&#160;        CS-&gt;setCalledFunction(Clone);</div>
<div class="line"><a name="l00525"></a><span class="lineno">  525</span>&#160;        Solver.<a class="code" href="classllvm_1_1SCCPSolver.html#af88f6c356f4e17eaebfb81ac86426758">markOverdefined</a>(CS);</div>
<div class="line"><a name="l00526"></a><span class="lineno">  526</span>&#160;      }</div>
<div class="line"><a name="l00527"></a><span class="lineno">  527</span>&#160;    }</div>
<div class="line"><a name="l00528"></a><span class="lineno">  528</span>&#160;  }</div>
<div class="line"><a name="l00529"></a><span class="lineno">  529</span>&#160;};</div>
<div class="line"><a name="l00530"></a><span class="lineno">  530</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l00531"></a><span class="lineno">  531</span>&#160;<span class="comment">/// Function to clean up the left over intrinsics from SCCP util.</span></div>
<div class="line"><a name="l00532"></a><span class="lineno"><a class="line" href="FunctionSpecialization_8cpp.html#aa0e59a7001c625d9b5f5ead1df843b7c">  532</a></span>&#160;<span class="comment"></span><span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code" href="FunctionSpecialization_8cpp.html#aa0e59a7001c625d9b5f5ead1df843b7c">cleanup</a>(<a class="code" href="classllvm_1_1Module.html">Module</a> &amp;M) {</div>
<div class="line"><a name="l00533"></a><span class="lineno">  533</span>&#160;  <span class="keywordflow">for</span> (<a class="code" href="classllvm_1_1Function.html">Function</a> &amp;<a class="code" href="MD5_8cpp.html#a96d73bbd7af15cb1fc38c3f4a3bd82e9">F</a> : <a class="code" href="lib_2Target_2X86_2README_8txt.html#ac88fe1d3a61b056a4f64fbbb156a62ff">M</a>) {</div>
<div class="line"><a name="l00534"></a><span class="lineno">  534</span>&#160;    <span class="keywordflow">for</span> (<a class="code" href="classllvm_1_1BasicBlock.html">BasicBlock</a> &amp;<a class="code" href="lib_2CodeGen_2README_8txt.html#a09776db24cf586ec9f1e18f3bae14099">BB</a> : <a class="code" href="MD5_8cpp.html#a96d73bbd7af15cb1fc38c3f4a3bd82e9">F</a>) {</div>
<div class="line"><a name="l00535"></a><span class="lineno">  535</span>&#160;      <span class="keywordflow">for</span> (<a class="code" href="classllvm_1_1BasicBlock.html#a98c0a84a5dfa8bce341c829709f171e5">BasicBlock::iterator</a> BI = <a class="code" href="lib_2CodeGen_2README_8txt.html#a09776db24cf586ec9f1e18f3bae14099">BB</a>.begin(), <a class="code" href="BuiltinGCs_8cpp.html#a6742d2e0a668baf1196ec69e158d5f15">E</a> = <a class="code" href="lib_2CodeGen_2README_8txt.html#a09776db24cf586ec9f1e18f3bae14099">BB</a>.end(); BI != <a class="code" href="BuiltinGCs_8cpp.html#a6742d2e0a668baf1196ec69e158d5f15">E</a>;) {</div>
<div class="line"><a name="l00536"></a><span class="lineno">  536</span>&#160;        <a class="code" href="classllvm_1_1Instruction.html">Instruction</a> *Inst = &amp;*BI++;</div>
<div class="line"><a name="l00537"></a><span class="lineno">  537</span>&#160;        <span class="keywordflow">if</span> (<span class="keyword">auto</span> *II = dyn_cast&lt;IntrinsicInst&gt;(Inst)) {</div>
<div class="line"><a name="l00538"></a><span class="lineno">  538</span>&#160;          <span class="keywordflow">if</span> (II-&gt;getIntrinsicID() == Intrinsic::ssa_copy) {</div>
<div class="line"><a name="l00539"></a><span class="lineno">  539</span>&#160;            <a class="code" href="classllvm_1_1Value.html">Value</a> *<a class="code" href="namespacellvm_1_1AMDGPU_1_1SendMsg.html#a8594419a4ddfad2c9a79279c490e466d">Op</a> = II-&gt;getOperand(0);</div>
<div class="line"><a name="l00540"></a><span class="lineno">  540</span>&#160;            Inst-&gt;<a class="code" href="classllvm_1_1Value.html#a3ab5fc45117b450e8bb04e564cb6e5f2">replaceAllUsesWith</a>(<a class="code" href="namespacellvm_1_1AMDGPU_1_1SendMsg.html#a8594419a4ddfad2c9a79279c490e466d">Op</a>);</div>
<div class="line"><a name="l00541"></a><span class="lineno">  541</span>&#160;            Inst-&gt;<a class="code" href="classllvm_1_1Instruction.html#ae6b978645b8ac72d1a35e1298ffdd4f0">eraseFromParent</a>();</div>
<div class="line"><a name="l00542"></a><span class="lineno">  542</span>&#160;          }</div>
<div class="line"><a name="l00543"></a><span class="lineno">  543</span>&#160;        }</div>
<div class="line"><a name="l00544"></a><span class="lineno">  544</span>&#160;      }</div>
<div class="line"><a name="l00545"></a><span class="lineno">  545</span>&#160;    }</div>
<div class="line"><a name="l00546"></a><span class="lineno">  546</span>&#160;  }</div>
<div class="line"><a name="l00547"></a><span class="lineno">  547</span>&#160;}</div>
<div class="line"><a name="l00548"></a><span class="lineno">  548</span>&#160; </div>
<div class="line"><a name="l00549"></a><span class="lineno"><a class="line" href="namespacellvm.html#a1e0cfa592cb8638c1b3e19b47264adac">  549</a></span>&#160;<span class="keywordtype">bool</span> <a class="code" href="namespacellvm.html#a1e0cfa592cb8638c1b3e19b47264adac">llvm::runFunctionSpecialization</a>(</div>
<div class="line"><a name="l00550"></a><span class="lineno">  550</span>&#160;    <a class="code" href="classllvm_1_1Module.html">Module</a> &amp;M, <span class="keyword">const</span> <a class="code" href="classllvm_1_1DataLayout.html">DataLayout</a> &amp;<a class="code" href="AArch64SLSHardening_8cpp.html#ad467c4ab9119043f9b7750ab986be61a">DL</a>,</div>
<div class="line"><a name="l00551"></a><span class="lineno">  551</span>&#160;    <a class="code" href="MemDepPrinter_8cpp.html#a470d8721ad7c3b718e9daeabdaeb4700">std::function</a>&lt;<a class="code" href="classllvm_1_1TargetLibraryInfo.html">TargetLibraryInfo</a> &amp;(<a class="code" href="classllvm_1_1Function.html">Function</a> &amp;)&gt; GetTLI,</div>
<div class="line"><a name="l00552"></a><span class="lineno">  552</span>&#160;    <a class="code" href="MemDepPrinter_8cpp.html#a470d8721ad7c3b718e9daeabdaeb4700">std::function</a>&lt;<a class="code" href="classllvm_1_1TargetTransformInfo.html">TargetTransformInfo</a> &amp;(<a class="code" href="classllvm_1_1Function.html">Function</a> &amp;)&gt; GetTTI,</div>
<div class="line"><a name="l00553"></a><span class="lineno">  553</span>&#160;    <a class="code" href="MemDepPrinter_8cpp.html#a470d8721ad7c3b718e9daeabdaeb4700">std::function</a>&lt;<a class="code" href="classllvm_1_1AssumptionCache.html">AssumptionCache</a> &amp;(<a class="code" href="classllvm_1_1Function.html">Function</a> &amp;)&gt; GetAC,</div>
<div class="line"><a name="l00554"></a><span class="lineno">  554</span>&#160;    <a class="code" href="classllvm_1_1function__ref.html">function_ref</a>&lt;<a class="code" href="structllvm_1_1AnalysisResultsForFn.html">AnalysisResultsForFn</a>(<a class="code" href="classllvm_1_1Function.html">Function</a> &amp;)&gt; GetAnalysis) {</div>
<div class="line"><a name="l00555"></a><span class="lineno">  555</span>&#160;  <a class="code" href="classllvm_1_1SCCPSolver.html">SCCPSolver</a> Solver(<a class="code" href="AArch64SLSHardening_8cpp.html#ad467c4ab9119043f9b7750ab986be61a">DL</a>, GetTLI, <a class="code" href="lib_2Target_2X86_2README_8txt.html#ac88fe1d3a61b056a4f64fbbb156a62ff">M</a>.getContext());</div>
<div class="line"><a name="l00556"></a><span class="lineno">  556</span>&#160;  <a class="code" href="classFunctionSpecializer.html">FunctionSpecializer</a> <a class="code" href="namespacellvm_1_1X86AS.html#a1c7a4fecbf88a6033f2e1fa667ee284aa5b3a782ccae295a254e2794ad30ad07f">FS</a>(Solver, GetAC, GetTTI, GetTLI);</div>
<div class="line"><a name="l00557"></a><span class="lineno">  557</span>&#160;  <span class="keywordtype">bool</span> Changed = <span class="keyword">false</span>;</div>
<div class="line"><a name="l00558"></a><span class="lineno">  558</span>&#160; </div>
<div class="line"><a name="l00559"></a><span class="lineno">  559</span>&#160;  <span class="comment">// Loop over all functions, marking arguments to those with their addresses</span></div>
<div class="line"><a name="l00560"></a><span class="lineno">  560</span>&#160;  <span class="comment">// taken or that are external as overdefined.</span></div>
<div class="line"><a name="l00561"></a><span class="lineno">  561</span>&#160;  <span class="keywordflow">for</span> (<a class="code" href="classllvm_1_1Function.html">Function</a> &amp;<a class="code" href="MD5_8cpp.html#a96d73bbd7af15cb1fc38c3f4a3bd82e9">F</a> : <a class="code" href="lib_2Target_2X86_2README_8txt.html#ac88fe1d3a61b056a4f64fbbb156a62ff">M</a>) {</div>
<div class="line"><a name="l00562"></a><span class="lineno">  562</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="MD5_8cpp.html#a96d73bbd7af15cb1fc38c3f4a3bd82e9">F</a>.isDeclaration())</div>
<div class="line"><a name="l00563"></a><span class="lineno">  563</span>&#160;      <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l00564"></a><span class="lineno">  564</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="MD5_8cpp.html#a96d73bbd7af15cb1fc38c3f4a3bd82e9">F</a>.hasFnAttribute(Attribute::NoDuplicate))</div>
<div class="line"><a name="l00565"></a><span class="lineno">  565</span>&#160;      <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l00566"></a><span class="lineno">  566</span>&#160; </div>
<div class="line"><a name="l00567"></a><span class="lineno">  567</span>&#160;    <a class="code" href="Debug_8h.html#a08efc68d15935eb8889400a46c3749ba">LLVM_DEBUG</a>(<a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <span class="stringliteral">&quot;\nFnSpecialization: Analysing decl: &quot;</span> &lt;&lt; <a class="code" href="MD5_8cpp.html#a96d73bbd7af15cb1fc38c3f4a3bd82e9">F</a>.getName()</div>
<div class="line"><a name="l00568"></a><span class="lineno">  568</span>&#160;                      &lt;&lt; <span class="stringliteral">&quot;\n&quot;</span>);</div>
<div class="line"><a name="l00569"></a><span class="lineno">  569</span>&#160;    Solver.<a class="code" href="classllvm_1_1SCCPSolver.html#a8e19cb85e1c833bcad589b4a4ea74501">addAnalysis</a>(<a class="code" href="MD5_8cpp.html#a96d73bbd7af15cb1fc38c3f4a3bd82e9">F</a>, GetAnalysis(<a class="code" href="MD5_8cpp.html#a96d73bbd7af15cb1fc38c3f4a3bd82e9">F</a>));</div>
<div class="line"><a name="l00570"></a><span class="lineno">  570</span>&#160; </div>
<div class="line"><a name="l00571"></a><span class="lineno">  571</span>&#160;    <span class="comment">// Determine if we can track the function&#39;s arguments. If so, add the</span></div>
<div class="line"><a name="l00572"></a><span class="lineno">  572</span>&#160;    <span class="comment">// function to the solver&#39;s set of argument-tracked functions.</span></div>
<div class="line"><a name="l00573"></a><span class="lineno">  573</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="namespacellvm.html#af1d3deadf8d348b2329f4e7fa5386e5b">canTrackArgumentsInterprocedurally</a>(&amp;<a class="code" href="MD5_8cpp.html#a96d73bbd7af15cb1fc38c3f4a3bd82e9">F</a>)) {</div>
<div class="line"><a name="l00574"></a><span class="lineno">  574</span>&#160;      <a class="code" href="Debug_8h.html#a08efc68d15935eb8889400a46c3749ba">LLVM_DEBUG</a>(<a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <span class="stringliteral">&quot;FnSpecialization: Can track arguments\n&quot;</span>);</div>
<div class="line"><a name="l00575"></a><span class="lineno">  575</span>&#160;      Solver.<a class="code" href="classllvm_1_1SCCPSolver.html#a89e13f6c5a2a78ec3b68dad32a2b6b5e">addArgumentTrackedFunction</a>(&amp;<a class="code" href="MD5_8cpp.html#a96d73bbd7af15cb1fc38c3f4a3bd82e9">F</a>);</div>
<div class="line"><a name="l00576"></a><span class="lineno">  576</span>&#160;      <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l00577"></a><span class="lineno">  577</span>&#160;    } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00578"></a><span class="lineno">  578</span>&#160;      <a class="code" href="Debug_8h.html#a08efc68d15935eb8889400a46c3749ba">LLVM_DEBUG</a>(<a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <span class="stringliteral">&quot;FnSpecialization: Can&#39;t track arguments!\n&quot;</span></div>
<div class="line"><a name="l00579"></a><span class="lineno">  579</span>&#160;                        &lt;&lt; <span class="stringliteral">&quot;FnSpecialization: Doesn&#39;t have local linkage, or &quot;</span></div>
<div class="line"><a name="l00580"></a><span class="lineno">  580</span>&#160;                        &lt;&lt; <span class="stringliteral">&quot;has its address taken\n&quot;</span>);</div>
<div class="line"><a name="l00581"></a><span class="lineno">  581</span>&#160;    }</div>
<div class="line"><a name="l00582"></a><span class="lineno">  582</span>&#160; </div>
<div class="line"><a name="l00583"></a><span class="lineno">  583</span>&#160;    <span class="comment">// Assume the function is called.</span></div>
<div class="line"><a name="l00584"></a><span class="lineno">  584</span>&#160;    Solver.<a class="code" href="classllvm_1_1SCCPSolver.html#acb2fa77f7d65438220a9fef42964d284">markBlockExecutable</a>(&amp;<a class="code" href="MD5_8cpp.html#a96d73bbd7af15cb1fc38c3f4a3bd82e9">F</a>.front());</div>
<div class="line"><a name="l00585"></a><span class="lineno">  585</span>&#160; </div>
<div class="line"><a name="l00586"></a><span class="lineno">  586</span>&#160;    <span class="comment">// Assume nothing about the incoming arguments.</span></div>
<div class="line"><a name="l00587"></a><span class="lineno">  587</span>&#160;    <span class="keywordflow">for</span> (<a class="code" href="classllvm_1_1Argument.html">Argument</a> &amp;AI : <a class="code" href="MD5_8cpp.html#a96d73bbd7af15cb1fc38c3f4a3bd82e9">F</a>.args())</div>
<div class="line"><a name="l00588"></a><span class="lineno">  588</span>&#160;      Solver.<a class="code" href="classllvm_1_1SCCPSolver.html#af88f6c356f4e17eaebfb81ac86426758">markOverdefined</a>(&amp;AI);</div>
<div class="line"><a name="l00589"></a><span class="lineno">  589</span>&#160;  }</div>
<div class="line"><a name="l00590"></a><span class="lineno">  590</span>&#160; </div>
<div class="line"><a name="l00591"></a><span class="lineno">  591</span>&#160;  <span class="comment">// Determine if we can track any of the module&#39;s global variables. If so, add</span></div>
<div class="line"><a name="l00592"></a><span class="lineno">  592</span>&#160;  <span class="comment">// the global variables we can track to the solver&#39;s set of tracked global</span></div>
<div class="line"><a name="l00593"></a><span class="lineno">  593</span>&#160;  <span class="comment">// variables.</span></div>
<div class="line"><a name="l00594"></a><span class="lineno">  594</span>&#160;  <span class="keywordflow">for</span> (<a class="code" href="classllvm_1_1GlobalVariable.html">GlobalVariable</a> &amp;<a class="code" href="RDFGraph_8cpp.html#af153ca0eadca8bc464492b7aba7feb00">G</a> : <a class="code" href="lib_2Target_2X86_2README_8txt.html#ac88fe1d3a61b056a4f64fbbb156a62ff">M</a>.globals()) {</div>
<div class="line"><a name="l00595"></a><span class="lineno">  595</span>&#160;    <a class="code" href="RDFGraph_8cpp.html#af153ca0eadca8bc464492b7aba7feb00">G</a>.removeDeadConstantUsers();</div>
<div class="line"><a name="l00596"></a><span class="lineno">  596</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="namespacellvm.html#a7414a7c636bc5a30b0e8478019a1bcd4">canTrackGlobalVariableInterprocedurally</a>(&amp;<a class="code" href="RDFGraph_8cpp.html#af153ca0eadca8bc464492b7aba7feb00">G</a>))</div>
<div class="line"><a name="l00597"></a><span class="lineno">  597</span>&#160;      Solver.<a class="code" href="classllvm_1_1SCCPSolver.html#a199003a361f6d87612ab03c249ab04c6">trackValueOfGlobalVariable</a>(&amp;<a class="code" href="RDFGraph_8cpp.html#af153ca0eadca8bc464492b7aba7feb00">G</a>);</div>
<div class="line"><a name="l00598"></a><span class="lineno">  598</span>&#160;  }</div>
<div class="line"><a name="l00599"></a><span class="lineno">  599</span>&#160; </div>
<div class="line"><a name="l00600"></a><span class="lineno">  600</span>&#160;  <span class="comment">// Solve for constants.</span></div>
<div class="line"><a name="l00601"></a><span class="lineno">  601</span>&#160;  <span class="keyword">auto</span> RunSCCPSolver = [&amp;](<span class="keyword">auto</span> &amp;WorkList) {</div>
<div class="line"><a name="l00602"></a><span class="lineno">  602</span>&#160;    <span class="keywordtype">bool</span> ResolvedUndefs = <span class="keyword">true</span>;</div>
<div class="line"><a name="l00603"></a><span class="lineno">  603</span>&#160; </div>
<div class="line"><a name="l00604"></a><span class="lineno">  604</span>&#160;    <span class="keywordflow">while</span> (ResolvedUndefs) {</div>
<div class="line"><a name="l00605"></a><span class="lineno">  605</span>&#160;      <a class="code" href="Debug_8h.html#a08efc68d15935eb8889400a46c3749ba">LLVM_DEBUG</a>(<a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <span class="stringliteral">&quot;FnSpecialization: Running solver\n&quot;</span>);</div>
<div class="line"><a name="l00606"></a><span class="lineno">  606</span>&#160;      Solver.<a class="code" href="classllvm_1_1SCCPSolver.html#a2d6a1ff9823ca3ddb89d80fe379603ee">solve</a>();</div>
<div class="line"><a name="l00607"></a><span class="lineno">  607</span>&#160;      <a class="code" href="Debug_8h.html#a08efc68d15935eb8889400a46c3749ba">LLVM_DEBUG</a>(<a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <span class="stringliteral">&quot;FnSpecialization: Resolving undefs\n&quot;</span>);</div>
<div class="line"><a name="l00608"></a><span class="lineno">  608</span>&#160;      ResolvedUndefs = <span class="keyword">false</span>;</div>
<div class="line"><a name="l00609"></a><span class="lineno">  609</span>&#160;      <span class="keywordflow">for</span> (<a class="code" href="classllvm_1_1Function.html">Function</a> *<a class="code" href="MD5_8cpp.html#a96d73bbd7af15cb1fc38c3f4a3bd82e9">F</a> : WorkList)</div>
<div class="line"><a name="l00610"></a><span class="lineno">  610</span>&#160;        <span class="keywordflow">if</span> (Solver.<a class="code" href="classllvm_1_1SCCPSolver.html#a814c9ef427065262b0ff3c0dc3d9f19d">resolvedUndefsIn</a>(*<a class="code" href="MD5_8cpp.html#a96d73bbd7af15cb1fc38c3f4a3bd82e9">F</a>))</div>
<div class="line"><a name="l00611"></a><span class="lineno">  611</span>&#160;          ResolvedUndefs = <span class="keyword">true</span>;</div>
<div class="line"><a name="l00612"></a><span class="lineno">  612</span>&#160;    }</div>
<div class="line"><a name="l00613"></a><span class="lineno">  613</span>&#160; </div>
<div class="line"><a name="l00614"></a><span class="lineno">  614</span>&#160;    <span class="keywordflow">for</span> (<span class="keyword">auto</span> *<a class="code" href="MD5_8cpp.html#a96d73bbd7af15cb1fc38c3f4a3bd82e9">F</a> : WorkList) {</div>
<div class="line"><a name="l00615"></a><span class="lineno">  615</span>&#160;      <span class="keywordflow">for</span> (<a class="code" href="classllvm_1_1BasicBlock.html">BasicBlock</a> &amp;<a class="code" href="lib_2CodeGen_2README_8txt.html#a09776db24cf586ec9f1e18f3bae14099">BB</a> : *<a class="code" href="MD5_8cpp.html#a96d73bbd7af15cb1fc38c3f4a3bd82e9">F</a>) {</div>
<div class="line"><a name="l00616"></a><span class="lineno">  616</span>&#160;        <span class="keywordflow">if</span> (!Solver.<a class="code" href="classllvm_1_1SCCPSolver.html#ac16a1026117ac160108d8a5bab0ae445">isBlockExecutable</a>(&amp;<a class="code" href="lib_2CodeGen_2README_8txt.html#a09776db24cf586ec9f1e18f3bae14099">BB</a>))</div>
<div class="line"><a name="l00617"></a><span class="lineno">  617</span>&#160;          <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l00618"></a><span class="lineno">  618</span>&#160;        <span class="keywordflow">for</span> (<span class="keyword">auto</span> &amp;<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a> : <a class="code" href="namespacellvm.html#a8154638df88e4eaa568b67b23d463dac">make_early_inc_range</a>(<a class="code" href="lib_2CodeGen_2README_8txt.html#a09776db24cf586ec9f1e18f3bae14099">BB</a>))</div>
<div class="line"><a name="l00619"></a><span class="lineno">  619</span>&#160;          <a class="code" href="namespacellvm_1_1X86AS.html#a1c7a4fecbf88a6033f2e1fa667ee284aa5b3a782ccae295a254e2794ad30ad07f">FS</a>.tryToReplaceWithConstant(&amp;<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>);</div>
<div class="line"><a name="l00620"></a><span class="lineno">  620</span>&#160;      }</div>
<div class="line"><a name="l00621"></a><span class="lineno">  621</span>&#160;    }</div>
<div class="line"><a name="l00622"></a><span class="lineno">  622</span>&#160;  };</div>
<div class="line"><a name="l00623"></a><span class="lineno">  623</span>&#160; </div>
<div class="line"><a name="l00624"></a><span class="lineno">  624</span>&#160;  <span class="keyword">auto</span> &amp;TrackedFuncs = Solver.<a class="code" href="classllvm_1_1SCCPSolver.html#af735c79e20ba05ef3be279da333fc927">getArgumentTrackedFunctions</a>();</div>
<div class="line"><a name="l00625"></a><span class="lineno">  625</span>&#160;  <a class="code" href="classllvm_1_1SmallVector.html">SmallVector&lt;Function *, 16&gt;</a> FuncDecls(TrackedFuncs.begin(),</div>
<div class="line"><a name="l00626"></a><span class="lineno">  626</span>&#160;                                        TrackedFuncs.end());</div>
<div class="line"><a name="l00627"></a><span class="lineno">  627</span>&#160;<span class="preprocessor">#ifndef NDEBUG</span></div>
<div class="line"><a name="l00628"></a><span class="lineno">  628</span>&#160;  <a class="code" href="Debug_8h.html#a08efc68d15935eb8889400a46c3749ba">LLVM_DEBUG</a>(<a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <span class="stringliteral">&quot;FnSpecialization: Worklist fn decls:\n&quot;</span>);</div>
<div class="line"><a name="l00629"></a><span class="lineno">  629</span>&#160;  <span class="keywordflow">for</span> (<span class="keyword">auto</span> *<a class="code" href="MD5_8cpp.html#a96d73bbd7af15cb1fc38c3f4a3bd82e9">F</a> : FuncDecls)</div>
<div class="line"><a name="l00630"></a><span class="lineno">  630</span>&#160;    <a class="code" href="Debug_8h.html#a08efc68d15935eb8889400a46c3749ba">LLVM_DEBUG</a>(<a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <span class="stringliteral">&quot;FnSpecialization: *) &quot;</span> &lt;&lt; <a class="code" href="MD5_8cpp.html#a96d73bbd7af15cb1fc38c3f4a3bd82e9">F</a>-&gt;getName() &lt;&lt; <span class="stringliteral">&quot;\n&quot;</span>);</div>
<div class="line"><a name="l00631"></a><span class="lineno">  631</span>&#160;<span class="preprocessor">#endif</span></div>
<div class="line"><a name="l00632"></a><span class="lineno">  632</span>&#160; </div>
<div class="line"><a name="l00633"></a><span class="lineno">  633</span>&#160;  <span class="comment">// Initially resolve the constants in all the argument tracked functions.</span></div>
<div class="line"><a name="l00634"></a><span class="lineno">  634</span>&#160;  RunSCCPSolver(FuncDecls);</div>
<div class="line"><a name="l00635"></a><span class="lineno">  635</span>&#160; </div>
<div class="line"><a name="l00636"></a><span class="lineno">  636</span>&#160;  <a class="code" href="classllvm_1_1SmallVector.html">SmallVector&lt;Function *, 2&gt;</a> CurrentSpecializations;</div>
<div class="line"><a name="l00637"></a><span class="lineno">  637</span>&#160;  <span class="keywordtype">unsigned</span> <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a> = 0;</div>
<div class="line"><a name="l00638"></a><span class="lineno">  638</span>&#160;  <span class="keywordflow">while</span> (<a class="code" href="FunctionSpecialization_8cpp.html#aeaef9f460c3e938ea7cb648291db4f1e">FuncSpecializationMaxIters</a> != <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>++ &amp;&amp;</div>
<div class="line"><a name="l00639"></a><span class="lineno">  639</span>&#160;         <a class="code" href="namespacellvm_1_1X86AS.html#a1c7a4fecbf88a6033f2e1fa667ee284aa5b3a782ccae295a254e2794ad30ad07f">FS</a>.specializeFunctions(FuncDecls, CurrentSpecializations)) {</div>
<div class="line"><a name="l00640"></a><span class="lineno">  640</span>&#160;    <span class="comment">// TODO: run the solver here for the specialized functions only if we want</span></div>
<div class="line"><a name="l00641"></a><span class="lineno">  641</span>&#160;    <span class="comment">// to specialize recursively.</span></div>
<div class="line"><a name="l00642"></a><span class="lineno">  642</span>&#160; </div>
<div class="line"><a name="l00643"></a><span class="lineno">  643</span>&#160;    CurrentSpecializations.<a class="code" href="classllvm_1_1SmallVectorImpl.html#aac0ea55010b7b1a301e65a0baea057aa">clear</a>();</div>
<div class="line"><a name="l00644"></a><span class="lineno">  644</span>&#160;    Changed = <span class="keyword">true</span>;</div>
<div class="line"><a name="l00645"></a><span class="lineno">  645</span>&#160;  }</div>
<div class="line"><a name="l00646"></a><span class="lineno">  646</span>&#160; </div>
<div class="line"><a name="l00647"></a><span class="lineno">  647</span>&#160;  <span class="comment">// Clean up the IR by removing ssa_copy intrinsics.</span></div>
<div class="line"><a name="l00648"></a><span class="lineno">  648</span>&#160;  <a class="code" href="FunctionSpecialization_8cpp.html#aa0e59a7001c625d9b5f5ead1df843b7c">cleanup</a>(<a class="code" href="lib_2Target_2X86_2README_8txt.html#ac88fe1d3a61b056a4f64fbbb156a62ff">M</a>);</div>
<div class="line"><a name="l00649"></a><span class="lineno">  649</span>&#160;  <span class="keywordflow">return</span> Changed;</div>
<div class="line"><a name="l00650"></a><span class="lineno">  650</span>&#160;}</div>
</div><!-- fragment --></div><!-- contents -->
<div class="ttc" id="aclassllvm_1_1InstructionCost_html"><div class="ttname"><a href="classllvm_1_1InstructionCost.html">llvm::InstructionCost</a></div><div class="ttdef"><b>Definition:</b> <a href="InstructionCost_8h_source.html#l00029">InstructionCost.h:29</a></div></div>
<div class="ttc" id="aclassllvm_1_1InlineCost_html_ad166c05849a74acb5e56415f7533e8ad"><div class="ttname"><a href="classllvm_1_1InlineCost.html#ad166c05849a74acb5e56415f7533e8ad">llvm::InlineCost::isAlways</a></div><div class="ttdeci">bool isAlways() const</div><div class="ttdef"><b>Definition:</b> <a href="InlineCost_8h_source.html#l00124">InlineCost.h:124</a></div></div>
<div class="ttc" id="aclassllvm_1_1Argument_html"><div class="ttname"><a href="classllvm_1_1Argument.html">llvm::Argument</a></div><div class="ttdoc">This class represents an incoming formal argument to a Function.</div><div class="ttdef"><b>Definition:</b> <a href="Argument_8h_source.html#l00029">Argument.h:29</a></div></div>
<div class="ttc" id="aAssumptionCache_8h_html"><div class="ttname"><a href="AssumptionCache_8h.html">AssumptionCache.h</a></div></div>
<div class="ttc" id="aclassllvm_1_1ValueLatticeElement_html_a62d37ceb318e78806df7e0a928b0eb1c"><div class="ttname"><a href="classllvm_1_1ValueLatticeElement.html#a62d37ceb318e78806df7e0a928b0eb1c">llvm::ValueLatticeElement::isConstant</a></div><div class="ttdeci">bool isConstant() const</div><div class="ttdef"><b>Definition:</b> <a href="ValueLattice_8h_source.html#l00241">ValueLattice.h:241</a></div></div>
<div class="ttc" id="anamespacellvm_html"><div class="ttname"><a href="namespacellvm.html">llvm</a></div><div class="ttdoc">---------------------— PointerInfo ------------------------------------—</div><div class="ttdef"><b>Definition:</b> <a href="AllocatorList_8h_source.html#l00023">AllocatorList.h:23</a></div></div>
<div class="ttc" id="anamespacellvm_1_1dwarf_html_ab4fde659cfd2ad21ef1920dca7f22255"><div class="ttname"><a href="namespacellvm_1_1dwarf.html#ab4fde659cfd2ad21ef1920dca7f22255">llvm::dwarf::Constants</a></div><div class="ttdeci">Constants</div><div class="ttdef"><b>Definition:</b> <a href="Dwarf_8h_source.html#l00427">Dwarf.h:427</a></div></div>
<div class="ttc" id="alib_2Target_2X86_2README_8txt_html_ac88fe1d3a61b056a4f64fbbb156a62ff"><div class="ttname"><a href="lib_2Target_2X86_2README_8txt.html#ac88fe1d3a61b056a4f64fbbb156a62ff">M</a></div><div class="ttdeci">We currently emits eax Perhaps this is what we really should generate is Is imull three or four cycles eax eax The current instruction priority is based on pattern complexity The former is more complex because it folds a load so the latter will not be emitted Perhaps we should use AddedComplexity to give LEA32r a higher priority We should always try to match LEA first since the LEA matching code does some estimate to determine whether the match is profitable if we care more about code then imull is better It s two bytes shorter than movl leal On a Pentium M</div><div class="ttdef"><b>Definition:</b> <a href="lib_2Target_2X86_2README_8txt_source.html#l00252">README.txt:252</a></div></div>
<div class="ttc" id="aclassllvm_1_1DataLayout_html"><div class="ttname"><a href="classllvm_1_1DataLayout.html">llvm::DataLayout</a></div><div class="ttdoc">A parsed version of the target data layout string in and methods for querying it.</div><div class="ttdef"><b>Definition:</b> <a href="DataLayout_8h_source.html#l00112">DataLayout.h:112</a></div></div>
<div class="ttc" id="aclassllvm_1_1BasicBlock_html_a98c0a84a5dfa8bce341c829709f171e5"><div class="ttname"><a href="classllvm_1_1BasicBlock.html#a98c0a84a5dfa8bce341c829709f171e5">llvm::BasicBlock::iterator</a></div><div class="ttdeci">InstListType::iterator iterator</div><div class="ttdoc">Instruction iterators...</div><div class="ttdef"><b>Definition:</b> <a href="BasicBlock_8h_source.html#l00090">BasicBlock.h:90</a></div></div>
<div class="ttc" id="astructllvm_1_1AnalysisResultsForFn_html"><div class="ttname"><a href="structllvm_1_1AnalysisResultsForFn.html">llvm::AnalysisResultsForFn</a></div><div class="ttdoc">Helper struct for bundling up the analysis results per function for IPSCCP.</div><div class="ttdef"><b>Definition:</b> <a href="SCCPSolver_8h_source.html#l00031">SCCPSolver.h:31</a></div></div>
<div class="ttc" id="aclassllvm_1_1Function_html"><div class="ttname"><a href="classllvm_1_1Function.html">llvm::Function</a></div><div class="ttdef"><b>Definition:</b> <a href="Function_8h_source.html#l00061">Function.h:62</a></div></div>
<div class="ttc" id="aclassllvm_1_1SmallVector_html"><div class="ttname"><a href="classllvm_1_1SmallVector.html">llvm::SmallVector</a></div><div class="ttdoc">This is a 'vector' (really, a variable-sized array), optimized for the case when the array is small.</div><div class="ttdef"><b>Definition:</b> <a href="SmallVector_8h_source.html#l01168">SmallVector.h:1169</a></div></div>
<div class="ttc" id="aStatistic_8h_html"><div class="ttname"><a href="Statistic_8h.html">Statistic.h</a></div></div>
<div class="ttc" id="astructllvm_1_1CodeMetrics_html"><div class="ttname"><a href="structllvm_1_1CodeMetrics.html">llvm::CodeMetrics</a></div><div class="ttdoc">Utility to calculate the size and a few similar metrics for a set of basic blocks.</div><div class="ttdef"><b>Definition:</b> <a href="CodeMetrics_8h_source.html#l00030">CodeMetrics.h:30</a></div></div>
<div class="ttc" id="aSizeOpts_8h_html"><div class="ttname"><a href="SizeOpts_8h.html">SizeOpts.h</a></div></div>
<div class="ttc" id="aclassllvm_1_1TargetTransformInfo_html"><div class="ttname"><a href="classllvm_1_1TargetTransformInfo.html">llvm::TargetTransformInfo</a></div><div class="ttdoc">This pass provides access to the codegen interfaces that are needed for IR-level transformations.</div><div class="ttdef"><b>Definition:</b> <a href="TargetTransformInfo_8h_source.html#l00167">TargetTransformInfo.h:167</a></div></div>
<div class="ttc" id="aScalar_2SCCP_8h_html"><div class="ttname"><a href="Scalar_2SCCP_8h.html">SCCP.h</a></div></div>
<div class="ttc" id="aDomTreeUpdater_8h_html"><div class="ttname"><a href="DomTreeUpdater_8h.html">DomTreeUpdater.h</a></div></div>
<div class="ttc" id="aclassllvm_1_1GlobalVariable_html"><div class="ttname"><a href="classllvm_1_1GlobalVariable.html">llvm::GlobalVariable</a></div><div class="ttdef"><b>Definition:</b> <a href="GlobalVariable_8h_source.html#l00040">GlobalVariable.h:40</a></div></div>
<div class="ttc" id="aclassllvm_1_1DominatorTree_html"><div class="ttname"><a href="classllvm_1_1DominatorTree.html">llvm::DominatorTree</a></div><div class="ttdoc">Concrete subclass of DominatorTreeBase that is used to compute a normal dominator tree.</div><div class="ttdef"><b>Definition:</b> <a href="Dominators_8h_source.html#l00151">Dominators.h:151</a></div></div>
<div class="ttc" id="aclassllvm_1_1SCCPSolver_html_a615b751032d180df408ee2ef915bf6a6"><div class="ttname"><a href="classllvm_1_1SCCPSolver.html#a615b751032d180df408ee2ef915bf6a6">llvm::SCCPSolver::getConstant</a></div><div class="ttdeci">Constant * getConstant(const ValueLatticeElement &amp;LV) const</div><div class="ttdoc">Helper to return a Constant if LV is either a constant or a constant range with a single element.</div><div class="ttdef"><b>Definition:</b> <a href="SCCPSolver_8cpp_source.html#l01694">SCCPSolver.cpp:1694</a></div></div>
<div class="ttc" id="anamespacellvm_1_1cl_html_a68075925a54790e71ca790e1d4f21a40a263ac008d8d31f13ce460395fc4cf7e6"><div class="ttname"><a href="namespacellvm_1_1cl.html#a68075925a54790e71ca790e1d4f21a40a263ac008d8d31f13ce460395fc4cf7e6">llvm::cl::Hidden</a></div><div class="ttdeci">@ Hidden</div><div class="ttdef"><b>Definition:</b> <a href="CommandLine_8h_source.html#l00143">CommandLine.h:143</a></div></div>
<div class="ttc" id="aclassllvm_1_1SmallPtrSet_html"><div class="ttname"><a href="classllvm_1_1SmallPtrSet.html">llvm::SmallPtrSet&lt; Function *, 2 &gt;</a></div></div>
<div class="ttc" id="aclassllvm_1_1SCCPSolver_html_acb2fa77f7d65438220a9fef42964d284"><div class="ttname"><a href="classllvm_1_1SCCPSolver.html#acb2fa77f7d65438220a9fef42964d284">llvm::SCCPSolver::markBlockExecutable</a></div><div class="ttdeci">bool markBlockExecutable(BasicBlock *BB)</div><div class="ttdoc">markBlockExecutable - This method can be used by clients to mark all of the blocks that are known to ...</div><div class="ttdef"><b>Definition:</b> <a href="SCCPSolver_8cpp_source.html#l01613">SCCPSolver.cpp:1613</a></div></div>
<div class="ttc" id="aclassllvm_1_1InstructionCost_html_a6589fbc679c11bf3b94f7a70c9c89f7c"><div class="ttname"><a href="classllvm_1_1InstructionCost.html#a6589fbc679c11bf3b94f7a70c9c89f7c">llvm::InstructionCost::print</a></div><div class="ttdeci">void print(raw_ostream &amp;OS) const</div><div class="ttdef"><b>Definition:</b> <a href="InstructionCost_8cpp_source.html#l00019">InstructionCost.cpp:19</a></div></div>
<div class="ttc" id="aclassllvm_1_1SCCPSolver_html_a89e13f6c5a2a78ec3b68dad32a2b6b5e"><div class="ttname"><a href="classllvm_1_1SCCPSolver.html#a89e13f6c5a2a78ec3b68dad32a2b6b5e">llvm::SCCPSolver::addArgumentTrackedFunction</a></div><div class="ttdeci">void addArgumentTrackedFunction(Function *F)</div><div class="ttdef"><b>Definition:</b> <a href="SCCPSolver_8cpp_source.html#l01639">SCCPSolver.cpp:1639</a></div></div>
<div class="ttc" id="aDebug_8h_html_a08efc68d15935eb8889400a46c3749ba"><div class="ttname"><a href="Debug_8h.html#a08efc68d15935eb8889400a46c3749ba">LLVM_DEBUG</a></div><div class="ttdeci">#define LLVM_DEBUG(X)</div><div class="ttdef"><b>Definition:</b> <a href="Debug_8h_source.html#l00122">Debug.h:122</a></div></div>
<div class="ttc" id="aFunctionSpecialization_8cpp_html_a5c81c9004e171e6d4f131a7e38fac142"><div class="ttname"><a href="FunctionSpecialization_8cpp.html#a5c81c9004e171e6d4f131a7e38fac142">AvgLoopIterationCount</a></div><div class="ttdeci">static cl::opt&lt; unsigned &gt; AvgLoopIterationCount(&quot;func-specialization-avg-iters-cost&quot;, cl::Hidden, cl::desc(&quot;Average loop iteration count cost&quot;), cl::init(10))</div></div>
<div class="ttc" id="aMD5_8cpp_html_a96d73bbd7af15cb1fc38c3f4a3bd82e9"><div class="ttname"><a href="MD5_8cpp.html#a96d73bbd7af15cb1fc38c3f4a3bd82e9">F</a></div><div class="ttdeci">#define F(x, y, z)</div><div class="ttdef"><b>Definition:</b> <a href="MD5_8cpp_source.html#l00056">MD5.cpp:56</a></div></div>
<div class="ttc" id="aclassllvm_1_1BasicBlock_html"><div class="ttname"><a href="classllvm_1_1BasicBlock.html">llvm::BasicBlock</a></div><div class="ttdoc">LLVM Basic Block Representation.</div><div class="ttdef"><b>Definition:</b> <a href="BasicBlock_8h_source.html#l00058">BasicBlock.h:59</a></div></div>
<div class="ttc" id="aFunctionSpecialization_8cpp_html_a67c4f460f43d34e59782530466a2abd3"><div class="ttname"><a href="FunctionSpecialization_8cpp.html#a67c4f460f43d34e59782530466a2abd3">MaxConstantsThreshold</a></div><div class="ttdeci">static cl::opt&lt; unsigned &gt; MaxConstantsThreshold(&quot;func-specialization-max-constants&quot;, cl::Hidden, cl::desc(&quot;The maximum number of clones allowed for a single function &quot; &quot;specialization&quot;), cl::init(3))</div></div>
<div class="ttc" id="anamespacellvm_html_a7c46c742c31be54870e2038048e6b391"><div class="ttname"><a href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">llvm::dbgs</a></div><div class="ttdeci">raw_ostream &amp; dbgs()</div><div class="ttdoc">dbgs() - This returns a reference to a raw_ostream for debugging messages.</div><div class="ttdef"><b>Definition:</b> <a href="Debug_8cpp_source.html#l00163">Debug.cpp:163</a></div></div>
<div class="ttc" id="aAMDGPULibCalls_8cpp_html_afecf1cc1292b07f57d343c0f4d682044"><div class="ttname"><a href="AMDGPULibCalls_8cpp.html#afecf1cc1292b07f57d343c0f4d682044">Arg</a></div><div class="ttdeci">amdgpu Simplify well known AMD library false FunctionCallee Value * Arg</div><div class="ttdef"><b>Definition:</b> <a href="AMDGPULibCalls_8cpp_source.html#l00206">AMDGPULibCalls.cpp:206</a></div></div>
<div class="ttc" id="aCodeMetrics_8h_html"><div class="ttname"><a href="CodeMetrics_8h.html">CodeMetrics.h</a></div></div>
<div class="ttc" id="aclassllvm_1_1Type_html_a5f6edc5246188225b3f49bd5c974c759"><div class="ttname"><a href="classllvm_1_1Type.html#a5f6edc5246188225b3f49bd5c974c759">llvm::Type::isSingleValueType</a></div><div class="ttdeci">bool isSingleValueType() const</div><div class="ttdoc">Return true if the type is a valid type for a register in codegen.</div><div class="ttdef"><b>Definition:</b> <a href="Type_8h_source.html#l00259">Type.h:259</a></div></div>
<div class="ttc" id="anamespacellvm_html_a3af72f14ea20f2c762c751d2d49e5ea3"><div class="ttname"><a href="namespacellvm.html#a3af72f14ea20f2c762c751d2d49e5ea3">llvm::shouldOptimizeForSize</a></div><div class="ttdeci">bool shouldOptimizeForSize(const MachineFunction *MF, ProfileSummaryInfo *PSI, const MachineBlockFrequencyInfo *BFI, PGSOQueryType QueryType=PGSOQueryType::Other)</div><div class="ttdoc">Returns true if machine function MF is suggested to be size-optimized based on the profile.</div><div class="ttdef"><b>Definition:</b> <a href="MachineSizeOpts_8cpp_source.html#l00183">MachineSizeOpts.cpp:183</a></div></div>
<div class="ttc" id="aclassllvm_1_1ValueLatticeElement_html_ab20e06908032fd7028c20c1d2d5a248a"><div class="ttname"><a href="classllvm_1_1ValueLatticeElement.html#ab20e06908032fd7028c20c1d2d5a248a">llvm::ValueLatticeElement::isUnknownOrUndef</a></div><div class="ttdeci">bool isUnknownOrUndef() const</div><div class="ttdef"><b>Definition:</b> <a href="ValueLattice_8h_source.html#l00240">ValueLattice.h:240</a></div></div>
<div class="ttc" id="anamespacellvm_html_a5f5f248d08aa55c63e5bc7a8304a7319"><div class="ttname"><a href="namespacellvm.html#a5f5f248d08aa55c63e5bc7a8304a7319">llvm::getInlineCost</a></div><div class="ttdeci">InlineCost getInlineCost(CallBase &amp;Call, const InlineParams &amp;Params, TargetTransformInfo &amp;CalleeTTI, function_ref&lt; AssumptionCache &amp;(Function &amp;)&gt; GetAssumptionCache, function_ref&lt; const TargetLibraryInfo &amp;(Function &amp;)&gt; GetTLI, function_ref&lt; BlockFrequencyInfo &amp;(Function &amp;)&gt; GetBFI=nullptr, ProfileSummaryInfo *PSI=nullptr, OptimizationRemarkEmitter *ORE=nullptr)</div><div class="ttdoc">Get an InlineCost object representing the cost of inlining this callsite.</div><div class="ttdef"><b>Definition:</b> <a href="InlineCost_8cpp_source.html#l02713">InlineCost.cpp:2713</a></div></div>
<div class="ttc" id="aclassFunctionSpecializer_html"><div class="ttname"><a href="classFunctionSpecializer.html">FunctionSpecializer</a></div><div class="ttdef"><b>Definition:</b> <a href="FunctionSpecialization_8cpp_source.html#l00076">FunctionSpecialization.cpp:76</a></div></div>
<div class="ttc" id="aBuiltinGCs_8cpp_html_a6742d2e0a668baf1196ec69e158d5f15"><div class="ttname"><a href="BuiltinGCs_8cpp.html#a6742d2e0a668baf1196ec69e158d5f15">E</a></div><div class="ttdeci">static GCRegistry::Add&lt; CoreCLRGC &gt; E(&quot;coreclr&quot;, &quot;CoreCLR-compatible GC&quot;)</div></div>
<div class="ttc" id="aclassllvm_1_1SCCPSolver_html_af88f6c356f4e17eaebfb81ac86426758"><div class="ttname"><a href="classllvm_1_1SCCPSolver.html#af88f6c356f4e17eaebfb81ac86426758">llvm::SCCPSolver::markOverdefined</a></div><div class="ttdeci">void markOverdefined(Value *V)</div><div class="ttdoc">markOverdefined - Mark the specified value overdefined.</div><div class="ttdef"><b>Definition:</b> <a href="SCCPSolver_8cpp_source.html#l01688">SCCPSolver.cpp:1688</a></div></div>
<div class="ttc" id="aclassllvm_1_1User_html"><div class="ttname"><a href="classllvm_1_1User.html">llvm::User</a></div><div class="ttdef"><b>Definition:</b> <a href="User_8h_source.html#l00044">User.h:44</a></div></div>
<div class="ttc" id="aREADME__ALTIVEC_8txt_html_a9aacd9146afe44bf656cd664e2a88c8c"><div class="ttname"><a href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a></div><div class="ttdeci">(vector float) vec_cmpeq(*A, *B) C</div><div class="ttdef"><b>Definition:</b> <a href="README__ALTIVEC_8txt_source.html#l00086">README_ALTIVEC.txt:86</a></div></div>
<div class="ttc" id="aclassllvm_1_1InlineCost_html"><div class="ttname"><a href="classllvm_1_1InlineCost.html">llvm::InlineCost</a></div><div class="ttdoc">Represents the cost of inlining a function.</div><div class="ttdef"><b>Definition:</b> <a href="InlineCost_8h_source.html#l00082">InlineCost.h:82</a></div></div>
<div class="ttc" id="aTargetLibraryInfo_8h_html"><div class="ttname"><a href="TargetLibraryInfo_8h.html">TargetLibraryInfo.h</a></div></div>
<div class="ttc" id="aclassllvm_1_1SCCPSolver_html_a8e19cb85e1c833bcad589b4a4ea74501"><div class="ttname"><a href="classllvm_1_1SCCPSolver.html#a8e19cb85e1c833bcad589b4a4ea74501">llvm::SCCPSolver::addAnalysis</a></div><div class="ttdeci">void addAnalysis(Function &amp;F, AnalysisResultsForFn A)</div><div class="ttdef"><b>Definition:</b> <a href="SCCPSolver_8cpp_source.html#l01609">SCCPSolver.cpp:1609</a></div></div>
<div class="ttc" id="aclassllvm_1_1Instruction_html"><div class="ttname"><a href="classllvm_1_1Instruction.html">llvm::Instruction</a></div><div class="ttdef"><b>Definition:</b> <a href="IR_2Instruction_8h_source.html#l00045">Instruction.h:46</a></div></div>
<div class="ttc" id="anamespacellvm_html_a0bf75467957937ad23ad7be19f489934"><div class="ttname"><a href="namespacellvm.html#a0bf75467957937ad23ad7be19f489934">llvm::STATISTIC</a></div><div class="ttdeci">STATISTIC(NumFunctions, &quot;Total number of functions&quot;)</div></div>
<div class="ttc" id="aclassllvm_1_1UndefValue_html_a4ae5ff22b700a42bcc5d889233721335"><div class="ttname"><a href="classllvm_1_1UndefValue.html#a4ae5ff22b700a42bcc5d889233721335">llvm::UndefValue::get</a></div><div class="ttdeci">static UndefValue * get(Type *T)</div><div class="ttdoc">Static factory methods - Return an 'undef' object of the specified type.</div><div class="ttdef"><b>Definition:</b> <a href="Constants_8cpp_source.html#l01786">Constants.cpp:1786</a></div></div>
<div class="ttc" id="aScalar_2SCCP_8cpp_html_a931fab9761cd3c39e4a894226a4eab6b"><div class="ttname"><a href="Scalar_2SCCP_8cpp.html#a931fab9761cd3c39e4a894226a4eab6b">tryToReplaceWithConstant</a></div><div class="ttdeci">static bool tryToReplaceWithConstant(SCCPSolver &amp;Solver, Value *V)</div><div class="ttdef"><b>Definition:</b> <a href="Scalar_2SCCP_8cpp_source.html#l00100">SCCP.cpp:100</a></div></div>
<div class="ttc" id="astructllvm_1_1CodeMetrics_html_a7e174506b52ad46ea1f746a7f727d999"><div class="ttname"><a href="structllvm_1_1CodeMetrics.html#a7e174506b52ad46ea1f746a7f727d999">llvm::CodeMetrics::collectEphemeralValues</a></div><div class="ttdeci">static void collectEphemeralValues(const Loop *L, AssumptionCache *AC, SmallPtrSetImpl&lt; const Value * &gt; &amp;EphValues)</div><div class="ttdoc">Collect a loop's ephemeral values (those used only by an assume or similar intrinsics in the loop).</div><div class="ttdef"><b>Definition:</b> <a href="CodeMetrics_8cpp_source.html#l00070">CodeMetrics.cpp:70</a></div></div>
<div class="ttc" id="anamespacellvm_html_aba7063dea024346c7b70099c63703f50"><div class="ttname"><a href="namespacellvm.html#aba7063dea024346c7b70099c63703f50">llvm::getInlineParams</a></div><div class="ttdeci">InlineParams getInlineParams()</div><div class="ttdoc">Generate the parameters to tune the inline cost analysis based only on the commandline options.</div><div class="ttdef"><b>Definition:</b> <a href="InlineCost_8cpp_source.html#l02997">InlineCost.cpp:2997</a></div></div>
<div class="ttc" id="anamespacellvm_1_1InlineConstants_html_ac3ac11f694a6c40ee45f49ac94068124"><div class="ttname"><a href="namespacellvm_1_1InlineConstants.html#ac3ac11f694a6c40ee45f49ac94068124">llvm::InlineConstants::InstrCost</a></div><div class="ttdeci">const int InstrCost</div><div class="ttdef"><b>Definition:</b> <a href="InlineCost_8h_source.html#l00045">InlineCost.h:45</a></div></div>
<div class="ttc" id="anamespacellvm_html_a7414a7c636bc5a30b0e8478019a1bcd4"><div class="ttname"><a href="namespacellvm.html#a7414a7c636bc5a30b0e8478019a1bcd4">llvm::canTrackGlobalVariableInterprocedurally</a></div><div class="ttdeci">bool canTrackGlobalVariableInterprocedurally(GlobalVariable *GV)</div><div class="ttdoc">Determine if the value maintained in the given global variable can be tracked interprocedurally.</div><div class="ttdef"><b>Definition:</b> <a href="ValueLatticeUtils_8cpp_source.html#l00027">ValueLatticeUtils.cpp:27</a></div></div>
<div class="ttc" id="aLoopInfo_8h_html"><div class="ttname"><a href="LoopInfo_8h.html">LoopInfo.h</a></div></div>
<div class="ttc" id="aclassllvm_1_1function__ref_html"><div class="ttname"><a href="classllvm_1_1function__ref.html">llvm::function_ref</a></div><div class="ttdoc">An efficient, type-erasing, non-owning reference to a callable.</div><div class="ttdef"><b>Definition:</b> <a href="STLExtras_8h_source.html#l00168">STLExtras.h:168</a></div></div>
<div class="ttc" id="aRDFGraph_8cpp_html_af153ca0eadca8bc464492b7aba7feb00"><div class="ttname"><a href="RDFGraph_8cpp.html#af153ca0eadca8bc464492b7aba7feb00">G</a></div><div class="ttdeci">const DataFlowGraph &amp; G</div><div class="ttdef"><b>Definition:</b> <a href="RDFGraph_8cpp_source.html#l00202">RDFGraph.cpp:202</a></div></div>
<div class="ttc" id="aclassllvm_1_1cl_1_1opt_html"><div class="ttname"><a href="classllvm_1_1cl_1_1opt.html">llvm::cl::opt&lt; bool &gt;</a></div></div>
<div class="ttc" id="aFunctionSpecialization_8cpp_html_aeaef9f460c3e938ea7cb648291db4f1e"><div class="ttname"><a href="FunctionSpecialization_8cpp.html#aeaef9f460c3e938ea7cb648291db4f1e">FuncSpecializationMaxIters</a></div><div class="ttdeci">static cl::opt&lt; unsigned &gt; FuncSpecializationMaxIters(&quot;func-specialization-max-iters&quot;, cl::Hidden, cl::desc(&quot;The maximum number of iterations function specialization is run&quot;), cl::init(1))</div></div>
<div class="ttc" id="aclassllvm_1_1SCCPSolver_html_ab146e74d42b852877cc1e935d808005a"><div class="ttname"><a href="classllvm_1_1SCCPSolver.html#ab146e74d42b852877cc1e935d808005a">llvm::SCCPSolver::getLatticeValueFor</a></div><div class="ttdeci">const ValueLatticeElement &amp; getLatticeValueFor(Value *V) const</div><div class="ttdef"><b>Definition:</b> <a href="SCCPSolver_8cpp_source.html#l01670">SCCPSolver.cpp:1670</a></div></div>
<div class="ttc" id="aclassllvm_1_1Constant_html"><div class="ttname"><a href="classllvm_1_1Constant.html">llvm::Constant</a></div><div class="ttdoc">This is an important base class in LLVM.</div><div class="ttdef"><b>Definition:</b> <a href="Constant_8h_source.html#l00041">Constant.h:41</a></div></div>
<div class="ttc" id="aclassllvm_1_1Instruction_html_ae6b978645b8ac72d1a35e1298ffdd4f0"><div class="ttname"><a href="classllvm_1_1Instruction.html#ae6b978645b8ac72d1a35e1298ffdd4f0">llvm::Instruction::eraseFromParent</a></div><div class="ttdeci">SymbolTableList&lt; Instruction &gt;::iterator eraseFromParent()</div><div class="ttdoc">This method unlinks 'this' from the containing basic block and deletes it.</div><div class="ttdef"><b>Definition:</b> <a href="IR_2Instruction_8cpp_source.html#l00078">Instruction.cpp:78</a></div></div>
<div class="ttc" id="anamespacellvm_1_1InlineConstants_html_a6e878d84d424326fd6132b320f075c97"><div class="ttname"><a href="namespacellvm_1_1InlineConstants.html#a6e878d84d424326fd6132b320f075c97">llvm::InlineConstants::IndirectCallThreshold</a></div><div class="ttdeci">const int IndirectCallThreshold</div><div class="ttdef"><b>Definition:</b> <a href="InlineCost_8h_source.html#l00046">InlineCost.h:46</a></div></div>
<div class="ttc" id="aclassllvm_1_1InstructionCost_html_a0e2de49134b2835ec083cd3d15dfa2a5"><div class="ttname"><a href="classllvm_1_1InstructionCost.html#a0e2de49134b2835ec083cd3d15dfa2a5">llvm::InstructionCost::setInvalid</a></div><div class="ttdeci">void setInvalid()</div><div class="ttdef"><b>Definition:</b> <a href="InstructionCost_8h_source.html#l00081">InstructionCost.h:81</a></div></div>
<div class="ttc" id="aclassFunctionSpecializer_html_aea00ac43169a26c8d279d81b1a7e8b70"><div class="ttname"><a href="classFunctionSpecializer.html#aea00ac43169a26c8d279d81b1a7e8b70">FunctionSpecializer::specializeFunctions</a></div><div class="ttdeci">bool specializeFunctions(SmallVectorImpl&lt; Function * &gt; &amp;FuncDecls, SmallVectorImpl&lt; Function * &gt; &amp;CurrentSpecializations)</div><div class="ttdoc">Attempt to specialize functions in the module to enable constant propagation across function boundari...</div><div class="ttdef"><b>Definition:</b> <a href="FunctionSpecialization_8cpp_source.html#l00100">FunctionSpecialization.cpp:100</a></div></div>
<div class="ttc" id="aMD5_8cpp_html_ac0eafdc9ee161b71e7af98af736952fd"><div class="ttname"><a href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a></div><div class="ttdeci">#define I(x, y, z)</div><div class="ttdef"><b>Definition:</b> <a href="MD5_8cpp_source.html#l00059">MD5.cpp:59</a></div></div>
<div class="ttc" id="anamespacellvm_1_1X86AS_html_a1c7a4fecbf88a6033f2e1fa667ee284aa5b3a782ccae295a254e2794ad30ad07f"><div class="ttname"><a href="namespacellvm_1_1X86AS.html#a1c7a4fecbf88a6033f2e1fa667ee284aa5b3a782ccae295a254e2794ad30ad07f">llvm::X86AS::FS</a></div><div class="ttdeci">@ FS</div><div class="ttdef"><b>Definition:</b> <a href="X86_8h_source.html#l00188">X86.h:188</a></div></div>
<div class="ttc" id="aCloning_8h_html"><div class="ttname"><a href="Cloning_8h.html">Cloning.h</a></div></div>
<div class="ttc" id="anamespacellvm_1_1cl_html_a10a041239ae1870cfcc064bfaa79fb65"><div class="ttname"><a href="namespacellvm_1_1cl.html#a10a041239ae1870cfcc064bfaa79fb65">llvm::cl::init</a></div><div class="ttdeci">initializer&lt; Ty &gt; init(const Ty &amp;Val)</div><div class="ttdef"><b>Definition:</b> <a href="CommandLine_8h_source.html#l00443">CommandLine.h:443</a></div></div>
<div class="ttc" id="anamespacellvm_html_a8154638df88e4eaa568b67b23d463dac"><div class="ttname"><a href="namespacellvm.html#a8154638df88e4eaa568b67b23d463dac">llvm::make_early_inc_range</a></div><div class="ttdeci">iterator_range&lt; early_inc_iterator_impl&lt; detail::IterOfRange&lt; RangeT &gt; &gt; &gt; make_early_inc_range(RangeT &amp;&amp;Range)</div><div class="ttdoc">Make a range that does early increment to allow mutation of the underlying range without disrupting i...</div><div class="ttdef"><b>Definition:</b> <a href="STLExtras_8h_source.html#l00572">STLExtras.h:572</a></div></div>
<div class="ttc" id="aMachineTraceMetrics_8cpp_html_a6f3004139ef53bc2cf206b8864976928"><div class="ttname"><a href="MachineTraceMetrics_8cpp.html#a6f3004139ef53bc2cf206b8864976928">Metrics</a></div><div class="ttdeci">Machine Trace Metrics</div><div class="ttdef"><b>Definition:</b> <a href="MachineTraceMetrics_8cpp_source.html#l00053">MachineTraceMetrics.cpp:53</a></div></div>
<div class="ttc" id="aclassllvm_1_1SCCPSolver_html"><div class="ttname"><a href="classllvm_1_1SCCPSolver.html">llvm::SCCPSolver</a></div><div class="ttdoc">SCCPSolver - This interface class is a general purpose solver for Sparse Conditional Constant Propaga...</div><div class="ttdef"><b>Definition:</b> <a href="SCCPSolver_8h_source.html#l00044">SCCPSolver.h:44</a></div></div>
<div class="ttc" id="aclassllvm_1_1InlineCost_html_ad1798a4114dad2820cb163dc5b2db758"><div class="ttname"><a href="classllvm_1_1InlineCost.html#ad1798a4114dad2820cb163dc5b2db758">llvm::InlineCost::getCostDelta</a></div><div class="ttdeci">int getCostDelta() const</div><div class="ttdoc">Get the cost delta from the threshold for inlining.</div><div class="ttdef"><b>Definition:</b> <a href="InlineCost_8h_source.html#l00154">InlineCost.h:154</a></div></div>
<div class="ttc" id="aSILowerControlFlow_8cpp_html_a4868c5d81c5ccc98c47aeab6244346a0"><div class="ttname"><a href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a></div><div class="ttdeci">assert(ImpDefSCC.getReg()==AMDGPU::SCC &amp;&amp;ImpDefSCC.isDef())</div></div>
<div class="ttc" id="aInlineCost_8h_html"><div class="ttname"><a href="InlineCost_8h.html">InlineCost.h</a></div></div>
<div class="ttc" id="aMemDepPrinter_8cpp_html_a470d8721ad7c3b718e9daeabdaeb4700"><div class="ttname"><a href="MemDepPrinter_8cpp.html#a470d8721ad7c3b718e9daeabdaeb4700">function</a></div><div class="ttdeci">print Print MemDeps of function</div><div class="ttdef"><b>Definition:</b> <a href="MemDepPrinter_8cpp_source.html#l00083">MemDepPrinter.cpp:83</a></div></div>
<div class="ttc" id="aclassllvm_1_1Value_html_af21f61086e696a788f549768fdc26a93"><div class="ttname"><a href="classllvm_1_1Value.html#af21f61086e696a788f549768fdc26a93">llvm::Value::user_empty</a></div><div class="ttdeci">bool user_empty() const</div><div class="ttdef"><b>Definition:</b> <a href="Value_8h_source.html#l00386">Value.h:386</a></div></div>
<div class="ttc" id="aclassllvm_1_1Module_html"><div class="ttname"><a href="classllvm_1_1Module.html">llvm::Module</a></div><div class="ttdoc">A Module instance is used to store all the information related to an LLVM module.</div><div class="ttdef"><b>Definition:</b> <a href="Module_8h_source.html#l00067">Module.h:67</a></div></div>
<div class="ttc" id="anamespacellvm_html_a1e0cfa592cb8638c1b3e19b47264adac"><div class="ttname"><a href="namespacellvm.html#a1e0cfa592cb8638c1b3e19b47264adac">llvm::runFunctionSpecialization</a></div><div class="ttdeci">bool runFunctionSpecialization(Module &amp;M, const DataLayout &amp;DL, std::function&lt; TargetLibraryInfo &amp;(Function &amp;)&gt; GetTLI, std::function&lt; TargetTransformInfo &amp;(Function &amp;)&gt; GetTTI, std::function&lt; AssumptionCache &amp;(Function &amp;)&gt; GetAC, function_ref&lt; AnalysisResultsForFn(Function &amp;)&gt; GetAnalysis)</div><div class="ttdef"><b>Definition:</b> <a href="FunctionSpecialization_8cpp_source.html#l00549">FunctionSpecialization.cpp:549</a></div></div>
<div class="ttc" id="aclassllvm_1_1LoopInfoBase_html_aa4defa64d17f14bd55204cac1b3a0c3a"><div class="ttname"><a href="classllvm_1_1LoopInfoBase.html#aa4defa64d17f14bd55204cac1b3a0c3a">llvm::LoopInfoBase::getLoopDepth</a></div><div class="ttdeci">unsigned getLoopDepth(const BlockT *BB) const</div><div class="ttdoc">Return the loop nesting level of the specified block.</div><div class="ttdef"><b>Definition:</b> <a href="LoopInfo_8h_source.html#l00974">LoopInfo.h:974</a></div></div>
<div class="ttc" id="aclassllvm_1_1LoopInfo_html"><div class="ttname"><a href="classllvm_1_1LoopInfo.html">llvm::LoopInfo</a></div><div class="ttdef"><b>Definition:</b> <a href="LoopInfo_8h_source.html#l01083">LoopInfo.h:1083</a></div></div>
<div class="ttc" id="anamespacellvm_html_a57f2ca0e57f4f7b13f56f9aa16af3e0d"><div class="ttname"><a href="namespacellvm.html#a57f2ca0e57f4f7b13f56f9aa16af3e0d">llvm::min</a></div><div class="ttdeci">Expected&lt; ExpressionValue &gt; min(const ExpressionValue &amp;Lhs, const ExpressionValue &amp;Rhs)</div><div class="ttdef"><b>Definition:</b> <a href="FileCheck_8cpp_source.html#l00357">FileCheck.cpp:357</a></div></div>
<div class="ttc" id="aclassllvm_1_1AssumptionCache_html"><div class="ttname"><a href="classllvm_1_1AssumptionCache.html">llvm::AssumptionCache</a></div><div class="ttdoc">A cache of @llvm.assume calls within a function.</div><div class="ttdef"><b>Definition:</b> <a href="AssumptionCache_8h_source.html#l00041">AssumptionCache.h:41</a></div></div>
<div class="ttc" id="aclassllvm_1_1TargetTransformInfo_html_a706f223f760b55668fbae74202b816bba7f80055e1969cb850739546467460ad8"><div class="ttname"><a href="classllvm_1_1TargetTransformInfo.html#a706f223f760b55668fbae74202b816bba7f80055e1969cb850739546467460ad8">llvm::TargetTransformInfo::TCK_SizeAndLatency</a></div><div class="ttdeci">@ TCK_SizeAndLatency</div><div class="ttdoc">The weighted sum of size and latency.</div><div class="ttdef"><b>Definition:</b> <a href="TargetTransformInfo_8h_source.html#l00215">TargetTransformInfo.h:214</a></div></div>
<div class="ttc" id="aclassllvm_1_1Value_html_a6393a2d4fe7e10b28a0dcc35f881567b"><div class="ttname"><a href="classllvm_1_1Value.html#a6393a2d4fe7e10b28a0dcc35f881567b">llvm::Value::getType</a></div><div class="ttdeci">Type * getType() const</div><div class="ttdoc">All values are typed, get the type of this value.</div><div class="ttdef"><b>Definition:</b> <a href="Value_8h_source.html#l00256">Value.h:256</a></div></div>
<div class="ttc" id="aclassllvm_1_1TargetTransformInfo_html_af06cc06fa170538ab8025ebe05e5f0a2"><div class="ttname"><a href="classllvm_1_1TargetTransformInfo.html#af06cc06fa170538ab8025ebe05e5f0a2">llvm::TargetTransformInfo::getUserCost</a></div><div class="ttdeci">InstructionCost getUserCost(const User *U, ArrayRef&lt; const Value * &gt; Operands, TargetCostKind CostKind) const</div><div class="ttdoc">Estimate the cost of a given IR user when lowered.</div><div class="ttdef"><b>Definition:</b> <a href="TargetTransformInfo_8cpp_source.html#l00219">TargetTransformInfo.cpp:219</a></div></div>
<div class="ttc" id="aclassllvm_1_1Value_html_a3ab5fc45117b450e8bb04e564cb6e5f2"><div class="ttname"><a href="classllvm_1_1Value.html#a3ab5fc45117b450e8bb04e564cb6e5f2">llvm::Value::replaceAllUsesWith</a></div><div class="ttdeci">void replaceAllUsesWith(Value *V)</div><div class="ttdoc">Change all uses of this to point to a new Value.</div><div class="ttdef"><b>Definition:</b> <a href="Value_8cpp_source.html#l00520">Value.cpp:520</a></div></div>
<div class="ttc" id="aREADME__ALTIVEC_8txt_html_a015846b6188ce15e08cd94c74a9df1a3"><div class="ttname"><a href="README__ALTIVEC_8txt.html#a015846b6188ce15e08cd94c74a9df1a3">A</a></div><div class="ttdeci">* A</div><div class="ttdef"><b>Definition:</b> <a href="README__ALTIVEC_8txt_source.html#l00089">README_ALTIVEC.txt:89</a></div></div>
<div class="ttc" id="aAArch64SLSHardening_8cpp_html_ad467c4ab9119043f9b7750ab986be61a"><div class="ttname"><a href="AArch64SLSHardening_8cpp.html#ad467c4ab9119043f9b7750ab986be61a">DL</a></div><div class="ttdeci">MachineBasicBlock MachineBasicBlock::iterator DebugLoc DL</div><div class="ttdef"><b>Definition:</b> <a href="AArch64SLSHardening_8cpp_source.html#l00076">AArch64SLSHardening.cpp:76</a></div></div>
<div class="ttc" id="aclassllvm_1_1ValueLatticeElement_html"><div class="ttname"><a href="classllvm_1_1ValueLatticeElement.html">llvm::ValueLatticeElement</a></div><div class="ttdoc">This class represents lattice values for constants.</div><div class="ttdef"><b>Definition:</b> <a href="ValueLattice_8h_source.html#l00027">ValueLattice.h:27</a></div></div>
<div class="ttc" id="anamespacellvm_html_aedeb89fa4ceb608d9d49bcd53ddcd2c1"><div class="ttname"><a href="namespacellvm.html#aedeb89fa4ceb608d9d49bcd53ddcd2c1">llvm::CloneFunction</a></div><div class="ttdeci">Function * CloneFunction(Function *F, ValueToValueMapTy &amp;VMap, ClonedCodeInfo *CodeInfo=nullptr)</div><div class="ttdoc">Return a copy of the specified function and add it to that function's module.</div><div class="ttdef"><b>Definition:</b> <a href="CloneFunction_8cpp_source.html#l00283">CloneFunction.cpp:283</a></div></div>
<div class="ttc" id="aclassllvm_1_1ValueMap_html"><div class="ttname"><a href="classllvm_1_1ValueMap.html">llvm::ValueMap&lt; const Value *, WeakTrackingVH &gt;</a></div></div>
<div class="ttc" id="alib_2Target_2README_8txt_html_a7df6ed7588301267782c2bd4b7f6899d"><div class="ttname"><a href="lib_2Target_2README_8txt.html#a7df6ed7588301267782c2bd4b7f6899d">for</a></div><div class="ttdeci">this could be done in SelectionDAGISel along with other special for</div><div class="ttdef"><b>Definition:</b> <a href="lib_2Target_2README_8txt_source.html#l00104">README.txt:104</a></div></div>
<div class="ttc" id="aclassllvm_1_1ValueLatticeElement_html_a226c3252bd1261be2ff904697586f6d8"><div class="ttname"><a href="classllvm_1_1ValueLatticeElement.html#a226c3252bd1261be2ff904697586f6d8">llvm::ValueLatticeElement::isOverdefined</a></div><div class="ttdeci">bool isOverdefined() const</div><div class="ttdef"><b>Definition:</b> <a href="ValueLattice_8h_source.html#l00254">ValueLattice.h:254</a></div></div>
<div class="ttc" id="aclassllvm_1_1SCCPSolver_html_ac16a1026117ac160108d8a5bab0ae445"><div class="ttname"><a href="classllvm_1_1SCCPSolver.html#ac16a1026117ac160108d8a5bab0ae445">llvm::SCCPSolver::isBlockExecutable</a></div><div class="ttdeci">bool isBlockExecutable(BasicBlock *BB) const</div><div class="ttdef"><b>Definition:</b> <a href="SCCPSolver_8cpp_source.html#l01653">SCCPSolver.cpp:1653</a></div></div>
<div class="ttc" id="anamespacellvm_1_1AMDGPU_1_1SendMsg_html_a8594419a4ddfad2c9a79279c490e466d"><div class="ttname"><a href="namespacellvm_1_1AMDGPU_1_1SendMsg.html#a8594419a4ddfad2c9a79279c490e466d">llvm::AMDGPU::SendMsg::Op</a></div><div class="ttdeci">Op</div><div class="ttdef"><b>Definition:</b> <a href="SIDefines_8h_source.html#l00314">SIDefines.h:314</a></div></div>
<div class="ttc" id="aclassllvm_1_1TargetLibraryInfo_html"><div class="ttname"><a href="classllvm_1_1TargetLibraryInfo.html">llvm::TargetLibraryInfo</a></div><div class="ttdoc">Provides information about what library functions are available for the current target.</div><div class="ttdef"><b>Definition:</b> <a href="TargetLibraryInfo_8h_source.html#l00219">TargetLibraryInfo.h:219</a></div></div>
<div class="ttc" id="aclassllvm_1_1SCCPSolver_html_a814c9ef427065262b0ff3c0dc3d9f19d"><div class="ttname"><a href="classllvm_1_1SCCPSolver.html#a814c9ef427065262b0ff3c0dc3d9f19d">llvm::SCCPSolver::resolvedUndefsIn</a></div><div class="ttdeci">bool resolvedUndefsIn(Function &amp;F)</div><div class="ttdoc">resolvedUndefsIn - While solving the dataflow for a function, we assume that branches on undef values...</div><div class="ttdef"><b>Definition:</b> <a href="SCCPSolver_8cpp_source.html#l01649">SCCPSolver.cpp:1649</a></div></div>
<div class="ttc" id="aclassllvm_1_1SmallVectorImpl_html_aac0ea55010b7b1a301e65a0baea057aa"><div class="ttname"><a href="classllvm_1_1SmallVectorImpl.html#aac0ea55010b7b1a301e65a0baea057aa">llvm::SmallVectorImpl::clear</a></div><div class="ttdeci">void clear()</div><div class="ttdef"><b>Definition:</b> <a href="SmallVector_8h_source.html#l00585">SmallVector.h:585</a></div></div>
<div class="ttc" id="aclassllvm_1_1Function_html_a8bf193a781a92cae52d7f9216d0824f8"><div class="ttname"><a href="classllvm_1_1Function.html#a8bf193a781a92cae52d7f9216d0824f8">llvm::Function::arg_begin</a></div><div class="ttdeci">arg_iterator arg_begin()</div><div class="ttdef"><b>Definition:</b> <a href="Function_8h_source.html#l00794">Function.h:794</a></div></div>
<div class="ttc" id="anamespacellvm_html_af1d3deadf8d348b2329f4e7fa5386e5b"><div class="ttname"><a href="namespacellvm.html#af1d3deadf8d348b2329f4e7fa5386e5b">llvm::canTrackArgumentsInterprocedurally</a></div><div class="ttdeci">bool canTrackArgumentsInterprocedurally(Function *F)</div><div class="ttdoc">Determine if the values of the given function's arguments can be tracked interprocedurally.</div><div class="ttdef"><b>Definition:</b> <a href="ValueLatticeUtils_8cpp_source.html#l00019">ValueLatticeUtils.cpp:19</a></div></div>
<div class="ttc" id="aclassllvm_1_1SCCPSolver_html_a87f1f96fcc61ca8722e2b32f40a141bc"><div class="ttname"><a href="classllvm_1_1SCCPSolver.html#a87f1f96fcc61ca8722e2b32f40a141bc">llvm::SCCPSolver::markArgInFuncSpecialization</a></div><div class="ttdeci">void markArgInFuncSpecialization(Function *F, Argument *A, Constant *C)</div><div class="ttdoc">Mark argument A constant with value C in a new function specialization.</div><div class="ttdef"><b>Definition:</b> <a href="SCCPSolver_8cpp_source.html#l01702">SCCPSolver.cpp:1702</a></div></div>
<div class="ttc" id="aTargetTransformInfo_8h_html"><div class="ttname"><a href="TargetTransformInfo_8h.html">TargetTransformInfo.h</a></div><div class="ttdoc">This pass exposes codegen information to IR-level passes.</div></div>
<div class="ttc" id="aFunctionSpecialization_8cpp_html_aa12ef560d221650c45e0510df3dd35a2"><div class="ttname"><a href="FunctionSpecialization_8cpp.html#aa12ef560d221650c45e0510df3dd35a2">EnableSpecializationForLiteralConstant</a></div><div class="ttdeci">static cl::opt&lt; bool &gt; EnableSpecializationForLiteralConstant(&quot;function-specialization-for-literal-constant&quot;, cl::init(false), cl::Hidden, cl::desc(&quot;Make function specialization available for literal constant.&quot;))</div></div>
<div class="ttc" id="aclassFunctionSpecializer_html_a243f5489f063dd829b619655a466c1cd"><div class="ttname"><a href="classFunctionSpecializer.html#a243f5489f063dd829b619655a466c1cd">FunctionSpecializer::FunctionSpecializer</a></div><div class="ttdeci">FunctionSpecializer(SCCPSolver &amp;Solver, std::function&lt; AssumptionCache &amp;(Function &amp;)&gt; GetAC, std::function&lt; TargetTransformInfo &amp;(Function &amp;)&gt; GetTTI, std::function&lt; TargetLibraryInfo &amp;(Function &amp;)&gt; GetTLI)</div><div class="ttdef"><b>Definition:</b> <a href="FunctionSpecialization_8cpp_source.html#l00089">FunctionSpecialization.cpp:89</a></div></div>
<div class="ttc" id="aclassllvm_1_1SmallVectorImpl_html"><div class="ttname"><a href="classllvm_1_1SmallVectorImpl.html">llvm::SmallVectorImpl</a></div><div class="ttdoc">This class consists of common code factored out of the SmallVector class to reduce code duplication b...</div><div class="ttdef"><b>Definition:</b> <a href="SmallVector_8h_source.html#l00558">SmallVector.h:558</a></div></div>
<div class="ttc" id="aclassllvm_1_1SCCPSolver_html_a199003a361f6d87612ab03c249ab04c6"><div class="ttname"><a href="classllvm_1_1SCCPSolver.html#a199003a361f6d87612ab03c249ab04c6">llvm::SCCPSolver::trackValueOfGlobalVariable</a></div><div class="ttdeci">void trackValueOfGlobalVariable(GlobalVariable *GV)</div><div class="ttdoc">trackValueOfGlobalVariable - Clients can use this method to inform the SCCPSolver that it should trac...</div><div class="ttdef"><b>Definition:</b> <a href="SCCPSolver_8cpp_source.html#l01623">SCCPSolver.cpp:1623</a></div></div>
<div class="ttc" id="aclassllvm_1_1InlineCost_html_aeb15e0a412ebed4724ab6e68346a666b"><div class="ttname"><a href="classllvm_1_1InlineCost.html#aeb15e0a412ebed4724ab6e68346a666b">llvm::InlineCost::isVariable</a></div><div class="ttdeci">bool isVariable() const</div><div class="ttdef"><b>Definition:</b> <a href="InlineCost_8h_source.html#l00126">InlineCost.h:126</a></div></div>
<div class="ttc" id="alib_2CodeGen_2README_8txt_html_a09776db24cf586ec9f1e18f3bae14099"><div class="ttname"><a href="lib_2CodeGen_2README_8txt.html#a09776db24cf586ec9f1e18f3bae14099">BB</a></div><div class="ttdeci">Common register allocation spilling lr str ldr sxth r3 ldr mla r4 can lr mov lr str ldr sxth r3 mla r4 and then merge mul and lr str ldr sxth r3 mla r4 It also increase the likelihood the store may become dead bb27 Successors according to LLVM BB</div><div class="ttdef"><b>Definition:</b> <a href="lib_2CodeGen_2README_8txt_source.html#l00039">README.txt:39</a></div></div>
<div class="ttc" id="aclassllvm_1_1SCCPSolver_html_a2d6a1ff9823ca3ddb89d80fe379603ee"><div class="ttname"><a href="classllvm_1_1SCCPSolver.html#a2d6a1ff9823ca3ddb89d80fe379603ee">llvm::SCCPSolver::solve</a></div><div class="ttdeci">void solve()</div><div class="ttdoc">Solve - Solve for constants and executable blocks.</div><div class="ttdef"><b>Definition:</b> <a href="SCCPSolver_8cpp_source.html#l01647">SCCPSolver.cpp:1647</a></div></div>
<div class="ttc" id="aFunctionSpecialization_8cpp_html_a1ab61b5210a970e66d3240dfda58ca3a"><div class="ttname"><a href="FunctionSpecialization_8cpp.html#a1ab61b5210a970e66d3240dfda58ca3a">ForceFunctionSpecialization</a></div><div class="ttdeci">static cl::opt&lt; bool &gt; ForceFunctionSpecialization(&quot;force-function-specialization&quot;, cl::init(false), cl::Hidden, cl::desc(&quot;Force function specialization for every call site with a &quot; &quot;constant argument&quot;))</div></div>
<div class="ttc" id="astructllvm_1_1cl_1_1desc_html"><div class="ttname"><a href="structllvm_1_1cl_1_1desc.html">llvm::cl::desc</a></div><div class="ttdef"><b>Definition:</b> <a href="CommandLine_8h_source.html#l00414">CommandLine.h:414</a></div></div>
<div class="ttc" id="aFunctionSpecialization_8cpp_html_aa0e59a7001c625d9b5f5ead1df843b7c"><div class="ttname"><a href="FunctionSpecialization_8cpp.html#aa0e59a7001c625d9b5f5ead1df843b7c">cleanup</a></div><div class="ttdeci">static void cleanup(Module &amp;M)</div><div class="ttdoc">Function to clean up the left over intrinsics from SCCP util.</div><div class="ttdef"><b>Definition:</b> <a href="FunctionSpecialization_8cpp_source.html#l00532">FunctionSpecialization.cpp:532</a></div></div>
<div class="ttc" id="aclassllvm_1_1Value_html"><div class="ttname"><a href="classllvm_1_1Value.html">llvm::Value</a></div><div class="ttdoc">LLVM Value Representation.</div><div class="ttdef"><b>Definition:</b> <a href="Value_8h_source.html#l00075">Value.h:75</a></div></div>
<div class="ttc" id="aclassllvm_1_1SCCPSolver_html_af735c79e20ba05ef3be279da333fc927"><div class="ttname"><a href="classllvm_1_1SCCPSolver.html#af735c79e20ba05ef3be279da333fc927">llvm::SCCPSolver::getArgumentTrackedFunctions</a></div><div class="ttdeci">SmallPtrSetImpl&lt; Function * &gt; &amp; getArgumentTrackedFunctions()</div><div class="ttdoc">Return a reference to the set of argument tracked functions.</div><div class="ttdef"><b>Definition:</b> <a href="SCCPSolver_8cpp_source.html#l01698">SCCPSolver.cpp:1698</a></div></div>
<div class="ttc" id="aFunctionSpecialization_8cpp_html_a1c82b8d474d95ecb35975ac9694938cc"><div class="ttname"><a href="FunctionSpecialization_8cpp.html#a1c82b8d474d95ecb35975ac9694938cc">isOverdefined</a></div><div class="ttdeci">static bool isOverdefined(const ValueLatticeElement &amp;LV)</div><div class="ttdef"><b>Definition:</b> <a href="FunctionSpecialization_8cpp_source.html#l00072">FunctionSpecialization.cpp:72</a></div></div>
<div class="ttc" id="aclassFunctionSpecializer_html_adda562f7cb7cce90a6dd71d16c5c2fa6"><div class="ttname"><a href="classFunctionSpecializer.html#adda562f7cb7cce90a6dd71d16c5c2fa6">FunctionSpecializer::tryToReplaceWithConstant</a></div><div class="ttdeci">bool tryToReplaceWithConstant(Value *V)</div><div class="ttdef"><b>Definition:</b> <a href="FunctionSpecialization_8cpp_source.html#l00133">FunctionSpecialization.cpp:133</a></div></div>
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated on Tue Feb 8 2022 04:55:24 for LLVM by&#160;<a href="http://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.8.20
</small></address>
</body>
</html>
