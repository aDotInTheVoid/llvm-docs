<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.20"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>LLVM: lib/Transforms/IPO/IROutliner.cpp Source File</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<script type="text/x-mathjax-config">
  MathJax.Hub.Config({
    extensions: ["tex2jax.js"],
    jax: ["input/TeX","output/HTML-CSS"],
});
</script>
<script type="text/javascript" async="async" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.7/MathJax.js/MathJax.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">LLVM
   &#160;<span id="projectnumber">13.0.1</span>
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.20 -->
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',false,false,'search.php','Search');
});
/* @license-end */</script>
<div id="main-nav"></div>
<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="dir_97aefd0d527b934f1d99a682da8fe6a9.html">lib</a></li><li class="navelem"><a class="el" href="dir_a72932e0778af28115095468f6286ff8.html">Transforms</a></li><li class="navelem"><a class="el" href="dir_13abb262e9c52ddea8d07639819afd6c.html">IPO</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="headertitle">
<div class="title">IROutliner.cpp</div>  </div>
</div><!--header-->
<div class="contents">
<a href="IROutliner_8cpp.html">Go to the documentation of this file.</a><div class="fragment"><div class="line"><a name="l00001"></a><span class="lineno">    1</span>&#160;<span class="comment">//===- IROutliner.cpp -- Outline Similar Regions ----------------*- C++ -*-===//</span></div>
<div class="line"><a name="l00002"></a><span class="lineno">    2</span>&#160;<span class="comment">//</span></div>
<div class="line"><a name="l00003"></a><span class="lineno">    3</span>&#160;<span class="comment">// Part of the LLVM Project, under the Apache License v2.0 with LLVM Exceptions.</span></div>
<div class="line"><a name="l00004"></a><span class="lineno">    4</span>&#160;<span class="comment">// See https://llvm.org/LICENSE.txt for license information.</span></div>
<div class="line"><a name="l00005"></a><span class="lineno">    5</span>&#160;<span class="comment">// SPDX-License-Identifier: Apache-2.0 WITH LLVM-exception</span></div>
<div class="line"><a name="l00006"></a><span class="lineno">    6</span>&#160;<span class="comment">//</span></div>
<div class="line"><a name="l00007"></a><span class="lineno">    7</span>&#160;<span class="comment">//===----------------------------------------------------------------------===//</span><span class="comment"></span></div>
<div class="line"><a name="l00008"></a><span class="lineno">    8</span>&#160;<span class="comment">///</span></div>
<div class="line"><a name="l00009"></a><span class="lineno">    9</span>&#160;<span class="comment">/// \file</span></div>
<div class="line"><a name="l00010"></a><span class="lineno">   10</span>&#160;<span class="comment"></span><span class="comment">// Implementation for the IROutliner which is used by the IROutliner Pass.</span></div>
<div class="line"><a name="l00011"></a><span class="lineno">   11</span>&#160;<span class="comment">//</span></div>
<div class="line"><a name="l00012"></a><span class="lineno">   12</span>&#160;<span class="comment">//===----------------------------------------------------------------------===//</span></div>
<div class="line"><a name="l00013"></a><span class="lineno">   13</span>&#160; </div>
<div class="line"><a name="l00014"></a><span class="lineno">   14</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="IROutliner_8h.html">llvm/Transforms/IPO/IROutliner.h</a>&quot;</span></div>
<div class="line"><a name="l00015"></a><span class="lineno">   15</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="IRSimilarityIdentifier_8h.html">llvm/Analysis/IRSimilarityIdentifier.h</a>&quot;</span></div>
<div class="line"><a name="l00016"></a><span class="lineno">   16</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="OptimizationRemarkEmitter_8h.html">llvm/Analysis/OptimizationRemarkEmitter.h</a>&quot;</span></div>
<div class="line"><a name="l00017"></a><span class="lineno">   17</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="TargetTransformInfo_8h.html">llvm/Analysis/TargetTransformInfo.h</a>&quot;</span></div>
<div class="line"><a name="l00018"></a><span class="lineno">   18</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="Attributes_8h.html">llvm/IR/Attributes.h</a>&quot;</span></div>
<div class="line"><a name="l00019"></a><span class="lineno">   19</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="DebugInfoMetadata_8h.html">llvm/IR/DebugInfoMetadata.h</a>&quot;</span></div>
<div class="line"><a name="l00020"></a><span class="lineno">   20</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="DIBuilder_8h.html">llvm/IR/DIBuilder.h</a>&quot;</span></div>
<div class="line"><a name="l00021"></a><span class="lineno">   21</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="Mangler_8h.html">llvm/IR/Mangler.h</a>&quot;</span></div>
<div class="line"><a name="l00022"></a><span class="lineno">   22</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="PassManager_8h.html">llvm/IR/PassManager.h</a>&quot;</span></div>
<div class="line"><a name="l00023"></a><span class="lineno">   23</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="InitializePasses_8h.html">llvm/InitializePasses.h</a>&quot;</span></div>
<div class="line"><a name="l00024"></a><span class="lineno">   24</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="Pass_8h.html">llvm/Pass.h</a>&quot;</span></div>
<div class="line"><a name="l00025"></a><span class="lineno">   25</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="CommandLine_8h.html">llvm/Support/CommandLine.h</a>&quot;</span></div>
<div class="line"><a name="l00026"></a><span class="lineno">   26</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="llvm_2Transforms_2IPO_8h.html">llvm/Transforms/IPO.h</a>&quot;</span></div>
<div class="line"><a name="l00027"></a><span class="lineno">   27</span>&#160;<span class="preprocessor">#include &lt;map&gt;</span></div>
<div class="line"><a name="l00028"></a><span class="lineno">   28</span>&#160;<span class="preprocessor">#include &lt;set&gt;</span></div>
<div class="line"><a name="l00029"></a><span class="lineno">   29</span>&#160;<span class="preprocessor">#include &lt;vector&gt;</span></div>
<div class="line"><a name="l00030"></a><span class="lineno">   30</span>&#160; </div>
<div class="line"><a name="l00031"></a><span class="lineno"><a class="line" href="IROutliner_8cpp.html#ad78e062f62e0d6e453941fb4ca843e4d">   31</a></span>&#160;<span class="preprocessor">#define DEBUG_TYPE &quot;iroutliner&quot;</span></div>
<div class="line"><a name="l00032"></a><span class="lineno">   32</span>&#160; </div>
<div class="line"><a name="l00033"></a><span class="lineno">   33</span>&#160;<span class="keyword">using namespace </span><a class="code" href="namespacellvm.html">llvm</a>;</div>
<div class="line"><a name="l00034"></a><span class="lineno">   34</span>&#160;<span class="keyword">using namespace </span>IRSimilarity;</div>
<div class="line"><a name="l00035"></a><span class="lineno">   35</span>&#160; </div>
<div class="line"><a name="l00036"></a><span class="lineno">   36</span>&#160;<span class="comment">// Set to true if the user wants the ir outliner to run on linkonceodr linkage</span></div>
<div class="line"><a name="l00037"></a><span class="lineno">   37</span>&#160;<span class="comment">// functions. This is false by default because the linker can dedupe linkonceodr</span></div>
<div class="line"><a name="l00038"></a><span class="lineno">   38</span>&#160;<span class="comment">// functions. Since the outliner is confined to a single module (modulo LTO),</span></div>
<div class="line"><a name="l00039"></a><span class="lineno">   39</span>&#160;<span class="comment">// this is off by default. It should, however, be the default behavior in</span></div>
<div class="line"><a name="l00040"></a><span class="lineno">   40</span>&#160;<span class="comment">// LTO.</span></div>
<div class="line"><a name="l00041"></a><span class="lineno"><a class="line" href="IROutliner_8cpp.html#a21da4953c61d301ca9402aed0ed89bd2">   41</a></span>&#160;<span class="keyword">static</span> <a class="code" href="classllvm_1_1cl_1_1opt.html">cl::opt&lt;bool&gt;</a> <a class="code" href="IROutliner_8cpp.html#a21da4953c61d301ca9402aed0ed89bd2">EnableLinkOnceODRIROutlining</a>(</div>
<div class="line"><a name="l00042"></a><span class="lineno">   42</span>&#160;    <span class="stringliteral">&quot;enable-linkonceodr-ir-outlining&quot;</span>, <a class="code" href="namespacellvm_1_1cl.html#a68075925a54790e71ca790e1d4f21a40a263ac008d8d31f13ce460395fc4cf7e6">cl::Hidden</a>,</div>
<div class="line"><a name="l00043"></a><span class="lineno">   43</span>&#160;    <a class="code" href="structllvm_1_1cl_1_1desc.html">cl::desc</a>(<span class="stringliteral">&quot;Enable the IR outliner on linkonceodr functions&quot;</span>),</div>
<div class="line"><a name="l00044"></a><span class="lineno">   44</span>&#160;    <a class="code" href="namespacellvm_1_1cl.html#a10a041239ae1870cfcc064bfaa79fb65">cl::init</a>(<span class="keyword">false</span>));</div>
<div class="line"><a name="l00045"></a><span class="lineno">   45</span>&#160; </div>
<div class="line"><a name="l00046"></a><span class="lineno">   46</span>&#160;<span class="comment">// This is a debug option to test small pieces of code to ensure that outlining</span></div>
<div class="line"><a name="l00047"></a><span class="lineno">   47</span>&#160;<span class="comment">// works correctly.</span></div>
<div class="line"><a name="l00048"></a><span class="lineno"><a class="line" href="IROutliner_8cpp.html#a05efe971c4e940f01a5e34bc41cd602a">   48</a></span>&#160;<span class="keyword">static</span> <a class="code" href="classllvm_1_1cl_1_1opt.html">cl::opt&lt;bool&gt;</a> <a class="code" href="IROutliner_8cpp.html#a05efe971c4e940f01a5e34bc41cd602a">NoCostModel</a>(</div>
<div class="line"><a name="l00049"></a><span class="lineno">   49</span>&#160;    <span class="stringliteral">&quot;ir-outlining-no-cost&quot;</span>, <a class="code" href="namespacellvm_1_1cl.html#a10a041239ae1870cfcc064bfaa79fb65">cl::init</a>(<span class="keyword">false</span>), <a class="code" href="namespacellvm_1_1cl.html#a68075925a54790e71ca790e1d4f21a40ab81f279502bb9ca74e6629cfb62844be">cl::ReallyHidden</a>,</div>
<div class="line"><a name="l00050"></a><span class="lineno">   50</span>&#160;    <a class="code" href="structllvm_1_1cl_1_1desc.html">cl::desc</a>(<span class="stringliteral">&quot;Debug option to outline greedily, without restriction that &quot;</span></div>
<div class="line"><a name="l00051"></a><span class="lineno">   51</span>&#160;             <span class="stringliteral">&quot;calculated benefit outweighs cost&quot;</span>));</div>
<div class="line"><a name="l00052"></a><span class="lineno">   52</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l00053"></a><span class="lineno">   53</span>&#160;<span class="comment">/// The OutlinableGroup holds all the overarching information for outlining</span></div>
<div class="line"><a name="l00054"></a><span class="lineno">   54</span>&#160;<span class="comment">/// a set of regions that are structurally similar to one another, such as the</span></div>
<div class="line"><a name="l00055"></a><span class="lineno">   55</span>&#160;<span class="comment">/// types of the overall function, the output blocks, the sets of stores needed</span></div>
<div class="line"><a name="l00056"></a><span class="lineno">   56</span>&#160;<span class="comment">/// and a list of the different regions. This information is used in the</span></div>
<div class="line"><a name="l00057"></a><span class="lineno">   57</span>&#160;<span class="comment">/// deduplication of extracted regions with the same structure.</span></div>
<div class="line"><a name="l00058"></a><span class="lineno"><a class="line" href="structOutlinableGroup.html">   58</a></span>&#160;<span class="comment"></span><span class="keyword">struct </span><a class="code" href="structOutlinableGroup.html">OutlinableGroup</a> {<span class="comment"></span></div>
<div class="line"><a name="l00059"></a><span class="lineno">   59</span>&#160;<span class="comment">  /// The sections that could be outlined</span></div>
<div class="line"><a name="l00060"></a><span class="lineno"><a class="line" href="structOutlinableGroup.html#a75bbc3b17e5b70e0e1fac394f26b5c11">   60</a></span>&#160;<span class="comment"></span>  std::vector&lt;OutlinableRegion *&gt; <a class="code" href="structOutlinableGroup.html#a75bbc3b17e5b70e0e1fac394f26b5c11">Regions</a>;</div>
<div class="line"><a name="l00061"></a><span class="lineno">   61</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l00062"></a><span class="lineno">   62</span>&#160;<span class="comment">  /// The argument types for the function created as the overall function to</span></div>
<div class="line"><a name="l00063"></a><span class="lineno">   63</span>&#160;<span class="comment">  /// replace the extracted function for each region.</span></div>
<div class="line"><a name="l00064"></a><span class="lineno"><a class="line" href="structOutlinableGroup.html#a25b29490419d6ea97ce7d79dc58f306d">   64</a></span>&#160;<span class="comment"></span>  std::vector&lt;Type *&gt; <a class="code" href="structOutlinableGroup.html#a25b29490419d6ea97ce7d79dc58f306d">ArgumentTypes</a>;<span class="comment"></span></div>
<div class="line"><a name="l00065"></a><span class="lineno">   65</span>&#160;<span class="comment">  /// The FunctionType for the overall function.</span></div>
<div class="line"><a name="l00066"></a><span class="lineno"><a class="line" href="structOutlinableGroup.html#aab2165e523387ae034bc2117b13c5d51">   66</a></span>&#160;<span class="comment"></span>  <a class="code" href="classllvm_1_1FunctionType.html">FunctionType</a> *OutlinedFunctionType = <span class="keyword">nullptr</span>;<span class="comment"></span></div>
<div class="line"><a name="l00067"></a><span class="lineno">   67</span>&#160;<span class="comment">  /// The Function for the collective overall function.</span></div>
<div class="line"><a name="l00068"></a><span class="lineno"><a class="line" href="structOutlinableGroup.html#a95133d99b799f98e5c92dacc3028c621">   68</a></span>&#160;<span class="comment"></span>  <a class="code" href="classllvm_1_1Function.html">Function</a> *OutlinedFunction = <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l00069"></a><span class="lineno">   69</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l00070"></a><span class="lineno">   70</span>&#160;<span class="comment">  /// Flag for whether we should not consider this group of OutlinableRegions</span></div>
<div class="line"><a name="l00071"></a><span class="lineno">   71</span>&#160;<span class="comment">  /// for extraction.</span></div>
<div class="line"><a name="l00072"></a><span class="lineno"><a class="line" href="structOutlinableGroup.html#a7bf6409b01dd04465404d268beec0898">   72</a></span>&#160;<span class="comment"></span>  <span class="keywordtype">bool</span> IgnoreGroup = <span class="keyword">false</span>;</div>
<div class="line"><a name="l00073"></a><span class="lineno">   73</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l00074"></a><span class="lineno">   74</span>&#160;<span class="comment">  /// The return block for the overall function.</span></div>
<div class="line"><a name="l00075"></a><span class="lineno"><a class="line" href="structOutlinableGroup.html#a40f09cb42d8cb90b4e8fdbd36da765d8">   75</a></span>&#160;<span class="comment"></span>  <a class="code" href="classllvm_1_1BasicBlock.html">BasicBlock</a> *EndBB = <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l00076"></a><span class="lineno">   76</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l00077"></a><span class="lineno">   77</span>&#160;<span class="comment">  /// A set containing the different GVN store sets needed. Each array contains</span></div>
<div class="line"><a name="l00078"></a><span class="lineno">   78</span>&#160;<span class="comment">  /// a sorted list of the different values that need to be stored into output</span></div>
<div class="line"><a name="l00079"></a><span class="lineno">   79</span>&#160;<span class="comment">  /// registers.</span></div>
<div class="line"><a name="l00080"></a><span class="lineno"><a class="line" href="structOutlinableGroup.html#a53e3a8f28cb8e7a01334b7560467d9ea">   80</a></span>&#160;<span class="comment"></span>  <a class="code" href="classllvm_1_1DenseSet.html">DenseSet&lt;ArrayRef&lt;unsigned&gt;</a>&gt; <a class="code" href="structOutlinableGroup.html#a53e3a8f28cb8e7a01334b7560467d9ea">OutputGVNCombinations</a>;</div>
<div class="line"><a name="l00081"></a><span class="lineno">   81</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l00082"></a><span class="lineno">   82</span>&#160;<span class="comment">  /// Flag for whether the \ref ArgumentTypes have been defined after the</span></div>
<div class="line"><a name="l00083"></a><span class="lineno">   83</span>&#160;<span class="comment">  /// extraction of the first region.</span></div>
<div class="line"><a name="l00084"></a><span class="lineno"><a class="line" href="structOutlinableGroup.html#a9fabb6e6f74e4ef23575f45ea098b827">   84</a></span>&#160;<span class="comment"></span>  <span class="keywordtype">bool</span> InputTypesSet = <span class="keyword">false</span>;</div>
<div class="line"><a name="l00085"></a><span class="lineno">   85</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l00086"></a><span class="lineno">   86</span>&#160;<span class="comment">  /// The number of input values in \ref ArgumentTypes.  Anything after this</span></div>
<div class="line"><a name="l00087"></a><span class="lineno">   87</span>&#160;<span class="comment">  /// index in ArgumentTypes is an output argument.</span></div>
<div class="line"><a name="l00088"></a><span class="lineno"><a class="line" href="structOutlinableGroup.html#aeab6020692f93361cff45734711204fc">   88</a></span>&#160;<span class="comment"></span>  <span class="keywordtype">unsigned</span> NumAggregateInputs = 0;</div>
<div class="line"><a name="l00089"></a><span class="lineno">   89</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l00090"></a><span class="lineno">   90</span>&#160;<span class="comment">  /// The number of instructions that will be outlined by extracting \ref</span></div>
<div class="line"><a name="l00091"></a><span class="lineno">   91</span>&#160;<span class="comment">  /// Regions.</span></div>
<div class="line"><a name="l00092"></a><span class="lineno"><a class="line" href="structOutlinableGroup.html#ae0f753d38671d8138865d30d8cf5720b">   92</a></span>&#160;<span class="comment"></span>  <a class="code" href="classllvm_1_1InstructionCost.html">InstructionCost</a> Benefit = 0;<span class="comment"></span></div>
<div class="line"><a name="l00093"></a><span class="lineno">   93</span>&#160;<span class="comment">  /// The number of added instructions needed for the outlining of the \ref</span></div>
<div class="line"><a name="l00094"></a><span class="lineno">   94</span>&#160;<span class="comment">  /// Regions.</span></div>
<div class="line"><a name="l00095"></a><span class="lineno"><a class="line" href="structOutlinableGroup.html#a69a17456977b7d8eb5795eb51870d41c">   95</a></span>&#160;<span class="comment"></span>  <a class="code" href="classllvm_1_1InstructionCost.html">InstructionCost</a> Cost = 0;</div>
<div class="line"><a name="l00096"></a><span class="lineno">   96</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l00097"></a><span class="lineno">   97</span>&#160;<span class="comment">  /// The argument that needs to be marked with the swifterr attribute.  If not</span></div>
<div class="line"><a name="l00098"></a><span class="lineno">   98</span>&#160;<span class="comment">  /// needed, there is no value.</span></div>
<div class="line"><a name="l00099"></a><span class="lineno"><a class="line" href="structOutlinableGroup.html#a41d9175e78c75fb14134d35303ded45a">   99</a></span>&#160;<span class="comment"></span>  <a class="code" href="classllvm_1_1Optional.html">Optional&lt;unsigned&gt;</a> <a class="code" href="structOutlinableGroup.html#a41d9175e78c75fb14134d35303ded45a">SwiftErrorArgument</a>;</div>
<div class="line"><a name="l00100"></a><span class="lineno">  100</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l00101"></a><span class="lineno">  101</span>&#160;<span class="comment">  /// For the \ref Regions, we look at every Value.  If it is a constant,</span></div>
<div class="line"><a name="l00102"></a><span class="lineno">  102</span>&#160;<span class="comment">  /// we check whether it is the same in Region.</span></div>
<div class="line"><a name="l00103"></a><span class="lineno">  103</span>&#160;<span class="comment">  ///</span></div>
<div class="line"><a name="l00104"></a><span class="lineno">  104</span>&#160;<span class="comment">  /// \param [in,out] NotSame contains the global value numbers where the</span></div>
<div class="line"><a name="l00105"></a><span class="lineno">  105</span>&#160;<span class="comment">  /// constant is not always the same, and must be passed in as an argument.</span></div>
<div class="line"><a name="l00106"></a><span class="lineno">  106</span>&#160;<span class="comment"></span>  <span class="keywordtype">void</span> findSameConstants(<a class="code" href="classllvm_1_1DenseSet.html">DenseSet&lt;unsigned&gt;</a> &amp;NotSame);</div>
<div class="line"><a name="l00107"></a><span class="lineno">  107</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l00108"></a><span class="lineno">  108</span>&#160;<span class="comment">  /// For the regions, look at each set of GVN stores needed and account for</span></div>
<div class="line"><a name="l00109"></a><span class="lineno">  109</span>&#160;<span class="comment">  /// each combination.  Add an argument to the argument types if there is</span></div>
<div class="line"><a name="l00110"></a><span class="lineno">  110</span>&#160;<span class="comment">  /// more than one combination.</span></div>
<div class="line"><a name="l00111"></a><span class="lineno">  111</span>&#160;<span class="comment">  ///</span></div>
<div class="line"><a name="l00112"></a><span class="lineno">  112</span>&#160;<span class="comment">  /// \param [in] M - The module we are outlining from.</span></div>
<div class="line"><a name="l00113"></a><span class="lineno">  113</span>&#160;<span class="comment"></span>  <span class="keywordtype">void</span> collectGVNStoreSets(<a class="code" href="classllvm_1_1Module.html">Module</a> &amp;M);</div>
<div class="line"><a name="l00114"></a><span class="lineno">  114</span>&#160;};</div>
<div class="line"><a name="l00115"></a><span class="lineno">  115</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l00116"></a><span class="lineno">  116</span>&#160;<span class="comment">/// Move the contents of \p SourceBB to before the last instruction of \p</span></div>
<div class="line"><a name="l00117"></a><span class="lineno">  117</span>&#160;<span class="comment">/// TargetBB.</span></div>
<div class="line"><a name="l00118"></a><span class="lineno">  118</span>&#160;<span class="comment">/// \param SourceBB - the BasicBlock to pull Instructions from.</span></div>
<div class="line"><a name="l00119"></a><span class="lineno">  119</span>&#160;<span class="comment">/// \param TargetBB - the BasicBlock to put Instruction into.</span></div>
<div class="line"><a name="l00120"></a><span class="lineno"><a class="line" href="IROutliner_8cpp.html#a3afc8c0c69b0c55edce3be13d5b7cc32">  120</a></span>&#160;<span class="comment"></span><span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code" href="IROutliner_8cpp.html#a3afc8c0c69b0c55edce3be13d5b7cc32">moveBBContents</a>(<a class="code" href="classllvm_1_1BasicBlock.html">BasicBlock</a> &amp;SourceBB, <a class="code" href="classllvm_1_1BasicBlock.html">BasicBlock</a> &amp;TargetBB) {</div>
<div class="line"><a name="l00121"></a><span class="lineno">  121</span>&#160;  <a class="code" href="classllvm_1_1BasicBlock.html#a98c0a84a5dfa8bce341c829709f171e5">BasicBlock::iterator</a> BBCurr, BBEnd, BBNext;</div>
<div class="line"><a name="l00122"></a><span class="lineno">  122</span>&#160;  <span class="keywordflow">for</span> (BBCurr = SourceBB.<a class="code" href="classllvm_1_1BasicBlock.html#a0ed5f3ab3c2e4196ee0cffffa080c062">begin</a>(), BBEnd = SourceBB.<a class="code" href="classllvm_1_1BasicBlock.html#a0b4e7bee9b8575cc7db73329f1a561bd">end</a>(); BBCurr != BBEnd;</div>
<div class="line"><a name="l00123"></a><span class="lineno">  123</span>&#160;       BBCurr = BBNext) {</div>
<div class="line"><a name="l00124"></a><span class="lineno">  124</span>&#160;    BBNext = std::next(BBCurr);</div>
<div class="line"><a name="l00125"></a><span class="lineno">  125</span>&#160;    BBCurr-&gt;moveBefore(TargetBB, TargetBB.<a class="code" href="classllvm_1_1BasicBlock.html#a0b4e7bee9b8575cc7db73329f1a561bd">end</a>());</div>
<div class="line"><a name="l00126"></a><span class="lineno">  126</span>&#160;  }</div>
<div class="line"><a name="l00127"></a><span class="lineno">  127</span>&#160;}</div>
<div class="line"><a name="l00128"></a><span class="lineno">  128</span>&#160; </div>
<div class="line"><a name="l00129"></a><span class="lineno"><a class="line" href="structllvm_1_1OutlinableRegion.html#a761b3c02cd196cb5f6fb019bcd86866e">  129</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="structllvm_1_1OutlinableRegion.html#a761b3c02cd196cb5f6fb019bcd86866e">OutlinableRegion::splitCandidate</a>() {</div>
<div class="line"><a name="l00130"></a><span class="lineno">  130</span>&#160;  <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(!CandidateSplit &amp;&amp; <span class="stringliteral">&quot;Candidate already split!&quot;</span>);</div>
<div class="line"><a name="l00131"></a><span class="lineno">  131</span>&#160; </div>
<div class="line"><a name="l00132"></a><span class="lineno">  132</span>&#160;  <a class="code" href="classllvm_1_1Instruction.html">Instruction</a> *StartInst = (*Candidate-&gt;begin()).Inst;</div>
<div class="line"><a name="l00133"></a><span class="lineno">  133</span>&#160;  <a class="code" href="classllvm_1_1Instruction.html">Instruction</a> *EndInst = (*Candidate-&gt;end()).Inst;</div>
<div class="line"><a name="l00134"></a><span class="lineno">  134</span>&#160;  <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(StartInst &amp;&amp; EndInst &amp;&amp; <span class="stringliteral">&quot;Expected a start and end instruction?&quot;</span>);</div>
<div class="line"><a name="l00135"></a><span class="lineno">  135</span>&#160;  StartBB = StartInst-&gt;<a class="code" href="classllvm_1_1Instruction.html#a1a7f07aaef6a3bee130bf0e0f0536802">getParent</a>();</div>
<div class="line"><a name="l00136"></a><span class="lineno">  136</span>&#160;  PrevBB = StartBB;</div>
<div class="line"><a name="l00137"></a><span class="lineno">  137</span>&#160; </div>
<div class="line"><a name="l00138"></a><span class="lineno">  138</span>&#160;  <span class="comment">// The basic block gets split like so:</span></div>
<div class="line"><a name="l00139"></a><span class="lineno">  139</span>&#160;  <span class="comment">// block:                 block:</span></div>
<div class="line"><a name="l00140"></a><span class="lineno">  140</span>&#160;  <span class="comment">//   inst1                  inst1</span></div>
<div class="line"><a name="l00141"></a><span class="lineno">  141</span>&#160;  <span class="comment">//   inst2                  inst2</span></div>
<div class="line"><a name="l00142"></a><span class="lineno">  142</span>&#160;  <span class="comment">//   region1               br block_to_outline</span></div>
<div class="line"><a name="l00143"></a><span class="lineno">  143</span>&#160;  <span class="comment">//   region2              block_to_outline:</span></div>
<div class="line"><a name="l00144"></a><span class="lineno">  144</span>&#160;  <span class="comment">//   region3          -&gt;    region1</span></div>
<div class="line"><a name="l00145"></a><span class="lineno">  145</span>&#160;  <span class="comment">//   region4                region2</span></div>
<div class="line"><a name="l00146"></a><span class="lineno">  146</span>&#160;  <span class="comment">//   inst3                  region3</span></div>
<div class="line"><a name="l00147"></a><span class="lineno">  147</span>&#160;  <span class="comment">//   inst4                  region4</span></div>
<div class="line"><a name="l00148"></a><span class="lineno">  148</span>&#160;  <span class="comment">//                          br block_after_outline</span></div>
<div class="line"><a name="l00149"></a><span class="lineno">  149</span>&#160;  <span class="comment">//                        block_after_outline:</span></div>
<div class="line"><a name="l00150"></a><span class="lineno">  150</span>&#160;  <span class="comment">//                          inst3</span></div>
<div class="line"><a name="l00151"></a><span class="lineno">  151</span>&#160;  <span class="comment">//                          inst4</span></div>
<div class="line"><a name="l00152"></a><span class="lineno">  152</span>&#160; </div>
<div class="line"><a name="l00153"></a><span class="lineno">  153</span>&#160;  std::string OriginalName = PrevBB-&gt;<a class="code" href="classllvm_1_1Value.html#adb5c319f5905c1d3ca9eb5df546388c5">getName</a>().<a class="code" href="classllvm_1_1StringRef.html#ae2338e6739b671ea853b6154db368292">str</a>();</div>
<div class="line"><a name="l00154"></a><span class="lineno">  154</span>&#160; </div>
<div class="line"><a name="l00155"></a><span class="lineno">  155</span>&#160;  StartBB = PrevBB-&gt;splitBasicBlock(StartInst, OriginalName + <span class="stringliteral">&quot;_to_outline&quot;</span>);</div>
<div class="line"><a name="l00156"></a><span class="lineno">  156</span>&#160; </div>
<div class="line"><a name="l00157"></a><span class="lineno">  157</span>&#160;  <span class="comment">// This is the case for the inner block since we do not have to include</span></div>
<div class="line"><a name="l00158"></a><span class="lineno">  158</span>&#160;  <span class="comment">// multiple blocks.</span></div>
<div class="line"><a name="l00159"></a><span class="lineno">  159</span>&#160;  EndBB = StartBB;</div>
<div class="line"><a name="l00160"></a><span class="lineno">  160</span>&#160;  FollowBB = EndBB-&gt;splitBasicBlock(EndInst, OriginalName + <span class="stringliteral">&quot;_after_outline&quot;</span>);</div>
<div class="line"><a name="l00161"></a><span class="lineno">  161</span>&#160; </div>
<div class="line"><a name="l00162"></a><span class="lineno">  162</span>&#160;  CandidateSplit = <span class="keyword">true</span>;</div>
<div class="line"><a name="l00163"></a><span class="lineno">  163</span>&#160;}</div>
<div class="line"><a name="l00164"></a><span class="lineno">  164</span>&#160; </div>
<div class="line"><a name="l00165"></a><span class="lineno"><a class="line" href="structllvm_1_1OutlinableRegion.html#af5d7aa7988108e9377f154cf6a22f02b">  165</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="structllvm_1_1OutlinableRegion.html#af5d7aa7988108e9377f154cf6a22f02b">OutlinableRegion::reattachCandidate</a>() {</div>
<div class="line"><a name="l00166"></a><span class="lineno">  166</span>&#160;  <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(CandidateSplit &amp;&amp; <span class="stringliteral">&quot;Candidate is not split!&quot;</span>);</div>
<div class="line"><a name="l00167"></a><span class="lineno">  167</span>&#160; </div>
<div class="line"><a name="l00168"></a><span class="lineno">  168</span>&#160;  <span class="comment">// The basic block gets reattached like so:</span></div>
<div class="line"><a name="l00169"></a><span class="lineno">  169</span>&#160;  <span class="comment">// block:                        block:</span></div>
<div class="line"><a name="l00170"></a><span class="lineno">  170</span>&#160;  <span class="comment">//   inst1                         inst1</span></div>
<div class="line"><a name="l00171"></a><span class="lineno">  171</span>&#160;  <span class="comment">//   inst2                         inst2</span></div>
<div class="line"><a name="l00172"></a><span class="lineno">  172</span>&#160;  <span class="comment">//   br block_to_outline           region1</span></div>
<div class="line"><a name="l00173"></a><span class="lineno">  173</span>&#160;  <span class="comment">// block_to_outline:        -&gt;     region2</span></div>
<div class="line"><a name="l00174"></a><span class="lineno">  174</span>&#160;  <span class="comment">//   region1                       region3</span></div>
<div class="line"><a name="l00175"></a><span class="lineno">  175</span>&#160;  <span class="comment">//   region2                       region4</span></div>
<div class="line"><a name="l00176"></a><span class="lineno">  176</span>&#160;  <span class="comment">//   region3                       inst3</span></div>
<div class="line"><a name="l00177"></a><span class="lineno">  177</span>&#160;  <span class="comment">//   region4                       inst4</span></div>
<div class="line"><a name="l00178"></a><span class="lineno">  178</span>&#160;  <span class="comment">//   br block_after_outline</span></div>
<div class="line"><a name="l00179"></a><span class="lineno">  179</span>&#160;  <span class="comment">// block_after_outline:</span></div>
<div class="line"><a name="l00180"></a><span class="lineno">  180</span>&#160;  <span class="comment">//   inst3</span></div>
<div class="line"><a name="l00181"></a><span class="lineno">  181</span>&#160;  <span class="comment">//   inst4</span></div>
<div class="line"><a name="l00182"></a><span class="lineno">  182</span>&#160;  <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(StartBB != <span class="keyword">nullptr</span> &amp;&amp; <span class="stringliteral">&quot;StartBB for Candidate is not defined!&quot;</span>);</div>
<div class="line"><a name="l00183"></a><span class="lineno">  183</span>&#160;  <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(FollowBB != <span class="keyword">nullptr</span> &amp;&amp; <span class="stringliteral">&quot;StartBB for Candidate is not defined!&quot;</span>);</div>
<div class="line"><a name="l00184"></a><span class="lineno">  184</span>&#160; </div>
<div class="line"><a name="l00185"></a><span class="lineno">  185</span>&#160;  <span class="comment">// StartBB should only have one predecessor since we put an unconditional</span></div>
<div class="line"><a name="l00186"></a><span class="lineno">  186</span>&#160;  <span class="comment">// branch at the end of PrevBB when we split the BasicBlock.</span></div>
<div class="line"><a name="l00187"></a><span class="lineno">  187</span>&#160;  PrevBB = StartBB-&gt;getSinglePredecessor();</div>
<div class="line"><a name="l00188"></a><span class="lineno">  188</span>&#160;  <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(PrevBB != <span class="keyword">nullptr</span> &amp;&amp;</div>
<div class="line"><a name="l00189"></a><span class="lineno">  189</span>&#160;         <span class="stringliteral">&quot;No Predecessor for the region start basic block!&quot;</span>);</div>
<div class="line"><a name="l00190"></a><span class="lineno">  190</span>&#160; </div>
<div class="line"><a name="l00191"></a><span class="lineno">  191</span>&#160;  <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(PrevBB-&gt;getTerminator() &amp;&amp; <span class="stringliteral">&quot;Terminator removed from PrevBB!&quot;</span>);</div>
<div class="line"><a name="l00192"></a><span class="lineno">  192</span>&#160;  <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(EndBB-&gt;getTerminator() &amp;&amp; <span class="stringliteral">&quot;Terminator removed from EndBB!&quot;</span>);</div>
<div class="line"><a name="l00193"></a><span class="lineno">  193</span>&#160;  PrevBB-&gt;getTerminator()-&gt;eraseFromParent();</div>
<div class="line"><a name="l00194"></a><span class="lineno">  194</span>&#160;  EndBB-&gt;getTerminator()-&gt;eraseFromParent();</div>
<div class="line"><a name="l00195"></a><span class="lineno">  195</span>&#160; </div>
<div class="line"><a name="l00196"></a><span class="lineno">  196</span>&#160;  <a class="code" href="IROutliner_8cpp.html#a3afc8c0c69b0c55edce3be13d5b7cc32">moveBBContents</a>(*StartBB, *PrevBB);</div>
<div class="line"><a name="l00197"></a><span class="lineno">  197</span>&#160; </div>
<div class="line"><a name="l00198"></a><span class="lineno">  198</span>&#160;  <a class="code" href="classllvm_1_1BasicBlock.html">BasicBlock</a> *PlacementBB = PrevBB;</div>
<div class="line"><a name="l00199"></a><span class="lineno">  199</span>&#160;  <span class="keywordflow">if</span> (StartBB != EndBB)</div>
<div class="line"><a name="l00200"></a><span class="lineno">  200</span>&#160;    PlacementBB = EndBB;</div>
<div class="line"><a name="l00201"></a><span class="lineno">  201</span>&#160;  <a class="code" href="IROutliner_8cpp.html#a3afc8c0c69b0c55edce3be13d5b7cc32">moveBBContents</a>(*FollowBB, *PlacementBB);</div>
<div class="line"><a name="l00202"></a><span class="lineno">  202</span>&#160; </div>
<div class="line"><a name="l00203"></a><span class="lineno">  203</span>&#160;  PrevBB-&gt;replaceSuccessorsPhiUsesWith(StartBB, PrevBB);</div>
<div class="line"><a name="l00204"></a><span class="lineno">  204</span>&#160;  PrevBB-&gt;replaceSuccessorsPhiUsesWith(FollowBB, PlacementBB);</div>
<div class="line"><a name="l00205"></a><span class="lineno">  205</span>&#160;  StartBB-&gt;eraseFromParent();</div>
<div class="line"><a name="l00206"></a><span class="lineno">  206</span>&#160;  FollowBB-&gt;eraseFromParent();</div>
<div class="line"><a name="l00207"></a><span class="lineno">  207</span>&#160; </div>
<div class="line"><a name="l00208"></a><span class="lineno">  208</span>&#160;  <span class="comment">// Make sure to save changes back to the StartBB.</span></div>
<div class="line"><a name="l00209"></a><span class="lineno">  209</span>&#160;  StartBB = PrevBB;</div>
<div class="line"><a name="l00210"></a><span class="lineno">  210</span>&#160;  EndBB = <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l00211"></a><span class="lineno">  211</span>&#160;  PrevBB = <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l00212"></a><span class="lineno">  212</span>&#160;  FollowBB = <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l00213"></a><span class="lineno">  213</span>&#160; </div>
<div class="line"><a name="l00214"></a><span class="lineno">  214</span>&#160;  CandidateSplit = <span class="keyword">false</span>;</div>
<div class="line"><a name="l00215"></a><span class="lineno">  215</span>&#160;}</div>
<div class="line"><a name="l00216"></a><span class="lineno">  216</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l00217"></a><span class="lineno">  217</span>&#160;<span class="comment">/// Find whether \p V matches the Constants previously found for the \p GVN.</span></div>
<div class="line"><a name="l00218"></a><span class="lineno">  218</span>&#160;<span class="comment">///</span></div>
<div class="line"><a name="l00219"></a><span class="lineno">  219</span>&#160;<span class="comment">/// \param V - The value to check for consistency.</span></div>
<div class="line"><a name="l00220"></a><span class="lineno">  220</span>&#160;<span class="comment">/// \param GVN - The global value number assigned to \p V.</span></div>
<div class="line"><a name="l00221"></a><span class="lineno">  221</span>&#160;<span class="comment">/// \param GVNToConstant - The mapping of global value number to Constants.</span></div>
<div class="line"><a name="l00222"></a><span class="lineno">  222</span>&#160;<span class="comment">/// \returns true if the Value matches the Constant mapped to by V and false if</span></div>
<div class="line"><a name="l00223"></a><span class="lineno">  223</span>&#160;<span class="comment">/// it \p V is a Constant but does not match.</span></div>
<div class="line"><a name="l00224"></a><span class="lineno">  224</span>&#160;<span class="comment">/// \returns None if \p V is not a Constant.</span></div>
<div class="line"><a name="l00225"></a><span class="lineno">  225</span>&#160;<span class="comment"></span><span class="keyword">static</span> <a class="code" href="classllvm_1_1Optional.html">Optional&lt;bool&gt;</a></div>
<div class="line"><a name="l00226"></a><span class="lineno"><a class="line" href="IROutliner_8cpp.html#a51932312ba2b9411a987be746ee773b2">  226</a></span>&#160;<a class="code" href="IROutliner_8cpp.html#a51932312ba2b9411a987be746ee773b2">constantMatches</a>(<a class="code" href="classllvm_1_1Value.html">Value</a> *V, <span class="keywordtype">unsigned</span> <a class="code" href="classllvm_1_1GVN.html">GVN</a>,</div>
<div class="line"><a name="l00227"></a><span class="lineno">  227</span>&#160;                <a class="code" href="classllvm_1_1DenseMap.html">DenseMap&lt;unsigned, Constant *&gt;</a> &amp;GVNToConstant) {</div>
<div class="line"><a name="l00228"></a><span class="lineno">  228</span>&#160;  <span class="comment">// See if we have a constants</span></div>
<div class="line"><a name="l00229"></a><span class="lineno">  229</span>&#160;  <a class="code" href="classllvm_1_1Constant.html">Constant</a> *CST = dyn_cast&lt;Constant&gt;(V);</div>
<div class="line"><a name="l00230"></a><span class="lineno">  230</span>&#160;  <span class="keywordflow">if</span> (!CST)</div>
<div class="line"><a name="l00231"></a><span class="lineno">  231</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="namespacellvm.html#a6497a581a4f7152729c29a368ac7d7be">None</a>;</div>
<div class="line"><a name="l00232"></a><span class="lineno">  232</span>&#160; </div>
<div class="line"><a name="l00233"></a><span class="lineno">  233</span>&#160;  <span class="comment">// Holds a mapping from a global value number to a Constant.</span></div>
<div class="line"><a name="l00234"></a><span class="lineno">  234</span>&#160;  <a class="code" href="classllvm_1_1DenseMap.html">DenseMap&lt;unsigned, Constant *&gt;::iterator</a> GVNToConstantIt;</div>
<div class="line"><a name="l00235"></a><span class="lineno">  235</span>&#160;  <span class="keywordtype">bool</span> Inserted;</div>
<div class="line"><a name="l00236"></a><span class="lineno">  236</span>&#160; </div>
<div class="line"><a name="l00237"></a><span class="lineno">  237</span>&#160; </div>
<div class="line"><a name="l00238"></a><span class="lineno">  238</span>&#160;  <span class="comment">// If we have a constant, try to make a new entry in the GVNToConstant.</span></div>
<div class="line"><a name="l00239"></a><span class="lineno">  239</span>&#160;  std::tie(GVNToConstantIt, Inserted) =</div>
<div class="line"><a name="l00240"></a><span class="lineno">  240</span>&#160;      GVNToConstant.<a class="code" href="classllvm_1_1DenseMapBase.html#a99f811d53704275b4158c62a2dd138d9">insert</a>(std::make_pair(<a class="code" href="classllvm_1_1GVN.html">GVN</a>, CST));</div>
<div class="line"><a name="l00241"></a><span class="lineno">  241</span>&#160;  <span class="comment">// If it was found and is not equal, it is not the same. We do not</span></div>
<div class="line"><a name="l00242"></a><span class="lineno">  242</span>&#160;  <span class="comment">// handle this case yet, and exit early.</span></div>
<div class="line"><a name="l00243"></a><span class="lineno">  243</span>&#160;  <span class="keywordflow">if</span> (Inserted || (GVNToConstantIt-&gt;second == CST))</div>
<div class="line"><a name="l00244"></a><span class="lineno">  244</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l00245"></a><span class="lineno">  245</span>&#160; </div>
<div class="line"><a name="l00246"></a><span class="lineno">  246</span>&#160;  <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l00247"></a><span class="lineno">  247</span>&#160;}</div>
<div class="line"><a name="l00248"></a><span class="lineno">  248</span>&#160; </div>
<div class="line"><a name="l00249"></a><span class="lineno"><a class="line" href="structllvm_1_1OutlinableRegion.html#a086b69a5012fff81b179e92d137aae33">  249</a></span>&#160;<a class="code" href="classllvm_1_1InstructionCost.html">InstructionCost</a> <a class="code" href="structllvm_1_1OutlinableRegion.html#a086b69a5012fff81b179e92d137aae33">OutlinableRegion::getBenefit</a>(<a class="code" href="classllvm_1_1TargetTransformInfo.html">TargetTransformInfo</a> &amp;<a class="code" href="classllvm_1_1TargetTransformInfo.html">TTI</a>) {</div>
<div class="line"><a name="l00250"></a><span class="lineno">  250</span>&#160;  <a class="code" href="classllvm_1_1InstructionCost.html">InstructionCost</a> Benefit = 0;</div>
<div class="line"><a name="l00251"></a><span class="lineno">  251</span>&#160; </div>
<div class="line"><a name="l00252"></a><span class="lineno">  252</span>&#160;  <span class="comment">// Estimate the benefit of outlining a specific sections of the program.  We</span></div>
<div class="line"><a name="l00253"></a><span class="lineno">  253</span>&#160;  <span class="comment">// delegate mostly this task to the TargetTransformInfo so that if the target</span></div>
<div class="line"><a name="l00254"></a><span class="lineno">  254</span>&#160;  <span class="comment">// has specific changes, we can have a more accurate estimate.</span></div>
<div class="line"><a name="l00255"></a><span class="lineno">  255</span>&#160; </div>
<div class="line"><a name="l00256"></a><span class="lineno">  256</span>&#160;  <span class="comment">// However, getInstructionCost delegates the code size calculation for</span></div>
<div class="line"><a name="l00257"></a><span class="lineno">  257</span>&#160;  <span class="comment">// arithmetic instructions to getArithmeticInstrCost in</span></div>
<div class="line"><a name="l00258"></a><span class="lineno">  258</span>&#160;  <span class="comment">// include/Analysis/TargetTransformImpl.h, where it always estimates that the</span></div>
<div class="line"><a name="l00259"></a><span class="lineno">  259</span>&#160;  <span class="comment">// code size for a division and remainder instruction to be equal to 4, and</span></div>
<div class="line"><a name="l00260"></a><span class="lineno">  260</span>&#160;  <span class="comment">// everything else to 1.  This is not an accurate representation of the</span></div>
<div class="line"><a name="l00261"></a><span class="lineno">  261</span>&#160;  <span class="comment">// division instruction for targets that have a native division instruction.</span></div>
<div class="line"><a name="l00262"></a><span class="lineno">  262</span>&#160;  <span class="comment">// To be overly conservative, we only add 1 to the number of instructions for</span></div>
<div class="line"><a name="l00263"></a><span class="lineno">  263</span>&#160;  <span class="comment">// each division instruction.</span></div>
<div class="line"><a name="l00264"></a><span class="lineno">  264</span>&#160;  <span class="keywordflow">for</span> (<a class="code" href="classllvm_1_1Instruction.html">Instruction</a> &amp;<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a> : *StartBB) {</div>
<div class="line"><a name="l00265"></a><span class="lineno">  265</span>&#160;    <span class="keywordflow">switch</span> (<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>.getOpcode()) {</div>
<div class="line"><a name="l00266"></a><span class="lineno">  266</span>&#160;    <span class="keywordflow">case</span> Instruction::FDiv:</div>
<div class="line"><a name="l00267"></a><span class="lineno">  267</span>&#160;    <span class="keywordflow">case</span> Instruction::FRem:</div>
<div class="line"><a name="l00268"></a><span class="lineno">  268</span>&#160;    <span class="keywordflow">case</span> Instruction::SDiv:</div>
<div class="line"><a name="l00269"></a><span class="lineno">  269</span>&#160;    <span class="keywordflow">case</span> Instruction::SRem:</div>
<div class="line"><a name="l00270"></a><span class="lineno">  270</span>&#160;    <span class="keywordflow">case</span> Instruction::UDiv:</div>
<div class="line"><a name="l00271"></a><span class="lineno">  271</span>&#160;    <span class="keywordflow">case</span> Instruction::URem:</div>
<div class="line"><a name="l00272"></a><span class="lineno">  272</span>&#160;      Benefit += 1;</div>
<div class="line"><a name="l00273"></a><span class="lineno">  273</span>&#160;      <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00274"></a><span class="lineno">  274</span>&#160;    <span class="keywordflow">default</span>:</div>
<div class="line"><a name="l00275"></a><span class="lineno">  275</span>&#160;      Benefit += <a class="code" href="classllvm_1_1TargetTransformInfo.html">TTI</a>.<a class="code" href="classllvm_1_1TargetTransformInfo.html#ad2b33509e6c7f832b7a7198d13d8bc79">getInstructionCost</a>(&amp;<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>, <a class="code" href="classllvm_1_1TargetTransformInfo.html#a706f223f760b55668fbae74202b816bba737cfc93e5a2ff961677d57186167e7c">TargetTransformInfo::TCK_CodeSize</a>);</div>
<div class="line"><a name="l00276"></a><span class="lineno">  276</span>&#160;      <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00277"></a><span class="lineno">  277</span>&#160;    }</div>
<div class="line"><a name="l00278"></a><span class="lineno">  278</span>&#160;  }</div>
<div class="line"><a name="l00279"></a><span class="lineno">  279</span>&#160; </div>
<div class="line"><a name="l00280"></a><span class="lineno">  280</span>&#160;  <span class="keywordflow">return</span> Benefit;</div>
<div class="line"><a name="l00281"></a><span class="lineno">  281</span>&#160;}</div>
<div class="line"><a name="l00282"></a><span class="lineno">  282</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l00283"></a><span class="lineno">  283</span>&#160;<span class="comment">/// Find whether \p Region matches the global value numbering to Constant</span></div>
<div class="line"><a name="l00284"></a><span class="lineno">  284</span>&#160;<span class="comment">/// mapping found so far.</span></div>
<div class="line"><a name="l00285"></a><span class="lineno">  285</span>&#160;<span class="comment">///</span></div>
<div class="line"><a name="l00286"></a><span class="lineno">  286</span>&#160;<span class="comment">/// \param Region - The OutlinableRegion we are checking for constants</span></div>
<div class="line"><a name="l00287"></a><span class="lineno">  287</span>&#160;<span class="comment">/// \param GVNToConstant - The mapping of global value number to Constants.</span></div>
<div class="line"><a name="l00288"></a><span class="lineno">  288</span>&#160;<span class="comment">/// \param NotSame - The set of global value numbers that do not have the same</span></div>
<div class="line"><a name="l00289"></a><span class="lineno">  289</span>&#160;<span class="comment">/// constant in each region.</span></div>
<div class="line"><a name="l00290"></a><span class="lineno">  290</span>&#160;<span class="comment">/// \returns true if all Constants are the same in every use of a Constant in \p</span></div>
<div class="line"><a name="l00291"></a><span class="lineno">  291</span>&#160;<span class="comment">/// Region and false if not</span></div>
<div class="line"><a name="l00292"></a><span class="lineno">  292</span>&#160;<span class="comment"></span><span class="keyword">static</span> <span class="keywordtype">bool</span></div>
<div class="line"><a name="l00293"></a><span class="lineno"><a class="line" href="IROutliner_8cpp.html#a52a09c04ddc4ec6d039f1f11f01d019e">  293</a></span>&#160;<a class="code" href="IROutliner_8cpp.html#a52a09c04ddc4ec6d039f1f11f01d019e">collectRegionsConstants</a>(<a class="code" href="structllvm_1_1OutlinableRegion.html">OutlinableRegion</a> &amp;<a class="code" href="classllvm_1_1Region.html">Region</a>,</div>
<div class="line"><a name="l00294"></a><span class="lineno">  294</span>&#160;                        <a class="code" href="classllvm_1_1DenseMap.html">DenseMap&lt;unsigned, Constant *&gt;</a> &amp;GVNToConstant,</div>
<div class="line"><a name="l00295"></a><span class="lineno">  295</span>&#160;                        <a class="code" href="classllvm_1_1DenseSet.html">DenseSet&lt;unsigned&gt;</a> &amp;NotSame) {</div>
<div class="line"><a name="l00296"></a><span class="lineno">  296</span>&#160;  <span class="keywordtype">bool</span> ConstantsTheSame = <span class="keyword">true</span>;</div>
<div class="line"><a name="l00297"></a><span class="lineno">  297</span>&#160; </div>
<div class="line"><a name="l00298"></a><span class="lineno">  298</span>&#160;  <a class="code" href="classllvm_1_1IRSimilarity_1_1IRSimilarityCandidate.html">IRSimilarityCandidate</a> &amp;<a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a> = *<a class="code" href="classllvm_1_1Region.html">Region</a>.Candidate;</div>
<div class="line"><a name="l00299"></a><span class="lineno">  299</span>&#160;  <span class="keywordflow">for</span> (<a class="code" href="structllvm_1_1IRSimilarity_1_1IRInstructionData.html">IRInstructionData</a> &amp;<a class="code" href="namespacellvm_1_1Intrinsic.html#a80add6b3b1cdaec560907995127adc16">ID</a> : <a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a>) {</div>
<div class="line"><a name="l00300"></a><span class="lineno">  300</span>&#160; </div>
<div class="line"><a name="l00301"></a><span class="lineno">  301</span>&#160;    <span class="comment">// Iterate over the operands in an instruction. If the global value number,</span></div>
<div class="line"><a name="l00302"></a><span class="lineno">  302</span>&#160;    <span class="comment">// assigned by the IRSimilarityCandidate, has been seen before, we check if</span></div>
<div class="line"><a name="l00303"></a><span class="lineno">  303</span>&#160;    <span class="comment">// the the number has been found to be not the same value in each instance.</span></div>
<div class="line"><a name="l00304"></a><span class="lineno">  304</span>&#160;    <span class="keywordflow">for</span> (<a class="code" href="classllvm_1_1Value.html">Value</a> *V : <a class="code" href="namespacellvm_1_1Intrinsic.html#a80add6b3b1cdaec560907995127adc16">ID</a>.OperVals) {</div>
<div class="line"><a name="l00305"></a><span class="lineno">  305</span>&#160;      <a class="code" href="classllvm_1_1Optional.html">Optional&lt;unsigned&gt;</a> GVNOpt = <a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a>.getGVN(V);</div>
<div class="line"><a name="l00306"></a><span class="lineno">  306</span>&#160;      <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(GVNOpt.<a class="code" href="classllvm_1_1Optional.html#ab8f06efe88f146384116a787058ab420">hasValue</a>() &amp;&amp; <span class="stringliteral">&quot;Expected a GVN for operand?&quot;</span>);</div>
<div class="line"><a name="l00307"></a><span class="lineno">  307</span>&#160;      <span class="keywordtype">unsigned</span> <a class="code" href="classllvm_1_1GVN.html">GVN</a> = GVNOpt.<a class="code" href="classllvm_1_1Optional.html#a9ed8669536d806aff028d983595bab4d">getValue</a>();</div>
<div class="line"><a name="l00308"></a><span class="lineno">  308</span>&#160; </div>
<div class="line"><a name="l00309"></a><span class="lineno">  309</span>&#160;      <span class="comment">// Check if this global value has been found to not be the same already.</span></div>
<div class="line"><a name="l00310"></a><span class="lineno">  310</span>&#160;      <span class="keywordflow">if</span> (NotSame.<a class="code" href="classllvm_1_1detail_1_1DenseSetImpl.html#ad409c2de8502b94c8a0b1193307c63b6">contains</a>(<a class="code" href="classllvm_1_1GVN.html">GVN</a>)) {</div>
<div class="line"><a name="l00311"></a><span class="lineno">  311</span>&#160;        <span class="keywordflow">if</span> (isa&lt;Constant&gt;(V))</div>
<div class="line"><a name="l00312"></a><span class="lineno">  312</span>&#160;          ConstantsTheSame = <span class="keyword">false</span>;</div>
<div class="line"><a name="l00313"></a><span class="lineno">  313</span>&#160;        <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l00314"></a><span class="lineno">  314</span>&#160;      }</div>
<div class="line"><a name="l00315"></a><span class="lineno">  315</span>&#160; </div>
<div class="line"><a name="l00316"></a><span class="lineno">  316</span>&#160;      <span class="comment">// If it has been the same so far, we check the value for if the</span></div>
<div class="line"><a name="l00317"></a><span class="lineno">  317</span>&#160;      <span class="comment">// associated Constant value match the previous instances of the same</span></div>
<div class="line"><a name="l00318"></a><span class="lineno">  318</span>&#160;      <span class="comment">// global value number.  If the global value does not map to a Constant,</span></div>
<div class="line"><a name="l00319"></a><span class="lineno">  319</span>&#160;      <span class="comment">// it is considered to not be the same value.</span></div>
<div class="line"><a name="l00320"></a><span class="lineno">  320</span>&#160;      <a class="code" href="classllvm_1_1Optional.html">Optional&lt;bool&gt;</a> ConstantMatches = <a class="code" href="IROutliner_8cpp.html#a51932312ba2b9411a987be746ee773b2">constantMatches</a>(V, <a class="code" href="classllvm_1_1GVN.html">GVN</a>, GVNToConstant);</div>
<div class="line"><a name="l00321"></a><span class="lineno">  321</span>&#160;      <span class="keywordflow">if</span> (ConstantMatches.<a class="code" href="classllvm_1_1Optional.html#ab8f06efe88f146384116a787058ab420">hasValue</a>()) {</div>
<div class="line"><a name="l00322"></a><span class="lineno">  322</span>&#160;        <span class="keywordflow">if</span> (ConstantMatches.<a class="code" href="classllvm_1_1Optional.html#a9ed8669536d806aff028d983595bab4d">getValue</a>())</div>
<div class="line"><a name="l00323"></a><span class="lineno">  323</span>&#160;          <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l00324"></a><span class="lineno">  324</span>&#160;        <span class="keywordflow">else</span></div>
<div class="line"><a name="l00325"></a><span class="lineno">  325</span>&#160;          ConstantsTheSame = <span class="keyword">false</span>;</div>
<div class="line"><a name="l00326"></a><span class="lineno">  326</span>&#160;      }</div>
<div class="line"><a name="l00327"></a><span class="lineno">  327</span>&#160; </div>
<div class="line"><a name="l00328"></a><span class="lineno">  328</span>&#160;      <span class="comment">// While this value is a register, it might not have been previously,</span></div>
<div class="line"><a name="l00329"></a><span class="lineno">  329</span>&#160;      <span class="comment">// make sure we don&#39;t already have a constant mapped to this global value</span></div>
<div class="line"><a name="l00330"></a><span class="lineno">  330</span>&#160;      <span class="comment">// number.</span></div>
<div class="line"><a name="l00331"></a><span class="lineno">  331</span>&#160;      <span class="keywordflow">if</span> (GVNToConstant.<a class="code" href="classllvm_1_1DenseMapBase.html#a0c047f127ed4380a6f383d70bec4eb94">find</a>(<a class="code" href="classllvm_1_1GVN.html">GVN</a>) != GVNToConstant.<a class="code" href="classllvm_1_1DenseMapBase.html#a65520b9c67759099e313d0f4e7b5ff9e">end</a>())</div>
<div class="line"><a name="l00332"></a><span class="lineno">  332</span>&#160;        ConstantsTheSame = <span class="keyword">false</span>;</div>
<div class="line"><a name="l00333"></a><span class="lineno">  333</span>&#160; </div>
<div class="line"><a name="l00334"></a><span class="lineno">  334</span>&#160;      NotSame.<a class="code" href="classllvm_1_1detail_1_1DenseSetImpl.html#a79eed48913651aeedda2eed25201ea84">insert</a>(<a class="code" href="classllvm_1_1GVN.html">GVN</a>);</div>
<div class="line"><a name="l00335"></a><span class="lineno">  335</span>&#160;    }</div>
<div class="line"><a name="l00336"></a><span class="lineno">  336</span>&#160;  }</div>
<div class="line"><a name="l00337"></a><span class="lineno">  337</span>&#160; </div>
<div class="line"><a name="l00338"></a><span class="lineno">  338</span>&#160;  <span class="keywordflow">return</span> ConstantsTheSame;</div>
<div class="line"><a name="l00339"></a><span class="lineno">  339</span>&#160;}</div>
<div class="line"><a name="l00340"></a><span class="lineno">  340</span>&#160; </div>
<div class="line"><a name="l00341"></a><span class="lineno"><a class="line" href="structOutlinableGroup.html#a61915f6a6a382f51fd1a8bf3dd188c0c">  341</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="structOutlinableGroup.html#a61915f6a6a382f51fd1a8bf3dd188c0c">OutlinableGroup::findSameConstants</a>(<a class="code" href="classllvm_1_1DenseSet.html">DenseSet&lt;unsigned&gt;</a> &amp;NotSame) {</div>
<div class="line"><a name="l00342"></a><span class="lineno">  342</span>&#160;  <a class="code" href="classllvm_1_1DenseMap.html">DenseMap&lt;unsigned, Constant *&gt;</a> GVNToConstant;</div>
<div class="line"><a name="l00343"></a><span class="lineno">  343</span>&#160; </div>
<div class="line"><a name="l00344"></a><span class="lineno">  344</span>&#160;  <span class="keywordflow">for</span> (<a class="code" href="structllvm_1_1OutlinableRegion.html">OutlinableRegion</a> *<a class="code" href="classllvm_1_1Region.html">Region</a> : Regions)</div>
<div class="line"><a name="l00345"></a><span class="lineno">  345</span>&#160;    <a class="code" href="IROutliner_8cpp.html#a52a09c04ddc4ec6d039f1f11f01d019e">collectRegionsConstants</a>(*<a class="code" href="classllvm_1_1Region.html">Region</a>, GVNToConstant, NotSame);</div>
<div class="line"><a name="l00346"></a><span class="lineno">  346</span>&#160;}</div>
<div class="line"><a name="l00347"></a><span class="lineno">  347</span>&#160; </div>
<div class="line"><a name="l00348"></a><span class="lineno"><a class="line" href="structOutlinableGroup.html#ad67fb96194cff11216803ad74dba5687">  348</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="structOutlinableGroup.html#ad67fb96194cff11216803ad74dba5687">OutlinableGroup::collectGVNStoreSets</a>(<a class="code" href="classllvm_1_1Module.html">Module</a> &amp;M) {</div>
<div class="line"><a name="l00349"></a><span class="lineno">  349</span>&#160;  <span class="keywordflow">for</span> (<a class="code" href="structllvm_1_1OutlinableRegion.html">OutlinableRegion</a> *OS : Regions)</div>
<div class="line"><a name="l00350"></a><span class="lineno">  350</span>&#160;    OutputGVNCombinations.insert(OS-&gt;GVNStores);</div>
<div class="line"><a name="l00351"></a><span class="lineno">  351</span>&#160; </div>
<div class="line"><a name="l00352"></a><span class="lineno">  352</span>&#160;  <span class="comment">// We are adding an extracted argument to decide between which output path</span></div>
<div class="line"><a name="l00353"></a><span class="lineno">  353</span>&#160;  <span class="comment">// to use in the basic block.  It is used in a switch statement and only</span></div>
<div class="line"><a name="l00354"></a><span class="lineno">  354</span>&#160;  <span class="comment">// needs to be an integer.</span></div>
<div class="line"><a name="l00355"></a><span class="lineno">  355</span>&#160;  <span class="keywordflow">if</span> (OutputGVNCombinations.size() &gt; 1)</div>
<div class="line"><a name="l00356"></a><span class="lineno">  356</span>&#160;    ArgumentTypes.push_back(<a class="code" href="classllvm_1_1Type.html#a30dd396c5b40cd86c1591872e574ccdf">Type::getInt32Ty</a>(<a class="code" href="lib_2Target_2X86_2README_8txt.html#ac88fe1d3a61b056a4f64fbbb156a62ff">M</a>.getContext()));</div>
<div class="line"><a name="l00357"></a><span class="lineno">  357</span>&#160;}</div>
<div class="line"><a name="l00358"></a><span class="lineno">  358</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l00359"></a><span class="lineno">  359</span>&#160;<span class="comment">/// Get the subprogram if it exists for one of the outlined regions.</span></div>
<div class="line"><a name="l00360"></a><span class="lineno">  360</span>&#160;<span class="comment">///</span></div>
<div class="line"><a name="l00361"></a><span class="lineno">  361</span>&#160;<span class="comment">/// \param [in] Group - The set of regions to find a subprogram for.</span></div>
<div class="line"><a name="l00362"></a><span class="lineno">  362</span>&#160;<span class="comment">/// \returns the subprogram if it exists, or nullptr.</span></div>
<div class="line"><a name="l00363"></a><span class="lineno"><a class="line" href="IROutliner_8cpp.html#a0028135ea5d53b4a9b047ef7c72edd57">  363</a></span>&#160;<span class="comment"></span><span class="keyword">static</span> <a class="code" href="classllvm_1_1DISubprogram.html">DISubprogram</a> *<a class="code" href="IROutliner_8cpp.html#a0028135ea5d53b4a9b047ef7c72edd57">getSubprogramOrNull</a>(<a class="code" href="structOutlinableGroup.html">OutlinableGroup</a> &amp;Group) {</div>
<div class="line"><a name="l00364"></a><span class="lineno">  364</span>&#160;  <span class="keywordflow">for</span> (<a class="code" href="structllvm_1_1OutlinableRegion.html">OutlinableRegion</a> *OS : Group.<a class="code" href="structOutlinableGroup.html#a75bbc3b17e5b70e0e1fac394f26b5c11">Regions</a>)</div>
<div class="line"><a name="l00365"></a><span class="lineno">  365</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1Function.html">Function</a> *<a class="code" href="MD5_8cpp.html#a96d73bbd7af15cb1fc38c3f4a3bd82e9">F</a> = OS-&gt;<a class="code" href="structllvm_1_1OutlinableRegion.html#a018669f7b1d6a21106f47398a087c30a">Call</a>-&gt;<a class="code" href="classllvm_1_1Instruction.html#a6a66ebb3aa12757479a3c88de77d78f8">getFunction</a>())</div>
<div class="line"><a name="l00366"></a><span class="lineno">  366</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1DISubprogram.html">DISubprogram</a> *SP = <a class="code" href="MD5_8cpp.html#a96d73bbd7af15cb1fc38c3f4a3bd82e9">F</a>-&gt;getSubprogram())</div>
<div class="line"><a name="l00367"></a><span class="lineno">  367</span>&#160;        <span class="keywordflow">return</span> SP;</div>
<div class="line"><a name="l00368"></a><span class="lineno">  368</span>&#160; </div>
<div class="line"><a name="l00369"></a><span class="lineno">  369</span>&#160;  <span class="keywordflow">return</span> <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l00370"></a><span class="lineno">  370</span>&#160;}</div>
<div class="line"><a name="l00371"></a><span class="lineno">  371</span>&#160; </div>
<div class="line"><a name="l00372"></a><span class="lineno">  372</span>&#160;<a class="code" href="classllvm_1_1Function.html">Function</a> *IROutliner::createFunction(<a class="code" href="classllvm_1_1Module.html">Module</a> &amp;M, <a class="code" href="structOutlinableGroup.html">OutlinableGroup</a> &amp;Group,</div>
<div class="line"><a name="l00373"></a><span class="lineno">  373</span>&#160;                                     <span class="keywordtype">unsigned</span> FunctionNameSuffix) {</div>
<div class="line"><a name="l00374"></a><span class="lineno">  374</span>&#160;  <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(!Group.<a class="code" href="structOutlinableGroup.html#a95133d99b799f98e5c92dacc3028c621">OutlinedFunction</a> &amp;&amp; <span class="stringliteral">&quot;Function is already defined!&quot;</span>);</div>
<div class="line"><a name="l00375"></a><span class="lineno">  375</span>&#160; </div>
<div class="line"><a name="l00376"></a><span class="lineno">  376</span>&#160;  Group.<a class="code" href="structOutlinableGroup.html#aab2165e523387ae034bc2117b13c5d51">OutlinedFunctionType</a> = <a class="code" href="classllvm_1_1FunctionType.html#a7e89b55242c964ae61b7850e99cacef0">FunctionType::get</a>(</div>
<div class="line"><a name="l00377"></a><span class="lineno">  377</span>&#160;      <a class="code" href="classllvm_1_1Type.html#a6e20e76960d952de088354cbcd14c3ab">Type::getVoidTy</a>(<a class="code" href="lib_2Target_2X86_2README_8txt.html#ac88fe1d3a61b056a4f64fbbb156a62ff">M</a>.getContext()), Group.<a class="code" href="structOutlinableGroup.html#a25b29490419d6ea97ce7d79dc58f306d">ArgumentTypes</a>, <span class="keyword">false</span>);</div>
<div class="line"><a name="l00378"></a><span class="lineno">  378</span>&#160; </div>
<div class="line"><a name="l00379"></a><span class="lineno">  379</span>&#160;  <span class="comment">// These functions will only be called from within the same module, so</span></div>
<div class="line"><a name="l00380"></a><span class="lineno">  380</span>&#160;  <span class="comment">// we can set an internal linkage.</span></div>
<div class="line"><a name="l00381"></a><span class="lineno">  381</span>&#160;  Group.<a class="code" href="structOutlinableGroup.html#a95133d99b799f98e5c92dacc3028c621">OutlinedFunction</a> = <a class="code" href="classllvm_1_1Function.html#a6adbed68009f582caa84cdfd2adf36f1">Function::Create</a>(</div>
<div class="line"><a name="l00382"></a><span class="lineno">  382</span>&#160;      Group.<a class="code" href="structOutlinableGroup.html#aab2165e523387ae034bc2117b13c5d51">OutlinedFunctionType</a>, <a class="code" href="classllvm_1_1GlobalValue.html#aedfa75f0c85c4aa85b257f066fbea57ca1511edd03e02d1f3dd277a3c6abf6ad5">GlobalValue::InternalLinkage</a>,</div>
<div class="line"><a name="l00383"></a><span class="lineno">  383</span>&#160;      <span class="stringliteral">&quot;outlined_ir_func_&quot;</span> + <a class="code" href="namespacellvm.html#a13c1b5a253da5da49ce33d03dc1efc07">std::to_string</a>(FunctionNameSuffix), M);</div>
<div class="line"><a name="l00384"></a><span class="lineno">  384</span>&#160; </div>
<div class="line"><a name="l00385"></a><span class="lineno">  385</span>&#160;  <span class="comment">// Transfer the swifterr attribute to the correct function parameter.</span></div>
<div class="line"><a name="l00386"></a><span class="lineno">  386</span>&#160;  <span class="keywordflow">if</span> (Group.<a class="code" href="structOutlinableGroup.html#a41d9175e78c75fb14134d35303ded45a">SwiftErrorArgument</a>.<a class="code" href="classllvm_1_1Optional.html#ab8f06efe88f146384116a787058ab420">hasValue</a>())</div>
<div class="line"><a name="l00387"></a><span class="lineno">  387</span>&#160;    Group.<a class="code" href="structOutlinableGroup.html#a95133d99b799f98e5c92dacc3028c621">OutlinedFunction</a>-&gt;<a class="code" href="classllvm_1_1Function.html#aa5087b607af833220d9ebab0c88c83c1">addParamAttr</a>(Group.<a class="code" href="structOutlinableGroup.html#a41d9175e78c75fb14134d35303ded45a">SwiftErrorArgument</a>.<a class="code" href="classllvm_1_1Optional.html#a9ed8669536d806aff028d983595bab4d">getValue</a>(),</div>
<div class="line"><a name="l00388"></a><span class="lineno">  388</span>&#160;                                         Attribute::SwiftError);</div>
<div class="line"><a name="l00389"></a><span class="lineno">  389</span>&#160; </div>
<div class="line"><a name="l00390"></a><span class="lineno">  390</span>&#160;  Group.<a class="code" href="structOutlinableGroup.html#a95133d99b799f98e5c92dacc3028c621">OutlinedFunction</a>-&gt;<a class="code" href="classllvm_1_1Function.html#ac277aebd990c638895a05b0ffae6f7ec">addFnAttr</a>(Attribute::OptimizeForSize);</div>
<div class="line"><a name="l00391"></a><span class="lineno">  391</span>&#160;  Group.<a class="code" href="structOutlinableGroup.html#a95133d99b799f98e5c92dacc3028c621">OutlinedFunction</a>-&gt;<a class="code" href="classllvm_1_1Function.html#ac277aebd990c638895a05b0ffae6f7ec">addFnAttr</a>(Attribute::MinSize);</div>
<div class="line"><a name="l00392"></a><span class="lineno">  392</span>&#160; </div>
<div class="line"><a name="l00393"></a><span class="lineno">  393</span>&#160;  <span class="comment">// If there&#39;s a DISubprogram associated with this outlined function, then</span></div>
<div class="line"><a name="l00394"></a><span class="lineno">  394</span>&#160;  <span class="comment">// emit debug info for the outlined function.</span></div>
<div class="line"><a name="l00395"></a><span class="lineno">  395</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1DISubprogram.html">DISubprogram</a> *SP = <a class="code" href="IROutliner_8cpp.html#a0028135ea5d53b4a9b047ef7c72edd57">getSubprogramOrNull</a>(Group)) {</div>
<div class="line"><a name="l00396"></a><span class="lineno">  396</span>&#160;    <a class="code" href="classllvm_1_1Function.html">Function</a> *<a class="code" href="MD5_8cpp.html#a96d73bbd7af15cb1fc38c3f4a3bd82e9">F</a> = Group.<a class="code" href="structOutlinableGroup.html#a95133d99b799f98e5c92dacc3028c621">OutlinedFunction</a>;</div>
<div class="line"><a name="l00397"></a><span class="lineno">  397</span>&#160;    <span class="comment">// We have a DISubprogram. Get its DICompileUnit.</span></div>
<div class="line"><a name="l00398"></a><span class="lineno">  398</span>&#160;    <a class="code" href="classllvm_1_1DICompileUnit.html">DICompileUnit</a> *<a class="code" href="namespaceCU.html">CU</a> = SP-&gt;getUnit();</div>
<div class="line"><a name="l00399"></a><span class="lineno">  399</span>&#160;    <a class="code" href="classllvm_1_1DIBuilder.html">DIBuilder</a> DB(M, <span class="keyword">true</span>, <a class="code" href="namespaceCU.html">CU</a>);</div>
<div class="line"><a name="l00400"></a><span class="lineno">  400</span>&#160;    <a class="code" href="classllvm_1_1DIFile.html">DIFile</a> *Unit = SP-&gt;<a class="code" href="classllvm_1_1DIScope.html#a875719877cc384dbe437a63fdb579030">getFile</a>();</div>
<div class="line"><a name="l00401"></a><span class="lineno">  401</span>&#160;    <a class="code" href="classllvm_1_1Mangler.html">Mangler</a> Mg;</div>
<div class="line"><a name="l00402"></a><span class="lineno">  402</span>&#160;    <span class="comment">// Get the mangled name of the function for the linkage name.</span></div>
<div class="line"><a name="l00403"></a><span class="lineno">  403</span>&#160;    std::string <a class="code" href="namespacellvm_1_1NVPTXISD.html#ab995b6d422b079c863075e073b2eb96ba7cff9cc4a40fe2b19129ee8e9b0ec645">Dummy</a>;</div>
<div class="line"><a name="l00404"></a><span class="lineno">  404</span>&#160;    <a class="code" href="classllvm_1_1raw__string__ostream.html">llvm::raw_string_ostream</a> MangledNameStream(<a class="code" href="namespacellvm_1_1NVPTXISD.html#ab995b6d422b079c863075e073b2eb96ba7cff9cc4a40fe2b19129ee8e9b0ec645">Dummy</a>);</div>
<div class="line"><a name="l00405"></a><span class="lineno">  405</span>&#160;    Mg.<a class="code" href="classllvm_1_1Mangler.html#aa1c9296fd511eb96bb487befbf5e7cea">getNameWithPrefix</a>(MangledNameStream, <a class="code" href="MD5_8cpp.html#a96d73bbd7af15cb1fc38c3f4a3bd82e9">F</a>, <span class="keyword">false</span>);</div>
<div class="line"><a name="l00406"></a><span class="lineno">  406</span>&#160; </div>
<div class="line"><a name="l00407"></a><span class="lineno">  407</span>&#160;    <a class="code" href="classllvm_1_1DISubprogram.html">DISubprogram</a> *OutlinedSP = DB.createFunction(</div>
<div class="line"><a name="l00408"></a><span class="lineno">  408</span>&#160;        Unit <span class="comment">/* Context */</span>, <a class="code" href="MD5_8cpp.html#a96d73bbd7af15cb1fc38c3f4a3bd82e9">F</a>-&gt;getName(), MangledNameStream.str(),</div>
<div class="line"><a name="l00409"></a><span class="lineno">  409</span>&#160;        Unit <span class="comment">/* File */</span>,</div>
<div class="line"><a name="l00410"></a><span class="lineno">  410</span>&#160;        0 <span class="comment">/* Line 0 is reserved for compiler-generated code. */</span>,</div>
<div class="line"><a name="l00411"></a><span class="lineno">  411</span>&#160;        DB.createSubroutineType(DB.getOrCreateTypeArray(None)), <span class="comment">/* void type */</span></div>
<div class="line"><a name="l00412"></a><span class="lineno">  412</span>&#160;        0, <span class="comment">/* Line 0 is reserved for compiler-generated code. */</span></div>
<div class="line"><a name="l00413"></a><span class="lineno">  413</span>&#160;        DINode::DIFlags::FlagArtificial <span class="comment">/* Compiler-generated code. */</span>,</div>
<div class="line"><a name="l00414"></a><span class="lineno">  414</span>&#160;        <span class="comment">/* Outlined code is optimized code by definition. */</span></div>
<div class="line"><a name="l00415"></a><span class="lineno">  415</span>&#160;        DISubprogram::SPFlagDefinition | DISubprogram::SPFlagOptimized);</div>
<div class="line"><a name="l00416"></a><span class="lineno">  416</span>&#160; </div>
<div class="line"><a name="l00417"></a><span class="lineno">  417</span>&#160;    <span class="comment">// Don&#39;t add any new variables to the subprogram.</span></div>
<div class="line"><a name="l00418"></a><span class="lineno">  418</span>&#160;    DB.finalizeSubprogram(OutlinedSP);</div>
<div class="line"><a name="l00419"></a><span class="lineno">  419</span>&#160; </div>
<div class="line"><a name="l00420"></a><span class="lineno">  420</span>&#160;    <span class="comment">// Attach subprogram to the function.</span></div>
<div class="line"><a name="l00421"></a><span class="lineno">  421</span>&#160;    <a class="code" href="MD5_8cpp.html#a96d73bbd7af15cb1fc38c3f4a3bd82e9">F</a>-&gt;setSubprogram(OutlinedSP);</div>
<div class="line"><a name="l00422"></a><span class="lineno">  422</span>&#160;    <span class="comment">// We&#39;re done with the DIBuilder.</span></div>
<div class="line"><a name="l00423"></a><span class="lineno">  423</span>&#160;    DB.finalize();</div>
<div class="line"><a name="l00424"></a><span class="lineno">  424</span>&#160;  }</div>
<div class="line"><a name="l00425"></a><span class="lineno">  425</span>&#160; </div>
<div class="line"><a name="l00426"></a><span class="lineno">  426</span>&#160;  <span class="keywordflow">return</span> Group.<a class="code" href="structOutlinableGroup.html#a95133d99b799f98e5c92dacc3028c621">OutlinedFunction</a>;</div>
<div class="line"><a name="l00427"></a><span class="lineno">  427</span>&#160;}</div>
<div class="line"><a name="l00428"></a><span class="lineno">  428</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l00429"></a><span class="lineno">  429</span>&#160;<span class="comment">/// Move each BasicBlock in \p Old to \p New.</span></div>
<div class="line"><a name="l00430"></a><span class="lineno">  430</span>&#160;<span class="comment">///</span></div>
<div class="line"><a name="l00431"></a><span class="lineno">  431</span>&#160;<span class="comment">/// \param [in] Old - The function to move the basic blocks from.</span></div>
<div class="line"><a name="l00432"></a><span class="lineno">  432</span>&#160;<span class="comment">/// \param [in] New - The function to move the basic blocks to.</span></div>
<div class="line"><a name="l00433"></a><span class="lineno">  433</span>&#160;<span class="comment">/// \returns the first return block for the function in New.</span></div>
<div class="line"><a name="l00434"></a><span class="lineno"><a class="line" href="IROutliner_8cpp.html#a589de9c77e75842cbf318f07e4fe6209">  434</a></span>&#160;<span class="comment"></span><span class="keyword">static</span> <a class="code" href="classllvm_1_1BasicBlock.html">BasicBlock</a> *<a class="code" href="IROutliner_8cpp.html#a589de9c77e75842cbf318f07e4fe6209">moveFunctionData</a>(<a class="code" href="classllvm_1_1Function.html">Function</a> &amp;Old, <a class="code" href="classllvm_1_1Function.html">Function</a> &amp;New) {</div>
<div class="line"><a name="l00435"></a><span class="lineno">  435</span>&#160;  <a class="code" href="classllvm_1_1Function.html#a19595c245bd2e3eefa93ce22db5ad15f">Function::iterator</a> CurrBB, NextBB, FinalBB;</div>
<div class="line"><a name="l00436"></a><span class="lineno">  436</span>&#160;  <a class="code" href="classllvm_1_1BasicBlock.html">BasicBlock</a> *NewEnd = <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l00437"></a><span class="lineno">  437</span>&#160;  std::vector&lt;Instruction *&gt; DebugInsts;</div>
<div class="line"><a name="l00438"></a><span class="lineno">  438</span>&#160;  <span class="keywordflow">for</span> (CurrBB = Old.<a class="code" href="classllvm_1_1Function.html#a88a5e60837674780a9d812d661897ac5">begin</a>(), FinalBB = Old.<a class="code" href="classllvm_1_1Function.html#ae4ca2261b8b901e415fda7feac5051ea">end</a>(); CurrBB != FinalBB;</div>
<div class="line"><a name="l00439"></a><span class="lineno">  439</span>&#160;       CurrBB = NextBB) {</div>
<div class="line"><a name="l00440"></a><span class="lineno">  440</span>&#160;    NextBB = std::next(CurrBB);</div>
<div class="line"><a name="l00441"></a><span class="lineno">  441</span>&#160;    CurrBB-&gt;removeFromParent();</div>
<div class="line"><a name="l00442"></a><span class="lineno">  442</span>&#160;    CurrBB-&gt;insertInto(&amp;New);</div>
<div class="line"><a name="l00443"></a><span class="lineno">  443</span>&#160;    <a class="code" href="classllvm_1_1Instruction.html">Instruction</a> *<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a> = CurrBB-&gt;getTerminator();</div>
<div class="line"><a name="l00444"></a><span class="lineno">  444</span>&#160;    <span class="keywordflow">if</span> (isa&lt;ReturnInst&gt;(<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>))</div>
<div class="line"><a name="l00445"></a><span class="lineno">  445</span>&#160;      NewEnd = &amp;(*CurrBB);</div>
<div class="line"><a name="l00446"></a><span class="lineno">  446</span>&#160; </div>
<div class="line"><a name="l00447"></a><span class="lineno">  447</span>&#160;    <span class="keywordflow">for</span> (<a class="code" href="classllvm_1_1Instruction.html">Instruction</a> &amp;Val : *CurrBB) {</div>
<div class="line"><a name="l00448"></a><span class="lineno">  448</span>&#160;      <span class="comment">// We must handle the scoping of called functions differently than</span></div>
<div class="line"><a name="l00449"></a><span class="lineno">  449</span>&#160;      <span class="comment">// other outlined instructions.</span></div>
<div class="line"><a name="l00450"></a><span class="lineno">  450</span>&#160;      <span class="keywordflow">if</span> (!isa&lt;CallInst&gt;(&amp;Val)) {</div>
<div class="line"><a name="l00451"></a><span class="lineno">  451</span>&#160;        <span class="comment">// Remove the debug information for outlined functions.</span></div>
<div class="line"><a name="l00452"></a><span class="lineno">  452</span>&#160;        Val.setDebugLoc(<a class="code" href="classllvm_1_1DebugLoc.html">DebugLoc</a>());</div>
<div class="line"><a name="l00453"></a><span class="lineno">  453</span>&#160;        <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l00454"></a><span class="lineno">  454</span>&#160;      }</div>
<div class="line"><a name="l00455"></a><span class="lineno">  455</span>&#160; </div>
<div class="line"><a name="l00456"></a><span class="lineno">  456</span>&#160;      <span class="comment">// From this point we are only handling call instructions.</span></div>
<div class="line"><a name="l00457"></a><span class="lineno">  457</span>&#160;      <a class="code" href="classllvm_1_1CallInst.html">CallInst</a> *CI = cast&lt;CallInst&gt;(&amp;Val);</div>
<div class="line"><a name="l00458"></a><span class="lineno">  458</span>&#160; </div>
<div class="line"><a name="l00459"></a><span class="lineno">  459</span>&#160;      <span class="comment">// We add any debug statements here, to be removed after.  Since the</span></div>
<div class="line"><a name="l00460"></a><span class="lineno">  460</span>&#160;      <span class="comment">// instructions originate from many different locations in the program,</span></div>
<div class="line"><a name="l00461"></a><span class="lineno">  461</span>&#160;      <span class="comment">// it will cause incorrect reporting from a debugger if we keep the</span></div>
<div class="line"><a name="l00462"></a><span class="lineno">  462</span>&#160;      <span class="comment">// same debug instructions.</span></div>
<div class="line"><a name="l00463"></a><span class="lineno">  463</span>&#160;      <span class="keywordflow">if</span> (isa&lt;DbgInfoIntrinsic&gt;(CI)) {</div>
<div class="line"><a name="l00464"></a><span class="lineno">  464</span>&#160;        DebugInsts.push_back(&amp;Val);</div>
<div class="line"><a name="l00465"></a><span class="lineno">  465</span>&#160;        <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l00466"></a><span class="lineno">  466</span>&#160;      }</div>
<div class="line"><a name="l00467"></a><span class="lineno">  467</span>&#160; </div>
<div class="line"><a name="l00468"></a><span class="lineno">  468</span>&#160;      <span class="comment">// Edit the scope of called functions inside of outlined functions.</span></div>
<div class="line"><a name="l00469"></a><span class="lineno">  469</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1DISubprogram.html">DISubprogram</a> *SP = New.<a class="code" href="classllvm_1_1Function.html#a4d834f9897d15e3a6349063b5d637cd8">getSubprogram</a>()) {</div>
<div class="line"><a name="l00470"></a><span class="lineno">  470</span>&#160;        <a class="code" href="classllvm_1_1DILocation.html">DILocation</a> *DI = <a class="code" href="classllvm_1_1MDNode.html#a7d10a7b9b7f40b04d27ed97c38ea1950">DILocation::get</a>(New.<a class="code" href="classllvm_1_1Function.html#a9fffac2512fe651f0d5e37e27f5bd51c">getContext</a>(), 0, 0, SP);</div>
<div class="line"><a name="l00471"></a><span class="lineno">  471</span>&#160;        Val.setDebugLoc(DI);</div>
<div class="line"><a name="l00472"></a><span class="lineno">  472</span>&#160;      }</div>
<div class="line"><a name="l00473"></a><span class="lineno">  473</span>&#160;    }</div>
<div class="line"><a name="l00474"></a><span class="lineno">  474</span>&#160; </div>
<div class="line"><a name="l00475"></a><span class="lineno">  475</span>&#160;    <span class="keywordflow">for</span> (<a class="code" href="classllvm_1_1Instruction.html">Instruction</a> *<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a> : DebugInsts)</div>
<div class="line"><a name="l00476"></a><span class="lineno">  476</span>&#160;      <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>-&gt;eraseFromParent();</div>
<div class="line"><a name="l00477"></a><span class="lineno">  477</span>&#160;  }</div>
<div class="line"><a name="l00478"></a><span class="lineno">  478</span>&#160; </div>
<div class="line"><a name="l00479"></a><span class="lineno">  479</span>&#160;  <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(NewEnd &amp;&amp; <span class="stringliteral">&quot;No return instruction for new function?&quot;</span>);</div>
<div class="line"><a name="l00480"></a><span class="lineno">  480</span>&#160;  <span class="keywordflow">return</span> NewEnd;</div>
<div class="line"><a name="l00481"></a><span class="lineno">  481</span>&#160;}</div>
<div class="line"><a name="l00482"></a><span class="lineno">  482</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l00483"></a><span class="lineno">  483</span>&#160;<span class="comment">/// Find the the constants that will need to be lifted into arguments</span></div>
<div class="line"><a name="l00484"></a><span class="lineno">  484</span>&#160;<span class="comment">/// as they are not the same in each instance of the region.</span></div>
<div class="line"><a name="l00485"></a><span class="lineno">  485</span>&#160;<span class="comment">///</span></div>
<div class="line"><a name="l00486"></a><span class="lineno">  486</span>&#160;<span class="comment">/// \param [in] C - The IRSimilarityCandidate containing the region we are</span></div>
<div class="line"><a name="l00487"></a><span class="lineno">  487</span>&#160;<span class="comment">/// analyzing.</span></div>
<div class="line"><a name="l00488"></a><span class="lineno">  488</span>&#160;<span class="comment">/// \param [in] NotSame - The set of global value numbers that do not have a</span></div>
<div class="line"><a name="l00489"></a><span class="lineno">  489</span>&#160;<span class="comment">/// single Constant across all OutlinableRegions similar to \p C.</span></div>
<div class="line"><a name="l00490"></a><span class="lineno">  490</span>&#160;<span class="comment">/// \param [out] Inputs - The list containing the global value numbers of the</span></div>
<div class="line"><a name="l00491"></a><span class="lineno">  491</span>&#160;<span class="comment">/// arguments needed for the region of code.</span></div>
<div class="line"><a name="l00492"></a><span class="lineno"><a class="line" href="IROutliner_8cpp.html#acda959f961048eba09125aba48d1142e">  492</a></span>&#160;<span class="comment"></span><span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code" href="IROutliner_8cpp.html#acda959f961048eba09125aba48d1142e">findConstants</a>(<a class="code" href="classllvm_1_1IRSimilarity_1_1IRSimilarityCandidate.html">IRSimilarityCandidate</a> &amp;<a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a>, <a class="code" href="classllvm_1_1DenseSet.html">DenseSet&lt;unsigned&gt;</a> &amp;NotSame,</div>
<div class="line"><a name="l00493"></a><span class="lineno">  493</span>&#160;                          std::vector&lt;unsigned&gt; &amp;Inputs) {</div>
<div class="line"><a name="l00494"></a><span class="lineno">  494</span>&#160;  <a class="code" href="classllvm_1_1DenseSet.html">DenseSet&lt;unsigned&gt;</a> Seen;</div>
<div class="line"><a name="l00495"></a><span class="lineno">  495</span>&#160;  <span class="comment">// Iterate over the instructions, and find what constants will need to be</span></div>
<div class="line"><a name="l00496"></a><span class="lineno">  496</span>&#160;  <span class="comment">// extracted into arguments.</span></div>
<div class="line"><a name="l00497"></a><span class="lineno">  497</span>&#160;  <span class="keywordflow">for</span> (<a class="code" href="classllvm_1_1simple__ilist.html#a1ca0d3bb44034ff5937d97824d53b0be">IRInstructionDataList::iterator</a> IDIt = <a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a>.begin(), EndIDIt = <a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a>.end();</div>
<div class="line"><a name="l00498"></a><span class="lineno">  498</span>&#160;       IDIt != EndIDIt; IDIt++) {</div>
<div class="line"><a name="l00499"></a><span class="lineno">  499</span>&#160;    <span class="keywordflow">for</span> (<a class="code" href="classllvm_1_1Value.html">Value</a> *V : (*IDIt).OperVals) {</div>
<div class="line"><a name="l00500"></a><span class="lineno">  500</span>&#160;      <span class="comment">// Since these are stored before any outlining, they will be in the</span></div>
<div class="line"><a name="l00501"></a><span class="lineno">  501</span>&#160;      <span class="comment">// global value numbering.</span></div>
<div class="line"><a name="l00502"></a><span class="lineno">  502</span>&#160;      <span class="keywordtype">unsigned</span> <a class="code" href="classllvm_1_1GVN.html">GVN</a> = <a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a>.getGVN(V).getValue();</div>
<div class="line"><a name="l00503"></a><span class="lineno">  503</span>&#160;      <span class="keywordflow">if</span> (isa&lt;Constant&gt;(V))</div>
<div class="line"><a name="l00504"></a><span class="lineno">  504</span>&#160;        <span class="keywordflow">if</span> (NotSame.<a class="code" href="classllvm_1_1detail_1_1DenseSetImpl.html#ad409c2de8502b94c8a0b1193307c63b6">contains</a>(<a class="code" href="classllvm_1_1GVN.html">GVN</a>) &amp;&amp; !Seen.<a class="code" href="classllvm_1_1detail_1_1DenseSetImpl.html#ad409c2de8502b94c8a0b1193307c63b6">contains</a>(<a class="code" href="classllvm_1_1GVN.html">GVN</a>)) {</div>
<div class="line"><a name="l00505"></a><span class="lineno">  505</span>&#160;          Inputs.push_back(<a class="code" href="classllvm_1_1GVN.html">GVN</a>);</div>
<div class="line"><a name="l00506"></a><span class="lineno">  506</span>&#160;          Seen.<a class="code" href="classllvm_1_1detail_1_1DenseSetImpl.html#a79eed48913651aeedda2eed25201ea84">insert</a>(<a class="code" href="classllvm_1_1GVN.html">GVN</a>);</div>
<div class="line"><a name="l00507"></a><span class="lineno">  507</span>&#160;        }</div>
<div class="line"><a name="l00508"></a><span class="lineno">  508</span>&#160;    }</div>
<div class="line"><a name="l00509"></a><span class="lineno">  509</span>&#160;  }</div>
<div class="line"><a name="l00510"></a><span class="lineno">  510</span>&#160;}</div>
<div class="line"><a name="l00511"></a><span class="lineno">  511</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l00512"></a><span class="lineno">  512</span>&#160;<span class="comment">/// Find the GVN for the inputs that have been found by the CodeExtractor.</span></div>
<div class="line"><a name="l00513"></a><span class="lineno">  513</span>&#160;<span class="comment">///</span></div>
<div class="line"><a name="l00514"></a><span class="lineno">  514</span>&#160;<span class="comment">/// \param [in] C - The IRSimilarityCandidate containing the region we are</span></div>
<div class="line"><a name="l00515"></a><span class="lineno">  515</span>&#160;<span class="comment">/// analyzing.</span></div>
<div class="line"><a name="l00516"></a><span class="lineno">  516</span>&#160;<span class="comment">/// \param [in] CurrentInputs - The set of inputs found by the</span></div>
<div class="line"><a name="l00517"></a><span class="lineno">  517</span>&#160;<span class="comment">/// CodeExtractor.</span></div>
<div class="line"><a name="l00518"></a><span class="lineno">  518</span>&#160;<span class="comment">/// \param [in] OutputMappings - The mapping of values that have been replaced</span></div>
<div class="line"><a name="l00519"></a><span class="lineno">  519</span>&#160;<span class="comment">/// by a new output value.</span></div>
<div class="line"><a name="l00520"></a><span class="lineno">  520</span>&#160;<span class="comment">/// \param [out] EndInputNumbers - The global value numbers for the extracted</span></div>
<div class="line"><a name="l00521"></a><span class="lineno">  521</span>&#160;<span class="comment">/// arguments.</span></div>
<div class="line"><a name="l00522"></a><span class="lineno"><a class="line" href="IROutliner_8cpp.html#a9165dd298666d75ed2e5be7d5d8b50e5">  522</a></span>&#160;<span class="comment"></span><span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code" href="IROutliner_8cpp.html#a9165dd298666d75ed2e5be7d5d8b50e5">mapInputsToGVNs</a>(<a class="code" href="classllvm_1_1IRSimilarity_1_1IRSimilarityCandidate.html">IRSimilarityCandidate</a> &amp;<a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a>,</div>
<div class="line"><a name="l00523"></a><span class="lineno">  523</span>&#160;                            <a class="code" href="classllvm_1_1SetVector.html">SetVector&lt;Value *&gt;</a> &amp;CurrentInputs,</div>
<div class="line"><a name="l00524"></a><span class="lineno">  524</span>&#160;                            <span class="keyword">const</span> <a class="code" href="classllvm_1_1DenseMap.html">DenseMap&lt;Value *, Value *&gt;</a> &amp;OutputMappings,</div>
<div class="line"><a name="l00525"></a><span class="lineno">  525</span>&#160;                            std::vector&lt;unsigned&gt; &amp;EndInputNumbers) {</div>
<div class="line"><a name="l00526"></a><span class="lineno">  526</span>&#160;  <span class="comment">// Get the Global Value Number for each input.  We check if the Value has been</span></div>
<div class="line"><a name="l00527"></a><span class="lineno">  527</span>&#160;  <span class="comment">// replaced by a different value at output, and use the original value before</span></div>
<div class="line"><a name="l00528"></a><span class="lineno">  528</span>&#160;  <span class="comment">// replacement.</span></div>
<div class="line"><a name="l00529"></a><span class="lineno">  529</span>&#160;  <span class="keywordflow">for</span> (<a class="code" href="classllvm_1_1Value.html">Value</a> *Input : CurrentInputs) {</div>
<div class="line"><a name="l00530"></a><span class="lineno">  530</span>&#160;    <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(Input &amp;&amp; <span class="stringliteral">&quot;Have a nullptr as an input&quot;</span>);</div>
<div class="line"><a name="l00531"></a><span class="lineno">  531</span>&#160;    <span class="keywordflow">if</span> (OutputMappings.<a class="code" href="classllvm_1_1DenseMapBase.html#a0c047f127ed4380a6f383d70bec4eb94">find</a>(Input) != OutputMappings.<a class="code" href="classllvm_1_1DenseMapBase.html#a65520b9c67759099e313d0f4e7b5ff9e">end</a>())</div>
<div class="line"><a name="l00532"></a><span class="lineno">  532</span>&#160;      Input = OutputMappings.<a class="code" href="classllvm_1_1DenseMapBase.html#a0c047f127ed4380a6f383d70bec4eb94">find</a>(Input)-&gt;second;</div>
<div class="line"><a name="l00533"></a><span class="lineno">  533</span>&#160;    <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(<a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a>.getGVN(Input).hasValue() &amp;&amp;</div>
<div class="line"><a name="l00534"></a><span class="lineno">  534</span>&#160;           <span class="stringliteral">&quot;Could not find a numbering for the given input&quot;</span>);</div>
<div class="line"><a name="l00535"></a><span class="lineno">  535</span>&#160;    EndInputNumbers.push_back(<a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a>.getGVN(Input).getValue());</div>
<div class="line"><a name="l00536"></a><span class="lineno">  536</span>&#160;  }</div>
<div class="line"><a name="l00537"></a><span class="lineno">  537</span>&#160;}</div>
<div class="line"><a name="l00538"></a><span class="lineno">  538</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l00539"></a><span class="lineno">  539</span>&#160;<span class="comment">/// Find the original value for the \p ArgInput values if any one of them was</span></div>
<div class="line"><a name="l00540"></a><span class="lineno">  540</span>&#160;<span class="comment">/// replaced during a previous extraction.</span></div>
<div class="line"><a name="l00541"></a><span class="lineno">  541</span>&#160;<span class="comment">///</span></div>
<div class="line"><a name="l00542"></a><span class="lineno">  542</span>&#160;<span class="comment">/// \param [in] ArgInputs - The inputs to be extracted by the code extractor.</span></div>
<div class="line"><a name="l00543"></a><span class="lineno">  543</span>&#160;<span class="comment">/// \param [in] OutputMappings - The mapping of values that have been replaced</span></div>
<div class="line"><a name="l00544"></a><span class="lineno">  544</span>&#160;<span class="comment">/// by a new output value.</span></div>
<div class="line"><a name="l00545"></a><span class="lineno">  545</span>&#160;<span class="comment">/// \param [out] RemappedArgInputs - The remapped values according to</span></div>
<div class="line"><a name="l00546"></a><span class="lineno">  546</span>&#160;<span class="comment">/// \p OutputMappings that will be extracted.</span></div>
<div class="line"><a name="l00547"></a><span class="lineno">  547</span>&#160;<span class="comment"></span><span class="keyword">static</span> <span class="keywordtype">void</span></div>
<div class="line"><a name="l00548"></a><span class="lineno"><a class="line" href="IROutliner_8cpp.html#a09e9f16b4a1aaf539000b95bf5442155">  548</a></span>&#160;<a class="code" href="IROutliner_8cpp.html#a09e9f16b4a1aaf539000b95bf5442155">remapExtractedInputs</a>(<span class="keyword">const</span> <a class="code" href="classllvm_1_1ArrayRef.html">ArrayRef&lt;Value *&gt;</a> ArgInputs,</div>
<div class="line"><a name="l00549"></a><span class="lineno">  549</span>&#160;                     <span class="keyword">const</span> <a class="code" href="classllvm_1_1DenseMap.html">DenseMap&lt;Value *, Value *&gt;</a> &amp;OutputMappings,</div>
<div class="line"><a name="l00550"></a><span class="lineno">  550</span>&#160;                     <a class="code" href="classllvm_1_1SetVector.html">SetVector&lt;Value *&gt;</a> &amp;RemappedArgInputs) {</div>
<div class="line"><a name="l00551"></a><span class="lineno">  551</span>&#160;  <span class="comment">// Get the global value number for each input that will be extracted as an</span></div>
<div class="line"><a name="l00552"></a><span class="lineno">  552</span>&#160;  <span class="comment">// argument by the code extractor, remapping if needed for reloaded values.</span></div>
<div class="line"><a name="l00553"></a><span class="lineno">  553</span>&#160;  <span class="keywordflow">for</span> (<a class="code" href="classllvm_1_1Value.html">Value</a> *Input : ArgInputs) {</div>
<div class="line"><a name="l00554"></a><span class="lineno">  554</span>&#160;    <span class="keywordflow">if</span> (OutputMappings.<a class="code" href="classllvm_1_1DenseMapBase.html#a0c047f127ed4380a6f383d70bec4eb94">find</a>(Input) != OutputMappings.<a class="code" href="classllvm_1_1DenseMapBase.html#a65520b9c67759099e313d0f4e7b5ff9e">end</a>())</div>
<div class="line"><a name="l00555"></a><span class="lineno">  555</span>&#160;      Input = OutputMappings.<a class="code" href="classllvm_1_1DenseMapBase.html#a0c047f127ed4380a6f383d70bec4eb94">find</a>(Input)-&gt;second;</div>
<div class="line"><a name="l00556"></a><span class="lineno">  556</span>&#160;    RemappedArgInputs.<a class="code" href="classllvm_1_1SetVector.html#a72d928b7fc2c5f2d56c6ac0265fd9c6e">insert</a>(Input);</div>
<div class="line"><a name="l00557"></a><span class="lineno">  557</span>&#160;  }</div>
<div class="line"><a name="l00558"></a><span class="lineno">  558</span>&#160;}</div>
<div class="line"><a name="l00559"></a><span class="lineno">  559</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l00560"></a><span class="lineno">  560</span>&#160;<span class="comment">/// Find the input GVNs and the output values for a region of Instructions.</span></div>
<div class="line"><a name="l00561"></a><span class="lineno">  561</span>&#160;<span class="comment">/// Using the code extractor, we collect the inputs to the extracted function.</span></div>
<div class="line"><a name="l00562"></a><span class="lineno">  562</span>&#160;<span class="comment">///</span></div>
<div class="line"><a name="l00563"></a><span class="lineno">  563</span>&#160;<span class="comment">/// The \p Region can be identified as needing to be ignored in this function.</span></div>
<div class="line"><a name="l00564"></a><span class="lineno">  564</span>&#160;<span class="comment">/// It should be checked whether it should be ignored after a call to this</span></div>
<div class="line"><a name="l00565"></a><span class="lineno">  565</span>&#160;<span class="comment">/// function.</span></div>
<div class="line"><a name="l00566"></a><span class="lineno">  566</span>&#160;<span class="comment">///</span></div>
<div class="line"><a name="l00567"></a><span class="lineno">  567</span>&#160;<span class="comment">/// \param [in,out] Region - The region of code to be analyzed.</span></div>
<div class="line"><a name="l00568"></a><span class="lineno">  568</span>&#160;<span class="comment">/// \param [out] InputGVNs - The global value numbers for the extracted</span></div>
<div class="line"><a name="l00569"></a><span class="lineno">  569</span>&#160;<span class="comment">/// arguments.</span></div>
<div class="line"><a name="l00570"></a><span class="lineno">  570</span>&#160;<span class="comment">/// \param [in] NotSame - The global value numbers in the region that do not</span></div>
<div class="line"><a name="l00571"></a><span class="lineno">  571</span>&#160;<span class="comment">/// have the same constant value in the regions structurally similar to</span></div>
<div class="line"><a name="l00572"></a><span class="lineno">  572</span>&#160;<span class="comment">/// \p Region.</span></div>
<div class="line"><a name="l00573"></a><span class="lineno">  573</span>&#160;<span class="comment">/// \param [in] OutputMappings - The mapping of values that have been replaced</span></div>
<div class="line"><a name="l00574"></a><span class="lineno">  574</span>&#160;<span class="comment">/// by a new output value after extraction.</span></div>
<div class="line"><a name="l00575"></a><span class="lineno">  575</span>&#160;<span class="comment">/// \param [out] ArgInputs - The values of the inputs to the extracted function.</span></div>
<div class="line"><a name="l00576"></a><span class="lineno">  576</span>&#160;<span class="comment">/// \param [out] Outputs - The set of values extracted by the CodeExtractor</span></div>
<div class="line"><a name="l00577"></a><span class="lineno">  577</span>&#160;<span class="comment">/// as outputs.</span></div>
<div class="line"><a name="l00578"></a><span class="lineno"><a class="line" href="IROutliner_8cpp.html#a48d81e3f58b8db143bc85763d25dbc7a">  578</a></span>&#160;<span class="comment"></span><span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code" href="IROutliner_8cpp.html#a48d81e3f58b8db143bc85763d25dbc7a">getCodeExtractorArguments</a>(</div>
<div class="line"><a name="l00579"></a><span class="lineno">  579</span>&#160;    <a class="code" href="structllvm_1_1OutlinableRegion.html">OutlinableRegion</a> &amp;<a class="code" href="classllvm_1_1Region.html">Region</a>, std::vector&lt;unsigned&gt; &amp;InputGVNs,</div>
<div class="line"><a name="l00580"></a><span class="lineno">  580</span>&#160;    <a class="code" href="classllvm_1_1DenseSet.html">DenseSet&lt;unsigned&gt;</a> &amp;NotSame, <a class="code" href="classllvm_1_1DenseMap.html">DenseMap&lt;Value *, Value *&gt;</a> &amp;OutputMappings,</div>
<div class="line"><a name="l00581"></a><span class="lineno">  581</span>&#160;    <a class="code" href="classllvm_1_1SetVector.html">SetVector&lt;Value *&gt;</a> &amp;ArgInputs, <a class="code" href="classllvm_1_1SetVector.html">SetVector&lt;Value *&gt;</a> &amp;Outputs) {</div>
<div class="line"><a name="l00582"></a><span class="lineno">  582</span>&#160;  <a class="code" href="classllvm_1_1IRSimilarity_1_1IRSimilarityCandidate.html">IRSimilarityCandidate</a> &amp;<a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a> = *<a class="code" href="classllvm_1_1Region.html">Region</a>.Candidate;</div>
<div class="line"><a name="l00583"></a><span class="lineno">  583</span>&#160; </div>
<div class="line"><a name="l00584"></a><span class="lineno">  584</span>&#160;  <span class="comment">// OverallInputs are the inputs to the region found by the CodeExtractor,</span></div>
<div class="line"><a name="l00585"></a><span class="lineno">  585</span>&#160;  <span class="comment">// SinkCands and HoistCands are used by the CodeExtractor to find sunken</span></div>
<div class="line"><a name="l00586"></a><span class="lineno">  586</span>&#160;  <span class="comment">// allocas of values whose lifetimes are contained completely within the</span></div>
<div class="line"><a name="l00587"></a><span class="lineno">  587</span>&#160;  <span class="comment">// outlined region. PremappedInputs are the arguments found by the</span></div>
<div class="line"><a name="l00588"></a><span class="lineno">  588</span>&#160;  <span class="comment">// CodeExtractor, removing conditions such as sunken allocas, but that</span></div>
<div class="line"><a name="l00589"></a><span class="lineno">  589</span>&#160;  <span class="comment">// may need to be remapped due to the extracted output values replacing</span></div>
<div class="line"><a name="l00590"></a><span class="lineno">  590</span>&#160;  <span class="comment">// the original values. We use DummyOutputs for this first run of finding</span></div>
<div class="line"><a name="l00591"></a><span class="lineno">  591</span>&#160;  <span class="comment">// inputs and outputs since the outputs could change during findAllocas,</span></div>
<div class="line"><a name="l00592"></a><span class="lineno">  592</span>&#160;  <span class="comment">// the correct set of extracted outputs will be in the final Outputs ValueSet.</span></div>
<div class="line"><a name="l00593"></a><span class="lineno">  593</span>&#160;  <a class="code" href="classllvm_1_1SetVector.html">SetVector&lt;Value *&gt;</a> OverallInputs, PremappedInputs, SinkCands, HoistCands,</div>
<div class="line"><a name="l00594"></a><span class="lineno">  594</span>&#160;      DummyOutputs;</div>
<div class="line"><a name="l00595"></a><span class="lineno">  595</span>&#160; </div>
<div class="line"><a name="l00596"></a><span class="lineno">  596</span>&#160;  <span class="comment">// Use the code extractor to get the inputs and outputs, without sunken</span></div>
<div class="line"><a name="l00597"></a><span class="lineno">  597</span>&#160;  <span class="comment">// allocas or removing llvm.assumes.</span></div>
<div class="line"><a name="l00598"></a><span class="lineno">  598</span>&#160;  <a class="code" href="classllvm_1_1CodeExtractor.html">CodeExtractor</a> *CE = <a class="code" href="classllvm_1_1Region.html">Region</a>.CE;</div>
<div class="line"><a name="l00599"></a><span class="lineno">  599</span>&#160;  CE-&gt;<a class="code" href="classllvm_1_1CodeExtractor.html#a3719f9e5392a61378d7815a6c346abda">findInputsOutputs</a>(OverallInputs, DummyOutputs, SinkCands);</div>
<div class="line"><a name="l00600"></a><span class="lineno">  600</span>&#160;  <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(<a class="code" href="classllvm_1_1Region.html">Region</a>.StartBB &amp;&amp; <span class="stringliteral">&quot;Region must have a start BasicBlock!&quot;</span>);</div>
<div class="line"><a name="l00601"></a><span class="lineno">  601</span>&#160;  <a class="code" href="classllvm_1_1Function.html">Function</a> *OrigF = <a class="code" href="classllvm_1_1Region.html">Region</a>.StartBB-&gt;<a class="code" href="classllvm_1_1RegionBase.html#a001c71505d9c3f8d39aed9227a0a6e74">getParent</a>();</div>
<div class="line"><a name="l00602"></a><span class="lineno">  602</span>&#160;  <a class="code" href="classllvm_1_1CodeExtractorAnalysisCache.html">CodeExtractorAnalysisCache</a> CEAC(*OrigF);</div>
<div class="line"><a name="l00603"></a><span class="lineno">  603</span>&#160;  <a class="code" href="classllvm_1_1BasicBlock.html">BasicBlock</a> *<a class="code" href="namespacellvm_1_1NVPTXISD.html#ab995b6d422b079c863075e073b2eb96ba7cff9cc4a40fe2b19129ee8e9b0ec645">Dummy</a> = <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l00604"></a><span class="lineno">  604</span>&#160; </div>
<div class="line"><a name="l00605"></a><span class="lineno">  605</span>&#160;  <span class="comment">// The region may be ineligible due to VarArgs in the parent function. In this</span></div>
<div class="line"><a name="l00606"></a><span class="lineno">  606</span>&#160;  <span class="comment">// case we ignore the region.</span></div>
<div class="line"><a name="l00607"></a><span class="lineno">  607</span>&#160;  <span class="keywordflow">if</span> (!CE-&gt;<a class="code" href="classllvm_1_1CodeExtractor.html#ad3a4770e725305d3529cba8c6562c85a">isEligible</a>()) {</div>
<div class="line"><a name="l00608"></a><span class="lineno">  608</span>&#160;    <a class="code" href="classllvm_1_1Region.html">Region</a>.IgnoreRegion = <span class="keyword">true</span>;</div>
<div class="line"><a name="l00609"></a><span class="lineno">  609</span>&#160;    <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l00610"></a><span class="lineno">  610</span>&#160;  }</div>
<div class="line"><a name="l00611"></a><span class="lineno">  611</span>&#160; </div>
<div class="line"><a name="l00612"></a><span class="lineno">  612</span>&#160;  <span class="comment">// Find if any values are going to be sunk into the function when extracted</span></div>
<div class="line"><a name="l00613"></a><span class="lineno">  613</span>&#160;  CE-&gt;<a class="code" href="classllvm_1_1CodeExtractor.html#a537993928c8af5b0d064fcd5ce1dec2f">findAllocas</a>(CEAC, SinkCands, HoistCands, <a class="code" href="namespacellvm_1_1NVPTXISD.html#ab995b6d422b079c863075e073b2eb96ba7cff9cc4a40fe2b19129ee8e9b0ec645">Dummy</a>);</div>
<div class="line"><a name="l00614"></a><span class="lineno">  614</span>&#160;  CE-&gt;<a class="code" href="classllvm_1_1CodeExtractor.html#a3719f9e5392a61378d7815a6c346abda">findInputsOutputs</a>(PremappedInputs, Outputs, SinkCands);</div>
<div class="line"><a name="l00615"></a><span class="lineno">  615</span>&#160; </div>
<div class="line"><a name="l00616"></a><span class="lineno">  616</span>&#160;  <span class="comment">// TODO: Support regions with sunken allocas: values whose lifetimes are</span></div>
<div class="line"><a name="l00617"></a><span class="lineno">  617</span>&#160;  <span class="comment">// contained completely within the outlined region.  These are not guaranteed</span></div>
<div class="line"><a name="l00618"></a><span class="lineno">  618</span>&#160;  <span class="comment">// to be the same in every region, so we must elevate them all to arguments</span></div>
<div class="line"><a name="l00619"></a><span class="lineno">  619</span>&#160;  <span class="comment">// when they appear.  If these values are not equal, it means there is some</span></div>
<div class="line"><a name="l00620"></a><span class="lineno">  620</span>&#160;  <span class="comment">// Input in OverallInputs that was removed for ArgInputs.</span></div>
<div class="line"><a name="l00621"></a><span class="lineno">  621</span>&#160;  <span class="keywordflow">if</span> (OverallInputs.<a class="code" href="classllvm_1_1SetVector.html#a18b9d328d2490f447589ba60345eba6e">size</a>() != PremappedInputs.<a class="code" href="classllvm_1_1SetVector.html#a18b9d328d2490f447589ba60345eba6e">size</a>()) {</div>
<div class="line"><a name="l00622"></a><span class="lineno">  622</span>&#160;    <a class="code" href="classllvm_1_1Region.html">Region</a>.IgnoreRegion = <span class="keyword">true</span>;</div>
<div class="line"><a name="l00623"></a><span class="lineno">  623</span>&#160;    <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l00624"></a><span class="lineno">  624</span>&#160;  }</div>
<div class="line"><a name="l00625"></a><span class="lineno">  625</span>&#160; </div>
<div class="line"><a name="l00626"></a><span class="lineno">  626</span>&#160;  <a class="code" href="IROutliner_8cpp.html#acda959f961048eba09125aba48d1142e">findConstants</a>(<a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a>, NotSame, InputGVNs);</div>
<div class="line"><a name="l00627"></a><span class="lineno">  627</span>&#160; </div>
<div class="line"><a name="l00628"></a><span class="lineno">  628</span>&#160;  <a class="code" href="IROutliner_8cpp.html#a9165dd298666d75ed2e5be7d5d8b50e5">mapInputsToGVNs</a>(<a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a>, OverallInputs, OutputMappings, InputGVNs);</div>
<div class="line"><a name="l00629"></a><span class="lineno">  629</span>&#160; </div>
<div class="line"><a name="l00630"></a><span class="lineno">  630</span>&#160;  <a class="code" href="IROutliner_8cpp.html#a09e9f16b4a1aaf539000b95bf5442155">remapExtractedInputs</a>(PremappedInputs.<a class="code" href="classllvm_1_1SetVector.html#a55ffacfbd9b6de5eb90a9f443001e3a6">getArrayRef</a>(), OutputMappings,</div>
<div class="line"><a name="l00631"></a><span class="lineno">  631</span>&#160;                       ArgInputs);</div>
<div class="line"><a name="l00632"></a><span class="lineno">  632</span>&#160; </div>
<div class="line"><a name="l00633"></a><span class="lineno">  633</span>&#160;  <span class="comment">// Sort the GVNs, since we now have constants included in the \ref InputGVNs</span></div>
<div class="line"><a name="l00634"></a><span class="lineno">  634</span>&#160;  <span class="comment">// we need to make sure they are in a deterministic order.</span></div>
<div class="line"><a name="l00635"></a><span class="lineno">  635</span>&#160;  <a class="code" href="namespacellvm.html#a076f93c387f454f0db13d4bc7d4e7f9c">stable_sort</a>(InputGVNs);</div>
<div class="line"><a name="l00636"></a><span class="lineno">  636</span>&#160;}</div>
<div class="line"><a name="l00637"></a><span class="lineno">  637</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l00638"></a><span class="lineno">  638</span>&#160;<span class="comment">/// Look over the inputs and map each input argument to an argument in the</span></div>
<div class="line"><a name="l00639"></a><span class="lineno">  639</span>&#160;<span class="comment">/// overall function for the OutlinableRegions.  This creates a way to replace</span></div>
<div class="line"><a name="l00640"></a><span class="lineno">  640</span>&#160;<span class="comment">/// the arguments of the extracted function with the arguments of the new</span></div>
<div class="line"><a name="l00641"></a><span class="lineno">  641</span>&#160;<span class="comment">/// overall function.</span></div>
<div class="line"><a name="l00642"></a><span class="lineno">  642</span>&#160;<span class="comment">///</span></div>
<div class="line"><a name="l00643"></a><span class="lineno">  643</span>&#160;<span class="comment">/// \param [in,out] Region - The region of code to be analyzed.</span></div>
<div class="line"><a name="l00644"></a><span class="lineno">  644</span>&#160;<span class="comment">/// \param [in] InputGVNs - The global value numbering of the input values</span></div>
<div class="line"><a name="l00645"></a><span class="lineno">  645</span>&#160;<span class="comment">/// collected.</span></div>
<div class="line"><a name="l00646"></a><span class="lineno">  646</span>&#160;<span class="comment">/// \param [in] ArgInputs - The values of the arguments to the extracted</span></div>
<div class="line"><a name="l00647"></a><span class="lineno">  647</span>&#160;<span class="comment">/// function.</span></div>
<div class="line"><a name="l00648"></a><span class="lineno">  648</span>&#160;<span class="comment"></span><span class="keyword">static</span> <span class="keywordtype">void</span></div>
<div class="line"><a name="l00649"></a><span class="lineno"><a class="line" href="IROutliner_8cpp.html#a9148948069532c9a5e1b59e3668b8cc3">  649</a></span>&#160;<a class="code" href="IROutliner_8cpp.html#a9148948069532c9a5e1b59e3668b8cc3">findExtractedInputToOverallInputMapping</a>(<a class="code" href="structllvm_1_1OutlinableRegion.html">OutlinableRegion</a> &amp;<a class="code" href="classllvm_1_1Region.html">Region</a>,</div>
<div class="line"><a name="l00650"></a><span class="lineno">  650</span>&#160;                                        std::vector&lt;unsigned&gt; &amp;InputGVNs,</div>
<div class="line"><a name="l00651"></a><span class="lineno">  651</span>&#160;                                        <a class="code" href="classllvm_1_1SetVector.html">SetVector&lt;Value *&gt;</a> &amp;ArgInputs) {</div>
<div class="line"><a name="l00652"></a><span class="lineno">  652</span>&#160; </div>
<div class="line"><a name="l00653"></a><span class="lineno">  653</span>&#160;  <a class="code" href="classllvm_1_1IRSimilarity_1_1IRSimilarityCandidate.html">IRSimilarityCandidate</a> &amp;<a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a> = *<a class="code" href="classllvm_1_1Region.html">Region</a>.Candidate;</div>
<div class="line"><a name="l00654"></a><span class="lineno">  654</span>&#160;  <a class="code" href="structOutlinableGroup.html">OutlinableGroup</a> &amp;Group = *<a class="code" href="classllvm_1_1Region.html">Region</a>.Parent;</div>
<div class="line"><a name="l00655"></a><span class="lineno">  655</span>&#160; </div>
<div class="line"><a name="l00656"></a><span class="lineno">  656</span>&#160;  <span class="comment">// This counts the argument number in the overall function.</span></div>
<div class="line"><a name="l00657"></a><span class="lineno">  657</span>&#160;  <span class="keywordtype">unsigned</span> TypeIndex = 0;</div>
<div class="line"><a name="l00658"></a><span class="lineno">  658</span>&#160; </div>
<div class="line"><a name="l00659"></a><span class="lineno">  659</span>&#160;  <span class="comment">// This counts the argument number in the extracted function.</span></div>
<div class="line"><a name="l00660"></a><span class="lineno">  660</span>&#160;  <span class="keywordtype">unsigned</span> OriginalIndex = 0;</div>
<div class="line"><a name="l00661"></a><span class="lineno">  661</span>&#160; </div>
<div class="line"><a name="l00662"></a><span class="lineno">  662</span>&#160;  <span class="comment">// Find the mapping of the extracted arguments to the arguments for the</span></div>
<div class="line"><a name="l00663"></a><span class="lineno">  663</span>&#160;  <span class="comment">// overall function. Since there may be extra arguments in the overall</span></div>
<div class="line"><a name="l00664"></a><span class="lineno">  664</span>&#160;  <span class="comment">// function to account for the extracted constants, we have two different</span></div>
<div class="line"><a name="l00665"></a><span class="lineno">  665</span>&#160;  <span class="comment">// counters as we find extracted arguments, and as we come across overall</span></div>
<div class="line"><a name="l00666"></a><span class="lineno">  666</span>&#160;  <span class="comment">// arguments.</span></div>
<div class="line"><a name="l00667"></a><span class="lineno">  667</span>&#160;  <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> InputVal : InputGVNs) {</div>
<div class="line"><a name="l00668"></a><span class="lineno">  668</span>&#160;    <a class="code" href="classllvm_1_1Optional.html">Optional&lt;Value *&gt;</a> InputOpt = <a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a>.fromGVN(InputVal);</div>
<div class="line"><a name="l00669"></a><span class="lineno">  669</span>&#160;    <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(InputOpt.<a class="code" href="classllvm_1_1Optional.html#ab8f06efe88f146384116a787058ab420">hasValue</a>() &amp;&amp; <span class="stringliteral">&quot;Global value number not found?&quot;</span>);</div>
<div class="line"><a name="l00670"></a><span class="lineno">  670</span>&#160;    <a class="code" href="classllvm_1_1Value.html">Value</a> *Input = InputOpt.<a class="code" href="classllvm_1_1Optional.html#a9ed8669536d806aff028d983595bab4d">getValue</a>();</div>
<div class="line"><a name="l00671"></a><span class="lineno">  671</span>&#160; </div>
<div class="line"><a name="l00672"></a><span class="lineno">  672</span>&#160;    <span class="keywordflow">if</span> (!Group.<a class="code" href="structOutlinableGroup.html#a9fabb6e6f74e4ef23575f45ea098b827">InputTypesSet</a>) {</div>
<div class="line"><a name="l00673"></a><span class="lineno">  673</span>&#160;      Group.<a class="code" href="structOutlinableGroup.html#a25b29490419d6ea97ce7d79dc58f306d">ArgumentTypes</a>.push_back(Input-&gt;<a class="code" href="classllvm_1_1Value.html#a6393a2d4fe7e10b28a0dcc35f881567b">getType</a>());</div>
<div class="line"><a name="l00674"></a><span class="lineno">  674</span>&#160;      <span class="comment">// If the input value has a swifterr attribute, make sure to mark the</span></div>
<div class="line"><a name="l00675"></a><span class="lineno">  675</span>&#160;      <span class="comment">// argument in the overall function.</span></div>
<div class="line"><a name="l00676"></a><span class="lineno">  676</span>&#160;      <span class="keywordflow">if</span> (Input-&gt;<a class="code" href="classllvm_1_1Value.html#a98897a3d01f6a4d7f10a5ac8fe862c82">isSwiftError</a>()) {</div>
<div class="line"><a name="l00677"></a><span class="lineno">  677</span>&#160;        <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(</div>
<div class="line"><a name="l00678"></a><span class="lineno">  678</span>&#160;            !Group.<a class="code" href="structOutlinableGroup.html#a41d9175e78c75fb14134d35303ded45a">SwiftErrorArgument</a>.<a class="code" href="classllvm_1_1Optional.html#ab8f06efe88f146384116a787058ab420">hasValue</a>() &amp;&amp;</div>
<div class="line"><a name="l00679"></a><span class="lineno">  679</span>&#160;            <span class="stringliteral">&quot;Argument already marked with swifterr for this OutlinableGroup!&quot;</span>);</div>
<div class="line"><a name="l00680"></a><span class="lineno">  680</span>&#160;        Group.<a class="code" href="structOutlinableGroup.html#a41d9175e78c75fb14134d35303ded45a">SwiftErrorArgument</a> = TypeIndex;</div>
<div class="line"><a name="l00681"></a><span class="lineno">  681</span>&#160;      }</div>
<div class="line"><a name="l00682"></a><span class="lineno">  682</span>&#160;    }</div>
<div class="line"><a name="l00683"></a><span class="lineno">  683</span>&#160; </div>
<div class="line"><a name="l00684"></a><span class="lineno">  684</span>&#160;    <span class="comment">// Check if we have a constant. If we do add it to the overall argument</span></div>
<div class="line"><a name="l00685"></a><span class="lineno">  685</span>&#160;    <span class="comment">// number to Constant map for the region, and continue to the next input.</span></div>
<div class="line"><a name="l00686"></a><span class="lineno">  686</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1Constant.html">Constant</a> *CST = dyn_cast&lt;Constant&gt;(Input)) {</div>
<div class="line"><a name="l00687"></a><span class="lineno">  687</span>&#160;      <a class="code" href="classllvm_1_1Region.html">Region</a>.AggArgToConstant.insert(std::make_pair(TypeIndex, CST));</div>
<div class="line"><a name="l00688"></a><span class="lineno">  688</span>&#160;      TypeIndex++;</div>
<div class="line"><a name="l00689"></a><span class="lineno">  689</span>&#160;      <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l00690"></a><span class="lineno">  690</span>&#160;    }</div>
<div class="line"><a name="l00691"></a><span class="lineno">  691</span>&#160; </div>
<div class="line"><a name="l00692"></a><span class="lineno">  692</span>&#160;    <span class="comment">// It is not a constant, we create the mapping from extracted argument list</span></div>
<div class="line"><a name="l00693"></a><span class="lineno">  693</span>&#160;    <span class="comment">// to the overall argument list.</span></div>
<div class="line"><a name="l00694"></a><span class="lineno">  694</span>&#160;    <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(ArgInputs.<a class="code" href="classllvm_1_1SetVector.html#a21c2c6ae5ec23004dc4020eacf83bbce">count</a>(Input) &amp;&amp; <span class="stringliteral">&quot;Input cannot be found!&quot;</span>);</div>
<div class="line"><a name="l00695"></a><span class="lineno">  695</span>&#160; </div>
<div class="line"><a name="l00696"></a><span class="lineno">  696</span>&#160;    <a class="code" href="classllvm_1_1Region.html">Region</a>.ExtractedArgToAgg.insert(std::make_pair(OriginalIndex, TypeIndex));</div>
<div class="line"><a name="l00697"></a><span class="lineno">  697</span>&#160;    <a class="code" href="classllvm_1_1Region.html">Region</a>.AggArgToExtracted.insert(std::make_pair(TypeIndex, OriginalIndex));</div>
<div class="line"><a name="l00698"></a><span class="lineno">  698</span>&#160;    OriginalIndex++;</div>
<div class="line"><a name="l00699"></a><span class="lineno">  699</span>&#160;    TypeIndex++;</div>
<div class="line"><a name="l00700"></a><span class="lineno">  700</span>&#160;  }</div>
<div class="line"><a name="l00701"></a><span class="lineno">  701</span>&#160; </div>
<div class="line"><a name="l00702"></a><span class="lineno">  702</span>&#160;  <span class="comment">// If the function type definitions for the OutlinableGroup holding the region</span></div>
<div class="line"><a name="l00703"></a><span class="lineno">  703</span>&#160;  <span class="comment">// have not been set, set the length of the inputs here.  We should have the</span></div>
<div class="line"><a name="l00704"></a><span class="lineno">  704</span>&#160;  <span class="comment">// same inputs for all of the different regions contained in the</span></div>
<div class="line"><a name="l00705"></a><span class="lineno">  705</span>&#160;  <span class="comment">// OutlinableGroup since they are all structurally similar to one another.</span></div>
<div class="line"><a name="l00706"></a><span class="lineno">  706</span>&#160;  <span class="keywordflow">if</span> (!Group.<a class="code" href="structOutlinableGroup.html#a9fabb6e6f74e4ef23575f45ea098b827">InputTypesSet</a>) {</div>
<div class="line"><a name="l00707"></a><span class="lineno">  707</span>&#160;    Group.<a class="code" href="structOutlinableGroup.html#aeab6020692f93361cff45734711204fc">NumAggregateInputs</a> = TypeIndex;</div>
<div class="line"><a name="l00708"></a><span class="lineno">  708</span>&#160;    Group.<a class="code" href="structOutlinableGroup.html#a9fabb6e6f74e4ef23575f45ea098b827">InputTypesSet</a> = <span class="keyword">true</span>;</div>
<div class="line"><a name="l00709"></a><span class="lineno">  709</span>&#160;  }</div>
<div class="line"><a name="l00710"></a><span class="lineno">  710</span>&#160; </div>
<div class="line"><a name="l00711"></a><span class="lineno">  711</span>&#160;  <a class="code" href="classllvm_1_1Region.html">Region</a>.NumExtractedInputs = OriginalIndex;</div>
<div class="line"><a name="l00712"></a><span class="lineno">  712</span>&#160;}</div>
<div class="line"><a name="l00713"></a><span class="lineno">  713</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l00714"></a><span class="lineno">  714</span>&#160;<span class="comment">/// Create a mapping of the output arguments for the \p Region to the output</span></div>
<div class="line"><a name="l00715"></a><span class="lineno">  715</span>&#160;<span class="comment">/// arguments of the overall outlined function.</span></div>
<div class="line"><a name="l00716"></a><span class="lineno">  716</span>&#160;<span class="comment">///</span></div>
<div class="line"><a name="l00717"></a><span class="lineno">  717</span>&#160;<span class="comment">/// \param [in,out] Region - The region of code to be analyzed.</span></div>
<div class="line"><a name="l00718"></a><span class="lineno">  718</span>&#160;<span class="comment">/// \param [in] Outputs - The values found by the code extractor.</span></div>
<div class="line"><a name="l00719"></a><span class="lineno">  719</span>&#160;<span class="comment"></span><span class="keyword">static</span> <span class="keywordtype">void</span></div>
<div class="line"><a name="l00720"></a><span class="lineno"><a class="line" href="IROutliner_8cpp.html#ad48e342de7dd9ab549c3909db631f95e">  720</a></span>&#160;<a class="code" href="IROutliner_8cpp.html#ad48e342de7dd9ab549c3909db631f95e">findExtractedOutputToOverallOutputMapping</a>(<a class="code" href="structllvm_1_1OutlinableRegion.html">OutlinableRegion</a> &amp;<a class="code" href="classllvm_1_1Region.html">Region</a>,</div>
<div class="line"><a name="l00721"></a><span class="lineno">  721</span>&#160;                                          <a class="code" href="classllvm_1_1ArrayRef.html">ArrayRef&lt;Value *&gt;</a> Outputs) {</div>
<div class="line"><a name="l00722"></a><span class="lineno">  722</span>&#160;  <a class="code" href="structOutlinableGroup.html">OutlinableGroup</a> &amp;Group = *<a class="code" href="classllvm_1_1Region.html">Region</a>.Parent;</div>
<div class="line"><a name="l00723"></a><span class="lineno">  723</span>&#160;  <a class="code" href="classllvm_1_1IRSimilarity_1_1IRSimilarityCandidate.html">IRSimilarityCandidate</a> &amp;<a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a> = *<a class="code" href="classllvm_1_1Region.html">Region</a>.Candidate;</div>
<div class="line"><a name="l00724"></a><span class="lineno">  724</span>&#160; </div>
<div class="line"><a name="l00725"></a><span class="lineno">  725</span>&#160;  <span class="comment">// This counts the argument number in the extracted function.</span></div>
<div class="line"><a name="l00726"></a><span class="lineno">  726</span>&#160;  <span class="keywordtype">unsigned</span> OriginalIndex = <a class="code" href="classllvm_1_1Region.html">Region</a>.NumExtractedInputs;</div>
<div class="line"><a name="l00727"></a><span class="lineno">  727</span>&#160; </div>
<div class="line"><a name="l00728"></a><span class="lineno">  728</span>&#160;  <span class="comment">// This counts the argument number in the overall function.</span></div>
<div class="line"><a name="l00729"></a><span class="lineno">  729</span>&#160;  <span class="keywordtype">unsigned</span> TypeIndex = Group.<a class="code" href="structOutlinableGroup.html#aeab6020692f93361cff45734711204fc">NumAggregateInputs</a>;</div>
<div class="line"><a name="l00730"></a><span class="lineno">  730</span>&#160;  <span class="keywordtype">bool</span> TypeFound;</div>
<div class="line"><a name="l00731"></a><span class="lineno">  731</span>&#160;  <a class="code" href="classllvm_1_1DenseSet.html">DenseSet&lt;unsigned&gt;</a> AggArgsUsed;</div>
<div class="line"><a name="l00732"></a><span class="lineno">  732</span>&#160; </div>
<div class="line"><a name="l00733"></a><span class="lineno">  733</span>&#160;  <span class="comment">// Iterate over the output types and identify if there is an aggregate pointer</span></div>
<div class="line"><a name="l00734"></a><span class="lineno">  734</span>&#160;  <span class="comment">// type whose base type matches the current output type. If there is, we mark</span></div>
<div class="line"><a name="l00735"></a><span class="lineno">  735</span>&#160;  <span class="comment">// that we will use this output register for this value. If not we add another</span></div>
<div class="line"><a name="l00736"></a><span class="lineno">  736</span>&#160;  <span class="comment">// type to the overall argument type list. We also store the GVNs used for</span></div>
<div class="line"><a name="l00737"></a><span class="lineno">  737</span>&#160;  <span class="comment">// stores to identify which values will need to be moved into an special</span></div>
<div class="line"><a name="l00738"></a><span class="lineno">  738</span>&#160;  <span class="comment">// block that holds the stores to the output registers.</span></div>
<div class="line"><a name="l00739"></a><span class="lineno">  739</span>&#160;  <span class="keywordflow">for</span> (<a class="code" href="classllvm_1_1Value.html">Value</a> *Output : Outputs) {</div>
<div class="line"><a name="l00740"></a><span class="lineno">  740</span>&#160;    TypeFound = <span class="keyword">false</span>;</div>
<div class="line"><a name="l00741"></a><span class="lineno">  741</span>&#160;    <span class="comment">// We can do this since it is a result value, and will have a number</span></div>
<div class="line"><a name="l00742"></a><span class="lineno">  742</span>&#160;    <span class="comment">// that is necessarily the same. BUT if in the future, the instructions</span></div>
<div class="line"><a name="l00743"></a><span class="lineno">  743</span>&#160;    <span class="comment">// do not have to be in same order, but are functionally the same, we will</span></div>
<div class="line"><a name="l00744"></a><span class="lineno">  744</span>&#160;    <span class="comment">// have to use a different scheme, as one-to-one correspondence is not</span></div>
<div class="line"><a name="l00745"></a><span class="lineno">  745</span>&#160;    <span class="comment">// guaranteed.</span></div>
<div class="line"><a name="l00746"></a><span class="lineno">  746</span>&#160;    <span class="keywordtype">unsigned</span> <a class="code" href="classllvm_1_1GlobalValue.html">GlobalValue</a> = <a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a>.getGVN(Output).getValue();</div>
<div class="line"><a name="l00747"></a><span class="lineno">  747</span>&#160;    <span class="keywordtype">unsigned</span> ArgumentSize = Group.<a class="code" href="structOutlinableGroup.html#a25b29490419d6ea97ce7d79dc58f306d">ArgumentTypes</a>.size();</div>
<div class="line"><a name="l00748"></a><span class="lineno">  748</span>&#160; </div>
<div class="line"><a name="l00749"></a><span class="lineno">  749</span>&#160;    <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> Jdx = TypeIndex; Jdx &lt; ArgumentSize; Jdx++) {</div>
<div class="line"><a name="l00750"></a><span class="lineno">  750</span>&#160;      <span class="keywordflow">if</span> (Group.<a class="code" href="structOutlinableGroup.html#a25b29490419d6ea97ce7d79dc58f306d">ArgumentTypes</a>[Jdx] != <a class="code" href="classllvm_1_1PointerType.html#a8db49fd5069f21d514e7bb0fd11f0902">PointerType::getUnqual</a>(Output-&gt;getType()))</div>
<div class="line"><a name="l00751"></a><span class="lineno">  751</span>&#160;        <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l00752"></a><span class="lineno">  752</span>&#160; </div>
<div class="line"><a name="l00753"></a><span class="lineno">  753</span>&#160;      <span class="keywordflow">if</span> (AggArgsUsed.<a class="code" href="classllvm_1_1detail_1_1DenseSetImpl.html#ad409c2de8502b94c8a0b1193307c63b6">contains</a>(Jdx))</div>
<div class="line"><a name="l00754"></a><span class="lineno">  754</span>&#160;        <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l00755"></a><span class="lineno">  755</span>&#160; </div>
<div class="line"><a name="l00756"></a><span class="lineno">  756</span>&#160;      TypeFound = <span class="keyword">true</span>;</div>
<div class="line"><a name="l00757"></a><span class="lineno">  757</span>&#160;      AggArgsUsed.<a class="code" href="classllvm_1_1detail_1_1DenseSetImpl.html#a79eed48913651aeedda2eed25201ea84">insert</a>(Jdx);</div>
<div class="line"><a name="l00758"></a><span class="lineno">  758</span>&#160;      <a class="code" href="classllvm_1_1Region.html">Region</a>.ExtractedArgToAgg.insert(std::make_pair(OriginalIndex, Jdx));</div>
<div class="line"><a name="l00759"></a><span class="lineno">  759</span>&#160;      <a class="code" href="classllvm_1_1Region.html">Region</a>.AggArgToExtracted.insert(std::make_pair(Jdx, OriginalIndex));</div>
<div class="line"><a name="l00760"></a><span class="lineno">  760</span>&#160;      <a class="code" href="classllvm_1_1Region.html">Region</a>.GVNStores.push_back(<a class="code" href="classllvm_1_1GlobalValue.html">GlobalValue</a>);</div>
<div class="line"><a name="l00761"></a><span class="lineno">  761</span>&#160;      <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00762"></a><span class="lineno">  762</span>&#160;    }</div>
<div class="line"><a name="l00763"></a><span class="lineno">  763</span>&#160; </div>
<div class="line"><a name="l00764"></a><span class="lineno">  764</span>&#160;    <span class="comment">// We were unable to find an unused type in the output type set that matches</span></div>
<div class="line"><a name="l00765"></a><span class="lineno">  765</span>&#160;    <span class="comment">// the output, so we add a pointer type to the argument types of the overall</span></div>
<div class="line"><a name="l00766"></a><span class="lineno">  766</span>&#160;    <span class="comment">// function to handle this output and create a mapping to it.</span></div>
<div class="line"><a name="l00767"></a><span class="lineno">  767</span>&#160;    <span class="keywordflow">if</span> (!TypeFound) {</div>
<div class="line"><a name="l00768"></a><span class="lineno">  768</span>&#160;      Group.<a class="code" href="structOutlinableGroup.html#a25b29490419d6ea97ce7d79dc58f306d">ArgumentTypes</a>.push_back(<a class="code" href="classllvm_1_1PointerType.html#a8db49fd5069f21d514e7bb0fd11f0902">PointerType::getUnqual</a>(Output-&gt;getType()));</div>
<div class="line"><a name="l00769"></a><span class="lineno">  769</span>&#160;      AggArgsUsed.<a class="code" href="classllvm_1_1detail_1_1DenseSetImpl.html#a79eed48913651aeedda2eed25201ea84">insert</a>(Group.<a class="code" href="structOutlinableGroup.html#a25b29490419d6ea97ce7d79dc58f306d">ArgumentTypes</a>.size() - 1);</div>
<div class="line"><a name="l00770"></a><span class="lineno">  770</span>&#160;      <a class="code" href="classllvm_1_1Region.html">Region</a>.ExtractedArgToAgg.insert(</div>
<div class="line"><a name="l00771"></a><span class="lineno">  771</span>&#160;          std::make_pair(OriginalIndex, Group.<a class="code" href="structOutlinableGroup.html#a25b29490419d6ea97ce7d79dc58f306d">ArgumentTypes</a>.size() - 1));</div>
<div class="line"><a name="l00772"></a><span class="lineno">  772</span>&#160;      <a class="code" href="classllvm_1_1Region.html">Region</a>.AggArgToExtracted.insert(</div>
<div class="line"><a name="l00773"></a><span class="lineno">  773</span>&#160;          std::make_pair(Group.<a class="code" href="structOutlinableGroup.html#a25b29490419d6ea97ce7d79dc58f306d">ArgumentTypes</a>.size() - 1, OriginalIndex));</div>
<div class="line"><a name="l00774"></a><span class="lineno">  774</span>&#160;      <a class="code" href="classllvm_1_1Region.html">Region</a>.GVNStores.push_back(<a class="code" href="classllvm_1_1GlobalValue.html">GlobalValue</a>);</div>
<div class="line"><a name="l00775"></a><span class="lineno">  775</span>&#160;    }</div>
<div class="line"><a name="l00776"></a><span class="lineno">  776</span>&#160; </div>
<div class="line"><a name="l00777"></a><span class="lineno">  777</span>&#160;    <a class="code" href="namespacellvm.html#a076f93c387f454f0db13d4bc7d4e7f9c">stable_sort</a>(<a class="code" href="classllvm_1_1Region.html">Region</a>.GVNStores);</div>
<div class="line"><a name="l00778"></a><span class="lineno">  778</span>&#160;    OriginalIndex++;</div>
<div class="line"><a name="l00779"></a><span class="lineno">  779</span>&#160;    TypeIndex++;</div>
<div class="line"><a name="l00780"></a><span class="lineno">  780</span>&#160;  }</div>
<div class="line"><a name="l00781"></a><span class="lineno">  781</span>&#160;}</div>
<div class="line"><a name="l00782"></a><span class="lineno">  782</span>&#160; </div>
<div class="line"><a name="l00783"></a><span class="lineno">  783</span>&#160;<span class="keywordtype">void</span> IROutliner::findAddInputsOutputs(<a class="code" href="classllvm_1_1Module.html">Module</a> &amp;M, <a class="code" href="structllvm_1_1OutlinableRegion.html">OutlinableRegion</a> &amp;<a class="code" href="classllvm_1_1Region.html">Region</a>,</div>
<div class="line"><a name="l00784"></a><span class="lineno">  784</span>&#160;                                      <a class="code" href="classllvm_1_1DenseSet.html">DenseSet&lt;unsigned&gt;</a> &amp;NotSame) {</div>
<div class="line"><a name="l00785"></a><span class="lineno">  785</span>&#160;  std::vector&lt;unsigned&gt; Inputs;</div>
<div class="line"><a name="l00786"></a><span class="lineno">  786</span>&#160;  <a class="code" href="classllvm_1_1SetVector.html">SetVector&lt;Value *&gt;</a> ArgInputs, Outputs;</div>
<div class="line"><a name="l00787"></a><span class="lineno">  787</span>&#160; </div>
<div class="line"><a name="l00788"></a><span class="lineno">  788</span>&#160;  <a class="code" href="IROutliner_8cpp.html#a48d81e3f58b8db143bc85763d25dbc7a">getCodeExtractorArguments</a>(<a class="code" href="classllvm_1_1Region.html">Region</a>, Inputs, NotSame, OutputMappings, ArgInputs,</div>
<div class="line"><a name="l00789"></a><span class="lineno">  789</span>&#160;                            Outputs);</div>
<div class="line"><a name="l00790"></a><span class="lineno">  790</span>&#160; </div>
<div class="line"><a name="l00791"></a><span class="lineno">  791</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1Region.html">Region</a>.IgnoreRegion)</div>
<div class="line"><a name="l00792"></a><span class="lineno">  792</span>&#160;    <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l00793"></a><span class="lineno">  793</span>&#160; </div>
<div class="line"><a name="l00794"></a><span class="lineno">  794</span>&#160;  <span class="comment">// Map the inputs found by the CodeExtractor to the arguments found for</span></div>
<div class="line"><a name="l00795"></a><span class="lineno">  795</span>&#160;  <span class="comment">// the overall function.</span></div>
<div class="line"><a name="l00796"></a><span class="lineno">  796</span>&#160;  <a class="code" href="IROutliner_8cpp.html#a9148948069532c9a5e1b59e3668b8cc3">findExtractedInputToOverallInputMapping</a>(<a class="code" href="classllvm_1_1Region.html">Region</a>, Inputs, ArgInputs);</div>
<div class="line"><a name="l00797"></a><span class="lineno">  797</span>&#160; </div>
<div class="line"><a name="l00798"></a><span class="lineno">  798</span>&#160;  <span class="comment">// Map the outputs found by the CodeExtractor to the arguments found for</span></div>
<div class="line"><a name="l00799"></a><span class="lineno">  799</span>&#160;  <span class="comment">// the overall function.</span></div>
<div class="line"><a name="l00800"></a><span class="lineno">  800</span>&#160;  <a class="code" href="IROutliner_8cpp.html#ad48e342de7dd9ab549c3909db631f95e">findExtractedOutputToOverallOutputMapping</a>(<a class="code" href="classllvm_1_1Region.html">Region</a>, Outputs.<a class="code" href="classllvm_1_1SetVector.html#a55ffacfbd9b6de5eb90a9f443001e3a6">getArrayRef</a>());</div>
<div class="line"><a name="l00801"></a><span class="lineno">  801</span>&#160;}</div>
<div class="line"><a name="l00802"></a><span class="lineno">  802</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l00803"></a><span class="lineno">  803</span>&#160;<span class="comment">/// Replace the extracted function in the Region with a call to the overall</span></div>
<div class="line"><a name="l00804"></a><span class="lineno">  804</span>&#160;<span class="comment">/// function constructed from the deduplicated similar regions, replacing and</span></div>
<div class="line"><a name="l00805"></a><span class="lineno">  805</span>&#160;<span class="comment">/// remapping the values passed to the extracted function as arguments to the</span></div>
<div class="line"><a name="l00806"></a><span class="lineno">  806</span>&#160;<span class="comment">/// new arguments of the overall function.</span></div>
<div class="line"><a name="l00807"></a><span class="lineno">  807</span>&#160;<span class="comment">///</span></div>
<div class="line"><a name="l00808"></a><span class="lineno">  808</span>&#160;<span class="comment">/// \param [in] M - The module to outline from.</span></div>
<div class="line"><a name="l00809"></a><span class="lineno">  809</span>&#160;<span class="comment">/// \param [in] Region - The regions of extracted code to be replaced with a new</span></div>
<div class="line"><a name="l00810"></a><span class="lineno">  810</span>&#160;<span class="comment">/// function.</span></div>
<div class="line"><a name="l00811"></a><span class="lineno">  811</span>&#160;<span class="comment">/// \returns a call instruction with the replaced function.</span></div>
<div class="line"><a name="l00812"></a><span class="lineno"><a class="line" href="IROutliner_8cpp.html#a4f3c175c90b9439d52ad07ecda521c2f">  812</a></span>&#160;<span class="comment"></span><a class="code" href="classllvm_1_1CallInst.html">CallInst</a> *<a class="code" href="IROutliner_8cpp.html#a4f3c175c90b9439d52ad07ecda521c2f">replaceCalledFunction</a>(<a class="code" href="classllvm_1_1Module.html">Module</a> &amp;M, <a class="code" href="structllvm_1_1OutlinableRegion.html">OutlinableRegion</a> &amp;<a class="code" href="classllvm_1_1Region.html">Region</a>) {</div>
<div class="line"><a name="l00813"></a><span class="lineno">  813</span>&#160;  std::vector&lt;Value *&gt; NewCallArgs;</div>
<div class="line"><a name="l00814"></a><span class="lineno">  814</span>&#160;  <a class="code" href="classllvm_1_1DenseMap.html">DenseMap&lt;unsigned, unsigned&gt;::iterator</a> ArgPair;</div>
<div class="line"><a name="l00815"></a><span class="lineno">  815</span>&#160; </div>
<div class="line"><a name="l00816"></a><span class="lineno">  816</span>&#160;  <a class="code" href="structOutlinableGroup.html">OutlinableGroup</a> &amp;Group = *<a class="code" href="classllvm_1_1Region.html">Region</a>.Parent;</div>
<div class="line"><a name="l00817"></a><span class="lineno">  817</span>&#160;  <a class="code" href="classllvm_1_1CallInst.html">CallInst</a> *<a class="code" href="namespacellvm_1_1MCID.html#ab357441fcd1ea1f9b0d27c12700f6023a463baf545246fea9718664d933ffe66f">Call</a> = <a class="code" href="classllvm_1_1Region.html">Region</a>.Call;</div>
<div class="line"><a name="l00818"></a><span class="lineno">  818</span>&#160;  <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(<a class="code" href="namespacellvm_1_1MCID.html#ab357441fcd1ea1f9b0d27c12700f6023a463baf545246fea9718664d933ffe66f">Call</a> &amp;&amp; <span class="stringliteral">&quot;Call to replace is nullptr?&quot;</span>);</div>
<div class="line"><a name="l00819"></a><span class="lineno">  819</span>&#160;  <a class="code" href="classllvm_1_1Function.html">Function</a> *AggFunc = Group.<a class="code" href="structOutlinableGroup.html#a95133d99b799f98e5c92dacc3028c621">OutlinedFunction</a>;</div>
<div class="line"><a name="l00820"></a><span class="lineno">  820</span>&#160;  <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(AggFunc &amp;&amp; <span class="stringliteral">&quot;Function to replace with is nullptr?&quot;</span>);</div>
<div class="line"><a name="l00821"></a><span class="lineno">  821</span>&#160; </div>
<div class="line"><a name="l00822"></a><span class="lineno">  822</span>&#160;  <span class="comment">// If the arguments are the same size, there are not values that need to be</span></div>
<div class="line"><a name="l00823"></a><span class="lineno">  823</span>&#160;  <span class="comment">// made argument, or different output registers to handle.  We can simply</span></div>
<div class="line"><a name="l00824"></a><span class="lineno">  824</span>&#160;  <span class="comment">// replace the called function in this case.</span></div>
<div class="line"><a name="l00825"></a><span class="lineno">  825</span>&#160;  <span class="keywordflow">if</span> (AggFunc-&gt;<a class="code" href="classllvm_1_1Function.html#ac6baa801e4aea800984e760d5460662f">arg_size</a>() == <a class="code" href="namespacellvm_1_1MCID.html#ab357441fcd1ea1f9b0d27c12700f6023a463baf545246fea9718664d933ffe66f">Call</a>-&gt;arg_size()) {</div>
<div class="line"><a name="l00826"></a><span class="lineno">  826</span>&#160;    <a class="code" href="Debug_8h.html#a08efc68d15935eb8889400a46c3749ba">LLVM_DEBUG</a>(<a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <span class="stringliteral">&quot;Replace call to &quot;</span> &lt;&lt; *<a class="code" href="namespacellvm_1_1MCID.html#ab357441fcd1ea1f9b0d27c12700f6023a463baf545246fea9718664d933ffe66f">Call</a> &lt;&lt; <span class="stringliteral">&quot; with call to &quot;</span></div>
<div class="line"><a name="l00827"></a><span class="lineno">  827</span>&#160;                      &lt;&lt; *AggFunc &lt;&lt; <span class="stringliteral">&quot; with same number of arguments\n&quot;</span>);</div>
<div class="line"><a name="l00828"></a><span class="lineno">  828</span>&#160;    <a class="code" href="namespacellvm_1_1MCID.html#ab357441fcd1ea1f9b0d27c12700f6023a463baf545246fea9718664d933ffe66f">Call</a>-&gt;setCalledFunction(AggFunc);</div>
<div class="line"><a name="l00829"></a><span class="lineno">  829</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="namespacellvm_1_1MCID.html#ab357441fcd1ea1f9b0d27c12700f6023a463baf545246fea9718664d933ffe66f">Call</a>;</div>
<div class="line"><a name="l00830"></a><span class="lineno">  830</span>&#160;  }</div>
<div class="line"><a name="l00831"></a><span class="lineno">  831</span>&#160; </div>
<div class="line"><a name="l00832"></a><span class="lineno">  832</span>&#160;  <span class="comment">// We have a different number of arguments than the new function, so</span></div>
<div class="line"><a name="l00833"></a><span class="lineno">  833</span>&#160;  <span class="comment">// we need to use our previously mappings off extracted argument to overall</span></div>
<div class="line"><a name="l00834"></a><span class="lineno">  834</span>&#160;  <span class="comment">// function argument, and constants to overall function argument to create the</span></div>
<div class="line"><a name="l00835"></a><span class="lineno">  835</span>&#160;  <span class="comment">// new argument list.</span></div>
<div class="line"><a name="l00836"></a><span class="lineno">  836</span>&#160;  <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> AggArgIdx = 0; AggArgIdx &lt; AggFunc-&gt;<a class="code" href="classllvm_1_1Function.html#ac6baa801e4aea800984e760d5460662f">arg_size</a>(); AggArgIdx++) {</div>
<div class="line"><a name="l00837"></a><span class="lineno">  837</span>&#160; </div>
<div class="line"><a name="l00838"></a><span class="lineno">  838</span>&#160;    <span class="keywordflow">if</span> (AggArgIdx == AggFunc-&gt;<a class="code" href="classllvm_1_1Function.html#ac6baa801e4aea800984e760d5460662f">arg_size</a>() - 1 &amp;&amp;</div>
<div class="line"><a name="l00839"></a><span class="lineno">  839</span>&#160;        Group.<a class="code" href="structOutlinableGroup.html#a53e3a8f28cb8e7a01334b7560467d9ea">OutputGVNCombinations</a>.<a class="code" href="classllvm_1_1detail_1_1DenseSetImpl.html#a9a025cb106832026cd05c2b4648a699f">size</a>() &gt; 1) {</div>
<div class="line"><a name="l00840"></a><span class="lineno">  840</span>&#160;      <span class="comment">// If we are on the last argument, and we need to differentiate between</span></div>
<div class="line"><a name="l00841"></a><span class="lineno">  841</span>&#160;      <span class="comment">// output blocks, add an integer to the argument list to determine</span></div>
<div class="line"><a name="l00842"></a><span class="lineno">  842</span>&#160;      <span class="comment">// what block to take</span></div>
<div class="line"><a name="l00843"></a><span class="lineno">  843</span>&#160;      <a class="code" href="Debug_8h.html#a08efc68d15935eb8889400a46c3749ba">LLVM_DEBUG</a>(<a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <span class="stringliteral">&quot;Set switch block argument to &quot;</span></div>
<div class="line"><a name="l00844"></a><span class="lineno">  844</span>&#160;                        &lt;&lt; <a class="code" href="classllvm_1_1Region.html">Region</a>.OutputBlockNum &lt;&lt; <span class="stringliteral">&quot;\n&quot;</span>);</div>
<div class="line"><a name="l00845"></a><span class="lineno">  845</span>&#160;      NewCallArgs.push_back(<a class="code" href="classllvm_1_1ConstantInt.html#a969709dd49c28865a482d8b870f87c46">ConstantInt::get</a>(<a class="code" href="classllvm_1_1Type.html#a30dd396c5b40cd86c1591872e574ccdf">Type::getInt32Ty</a>(<a class="code" href="lib_2Target_2X86_2README_8txt.html#ac88fe1d3a61b056a4f64fbbb156a62ff">M</a>.getContext()),</div>
<div class="line"><a name="l00846"></a><span class="lineno">  846</span>&#160;                                             <a class="code" href="classllvm_1_1Region.html">Region</a>.OutputBlockNum));</div>
<div class="line"><a name="l00847"></a><span class="lineno">  847</span>&#160;      <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l00848"></a><span class="lineno">  848</span>&#160;    }</div>
<div class="line"><a name="l00849"></a><span class="lineno">  849</span>&#160; </div>
<div class="line"><a name="l00850"></a><span class="lineno">  850</span>&#160;    ArgPair = <a class="code" href="classllvm_1_1Region.html">Region</a>.AggArgToExtracted.find(AggArgIdx);</div>
<div class="line"><a name="l00851"></a><span class="lineno">  851</span>&#160;    <span class="keywordflow">if</span> (ArgPair != <a class="code" href="classllvm_1_1Region.html">Region</a>.AggArgToExtracted.<a class="code" href="classllvm_1_1RegionBase.html#a9b0ebfeb3f47f1ad763e5b184dcb4e03">end</a>()) {</div>
<div class="line"><a name="l00852"></a><span class="lineno">  852</span>&#160;      <a class="code" href="classllvm_1_1Value.html">Value</a> *ArgumentValue = <a class="code" href="namespacellvm_1_1MCID.html#ab357441fcd1ea1f9b0d27c12700f6023a463baf545246fea9718664d933ffe66f">Call</a>-&gt;getArgOperand(ArgPair-&gt;second);</div>
<div class="line"><a name="l00853"></a><span class="lineno">  853</span>&#160;      <span class="comment">// If we found the mapping from the extracted function to the overall</span></div>
<div class="line"><a name="l00854"></a><span class="lineno">  854</span>&#160;      <span class="comment">// function, we simply add it to the argument list.  We use the same</span></div>
<div class="line"><a name="l00855"></a><span class="lineno">  855</span>&#160;      <span class="comment">// value, it just needs to honor the new order of arguments.</span></div>
<div class="line"><a name="l00856"></a><span class="lineno">  856</span>&#160;      <a class="code" href="Debug_8h.html#a08efc68d15935eb8889400a46c3749ba">LLVM_DEBUG</a>(<a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <span class="stringliteral">&quot;Setting argument &quot;</span> &lt;&lt; AggArgIdx &lt;&lt; <span class="stringliteral">&quot; to value &quot;</span></div>
<div class="line"><a name="l00857"></a><span class="lineno">  857</span>&#160;                        &lt;&lt; *ArgumentValue &lt;&lt; <span class="stringliteral">&quot;\n&quot;</span>);</div>
<div class="line"><a name="l00858"></a><span class="lineno">  858</span>&#160;      NewCallArgs.push_back(ArgumentValue);</div>
<div class="line"><a name="l00859"></a><span class="lineno">  859</span>&#160;      <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l00860"></a><span class="lineno">  860</span>&#160;    }</div>
<div class="line"><a name="l00861"></a><span class="lineno">  861</span>&#160; </div>
<div class="line"><a name="l00862"></a><span class="lineno">  862</span>&#160;    <span class="comment">// If it is a constant, we simply add it to the argument list as a value.</span></div>
<div class="line"><a name="l00863"></a><span class="lineno">  863</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1Region.html">Region</a>.AggArgToConstant.find(AggArgIdx) !=</div>
<div class="line"><a name="l00864"></a><span class="lineno">  864</span>&#160;        <a class="code" href="classllvm_1_1Region.html">Region</a>.AggArgToConstant.<a class="code" href="classllvm_1_1RegionBase.html#a9b0ebfeb3f47f1ad763e5b184dcb4e03">end</a>()) {</div>
<div class="line"><a name="l00865"></a><span class="lineno">  865</span>&#160;      <a class="code" href="classllvm_1_1Constant.html">Constant</a> *CST = <a class="code" href="classllvm_1_1Region.html">Region</a>.AggArgToConstant.find(AggArgIdx)-&gt;second;</div>
<div class="line"><a name="l00866"></a><span class="lineno">  866</span>&#160;      <a class="code" href="Debug_8h.html#a08efc68d15935eb8889400a46c3749ba">LLVM_DEBUG</a>(<a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <span class="stringliteral">&quot;Setting argument &quot;</span> &lt;&lt; AggArgIdx &lt;&lt; <span class="stringliteral">&quot; to value &quot;</span></div>
<div class="line"><a name="l00867"></a><span class="lineno">  867</span>&#160;                        &lt;&lt; *CST &lt;&lt; <span class="stringliteral">&quot;\n&quot;</span>);</div>
<div class="line"><a name="l00868"></a><span class="lineno">  868</span>&#160;      NewCallArgs.push_back(CST);</div>
<div class="line"><a name="l00869"></a><span class="lineno">  869</span>&#160;      <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l00870"></a><span class="lineno">  870</span>&#160;    }</div>
<div class="line"><a name="l00871"></a><span class="lineno">  871</span>&#160; </div>
<div class="line"><a name="l00872"></a><span class="lineno">  872</span>&#160;    <span class="comment">// Add a nullptr value if the argument is not found in the extracted</span></div>
<div class="line"><a name="l00873"></a><span class="lineno">  873</span>&#160;    <span class="comment">// function.  If we cannot find a value, it means it is not in use</span></div>
<div class="line"><a name="l00874"></a><span class="lineno">  874</span>&#160;    <span class="comment">// for the region, so we should not pass anything to it.</span></div>
<div class="line"><a name="l00875"></a><span class="lineno">  875</span>&#160;    <a class="code" href="Debug_8h.html#a08efc68d15935eb8889400a46c3749ba">LLVM_DEBUG</a>(<a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <span class="stringliteral">&quot;Setting argument &quot;</span> &lt;&lt; AggArgIdx &lt;&lt; <span class="stringliteral">&quot; to nullptr\n&quot;</span>);</div>
<div class="line"><a name="l00876"></a><span class="lineno">  876</span>&#160;    NewCallArgs.push_back(<a class="code" href="classllvm_1_1ConstantPointerNull.html#a96f5c85e4022e369266541b2db3fda69">ConstantPointerNull::get</a>(</div>
<div class="line"><a name="l00877"></a><span class="lineno">  877</span>&#160;        <span class="keyword">static_cast&lt;</span><a class="code" href="classllvm_1_1PointerType.html">PointerType</a> *<span class="keyword">&gt;</span>(AggFunc-&gt;<a class="code" href="classllvm_1_1Function.html#a8052a4f265aa7540f68ca3103a55538d">getArg</a>(AggArgIdx)-&gt;<a class="code" href="classllvm_1_1Value.html#a6393a2d4fe7e10b28a0dcc35f881567b">getType</a>())));</div>
<div class="line"><a name="l00878"></a><span class="lineno">  878</span>&#160;  }</div>
<div class="line"><a name="l00879"></a><span class="lineno">  879</span>&#160; </div>
<div class="line"><a name="l00880"></a><span class="lineno">  880</span>&#160;  <a class="code" href="Debug_8h.html#a08efc68d15935eb8889400a46c3749ba">LLVM_DEBUG</a>(<a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <span class="stringliteral">&quot;Replace call to &quot;</span> &lt;&lt; *<a class="code" href="namespacellvm_1_1MCID.html#ab357441fcd1ea1f9b0d27c12700f6023a463baf545246fea9718664d933ffe66f">Call</a> &lt;&lt; <span class="stringliteral">&quot; with call to &quot;</span></div>
<div class="line"><a name="l00881"></a><span class="lineno">  881</span>&#160;                    &lt;&lt; *AggFunc &lt;&lt; <span class="stringliteral">&quot; with new set of arguments\n&quot;</span>);</div>
<div class="line"><a name="l00882"></a><span class="lineno">  882</span>&#160;  <span class="comment">// Create the new call instruction and erase the old one.</span></div>
<div class="line"><a name="l00883"></a><span class="lineno">  883</span>&#160;  <a class="code" href="namespacellvm_1_1MCID.html#ab357441fcd1ea1f9b0d27c12700f6023a463baf545246fea9718664d933ffe66f">Call</a> = <a class="code" href="classllvm_1_1CallInst.html#a850d8262cd900958b3153c4aa080b2bb">CallInst::Create</a>(AggFunc-&gt;<a class="code" href="classllvm_1_1Function.html#adf50671db83d2813e0d897ea2cfc9102">getFunctionType</a>(), AggFunc, NewCallArgs, <span class="stringliteral">&quot;&quot;</span>,</div>
<div class="line"><a name="l00884"></a><span class="lineno">  884</span>&#160;                          <a class="code" href="namespacellvm_1_1MCID.html#ab357441fcd1ea1f9b0d27c12700f6023a463baf545246fea9718664d933ffe66f">Call</a>);</div>
<div class="line"><a name="l00885"></a><span class="lineno">  885</span>&#160; </div>
<div class="line"><a name="l00886"></a><span class="lineno">  886</span>&#160;  <span class="comment">// It is possible that the call to the outlined function is either the first</span></div>
<div class="line"><a name="l00887"></a><span class="lineno">  887</span>&#160;  <span class="comment">// instruction is in the new block, the last instruction, or both.  If either</span></div>
<div class="line"><a name="l00888"></a><span class="lineno">  888</span>&#160;  <span class="comment">// of these is the case, we need to make sure that we replace the instruction</span></div>
<div class="line"><a name="l00889"></a><span class="lineno">  889</span>&#160;  <span class="comment">// in the IRInstructionData struct with the new call.</span></div>
<div class="line"><a name="l00890"></a><span class="lineno">  890</span>&#160;  <a class="code" href="classllvm_1_1CallInst.html">CallInst</a> *OldCall = <a class="code" href="classllvm_1_1Region.html">Region</a>.Call;</div>
<div class="line"><a name="l00891"></a><span class="lineno">  891</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1Region.html">Region</a>.NewFront-&gt;Inst == OldCall)</div>
<div class="line"><a name="l00892"></a><span class="lineno">  892</span>&#160;    <a class="code" href="classllvm_1_1Region.html">Region</a>.NewFront-&gt;Inst = <a class="code" href="namespacellvm_1_1MCID.html#ab357441fcd1ea1f9b0d27c12700f6023a463baf545246fea9718664d933ffe66f">Call</a>;</div>
<div class="line"><a name="l00893"></a><span class="lineno">  893</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1Region.html">Region</a>.NewBack-&gt;Inst == OldCall)</div>
<div class="line"><a name="l00894"></a><span class="lineno">  894</span>&#160;    <a class="code" href="classllvm_1_1Region.html">Region</a>.NewBack-&gt;Inst = <a class="code" href="namespacellvm_1_1MCID.html#ab357441fcd1ea1f9b0d27c12700f6023a463baf545246fea9718664d933ffe66f">Call</a>;</div>
<div class="line"><a name="l00895"></a><span class="lineno">  895</span>&#160; </div>
<div class="line"><a name="l00896"></a><span class="lineno">  896</span>&#160;  <span class="comment">// Transfer any debug information.</span></div>
<div class="line"><a name="l00897"></a><span class="lineno">  897</span>&#160;  <a class="code" href="namespacellvm_1_1MCID.html#ab357441fcd1ea1f9b0d27c12700f6023a463baf545246fea9718664d933ffe66f">Call</a>-&gt;setDebugLoc(<a class="code" href="classllvm_1_1Region.html">Region</a>.Call-&gt;getDebugLoc());</div>
<div class="line"><a name="l00898"></a><span class="lineno">  898</span>&#160; </div>
<div class="line"><a name="l00899"></a><span class="lineno">  899</span>&#160;  <span class="comment">// Remove the old instruction.</span></div>
<div class="line"><a name="l00900"></a><span class="lineno">  900</span>&#160;  OldCall-&gt;<a class="code" href="classllvm_1_1Instruction.html#ae6b978645b8ac72d1a35e1298ffdd4f0">eraseFromParent</a>();</div>
<div class="line"><a name="l00901"></a><span class="lineno">  901</span>&#160;  <a class="code" href="classllvm_1_1Region.html">Region</a>.Call = <a class="code" href="namespacellvm_1_1MCID.html#ab357441fcd1ea1f9b0d27c12700f6023a463baf545246fea9718664d933ffe66f">Call</a>;</div>
<div class="line"><a name="l00902"></a><span class="lineno">  902</span>&#160; </div>
<div class="line"><a name="l00903"></a><span class="lineno">  903</span>&#160;  <span class="comment">// Make sure that the argument in the new function has the SwiftError</span></div>
<div class="line"><a name="l00904"></a><span class="lineno">  904</span>&#160;  <span class="comment">// argument.</span></div>
<div class="line"><a name="l00905"></a><span class="lineno">  905</span>&#160;  <span class="keywordflow">if</span> (Group.<a class="code" href="structOutlinableGroup.html#a41d9175e78c75fb14134d35303ded45a">SwiftErrorArgument</a>.<a class="code" href="classllvm_1_1Optional.html#ab8f06efe88f146384116a787058ab420">hasValue</a>())</div>
<div class="line"><a name="l00906"></a><span class="lineno">  906</span>&#160;    <a class="code" href="namespacellvm_1_1MCID.html#ab357441fcd1ea1f9b0d27c12700f6023a463baf545246fea9718664d933ffe66f">Call</a>-&gt;addParamAttr(Group.<a class="code" href="structOutlinableGroup.html#a41d9175e78c75fb14134d35303ded45a">SwiftErrorArgument</a>.<a class="code" href="classllvm_1_1Optional.html#a9ed8669536d806aff028d983595bab4d">getValue</a>(),</div>
<div class="line"><a name="l00907"></a><span class="lineno">  907</span>&#160;                       Attribute::SwiftError);</div>
<div class="line"><a name="l00908"></a><span class="lineno">  908</span>&#160; </div>
<div class="line"><a name="l00909"></a><span class="lineno">  909</span>&#160;  <span class="keywordflow">return</span> <a class="code" href="namespacellvm_1_1MCID.html#ab357441fcd1ea1f9b0d27c12700f6023a463baf545246fea9718664d933ffe66f">Call</a>;</div>
<div class="line"><a name="l00910"></a><span class="lineno">  910</span>&#160;}</div>
<div class="line"><a name="l00911"></a><span class="lineno">  911</span>&#160; </div>
<div class="line"><a name="l00912"></a><span class="lineno">  912</span>&#160;<span class="comment">// Within an extracted function, replace the argument uses of the extracted</span></div>
<div class="line"><a name="l00913"></a><span class="lineno">  913</span>&#160;<span class="comment">// region with the arguments of the function for an OutlinableGroup.</span></div>
<div class="line"><a name="l00914"></a><span class="lineno">  914</span>&#160;<span class="comment">//</span><span class="comment"></span></div>
<div class="line"><a name="l00915"></a><span class="lineno">  915</span>&#160;<span class="comment">/// \param [in] Region - The region of extracted code to be changed.</span></div>
<div class="line"><a name="l00916"></a><span class="lineno">  916</span>&#160;<span class="comment">/// \param [in,out] OutputBB - The BasicBlock for the output stores for this</span></div>
<div class="line"><a name="l00917"></a><span class="lineno">  917</span>&#160;<span class="comment">/// region.</span></div>
<div class="line"><a name="l00918"></a><span class="lineno"><a class="line" href="IROutliner_8cpp.html#a8fdcb52f06725b70d2171c23aba46316">  918</a></span>&#160;<span class="comment"></span><span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code" href="IROutliner_8cpp.html#a8fdcb52f06725b70d2171c23aba46316">replaceArgumentUses</a>(<a class="code" href="structllvm_1_1OutlinableRegion.html">OutlinableRegion</a> &amp;<a class="code" href="classllvm_1_1Region.html">Region</a>,</div>
<div class="line"><a name="l00919"></a><span class="lineno">  919</span>&#160;                                <a class="code" href="classllvm_1_1BasicBlock.html">BasicBlock</a> *OutputBB) {</div>
<div class="line"><a name="l00920"></a><span class="lineno">  920</span>&#160;  <a class="code" href="structOutlinableGroup.html">OutlinableGroup</a> &amp;Group = *<a class="code" href="classllvm_1_1Region.html">Region</a>.Parent;</div>
<div class="line"><a name="l00921"></a><span class="lineno">  921</span>&#160;  <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(<a class="code" href="classllvm_1_1Region.html">Region</a>.ExtractedFunction &amp;&amp; <span class="stringliteral">&quot;Region has no extracted function?&quot;</span>);</div>
<div class="line"><a name="l00922"></a><span class="lineno">  922</span>&#160; </div>
<div class="line"><a name="l00923"></a><span class="lineno">  923</span>&#160;  <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> ArgIdx = 0; ArgIdx &lt; <a class="code" href="classllvm_1_1Region.html">Region</a>.ExtractedFunction-&gt;arg_size();</div>
<div class="line"><a name="l00924"></a><span class="lineno">  924</span>&#160;       ArgIdx++) {</div>
<div class="line"><a name="l00925"></a><span class="lineno">  925</span>&#160;    <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(<a class="code" href="classllvm_1_1Region.html">Region</a>.ExtractedArgToAgg.find(ArgIdx) !=</div>
<div class="line"><a name="l00926"></a><span class="lineno">  926</span>&#160;               <a class="code" href="classllvm_1_1Region.html">Region</a>.ExtractedArgToAgg.<a class="code" href="classllvm_1_1RegionBase.html#a9b0ebfeb3f47f1ad763e5b184dcb4e03">end</a>() &amp;&amp;</div>
<div class="line"><a name="l00927"></a><span class="lineno">  927</span>&#160;           <span class="stringliteral">&quot;No mapping from extracted to outlined?&quot;</span>);</div>
<div class="line"><a name="l00928"></a><span class="lineno">  928</span>&#160;    <span class="keywordtype">unsigned</span> AggArgIdx = <a class="code" href="classllvm_1_1Region.html">Region</a>.ExtractedArgToAgg.find(ArgIdx)-&gt;second;</div>
<div class="line"><a name="l00929"></a><span class="lineno">  929</span>&#160;    <a class="code" href="classllvm_1_1Argument.html">Argument</a> *AggArg = Group.<a class="code" href="structOutlinableGroup.html#a95133d99b799f98e5c92dacc3028c621">OutlinedFunction</a>-&gt;<a class="code" href="classllvm_1_1Function.html#a8052a4f265aa7540f68ca3103a55538d">getArg</a>(AggArgIdx);</div>
<div class="line"><a name="l00930"></a><span class="lineno">  930</span>&#160;    <a class="code" href="classllvm_1_1Argument.html">Argument</a> *<a class="code" href="AMDGPULibCalls_8cpp.html#afecf1cc1292b07f57d343c0f4d682044">Arg</a> = <a class="code" href="classllvm_1_1Region.html">Region</a>.ExtractedFunction-&gt;getArg(ArgIdx);</div>
<div class="line"><a name="l00931"></a><span class="lineno">  931</span>&#160;    <span class="comment">// The argument is an input, so we can simply replace it with the overall</span></div>
<div class="line"><a name="l00932"></a><span class="lineno">  932</span>&#160;    <span class="comment">// argument value</span></div>
<div class="line"><a name="l00933"></a><span class="lineno">  933</span>&#160;    <span class="keywordflow">if</span> (ArgIdx &lt; <a class="code" href="classllvm_1_1Region.html">Region</a>.NumExtractedInputs) {</div>
<div class="line"><a name="l00934"></a><span class="lineno">  934</span>&#160;      <a class="code" href="Debug_8h.html#a08efc68d15935eb8889400a46c3749ba">LLVM_DEBUG</a>(<a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <span class="stringliteral">&quot;Replacing uses of input &quot;</span> &lt;&lt; *<a class="code" href="AMDGPULibCalls_8cpp.html#afecf1cc1292b07f57d343c0f4d682044">Arg</a> &lt;&lt; <span class="stringliteral">&quot; in function &quot;</span></div>
<div class="line"><a name="l00935"></a><span class="lineno">  935</span>&#160;                        &lt;&lt; *<a class="code" href="classllvm_1_1Region.html">Region</a>.ExtractedFunction &lt;&lt; <span class="stringliteral">&quot; with &quot;</span> &lt;&lt; *AggArg</div>
<div class="line"><a name="l00936"></a><span class="lineno">  936</span>&#160;                        &lt;&lt; <span class="stringliteral">&quot; in function &quot;</span> &lt;&lt; *Group.<a class="code" href="structOutlinableGroup.html#a95133d99b799f98e5c92dacc3028c621">OutlinedFunction</a> &lt;&lt; <span class="stringliteral">&quot;\n&quot;</span>);</div>
<div class="line"><a name="l00937"></a><span class="lineno">  937</span>&#160;      <a class="code" href="AMDGPULibCalls_8cpp.html#afecf1cc1292b07f57d343c0f4d682044">Arg</a>-&gt;replaceAllUsesWith(AggArg);</div>
<div class="line"><a name="l00938"></a><span class="lineno">  938</span>&#160;      <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l00939"></a><span class="lineno">  939</span>&#160;    }</div>
<div class="line"><a name="l00940"></a><span class="lineno">  940</span>&#160; </div>
<div class="line"><a name="l00941"></a><span class="lineno">  941</span>&#160;    <span class="comment">// If we are replacing an output, we place the store value in its own</span></div>
<div class="line"><a name="l00942"></a><span class="lineno">  942</span>&#160;    <span class="comment">// block inside the overall function before replacing the use of the output</span></div>
<div class="line"><a name="l00943"></a><span class="lineno">  943</span>&#160;    <span class="comment">// in the function.</span></div>
<div class="line"><a name="l00944"></a><span class="lineno">  944</span>&#160;    <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(<a class="code" href="AMDGPULibCalls_8cpp.html#afecf1cc1292b07f57d343c0f4d682044">Arg</a>-&gt;hasOneUse() &amp;&amp; <span class="stringliteral">&quot;Output argument can only have one use&quot;</span>);</div>
<div class="line"><a name="l00945"></a><span class="lineno">  945</span>&#160;    <a class="code" href="classllvm_1_1User.html">User</a> *InstAsUser = <a class="code" href="AMDGPULibCalls_8cpp.html#afecf1cc1292b07f57d343c0f4d682044">Arg</a>-&gt;user_back();</div>
<div class="line"><a name="l00946"></a><span class="lineno">  946</span>&#160;    <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(InstAsUser &amp;&amp; <span class="stringliteral">&quot;User is nullptr!&quot;</span>);</div>
<div class="line"><a name="l00947"></a><span class="lineno">  947</span>&#160; </div>
<div class="line"><a name="l00948"></a><span class="lineno">  948</span>&#160;    <a class="code" href="classllvm_1_1Instruction.html">Instruction</a> *<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a> = cast&lt;Instruction&gt;(InstAsUser);</div>
<div class="line"><a name="l00949"></a><span class="lineno">  949</span>&#160;    <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>-&gt;setDebugLoc(<a class="code" href="classllvm_1_1DebugLoc.html">DebugLoc</a>());</div>
<div class="line"><a name="l00950"></a><span class="lineno">  950</span>&#160;    <a class="code" href="Debug_8h.html#a08efc68d15935eb8889400a46c3749ba">LLVM_DEBUG</a>(<a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <span class="stringliteral">&quot;Move store for instruction &quot;</span> &lt;&lt; *<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a> &lt;&lt; <span class="stringliteral">&quot; to &quot;</span></div>
<div class="line"><a name="l00951"></a><span class="lineno">  951</span>&#160;                      &lt;&lt; *OutputBB &lt;&lt; <span class="stringliteral">&quot;\n&quot;</span>);</div>
<div class="line"><a name="l00952"></a><span class="lineno">  952</span>&#160; </div>
<div class="line"><a name="l00953"></a><span class="lineno">  953</span>&#160;    <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>-&gt;moveBefore(*OutputBB, OutputBB-&gt;<a class="code" href="classllvm_1_1BasicBlock.html#a0b4e7bee9b8575cc7db73329f1a561bd">end</a>());</div>
<div class="line"><a name="l00954"></a><span class="lineno">  954</span>&#160; </div>
<div class="line"><a name="l00955"></a><span class="lineno">  955</span>&#160;    <a class="code" href="Debug_8h.html#a08efc68d15935eb8889400a46c3749ba">LLVM_DEBUG</a>(<a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <span class="stringliteral">&quot;Replacing uses of output &quot;</span> &lt;&lt; *<a class="code" href="AMDGPULibCalls_8cpp.html#afecf1cc1292b07f57d343c0f4d682044">Arg</a> &lt;&lt; <span class="stringliteral">&quot; in function &quot;</span></div>
<div class="line"><a name="l00956"></a><span class="lineno">  956</span>&#160;                      &lt;&lt; *<a class="code" href="classllvm_1_1Region.html">Region</a>.ExtractedFunction &lt;&lt; <span class="stringliteral">&quot; with &quot;</span> &lt;&lt; *AggArg</div>
<div class="line"><a name="l00957"></a><span class="lineno">  957</span>&#160;                      &lt;&lt; <span class="stringliteral">&quot; in function &quot;</span> &lt;&lt; *Group.<a class="code" href="structOutlinableGroup.html#a95133d99b799f98e5c92dacc3028c621">OutlinedFunction</a> &lt;&lt; <span class="stringliteral">&quot;\n&quot;</span>);</div>
<div class="line"><a name="l00958"></a><span class="lineno">  958</span>&#160;    <a class="code" href="AMDGPULibCalls_8cpp.html#afecf1cc1292b07f57d343c0f4d682044">Arg</a>-&gt;replaceAllUsesWith(AggArg);</div>
<div class="line"><a name="l00959"></a><span class="lineno">  959</span>&#160;  }</div>
<div class="line"><a name="l00960"></a><span class="lineno">  960</span>&#160;}</div>
<div class="line"><a name="l00961"></a><span class="lineno">  961</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l00962"></a><span class="lineno">  962</span>&#160;<span class="comment">/// Within an extracted function, replace the constants that need to be lifted</span></div>
<div class="line"><a name="l00963"></a><span class="lineno">  963</span>&#160;<span class="comment">/// into arguments with the actual argument.</span></div>
<div class="line"><a name="l00964"></a><span class="lineno">  964</span>&#160;<span class="comment">///</span></div>
<div class="line"><a name="l00965"></a><span class="lineno">  965</span>&#160;<span class="comment">/// \param Region [in] - The region of extracted code to be changed.</span></div>
<div class="line"><a name="l00966"></a><span class="lineno"><a class="line" href="IROutliner_8cpp.html#ace02ac07a3f704ffd345301bff92e5a8">  966</a></span>&#160;<span class="comment"></span><span class="keywordtype">void</span> <a class="code" href="IROutliner_8cpp.html#ace02ac07a3f704ffd345301bff92e5a8">replaceConstants</a>(<a class="code" href="structllvm_1_1OutlinableRegion.html">OutlinableRegion</a> &amp;<a class="code" href="classllvm_1_1Region.html">Region</a>) {</div>
<div class="line"><a name="l00967"></a><span class="lineno">  967</span>&#160;  <a class="code" href="structOutlinableGroup.html">OutlinableGroup</a> &amp;Group = *<a class="code" href="classllvm_1_1Region.html">Region</a>.Parent;</div>
<div class="line"><a name="l00968"></a><span class="lineno">  968</span>&#160;  <span class="comment">// Iterate over the constants that need to be elevated into arguments</span></div>
<div class="line"><a name="l00969"></a><span class="lineno">  969</span>&#160;  <span class="keywordflow">for</span> (std::pair&lt;unsigned, Constant *&gt; &amp;Const : <a class="code" href="classllvm_1_1Region.html">Region</a>.AggArgToConstant) {</div>
<div class="line"><a name="l00970"></a><span class="lineno">  970</span>&#160;    <span class="keywordtype">unsigned</span> AggArgIdx = Const.first;</div>
<div class="line"><a name="l00971"></a><span class="lineno">  971</span>&#160;    <a class="code" href="classllvm_1_1Function.html">Function</a> *OutlinedFunction = Group.<a class="code" href="structOutlinableGroup.html#a95133d99b799f98e5c92dacc3028c621">OutlinedFunction</a>;</div>
<div class="line"><a name="l00972"></a><span class="lineno">  972</span>&#160;    <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(OutlinedFunction &amp;&amp; <span class="stringliteral">&quot;Overall Function is not defined?&quot;</span>);</div>
<div class="line"><a name="l00973"></a><span class="lineno">  973</span>&#160;    <a class="code" href="classllvm_1_1Constant.html">Constant</a> *CST = Const.second;</div>
<div class="line"><a name="l00974"></a><span class="lineno">  974</span>&#160;    <a class="code" href="classllvm_1_1Argument.html">Argument</a> *<a class="code" href="AMDGPULibCalls_8cpp.html#afecf1cc1292b07f57d343c0f4d682044">Arg</a> = Group.<a class="code" href="structOutlinableGroup.html#a95133d99b799f98e5c92dacc3028c621">OutlinedFunction</a>-&gt;<a class="code" href="classllvm_1_1Function.html#a8052a4f265aa7540f68ca3103a55538d">getArg</a>(AggArgIdx);</div>
<div class="line"><a name="l00975"></a><span class="lineno">  975</span>&#160;    <span class="comment">// Identify the argument it will be elevated to, and replace instances of</span></div>
<div class="line"><a name="l00976"></a><span class="lineno">  976</span>&#160;    <span class="comment">// that constant in the function.</span></div>
<div class="line"><a name="l00977"></a><span class="lineno">  977</span>&#160; </div>
<div class="line"><a name="l00978"></a><span class="lineno">  978</span>&#160;    <span class="comment">// TODO: If in the future constants do not have one global value number,</span></div>
<div class="line"><a name="l00979"></a><span class="lineno">  979</span>&#160;    <span class="comment">// i.e. a constant 1 could be mapped to several values, this check will</span></div>
<div class="line"><a name="l00980"></a><span class="lineno">  980</span>&#160;    <span class="comment">// have to be more strict.  It cannot be using only replaceUsesWithIf.</span></div>
<div class="line"><a name="l00981"></a><span class="lineno">  981</span>&#160; </div>
<div class="line"><a name="l00982"></a><span class="lineno">  982</span>&#160;    <a class="code" href="Debug_8h.html#a08efc68d15935eb8889400a46c3749ba">LLVM_DEBUG</a>(<a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <span class="stringliteral">&quot;Replacing uses of constant &quot;</span> &lt;&lt; *CST</div>
<div class="line"><a name="l00983"></a><span class="lineno">  983</span>&#160;                      &lt;&lt; <span class="stringliteral">&quot; in function &quot;</span> &lt;&lt; *OutlinedFunction &lt;&lt; <span class="stringliteral">&quot; with &quot;</span></div>
<div class="line"><a name="l00984"></a><span class="lineno">  984</span>&#160;                      &lt;&lt; *<a class="code" href="AMDGPULibCalls_8cpp.html#afecf1cc1292b07f57d343c0f4d682044">Arg</a> &lt;&lt; <span class="stringliteral">&quot;\n&quot;</span>);</div>
<div class="line"><a name="l00985"></a><span class="lineno">  985</span>&#160;    CST-&gt;<a class="code" href="classllvm_1_1Value.html#a7e8dad1701aa6445be4a29f654b0473c">replaceUsesWithIf</a>(<a class="code" href="AMDGPULibCalls_8cpp.html#afecf1cc1292b07f57d343c0f4d682044">Arg</a>, [OutlinedFunction](<a class="code" href="classllvm_1_1Use.html">Use</a> &amp;U) {</div>
<div class="line"><a name="l00986"></a><span class="lineno">  986</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1Instruction.html">Instruction</a> *<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a> = dyn_cast&lt;Instruction&gt;(U.<a class="code" href="classllvm_1_1Use.html#a50a2e57da274f8d69b9f932977379cdf">getUser</a>()))</div>
<div class="line"><a name="l00987"></a><span class="lineno">  987</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>-&gt;getFunction() == OutlinedFunction;</div>
<div class="line"><a name="l00988"></a><span class="lineno">  988</span>&#160;      <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l00989"></a><span class="lineno">  989</span>&#160;    });</div>
<div class="line"><a name="l00990"></a><span class="lineno">  990</span>&#160;  }</div>
<div class="line"><a name="l00991"></a><span class="lineno">  991</span>&#160;}</div>
<div class="line"><a name="l00992"></a><span class="lineno">  992</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l00993"></a><span class="lineno">  993</span>&#160;<span class="comment">/// For the given function, find all the nondebug or lifetime instructions,</span></div>
<div class="line"><a name="l00994"></a><span class="lineno">  994</span>&#160;<span class="comment">/// and return them as a vector. Exclude any blocks in \p ExludeBlocks.</span></div>
<div class="line"><a name="l00995"></a><span class="lineno">  995</span>&#160;<span class="comment">///</span></div>
<div class="line"><a name="l00996"></a><span class="lineno">  996</span>&#160;<span class="comment">/// \param [in] F - The function we collect the instructions from.</span></div>
<div class="line"><a name="l00997"></a><span class="lineno">  997</span>&#160;<span class="comment">/// \param [in] ExcludeBlocks - BasicBlocks to ignore.</span></div>
<div class="line"><a name="l00998"></a><span class="lineno">  998</span>&#160;<span class="comment">/// \returns the list of instructions extracted.</span></div>
<div class="line"><a name="l00999"></a><span class="lineno">  999</span>&#160;<span class="comment"></span><span class="keyword">static</span> std::vector&lt;Instruction *&gt;</div>
<div class="line"><a name="l01000"></a><span class="lineno"><a class="line" href="IROutliner_8cpp.html#a9527769a87c07736cd574233e26a8baf"> 1000</a></span>&#160;<a class="code" href="IROutliner_8cpp.html#a9527769a87c07736cd574233e26a8baf">collectRelevantInstructions</a>(<a class="code" href="classllvm_1_1Function.html">Function</a> &amp;<a class="code" href="MD5_8cpp.html#a96d73bbd7af15cb1fc38c3f4a3bd82e9">F</a>,</div>
<div class="line"><a name="l01001"></a><span class="lineno"> 1001</span>&#160;                            <a class="code" href="classllvm_1_1DenseSet.html">DenseSet&lt;BasicBlock *&gt;</a> &amp;ExcludeBlocks) {</div>
<div class="line"><a name="l01002"></a><span class="lineno"> 1002</span>&#160;  std::vector&lt;Instruction *&gt; RelevantInstructions;</div>
<div class="line"><a name="l01003"></a><span class="lineno"> 1003</span>&#160; </div>
<div class="line"><a name="l01004"></a><span class="lineno"> 1004</span>&#160;  <span class="keywordflow">for</span> (<a class="code" href="classllvm_1_1BasicBlock.html">BasicBlock</a> &amp;<a class="code" href="lib_2CodeGen_2README_8txt.html#a09776db24cf586ec9f1e18f3bae14099">BB</a> : <a class="code" href="MD5_8cpp.html#a96d73bbd7af15cb1fc38c3f4a3bd82e9">F</a>) {</div>
<div class="line"><a name="l01005"></a><span class="lineno"> 1005</span>&#160;    <span class="keywordflow">if</span> (ExcludeBlocks.<a class="code" href="classllvm_1_1detail_1_1DenseSetImpl.html#ad409c2de8502b94c8a0b1193307c63b6">contains</a>(&amp;<a class="code" href="lib_2CodeGen_2README_8txt.html#a09776db24cf586ec9f1e18f3bae14099">BB</a>))</div>
<div class="line"><a name="l01006"></a><span class="lineno"> 1006</span>&#160;      <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l01007"></a><span class="lineno"> 1007</span>&#160; </div>
<div class="line"><a name="l01008"></a><span class="lineno"> 1008</span>&#160;    <span class="keywordflow">for</span> (<a class="code" href="classllvm_1_1Instruction.html">Instruction</a> &amp;Inst : <a class="code" href="lib_2CodeGen_2README_8txt.html#a09776db24cf586ec9f1e18f3bae14099">BB</a>) {</div>
<div class="line"><a name="l01009"></a><span class="lineno"> 1009</span>&#160;      <span class="keywordflow">if</span> (Inst.isLifetimeStartOrEnd())</div>
<div class="line"><a name="l01010"></a><span class="lineno"> 1010</span>&#160;        <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l01011"></a><span class="lineno"> 1011</span>&#160;      <span class="keywordflow">if</span> (isa&lt;DbgInfoIntrinsic&gt;(Inst))</div>
<div class="line"><a name="l01012"></a><span class="lineno"> 1012</span>&#160;        <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l01013"></a><span class="lineno"> 1013</span>&#160; </div>
<div class="line"><a name="l01014"></a><span class="lineno"> 1014</span>&#160;      RelevantInstructions.push_back(&amp;Inst);</div>
<div class="line"><a name="l01015"></a><span class="lineno"> 1015</span>&#160;    }</div>
<div class="line"><a name="l01016"></a><span class="lineno"> 1016</span>&#160;  }</div>
<div class="line"><a name="l01017"></a><span class="lineno"> 1017</span>&#160; </div>
<div class="line"><a name="l01018"></a><span class="lineno"> 1018</span>&#160;  <span class="keywordflow">return</span> RelevantInstructions;</div>
<div class="line"><a name="l01019"></a><span class="lineno"> 1019</span>&#160;}</div>
<div class="line"><a name="l01020"></a><span class="lineno"> 1020</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l01021"></a><span class="lineno"> 1021</span>&#160;<span class="comment">/// It is possible that there is a basic block that already performs the same</span></div>
<div class="line"><a name="l01022"></a><span class="lineno"> 1022</span>&#160;<span class="comment">/// stores. This returns a duplicate block, if it exists</span></div>
<div class="line"><a name="l01023"></a><span class="lineno"> 1023</span>&#160;<span class="comment">///</span></div>
<div class="line"><a name="l01024"></a><span class="lineno"> 1024</span>&#160;<span class="comment">/// \param OutputBB [in] the block we are looking for a duplicate of.</span></div>
<div class="line"><a name="l01025"></a><span class="lineno"> 1025</span>&#160;<span class="comment">/// \param OutputStoreBBs [in] The existing output blocks.</span></div>
<div class="line"><a name="l01026"></a><span class="lineno"> 1026</span>&#160;<span class="comment">/// \returns an optional value with the number output block if there is a match.</span></div>
<div class="line"><a name="l01027"></a><span class="lineno"> 1027</span>&#160;<span class="comment"></span><a class="code" href="classllvm_1_1Optional.html">Optional&lt;unsigned&gt;</a></div>
<div class="line"><a name="l01028"></a><span class="lineno"><a class="line" href="IROutliner_8cpp.html#a1f4321fec5fdb59ac7dc62e14cbb443b"> 1028</a></span>&#160;<a class="code" href="IROutliner_8cpp.html#a1f4321fec5fdb59ac7dc62e14cbb443b">findDuplicateOutputBlock</a>(<a class="code" href="classllvm_1_1BasicBlock.html">BasicBlock</a> *OutputBB,</div>
<div class="line"><a name="l01029"></a><span class="lineno"> 1029</span>&#160;                         <a class="code" href="classllvm_1_1ArrayRef.html">ArrayRef&lt;BasicBlock *&gt;</a> OutputStoreBBs) {</div>
<div class="line"><a name="l01030"></a><span class="lineno"> 1030</span>&#160; </div>
<div class="line"><a name="l01031"></a><span class="lineno"> 1031</span>&#160;  <span class="keywordtype">bool</span> WrongInst = <span class="keyword">false</span>;</div>
<div class="line"><a name="l01032"></a><span class="lineno"> 1032</span>&#160;  <span class="keywordtype">bool</span> WrongSize = <span class="keyword">false</span>;</div>
<div class="line"><a name="l01033"></a><span class="lineno"> 1033</span>&#160;  <span class="keywordtype">unsigned</span> MatchingNum = 0;</div>
<div class="line"><a name="l01034"></a><span class="lineno"> 1034</span>&#160;  <span class="keywordflow">for</span> (<a class="code" href="classllvm_1_1BasicBlock.html">BasicBlock</a> *CompBB : OutputStoreBBs) {</div>
<div class="line"><a name="l01035"></a><span class="lineno"> 1035</span>&#160;    WrongInst = <span class="keyword">false</span>;</div>
<div class="line"><a name="l01036"></a><span class="lineno"> 1036</span>&#160;    <span class="keywordflow">if</span> (CompBB-&gt;size() - 1 != OutputBB-&gt;<a class="code" href="classllvm_1_1BasicBlock.html#ab9f68be0e2bcdf14f503f45edea63023">size</a>()) {</div>
<div class="line"><a name="l01037"></a><span class="lineno"> 1037</span>&#160;      WrongSize = <span class="keyword">true</span>;</div>
<div class="line"><a name="l01038"></a><span class="lineno"> 1038</span>&#160;      MatchingNum++;</div>
<div class="line"><a name="l01039"></a><span class="lineno"> 1039</span>&#160;      <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l01040"></a><span class="lineno"> 1040</span>&#160;    }</div>
<div class="line"><a name="l01041"></a><span class="lineno"> 1041</span>&#160; </div>
<div class="line"><a name="l01042"></a><span class="lineno"> 1042</span>&#160;    WrongSize = <span class="keyword">false</span>;</div>
<div class="line"><a name="l01043"></a><span class="lineno"> 1043</span>&#160;    <a class="code" href="classllvm_1_1BasicBlock.html#a98c0a84a5dfa8bce341c829709f171e5">BasicBlock::iterator</a> NIt = OutputBB-&gt;<a class="code" href="classllvm_1_1BasicBlock.html#a0ed5f3ab3c2e4196ee0cffffa080c062">begin</a>();</div>
<div class="line"><a name="l01044"></a><span class="lineno"> 1044</span>&#160;    <span class="keywordflow">for</span> (<a class="code" href="classllvm_1_1Instruction.html">Instruction</a> &amp;<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a> : *CompBB) {</div>
<div class="line"><a name="l01045"></a><span class="lineno"> 1045</span>&#160;      <span class="keywordflow">if</span> (isa&lt;BranchInst&gt;(&amp;<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>))</div>
<div class="line"><a name="l01046"></a><span class="lineno"> 1046</span>&#160;        <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l01047"></a><span class="lineno"> 1047</span>&#160; </div>
<div class="line"><a name="l01048"></a><span class="lineno"> 1048</span>&#160;      <span class="keywordflow">if</span> (!<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>.isIdenticalTo(&amp;(*NIt))) {</div>
<div class="line"><a name="l01049"></a><span class="lineno"> 1049</span>&#160;        WrongInst = <span class="keyword">true</span>;</div>
<div class="line"><a name="l01050"></a><span class="lineno"> 1050</span>&#160;        <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l01051"></a><span class="lineno"> 1051</span>&#160;      }</div>
<div class="line"><a name="l01052"></a><span class="lineno"> 1052</span>&#160; </div>
<div class="line"><a name="l01053"></a><span class="lineno"> 1053</span>&#160;      NIt++;</div>
<div class="line"><a name="l01054"></a><span class="lineno"> 1054</span>&#160;    }</div>
<div class="line"><a name="l01055"></a><span class="lineno"> 1055</span>&#160;    <span class="keywordflow">if</span> (!WrongInst &amp;&amp; !WrongSize)</div>
<div class="line"><a name="l01056"></a><span class="lineno"> 1056</span>&#160;      <span class="keywordflow">return</span> MatchingNum;</div>
<div class="line"><a name="l01057"></a><span class="lineno"> 1057</span>&#160; </div>
<div class="line"><a name="l01058"></a><span class="lineno"> 1058</span>&#160;    MatchingNum++;</div>
<div class="line"><a name="l01059"></a><span class="lineno"> 1059</span>&#160;  }</div>
<div class="line"><a name="l01060"></a><span class="lineno"> 1060</span>&#160; </div>
<div class="line"><a name="l01061"></a><span class="lineno"> 1061</span>&#160;  <span class="keywordflow">return</span> <a class="code" href="namespacellvm.html#a6497a581a4f7152729c29a368ac7d7be">None</a>;</div>
<div class="line"><a name="l01062"></a><span class="lineno"> 1062</span>&#160;}</div>
<div class="line"><a name="l01063"></a><span class="lineno"> 1063</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l01064"></a><span class="lineno"> 1064</span>&#160;<span class="comment">/// For the outlined section, move needed the StoreInsts for the output</span></div>
<div class="line"><a name="l01065"></a><span class="lineno"> 1065</span>&#160;<span class="comment">/// registers into their own block. Then, determine if there is a duplicate</span></div>
<div class="line"><a name="l01066"></a><span class="lineno"> 1066</span>&#160;<span class="comment">/// output block already created.</span></div>
<div class="line"><a name="l01067"></a><span class="lineno"> 1067</span>&#160;<span class="comment">///</span></div>
<div class="line"><a name="l01068"></a><span class="lineno"> 1068</span>&#160;<span class="comment">/// \param [in] OG - The OutlinableGroup of regions to be outlined.</span></div>
<div class="line"><a name="l01069"></a><span class="lineno"> 1069</span>&#160;<span class="comment">/// \param [in] Region - The OutlinableRegion that is being analyzed.</span></div>
<div class="line"><a name="l01070"></a><span class="lineno"> 1070</span>&#160;<span class="comment">/// \param [in,out] OutputBB - the block that stores for this region will be</span></div>
<div class="line"><a name="l01071"></a><span class="lineno"> 1071</span>&#160;<span class="comment">/// placed in.</span></div>
<div class="line"><a name="l01072"></a><span class="lineno"> 1072</span>&#160;<span class="comment">/// \param [in] EndBB - the final block of the extracted function.</span></div>
<div class="line"><a name="l01073"></a><span class="lineno"> 1073</span>&#160;<span class="comment">/// \param [in] OutputMappings - OutputMappings the mapping of values that have</span></div>
<div class="line"><a name="l01074"></a><span class="lineno"> 1074</span>&#160;<span class="comment">/// been replaced by a new output value.</span></div>
<div class="line"><a name="l01075"></a><span class="lineno"> 1075</span>&#160;<span class="comment">/// \param [in,out] OutputStoreBBs - The existing output blocks.</span></div>
<div class="line"><a name="l01076"></a><span class="lineno"> 1076</span>&#160;<span class="comment"></span><span class="keyword">static</span> <span class="keywordtype">void</span></div>
<div class="line"><a name="l01077"></a><span class="lineno"><a class="line" href="IROutliner_8cpp.html#a0ada51ec6529c49317519e0e5b491263"> 1077</a></span>&#160;<a class="code" href="IROutliner_8cpp.html#a0ada51ec6529c49317519e0e5b491263">alignOutputBlockWithAggFunc</a>(<a class="code" href="structOutlinableGroup.html">OutlinableGroup</a> &amp;OG, <a class="code" href="structllvm_1_1OutlinableRegion.html">OutlinableRegion</a> &amp;<a class="code" href="classllvm_1_1Region.html">Region</a>,</div>
<div class="line"><a name="l01078"></a><span class="lineno"> 1078</span>&#160;                            <a class="code" href="classllvm_1_1BasicBlock.html">BasicBlock</a> *OutputBB, <a class="code" href="classllvm_1_1BasicBlock.html">BasicBlock</a> *EndBB,</div>
<div class="line"><a name="l01079"></a><span class="lineno"> 1079</span>&#160;                            <span class="keyword">const</span> <a class="code" href="classllvm_1_1DenseMap.html">DenseMap&lt;Value *, Value *&gt;</a> &amp;OutputMappings,</div>
<div class="line"><a name="l01080"></a><span class="lineno"> 1080</span>&#160;                            std::vector&lt;BasicBlock *&gt; &amp;OutputStoreBBs) {</div>
<div class="line"><a name="l01081"></a><span class="lineno"> 1081</span>&#160;  <a class="code" href="classllvm_1_1DenseSet.html">DenseSet&lt;unsigned&gt;</a> ValuesToFind(<a class="code" href="classllvm_1_1Region.html">Region</a>.GVNStores.<a class="code" href="classllvm_1_1RegionBase.html#a1aa6c7717f84c6970e22a0938660047f">begin</a>(),</div>
<div class="line"><a name="l01082"></a><span class="lineno"> 1082</span>&#160;                                  <a class="code" href="classllvm_1_1Region.html">Region</a>.GVNStores.<a class="code" href="classllvm_1_1RegionBase.html#a9b0ebfeb3f47f1ad763e5b184dcb4e03">end</a>());</div>
<div class="line"><a name="l01083"></a><span class="lineno"> 1083</span>&#160; </div>
<div class="line"><a name="l01084"></a><span class="lineno"> 1084</span>&#160;  <span class="comment">// We iterate over the instructions in the extracted function, and find the</span></div>
<div class="line"><a name="l01085"></a><span class="lineno"> 1085</span>&#160;  <span class="comment">// global value number of the instructions.  If we find a value that should</span></div>
<div class="line"><a name="l01086"></a><span class="lineno"> 1086</span>&#160;  <span class="comment">// be contained in a store, we replace the uses of the value with the value</span></div>
<div class="line"><a name="l01087"></a><span class="lineno"> 1087</span>&#160;  <span class="comment">// from the overall function, so that the store is storing the correct</span></div>
<div class="line"><a name="l01088"></a><span class="lineno"> 1088</span>&#160;  <span class="comment">// value from the overall function.</span></div>
<div class="line"><a name="l01089"></a><span class="lineno"> 1089</span>&#160;  <a class="code" href="classllvm_1_1DenseSet.html">DenseSet&lt;BasicBlock *&gt;</a> ExcludeBBs(OutputStoreBBs.begin(),</div>
<div class="line"><a name="l01090"></a><span class="lineno"> 1090</span>&#160;                                    OutputStoreBBs.end());</div>
<div class="line"><a name="l01091"></a><span class="lineno"> 1091</span>&#160;  ExcludeBBs.<a class="code" href="classllvm_1_1detail_1_1DenseSetImpl.html#a79eed48913651aeedda2eed25201ea84">insert</a>(OutputBB);</div>
<div class="line"><a name="l01092"></a><span class="lineno"> 1092</span>&#160;  std::vector&lt;Instruction *&gt; ExtractedFunctionInsts =</div>
<div class="line"><a name="l01093"></a><span class="lineno"> 1093</span>&#160;      <a class="code" href="IROutliner_8cpp.html#a9527769a87c07736cd574233e26a8baf">collectRelevantInstructions</a>(*(<a class="code" href="classllvm_1_1Region.html">Region</a>.ExtractedFunction), ExcludeBBs);</div>
<div class="line"><a name="l01094"></a><span class="lineno"> 1094</span>&#160;  std::vector&lt;Instruction *&gt; OverallFunctionInsts =</div>
<div class="line"><a name="l01095"></a><span class="lineno"> 1095</span>&#160;      <a class="code" href="IROutliner_8cpp.html#a9527769a87c07736cd574233e26a8baf">collectRelevantInstructions</a>(*OG.<a class="code" href="structOutlinableGroup.html#a95133d99b799f98e5c92dacc3028c621">OutlinedFunction</a>, ExcludeBBs);</div>
<div class="line"><a name="l01096"></a><span class="lineno"> 1096</span>&#160; </div>
<div class="line"><a name="l01097"></a><span class="lineno"> 1097</span>&#160;  <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(ExtractedFunctionInsts.size() == OverallFunctionInsts.size() &amp;&amp;</div>
<div class="line"><a name="l01098"></a><span class="lineno"> 1098</span>&#160;         <span class="stringliteral">&quot;Number of relevant instructions not equal!&quot;</span>);</div>
<div class="line"><a name="l01099"></a><span class="lineno"> 1099</span>&#160; </div>
<div class="line"><a name="l01100"></a><span class="lineno"> 1100</span>&#160;  <span class="keywordtype">unsigned</span> NumInstructions = ExtractedFunctionInsts.size();</div>
<div class="line"><a name="l01101"></a><span class="lineno"> 1101</span>&#160;  <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> Idx = 0; Idx &lt; NumInstructions; Idx++) {</div>
<div class="line"><a name="l01102"></a><span class="lineno"> 1102</span>&#160;    <a class="code" href="classllvm_1_1Value.html">Value</a> *V = ExtractedFunctionInsts[Idx];</div>
<div class="line"><a name="l01103"></a><span class="lineno"> 1103</span>&#160; </div>
<div class="line"><a name="l01104"></a><span class="lineno"> 1104</span>&#160;    <span class="keywordflow">if</span> (OutputMappings.<a class="code" href="classllvm_1_1DenseMapBase.html#a0c047f127ed4380a6f383d70bec4eb94">find</a>(V) != OutputMappings.<a class="code" href="classllvm_1_1DenseMapBase.html#a65520b9c67759099e313d0f4e7b5ff9e">end</a>())</div>
<div class="line"><a name="l01105"></a><span class="lineno"> 1105</span>&#160;      V = OutputMappings.<a class="code" href="classllvm_1_1DenseMapBase.html#a0c047f127ed4380a6f383d70bec4eb94">find</a>(V)-&gt;second;</div>
<div class="line"><a name="l01106"></a><span class="lineno"> 1106</span>&#160;    <a class="code" href="classllvm_1_1Optional.html">Optional&lt;unsigned&gt;</a> <a class="code" href="classllvm_1_1GVN.html">GVN</a> = <a class="code" href="classllvm_1_1Region.html">Region</a>.Candidate-&gt;getGVN(V);</div>
<div class="line"><a name="l01107"></a><span class="lineno"> 1107</span>&#160; </div>
<div class="line"><a name="l01108"></a><span class="lineno"> 1108</span>&#160;    <span class="comment">// If we have found one of the stored values for output, replace the value</span></div>
<div class="line"><a name="l01109"></a><span class="lineno"> 1109</span>&#160;    <span class="comment">// with the corresponding one from the overall function.</span></div>
<div class="line"><a name="l01110"></a><span class="lineno"> 1110</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1GVN.html">GVN</a>.hasValue() &amp;&amp; ValuesToFind.<a class="code" href="classllvm_1_1detail_1_1DenseSetImpl.html#af972d87e15b5f6ed61bd5c3956c5213d">erase</a>(<a class="code" href="classllvm_1_1GVN.html">GVN</a>.getValue())) {</div>
<div class="line"><a name="l01111"></a><span class="lineno"> 1111</span>&#160;      V-&gt;<a class="code" href="classllvm_1_1Value.html#a3ab5fc45117b450e8bb04e564cb6e5f2">replaceAllUsesWith</a>(OverallFunctionInsts[Idx]);</div>
<div class="line"><a name="l01112"></a><span class="lineno"> 1112</span>&#160;      <span class="keywordflow">if</span> (ValuesToFind.<a class="code" href="classllvm_1_1detail_1_1DenseSetImpl.html#a9a025cb106832026cd05c2b4648a699f">size</a>() == 0)</div>
<div class="line"><a name="l01113"></a><span class="lineno"> 1113</span>&#160;        <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l01114"></a><span class="lineno"> 1114</span>&#160;    }</div>
<div class="line"><a name="l01115"></a><span class="lineno"> 1115</span>&#160; </div>
<div class="line"><a name="l01116"></a><span class="lineno"> 1116</span>&#160;    <span class="keywordflow">if</span> (ValuesToFind.<a class="code" href="classllvm_1_1detail_1_1DenseSetImpl.html#a9a025cb106832026cd05c2b4648a699f">size</a>() == 0)</div>
<div class="line"><a name="l01117"></a><span class="lineno"> 1117</span>&#160;      <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l01118"></a><span class="lineno"> 1118</span>&#160;  }</div>
<div class="line"><a name="l01119"></a><span class="lineno"> 1119</span>&#160; </div>
<div class="line"><a name="l01120"></a><span class="lineno"> 1120</span>&#160;  <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(ValuesToFind.<a class="code" href="classllvm_1_1detail_1_1DenseSetImpl.html#a9a025cb106832026cd05c2b4648a699f">size</a>() == 0 &amp;&amp; <span class="stringliteral">&quot;Not all store values were handled!&quot;</span>);</div>
<div class="line"><a name="l01121"></a><span class="lineno"> 1121</span>&#160; </div>
<div class="line"><a name="l01122"></a><span class="lineno"> 1122</span>&#160;  <span class="comment">// If the size of the block is 0, then there are no stores, and we do not</span></div>
<div class="line"><a name="l01123"></a><span class="lineno"> 1123</span>&#160;  <span class="comment">// need to save this block.</span></div>
<div class="line"><a name="l01124"></a><span class="lineno"> 1124</span>&#160;  <span class="keywordflow">if</span> (OutputBB-&gt;<a class="code" href="classllvm_1_1BasicBlock.html#ab9f68be0e2bcdf14f503f45edea63023">size</a>() == 0) {</div>
<div class="line"><a name="l01125"></a><span class="lineno"> 1125</span>&#160;    <a class="code" href="classllvm_1_1Region.html">Region</a>.OutputBlockNum = -1;</div>
<div class="line"><a name="l01126"></a><span class="lineno"> 1126</span>&#160;    OutputBB-&gt;<a class="code" href="classllvm_1_1BasicBlock.html#a8dd327a937563afdb08250abc43820b0">eraseFromParent</a>();</div>
<div class="line"><a name="l01127"></a><span class="lineno"> 1127</span>&#160;    <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l01128"></a><span class="lineno"> 1128</span>&#160;  }</div>
<div class="line"><a name="l01129"></a><span class="lineno"> 1129</span>&#160; </div>
<div class="line"><a name="l01130"></a><span class="lineno"> 1130</span>&#160;  <span class="comment">// Determine is there is a duplicate block.</span></div>
<div class="line"><a name="l01131"></a><span class="lineno"> 1131</span>&#160;  <a class="code" href="classllvm_1_1Optional.html">Optional&lt;unsigned&gt;</a> MatchingBB =</div>
<div class="line"><a name="l01132"></a><span class="lineno"> 1132</span>&#160;      <a class="code" href="IROutliner_8cpp.html#a1f4321fec5fdb59ac7dc62e14cbb443b">findDuplicateOutputBlock</a>(OutputBB, OutputStoreBBs);</div>
<div class="line"><a name="l01133"></a><span class="lineno"> 1133</span>&#160; </div>
<div class="line"><a name="l01134"></a><span class="lineno"> 1134</span>&#160;  <span class="comment">// If there is, we remove the new output block.  If it does not,</span></div>
<div class="line"><a name="l01135"></a><span class="lineno"> 1135</span>&#160;  <span class="comment">// we add it to our list of output blocks.</span></div>
<div class="line"><a name="l01136"></a><span class="lineno"> 1136</span>&#160;  <span class="keywordflow">if</span> (MatchingBB.<a class="code" href="classllvm_1_1Optional.html#ab8f06efe88f146384116a787058ab420">hasValue</a>()) {</div>
<div class="line"><a name="l01137"></a><span class="lineno"> 1137</span>&#160;    <a class="code" href="Debug_8h.html#a08efc68d15935eb8889400a46c3749ba">LLVM_DEBUG</a>(<a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <span class="stringliteral">&quot;Set output block for region in function&quot;</span></div>
<div class="line"><a name="l01138"></a><span class="lineno"> 1138</span>&#160;                      &lt;&lt; <a class="code" href="classllvm_1_1Region.html">Region</a>.ExtractedFunction &lt;&lt; <span class="stringliteral">&quot; to &quot;</span></div>
<div class="line"><a name="l01139"></a><span class="lineno"> 1139</span>&#160;                      &lt;&lt; MatchingBB.<a class="code" href="classllvm_1_1Optional.html#a9ed8669536d806aff028d983595bab4d">getValue</a>());</div>
<div class="line"><a name="l01140"></a><span class="lineno"> 1140</span>&#160; </div>
<div class="line"><a name="l01141"></a><span class="lineno"> 1141</span>&#160;    <a class="code" href="classllvm_1_1Region.html">Region</a>.OutputBlockNum = MatchingBB.<a class="code" href="classllvm_1_1Optional.html#a9ed8669536d806aff028d983595bab4d">getValue</a>();</div>
<div class="line"><a name="l01142"></a><span class="lineno"> 1142</span>&#160;    OutputBB-&gt;<a class="code" href="classllvm_1_1BasicBlock.html#a8dd327a937563afdb08250abc43820b0">eraseFromParent</a>();</div>
<div class="line"><a name="l01143"></a><span class="lineno"> 1143</span>&#160;    <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l01144"></a><span class="lineno"> 1144</span>&#160;  }</div>
<div class="line"><a name="l01145"></a><span class="lineno"> 1145</span>&#160; </div>
<div class="line"><a name="l01146"></a><span class="lineno"> 1146</span>&#160;  <a class="code" href="classllvm_1_1Region.html">Region</a>.OutputBlockNum = OutputStoreBBs.size();</div>
<div class="line"><a name="l01147"></a><span class="lineno"> 1147</span>&#160; </div>
<div class="line"><a name="l01148"></a><span class="lineno"> 1148</span>&#160;  <a class="code" href="Debug_8h.html#a08efc68d15935eb8889400a46c3749ba">LLVM_DEBUG</a>(<a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <span class="stringliteral">&quot;Create output block for region in&quot;</span></div>
<div class="line"><a name="l01149"></a><span class="lineno"> 1149</span>&#160;                    &lt;&lt; <a class="code" href="classllvm_1_1Region.html">Region</a>.ExtractedFunction &lt;&lt; <span class="stringliteral">&quot; to &quot;</span></div>
<div class="line"><a name="l01150"></a><span class="lineno"> 1150</span>&#160;                    &lt;&lt; *OutputBB);</div>
<div class="line"><a name="l01151"></a><span class="lineno"> 1151</span>&#160;  OutputStoreBBs.push_back(OutputBB);</div>
<div class="line"><a name="l01152"></a><span class="lineno"> 1152</span>&#160;  <a class="code" href="classllvm_1_1BranchInst.html#a38df51256d4b415b6a817b5e1c6d4d36">BranchInst::Create</a>(EndBB, OutputBB);</div>
<div class="line"><a name="l01153"></a><span class="lineno"> 1153</span>&#160;}</div>
<div class="line"><a name="l01154"></a><span class="lineno"> 1154</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l01155"></a><span class="lineno"> 1155</span>&#160;<span class="comment">/// Create the switch statement for outlined function to differentiate between</span></div>
<div class="line"><a name="l01156"></a><span class="lineno"> 1156</span>&#160;<span class="comment">/// all the output blocks.</span></div>
<div class="line"><a name="l01157"></a><span class="lineno"> 1157</span>&#160;<span class="comment">///</span></div>
<div class="line"><a name="l01158"></a><span class="lineno"> 1158</span>&#160;<span class="comment">/// For the outlined section, determine if an outlined block already exists that</span></div>
<div class="line"><a name="l01159"></a><span class="lineno"> 1159</span>&#160;<span class="comment">/// matches the needed stores for the extracted section.</span></div>
<div class="line"><a name="l01160"></a><span class="lineno"> 1160</span>&#160;<span class="comment">/// \param [in] M - The module we are outlining from.</span></div>
<div class="line"><a name="l01161"></a><span class="lineno"> 1161</span>&#160;<span class="comment">/// \param [in] OG - The group of regions to be outlined.</span></div>
<div class="line"><a name="l01162"></a><span class="lineno"> 1162</span>&#160;<span class="comment">/// \param [in] EndBB - The final block of the extracted function.</span></div>
<div class="line"><a name="l01163"></a><span class="lineno"> 1163</span>&#160;<span class="comment">/// \param [in,out] OutputStoreBBs - The existing output blocks.</span></div>
<div class="line"><a name="l01164"></a><span class="lineno"><a class="line" href="IROutliner_8cpp.html#aea967a44e357e9563f7429b1cca0f408"> 1164</a></span>&#160;<span class="comment"></span><span class="keywordtype">void</span> <a class="code" href="IROutliner_8cpp.html#aea967a44e357e9563f7429b1cca0f408">createSwitchStatement</a>(<a class="code" href="classllvm_1_1Module.html">Module</a> &amp;M, <a class="code" href="structOutlinableGroup.html">OutlinableGroup</a> &amp;OG, <a class="code" href="classllvm_1_1BasicBlock.html">BasicBlock</a> *EndBB,</div>
<div class="line"><a name="l01165"></a><span class="lineno"> 1165</span>&#160;                           <a class="code" href="classllvm_1_1ArrayRef.html">ArrayRef&lt;BasicBlock *&gt;</a> OutputStoreBBs) {</div>
<div class="line"><a name="l01166"></a><span class="lineno"> 1166</span>&#160;  <span class="comment">// We only need the switch statement if there is more than one store</span></div>
<div class="line"><a name="l01167"></a><span class="lineno"> 1167</span>&#160;  <span class="comment">// combination.</span></div>
<div class="line"><a name="l01168"></a><span class="lineno"> 1168</span>&#160;  <span class="keywordflow">if</span> (OG.<a class="code" href="structOutlinableGroup.html#a53e3a8f28cb8e7a01334b7560467d9ea">OutputGVNCombinations</a>.<a class="code" href="classllvm_1_1detail_1_1DenseSetImpl.html#a9a025cb106832026cd05c2b4648a699f">size</a>() &gt; 1) {</div>
<div class="line"><a name="l01169"></a><span class="lineno"> 1169</span>&#160;    <a class="code" href="classllvm_1_1Function.html">Function</a> *AggFunc = OG.<a class="code" href="structOutlinableGroup.html#a95133d99b799f98e5c92dacc3028c621">OutlinedFunction</a>;</div>
<div class="line"><a name="l01170"></a><span class="lineno"> 1170</span>&#160;    <span class="comment">// Create a final block</span></div>
<div class="line"><a name="l01171"></a><span class="lineno"> 1171</span>&#160;    <a class="code" href="classllvm_1_1BasicBlock.html">BasicBlock</a> *ReturnBlock =</div>
<div class="line"><a name="l01172"></a><span class="lineno"> 1172</span>&#160;        <a class="code" href="classllvm_1_1BasicBlock.html#ace940beeee97c222f836fe0ac70f6cf5">BasicBlock::Create</a>(<a class="code" href="lib_2Target_2X86_2README_8txt.html#ac88fe1d3a61b056a4f64fbbb156a62ff">M</a>.getContext(), <span class="stringliteral">&quot;final_block&quot;</span>, AggFunc);</div>
<div class="line"><a name="l01173"></a><span class="lineno"> 1173</span>&#160;    <a class="code" href="classllvm_1_1Instruction.html">Instruction</a> *<a class="code" href="namespacellvm_1_1M68kBeads.html#ac808f5f233066c25641be8a6c1e2b100a27d0e059322508a76f918503800ef1bd">Term</a> = EndBB-&gt;<a class="code" href="classllvm_1_1BasicBlock.html#a71a9eabc4318b2fc34f83b01dfee484b">getTerminator</a>();</div>
<div class="line"><a name="l01174"></a><span class="lineno"> 1174</span>&#160;    <a class="code" href="namespacellvm_1_1M68kBeads.html#ac808f5f233066c25641be8a6c1e2b100a27d0e059322508a76f918503800ef1bd">Term</a>-&gt;moveBefore(*ReturnBlock, ReturnBlock-&gt;<a class="code" href="classllvm_1_1BasicBlock.html#a0b4e7bee9b8575cc7db73329f1a561bd">end</a>());</div>
<div class="line"><a name="l01175"></a><span class="lineno"> 1175</span>&#160;    <span class="comment">// Put the switch statement in the old end basic block for the function with</span></div>
<div class="line"><a name="l01176"></a><span class="lineno"> 1176</span>&#160;    <span class="comment">// a fall through to the new return block</span></div>
<div class="line"><a name="l01177"></a><span class="lineno"> 1177</span>&#160;    <a class="code" href="Debug_8h.html#a08efc68d15935eb8889400a46c3749ba">LLVM_DEBUG</a>(<a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <span class="stringliteral">&quot;Create switch statement in &quot;</span> &lt;&lt; *AggFunc &lt;&lt; <span class="stringliteral">&quot; for &quot;</span></div>
<div class="line"><a name="l01178"></a><span class="lineno"> 1178</span>&#160;                      &lt;&lt; OutputStoreBBs.<a class="code" href="classllvm_1_1ArrayRef.html#a85ffb6531d4cda988ea81f18d4e56fb7">size</a>() &lt;&lt; <span class="stringliteral">&quot;\n&quot;</span>);</div>
<div class="line"><a name="l01179"></a><span class="lineno"> 1179</span>&#160;    <a class="code" href="classllvm_1_1SwitchInst.html">SwitchInst</a> *SwitchI =</div>
<div class="line"><a name="l01180"></a><span class="lineno"> 1180</span>&#160;        <a class="code" href="classllvm_1_1SwitchInst.html#a68553b9dbdbf2d12b5c9511fd62c2ef7">SwitchInst::Create</a>(AggFunc-&gt;<a class="code" href="classllvm_1_1Function.html#a8052a4f265aa7540f68ca3103a55538d">getArg</a>(AggFunc-&gt;<a class="code" href="classllvm_1_1Function.html#ac6baa801e4aea800984e760d5460662f">arg_size</a>() - 1),</div>
<div class="line"><a name="l01181"></a><span class="lineno"> 1181</span>&#160;                           ReturnBlock, OutputStoreBBs.<a class="code" href="classllvm_1_1ArrayRef.html#a85ffb6531d4cda988ea81f18d4e56fb7">size</a>(), EndBB);</div>
<div class="line"><a name="l01182"></a><span class="lineno"> 1182</span>&#160; </div>
<div class="line"><a name="l01183"></a><span class="lineno"> 1183</span>&#160;    <span class="keywordtype">unsigned</span> Idx = 0;</div>
<div class="line"><a name="l01184"></a><span class="lineno"> 1184</span>&#160;    <span class="keywordflow">for</span> (<a class="code" href="classllvm_1_1BasicBlock.html">BasicBlock</a> *<a class="code" href="lib_2CodeGen_2README_8txt.html#a09776db24cf586ec9f1e18f3bae14099">BB</a> : OutputStoreBBs) {</div>
<div class="line"><a name="l01185"></a><span class="lineno"> 1185</span>&#160;      SwitchI-&gt;<a class="code" href="classllvm_1_1SwitchInst.html#a62abc2475d09c01d583ba24a487898fd">addCase</a>(<a class="code" href="classllvm_1_1ConstantInt.html#a969709dd49c28865a482d8b870f87c46">ConstantInt::get</a>(<a class="code" href="classllvm_1_1Type.html#a30dd396c5b40cd86c1591872e574ccdf">Type::getInt32Ty</a>(<a class="code" href="lib_2Target_2X86_2README_8txt.html#ac88fe1d3a61b056a4f64fbbb156a62ff">M</a>.getContext()), Idx),</div>
<div class="line"><a name="l01186"></a><span class="lineno"> 1186</span>&#160;                       <a class="code" href="lib_2CodeGen_2README_8txt.html#a09776db24cf586ec9f1e18f3bae14099">BB</a>);</div>
<div class="line"><a name="l01187"></a><span class="lineno"> 1187</span>&#160;      <a class="code" href="namespacellvm_1_1M68kBeads.html#ac808f5f233066c25641be8a6c1e2b100a27d0e059322508a76f918503800ef1bd">Term</a> = <a class="code" href="lib_2CodeGen_2README_8txt.html#a09776db24cf586ec9f1e18f3bae14099">BB</a>-&gt;getTerminator();</div>
<div class="line"><a name="l01188"></a><span class="lineno"> 1188</span>&#160;      <a class="code" href="namespacellvm_1_1M68kBeads.html#ac808f5f233066c25641be8a6c1e2b100a27d0e059322508a76f918503800ef1bd">Term</a>-&gt;setSuccessor(0, ReturnBlock);</div>
<div class="line"><a name="l01189"></a><span class="lineno"> 1189</span>&#160;      Idx++;</div>
<div class="line"><a name="l01190"></a><span class="lineno"> 1190</span>&#160;    }</div>
<div class="line"><a name="l01191"></a><span class="lineno"> 1191</span>&#160;    <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l01192"></a><span class="lineno"> 1192</span>&#160;  }</div>
<div class="line"><a name="l01193"></a><span class="lineno"> 1193</span>&#160; </div>
<div class="line"><a name="l01194"></a><span class="lineno"> 1194</span>&#160;  <span class="comment">// If there needs to be stores, move them from the output block to the end</span></div>
<div class="line"><a name="l01195"></a><span class="lineno"> 1195</span>&#160;  <span class="comment">// block to save on branching instructions.</span></div>
<div class="line"><a name="l01196"></a><span class="lineno"> 1196</span>&#160;  <span class="keywordflow">if</span> (OutputStoreBBs.<a class="code" href="classllvm_1_1ArrayRef.html#a85ffb6531d4cda988ea81f18d4e56fb7">size</a>() == 1) {</div>
<div class="line"><a name="l01197"></a><span class="lineno"> 1197</span>&#160;    <a class="code" href="Debug_8h.html#a08efc68d15935eb8889400a46c3749ba">LLVM_DEBUG</a>(<a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <span class="stringliteral">&quot;Move store instructions to the end block in &quot;</span></div>
<div class="line"><a name="l01198"></a><span class="lineno"> 1198</span>&#160;                      &lt;&lt; *OG.<a class="code" href="structOutlinableGroup.html#a95133d99b799f98e5c92dacc3028c621">OutlinedFunction</a> &lt;&lt; <span class="stringliteral">&quot;\n&quot;</span>);</div>
<div class="line"><a name="l01199"></a><span class="lineno"> 1199</span>&#160;    <a class="code" href="classllvm_1_1BasicBlock.html">BasicBlock</a> *OutputBlock = OutputStoreBBs[0];</div>
<div class="line"><a name="l01200"></a><span class="lineno"> 1200</span>&#160;    <a class="code" href="classllvm_1_1Instruction.html">Instruction</a> *<a class="code" href="namespacellvm_1_1M68kBeads.html#ac808f5f233066c25641be8a6c1e2b100a27d0e059322508a76f918503800ef1bd">Term</a> = OutputBlock-&gt;<a class="code" href="classllvm_1_1BasicBlock.html#a71a9eabc4318b2fc34f83b01dfee484b">getTerminator</a>();</div>
<div class="line"><a name="l01201"></a><span class="lineno"> 1201</span>&#160;    <a class="code" href="namespacellvm_1_1M68kBeads.html#ac808f5f233066c25641be8a6c1e2b100a27d0e059322508a76f918503800ef1bd">Term</a>-&gt;eraseFromParent();</div>
<div class="line"><a name="l01202"></a><span class="lineno"> 1202</span>&#160;    <a class="code" href="namespacellvm_1_1M68kBeads.html#ac808f5f233066c25641be8a6c1e2b100a27d0e059322508a76f918503800ef1bd">Term</a> = EndBB-&gt;<a class="code" href="classllvm_1_1BasicBlock.html#a71a9eabc4318b2fc34f83b01dfee484b">getTerminator</a>();</div>
<div class="line"><a name="l01203"></a><span class="lineno"> 1203</span>&#160;    <a class="code" href="IROutliner_8cpp.html#a3afc8c0c69b0c55edce3be13d5b7cc32">moveBBContents</a>(*OutputBlock, *EndBB);</div>
<div class="line"><a name="l01204"></a><span class="lineno"> 1204</span>&#160;    <a class="code" href="namespacellvm_1_1M68kBeads.html#ac808f5f233066c25641be8a6c1e2b100a27d0e059322508a76f918503800ef1bd">Term</a>-&gt;moveBefore(*EndBB, EndBB-&gt;<a class="code" href="classllvm_1_1BasicBlock.html#a0b4e7bee9b8575cc7db73329f1a561bd">end</a>());</div>
<div class="line"><a name="l01205"></a><span class="lineno"> 1205</span>&#160;    OutputBlock-&gt;<a class="code" href="classllvm_1_1BasicBlock.html#a8dd327a937563afdb08250abc43820b0">eraseFromParent</a>();</div>
<div class="line"><a name="l01206"></a><span class="lineno"> 1206</span>&#160;  }</div>
<div class="line"><a name="l01207"></a><span class="lineno"> 1207</span>&#160;}</div>
<div class="line"><a name="l01208"></a><span class="lineno"> 1208</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l01209"></a><span class="lineno"> 1209</span>&#160;<span class="comment">/// Fill the new function that will serve as the replacement function for all of</span></div>
<div class="line"><a name="l01210"></a><span class="lineno"> 1210</span>&#160;<span class="comment">/// the extracted regions of a certain structure from the first region in the</span></div>
<div class="line"><a name="l01211"></a><span class="lineno"> 1211</span>&#160;<span class="comment">/// list of regions.  Replace this first region&#39;s extracted function with the</span></div>
<div class="line"><a name="l01212"></a><span class="lineno"> 1212</span>&#160;<span class="comment">/// new overall function.</span></div>
<div class="line"><a name="l01213"></a><span class="lineno"> 1213</span>&#160;<span class="comment">///</span></div>
<div class="line"><a name="l01214"></a><span class="lineno"> 1214</span>&#160;<span class="comment">/// \param [in] M - The module we are outlining from.</span></div>
<div class="line"><a name="l01215"></a><span class="lineno"> 1215</span>&#160;<span class="comment">/// \param [in] CurrentGroup - The group of regions to be outlined.</span></div>
<div class="line"><a name="l01216"></a><span class="lineno"> 1216</span>&#160;<span class="comment">/// \param [in,out] OutputStoreBBs - The output blocks for each different</span></div>
<div class="line"><a name="l01217"></a><span class="lineno"> 1217</span>&#160;<span class="comment">/// set of stores needed for the different functions.</span></div>
<div class="line"><a name="l01218"></a><span class="lineno"> 1218</span>&#160;<span class="comment">/// \param [in,out] FuncsToRemove - Extracted functions to erase from module</span></div>
<div class="line"><a name="l01219"></a><span class="lineno"> 1219</span>&#160;<span class="comment">/// once outlining is complete.</span></div>
<div class="line"><a name="l01220"></a><span class="lineno"><a class="line" href="IROutliner_8cpp.html#ac99cbc2367275634ff833c06e8191d9e"> 1220</a></span>&#160;<span class="comment"></span><span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code" href="IROutliner_8cpp.html#ac99cbc2367275634ff833c06e8191d9e">fillOverallFunction</a>(<a class="code" href="classllvm_1_1Module.html">Module</a> &amp;M, <a class="code" href="structOutlinableGroup.html">OutlinableGroup</a> &amp;CurrentGroup,</div>
<div class="line"><a name="l01221"></a><span class="lineno"> 1221</span>&#160;                                std::vector&lt;BasicBlock *&gt; &amp;OutputStoreBBs,</div>
<div class="line"><a name="l01222"></a><span class="lineno"> 1222</span>&#160;                                std::vector&lt;Function *&gt; &amp;FuncsToRemove) {</div>
<div class="line"><a name="l01223"></a><span class="lineno"> 1223</span>&#160;  <a class="code" href="structllvm_1_1OutlinableRegion.html">OutlinableRegion</a> *CurrentOS = CurrentGroup.<a class="code" href="structOutlinableGroup.html#a75bbc3b17e5b70e0e1fac394f26b5c11">Regions</a>[0];</div>
<div class="line"><a name="l01224"></a><span class="lineno"> 1224</span>&#160; </div>
<div class="line"><a name="l01225"></a><span class="lineno"> 1225</span>&#160;  <span class="comment">// Move first extracted function&#39;s instructions into new function.</span></div>
<div class="line"><a name="l01226"></a><span class="lineno"> 1226</span>&#160;  <a class="code" href="Debug_8h.html#a08efc68d15935eb8889400a46c3749ba">LLVM_DEBUG</a>(<a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <span class="stringliteral">&quot;Move instructions from &quot;</span></div>
<div class="line"><a name="l01227"></a><span class="lineno"> 1227</span>&#160;                    &lt;&lt; *CurrentOS-&gt;<a class="code" href="structllvm_1_1OutlinableRegion.html#ad5dce467e0d3954ba812f2e9611810b4">ExtractedFunction</a> &lt;&lt; <span class="stringliteral">&quot; to instruction &quot;</span></div>
<div class="line"><a name="l01228"></a><span class="lineno"> 1228</span>&#160;                    &lt;&lt; *CurrentGroup.<a class="code" href="structOutlinableGroup.html#a95133d99b799f98e5c92dacc3028c621">OutlinedFunction</a> &lt;&lt; <span class="stringliteral">&quot;\n&quot;</span>);</div>
<div class="line"><a name="l01229"></a><span class="lineno"> 1229</span>&#160; </div>
<div class="line"><a name="l01230"></a><span class="lineno"> 1230</span>&#160;  CurrentGroup.<a class="code" href="structOutlinableGroup.html#a40f09cb42d8cb90b4e8fdbd36da765d8">EndBB</a> = <a class="code" href="IROutliner_8cpp.html#a589de9c77e75842cbf318f07e4fe6209">moveFunctionData</a>(*CurrentOS-&gt;<a class="code" href="structllvm_1_1OutlinableRegion.html#ad5dce467e0d3954ba812f2e9611810b4">ExtractedFunction</a>,</div>
<div class="line"><a name="l01231"></a><span class="lineno"> 1231</span>&#160;                                        *CurrentGroup.<a class="code" href="structOutlinableGroup.html#a95133d99b799f98e5c92dacc3028c621">OutlinedFunction</a>);</div>
<div class="line"><a name="l01232"></a><span class="lineno"> 1232</span>&#160; </div>
<div class="line"><a name="l01233"></a><span class="lineno"> 1233</span>&#160;  <span class="comment">// Transfer the attributes from the function to the new function.</span></div>
<div class="line"><a name="l01234"></a><span class="lineno"> 1234</span>&#160;  <span class="keywordflow">for</span> (<a class="code" href="classllvm_1_1Attribute.html">Attribute</a> <a class="code" href="README__ALTIVEC_8txt.html#a015846b6188ce15e08cd94c74a9df1a3">A</a> :</div>
<div class="line"><a name="l01235"></a><span class="lineno"> 1235</span>&#160;       CurrentOS-&gt;<a class="code" href="structllvm_1_1OutlinableRegion.html#ad5dce467e0d3954ba812f2e9611810b4">ExtractedFunction</a>-&gt;<a class="code" href="classllvm_1_1Function.html#a7477aafbbe989ad35b96fac186d8e9fd">getAttributes</a>().<a class="code" href="classllvm_1_1AttributeList.html#a7ee1c61933901a011f19fb68c6faad9d">getFnAttributes</a>())</div>
<div class="line"><a name="l01236"></a><span class="lineno"> 1236</span>&#160;    CurrentGroup.<a class="code" href="structOutlinableGroup.html#a95133d99b799f98e5c92dacc3028c621">OutlinedFunction</a>-&gt;<a class="code" href="classllvm_1_1Function.html#ac277aebd990c638895a05b0ffae6f7ec">addFnAttr</a>(<a class="code" href="README__ALTIVEC_8txt.html#a015846b6188ce15e08cd94c74a9df1a3">A</a>);</div>
<div class="line"><a name="l01237"></a><span class="lineno"> 1237</span>&#160; </div>
<div class="line"><a name="l01238"></a><span class="lineno"> 1238</span>&#160;  <span class="comment">// Create an output block for the first extracted function.</span></div>
<div class="line"><a name="l01239"></a><span class="lineno"> 1239</span>&#160;  <a class="code" href="classllvm_1_1BasicBlock.html">BasicBlock</a> *NewBB = <a class="code" href="classllvm_1_1BasicBlock.html#ace940beeee97c222f836fe0ac70f6cf5">BasicBlock::Create</a>(</div>
<div class="line"><a name="l01240"></a><span class="lineno"> 1240</span>&#160;      <a class="code" href="lib_2Target_2X86_2README_8txt.html#ac88fe1d3a61b056a4f64fbbb156a62ff">M</a>.getContext(), <a class="code" href="classllvm_1_1Twine.html">Twine</a>(<span class="stringliteral">&quot;output_block_&quot;</span>) + <a class="code" href="classllvm_1_1Twine.html">Twine</a>(<span class="keyword">static_cast&lt;</span><span class="keywordtype">unsigned</span><span class="keyword">&gt;</span>(0)),</div>
<div class="line"><a name="l01241"></a><span class="lineno"> 1241</span>&#160;      CurrentGroup.<a class="code" href="structOutlinableGroup.html#a95133d99b799f98e5c92dacc3028c621">OutlinedFunction</a>);</div>
<div class="line"><a name="l01242"></a><span class="lineno"> 1242</span>&#160;  CurrentOS-&gt;<a class="code" href="structllvm_1_1OutlinableRegion.html#a262d2672038afdeba85e23a30ea4c22d">OutputBlockNum</a> = 0;</div>
<div class="line"><a name="l01243"></a><span class="lineno"> 1243</span>&#160; </div>
<div class="line"><a name="l01244"></a><span class="lineno"> 1244</span>&#160;  <a class="code" href="IROutliner_8cpp.html#a8fdcb52f06725b70d2171c23aba46316">replaceArgumentUses</a>(*CurrentOS, NewBB);</div>
<div class="line"><a name="l01245"></a><span class="lineno"> 1245</span>&#160;  <a class="code" href="IROutliner_8cpp.html#ace02ac07a3f704ffd345301bff92e5a8">replaceConstants</a>(*CurrentOS);</div>
<div class="line"><a name="l01246"></a><span class="lineno"> 1246</span>&#160; </div>
<div class="line"><a name="l01247"></a><span class="lineno"> 1247</span>&#160;  <span class="comment">// If the new basic block has no new stores, we can erase it from the module.</span></div>
<div class="line"><a name="l01248"></a><span class="lineno"> 1248</span>&#160;  <span class="comment">// It it does, we create a branch instruction to the last basic block from the</span></div>
<div class="line"><a name="l01249"></a><span class="lineno"> 1249</span>&#160;  <span class="comment">// new one.</span></div>
<div class="line"><a name="l01250"></a><span class="lineno"> 1250</span>&#160;  <span class="keywordflow">if</span> (NewBB-&gt;<a class="code" href="classllvm_1_1BasicBlock.html#ab9f68be0e2bcdf14f503f45edea63023">size</a>() == 0) {</div>
<div class="line"><a name="l01251"></a><span class="lineno"> 1251</span>&#160;    CurrentOS-&gt;<a class="code" href="structllvm_1_1OutlinableRegion.html#a262d2672038afdeba85e23a30ea4c22d">OutputBlockNum</a> = -1;</div>
<div class="line"><a name="l01252"></a><span class="lineno"> 1252</span>&#160;    NewBB-&gt;<a class="code" href="classllvm_1_1BasicBlock.html#a8dd327a937563afdb08250abc43820b0">eraseFromParent</a>();</div>
<div class="line"><a name="l01253"></a><span class="lineno"> 1253</span>&#160;  } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l01254"></a><span class="lineno"> 1254</span>&#160;    <a class="code" href="classllvm_1_1BranchInst.html#a38df51256d4b415b6a817b5e1c6d4d36">BranchInst::Create</a>(CurrentGroup.<a class="code" href="structOutlinableGroup.html#a40f09cb42d8cb90b4e8fdbd36da765d8">EndBB</a>, NewBB);</div>
<div class="line"><a name="l01255"></a><span class="lineno"> 1255</span>&#160;    OutputStoreBBs.push_back(NewBB);</div>
<div class="line"><a name="l01256"></a><span class="lineno"> 1256</span>&#160;  }</div>
<div class="line"><a name="l01257"></a><span class="lineno"> 1257</span>&#160; </div>
<div class="line"><a name="l01258"></a><span class="lineno"> 1258</span>&#160;  <span class="comment">// Replace the call to the extracted function with the outlined function.</span></div>
<div class="line"><a name="l01259"></a><span class="lineno"> 1259</span>&#160;  CurrentOS-&gt;<a class="code" href="structllvm_1_1OutlinableRegion.html#a018669f7b1d6a21106f47398a087c30a">Call</a> = <a class="code" href="IROutliner_8cpp.html#a4f3c175c90b9439d52ad07ecda521c2f">replaceCalledFunction</a>(<a class="code" href="lib_2Target_2X86_2README_8txt.html#ac88fe1d3a61b056a4f64fbbb156a62ff">M</a>, *CurrentOS);</div>
<div class="line"><a name="l01260"></a><span class="lineno"> 1260</span>&#160; </div>
<div class="line"><a name="l01261"></a><span class="lineno"> 1261</span>&#160;  <span class="comment">// We only delete the extracted functions at the end since we may need to</span></div>
<div class="line"><a name="l01262"></a><span class="lineno"> 1262</span>&#160;  <span class="comment">// reference instructions contained in them for mapping purposes.</span></div>
<div class="line"><a name="l01263"></a><span class="lineno"> 1263</span>&#160;  FuncsToRemove.push_back(CurrentOS-&gt;<a class="code" href="structllvm_1_1OutlinableRegion.html#ad5dce467e0d3954ba812f2e9611810b4">ExtractedFunction</a>);</div>
<div class="line"><a name="l01264"></a><span class="lineno"> 1264</span>&#160;}</div>
<div class="line"><a name="l01265"></a><span class="lineno"> 1265</span>&#160; </div>
<div class="line"><a name="l01266"></a><span class="lineno"> 1266</span>&#160;<span class="keywordtype">void</span> IROutliner::deduplicateExtractedSections(</div>
<div class="line"><a name="l01267"></a><span class="lineno"> 1267</span>&#160;    <a class="code" href="classllvm_1_1Module.html">Module</a> &amp;M, <a class="code" href="structOutlinableGroup.html">OutlinableGroup</a> &amp;CurrentGroup,</div>
<div class="line"><a name="l01268"></a><span class="lineno"> 1268</span>&#160;    std::vector&lt;Function *&gt; &amp;FuncsToRemove, <span class="keywordtype">unsigned</span> &amp;OutlinedFunctionNum) {</div>
<div class="line"><a name="l01269"></a><span class="lineno"> 1269</span>&#160;  createFunction(M, CurrentGroup, OutlinedFunctionNum);</div>
<div class="line"><a name="l01270"></a><span class="lineno"> 1270</span>&#160; </div>
<div class="line"><a name="l01271"></a><span class="lineno"> 1271</span>&#160;  std::vector&lt;BasicBlock *&gt; OutputStoreBBs;</div>
<div class="line"><a name="l01272"></a><span class="lineno"> 1272</span>&#160; </div>
<div class="line"><a name="l01273"></a><span class="lineno"> 1273</span>&#160;  <a class="code" href="structllvm_1_1OutlinableRegion.html">OutlinableRegion</a> *CurrentOS;</div>
<div class="line"><a name="l01274"></a><span class="lineno"> 1274</span>&#160; </div>
<div class="line"><a name="l01275"></a><span class="lineno"> 1275</span>&#160;  <a class="code" href="IROutliner_8cpp.html#ac99cbc2367275634ff833c06e8191d9e">fillOverallFunction</a>(M, CurrentGroup, OutputStoreBBs, FuncsToRemove);</div>
<div class="line"><a name="l01276"></a><span class="lineno"> 1276</span>&#160; </div>
<div class="line"><a name="l01277"></a><span class="lineno"> 1277</span>&#160;  <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> Idx = 1; Idx &lt; CurrentGroup.<a class="code" href="structOutlinableGroup.html#a75bbc3b17e5b70e0e1fac394f26b5c11">Regions</a>.size(); Idx++) {</div>
<div class="line"><a name="l01278"></a><span class="lineno"> 1278</span>&#160;    CurrentOS = CurrentGroup.<a class="code" href="structOutlinableGroup.html#a75bbc3b17e5b70e0e1fac394f26b5c11">Regions</a>[Idx];</div>
<div class="line"><a name="l01279"></a><span class="lineno"> 1279</span>&#160;    <a class="code" href="namespacellvm_1_1AttributeFuncs.html#aab96d8eec2287f142354ff6d8f3bba27">AttributeFuncs::mergeAttributesForOutlining</a>(*CurrentGroup.<a class="code" href="structOutlinableGroup.html#a95133d99b799f98e5c92dacc3028c621">OutlinedFunction</a>,</div>
<div class="line"><a name="l01280"></a><span class="lineno"> 1280</span>&#160;                                               *CurrentOS-&gt;<a class="code" href="structllvm_1_1OutlinableRegion.html#ad5dce467e0d3954ba812f2e9611810b4">ExtractedFunction</a>);</div>
<div class="line"><a name="l01281"></a><span class="lineno"> 1281</span>&#160; </div>
<div class="line"><a name="l01282"></a><span class="lineno"> 1282</span>&#160;    <span class="comment">// Create a new BasicBlock to hold the needed store instructions.</span></div>
<div class="line"><a name="l01283"></a><span class="lineno"> 1283</span>&#160;    <a class="code" href="classllvm_1_1BasicBlock.html">BasicBlock</a> *NewBB = <a class="code" href="classllvm_1_1BasicBlock.html#ace940beeee97c222f836fe0ac70f6cf5">BasicBlock::Create</a>(</div>
<div class="line"><a name="l01284"></a><span class="lineno"> 1284</span>&#160;        <a class="code" href="lib_2Target_2X86_2README_8txt.html#ac88fe1d3a61b056a4f64fbbb156a62ff">M</a>.getContext(), <span class="stringliteral">&quot;output_block_&quot;</span> + <a class="code" href="namespacellvm.html#a13c1b5a253da5da49ce33d03dc1efc07">std::to_string</a>(Idx),</div>
<div class="line"><a name="l01285"></a><span class="lineno"> 1285</span>&#160;        CurrentGroup.<a class="code" href="structOutlinableGroup.html#a95133d99b799f98e5c92dacc3028c621">OutlinedFunction</a>);</div>
<div class="line"><a name="l01286"></a><span class="lineno"> 1286</span>&#160;    <a class="code" href="IROutliner_8cpp.html#a8fdcb52f06725b70d2171c23aba46316">replaceArgumentUses</a>(*CurrentOS, NewBB);</div>
<div class="line"><a name="l01287"></a><span class="lineno"> 1287</span>&#160; </div>
<div class="line"><a name="l01288"></a><span class="lineno"> 1288</span>&#160;    <a class="code" href="IROutliner_8cpp.html#a0ada51ec6529c49317519e0e5b491263">alignOutputBlockWithAggFunc</a>(CurrentGroup, *CurrentOS, NewBB,</div>
<div class="line"><a name="l01289"></a><span class="lineno"> 1289</span>&#160;                                CurrentGroup.<a class="code" href="structOutlinableGroup.html#a40f09cb42d8cb90b4e8fdbd36da765d8">EndBB</a>, OutputMappings,</div>
<div class="line"><a name="l01290"></a><span class="lineno"> 1290</span>&#160;                                OutputStoreBBs);</div>
<div class="line"><a name="l01291"></a><span class="lineno"> 1291</span>&#160; </div>
<div class="line"><a name="l01292"></a><span class="lineno"> 1292</span>&#160;    CurrentOS-&gt;<a class="code" href="structllvm_1_1OutlinableRegion.html#a018669f7b1d6a21106f47398a087c30a">Call</a> = <a class="code" href="IROutliner_8cpp.html#a4f3c175c90b9439d52ad07ecda521c2f">replaceCalledFunction</a>(M, *CurrentOS);</div>
<div class="line"><a name="l01293"></a><span class="lineno"> 1293</span>&#160;    FuncsToRemove.push_back(CurrentOS-&gt;<a class="code" href="structllvm_1_1OutlinableRegion.html#ad5dce467e0d3954ba812f2e9611810b4">ExtractedFunction</a>);</div>
<div class="line"><a name="l01294"></a><span class="lineno"> 1294</span>&#160;  }</div>
<div class="line"><a name="l01295"></a><span class="lineno"> 1295</span>&#160; </div>
<div class="line"><a name="l01296"></a><span class="lineno"> 1296</span>&#160;  <span class="comment">// Create a switch statement to handle the different output schemes.</span></div>
<div class="line"><a name="l01297"></a><span class="lineno"> 1297</span>&#160;  <a class="code" href="IROutliner_8cpp.html#aea967a44e357e9563f7429b1cca0f408">createSwitchStatement</a>(M, CurrentGroup, CurrentGroup.<a class="code" href="structOutlinableGroup.html#a40f09cb42d8cb90b4e8fdbd36da765d8">EndBB</a>, OutputStoreBBs);</div>
<div class="line"><a name="l01298"></a><span class="lineno"> 1298</span>&#160; </div>
<div class="line"><a name="l01299"></a><span class="lineno"> 1299</span>&#160;  OutlinedFunctionNum++;</div>
<div class="line"><a name="l01300"></a><span class="lineno"> 1300</span>&#160;}</div>
<div class="line"><a name="l01301"></a><span class="lineno"> 1301</span>&#160; </div>
<div class="line"><a name="l01302"></a><span class="lineno"> 1302</span>&#160;<span class="keywordtype">void</span> IROutliner::pruneIncompatibleRegions(</div>
<div class="line"><a name="l01303"></a><span class="lineno"> 1303</span>&#160;    std::vector&lt;IRSimilarityCandidate&gt; &amp;CandidateVec,</div>
<div class="line"><a name="l01304"></a><span class="lineno"> 1304</span>&#160;    <a class="code" href="structOutlinableGroup.html">OutlinableGroup</a> &amp;CurrentGroup) {</div>
<div class="line"><a name="l01305"></a><span class="lineno"> 1305</span>&#160;  <span class="keywordtype">bool</span> PreviouslyOutlined;</div>
<div class="line"><a name="l01306"></a><span class="lineno"> 1306</span>&#160; </div>
<div class="line"><a name="l01307"></a><span class="lineno"> 1307</span>&#160;  <span class="comment">// Sort from beginning to end, so the IRSimilarityCandidates are in order.</span></div>
<div class="line"><a name="l01308"></a><span class="lineno"> 1308</span>&#160;  <a class="code" href="namespacellvm.html#a076f93c387f454f0db13d4bc7d4e7f9c">stable_sort</a>(CandidateVec, [](<span class="keyword">const</span> <a class="code" href="classllvm_1_1IRSimilarity_1_1IRSimilarityCandidate.html">IRSimilarityCandidate</a> &amp;LHS,</div>
<div class="line"><a name="l01309"></a><span class="lineno"> 1309</span>&#160;                               <span class="keyword">const</span> <a class="code" href="classllvm_1_1IRSimilarity_1_1IRSimilarityCandidate.html">IRSimilarityCandidate</a> &amp;RHS) {</div>
<div class="line"><a name="l01310"></a><span class="lineno"> 1310</span>&#160;    <span class="keywordflow">return</span> LHS.<a class="code" href="classllvm_1_1IRSimilarity_1_1IRSimilarityCandidate.html#ada960ccf6a96ca62ce5db3af1b7bf7f5">getStartIdx</a>() &lt; RHS.<a class="code" href="classllvm_1_1IRSimilarity_1_1IRSimilarityCandidate.html#ada960ccf6a96ca62ce5db3af1b7bf7f5">getStartIdx</a>();</div>
<div class="line"><a name="l01311"></a><span class="lineno"> 1311</span>&#160;  });</div>
<div class="line"><a name="l01312"></a><span class="lineno"> 1312</span>&#160; </div>
<div class="line"><a name="l01313"></a><span class="lineno"> 1313</span>&#160;  <span class="keywordtype">unsigned</span> CurrentEndIdx = 0;</div>
<div class="line"><a name="l01314"></a><span class="lineno"> 1314</span>&#160;  <span class="keywordflow">for</span> (<a class="code" href="classllvm_1_1IRSimilarity_1_1IRSimilarityCandidate.html">IRSimilarityCandidate</a> &amp;IRSC : CandidateVec) {</div>
<div class="line"><a name="l01315"></a><span class="lineno"> 1315</span>&#160;    PreviouslyOutlined = <span class="keyword">false</span>;</div>
<div class="line"><a name="l01316"></a><span class="lineno"> 1316</span>&#160;    <span class="keywordtype">unsigned</span> StartIdx = IRSC.getStartIdx();</div>
<div class="line"><a name="l01317"></a><span class="lineno"> 1317</span>&#160;    <span class="keywordtype">unsigned</span> EndIdx = IRSC.getEndIdx();</div>
<div class="line"><a name="l01318"></a><span class="lineno"> 1318</span>&#160; </div>
<div class="line"><a name="l01319"></a><span class="lineno"> 1319</span>&#160;    <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> Idx = StartIdx; Idx &lt;= EndIdx; Idx++)</div>
<div class="line"><a name="l01320"></a><span class="lineno"> 1320</span>&#160;      <span class="keywordflow">if</span> (Outlined.contains(Idx)) {</div>
<div class="line"><a name="l01321"></a><span class="lineno"> 1321</span>&#160;        PreviouslyOutlined = <span class="keyword">true</span>;</div>
<div class="line"><a name="l01322"></a><span class="lineno"> 1322</span>&#160;        <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l01323"></a><span class="lineno"> 1323</span>&#160;      }</div>
<div class="line"><a name="l01324"></a><span class="lineno"> 1324</span>&#160; </div>
<div class="line"><a name="l01325"></a><span class="lineno"> 1325</span>&#160;    <span class="keywordflow">if</span> (PreviouslyOutlined)</div>
<div class="line"><a name="l01326"></a><span class="lineno"> 1326</span>&#160;      <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l01327"></a><span class="lineno"> 1327</span>&#160; </div>
<div class="line"><a name="l01328"></a><span class="lineno"> 1328</span>&#160;    <span class="comment">// TODO: If in the future we can outline across BasicBlocks, we will need to</span></div>
<div class="line"><a name="l01329"></a><span class="lineno"> 1329</span>&#160;    <span class="comment">// check all BasicBlocks contained in the region.</span></div>
<div class="line"><a name="l01330"></a><span class="lineno"> 1330</span>&#160;    <span class="keywordflow">if</span> (IRSC.getStartBB()-&gt;hasAddressTaken())</div>
<div class="line"><a name="l01331"></a><span class="lineno"> 1331</span>&#160;      <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l01332"></a><span class="lineno"> 1332</span>&#160; </div>
<div class="line"><a name="l01333"></a><span class="lineno"> 1333</span>&#160;    <span class="keywordflow">if</span> (IRSC.front()-&gt;Inst-&gt;getFunction()-&gt;hasLinkOnceODRLinkage() &amp;&amp;</div>
<div class="line"><a name="l01334"></a><span class="lineno"> 1334</span>&#160;        !OutlineFromLinkODRs)</div>
<div class="line"><a name="l01335"></a><span class="lineno"> 1335</span>&#160;      <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l01336"></a><span class="lineno"> 1336</span>&#160; </div>
<div class="line"><a name="l01337"></a><span class="lineno"> 1337</span>&#160;    <span class="comment">// Greedily prune out any regions that will overlap with already chosen</span></div>
<div class="line"><a name="l01338"></a><span class="lineno"> 1338</span>&#160;    <span class="comment">// regions.</span></div>
<div class="line"><a name="l01339"></a><span class="lineno"> 1339</span>&#160;    <span class="keywordflow">if</span> (CurrentEndIdx != 0 &amp;&amp; StartIdx &lt;= CurrentEndIdx)</div>
<div class="line"><a name="l01340"></a><span class="lineno"> 1340</span>&#160;      <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l01341"></a><span class="lineno"> 1341</span>&#160; </div>
<div class="line"><a name="l01342"></a><span class="lineno"> 1342</span>&#160;    <span class="keywordtype">bool</span> BadInst = <a class="code" href="namespacellvm.html#a61d13d6824ec46c31260a4fd0997eda0">any_of</a>(IRSC, [<span class="keyword">this</span>](<a class="code" href="structllvm_1_1IRSimilarity_1_1IRInstructionData.html">IRInstructionData</a> &amp;<a class="code" href="namespacellvm_1_1Intrinsic.html#a80add6b3b1cdaec560907995127adc16">ID</a>) {</div>
<div class="line"><a name="l01343"></a><span class="lineno"> 1343</span>&#160;      <span class="comment">// We check if there is a discrepancy between the InstructionDataList</span></div>
<div class="line"><a name="l01344"></a><span class="lineno"> 1344</span>&#160;      <span class="comment">// and the actual next instruction in the module.  If there is, it means</span></div>
<div class="line"><a name="l01345"></a><span class="lineno"> 1345</span>&#160;      <span class="comment">// that an extra instruction was added, likely by the CodeExtractor.</span></div>
<div class="line"><a name="l01346"></a><span class="lineno"> 1346</span>&#160; </div>
<div class="line"><a name="l01347"></a><span class="lineno"> 1347</span>&#160;      <span class="comment">// Since we do not have any similarity data about this particular</span></div>
<div class="line"><a name="l01348"></a><span class="lineno"> 1348</span>&#160;      <span class="comment">// instruction, we cannot confidently outline it, and must discard this</span></div>
<div class="line"><a name="l01349"></a><span class="lineno"> 1349</span>&#160;      <span class="comment">// candidate.</span></div>
<div class="line"><a name="l01350"></a><span class="lineno"> 1350</span>&#160;      <span class="keywordflow">if</span> (std::next(<a class="code" href="namespacellvm_1_1Intrinsic.html#a80add6b3b1cdaec560907995127adc16">ID</a>.getIterator())-&gt;Inst !=</div>
<div class="line"><a name="l01351"></a><span class="lineno"> 1351</span>&#160;          <a class="code" href="namespacellvm_1_1Intrinsic.html#a80add6b3b1cdaec560907995127adc16">ID</a>.Inst-&gt;getNextNonDebugInstruction())</div>
<div class="line"><a name="l01352"></a><span class="lineno"> 1352</span>&#160;        <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l01353"></a><span class="lineno"> 1353</span>&#160;      <span class="keywordflow">return</span> !<a class="code" href="lib_2Analysis_2README_8txt.html#ad5ccdce1179bbfb942a084b3005f360d">this</a>-&gt;InstructionClassifier.visit(<a class="code" href="namespacellvm_1_1Intrinsic.html#a80add6b3b1cdaec560907995127adc16">ID</a>.Inst);</div>
<div class="line"><a name="l01354"></a><span class="lineno"> 1354</span>&#160;    });</div>
<div class="line"><a name="l01355"></a><span class="lineno"> 1355</span>&#160; </div>
<div class="line"><a name="l01356"></a><span class="lineno"> 1356</span>&#160;    <span class="keywordflow">if</span> (BadInst)</div>
<div class="line"><a name="l01357"></a><span class="lineno"> 1357</span>&#160;      <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l01358"></a><span class="lineno"> 1358</span>&#160; </div>
<div class="line"><a name="l01359"></a><span class="lineno"> 1359</span>&#160;    <a class="code" href="structllvm_1_1OutlinableRegion.html">OutlinableRegion</a> *OS = <span class="keyword">new</span> (RegionAllocator.Allocate())</div>
<div class="line"><a name="l01360"></a><span class="lineno"> 1360</span>&#160;        <a class="code" href="structllvm_1_1OutlinableRegion.html">OutlinableRegion</a>(IRSC, CurrentGroup);</div>
<div class="line"><a name="l01361"></a><span class="lineno"> 1361</span>&#160;    CurrentGroup.<a class="code" href="structOutlinableGroup.html#a75bbc3b17e5b70e0e1fac394f26b5c11">Regions</a>.push_back(OS);</div>
<div class="line"><a name="l01362"></a><span class="lineno"> 1362</span>&#160; </div>
<div class="line"><a name="l01363"></a><span class="lineno"> 1363</span>&#160;    CurrentEndIdx = EndIdx;</div>
<div class="line"><a name="l01364"></a><span class="lineno"> 1364</span>&#160;  }</div>
<div class="line"><a name="l01365"></a><span class="lineno"> 1365</span>&#160;}</div>
<div class="line"><a name="l01366"></a><span class="lineno"> 1366</span>&#160; </div>
<div class="line"><a name="l01367"></a><span class="lineno"> 1367</span>&#160;<a class="code" href="classllvm_1_1InstructionCost.html">InstructionCost</a></div>
<div class="line"><a name="l01368"></a><span class="lineno"> 1368</span>&#160;IROutliner::findBenefitFromAllRegions(<a class="code" href="structOutlinableGroup.html">OutlinableGroup</a> &amp;CurrentGroup) {</div>
<div class="line"><a name="l01369"></a><span class="lineno"> 1369</span>&#160;  <a class="code" href="classllvm_1_1InstructionCost.html">InstructionCost</a> RegionBenefit = 0;</div>
<div class="line"><a name="l01370"></a><span class="lineno"> 1370</span>&#160;  <span class="keywordflow">for</span> (<a class="code" href="structllvm_1_1OutlinableRegion.html">OutlinableRegion</a> *<a class="code" href="classllvm_1_1Region.html">Region</a> : CurrentGroup.<a class="code" href="structOutlinableGroup.html#a75bbc3b17e5b70e0e1fac394f26b5c11">Regions</a>) {</div>
<div class="line"><a name="l01371"></a><span class="lineno"> 1371</span>&#160;    <a class="code" href="classllvm_1_1TargetTransformInfo.html">TargetTransformInfo</a> &amp;<a class="code" href="classllvm_1_1TargetTransformInfo.html">TTI</a> = getTTI(*<a class="code" href="classllvm_1_1Region.html">Region</a>-&gt;StartBB-&gt;<a class="code" href="classllvm_1_1RegionBase.html#a001c71505d9c3f8d39aed9227a0a6e74">getParent</a>());</div>
<div class="line"><a name="l01372"></a><span class="lineno"> 1372</span>&#160;    <span class="comment">// We add the number of instructions in the region to the benefit as an</span></div>
<div class="line"><a name="l01373"></a><span class="lineno"> 1373</span>&#160;    <span class="comment">// estimate as to how much will be removed.</span></div>
<div class="line"><a name="l01374"></a><span class="lineno"> 1374</span>&#160;    RegionBenefit += <a class="code" href="classllvm_1_1Region.html">Region</a>-&gt;getBenefit(<a class="code" href="classllvm_1_1TargetTransformInfo.html">TTI</a>);</div>
<div class="line"><a name="l01375"></a><span class="lineno"> 1375</span>&#160;    <a class="code" href="Debug_8h.html#a08efc68d15935eb8889400a46c3749ba">LLVM_DEBUG</a>(<a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <span class="stringliteral">&quot;Adding: &quot;</span> &lt;&lt; RegionBenefit</div>
<div class="line"><a name="l01376"></a><span class="lineno"> 1376</span>&#160;                      &lt;&lt; <span class="stringliteral">&quot; saved instructions to overfall benefit.\n&quot;</span>);</div>
<div class="line"><a name="l01377"></a><span class="lineno"> 1377</span>&#160;  }</div>
<div class="line"><a name="l01378"></a><span class="lineno"> 1378</span>&#160; </div>
<div class="line"><a name="l01379"></a><span class="lineno"> 1379</span>&#160;  <span class="keywordflow">return</span> RegionBenefit;</div>
<div class="line"><a name="l01380"></a><span class="lineno"> 1380</span>&#160;}</div>
<div class="line"><a name="l01381"></a><span class="lineno"> 1381</span>&#160; </div>
<div class="line"><a name="l01382"></a><span class="lineno"> 1382</span>&#160;<a class="code" href="classllvm_1_1InstructionCost.html">InstructionCost</a></div>
<div class="line"><a name="l01383"></a><span class="lineno"> 1383</span>&#160;IROutliner::findCostOutputReloads(<a class="code" href="structOutlinableGroup.html">OutlinableGroup</a> &amp;CurrentGroup) {</div>
<div class="line"><a name="l01384"></a><span class="lineno"> 1384</span>&#160;  <a class="code" href="classllvm_1_1InstructionCost.html">InstructionCost</a> OverallCost = 0;</div>
<div class="line"><a name="l01385"></a><span class="lineno"> 1385</span>&#160;  <span class="keywordflow">for</span> (<a class="code" href="structllvm_1_1OutlinableRegion.html">OutlinableRegion</a> *<a class="code" href="classllvm_1_1Region.html">Region</a> : CurrentGroup.<a class="code" href="structOutlinableGroup.html#a75bbc3b17e5b70e0e1fac394f26b5c11">Regions</a>) {</div>
<div class="line"><a name="l01386"></a><span class="lineno"> 1386</span>&#160;    <a class="code" href="classllvm_1_1TargetTransformInfo.html">TargetTransformInfo</a> &amp;<a class="code" href="classllvm_1_1TargetTransformInfo.html">TTI</a> = getTTI(*<a class="code" href="classllvm_1_1Region.html">Region</a>-&gt;StartBB-&gt;<a class="code" href="classllvm_1_1RegionBase.html#a001c71505d9c3f8d39aed9227a0a6e74">getParent</a>());</div>
<div class="line"><a name="l01387"></a><span class="lineno"> 1387</span>&#160; </div>
<div class="line"><a name="l01388"></a><span class="lineno"> 1388</span>&#160;    <span class="comment">// Each output incurs a load after the call, so we add that to the cost.</span></div>
<div class="line"><a name="l01389"></a><span class="lineno"> 1389</span>&#160;    <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> OutputGVN : <a class="code" href="classllvm_1_1Region.html">Region</a>-&gt;GVNStores) {</div>
<div class="line"><a name="l01390"></a><span class="lineno"> 1390</span>&#160;      <a class="code" href="classllvm_1_1Optional.html">Optional&lt;Value *&gt;</a> OV = <a class="code" href="classllvm_1_1Region.html">Region</a>-&gt;Candidate-&gt;fromGVN(OutputGVN);</div>
<div class="line"><a name="l01391"></a><span class="lineno"> 1391</span>&#160;      <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(OV.<a class="code" href="classllvm_1_1Optional.html#ab8f06efe88f146384116a787058ab420">hasValue</a>() &amp;&amp; <span class="stringliteral">&quot;Could not find value for GVN?&quot;</span>);</div>
<div class="line"><a name="l01392"></a><span class="lineno"> 1392</span>&#160;      <a class="code" href="classllvm_1_1Value.html">Value</a> *V = OV.<a class="code" href="classllvm_1_1Optional.html#a9ed8669536d806aff028d983595bab4d">getValue</a>();</div>
<div class="line"><a name="l01393"></a><span class="lineno"> 1393</span>&#160;      <a class="code" href="classllvm_1_1InstructionCost.html">InstructionCost</a> LoadCost =</div>
<div class="line"><a name="l01394"></a><span class="lineno"> 1394</span>&#160;          <a class="code" href="classllvm_1_1TargetTransformInfo.html">TTI</a>.<a class="code" href="classllvm_1_1TargetTransformInfo.html#adee222261f4336f1f1a5d36aa8968ad4">getMemoryOpCost</a>(<a class="code" href="namespacellvm_1_1SPII.html#a2ab8a310a4181c487902735f4758ca88a5069619ca8fdce305534f3fe85091a0f">Instruction::Load</a>, V-&gt;<a class="code" href="classllvm_1_1Value.html#a6393a2d4fe7e10b28a0dcc35f881567b">getType</a>(), <a class="code" href="structllvm_1_1Align.html">Align</a>(1), 0,</div>
<div class="line"><a name="l01395"></a><span class="lineno"> 1395</span>&#160;                              <a class="code" href="classllvm_1_1TargetTransformInfo.html#a706f223f760b55668fbae74202b816bba737cfc93e5a2ff961677d57186167e7c">TargetTransformInfo::TCK_CodeSize</a>);</div>
<div class="line"><a name="l01396"></a><span class="lineno"> 1396</span>&#160; </div>
<div class="line"><a name="l01397"></a><span class="lineno"> 1397</span>&#160;      <a class="code" href="Debug_8h.html#a08efc68d15935eb8889400a46c3749ba">LLVM_DEBUG</a>(<a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <span class="stringliteral">&quot;Adding: &quot;</span> &lt;&lt; LoadCost</div>
<div class="line"><a name="l01398"></a><span class="lineno"> 1398</span>&#160;                        &lt;&lt; <span class="stringliteral">&quot; instructions to cost for output of type &quot;</span></div>
<div class="line"><a name="l01399"></a><span class="lineno"> 1399</span>&#160;                        &lt;&lt; *V-&gt;<a class="code" href="classllvm_1_1Value.html#a6393a2d4fe7e10b28a0dcc35f881567b">getType</a>() &lt;&lt; <span class="stringliteral">&quot;\n&quot;</span>);</div>
<div class="line"><a name="l01400"></a><span class="lineno"> 1400</span>&#160;      OverallCost += LoadCost;</div>
<div class="line"><a name="l01401"></a><span class="lineno"> 1401</span>&#160;    }</div>
<div class="line"><a name="l01402"></a><span class="lineno"> 1402</span>&#160;  }</div>
<div class="line"><a name="l01403"></a><span class="lineno"> 1403</span>&#160; </div>
<div class="line"><a name="l01404"></a><span class="lineno"> 1404</span>&#160;  <span class="keywordflow">return</span> OverallCost;</div>
<div class="line"><a name="l01405"></a><span class="lineno"> 1405</span>&#160;}</div>
<div class="line"><a name="l01406"></a><span class="lineno"> 1406</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l01407"></a><span class="lineno"> 1407</span>&#160;<span class="comment">/// Find the extra instructions needed to handle any output values for the</span></div>
<div class="line"><a name="l01408"></a><span class="lineno"> 1408</span>&#160;<span class="comment">/// region.</span></div>
<div class="line"><a name="l01409"></a><span class="lineno"> 1409</span>&#160;<span class="comment">///</span></div>
<div class="line"><a name="l01410"></a><span class="lineno"> 1410</span>&#160;<span class="comment">/// \param [in] M - The Module to outline from.</span></div>
<div class="line"><a name="l01411"></a><span class="lineno"> 1411</span>&#160;<span class="comment">/// \param [in] CurrentGroup - The collection of OutlinableRegions to analyze.</span></div>
<div class="line"><a name="l01412"></a><span class="lineno"> 1412</span>&#160;<span class="comment">/// \param [in] TTI - The TargetTransformInfo used to collect information for</span></div>
<div class="line"><a name="l01413"></a><span class="lineno"> 1413</span>&#160;<span class="comment">/// new instruction costs.</span></div>
<div class="line"><a name="l01414"></a><span class="lineno"> 1414</span>&#160;<span class="comment">/// \returns the additional cost to handle the outputs.</span></div>
<div class="line"><a name="l01415"></a><span class="lineno"><a class="line" href="IROutliner_8cpp.html#a8b12ae89227758cb5684cc7cf25a7f43"> 1415</a></span>&#160;<span class="comment"></span><span class="keyword">static</span> <a class="code" href="classllvm_1_1InstructionCost.html">InstructionCost</a> <a class="code" href="IROutliner_8cpp.html#a8b12ae89227758cb5684cc7cf25a7f43">findCostForOutputBlocks</a>(<a class="code" href="classllvm_1_1Module.html">Module</a> &amp;M,</div>
<div class="line"><a name="l01416"></a><span class="lineno"> 1416</span>&#160;                                               <a class="code" href="structOutlinableGroup.html">OutlinableGroup</a> &amp;CurrentGroup,</div>
<div class="line"><a name="l01417"></a><span class="lineno"> 1417</span>&#160;                                               <a class="code" href="classllvm_1_1TargetTransformInfo.html">TargetTransformInfo</a> &amp;<a class="code" href="classllvm_1_1TargetTransformInfo.html">TTI</a>) {</div>
<div class="line"><a name="l01418"></a><span class="lineno"> 1418</span>&#160;  <a class="code" href="classllvm_1_1InstructionCost.html">InstructionCost</a> OutputCost = 0;</div>
<div class="line"><a name="l01419"></a><span class="lineno"> 1419</span>&#160; </div>
<div class="line"><a name="l01420"></a><span class="lineno"> 1420</span>&#160;  <span class="keywordflow">for</span> (<span class="keyword">const</span> <a class="code" href="classllvm_1_1ArrayRef.html">ArrayRef&lt;unsigned&gt;</a> &amp;OutputUse :</div>
<div class="line"><a name="l01421"></a><span class="lineno"> 1421</span>&#160;       CurrentGroup.<a class="code" href="structOutlinableGroup.html#a53e3a8f28cb8e7a01334b7560467d9ea">OutputGVNCombinations</a>) {</div>
<div class="line"><a name="l01422"></a><span class="lineno"> 1422</span>&#160;    <a class="code" href="classllvm_1_1IRSimilarity_1_1IRSimilarityCandidate.html">IRSimilarityCandidate</a> &amp;Candidate = *CurrentGroup.<a class="code" href="structOutlinableGroup.html#a75bbc3b17e5b70e0e1fac394f26b5c11">Regions</a>[0]-&gt;Candidate;</div>
<div class="line"><a name="l01423"></a><span class="lineno"> 1423</span>&#160;    <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> <a class="code" href="classllvm_1_1GVN.html">GVN</a> : OutputUse) {</div>
<div class="line"><a name="l01424"></a><span class="lineno"> 1424</span>&#160;      <a class="code" href="classllvm_1_1Optional.html">Optional&lt;Value *&gt;</a> OV = Candidate.<a class="code" href="classllvm_1_1IRSimilarity_1_1IRSimilarityCandidate.html#a03c7915ffcc7637c4a5681b022c457f9">fromGVN</a>(<a class="code" href="classllvm_1_1GVN.html">GVN</a>);</div>
<div class="line"><a name="l01425"></a><span class="lineno"> 1425</span>&#160;      <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(OV.<a class="code" href="classllvm_1_1Optional.html#ab8f06efe88f146384116a787058ab420">hasValue</a>() &amp;&amp; <span class="stringliteral">&quot;Could not find value for GVN?&quot;</span>);</div>
<div class="line"><a name="l01426"></a><span class="lineno"> 1426</span>&#160;      <a class="code" href="classllvm_1_1Value.html">Value</a> *V = OV.<a class="code" href="classllvm_1_1Optional.html#a9ed8669536d806aff028d983595bab4d">getValue</a>();</div>
<div class="line"><a name="l01427"></a><span class="lineno"> 1427</span>&#160;      <a class="code" href="classllvm_1_1InstructionCost.html">InstructionCost</a> StoreCost =</div>
<div class="line"><a name="l01428"></a><span class="lineno"> 1428</span>&#160;          <a class="code" href="classllvm_1_1TargetTransformInfo.html">TTI</a>.<a class="code" href="classllvm_1_1TargetTransformInfo.html#adee222261f4336f1f1a5d36aa8968ad4">getMemoryOpCost</a>(<a class="code" href="namespacellvm_1_1SPII.html#a2ab8a310a4181c487902735f4758ca88a5069619ca8fdce305534f3fe85091a0f">Instruction::Load</a>, V-&gt;<a class="code" href="classllvm_1_1Value.html#a6393a2d4fe7e10b28a0dcc35f881567b">getType</a>(), <a class="code" href="structllvm_1_1Align.html">Align</a>(1), 0,</div>
<div class="line"><a name="l01429"></a><span class="lineno"> 1429</span>&#160;                              <a class="code" href="classllvm_1_1TargetTransformInfo.html#a706f223f760b55668fbae74202b816bba737cfc93e5a2ff961677d57186167e7c">TargetTransformInfo::TCK_CodeSize</a>);</div>
<div class="line"><a name="l01430"></a><span class="lineno"> 1430</span>&#160; </div>
<div class="line"><a name="l01431"></a><span class="lineno"> 1431</span>&#160;      <span class="comment">// An instruction cost is added for each store set that needs to occur for</span></div>
<div class="line"><a name="l01432"></a><span class="lineno"> 1432</span>&#160;      <span class="comment">// various output combinations inside the function, plus a branch to</span></div>
<div class="line"><a name="l01433"></a><span class="lineno"> 1433</span>&#160;      <span class="comment">// return to the exit block.</span></div>
<div class="line"><a name="l01434"></a><span class="lineno"> 1434</span>&#160;      <a class="code" href="Debug_8h.html#a08efc68d15935eb8889400a46c3749ba">LLVM_DEBUG</a>(<a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <span class="stringliteral">&quot;Adding: &quot;</span> &lt;&lt; StoreCost</div>
<div class="line"><a name="l01435"></a><span class="lineno"> 1435</span>&#160;                        &lt;&lt; <span class="stringliteral">&quot; instructions to cost for output of type &quot;</span></div>
<div class="line"><a name="l01436"></a><span class="lineno"> 1436</span>&#160;                        &lt;&lt; *V-&gt;<a class="code" href="classllvm_1_1Value.html#a6393a2d4fe7e10b28a0dcc35f881567b">getType</a>() &lt;&lt; <span class="stringliteral">&quot;\n&quot;</span>);</div>
<div class="line"><a name="l01437"></a><span class="lineno"> 1437</span>&#160;      OutputCost += StoreCost;</div>
<div class="line"><a name="l01438"></a><span class="lineno"> 1438</span>&#160;    }</div>
<div class="line"><a name="l01439"></a><span class="lineno"> 1439</span>&#160; </div>
<div class="line"><a name="l01440"></a><span class="lineno"> 1440</span>&#160;    <a class="code" href="classllvm_1_1InstructionCost.html">InstructionCost</a> BranchCost =</div>
<div class="line"><a name="l01441"></a><span class="lineno"> 1441</span>&#160;        <a class="code" href="classllvm_1_1TargetTransformInfo.html">TTI</a>.<a class="code" href="classllvm_1_1TargetTransformInfo.html#af7b131843b386c6e3cc39bd6f8141357">getCFInstrCost</a>(Instruction::Br, <a class="code" href="classllvm_1_1TargetTransformInfo.html#a706f223f760b55668fbae74202b816bba737cfc93e5a2ff961677d57186167e7c">TargetTransformInfo::TCK_CodeSize</a>);</div>
<div class="line"><a name="l01442"></a><span class="lineno"> 1442</span>&#160;    <a class="code" href="Debug_8h.html#a08efc68d15935eb8889400a46c3749ba">LLVM_DEBUG</a>(<a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <span class="stringliteral">&quot;Adding &quot;</span> &lt;&lt; BranchCost &lt;&lt; <span class="stringliteral">&quot; to the current cost for&quot;</span></div>
<div class="line"><a name="l01443"></a><span class="lineno"> 1443</span>&#160;                      &lt;&lt; <span class="stringliteral">&quot; a branch instruction\n&quot;</span>);</div>
<div class="line"><a name="l01444"></a><span class="lineno"> 1444</span>&#160;    OutputCost += BranchCost;</div>
<div class="line"><a name="l01445"></a><span class="lineno"> 1445</span>&#160;  }</div>
<div class="line"><a name="l01446"></a><span class="lineno"> 1446</span>&#160; </div>
<div class="line"><a name="l01447"></a><span class="lineno"> 1447</span>&#160;  <span class="comment">// If there is more than one output scheme, we must have a comparison and</span></div>
<div class="line"><a name="l01448"></a><span class="lineno"> 1448</span>&#160;  <span class="comment">// branch for each different item in the switch statement.</span></div>
<div class="line"><a name="l01449"></a><span class="lineno"> 1449</span>&#160;  <span class="keywordflow">if</span> (CurrentGroup.<a class="code" href="structOutlinableGroup.html#a53e3a8f28cb8e7a01334b7560467d9ea">OutputGVNCombinations</a>.<a class="code" href="classllvm_1_1detail_1_1DenseSetImpl.html#a9a025cb106832026cd05c2b4648a699f">size</a>() &gt; 1) {</div>
<div class="line"><a name="l01450"></a><span class="lineno"> 1450</span>&#160;    <a class="code" href="classllvm_1_1InstructionCost.html">InstructionCost</a> ComparisonCost = <a class="code" href="classllvm_1_1TargetTransformInfo.html">TTI</a>.<a class="code" href="classllvm_1_1TargetTransformInfo.html#a072a0761bda53960d8d103a2a997bf2e">getCmpSelInstrCost</a>(</div>
<div class="line"><a name="l01451"></a><span class="lineno"> 1451</span>&#160;        Instruction::ICmp, <a class="code" href="classllvm_1_1Type.html#a30dd396c5b40cd86c1591872e574ccdf">Type::getInt32Ty</a>(<a class="code" href="lib_2Target_2X86_2README_8txt.html#ac88fe1d3a61b056a4f64fbbb156a62ff">M</a>.getContext()),</div>
<div class="line"><a name="l01452"></a><span class="lineno"> 1452</span>&#160;        <a class="code" href="classllvm_1_1Type.html#a30dd396c5b40cd86c1591872e574ccdf">Type::getInt32Ty</a>(<a class="code" href="lib_2Target_2X86_2README_8txt.html#ac88fe1d3a61b056a4f64fbbb156a62ff">M</a>.getContext()), <a class="code" href="classllvm_1_1CmpInst.html#a2be3583dac92a031fa1458d4d992c78ba07aee43ffb66908a25c55c77ce4c0d05">CmpInst::BAD_ICMP_PREDICATE</a>,</div>
<div class="line"><a name="l01453"></a><span class="lineno"> 1453</span>&#160;        <a class="code" href="classllvm_1_1TargetTransformInfo.html#a706f223f760b55668fbae74202b816bba737cfc93e5a2ff961677d57186167e7c">TargetTransformInfo::TCK_CodeSize</a>);</div>
<div class="line"><a name="l01454"></a><span class="lineno"> 1454</span>&#160;    <a class="code" href="classllvm_1_1InstructionCost.html">InstructionCost</a> BranchCost =</div>
<div class="line"><a name="l01455"></a><span class="lineno"> 1455</span>&#160;        <a class="code" href="classllvm_1_1TargetTransformInfo.html">TTI</a>.<a class="code" href="classllvm_1_1TargetTransformInfo.html#af7b131843b386c6e3cc39bd6f8141357">getCFInstrCost</a>(Instruction::Br, <a class="code" href="classllvm_1_1TargetTransformInfo.html#a706f223f760b55668fbae74202b816bba737cfc93e5a2ff961677d57186167e7c">TargetTransformInfo::TCK_CodeSize</a>);</div>
<div class="line"><a name="l01456"></a><span class="lineno"> 1456</span>&#160; </div>
<div class="line"><a name="l01457"></a><span class="lineno"> 1457</span>&#160;    <span class="keywordtype">unsigned</span> DifferentBlocks = CurrentGroup.<a class="code" href="structOutlinableGroup.html#a53e3a8f28cb8e7a01334b7560467d9ea">OutputGVNCombinations</a>.<a class="code" href="classllvm_1_1detail_1_1DenseSetImpl.html#a9a025cb106832026cd05c2b4648a699f">size</a>();</div>
<div class="line"><a name="l01458"></a><span class="lineno"> 1458</span>&#160;    <a class="code" href="classllvm_1_1InstructionCost.html">InstructionCost</a> TotalCost = ComparisonCost * BranchCost * DifferentBlocks;</div>
<div class="line"><a name="l01459"></a><span class="lineno"> 1459</span>&#160; </div>
<div class="line"><a name="l01460"></a><span class="lineno"> 1460</span>&#160;    <a class="code" href="Debug_8h.html#a08efc68d15935eb8889400a46c3749ba">LLVM_DEBUG</a>(<a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <span class="stringliteral">&quot;Adding: &quot;</span> &lt;&lt; TotalCost</div>
<div class="line"><a name="l01461"></a><span class="lineno"> 1461</span>&#160;                      &lt;&lt; <span class="stringliteral">&quot; instructions for each switch case for each different&quot;</span></div>
<div class="line"><a name="l01462"></a><span class="lineno"> 1462</span>&#160;                      &lt;&lt; <span class="stringliteral">&quot; output path in a function\n&quot;</span>);</div>
<div class="line"><a name="l01463"></a><span class="lineno"> 1463</span>&#160;    OutputCost += TotalCost;</div>
<div class="line"><a name="l01464"></a><span class="lineno"> 1464</span>&#160;  }</div>
<div class="line"><a name="l01465"></a><span class="lineno"> 1465</span>&#160; </div>
<div class="line"><a name="l01466"></a><span class="lineno"> 1466</span>&#160;  <span class="keywordflow">return</span> OutputCost;</div>
<div class="line"><a name="l01467"></a><span class="lineno"> 1467</span>&#160;}</div>
<div class="line"><a name="l01468"></a><span class="lineno"> 1468</span>&#160; </div>
<div class="line"><a name="l01469"></a><span class="lineno"> 1469</span>&#160;<span class="keywordtype">void</span> IROutliner::findCostBenefit(<a class="code" href="classllvm_1_1Module.html">Module</a> &amp;M, <a class="code" href="structOutlinableGroup.html">OutlinableGroup</a> &amp;CurrentGroup) {</div>
<div class="line"><a name="l01470"></a><span class="lineno"> 1470</span>&#160;  <a class="code" href="classllvm_1_1InstructionCost.html">InstructionCost</a> RegionBenefit = findBenefitFromAllRegions(CurrentGroup);</div>
<div class="line"><a name="l01471"></a><span class="lineno"> 1471</span>&#160;  CurrentGroup.<a class="code" href="structOutlinableGroup.html#ae0f753d38671d8138865d30d8cf5720b">Benefit</a> += RegionBenefit;</div>
<div class="line"><a name="l01472"></a><span class="lineno"> 1472</span>&#160;  <a class="code" href="Debug_8h.html#a08efc68d15935eb8889400a46c3749ba">LLVM_DEBUG</a>(<a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <span class="stringliteral">&quot;Current Benefit: &quot;</span> &lt;&lt; CurrentGroup.<a class="code" href="structOutlinableGroup.html#ae0f753d38671d8138865d30d8cf5720b">Benefit</a> &lt;&lt; <span class="stringliteral">&quot;\n&quot;</span>);</div>
<div class="line"><a name="l01473"></a><span class="lineno"> 1473</span>&#160; </div>
<div class="line"><a name="l01474"></a><span class="lineno"> 1474</span>&#160;  <a class="code" href="classllvm_1_1InstructionCost.html">InstructionCost</a> OutputReloadCost = findCostOutputReloads(CurrentGroup);</div>
<div class="line"><a name="l01475"></a><span class="lineno"> 1475</span>&#160;  CurrentGroup.<a class="code" href="structOutlinableGroup.html#a69a17456977b7d8eb5795eb51870d41c">Cost</a> += OutputReloadCost;</div>
<div class="line"><a name="l01476"></a><span class="lineno"> 1476</span>&#160;  <a class="code" href="Debug_8h.html#a08efc68d15935eb8889400a46c3749ba">LLVM_DEBUG</a>(<a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <span class="stringliteral">&quot;Current Cost: &quot;</span> &lt;&lt; CurrentGroup.<a class="code" href="structOutlinableGroup.html#a69a17456977b7d8eb5795eb51870d41c">Cost</a> &lt;&lt; <span class="stringliteral">&quot;\n&quot;</span>);</div>
<div class="line"><a name="l01477"></a><span class="lineno"> 1477</span>&#160; </div>
<div class="line"><a name="l01478"></a><span class="lineno"> 1478</span>&#160;  <a class="code" href="classllvm_1_1InstructionCost.html">InstructionCost</a> AverageRegionBenefit =</div>
<div class="line"><a name="l01479"></a><span class="lineno"> 1479</span>&#160;      RegionBenefit / CurrentGroup.<a class="code" href="structOutlinableGroup.html#a75bbc3b17e5b70e0e1fac394f26b5c11">Regions</a>.size();</div>
<div class="line"><a name="l01480"></a><span class="lineno"> 1480</span>&#160;  <span class="keywordtype">unsigned</span> OverallArgumentNum = CurrentGroup.<a class="code" href="structOutlinableGroup.html#a25b29490419d6ea97ce7d79dc58f306d">ArgumentTypes</a>.size();</div>
<div class="line"><a name="l01481"></a><span class="lineno"> 1481</span>&#160;  <span class="keywordtype">unsigned</span> NumRegions = CurrentGroup.<a class="code" href="structOutlinableGroup.html#a75bbc3b17e5b70e0e1fac394f26b5c11">Regions</a>.size();</div>
<div class="line"><a name="l01482"></a><span class="lineno"> 1482</span>&#160;  <a class="code" href="classllvm_1_1TargetTransformInfo.html">TargetTransformInfo</a> &amp;<a class="code" href="classllvm_1_1TargetTransformInfo.html">TTI</a> =</div>
<div class="line"><a name="l01483"></a><span class="lineno"> 1483</span>&#160;      getTTI(*CurrentGroup.<a class="code" href="structOutlinableGroup.html#a75bbc3b17e5b70e0e1fac394f26b5c11">Regions</a>[0]-&gt;Candidate-&gt;getFunction());</div>
<div class="line"><a name="l01484"></a><span class="lineno"> 1484</span>&#160; </div>
<div class="line"><a name="l01485"></a><span class="lineno"> 1485</span>&#160;  <span class="comment">// We add one region to the cost once, to account for the instructions added</span></div>
<div class="line"><a name="l01486"></a><span class="lineno"> 1486</span>&#160;  <span class="comment">// inside of the newly created function.</span></div>
<div class="line"><a name="l01487"></a><span class="lineno"> 1487</span>&#160;  <a class="code" href="Debug_8h.html#a08efc68d15935eb8889400a46c3749ba">LLVM_DEBUG</a>(<a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <span class="stringliteral">&quot;Adding: &quot;</span> &lt;&lt; AverageRegionBenefit</div>
<div class="line"><a name="l01488"></a><span class="lineno"> 1488</span>&#160;                    &lt;&lt; <span class="stringliteral">&quot; instructions to cost for body of new function.\n&quot;</span>);</div>
<div class="line"><a name="l01489"></a><span class="lineno"> 1489</span>&#160;  CurrentGroup.<a class="code" href="structOutlinableGroup.html#a69a17456977b7d8eb5795eb51870d41c">Cost</a> += AverageRegionBenefit;</div>
<div class="line"><a name="l01490"></a><span class="lineno"> 1490</span>&#160;  <a class="code" href="Debug_8h.html#a08efc68d15935eb8889400a46c3749ba">LLVM_DEBUG</a>(<a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <span class="stringliteral">&quot;Current Cost: &quot;</span> &lt;&lt; CurrentGroup.<a class="code" href="structOutlinableGroup.html#a69a17456977b7d8eb5795eb51870d41c">Cost</a> &lt;&lt; <span class="stringliteral">&quot;\n&quot;</span>);</div>
<div class="line"><a name="l01491"></a><span class="lineno"> 1491</span>&#160; </div>
<div class="line"><a name="l01492"></a><span class="lineno"> 1492</span>&#160;  <span class="comment">// For each argument, we must add an instruction for loading the argument</span></div>
<div class="line"><a name="l01493"></a><span class="lineno"> 1493</span>&#160;  <span class="comment">// out of the register and into a value inside of the newly outlined function.</span></div>
<div class="line"><a name="l01494"></a><span class="lineno"> 1494</span>&#160;  <a class="code" href="Debug_8h.html#a08efc68d15935eb8889400a46c3749ba">LLVM_DEBUG</a>(<a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <span class="stringliteral">&quot;Adding: &quot;</span> &lt;&lt; OverallArgumentNum</div>
<div class="line"><a name="l01495"></a><span class="lineno"> 1495</span>&#160;                    &lt;&lt; <span class="stringliteral">&quot; instructions to cost for each argument in the new&quot;</span></div>
<div class="line"><a name="l01496"></a><span class="lineno"> 1496</span>&#160;                    &lt;&lt; <span class="stringliteral">&quot; function.\n&quot;</span>);</div>
<div class="line"><a name="l01497"></a><span class="lineno"> 1497</span>&#160;  CurrentGroup.<a class="code" href="structOutlinableGroup.html#a69a17456977b7d8eb5795eb51870d41c">Cost</a> +=</div>
<div class="line"><a name="l01498"></a><span class="lineno"> 1498</span>&#160;      OverallArgumentNum * <a class="code" href="classllvm_1_1TargetTransformInfo.html#ac44f6b9fdbb5f9cc199f8329cb0b272cae46c9eecc49bd2dc253c607e78a0fb86">TargetTransformInfo::TCC_Basic</a>;</div>
<div class="line"><a name="l01499"></a><span class="lineno"> 1499</span>&#160;  <a class="code" href="Debug_8h.html#a08efc68d15935eb8889400a46c3749ba">LLVM_DEBUG</a>(<a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <span class="stringliteral">&quot;Current Cost: &quot;</span> &lt;&lt; CurrentGroup.<a class="code" href="structOutlinableGroup.html#a69a17456977b7d8eb5795eb51870d41c">Cost</a> &lt;&lt; <span class="stringliteral">&quot;\n&quot;</span>);</div>
<div class="line"><a name="l01500"></a><span class="lineno"> 1500</span>&#160; </div>
<div class="line"><a name="l01501"></a><span class="lineno"> 1501</span>&#160;  <span class="comment">// Each argument needs to either be loaded into a register or onto the stack.</span></div>
<div class="line"><a name="l01502"></a><span class="lineno"> 1502</span>&#160;  <span class="comment">// Some arguments will only be loaded into the stack once the argument</span></div>
<div class="line"><a name="l01503"></a><span class="lineno"> 1503</span>&#160;  <span class="comment">// registers are filled.</span></div>
<div class="line"><a name="l01504"></a><span class="lineno"> 1504</span>&#160;  <a class="code" href="Debug_8h.html#a08efc68d15935eb8889400a46c3749ba">LLVM_DEBUG</a>(<a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <span class="stringliteral">&quot;Adding: &quot;</span> &lt;&lt; OverallArgumentNum</div>
<div class="line"><a name="l01505"></a><span class="lineno"> 1505</span>&#160;                    &lt;&lt; <span class="stringliteral">&quot; instructions to cost for each argument in the new&quot;</span></div>
<div class="line"><a name="l01506"></a><span class="lineno"> 1506</span>&#160;                    &lt;&lt; <span class="stringliteral">&quot; function &quot;</span> &lt;&lt; NumRegions &lt;&lt; <span class="stringliteral">&quot; times for the &quot;</span></div>
<div class="line"><a name="l01507"></a><span class="lineno"> 1507</span>&#160;                    &lt;&lt; <span class="stringliteral">&quot;needed argument handling at the call site.\n&quot;</span>);</div>
<div class="line"><a name="l01508"></a><span class="lineno"> 1508</span>&#160;  CurrentGroup.<a class="code" href="structOutlinableGroup.html#a69a17456977b7d8eb5795eb51870d41c">Cost</a> +=</div>
<div class="line"><a name="l01509"></a><span class="lineno"> 1509</span>&#160;      2 * OverallArgumentNum * <a class="code" href="classllvm_1_1TargetTransformInfo.html#ac44f6b9fdbb5f9cc199f8329cb0b272cae46c9eecc49bd2dc253c607e78a0fb86">TargetTransformInfo::TCC_Basic</a> * NumRegions;</div>
<div class="line"><a name="l01510"></a><span class="lineno"> 1510</span>&#160;  <a class="code" href="Debug_8h.html#a08efc68d15935eb8889400a46c3749ba">LLVM_DEBUG</a>(<a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <span class="stringliteral">&quot;Current Cost: &quot;</span> &lt;&lt; CurrentGroup.<a class="code" href="structOutlinableGroup.html#a69a17456977b7d8eb5795eb51870d41c">Cost</a> &lt;&lt; <span class="stringliteral">&quot;\n&quot;</span>);</div>
<div class="line"><a name="l01511"></a><span class="lineno"> 1511</span>&#160; </div>
<div class="line"><a name="l01512"></a><span class="lineno"> 1512</span>&#160;  CurrentGroup.<a class="code" href="structOutlinableGroup.html#a69a17456977b7d8eb5795eb51870d41c">Cost</a> += <a class="code" href="IROutliner_8cpp.html#a8b12ae89227758cb5684cc7cf25a7f43">findCostForOutputBlocks</a>(M, CurrentGroup, <a class="code" href="classllvm_1_1TargetTransformInfo.html">TTI</a>);</div>
<div class="line"><a name="l01513"></a><span class="lineno"> 1513</span>&#160;  <a class="code" href="Debug_8h.html#a08efc68d15935eb8889400a46c3749ba">LLVM_DEBUG</a>(<a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <span class="stringliteral">&quot;Current Cost: &quot;</span> &lt;&lt; CurrentGroup.<a class="code" href="structOutlinableGroup.html#a69a17456977b7d8eb5795eb51870d41c">Cost</a> &lt;&lt; <span class="stringliteral">&quot;\n&quot;</span>);</div>
<div class="line"><a name="l01514"></a><span class="lineno"> 1514</span>&#160;}</div>
<div class="line"><a name="l01515"></a><span class="lineno"> 1515</span>&#160; </div>
<div class="line"><a name="l01516"></a><span class="lineno"> 1516</span>&#160;<span class="keywordtype">void</span> IROutliner::updateOutputMapping(<a class="code" href="structllvm_1_1OutlinableRegion.html">OutlinableRegion</a> &amp;<a class="code" href="classllvm_1_1Region.html">Region</a>,</div>
<div class="line"><a name="l01517"></a><span class="lineno"> 1517</span>&#160;                                     <a class="code" href="classllvm_1_1ArrayRef.html">ArrayRef&lt;Value *&gt;</a> Outputs,</div>
<div class="line"><a name="l01518"></a><span class="lineno"> 1518</span>&#160;                                     <a class="code" href="classllvm_1_1LoadInst.html">LoadInst</a> *LI) {</div>
<div class="line"><a name="l01519"></a><span class="lineno"> 1519</span>&#160;  <span class="comment">// For and load instructions following the call</span></div>
<div class="line"><a name="l01520"></a><span class="lineno"> 1520</span>&#160;  <a class="code" href="classllvm_1_1Value.html">Value</a> *Operand = LI-&gt;<a class="code" href="classllvm_1_1LoadInst.html#ad47eefa1d094f60494b6b927061ca001">getPointerOperand</a>();</div>
<div class="line"><a name="l01521"></a><span class="lineno"> 1521</span>&#160;  <a class="code" href="classllvm_1_1Optional.html">Optional&lt;unsigned&gt;</a> OutputIdx = <a class="code" href="namespacellvm.html#a6497a581a4f7152729c29a368ac7d7be">None</a>;</div>
<div class="line"><a name="l01522"></a><span class="lineno"> 1522</span>&#160;  <span class="comment">// Find if the operand it is an output register.</span></div>
<div class="line"><a name="l01523"></a><span class="lineno"> 1523</span>&#160;  <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> ArgIdx = <a class="code" href="classllvm_1_1Region.html">Region</a>.NumExtractedInputs;</div>
<div class="line"><a name="l01524"></a><span class="lineno"> 1524</span>&#160;       ArgIdx &lt; Region.Call-&gt;arg_size(); ArgIdx++) {</div>
<div class="line"><a name="l01525"></a><span class="lineno"> 1525</span>&#160;    <span class="keywordflow">if</span> (Operand == <a class="code" href="classllvm_1_1Region.html">Region</a>.Call-&gt;getArgOperand(ArgIdx)) {</div>
<div class="line"><a name="l01526"></a><span class="lineno"> 1526</span>&#160;      OutputIdx = ArgIdx - <a class="code" href="classllvm_1_1Region.html">Region</a>.NumExtractedInputs;</div>
<div class="line"><a name="l01527"></a><span class="lineno"> 1527</span>&#160;      <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l01528"></a><span class="lineno"> 1528</span>&#160;    }</div>
<div class="line"><a name="l01529"></a><span class="lineno"> 1529</span>&#160;  }</div>
<div class="line"><a name="l01530"></a><span class="lineno"> 1530</span>&#160; </div>
<div class="line"><a name="l01531"></a><span class="lineno"> 1531</span>&#160;  <span class="comment">// If we found an output register, place a mapping of the new value</span></div>
<div class="line"><a name="l01532"></a><span class="lineno"> 1532</span>&#160;  <span class="comment">// to the original in the mapping.</span></div>
<div class="line"><a name="l01533"></a><span class="lineno"> 1533</span>&#160;  <span class="keywordflow">if</span> (!OutputIdx.<a class="code" href="classllvm_1_1Optional.html#ab8f06efe88f146384116a787058ab420">hasValue</a>())</div>
<div class="line"><a name="l01534"></a><span class="lineno"> 1534</span>&#160;    <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l01535"></a><span class="lineno"> 1535</span>&#160; </div>
<div class="line"><a name="l01536"></a><span class="lineno"> 1536</span>&#160;  <span class="keywordflow">if</span> (OutputMappings.find(Outputs[OutputIdx.<a class="code" href="classllvm_1_1Optional.html#a9ed8669536d806aff028d983595bab4d">getValue</a>()]) ==</div>
<div class="line"><a name="l01537"></a><span class="lineno"> 1537</span>&#160;      OutputMappings.end()) {</div>
<div class="line"><a name="l01538"></a><span class="lineno"> 1538</span>&#160;    <a class="code" href="Debug_8h.html#a08efc68d15935eb8889400a46c3749ba">LLVM_DEBUG</a>(<a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <span class="stringliteral">&quot;Mapping extracted output &quot;</span> &lt;&lt; *LI &lt;&lt; <span class="stringliteral">&quot; to &quot;</span></div>
<div class="line"><a name="l01539"></a><span class="lineno"> 1539</span>&#160;                      &lt;&lt; *Outputs[OutputIdx.<a class="code" href="classllvm_1_1Optional.html#a9ed8669536d806aff028d983595bab4d">getValue</a>()] &lt;&lt; <span class="stringliteral">&quot;\n&quot;</span>);</div>
<div class="line"><a name="l01540"></a><span class="lineno"> 1540</span>&#160;    OutputMappings.insert(std::make_pair(LI, Outputs[OutputIdx.<a class="code" href="classllvm_1_1Optional.html#a9ed8669536d806aff028d983595bab4d">getValue</a>()]));</div>
<div class="line"><a name="l01541"></a><span class="lineno"> 1541</span>&#160;  } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l01542"></a><span class="lineno"> 1542</span>&#160;    <a class="code" href="classllvm_1_1Value.html">Value</a> *Orig = OutputMappings.find(Outputs[OutputIdx.<a class="code" href="classllvm_1_1Optional.html#a9ed8669536d806aff028d983595bab4d">getValue</a>()])-&gt;second;</div>
<div class="line"><a name="l01543"></a><span class="lineno"> 1543</span>&#160;    <a class="code" href="Debug_8h.html#a08efc68d15935eb8889400a46c3749ba">LLVM_DEBUG</a>(<a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <span class="stringliteral">&quot;Mapping extracted output &quot;</span> &lt;&lt; *Orig &lt;&lt; <span class="stringliteral">&quot; to &quot;</span></div>
<div class="line"><a name="l01544"></a><span class="lineno"> 1544</span>&#160;                      &lt;&lt; *Outputs[OutputIdx.<a class="code" href="classllvm_1_1Optional.html#a9ed8669536d806aff028d983595bab4d">getValue</a>()] &lt;&lt; <span class="stringliteral">&quot;\n&quot;</span>);</div>
<div class="line"><a name="l01545"></a><span class="lineno"> 1545</span>&#160;    OutputMappings.insert(std::make_pair(LI, Orig));</div>
<div class="line"><a name="l01546"></a><span class="lineno"> 1546</span>&#160;  }</div>
<div class="line"><a name="l01547"></a><span class="lineno"> 1547</span>&#160;}</div>
<div class="line"><a name="l01548"></a><span class="lineno"> 1548</span>&#160; </div>
<div class="line"><a name="l01549"></a><span class="lineno"> 1549</span>&#160;<span class="keywordtype">bool</span> IROutliner::extractSection(<a class="code" href="structllvm_1_1OutlinableRegion.html">OutlinableRegion</a> &amp;<a class="code" href="classllvm_1_1Region.html">Region</a>) {</div>
<div class="line"><a name="l01550"></a><span class="lineno"> 1550</span>&#160;  <a class="code" href="classllvm_1_1SetVector.html">SetVector&lt;Value *&gt;</a> ArgInputs, Outputs, SinkCands;</div>
<div class="line"><a name="l01551"></a><span class="lineno"> 1551</span>&#160;  <a class="code" href="classllvm_1_1Region.html">Region</a>.CE-&gt;findInputsOutputs(ArgInputs, Outputs, SinkCands);</div>
<div class="line"><a name="l01552"></a><span class="lineno"> 1552</span>&#160; </div>
<div class="line"><a name="l01553"></a><span class="lineno"> 1553</span>&#160;  <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(<a class="code" href="classllvm_1_1Region.html">Region</a>.StartBB &amp;&amp; <span class="stringliteral">&quot;StartBB for the OutlinableRegion is nullptr!&quot;</span>);</div>
<div class="line"><a name="l01554"></a><span class="lineno"> 1554</span>&#160;  <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(<a class="code" href="classllvm_1_1Region.html">Region</a>.FollowBB &amp;&amp; <span class="stringliteral">&quot;FollowBB for the OutlinableRegion is nullptr!&quot;</span>);</div>
<div class="line"><a name="l01555"></a><span class="lineno"> 1555</span>&#160;  <a class="code" href="classllvm_1_1Function.html">Function</a> *OrigF = <a class="code" href="classllvm_1_1Region.html">Region</a>.StartBB-&gt;<a class="code" href="classllvm_1_1RegionBase.html#a001c71505d9c3f8d39aed9227a0a6e74">getParent</a>();</div>
<div class="line"><a name="l01556"></a><span class="lineno"> 1556</span>&#160;  <a class="code" href="classllvm_1_1CodeExtractorAnalysisCache.html">CodeExtractorAnalysisCache</a> CEAC(*OrigF);</div>
<div class="line"><a name="l01557"></a><span class="lineno"> 1557</span>&#160;  <a class="code" href="classllvm_1_1Region.html">Region</a>.ExtractedFunction = <a class="code" href="classllvm_1_1Region.html">Region</a>.CE-&gt;extractCodeRegion(CEAC);</div>
<div class="line"><a name="l01558"></a><span class="lineno"> 1558</span>&#160; </div>
<div class="line"><a name="l01559"></a><span class="lineno"> 1559</span>&#160;  <span class="comment">// If the extraction was successful, find the BasicBlock, and reassign the</span></div>
<div class="line"><a name="l01560"></a><span class="lineno"> 1560</span>&#160;  <span class="comment">// OutlinableRegion blocks</span></div>
<div class="line"><a name="l01561"></a><span class="lineno"> 1561</span>&#160;  <span class="keywordflow">if</span> (!<a class="code" href="classllvm_1_1Region.html">Region</a>.ExtractedFunction) {</div>
<div class="line"><a name="l01562"></a><span class="lineno"> 1562</span>&#160;    <a class="code" href="Debug_8h.html#a08efc68d15935eb8889400a46c3749ba">LLVM_DEBUG</a>(<a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <span class="stringliteral">&quot;CodeExtractor failed to outline &quot;</span> &lt;&lt; <a class="code" href="classllvm_1_1Region.html">Region</a>.StartBB</div>
<div class="line"><a name="l01563"></a><span class="lineno"> 1563</span>&#160;                      &lt;&lt; <span class="stringliteral">&quot;\n&quot;</span>);</div>
<div class="line"><a name="l01564"></a><span class="lineno"> 1564</span>&#160;    <a class="code" href="classllvm_1_1Region.html">Region</a>.reattachCandidate();</div>
<div class="line"><a name="l01565"></a><span class="lineno"> 1565</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l01566"></a><span class="lineno"> 1566</span>&#160;  }</div>
<div class="line"><a name="l01567"></a><span class="lineno"> 1567</span>&#160; </div>
<div class="line"><a name="l01568"></a><span class="lineno"> 1568</span>&#160;  <a class="code" href="classllvm_1_1BasicBlock.html">BasicBlock</a> *RewrittenBB = <a class="code" href="classllvm_1_1Region.html">Region</a>.FollowBB-&gt;getSinglePredecessor();</div>
<div class="line"><a name="l01569"></a><span class="lineno"> 1569</span>&#160;  <a class="code" href="classllvm_1_1Region.html">Region</a>.StartBB = RewrittenBB;</div>
<div class="line"><a name="l01570"></a><span class="lineno"> 1570</span>&#160;  <a class="code" href="classllvm_1_1Region.html">Region</a>.EndBB = RewrittenBB;</div>
<div class="line"><a name="l01571"></a><span class="lineno"> 1571</span>&#160; </div>
<div class="line"><a name="l01572"></a><span class="lineno"> 1572</span>&#160;  <span class="comment">// The sequences of outlinable regions has now changed.  We must fix the</span></div>
<div class="line"><a name="l01573"></a><span class="lineno"> 1573</span>&#160;  <span class="comment">// IRInstructionDataList for consistency.  Although they may not be illegal</span></div>
<div class="line"><a name="l01574"></a><span class="lineno"> 1574</span>&#160;  <span class="comment">// instructions, they should not be compared with anything else as they</span></div>
<div class="line"><a name="l01575"></a><span class="lineno"> 1575</span>&#160;  <span class="comment">// should not be outlined in this round.  So marking these as illegal is</span></div>
<div class="line"><a name="l01576"></a><span class="lineno"> 1576</span>&#160;  <span class="comment">// allowed.</span></div>
<div class="line"><a name="l01577"></a><span class="lineno"> 1577</span>&#160;  <a class="code" href="structllvm_1_1IRSimilarity_1_1IRInstructionDataList.html">IRInstructionDataList</a> *IDL = <a class="code" href="classllvm_1_1Region.html">Region</a>.Candidate-&gt;front()-&gt;IDL;</div>
<div class="line"><a name="l01578"></a><span class="lineno"> 1578</span>&#160;  <a class="code" href="classllvm_1_1Instruction.html">Instruction</a> *BeginRewritten = &amp;*RewrittenBB-&gt;<a class="code" href="classllvm_1_1BasicBlock.html#a0ed5f3ab3c2e4196ee0cffffa080c062">begin</a>();</div>
<div class="line"><a name="l01579"></a><span class="lineno"> 1579</span>&#160;  <a class="code" href="classllvm_1_1Instruction.html">Instruction</a> *EndRewritten = &amp;*RewrittenBB-&gt;<a class="code" href="classllvm_1_1BasicBlock.html#a0ed5f3ab3c2e4196ee0cffffa080c062">begin</a>();</div>
<div class="line"><a name="l01580"></a><span class="lineno"> 1580</span>&#160;  <a class="code" href="classllvm_1_1Region.html">Region</a>.NewFront = <span class="keyword">new</span> (InstDataAllocator.Allocate()) <a class="code" href="structllvm_1_1IRSimilarity_1_1IRInstructionData.html">IRInstructionData</a>(</div>
<div class="line"><a name="l01581"></a><span class="lineno"> 1581</span>&#160;      *BeginRewritten, InstructionClassifier.visit(*BeginRewritten), *IDL);</div>
<div class="line"><a name="l01582"></a><span class="lineno"> 1582</span>&#160;  <a class="code" href="classllvm_1_1Region.html">Region</a>.NewBack = <span class="keyword">new</span> (InstDataAllocator.Allocate()) <a class="code" href="structllvm_1_1IRSimilarity_1_1IRInstructionData.html">IRInstructionData</a>(</div>
<div class="line"><a name="l01583"></a><span class="lineno"> 1583</span>&#160;      *EndRewritten, InstructionClassifier.visit(*EndRewritten), *IDL);</div>
<div class="line"><a name="l01584"></a><span class="lineno"> 1584</span>&#160; </div>
<div class="line"><a name="l01585"></a><span class="lineno"> 1585</span>&#160;  <span class="comment">// Insert the first IRInstructionData of the new region in front of the</span></div>
<div class="line"><a name="l01586"></a><span class="lineno"> 1586</span>&#160;  <span class="comment">// first IRInstructionData of the IRSimilarityCandidate.</span></div>
<div class="line"><a name="l01587"></a><span class="lineno"> 1587</span>&#160;  IDL-&gt;<a class="code" href="classllvm_1_1simple__ilist.html#a7f4bd492b552181942252ccddc0db26e">insert</a>(<a class="code" href="classllvm_1_1Region.html">Region</a>.Candidate-&gt;<a class="code" href="classllvm_1_1RegionBase.html#a1aa6c7717f84c6970e22a0938660047f">begin</a>(), *<a class="code" href="classllvm_1_1Region.html">Region</a>.NewFront);</div>
<div class="line"><a name="l01588"></a><span class="lineno"> 1588</span>&#160;  <span class="comment">// Insert the first IRInstructionData of the new region after the</span></div>
<div class="line"><a name="l01589"></a><span class="lineno"> 1589</span>&#160;  <span class="comment">// last IRInstructionData of the IRSimilarityCandidate.</span></div>
<div class="line"><a name="l01590"></a><span class="lineno"> 1590</span>&#160;  IDL-&gt;<a class="code" href="classllvm_1_1simple__ilist.html#a7f4bd492b552181942252ccddc0db26e">insert</a>(<a class="code" href="classllvm_1_1Region.html">Region</a>.Candidate-&gt;<a class="code" href="classllvm_1_1RegionBase.html#a9b0ebfeb3f47f1ad763e5b184dcb4e03">end</a>(), *<a class="code" href="classllvm_1_1Region.html">Region</a>.NewBack);</div>
<div class="line"><a name="l01591"></a><span class="lineno"> 1591</span>&#160;  <span class="comment">// Remove the IRInstructionData from the IRSimilarityCandidate.</span></div>
<div class="line"><a name="l01592"></a><span class="lineno"> 1592</span>&#160;  IDL-&gt;<a class="code" href="classllvm_1_1simple__ilist.html#a4b588a868b58f1ac0917a59e7c48b5cc">erase</a>(<a class="code" href="classllvm_1_1Region.html">Region</a>.Candidate-&gt;<a class="code" href="classllvm_1_1RegionBase.html#a1aa6c7717f84c6970e22a0938660047f">begin</a>(), std::prev(<a class="code" href="classllvm_1_1Region.html">Region</a>.Candidate-&gt;<a class="code" href="classllvm_1_1RegionBase.html#a9b0ebfeb3f47f1ad763e5b184dcb4e03">end</a>()));</div>
<div class="line"><a name="l01593"></a><span class="lineno"> 1593</span>&#160; </div>
<div class="line"><a name="l01594"></a><span class="lineno"> 1594</span>&#160;  <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(RewrittenBB != <span class="keyword">nullptr</span> &amp;&amp;</div>
<div class="line"><a name="l01595"></a><span class="lineno"> 1595</span>&#160;         <span class="stringliteral">&quot;Could not find a predecessor after extraction!&quot;</span>);</div>
<div class="line"><a name="l01596"></a><span class="lineno"> 1596</span>&#160; </div>
<div class="line"><a name="l01597"></a><span class="lineno"> 1597</span>&#160;  <span class="comment">// Iterate over the new set of instructions to find the new call</span></div>
<div class="line"><a name="l01598"></a><span class="lineno"> 1598</span>&#160;  <span class="comment">// instruction.</span></div>
<div class="line"><a name="l01599"></a><span class="lineno"> 1599</span>&#160;  <span class="keywordflow">for</span> (<a class="code" href="classllvm_1_1Instruction.html">Instruction</a> &amp;<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a> : *RewrittenBB)</div>
<div class="line"><a name="l01600"></a><span class="lineno"> 1600</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1CallInst.html">CallInst</a> *CI = dyn_cast&lt;CallInst&gt;(&amp;<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>)) {</div>
<div class="line"><a name="l01601"></a><span class="lineno"> 1601</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1Region.html">Region</a>.ExtractedFunction == CI-&gt;getCalledFunction())</div>
<div class="line"><a name="l01602"></a><span class="lineno"> 1602</span>&#160;        <a class="code" href="classllvm_1_1Region.html">Region</a>.Call = CI;</div>
<div class="line"><a name="l01603"></a><span class="lineno"> 1603</span>&#160;    } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1LoadInst.html">LoadInst</a> *LI = dyn_cast&lt;LoadInst&gt;(&amp;<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>))</div>
<div class="line"><a name="l01604"></a><span class="lineno"> 1604</span>&#160;      updateOutputMapping(<a class="code" href="classllvm_1_1Region.html">Region</a>, Outputs.<a class="code" href="classllvm_1_1SetVector.html#a55ffacfbd9b6de5eb90a9f443001e3a6">getArrayRef</a>(), LI);</div>
<div class="line"><a name="l01605"></a><span class="lineno"> 1605</span>&#160;  <a class="code" href="classllvm_1_1Region.html">Region</a>.reattachCandidate();</div>
<div class="line"><a name="l01606"></a><span class="lineno"> 1606</span>&#160;  <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l01607"></a><span class="lineno"> 1607</span>&#160;}</div>
<div class="line"><a name="l01608"></a><span class="lineno"> 1608</span>&#160; </div>
<div class="line"><a name="l01609"></a><span class="lineno"> 1609</span>&#160;<span class="keywordtype">unsigned</span> IROutliner::doOutline(<a class="code" href="classllvm_1_1Module.html">Module</a> &amp;M) {</div>
<div class="line"><a name="l01610"></a><span class="lineno"> 1610</span>&#160;  <span class="comment">// Find the possible similarity sections.</span></div>
<div class="line"><a name="l01611"></a><span class="lineno"> 1611</span>&#160;  <a class="code" href="classllvm_1_1IRSimilarity_1_1IRSimilarityIdentifier.html">IRSimilarityIdentifier</a> &amp;<a class="code" href="namespacellvm_1_1object.html#a42e5b6ee6f67085d2115b2ea44588c47acfaaa2f9ff08c82a08d647efc1a2964b">Identifier</a> = getIRSI(M);</div>
<div class="line"><a name="l01612"></a><span class="lineno"> 1612</span>&#160;  <a class="code" href="namespacellvm_1_1IRSimilarity.html#a1e2d2e59b2467bacdc6db54dcc9bc4a1">SimilarityGroupList</a> &amp;SimilarityCandidates = *<a class="code" href="namespacellvm_1_1object.html#a42e5b6ee6f67085d2115b2ea44588c47acfaaa2f9ff08c82a08d647efc1a2964b">Identifier</a>.getSimilarity();</div>
<div class="line"><a name="l01613"></a><span class="lineno"> 1613</span>&#160; </div>
<div class="line"><a name="l01614"></a><span class="lineno"> 1614</span>&#160;  <span class="comment">// Sort them by size of extracted sections</span></div>
<div class="line"><a name="l01615"></a><span class="lineno"> 1615</span>&#160;  <span class="keywordtype">unsigned</span> OutlinedFunctionNum = 0;</div>
<div class="line"><a name="l01616"></a><span class="lineno"> 1616</span>&#160;  <span class="comment">// If we only have one SimilarityGroup in SimilarityCandidates, we do not have</span></div>
<div class="line"><a name="l01617"></a><span class="lineno"> 1617</span>&#160;  <span class="comment">// to sort them by the potential number of instructions to be outlined</span></div>
<div class="line"><a name="l01618"></a><span class="lineno"> 1618</span>&#160;  <span class="keywordflow">if</span> (SimilarityCandidates.size() &gt; 1)</div>
<div class="line"><a name="l01619"></a><span class="lineno"> 1619</span>&#160;    <a class="code" href="namespacellvm.html#a076f93c387f454f0db13d4bc7d4e7f9c">llvm::stable_sort</a>(SimilarityCandidates,</div>
<div class="line"><a name="l01620"></a><span class="lineno"> 1620</span>&#160;                      [](<span class="keyword">const</span> std::vector&lt;IRSimilarityCandidate&gt; &amp;LHS,</div>
<div class="line"><a name="l01621"></a><span class="lineno"> 1621</span>&#160;                         <span class="keyword">const</span> std::vector&lt;IRSimilarityCandidate&gt; &amp;RHS) {</div>
<div class="line"><a name="l01622"></a><span class="lineno"> 1622</span>&#160;                        <span class="keywordflow">return</span> LHS[0].getLength() * LHS.size() &gt;</div>
<div class="line"><a name="l01623"></a><span class="lineno"> 1623</span>&#160;                               RHS[0].getLength() * RHS.size();</div>
<div class="line"><a name="l01624"></a><span class="lineno"> 1624</span>&#160;                      });</div>
<div class="line"><a name="l01625"></a><span class="lineno"> 1625</span>&#160; </div>
<div class="line"><a name="l01626"></a><span class="lineno"> 1626</span>&#160;  <a class="code" href="classllvm_1_1DenseSet.html">DenseSet&lt;unsigned&gt;</a> NotSame;</div>
<div class="line"><a name="l01627"></a><span class="lineno"> 1627</span>&#160;  std::vector&lt;Function *&gt; FuncsToRemove;</div>
<div class="line"><a name="l01628"></a><span class="lineno"> 1628</span>&#160;  <span class="comment">// Iterate over the possible sets of similarity.</span></div>
<div class="line"><a name="l01629"></a><span class="lineno"> 1629</span>&#160;  <span class="keywordflow">for</span> (<a class="code" href="namespacellvm_1_1IRSimilarity.html#a2198f86ce16da838bdeea4de7e59ef31">SimilarityGroup</a> &amp;CandidateVec : SimilarityCandidates) {</div>
<div class="line"><a name="l01630"></a><span class="lineno"> 1630</span>&#160;    <a class="code" href="structOutlinableGroup.html">OutlinableGroup</a> CurrentGroup;</div>
<div class="line"><a name="l01631"></a><span class="lineno"> 1631</span>&#160; </div>
<div class="line"><a name="l01632"></a><span class="lineno"> 1632</span>&#160;    <span class="comment">// Remove entries that were previously outlined</span></div>
<div class="line"><a name="l01633"></a><span class="lineno"> 1633</span>&#160;    pruneIncompatibleRegions(CandidateVec, CurrentGroup);</div>
<div class="line"><a name="l01634"></a><span class="lineno"> 1634</span>&#160; </div>
<div class="line"><a name="l01635"></a><span class="lineno"> 1635</span>&#160;    <span class="comment">// We pruned the number of regions to 0 to 1, meaning that it&#39;s not worth</span></div>
<div class="line"><a name="l01636"></a><span class="lineno"> 1636</span>&#160;    <span class="comment">// trying to outlined since there is no compatible similar instance of this</span></div>
<div class="line"><a name="l01637"></a><span class="lineno"> 1637</span>&#160;    <span class="comment">// code.</span></div>
<div class="line"><a name="l01638"></a><span class="lineno"> 1638</span>&#160;    <span class="keywordflow">if</span> (CurrentGroup.<a class="code" href="structOutlinableGroup.html#a75bbc3b17e5b70e0e1fac394f26b5c11">Regions</a>.size() &lt; 2)</div>
<div class="line"><a name="l01639"></a><span class="lineno"> 1639</span>&#160;      <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l01640"></a><span class="lineno"> 1640</span>&#160; </div>
<div class="line"><a name="l01641"></a><span class="lineno"> 1641</span>&#160;    <span class="comment">// Determine if there are any values that are the same constant throughout</span></div>
<div class="line"><a name="l01642"></a><span class="lineno"> 1642</span>&#160;    <span class="comment">// each section in the set.</span></div>
<div class="line"><a name="l01643"></a><span class="lineno"> 1643</span>&#160;    NotSame.clear();</div>
<div class="line"><a name="l01644"></a><span class="lineno"> 1644</span>&#160;    CurrentGroup.<a class="code" href="structOutlinableGroup.html#a61915f6a6a382f51fd1a8bf3dd188c0c">findSameConstants</a>(NotSame);</div>
<div class="line"><a name="l01645"></a><span class="lineno"> 1645</span>&#160; </div>
<div class="line"><a name="l01646"></a><span class="lineno"> 1646</span>&#160;    <span class="keywordflow">if</span> (CurrentGroup.<a class="code" href="structOutlinableGroup.html#a7bf6409b01dd04465404d268beec0898">IgnoreGroup</a>)</div>
<div class="line"><a name="l01647"></a><span class="lineno"> 1647</span>&#160;      <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l01648"></a><span class="lineno"> 1648</span>&#160; </div>
<div class="line"><a name="l01649"></a><span class="lineno"> 1649</span>&#160;    <span class="comment">// Create a CodeExtractor for each outlinable region. Identify inputs and</span></div>
<div class="line"><a name="l01650"></a><span class="lineno"> 1650</span>&#160;    <span class="comment">// outputs for each section using the code extractor and create the argument</span></div>
<div class="line"><a name="l01651"></a><span class="lineno"> 1651</span>&#160;    <span class="comment">// types for the Aggregate Outlining Function.</span></div>
<div class="line"><a name="l01652"></a><span class="lineno"> 1652</span>&#160;    std::vector&lt;OutlinableRegion *&gt; OutlinedRegions;</div>
<div class="line"><a name="l01653"></a><span class="lineno"> 1653</span>&#160;    <span class="keywordflow">for</span> (<a class="code" href="structllvm_1_1OutlinableRegion.html">OutlinableRegion</a> *OS : CurrentGroup.<a class="code" href="structOutlinableGroup.html#a75bbc3b17e5b70e0e1fac394f26b5c11">Regions</a>) {</div>
<div class="line"><a name="l01654"></a><span class="lineno"> 1654</span>&#160;      <span class="comment">// Break the outlinable region out of its parent BasicBlock into its own</span></div>
<div class="line"><a name="l01655"></a><span class="lineno"> 1655</span>&#160;      <span class="comment">// BasicBlocks (see function implementation).</span></div>
<div class="line"><a name="l01656"></a><span class="lineno"> 1656</span>&#160;      OS-&gt;<a class="code" href="structllvm_1_1OutlinableRegion.html#a761b3c02cd196cb5f6fb019bcd86866e">splitCandidate</a>();</div>
<div class="line"><a name="l01657"></a><span class="lineno"> 1657</span>&#160;      std::vector&lt;BasicBlock *&gt; BE = {OS-&gt;<a class="code" href="structllvm_1_1OutlinableRegion.html#aeea36f22dc87339b7be65179d3f249b6">StartBB</a>};</div>
<div class="line"><a name="l01658"></a><span class="lineno"> 1658</span>&#160;      OS-&gt;<a class="code" href="structllvm_1_1OutlinableRegion.html#a06ee910ecb16eaaab4f069fa05c2a95a">CE</a> = <span class="keyword">new</span> (ExtractorAllocator.Allocate())</div>
<div class="line"><a name="l01659"></a><span class="lineno"> 1659</span>&#160;          <a class="code" href="classllvm_1_1CodeExtractor.html">CodeExtractor</a>(BE, <span class="keyword">nullptr</span>, <span class="keyword">false</span>, <span class="keyword">nullptr</span>, <span class="keyword">nullptr</span>, <span class="keyword">nullptr</span>, <span class="keyword">false</span>,</div>
<div class="line"><a name="l01660"></a><span class="lineno"> 1660</span>&#160;                        <span class="keyword">false</span>, <span class="stringliteral">&quot;outlined&quot;</span>);</div>
<div class="line"><a name="l01661"></a><span class="lineno"> 1661</span>&#160;      findAddInputsOutputs(M, *OS, NotSame);</div>
<div class="line"><a name="l01662"></a><span class="lineno"> 1662</span>&#160;      <span class="keywordflow">if</span> (!OS-&gt;<a class="code" href="structllvm_1_1OutlinableRegion.html#a737734321cd2dd3896e64015cab7ab95">IgnoreRegion</a>)</div>
<div class="line"><a name="l01663"></a><span class="lineno"> 1663</span>&#160;        OutlinedRegions.push_back(OS);</div>
<div class="line"><a name="l01664"></a><span class="lineno"> 1664</span>&#160;      <span class="keywordflow">else</span></div>
<div class="line"><a name="l01665"></a><span class="lineno"> 1665</span>&#160;        OS-&gt;<a class="code" href="structllvm_1_1OutlinableRegion.html#af5d7aa7988108e9377f154cf6a22f02b">reattachCandidate</a>();</div>
<div class="line"><a name="l01666"></a><span class="lineno"> 1666</span>&#160;    }</div>
<div class="line"><a name="l01667"></a><span class="lineno"> 1667</span>&#160; </div>
<div class="line"><a name="l01668"></a><span class="lineno"> 1668</span>&#160;    CurrentGroup.<a class="code" href="structOutlinableGroup.html#a75bbc3b17e5b70e0e1fac394f26b5c11">Regions</a> = <a class="code" href="lib_2Target_2ARM_2README_8txt.html#ad3a99906764c35b2694ae90fa57744a5">std::move</a>(OutlinedRegions);</div>
<div class="line"><a name="l01669"></a><span class="lineno"> 1669</span>&#160; </div>
<div class="line"><a name="l01670"></a><span class="lineno"> 1670</span>&#160;    <span class="keywordflow">if</span> (CurrentGroup.<a class="code" href="structOutlinableGroup.html#a75bbc3b17e5b70e0e1fac394f26b5c11">Regions</a>.empty())</div>
<div class="line"><a name="l01671"></a><span class="lineno"> 1671</span>&#160;      <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l01672"></a><span class="lineno"> 1672</span>&#160; </div>
<div class="line"><a name="l01673"></a><span class="lineno"> 1673</span>&#160;    CurrentGroup.<a class="code" href="structOutlinableGroup.html#ad67fb96194cff11216803ad74dba5687">collectGVNStoreSets</a>(M);</div>
<div class="line"><a name="l01674"></a><span class="lineno"> 1674</span>&#160; </div>
<div class="line"><a name="l01675"></a><span class="lineno"> 1675</span>&#160;    <span class="keywordflow">if</span> (CostModel)</div>
<div class="line"><a name="l01676"></a><span class="lineno"> 1676</span>&#160;      findCostBenefit(M, CurrentGroup);</div>
<div class="line"><a name="l01677"></a><span class="lineno"> 1677</span>&#160; </div>
<div class="line"><a name="l01678"></a><span class="lineno"> 1678</span>&#160;    <span class="comment">// If we are adhering to the cost model, reattach all the candidates</span></div>
<div class="line"><a name="l01679"></a><span class="lineno"> 1679</span>&#160;    <span class="keywordflow">if</span> (CurrentGroup.<a class="code" href="structOutlinableGroup.html#a69a17456977b7d8eb5795eb51870d41c">Cost</a> &gt;= CurrentGroup.<a class="code" href="structOutlinableGroup.html#ae0f753d38671d8138865d30d8cf5720b">Benefit</a> &amp;&amp; CostModel) {</div>
<div class="line"><a name="l01680"></a><span class="lineno"> 1680</span>&#160;      <span class="keywordflow">for</span> (<a class="code" href="structllvm_1_1OutlinableRegion.html">OutlinableRegion</a> *OS : CurrentGroup.<a class="code" href="structOutlinableGroup.html#a75bbc3b17e5b70e0e1fac394f26b5c11">Regions</a>)</div>
<div class="line"><a name="l01681"></a><span class="lineno"> 1681</span>&#160;        OS-&gt;<a class="code" href="structllvm_1_1OutlinableRegion.html#af5d7aa7988108e9377f154cf6a22f02b">reattachCandidate</a>();</div>
<div class="line"><a name="l01682"></a><span class="lineno"> 1682</span>&#160;      <a class="code" href="classllvm_1_1OptimizationRemarkEmitter.html">OptimizationRemarkEmitter</a> &amp;ORE = getORE(</div>
<div class="line"><a name="l01683"></a><span class="lineno"> 1683</span>&#160;          *CurrentGroup.<a class="code" href="structOutlinableGroup.html#a75bbc3b17e5b70e0e1fac394f26b5c11">Regions</a>[0]-&gt;Candidate-&gt;getFunction());</div>
<div class="line"><a name="l01684"></a><span class="lineno"> 1684</span>&#160;      ORE.<a class="code" href="classllvm_1_1OptimizationRemarkEmitter.html#aae6a98aea85aa3af87357cc5448db499">emit</a>([&amp;]() {</div>
<div class="line"><a name="l01685"></a><span class="lineno"> 1685</span>&#160;        <a class="code" href="classllvm_1_1IRSimilarity_1_1IRSimilarityCandidate.html">IRSimilarityCandidate</a> *<a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a> = CurrentGroup.<a class="code" href="structOutlinableGroup.html#a75bbc3b17e5b70e0e1fac394f26b5c11">Regions</a>[0]-&gt;Candidate;</div>
<div class="line"><a name="l01686"></a><span class="lineno"> 1686</span>&#160;        <a class="code" href="classllvm_1_1OptimizationRemarkMissed.html">OptimizationRemarkMissed</a> <a class="code" href="namespacellvm_1_1RISCVFenceField.html#a147be9e9780c1e33363ea572d4c7b25fa1835091d83e0e052cd1a32c99b2be731">R</a>(<a class="code" href="IROutliner_8cpp.html#ad78e062f62e0d6e453941fb4ca843e4d">DEBUG_TYPE</a>, <span class="stringliteral">&quot;WouldNotDecreaseSize&quot;</span>,</div>
<div class="line"><a name="l01687"></a><span class="lineno"> 1687</span>&#160;                                   <a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a>-&gt;frontInstruction());</div>
<div class="line"><a name="l01688"></a><span class="lineno"> 1688</span>&#160;        <a class="code" href="namespacellvm_1_1RISCVFenceField.html#a147be9e9780c1e33363ea572d4c7b25fa1835091d83e0e052cd1a32c99b2be731">R</a> &lt;&lt; <span class="stringliteral">&quot;did not outline &quot;</span></div>
<div class="line"><a name="l01689"></a><span class="lineno"> 1689</span>&#160;          &lt;&lt; <a class="code" href="namespacellvm_1_1ore.html#a8f5533240c6722d987a2443cba42019d">ore::NV</a>(<a class="code" href="namespacellvm.html#a13c1b5a253da5da49ce33d03dc1efc07">std::to_string</a>(CurrentGroup.<a class="code" href="structOutlinableGroup.html#a75bbc3b17e5b70e0e1fac394f26b5c11">Regions</a>.size()))</div>
<div class="line"><a name="l01690"></a><span class="lineno"> 1690</span>&#160;          &lt;&lt; <span class="stringliteral">&quot; regions due to estimated increase of &quot;</span></div>
<div class="line"><a name="l01691"></a><span class="lineno"> 1691</span>&#160;          &lt;&lt; <a class="code" href="namespacellvm_1_1ore.html#a8f5533240c6722d987a2443cba42019d">ore::NV</a>(<span class="stringliteral">&quot;InstructionIncrease&quot;</span>,</div>
<div class="line"><a name="l01692"></a><span class="lineno"> 1692</span>&#160;                     CurrentGroup.<a class="code" href="structOutlinableGroup.html#a69a17456977b7d8eb5795eb51870d41c">Cost</a> - CurrentGroup.<a class="code" href="structOutlinableGroup.html#ae0f753d38671d8138865d30d8cf5720b">Benefit</a>)</div>
<div class="line"><a name="l01693"></a><span class="lineno"> 1693</span>&#160;          &lt;&lt; <span class="stringliteral">&quot; instructions at locations &quot;</span>;</div>
<div class="line"><a name="l01694"></a><span class="lineno"> 1694</span>&#160;        <a class="code" href="namespacellvm.html#a2145da5bde7663d745e9c3ade392809f">interleave</a>(</div>
<div class="line"><a name="l01695"></a><span class="lineno"> 1695</span>&#160;            CurrentGroup.<a class="code" href="structOutlinableGroup.html#a75bbc3b17e5b70e0e1fac394f26b5c11">Regions</a>.begin(), CurrentGroup.<a class="code" href="structOutlinableGroup.html#a75bbc3b17e5b70e0e1fac394f26b5c11">Regions</a>.end(),</div>
<div class="line"><a name="l01696"></a><span class="lineno"> 1696</span>&#160;            [&amp;<a class="code" href="namespacellvm_1_1RISCVFenceField.html#a147be9e9780c1e33363ea572d4c7b25fa1835091d83e0e052cd1a32c99b2be731">R</a>](<a class="code" href="structllvm_1_1OutlinableRegion.html">OutlinableRegion</a> *<a class="code" href="classllvm_1_1Region.html">Region</a>) {</div>
<div class="line"><a name="l01697"></a><span class="lineno"> 1697</span>&#160;              R &lt;&lt; ore::NV(</div>
<div class="line"><a name="l01698"></a><span class="lineno"> 1698</span>&#160;                  <span class="stringliteral">&quot;DebugLoc&quot;</span>,</div>
<div class="line"><a name="l01699"></a><span class="lineno"> 1699</span>&#160;                  Region-&gt;Candidate-&gt;frontInstruction()-&gt;getDebugLoc());</div>
<div class="line"><a name="l01700"></a><span class="lineno"> 1700</span>&#160;            },</div>
<div class="line"><a name="l01701"></a><span class="lineno"> 1701</span>&#160;            [&amp;<a class="code" href="namespacellvm_1_1RISCVFenceField.html#a147be9e9780c1e33363ea572d4c7b25fa1835091d83e0e052cd1a32c99b2be731">R</a>]() { R &lt;&lt; <span class="stringliteral">&quot; &quot;</span>; });</div>
<div class="line"><a name="l01702"></a><span class="lineno"> 1702</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="namespacellvm_1_1RISCVFenceField.html#a147be9e9780c1e33363ea572d4c7b25fa1835091d83e0e052cd1a32c99b2be731">R</a>;</div>
<div class="line"><a name="l01703"></a><span class="lineno"> 1703</span>&#160;      });</div>
<div class="line"><a name="l01704"></a><span class="lineno"> 1704</span>&#160;      <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l01705"></a><span class="lineno"> 1705</span>&#160;    }</div>
<div class="line"><a name="l01706"></a><span class="lineno"> 1706</span>&#160; </div>
<div class="line"><a name="l01707"></a><span class="lineno"> 1707</span>&#160;    <a class="code" href="Debug_8h.html#a08efc68d15935eb8889400a46c3749ba">LLVM_DEBUG</a>(<a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <span class="stringliteral">&quot;Outlining regions with cost &quot;</span> &lt;&lt; CurrentGroup.<a class="code" href="structOutlinableGroup.html#a69a17456977b7d8eb5795eb51870d41c">Cost</a></div>
<div class="line"><a name="l01708"></a><span class="lineno"> 1708</span>&#160;                      &lt;&lt; <span class="stringliteral">&quot; and benefit &quot;</span> &lt;&lt; CurrentGroup.<a class="code" href="structOutlinableGroup.html#ae0f753d38671d8138865d30d8cf5720b">Benefit</a> &lt;&lt; <span class="stringliteral">&quot;\n&quot;</span>);</div>
<div class="line"><a name="l01709"></a><span class="lineno"> 1709</span>&#160; </div>
<div class="line"><a name="l01710"></a><span class="lineno"> 1710</span>&#160;    <span class="comment">// Create functions out of all the sections, and mark them as outlined.</span></div>
<div class="line"><a name="l01711"></a><span class="lineno"> 1711</span>&#160;    OutlinedRegions.clear();</div>
<div class="line"><a name="l01712"></a><span class="lineno"> 1712</span>&#160;    <span class="keywordflow">for</span> (<a class="code" href="structllvm_1_1OutlinableRegion.html">OutlinableRegion</a> *OS : CurrentGroup.<a class="code" href="structOutlinableGroup.html#a75bbc3b17e5b70e0e1fac394f26b5c11">Regions</a>) {</div>
<div class="line"><a name="l01713"></a><span class="lineno"> 1713</span>&#160;      <span class="keywordtype">bool</span> FunctionOutlined = extractSection(*OS);</div>
<div class="line"><a name="l01714"></a><span class="lineno"> 1714</span>&#160;      <span class="keywordflow">if</span> (FunctionOutlined) {</div>
<div class="line"><a name="l01715"></a><span class="lineno"> 1715</span>&#160;        <span class="keywordtype">unsigned</span> StartIdx = OS-&gt;<a class="code" href="structllvm_1_1OutlinableRegion.html#a9db9e67d9d8c8f5c0cd2b8a64915f884">Candidate</a>-&gt;<a class="code" href="classllvm_1_1IRSimilarity_1_1IRSimilarityCandidate.html#ada960ccf6a96ca62ce5db3af1b7bf7f5">getStartIdx</a>();</div>
<div class="line"><a name="l01716"></a><span class="lineno"> 1716</span>&#160;        <span class="keywordtype">unsigned</span> EndIdx = OS-&gt;<a class="code" href="structllvm_1_1OutlinableRegion.html#a9db9e67d9d8c8f5c0cd2b8a64915f884">Candidate</a>-&gt;<a class="code" href="classllvm_1_1IRSimilarity_1_1IRSimilarityCandidate.html#a5fd2e1a8a3658307e8c0d87a153d8c24">getEndIdx</a>();</div>
<div class="line"><a name="l01717"></a><span class="lineno"> 1717</span>&#160;        <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> Idx = StartIdx; Idx &lt;= EndIdx; Idx++)</div>
<div class="line"><a name="l01718"></a><span class="lineno"> 1718</span>&#160;          Outlined.insert(Idx);</div>
<div class="line"><a name="l01719"></a><span class="lineno"> 1719</span>&#160; </div>
<div class="line"><a name="l01720"></a><span class="lineno"> 1720</span>&#160;        OutlinedRegions.push_back(OS);</div>
<div class="line"><a name="l01721"></a><span class="lineno"> 1721</span>&#160;      }</div>
<div class="line"><a name="l01722"></a><span class="lineno"> 1722</span>&#160;    }</div>
<div class="line"><a name="l01723"></a><span class="lineno"> 1723</span>&#160; </div>
<div class="line"><a name="l01724"></a><span class="lineno"> 1724</span>&#160;    <a class="code" href="Debug_8h.html#a08efc68d15935eb8889400a46c3749ba">LLVM_DEBUG</a>(<a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <span class="stringliteral">&quot;Outlined &quot;</span> &lt;&lt; OutlinedRegions.size()</div>
<div class="line"><a name="l01725"></a><span class="lineno"> 1725</span>&#160;                      &lt;&lt; <span class="stringliteral">&quot; with benefit &quot;</span> &lt;&lt; CurrentGroup.<a class="code" href="structOutlinableGroup.html#ae0f753d38671d8138865d30d8cf5720b">Benefit</a></div>
<div class="line"><a name="l01726"></a><span class="lineno"> 1726</span>&#160;                      &lt;&lt; <span class="stringliteral">&quot; and cost &quot;</span> &lt;&lt; CurrentGroup.<a class="code" href="structOutlinableGroup.html#a69a17456977b7d8eb5795eb51870d41c">Cost</a> &lt;&lt; <span class="stringliteral">&quot;\n&quot;</span>);</div>
<div class="line"><a name="l01727"></a><span class="lineno"> 1727</span>&#160; </div>
<div class="line"><a name="l01728"></a><span class="lineno"> 1728</span>&#160;    CurrentGroup.<a class="code" href="structOutlinableGroup.html#a75bbc3b17e5b70e0e1fac394f26b5c11">Regions</a> = <a class="code" href="lib_2Target_2ARM_2README_8txt.html#ad3a99906764c35b2694ae90fa57744a5">std::move</a>(OutlinedRegions);</div>
<div class="line"><a name="l01729"></a><span class="lineno"> 1729</span>&#160; </div>
<div class="line"><a name="l01730"></a><span class="lineno"> 1730</span>&#160;    <span class="keywordflow">if</span> (CurrentGroup.<a class="code" href="structOutlinableGroup.html#a75bbc3b17e5b70e0e1fac394f26b5c11">Regions</a>.empty())</div>
<div class="line"><a name="l01731"></a><span class="lineno"> 1731</span>&#160;      <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l01732"></a><span class="lineno"> 1732</span>&#160; </div>
<div class="line"><a name="l01733"></a><span class="lineno"> 1733</span>&#160;    <a class="code" href="classllvm_1_1OptimizationRemarkEmitter.html">OptimizationRemarkEmitter</a> &amp;ORE =</div>
<div class="line"><a name="l01734"></a><span class="lineno"> 1734</span>&#160;        getORE(*CurrentGroup.<a class="code" href="structOutlinableGroup.html#a75bbc3b17e5b70e0e1fac394f26b5c11">Regions</a>[0]-&gt;Call-&gt;getFunction());</div>
<div class="line"><a name="l01735"></a><span class="lineno"> 1735</span>&#160;    ORE.<a class="code" href="classllvm_1_1OptimizationRemarkEmitter.html#aae6a98aea85aa3af87357cc5448db499">emit</a>([&amp;]() {</div>
<div class="line"><a name="l01736"></a><span class="lineno"> 1736</span>&#160;      <a class="code" href="classllvm_1_1IRSimilarity_1_1IRSimilarityCandidate.html">IRSimilarityCandidate</a> *<a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a> = CurrentGroup.<a class="code" href="structOutlinableGroup.html#a75bbc3b17e5b70e0e1fac394f26b5c11">Regions</a>[0]-&gt;Candidate;</div>
<div class="line"><a name="l01737"></a><span class="lineno"> 1737</span>&#160;      <a class="code" href="classllvm_1_1OptimizationRemark.html">OptimizationRemark</a> <a class="code" href="namespacellvm_1_1RISCVFenceField.html#a147be9e9780c1e33363ea572d4c7b25fa1835091d83e0e052cd1a32c99b2be731">R</a>(<a class="code" href="IROutliner_8cpp.html#ad78e062f62e0d6e453941fb4ca843e4d">DEBUG_TYPE</a>, <span class="stringliteral">&quot;Outlined&quot;</span>, <a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a>-&gt;front()-&gt;Inst);</div>
<div class="line"><a name="l01738"></a><span class="lineno"> 1738</span>&#160;      <a class="code" href="namespacellvm_1_1RISCVFenceField.html#a147be9e9780c1e33363ea572d4c7b25fa1835091d83e0e052cd1a32c99b2be731">R</a> &lt;&lt; <span class="stringliteral">&quot;outlined &quot;</span> &lt;&lt; <a class="code" href="namespacellvm_1_1ore.html#a8f5533240c6722d987a2443cba42019d">ore::NV</a>(<a class="code" href="namespacellvm.html#a13c1b5a253da5da49ce33d03dc1efc07">std::to_string</a>(CurrentGroup.<a class="code" href="structOutlinableGroup.html#a75bbc3b17e5b70e0e1fac394f26b5c11">Regions</a>.size()))</div>
<div class="line"><a name="l01739"></a><span class="lineno"> 1739</span>&#160;        &lt;&lt; <span class="stringliteral">&quot; regions with decrease of &quot;</span></div>
<div class="line"><a name="l01740"></a><span class="lineno"> 1740</span>&#160;        &lt;&lt; <a class="code" href="namespacellvm_1_1ore.html#a8f5533240c6722d987a2443cba42019d">ore::NV</a>(<span class="stringliteral">&quot;Benefit&quot;</span>, CurrentGroup.<a class="code" href="structOutlinableGroup.html#ae0f753d38671d8138865d30d8cf5720b">Benefit</a> - CurrentGroup.<a class="code" href="structOutlinableGroup.html#a69a17456977b7d8eb5795eb51870d41c">Cost</a>)</div>
<div class="line"><a name="l01741"></a><span class="lineno"> 1741</span>&#160;        &lt;&lt; <span class="stringliteral">&quot; instructions at locations &quot;</span>;</div>
<div class="line"><a name="l01742"></a><span class="lineno"> 1742</span>&#160;      <a class="code" href="namespacellvm.html#a2145da5bde7663d745e9c3ade392809f">interleave</a>(</div>
<div class="line"><a name="l01743"></a><span class="lineno"> 1743</span>&#160;          CurrentGroup.<a class="code" href="structOutlinableGroup.html#a75bbc3b17e5b70e0e1fac394f26b5c11">Regions</a>.begin(), CurrentGroup.<a class="code" href="structOutlinableGroup.html#a75bbc3b17e5b70e0e1fac394f26b5c11">Regions</a>.end(),</div>
<div class="line"><a name="l01744"></a><span class="lineno"> 1744</span>&#160;          [&amp;<a class="code" href="namespacellvm_1_1RISCVFenceField.html#a147be9e9780c1e33363ea572d4c7b25fa1835091d83e0e052cd1a32c99b2be731">R</a>](<a class="code" href="structllvm_1_1OutlinableRegion.html">OutlinableRegion</a> *<a class="code" href="classllvm_1_1Region.html">Region</a>) {</div>
<div class="line"><a name="l01745"></a><span class="lineno"> 1745</span>&#160;            R &lt;&lt; ore::NV(<span class="stringliteral">&quot;DebugLoc&quot;</span>,</div>
<div class="line"><a name="l01746"></a><span class="lineno"> 1746</span>&#160;                         Region-&gt;Candidate-&gt;frontInstruction()-&gt;getDebugLoc());</div>
<div class="line"><a name="l01747"></a><span class="lineno"> 1747</span>&#160;          },</div>
<div class="line"><a name="l01748"></a><span class="lineno"> 1748</span>&#160;          [&amp;<a class="code" href="namespacellvm_1_1RISCVFenceField.html#a147be9e9780c1e33363ea572d4c7b25fa1835091d83e0e052cd1a32c99b2be731">R</a>]() { R &lt;&lt; <span class="stringliteral">&quot; &quot;</span>; });</div>
<div class="line"><a name="l01749"></a><span class="lineno"> 1749</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="namespacellvm_1_1RISCVFenceField.html#a147be9e9780c1e33363ea572d4c7b25fa1835091d83e0e052cd1a32c99b2be731">R</a>;</div>
<div class="line"><a name="l01750"></a><span class="lineno"> 1750</span>&#160;    });</div>
<div class="line"><a name="l01751"></a><span class="lineno"> 1751</span>&#160; </div>
<div class="line"><a name="l01752"></a><span class="lineno"> 1752</span>&#160;    deduplicateExtractedSections(M, CurrentGroup, FuncsToRemove,</div>
<div class="line"><a name="l01753"></a><span class="lineno"> 1753</span>&#160;                                 OutlinedFunctionNum);</div>
<div class="line"><a name="l01754"></a><span class="lineno"> 1754</span>&#160;  }</div>
<div class="line"><a name="l01755"></a><span class="lineno"> 1755</span>&#160; </div>
<div class="line"><a name="l01756"></a><span class="lineno"> 1756</span>&#160;  <span class="keywordflow">for</span> (<a class="code" href="classllvm_1_1Function.html">Function</a> *<a class="code" href="MD5_8cpp.html#a96d73bbd7af15cb1fc38c3f4a3bd82e9">F</a> : FuncsToRemove)</div>
<div class="line"><a name="l01757"></a><span class="lineno"> 1757</span>&#160;    <a class="code" href="MD5_8cpp.html#a96d73bbd7af15cb1fc38c3f4a3bd82e9">F</a>-&gt;eraseFromParent();</div>
<div class="line"><a name="l01758"></a><span class="lineno"> 1758</span>&#160; </div>
<div class="line"><a name="l01759"></a><span class="lineno"> 1759</span>&#160;  <span class="keywordflow">return</span> OutlinedFunctionNum;</div>
<div class="line"><a name="l01760"></a><span class="lineno"> 1760</span>&#160;}</div>
<div class="line"><a name="l01761"></a><span class="lineno"> 1761</span>&#160; </div>
<div class="line"><a name="l01762"></a><span class="lineno"><a class="line" href="classllvm_1_1IROutliner.html#adc7588dad82317423eb5949ca4bac107"> 1762</a></span>&#160;<span class="keywordtype">bool</span> <a class="code" href="classllvm_1_1IROutliner.html#adc7588dad82317423eb5949ca4bac107">IROutliner::run</a>(<a class="code" href="classllvm_1_1Module.html">Module</a> &amp;M) {</div>
<div class="line"><a name="l01763"></a><span class="lineno"> 1763</span>&#160;  CostModel = !<a class="code" href="IROutliner_8cpp.html#a05efe971c4e940f01a5e34bc41cd602a">NoCostModel</a>;</div>
<div class="line"><a name="l01764"></a><span class="lineno"> 1764</span>&#160;  OutlineFromLinkODRs = <a class="code" href="IROutliner_8cpp.html#a21da4953c61d301ca9402aed0ed89bd2">EnableLinkOnceODRIROutlining</a>;</div>
<div class="line"><a name="l01765"></a><span class="lineno"> 1765</span>&#160; </div>
<div class="line"><a name="l01766"></a><span class="lineno"> 1766</span>&#160;  <span class="keywordflow">return</span> doOutline(<a class="code" href="lib_2Target_2X86_2README_8txt.html#ac88fe1d3a61b056a4f64fbbb156a62ff">M</a>) &gt; 0;</div>
<div class="line"><a name="l01767"></a><span class="lineno"> 1767</span>&#160;}</div>
<div class="line"><a name="l01768"></a><span class="lineno"> 1768</span>&#160; </div>
<div class="line"><a name="l01769"></a><span class="lineno"> 1769</span>&#160;<span class="comment">// Pass Manager Boilerplate</span></div>
<div class="line"><a name="l01770"></a><span class="lineno"><a class="line" href="classIROutlinerLegacyPass.html"> 1770</a></span>&#160;<span class="keyword">class </span><a class="code" href="classIROutlinerLegacyPass.html">IROutlinerLegacyPass</a> : <span class="keyword">public</span> <a class="code" href="classllvm_1_1ModulePass.html">ModulePass</a> {</div>
<div class="line"><a name="l01771"></a><span class="lineno"> 1771</span>&#160;<span class="keyword">public</span>:</div>
<div class="line"><a name="l01772"></a><span class="lineno"><a class="line" href="classIROutlinerLegacyPass.html#a89fe9cd3461afcf0f2ed3db7707bec16"> 1772</a></span>&#160;  <span class="keyword">static</span> <span class="keywordtype">char</span> <a class="code" href="classIROutlinerLegacyPass.html#a89fe9cd3461afcf0f2ed3db7707bec16">ID</a>;</div>
<div class="line"><a name="l01773"></a><span class="lineno"><a class="line" href="classIROutlinerLegacyPass.html#aa4c55fc8a11986f827634c1903621399"> 1773</a></span>&#160;  <a class="code" href="classIROutlinerLegacyPass.html#aa4c55fc8a11986f827634c1903621399">IROutlinerLegacyPass</a>() : <a class="code" href="classllvm_1_1ModulePass.html">ModulePass</a>(<a class="code" href="namespacellvm_1_1Intrinsic.html#a80add6b3b1cdaec560907995127adc16">ID</a>) {</div>
<div class="line"><a name="l01774"></a><span class="lineno"> 1774</span>&#160;    <a class="code" href="namespacellvm.html#a6063a4c748b0b601e4bf72a9b26cc35b">initializeIROutlinerLegacyPassPass</a>(*<a class="code" href="classllvm_1_1PassRegistry.html#a05a729900b76c89e808c6c3094921b2f">PassRegistry::getPassRegistry</a>());</div>
<div class="line"><a name="l01775"></a><span class="lineno"> 1775</span>&#160;  }</div>
<div class="line"><a name="l01776"></a><span class="lineno"> 1776</span>&#160; </div>
<div class="line"><a name="l01777"></a><span class="lineno"><a class="line" href="classIROutlinerLegacyPass.html#a53c105eed24d29de21cbfcfcd76cac75"> 1777</a></span>&#160;  <span class="keywordtype">void</span> <a class="code" href="classIROutlinerLegacyPass.html#a53c105eed24d29de21cbfcfcd76cac75">getAnalysisUsage</a>(<a class="code" href="classllvm_1_1AnalysisUsage.html">AnalysisUsage</a> &amp;AU)<span class="keyword"> const override </span>{</div>
<div class="line"><a name="l01778"></a><span class="lineno"> 1778</span>&#160;    AU.<a class="code" href="classllvm_1_1AnalysisUsage.html#ae5c60fd282ee894c87ea02c3f0fcb6d0">addRequired</a>&lt;<a class="code" href="classllvm_1_1OptimizationRemarkEmitterWrapperPass.html">OptimizationRemarkEmitterWrapperPass</a>&gt;();</div>
<div class="line"><a name="l01779"></a><span class="lineno"> 1779</span>&#160;    AU.<a class="code" href="classllvm_1_1AnalysisUsage.html#ae5c60fd282ee894c87ea02c3f0fcb6d0">addRequired</a>&lt;<a class="code" href="classllvm_1_1TargetTransformInfoWrapperPass.html">TargetTransformInfoWrapperPass</a>&gt;();</div>
<div class="line"><a name="l01780"></a><span class="lineno"> 1780</span>&#160;    AU.<a class="code" href="classllvm_1_1AnalysisUsage.html#ae5c60fd282ee894c87ea02c3f0fcb6d0">addRequired</a>&lt;<a class="code" href="classllvm_1_1IRSimilarityIdentifierWrapperPass.html">IRSimilarityIdentifierWrapperPass</a>&gt;();</div>
<div class="line"><a name="l01781"></a><span class="lineno"> 1781</span>&#160;  }</div>
<div class="line"><a name="l01782"></a><span class="lineno"> 1782</span>&#160; </div>
<div class="line"><a name="l01783"></a><span class="lineno"> 1783</span>&#160;  <span class="keywordtype">bool</span> runOnModule(<a class="code" href="classllvm_1_1Module.html">Module</a> &amp;M) <span class="keyword">override</span>;</div>
<div class="line"><a name="l01784"></a><span class="lineno"> 1784</span>&#160;};</div>
<div class="line"><a name="l01785"></a><span class="lineno"> 1785</span>&#160; </div>
<div class="line"><a name="l01786"></a><span class="lineno"><a class="line" href="classIROutlinerLegacyPass.html#a07b783afb6af1190c44efdb4c3b28690"> 1786</a></span>&#160;<span class="keywordtype">bool</span> <a class="code" href="classIROutlinerLegacyPass.html#a07b783afb6af1190c44efdb4c3b28690">IROutlinerLegacyPass::runOnModule</a>(<a class="code" href="classllvm_1_1Module.html">Module</a> &amp;M) {</div>
<div class="line"><a name="l01787"></a><span class="lineno"> 1787</span>&#160;  <span class="keywordflow">if</span> (skipModule(<a class="code" href="lib_2Target_2X86_2README_8txt.html#ac88fe1d3a61b056a4f64fbbb156a62ff">M</a>))</div>
<div class="line"><a name="l01788"></a><span class="lineno"> 1788</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l01789"></a><span class="lineno"> 1789</span>&#160; </div>
<div class="line"><a name="l01790"></a><span class="lineno"> 1790</span>&#160;  std::unique_ptr&lt;OptimizationRemarkEmitter&gt; ORE;</div>
<div class="line"><a name="l01791"></a><span class="lineno"> 1791</span>&#160;  <span class="keyword">auto</span> GORE = [&amp;ORE](<a class="code" href="classllvm_1_1Function.html">Function</a> &amp;<a class="code" href="MD5_8cpp.html#a96d73bbd7af15cb1fc38c3f4a3bd82e9">F</a>) -&gt; <a class="code" href="classllvm_1_1OptimizationRemarkEmitter.html">OptimizationRemarkEmitter</a> &amp; {</div>
<div class="line"><a name="l01792"></a><span class="lineno"> 1792</span>&#160;    ORE.reset(<span class="keyword">new</span> <a class="code" href="classllvm_1_1OptimizationRemarkEmitter.html">OptimizationRemarkEmitter</a>(&amp;<a class="code" href="MD5_8cpp.html#a96d73bbd7af15cb1fc38c3f4a3bd82e9">F</a>));</div>
<div class="line"><a name="l01793"></a><span class="lineno"> 1793</span>&#160;    <span class="keywordflow">return</span> *ORE.get();</div>
<div class="line"><a name="l01794"></a><span class="lineno"> 1794</span>&#160;  };</div>
<div class="line"><a name="l01795"></a><span class="lineno"> 1795</span>&#160; </div>
<div class="line"><a name="l01796"></a><span class="lineno"> 1796</span>&#160;  <span class="keyword">auto</span> GTTI = [<span class="keyword">this</span>](<a class="code" href="classllvm_1_1Function.html">Function</a> &amp;<a class="code" href="MD5_8cpp.html#a96d73bbd7af15cb1fc38c3f4a3bd82e9">F</a>) -&gt; <a class="code" href="classllvm_1_1TargetTransformInfo.html">TargetTransformInfo</a> &amp; {</div>
<div class="line"><a name="l01797"></a><span class="lineno"> 1797</span>&#160;    <span class="keywordflow">return</span> this-&gt;getAnalysis&lt;TargetTransformInfoWrapperPass&gt;().getTTI(<a class="code" href="MD5_8cpp.html#a96d73bbd7af15cb1fc38c3f4a3bd82e9">F</a>);</div>
<div class="line"><a name="l01798"></a><span class="lineno"> 1798</span>&#160;  };</div>
<div class="line"><a name="l01799"></a><span class="lineno"> 1799</span>&#160; </div>
<div class="line"><a name="l01800"></a><span class="lineno"> 1800</span>&#160;  <span class="keyword">auto</span> GIRSI = [<span class="keyword">this</span>](<a class="code" href="classllvm_1_1Module.html">Module</a> &amp;) -&gt; <a class="code" href="classllvm_1_1IRSimilarity_1_1IRSimilarityIdentifier.html">IRSimilarityIdentifier</a> &amp; {</div>
<div class="line"><a name="l01801"></a><span class="lineno"> 1801</span>&#160;    <span class="keywordflow">return</span> this-&gt;getAnalysis&lt;IRSimilarityIdentifierWrapperPass&gt;().getIRSI();</div>
<div class="line"><a name="l01802"></a><span class="lineno"> 1802</span>&#160;  };</div>
<div class="line"><a name="l01803"></a><span class="lineno"> 1803</span>&#160; </div>
<div class="line"><a name="l01804"></a><span class="lineno"> 1804</span>&#160;  <span class="keywordflow">return</span> <a class="code" href="classllvm_1_1IROutliner.html">IROutliner</a>(GTTI, GIRSI, GORE).<a class="code" href="classllvm_1_1IROutliner.html#adc7588dad82317423eb5949ca4bac107">run</a>(<a class="code" href="lib_2Target_2X86_2README_8txt.html#ac88fe1d3a61b056a4f64fbbb156a62ff">M</a>);</div>
<div class="line"><a name="l01805"></a><span class="lineno"> 1805</span>&#160;}</div>
<div class="line"><a name="l01806"></a><span class="lineno"> 1806</span>&#160; </div>
<div class="line"><a name="l01807"></a><span class="lineno"><a class="line" href="classllvm_1_1IROutlinerPass.html#a5b9a8fe2c3b6834817b2c12b08441cff"> 1807</a></span>&#160;<a class="code" href="classllvm_1_1PreservedAnalyses.html">PreservedAnalyses</a> <a class="code" href="classllvm_1_1IROutlinerPass.html#a5b9a8fe2c3b6834817b2c12b08441cff">IROutlinerPass::run</a>(<a class="code" href="classllvm_1_1Module.html">Module</a> &amp;M, <a class="code" href="classllvm_1_1AnalysisManager.html">ModuleAnalysisManager</a> &amp;AM) {</div>
<div class="line"><a name="l01808"></a><span class="lineno"> 1808</span>&#160;  <span class="keyword">auto</span> &amp;<a class="code" href="PassBuilderBindings_8cpp.html#a83c7e5ca51099e4efa895791a02fb0ed">FAM</a> = AM.<a class="code" href="classllvm_1_1AnalysisManager.html#ab9d3d5412c20747fd0110a046604f09a">getResult</a>&lt;<a class="code" href="classllvm_1_1InnerAnalysisManagerProxy.html">FunctionAnalysisManagerModuleProxy</a>&gt;(<a class="code" href="lib_2Target_2X86_2README_8txt.html#ac88fe1d3a61b056a4f64fbbb156a62ff">M</a>).getManager();</div>
<div class="line"><a name="l01809"></a><span class="lineno"> 1809</span>&#160; </div>
<div class="line"><a name="l01810"></a><span class="lineno"> 1810</span>&#160;  <a class="code" href="MemDepPrinter_8cpp.html#a470d8721ad7c3b718e9daeabdaeb4700">std::function</a>&lt;<a class="code" href="classllvm_1_1TargetTransformInfo.html">TargetTransformInfo</a> &amp;(<a class="code" href="classllvm_1_1Function.html">Function</a> &amp;)&gt; GTTI =</div>
<div class="line"><a name="l01811"></a><span class="lineno"> 1811</span>&#160;      [&amp;<a class="code" href="PassBuilderBindings_8cpp.html#a83c7e5ca51099e4efa895791a02fb0ed">FAM</a>](<a class="code" href="classllvm_1_1Function.html">Function</a> &amp;<a class="code" href="MD5_8cpp.html#a96d73bbd7af15cb1fc38c3f4a3bd82e9">F</a>) -&gt; <a class="code" href="classllvm_1_1TargetTransformInfo.html">TargetTransformInfo</a> &amp; {</div>
<div class="line"><a name="l01812"></a><span class="lineno"> 1812</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="PassBuilderBindings_8cpp.html#a83c7e5ca51099e4efa895791a02fb0ed">FAM</a>.<a class="code" href="classllvm_1_1AnalysisManager.html#ab9d3d5412c20747fd0110a046604f09a">getResult</a>&lt;<a class="code" href="classllvm_1_1TargetIRAnalysis.html">TargetIRAnalysis</a>&gt;(<a class="code" href="MD5_8cpp.html#a96d73bbd7af15cb1fc38c3f4a3bd82e9">F</a>);</div>
<div class="line"><a name="l01813"></a><span class="lineno"> 1813</span>&#160;  };</div>
<div class="line"><a name="l01814"></a><span class="lineno"> 1814</span>&#160; </div>
<div class="line"><a name="l01815"></a><span class="lineno"> 1815</span>&#160;  <a class="code" href="MemDepPrinter_8cpp.html#a470d8721ad7c3b718e9daeabdaeb4700">std::function</a>&lt;<a class="code" href="classllvm_1_1IRSimilarity_1_1IRSimilarityIdentifier.html">IRSimilarityIdentifier</a> &amp;(<a class="code" href="classllvm_1_1Module.html">Module</a> &amp;)&gt; GIRSI =</div>
<div class="line"><a name="l01816"></a><span class="lineno"> 1816</span>&#160;      [&amp;AM](<a class="code" href="classllvm_1_1Module.html">Module</a> &amp;<a class="code" href="lib_2Target_2X86_2README_8txt.html#ac88fe1d3a61b056a4f64fbbb156a62ff">M</a>) -&gt; <a class="code" href="classllvm_1_1IRSimilarity_1_1IRSimilarityIdentifier.html">IRSimilarityIdentifier</a> &amp; {</div>
<div class="line"><a name="l01817"></a><span class="lineno"> 1817</span>&#160;    <span class="keywordflow">return</span> AM.<a class="code" href="classllvm_1_1AnalysisManager.html#ab9d3d5412c20747fd0110a046604f09a">getResult</a>&lt;<a class="code" href="classllvm_1_1IRSimilarityAnalysis.html">IRSimilarityAnalysis</a>&gt;(<a class="code" href="lib_2Target_2X86_2README_8txt.html#ac88fe1d3a61b056a4f64fbbb156a62ff">M</a>);</div>
<div class="line"><a name="l01818"></a><span class="lineno"> 1818</span>&#160;  };</div>
<div class="line"><a name="l01819"></a><span class="lineno"> 1819</span>&#160; </div>
<div class="line"><a name="l01820"></a><span class="lineno"> 1820</span>&#160;  std::unique_ptr&lt;OptimizationRemarkEmitter&gt; ORE;</div>
<div class="line"><a name="l01821"></a><span class="lineno"> 1821</span>&#160;  <a class="code" href="MemDepPrinter_8cpp.html#a470d8721ad7c3b718e9daeabdaeb4700">std::function</a>&lt;<a class="code" href="classllvm_1_1OptimizationRemarkEmitter.html">OptimizationRemarkEmitter</a> &amp;(<a class="code" href="classllvm_1_1Function.html">Function</a> &amp;)&gt; GORE =</div>
<div class="line"><a name="l01822"></a><span class="lineno"> 1822</span>&#160;      [&amp;ORE](<a class="code" href="classllvm_1_1Function.html">Function</a> &amp;<a class="code" href="MD5_8cpp.html#a96d73bbd7af15cb1fc38c3f4a3bd82e9">F</a>) -&gt; <a class="code" href="classllvm_1_1OptimizationRemarkEmitter.html">OptimizationRemarkEmitter</a> &amp; {</div>
<div class="line"><a name="l01823"></a><span class="lineno"> 1823</span>&#160;    ORE.reset(<span class="keyword">new</span> <a class="code" href="classllvm_1_1OptimizationRemarkEmitter.html">OptimizationRemarkEmitter</a>(&amp;<a class="code" href="MD5_8cpp.html#a96d73bbd7af15cb1fc38c3f4a3bd82e9">F</a>));</div>
<div class="line"><a name="l01824"></a><span class="lineno"> 1824</span>&#160;    <span class="keywordflow">return</span> *ORE.get();</div>
<div class="line"><a name="l01825"></a><span class="lineno"> 1825</span>&#160;  };</div>
<div class="line"><a name="l01826"></a><span class="lineno"> 1826</span>&#160; </div>
<div class="line"><a name="l01827"></a><span class="lineno"> 1827</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1IROutliner.html">IROutliner</a>(GTTI, GIRSI, GORE).<a class="code" href="classllvm_1_1IROutliner.html#adc7588dad82317423eb5949ca4bac107">run</a>(<a class="code" href="lib_2Target_2X86_2README_8txt.html#ac88fe1d3a61b056a4f64fbbb156a62ff">M</a>))</div>
<div class="line"><a name="l01828"></a><span class="lineno"> 1828</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="classllvm_1_1PreservedAnalyses.html#a03797a73044a81cbc6a3409d6c72ee8f">PreservedAnalyses::none</a>();</div>
<div class="line"><a name="l01829"></a><span class="lineno"> 1829</span>&#160;  <span class="keywordflow">return</span> <a class="code" href="classllvm_1_1PreservedAnalyses.html#a1258a1ff55557c27684010ebd7283712">PreservedAnalyses::all</a>();</div>
<div class="line"><a name="l01830"></a><span class="lineno"> 1830</span>&#160;}</div>
<div class="line"><a name="l01831"></a><span class="lineno"> 1831</span>&#160; </div>
<div class="line"><a name="l01832"></a><span class="lineno"> 1832</span>&#160;<span class="keywordtype">char</span> <a class="code" href="classIROutlinerLegacyPass.html#a89fe9cd3461afcf0f2ed3db7707bec16">IROutlinerLegacyPass::ID</a> = 0;</div>
<div class="line"><a name="l01833"></a><span class="lineno"><a class="line" href="IROutliner_8cpp.html#a887362135c31af6ca59ade2ff6fc1047"> 1833</a></span>&#160;<a class="code" href="IROutliner_8cpp.html#a887362135c31af6ca59ade2ff6fc1047">INITIALIZE_PASS_BEGIN</a>(<a class="code" href="classIROutlinerLegacyPass.html">IROutlinerLegacyPass</a>, <span class="stringliteral">&quot;iroutliner&quot;</span>, <span class="stringliteral">&quot;IR Outliner&quot;</span>, <span class="keyword">false</span>,</div>
<div class="line"><a name="l01834"></a><span class="lineno"> 1834</span>&#160;                      <span class="keyword">false</span>)</div>
<div class="line"><a name="l01835"></a><span class="lineno"> 1835</span>&#160;<a class="code" href="SVEIntrinsicOpts_8cpp.html#a2bb87eb1bcbc74783a83ae945eb8fa36">INITIALIZE_PASS_DEPENDENCY</a>(<a class="code" href="classllvm_1_1IRSimilarityIdentifierWrapperPass.html">IRSimilarityIdentifierWrapperPass</a>)</div>
<div class="line"><a name="l01836"></a><span class="lineno"> 1836</span>&#160;<a class="code" href="SVEIntrinsicOpts_8cpp.html#a2bb87eb1bcbc74783a83ae945eb8fa36">INITIALIZE_PASS_DEPENDENCY</a>(<a class="code" href="classllvm_1_1OptimizationRemarkEmitterWrapperPass.html">OptimizationRemarkEmitterWrapperPass</a>)</div>
<div class="line"><a name="l01837"></a><span class="lineno"> 1837</span>&#160;<a class="code" href="SVEIntrinsicOpts_8cpp.html#a2bb87eb1bcbc74783a83ae945eb8fa36">INITIALIZE_PASS_DEPENDENCY</a>(<a class="code" href="classllvm_1_1TargetTransformInfoWrapperPass.html">TargetTransformInfoWrapperPass</a>)</div>
<div class="line"><a name="l01838"></a><span class="lineno"><a class="line" href="IROutliner_8cpp.html#a8fa0458fc58f092253b63ede4e21d6d2"> 1838</a></span>&#160;<a class="code" href="PassSupport_8h.html#a74ce8276b89067e806f67c45a6d92575">INITIALIZE_PASS_END</a>(<a class="code" href="classIROutlinerLegacyPass.html">IROutlinerLegacyPass</a>, &quot;<a class="code" href="IROutliner_8cpp.html#aa304ec6dc0794143885b97291ad23fb9">iroutliner</a>&quot;, &quot;<a class="code" href="Lint_8cpp.html#a7fb3c9caadeb0f7fe4828d380158d0f9">IR</a> <a class="code" href="IROutliner_8cpp.html#a8fa0458fc58f092253b63ede4e21d6d2">Outliner</a>&quot;, <a class="code" href="namespacefalse.html">false</a>,</div>
<div class="line"><a name="l01839"></a><span class="lineno"> 1839</span>&#160;                    <a class="code" href="namespacefalse.html">false</a>)</div>
<div class="line"><a name="l01840"></a><span class="lineno"> 1840</span>&#160; </div>
<div class="line"><a name="l01841"></a><span class="lineno"><a class="line" href="namespacellvm.html#ad1c8d6c90bd5166a495ff698c529129c"> 1841</a></span>&#160;<a class="code" href="classllvm_1_1ModulePass.html">ModulePass</a> *<a class="code" href="namespacellvm.html">llvm</a>::<a class="code" href="namespacellvm.html#ad1c8d6c90bd5166a495ff698c529129c">createIROutlinerPass</a>() { <span class="keywordflow">return</span> <span class="keyword">new</span> <a class="code" href="classIROutlinerLegacyPass.html">IROutlinerLegacyPass</a>(); }</div>
</div><!-- fragment --></div><!-- contents -->
<div class="ttc" id="aclassllvm_1_1InstructionCost_html"><div class="ttname"><a href="classllvm_1_1InstructionCost.html">llvm::InstructionCost</a></div><div class="ttdef"><b>Definition:</b> <a href="InstructionCost_8h_source.html#l00029">InstructionCost.h:29</a></div></div>
<div class="ttc" id="aclassllvm_1_1PreservedAnalyses_html"><div class="ttname"><a href="classllvm_1_1PreservedAnalyses.html">llvm::PreservedAnalyses</a></div><div class="ttdoc">A set of analyses that are preserved following a run of a transformation pass.</div><div class="ttdef"><b>Definition:</b> <a href="PassManager_8h_source.html#l00155">PassManager.h:155</a></div></div>
<div class="ttc" id="aclassllvm_1_1Argument_html"><div class="ttname"><a href="classllvm_1_1Argument.html">llvm::Argument</a></div><div class="ttdoc">This class represents an incoming formal argument to a Function.</div><div class="ttdef"><b>Definition:</b> <a href="Argument_8h_source.html#l00029">Argument.h:29</a></div></div>
<div class="ttc" id="aIROutliner_8h_html"><div class="ttname"><a href="IROutliner_8h.html">IROutliner.h</a></div></div>
<div class="ttc" id="aclassllvm_1_1BasicBlock_html_a0b4e7bee9b8575cc7db73329f1a561bd"><div class="ttname"><a href="classllvm_1_1BasicBlock.html#a0b4e7bee9b8575cc7db73329f1a561bd">llvm::BasicBlock::end</a></div><div class="ttdeci">iterator end()</div><div class="ttdef"><b>Definition:</b> <a href="BasicBlock_8h_source.html#l00298">BasicBlock.h:298</a></div></div>
<div class="ttc" id="aclassllvm_1_1TargetIRAnalysis_html"><div class="ttname"><a href="classllvm_1_1TargetIRAnalysis.html">llvm::TargetIRAnalysis</a></div><div class="ttdoc">Analysis pass providing the TargetTransformInfo.</div><div class="ttdef"><b>Definition:</b> <a href="TargetTransformInfo_8h_source.html#l02309">TargetTransformInfo.h:2309</a></div></div>
<div class="ttc" id="aclassllvm_1_1OptimizationRemarkMissed_html"><div class="ttname"><a href="classllvm_1_1OptimizationRemarkMissed.html">llvm::OptimizationRemarkMissed</a></div><div class="ttdoc">Diagnostic information for missed-optimization remarks.</div><div class="ttdef"><b>Definition:</b> <a href="DiagnosticInfo_8h_source.html#l00729">DiagnosticInfo.h:729</a></div></div>
<div class="ttc" id="anamespacellvm_1_1AttributeFuncs_html_aab96d8eec2287f142354ff6d8f3bba27"><div class="ttname"><a href="namespacellvm_1_1AttributeFuncs.html#aab96d8eec2287f142354ff6d8f3bba27">llvm::AttributeFuncs::mergeAttributesForOutlining</a></div><div class="ttdeci">void mergeAttributesForOutlining(Function &amp;Base, const Function &amp;ToMerge)</div><div class="ttdoc">Merges the functions attributes from ToMerge into function Base.</div><div class="ttdef"><b>Definition:</b> <a href="Attributes_8cpp_source.html#l02108">Attributes.cpp:2108</a></div></div>
<div class="ttc" id="anamespacellvm_html"><div class="ttname"><a href="namespacellvm.html">llvm</a></div><div class="ttdoc">---------------------— PointerInfo ------------------------------------—</div><div class="ttdef"><b>Definition:</b> <a href="AllocatorList_8h_source.html#l00023">AllocatorList.h:23</a></div></div>
<div class="ttc" id="alib_2Target_2X86_2README_8txt_html_ac88fe1d3a61b056a4f64fbbb156a62ff"><div class="ttname"><a href="lib_2Target_2X86_2README_8txt.html#ac88fe1d3a61b056a4f64fbbb156a62ff">M</a></div><div class="ttdeci">We currently emits eax Perhaps this is what we really should generate is Is imull three or four cycles eax eax The current instruction priority is based on pattern complexity The former is more complex because it folds a load so the latter will not be emitted Perhaps we should use AddedComplexity to give LEA32r a higher priority We should always try to match LEA first since the LEA matching code does some estimate to determine whether the match is profitable if we care more about code then imull is better It s two bytes shorter than movl leal On a Pentium M</div><div class="ttdef"><b>Definition:</b> <a href="lib_2Target_2X86_2README_8txt_source.html#l00252">README.txt:252</a></div></div>
<div class="ttc" id="aIROutliner_8cpp_html_a3afc8c0c69b0c55edce3be13d5b7cc32"><div class="ttname"><a href="IROutliner_8cpp.html#a3afc8c0c69b0c55edce3be13d5b7cc32">moveBBContents</a></div><div class="ttdeci">static void moveBBContents(BasicBlock &amp;SourceBB, BasicBlock &amp;TargetBB)</div><div class="ttdoc">Move the contents of SourceBB to before the last instruction of TargetBB.</div><div class="ttdef"><b>Definition:</b> <a href="IROutliner_8cpp_source.html#l00120">IROutliner.cpp:120</a></div></div>
<div class="ttc" id="astructOutlinableGroup_html_a25b29490419d6ea97ce7d79dc58f306d"><div class="ttname"><a href="structOutlinableGroup.html#a25b29490419d6ea97ce7d79dc58f306d">OutlinableGroup::ArgumentTypes</a></div><div class="ttdeci">std::vector&lt; Type * &gt; ArgumentTypes</div><div class="ttdoc">The argument types for the function created as the overall function to replace the extracted function...</div><div class="ttdef"><b>Definition:</b> <a href="IROutliner_8cpp_source.html#l00064">IROutliner.cpp:64</a></div></div>
<div class="ttc" id="astructllvm_1_1IRSimilarity_1_1IRInstructionDataList_html"><div class="ttname"><a href="structllvm_1_1IRSimilarity_1_1IRInstructionDataList.html">llvm::IRSimilarity::IRInstructionDataList</a></div><div class="ttdef"><b>Definition:</b> <a href="IRSimilarityIdentifier_8h_source.html#l00201">IRSimilarityIdentifier.h:201</a></div></div>
<div class="ttc" id="aclassllvm_1_1RegionBase_html_a9b0ebfeb3f47f1ad763e5b184dcb4e03"><div class="ttname"><a href="classllvm_1_1RegionBase.html#a9b0ebfeb3f47f1ad763e5b184dcb4e03">llvm::RegionBase::end</a></div><div class="ttdeci">iterator end()</div><div class="ttdef"><b>Definition:</b> <a href="RegionInfo_8h_source.html#l00561">RegionInfo.h:561</a></div></div>
<div class="ttc" id="aclassllvm_1_1Function_html_ae4ca2261b8b901e415fda7feac5051ea"><div class="ttname"><a href="classllvm_1_1Function.html#ae4ca2261b8b901e415fda7feac5051ea">llvm::Function::end</a></div><div class="ttdeci">iterator end()</div><div class="ttdef"><b>Definition:</b> <a href="Function_8h_source.html#l00781">Function.h:781</a></div></div>
<div class="ttc" id="aclassllvm_1_1BasicBlock_html_a98c0a84a5dfa8bce341c829709f171e5"><div class="ttname"><a href="classllvm_1_1BasicBlock.html#a98c0a84a5dfa8bce341c829709f171e5">llvm::BasicBlock::iterator</a></div><div class="ttdeci">InstListType::iterator iterator</div><div class="ttdoc">Instruction iterators...</div><div class="ttdef"><b>Definition:</b> <a href="BasicBlock_8h_source.html#l00090">BasicBlock.h:90</a></div></div>
<div class="ttc" id="aIROutliner_8cpp_html_aea967a44e357e9563f7429b1cca0f408"><div class="ttname"><a href="IROutliner_8cpp.html#aea967a44e357e9563f7429b1cca0f408">createSwitchStatement</a></div><div class="ttdeci">void createSwitchStatement(Module &amp;M, OutlinableGroup &amp;OG, BasicBlock *EndBB, ArrayRef&lt; BasicBlock * &gt; OutputStoreBBs)</div><div class="ttdoc">Create the switch statement for outlined function to differentiate between all the output blocks.</div><div class="ttdef"><b>Definition:</b> <a href="IROutliner_8cpp_source.html#l01164">IROutliner.cpp:1164</a></div></div>
<div class="ttc" id="aclassllvm_1_1ModulePass_html"><div class="ttname"><a href="classllvm_1_1ModulePass.html">llvm::ModulePass</a></div><div class="ttdoc">ModulePass class - This class is used to implement unstructured interprocedural optimizations and ana...</div><div class="ttdef"><b>Definition:</b> <a href="Pass_8h_source.html#l00238">Pass.h:238</a></div></div>
<div class="ttc" id="aclassllvm_1_1DIBuilder_html"><div class="ttname"><a href="classllvm_1_1DIBuilder.html">llvm::DIBuilder</a></div><div class="ttdef"><b>Definition:</b> <a href="DIBuilder_8h_source.html#l00041">DIBuilder.h:41</a></div></div>
<div class="ttc" id="aclassllvm_1_1AnalysisManager_html_ab9d3d5412c20747fd0110a046604f09a"><div class="ttname"><a href="classllvm_1_1AnalysisManager.html#ab9d3d5412c20747fd0110a046604f09a">llvm::AnalysisManager::getResult</a></div><div class="ttdeci">PassT::Result &amp; getResult(IRUnitT &amp;IR, ExtraArgTs... ExtraArgs)</div><div class="ttdoc">Get the result of an analysis pass for a given IR unit.</div><div class="ttdef"><b>Definition:</b> <a href="PassManager_8h_source.html#l00769">PassManager.h:769</a></div></div>
<div class="ttc" id="aDebugInfoMetadata_8h_html"><div class="ttname"><a href="DebugInfoMetadata_8h.html">DebugInfoMetadata.h</a></div></div>
<div class="ttc" id="astructOutlinableGroup_html_ad67fb96194cff11216803ad74dba5687"><div class="ttname"><a href="structOutlinableGroup.html#ad67fb96194cff11216803ad74dba5687">OutlinableGroup::collectGVNStoreSets</a></div><div class="ttdeci">void collectGVNStoreSets(Module &amp;M)</div><div class="ttdoc">For the regions, look at each set of GVN stores needed and account for each combination.</div><div class="ttdef"><b>Definition:</b> <a href="IROutliner_8cpp_source.html#l00348">IROutliner.cpp:348</a></div></div>
<div class="ttc" id="aclassllvm_1_1CodeExtractor_html_a537993928c8af5b0d064fcd5ce1dec2f"><div class="ttname"><a href="classllvm_1_1CodeExtractor.html#a537993928c8af5b0d064fcd5ce1dec2f">llvm::CodeExtractor::findAllocas</a></div><div class="ttdeci">void findAllocas(const CodeExtractorAnalysisCache &amp;CEAC, ValueSet &amp;SinkCands, ValueSet &amp;HoistCands, BasicBlock *&amp;ExitBlock) const</div><div class="ttdoc">Find the set of allocas whose life ranges are contained within the outlined region.</div><div class="ttdef"><b>Definition:</b> <a href="CodeExtractor_8cpp_source.html#l00494">CodeExtractor.cpp:494</a></div></div>
<div class="ttc" id="aclassllvm_1_1Function_html"><div class="ttname"><a href="classllvm_1_1Function.html">llvm::Function</a></div><div class="ttdef"><b>Definition:</b> <a href="Function_8h_source.html#l00061">Function.h:62</a></div></div>
<div class="ttc" id="aclassllvm_1_1Attribute_html"><div class="ttname"><a href="classllvm_1_1Attribute.html">llvm::Attribute</a></div><div class="ttdef"><b>Definition:</b> <a href="Attributes_8h_source.html#l00052">Attributes.h:52</a></div></div>
<div class="ttc" id="astructOutlinableGroup_html_a53e3a8f28cb8e7a01334b7560467d9ea"><div class="ttname"><a href="structOutlinableGroup.html#a53e3a8f28cb8e7a01334b7560467d9ea">OutlinableGroup::OutputGVNCombinations</a></div><div class="ttdeci">DenseSet&lt; ArrayRef&lt; unsigned &gt; &gt; OutputGVNCombinations</div><div class="ttdoc">A set containing the different GVN store sets needed.</div><div class="ttdef"><b>Definition:</b> <a href="IROutliner_8cpp_source.html#l00080">IROutliner.cpp:80</a></div></div>
<div class="ttc" id="aIROutliner_8cpp_html_a0ada51ec6529c49317519e0e5b491263"><div class="ttname"><a href="IROutliner_8cpp.html#a0ada51ec6529c49317519e0e5b491263">alignOutputBlockWithAggFunc</a></div><div class="ttdeci">static void alignOutputBlockWithAggFunc(OutlinableGroup &amp;OG, OutlinableRegion &amp;Region, BasicBlock *OutputBB, BasicBlock *EndBB, const DenseMap&lt; Value *, Value * &gt; &amp;OutputMappings, std::vector&lt; BasicBlock * &gt; &amp;OutputStoreBBs)</div><div class="ttdoc">For the outlined section, move needed the StoreInsts for the output registers into their own block.</div><div class="ttdef"><b>Definition:</b> <a href="IROutliner_8cpp_source.html#l01077">IROutliner.cpp:1077</a></div></div>
<div class="ttc" id="aPass_8h_html"><div class="ttname"><a href="Pass_8h.html">Pass.h</a></div></div>
<div class="ttc" id="aclassllvm_1_1TargetTransformInfo_html_adee222261f4336f1f1a5d36aa8968ad4"><div class="ttname"><a href="classllvm_1_1TargetTransformInfo.html#adee222261f4336f1f1a5d36aa8968ad4">llvm::TargetTransformInfo::getMemoryOpCost</a></div><div class="ttdeci">InstructionCost getMemoryOpCost(unsigned Opcode, Type *Src, Align Alignment, unsigned AddressSpace, TTI::TargetCostKind CostKind=TTI::TCK_RecipThroughput, const Instruction *I=nullptr) const</div><div class="ttdef"><b>Definition:</b> <a href="TargetTransformInfo_8cpp_source.html#l00817">TargetTransformInfo.cpp:817</a></div></div>
<div class="ttc" id="aclassllvm_1_1raw__string__ostream_html"><div class="ttname"><a href="classllvm_1_1raw__string__ostream.html">llvm::raw_string_ostream</a></div><div class="ttdoc">A raw_ostream that writes to an std::string.</div><div class="ttdef"><b>Definition:</b> <a href="raw__ostream_8h_source.html#l00623">raw_ostream.h:623</a></div></div>
<div class="ttc" id="aclassllvm_1_1SetVector_html_a18b9d328d2490f447589ba60345eba6e"><div class="ttname"><a href="classllvm_1_1SetVector.html#a18b9d328d2490f447589ba60345eba6e">llvm::SetVector::size</a></div><div class="ttdeci">size_type size() const</div><div class="ttdoc">Determine the number of elements in the SetVector.</div><div class="ttdef"><b>Definition:</b> <a href="SetVector_8h_source.html#l00077">SetVector.h:77</a></div></div>
<div class="ttc" id="aclassllvm_1_1IRSimilarityAnalysis_html"><div class="ttname"><a href="classllvm_1_1IRSimilarityAnalysis.html">llvm::IRSimilarityAnalysis</a></div><div class="ttdoc">An analysis pass that runs and returns the IRSimilarityIdentifier run on the Module.</div><div class="ttdef"><b>Definition:</b> <a href="IRSimilarityIdentifier_8h_source.html#l00760">IRSimilarityIdentifier.h:760</a></div></div>
<div class="ttc" id="aclassllvm_1_1SwitchInst_html_a68553b9dbdbf2d12b5c9511fd62c2ef7"><div class="ttname"><a href="classllvm_1_1SwitchInst.html#a68553b9dbdbf2d12b5c9511fd62c2ef7">llvm::SwitchInst::Create</a></div><div class="ttdeci">static SwitchInst * Create(Value *Value, BasicBlock *Default, unsigned NumCases, Instruction *InsertBefore=nullptr)</div><div class="ttdef"><b>Definition:</b> <a href="Instructions_8h_source.html#l03366">Instructions.h:3366</a></div></div>
<div class="ttc" id="aclassllvm_1_1Function_html_a4d834f9897d15e3a6349063b5d637cd8"><div class="ttname"><a href="classllvm_1_1Function.html#a4d834f9897d15e3a6349063b5d637cd8">llvm::Function::getSubprogram</a></div><div class="ttdeci">DISubprogram * getSubprogram() const</div><div class="ttdoc">Get the attached subprogram.</div><div class="ttdef"><b>Definition:</b> <a href="Metadata_8cpp_source.html#l01532">Metadata.cpp:1532</a></div></div>
<div class="ttc" id="aclassllvm_1_1TargetTransformInfo_html"><div class="ttname"><a href="classllvm_1_1TargetTransformInfo.html">llvm::TargetTransformInfo</a></div><div class="ttdoc">This pass provides access to the codegen interfaces that are needed for IR-level transformations.</div><div class="ttdef"><b>Definition:</b> <a href="TargetTransformInfo_8h_source.html#l00167">TargetTransformInfo.h:167</a></div></div>
<div class="ttc" id="astructOutlinableGroup_html_a61915f6a6a382f51fd1a8bf3dd188c0c"><div class="ttname"><a href="structOutlinableGroup.html#a61915f6a6a382f51fd1a8bf3dd188c0c">OutlinableGroup::findSameConstants</a></div><div class="ttdeci">void findSameConstants(DenseSet&lt; unsigned &gt; &amp;NotSame)</div><div class="ttdoc">For the Regions, we look at every Value.</div><div class="ttdef"><b>Definition:</b> <a href="IROutliner_8cpp_source.html#l00341">IROutliner.cpp:341</a></div></div>
<div class="ttc" id="aclassllvm_1_1FunctionType_html_a7e89b55242c964ae61b7850e99cacef0"><div class="ttname"><a href="classllvm_1_1FunctionType.html#a7e89b55242c964ae61b7850e99cacef0">llvm::FunctionType::get</a></div><div class="ttdeci">static FunctionType * get(Type *Result, ArrayRef&lt; Type * &gt; Params, bool isVarArg)</div><div class="ttdoc">This static method is the primary way of constructing a FunctionType.</div><div class="ttdef"><b>Definition:</b> <a href="Type_8cpp_source.html#l00327">Type.cpp:327</a></div></div>
<div class="ttc" id="aOptimizationRemarkEmitter_8h_html"><div class="ttname"><a href="OptimizationRemarkEmitter_8h.html">OptimizationRemarkEmitter.h</a></div></div>
<div class="ttc" id="aPassBuilderBindings_8cpp_html_a83c7e5ca51099e4efa895791a02fb0ed"><div class="ttname"><a href="PassBuilderBindings_8cpp.html#a83c7e5ca51099e4efa895791a02fb0ed">FAM</a></div><div class="ttdeci">FunctionAnalysisManager FAM</div><div class="ttdef"><b>Definition:</b> <a href="PassBuilderBindings_8cpp_source.html#l00059">PassBuilderBindings.cpp:59</a></div></div>
<div class="ttc" id="aIROutliner_8cpp_html_a21da4953c61d301ca9402aed0ed89bd2"><div class="ttname"><a href="IROutliner_8cpp.html#a21da4953c61d301ca9402aed0ed89bd2">EnableLinkOnceODRIROutlining</a></div><div class="ttdeci">static cl::opt&lt; bool &gt; EnableLinkOnceODRIROutlining(&quot;enable-linkonceodr-ir-outlining&quot;, cl::Hidden, cl::desc(&quot;Enable the IR outliner on linkonceodr functions&quot;), cl::init(false))</div></div>
<div class="ttc" id="aclassllvm_1_1TargetTransformInfo_html_a706f223f760b55668fbae74202b816bba737cfc93e5a2ff961677d57186167e7c"><div class="ttname"><a href="classllvm_1_1TargetTransformInfo.html#a706f223f760b55668fbae74202b816bba737cfc93e5a2ff961677d57186167e7c">llvm::TargetTransformInfo::TCK_CodeSize</a></div><div class="ttdeci">@ TCK_CodeSize</div><div class="ttdoc">Instruction code size.</div><div class="ttdef"><b>Definition:</b> <a href="TargetTransformInfo_8h_source.html#l00213">TargetTransformInfo.h:213</a></div></div>
<div class="ttc" id="anamespacellvm_1_1cl_html_a68075925a54790e71ca790e1d4f21a40a263ac008d8d31f13ce460395fc4cf7e6"><div class="ttname"><a href="namespacellvm_1_1cl.html#a68075925a54790e71ca790e1d4f21a40a263ac008d8d31f13ce460395fc4cf7e6">llvm::cl::Hidden</a></div><div class="ttdeci">@ Hidden</div><div class="ttdef"><b>Definition:</b> <a href="CommandLine_8h_source.html#l00143">CommandLine.h:143</a></div></div>
<div class="ttc" id="aIROutliner_8cpp_html_acda959f961048eba09125aba48d1142e"><div class="ttname"><a href="IROutliner_8cpp.html#acda959f961048eba09125aba48d1142e">findConstants</a></div><div class="ttdeci">static void findConstants(IRSimilarityCandidate &amp;C, DenseSet&lt; unsigned &gt; &amp;NotSame, std::vector&lt; unsigned &gt; &amp;Inputs)</div><div class="ttdoc">Find the the constants that will need to be lifted into arguments as they are not the same in each in...</div><div class="ttdef"><b>Definition:</b> <a href="IROutliner_8cpp_source.html#l00492">IROutliner.cpp:492</a></div></div>
<div class="ttc" id="astructOutlinableGroup_html_aab2165e523387ae034bc2117b13c5d51"><div class="ttname"><a href="structOutlinableGroup.html#aab2165e523387ae034bc2117b13c5d51">OutlinableGroup::OutlinedFunctionType</a></div><div class="ttdeci">FunctionType * OutlinedFunctionType</div><div class="ttdoc">The FunctionType for the overall function.</div><div class="ttdef"><b>Definition:</b> <a href="IROutliner_8cpp_source.html#l00066">IROutliner.cpp:66</a></div></div>
<div class="ttc" id="aclassllvm_1_1DILocation_html"><div class="ttname"><a href="classllvm_1_1DILocation.html">llvm::DILocation</a></div><div class="ttdoc">Debug location.</div><div class="ttdef"><b>Definition:</b> <a href="DebugInfoMetadata_8h_source.html#l01562">DebugInfoMetadata.h:1562</a></div></div>
<div class="ttc" id="aclassIROutlinerLegacyPass_html_a89fe9cd3461afcf0f2ed3db7707bec16"><div class="ttname"><a href="classIROutlinerLegacyPass.html#a89fe9cd3461afcf0f2ed3db7707bec16">IROutlinerLegacyPass::ID</a></div><div class="ttdeci">static char ID</div><div class="ttdef"><b>Definition:</b> <a href="IROutliner_8cpp_source.html#l01772">IROutliner.cpp:1772</a></div></div>
<div class="ttc" id="aclassllvm_1_1PreservedAnalyses_html_a03797a73044a81cbc6a3409d6c72ee8f"><div class="ttname"><a href="classllvm_1_1PreservedAnalyses.html#a03797a73044a81cbc6a3409d6c72ee8f">llvm::PreservedAnalyses::none</a></div><div class="ttdeci">static PreservedAnalyses none()</div><div class="ttdoc">Convenience factory function for the empty preserved set.</div><div class="ttdef"><b>Definition:</b> <a href="PassManager_8h_source.html#l00158">PassManager.h:158</a></div></div>
<div class="ttc" id="aclassllvm_1_1Function_html_a9fffac2512fe651f0d5e37e27f5bd51c"><div class="ttname"><a href="classllvm_1_1Function.html#a9fffac2512fe651f0d5e37e27f5bd51c">llvm::Function::getContext</a></div><div class="ttdeci">LLVMContext &amp; getContext() const</div><div class="ttdoc">getContext - Return a reference to the LLVMContext associated with this function.</div><div class="ttdef"><b>Definition:</b> <a href="Function_8cpp_source.html#l00321">Function.cpp:321</a></div></div>
<div class="ttc" id="aclassllvm_1_1Function_html_ac6baa801e4aea800984e760d5460662f"><div class="ttname"><a href="classllvm_1_1Function.html#ac6baa801e4aea800984e760d5460662f">llvm::Function::arg_size</a></div><div class="ttdeci">size_t arg_size() const</div><div class="ttdef"><b>Definition:</b> <a href="Function_8h_source.html#l00827">Function.h:827</a></div></div>
<div class="ttc" id="aclassllvm_1_1SetVector_html_a55ffacfbd9b6de5eb90a9f443001e3a6"><div class="ttname"><a href="classllvm_1_1SetVector.html#a55ffacfbd9b6de5eb90a9f443001e3a6">llvm::SetVector::getArrayRef</a></div><div class="ttdeci">ArrayRef&lt; T &gt; getArrayRef() const</div><div class="ttdef"><b>Definition:</b> <a href="SetVector_8h_source.html#l00063">SetVector.h:63</a></div></div>
<div class="ttc" id="aclassllvm_1_1BasicBlock_html_a8dd327a937563afdb08250abc43820b0"><div class="ttname"><a href="classllvm_1_1BasicBlock.html#a8dd327a937563afdb08250abc43820b0">llvm::BasicBlock::eraseFromParent</a></div><div class="ttdeci">SymbolTableList&lt; BasicBlock &gt;::iterator eraseFromParent()</div><div class="ttdoc">Unlink 'this' from the containing function and delete it.</div><div class="ttdef"><b>Definition:</b> <a href="BasicBlock_8cpp_source.html#l00129">BasicBlock.cpp:129</a></div></div>
<div class="ttc" id="anamespacellvm_1_1IRSimilarity_html_a2198f86ce16da838bdeea4de7e59ef31"><div class="ttname"><a href="namespacellvm_1_1IRSimilarity.html#a2198f86ce16da838bdeea4de7e59ef31">llvm::IRSimilarity::SimilarityGroup</a></div><div class="ttdeci">std::vector&lt; IRSimilarityCandidate &gt; SimilarityGroup</div><div class="ttdef"><b>Definition:</b> <a href="IRSimilarityIdentifier_8h_source.html#l00626">IRSimilarityIdentifier.h:626</a></div></div>
<div class="ttc" id="aclassllvm_1_1Optional_html"><div class="ttname"><a href="classllvm_1_1Optional.html">llvm::Optional&lt; unsigned &gt;</a></div></div>
<div class="ttc" id="aclassllvm_1_1TargetTransformInfo_html_af7b131843b386c6e3cc39bd6f8141357"><div class="ttname"><a href="classllvm_1_1TargetTransformInfo.html#af7b131843b386c6e3cc39bd6f8141357">llvm::TargetTransformInfo::getCFInstrCost</a></div><div class="ttdeci">InstructionCost getCFInstrCost(unsigned Opcode, TTI::TargetCostKind CostKind=TTI::TCK_SizeAndLatency, const Instruction *I=nullptr) const</div><div class="ttdef"><b>Definition:</b> <a href="TargetTransformInfo_8cpp_source.html#l00789">TargetTransformInfo.cpp:789</a></div></div>
<div class="ttc" id="anamespacellvm_1_1M68kBeads_html_ac808f5f233066c25641be8a6c1e2b100a27d0e059322508a76f918503800ef1bd"><div class="ttname"><a href="namespacellvm_1_1M68kBeads.html#ac808f5f233066c25641be8a6c1e2b100a27d0e059322508a76f918503800ef1bd">llvm::M68kBeads::Term</a></div><div class="ttdeci">@ Term</div><div class="ttdef"><b>Definition:</b> <a href="M68kBaseInfo_8h_source.html#l00071">M68kBaseInfo.h:71</a></div></div>
<div class="ttc" id="anamespacellvm_1_1ore_html_a8f5533240c6722d987a2443cba42019d"><div class="ttname"><a href="namespacellvm_1_1ore.html#a8f5533240c6722d987a2443cba42019d">llvm::ore::NV</a></div><div class="ttdeci">DiagnosticInfoOptimizationBase::Argument NV</div><div class="ttdef"><b>Definition:</b> <a href="OptimizationRemarkEmitter_8h_source.html#l00136">OptimizationRemarkEmitter.h:136</a></div></div>
<div class="ttc" id="aclassllvm_1_1LoadInst_html_ad47eefa1d094f60494b6b927061ca001"><div class="ttname"><a href="classllvm_1_1LoadInst.html#ad47eefa1d094f60494b6b927061ca001">llvm::LoadInst::getPointerOperand</a></div><div class="ttdeci">Value * getPointerOperand()</div><div class="ttdef"><b>Definition:</b> <a href="Instructions_8h_source.html#l00267">Instructions.h:267</a></div></div>
<div class="ttc" id="anamespacellvm_1_1IRSimilarity_html_a1e2d2e59b2467bacdc6db54dcc9bc4a1"><div class="ttname"><a href="namespacellvm_1_1IRSimilarity.html#a1e2d2e59b2467bacdc6db54dcc9bc4a1">llvm::IRSimilarity::SimilarityGroupList</a></div><div class="ttdeci">std::vector&lt; SimilarityGroup &gt; SimilarityGroupList</div><div class="ttdef"><b>Definition:</b> <a href="IRSimilarityIdentifier_8h_source.html#l00627">IRSimilarityIdentifier.h:627</a></div></div>
<div class="ttc" id="aclassllvm_1_1Mangler_html"><div class="ttname"><a href="classllvm_1_1Mangler.html">llvm::Mangler</a></div><div class="ttdef"><b>Definition:</b> <a href="Mangler_8h_source.html#l00027">Mangler.h:27</a></div></div>
<div class="ttc" id="astructOutlinableGroup_html_a95133d99b799f98e5c92dacc3028c621"><div class="ttname"><a href="structOutlinableGroup.html#a95133d99b799f98e5c92dacc3028c621">OutlinableGroup::OutlinedFunction</a></div><div class="ttdeci">Function * OutlinedFunction</div><div class="ttdoc">The Function for the collective overall function.</div><div class="ttdef"><b>Definition:</b> <a href="IROutliner_8cpp_source.html#l00068">IROutliner.cpp:68</a></div></div>
<div class="ttc" id="aclassllvm_1_1detail_1_1DenseSetImpl_html_a79eed48913651aeedda2eed25201ea84"><div class="ttname"><a href="classllvm_1_1detail_1_1DenseSetImpl.html#a79eed48913651aeedda2eed25201ea84">llvm::detail::DenseSetImpl::insert</a></div><div class="ttdeci">std::pair&lt; iterator, bool &gt; insert(const ValueT &amp;V)</div><div class="ttdef"><b>Definition:</b> <a href="DenseSet_8h_source.html#l00206">DenseSet.h:206</a></div></div>
<div class="ttc" id="aclassllvm_1_1Function_html_ac277aebd990c638895a05b0ffae6f7ec"><div class="ttname"><a href="classllvm_1_1Function.html#ac277aebd990c638895a05b0ffae6f7ec">llvm::Function::addFnAttr</a></div><div class="ttdeci">void addFnAttr(Attribute::AttrKind Kind)</div><div class="ttdoc">Add function attributes to this function.</div><div class="ttdef"><b>Definition:</b> <a href="Function_8h_source.html#l00256">Function.h:256</a></div></div>
<div class="ttc" id="anamespacellvm_1_1cl_html_a68075925a54790e71ca790e1d4f21a40ab81f279502bb9ca74e6629cfb62844be"><div class="ttname"><a href="namespacellvm_1_1cl.html#a68075925a54790e71ca790e1d4f21a40ab81f279502bb9ca74e6629cfb62844be">llvm::cl::ReallyHidden</a></div><div class="ttdeci">@ ReallyHidden</div><div class="ttdef"><b>Definition:</b> <a href="CommandLine_8h_source.html#l00145">CommandLine.h:144</a></div></div>
<div class="ttc" id="aclassllvm_1_1IROutlinerPass_html_a5b9a8fe2c3b6834817b2c12b08441cff"><div class="ttname"><a href="classllvm_1_1IROutlinerPass.html#a5b9a8fe2c3b6834817b2c12b08441cff">llvm::IROutlinerPass::run</a></div><div class="ttdeci">PreservedAnalyses run(Module &amp;M, ModuleAnalysisManager &amp;AM)</div><div class="ttdef"><b>Definition:</b> <a href="IROutliner_8cpp_source.html#l01807">IROutliner.cpp:1807</a></div></div>
<div class="ttc" id="aclassllvm_1_1Type_html_a30dd396c5b40cd86c1591872e574ccdf"><div class="ttname"><a href="classllvm_1_1Type.html#a30dd396c5b40cd86c1591872e574ccdf">llvm::Type::getInt32Ty</a></div><div class="ttdeci">static IntegerType * getInt32Ty(LLVMContext &amp;C)</div><div class="ttdef"><b>Definition:</b> <a href="Type_8cpp_source.html#l00203">Type.cpp:203</a></div></div>
<div class="ttc" id="aclassIROutlinerLegacyPass_html_a53c105eed24d29de21cbfcfcd76cac75"><div class="ttname"><a href="classIROutlinerLegacyPass.html#a53c105eed24d29de21cbfcfcd76cac75">IROutlinerLegacyPass::getAnalysisUsage</a></div><div class="ttdeci">void getAnalysisUsage(AnalysisUsage &amp;AU) const override</div><div class="ttdoc">getAnalysisUsage - This function should be overriden by passes that need analysis information to do t...</div><div class="ttdef"><b>Definition:</b> <a href="IROutliner_8cpp_source.html#l01777">IROutliner.cpp:1777</a></div></div>
<div class="ttc" id="aDebug_8h_html_a08efc68d15935eb8889400a46c3749ba"><div class="ttname"><a href="Debug_8h.html#a08efc68d15935eb8889400a46c3749ba">LLVM_DEBUG</a></div><div class="ttdeci">#define LLVM_DEBUG(X)</div><div class="ttdef"><b>Definition:</b> <a href="Debug_8h_source.html#l00122">Debug.h:122</a></div></div>
<div class="ttc" id="aclassllvm_1_1MDNode_html_a7d10a7b9b7f40b04d27ed97c38ea1950"><div class="ttname"><a href="classllvm_1_1MDNode.html#a7d10a7b9b7f40b04d27ed97c38ea1950">llvm::MDNode::get</a></div><div class="ttdeci">static MDTuple * get(LLVMContext &amp;Context, ArrayRef&lt; Metadata * &gt; MDs)</div><div class="ttdef"><b>Definition:</b> <a href="Metadata_8h_source.html#l01199">Metadata.h:1199</a></div></div>
<div class="ttc" id="aMD5_8cpp_html_a96d73bbd7af15cb1fc38c3f4a3bd82e9"><div class="ttname"><a href="MD5_8cpp.html#a96d73bbd7af15cb1fc38c3f4a3bd82e9">F</a></div><div class="ttdeci">#define F(x, y, z)</div><div class="ttdef"><b>Definition:</b> <a href="MD5_8cpp_source.html#l00056">MD5.cpp:56</a></div></div>
<div class="ttc" id="anamespacellvm_1_1RISCVFenceField_html_a147be9e9780c1e33363ea572d4c7b25fa1835091d83e0e052cd1a32c99b2be731"><div class="ttname"><a href="namespacellvm_1_1RISCVFenceField.html#a147be9e9780c1e33363ea572d4c7b25fa1835091d83e0e052cd1a32c99b2be731">llvm::RISCVFenceField::R</a></div><div class="ttdeci">@ R</div><div class="ttdef"><b>Definition:</b> <a href="RISCVBaseInfo_8h_source.html#l00180">RISCVBaseInfo.h:180</a></div></div>
<div class="ttc" id="aclassllvm_1_1BasicBlock_html"><div class="ttname"><a href="classllvm_1_1BasicBlock.html">llvm::BasicBlock</a></div><div class="ttdoc">LLVM Basic Block Representation.</div><div class="ttdef"><b>Definition:</b> <a href="BasicBlock_8h_source.html#l00058">BasicBlock.h:59</a></div></div>
<div class="ttc" id="aclassllvm_1_1IRSimilarity_1_1IRSimilarityCandidate_html_a03c7915ffcc7637c4a5681b022c457f9"><div class="ttname"><a href="classllvm_1_1IRSimilarity_1_1IRSimilarityCandidate.html#a03c7915ffcc7637c4a5681b022c457f9">llvm::IRSimilarity::IRSimilarityCandidate::fromGVN</a></div><div class="ttdeci">Optional&lt; Value * &gt; fromGVN(unsigned Num)</div><div class="ttdoc">Finds the Value associate with Num if it exists.</div><div class="ttdef"><b>Definition:</b> <a href="IRSimilarityIdentifier_8h_source.html#l00606">IRSimilarityIdentifier.h:606</a></div></div>
<div class="ttc" id="aclassllvm_1_1Value_html_a98897a3d01f6a4d7f10a5ac8fe862c82"><div class="ttname"><a href="classllvm_1_1Value.html#a98897a3d01f6a4d7f10a5ac8fe862c82">llvm::Value::isSwiftError</a></div><div class="ttdeci">bool isSwiftError() const</div><div class="ttdoc">Return true if this value is a swifterror value.</div><div class="ttdef"><b>Definition:</b> <a href="Value_8cpp_source.html#l01000">Value.cpp:1000</a></div></div>
<div class="ttc" id="aclassllvm_1_1Optional_html_ab8f06efe88f146384116a787058ab420"><div class="ttname"><a href="classllvm_1_1Optional.html#ab8f06efe88f146384116a787058ab420">llvm::Optional::hasValue</a></div><div class="ttdeci">constexpr bool hasValue() const</div><div class="ttdef"><b>Definition:</b> <a href="Optional_8h_source.html#l00288">Optional.h:288</a></div></div>
<div class="ttc" id="anamespacellvm_html_a7c46c742c31be54870e2038048e6b391"><div class="ttname"><a href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">llvm::dbgs</a></div><div class="ttdeci">raw_ostream &amp; dbgs()</div><div class="ttdoc">dbgs() - This returns a reference to a raw_ostream for debugging messages.</div><div class="ttdef"><b>Definition:</b> <a href="Debug_8cpp_source.html#l00163">Debug.cpp:163</a></div></div>
<div class="ttc" id="aAMDGPULibCalls_8cpp_html_afecf1cc1292b07f57d343c0f4d682044"><div class="ttname"><a href="AMDGPULibCalls_8cpp.html#afecf1cc1292b07f57d343c0f4d682044">Arg</a></div><div class="ttdeci">amdgpu Simplify well known AMD library false FunctionCallee Value * Arg</div><div class="ttdef"><b>Definition:</b> <a href="AMDGPULibCalls_8cpp_source.html#l00206">AMDGPULibCalls.cpp:206</a></div></div>
<div class="ttc" id="aCommandLine_8h_html"><div class="ttname"><a href="CommandLine_8h.html">CommandLine.h</a></div></div>
<div class="ttc" id="anamespacellvm_html_a2145da5bde7663d745e9c3ade392809f"><div class="ttname"><a href="namespacellvm.html#a2145da5bde7663d745e9c3ade392809f">llvm::interleave</a></div><div class="ttdeci">void interleave(ForwardIterator begin, ForwardIterator end, UnaryFunctor each_fn, NullaryFunctor between_fn)</div><div class="ttdoc">An STL-style algorithm similar to std::for_each that applies a second functor between every pair of e...</div><div class="ttdef"><b>Definition:</b> <a href="STLExtras_8h_source.html#l01777">STLExtras.h:1777</a></div></div>
<div class="ttc" id="astructOutlinableGroup_html_a75bbc3b17e5b70e0e1fac394f26b5c11"><div class="ttname"><a href="structOutlinableGroup.html#a75bbc3b17e5b70e0e1fac394f26b5c11">OutlinableGroup::Regions</a></div><div class="ttdeci">std::vector&lt; OutlinableRegion * &gt; Regions</div><div class="ttdoc">The sections that could be outlined.</div><div class="ttdef"><b>Definition:</b> <a href="IROutliner_8cpp_source.html#l00060">IROutliner.cpp:60</a></div></div>
<div class="ttc" id="aIROutliner_8cpp_html_a589de9c77e75842cbf318f07e4fe6209"><div class="ttname"><a href="IROutliner_8cpp.html#a589de9c77e75842cbf318f07e4fe6209">moveFunctionData</a></div><div class="ttdeci">static BasicBlock * moveFunctionData(Function &amp;Old, Function &amp;New)</div><div class="ttdoc">Move each BasicBlock in Old to New.</div><div class="ttdef"><b>Definition:</b> <a href="IROutliner_8cpp_source.html#l00434">IROutliner.cpp:434</a></div></div>
<div class="ttc" id="anamespacellvm_1_1SPII_html_a2ab8a310a4181c487902735f4758ca88a5069619ca8fdce305534f3fe85091a0f"><div class="ttname"><a href="namespacellvm_1_1SPII.html#a2ab8a310a4181c487902735f4758ca88a5069619ca8fdce305534f3fe85091a0f">llvm::SPII::Load</a></div><div class="ttdeci">@ Load</div><div class="ttdef"><b>Definition:</b> <a href="SparcInstrInfo_8h_source.html#l00032">SparcInstrInfo.h:32</a></div></div>
<div class="ttc" id="aclassllvm_1_1PassRegistry_html_a05a729900b76c89e808c6c3094921b2f"><div class="ttname"><a href="classllvm_1_1PassRegistry.html#a05a729900b76c89e808c6c3094921b2f">llvm::PassRegistry::getPassRegistry</a></div><div class="ttdeci">static PassRegistry * getPassRegistry()</div><div class="ttdoc">getPassRegistry - Access the global registry object, which is automatically initialized at applicatio...</div><div class="ttdef"><b>Definition:</b> <a href="PassRegistry_8cpp_source.html#l00031">PassRegistry.cpp:31</a></div></div>
<div class="ttc" id="aIROutliner_8cpp_html_ad78e062f62e0d6e453941fb4ca843e4d"><div class="ttname"><a href="IROutliner_8cpp.html#ad78e062f62e0d6e453941fb4ca843e4d">DEBUG_TYPE</a></div><div class="ttdeci">#define DEBUG_TYPE</div><div class="ttdef"><b>Definition:</b> <a href="IROutliner_8cpp_source.html#l00031">IROutliner.cpp:31</a></div></div>
<div class="ttc" id="aclassllvm_1_1IRSimilarityIdentifierWrapperPass_html"><div class="ttname"><a href="classllvm_1_1IRSimilarityIdentifierWrapperPass.html">llvm::IRSimilarityIdentifierWrapperPass</a></div><div class="ttdoc">An analysis pass based on legacy pass manager that runs and returns IRSimilarityIdentifier run on the...</div><div class="ttdef"><b>Definition:</b> <a href="IRSimilarityIdentifier_8h_source.html#l00740">IRSimilarityIdentifier.h:740</a></div></div>
<div class="ttc" id="aclassllvm_1_1User_html"><div class="ttname"><a href="classllvm_1_1User.html">llvm::User</a></div><div class="ttdef"><b>Definition:</b> <a href="User_8h_source.html#l00044">User.h:44</a></div></div>
<div class="ttc" id="aREADME__ALTIVEC_8txt_html_a9aacd9146afe44bf656cd664e2a88c8c"><div class="ttname"><a href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a></div><div class="ttdeci">(vector float) vec_cmpeq(*A, *B) C</div><div class="ttdef"><b>Definition:</b> <a href="README__ALTIVEC_8txt_source.html#l00086">README_ALTIVEC.txt:86</a></div></div>
<div class="ttc" id="aclassllvm_1_1AttributeList_html_a7ee1c61933901a011f19fb68c6faad9d"><div class="ttname"><a href="classllvm_1_1AttributeList.html#a7ee1c61933901a011f19fb68c6faad9d">llvm::AttributeList::getFnAttributes</a></div><div class="ttdeci">AttributeSet getFnAttributes() const</div><div class="ttdoc">The function attributes are returned.</div><div class="ttdef"><b>Definition:</b> <a href="Attributes_8cpp_source.html#l01383">Attributes.cpp:1383</a></div></div>
<div class="ttc" id="aclassllvm_1_1BasicBlock_html_a0ed5f3ab3c2e4196ee0cffffa080c062"><div class="ttname"><a href="classllvm_1_1BasicBlock.html#a0ed5f3ab3c2e4196ee0cffffa080c062">llvm::BasicBlock::begin</a></div><div class="ttdeci">iterator begin()</div><div class="ttdoc">Instruction iterator methods.</div><div class="ttdef"><b>Definition:</b> <a href="BasicBlock_8h_source.html#l00296">BasicBlock.h:296</a></div></div>
<div class="ttc" id="astructOutlinableGroup_html_aeab6020692f93361cff45734711204fc"><div class="ttname"><a href="structOutlinableGroup.html#aeab6020692f93361cff45734711204fc">OutlinableGroup::NumAggregateInputs</a></div><div class="ttdeci">unsigned NumAggregateInputs</div><div class="ttdoc">The number of input values in ArgumentTypes.</div><div class="ttdef"><b>Definition:</b> <a href="IROutliner_8cpp_source.html#l00088">IROutliner.cpp:88</a></div></div>
<div class="ttc" id="aIROutliner_8cpp_html_a9148948069532c9a5e1b59e3668b8cc3"><div class="ttname"><a href="IROutliner_8cpp.html#a9148948069532c9a5e1b59e3668b8cc3">findExtractedInputToOverallInputMapping</a></div><div class="ttdeci">static void findExtractedInputToOverallInputMapping(OutlinableRegion &amp;Region, std::vector&lt; unsigned &gt; &amp;InputGVNs, SetVector&lt; Value * &gt; &amp;ArgInputs)</div><div class="ttdoc">Look over the inputs and map each input argument to an argument in the overall function for the Outli...</div><div class="ttdef"><b>Definition:</b> <a href="IROutliner_8cpp_source.html#l00649">IROutliner.cpp:649</a></div></div>
<div class="ttc" id="aclassllvm_1_1CallInst_html_a850d8262cd900958b3153c4aa080b2bb"><div class="ttname"><a href="classllvm_1_1CallInst.html#a850d8262cd900958b3153c4aa080b2bb">llvm::CallInst::Create</a></div><div class="ttdeci">static CallInst * Create(FunctionType *Ty, Value *F, const Twine &amp;NameStr=&quot;&quot;, Instruction *InsertBefore=nullptr)</div><div class="ttdef"><b>Definition:</b> <a href="Instructions_8h_source.html#l01518">Instructions.h:1518</a></div></div>
<div class="ttc" id="aclassllvm_1_1AnalysisUsage_html"><div class="ttname"><a href="classllvm_1_1AnalysisUsage.html">llvm::AnalysisUsage</a></div><div class="ttdoc">Represent the analysis usage information of a pass.</div><div class="ttdef"><b>Definition:</b> <a href="PassAnalysisSupport_8h_source.html#l00047">PassAnalysisSupport.h:47</a></div></div>
<div class="ttc" id="astructOutlinableGroup_html_a9fabb6e6f74e4ef23575f45ea098b827"><div class="ttname"><a href="structOutlinableGroup.html#a9fabb6e6f74e4ef23575f45ea098b827">OutlinableGroup::InputTypesSet</a></div><div class="ttdeci">bool InputTypesSet</div><div class="ttdoc">Flag for whether the ArgumentTypes have been defined after the extraction of the first region.</div><div class="ttdef"><b>Definition:</b> <a href="IROutliner_8cpp_source.html#l00084">IROutliner.cpp:84</a></div></div>
<div class="ttc" id="anamespacefalse_html"><div class="ttname"><a href="namespacefalse.html">false</a></div><div class="ttdef"><b>Definition:</b> <a href="StackSlotColoring_8cpp_source.html#l00142">StackSlotColoring.cpp:142</a></div></div>
<div class="ttc" id="aclassllvm_1_1Mangler_html_aa1c9296fd511eb96bb487befbf5e7cea"><div class="ttname"><a href="classllvm_1_1Mangler.html#aa1c9296fd511eb96bb487befbf5e7cea">llvm::Mangler::getNameWithPrefix</a></div><div class="ttdeci">void getNameWithPrefix(raw_ostream &amp;OS, const GlobalValue *GV, bool CannotUsePrivateLabel) const</div><div class="ttdoc">Print the appropriate prefix and the specified global variable's name.</div><div class="ttdef"><b>Definition:</b> <a href="Mangler_8cpp_source.html#l00114">Mangler.cpp:114</a></div></div>
<div class="ttc" id="aclassllvm_1_1CodeExtractor_html_a3719f9e5392a61378d7815a6c346abda"><div class="ttname"><a href="classllvm_1_1CodeExtractor.html#a3719f9e5392a61378d7815a6c346abda">llvm::CodeExtractor::findInputsOutputs</a></div><div class="ttdeci">void findInputsOutputs(ValueSet &amp;Inputs, ValueSet &amp;Outputs, const ValueSet &amp;Allocas) const</div><div class="ttdoc">Compute the set of input values and output values for the code.</div><div class="ttdef"><b>Definition:</b> <a href="CodeExtractor_8cpp_source.html#l00646">CodeExtractor.cpp:646</a></div></div>
<div class="ttc" id="aclassIROutlinerLegacyPass_html_aa4c55fc8a11986f827634c1903621399"><div class="ttname"><a href="classIROutlinerLegacyPass.html#aa4c55fc8a11986f827634c1903621399">IROutlinerLegacyPass::IROutlinerLegacyPass</a></div><div class="ttdeci">IROutlinerLegacyPass()</div><div class="ttdef"><b>Definition:</b> <a href="IROutliner_8cpp_source.html#l01773">IROutliner.cpp:1773</a></div></div>
<div class="ttc" id="aclassllvm_1_1detail_1_1DenseSetImpl_html_a9a025cb106832026cd05c2b4648a699f"><div class="ttname"><a href="classllvm_1_1detail_1_1DenseSetImpl.html#a9a025cb106832026cd05c2b4648a699f">llvm::detail::DenseSetImpl::size</a></div><div class="ttdeci">size_type size() const</div><div class="ttdef"><b>Definition:</b> <a href="DenseSet_8h_source.html#l00081">DenseSet.h:81</a></div></div>
<div class="ttc" id="aclassllvm_1_1Instruction_html"><div class="ttname"><a href="classllvm_1_1Instruction.html">llvm::Instruction</a></div><div class="ttdef"><b>Definition:</b> <a href="IR_2Instruction_8h_source.html#l00045">Instruction.h:46</a></div></div>
<div class="ttc" id="aclassIROutlinerLegacyPass_html_a07b783afb6af1190c44efdb4c3b28690"><div class="ttname"><a href="classIROutlinerLegacyPass.html#a07b783afb6af1190c44efdb4c3b28690">IROutlinerLegacyPass::runOnModule</a></div><div class="ttdeci">bool runOnModule(Module &amp;M) override</div><div class="ttdoc">runOnModule - Virtual method overriden by subclasses to process the module being operated on.</div><div class="ttdef"><b>Definition:</b> <a href="IROutliner_8cpp_source.html#l01786">IROutliner.cpp:1786</a></div></div>
<div class="ttc" id="aclassllvm_1_1ConstantInt_html_a969709dd49c28865a482d8b870f87c46"><div class="ttname"><a href="classllvm_1_1ConstantInt.html#a969709dd49c28865a482d8b870f87c46">llvm::ConstantInt::get</a></div><div class="ttdeci">static Constant * get(Type *Ty, uint64_t V, bool IsSigned=false)</div><div class="ttdoc">If Ty is a vector type, return a Constant with a splat of the given value.</div><div class="ttdef"><b>Definition:</b> <a href="Constants_8cpp_source.html#l00901">Constants.cpp:901</a></div></div>
<div class="ttc" id="aclassllvm_1_1Use_html_a50a2e57da274f8d69b9f932977379cdf"><div class="ttname"><a href="classllvm_1_1Use.html#a50a2e57da274f8d69b9f932977379cdf">llvm::Use::getUser</a></div><div class="ttdeci">User * getUser() const</div><div class="ttdoc">Returns the User that contains this Use.</div><div class="ttdef"><b>Definition:</b> <a href="Use_8h_source.html#l00073">Use.h:73</a></div></div>
<div class="ttc" id="aIROutliner_8cpp_html_a9165dd298666d75ed2e5be7d5d8b50e5"><div class="ttname"><a href="IROutliner_8cpp.html#a9165dd298666d75ed2e5be7d5d8b50e5">mapInputsToGVNs</a></div><div class="ttdeci">static void mapInputsToGVNs(IRSimilarityCandidate &amp;C, SetVector&lt; Value * &gt; &amp;CurrentInputs, const DenseMap&lt; Value *, Value * &gt; &amp;OutputMappings, std::vector&lt; unsigned &gt; &amp;EndInputNumbers)</div><div class="ttdoc">Find the GVN for the inputs that have been found by the CodeExtractor.</div><div class="ttdef"><b>Definition:</b> <a href="IROutliner_8cpp_source.html#l00522">IROutliner.cpp:522</a></div></div>
<div class="ttc" id="aLint_8cpp_html_a7fb3c9caadeb0f7fe4828d380158d0f9"><div class="ttname"><a href="Lint_8cpp.html#a7fb3c9caadeb0f7fe4828d380158d0f9">IR</a></div><div class="ttdeci">Statically lint checks LLVM IR</div><div class="ttdef"><b>Definition:</b> <a href="Lint_8cpp_source.html#l00744">Lint.cpp:744</a></div></div>
<div class="ttc" id="aIROutliner_8cpp_html_a1f4321fec5fdb59ac7dc62e14cbb443b"><div class="ttname"><a href="IROutliner_8cpp.html#a1f4321fec5fdb59ac7dc62e14cbb443b">findDuplicateOutputBlock</a></div><div class="ttdeci">Optional&lt; unsigned &gt; findDuplicateOutputBlock(BasicBlock *OutputBB, ArrayRef&lt; BasicBlock * &gt; OutputStoreBBs)</div><div class="ttdoc">It is possible that there is a basic block that already performs the same stores.</div><div class="ttdef"><b>Definition:</b> <a href="IROutliner_8cpp_source.html#l01028">IROutliner.cpp:1028</a></div></div>
<div class="ttc" id="astructllvm_1_1OutlinableRegion_html_aeea36f22dc87339b7be65179d3f249b6"><div class="ttname"><a href="structllvm_1_1OutlinableRegion.html#aeea36f22dc87339b7be65179d3f249b6">llvm::OutlinableRegion::StartBB</a></div><div class="ttdeci">BasicBlock * StartBB</div><div class="ttdoc">The BasicBlock that contains the starting instruction of the region.</div><div class="ttdef"><b>Definition:</b> <a href="IROutliner_8h_source.html#l00121">IROutliner.h:121</a></div></div>
<div class="ttc" id="astructllvm_1_1OutlinableRegion_html_af5d7aa7988108e9377f154cf6a22f02b"><div class="ttname"><a href="structllvm_1_1OutlinableRegion.html#af5d7aa7988108e9377f154cf6a22f02b">llvm::OutlinableRegion::reattachCandidate</a></div><div class="ttdeci">void reattachCandidate()</div><div class="ttdoc">For the contained region, reattach the BasicBlock at the starting and ending instructions of the cont...</div><div class="ttdef"><b>Definition:</b> <a href="IROutliner_8cpp_source.html#l00165">IROutliner.cpp:165</a></div></div>
<div class="ttc" id="astructllvm_1_1OutlinableRegion_html_a262d2672038afdeba85e23a30ea4c22d"><div class="ttname"><a href="structllvm_1_1OutlinableRegion.html#a262d2672038afdeba85e23a30ea4c22d">llvm::OutlinableRegion::OutputBlockNum</a></div><div class="ttdeci">unsigned OutputBlockNum</div><div class="ttdoc">The corresponding BasicBlock with the appropriate stores for this OutlinableRegion in the overall fun...</div><div class="ttdef"><b>Definition:</b> <a href="IROutliner_8h_source.html#l00079">IROutliner.h:79</a></div></div>
<div class="ttc" id="aclassllvm_1_1GlobalValue_html_aedfa75f0c85c4aa85b257f066fbea57ca1511edd03e02d1f3dd277a3c6abf6ad5"><div class="ttname"><a href="classllvm_1_1GlobalValue.html#aedfa75f0c85c4aa85b257f066fbea57ca1511edd03e02d1f3dd277a3c6abf6ad5">llvm::GlobalValue::InternalLinkage</a></div><div class="ttdeci">@ InternalLinkage</div><div class="ttdoc">Rename collisions when linking (static functions).</div><div class="ttdef"><b>Definition:</b> <a href="GlobalValue_8h_source.html#l00055">GlobalValue.h:55</a></div></div>
<div class="ttc" id="astructllvm_1_1Align_html"><div class="ttname"><a href="structllvm_1_1Align.html">llvm::Align</a></div><div class="ttdoc">This struct is a compact representation of a valid (non-zero power of two) alignment.</div><div class="ttdef"><b>Definition:</b> <a href="Alignment_8h_source.html#l00039">Alignment.h:39</a></div></div>
<div class="ttc" id="anamespacellvm_1_1MCID_html_ab357441fcd1ea1f9b0d27c12700f6023a463baf545246fea9718664d933ffe66f"><div class="ttname"><a href="namespacellvm_1_1MCID.html#ab357441fcd1ea1f9b0d27c12700f6023a463baf545246fea9718664d933ffe66f">llvm::MCID::Call</a></div><div class="ttdeci">@ Call</div><div class="ttdef"><b>Definition:</b> <a href="MCInstrDesc_8h_source.html#l00153">MCInstrDesc.h:153</a></div></div>
<div class="ttc" id="aclassllvm_1_1StringRef_html_ae2338e6739b671ea853b6154db368292"><div class="ttname"><a href="classllvm_1_1StringRef.html#ae2338e6739b671ea853b6154db368292">llvm::StringRef::str</a></div><div class="ttdeci">LLVM_NODISCARD std::string str() const</div><div class="ttdoc">str - Get the contents as an std::string.</div><div class="ttdef"><b>Definition:</b> <a href="StringRef_8h_source.html#l00245">StringRef.h:245</a></div></div>
<div class="ttc" id="anamespacellvm_html_a6497a581a4f7152729c29a368ac7d7be"><div class="ttname"><a href="namespacellvm.html#a6497a581a4f7152729c29a368ac7d7be">llvm::None</a></div><div class="ttdeci">const NoneType None</div><div class="ttdef"><b>Definition:</b> <a href="None_8h_source.html#l00023">None.h:23</a></div></div>
<div class="ttc" id="aIROutliner_8cpp_html_a09e9f16b4a1aaf539000b95bf5442155"><div class="ttname"><a href="IROutliner_8cpp.html#a09e9f16b4a1aaf539000b95bf5442155">remapExtractedInputs</a></div><div class="ttdeci">static void remapExtractedInputs(const ArrayRef&lt; Value * &gt; ArgInputs, const DenseMap&lt; Value *, Value * &gt; &amp;OutputMappings, SetVector&lt; Value * &gt; &amp;RemappedArgInputs)</div><div class="ttdoc">Find the original value for the ArgInput values if any one of them was replaced during a previous ext...</div><div class="ttdef"><b>Definition:</b> <a href="IROutliner_8cpp_source.html#l00548">IROutliner.cpp:548</a></div></div>
<div class="ttc" id="aIROutliner_8cpp_html_a9527769a87c07736cd574233e26a8baf"><div class="ttname"><a href="IROutliner_8cpp.html#a9527769a87c07736cd574233e26a8baf">collectRelevantInstructions</a></div><div class="ttdeci">static std::vector&lt; Instruction * &gt; collectRelevantInstructions(Function &amp;F, DenseSet&lt; BasicBlock * &gt; &amp;ExcludeBlocks)</div><div class="ttdoc">For the given function, find all the nondebug or lifetime instructions, and return them as a vector.</div><div class="ttdef"><b>Definition:</b> <a href="IROutliner_8cpp_source.html#l01000">IROutliner.cpp:1000</a></div></div>
<div class="ttc" id="aPassSupport_8h_html_a74ce8276b89067e806f67c45a6d92575"><div class="ttname"><a href="PassSupport_8h.html#a74ce8276b89067e806f67c45a6d92575">INITIALIZE_PASS_END</a></div><div class="ttdeci">#define INITIALIZE_PASS_END(passName, arg, name, cfg, analysis)</div><div class="ttdef"><b>Definition:</b> <a href="PassSupport_8h_source.html#l00058">PassSupport.h:58</a></div></div>
<div class="ttc" id="aclassllvm_1_1Function_html_a7477aafbbe989ad35b96fac186d8e9fd"><div class="ttname"><a href="classllvm_1_1Function.html#a7477aafbbe989ad35b96fac186d8e9fd">llvm::Function::getAttributes</a></div><div class="ttdeci">AttributeList getAttributes() const</div><div class="ttdoc">Return the attribute list for this Function.</div><div class="ttdef"><b>Definition:</b> <a href="Function_8h_source.html#l00250">Function.h:250</a></div></div>
<div class="ttc" id="aclassllvm_1_1IRSimilarity_1_1IRSimilarityCandidate_html_a5fd2e1a8a3658307e8c0d87a153d8c24"><div class="ttname"><a href="classllvm_1_1IRSimilarity_1_1IRSimilarityCandidate.html#a5fd2e1a8a3658307e8c0d87a153d8c24">llvm::IRSimilarity::IRSimilarityCandidate::getEndIdx</a></div><div class="ttdeci">unsigned getEndIdx() const</div><div class="ttdef"><b>Definition:</b> <a href="IRSimilarityIdentifier_8h_source.html#l00570">IRSimilarityIdentifier.h:570</a></div></div>
<div class="ttc" id="astructllvm_1_1OutlinableRegion_html_a086b69a5012fff81b179e92d137aae33"><div class="ttname"><a href="structllvm_1_1OutlinableRegion.html#a086b69a5012fff81b179e92d137aae33">llvm::OutlinableRegion::getBenefit</a></div><div class="ttdeci">InstructionCost getBenefit(TargetTransformInfo &amp;TTI)</div><div class="ttdoc">Get the size of the code removed from the region.</div><div class="ttdef"><b>Definition:</b> <a href="IROutliner_8cpp_source.html#l00249">IROutliner.cpp:249</a></div></div>
<div class="ttc" id="aIROutliner_8cpp_html_a8fdcb52f06725b70d2171c23aba46316"><div class="ttname"><a href="IROutliner_8cpp.html#a8fdcb52f06725b70d2171c23aba46316">replaceArgumentUses</a></div><div class="ttdeci">static void replaceArgumentUses(OutlinableRegion &amp;Region, BasicBlock *OutputBB)</div><div class="ttdef"><b>Definition:</b> <a href="IROutliner_8cpp_source.html#l00918">IROutliner.cpp:918</a></div></div>
<div class="ttc" id="aclassllvm_1_1DenseSet_html"><div class="ttname"><a href="classllvm_1_1DenseSet.html">llvm::DenseSet</a></div><div class="ttdoc">Implements a dense probed hash-table based set.</div><div class="ttdef"><b>Definition:</b> <a href="DenseSet_8h_source.html#l00268">DenseSet.h:271</a></div></div>
<div class="ttc" id="aclassllvm_1_1cl_1_1opt_html"><div class="ttname"><a href="classllvm_1_1cl_1_1opt.html">llvm::cl::opt&lt; bool &gt;</a></div></div>
<div class="ttc" id="astructllvm_1_1OutlinableRegion_html_ad5dce467e0d3954ba812f2e9611810b4"><div class="ttname"><a href="structllvm_1_1OutlinableRegion.html#ad5dce467e0d3954ba812f2e9611810b4">llvm::OutlinableRegion::ExtractedFunction</a></div><div class="ttdeci">Function * ExtractedFunction</div><div class="ttdoc">The function for the extracted region.</div><div class="ttdef"><b>Definition:</b> <a href="IROutliner_8h_source.html#l00107">IROutliner.h:107</a></div></div>
<div class="ttc" id="aclassllvm_1_1GlobalValue_html"><div class="ttname"><a href="classllvm_1_1GlobalValue.html">llvm::GlobalValue</a></div><div class="ttdef"><b>Definition:</b> <a href="GlobalValue_8h_source.html#l00044">GlobalValue.h:44</a></div></div>
<div class="ttc" id="aclassllvm_1_1Constant_html"><div class="ttname"><a href="classllvm_1_1Constant.html">llvm::Constant</a></div><div class="ttdoc">This is an important base class in LLVM.</div><div class="ttdef"><b>Definition:</b> <a href="Constant_8h_source.html#l00041">Constant.h:41</a></div></div>
<div class="ttc" id="aclassllvm_1_1Instruction_html_ae6b978645b8ac72d1a35e1298ffdd4f0"><div class="ttname"><a href="classllvm_1_1Instruction.html#ae6b978645b8ac72d1a35e1298ffdd4f0">llvm::Instruction::eraseFromParent</a></div><div class="ttdeci">SymbolTableList&lt; Instruction &gt;::iterator eraseFromParent()</div><div class="ttdoc">This method unlinks 'this' from the containing basic block and deletes it.</div><div class="ttdef"><b>Definition:</b> <a href="IR_2Instruction_8cpp_source.html#l00078">Instruction.cpp:78</a></div></div>
<div class="ttc" id="aclassllvm_1_1GVN_html"><div class="ttname"><a href="classllvm_1_1GVN.html">llvm::GVN</a></div><div class="ttdoc">The core GVN pass object.</div><div class="ttdef"><b>Definition:</b> <a href="GVN_8h_source.html#l00118">GVN.h:118</a></div></div>
<div class="ttc" id="aclassllvm_1_1PointerType_html_a8db49fd5069f21d514e7bb0fd11f0902"><div class="ttname"><a href="classllvm_1_1PointerType.html#a8db49fd5069f21d514e7bb0fd11f0902">llvm::PointerType::getUnqual</a></div><div class="ttdeci">static PointerType * getUnqual(Type *ElementType)</div><div class="ttdoc">This constructs a pointer to an object of the specified type in the default address space (address sp...</div><div class="ttdef"><b>Definition:</b> <a href="DerivedTypes_8h_source.html#l00650">DerivedTypes.h:650</a></div></div>
<div class="ttc" id="aclassllvm_1_1simple__ilist_html_a1ca0d3bb44034ff5937d97824d53b0be"><div class="ttname"><a href="classllvm_1_1simple__ilist.html#a1ca0d3bb44034ff5937d97824d53b0be">llvm::simple_ilist&lt; IRInstructionData &gt;::iterator</a></div><div class="ttdeci">ilist_iterator&lt; OptionsT, false, false &gt; iterator</div><div class="ttdef"><b>Definition:</b> <a href="simple__ilist_8h_source.html#l00095">simple_ilist.h:95</a></div></div>
<div class="ttc" id="astructllvm_1_1OutlinableRegion_html_a018669f7b1d6a21106f47398a087c30a"><div class="ttname"><a href="structllvm_1_1OutlinableRegion.html#a018669f7b1d6a21106f47398a087c30a">llvm::OutlinableRegion::Call</a></div><div class="ttdeci">CallInst * Call</div><div class="ttdoc">The call site of the extracted region.</div><div class="ttdef"><b>Definition:</b> <a href="IROutliner_8h_source.html#l00104">IROutliner.h:104</a></div></div>
<div class="ttc" id="aclassllvm_1_1TargetTransformInfoWrapperPass_html"><div class="ttname"><a href="classllvm_1_1TargetTransformInfoWrapperPass.html">llvm::TargetTransformInfoWrapperPass</a></div><div class="ttdoc">Wrapper pass for TargetTransformInfo.</div><div class="ttdef"><b>Definition:</b> <a href="TargetTransformInfo_8h_source.html#l02365">TargetTransformInfo.h:2365</a></div></div>
<div class="ttc" id="aIROutliner_8cpp_html_ad48e342de7dd9ab549c3909db631f95e"><div class="ttname"><a href="IROutliner_8cpp.html#ad48e342de7dd9ab549c3909db631f95e">findExtractedOutputToOverallOutputMapping</a></div><div class="ttdeci">static void findExtractedOutputToOverallOutputMapping(OutlinableRegion &amp;Region, ArrayRef&lt; Value * &gt; Outputs)</div><div class="ttdoc">Create a mapping of the output arguments for the Region to the output arguments of the overall outlin...</div><div class="ttdef"><b>Definition:</b> <a href="IROutliner_8cpp_source.html#l00720">IROutliner.cpp:720</a></div></div>
<div class="ttc" id="aclassllvm_1_1simple__ilist_html_a4b588a868b58f1ac0917a59e7c48b5cc"><div class="ttname"><a href="classllvm_1_1simple__ilist.html#a4b588a868b58f1ac0917a59e7c48b5cc">llvm::simple_ilist::erase</a></div><div class="ttdeci">iterator erase(iterator I)</div><div class="ttdoc">Remove a node by iterator; never deletes.</div><div class="ttdef"><b>Definition:</b> <a href="simple__ilist_8h_source.html#l00196">simple_ilist.h:196</a></div></div>
<div class="ttc" id="aSVEIntrinsicOpts_8cpp_html_a2bb87eb1bcbc74783a83ae945eb8fa36"><div class="ttname"><a href="SVEIntrinsicOpts_8cpp.html#a2bb87eb1bcbc74783a83ae945eb8fa36">INITIALIZE_PASS_DEPENDENCY</a></div><div class="ttdeci">INITIALIZE_PASS_DEPENDENCY(DominatorTreeWrapperPass)</div></div>
<div class="ttc" id="aclassllvm_1_1ConstantPointerNull_html_a96f5c85e4022e369266541b2db3fda69"><div class="ttname"><a href="classllvm_1_1ConstantPointerNull.html#a96f5c85e4022e369266541b2db3fda69">llvm::ConstantPointerNull::get</a></div><div class="ttdeci">static ConstantPointerNull * get(PointerType *T)</div><div class="ttdoc">Static factory methods - Return objects of the specified value.</div><div class="ttdef"><b>Definition:</b> <a href="Constants_8cpp_source.html#l01772">Constants.cpp:1772</a></div></div>
<div class="ttc" id="alib_2Target_2ARM_2README_8txt_html_ad3a99906764c35b2694ae90fa57744a5"><div class="ttname"><a href="lib_2Target_2ARM_2README_8txt.html#ad3a99906764c35b2694ae90fa57744a5">move</a></div><div class="ttdeci">compiles ldr LCPI1_0 ldr ldr mov lsr tst moveq r1 ldr LCPI1_1 and r0 bx lr It would be better to do something like to fold the shift into the conditional move</div><div class="ttdef"><b>Definition:</b> <a href="lib_2Target_2ARM_2README_8txt_source.html#l00544">README.txt:546</a></div></div>
<div class="ttc" id="aclassllvm_1_1BranchInst_html_a38df51256d4b415b6a817b5e1c6d4d36"><div class="ttname"><a href="classllvm_1_1BranchInst.html#a38df51256d4b415b6a817b5e1c6d4d36">llvm::BranchInst::Create</a></div><div class="ttdeci">static BranchInst * Create(BasicBlock *IfTrue, Instruction *InsertBefore=nullptr)</div><div class="ttdef"><b>Definition:</b> <a href="Instructions_8h_source.html#l03088">Instructions.h:3088</a></div></div>
<div class="ttc" id="aclassllvm_1_1DenseMap_html"><div class="ttname"><a href="classllvm_1_1DenseMap.html">llvm::DenseMap</a></div><div class="ttdef"><b>Definition:</b> <a href="DenseMap_8h_source.html#l00714">DenseMap.h:715</a></div></div>
<div class="ttc" id="aMD5_8cpp_html_ac0eafdc9ee161b71e7af98af736952fd"><div class="ttname"><a href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a></div><div class="ttdeci">#define I(x, y, z)</div><div class="ttdef"><b>Definition:</b> <a href="MD5_8cpp_source.html#l00059">MD5.cpp:59</a></div></div>
<div class="ttc" id="anamespacellvm_1_1cl_html_a10a041239ae1870cfcc064bfaa79fb65"><div class="ttname"><a href="namespacellvm_1_1cl.html#a10a041239ae1870cfcc064bfaa79fb65">llvm::cl::init</a></div><div class="ttdeci">initializer&lt; Ty &gt; init(const Ty &amp;Val)</div><div class="ttdef"><b>Definition:</b> <a href="CommandLine_8h_source.html#l00443">CommandLine.h:443</a></div></div>
<div class="ttc" id="astructllvm_1_1OutlinableRegion_html_a06ee910ecb16eaaab4f069fa05c2a95a"><div class="ttname"><a href="structllvm_1_1OutlinableRegion.html#a06ee910ecb16eaaab4f069fa05c2a95a">llvm::OutlinableRegion::CE</a></div><div class="ttdeci">CodeExtractor * CE</div><div class="ttdoc">Used to create an outlined function.</div><div class="ttdef"><b>Definition:</b> <a href="IROutliner_8h_source.html#l00101">IROutliner.h:101</a></div></div>
<div class="ttc" id="aDIBuilder_8h_html"><div class="ttname"><a href="DIBuilder_8h.html">DIBuilder.h</a></div></div>
<div class="ttc" id="aclassllvm_1_1DICompileUnit_html"><div class="ttname"><a href="classllvm_1_1DICompileUnit.html">llvm::DICompileUnit</a></div><div class="ttdoc">Compile unit.</div><div class="ttdef"><b>Definition:</b> <a href="DebugInfoMetadata_8h_source.html#l01317">DebugInfoMetadata.h:1317</a></div></div>
<div class="ttc" id="aclassllvm_1_1PointerType_html"><div class="ttname"><a href="classllvm_1_1PointerType.html">llvm::PointerType</a></div><div class="ttdoc">Class to represent pointers.</div><div class="ttdef"><b>Definition:</b> <a href="DerivedTypes_8h_source.html#l00631">DerivedTypes.h:631</a></div></div>
<div class="ttc" id="aclassIROutlinerLegacyPass_html"><div class="ttname"><a href="classIROutlinerLegacyPass.html">IROutlinerLegacyPass</a></div><div class="ttdef"><b>Definition:</b> <a href="IROutliner_8cpp_source.html#l01770">IROutliner.cpp:1770</a></div></div>
<div class="ttc" id="aIROutliner_8cpp_html_ac99cbc2367275634ff833c06e8191d9e"><div class="ttname"><a href="IROutliner_8cpp.html#ac99cbc2367275634ff833c06e8191d9e">fillOverallFunction</a></div><div class="ttdeci">static void fillOverallFunction(Module &amp;M, OutlinableGroup &amp;CurrentGroup, std::vector&lt; BasicBlock * &gt; &amp;OutputStoreBBs, std::vector&lt; Function * &gt; &amp;FuncsToRemove)</div><div class="ttdoc">Fill the new function that will serve as the replacement function for all of the extracted regions of...</div><div class="ttdef"><b>Definition:</b> <a href="IROutliner_8cpp_source.html#l01220">IROutliner.cpp:1220</a></div></div>
<div class="ttc" id="aclassllvm_1_1DenseMapBase_html_a0c047f127ed4380a6f383d70bec4eb94"><div class="ttname"><a href="classllvm_1_1DenseMapBase.html#a0c047f127ed4380a6f383d70bec4eb94">llvm::DenseMapBase&lt; DenseMap&lt; KeyT, ValueT, DenseMapInfo&lt; KeyT &gt;, llvm::detail::DenseMapPair&lt; KeyT, ValueT &gt; &gt;, KeyT, ValueT, DenseMapInfo&lt; KeyT &gt;, llvm::detail::DenseMapPair&lt; KeyT, ValueT &gt; &gt;::find</a></div><div class="ttdeci">iterator find(const_arg_type_t&lt; KeyT &gt; Val)</div><div class="ttdef"><b>Definition:</b> <a href="DenseMap_8h_source.html#l00150">DenseMap.h:150</a></div></div>
<div class="ttc" id="aclassllvm_1_1Function_html_a6adbed68009f582caa84cdfd2adf36f1"><div class="ttname"><a href="classllvm_1_1Function.html#a6adbed68009f582caa84cdfd2adf36f1">llvm::Function::Create</a></div><div class="ttdeci">static Function * Create(FunctionType *Ty, LinkageTypes Linkage, unsigned AddrSpace, const Twine &amp;N=&quot;&quot;, Module *M=nullptr)</div><div class="ttdef"><b>Definition:</b> <a href="Function_8h_source.html#l00138">Function.h:138</a></div></div>
<div class="ttc" id="aSILowerControlFlow_8cpp_html_a4868c5d81c5ccc98c47aeab6244346a0"><div class="ttname"><a href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a></div><div class="ttdeci">assert(ImpDefSCC.getReg()==AMDGPU::SCC &amp;&amp;ImpDefSCC.isDef())</div></div>
<div class="ttc" id="anamespacellvm_html_a6063a4c748b0b601e4bf72a9b26cc35b"><div class="ttname"><a href="namespacellvm.html#a6063a4c748b0b601e4bf72a9b26cc35b">llvm::initializeIROutlinerLegacyPassPass</a></div><div class="ttdeci">void initializeIROutlinerLegacyPassPass(PassRegistry &amp;)</div></div>
<div class="ttc" id="aIROutliner_8cpp_html_a52a09c04ddc4ec6d039f1f11f01d019e"><div class="ttname"><a href="IROutliner_8cpp.html#a52a09c04ddc4ec6d039f1f11f01d019e">collectRegionsConstants</a></div><div class="ttdeci">static bool collectRegionsConstants(OutlinableRegion &amp;Region, DenseMap&lt; unsigned, Constant * &gt; &amp;GVNToConstant, DenseSet&lt; unsigned &gt; &amp;NotSame)</div><div class="ttdoc">Find whether Region matches the global value numbering to Constant mapping found so far.</div><div class="ttdef"><b>Definition:</b> <a href="IROutliner_8cpp_source.html#l00293">IROutliner.cpp:293</a></div></div>
<div class="ttc" id="aclassllvm_1_1OptimizationRemarkEmitter_html_aae6a98aea85aa3af87357cc5448db499"><div class="ttname"><a href="classllvm_1_1OptimizationRemarkEmitter.html#aae6a98aea85aa3af87357cc5448db499">llvm::OptimizationRemarkEmitter::emit</a></div><div class="ttdeci">void emit(DiagnosticInfoOptimizationBase &amp;OptDiag)</div><div class="ttdoc">Output the remark via the diagnostic handler and to the optimization record file.</div><div class="ttdef"><b>Definition:</b> <a href="OptimizationRemarkEmitter_8cpp_source.html#l00077">OptimizationRemarkEmitter.cpp:77</a></div></div>
<div class="ttc" id="astructllvm_1_1IRSimilarity_1_1IRInstructionData_html"><div class="ttname"><a href="structllvm_1_1IRSimilarity_1_1IRInstructionData.html">llvm::IRSimilarity::IRInstructionData</a></div><div class="ttdoc">This provides the utilities for hashing an Instruction to an unsigned integer.</div><div class="ttdef"><b>Definition:</b> <a href="IRSimilarityIdentifier_8h_source.html#l00113">IRSimilarityIdentifier.h:113</a></div></div>
<div class="ttc" id="aclassllvm_1_1CmpInst_html_a2be3583dac92a031fa1458d4d992c78ba07aee43ffb66908a25c55c77ce4c0d05"><div class="ttname"><a href="classllvm_1_1CmpInst.html#a2be3583dac92a031fa1458d4d992c78ba07aee43ffb66908a25c55c77ce4c0d05">llvm::CmpInst::BAD_ICMP_PREDICATE</a></div><div class="ttdeci">@ BAD_ICMP_PREDICATE</div><div class="ttdef"><b>Definition:</b> <a href="InstrTypes_8h_source.html#l00754">InstrTypes.h:753</a></div></div>
<div class="ttc" id="aMemDepPrinter_8cpp_html_a470d8721ad7c3b718e9daeabdaeb4700"><div class="ttname"><a href="MemDepPrinter_8cpp.html#a470d8721ad7c3b718e9daeabdaeb4700">function</a></div><div class="ttdeci">print Print MemDeps of function</div><div class="ttdef"><b>Definition:</b> <a href="MemDepPrinter_8cpp_source.html#l00083">MemDepPrinter.cpp:83</a></div></div>
<div class="ttc" id="aclassllvm_1_1Module_html"><div class="ttname"><a href="classllvm_1_1Module.html">llvm::Module</a></div><div class="ttdoc">A Module instance is used to store all the information related to an LLVM module.</div><div class="ttdef"><b>Definition:</b> <a href="Module_8h_source.html#l00067">Module.h:67</a></div></div>
<div class="ttc" id="aclassllvm_1_1SetVector_html_a72d928b7fc2c5f2d56c6ac0265fd9c6e"><div class="ttname"><a href="classllvm_1_1SetVector.html#a72d928b7fc2c5f2d56c6ac0265fd9c6e">llvm::SetVector::insert</a></div><div class="ttdeci">bool insert(const value_type &amp;X)</div><div class="ttdoc">Insert a new element into the SetVector.</div><div class="ttdef"><b>Definition:</b> <a href="SetVector_8h_source.html#l00141">SetVector.h:141</a></div></div>
<div class="ttc" id="aMangler_8h_html"><div class="ttname"><a href="Mangler_8h.html">Mangler.h</a></div></div>
<div class="ttc" id="astructOutlinableGroup_html_a69a17456977b7d8eb5795eb51870d41c"><div class="ttname"><a href="structOutlinableGroup.html#a69a17456977b7d8eb5795eb51870d41c">OutlinableGroup::Cost</a></div><div class="ttdeci">InstructionCost Cost</div><div class="ttdoc">The number of added instructions needed for the outlining of the Regions.</div><div class="ttdef"><b>Definition:</b> <a href="IROutliner_8cpp_source.html#l00095">IROutliner.cpp:95</a></div></div>
<div class="ttc" id="anamespacellvm_1_1NVPTXISD_html_ab995b6d422b079c863075e073b2eb96ba7cff9cc4a40fe2b19129ee8e9b0ec645"><div class="ttname"><a href="namespacellvm_1_1NVPTXISD.html#ab995b6d422b079c863075e073b2eb96ba7cff9cc4a40fe2b19129ee8e9b0ec645">llvm::NVPTXISD::Dummy</a></div><div class="ttdeci">@ Dummy</div><div class="ttdef"><b>Definition:</b> <a href="NVPTXISelLowering_8h_source.html#l00060">NVPTXISelLowering.h:60</a></div></div>
<div class="ttc" id="aclassllvm_1_1IROutliner_html_adc7588dad82317423eb5949ca4bac107"><div class="ttname"><a href="classllvm_1_1IROutliner.html#adc7588dad82317423eb5949ca4bac107">llvm::IROutliner::run</a></div><div class="ttdeci">bool run(Module &amp;M)</div><div class="ttdef"><b>Definition:</b> <a href="IROutliner_8cpp_source.html#l01762">IROutliner.cpp:1762</a></div></div>
<div class="ttc" id="astructOutlinableGroup_html"><div class="ttname"><a href="structOutlinableGroup.html">OutlinableGroup</a></div><div class="ttdoc">The OutlinableGroup holds all the overarching information for outlining a set of regions that are str...</div><div class="ttdef"><b>Definition:</b> <a href="IROutliner_8cpp_source.html#l00058">IROutliner.cpp:58</a></div></div>
<div class="ttc" id="aclassllvm_1_1ArrayRef_html"><div class="ttname"><a href="classllvm_1_1ArrayRef.html">llvm::ArrayRef</a></div><div class="ttdoc">ArrayRef - Represent a constant reference to an array (0 or more elements consecutively in memory),...</div><div class="ttdef"><b>Definition:</b> <a href="ArrayRef_8h_source.html#l00043">ArrayRef.h:43</a></div></div>
<div class="ttc" id="aIROutliner_8cpp_html_a887362135c31af6ca59ade2ff6fc1047"><div class="ttname"><a href="IROutliner_8cpp.html#a887362135c31af6ca59ade2ff6fc1047">INITIALIZE_PASS_BEGIN</a></div><div class="ttdeci">INITIALIZE_PASS_BEGIN(IROutlinerLegacyPass, &quot;iroutliner&quot;, &quot;IR Outliner&quot;, false, false) INITIALIZE_PASS_END(IROutlinerLegacyPass</div></div>
<div class="ttc" id="aclassllvm_1_1OptimizationRemarkEmitter_html"><div class="ttname"><a href="classllvm_1_1OptimizationRemarkEmitter.html">llvm::OptimizationRemarkEmitter</a></div><div class="ttdoc">The optimization diagnostic interface.</div><div class="ttdef"><b>Definition:</b> <a href="OptimizationRemarkEmitter_8h_source.html#l00033">OptimizationRemarkEmitter.h:33</a></div></div>
<div class="ttc" id="anamespacellvm_html_a61d13d6824ec46c31260a4fd0997eda0"><div class="ttname"><a href="namespacellvm.html#a61d13d6824ec46c31260a4fd0997eda0">llvm::any_of</a></div><div class="ttdeci">bool any_of(R &amp;&amp;range, UnaryPredicate P)</div><div class="ttdoc">Provide wrappers to std::any_of which take ranges instead of having to pass begin/end explicitly.</div><div class="ttdef"><b>Definition:</b> <a href="STLExtras_8h_source.html#l01541">STLExtras.h:1541</a></div></div>
<div class="ttc" id="astructllvm_1_1OutlinableRegion_html_a761b3c02cd196cb5f6fb019bcd86866e"><div class="ttname"><a href="structllvm_1_1OutlinableRegion.html#a761b3c02cd196cb5f6fb019bcd86866e">llvm::OutlinableRegion::splitCandidate</a></div><div class="ttdeci">void splitCandidate()</div><div class="ttdoc">For the contained region, split the parent BasicBlock at the starting and ending instructions of the ...</div><div class="ttdef"><b>Definition:</b> <a href="IROutliner_8cpp_source.html#l00129">IROutliner.cpp:129</a></div></div>
<div class="ttc" id="alib_2Analysis_2README_8txt_html_ad5ccdce1179bbfb942a084b3005f360d"><div class="ttname"><a href="lib_2Analysis_2README_8txt.html#ad5ccdce1179bbfb942a084b3005f360d">this</a></div><div class="ttdeci">Analysis the ScalarEvolution expression for r is this</div><div class="ttdef"><b>Definition:</b> <a href="lib_2Analysis_2README_8txt_source.html#l00006">README.txt:8</a></div></div>
<div class="ttc" id="aIROutliner_8cpp_html_a51932312ba2b9411a987be746ee773b2"><div class="ttname"><a href="IROutliner_8cpp.html#a51932312ba2b9411a987be746ee773b2">constantMatches</a></div><div class="ttdeci">static Optional&lt; bool &gt; constantMatches(Value *V, unsigned GVN, DenseMap&lt; unsigned, Constant * &gt; &amp;GVNToConstant)</div><div class="ttdoc">Find whether V matches the Constants previously found for the GVN.</div><div class="ttdef"><b>Definition:</b> <a href="IROutliner_8cpp_source.html#l00226">IROutliner.cpp:226</a></div></div>
<div class="ttc" id="anamespacellvm_html_ad1c8d6c90bd5166a495ff698c529129c"><div class="ttname"><a href="namespacellvm.html#ad1c8d6c90bd5166a495ff698c529129c">llvm::createIROutlinerPass</a></div><div class="ttdeci">ModulePass * createIROutlinerPass()</div><div class="ttdoc">createIROutlinerPass - This pass finds similar code regions and factors those regions out into functi...</div><div class="ttdef"><b>Definition:</b> <a href="IROutliner_8cpp_source.html#l01841">IROutliner.cpp:1841</a></div></div>
<div class="ttc" id="aIROutliner_8cpp_html_a4f3c175c90b9439d52ad07ecda521c2f"><div class="ttname"><a href="IROutliner_8cpp.html#a4f3c175c90b9439d52ad07ecda521c2f">replaceCalledFunction</a></div><div class="ttdeci">CallInst * replaceCalledFunction(Module &amp;M, OutlinableRegion &amp;Region)</div><div class="ttdoc">Replace the extracted function in the Region with a call to the overall function constructed from the...</div><div class="ttdef"><b>Definition:</b> <a href="IROutliner_8cpp_source.html#l00812">IROutliner.cpp:812</a></div></div>
<div class="ttc" id="aclassllvm_1_1Value_html_a6393a2d4fe7e10b28a0dcc35f881567b"><div class="ttname"><a href="classllvm_1_1Value.html#a6393a2d4fe7e10b28a0dcc35f881567b">llvm::Value::getType</a></div><div class="ttdeci">Type * getType() const</div><div class="ttdoc">All values are typed, get the type of this value.</div><div class="ttdef"><b>Definition:</b> <a href="Value_8h_source.html#l00256">Value.h:256</a></div></div>
<div class="ttc" id="aclassllvm_1_1Instruction_html_a6a66ebb3aa12757479a3c88de77d78f8"><div class="ttname"><a href="classllvm_1_1Instruction.html#a6a66ebb3aa12757479a3c88de77d78f8">llvm::Instruction::getFunction</a></div><div class="ttdeci">const Function * getFunction() const</div><div class="ttdoc">Return the function this instruction belongs to.</div><div class="ttdef"><b>Definition:</b> <a href="IR_2Instruction_8cpp_source.html#l00070">Instruction.cpp:70</a></div></div>
<div class="ttc" id="astructOutlinableGroup_html_ae0f753d38671d8138865d30d8cf5720b"><div class="ttname"><a href="structOutlinableGroup.html#ae0f753d38671d8138865d30d8cf5720b">OutlinableGroup::Benefit</a></div><div class="ttdeci">InstructionCost Benefit</div><div class="ttdoc">The number of instructions that will be outlined by extracting Regions.</div><div class="ttdef"><b>Definition:</b> <a href="IROutliner_8cpp_source.html#l00092">IROutliner.cpp:92</a></div></div>
<div class="ttc" id="aclassllvm_1_1detail_1_1DenseSetImpl_html_ad409c2de8502b94c8a0b1193307c63b6"><div class="ttname"><a href="classllvm_1_1detail_1_1DenseSetImpl.html#ad409c2de8502b94c8a0b1193307c63b6">llvm::detail::DenseSetImpl::contains</a></div><div class="ttdeci">bool contains(const_arg_type_t&lt; ValueT &gt; V) const</div><div class="ttdoc">Check if the set contains the given element.</div><div class="ttdef"><b>Definition:</b> <a href="DenseSet_8h_source.html#l00185">DenseSet.h:185</a></div></div>
<div class="ttc" id="aclassllvm_1_1Value_html_a3ab5fc45117b450e8bb04e564cb6e5f2"><div class="ttname"><a href="classllvm_1_1Value.html#a3ab5fc45117b450e8bb04e564cb6e5f2">llvm::Value::replaceAllUsesWith</a></div><div class="ttdeci">void replaceAllUsesWith(Value *V)</div><div class="ttdoc">Change all uses of this to point to a new Value.</div><div class="ttdef"><b>Definition:</b> <a href="Value_8cpp_source.html#l00520">Value.cpp:520</a></div></div>
<div class="ttc" id="aREADME__ALTIVEC_8txt_html_a015846b6188ce15e08cd94c74a9df1a3"><div class="ttname"><a href="README__ALTIVEC_8txt.html#a015846b6188ce15e08cd94c74a9df1a3">A</a></div><div class="ttdeci">* A</div><div class="ttdef"><b>Definition:</b> <a href="README__ALTIVEC_8txt_source.html#l00089">README_ALTIVEC.txt:89</a></div></div>
<div class="ttc" id="aclassllvm_1_1BasicBlock_html_ace940beeee97c222f836fe0ac70f6cf5"><div class="ttname"><a href="classllvm_1_1BasicBlock.html#ace940beeee97c222f836fe0ac70f6cf5">llvm::BasicBlock::Create</a></div><div class="ttdeci">static BasicBlock * Create(LLVMContext &amp;Context, const Twine &amp;Name=&quot;&quot;, Function *Parent=nullptr, BasicBlock *InsertBefore=nullptr)</div><div class="ttdoc">Creates a new BasicBlock.</div><div class="ttdef"><b>Definition:</b> <a href="BasicBlock_8h_source.html#l00100">BasicBlock.h:100</a></div></div>
<div class="ttc" id="aclassllvm_1_1RegionBase_html_a1aa6c7717f84c6970e22a0938660047f"><div class="ttname"><a href="classllvm_1_1RegionBase.html#a1aa6c7717f84c6970e22a0938660047f">llvm::RegionBase::begin</a></div><div class="ttdeci">iterator begin()</div><div class="ttdef"><b>Definition:</b> <a href="RegionInfo_8h_source.html#l00560">RegionInfo.h:560</a></div></div>
<div class="ttc" id="aclassllvm_1_1TargetTransformInfo_html_a072a0761bda53960d8d103a2a997bf2e"><div class="ttname"><a href="classllvm_1_1TargetTransformInfo.html#a072a0761bda53960d8d103a2a997bf2e">llvm::TargetTransformInfo::getCmpSelInstrCost</a></div><div class="ttdeci">InstructionCost getCmpSelInstrCost(unsigned Opcode, Type *ValTy, Type *CondTy=nullptr, CmpInst::Predicate VecPred=CmpInst::BAD_ICMP_PREDICATE, TTI::TargetCostKind CostKind=TTI::TCK_RecipThroughput, const Instruction *I=nullptr) const</div><div class="ttdef"><b>Definition:</b> <a href="TargetTransformInfo_8cpp_source.html#l00798">TargetTransformInfo.cpp:798</a></div></div>
<div class="ttc" id="aIROutliner_8cpp_html_a8b12ae89227758cb5684cc7cf25a7f43"><div class="ttname"><a href="IROutliner_8cpp.html#a8b12ae89227758cb5684cc7cf25a7f43">findCostForOutputBlocks</a></div><div class="ttdeci">static InstructionCost findCostForOutputBlocks(Module &amp;M, OutlinableGroup &amp;CurrentGroup, TargetTransformInfo &amp;TTI)</div><div class="ttdoc">Find the extra instructions needed to handle any output values for the region.</div><div class="ttdef"><b>Definition:</b> <a href="IROutliner_8cpp_source.html#l01415">IROutliner.cpp:1415</a></div></div>
<div class="ttc" id="aclassllvm_1_1CodeExtractor_html"><div class="ttname"><a href="classllvm_1_1CodeExtractor.html">llvm::CodeExtractor</a></div><div class="ttdoc">Utility class for extracting code into a new function.</div><div class="ttdef"><b>Definition:</b> <a href="CodeExtractor_8h_source.html#l00085">CodeExtractor.h:85</a></div></div>
<div class="ttc" id="astructllvm_1_1OutlinableRegion_html_a737734321cd2dd3896e64015cab7ab95"><div class="ttname"><a href="structllvm_1_1OutlinableRegion.html#a737734321cd2dd3896e64015cab7ab95">llvm::OutlinableRegion::IgnoreRegion</a></div><div class="ttdeci">bool IgnoreRegion</div><div class="ttdoc">Flag for whether we should not consider this region for extraction.</div><div class="ttdef"><b>Definition:</b> <a href="IROutliner_8h_source.html#l00114">IROutliner.h:114</a></div></div>
<div class="ttc" id="aclassllvm_1_1Value_html_adb5c319f5905c1d3ca9eb5df546388c5"><div class="ttname"><a href="classllvm_1_1Value.html#adb5c319f5905c1d3ca9eb5df546388c5">llvm::Value::getName</a></div><div class="ttdeci">StringRef getName() const</div><div class="ttdoc">Return a constant reference to the value's name.</div><div class="ttdef"><b>Definition:</b> <a href="Value_8cpp_source.html#l00297">Value.cpp:297</a></div></div>
<div class="ttc" id="aclassllvm_1_1LoadInst_html"><div class="ttname"><a href="classllvm_1_1LoadInst.html">llvm::LoadInst</a></div><div class="ttdoc">An instruction for reading from memory.</div><div class="ttdef"><b>Definition:</b> <a href="Instructions_8h_source.html#l00175">Instructions.h:175</a></div></div>
<div class="ttc" id="astructOutlinableGroup_html_a7bf6409b01dd04465404d268beec0898"><div class="ttname"><a href="structOutlinableGroup.html#a7bf6409b01dd04465404d268beec0898">OutlinableGroup::IgnoreGroup</a></div><div class="ttdeci">bool IgnoreGroup</div><div class="ttdoc">Flag for whether we should not consider this group of OutlinableRegions for extraction.</div><div class="ttdef"><b>Definition:</b> <a href="IROutliner_8cpp_source.html#l00072">IROutliner.cpp:72</a></div></div>
<div class="ttc" id="aclassllvm_1_1DenseMapBase_html_a99f811d53704275b4158c62a2dd138d9"><div class="ttname"><a href="classllvm_1_1DenseMapBase.html#a99f811d53704275b4158c62a2dd138d9">llvm::DenseMapBase&lt; DenseMap&lt; KeyT, ValueT, DenseMapInfo&lt; KeyT &gt;, llvm::detail::DenseMapPair&lt; KeyT, ValueT &gt; &gt;, KeyT, ValueT, DenseMapInfo&lt; KeyT &gt;, llvm::detail::DenseMapPair&lt; KeyT, ValueT &gt; &gt;::insert</a></div><div class="ttdeci">std::pair&lt; iterator, bool &gt; insert(const std::pair&lt; KeyT, ValueT &gt; &amp;KV)</div><div class="ttdef"><b>Definition:</b> <a href="DenseMap_8h_source.html#l00207">DenseMap.h:207</a></div></div>
<div class="ttc" id="aclassllvm_1_1BasicBlock_html_a71a9eabc4318b2fc34f83b01dfee484b"><div class="ttname"><a href="classllvm_1_1BasicBlock.html#a71a9eabc4318b2fc34f83b01dfee484b">llvm::BasicBlock::getTerminator</a></div><div class="ttdeci">const Instruction * getTerminator() const LLVM_READONLY</div><div class="ttdoc">Returns the terminator instruction if the block is well formed or null if the block is not well forme...</div><div class="ttdef"><b>Definition:</b> <a href="BasicBlock_8cpp_source.html#l00148">BasicBlock.cpp:148</a></div></div>
<div class="ttc" id="aclassllvm_1_1Function_html_a88a5e60837674780a9d812d661897ac5"><div class="ttname"><a href="classllvm_1_1Function.html#a88a5e60837674780a9d812d661897ac5">llvm::Function::begin</a></div><div class="ttdeci">iterator begin()</div><div class="ttdef"><b>Definition:</b> <a href="Function_8h_source.html#l00779">Function.h:779</a></div></div>
<div class="ttc" id="aIROutliner_8cpp_html_a05efe971c4e940f01a5e34bc41cd602a"><div class="ttname"><a href="IROutliner_8cpp.html#a05efe971c4e940f01a5e34bc41cd602a">NoCostModel</a></div><div class="ttdeci">static cl::opt&lt; bool &gt; NoCostModel(&quot;ir-outlining-no-cost&quot;, cl::init(false), cl::ReallyHidden, cl::desc(&quot;Debug option to outline greedily, without restriction that &quot; &quot;calculated benefit outweighs cost&quot;))</div></div>
<div class="ttc" id="aIROutliner_8cpp_html_a0028135ea5d53b4a9b047ef7c72edd57"><div class="ttname"><a href="IROutliner_8cpp.html#a0028135ea5d53b4a9b047ef7c72edd57">getSubprogramOrNull</a></div><div class="ttdeci">static DISubprogram * getSubprogramOrNull(OutlinableGroup &amp;Group)</div><div class="ttdoc">Get the subprogram if it exists for one of the outlined regions.</div><div class="ttdef"><b>Definition:</b> <a href="IROutliner_8cpp_source.html#l00363">IROutliner.cpp:363</a></div></div>
<div class="ttc" id="aAttributes_8h_html"><div class="ttname"><a href="Attributes_8h.html">Attributes.h</a></div><div class="ttdoc">This file contains the simple types necessary to represent the attributes associated with functions a...</div></div>
<div class="ttc" id="aclassllvm_1_1Function_html_aa5087b607af833220d9ebab0c88c83c1"><div class="ttname"><a href="classllvm_1_1Function.html#aa5087b607af833220d9ebab0c88c83c1">llvm::Function::addParamAttr</a></div><div class="ttdeci">void addParamAttr(unsigned ArgNo, Attribute::AttrKind Kind)</div><div class="ttdoc">adds the attribute to the list of attributes for the given arg.</div><div class="ttdef"><b>Definition:</b> <a href="Function_8cpp_source.html#l00550">Function.cpp:550</a></div></div>
<div class="ttc" id="aIROutliner_8cpp_html_ace02ac07a3f704ffd345301bff92e5a8"><div class="ttname"><a href="IROutliner_8cpp.html#ace02ac07a3f704ffd345301bff92e5a8">replaceConstants</a></div><div class="ttdeci">void replaceConstants(OutlinableRegion &amp;Region)</div><div class="ttdoc">Within an extracted function, replace the constants that need to be lifted into arguments with the ac...</div><div class="ttdef"><b>Definition:</b> <a href="IROutliner_8cpp_source.html#l00966">IROutliner.cpp:966</a></div></div>
<div class="ttc" id="aclassllvm_1_1Twine_html"><div class="ttname"><a href="classllvm_1_1Twine.html">llvm::Twine</a></div><div class="ttdoc">Twine - A lightweight data structure for efficiently representing the concatenation of temporary valu...</div><div class="ttdef"><b>Definition:</b> <a href="Twine_8h_source.html#l00083">Twine.h:83</a></div></div>
<div class="ttc" id="aclassllvm_1_1OptimizationRemarkEmitterWrapperPass_html"><div class="ttname"><a href="classllvm_1_1OptimizationRemarkEmitterWrapperPass.html">llvm::OptimizationRemarkEmitterWrapperPass</a></div><div class="ttdoc">OptimizationRemarkEmitter legacy analysis pass.</div><div class="ttdef"><b>Definition:</b> <a href="OptimizationRemarkEmitter_8h_source.html#l00146">OptimizationRemarkEmitter.h:146</a></div></div>
<div class="ttc" id="anamespacellvm_html_a076f93c387f454f0db13d4bc7d4e7f9c"><div class="ttname"><a href="namespacellvm.html#a076f93c387f454f0db13d4bc7d4e7f9c">llvm::stable_sort</a></div><div class="ttdeci">void stable_sort(R &amp;&amp;Range)</div><div class="ttdef"><b>Definition:</b> <a href="STLExtras_8h_source.html#l01669">STLExtras.h:1669</a></div></div>
<div class="ttc" id="aclassllvm_1_1DenseMapBase_html_a65520b9c67759099e313d0f4e7b5ff9e"><div class="ttname"><a href="classllvm_1_1DenseMapBase.html#a65520b9c67759099e313d0f4e7b5ff9e">llvm::DenseMapBase&lt; DenseMap&lt; KeyT, ValueT, DenseMapInfo&lt; KeyT &gt;, llvm::detail::DenseMapPair&lt; KeyT, ValueT &gt; &gt;, KeyT, ValueT, DenseMapInfo&lt; KeyT &gt;, llvm::detail::DenseMapPair&lt; KeyT, ValueT &gt; &gt;::end</a></div><div class="ttdeci">iterator end()</div><div class="ttdef"><b>Definition:</b> <a href="DenseMap_8h_source.html#l00083">DenseMap.h:83</a></div></div>
<div class="ttc" id="aclassllvm_1_1PreservedAnalyses_html_a1258a1ff55557c27684010ebd7283712"><div class="ttname"><a href="classllvm_1_1PreservedAnalyses.html#a1258a1ff55557c27684010ebd7283712">llvm::PreservedAnalyses::all</a></div><div class="ttdeci">static PreservedAnalyses all()</div><div class="ttdoc">Construct a special preserved set that preserves all passes.</div><div class="ttdef"><b>Definition:</b> <a href="PassManager_8h_source.html#l00161">PassManager.h:161</a></div></div>
<div class="ttc" id="aclassllvm_1_1Function_html_a8052a4f265aa7540f68ca3103a55538d"><div class="ttname"><a href="classllvm_1_1Function.html#a8052a4f265aa7540f68ca3103a55538d">llvm::Function::getArg</a></div><div class="ttdeci">Argument * getArg(unsigned i) const</div><div class="ttdef"><b>Definition:</b> <a href="Function_8h_source.html#l00812">Function.h:812</a></div></div>
<div class="ttc" id="allvm_2Transforms_2IPO_8h_html"><div class="ttname"><a href="llvm_2Transforms_2IPO_8h.html">IPO.h</a></div></div>
<div class="ttc" id="astructllvm_1_1OutlinableRegion_html"><div class="ttname"><a href="structllvm_1_1OutlinableRegion.html">llvm::OutlinableRegion</a></div><div class="ttdoc">The OutlinableRegion holds all the information for a specific region, or sequence of instructions.</div><div class="ttdef"><b>Definition:</b> <a href="IROutliner_8h_source.html#l00064">IROutliner.h:64</a></div></div>
<div class="ttc" id="aIRSimilarityIdentifier_8h_html"><div class="ttname"><a href="IRSimilarityIdentifier_8h.html">IRSimilarityIdentifier.h</a></div></div>
<div class="ttc" id="aclassllvm_1_1IRSimilarity_1_1IRSimilarityCandidate_html_ada960ccf6a96ca62ce5db3af1b7bf7f5"><div class="ttname"><a href="classllvm_1_1IRSimilarity_1_1IRSimilarityCandidate.html#ada960ccf6a96ca62ce5db3af1b7bf7f5">llvm::IRSimilarity::IRSimilarityCandidate::getStartIdx</a></div><div class="ttdeci">unsigned getStartIdx() const</div><div class="ttdef"><b>Definition:</b> <a href="IRSimilarityIdentifier_8h_source.html#l00567">IRSimilarityIdentifier.h:567</a></div></div>
<div class="ttc" id="aPassManager_8h_html"><div class="ttname"><a href="PassManager_8h.html">PassManager.h</a></div><div class="ttdoc">This header defines various interfaces for pass management in LLVM.</div></div>
<div class="ttc" id="aclassllvm_1_1SetVector_html_a21c2c6ae5ec23004dc4020eacf83bbce"><div class="ttname"><a href="classllvm_1_1SetVector.html#a21c2c6ae5ec23004dc4020eacf83bbce">llvm::SetVector::count</a></div><div class="ttdeci">size_type count(const key_type &amp;key) const</div><div class="ttdoc">Count the number of elements of a given key in the SetVector.</div><div class="ttdef"><b>Definition:</b> <a href="SetVector_8h_source.html#l00215">SetVector.h:215</a></div></div>
<div class="ttc" id="anamespacellvm_1_1object_html_a42e5b6ee6f67085d2115b2ea44588c47acfaaa2f9ff08c82a08d647efc1a2964b"><div class="ttname"><a href="namespacellvm_1_1object.html#a42e5b6ee6f67085d2115b2ea44588c47acfaaa2f9ff08c82a08d647efc1a2964b">llvm::object::Identifier</a></div><div class="ttdeci">@ Identifier</div><div class="ttdef"><b>Definition:</b> <a href="COFFModuleDefinition_8cpp_source.html#l00036">COFFModuleDefinition.cpp:36</a></div></div>
<div class="ttc" id="aclassllvm_1_1Function_html_adf50671db83d2813e0d897ea2cfc9102"><div class="ttname"><a href="classllvm_1_1Function.html#adf50671db83d2813e0d897ea2cfc9102">llvm::Function::getFunctionType</a></div><div class="ttdeci">FunctionType * getFunctionType() const</div><div class="ttdoc">Returns the FunctionType for me.</div><div class="ttdef"><b>Definition:</b> <a href="Function_8h_source.html#l00176">Function.h:176</a></div></div>
<div class="ttc" id="aclassllvm_1_1IRSimilarity_1_1IRSimilarityCandidate_html"><div class="ttname"><a href="classllvm_1_1IRSimilarity_1_1IRSimilarityCandidate.html">llvm::IRSimilarity::IRSimilarityCandidate</a></div><div class="ttdoc">This is a class that wraps a range of IRInstructionData from one point to another in the vector of IR...</div><div class="ttdef"><b>Definition:</b> <a href="IRSimilarityIdentifier_8h_source.html#l00470">IRSimilarityIdentifier.h:470</a></div></div>
<div class="ttc" id="aclassllvm_1_1TargetTransformInfo_html_ad2b33509e6c7f832b7a7198d13d8bc79"><div class="ttname"><a href="classllvm_1_1TargetTransformInfo.html#ad2b33509e6c7f832b7a7198d13d8bc79">llvm::TargetTransformInfo::getInstructionCost</a></div><div class="ttdeci">InstructionCost getInstructionCost(const Instruction *I, enum TargetCostKind kind) const</div><div class="ttdoc">Query the cost of a specified instruction.</div><div class="ttdef"><b>Definition:</b> <a href="TargetTransformInfo_8h_source.html#l00224">TargetTransformInfo.h:224</a></div></div>
<div class="ttc" id="aclassllvm_1_1CodeExtractorAnalysisCache_html"><div class="ttname"><a href="classllvm_1_1CodeExtractorAnalysisCache.html">llvm::CodeExtractorAnalysisCache</a></div><div class="ttdoc">A cache for the CodeExtractor analysis.</div><div class="ttdef"><b>Definition:</b> <a href="CodeExtractor_8h_source.html#l00046">CodeExtractor.h:46</a></div></div>
<div class="ttc" id="aIROutliner_8cpp_html_a48d81e3f58b8db143bc85763d25dbc7a"><div class="ttname"><a href="IROutliner_8cpp.html#a48d81e3f58b8db143bc85763d25dbc7a">getCodeExtractorArguments</a></div><div class="ttdeci">static void getCodeExtractorArguments(OutlinableRegion &amp;Region, std::vector&lt; unsigned &gt; &amp;InputGVNs, DenseSet&lt; unsigned &gt; &amp;NotSame, DenseMap&lt; Value *, Value * &gt; &amp;OutputMappings, SetVector&lt; Value * &gt; &amp;ArgInputs, SetVector&lt; Value * &gt; &amp;Outputs)</div><div class="ttdoc">Find the input GVNs and the output values for a region of Instructions.</div><div class="ttdef"><b>Definition:</b> <a href="IROutliner_8cpp_source.html#l00578">IROutliner.cpp:578</a></div></div>
<div class="ttc" id="aclassllvm_1_1Type_html_a6e20e76960d952de088354cbcd14c3ab"><div class="ttname"><a href="classllvm_1_1Type.html#a6e20e76960d952de088354cbcd14c3ab">llvm::Type::getVoidTy</a></div><div class="ttdeci">static Type * getVoidTy(LLVMContext &amp;C)</div><div class="ttdef"><b>Definition:</b> <a href="Type_8cpp_source.html#l00186">Type.cpp:186</a></div></div>
<div class="ttc" id="aclassllvm_1_1OptimizationRemark_html"><div class="ttname"><a href="classllvm_1_1OptimizationRemark.html">llvm::OptimizationRemark</a></div><div class="ttdoc">Diagnostic information for applied optimization remarks.</div><div class="ttdef"><b>Definition:</b> <a href="DiagnosticInfo_8h_source.html#l00684">DiagnosticInfo.h:684</a></div></div>
<div class="ttc" id="astructOutlinableGroup_html_a41d9175e78c75fb14134d35303ded45a"><div class="ttname"><a href="structOutlinableGroup.html#a41d9175e78c75fb14134d35303ded45a">OutlinableGroup::SwiftErrorArgument</a></div><div class="ttdeci">Optional&lt; unsigned &gt; SwiftErrorArgument</div><div class="ttdoc">The argument that needs to be marked with the swifterr attribute.</div><div class="ttdef"><b>Definition:</b> <a href="IROutliner_8cpp_source.html#l00099">IROutliner.cpp:99</a></div></div>
<div class="ttc" id="aclassllvm_1_1BasicBlock_html_ab9f68be0e2bcdf14f503f45edea63023"><div class="ttname"><a href="classllvm_1_1BasicBlock.html#ab9f68be0e2bcdf14f503f45edea63023">llvm::BasicBlock::size</a></div><div class="ttdeci">size_t size() const</div><div class="ttdef"><b>Definition:</b> <a href="BasicBlock_8h_source.html#l00306">BasicBlock.h:306</a></div></div>
<div class="ttc" id="aclassllvm_1_1Instruction_html_a1a7f07aaef6a3bee130bf0e0f0536802"><div class="ttname"><a href="classllvm_1_1Instruction.html#a1a7f07aaef6a3bee130bf0e0f0536802">llvm::Instruction::getParent</a></div><div class="ttdeci">const BasicBlock * getParent() const</div><div class="ttdef"><b>Definition:</b> <a href="IR_2Instruction_8h_source.html#l00094">Instruction.h:94</a></div></div>
<div class="ttc" id="anamespacellvm_html_a13c1b5a253da5da49ce33d03dc1efc07"><div class="ttname"><a href="namespacellvm.html#a13c1b5a253da5da49ce33d03dc1efc07">llvm::to_string</a></div><div class="ttdeci">std::string to_string(const T &amp;Value)</div><div class="ttdef"><b>Definition:</b> <a href="ScopedPrinter_8h_source.html#l00063">ScopedPrinter.h:63</a></div></div>
<div class="ttc" id="aclassllvm_1_1ArrayRef_html_a85ffb6531d4cda988ea81f18d4e56fb7"><div class="ttname"><a href="classllvm_1_1ArrayRef.html#a85ffb6531d4cda988ea81f18d4e56fb7">llvm::ArrayRef::size</a></div><div class="ttdeci">size_t size() const</div><div class="ttdoc">size - Get the array size.</div><div class="ttdef"><b>Definition:</b> <a href="ArrayRef_8h_source.html#l00165">ArrayRef.h:165</a></div></div>
<div class="ttc" id="aTargetTransformInfo_8h_html"><div class="ttname"><a href="TargetTransformInfo_8h.html">TargetTransformInfo.h</a></div><div class="ttdoc">This pass exposes codegen information to IR-level passes.</div></div>
<div class="ttc" id="aclassllvm_1_1detail_1_1DenseSetImpl_html_af972d87e15b5f6ed61bd5c3956c5213d"><div class="ttname"><a href="classllvm_1_1detail_1_1DenseSetImpl.html#af972d87e15b5f6ed61bd5c3956c5213d">llvm::detail::DenseSetImpl::erase</a></div><div class="ttdeci">bool erase(const ValueT &amp;V)</div><div class="ttdef"><b>Definition:</b> <a href="DenseSet_8h_source.html#l00101">DenseSet.h:101</a></div></div>
<div class="ttc" id="aclassllvm_1_1DISubprogram_html"><div class="ttname"><a href="classllvm_1_1DISubprogram.html">llvm::DISubprogram</a></div><div class="ttdoc">Subprogram description.</div><div class="ttdef"><b>Definition:</b> <a href="DebugInfoMetadata_8h_source.html#l01802">DebugInfoMetadata.h:1802</a></div></div>
<div class="ttc" id="aclassllvm_1_1CodeExtractor_html_ad3a4770e725305d3529cba8c6562c85a"><div class="ttname"><a href="classllvm_1_1CodeExtractor.html#ad3a4770e725305d3529cba8c6562c85a">llvm::CodeExtractor::isEligible</a></div><div class="ttdeci">bool isEligible() const</div><div class="ttdoc">Test whether this code extractor is eligible.</div><div class="ttdef"><b>Definition:</b> <a href="CodeExtractor_8cpp_source.html#l00619">CodeExtractor.cpp:619</a></div></div>
<div class="ttc" id="aclassllvm_1_1AnalysisManager_html"><div class="ttname"><a href="classllvm_1_1AnalysisManager.html">llvm::AnalysisManager</a></div><div class="ttdoc">A container for analyses that lazily runs them and caches their results.</div><div class="ttdef"><b>Definition:</b> <a href="PassManager_8h_source.html#l00615">PassManager.h:615</a></div></div>
<div class="ttc" id="aclassllvm_1_1InnerAnalysisManagerProxy_html"><div class="ttname"><a href="classllvm_1_1InnerAnalysisManagerProxy.html">llvm::InnerAnalysisManagerProxy</a></div><div class="ttdoc">An analysis over an &quot;outer&quot; IR unit that provides access to an analysis manager over an &quot;inner&quot; IR un...</div><div class="ttdef"><b>Definition:</b> <a href="PassManager_8h_source.html#l00926">PassManager.h:928</a></div></div>
<div class="ttc" id="aclassllvm_1_1IROutliner_html"><div class="ttname"><a href="classllvm_1_1IROutliner.html">llvm::IROutliner</a></div><div class="ttdoc">This class is a pass that identifies similarity in a Module, extracts instances of the similarity,...</div><div class="ttdef"><b>Definition:</b> <a href="IROutliner_8h_source.html#l00163">IROutliner.h:163</a></div></div>
<div class="ttc" id="aclassllvm_1_1CallInst_html"><div class="ttname"><a href="classllvm_1_1CallInst.html">llvm::CallInst</a></div><div class="ttdoc">This class represents a function call, abstracting a target machine's calling convention.</div><div class="ttdef"><b>Definition:</b> <a href="Instructions_8h_source.html#l01475">Instructions.h:1475</a></div></div>
<div class="ttc" id="alib_2CodeGen_2README_8txt_html_a09776db24cf586ec9f1e18f3bae14099"><div class="ttname"><a href="lib_2CodeGen_2README_8txt.html#a09776db24cf586ec9f1e18f3bae14099">BB</a></div><div class="ttdeci">Common register allocation spilling lr str ldr sxth r3 ldr mla r4 can lr mov lr str ldr sxth r3 mla r4 and then merge mul and lr str ldr sxth r3 mla r4 It also increase the likelihood the store may become dead bb27 Successors according to LLVM BB</div><div class="ttdef"><b>Definition:</b> <a href="lib_2CodeGen_2README_8txt_source.html#l00039">README.txt:39</a></div></div>
<div class="ttc" id="astructOutlinableGroup_html_a40f09cb42d8cb90b4e8fdbd36da765d8"><div class="ttname"><a href="structOutlinableGroup.html#a40f09cb42d8cb90b4e8fdbd36da765d8">OutlinableGroup::EndBB</a></div><div class="ttdeci">BasicBlock * EndBB</div><div class="ttdoc">The return block for the overall function.</div><div class="ttdef"><b>Definition:</b> <a href="IROutliner_8cpp_source.html#l00075">IROutliner.cpp:75</a></div></div>
<div class="ttc" id="aclassllvm_1_1IRSimilarity_1_1IRSimilarityIdentifier_html"><div class="ttname"><a href="classllvm_1_1IRSimilarity_1_1IRSimilarityIdentifier.html">llvm::IRSimilarity::IRSimilarityIdentifier</a></div><div class="ttdoc">This class puts all the pieces of the IRInstructionData, IRInstructionMapper, IRSimilarityCandidate t...</div><div class="ttdef"><b>Definition:</b> <a href="IRSimilarityIdentifier_8h_source.html#l00652">IRSimilarityIdentifier.h:652</a></div></div>
<div class="ttc" id="aclassllvm_1_1Value_html_a7e8dad1701aa6445be4a29f654b0473c"><div class="ttname"><a href="classllvm_1_1Value.html#a7e8dad1701aa6445be4a29f654b0473c">llvm::Value::replaceUsesWithIf</a></div><div class="ttdeci">void replaceUsesWithIf(Value *New, llvm::function_ref&lt; bool(Use &amp;U)&gt; ShouldReplace)</div><div class="ttdoc">Go through the uses list for this definition and make each use point to &quot;V&quot; if the callback ShouldRep...</div><div class="ttdef"><b>Definition:</b> <a href="Value_8cpp_source.html#l00528">Value.cpp:528</a></div></div>
<div class="ttc" id="aclassllvm_1_1AnalysisUsage_html_ae5c60fd282ee894c87ea02c3f0fcb6d0"><div class="ttname"><a href="classllvm_1_1AnalysisUsage.html#ae5c60fd282ee894c87ea02c3f0fcb6d0">llvm::AnalysisUsage::addRequired</a></div><div class="ttdeci">AnalysisUsage &amp; addRequired()</div><div class="ttdef"><b>Definition:</b> <a href="PassAnalysisSupport_8h_source.html#l00075">PassAnalysisSupport.h:75</a></div></div>
<div class="ttc" id="aclassllvm_1_1simple__ilist_html_a7f4bd492b552181942252ccddc0db26e"><div class="ttname"><a href="classllvm_1_1simple__ilist.html#a7f4bd492b552181942252ccddc0db26e">llvm::simple_ilist::insert</a></div><div class="ttdeci">iterator insert(iterator I, reference Node)</div><div class="ttdoc">Insert a node by reference; never copies.</div><div class="ttdef"><b>Definition:</b> <a href="simple__ilist_8h_source.html#l00159">simple_ilist.h:159</a></div></div>
<div class="ttc" id="aclassllvm_1_1TargetTransformInfo_html_ac44f6b9fdbb5f9cc199f8329cb0b272cae46c9eecc49bd2dc253c607e78a0fb86"><div class="ttname"><a href="classllvm_1_1TargetTransformInfo.html#ac44f6b9fdbb5f9cc199f8329cb0b272cae46c9eecc49bd2dc253c607e78a0fb86">llvm::TargetTransformInfo::TCC_Basic</a></div><div class="ttdeci">@ TCC_Basic</div><div class="ttdoc">The cost of a typical 'add' instruction.</div><div class="ttdef"><b>Definition:</b> <a href="TargetTransformInfo_8h_source.html#l00262">TargetTransformInfo.h:262</a></div></div>
<div class="ttc" id="aclassllvm_1_1SwitchInst_html"><div class="ttname"><a href="classllvm_1_1SwitchInst.html">llvm::SwitchInst</a></div><div class="ttdoc">Multiway switch.</div><div class="ttdef"><b>Definition:</b> <a href="Instructions_8h_source.html#l03176">Instructions.h:3176</a></div></div>
<div class="ttc" id="aclassllvm_1_1DebugLoc_html"><div class="ttname"><a href="classllvm_1_1DebugLoc.html">llvm::DebugLoc</a></div><div class="ttdoc">A debug info location.</div><div class="ttdef"><b>Definition:</b> <a href="DebugLoc_8h_source.html#l00033">DebugLoc.h:33</a></div></div>
<div class="ttc" id="aclassllvm_1_1SwitchInst_html_a62abc2475d09c01d583ba24a487898fd"><div class="ttname"><a href="classllvm_1_1SwitchInst.html#a62abc2475d09c01d583ba24a487898fd">llvm::SwitchInst::addCase</a></div><div class="ttdeci">void addCase(ConstantInt *OnVal, BasicBlock *Dest)</div><div class="ttdoc">Add an entry to the switch instruction.</div><div class="ttdef"><b>Definition:</b> <a href="Instructions_8cpp_source.html#l04074">Instructions.cpp:4074</a></div></div>
<div class="ttc" id="astructllvm_1_1cl_1_1desc_html"><div class="ttname"><a href="structllvm_1_1cl_1_1desc.html">llvm::cl::desc</a></div><div class="ttdef"><b>Definition:</b> <a href="CommandLine_8h_source.html#l00414">CommandLine.h:414</a></div></div>
<div class="ttc" id="aclassllvm_1_1Region_html"><div class="ttname"><a href="classllvm_1_1Region.html">llvm::Region</a></div><div class="ttdef"><b>Definition:</b> <a href="RegionInfo_8h_source.html#l00889">RegionInfo.h:889</a></div></div>
<div class="ttc" id="aclassllvm_1_1SetVector_html"><div class="ttname"><a href="classllvm_1_1SetVector.html">llvm::SetVector&lt; Value * &gt;</a></div></div>
<div class="ttc" id="anamespaceCU_html"><div class="ttname"><a href="namespaceCU.html">CU</a></div><div class="ttdef"><b>Definition:</b> <a href="AArch64AsmBackend_8cpp_source.html#l00499">AArch64AsmBackend.cpp:499</a></div></div>
<div class="ttc" id="aInitializePasses_8h_html"><div class="ttname"><a href="InitializePasses_8h.html">InitializePasses.h</a></div></div>
<div class="ttc" id="aIROutliner_8cpp_html_aa304ec6dc0794143885b97291ad23fb9"><div class="ttname"><a href="IROutliner_8cpp.html#aa304ec6dc0794143885b97291ad23fb9">iroutliner</a></div><div class="ttdeci">iroutliner</div><div class="ttdef"><b>Definition:</b> <a href="IROutliner_8cpp_source.html#l01838">IROutliner.cpp:1838</a></div></div>
<div class="ttc" id="aclassllvm_1_1Value_html"><div class="ttname"><a href="classllvm_1_1Value.html">llvm::Value</a></div><div class="ttdoc">LLVM Value Representation.</div><div class="ttdef"><b>Definition:</b> <a href="Value_8h_source.html#l00075">Value.h:75</a></div></div>
<div class="ttc" id="astructllvm_1_1OutlinableRegion_html_a9db9e67d9d8c8f5c0cd2b8a64915f884"><div class="ttname"><a href="structllvm_1_1OutlinableRegion.html#a9db9e67d9d8c8f5c0cd2b8a64915f884">llvm::OutlinableRegion::Candidate</a></div><div class="ttdeci">IRSimilarityCandidate * Candidate</div><div class="ttdoc">Describes the region of code.</div><div class="ttdef"><b>Definition:</b> <a href="IROutliner_8h_source.html#l00066">IROutliner.h:66</a></div></div>
<div class="ttc" id="aclassllvm_1_1Optional_html_a9ed8669536d806aff028d983595bab4d"><div class="ttname"><a href="classllvm_1_1Optional.html#a9ed8669536d806aff028d983595bab4d">llvm::Optional::getValue</a></div><div class="ttdeci">constexpr const T &amp; getValue() const LLVM_LVALUE_FUNCTION</div><div class="ttdef"><b>Definition:</b> <a href="Optional_8h_source.html#l00282">Optional.h:282</a></div></div>
<div class="ttc" id="aclassllvm_1_1DIScope_html_a875719877cc384dbe437a63fdb579030"><div class="ttname"><a href="classllvm_1_1DIScope.html#a875719877cc384dbe437a63fdb579030">llvm::DIScope::getFile</a></div><div class="ttdeci">DIFile * getFile() const</div><div class="ttdef"><b>Definition:</b> <a href="DebugInfoMetadata_8h_source.html#l00484">DebugInfoMetadata.h:484</a></div></div>
<div class="ttc" id="aclassllvm_1_1DIFile_html"><div class="ttname"><a href="classllvm_1_1DIFile.html">llvm::DIFile</a></div><div class="ttdoc">File.</div><div class="ttdef"><b>Definition:</b> <a href="DebugInfoMetadata_8h_source.html#l00530">DebugInfoMetadata.h:530</a></div></div>
<div class="ttc" id="aclassllvm_1_1FunctionType_html"><div class="ttname"><a href="classllvm_1_1FunctionType.html">llvm::FunctionType</a></div><div class="ttdoc">Class to represent function types.</div><div class="ttdef"><b>Definition:</b> <a href="DerivedTypes_8h_source.html#l00102">DerivedTypes.h:102</a></div></div>
<div class="ttc" id="aclassllvm_1_1Use_html"><div class="ttname"><a href="classllvm_1_1Use.html">llvm::Use</a></div><div class="ttdoc">A Use represents the edge between a Value definition and its users.</div><div class="ttdef"><b>Definition:</b> <a href="Use_8h_source.html#l00044">Use.h:44</a></div></div>
<div class="ttc" id="aclassllvm_1_1Function_html_a19595c245bd2e3eefa93ce22db5ad15f"><div class="ttname"><a href="classllvm_1_1Function.html#a19595c245bd2e3eefa93ce22db5ad15f">llvm::Function::iterator</a></div><div class="ttdeci">BasicBlockListType::iterator iterator</div><div class="ttdef"><b>Definition:</b> <a href="Function_8h_source.html#l00067">Function.h:67</a></div></div>
<div class="ttc" id="aclassllvm_1_1RegionBase_html_a001c71505d9c3f8d39aed9227a0a6e74"><div class="ttname"><a href="classllvm_1_1RegionBase.html#a001c71505d9c3f8d39aed9227a0a6e74">llvm::RegionBase::getParent</a></div><div class="ttdeci">RegionT * getParent() const</div><div class="ttdoc">Get the parent of the Region.</div><div class="ttdef"><b>Definition:</b> <a href="RegionInfo_8h_source.html#l00364">RegionInfo.h:364</a></div></div>
<div class="ttc" id="aIROutliner_8cpp_html_a8fa0458fc58f092253b63ede4e21d6d2"><div class="ttname"><a href="IROutliner_8cpp.html#a8fa0458fc58f092253b63ede4e21d6d2">Outliner</a></div><div class="ttdeci">IR Outliner</div><div class="ttdef"><b>Definition:</b> <a href="IROutliner_8cpp_source.html#l01838">IROutliner.cpp:1838</a></div></div>
<div class="ttc" id="anamespacellvm_1_1Intrinsic_html_a80add6b3b1cdaec560907995127adc16"><div class="ttname"><a href="namespacellvm_1_1Intrinsic.html#a80add6b3b1cdaec560907995127adc16">llvm::Intrinsic::ID</a></div><div class="ttdeci">unsigned ID</div><div class="ttdef"><b>Definition:</b> <a href="TargetTransformInfo_8h_source.html#l00038">TargetTransformInfo.h:38</a></div></div>
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated on Tue Feb 8 2022 04:55:51 for LLVM by&#160;<a href="http://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.8.20
</small></address>
</body>
</html>
