<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.20"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>LLVM: lib/Frontend/OpenMP/OMPIRBuilder.cpp Source File</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<script type="text/x-mathjax-config">
  MathJax.Hub.Config({
    extensions: ["tex2jax.js"],
    jax: ["input/TeX","output/HTML-CSS"],
});
</script>
<script type="text/javascript" async="async" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.7/MathJax.js/MathJax.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">LLVM
   &#160;<span id="projectnumber">13.0.1</span>
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.20 -->
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',false,false,'search.php','Search');
});
/* @license-end */</script>
<div id="main-nav"></div>
<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="dir_97aefd0d527b934f1d99a682da8fe6a9.html">lib</a></li><li class="navelem"><a class="el" href="dir_852f2fa92acda3856ce29eb983aeba4a.html">Frontend</a></li><li class="navelem"><a class="el" href="dir_159656d92d18068c5bee1980a613048e.html">OpenMP</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="headertitle">
<div class="title">OMPIRBuilder.cpp</div>  </div>
</div><!--header-->
<div class="contents">
<a href="OMPIRBuilder_8cpp.html">Go to the documentation of this file.</a><div class="fragment"><div class="line"><a name="l00001"></a><span class="lineno">    1</span>&#160;<span class="comment">//===- OpenMPIRBuilder.cpp - Builder for LLVM-IR for OpenMP directives ----===//</span></div>
<div class="line"><a name="l00002"></a><span class="lineno">    2</span>&#160;<span class="comment">//</span></div>
<div class="line"><a name="l00003"></a><span class="lineno">    3</span>&#160;<span class="comment">// Part of the LLVM Project, under the Apache License v2.0 with LLVM Exceptions.</span></div>
<div class="line"><a name="l00004"></a><span class="lineno">    4</span>&#160;<span class="comment">// See https://llvm.org/LICENSE.txt for license information.</span></div>
<div class="line"><a name="l00005"></a><span class="lineno">    5</span>&#160;<span class="comment">// SPDX-License-Identifier: Apache-2.0 WITH LLVM-exception</span></div>
<div class="line"><a name="l00006"></a><span class="lineno">    6</span>&#160;<span class="comment">//</span></div>
<div class="line"><a name="l00007"></a><span class="lineno">    7</span>&#160;<span class="comment">//===----------------------------------------------------------------------===//</span><span class="comment"></span></div>
<div class="line"><a name="l00008"></a><span class="lineno">    8</span>&#160;<span class="comment">/// \file</span></div>
<div class="line"><a name="l00009"></a><span class="lineno">    9</span>&#160;<span class="comment">///</span></div>
<div class="line"><a name="l00010"></a><span class="lineno">   10</span>&#160;<span class="comment">/// This file implements the OpenMPIRBuilder class, which is used as a</span></div>
<div class="line"><a name="l00011"></a><span class="lineno">   11</span>&#160;<span class="comment">/// convenient way to create LLVM instructions for OpenMP directives.</span></div>
<div class="line"><a name="l00012"></a><span class="lineno">   12</span>&#160;<span class="comment">///</span></div>
<div class="line"><a name="l00013"></a><span class="lineno">   13</span>&#160;<span class="comment"></span><span class="comment">//===----------------------------------------------------------------------===//</span></div>
<div class="line"><a name="l00014"></a><span class="lineno">   14</span>&#160; </div>
<div class="line"><a name="l00015"></a><span class="lineno">   15</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="OMPIRBuilder_8h.html">llvm/Frontend/OpenMP/OMPIRBuilder.h</a>&quot;</span></div>
<div class="line"><a name="l00016"></a><span class="lineno">   16</span>&#160; </div>
<div class="line"><a name="l00017"></a><span class="lineno">   17</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="StringRef_8h.html">llvm/ADT/StringRef.h</a>&quot;</span></div>
<div class="line"><a name="l00018"></a><span class="lineno">   18</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="Triple_8h.html">llvm/ADT/Triple.h</a>&quot;</span></div>
<div class="line"><a name="l00019"></a><span class="lineno">   19</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="IR_2CFG_8h.html">llvm/IR/CFG.h</a>&quot;</span></div>
<div class="line"><a name="l00020"></a><span class="lineno">   20</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="llvm_2IR_2DebugInfo_8h.html">llvm/IR/DebugInfo.h</a>&quot;</span></div>
<div class="line"><a name="l00021"></a><span class="lineno">   21</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="IRBuilder_8h.html">llvm/IR/IRBuilder.h</a>&quot;</span></div>
<div class="line"><a name="l00022"></a><span class="lineno">   22</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="MDBuilder_8h.html">llvm/IR/MDBuilder.h</a>&quot;</span></div>
<div class="line"><a name="l00023"></a><span class="lineno">   23</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="Value_8h.html">llvm/IR/Value.h</a>&quot;</span></div>
<div class="line"><a name="l00024"></a><span class="lineno">   24</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="CommandLine_8h.html">llvm/Support/CommandLine.h</a>&quot;</span></div>
<div class="line"><a name="l00025"></a><span class="lineno">   25</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="llvm_2Support_2Error_8h.html">llvm/Support/Error.h</a>&quot;</span></div>
<div class="line"><a name="l00026"></a><span class="lineno">   26</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="BasicBlockUtils_8h.html">llvm/Transforms/Utils/BasicBlockUtils.h</a>&quot;</span></div>
<div class="line"><a name="l00027"></a><span class="lineno">   27</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="CodeExtractor_8h.html">llvm/Transforms/Utils/CodeExtractor.h</a>&quot;</span></div>
<div class="line"><a name="l00028"></a><span class="lineno">   28</span>&#160; </div>
<div class="line"><a name="l00029"></a><span class="lineno">   29</span>&#160;<span class="preprocessor">#include &lt;sstream&gt;</span></div>
<div class="line"><a name="l00030"></a><span class="lineno">   30</span>&#160; </div>
<div class="line"><a name="l00031"></a><span class="lineno"><a class="line" href="OMPIRBuilder_8cpp.html#ad78e062f62e0d6e453941fb4ca843e4d">   31</a></span>&#160;<span class="preprocessor">#define DEBUG_TYPE &quot;openmp-ir-builder&quot;</span></div>
<div class="line"><a name="l00032"></a><span class="lineno">   32</span>&#160; </div>
<div class="line"><a name="l00033"></a><span class="lineno">   33</span>&#160;<span class="keyword">using namespace </span><a class="code" href="namespacellvm.html">llvm</a>;</div>
<div class="line"><a name="l00034"></a><span class="lineno">   34</span>&#160;<span class="keyword">using namespace </span>omp;</div>
<div class="line"><a name="l00035"></a><span class="lineno">   35</span>&#160; </div>
<div class="line"><a name="l00036"></a><span class="lineno">   36</span>&#160;<span class="keyword">static</span> <a class="code" href="classllvm_1_1cl_1_1opt.html">cl::opt&lt;bool&gt;</a></div>
<div class="line"><a name="l00037"></a><span class="lineno"><a class="line" href="OMPIRBuilder_8cpp.html#afe7d677770e0678840e54ebb3a9b932c">   37</a></span>&#160;    <a class="code" href="OMPIRBuilder_8cpp.html#afe7d677770e0678840e54ebb3a9b932c">OptimisticAttributes</a>(<span class="stringliteral">&quot;openmp-ir-builder-optimistic-attributes&quot;</span>, <a class="code" href="namespacellvm_1_1cl.html#a68075925a54790e71ca790e1d4f21a40a263ac008d8d31f13ce460395fc4cf7e6">cl::Hidden</a>,</div>
<div class="line"><a name="l00038"></a><span class="lineno">   38</span>&#160;                         <a class="code" href="structllvm_1_1cl_1_1desc.html">cl::desc</a>(<span class="stringliteral">&quot;Use optimistic attributes describing &quot;</span></div>
<div class="line"><a name="l00039"></a><span class="lineno">   39</span>&#160;                                  <span class="stringliteral">&quot;&#39;as-if&#39; properties of runtime calls.&quot;</span>),</div>
<div class="line"><a name="l00040"></a><span class="lineno">   40</span>&#160;                         <a class="code" href="namespacellvm_1_1cl.html#a10a041239ae1870cfcc064bfaa79fb65">cl::init</a>(<span class="keyword">false</span>));</div>
<div class="line"><a name="l00041"></a><span class="lineno">   41</span>&#160; </div>
<div class="line"><a name="l00042"></a><span class="lineno"><a class="line" href="classllvm_1_1OpenMPIRBuilder.html#a50c6490cf353f064946c4e32673ac098">   42</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="classllvm_1_1OpenMPIRBuilder.html#a50c6490cf353f064946c4e32673ac098">OpenMPIRBuilder::addAttributes</a>(<a class="code" href="namespacellvm_1_1omp.html#a4c503140c7f851151906d85b515330e9">omp::RuntimeFunction</a> FnID, <a class="code" href="classllvm_1_1Function.html">Function</a> &amp;Fn) {</div>
<div class="line"><a name="l00043"></a><span class="lineno">   43</span>&#160;  <a class="code" href="classllvm_1_1LLVMContext.html">LLVMContext</a> &amp;Ctx = Fn.<a class="code" href="classllvm_1_1Function.html#a9fffac2512fe651f0d5e37e27f5bd51c">getContext</a>();</div>
<div class="line"><a name="l00044"></a><span class="lineno">   44</span>&#160; </div>
<div class="line"><a name="l00045"></a><span class="lineno">   45</span>&#160;  <span class="comment">// Get the function&#39;s current attributes.</span></div>
<div class="line"><a name="l00046"></a><span class="lineno">   46</span>&#160;  <span class="keyword">auto</span> <a class="code" href="README__ALTIVEC_8txt.html#a9d3ba236d13373cde794da2023acc7a0">Attrs</a> = Fn.<a class="code" href="classllvm_1_1Function.html#a7477aafbbe989ad35b96fac186d8e9fd">getAttributes</a>();</div>
<div class="line"><a name="l00047"></a><span class="lineno">   47</span>&#160;  <span class="keyword">auto</span> FnAttrs = <a class="code" href="README__ALTIVEC_8txt.html#a9d3ba236d13373cde794da2023acc7a0">Attrs</a>.getFnAttributes();</div>
<div class="line"><a name="l00048"></a><span class="lineno">   48</span>&#160;  <span class="keyword">auto</span> RetAttrs = <a class="code" href="README__ALTIVEC_8txt.html#a9d3ba236d13373cde794da2023acc7a0">Attrs</a>.getRetAttributes();</div>
<div class="line"><a name="l00049"></a><span class="lineno">   49</span>&#160;  <a class="code" href="classllvm_1_1SmallVector.html">SmallVector&lt;AttributeSet, 4&gt;</a> ArgAttrs;</div>
<div class="line"><a name="l00050"></a><span class="lineno">   50</span>&#160;  <span class="keywordflow">for</span> (<span class="keywordtype">size_t</span> ArgNo = 0; ArgNo &lt; Fn.<a class="code" href="classllvm_1_1Function.html#ac6baa801e4aea800984e760d5460662f">arg_size</a>(); ++ArgNo)</div>
<div class="line"><a name="l00051"></a><span class="lineno">   51</span>&#160;    ArgAttrs.<a class="code" href="classllvm_1_1SmallVectorImpl.html#a396fcfee6914c76974b73c3d203da6a5">emplace_back</a>(<a class="code" href="README__ALTIVEC_8txt.html#a9d3ba236d13373cde794da2023acc7a0">Attrs</a>.getParamAttributes(ArgNo));</div>
<div class="line"><a name="l00052"></a><span class="lineno">   52</span>&#160; </div>
<div class="line"><a name="l00053"></a><span class="lineno">   53</span>&#160;<span class="preprocessor">#define OMP_ATTRS_SET(VarName, AttrSet) AttributeSet VarName = AttrSet;</span></div>
<div class="line"><a name="l00054"></a><span class="lineno">   54</span>&#160;<span class="preprocessor">#include &quot;llvm/Frontend/OpenMP/OMPKinds.def&quot;</span></div>
<div class="line"><a name="l00055"></a><span class="lineno">   55</span>&#160; </div>
<div class="line"><a name="l00056"></a><span class="lineno">   56</span>&#160;  <span class="comment">// Add attributes to the function declaration.</span></div>
<div class="line"><a name="l00057"></a><span class="lineno">   57</span>&#160;  <span class="keywordflow">switch</span> (FnID) {</div>
<div class="line"><a name="l00058"></a><span class="lineno">   58</span>&#160;<span class="preprocessor">#define OMP_RTL_ATTRS(Enum, FnAttrSet, RetAttrSet, ArgAttrSets)                \</span></div>
<div class="line"><a name="l00059"></a><span class="lineno">   59</span>&#160;<span class="preprocessor">  case Enum:                                                                   \</span></div>
<div class="line"><a name="l00060"></a><span class="lineno">   60</span>&#160;<span class="preprocessor">    FnAttrs = FnAttrs.addAttributes(Ctx, FnAttrSet);                           \</span></div>
<div class="line"><a name="l00061"></a><span class="lineno">   61</span>&#160;<span class="preprocessor">    RetAttrs = RetAttrs.addAttributes(Ctx, RetAttrSet);                        \</span></div>
<div class="line"><a name="l00062"></a><span class="lineno">   62</span>&#160;<span class="preprocessor">    for (size_t ArgNo = 0; ArgNo &lt; ArgAttrSets.size(); ++ArgNo)                \</span></div>
<div class="line"><a name="l00063"></a><span class="lineno">   63</span>&#160;<span class="preprocessor">      ArgAttrs[ArgNo] =                                                        \</span></div>
<div class="line"><a name="l00064"></a><span class="lineno">   64</span>&#160;<span class="preprocessor">          ArgAttrs[ArgNo].addAttributes(Ctx, ArgAttrSets[ArgNo]);              \</span></div>
<div class="line"><a name="l00065"></a><span class="lineno">   65</span>&#160;<span class="preprocessor">    Fn.setAttributes(AttributeList::get(Ctx, FnAttrs, RetAttrs, ArgAttrs));    \</span></div>
<div class="line"><a name="l00066"></a><span class="lineno">   66</span>&#160;<span class="preprocessor">    break;</span></div>
<div class="line"><a name="l00067"></a><span class="lineno">   67</span>&#160;<span class="preprocessor">#include &quot;llvm/Frontend/OpenMP/OMPKinds.def&quot;</span></div>
<div class="line"><a name="l00068"></a><span class="lineno">   68</span>&#160;  <span class="keywordflow">default</span>:</div>
<div class="line"><a name="l00069"></a><span class="lineno">   69</span>&#160;    <span class="comment">// Attributes are optional.</span></div>
<div class="line"><a name="l00070"></a><span class="lineno">   70</span>&#160;    <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00071"></a><span class="lineno">   71</span>&#160;  }</div>
<div class="line"><a name="l00072"></a><span class="lineno">   72</span>&#160;}</div>
<div class="line"><a name="l00073"></a><span class="lineno">   73</span>&#160; </div>
<div class="line"><a name="l00074"></a><span class="lineno">   74</span>&#160;<a class="code" href="classllvm_1_1FunctionCallee.html">FunctionCallee</a></div>
<div class="line"><a name="l00075"></a><span class="lineno"><a class="line" href="classllvm_1_1OpenMPIRBuilder.html#a034dc6253a2a36f78ac071a7c12d5c27">   75</a></span>&#160;<a class="code" href="classllvm_1_1OpenMPIRBuilder.html#a034dc6253a2a36f78ac071a7c12d5c27">OpenMPIRBuilder::getOrCreateRuntimeFunction</a>(<a class="code" href="classllvm_1_1Module.html">Module</a> &amp;M, <a class="code" href="namespacellvm_1_1omp.html#a4c503140c7f851151906d85b515330e9">RuntimeFunction</a> FnID) {</div>
<div class="line"><a name="l00076"></a><span class="lineno">   76</span>&#160;  <a class="code" href="classllvm_1_1FunctionType.html">FunctionType</a> *FnTy = <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l00077"></a><span class="lineno">   77</span>&#160;  <a class="code" href="classllvm_1_1Function.html">Function</a> *Fn = <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l00078"></a><span class="lineno">   78</span>&#160; </div>
<div class="line"><a name="l00079"></a><span class="lineno">   79</span>&#160;  <span class="comment">// Try to find the declation in the module first.</span></div>
<div class="line"><a name="l00080"></a><span class="lineno">   80</span>&#160;  <span class="keywordflow">switch</span> (FnID) {</div>
<div class="line"><a name="l00081"></a><span class="lineno">   81</span>&#160;<span class="preprocessor">#define OMP_RTL(Enum, Str, IsVarArg, ReturnType, ...)                          \</span></div>
<div class="line"><a name="l00082"></a><span class="lineno">   82</span>&#160;<span class="preprocessor">  case Enum:                                                                   \</span></div>
<div class="line"><a name="l00083"></a><span class="lineno">   83</span>&#160;<span class="preprocessor">    FnTy = FunctionType::get(ReturnType, ArrayRef&lt;Type *&gt;{__VA_ARGS__},        \</span></div>
<div class="line"><a name="l00084"></a><span class="lineno">   84</span>&#160;<span class="preprocessor">                             IsVarArg);                                        \</span></div>
<div class="line"><a name="l00085"></a><span class="lineno">   85</span>&#160;<span class="preprocessor">    Fn = M.getFunction(Str);                                                   \</span></div>
<div class="line"><a name="l00086"></a><span class="lineno">   86</span>&#160;<span class="preprocessor">    break;</span></div>
<div class="line"><a name="l00087"></a><span class="lineno">   87</span>&#160;<span class="preprocessor">#include &quot;llvm/Frontend/OpenMP/OMPKinds.def&quot;</span></div>
<div class="line"><a name="l00088"></a><span class="lineno">   88</span>&#160;  }</div>
<div class="line"><a name="l00089"></a><span class="lineno">   89</span>&#160; </div>
<div class="line"><a name="l00090"></a><span class="lineno">   90</span>&#160;  <span class="keywordflow">if</span> (!Fn) {</div>
<div class="line"><a name="l00091"></a><span class="lineno">   91</span>&#160;    <span class="comment">// Create a new declaration if we need one.</span></div>
<div class="line"><a name="l00092"></a><span class="lineno">   92</span>&#160;    <span class="keywordflow">switch</span> (FnID) {</div>
<div class="line"><a name="l00093"></a><span class="lineno">   93</span>&#160;<span class="preprocessor">#define OMP_RTL(Enum, Str, ...)                                                \</span></div>
<div class="line"><a name="l00094"></a><span class="lineno">   94</span>&#160;<span class="preprocessor">  case Enum:                                                                   \</span></div>
<div class="line"><a name="l00095"></a><span class="lineno">   95</span>&#160;<span class="preprocessor">    Fn = Function::Create(FnTy, GlobalValue::ExternalLinkage, Str, M);         \</span></div>
<div class="line"><a name="l00096"></a><span class="lineno">   96</span>&#160;<span class="preprocessor">    break;</span></div>
<div class="line"><a name="l00097"></a><span class="lineno">   97</span>&#160;<span class="preprocessor">#include &quot;llvm/Frontend/OpenMP/OMPKinds.def&quot;</span></div>
<div class="line"><a name="l00098"></a><span class="lineno">   98</span>&#160;    }</div>
<div class="line"><a name="l00099"></a><span class="lineno">   99</span>&#160; </div>
<div class="line"><a name="l00100"></a><span class="lineno">  100</span>&#160;    <span class="comment">// Add information if the runtime function takes a callback function</span></div>
<div class="line"><a name="l00101"></a><span class="lineno">  101</span>&#160;    <span class="keywordflow">if</span> (FnID == OMPRTL___kmpc_fork_call || FnID == OMPRTL___kmpc_fork_teams) {</div>
<div class="line"><a name="l00102"></a><span class="lineno">  102</span>&#160;      <span class="keywordflow">if</span> (!Fn-&gt;<a class="code" href="classllvm_1_1GlobalObject.html#a1f496e54accb2cbe919fb456cb703f1a">hasMetadata</a>(LLVMContext::MD_callback)) {</div>
<div class="line"><a name="l00103"></a><span class="lineno">  103</span>&#160;        <a class="code" href="classllvm_1_1LLVMContext.html">LLVMContext</a> &amp;Ctx = Fn-&gt;<a class="code" href="classllvm_1_1Function.html#a9fffac2512fe651f0d5e37e27f5bd51c">getContext</a>();</div>
<div class="line"><a name="l00104"></a><span class="lineno">  104</span>&#160;        <a class="code" href="classllvm_1_1MDBuilder.html">MDBuilder</a> MDB(Ctx);</div>
<div class="line"><a name="l00105"></a><span class="lineno">  105</span>&#160;        <span class="comment">// Annotate the callback behavior of the runtime function:</span></div>
<div class="line"><a name="l00106"></a><span class="lineno">  106</span>&#160;        <span class="comment">//  - The callback callee is argument number 2 (microtask).</span></div>
<div class="line"><a name="l00107"></a><span class="lineno">  107</span>&#160;        <span class="comment">//  - The first two arguments of the callback callee are unknown (-1).</span></div>
<div class="line"><a name="l00108"></a><span class="lineno">  108</span>&#160;        <span class="comment">//  - All variadic arguments to the runtime function are passed to the</span></div>
<div class="line"><a name="l00109"></a><span class="lineno">  109</span>&#160;        <span class="comment">//    callback callee.</span></div>
<div class="line"><a name="l00110"></a><span class="lineno">  110</span>&#160;        Fn-&gt;<a class="code" href="classllvm_1_1GlobalObject.html#aa1b0638c63ba711320b3bb9c69367ed6">addMetadata</a>(</div>
<div class="line"><a name="l00111"></a><span class="lineno">  111</span>&#160;            LLVMContext::MD_callback,</div>
<div class="line"><a name="l00112"></a><span class="lineno">  112</span>&#160;            *<a class="code" href="classllvm_1_1MDNode.html#a7d10a7b9b7f40b04d27ed97c38ea1950">MDNode::get</a>(Ctx, {MDB.<a class="code" href="classllvm_1_1MDBuilder.html#a1d51e11adfffd05afe252d3398f50d4e">createCallbackEncoding</a>(</div>
<div class="line"><a name="l00113"></a><span class="lineno">  113</span>&#160;                                  2, {-1, -1}, <span class="comment">/* VarArgsArePassed */</span> <span class="keyword">true</span>)}));</div>
<div class="line"><a name="l00114"></a><span class="lineno">  114</span>&#160;      }</div>
<div class="line"><a name="l00115"></a><span class="lineno">  115</span>&#160;    }</div>
<div class="line"><a name="l00116"></a><span class="lineno">  116</span>&#160; </div>
<div class="line"><a name="l00117"></a><span class="lineno">  117</span>&#160;    <a class="code" href="Debug_8h.html#a08efc68d15935eb8889400a46c3749ba">LLVM_DEBUG</a>(<a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <span class="stringliteral">&quot;Created OpenMP runtime function &quot;</span> &lt;&lt; Fn-&gt;<a class="code" href="classllvm_1_1Value.html#adb5c319f5905c1d3ca9eb5df546388c5">getName</a>()</div>
<div class="line"><a name="l00118"></a><span class="lineno">  118</span>&#160;                      &lt;&lt; <span class="stringliteral">&quot; with type &quot;</span> &lt;&lt; *Fn-&gt;<a class="code" href="classllvm_1_1Function.html#adf50671db83d2813e0d897ea2cfc9102">getFunctionType</a>() &lt;&lt; <span class="stringliteral">&quot;\n&quot;</span>);</div>
<div class="line"><a name="l00119"></a><span class="lineno">  119</span>&#160;    addAttributes(FnID, *Fn);</div>
<div class="line"><a name="l00120"></a><span class="lineno">  120</span>&#160; </div>
<div class="line"><a name="l00121"></a><span class="lineno">  121</span>&#160;  } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00122"></a><span class="lineno">  122</span>&#160;    <a class="code" href="Debug_8h.html#a08efc68d15935eb8889400a46c3749ba">LLVM_DEBUG</a>(<a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <span class="stringliteral">&quot;Found OpenMP runtime function &quot;</span> &lt;&lt; Fn-&gt;<a class="code" href="classllvm_1_1Value.html#adb5c319f5905c1d3ca9eb5df546388c5">getName</a>()</div>
<div class="line"><a name="l00123"></a><span class="lineno">  123</span>&#160;                      &lt;&lt; <span class="stringliteral">&quot; with type &quot;</span> &lt;&lt; *Fn-&gt;<a class="code" href="classllvm_1_1Function.html#adf50671db83d2813e0d897ea2cfc9102">getFunctionType</a>() &lt;&lt; <span class="stringliteral">&quot;\n&quot;</span>);</div>
<div class="line"><a name="l00124"></a><span class="lineno">  124</span>&#160;  }</div>
<div class="line"><a name="l00125"></a><span class="lineno">  125</span>&#160; </div>
<div class="line"><a name="l00126"></a><span class="lineno">  126</span>&#160;  <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(Fn &amp;&amp; <span class="stringliteral">&quot;Failed to create OpenMP runtime function&quot;</span>);</div>
<div class="line"><a name="l00127"></a><span class="lineno">  127</span>&#160; </div>
<div class="line"><a name="l00128"></a><span class="lineno">  128</span>&#160;  <span class="comment">// Cast the function to the expected type if necessary</span></div>
<div class="line"><a name="l00129"></a><span class="lineno">  129</span>&#160;  <a class="code" href="classllvm_1_1Constant.html">Constant</a> *<a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a> = <a class="code" href="classllvm_1_1ConstantExpr.html#ae79d05dd3d0b05e080e08f8c5c33f880">ConstantExpr::getBitCast</a>(Fn, FnTy-&gt;<a class="code" href="classllvm_1_1Type.html#adc01a7457de85fc52a3bb860d7e1c6a4">getPointerTo</a>());</div>
<div class="line"><a name="l00130"></a><span class="lineno">  130</span>&#160;  <span class="keywordflow">return</span> {FnTy, <a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a>};</div>
<div class="line"><a name="l00131"></a><span class="lineno">  131</span>&#160;}</div>
<div class="line"><a name="l00132"></a><span class="lineno">  132</span>&#160; </div>
<div class="line"><a name="l00133"></a><span class="lineno"><a class="line" href="classllvm_1_1OpenMPIRBuilder.html#a7a0ce50dfb1a164ee67119899992c75b">  133</a></span>&#160;<a class="code" href="classllvm_1_1Function.html">Function</a> *<a class="code" href="classllvm_1_1OpenMPIRBuilder.html#a7a0ce50dfb1a164ee67119899992c75b">OpenMPIRBuilder::getOrCreateRuntimeFunctionPtr</a>(<a class="code" href="namespacellvm_1_1omp.html#a4c503140c7f851151906d85b515330e9">RuntimeFunction</a> FnID) {</div>
<div class="line"><a name="l00134"></a><span class="lineno">  134</span>&#160;  <a class="code" href="classllvm_1_1FunctionCallee.html">FunctionCallee</a> RTLFn = getOrCreateRuntimeFunction(<a class="code" href="lib_2Target_2X86_2README_8txt.html#ac88fe1d3a61b056a4f64fbbb156a62ff">M</a>, FnID);</div>
<div class="line"><a name="l00135"></a><span class="lineno">  135</span>&#160;  <span class="keyword">auto</span> *Fn = dyn_cast&lt;llvm::Function&gt;(RTLFn.<a class="code" href="classllvm_1_1FunctionCallee.html#a0055cd5464b935f571b36979a86bd7fc">getCallee</a>());</div>
<div class="line"><a name="l00136"></a><span class="lineno">  136</span>&#160;  <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(Fn &amp;&amp; <span class="stringliteral">&quot;Failed to create OpenMP runtime function pointer&quot;</span>);</div>
<div class="line"><a name="l00137"></a><span class="lineno">  137</span>&#160;  <span class="keywordflow">return</span> Fn;</div>
<div class="line"><a name="l00138"></a><span class="lineno">  138</span>&#160;}</div>
<div class="line"><a name="l00139"></a><span class="lineno">  139</span>&#160; </div>
<div class="line"><a name="l00140"></a><span class="lineno"><a class="line" href="classllvm_1_1OpenMPIRBuilder.html#a1af99f6f33b0db83a3e941fcb819fa29">  140</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="classllvm_1_1OpenMPIRBuilder.html#a1af99f6f33b0db83a3e941fcb819fa29">OpenMPIRBuilder::initialize</a>() { initializeTypes(<a class="code" href="lib_2Target_2X86_2README_8txt.html#ac88fe1d3a61b056a4f64fbbb156a62ff">M</a>); }</div>
<div class="line"><a name="l00141"></a><span class="lineno">  141</span>&#160; </div>
<div class="line"><a name="l00142"></a><span class="lineno"><a class="line" href="classllvm_1_1OpenMPIRBuilder.html#a1a4a64f28790dd1fcb4f393ebe41b96a">  142</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="classllvm_1_1OpenMPIRBuilder.html#a1a4a64f28790dd1fcb4f393ebe41b96a">OpenMPIRBuilder::finalize</a>(<a class="code" href="classllvm_1_1Function.html">Function</a> *Fn, <span class="keywordtype">bool</span> AllowExtractorSinking) {</div>
<div class="line"><a name="l00143"></a><span class="lineno">  143</span>&#160;  <a class="code" href="classllvm_1_1SmallPtrSet.html">SmallPtrSet&lt;BasicBlock *, 32&gt;</a> ParallelRegionBlockSet;</div>
<div class="line"><a name="l00144"></a><span class="lineno">  144</span>&#160;  <a class="code" href="classllvm_1_1SmallVector.html">SmallVector&lt;BasicBlock *, 32&gt;</a> Blocks;</div>
<div class="line"><a name="l00145"></a><span class="lineno">  145</span>&#160;  <a class="code" href="classllvm_1_1SmallVector.html">SmallVector&lt;OutlineInfo, 16&gt;</a> DeferredOutlines;</div>
<div class="line"><a name="l00146"></a><span class="lineno">  146</span>&#160;  <span class="keywordflow">for</span> (<a class="code" href="structllvm_1_1OpenMPIRBuilder_1_1OutlineInfo.html">OutlineInfo</a> &amp;OI : OutlineInfos) {</div>
<div class="line"><a name="l00147"></a><span class="lineno">  147</span>&#160;    <span class="comment">// Skip functions that have not finalized yet; may happen with nested</span></div>
<div class="line"><a name="l00148"></a><span class="lineno">  148</span>&#160;    <span class="comment">// function generation.</span></div>
<div class="line"><a name="l00149"></a><span class="lineno">  149</span>&#160;    <span class="keywordflow">if</span> (Fn &amp;&amp; OI.<a class="code" href="classllvm_1_1Function.html#a16be569c794ac815f294b1f651587e48">getFunction</a>() != Fn) {</div>
<div class="line"><a name="l00150"></a><span class="lineno">  150</span>&#160;      DeferredOutlines.push_back(OI);</div>
<div class="line"><a name="l00151"></a><span class="lineno">  151</span>&#160;      <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l00152"></a><span class="lineno">  152</span>&#160;    }</div>
<div class="line"><a name="l00153"></a><span class="lineno">  153</span>&#160; </div>
<div class="line"><a name="l00154"></a><span class="lineno">  154</span>&#160;    ParallelRegionBlockSet.<a class="code" href="classllvm_1_1SmallPtrSetImplBase.html#a16413f1a88d8baca228d0a1b4cc0bfc6">clear</a>();</div>
<div class="line"><a name="l00155"></a><span class="lineno">  155</span>&#160;    Blocks.<a class="code" href="classllvm_1_1SmallVectorImpl.html#aac0ea55010b7b1a301e65a0baea057aa">clear</a>();</div>
<div class="line"><a name="l00156"></a><span class="lineno">  156</span>&#160;    OI.collectBlocks(ParallelRegionBlockSet, Blocks);</div>
<div class="line"><a name="l00157"></a><span class="lineno">  157</span>&#160; </div>
<div class="line"><a name="l00158"></a><span class="lineno">  158</span>&#160;    <a class="code" href="classllvm_1_1Function.html">Function</a> *OuterFn = OI.<a class="code" href="classllvm_1_1Function.html#a16be569c794ac815f294b1f651587e48">getFunction</a>();</div>
<div class="line"><a name="l00159"></a><span class="lineno">  159</span>&#160;    <a class="code" href="classllvm_1_1CodeExtractorAnalysisCache.html">CodeExtractorAnalysisCache</a> CEAC(*OuterFn);</div>
<div class="line"><a name="l00160"></a><span class="lineno">  160</span>&#160;    <a class="code" href="classllvm_1_1CodeExtractor.html">CodeExtractor</a> Extractor(Blocks, <span class="comment">/* DominatorTree */</span> <span class="keyword">nullptr</span>,</div>
<div class="line"><a name="l00161"></a><span class="lineno">  161</span>&#160;                            <span class="comment">/* AggregateArgs */</span> <span class="keyword">false</span>,</div>
<div class="line"><a name="l00162"></a><span class="lineno">  162</span>&#160;                            <span class="comment">/* BlockFrequencyInfo */</span> <span class="keyword">nullptr</span>,</div>
<div class="line"><a name="l00163"></a><span class="lineno">  163</span>&#160;                            <span class="comment">/* BranchProbabilityInfo */</span> <span class="keyword">nullptr</span>,</div>
<div class="line"><a name="l00164"></a><span class="lineno">  164</span>&#160;                            <span class="comment">/* AssumptionCache */</span> <span class="keyword">nullptr</span>,</div>
<div class="line"><a name="l00165"></a><span class="lineno">  165</span>&#160;                            <span class="comment">/* AllowVarArgs */</span> <span class="keyword">true</span>,</div>
<div class="line"><a name="l00166"></a><span class="lineno">  166</span>&#160;                            <span class="comment">/* AllowAlloca */</span> <span class="keyword">true</span>,</div>
<div class="line"><a name="l00167"></a><span class="lineno">  167</span>&#160;                            <span class="comment">/* Suffix */</span> <span class="stringliteral">&quot;.omp_par&quot;</span>);</div>
<div class="line"><a name="l00168"></a><span class="lineno">  168</span>&#160; </div>
<div class="line"><a name="l00169"></a><span class="lineno">  169</span>&#160;    <a class="code" href="Debug_8h.html#a08efc68d15935eb8889400a46c3749ba">LLVM_DEBUG</a>(<a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <span class="stringliteral">&quot;Before     outlining: &quot;</span> &lt;&lt; *OuterFn &lt;&lt; <span class="stringliteral">&quot;\n&quot;</span>);</div>
<div class="line"><a name="l00170"></a><span class="lineno">  170</span>&#160;    <a class="code" href="Debug_8h.html#a08efc68d15935eb8889400a46c3749ba">LLVM_DEBUG</a>(<a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <span class="stringliteral">&quot;Entry &quot;</span> &lt;&lt; OI.EntryBB-&gt;getName()</div>
<div class="line"><a name="l00171"></a><span class="lineno">  171</span>&#160;                      &lt;&lt; <span class="stringliteral">&quot; Exit: &quot;</span> &lt;&lt; OI.ExitBB-&gt;getName() &lt;&lt; <span class="stringliteral">&quot;\n&quot;</span>);</div>
<div class="line"><a name="l00172"></a><span class="lineno">  172</span>&#160;    <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(Extractor.<a class="code" href="classllvm_1_1CodeExtractor.html#ad3a4770e725305d3529cba8c6562c85a">isEligible</a>() &amp;&amp;</div>
<div class="line"><a name="l00173"></a><span class="lineno">  173</span>&#160;           <span class="stringliteral">&quot;Expected OpenMP outlining to be possible!&quot;</span>);</div>
<div class="line"><a name="l00174"></a><span class="lineno">  174</span>&#160; </div>
<div class="line"><a name="l00175"></a><span class="lineno">  175</span>&#160;    <a class="code" href="classllvm_1_1Function.html">Function</a> *OutlinedFn = Extractor.<a class="code" href="classllvm_1_1CodeExtractor.html#a8561c48aa0b397c37f9e071dad7df392">extractCodeRegion</a>(CEAC);</div>
<div class="line"><a name="l00176"></a><span class="lineno">  176</span>&#160; </div>
<div class="line"><a name="l00177"></a><span class="lineno">  177</span>&#160;    <a class="code" href="Debug_8h.html#a08efc68d15935eb8889400a46c3749ba">LLVM_DEBUG</a>(<a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <span class="stringliteral">&quot;After      outlining: &quot;</span> &lt;&lt; *OuterFn &lt;&lt; <span class="stringliteral">&quot;\n&quot;</span>);</div>
<div class="line"><a name="l00178"></a><span class="lineno">  178</span>&#160;    <a class="code" href="Debug_8h.html#a08efc68d15935eb8889400a46c3749ba">LLVM_DEBUG</a>(<a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <span class="stringliteral">&quot;   Outlined function: &quot;</span> &lt;&lt; *OutlinedFn &lt;&lt; <span class="stringliteral">&quot;\n&quot;</span>);</div>
<div class="line"><a name="l00179"></a><span class="lineno">  179</span>&#160;    <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(OutlinedFn-&gt;<a class="code" href="classllvm_1_1Function.html#aaea88376352c42347dceccdd5ab1c20c">getReturnType</a>()-&gt;<a class="code" href="classllvm_1_1Type.html#ae8eaa0b4eeac52a2b2282cb1bfd981ae">isVoidTy</a>() &amp;&amp;</div>
<div class="line"><a name="l00180"></a><span class="lineno">  180</span>&#160;           <span class="stringliteral">&quot;OpenMP outlined functions should not return a value!&quot;</span>);</div>
<div class="line"><a name="l00181"></a><span class="lineno">  181</span>&#160; </div>
<div class="line"><a name="l00182"></a><span class="lineno">  182</span>&#160;    <span class="comment">// For compability with the clang CG we move the outlined function after the</span></div>
<div class="line"><a name="l00183"></a><span class="lineno">  183</span>&#160;    <span class="comment">// one with the parallel region.</span></div>
<div class="line"><a name="l00184"></a><span class="lineno">  184</span>&#160;    OutlinedFn-&gt;<a class="code" href="classllvm_1_1Function.html#a29e0a562beb4b5d20eb0c426b363ceed">removeFromParent</a>();</div>
<div class="line"><a name="l00185"></a><span class="lineno">  185</span>&#160;    <a class="code" href="lib_2Target_2X86_2README_8txt.html#ac88fe1d3a61b056a4f64fbbb156a62ff">M</a>.getFunctionList().insertAfter(OuterFn-&gt;<a class="code" href="classllvm_1_1ilist__node__impl.html#af719fc783be6589465137d997701a432">getIterator</a>(), OutlinedFn);</div>
<div class="line"><a name="l00186"></a><span class="lineno">  186</span>&#160; </div>
<div class="line"><a name="l00187"></a><span class="lineno">  187</span>&#160;    <span class="comment">// Remove the artificial entry introduced by the extractor right away, we</span></div>
<div class="line"><a name="l00188"></a><span class="lineno">  188</span>&#160;    <span class="comment">// made our own entry block after all.</span></div>
<div class="line"><a name="l00189"></a><span class="lineno">  189</span>&#160;    {</div>
<div class="line"><a name="l00190"></a><span class="lineno">  190</span>&#160;      <a class="code" href="classllvm_1_1BasicBlock.html">BasicBlock</a> &amp;ArtificialEntry = OutlinedFn-&gt;<a class="code" href="classllvm_1_1Function.html#ae6a4da5f41fc6a36735cc1704c01ce60">getEntryBlock</a>();</div>
<div class="line"><a name="l00191"></a><span class="lineno">  191</span>&#160;      <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(ArtificialEntry.<a class="code" href="classllvm_1_1BasicBlock.html#a57f1945911ca1e95d0f51d7c3516b529">getUniqueSuccessor</a>() == OI.EntryBB);</div>
<div class="line"><a name="l00192"></a><span class="lineno">  192</span>&#160;      <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(OI.EntryBB-&gt;getUniquePredecessor() == &amp;ArtificialEntry);</div>
<div class="line"><a name="l00193"></a><span class="lineno">  193</span>&#160;      <span class="keywordflow">if</span> (AllowExtractorSinking) {</div>
<div class="line"><a name="l00194"></a><span class="lineno">  194</span>&#160;        <span class="comment">// Move instructions from the to-be-deleted ArtificialEntry to the entry</span></div>
<div class="line"><a name="l00195"></a><span class="lineno">  195</span>&#160;        <span class="comment">// basic block of the parallel region. CodeExtractor may have sunk</span></div>
<div class="line"><a name="l00196"></a><span class="lineno">  196</span>&#160;        <span class="comment">// allocas/bitcasts for values that are solely used in the outlined</span></div>
<div class="line"><a name="l00197"></a><span class="lineno">  197</span>&#160;        <span class="comment">// region and do not escape.</span></div>
<div class="line"><a name="l00198"></a><span class="lineno">  198</span>&#160;        <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(!ArtificialEntry.<a class="code" href="classllvm_1_1BasicBlock.html#a266367eb01c634406b32f816d2d9c6bf">empty</a>() &amp;&amp;</div>
<div class="line"><a name="l00199"></a><span class="lineno">  199</span>&#160;               <span class="stringliteral">&quot;Expected instructions to sink in the outlined region&quot;</span>);</div>
<div class="line"><a name="l00200"></a><span class="lineno">  200</span>&#160;        <span class="keywordflow">for</span> (<a class="code" href="classllvm_1_1BasicBlock.html#a98c0a84a5dfa8bce341c829709f171e5">BasicBlock::iterator</a> It = ArtificialEntry.<a class="code" href="classllvm_1_1BasicBlock.html#a0ed5f3ab3c2e4196ee0cffffa080c062">begin</a>(),</div>
<div class="line"><a name="l00201"></a><span class="lineno">  201</span>&#160;                                  End = ArtificialEntry.<a class="code" href="classllvm_1_1BasicBlock.html#a0b4e7bee9b8575cc7db73329f1a561bd">end</a>();</div>
<div class="line"><a name="l00202"></a><span class="lineno">  202</span>&#160;             It != End;) {</div>
<div class="line"><a name="l00203"></a><span class="lineno">  203</span>&#160;          <a class="code" href="classllvm_1_1Instruction.html">Instruction</a> &amp;<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a> = *It;</div>
<div class="line"><a name="l00204"></a><span class="lineno">  204</span>&#160;          It++;</div>
<div class="line"><a name="l00205"></a><span class="lineno">  205</span>&#160; </div>
<div class="line"><a name="l00206"></a><span class="lineno">  206</span>&#160;          <span class="keywordflow">if</span> (<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>.isTerminator())</div>
<div class="line"><a name="l00207"></a><span class="lineno">  207</span>&#160;            <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l00208"></a><span class="lineno">  208</span>&#160; </div>
<div class="line"><a name="l00209"></a><span class="lineno">  209</span>&#160;          <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>.moveBefore(*OI.EntryBB, OI.EntryBB-&gt;getFirstInsertionPt());</div>
<div class="line"><a name="l00210"></a><span class="lineno">  210</span>&#160;        }</div>
<div class="line"><a name="l00211"></a><span class="lineno">  211</span>&#160;      }</div>
<div class="line"><a name="l00212"></a><span class="lineno">  212</span>&#160;      OI.EntryBB-&gt;moveBefore(&amp;ArtificialEntry);</div>
<div class="line"><a name="l00213"></a><span class="lineno">  213</span>&#160;      ArtificialEntry.<a class="code" href="classllvm_1_1BasicBlock.html#a8dd327a937563afdb08250abc43820b0">eraseFromParent</a>();</div>
<div class="line"><a name="l00214"></a><span class="lineno">  214</span>&#160;    }</div>
<div class="line"><a name="l00215"></a><span class="lineno">  215</span>&#160;    <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(&amp;OutlinedFn-&gt;<a class="code" href="classllvm_1_1Function.html#ae6a4da5f41fc6a36735cc1704c01ce60">getEntryBlock</a>() == OI.EntryBB);</div>
<div class="line"><a name="l00216"></a><span class="lineno">  216</span>&#160;    <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(OutlinedFn &amp;&amp; OutlinedFn-&gt;<a class="code" href="classllvm_1_1Value.html#aba0055050d741f60b6e0523507a2c79f">getNumUses</a>() == 1);</div>
<div class="line"><a name="l00217"></a><span class="lineno">  217</span>&#160; </div>
<div class="line"><a name="l00218"></a><span class="lineno">  218</span>&#160;    <span class="comment">// Run a user callback, e.g. to add attributes.</span></div>
<div class="line"><a name="l00219"></a><span class="lineno">  219</span>&#160;    <span class="keywordflow">if</span> (OI.PostOutlineCB)</div>
<div class="line"><a name="l00220"></a><span class="lineno">  220</span>&#160;      OI.PostOutlineCB(*OutlinedFn);</div>
<div class="line"><a name="l00221"></a><span class="lineno">  221</span>&#160;  }</div>
<div class="line"><a name="l00222"></a><span class="lineno">  222</span>&#160; </div>
<div class="line"><a name="l00223"></a><span class="lineno">  223</span>&#160;  <span class="comment">// Remove work items that have been completed.</span></div>
<div class="line"><a name="l00224"></a><span class="lineno">  224</span>&#160;  OutlineInfos = <a class="code" href="lib_2Target_2ARM_2README_8txt.html#ad3a99906764c35b2694ae90fa57744a5">std::move</a>(DeferredOutlines);</div>
<div class="line"><a name="l00225"></a><span class="lineno">  225</span>&#160;}</div>
<div class="line"><a name="l00226"></a><span class="lineno">  226</span>&#160; </div>
<div class="line"><a name="l00227"></a><span class="lineno"><a class="line" href="classllvm_1_1OpenMPIRBuilder.html#ad66949e2e846451e61d9c8f34014ea31">  227</a></span>&#160;<a class="code" href="classllvm_1_1OpenMPIRBuilder.html#ad66949e2e846451e61d9c8f34014ea31">OpenMPIRBuilder::~OpenMPIRBuilder</a>() {</div>
<div class="line"><a name="l00228"></a><span class="lineno">  228</span>&#160;  <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(OutlineInfos.empty() &amp;&amp; <span class="stringliteral">&quot;There must be no outstanding outlinings&quot;</span>);</div>
<div class="line"><a name="l00229"></a><span class="lineno">  229</span>&#160;}</div>
<div class="line"><a name="l00230"></a><span class="lineno">  230</span>&#160; </div>
<div class="line"><a name="l00231"></a><span class="lineno"><a class="line" href="classllvm_1_1OpenMPIRBuilder.html#abdf5229286f8fa98bf05a35a91b50839">  231</a></span>&#160;<a class="code" href="classllvm_1_1Value.html">Value</a> *<a class="code" href="classllvm_1_1OpenMPIRBuilder.html#abdf5229286f8fa98bf05a35a91b50839">OpenMPIRBuilder::getOrCreateIdent</a>(<a class="code" href="classllvm_1_1Constant.html">Constant</a> *SrcLocStr,</div>
<div class="line"><a name="l00232"></a><span class="lineno">  232</span>&#160;                                         <a class="code" href="namespacellvm_1_1omp.html#a0e821d8251c97d66ca185efe2f8ffde2">IdentFlag</a> LocFlags,</div>
<div class="line"><a name="l00233"></a><span class="lineno">  233</span>&#160;                                         <span class="keywordtype">unsigned</span> Reserve2Flags) {</div>
<div class="line"><a name="l00234"></a><span class="lineno">  234</span>&#160;  <span class="comment">// Enable &quot;C-mode&quot;.</span></div>
<div class="line"><a name="l00235"></a><span class="lineno">  235</span>&#160;  LocFlags |= OMP_IDENT_FLAG_KMPC;</div>
<div class="line"><a name="l00236"></a><span class="lineno">  236</span>&#160; </div>
<div class="line"><a name="l00237"></a><span class="lineno">  237</span>&#160;  <a class="code" href="classllvm_1_1Value.html">Value</a> *&amp;Ident =</div>
<div class="line"><a name="l00238"></a><span class="lineno">  238</span>&#160;      IdentMap[{SrcLocStr, uint64_t(LocFlags) &lt;&lt; 31 | Reserve2Flags}];</div>
<div class="line"><a name="l00239"></a><span class="lineno">  239</span>&#160;  <span class="keywordflow">if</span> (!Ident) {</div>
<div class="line"><a name="l00240"></a><span class="lineno">  240</span>&#160;    <a class="code" href="classllvm_1_1Constant.html">Constant</a> *I32Null = <a class="code" href="classllvm_1_1Constant.html#aa6574d526b3e38a28f688a7bb4325c2c">ConstantInt::getNullValue</a>(<a class="code" href="namespacellvm_1_1pdb.html#a434cfa04e4ed34b7a901378557d4ca9ea786eecab07351b4cc9e4c33f4cf5691e">Int32</a>);</div>
<div class="line"><a name="l00241"></a><span class="lineno">  241</span>&#160;    <a class="code" href="classllvm_1_1Constant.html">Constant</a> *IdentData[] = {</div>
<div class="line"><a name="l00242"></a><span class="lineno">  242</span>&#160;        I32Null, <a class="code" href="classllvm_1_1ConstantInt.html#a969709dd49c28865a482d8b870f87c46">ConstantInt::get</a>(<a class="code" href="namespacellvm_1_1pdb.html#a434cfa04e4ed34b7a901378557d4ca9ea786eecab07351b4cc9e4c33f4cf5691e">Int32</a>, <a class="code" href="classuint32__t.html">uint32_t</a>(LocFlags)),</div>
<div class="line"><a name="l00243"></a><span class="lineno">  243</span>&#160;        <a class="code" href="classllvm_1_1ConstantInt.html#a969709dd49c28865a482d8b870f87c46">ConstantInt::get</a>(<a class="code" href="namespacellvm_1_1pdb.html#a434cfa04e4ed34b7a901378557d4ca9ea786eecab07351b4cc9e4c33f4cf5691e">Int32</a>, Reserve2Flags), I32Null, SrcLocStr};</div>
<div class="line"><a name="l00244"></a><span class="lineno">  244</span>&#160;    <a class="code" href="classllvm_1_1Constant.html">Constant</a> *Initializer = <a class="code" href="classllvm_1_1ConstantStruct.html#a54fcfa620deb80373f489ba2fdad7643">ConstantStruct::get</a>(</div>
<div class="line"><a name="l00245"></a><span class="lineno">  245</span>&#160;        cast&lt;StructType&gt;(IdentPtr-&gt;getPointerElementType()), IdentData);</div>
<div class="line"><a name="l00246"></a><span class="lineno">  246</span>&#160; </div>
<div class="line"><a name="l00247"></a><span class="lineno">  247</span>&#160;    <span class="comment">// Look for existing encoding of the location + flags, not needed but</span></div>
<div class="line"><a name="l00248"></a><span class="lineno">  248</span>&#160;    <span class="comment">// minimizes the difference to the existing solution while we transition.</span></div>
<div class="line"><a name="l00249"></a><span class="lineno">  249</span>&#160;    <span class="keywordflow">for</span> (<a class="code" href="classllvm_1_1GlobalVariable.html">GlobalVariable</a> &amp;GV : <a class="code" href="lib_2Target_2X86_2README_8txt.html#ac88fe1d3a61b056a4f64fbbb156a62ff">M</a>.getGlobalList())</div>
<div class="line"><a name="l00250"></a><span class="lineno">  250</span>&#160;      <span class="keywordflow">if</span> (GV.getType() == IdentPtr &amp;&amp; GV.hasInitializer())</div>
<div class="line"><a name="l00251"></a><span class="lineno">  251</span>&#160;        <span class="keywordflow">if</span> (GV.getInitializer() == Initializer)</div>
<div class="line"><a name="l00252"></a><span class="lineno">  252</span>&#160;          <span class="keywordflow">return</span> Ident = &amp;GV;</div>
<div class="line"><a name="l00253"></a><span class="lineno">  253</span>&#160; </div>
<div class="line"><a name="l00254"></a><span class="lineno">  254</span>&#160;    <span class="keyword">auto</span> *GV = <span class="keyword">new</span> <a class="code" href="classllvm_1_1GlobalVariable.html">GlobalVariable</a>(<a class="code" href="lib_2Target_2X86_2README_8txt.html#ac88fe1d3a61b056a4f64fbbb156a62ff">M</a>, IdentPtr-&gt;getPointerElementType(),</div>
<div class="line"><a name="l00255"></a><span class="lineno">  255</span>&#160;                                  <span class="comment">/* isConstant = */</span> <span class="keyword">true</span>,</div>
<div class="line"><a name="l00256"></a><span class="lineno">  256</span>&#160;                                  <a class="code" href="classllvm_1_1GlobalValue.html#aedfa75f0c85c4aa85b257f066fbea57ca04ed141708c0fd16723d212502b046ae">GlobalValue::PrivateLinkage</a>, Initializer);</div>
<div class="line"><a name="l00257"></a><span class="lineno">  257</span>&#160;    GV-&gt;setUnnamedAddr(<a class="code" href="classllvm_1_1GlobalValue.html#ae8df4be75bfc50b1eadd74e85c25fa45a4cc6684df7b4a92b1dec6fce3264fac8">GlobalValue::UnnamedAddr::Global</a>);</div>
<div class="line"><a name="l00258"></a><span class="lineno">  258</span>&#160;    GV-&gt;setAlignment(<a class="code" href="ELFObjHandler_8cpp.html#a043cdaf7b89aaeeb127be5d93411637f">Align</a>(8));</div>
<div class="line"><a name="l00259"></a><span class="lineno">  259</span>&#160;    Ident = GV;</div>
<div class="line"><a name="l00260"></a><span class="lineno">  260</span>&#160;  }</div>
<div class="line"><a name="l00261"></a><span class="lineno">  261</span>&#160;  <span class="keywordflow">return</span> <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.CreatePointerCast(Ident, IdentPtr);</div>
<div class="line"><a name="l00262"></a><span class="lineno">  262</span>&#160;}</div>
<div class="line"><a name="l00263"></a><span class="lineno">  263</span>&#160; </div>
<div class="line"><a name="l00264"></a><span class="lineno"><a class="line" href="classllvm_1_1OpenMPIRBuilder.html#ae50b50ebadf256e03cbd4f47a2f4af86">  264</a></span>&#160;<a class="code" href="classllvm_1_1Type.html">Type</a> *<a class="code" href="classllvm_1_1OpenMPIRBuilder.html#ae50b50ebadf256e03cbd4f47a2f4af86">OpenMPIRBuilder::getLanemaskType</a>() {</div>
<div class="line"><a name="l00265"></a><span class="lineno">  265</span>&#160;  <a class="code" href="classllvm_1_1LLVMContext.html">LLVMContext</a> &amp;Ctx = <a class="code" href="lib_2Target_2X86_2README_8txt.html#ac88fe1d3a61b056a4f64fbbb156a62ff">M</a>.getContext();</div>
<div class="line"><a name="l00266"></a><span class="lineno">  266</span>&#160;  <a class="code" href="classllvm_1_1Triple.html">Triple</a> triple(<a class="code" href="lib_2Target_2X86_2README_8txt.html#ac88fe1d3a61b056a4f64fbbb156a62ff">M</a>.getTargetTriple());</div>
<div class="line"><a name="l00267"></a><span class="lineno">  267</span>&#160; </div>
<div class="line"><a name="l00268"></a><span class="lineno">  268</span>&#160;  <span class="comment">// This test is adequate until deviceRTL has finer grained lane widths</span></div>
<div class="line"><a name="l00269"></a><span class="lineno">  269</span>&#160;  <span class="keywordflow">return</span> triple.<a class="code" href="classllvm_1_1Triple.html#a92da6cf2a6b4ce43d5c5e4ef110511aa">isAMDGCN</a>() ? <a class="code" href="classllvm_1_1Type.html#a05186fa23e4d11b9855a9599ba87a4b7">Type::getInt64Ty</a>(Ctx) : <a class="code" href="classllvm_1_1Type.html#a30dd396c5b40cd86c1591872e574ccdf">Type::getInt32Ty</a>(Ctx);</div>
<div class="line"><a name="l00270"></a><span class="lineno">  270</span>&#160;}</div>
<div class="line"><a name="l00271"></a><span class="lineno">  271</span>&#160; </div>
<div class="line"><a name="l00272"></a><span class="lineno"><a class="line" href="classllvm_1_1OpenMPIRBuilder.html#ab50a97f63942119622c62951304580ac">  272</a></span>&#160;<a class="code" href="classllvm_1_1Constant.html">Constant</a> *<a class="code" href="classllvm_1_1OpenMPIRBuilder.html#ab50a97f63942119622c62951304580ac">OpenMPIRBuilder::getOrCreateSrcLocStr</a>(<a class="code" href="classllvm_1_1StringRef.html">StringRef</a> LocStr) {</div>
<div class="line"><a name="l00273"></a><span class="lineno">  273</span>&#160;  <a class="code" href="classllvm_1_1Constant.html">Constant</a> *&amp;SrcLocStr = SrcLocStrMap[LocStr];</div>
<div class="line"><a name="l00274"></a><span class="lineno">  274</span>&#160;  <span class="keywordflow">if</span> (!SrcLocStr) {</div>
<div class="line"><a name="l00275"></a><span class="lineno">  275</span>&#160;    <a class="code" href="classllvm_1_1Constant.html">Constant</a> *Initializer =</div>
<div class="line"><a name="l00276"></a><span class="lineno">  276</span>&#160;        <a class="code" href="classllvm_1_1ConstantDataArray.html#a3edef3fa47c611d3d10606591213e57b">ConstantDataArray::getString</a>(<a class="code" href="lib_2Target_2X86_2README_8txt.html#ac88fe1d3a61b056a4f64fbbb156a62ff">M</a>.getContext(), LocStr);</div>
<div class="line"><a name="l00277"></a><span class="lineno">  277</span>&#160; </div>
<div class="line"><a name="l00278"></a><span class="lineno">  278</span>&#160;    <span class="comment">// Look for existing encoding of the location, not needed but minimizes the</span></div>
<div class="line"><a name="l00279"></a><span class="lineno">  279</span>&#160;    <span class="comment">// difference to the existing solution while we transition.</span></div>
<div class="line"><a name="l00280"></a><span class="lineno">  280</span>&#160;    <span class="keywordflow">for</span> (<a class="code" href="classllvm_1_1GlobalVariable.html">GlobalVariable</a> &amp;GV : <a class="code" href="lib_2Target_2X86_2README_8txt.html#ac88fe1d3a61b056a4f64fbbb156a62ff">M</a>.getGlobalList())</div>
<div class="line"><a name="l00281"></a><span class="lineno">  281</span>&#160;      <span class="keywordflow">if</span> (GV.isConstant() &amp;&amp; GV.hasInitializer() &amp;&amp;</div>
<div class="line"><a name="l00282"></a><span class="lineno">  282</span>&#160;          GV.getInitializer() == Initializer)</div>
<div class="line"><a name="l00283"></a><span class="lineno">  283</span>&#160;        <span class="keywordflow">return</span> SrcLocStr = <a class="code" href="classllvm_1_1ConstantExpr.html#a1f469b1f703519ae25ce564c8704310f">ConstantExpr::getPointerCast</a>(&amp;GV, Int8Ptr);</div>
<div class="line"><a name="l00284"></a><span class="lineno">  284</span>&#160; </div>
<div class="line"><a name="l00285"></a><span class="lineno">  285</span>&#160;    SrcLocStr = <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.CreateGlobalStringPtr(LocStr, <span class="comment">/* Name */</span> <span class="stringliteral">&quot;&quot;</span>,</div>
<div class="line"><a name="l00286"></a><span class="lineno">  286</span>&#160;                                              <span class="comment">/* AddressSpace */</span> 0, &amp;<a class="code" href="lib_2Target_2X86_2README_8txt.html#ac88fe1d3a61b056a4f64fbbb156a62ff">M</a>);</div>
<div class="line"><a name="l00287"></a><span class="lineno">  287</span>&#160;  }</div>
<div class="line"><a name="l00288"></a><span class="lineno">  288</span>&#160;  <span class="keywordflow">return</span> SrcLocStr;</div>
<div class="line"><a name="l00289"></a><span class="lineno">  289</span>&#160;}</div>
<div class="line"><a name="l00290"></a><span class="lineno">  290</span>&#160; </div>
<div class="line"><a name="l00291"></a><span class="lineno"><a class="line" href="classllvm_1_1OpenMPIRBuilder.html#a5dab610e0a0de856287499f00fca5c1e">  291</a></span>&#160;<a class="code" href="classllvm_1_1Constant.html">Constant</a> *<a class="code" href="classllvm_1_1OpenMPIRBuilder.html#ab50a97f63942119622c62951304580ac">OpenMPIRBuilder::getOrCreateSrcLocStr</a>(<a class="code" href="classllvm_1_1StringRef.html">StringRef</a> FunctionName,</div>
<div class="line"><a name="l00292"></a><span class="lineno">  292</span>&#160;                                                <a class="code" href="classllvm_1_1StringRef.html">StringRef</a> FileName,</div>
<div class="line"><a name="l00293"></a><span class="lineno">  293</span>&#160;                                                <span class="keywordtype">unsigned</span> Line,</div>
<div class="line"><a name="l00294"></a><span class="lineno">  294</span>&#160;                                                <span class="keywordtype">unsigned</span> Column) {</div>
<div class="line"><a name="l00295"></a><span class="lineno">  295</span>&#160;  <a class="code" href="classllvm_1_1SmallString.html">SmallString&lt;128&gt;</a> Buffer;</div>
<div class="line"><a name="l00296"></a><span class="lineno">  296</span>&#160;  Buffer.push_back(<span class="charliteral">&#39;;&#39;</span>);</div>
<div class="line"><a name="l00297"></a><span class="lineno">  297</span>&#160;  Buffer.<a class="code" href="classllvm_1_1SmallString.html#ac22cf1a1c08b7ccaefc51508536312a4">append</a>(FileName);</div>
<div class="line"><a name="l00298"></a><span class="lineno">  298</span>&#160;  Buffer.push_back(<span class="charliteral">&#39;;&#39;</span>);</div>
<div class="line"><a name="l00299"></a><span class="lineno">  299</span>&#160;  Buffer.<a class="code" href="classllvm_1_1SmallString.html#ac22cf1a1c08b7ccaefc51508536312a4">append</a>(FunctionName);</div>
<div class="line"><a name="l00300"></a><span class="lineno">  300</span>&#160;  Buffer.push_back(<span class="charliteral">&#39;;&#39;</span>);</div>
<div class="line"><a name="l00301"></a><span class="lineno">  301</span>&#160;  Buffer.<a class="code" href="classllvm_1_1SmallString.html#ac22cf1a1c08b7ccaefc51508536312a4">append</a>(<a class="code" href="namespacellvm.html#a13c1b5a253da5da49ce33d03dc1efc07">std::to_string</a>(Line));</div>
<div class="line"><a name="l00302"></a><span class="lineno">  302</span>&#160;  Buffer.push_back(<span class="charliteral">&#39;;&#39;</span>);</div>
<div class="line"><a name="l00303"></a><span class="lineno">  303</span>&#160;  Buffer.<a class="code" href="classllvm_1_1SmallString.html#ac22cf1a1c08b7ccaefc51508536312a4">append</a>(<a class="code" href="namespacellvm.html#a13c1b5a253da5da49ce33d03dc1efc07">std::to_string</a>(Column));</div>
<div class="line"><a name="l00304"></a><span class="lineno">  304</span>&#160;  Buffer.push_back(<span class="charliteral">&#39;;&#39;</span>);</div>
<div class="line"><a name="l00305"></a><span class="lineno">  305</span>&#160;  Buffer.push_back(<span class="charliteral">&#39;;&#39;</span>);</div>
<div class="line"><a name="l00306"></a><span class="lineno">  306</span>&#160;  <span class="keywordflow">return</span> getOrCreateSrcLocStr(Buffer.<a class="code" href="classllvm_1_1SmallString.html#af5dd7241878be5eed07736eb156bb10b">str</a>());</div>
<div class="line"><a name="l00307"></a><span class="lineno">  307</span>&#160;}</div>
<div class="line"><a name="l00308"></a><span class="lineno">  308</span>&#160; </div>
<div class="line"><a name="l00309"></a><span class="lineno"><a class="line" href="classllvm_1_1OpenMPIRBuilder.html#ae8aef8ddfc754d66c1bcf00a9fc9e5c9">  309</a></span>&#160;<a class="code" href="classllvm_1_1Constant.html">Constant</a> *<a class="code" href="classllvm_1_1OpenMPIRBuilder.html#ae8aef8ddfc754d66c1bcf00a9fc9e5c9">OpenMPIRBuilder::getOrCreateDefaultSrcLocStr</a>() {</div>
<div class="line"><a name="l00310"></a><span class="lineno">  310</span>&#160;  <span class="keywordflow">return</span> getOrCreateSrcLocStr(<span class="stringliteral">&quot;;unknown;unknown;0;0;;&quot;</span>);</div>
<div class="line"><a name="l00311"></a><span class="lineno">  311</span>&#160;}</div>
<div class="line"><a name="l00312"></a><span class="lineno">  312</span>&#160; </div>
<div class="line"><a name="l00313"></a><span class="lineno">  313</span>&#160;<a class="code" href="classllvm_1_1Constant.html">Constant</a> *</div>
<div class="line"><a name="l00314"></a><span class="lineno"><a class="line" href="classllvm_1_1OpenMPIRBuilder.html#a4a96e5abd9f7da8cd8c0bb1bd792b7c1">  314</a></span>&#160;<a class="code" href="classllvm_1_1OpenMPIRBuilder.html#ab50a97f63942119622c62951304580ac">OpenMPIRBuilder::getOrCreateSrcLocStr</a>(<span class="keyword">const</span> <a class="code" href="structllvm_1_1OpenMPIRBuilder_1_1LocationDescription.html">LocationDescription</a> &amp;Loc) {</div>
<div class="line"><a name="l00315"></a><span class="lineno">  315</span>&#160;  <a class="code" href="classllvm_1_1DILocation.html">DILocation</a> *DIL = Loc.<a class="code" href="structllvm_1_1OpenMPIRBuilder_1_1LocationDescription.html#ac6a58d4f9cf1978ee50af30bdb248d73">DL</a>.<a class="code" href="classllvm_1_1DebugLoc.html#a4ff1bb484be62f8dac94fc087f72f524">get</a>();</div>
<div class="line"><a name="l00316"></a><span class="lineno">  316</span>&#160;  <span class="keywordflow">if</span> (!DIL)</div>
<div class="line"><a name="l00317"></a><span class="lineno">  317</span>&#160;    <span class="keywordflow">return</span> getOrCreateDefaultSrcLocStr();</div>
<div class="line"><a name="l00318"></a><span class="lineno">  318</span>&#160;  <a class="code" href="classllvm_1_1StringRef.html">StringRef</a> FileName = <a class="code" href="lib_2Target_2X86_2README_8txt.html#ac88fe1d3a61b056a4f64fbbb156a62ff">M</a>.getName();</div>
<div class="line"><a name="l00319"></a><span class="lineno">  319</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1DIFile.html">DIFile</a> *DIF = DIL-&gt;getFile())</div>
<div class="line"><a name="l00320"></a><span class="lineno">  320</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1Optional.html">Optional&lt;StringRef&gt;</a> <a class="code" href="namespacellvm_1_1Sched.html#ac1547cccaf660851fcd6863d1e60309eac13545a6345c7d5b3c9cc8932ad3b0e9">Source</a> = DIF-&gt;getSource())</div>
<div class="line"><a name="l00321"></a><span class="lineno">  321</span>&#160;      FileName = *<a class="code" href="namespacellvm_1_1Sched.html#ac1547cccaf660851fcd6863d1e60309eac13545a6345c7d5b3c9cc8932ad3b0e9">Source</a>;</div>
<div class="line"><a name="l00322"></a><span class="lineno">  322</span>&#160;  <a class="code" href="classllvm_1_1StringRef.html">StringRef</a> <a class="code" href="classllvm_1_1Function.html">Function</a> = DIL-&gt;getScope()-&gt;getSubprogram()-&gt;getName();</div>
<div class="line"><a name="l00323"></a><span class="lineno">  323</span>&#160;  <a class="code" href="classllvm_1_1Function.html">Function</a> =</div>
<div class="line"><a name="l00324"></a><span class="lineno">  324</span>&#160;      !<a class="code" href="classllvm_1_1Function.html">Function</a>.<a class="code" href="classllvm_1_1Function.html#a1d8eb3054fd49a89ff41bc22a48f87e7">empty</a>() ? <a class="code" href="classllvm_1_1Function.html">Function</a> : Loc.<a class="code" href="structllvm_1_1OpenMPIRBuilder_1_1LocationDescription.html#aa15e9d88f98f6d7a0898e6aff4753040">IP</a>.getBlock()-&gt;getParent()-&gt;getName();</div>
<div class="line"><a name="l00325"></a><span class="lineno">  325</span>&#160;  <span class="keywordflow">return</span> getOrCreateSrcLocStr(<a class="code" href="classllvm_1_1Function.html">Function</a>, FileName, DIL-&gt;getLine(),</div>
<div class="line"><a name="l00326"></a><span class="lineno">  326</span>&#160;                              DIL-&gt;getColumn());</div>
<div class="line"><a name="l00327"></a><span class="lineno">  327</span>&#160;}</div>
<div class="line"><a name="l00328"></a><span class="lineno">  328</span>&#160; </div>
<div class="line"><a name="l00329"></a><span class="lineno"><a class="line" href="classllvm_1_1OpenMPIRBuilder.html#a9607f501333d84917dc48f5d263e9b6c">  329</a></span>&#160;<a class="code" href="classllvm_1_1Value.html">Value</a> *<a class="code" href="classllvm_1_1OpenMPIRBuilder.html#a9607f501333d84917dc48f5d263e9b6c">OpenMPIRBuilder::getOrCreateThreadID</a>(<a class="code" href="classllvm_1_1Value.html">Value</a> *Ident) {</div>
<div class="line"><a name="l00330"></a><span class="lineno">  330</span>&#160;  <span class="keywordflow">return</span> <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.CreateCall(</div>
<div class="line"><a name="l00331"></a><span class="lineno">  331</span>&#160;      getOrCreateRuntimeFunctionPtr(OMPRTL___kmpc_global_thread_num), Ident,</div>
<div class="line"><a name="l00332"></a><span class="lineno">  332</span>&#160;      <span class="stringliteral">&quot;omp_global_thread_num&quot;</span>);</div>
<div class="line"><a name="l00333"></a><span class="lineno">  333</span>&#160;}</div>
<div class="line"><a name="l00334"></a><span class="lineno">  334</span>&#160; </div>
<div class="line"><a name="l00335"></a><span class="lineno">  335</span>&#160;<a class="code" href="classllvm_1_1OpenMPIRBuilder.html#aafc1886793b898052f87edd7e9fdbaa3">OpenMPIRBuilder::InsertPointTy</a></div>
<div class="line"><a name="l00336"></a><span class="lineno"><a class="line" href="classllvm_1_1OpenMPIRBuilder.html#a4761ddf3a15247582e7106e3968adba5">  336</a></span>&#160;<a class="code" href="classllvm_1_1OpenMPIRBuilder.html#a4761ddf3a15247582e7106e3968adba5">OpenMPIRBuilder::createBarrier</a>(<span class="keyword">const</span> <a class="code" href="structllvm_1_1OpenMPIRBuilder_1_1LocationDescription.html">LocationDescription</a> &amp;Loc, <a class="code" href="classllvm_1_1Directive.html">Directive</a> DK,</div>
<div class="line"><a name="l00337"></a><span class="lineno">  337</span>&#160;                               <span class="keywordtype">bool</span> ForceSimpleCall, <span class="keywordtype">bool</span> CheckCancelFlag) {</div>
<div class="line"><a name="l00338"></a><span class="lineno">  338</span>&#160;  <span class="keywordflow">if</span> (!updateToLocation(Loc))</div>
<div class="line"><a name="l00339"></a><span class="lineno">  339</span>&#160;    <span class="keywordflow">return</span> Loc.<a class="code" href="structllvm_1_1OpenMPIRBuilder_1_1LocationDescription.html#aa15e9d88f98f6d7a0898e6aff4753040">IP</a>;</div>
<div class="line"><a name="l00340"></a><span class="lineno">  340</span>&#160;  <span class="keywordflow">return</span> emitBarrierImpl(Loc, DK, ForceSimpleCall, CheckCancelFlag);</div>
<div class="line"><a name="l00341"></a><span class="lineno">  341</span>&#160;}</div>
<div class="line"><a name="l00342"></a><span class="lineno">  342</span>&#160; </div>
<div class="line"><a name="l00343"></a><span class="lineno">  343</span>&#160;<a class="code" href="classllvm_1_1OpenMPIRBuilder.html#aafc1886793b898052f87edd7e9fdbaa3">OpenMPIRBuilder::InsertPointTy</a></div>
<div class="line"><a name="l00344"></a><span class="lineno"><a class="line" href="classllvm_1_1OpenMPIRBuilder.html#a28153a5c4f51d07c8228ac5fb5eea266">  344</a></span>&#160;<a class="code" href="classllvm_1_1OpenMPIRBuilder.html#a28153a5c4f51d07c8228ac5fb5eea266">OpenMPIRBuilder::emitBarrierImpl</a>(<span class="keyword">const</span> <a class="code" href="structllvm_1_1OpenMPIRBuilder_1_1LocationDescription.html">LocationDescription</a> &amp;Loc, <a class="code" href="classllvm_1_1Directive.html">Directive</a> <a class="code" href="namespacellvm_1_1lltok.html#af353621f14cb4b4b3af5ffaff84076b1">Kind</a>,</div>
<div class="line"><a name="l00345"></a><span class="lineno">  345</span>&#160;                                 <span class="keywordtype">bool</span> ForceSimpleCall, <span class="keywordtype">bool</span> CheckCancelFlag) {</div>
<div class="line"><a name="l00346"></a><span class="lineno">  346</span>&#160;  <span class="comment">// Build call __kmpc_cancel_barrier(loc, thread_id) or</span></div>
<div class="line"><a name="l00347"></a><span class="lineno">  347</span>&#160;  <span class="comment">//            __kmpc_barrier(loc, thread_id);</span></div>
<div class="line"><a name="l00348"></a><span class="lineno">  348</span>&#160; </div>
<div class="line"><a name="l00349"></a><span class="lineno">  349</span>&#160;  <a class="code" href="namespacellvm_1_1omp.html#a0e821d8251c97d66ca185efe2f8ffde2">IdentFlag</a> BarrierLocFlags;</div>
<div class="line"><a name="l00350"></a><span class="lineno">  350</span>&#160;  <span class="keywordflow">switch</span> (<a class="code" href="namespacellvm_1_1lltok.html#af353621f14cb4b4b3af5ffaff84076b1">Kind</a>) {</div>
<div class="line"><a name="l00351"></a><span class="lineno">  351</span>&#160;  <span class="keywordflow">case</span> OMPD_for:</div>
<div class="line"><a name="l00352"></a><span class="lineno">  352</span>&#160;    BarrierLocFlags = OMP_IDENT_FLAG_BARRIER_IMPL_FOR;</div>
<div class="line"><a name="l00353"></a><span class="lineno">  353</span>&#160;    <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00354"></a><span class="lineno">  354</span>&#160;  <span class="keywordflow">case</span> OMPD_sections:</div>
<div class="line"><a name="l00355"></a><span class="lineno">  355</span>&#160;    BarrierLocFlags = OMP_IDENT_FLAG_BARRIER_IMPL_SECTIONS;</div>
<div class="line"><a name="l00356"></a><span class="lineno">  356</span>&#160;    <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00357"></a><span class="lineno">  357</span>&#160;  <span class="keywordflow">case</span> OMPD_single:</div>
<div class="line"><a name="l00358"></a><span class="lineno">  358</span>&#160;    BarrierLocFlags = OMP_IDENT_FLAG_BARRIER_IMPL_SINGLE;</div>
<div class="line"><a name="l00359"></a><span class="lineno">  359</span>&#160;    <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00360"></a><span class="lineno">  360</span>&#160;  <span class="keywordflow">case</span> OMPD_barrier:</div>
<div class="line"><a name="l00361"></a><span class="lineno">  361</span>&#160;    BarrierLocFlags = OMP_IDENT_FLAG_BARRIER_EXPL;</div>
<div class="line"><a name="l00362"></a><span class="lineno">  362</span>&#160;    <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00363"></a><span class="lineno">  363</span>&#160;  <span class="keywordflow">default</span>:</div>
<div class="line"><a name="l00364"></a><span class="lineno">  364</span>&#160;    BarrierLocFlags = OMP_IDENT_FLAG_BARRIER_IMPL;</div>
<div class="line"><a name="l00365"></a><span class="lineno">  365</span>&#160;    <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00366"></a><span class="lineno">  366</span>&#160;  }</div>
<div class="line"><a name="l00367"></a><span class="lineno">  367</span>&#160; </div>
<div class="line"><a name="l00368"></a><span class="lineno">  368</span>&#160;  <a class="code" href="classllvm_1_1Constant.html">Constant</a> *SrcLocStr = getOrCreateSrcLocStr(Loc);</div>
<div class="line"><a name="l00369"></a><span class="lineno">  369</span>&#160;  <a class="code" href="classllvm_1_1Value.html">Value</a> *<a class="code" href="namespacellvm_1_1AMDGPU_1_1HSAMD_1_1Kernel_1_1Key.html#a1958a762261549463a280bac3274d6d5">Args</a>[] = {getOrCreateIdent(SrcLocStr, BarrierLocFlags),</div>
<div class="line"><a name="l00370"></a><span class="lineno">  370</span>&#160;                   getOrCreateThreadID(getOrCreateIdent(SrcLocStr))};</div>
<div class="line"><a name="l00371"></a><span class="lineno">  371</span>&#160; </div>
<div class="line"><a name="l00372"></a><span class="lineno">  372</span>&#160;  <span class="comment">// If we are in a cancellable parallel region, barriers are cancellation</span></div>
<div class="line"><a name="l00373"></a><span class="lineno">  373</span>&#160;  <span class="comment">// points.</span></div>
<div class="line"><a name="l00374"></a><span class="lineno">  374</span>&#160;  <span class="comment">// TODO: Check why we would force simple calls or to ignore the cancel flag.</span></div>
<div class="line"><a name="l00375"></a><span class="lineno">  375</span>&#160;  <span class="keywordtype">bool</span> UseCancelBarrier =</div>
<div class="line"><a name="l00376"></a><span class="lineno">  376</span>&#160;      !ForceSimpleCall &amp;&amp; isLastFinalizationInfoCancellable(OMPD_parallel);</div>
<div class="line"><a name="l00377"></a><span class="lineno">  377</span>&#160; </div>
<div class="line"><a name="l00378"></a><span class="lineno">  378</span>&#160;  <a class="code" href="classllvm_1_1Value.html">Value</a> *Result =</div>
<div class="line"><a name="l00379"></a><span class="lineno">  379</span>&#160;      <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.CreateCall(getOrCreateRuntimeFunctionPtr(</div>
<div class="line"><a name="l00380"></a><span class="lineno">  380</span>&#160;                             UseCancelBarrier ? OMPRTL___kmpc_cancel_barrier</div>
<div class="line"><a name="l00381"></a><span class="lineno">  381</span>&#160;                                              : OMPRTL___kmpc_barrier),</div>
<div class="line"><a name="l00382"></a><span class="lineno">  382</span>&#160;                         <a class="code" href="namespacellvm_1_1AMDGPU_1_1HSAMD_1_1Kernel_1_1Key.html#a1958a762261549463a280bac3274d6d5">Args</a>);</div>
<div class="line"><a name="l00383"></a><span class="lineno">  383</span>&#160; </div>
<div class="line"><a name="l00384"></a><span class="lineno">  384</span>&#160;  <span class="keywordflow">if</span> (UseCancelBarrier &amp;&amp; CheckCancelFlag)</div>
<div class="line"><a name="l00385"></a><span class="lineno">  385</span>&#160;    emitCancelationCheckImpl(Result, OMPD_parallel);</div>
<div class="line"><a name="l00386"></a><span class="lineno">  386</span>&#160; </div>
<div class="line"><a name="l00387"></a><span class="lineno">  387</span>&#160;  <span class="keywordflow">return</span> <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.saveIP();</div>
<div class="line"><a name="l00388"></a><span class="lineno">  388</span>&#160;}</div>
<div class="line"><a name="l00389"></a><span class="lineno">  389</span>&#160; </div>
<div class="line"><a name="l00390"></a><span class="lineno">  390</span>&#160;<a class="code" href="classllvm_1_1OpenMPIRBuilder.html#aafc1886793b898052f87edd7e9fdbaa3">OpenMPIRBuilder::InsertPointTy</a></div>
<div class="line"><a name="l00391"></a><span class="lineno"><a class="line" href="classllvm_1_1OpenMPIRBuilder.html#a30999e2e13909b5f129f0bae43095f3b">  391</a></span>&#160;<a class="code" href="classllvm_1_1OpenMPIRBuilder.html#a30999e2e13909b5f129f0bae43095f3b">OpenMPIRBuilder::createCancel</a>(<span class="keyword">const</span> <a class="code" href="structllvm_1_1OpenMPIRBuilder_1_1LocationDescription.html">LocationDescription</a> &amp;Loc,</div>
<div class="line"><a name="l00392"></a><span class="lineno">  392</span>&#160;                              <a class="code" href="classllvm_1_1Value.html">Value</a> *IfCondition,</div>
<div class="line"><a name="l00393"></a><span class="lineno">  393</span>&#160;                              omp::Directive CanceledDirective) {</div>
<div class="line"><a name="l00394"></a><span class="lineno">  394</span>&#160;  <span class="keywordflow">if</span> (!updateToLocation(Loc))</div>
<div class="line"><a name="l00395"></a><span class="lineno">  395</span>&#160;    <span class="keywordflow">return</span> Loc.<a class="code" href="structllvm_1_1OpenMPIRBuilder_1_1LocationDescription.html#aa15e9d88f98f6d7a0898e6aff4753040">IP</a>;</div>
<div class="line"><a name="l00396"></a><span class="lineno">  396</span>&#160; </div>
<div class="line"><a name="l00397"></a><span class="lineno">  397</span>&#160;  <span class="comment">// LLVM utilities like blocks with terminators.</span></div>
<div class="line"><a name="l00398"></a><span class="lineno">  398</span>&#160;  <span class="keyword">auto</span> *UI = <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.CreateUnreachable();</div>
<div class="line"><a name="l00399"></a><span class="lineno">  399</span>&#160; </div>
<div class="line"><a name="l00400"></a><span class="lineno">  400</span>&#160;  <a class="code" href="classllvm_1_1Instruction.html">Instruction</a> *ThenTI = UI, *ElseTI = <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l00401"></a><span class="lineno">  401</span>&#160;  <span class="keywordflow">if</span> (IfCondition)</div>
<div class="line"><a name="l00402"></a><span class="lineno">  402</span>&#160;    <a class="code" href="namespacellvm.html#a2cda6d46faab8ed9b9c1e5edd3a1ed48">SplitBlockAndInsertIfThenElse</a>(IfCondition, UI, &amp;ThenTI, &amp;ElseTI);</div>
<div class="line"><a name="l00403"></a><span class="lineno">  403</span>&#160;  <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.SetInsertPoint(ThenTI);</div>
<div class="line"><a name="l00404"></a><span class="lineno">  404</span>&#160; </div>
<div class="line"><a name="l00405"></a><span class="lineno">  405</span>&#160;  <a class="code" href="classllvm_1_1Value.html">Value</a> *CancelKind = <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l00406"></a><span class="lineno">  406</span>&#160;  <span class="keywordflow">switch</span> (CanceledDirective) {</div>
<div class="line"><a name="l00407"></a><span class="lineno">  407</span>&#160;<span class="preprocessor">#define OMP_CANCEL_KIND(Enum, Str, DirectiveEnum, Value)                       \</span></div>
<div class="line"><a name="l00408"></a><span class="lineno">  408</span>&#160;<span class="preprocessor">  case DirectiveEnum:                                                          \</span></div>
<div class="line"><a name="l00409"></a><span class="lineno">  409</span>&#160;<span class="preprocessor">    CancelKind = Builder.getInt32(Value);                                      \</span></div>
<div class="line"><a name="l00410"></a><span class="lineno">  410</span>&#160;<span class="preprocessor">    break;</span></div>
<div class="line"><a name="l00411"></a><span class="lineno">  411</span>&#160;<span class="preprocessor">#include &quot;llvm/Frontend/OpenMP/OMPKinds.def&quot;</span></div>
<div class="line"><a name="l00412"></a><span class="lineno">  412</span>&#160;  <span class="keywordflow">default</span>:</div>
<div class="line"><a name="l00413"></a><span class="lineno">  413</span>&#160;    <a class="code" href="llvm_2Support_2ErrorHandling_8h.html#ace243f5c25697a1107cce46626b3dc94">llvm_unreachable</a>(<span class="stringliteral">&quot;Unknown cancel kind!&quot;</span>);</div>
<div class="line"><a name="l00414"></a><span class="lineno">  414</span>&#160;  }</div>
<div class="line"><a name="l00415"></a><span class="lineno">  415</span>&#160; </div>
<div class="line"><a name="l00416"></a><span class="lineno">  416</span>&#160;  <a class="code" href="classllvm_1_1Constant.html">Constant</a> *SrcLocStr = getOrCreateSrcLocStr(Loc);</div>
<div class="line"><a name="l00417"></a><span class="lineno">  417</span>&#160;  <a class="code" href="classllvm_1_1Value.html">Value</a> *Ident = getOrCreateIdent(SrcLocStr);</div>
<div class="line"><a name="l00418"></a><span class="lineno">  418</span>&#160;  <a class="code" href="classllvm_1_1Value.html">Value</a> *<a class="code" href="namespacellvm_1_1AMDGPU_1_1HSAMD_1_1Kernel_1_1Key.html#a1958a762261549463a280bac3274d6d5">Args</a>[] = {Ident, getOrCreateThreadID(Ident), CancelKind};</div>
<div class="line"><a name="l00419"></a><span class="lineno">  419</span>&#160;  <a class="code" href="classllvm_1_1Value.html">Value</a> *Result = <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.CreateCall(</div>
<div class="line"><a name="l00420"></a><span class="lineno">  420</span>&#160;      getOrCreateRuntimeFunctionPtr(OMPRTL___kmpc_cancel), <a class="code" href="namespacellvm_1_1AMDGPU_1_1HSAMD_1_1Kernel_1_1Key.html#a1958a762261549463a280bac3274d6d5">Args</a>);</div>
<div class="line"><a name="l00421"></a><span class="lineno">  421</span>&#160;  <span class="keyword">auto</span> ExitCB = [<span class="keyword">this</span>, CanceledDirective, Loc](<a class="code" href="classllvm_1_1OpenMPIRBuilder.html#aafc1886793b898052f87edd7e9fdbaa3">InsertPointTy</a> <a class="code" href="structIP.html">IP</a>) {</div>
<div class="line"><a name="l00422"></a><span class="lineno">  422</span>&#160;    <span class="keywordflow">if</span> (CanceledDirective == OMPD_parallel) {</div>
<div class="line"><a name="l00423"></a><span class="lineno">  423</span>&#160;      <a class="code" href="classllvm_1_1IRBuilder.html">IRBuilder&lt;&gt;::InsertPointGuard</a> IPG(<a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>);</div>
<div class="line"><a name="l00424"></a><span class="lineno">  424</span>&#160;      <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.restoreIP(<a class="code" href="structIP.html">IP</a>);</div>
<div class="line"><a name="l00425"></a><span class="lineno">  425</span>&#160;      createBarrier(<a class="code" href="structllvm_1_1OpenMPIRBuilder_1_1LocationDescription.html">LocationDescription</a>(<a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.saveIP(), Loc.<a class="code" href="structllvm_1_1OpenMPIRBuilder_1_1LocationDescription.html#ac6a58d4f9cf1978ee50af30bdb248d73">DL</a>),</div>
<div class="line"><a name="l00426"></a><span class="lineno">  426</span>&#160;                    omp::Directive::OMPD_unknown, <span class="comment">/* ForceSimpleCall */</span> <span class="keyword">false</span>,</div>
<div class="line"><a name="l00427"></a><span class="lineno">  427</span>&#160;                    <span class="comment">/* CheckCancelFlag */</span> <span class="keyword">false</span>);</div>
<div class="line"><a name="l00428"></a><span class="lineno">  428</span>&#160;    }</div>
<div class="line"><a name="l00429"></a><span class="lineno">  429</span>&#160;  };</div>
<div class="line"><a name="l00430"></a><span class="lineno">  430</span>&#160; </div>
<div class="line"><a name="l00431"></a><span class="lineno">  431</span>&#160;  <span class="comment">// The actual cancel logic is shared with others, e.g., cancel_barriers.</span></div>
<div class="line"><a name="l00432"></a><span class="lineno">  432</span>&#160;  emitCancelationCheckImpl(Result, CanceledDirective, ExitCB);</div>
<div class="line"><a name="l00433"></a><span class="lineno">  433</span>&#160; </div>
<div class="line"><a name="l00434"></a><span class="lineno">  434</span>&#160;  <span class="comment">// Update the insertion point and remove the terminator we introduced.</span></div>
<div class="line"><a name="l00435"></a><span class="lineno">  435</span>&#160;  <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.SetInsertPoint(UI-&gt;getParent());</div>
<div class="line"><a name="l00436"></a><span class="lineno">  436</span>&#160;  UI-&gt;eraseFromParent();</div>
<div class="line"><a name="l00437"></a><span class="lineno">  437</span>&#160; </div>
<div class="line"><a name="l00438"></a><span class="lineno">  438</span>&#160;  <span class="keywordflow">return</span> <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.saveIP();</div>
<div class="line"><a name="l00439"></a><span class="lineno">  439</span>&#160;}</div>
<div class="line"><a name="l00440"></a><span class="lineno">  440</span>&#160; </div>
<div class="line"><a name="l00441"></a><span class="lineno"><a class="line" href="classllvm_1_1OpenMPIRBuilder.html#ac0057ec814345445fc0c55e9fe928e35">  441</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="classllvm_1_1OpenMPIRBuilder.html#ac0057ec814345445fc0c55e9fe928e35">OpenMPIRBuilder::emitCancelationCheckImpl</a>(<a class="code" href="classllvm_1_1Value.html">Value</a> *CancelFlag,</div>
<div class="line"><a name="l00442"></a><span class="lineno">  442</span>&#160;                                               omp::Directive CanceledDirective,</div>
<div class="line"><a name="l00443"></a><span class="lineno">  443</span>&#160;                                               <a class="code" href="classllvm_1_1OpenMPIRBuilder.html#a03b6c43472b3040013de9cbc25376925">FinalizeCallbackTy</a> ExitCB) {</div>
<div class="line"><a name="l00444"></a><span class="lineno">  444</span>&#160;  <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(isLastFinalizationInfoCancellable(CanceledDirective) &amp;&amp;</div>
<div class="line"><a name="l00445"></a><span class="lineno">  445</span>&#160;         <span class="stringliteral">&quot;Unexpected cancellation!&quot;</span>);</div>
<div class="line"><a name="l00446"></a><span class="lineno">  446</span>&#160; </div>
<div class="line"><a name="l00447"></a><span class="lineno">  447</span>&#160;  <span class="comment">// For a cancel barrier we create two new blocks.</span></div>
<div class="line"><a name="l00448"></a><span class="lineno">  448</span>&#160;  <a class="code" href="classllvm_1_1BasicBlock.html">BasicBlock</a> *<a class="code" href="lib_2CodeGen_2README_8txt.html#a09776db24cf586ec9f1e18f3bae14099">BB</a> = <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.GetInsertBlock();</div>
<div class="line"><a name="l00449"></a><span class="lineno">  449</span>&#160;  <a class="code" href="classllvm_1_1BasicBlock.html">BasicBlock</a> *NonCancellationBlock;</div>
<div class="line"><a name="l00450"></a><span class="lineno">  450</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.GetInsertPoint() == <a class="code" href="lib_2CodeGen_2README_8txt.html#a09776db24cf586ec9f1e18f3bae14099">BB</a>-&gt;end()) {</div>
<div class="line"><a name="l00451"></a><span class="lineno">  451</span>&#160;    <span class="comment">// TODO: This branch will not be needed once we moved to the</span></div>
<div class="line"><a name="l00452"></a><span class="lineno">  452</span>&#160;    <span class="comment">// OpenMPIRBuilder codegen completely.</span></div>
<div class="line"><a name="l00453"></a><span class="lineno">  453</span>&#160;    NonCancellationBlock = <a class="code" href="classllvm_1_1BasicBlock.html#ace940beeee97c222f836fe0ac70f6cf5">BasicBlock::Create</a>(</div>
<div class="line"><a name="l00454"></a><span class="lineno">  454</span>&#160;        <a class="code" href="lib_2CodeGen_2README_8txt.html#a09776db24cf586ec9f1e18f3bae14099">BB</a>-&gt;getContext(), <a class="code" href="lib_2CodeGen_2README_8txt.html#a09776db24cf586ec9f1e18f3bae14099">BB</a>-&gt;getName() + <span class="stringliteral">&quot;.cont&quot;</span>, <a class="code" href="lib_2CodeGen_2README_8txt.html#a09776db24cf586ec9f1e18f3bae14099">BB</a>-&gt;getParent());</div>
<div class="line"><a name="l00455"></a><span class="lineno">  455</span>&#160;  } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00456"></a><span class="lineno">  456</span>&#160;    NonCancellationBlock = <a class="code" href="namespacellvm.html#ad295cb34421c21507bc9cdefe1ba3f16">SplitBlock</a>(<a class="code" href="lib_2CodeGen_2README_8txt.html#a09776db24cf586ec9f1e18f3bae14099">BB</a>, &amp;*<a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.GetInsertPoint());</div>
<div class="line"><a name="l00457"></a><span class="lineno">  457</span>&#160;    <a class="code" href="lib_2CodeGen_2README_8txt.html#a09776db24cf586ec9f1e18f3bae14099">BB</a>-&gt;getTerminator()-&gt;eraseFromParent();</div>
<div class="line"><a name="l00458"></a><span class="lineno">  458</span>&#160;    <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.SetInsertPoint(<a class="code" href="lib_2CodeGen_2README_8txt.html#a09776db24cf586ec9f1e18f3bae14099">BB</a>);</div>
<div class="line"><a name="l00459"></a><span class="lineno">  459</span>&#160;  }</div>
<div class="line"><a name="l00460"></a><span class="lineno">  460</span>&#160;  <a class="code" href="classllvm_1_1BasicBlock.html">BasicBlock</a> *CancellationBlock = <a class="code" href="classllvm_1_1BasicBlock.html#ace940beeee97c222f836fe0ac70f6cf5">BasicBlock::Create</a>(</div>
<div class="line"><a name="l00461"></a><span class="lineno">  461</span>&#160;      <a class="code" href="lib_2CodeGen_2README_8txt.html#a09776db24cf586ec9f1e18f3bae14099">BB</a>-&gt;getContext(), <a class="code" href="lib_2CodeGen_2README_8txt.html#a09776db24cf586ec9f1e18f3bae14099">BB</a>-&gt;getName() + <span class="stringliteral">&quot;.cncl&quot;</span>, <a class="code" href="lib_2CodeGen_2README_8txt.html#a09776db24cf586ec9f1e18f3bae14099">BB</a>-&gt;getParent());</div>
<div class="line"><a name="l00462"></a><span class="lineno">  462</span>&#160; </div>
<div class="line"><a name="l00463"></a><span class="lineno">  463</span>&#160;  <span class="comment">// Jump to them based on the return value.</span></div>
<div class="line"><a name="l00464"></a><span class="lineno">  464</span>&#160;  <a class="code" href="classllvm_1_1Value.html">Value</a> *Cmp = <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.CreateIsNull(CancelFlag);</div>
<div class="line"><a name="l00465"></a><span class="lineno">  465</span>&#160;  <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.CreateCondBr(Cmp, NonCancellationBlock, CancellationBlock,</div>
<div class="line"><a name="l00466"></a><span class="lineno">  466</span>&#160;                       <span class="comment">/* TODO weight */</span> <span class="keyword">nullptr</span>, <span class="keyword">nullptr</span>);</div>
<div class="line"><a name="l00467"></a><span class="lineno">  467</span>&#160; </div>
<div class="line"><a name="l00468"></a><span class="lineno">  468</span>&#160;  <span class="comment">// From the cancellation block we finalize all variables and go to the</span></div>
<div class="line"><a name="l00469"></a><span class="lineno">  469</span>&#160;  <span class="comment">// post finalization block that is known to the FiniCB callback.</span></div>
<div class="line"><a name="l00470"></a><span class="lineno">  470</span>&#160;  <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.SetInsertPoint(CancellationBlock);</div>
<div class="line"><a name="l00471"></a><span class="lineno">  471</span>&#160;  <span class="keywordflow">if</span> (ExitCB)</div>
<div class="line"><a name="l00472"></a><span class="lineno">  472</span>&#160;    ExitCB(<a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.saveIP());</div>
<div class="line"><a name="l00473"></a><span class="lineno">  473</span>&#160;  <span class="keyword">auto</span> &amp;FI = FinalizationStack.back();</div>
<div class="line"><a name="l00474"></a><span class="lineno">  474</span>&#160;  FI.FiniCB(<a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.saveIP());</div>
<div class="line"><a name="l00475"></a><span class="lineno">  475</span>&#160; </div>
<div class="line"><a name="l00476"></a><span class="lineno">  476</span>&#160;  <span class="comment">// The continuation block is where code generation continues.</span></div>
<div class="line"><a name="l00477"></a><span class="lineno">  477</span>&#160;  <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.SetInsertPoint(NonCancellationBlock, NonCancellationBlock-&gt;<a class="code" href="classllvm_1_1BasicBlock.html#a0ed5f3ab3c2e4196ee0cffffa080c062">begin</a>());</div>
<div class="line"><a name="l00478"></a><span class="lineno">  478</span>&#160;}</div>
<div class="line"><a name="l00479"></a><span class="lineno">  479</span>&#160; </div>
<div class="line"><a name="l00480"></a><span class="lineno"><a class="line" href="classllvm_1_1OpenMPIRBuilder.html#aa453737596c25281abfa783850b1e15c">  480</a></span>&#160;<a class="code" href="classllvm_1_1IRBuilder.html">IRBuilder&lt;&gt;::InsertPoint</a> <a class="code" href="classllvm_1_1OpenMPIRBuilder.html#aa453737596c25281abfa783850b1e15c">OpenMPIRBuilder::createParallel</a>(</div>
<div class="line"><a name="l00481"></a><span class="lineno">  481</span>&#160;    <span class="keyword">const</span> <a class="code" href="structllvm_1_1OpenMPIRBuilder_1_1LocationDescription.html">LocationDescription</a> &amp;Loc, <a class="code" href="classllvm_1_1OpenMPIRBuilder.html#aafc1886793b898052f87edd7e9fdbaa3">InsertPointTy</a> OuterAllocaIP,</div>
<div class="line"><a name="l00482"></a><span class="lineno">  482</span>&#160;    <a class="code" href="classllvm_1_1function__ref.html">BodyGenCallbackTy</a> BodyGenCB, <a class="code" href="classllvm_1_1function__ref.html">PrivatizeCallbackTy</a> PrivCB,</div>
<div class="line"><a name="l00483"></a><span class="lineno">  483</span>&#160;    <a class="code" href="classllvm_1_1OpenMPIRBuilder.html#a03b6c43472b3040013de9cbc25376925">FinalizeCallbackTy</a> FiniCB, <a class="code" href="classllvm_1_1Value.html">Value</a> *IfCondition, <a class="code" href="classllvm_1_1Value.html">Value</a> *NumThreads,</div>
<div class="line"><a name="l00484"></a><span class="lineno">  484</span>&#160;    omp::ProcBindKind ProcBind, <span class="keywordtype">bool</span> IsCancellable) {</div>
<div class="line"><a name="l00485"></a><span class="lineno">  485</span>&#160;  <span class="keywordflow">if</span> (!updateToLocation(Loc))</div>
<div class="line"><a name="l00486"></a><span class="lineno">  486</span>&#160;    <span class="keywordflow">return</span> Loc.<a class="code" href="structllvm_1_1OpenMPIRBuilder_1_1LocationDescription.html#aa15e9d88f98f6d7a0898e6aff4753040">IP</a>;</div>
<div class="line"><a name="l00487"></a><span class="lineno">  487</span>&#160; </div>
<div class="line"><a name="l00488"></a><span class="lineno">  488</span>&#160;  <a class="code" href="classllvm_1_1Constant.html">Constant</a> *SrcLocStr = getOrCreateSrcLocStr(Loc);</div>
<div class="line"><a name="l00489"></a><span class="lineno">  489</span>&#160;  <a class="code" href="classllvm_1_1Value.html">Value</a> *Ident = getOrCreateIdent(SrcLocStr);</div>
<div class="line"><a name="l00490"></a><span class="lineno">  490</span>&#160;  <a class="code" href="classllvm_1_1Value.html">Value</a> *ThreadID = getOrCreateThreadID(Ident);</div>
<div class="line"><a name="l00491"></a><span class="lineno">  491</span>&#160; </div>
<div class="line"><a name="l00492"></a><span class="lineno">  492</span>&#160;  <span class="keywordflow">if</span> (NumThreads) {</div>
<div class="line"><a name="l00493"></a><span class="lineno">  493</span>&#160;    <span class="comment">// Build call __kmpc_push_num_threads(&amp;Ident, global_tid, num_threads)</span></div>
<div class="line"><a name="l00494"></a><span class="lineno">  494</span>&#160;    <a class="code" href="classllvm_1_1Value.html">Value</a> *<a class="code" href="namespacellvm_1_1AMDGPU_1_1HSAMD_1_1Kernel_1_1Key.html#a1958a762261549463a280bac3274d6d5">Args</a>[] = {</div>
<div class="line"><a name="l00495"></a><span class="lineno">  495</span>&#160;        Ident, ThreadID,</div>
<div class="line"><a name="l00496"></a><span class="lineno">  496</span>&#160;        <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.CreateIntCast(NumThreads, <a class="code" href="namespacellvm_1_1pdb.html#a434cfa04e4ed34b7a901378557d4ca9ea786eecab07351b4cc9e4c33f4cf5691e">Int32</a>, <span class="comment">/*isSigned*/</span> <span class="keyword">false</span>)};</div>
<div class="line"><a name="l00497"></a><span class="lineno">  497</span>&#160;    <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.CreateCall(</div>
<div class="line"><a name="l00498"></a><span class="lineno">  498</span>&#160;        getOrCreateRuntimeFunctionPtr(OMPRTL___kmpc_push_num_threads), <a class="code" href="namespacellvm_1_1AMDGPU_1_1HSAMD_1_1Kernel_1_1Key.html#a1958a762261549463a280bac3274d6d5">Args</a>);</div>
<div class="line"><a name="l00499"></a><span class="lineno">  499</span>&#160;  }</div>
<div class="line"><a name="l00500"></a><span class="lineno">  500</span>&#160; </div>
<div class="line"><a name="l00501"></a><span class="lineno">  501</span>&#160;  <span class="keywordflow">if</span> (ProcBind != OMP_PROC_BIND_default) {</div>
<div class="line"><a name="l00502"></a><span class="lineno">  502</span>&#160;    <span class="comment">// Build call __kmpc_push_proc_bind(&amp;Ident, global_tid, proc_bind)</span></div>
<div class="line"><a name="l00503"></a><span class="lineno">  503</span>&#160;    <a class="code" href="classllvm_1_1Value.html">Value</a> *<a class="code" href="namespacellvm_1_1AMDGPU_1_1HSAMD_1_1Kernel_1_1Key.html#a1958a762261549463a280bac3274d6d5">Args</a>[] = {</div>
<div class="line"><a name="l00504"></a><span class="lineno">  504</span>&#160;        Ident, ThreadID,</div>
<div class="line"><a name="l00505"></a><span class="lineno">  505</span>&#160;        <a class="code" href="classllvm_1_1ConstantInt.html#a969709dd49c28865a482d8b870f87c46">ConstantInt::get</a>(<a class="code" href="namespacellvm_1_1pdb.html#a434cfa04e4ed34b7a901378557d4ca9ea786eecab07351b4cc9e4c33f4cf5691e">Int32</a>, <span class="keywordtype">unsigned</span>(ProcBind), <span class="comment">/*isSigned=*/</span><span class="keyword">true</span>)};</div>
<div class="line"><a name="l00506"></a><span class="lineno">  506</span>&#160;    <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.CreateCall(</div>
<div class="line"><a name="l00507"></a><span class="lineno">  507</span>&#160;        getOrCreateRuntimeFunctionPtr(OMPRTL___kmpc_push_proc_bind), <a class="code" href="namespacellvm_1_1AMDGPU_1_1HSAMD_1_1Kernel_1_1Key.html#a1958a762261549463a280bac3274d6d5">Args</a>);</div>
<div class="line"><a name="l00508"></a><span class="lineno">  508</span>&#160;  }</div>
<div class="line"><a name="l00509"></a><span class="lineno">  509</span>&#160; </div>
<div class="line"><a name="l00510"></a><span class="lineno">  510</span>&#160;  <a class="code" href="classllvm_1_1BasicBlock.html">BasicBlock</a> *InsertBB = <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.GetInsertBlock();</div>
<div class="line"><a name="l00511"></a><span class="lineno">  511</span>&#160;  <a class="code" href="classllvm_1_1Function.html">Function</a> *OuterFn = InsertBB-&gt;<a class="code" href="classllvm_1_1BasicBlock.html#a38bee869ad41aebfef3de2641b12004c">getParent</a>();</div>
<div class="line"><a name="l00512"></a><span class="lineno">  512</span>&#160; </div>
<div class="line"><a name="l00513"></a><span class="lineno">  513</span>&#160;  <span class="comment">// Save the outer alloca block because the insertion iterator may get</span></div>
<div class="line"><a name="l00514"></a><span class="lineno">  514</span>&#160;  <span class="comment">// invalidated and we still need this later.</span></div>
<div class="line"><a name="l00515"></a><span class="lineno">  515</span>&#160;  <a class="code" href="classllvm_1_1BasicBlock.html">BasicBlock</a> *OuterAllocaBlock = OuterAllocaIP.getBlock();</div>
<div class="line"><a name="l00516"></a><span class="lineno">  516</span>&#160; </div>
<div class="line"><a name="l00517"></a><span class="lineno">  517</span>&#160;  <span class="comment">// Vector to remember instructions we used only during the modeling but which</span></div>
<div class="line"><a name="l00518"></a><span class="lineno">  518</span>&#160;  <span class="comment">// we want to delete at the end.</span></div>
<div class="line"><a name="l00519"></a><span class="lineno">  519</span>&#160;  <a class="code" href="classllvm_1_1SmallVector.html">SmallVector&lt;Instruction *, 4&gt;</a> ToBeDeleted;</div>
<div class="line"><a name="l00520"></a><span class="lineno">  520</span>&#160; </div>
<div class="line"><a name="l00521"></a><span class="lineno">  521</span>&#160;  <span class="comment">// Change the location to the outer alloca insertion point to create and</span></div>
<div class="line"><a name="l00522"></a><span class="lineno">  522</span>&#160;  <span class="comment">// initialize the allocas we pass into the parallel region.</span></div>
<div class="line"><a name="l00523"></a><span class="lineno">  523</span>&#160;  <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.restoreIP(OuterAllocaIP);</div>
<div class="line"><a name="l00524"></a><span class="lineno">  524</span>&#160;  <a class="code" href="classllvm_1_1AllocaInst.html">AllocaInst</a> *TIDAddr = <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.CreateAlloca(<a class="code" href="namespacellvm_1_1pdb.html#a434cfa04e4ed34b7a901378557d4ca9ea786eecab07351b4cc9e4c33f4cf5691e">Int32</a>, <span class="keyword">nullptr</span>, <span class="stringliteral">&quot;tid.addr&quot;</span>);</div>
<div class="line"><a name="l00525"></a><span class="lineno">  525</span>&#160;  <a class="code" href="classllvm_1_1AllocaInst.html">AllocaInst</a> *ZeroAddr = <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.CreateAlloca(<a class="code" href="namespacellvm_1_1pdb.html#a434cfa04e4ed34b7a901378557d4ca9ea786eecab07351b4cc9e4c33f4cf5691e">Int32</a>, <span class="keyword">nullptr</span>, <span class="stringliteral">&quot;zero.addr&quot;</span>);</div>
<div class="line"><a name="l00526"></a><span class="lineno">  526</span>&#160; </div>
<div class="line"><a name="l00527"></a><span class="lineno">  527</span>&#160;  <span class="comment">// If there is an if condition we actually use the TIDAddr and ZeroAddr in the</span></div>
<div class="line"><a name="l00528"></a><span class="lineno">  528</span>&#160;  <span class="comment">// program, otherwise we only need them for modeling purposes to get the</span></div>
<div class="line"><a name="l00529"></a><span class="lineno">  529</span>&#160;  <span class="comment">// associated arguments in the outlined function. In the former case,</span></div>
<div class="line"><a name="l00530"></a><span class="lineno">  530</span>&#160;  <span class="comment">// initialize the allocas properly, in the latter case, delete them later.</span></div>
<div class="line"><a name="l00531"></a><span class="lineno">  531</span>&#160;  <span class="keywordflow">if</span> (IfCondition) {</div>
<div class="line"><a name="l00532"></a><span class="lineno">  532</span>&#160;    <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.CreateStore(<a class="code" href="classllvm_1_1Constant.html#aa6574d526b3e38a28f688a7bb4325c2c">Constant::getNullValue</a>(<a class="code" href="namespacellvm_1_1pdb.html#a434cfa04e4ed34b7a901378557d4ca9ea786eecab07351b4cc9e4c33f4cf5691e">Int32</a>), TIDAddr);</div>
<div class="line"><a name="l00533"></a><span class="lineno">  533</span>&#160;    <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.CreateStore(<a class="code" href="classllvm_1_1Constant.html#aa6574d526b3e38a28f688a7bb4325c2c">Constant::getNullValue</a>(<a class="code" href="namespacellvm_1_1pdb.html#a434cfa04e4ed34b7a901378557d4ca9ea786eecab07351b4cc9e4c33f4cf5691e">Int32</a>), ZeroAddr);</div>
<div class="line"><a name="l00534"></a><span class="lineno">  534</span>&#160;  } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00535"></a><span class="lineno">  535</span>&#160;    ToBeDeleted.push_back(TIDAddr);</div>
<div class="line"><a name="l00536"></a><span class="lineno">  536</span>&#160;    ToBeDeleted.push_back(ZeroAddr);</div>
<div class="line"><a name="l00537"></a><span class="lineno">  537</span>&#160;  }</div>
<div class="line"><a name="l00538"></a><span class="lineno">  538</span>&#160; </div>
<div class="line"><a name="l00539"></a><span class="lineno">  539</span>&#160;  <span class="comment">// Create an artificial insertion point that will also ensure the blocks we</span></div>
<div class="line"><a name="l00540"></a><span class="lineno">  540</span>&#160;  <span class="comment">// are about to split are not degenerated.</span></div>
<div class="line"><a name="l00541"></a><span class="lineno">  541</span>&#160;  <span class="keyword">auto</span> *UI = <span class="keyword">new</span> <a class="code" href="classllvm_1_1UnreachableInst.html">UnreachableInst</a>(<a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.getContext(), InsertBB);</div>
<div class="line"><a name="l00542"></a><span class="lineno">  542</span>&#160; </div>
<div class="line"><a name="l00543"></a><span class="lineno">  543</span>&#160;  <a class="code" href="classllvm_1_1Instruction.html">Instruction</a> *ThenTI = UI, *ElseTI = <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l00544"></a><span class="lineno">  544</span>&#160;  <span class="keywordflow">if</span> (IfCondition)</div>
<div class="line"><a name="l00545"></a><span class="lineno">  545</span>&#160;    <a class="code" href="namespacellvm.html#a2cda6d46faab8ed9b9c1e5edd3a1ed48">SplitBlockAndInsertIfThenElse</a>(IfCondition, UI, &amp;ThenTI, &amp;ElseTI);</div>
<div class="line"><a name="l00546"></a><span class="lineno">  546</span>&#160; </div>
<div class="line"><a name="l00547"></a><span class="lineno">  547</span>&#160;  <a class="code" href="classllvm_1_1BasicBlock.html">BasicBlock</a> *ThenBB = ThenTI-&gt;<a class="code" href="classllvm_1_1Instruction.html#a1a7f07aaef6a3bee130bf0e0f0536802">getParent</a>();</div>
<div class="line"><a name="l00548"></a><span class="lineno">  548</span>&#160;  <a class="code" href="classllvm_1_1BasicBlock.html">BasicBlock</a> *PRegEntryBB = ThenBB-&gt;<a class="code" href="classllvm_1_1BasicBlock.html#a52c990590792c91dd20b6d45acebe359">splitBasicBlock</a>(ThenTI, <span class="stringliteral">&quot;omp.par.entry&quot;</span>);</div>
<div class="line"><a name="l00549"></a><span class="lineno">  549</span>&#160;  <a class="code" href="classllvm_1_1BasicBlock.html">BasicBlock</a> *PRegBodyBB =</div>
<div class="line"><a name="l00550"></a><span class="lineno">  550</span>&#160;      PRegEntryBB-&gt;<a class="code" href="classllvm_1_1BasicBlock.html#a52c990590792c91dd20b6d45acebe359">splitBasicBlock</a>(ThenTI, <span class="stringliteral">&quot;omp.par.region&quot;</span>);</div>
<div class="line"><a name="l00551"></a><span class="lineno">  551</span>&#160;  <a class="code" href="classllvm_1_1BasicBlock.html">BasicBlock</a> *PRegPreFiniBB =</div>
<div class="line"><a name="l00552"></a><span class="lineno">  552</span>&#160;      PRegBodyBB-&gt;<a class="code" href="classllvm_1_1BasicBlock.html#a52c990590792c91dd20b6d45acebe359">splitBasicBlock</a>(ThenTI, <span class="stringliteral">&quot;omp.par.pre_finalize&quot;</span>);</div>
<div class="line"><a name="l00553"></a><span class="lineno">  553</span>&#160;  <a class="code" href="classllvm_1_1BasicBlock.html">BasicBlock</a> *PRegExitBB =</div>
<div class="line"><a name="l00554"></a><span class="lineno">  554</span>&#160;      PRegPreFiniBB-&gt;<a class="code" href="classllvm_1_1BasicBlock.html#a52c990590792c91dd20b6d45acebe359">splitBasicBlock</a>(ThenTI, <span class="stringliteral">&quot;omp.par.exit&quot;</span>);</div>
<div class="line"><a name="l00555"></a><span class="lineno">  555</span>&#160; </div>
<div class="line"><a name="l00556"></a><span class="lineno">  556</span>&#160;  <span class="keyword">auto</span> FiniCBWrapper = [&amp;](<a class="code" href="classllvm_1_1OpenMPIRBuilder.html#aafc1886793b898052f87edd7e9fdbaa3">InsertPointTy</a> <a class="code" href="structIP.html">IP</a>) {</div>
<div class="line"><a name="l00557"></a><span class="lineno">  557</span>&#160;    <span class="comment">// Hide &quot;open-ended&quot; blocks from the given FiniCB by setting the right jump</span></div>
<div class="line"><a name="l00558"></a><span class="lineno">  558</span>&#160;    <span class="comment">// target to the region exit block.</span></div>
<div class="line"><a name="l00559"></a><span class="lineno">  559</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="structIP.html">IP</a>.getBlock()-&gt;end() == <a class="code" href="structIP.html">IP</a>.getPoint()) {</div>
<div class="line"><a name="l00560"></a><span class="lineno">  560</span>&#160;      <a class="code" href="classllvm_1_1IRBuilder.html">IRBuilder&lt;&gt;::InsertPointGuard</a> IPG(<a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>);</div>
<div class="line"><a name="l00561"></a><span class="lineno">  561</span>&#160;      <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.restoreIP(<a class="code" href="structIP.html">IP</a>);</div>
<div class="line"><a name="l00562"></a><span class="lineno">  562</span>&#160;      <a class="code" href="classllvm_1_1Instruction.html">Instruction</a> *<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a> = <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.CreateBr(PRegExitBB);</div>
<div class="line"><a name="l00563"></a><span class="lineno">  563</span>&#160;      <a class="code" href="structIP.html">IP</a> = <a class="code" href="classllvm_1_1OpenMPIRBuilder.html#aafc1886793b898052f87edd7e9fdbaa3">InsertPointTy</a>(<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>-&gt;getParent(), <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>-&gt;getIterator());</div>
<div class="line"><a name="l00564"></a><span class="lineno">  564</span>&#160;    }</div>
<div class="line"><a name="l00565"></a><span class="lineno">  565</span>&#160;    <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(<a class="code" href="structIP.html">IP</a>.getBlock()-&gt;getTerminator()-&gt;getNumSuccessors() == 1 &amp;&amp;</div>
<div class="line"><a name="l00566"></a><span class="lineno">  566</span>&#160;           <a class="code" href="structIP.html">IP</a>.getBlock()-&gt;getTerminator()-&gt;getSuccessor(0) == PRegExitBB &amp;&amp;</div>
<div class="line"><a name="l00567"></a><span class="lineno">  567</span>&#160;           <span class="stringliteral">&quot;Unexpected insertion point for finalization call!&quot;</span>);</div>
<div class="line"><a name="l00568"></a><span class="lineno">  568</span>&#160;    <span class="keywordflow">return</span> FiniCB(<a class="code" href="structIP.html">IP</a>);</div>
<div class="line"><a name="l00569"></a><span class="lineno">  569</span>&#160;  };</div>
<div class="line"><a name="l00570"></a><span class="lineno">  570</span>&#160; </div>
<div class="line"><a name="l00571"></a><span class="lineno">  571</span>&#160;  FinalizationStack.push_back({FiniCBWrapper, OMPD_parallel, IsCancellable});</div>
<div class="line"><a name="l00572"></a><span class="lineno">  572</span>&#160; </div>
<div class="line"><a name="l00573"></a><span class="lineno">  573</span>&#160;  <span class="comment">// Generate the privatization allocas in the block that will become the entry</span></div>
<div class="line"><a name="l00574"></a><span class="lineno">  574</span>&#160;  <span class="comment">// of the outlined function.</span></div>
<div class="line"><a name="l00575"></a><span class="lineno">  575</span>&#160;  <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.SetInsertPoint(PRegEntryBB-&gt;<a class="code" href="classllvm_1_1BasicBlock.html#a71a9eabc4318b2fc34f83b01dfee484b">getTerminator</a>());</div>
<div class="line"><a name="l00576"></a><span class="lineno">  576</span>&#160;  <a class="code" href="classllvm_1_1OpenMPIRBuilder.html#aafc1886793b898052f87edd7e9fdbaa3">InsertPointTy</a> InnerAllocaIP = <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.saveIP();</div>
<div class="line"><a name="l00577"></a><span class="lineno">  577</span>&#160; </div>
<div class="line"><a name="l00578"></a><span class="lineno">  578</span>&#160;  <a class="code" href="classllvm_1_1AllocaInst.html">AllocaInst</a> *PrivTIDAddr =</div>
<div class="line"><a name="l00579"></a><span class="lineno">  579</span>&#160;      <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.CreateAlloca(<a class="code" href="namespacellvm_1_1pdb.html#a434cfa04e4ed34b7a901378557d4ca9ea786eecab07351b4cc9e4c33f4cf5691e">Int32</a>, <span class="keyword">nullptr</span>, <span class="stringliteral">&quot;tid.addr.local&quot;</span>);</div>
<div class="line"><a name="l00580"></a><span class="lineno">  580</span>&#160;  <a class="code" href="classllvm_1_1Instruction.html">Instruction</a> *PrivTID = <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.CreateLoad(<a class="code" href="namespacellvm_1_1pdb.html#a434cfa04e4ed34b7a901378557d4ca9ea786eecab07351b4cc9e4c33f4cf5691e">Int32</a>, PrivTIDAddr, <span class="stringliteral">&quot;tid&quot;</span>);</div>
<div class="line"><a name="l00581"></a><span class="lineno">  581</span>&#160; </div>
<div class="line"><a name="l00582"></a><span class="lineno">  582</span>&#160;  <span class="comment">// Add some fake uses for OpenMP provided arguments.</span></div>
<div class="line"><a name="l00583"></a><span class="lineno">  583</span>&#160;  ToBeDeleted.push_back(<a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.CreateLoad(<a class="code" href="namespacellvm_1_1pdb.html#a434cfa04e4ed34b7a901378557d4ca9ea786eecab07351b4cc9e4c33f4cf5691e">Int32</a>, TIDAddr, <span class="stringliteral">&quot;tid.addr.use&quot;</span>));</div>
<div class="line"><a name="l00584"></a><span class="lineno">  584</span>&#160;  <a class="code" href="classllvm_1_1Instruction.html">Instruction</a> *ZeroAddrUse = <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.CreateLoad(<a class="code" href="namespacellvm_1_1pdb.html#a434cfa04e4ed34b7a901378557d4ca9ea786eecab07351b4cc9e4c33f4cf5691e">Int32</a>, ZeroAddr,</div>
<div class="line"><a name="l00585"></a><span class="lineno">  585</span>&#160;                                                <span class="stringliteral">&quot;zero.addr.use&quot;</span>);</div>
<div class="line"><a name="l00586"></a><span class="lineno">  586</span>&#160;  ToBeDeleted.push_back(ZeroAddrUse);</div>
<div class="line"><a name="l00587"></a><span class="lineno">  587</span>&#160; </div>
<div class="line"><a name="l00588"></a><span class="lineno">  588</span>&#160;  <span class="comment">// ThenBB</span></div>
<div class="line"><a name="l00589"></a><span class="lineno">  589</span>&#160;  <span class="comment">//   |</span></div>
<div class="line"><a name="l00590"></a><span class="lineno">  590</span>&#160;  <span class="comment">//   V</span></div>
<div class="line"><a name="l00591"></a><span class="lineno">  591</span>&#160;  <span class="comment">// PRegionEntryBB         &lt;- Privatization allocas are placed here.</span></div>
<div class="line"><a name="l00592"></a><span class="lineno">  592</span>&#160;  <span class="comment">//   |</span></div>
<div class="line"><a name="l00593"></a><span class="lineno">  593</span>&#160;  <span class="comment">//   V</span></div>
<div class="line"><a name="l00594"></a><span class="lineno">  594</span>&#160;  <span class="comment">// PRegionBodyBB          &lt;- BodeGen is invoked here.</span></div>
<div class="line"><a name="l00595"></a><span class="lineno">  595</span>&#160;  <span class="comment">//   |</span></div>
<div class="line"><a name="l00596"></a><span class="lineno">  596</span>&#160;  <span class="comment">//   V</span></div>
<div class="line"><a name="l00597"></a><span class="lineno">  597</span>&#160;  <span class="comment">// PRegPreFiniBB          &lt;- The block we will start finalization from.</span></div>
<div class="line"><a name="l00598"></a><span class="lineno">  598</span>&#160;  <span class="comment">//   |</span></div>
<div class="line"><a name="l00599"></a><span class="lineno">  599</span>&#160;  <span class="comment">//   V</span></div>
<div class="line"><a name="l00600"></a><span class="lineno">  600</span>&#160;  <span class="comment">// PRegionExitBB          &lt;- A common exit to simplify block collection.</span></div>
<div class="line"><a name="l00601"></a><span class="lineno">  601</span>&#160;  <span class="comment">//</span></div>
<div class="line"><a name="l00602"></a><span class="lineno">  602</span>&#160; </div>
<div class="line"><a name="l00603"></a><span class="lineno">  603</span>&#160;  <a class="code" href="Debug_8h.html#a08efc68d15935eb8889400a46c3749ba">LLVM_DEBUG</a>(<a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <span class="stringliteral">&quot;Before body codegen: &quot;</span> &lt;&lt; *OuterFn &lt;&lt; <span class="stringliteral">&quot;\n&quot;</span>);</div>
<div class="line"><a name="l00604"></a><span class="lineno">  604</span>&#160; </div>
<div class="line"><a name="l00605"></a><span class="lineno">  605</span>&#160;  <span class="comment">// Let the caller create the body.</span></div>
<div class="line"><a name="l00606"></a><span class="lineno">  606</span>&#160;  <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(BodyGenCB &amp;&amp; <span class="stringliteral">&quot;Expected body generation callback!&quot;</span>);</div>
<div class="line"><a name="l00607"></a><span class="lineno">  607</span>&#160;  <a class="code" href="classllvm_1_1OpenMPIRBuilder.html#aafc1886793b898052f87edd7e9fdbaa3">InsertPointTy</a> CodeGenIP(PRegBodyBB, PRegBodyBB-&gt;<a class="code" href="classllvm_1_1BasicBlock.html#a0ed5f3ab3c2e4196ee0cffffa080c062">begin</a>());</div>
<div class="line"><a name="l00608"></a><span class="lineno">  608</span>&#160;  BodyGenCB(InnerAllocaIP, CodeGenIP, *PRegPreFiniBB);</div>
<div class="line"><a name="l00609"></a><span class="lineno">  609</span>&#160; </div>
<div class="line"><a name="l00610"></a><span class="lineno">  610</span>&#160;  <a class="code" href="Debug_8h.html#a08efc68d15935eb8889400a46c3749ba">LLVM_DEBUG</a>(<a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <span class="stringliteral">&quot;After  body codegen: &quot;</span> &lt;&lt; *OuterFn &lt;&lt; <span class="stringliteral">&quot;\n&quot;</span>);</div>
<div class="line"><a name="l00611"></a><span class="lineno">  611</span>&#160; </div>
<div class="line"><a name="l00612"></a><span class="lineno">  612</span>&#160;  <a class="code" href="classllvm_1_1FunctionCallee.html">FunctionCallee</a> RTLFn = getOrCreateRuntimeFunctionPtr(OMPRTL___kmpc_fork_call);</div>
<div class="line"><a name="l00613"></a><span class="lineno">  613</span>&#160;  <span class="keywordflow">if</span> (<span class="keyword">auto</span> *<a class="code" href="MD5_8cpp.html#a96d73bbd7af15cb1fc38c3f4a3bd82e9">F</a> = dyn_cast&lt;llvm::Function&gt;(RTLFn.<a class="code" href="classllvm_1_1FunctionCallee.html#a0055cd5464b935f571b36979a86bd7fc">getCallee</a>())) {</div>
<div class="line"><a name="l00614"></a><span class="lineno">  614</span>&#160;    <span class="keywordflow">if</span> (!<a class="code" href="MD5_8cpp.html#a96d73bbd7af15cb1fc38c3f4a3bd82e9">F</a>-&gt;hasMetadata(llvm::LLVMContext::MD_callback)) {</div>
<div class="line"><a name="l00615"></a><span class="lineno">  615</span>&#160;      <a class="code" href="classllvm_1_1LLVMContext.html">llvm::LLVMContext</a> &amp;Ctx = <a class="code" href="MD5_8cpp.html#a96d73bbd7af15cb1fc38c3f4a3bd82e9">F</a>-&gt;getContext();</div>
<div class="line"><a name="l00616"></a><span class="lineno">  616</span>&#160;      <a class="code" href="classllvm_1_1MDBuilder.html">MDBuilder</a> MDB(Ctx);</div>
<div class="line"><a name="l00617"></a><span class="lineno">  617</span>&#160;      <span class="comment">// Annotate the callback behavior of the __kmpc_fork_call:</span></div>
<div class="line"><a name="l00618"></a><span class="lineno">  618</span>&#160;      <span class="comment">//  - The callback callee is argument number 2 (microtask).</span></div>
<div class="line"><a name="l00619"></a><span class="lineno">  619</span>&#160;      <span class="comment">//  - The first two arguments of the callback callee are unknown (-1).</span></div>
<div class="line"><a name="l00620"></a><span class="lineno">  620</span>&#160;      <span class="comment">//  - All variadic arguments to the __kmpc_fork_call are passed to the</span></div>
<div class="line"><a name="l00621"></a><span class="lineno">  621</span>&#160;      <span class="comment">//    callback callee.</span></div>
<div class="line"><a name="l00622"></a><span class="lineno">  622</span>&#160;      <a class="code" href="MD5_8cpp.html#a96d73bbd7af15cb1fc38c3f4a3bd82e9">F</a>-&gt;addMetadata(</div>
<div class="line"><a name="l00623"></a><span class="lineno">  623</span>&#160;          llvm::LLVMContext::MD_callback,</div>
<div class="line"><a name="l00624"></a><span class="lineno">  624</span>&#160;          *<a class="code" href="classllvm_1_1MDNode.html#a7d10a7b9b7f40b04d27ed97c38ea1950">llvm::MDNode::get</a>(</div>
<div class="line"><a name="l00625"></a><span class="lineno">  625</span>&#160;              Ctx, {MDB.<a class="code" href="classllvm_1_1MDBuilder.html#a1d51e11adfffd05afe252d3398f50d4e">createCallbackEncoding</a>(2, {-1, -1},</div>
<div class="line"><a name="l00626"></a><span class="lineno">  626</span>&#160;                                               <span class="comment">/* VarArgsArePassed */</span> <span class="keyword">true</span>)}));</div>
<div class="line"><a name="l00627"></a><span class="lineno">  627</span>&#160;    }</div>
<div class="line"><a name="l00628"></a><span class="lineno">  628</span>&#160;  }</div>
<div class="line"><a name="l00629"></a><span class="lineno">  629</span>&#160; </div>
<div class="line"><a name="l00630"></a><span class="lineno">  630</span>&#160;  <a class="code" href="structllvm_1_1OpenMPIRBuilder_1_1OutlineInfo.html">OutlineInfo</a> OI;</div>
<div class="line"><a name="l00631"></a><span class="lineno">  631</span>&#160;  OI.<a class="code" href="structllvm_1_1OpenMPIRBuilder_1_1OutlineInfo.html#a0b8f73f7987421a24a842d3e2633278d">PostOutlineCB</a> = [=](<a class="code" href="classllvm_1_1Function.html">Function</a> &amp;OutlinedFn) {</div>
<div class="line"><a name="l00632"></a><span class="lineno">  632</span>&#160;    <span class="comment">// Add some known attributes.</span></div>
<div class="line"><a name="l00633"></a><span class="lineno">  633</span>&#160;    OutlinedFn.addParamAttr(0, Attribute::NoAlias);</div>
<div class="line"><a name="l00634"></a><span class="lineno">  634</span>&#160;    OutlinedFn.addParamAttr(1, Attribute::NoAlias);</div>
<div class="line"><a name="l00635"></a><span class="lineno">  635</span>&#160;    OutlinedFn.addFnAttr(Attribute::NoUnwind);</div>
<div class="line"><a name="l00636"></a><span class="lineno">  636</span>&#160;    OutlinedFn.addFnAttr(Attribute::NoRecurse);</div>
<div class="line"><a name="l00637"></a><span class="lineno">  637</span>&#160; </div>
<div class="line"><a name="l00638"></a><span class="lineno">  638</span>&#160;    <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(OutlinedFn.arg_size() &gt;= 2 &amp;&amp;</div>
<div class="line"><a name="l00639"></a><span class="lineno">  639</span>&#160;           <span class="stringliteral">&quot;Expected at least tid and bounded tid as arguments&quot;</span>);</div>
<div class="line"><a name="l00640"></a><span class="lineno">  640</span>&#160;    <span class="keywordtype">unsigned</span> NumCapturedVars =</div>
<div class="line"><a name="l00641"></a><span class="lineno">  641</span>&#160;        OutlinedFn.arg_size() - <span class="comment">/* tid &amp; bounded tid */</span> 2;</div>
<div class="line"><a name="l00642"></a><span class="lineno">  642</span>&#160; </div>
<div class="line"><a name="l00643"></a><span class="lineno">  643</span>&#160;    <a class="code" href="classllvm_1_1CallInst.html">CallInst</a> *CI = cast&lt;CallInst&gt;(OutlinedFn.user_back());</div>
<div class="line"><a name="l00644"></a><span class="lineno">  644</span>&#160;    CI-&gt;<a class="code" href="classllvm_1_1Instruction.html#a1a7f07aaef6a3bee130bf0e0f0536802">getParent</a>()-&gt;<a class="code" href="classllvm_1_1Value.html#a35ee267850af7c235474a8c46c7ac5af">setName</a>(<span class="stringliteral">&quot;omp_parallel&quot;</span>);</div>
<div class="line"><a name="l00645"></a><span class="lineno">  645</span>&#160;    <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.SetInsertPoint(CI);</div>
<div class="line"><a name="l00646"></a><span class="lineno">  646</span>&#160; </div>
<div class="line"><a name="l00647"></a><span class="lineno">  647</span>&#160;    <span class="comment">// Build call __kmpc_fork_call(Ident, n, microtask, var1, .., varn);</span></div>
<div class="line"><a name="l00648"></a><span class="lineno">  648</span>&#160;    <a class="code" href="classllvm_1_1Value.html">Value</a> *ForkCallArgs[] = {</div>
<div class="line"><a name="l00649"></a><span class="lineno">  649</span>&#160;        Ident, <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.getInt32(NumCapturedVars),</div>
<div class="line"><a name="l00650"></a><span class="lineno">  650</span>&#160;        <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.CreateBitCast(&amp;OutlinedFn, ParallelTaskPtr)};</div>
<div class="line"><a name="l00651"></a><span class="lineno">  651</span>&#160; </div>
<div class="line"><a name="l00652"></a><span class="lineno">  652</span>&#160;    <a class="code" href="classllvm_1_1SmallVector.html">SmallVector&lt;Value *, 16&gt;</a> RealArgs;</div>
<div class="line"><a name="l00653"></a><span class="lineno">  653</span>&#160;    RealArgs.<a class="code" href="classllvm_1_1SmallVectorImpl.html#ac56f67ff590e79d76f8ebd243e4cf442">append</a>(<a class="code" href="namespacellvm_1_1sys_1_1path.html#a00a76a729b319dc47beffbe07325565f">std::begin</a>(ForkCallArgs), <a class="code" href="namespacellvm_1_1sys_1_1path.html#a214ec2f04ffd92636ed4bd2717607a1d">std::end</a>(ForkCallArgs));</div>
<div class="line"><a name="l00654"></a><span class="lineno">  654</span>&#160;    RealArgs.<a class="code" href="classllvm_1_1SmallVectorImpl.html#ac56f67ff590e79d76f8ebd243e4cf442">append</a>(CI-&gt;<a class="code" href="classllvm_1_1CallBase.html#a4fb513d744ca72275932b2c7003f16f6">arg_begin</a>() + <span class="comment">/* tid &amp; bound tid */</span> 2, CI-&gt;<a class="code" href="classllvm_1_1CallBase.html#ac0f11b96f81b2769dd23d028e3189075">arg_end</a>());</div>
<div class="line"><a name="l00655"></a><span class="lineno">  655</span>&#160; </div>
<div class="line"><a name="l00656"></a><span class="lineno">  656</span>&#160;    <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.CreateCall(RTLFn, RealArgs);</div>
<div class="line"><a name="l00657"></a><span class="lineno">  657</span>&#160; </div>
<div class="line"><a name="l00658"></a><span class="lineno">  658</span>&#160;    <a class="code" href="Debug_8h.html#a08efc68d15935eb8889400a46c3749ba">LLVM_DEBUG</a>(<a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <span class="stringliteral">&quot;With fork_call placed: &quot;</span></div>
<div class="line"><a name="l00659"></a><span class="lineno">  659</span>&#160;                      &lt;&lt; *<a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.GetInsertBlock()-&gt;getParent() &lt;&lt; <span class="stringliteral">&quot;\n&quot;</span>);</div>
<div class="line"><a name="l00660"></a><span class="lineno">  660</span>&#160; </div>
<div class="line"><a name="l00661"></a><span class="lineno">  661</span>&#160;    <a class="code" href="classllvm_1_1OpenMPIRBuilder.html#aafc1886793b898052f87edd7e9fdbaa3">InsertPointTy</a> ExitIP(PRegExitBB, PRegExitBB-&gt;<a class="code" href="classllvm_1_1BasicBlock.html#a0b4e7bee9b8575cc7db73329f1a561bd">end</a>());</div>
<div class="line"><a name="l00662"></a><span class="lineno">  662</span>&#160; </div>
<div class="line"><a name="l00663"></a><span class="lineno">  663</span>&#160;    <span class="comment">// Initialize the local TID stack location with the argument value.</span></div>
<div class="line"><a name="l00664"></a><span class="lineno">  664</span>&#160;    <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.SetInsertPoint(PrivTID);</div>
<div class="line"><a name="l00665"></a><span class="lineno">  665</span>&#160;    <a class="code" href="classllvm_1_1Argument.html">Function::arg_iterator</a> OutlinedAI = OutlinedFn.arg_begin();</div>
<div class="line"><a name="l00666"></a><span class="lineno">  666</span>&#160;    <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.CreateStore(<a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.CreateLoad(<a class="code" href="namespacellvm_1_1pdb.html#a434cfa04e4ed34b7a901378557d4ca9ea786eecab07351b4cc9e4c33f4cf5691e">Int32</a>, OutlinedAI), PrivTIDAddr);</div>
<div class="line"><a name="l00667"></a><span class="lineno">  667</span>&#160; </div>
<div class="line"><a name="l00668"></a><span class="lineno">  668</span>&#160;    <span class="comment">// If no &quot;if&quot; clause was present we do not need the call created during</span></div>
<div class="line"><a name="l00669"></a><span class="lineno">  669</span>&#160;    <span class="comment">// outlining, otherwise we reuse it in the serialized parallel region.</span></div>
<div class="line"><a name="l00670"></a><span class="lineno">  670</span>&#160;    <span class="keywordflow">if</span> (!ElseTI) {</div>
<div class="line"><a name="l00671"></a><span class="lineno">  671</span>&#160;      CI-&gt;<a class="code" href="classllvm_1_1Instruction.html#ae6b978645b8ac72d1a35e1298ffdd4f0">eraseFromParent</a>();</div>
<div class="line"><a name="l00672"></a><span class="lineno">  672</span>&#160;    } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00673"></a><span class="lineno">  673</span>&#160; </div>
<div class="line"><a name="l00674"></a><span class="lineno">  674</span>&#160;      <span class="comment">// If an &quot;if&quot; clause was present we are now generating the serialized</span></div>
<div class="line"><a name="l00675"></a><span class="lineno">  675</span>&#160;      <span class="comment">// version into the &quot;else&quot; branch.</span></div>
<div class="line"><a name="l00676"></a><span class="lineno">  676</span>&#160;      <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.SetInsertPoint(ElseTI);</div>
<div class="line"><a name="l00677"></a><span class="lineno">  677</span>&#160; </div>
<div class="line"><a name="l00678"></a><span class="lineno">  678</span>&#160;      <span class="comment">// Build calls __kmpc_serialized_parallel(&amp;Ident, GTid);</span></div>
<div class="line"><a name="l00679"></a><span class="lineno">  679</span>&#160;      <a class="code" href="classllvm_1_1Value.html">Value</a> *SerializedParallelCallArgs[] = {Ident, ThreadID};</div>
<div class="line"><a name="l00680"></a><span class="lineno">  680</span>&#160;      <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.CreateCall(</div>
<div class="line"><a name="l00681"></a><span class="lineno">  681</span>&#160;          getOrCreateRuntimeFunctionPtr(OMPRTL___kmpc_serialized_parallel),</div>
<div class="line"><a name="l00682"></a><span class="lineno">  682</span>&#160;          SerializedParallelCallArgs);</div>
<div class="line"><a name="l00683"></a><span class="lineno">  683</span>&#160; </div>
<div class="line"><a name="l00684"></a><span class="lineno">  684</span>&#160;      <span class="comment">// OutlinedFn(&amp;GTid, &amp;zero, CapturedStruct);</span></div>
<div class="line"><a name="l00685"></a><span class="lineno">  685</span>&#160;      CI-&gt;<a class="code" href="classllvm_1_1Instruction.html#a0fd53f63d349dc8a7c5fc0cdd7a94c8d">removeFromParent</a>();</div>
<div class="line"><a name="l00686"></a><span class="lineno">  686</span>&#160;      <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.Insert(CI);</div>
<div class="line"><a name="l00687"></a><span class="lineno">  687</span>&#160; </div>
<div class="line"><a name="l00688"></a><span class="lineno">  688</span>&#160;      <span class="comment">// __kmpc_end_serialized_parallel(&amp;Ident, GTid);</span></div>
<div class="line"><a name="l00689"></a><span class="lineno">  689</span>&#160;      <a class="code" href="classllvm_1_1Value.html">Value</a> *EndArgs[] = {Ident, ThreadID};</div>
<div class="line"><a name="l00690"></a><span class="lineno">  690</span>&#160;      <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.CreateCall(</div>
<div class="line"><a name="l00691"></a><span class="lineno">  691</span>&#160;          getOrCreateRuntimeFunctionPtr(OMPRTL___kmpc_end_serialized_parallel),</div>
<div class="line"><a name="l00692"></a><span class="lineno">  692</span>&#160;          EndArgs);</div>
<div class="line"><a name="l00693"></a><span class="lineno">  693</span>&#160; </div>
<div class="line"><a name="l00694"></a><span class="lineno">  694</span>&#160;      <a class="code" href="Debug_8h.html#a08efc68d15935eb8889400a46c3749ba">LLVM_DEBUG</a>(<a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <span class="stringliteral">&quot;With serialized parallel region: &quot;</span></div>
<div class="line"><a name="l00695"></a><span class="lineno">  695</span>&#160;                        &lt;&lt; *<a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.GetInsertBlock()-&gt;getParent() &lt;&lt; <span class="stringliteral">&quot;\n&quot;</span>);</div>
<div class="line"><a name="l00696"></a><span class="lineno">  696</span>&#160;    }</div>
<div class="line"><a name="l00697"></a><span class="lineno">  697</span>&#160; </div>
<div class="line"><a name="l00698"></a><span class="lineno">  698</span>&#160;    <span class="keywordflow">for</span> (<a class="code" href="classllvm_1_1Instruction.html">Instruction</a> *<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a> : ToBeDeleted)</div>
<div class="line"><a name="l00699"></a><span class="lineno">  699</span>&#160;      <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>-&gt;eraseFromParent();</div>
<div class="line"><a name="l00700"></a><span class="lineno">  700</span>&#160;  };</div>
<div class="line"><a name="l00701"></a><span class="lineno">  701</span>&#160; </div>
<div class="line"><a name="l00702"></a><span class="lineno">  702</span>&#160;  <span class="comment">// Adjust the finalization stack, verify the adjustment, and call the</span></div>
<div class="line"><a name="l00703"></a><span class="lineno">  703</span>&#160;  <span class="comment">// finalize function a last time to finalize values between the pre-fini</span></div>
<div class="line"><a name="l00704"></a><span class="lineno">  704</span>&#160;  <span class="comment">// block and the exit block if we left the parallel &quot;the normal way&quot;.</span></div>
<div class="line"><a name="l00705"></a><span class="lineno">  705</span>&#160;  <span class="keyword">auto</span> FiniInfo = FinalizationStack.pop_back_val();</div>
<div class="line"><a name="l00706"></a><span class="lineno">  706</span>&#160;  (void)FiniInfo;</div>
<div class="line"><a name="l00707"></a><span class="lineno">  707</span>&#160;  <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(FiniInfo.DK == OMPD_parallel &amp;&amp;</div>
<div class="line"><a name="l00708"></a><span class="lineno">  708</span>&#160;         <span class="stringliteral">&quot;Unexpected finalization stack state!&quot;</span>);</div>
<div class="line"><a name="l00709"></a><span class="lineno">  709</span>&#160; </div>
<div class="line"><a name="l00710"></a><span class="lineno">  710</span>&#160;  <a class="code" href="classllvm_1_1Instruction.html">Instruction</a> *PRegPreFiniTI = PRegPreFiniBB-&gt;<a class="code" href="classllvm_1_1BasicBlock.html#a71a9eabc4318b2fc34f83b01dfee484b">getTerminator</a>();</div>
<div class="line"><a name="l00711"></a><span class="lineno">  711</span>&#160; </div>
<div class="line"><a name="l00712"></a><span class="lineno">  712</span>&#160;  <a class="code" href="classllvm_1_1OpenMPIRBuilder.html#aafc1886793b898052f87edd7e9fdbaa3">InsertPointTy</a> PreFiniIP(PRegPreFiniBB, PRegPreFiniTI-&gt;<a class="code" href="classllvm_1_1ilist__node__impl.html#af719fc783be6589465137d997701a432">getIterator</a>());</div>
<div class="line"><a name="l00713"></a><span class="lineno">  713</span>&#160;  FiniCB(PreFiniIP);</div>
<div class="line"><a name="l00714"></a><span class="lineno">  714</span>&#160; </div>
<div class="line"><a name="l00715"></a><span class="lineno">  715</span>&#160;  OI.<a class="code" href="structllvm_1_1OpenMPIRBuilder_1_1OutlineInfo.html#adc0b48022847ca44b3868d058cb98686">EntryBB</a> = PRegEntryBB;</div>
<div class="line"><a name="l00716"></a><span class="lineno">  716</span>&#160;  OI.<a class="code" href="structllvm_1_1OpenMPIRBuilder_1_1OutlineInfo.html#adb6b79680b86167fd4ec4f32346e9e58">ExitBB</a> = PRegExitBB;</div>
<div class="line"><a name="l00717"></a><span class="lineno">  717</span>&#160; </div>
<div class="line"><a name="l00718"></a><span class="lineno">  718</span>&#160;  <a class="code" href="classllvm_1_1SmallPtrSet.html">SmallPtrSet&lt;BasicBlock *, 32&gt;</a> ParallelRegionBlockSet;</div>
<div class="line"><a name="l00719"></a><span class="lineno">  719</span>&#160;  <a class="code" href="classllvm_1_1SmallVector.html">SmallVector&lt;BasicBlock *, 32&gt;</a> Blocks;</div>
<div class="line"><a name="l00720"></a><span class="lineno">  720</span>&#160;  OI.<a class="code" href="structllvm_1_1OpenMPIRBuilder_1_1OutlineInfo.html#a218bc49443ef1f05fc8074d872d41fcd">collectBlocks</a>(ParallelRegionBlockSet, Blocks);</div>
<div class="line"><a name="l00721"></a><span class="lineno">  721</span>&#160; </div>
<div class="line"><a name="l00722"></a><span class="lineno">  722</span>&#160;  <span class="comment">// Ensure a single exit node for the outlined region by creating one.</span></div>
<div class="line"><a name="l00723"></a><span class="lineno">  723</span>&#160;  <span class="comment">// We might have multiple incoming edges to the exit now due to finalizations,</span></div>
<div class="line"><a name="l00724"></a><span class="lineno">  724</span>&#160;  <span class="comment">// e.g., cancel calls that cause the control flow to leave the region.</span></div>
<div class="line"><a name="l00725"></a><span class="lineno">  725</span>&#160;  <a class="code" href="classllvm_1_1BasicBlock.html">BasicBlock</a> *PRegOutlinedExitBB = PRegExitBB;</div>
<div class="line"><a name="l00726"></a><span class="lineno">  726</span>&#160;  PRegExitBB = <a class="code" href="namespacellvm.html#ad295cb34421c21507bc9cdefe1ba3f16">SplitBlock</a>(PRegExitBB, &amp;*PRegExitBB-&gt;<a class="code" href="classllvm_1_1BasicBlock.html#a161fd4e9fa5367f64c2a4c9e921c3ad3">getFirstInsertionPt</a>());</div>
<div class="line"><a name="l00727"></a><span class="lineno">  727</span>&#160;  PRegOutlinedExitBB-&gt;<a class="code" href="classllvm_1_1Value.html#a35ee267850af7c235474a8c46c7ac5af">setName</a>(<span class="stringliteral">&quot;omp.par.outlined.exit&quot;</span>);</div>
<div class="line"><a name="l00728"></a><span class="lineno">  728</span>&#160;  Blocks.push_back(PRegOutlinedExitBB);</div>
<div class="line"><a name="l00729"></a><span class="lineno">  729</span>&#160; </div>
<div class="line"><a name="l00730"></a><span class="lineno">  730</span>&#160;  <a class="code" href="classllvm_1_1CodeExtractorAnalysisCache.html">CodeExtractorAnalysisCache</a> CEAC(*OuterFn);</div>
<div class="line"><a name="l00731"></a><span class="lineno">  731</span>&#160;  <a class="code" href="classllvm_1_1CodeExtractor.html">CodeExtractor</a> Extractor(Blocks, <span class="comment">/* DominatorTree */</span> <span class="keyword">nullptr</span>,</div>
<div class="line"><a name="l00732"></a><span class="lineno">  732</span>&#160;                          <span class="comment">/* AggregateArgs */</span> <span class="keyword">false</span>,</div>
<div class="line"><a name="l00733"></a><span class="lineno">  733</span>&#160;                          <span class="comment">/* BlockFrequencyInfo */</span> <span class="keyword">nullptr</span>,</div>
<div class="line"><a name="l00734"></a><span class="lineno">  734</span>&#160;                          <span class="comment">/* BranchProbabilityInfo */</span> <span class="keyword">nullptr</span>,</div>
<div class="line"><a name="l00735"></a><span class="lineno">  735</span>&#160;                          <span class="comment">/* AssumptionCache */</span> <span class="keyword">nullptr</span>,</div>
<div class="line"><a name="l00736"></a><span class="lineno">  736</span>&#160;                          <span class="comment">/* AllowVarArgs */</span> <span class="keyword">true</span>,</div>
<div class="line"><a name="l00737"></a><span class="lineno">  737</span>&#160;                          <span class="comment">/* AllowAlloca */</span> <span class="keyword">true</span>,</div>
<div class="line"><a name="l00738"></a><span class="lineno">  738</span>&#160;                          <span class="comment">/* Suffix */</span> <span class="stringliteral">&quot;.omp_par&quot;</span>);</div>
<div class="line"><a name="l00739"></a><span class="lineno">  739</span>&#160; </div>
<div class="line"><a name="l00740"></a><span class="lineno">  740</span>&#160;  <span class="comment">// Find inputs to, outputs from the code region.</span></div>
<div class="line"><a name="l00741"></a><span class="lineno">  741</span>&#160;  <a class="code" href="classllvm_1_1BasicBlock.html">BasicBlock</a> *CommonExit = <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l00742"></a><span class="lineno">  742</span>&#160;  <a class="code" href="classllvm_1_1SetVector.html">SetVector&lt;Value *&gt;</a> Inputs, Outputs, SinkingCands, HoistingCands;</div>
<div class="line"><a name="l00743"></a><span class="lineno">  743</span>&#160;  Extractor.<a class="code" href="classllvm_1_1CodeExtractor.html#a537993928c8af5b0d064fcd5ce1dec2f">findAllocas</a>(CEAC, SinkingCands, HoistingCands, CommonExit);</div>
<div class="line"><a name="l00744"></a><span class="lineno">  744</span>&#160;  Extractor.<a class="code" href="classllvm_1_1CodeExtractor.html#a3719f9e5392a61378d7815a6c346abda">findInputsOutputs</a>(Inputs, Outputs, SinkingCands);</div>
<div class="line"><a name="l00745"></a><span class="lineno">  745</span>&#160; </div>
<div class="line"><a name="l00746"></a><span class="lineno">  746</span>&#160;  <a class="code" href="Debug_8h.html#a08efc68d15935eb8889400a46c3749ba">LLVM_DEBUG</a>(<a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <span class="stringliteral">&quot;Before privatization: &quot;</span> &lt;&lt; *OuterFn &lt;&lt; <span class="stringliteral">&quot;\n&quot;</span>);</div>
<div class="line"><a name="l00747"></a><span class="lineno">  747</span>&#160; </div>
<div class="line"><a name="l00748"></a><span class="lineno">  748</span>&#160;  <a class="code" href="classllvm_1_1FunctionCallee.html">FunctionCallee</a> TIDRTLFn =</div>
<div class="line"><a name="l00749"></a><span class="lineno">  749</span>&#160;      getOrCreateRuntimeFunctionPtr(OMPRTL___kmpc_global_thread_num);</div>
<div class="line"><a name="l00750"></a><span class="lineno">  750</span>&#160; </div>
<div class="line"><a name="l00751"></a><span class="lineno">  751</span>&#160;  <span class="keyword">auto</span> PrivHelper = [&amp;](<a class="code" href="classllvm_1_1Value.html">Value</a> &amp;V) {</div>
<div class="line"><a name="l00752"></a><span class="lineno">  752</span>&#160;    <span class="keywordflow">if</span> (&amp;V == TIDAddr || &amp;V == ZeroAddr)</div>
<div class="line"><a name="l00753"></a><span class="lineno">  753</span>&#160;      <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l00754"></a><span class="lineno">  754</span>&#160; </div>
<div class="line"><a name="l00755"></a><span class="lineno">  755</span>&#160;    <a class="code" href="classllvm_1_1SetVector.html">SetVector&lt;Use *&gt;</a> <a class="code" href="ARMLowOverheadLoops_8cpp.html#a0a0971d62011c35b29ff4a2325d45e93">Uses</a>;</div>
<div class="line"><a name="l00756"></a><span class="lineno">  756</span>&#160;    <span class="keywordflow">for</span> (<a class="code" href="classllvm_1_1Use.html">Use</a> &amp;U : V.uses())</div>
<div class="line"><a name="l00757"></a><span class="lineno">  757</span>&#160;      <span class="keywordflow">if</span> (<span class="keyword">auto</span> *UserI = dyn_cast&lt;Instruction&gt;(U.getUser()))</div>
<div class="line"><a name="l00758"></a><span class="lineno">  758</span>&#160;        <span class="keywordflow">if</span> (ParallelRegionBlockSet.<a class="code" href="classllvm_1_1SmallPtrSetImpl.html#a1f475b0df44ebd7169e720fa1bf9169e">count</a>(UserI-&gt;getParent()))</div>
<div class="line"><a name="l00759"></a><span class="lineno">  759</span>&#160;          <a class="code" href="ARMLowOverheadLoops_8cpp.html#a0a0971d62011c35b29ff4a2325d45e93">Uses</a>.insert(&amp;U);</div>
<div class="line"><a name="l00760"></a><span class="lineno">  760</span>&#160; </div>
<div class="line"><a name="l00761"></a><span class="lineno">  761</span>&#160;    <span class="comment">// __kmpc_fork_call expects extra arguments as pointers. If the input</span></div>
<div class="line"><a name="l00762"></a><span class="lineno">  762</span>&#160;    <span class="comment">// already has a pointer type, everything is fine. Otherwise, store the</span></div>
<div class="line"><a name="l00763"></a><span class="lineno">  763</span>&#160;    <span class="comment">// value onto stack and load it back inside the to-be-outlined region. This</span></div>
<div class="line"><a name="l00764"></a><span class="lineno">  764</span>&#160;    <span class="comment">// will ensure only the pointer will be passed to the function.</span></div>
<div class="line"><a name="l00765"></a><span class="lineno">  765</span>&#160;    <span class="comment">// FIXME: if there are more than 15 trailing arguments, they must be</span></div>
<div class="line"><a name="l00766"></a><span class="lineno">  766</span>&#160;    <span class="comment">// additionally packed in a struct.</span></div>
<div class="line"><a name="l00767"></a><span class="lineno">  767</span>&#160;    <a class="code" href="classllvm_1_1Value.html">Value</a> *Inner = &amp;V;</div>
<div class="line"><a name="l00768"></a><span class="lineno">  768</span>&#160;    <span class="keywordflow">if</span> (!V.getType()-&gt;isPointerTy()) {</div>
<div class="line"><a name="l00769"></a><span class="lineno">  769</span>&#160;      <a class="code" href="classllvm_1_1IRBuilder.html">IRBuilder&lt;&gt;::InsertPointGuard</a> Guard(<a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>);</div>
<div class="line"><a name="l00770"></a><span class="lineno">  770</span>&#160;      <a class="code" href="Debug_8h.html#a08efc68d15935eb8889400a46c3749ba">LLVM_DEBUG</a>(<a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">llvm::dbgs</a>() &lt;&lt; <span class="stringliteral">&quot;Forwarding input as pointer: &quot;</span> &lt;&lt; V &lt;&lt; <span class="stringliteral">&quot;\n&quot;</span>);</div>
<div class="line"><a name="l00771"></a><span class="lineno">  771</span>&#160; </div>
<div class="line"><a name="l00772"></a><span class="lineno">  772</span>&#160;      <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.restoreIP(OuterAllocaIP);</div>
<div class="line"><a name="l00773"></a><span class="lineno">  773</span>&#160;      <a class="code" href="classllvm_1_1Value.html">Value</a> *Ptr =</div>
<div class="line"><a name="l00774"></a><span class="lineno">  774</span>&#160;          <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.CreateAlloca(V.getType(), <span class="keyword">nullptr</span>, V.getName() + <span class="stringliteral">&quot;.reloaded&quot;</span>);</div>
<div class="line"><a name="l00775"></a><span class="lineno">  775</span>&#160; </div>
<div class="line"><a name="l00776"></a><span class="lineno">  776</span>&#160;      <span class="comment">// Store to stack at end of the block that currently branches to the entry</span></div>
<div class="line"><a name="l00777"></a><span class="lineno">  777</span>&#160;      <span class="comment">// block of the to-be-outlined region.</span></div>
<div class="line"><a name="l00778"></a><span class="lineno">  778</span>&#160;      <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.SetInsertPoint(InsertBB,</div>
<div class="line"><a name="l00779"></a><span class="lineno">  779</span>&#160;                             InsertBB-&gt;<a class="code" href="classllvm_1_1BasicBlock.html#a71a9eabc4318b2fc34f83b01dfee484b">getTerminator</a>()-&gt;<a class="code" href="classllvm_1_1ilist__node__impl.html#af719fc783be6589465137d997701a432">getIterator</a>());</div>
<div class="line"><a name="l00780"></a><span class="lineno">  780</span>&#160;      <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.CreateStore(&amp;V, Ptr);</div>
<div class="line"><a name="l00781"></a><span class="lineno">  781</span>&#160; </div>
<div class="line"><a name="l00782"></a><span class="lineno">  782</span>&#160;      <span class="comment">// Load back next to allocations in the to-be-outlined region.</span></div>
<div class="line"><a name="l00783"></a><span class="lineno">  783</span>&#160;      <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.restoreIP(InnerAllocaIP);</div>
<div class="line"><a name="l00784"></a><span class="lineno">  784</span>&#160;      Inner = <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.CreateLoad(V.getType(), Ptr);</div>
<div class="line"><a name="l00785"></a><span class="lineno">  785</span>&#160;    }</div>
<div class="line"><a name="l00786"></a><span class="lineno">  786</span>&#160; </div>
<div class="line"><a name="l00787"></a><span class="lineno">  787</span>&#160;    <a class="code" href="classllvm_1_1Value.html">Value</a> *ReplacementValue = <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l00788"></a><span class="lineno">  788</span>&#160;    <a class="code" href="classllvm_1_1CallInst.html">CallInst</a> *CI = dyn_cast&lt;CallInst&gt;(&amp;V);</div>
<div class="line"><a name="l00789"></a><span class="lineno">  789</span>&#160;    <span class="keywordflow">if</span> (CI &amp;&amp; CI-&gt;<a class="code" href="classllvm_1_1CallBase.html#a83b8c9e572130f403445c0b0f69b837c">getCalledFunction</a>() == TIDRTLFn.<a class="code" href="classllvm_1_1FunctionCallee.html#a0055cd5464b935f571b36979a86bd7fc">getCallee</a>()) {</div>
<div class="line"><a name="l00790"></a><span class="lineno">  790</span>&#160;      ReplacementValue = PrivTID;</div>
<div class="line"><a name="l00791"></a><span class="lineno">  791</span>&#160;    } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00792"></a><span class="lineno">  792</span>&#160;      <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.restoreIP(</div>
<div class="line"><a name="l00793"></a><span class="lineno">  793</span>&#160;          PrivCB(InnerAllocaIP, <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.saveIP(), V, *Inner, ReplacementValue));</div>
<div class="line"><a name="l00794"></a><span class="lineno">  794</span>&#160;      <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(ReplacementValue &amp;&amp;</div>
<div class="line"><a name="l00795"></a><span class="lineno">  795</span>&#160;             <span class="stringliteral">&quot;Expected copy/create callback to set replacement value!&quot;</span>);</div>
<div class="line"><a name="l00796"></a><span class="lineno">  796</span>&#160;      <span class="keywordflow">if</span> (ReplacementValue == &amp;V)</div>
<div class="line"><a name="l00797"></a><span class="lineno">  797</span>&#160;        <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l00798"></a><span class="lineno">  798</span>&#160;    }</div>
<div class="line"><a name="l00799"></a><span class="lineno">  799</span>&#160; </div>
<div class="line"><a name="l00800"></a><span class="lineno">  800</span>&#160;    <span class="keywordflow">for</span> (<a class="code" href="classllvm_1_1Use.html">Use</a> *UPtr : <a class="code" href="ARMLowOverheadLoops_8cpp.html#a0a0971d62011c35b29ff4a2325d45e93">Uses</a>)</div>
<div class="line"><a name="l00801"></a><span class="lineno">  801</span>&#160;      UPtr-&gt;set(ReplacementValue);</div>
<div class="line"><a name="l00802"></a><span class="lineno">  802</span>&#160;  };</div>
<div class="line"><a name="l00803"></a><span class="lineno">  803</span>&#160; </div>
<div class="line"><a name="l00804"></a><span class="lineno">  804</span>&#160;  <span class="comment">// Reset the inner alloca insertion as it will be used for loading the values</span></div>
<div class="line"><a name="l00805"></a><span class="lineno">  805</span>&#160;  <span class="comment">// wrapped into pointers before passing them into the to-be-outlined region.</span></div>
<div class="line"><a name="l00806"></a><span class="lineno">  806</span>&#160;  <span class="comment">// Configure it to insert immediately after the fake use of zero address so</span></div>
<div class="line"><a name="l00807"></a><span class="lineno">  807</span>&#160;  <span class="comment">// that they are available in the generated body and so that the</span></div>
<div class="line"><a name="l00808"></a><span class="lineno">  808</span>&#160;  <span class="comment">// OpenMP-related values (thread ID and zero address pointers) remain leading</span></div>
<div class="line"><a name="l00809"></a><span class="lineno">  809</span>&#160;  <span class="comment">// in the argument list.</span></div>
<div class="line"><a name="l00810"></a><span class="lineno">  810</span>&#160;  InnerAllocaIP = <a class="code" href="classllvm_1_1IRBuilder.html">IRBuilder&lt;&gt;::InsertPoint</a>(</div>
<div class="line"><a name="l00811"></a><span class="lineno">  811</span>&#160;      ZeroAddrUse-&gt;<a class="code" href="classllvm_1_1Instruction.html#a1a7f07aaef6a3bee130bf0e0f0536802">getParent</a>(), ZeroAddrUse-&gt;<a class="code" href="classllvm_1_1ilist__node__with__parent.html#a26708685cc8b94fe3d7092ee080dbb34">getNextNode</a>()-&gt;<a class="code" href="classllvm_1_1ilist__node__impl.html#af719fc783be6589465137d997701a432">getIterator</a>());</div>
<div class="line"><a name="l00812"></a><span class="lineno">  812</span>&#160; </div>
<div class="line"><a name="l00813"></a><span class="lineno">  813</span>&#160;  <span class="comment">// Reset the outer alloca insertion point to the entry of the relevant block</span></div>
<div class="line"><a name="l00814"></a><span class="lineno">  814</span>&#160;  <span class="comment">// in case it was invalidated.</span></div>
<div class="line"><a name="l00815"></a><span class="lineno">  815</span>&#160;  OuterAllocaIP = <a class="code" href="classllvm_1_1IRBuilder.html">IRBuilder&lt;&gt;::InsertPoint</a>(</div>
<div class="line"><a name="l00816"></a><span class="lineno">  816</span>&#160;      OuterAllocaBlock, OuterAllocaBlock-&gt;<a class="code" href="classllvm_1_1BasicBlock.html#a161fd4e9fa5367f64c2a4c9e921c3ad3">getFirstInsertionPt</a>());</div>
<div class="line"><a name="l00817"></a><span class="lineno">  817</span>&#160; </div>
<div class="line"><a name="l00818"></a><span class="lineno">  818</span>&#160;  <span class="keywordflow">for</span> (<a class="code" href="classllvm_1_1Value.html">Value</a> *Input : Inputs) {</div>
<div class="line"><a name="l00819"></a><span class="lineno">  819</span>&#160;    <a class="code" href="Debug_8h.html#a08efc68d15935eb8889400a46c3749ba">LLVM_DEBUG</a>(<a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <span class="stringliteral">&quot;Captured input: &quot;</span> &lt;&lt; *Input &lt;&lt; <span class="stringliteral">&quot;\n&quot;</span>);</div>
<div class="line"><a name="l00820"></a><span class="lineno">  820</span>&#160;    PrivHelper(*Input);</div>
<div class="line"><a name="l00821"></a><span class="lineno">  821</span>&#160;  }</div>
<div class="line"><a name="l00822"></a><span class="lineno">  822</span>&#160;  <a class="code" href="Debug_8h.html#a08efc68d15935eb8889400a46c3749ba">LLVM_DEBUG</a>({</div>
<div class="line"><a name="l00823"></a><span class="lineno">  823</span>&#160;    <span class="keywordflow">for</span> (<a class="code" href="classllvm_1_1Value.html">Value</a> *Output : Outputs)</div>
<div class="line"><a name="l00824"></a><span class="lineno">  824</span>&#160;      <a class="code" href="Debug_8h.html#a08efc68d15935eb8889400a46c3749ba">LLVM_DEBUG</a>(<a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <span class="stringliteral">&quot;Captured output: &quot;</span> &lt;&lt; *Output &lt;&lt; <span class="stringliteral">&quot;\n&quot;</span>);</div>
<div class="line"><a name="l00825"></a><span class="lineno">  825</span>&#160;  });</div>
<div class="line"><a name="l00826"></a><span class="lineno">  826</span>&#160;  <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(Outputs.<a class="code" href="classllvm_1_1SetVector.html#aaf9ee38b9973681c1720aaf03af3a069">empty</a>() &amp;&amp;</div>
<div class="line"><a name="l00827"></a><span class="lineno">  827</span>&#160;         <span class="stringliteral">&quot;OpenMP outlining should not produce live-out values!&quot;</span>);</div>
<div class="line"><a name="l00828"></a><span class="lineno">  828</span>&#160; </div>
<div class="line"><a name="l00829"></a><span class="lineno">  829</span>&#160;  <a class="code" href="Debug_8h.html#a08efc68d15935eb8889400a46c3749ba">LLVM_DEBUG</a>(<a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <span class="stringliteral">&quot;After  privatization: &quot;</span> &lt;&lt; *OuterFn &lt;&lt; <span class="stringliteral">&quot;\n&quot;</span>);</div>
<div class="line"><a name="l00830"></a><span class="lineno">  830</span>&#160;  <a class="code" href="Debug_8h.html#a08efc68d15935eb8889400a46c3749ba">LLVM_DEBUG</a>({</div>
<div class="line"><a name="l00831"></a><span class="lineno">  831</span>&#160;    <span class="keywordflow">for</span> (<span class="keyword">auto</span> *<a class="code" href="lib_2CodeGen_2README_8txt.html#a09776db24cf586ec9f1e18f3bae14099">BB</a> : Blocks)</div>
<div class="line"><a name="l00832"></a><span class="lineno">  832</span>&#160;      <a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <span class="stringliteral">&quot; PBR: &quot;</span> &lt;&lt; <a class="code" href="lib_2CodeGen_2README_8txt.html#a09776db24cf586ec9f1e18f3bae14099">BB</a>-&gt;getName() &lt;&lt; <span class="stringliteral">&quot;\n&quot;</span>;</div>
<div class="line"><a name="l00833"></a><span class="lineno">  833</span>&#160;  });</div>
<div class="line"><a name="l00834"></a><span class="lineno">  834</span>&#160; </div>
<div class="line"><a name="l00835"></a><span class="lineno">  835</span>&#160;  <span class="comment">// Register the outlined info.</span></div>
<div class="line"><a name="l00836"></a><span class="lineno">  836</span>&#160;  addOutlineInfo(<a class="code" href="lib_2Target_2ARM_2README_8txt.html#ad3a99906764c35b2694ae90fa57744a5">std::move</a>(OI));</div>
<div class="line"><a name="l00837"></a><span class="lineno">  837</span>&#160; </div>
<div class="line"><a name="l00838"></a><span class="lineno">  838</span>&#160;  <a class="code" href="classllvm_1_1OpenMPIRBuilder.html#aafc1886793b898052f87edd7e9fdbaa3">InsertPointTy</a> AfterIP(UI-&gt;getParent(), UI-&gt;getParent()-&gt;end());</div>
<div class="line"><a name="l00839"></a><span class="lineno">  839</span>&#160;  UI-&gt;eraseFromParent();</div>
<div class="line"><a name="l00840"></a><span class="lineno">  840</span>&#160; </div>
<div class="line"><a name="l00841"></a><span class="lineno">  841</span>&#160;  <span class="keywordflow">return</span> AfterIP;</div>
<div class="line"><a name="l00842"></a><span class="lineno">  842</span>&#160;}</div>
<div class="line"><a name="l00843"></a><span class="lineno">  843</span>&#160; </div>
<div class="line"><a name="l00844"></a><span class="lineno"><a class="line" href="classllvm_1_1OpenMPIRBuilder.html#a2a4b97bb7670d306c756cdbd5ee9b560">  844</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="classllvm_1_1OpenMPIRBuilder.html#a2a4b97bb7670d306c756cdbd5ee9b560">OpenMPIRBuilder::emitFlush</a>(<span class="keyword">const</span> <a class="code" href="structllvm_1_1OpenMPIRBuilder_1_1LocationDescription.html">LocationDescription</a> &amp;Loc) {</div>
<div class="line"><a name="l00845"></a><span class="lineno">  845</span>&#160;  <span class="comment">// Build call void __kmpc_flush(ident_t *loc)</span></div>
<div class="line"><a name="l00846"></a><span class="lineno">  846</span>&#160;  <a class="code" href="classllvm_1_1Constant.html">Constant</a> *SrcLocStr = getOrCreateSrcLocStr(Loc);</div>
<div class="line"><a name="l00847"></a><span class="lineno">  847</span>&#160;  <a class="code" href="classllvm_1_1Value.html">Value</a> *<a class="code" href="namespacellvm_1_1AMDGPU_1_1HSAMD_1_1Kernel_1_1Key.html#a1958a762261549463a280bac3274d6d5">Args</a>[] = {getOrCreateIdent(SrcLocStr)};</div>
<div class="line"><a name="l00848"></a><span class="lineno">  848</span>&#160; </div>
<div class="line"><a name="l00849"></a><span class="lineno">  849</span>&#160;  <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.CreateCall(getOrCreateRuntimeFunctionPtr(OMPRTL___kmpc_flush), <a class="code" href="namespacellvm_1_1AMDGPU_1_1HSAMD_1_1Kernel_1_1Key.html#a1958a762261549463a280bac3274d6d5">Args</a>);</div>
<div class="line"><a name="l00850"></a><span class="lineno">  850</span>&#160;}</div>
<div class="line"><a name="l00851"></a><span class="lineno">  851</span>&#160; </div>
<div class="line"><a name="l00852"></a><span class="lineno"><a class="line" href="classllvm_1_1OpenMPIRBuilder.html#afc2cc623eda981e1b3fbb61a44e80ef8">  852</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="classllvm_1_1OpenMPIRBuilder.html#afc2cc623eda981e1b3fbb61a44e80ef8">OpenMPIRBuilder::createFlush</a>(<span class="keyword">const</span> <a class="code" href="structllvm_1_1OpenMPIRBuilder_1_1LocationDescription.html">LocationDescription</a> &amp;Loc) {</div>
<div class="line"><a name="l00853"></a><span class="lineno">  853</span>&#160;  <span class="keywordflow">if</span> (!updateToLocation(Loc))</div>
<div class="line"><a name="l00854"></a><span class="lineno">  854</span>&#160;    <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l00855"></a><span class="lineno">  855</span>&#160;  emitFlush(Loc);</div>
<div class="line"><a name="l00856"></a><span class="lineno">  856</span>&#160;}</div>
<div class="line"><a name="l00857"></a><span class="lineno">  857</span>&#160; </div>
<div class="line"><a name="l00858"></a><span class="lineno"><a class="line" href="classllvm_1_1OpenMPIRBuilder.html#a177df2c9d7d8692ed214018f420c3de6">  858</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="classllvm_1_1OpenMPIRBuilder.html#a177df2c9d7d8692ed214018f420c3de6">OpenMPIRBuilder::emitTaskwaitImpl</a>(<span class="keyword">const</span> <a class="code" href="structllvm_1_1OpenMPIRBuilder_1_1LocationDescription.html">LocationDescription</a> &amp;Loc) {</div>
<div class="line"><a name="l00859"></a><span class="lineno">  859</span>&#160;  <span class="comment">// Build call kmp_int32 __kmpc_omp_taskwait(ident_t *loc, kmp_int32</span></div>
<div class="line"><a name="l00860"></a><span class="lineno">  860</span>&#160;  <span class="comment">// global_tid);</span></div>
<div class="line"><a name="l00861"></a><span class="lineno">  861</span>&#160;  <a class="code" href="classllvm_1_1Constant.html">Constant</a> *SrcLocStr = getOrCreateSrcLocStr(Loc);</div>
<div class="line"><a name="l00862"></a><span class="lineno">  862</span>&#160;  <a class="code" href="classllvm_1_1Value.html">Value</a> *Ident = getOrCreateIdent(SrcLocStr);</div>
<div class="line"><a name="l00863"></a><span class="lineno">  863</span>&#160;  <a class="code" href="classllvm_1_1Value.html">Value</a> *<a class="code" href="namespacellvm_1_1AMDGPU_1_1HSAMD_1_1Kernel_1_1Key.html#a1958a762261549463a280bac3274d6d5">Args</a>[] = {Ident, getOrCreateThreadID(Ident)};</div>
<div class="line"><a name="l00864"></a><span class="lineno">  864</span>&#160; </div>
<div class="line"><a name="l00865"></a><span class="lineno">  865</span>&#160;  <span class="comment">// Ignore return result until untied tasks are supported.</span></div>
<div class="line"><a name="l00866"></a><span class="lineno">  866</span>&#160;  <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.CreateCall(getOrCreateRuntimeFunctionPtr(OMPRTL___kmpc_omp_taskwait),</div>
<div class="line"><a name="l00867"></a><span class="lineno">  867</span>&#160;                     <a class="code" href="namespacellvm_1_1AMDGPU_1_1HSAMD_1_1Kernel_1_1Key.html#a1958a762261549463a280bac3274d6d5">Args</a>);</div>
<div class="line"><a name="l00868"></a><span class="lineno">  868</span>&#160;}</div>
<div class="line"><a name="l00869"></a><span class="lineno">  869</span>&#160; </div>
<div class="line"><a name="l00870"></a><span class="lineno"><a class="line" href="classllvm_1_1OpenMPIRBuilder.html#a419ffad9e4d59275e299ce1ad3c73cd4">  870</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="classllvm_1_1OpenMPIRBuilder.html#a419ffad9e4d59275e299ce1ad3c73cd4">OpenMPIRBuilder::createTaskwait</a>(<span class="keyword">const</span> <a class="code" href="structllvm_1_1OpenMPIRBuilder_1_1LocationDescription.html">LocationDescription</a> &amp;Loc) {</div>
<div class="line"><a name="l00871"></a><span class="lineno">  871</span>&#160;  <span class="keywordflow">if</span> (!updateToLocation(Loc))</div>
<div class="line"><a name="l00872"></a><span class="lineno">  872</span>&#160;    <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l00873"></a><span class="lineno">  873</span>&#160;  emitTaskwaitImpl(Loc);</div>
<div class="line"><a name="l00874"></a><span class="lineno">  874</span>&#160;}</div>
<div class="line"><a name="l00875"></a><span class="lineno">  875</span>&#160; </div>
<div class="line"><a name="l00876"></a><span class="lineno"><a class="line" href="classllvm_1_1OpenMPIRBuilder.html#a6383328cfcdbbd56502b92f9e2415432">  876</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="classllvm_1_1OpenMPIRBuilder.html#a6383328cfcdbbd56502b92f9e2415432">OpenMPIRBuilder::emitTaskyieldImpl</a>(<span class="keyword">const</span> <a class="code" href="structllvm_1_1OpenMPIRBuilder_1_1LocationDescription.html">LocationDescription</a> &amp;Loc) {</div>
<div class="line"><a name="l00877"></a><span class="lineno">  877</span>&#160;  <span class="comment">// Build call __kmpc_omp_taskyield(loc, thread_id, 0);</span></div>
<div class="line"><a name="l00878"></a><span class="lineno">  878</span>&#160;  <a class="code" href="classllvm_1_1Constant.html">Constant</a> *SrcLocStr = getOrCreateSrcLocStr(Loc);</div>
<div class="line"><a name="l00879"></a><span class="lineno">  879</span>&#160;  <a class="code" href="classllvm_1_1Value.html">Value</a> *Ident = getOrCreateIdent(SrcLocStr);</div>
<div class="line"><a name="l00880"></a><span class="lineno">  880</span>&#160;  <a class="code" href="classllvm_1_1Constant.html">Constant</a> *I32Null = <a class="code" href="classllvm_1_1Constant.html#aa6574d526b3e38a28f688a7bb4325c2c">ConstantInt::getNullValue</a>(<a class="code" href="namespacellvm_1_1pdb.html#a434cfa04e4ed34b7a901378557d4ca9ea786eecab07351b4cc9e4c33f4cf5691e">Int32</a>);</div>
<div class="line"><a name="l00881"></a><span class="lineno">  881</span>&#160;  <a class="code" href="classllvm_1_1Value.html">Value</a> *<a class="code" href="namespacellvm_1_1AMDGPU_1_1HSAMD_1_1Kernel_1_1Key.html#a1958a762261549463a280bac3274d6d5">Args</a>[] = {Ident, getOrCreateThreadID(Ident), I32Null};</div>
<div class="line"><a name="l00882"></a><span class="lineno">  882</span>&#160; </div>
<div class="line"><a name="l00883"></a><span class="lineno">  883</span>&#160;  <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.CreateCall(getOrCreateRuntimeFunctionPtr(OMPRTL___kmpc_omp_taskyield),</div>
<div class="line"><a name="l00884"></a><span class="lineno">  884</span>&#160;                     <a class="code" href="namespacellvm_1_1AMDGPU_1_1HSAMD_1_1Kernel_1_1Key.html#a1958a762261549463a280bac3274d6d5">Args</a>);</div>
<div class="line"><a name="l00885"></a><span class="lineno">  885</span>&#160;}</div>
<div class="line"><a name="l00886"></a><span class="lineno">  886</span>&#160; </div>
<div class="line"><a name="l00887"></a><span class="lineno"><a class="line" href="classllvm_1_1OpenMPIRBuilder.html#a0b0ed7f600549e4239bf10b5b85de66c">  887</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="classllvm_1_1OpenMPIRBuilder.html#a0b0ed7f600549e4239bf10b5b85de66c">OpenMPIRBuilder::createTaskyield</a>(<span class="keyword">const</span> <a class="code" href="structllvm_1_1OpenMPIRBuilder_1_1LocationDescription.html">LocationDescription</a> &amp;Loc) {</div>
<div class="line"><a name="l00888"></a><span class="lineno">  888</span>&#160;  <span class="keywordflow">if</span> (!updateToLocation(Loc))</div>
<div class="line"><a name="l00889"></a><span class="lineno">  889</span>&#160;    <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l00890"></a><span class="lineno">  890</span>&#160;  emitTaskyieldImpl(Loc);</div>
<div class="line"><a name="l00891"></a><span class="lineno">  891</span>&#160;}</div>
<div class="line"><a name="l00892"></a><span class="lineno">  892</span>&#160; </div>
<div class="line"><a name="l00893"></a><span class="lineno"><a class="line" href="classllvm_1_1OpenMPIRBuilder.html#a5ffd15d898e32d3abd76f5d961781dd2">  893</a></span>&#160;<a class="code" href="classllvm_1_1OpenMPIRBuilder.html#aafc1886793b898052f87edd7e9fdbaa3">OpenMPIRBuilder::InsertPointTy</a> <a class="code" href="classllvm_1_1OpenMPIRBuilder.html#a5ffd15d898e32d3abd76f5d961781dd2">OpenMPIRBuilder::createSections</a>(</div>
<div class="line"><a name="l00894"></a><span class="lineno">  894</span>&#160;    <span class="keyword">const</span> <a class="code" href="structllvm_1_1OpenMPIRBuilder_1_1LocationDescription.html">LocationDescription</a> &amp;Loc, <a class="code" href="classllvm_1_1OpenMPIRBuilder.html#aafc1886793b898052f87edd7e9fdbaa3">InsertPointTy</a> AllocaIP,</div>
<div class="line"><a name="l00895"></a><span class="lineno">  895</span>&#160;    <a class="code" href="classllvm_1_1ArrayRef.html">ArrayRef&lt;StorableBodyGenCallbackTy&gt;</a> SectionCBs, <a class="code" href="classllvm_1_1function__ref.html">PrivatizeCallbackTy</a> PrivCB,</div>
<div class="line"><a name="l00896"></a><span class="lineno">  896</span>&#160;    <a class="code" href="classllvm_1_1OpenMPIRBuilder.html#a03b6c43472b3040013de9cbc25376925">FinalizeCallbackTy</a> FiniCB, <span class="keywordtype">bool</span> IsCancellable, <span class="keywordtype">bool</span> IsNowait) {</div>
<div class="line"><a name="l00897"></a><span class="lineno">  897</span>&#160;  <span class="keywordflow">if</span> (!updateToLocation(Loc))</div>
<div class="line"><a name="l00898"></a><span class="lineno">  898</span>&#160;    <span class="keywordflow">return</span> Loc.<a class="code" href="structllvm_1_1OpenMPIRBuilder_1_1LocationDescription.html#aa15e9d88f98f6d7a0898e6aff4753040">IP</a>;</div>
<div class="line"><a name="l00899"></a><span class="lineno">  899</span>&#160; </div>
<div class="line"><a name="l00900"></a><span class="lineno">  900</span>&#160;  <span class="keyword">auto</span> FiniCBWrapper = [&amp;](<a class="code" href="classllvm_1_1OpenMPIRBuilder.html#aafc1886793b898052f87edd7e9fdbaa3">InsertPointTy</a> <a class="code" href="structIP.html">IP</a>) {</div>
<div class="line"><a name="l00901"></a><span class="lineno">  901</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="structIP.html">IP</a>.getBlock()-&gt;end() != <a class="code" href="structIP.html">IP</a>.getPoint())</div>
<div class="line"><a name="l00902"></a><span class="lineno">  902</span>&#160;      <span class="keywordflow">return</span> FiniCB(<a class="code" href="structIP.html">IP</a>);</div>
<div class="line"><a name="l00903"></a><span class="lineno">  903</span>&#160;    <span class="comment">// This must be done otherwise any nested constructs using FinalizeOMPRegion</span></div>
<div class="line"><a name="l00904"></a><span class="lineno">  904</span>&#160;    <span class="comment">// will fail because that function requires the Finalization Basic Block to</span></div>
<div class="line"><a name="l00905"></a><span class="lineno">  905</span>&#160;    <span class="comment">// have a terminator, which is already removed by EmitOMPRegionBody.</span></div>
<div class="line"><a name="l00906"></a><span class="lineno">  906</span>&#160;    <span class="comment">// IP is currently at cancelation block.</span></div>
<div class="line"><a name="l00907"></a><span class="lineno">  907</span>&#160;    <span class="comment">// We need to backtrack to the condition block to fetch</span></div>
<div class="line"><a name="l00908"></a><span class="lineno">  908</span>&#160;    <span class="comment">// the exit block and create a branch from cancelation</span></div>
<div class="line"><a name="l00909"></a><span class="lineno">  909</span>&#160;    <span class="comment">// to exit block.</span></div>
<div class="line"><a name="l00910"></a><span class="lineno">  910</span>&#160;    <a class="code" href="classllvm_1_1IRBuilder.html">IRBuilder&lt;&gt;::InsertPointGuard</a> IPG(<a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>);</div>
<div class="line"><a name="l00911"></a><span class="lineno">  911</span>&#160;    <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.restoreIP(<a class="code" href="structIP.html">IP</a>);</div>
<div class="line"><a name="l00912"></a><span class="lineno">  912</span>&#160;    <span class="keyword">auto</span> *CaseBB = <a class="code" href="structIP.html">IP</a>.getBlock()-&gt;getSinglePredecessor();</div>
<div class="line"><a name="l00913"></a><span class="lineno">  913</span>&#160;    <span class="keyword">auto</span> *CondBB = CaseBB-&gt;getSinglePredecessor()-&gt;getSinglePredecessor();</div>
<div class="line"><a name="l00914"></a><span class="lineno">  914</span>&#160;    <span class="keyword">auto</span> *ExitBB = CondBB-&gt;getTerminator()-&gt;getSuccessor(1);</div>
<div class="line"><a name="l00915"></a><span class="lineno">  915</span>&#160;    <a class="code" href="classllvm_1_1Instruction.html">Instruction</a> *<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a> = <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.CreateBr(ExitBB);</div>
<div class="line"><a name="l00916"></a><span class="lineno">  916</span>&#160;    <a class="code" href="structIP.html">IP</a> = <a class="code" href="classllvm_1_1OpenMPIRBuilder.html#aafc1886793b898052f87edd7e9fdbaa3">InsertPointTy</a>(<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>-&gt;getParent(), <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>-&gt;getIterator());</div>
<div class="line"><a name="l00917"></a><span class="lineno">  917</span>&#160;    <span class="keywordflow">return</span> FiniCB(<a class="code" href="structIP.html">IP</a>);</div>
<div class="line"><a name="l00918"></a><span class="lineno">  918</span>&#160;  };</div>
<div class="line"><a name="l00919"></a><span class="lineno">  919</span>&#160; </div>
<div class="line"><a name="l00920"></a><span class="lineno">  920</span>&#160;  FinalizationStack.push_back({FiniCBWrapper, OMPD_sections, IsCancellable});</div>
<div class="line"><a name="l00921"></a><span class="lineno">  921</span>&#160; </div>
<div class="line"><a name="l00922"></a><span class="lineno">  922</span>&#160;  <span class="comment">// Each section is emitted as a switch case</span></div>
<div class="line"><a name="l00923"></a><span class="lineno">  923</span>&#160;  <span class="comment">// Each finalization callback is handled from clang.EmitOMPSectionDirective()</span></div>
<div class="line"><a name="l00924"></a><span class="lineno">  924</span>&#160;  <span class="comment">// -&gt; OMP.createSection() which generates the IR for each section</span></div>
<div class="line"><a name="l00925"></a><span class="lineno">  925</span>&#160;  <span class="comment">// Iterate through all sections and emit a switch construct:</span></div>
<div class="line"><a name="l00926"></a><span class="lineno">  926</span>&#160;  <span class="comment">// switch (IV) {</span></div>
<div class="line"><a name="l00927"></a><span class="lineno">  927</span>&#160;  <span class="comment">//   case 0:</span></div>
<div class="line"><a name="l00928"></a><span class="lineno">  928</span>&#160;  <span class="comment">//     &lt;SectionStmt[0]&gt;;</span></div>
<div class="line"><a name="l00929"></a><span class="lineno">  929</span>&#160;  <span class="comment">//     break;</span></div>
<div class="line"><a name="l00930"></a><span class="lineno">  930</span>&#160;  <span class="comment">// ...</span></div>
<div class="line"><a name="l00931"></a><span class="lineno">  931</span>&#160;  <span class="comment">//   case &lt;NumSection&gt; - 1:</span></div>
<div class="line"><a name="l00932"></a><span class="lineno">  932</span>&#160;  <span class="comment">//     &lt;SectionStmt[&lt;NumSection&gt; - 1]&gt;;</span></div>
<div class="line"><a name="l00933"></a><span class="lineno">  933</span>&#160;  <span class="comment">//     break;</span></div>
<div class="line"><a name="l00934"></a><span class="lineno">  934</span>&#160;  <span class="comment">// }</span></div>
<div class="line"><a name="l00935"></a><span class="lineno">  935</span>&#160;  <span class="comment">// ...</span></div>
<div class="line"><a name="l00936"></a><span class="lineno">  936</span>&#160;  <span class="comment">// section_loop.after:</span></div>
<div class="line"><a name="l00937"></a><span class="lineno">  937</span>&#160;  <span class="comment">// &lt;FiniCB&gt;;</span></div>
<div class="line"><a name="l00938"></a><span class="lineno">  938</span>&#160;  <span class="keyword">auto</span> LoopBodyGenCB = [&amp;](<a class="code" href="classllvm_1_1OpenMPIRBuilder.html#aafc1886793b898052f87edd7e9fdbaa3">InsertPointTy</a> CodeGenIP, <a class="code" href="classllvm_1_1Value.html">Value</a> *IndVar) {</div>
<div class="line"><a name="l00939"></a><span class="lineno">  939</span>&#160;    <span class="keyword">auto</span> *CurFn = CodeGenIP.getBlock()-&gt;getParent();</div>
<div class="line"><a name="l00940"></a><span class="lineno">  940</span>&#160;    <span class="keyword">auto</span> *ForIncBB = CodeGenIP.getBlock()-&gt;getSingleSuccessor();</div>
<div class="line"><a name="l00941"></a><span class="lineno">  941</span>&#160;    <span class="keyword">auto</span> *ForExitBB = CodeGenIP.getBlock()</div>
<div class="line"><a name="l00942"></a><span class="lineno">  942</span>&#160;                          -&gt;getSinglePredecessor()</div>
<div class="line"><a name="l00943"></a><span class="lineno">  943</span>&#160;                          -&gt;getTerminator()</div>
<div class="line"><a name="l00944"></a><span class="lineno">  944</span>&#160;                          -&gt;getSuccessor(1);</div>
<div class="line"><a name="l00945"></a><span class="lineno">  945</span>&#160;    <a class="code" href="classllvm_1_1SwitchInst.html">SwitchInst</a> *SwitchStmt = <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.CreateSwitch(IndVar, ForIncBB);</div>
<div class="line"><a name="l00946"></a><span class="lineno">  946</span>&#160;    <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.restoreIP(CodeGenIP);</div>
<div class="line"><a name="l00947"></a><span class="lineno">  947</span>&#160;    <span class="keywordtype">unsigned</span> CaseNumber = 0;</div>
<div class="line"><a name="l00948"></a><span class="lineno">  948</span>&#160;    <span class="keywordflow">for</span> (<span class="keyword">auto</span> SectionCB : SectionCBs) {</div>
<div class="line"><a name="l00949"></a><span class="lineno">  949</span>&#160;      <span class="keyword">auto</span> *CaseBB = <a class="code" href="classllvm_1_1BasicBlock.html#ace940beeee97c222f836fe0ac70f6cf5">BasicBlock::Create</a>(<a class="code" href="lib_2Target_2X86_2README_8txt.html#ac88fe1d3a61b056a4f64fbbb156a62ff">M</a>.getContext(),</div>
<div class="line"><a name="l00950"></a><span class="lineno">  950</span>&#160;                                        <span class="stringliteral">&quot;omp_section_loop.body.case&quot;</span>, CurFn);</div>
<div class="line"><a name="l00951"></a><span class="lineno">  951</span>&#160;      SwitchStmt-&gt;<a class="code" href="classllvm_1_1SwitchInst.html#a62abc2475d09c01d583ba24a487898fd">addCase</a>(<a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.getInt32(CaseNumber), CaseBB);</div>
<div class="line"><a name="l00952"></a><span class="lineno">  952</span>&#160;      <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.SetInsertPoint(CaseBB);</div>
<div class="line"><a name="l00953"></a><span class="lineno">  953</span>&#160;      SectionCB(<a class="code" href="classllvm_1_1OpenMPIRBuilder.html#aafc1886793b898052f87edd7e9fdbaa3">InsertPointTy</a>(), <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.saveIP(), *ForExitBB);</div>
<div class="line"><a name="l00954"></a><span class="lineno">  954</span>&#160;      CaseNumber++;</div>
<div class="line"><a name="l00955"></a><span class="lineno">  955</span>&#160;    }</div>
<div class="line"><a name="l00956"></a><span class="lineno">  956</span>&#160;    <span class="comment">// remove the existing terminator from body BB since there can be no</span></div>
<div class="line"><a name="l00957"></a><span class="lineno">  957</span>&#160;    <span class="comment">// terminators after switch/case</span></div>
<div class="line"><a name="l00958"></a><span class="lineno">  958</span>&#160;    CodeGenIP.getBlock()-&gt;getTerminator()-&gt;eraseFromParent();</div>
<div class="line"><a name="l00959"></a><span class="lineno">  959</span>&#160;  };</div>
<div class="line"><a name="l00960"></a><span class="lineno">  960</span>&#160;  <span class="comment">// Loop body ends here</span></div>
<div class="line"><a name="l00961"></a><span class="lineno">  961</span>&#160;  <span class="comment">// LowerBound, UpperBound, and STride for createCanonicalLoop</span></div>
<div class="line"><a name="l00962"></a><span class="lineno">  962</span>&#160;  <a class="code" href="classllvm_1_1Type.html">Type</a> *I32Ty = <a class="code" href="classllvm_1_1Type.html#a30dd396c5b40cd86c1591872e574ccdf">Type::getInt32Ty</a>(<a class="code" href="lib_2Target_2X86_2README_8txt.html#ac88fe1d3a61b056a4f64fbbb156a62ff">M</a>.getContext());</div>
<div class="line"><a name="l00963"></a><span class="lineno">  963</span>&#160;  <a class="code" href="classllvm_1_1Value.html">Value</a> *LB = <a class="code" href="classllvm_1_1ConstantInt.html#a969709dd49c28865a482d8b870f87c46">ConstantInt::get</a>(I32Ty, 0);</div>
<div class="line"><a name="l00964"></a><span class="lineno">  964</span>&#160;  <a class="code" href="classllvm_1_1Value.html">Value</a> *UB = <a class="code" href="classllvm_1_1ConstantInt.html#a969709dd49c28865a482d8b870f87c46">ConstantInt::get</a>(I32Ty, SectionCBs.<a class="code" href="classllvm_1_1ArrayRef.html#a85ffb6531d4cda988ea81f18d4e56fb7">size</a>());</div>
<div class="line"><a name="l00965"></a><span class="lineno">  965</span>&#160;  <a class="code" href="classllvm_1_1Value.html">Value</a> *<a class="code" href="namespacellvm_1_1ARM__MB.html#ad70272e2a9ec2a7e3a497458e1edbc85aed0b9bef861c96eee19e89db753db7b2">ST</a> = <a class="code" href="classllvm_1_1ConstantInt.html#a969709dd49c28865a482d8b870f87c46">ConstantInt::get</a>(I32Ty, 1);</div>
<div class="line"><a name="l00966"></a><span class="lineno">  966</span>&#160;  <a class="code" href="classllvm_1_1CanonicalLoopInfo.html">llvm::CanonicalLoopInfo</a> *<a class="code" href="classllvm_1_1LoopInfo.html">LoopInfo</a> = createCanonicalLoop(</div>
<div class="line"><a name="l00967"></a><span class="lineno">  967</span>&#160;      Loc, LoopBodyGenCB, LB, UB, <a class="code" href="namespacellvm_1_1ARM__MB.html#ad70272e2a9ec2a7e3a497458e1edbc85aed0b9bef861c96eee19e89db753db7b2">ST</a>, <span class="keyword">true</span>, <span class="keyword">false</span>, AllocaIP, <span class="stringliteral">&quot;section_loop&quot;</span>);</div>
<div class="line"><a name="l00968"></a><span class="lineno">  968</span>&#160;  <a class="code" href="classllvm_1_1LoopInfo.html">LoopInfo</a> = createStaticWorkshareLoop(Loc, <a class="code" href="classllvm_1_1LoopInfo.html">LoopInfo</a>, AllocaIP, <span class="keyword">true</span>);</div>
<div class="line"><a name="l00969"></a><span class="lineno">  969</span>&#160;  <a class="code" href="classllvm_1_1BasicBlock.html">BasicBlock</a> *LoopAfterBB = <a class="code" href="classllvm_1_1LoopInfo.html">LoopInfo</a>-&gt;getAfter();</div>
<div class="line"><a name="l00970"></a><span class="lineno">  970</span>&#160;  <a class="code" href="classllvm_1_1Instruction.html">Instruction</a> *SplitPos = LoopAfterBB-&gt;<a class="code" href="classllvm_1_1BasicBlock.html#a71a9eabc4318b2fc34f83b01dfee484b">getTerminator</a>();</div>
<div class="line"><a name="l00971"></a><span class="lineno">  971</span>&#160;  <span class="keywordflow">if</span> (!isa_and_nonnull&lt;BranchInst&gt;(SplitPos))</div>
<div class="line"><a name="l00972"></a><span class="lineno">  972</span>&#160;    SplitPos = <span class="keyword">new</span> <a class="code" href="classllvm_1_1UnreachableInst.html">UnreachableInst</a>(<a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.getContext(), LoopAfterBB);</div>
<div class="line"><a name="l00973"></a><span class="lineno">  973</span>&#160;  <span class="comment">// ExitBB after LoopAfterBB because LoopAfterBB is used for FinalizationCB,</span></div>
<div class="line"><a name="l00974"></a><span class="lineno">  974</span>&#160;  <span class="comment">// which requires a BB with branch</span></div>
<div class="line"><a name="l00975"></a><span class="lineno">  975</span>&#160;  <a class="code" href="classllvm_1_1BasicBlock.html">BasicBlock</a> *ExitBB =</div>
<div class="line"><a name="l00976"></a><span class="lineno">  976</span>&#160;      LoopAfterBB-&gt;<a class="code" href="classllvm_1_1BasicBlock.html#a52c990590792c91dd20b6d45acebe359">splitBasicBlock</a>(SplitPos, <span class="stringliteral">&quot;omp_sections.end&quot;</span>);</div>
<div class="line"><a name="l00977"></a><span class="lineno">  977</span>&#160;  SplitPos-&gt;<a class="code" href="classllvm_1_1Instruction.html#ae6b978645b8ac72d1a35e1298ffdd4f0">eraseFromParent</a>();</div>
<div class="line"><a name="l00978"></a><span class="lineno">  978</span>&#160; </div>
<div class="line"><a name="l00979"></a><span class="lineno">  979</span>&#160;  <span class="comment">// Apply the finalization callback in LoopAfterBB</span></div>
<div class="line"><a name="l00980"></a><span class="lineno">  980</span>&#160;  <span class="keyword">auto</span> FiniInfo = FinalizationStack.pop_back_val();</div>
<div class="line"><a name="l00981"></a><span class="lineno">  981</span>&#160;  <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(FiniInfo.DK == OMPD_sections &amp;&amp;</div>
<div class="line"><a name="l00982"></a><span class="lineno">  982</span>&#160;         <span class="stringliteral">&quot;Unexpected finalization stack state!&quot;</span>);</div>
<div class="line"><a name="l00983"></a><span class="lineno">  983</span>&#160;  <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.SetInsertPoint(LoopAfterBB-&gt;<a class="code" href="classllvm_1_1BasicBlock.html#a71a9eabc4318b2fc34f83b01dfee484b">getTerminator</a>());</div>
<div class="line"><a name="l00984"></a><span class="lineno">  984</span>&#160;  FiniInfo.FiniCB(<a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.saveIP());</div>
<div class="line"><a name="l00985"></a><span class="lineno">  985</span>&#160;  <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.SetInsertPoint(ExitBB);</div>
<div class="line"><a name="l00986"></a><span class="lineno">  986</span>&#160; </div>
<div class="line"><a name="l00987"></a><span class="lineno">  987</span>&#160;  <span class="keywordflow">return</span> <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.saveIP();</div>
<div class="line"><a name="l00988"></a><span class="lineno">  988</span>&#160;}</div>
<div class="line"><a name="l00989"></a><span class="lineno">  989</span>&#160; </div>
<div class="line"><a name="l00990"></a><span class="lineno">  990</span>&#160;<a class="code" href="classllvm_1_1OpenMPIRBuilder.html#aafc1886793b898052f87edd7e9fdbaa3">OpenMPIRBuilder::InsertPointTy</a></div>
<div class="line"><a name="l00991"></a><span class="lineno"><a class="line" href="classllvm_1_1OpenMPIRBuilder.html#a88cb26bb78b23c1f0aa1988725d46e1c">  991</a></span>&#160;<a class="code" href="classllvm_1_1OpenMPIRBuilder.html#a88cb26bb78b23c1f0aa1988725d46e1c">OpenMPIRBuilder::createSection</a>(<span class="keyword">const</span> <a class="code" href="structllvm_1_1OpenMPIRBuilder_1_1LocationDescription.html">LocationDescription</a> &amp;Loc,</div>
<div class="line"><a name="l00992"></a><span class="lineno">  992</span>&#160;                               <a class="code" href="classllvm_1_1function__ref.html">BodyGenCallbackTy</a> BodyGenCB,</div>
<div class="line"><a name="l00993"></a><span class="lineno">  993</span>&#160;                               <a class="code" href="classllvm_1_1OpenMPIRBuilder.html#a03b6c43472b3040013de9cbc25376925">FinalizeCallbackTy</a> FiniCB) {</div>
<div class="line"><a name="l00994"></a><span class="lineno">  994</span>&#160;  <span class="keywordflow">if</span> (!updateToLocation(Loc))</div>
<div class="line"><a name="l00995"></a><span class="lineno">  995</span>&#160;    <span class="keywordflow">return</span> Loc.<a class="code" href="structllvm_1_1OpenMPIRBuilder_1_1LocationDescription.html#aa15e9d88f98f6d7a0898e6aff4753040">IP</a>;</div>
<div class="line"><a name="l00996"></a><span class="lineno">  996</span>&#160; </div>
<div class="line"><a name="l00997"></a><span class="lineno">  997</span>&#160;  <span class="keyword">auto</span> FiniCBWrapper = [&amp;](<a class="code" href="classllvm_1_1OpenMPIRBuilder.html#aafc1886793b898052f87edd7e9fdbaa3">InsertPointTy</a> <a class="code" href="structIP.html">IP</a>) {</div>
<div class="line"><a name="l00998"></a><span class="lineno">  998</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="structIP.html">IP</a>.getBlock()-&gt;end() != <a class="code" href="structIP.html">IP</a>.getPoint())</div>
<div class="line"><a name="l00999"></a><span class="lineno">  999</span>&#160;      <span class="keywordflow">return</span> FiniCB(<a class="code" href="structIP.html">IP</a>);</div>
<div class="line"><a name="l01000"></a><span class="lineno"> 1000</span>&#160;    <span class="comment">// This must be done otherwise any nested constructs using FinalizeOMPRegion</span></div>
<div class="line"><a name="l01001"></a><span class="lineno"> 1001</span>&#160;    <span class="comment">// will fail because that function requires the Finalization Basic Block to</span></div>
<div class="line"><a name="l01002"></a><span class="lineno"> 1002</span>&#160;    <span class="comment">// have a terminator, which is already removed by EmitOMPRegionBody.</span></div>
<div class="line"><a name="l01003"></a><span class="lineno"> 1003</span>&#160;    <span class="comment">// IP is currently at cancelation block.</span></div>
<div class="line"><a name="l01004"></a><span class="lineno"> 1004</span>&#160;    <span class="comment">// We need to backtrack to the condition block to fetch</span></div>
<div class="line"><a name="l01005"></a><span class="lineno"> 1005</span>&#160;    <span class="comment">// the exit block and create a branch from cancelation</span></div>
<div class="line"><a name="l01006"></a><span class="lineno"> 1006</span>&#160;    <span class="comment">// to exit block.</span></div>
<div class="line"><a name="l01007"></a><span class="lineno"> 1007</span>&#160;    <a class="code" href="classllvm_1_1IRBuilder.html">IRBuilder&lt;&gt;::InsertPointGuard</a> IPG(<a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>);</div>
<div class="line"><a name="l01008"></a><span class="lineno"> 1008</span>&#160;    <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.restoreIP(<a class="code" href="structIP.html">IP</a>);</div>
<div class="line"><a name="l01009"></a><span class="lineno"> 1009</span>&#160;    <span class="keyword">auto</span> *CaseBB = Loc.<a class="code" href="structllvm_1_1OpenMPIRBuilder_1_1LocationDescription.html#aa15e9d88f98f6d7a0898e6aff4753040">IP</a>.getBlock();</div>
<div class="line"><a name="l01010"></a><span class="lineno"> 1010</span>&#160;    <span class="keyword">auto</span> *CondBB = CaseBB-&gt;getSinglePredecessor()-&gt;getSinglePredecessor();</div>
<div class="line"><a name="l01011"></a><span class="lineno"> 1011</span>&#160;    <span class="keyword">auto</span> *ExitBB = CondBB-&gt;getTerminator()-&gt;getSuccessor(1);</div>
<div class="line"><a name="l01012"></a><span class="lineno"> 1012</span>&#160;    <a class="code" href="classllvm_1_1Instruction.html">Instruction</a> *<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a> = <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.CreateBr(ExitBB);</div>
<div class="line"><a name="l01013"></a><span class="lineno"> 1013</span>&#160;    <a class="code" href="structIP.html">IP</a> = <a class="code" href="classllvm_1_1OpenMPIRBuilder.html#aafc1886793b898052f87edd7e9fdbaa3">InsertPointTy</a>(<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>-&gt;getParent(), <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>-&gt;getIterator());</div>
<div class="line"><a name="l01014"></a><span class="lineno"> 1014</span>&#160;    <span class="keywordflow">return</span> FiniCB(<a class="code" href="structIP.html">IP</a>);</div>
<div class="line"><a name="l01015"></a><span class="lineno"> 1015</span>&#160;  };</div>
<div class="line"><a name="l01016"></a><span class="lineno"> 1016</span>&#160; </div>
<div class="line"><a name="l01017"></a><span class="lineno"> 1017</span>&#160;  <a class="code" href="classllvm_1_1Directive.html">Directive</a> OMPD = Directive::OMPD_sections;</div>
<div class="line"><a name="l01018"></a><span class="lineno"> 1018</span>&#160;  <span class="comment">// Since we are using Finalization Callback here, HasFinalize</span></div>
<div class="line"><a name="l01019"></a><span class="lineno"> 1019</span>&#160;  <span class="comment">// and IsCancellable have to be true</span></div>
<div class="line"><a name="l01020"></a><span class="lineno"> 1020</span>&#160;  <span class="keywordflow">return</span> EmitOMPInlinedRegion(OMPD, <span class="keyword">nullptr</span>, <span class="keyword">nullptr</span>, BodyGenCB, FiniCBWrapper,</div>
<div class="line"><a name="l01021"></a><span class="lineno"> 1021</span>&#160;                              <span class="comment">/*Conditional*/</span> <span class="keyword">false</span>, <span class="comment">/*hasFinalize*/</span> <span class="keyword">true</span>,</div>
<div class="line"><a name="l01022"></a><span class="lineno"> 1022</span>&#160;                              <span class="comment">/*IsCancellable*/</span> <span class="keyword">true</span>);</div>
<div class="line"><a name="l01023"></a><span class="lineno"> 1023</span>&#160;}</div>
<div class="line"><a name="l01024"></a><span class="lineno"> 1024</span>&#160; </div>
<div class="line"><a name="l01025"></a><span class="lineno"> 1025</span>&#160;<a class="code" href="classllvm_1_1OpenMPIRBuilder.html#aafc1886793b898052f87edd7e9fdbaa3">OpenMPIRBuilder::InsertPointTy</a></div>
<div class="line"><a name="l01026"></a><span class="lineno"><a class="line" href="classllvm_1_1OpenMPIRBuilder.html#a9776896fee5db5da9e39fd96819e360a"> 1026</a></span>&#160;<a class="code" href="classllvm_1_1OpenMPIRBuilder.html#a9776896fee5db5da9e39fd96819e360a">OpenMPIRBuilder::createMaster</a>(<span class="keyword">const</span> <a class="code" href="structllvm_1_1OpenMPIRBuilder_1_1LocationDescription.html">LocationDescription</a> &amp;Loc,</div>
<div class="line"><a name="l01027"></a><span class="lineno"> 1027</span>&#160;                              <a class="code" href="classllvm_1_1function__ref.html">BodyGenCallbackTy</a> BodyGenCB,</div>
<div class="line"><a name="l01028"></a><span class="lineno"> 1028</span>&#160;                              <a class="code" href="classllvm_1_1OpenMPIRBuilder.html#a03b6c43472b3040013de9cbc25376925">FinalizeCallbackTy</a> FiniCB) {</div>
<div class="line"><a name="l01029"></a><span class="lineno"> 1029</span>&#160; </div>
<div class="line"><a name="l01030"></a><span class="lineno"> 1030</span>&#160;  <span class="keywordflow">if</span> (!updateToLocation(Loc))</div>
<div class="line"><a name="l01031"></a><span class="lineno"> 1031</span>&#160;    <span class="keywordflow">return</span> Loc.<a class="code" href="structllvm_1_1OpenMPIRBuilder_1_1LocationDescription.html#aa15e9d88f98f6d7a0898e6aff4753040">IP</a>;</div>
<div class="line"><a name="l01032"></a><span class="lineno"> 1032</span>&#160; </div>
<div class="line"><a name="l01033"></a><span class="lineno"> 1033</span>&#160;  <a class="code" href="classllvm_1_1Directive.html">Directive</a> OMPD = Directive::OMPD_master;</div>
<div class="line"><a name="l01034"></a><span class="lineno"> 1034</span>&#160;  <a class="code" href="classllvm_1_1Constant.html">Constant</a> *SrcLocStr = getOrCreateSrcLocStr(Loc);</div>
<div class="line"><a name="l01035"></a><span class="lineno"> 1035</span>&#160;  <a class="code" href="classllvm_1_1Value.html">Value</a> *Ident = getOrCreateIdent(SrcLocStr);</div>
<div class="line"><a name="l01036"></a><span class="lineno"> 1036</span>&#160;  <a class="code" href="classllvm_1_1Value.html">Value</a> *ThreadId = getOrCreateThreadID(Ident);</div>
<div class="line"><a name="l01037"></a><span class="lineno"> 1037</span>&#160;  <a class="code" href="classllvm_1_1Value.html">Value</a> *<a class="code" href="namespacellvm_1_1AMDGPU_1_1HSAMD_1_1Kernel_1_1Key.html#a1958a762261549463a280bac3274d6d5">Args</a>[] = {Ident, ThreadId};</div>
<div class="line"><a name="l01038"></a><span class="lineno"> 1038</span>&#160; </div>
<div class="line"><a name="l01039"></a><span class="lineno"> 1039</span>&#160;  <a class="code" href="classllvm_1_1Function.html">Function</a> *EntryRTLFn = getOrCreateRuntimeFunctionPtr(OMPRTL___kmpc_master);</div>
<div class="line"><a name="l01040"></a><span class="lineno"> 1040</span>&#160;  <a class="code" href="classllvm_1_1Instruction.html">Instruction</a> *EntryCall = <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.CreateCall(EntryRTLFn, <a class="code" href="namespacellvm_1_1AMDGPU_1_1HSAMD_1_1Kernel_1_1Key.html#a1958a762261549463a280bac3274d6d5">Args</a>);</div>
<div class="line"><a name="l01041"></a><span class="lineno"> 1041</span>&#160; </div>
<div class="line"><a name="l01042"></a><span class="lineno"> 1042</span>&#160;  <a class="code" href="classllvm_1_1Function.html">Function</a> *ExitRTLFn = getOrCreateRuntimeFunctionPtr(OMPRTL___kmpc_end_master);</div>
<div class="line"><a name="l01043"></a><span class="lineno"> 1043</span>&#160;  <a class="code" href="classllvm_1_1Instruction.html">Instruction</a> *ExitCall = <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.CreateCall(ExitRTLFn, <a class="code" href="namespacellvm_1_1AMDGPU_1_1HSAMD_1_1Kernel_1_1Key.html#a1958a762261549463a280bac3274d6d5">Args</a>);</div>
<div class="line"><a name="l01044"></a><span class="lineno"> 1044</span>&#160; </div>
<div class="line"><a name="l01045"></a><span class="lineno"> 1045</span>&#160;  <span class="keywordflow">return</span> EmitOMPInlinedRegion(OMPD, EntryCall, ExitCall, BodyGenCB, FiniCB,</div>
<div class="line"><a name="l01046"></a><span class="lineno"> 1046</span>&#160;                              <span class="comment">/*Conditional*/</span> <span class="keyword">true</span>, <span class="comment">/*hasFinalize*/</span> <span class="keyword">true</span>);</div>
<div class="line"><a name="l01047"></a><span class="lineno"> 1047</span>&#160;}</div>
<div class="line"><a name="l01048"></a><span class="lineno"> 1048</span>&#160; </div>
<div class="line"><a name="l01049"></a><span class="lineno"> 1049</span>&#160;<a class="code" href="classllvm_1_1OpenMPIRBuilder.html#aafc1886793b898052f87edd7e9fdbaa3">OpenMPIRBuilder::InsertPointTy</a></div>
<div class="line"><a name="l01050"></a><span class="lineno"><a class="line" href="classllvm_1_1OpenMPIRBuilder.html#ac50024248a5e85a1192de8410d5448ca"> 1050</a></span>&#160;<a class="code" href="classllvm_1_1OpenMPIRBuilder.html#ac50024248a5e85a1192de8410d5448ca">OpenMPIRBuilder::createMasked</a>(<span class="keyword">const</span> <a class="code" href="structllvm_1_1OpenMPIRBuilder_1_1LocationDescription.html">LocationDescription</a> &amp;Loc,</div>
<div class="line"><a name="l01051"></a><span class="lineno"> 1051</span>&#160;                              <a class="code" href="classllvm_1_1function__ref.html">BodyGenCallbackTy</a> BodyGenCB,</div>
<div class="line"><a name="l01052"></a><span class="lineno"> 1052</span>&#160;                              <a class="code" href="classllvm_1_1OpenMPIRBuilder.html#a03b6c43472b3040013de9cbc25376925">FinalizeCallbackTy</a> FiniCB, <a class="code" href="classllvm_1_1Value.html">Value</a> *Filter) {</div>
<div class="line"><a name="l01053"></a><span class="lineno"> 1053</span>&#160;  <span class="keywordflow">if</span> (!updateToLocation(Loc))</div>
<div class="line"><a name="l01054"></a><span class="lineno"> 1054</span>&#160;    <span class="keywordflow">return</span> Loc.<a class="code" href="structllvm_1_1OpenMPIRBuilder_1_1LocationDescription.html#aa15e9d88f98f6d7a0898e6aff4753040">IP</a>;</div>
<div class="line"><a name="l01055"></a><span class="lineno"> 1055</span>&#160; </div>
<div class="line"><a name="l01056"></a><span class="lineno"> 1056</span>&#160;  <a class="code" href="classllvm_1_1Directive.html">Directive</a> OMPD = Directive::OMPD_masked;</div>
<div class="line"><a name="l01057"></a><span class="lineno"> 1057</span>&#160;  <a class="code" href="classllvm_1_1Constant.html">Constant</a> *SrcLocStr = getOrCreateSrcLocStr(Loc);</div>
<div class="line"><a name="l01058"></a><span class="lineno"> 1058</span>&#160;  <a class="code" href="classllvm_1_1Value.html">Value</a> *Ident = getOrCreateIdent(SrcLocStr);</div>
<div class="line"><a name="l01059"></a><span class="lineno"> 1059</span>&#160;  <a class="code" href="classllvm_1_1Value.html">Value</a> *ThreadId = getOrCreateThreadID(Ident);</div>
<div class="line"><a name="l01060"></a><span class="lineno"> 1060</span>&#160;  <a class="code" href="classllvm_1_1Value.html">Value</a> *<a class="code" href="namespacellvm_1_1AMDGPU_1_1HSAMD_1_1Kernel_1_1Key.html#a1958a762261549463a280bac3274d6d5">Args</a>[] = {Ident, ThreadId, <a class="code" href="namespacellvm.html#aaee5189b9c4db9ad666a88abaf1ee0c4ac5d59568835d0760e318829b800ee06d">Filter</a>};</div>
<div class="line"><a name="l01061"></a><span class="lineno"> 1061</span>&#160;  <a class="code" href="classllvm_1_1Value.html">Value</a> *ArgsEnd[] = {Ident, ThreadId};</div>
<div class="line"><a name="l01062"></a><span class="lineno"> 1062</span>&#160; </div>
<div class="line"><a name="l01063"></a><span class="lineno"> 1063</span>&#160;  <a class="code" href="classllvm_1_1Function.html">Function</a> *EntryRTLFn = getOrCreateRuntimeFunctionPtr(OMPRTL___kmpc_masked);</div>
<div class="line"><a name="l01064"></a><span class="lineno"> 1064</span>&#160;  <a class="code" href="classllvm_1_1Instruction.html">Instruction</a> *EntryCall = <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.CreateCall(EntryRTLFn, <a class="code" href="namespacellvm_1_1AMDGPU_1_1HSAMD_1_1Kernel_1_1Key.html#a1958a762261549463a280bac3274d6d5">Args</a>);</div>
<div class="line"><a name="l01065"></a><span class="lineno"> 1065</span>&#160; </div>
<div class="line"><a name="l01066"></a><span class="lineno"> 1066</span>&#160;  <a class="code" href="classllvm_1_1Function.html">Function</a> *ExitRTLFn = getOrCreateRuntimeFunctionPtr(OMPRTL___kmpc_end_masked);</div>
<div class="line"><a name="l01067"></a><span class="lineno"> 1067</span>&#160;  <a class="code" href="classllvm_1_1Instruction.html">Instruction</a> *ExitCall = <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.CreateCall(ExitRTLFn, ArgsEnd);</div>
<div class="line"><a name="l01068"></a><span class="lineno"> 1068</span>&#160; </div>
<div class="line"><a name="l01069"></a><span class="lineno"> 1069</span>&#160;  <span class="keywordflow">return</span> EmitOMPInlinedRegion(OMPD, EntryCall, ExitCall, BodyGenCB, FiniCB,</div>
<div class="line"><a name="l01070"></a><span class="lineno"> 1070</span>&#160;                              <span class="comment">/*Conditional*/</span> <span class="keyword">true</span>, <span class="comment">/*hasFinalize*/</span> <span class="keyword">true</span>);</div>
<div class="line"><a name="l01071"></a><span class="lineno"> 1071</span>&#160;}</div>
<div class="line"><a name="l01072"></a><span class="lineno"> 1072</span>&#160; </div>
<div class="line"><a name="l01073"></a><span class="lineno"><a class="line" href="classllvm_1_1OpenMPIRBuilder.html#a445fa52d77040bccb16bfea111234a2e"> 1073</a></span>&#160;<a class="code" href="classllvm_1_1CanonicalLoopInfo.html">CanonicalLoopInfo</a> *<a class="code" href="classllvm_1_1OpenMPIRBuilder.html#a445fa52d77040bccb16bfea111234a2e">OpenMPIRBuilder::createLoopSkeleton</a>(</div>
<div class="line"><a name="l01074"></a><span class="lineno"> 1074</span>&#160;    <a class="code" href="classllvm_1_1DebugLoc.html">DebugLoc</a> <a class="code" href="AArch64SLSHardening_8cpp.html#ad467c4ab9119043f9b7750ab986be61a">DL</a>, <a class="code" href="classllvm_1_1Value.html">Value</a> *TripCount, <a class="code" href="classllvm_1_1Function.html">Function</a> *<a class="code" href="MD5_8cpp.html#a96d73bbd7af15cb1fc38c3f4a3bd82e9">F</a>, <a class="code" href="classllvm_1_1BasicBlock.html">BasicBlock</a> *PreInsertBefore,</div>
<div class="line"><a name="l01075"></a><span class="lineno"> 1075</span>&#160;    <a class="code" href="classllvm_1_1BasicBlock.html">BasicBlock</a> *PostInsertBefore, <span class="keyword">const</span> <a class="code" href="classllvm_1_1Twine.html">Twine</a> &amp;<a class="code" href="namespacellvm_1_1GraphProgram.html#a0ad4685976f8c4d4a697a53fbe05d10b">Name</a>) {</div>
<div class="line"><a name="l01076"></a><span class="lineno"> 1076</span>&#160;  <a class="code" href="classllvm_1_1Module.html">Module</a> *<a class="code" href="lib_2Target_2X86_2README_8txt.html#ac88fe1d3a61b056a4f64fbbb156a62ff">M</a> = <a class="code" href="MD5_8cpp.html#a96d73bbd7af15cb1fc38c3f4a3bd82e9">F</a>-&gt;getParent();</div>
<div class="line"><a name="l01077"></a><span class="lineno"> 1077</span>&#160;  <a class="code" href="classllvm_1_1LLVMContext.html">LLVMContext</a> &amp;Ctx = <a class="code" href="lib_2Target_2X86_2README_8txt.html#ac88fe1d3a61b056a4f64fbbb156a62ff">M</a>-&gt;getContext();</div>
<div class="line"><a name="l01078"></a><span class="lineno"> 1078</span>&#160;  <a class="code" href="classllvm_1_1Type.html">Type</a> *IndVarTy = TripCount-&gt;<a class="code" href="classllvm_1_1Value.html#a6393a2d4fe7e10b28a0dcc35f881567b">getType</a>();</div>
<div class="line"><a name="l01079"></a><span class="lineno"> 1079</span>&#160; </div>
<div class="line"><a name="l01080"></a><span class="lineno"> 1080</span>&#160;  <span class="comment">// Create the basic block structure.</span></div>
<div class="line"><a name="l01081"></a><span class="lineno"> 1081</span>&#160;  <a class="code" href="classllvm_1_1BasicBlock.html">BasicBlock</a> *Preheader =</div>
<div class="line"><a name="l01082"></a><span class="lineno"> 1082</span>&#160;      <a class="code" href="classllvm_1_1BasicBlock.html#ace940beeee97c222f836fe0ac70f6cf5">BasicBlock::Create</a>(Ctx, <span class="stringliteral">&quot;omp_&quot;</span> + <a class="code" href="namespacellvm_1_1GraphProgram.html#a0ad4685976f8c4d4a697a53fbe05d10b">Name</a> + <span class="stringliteral">&quot;.preheader&quot;</span>, <a class="code" href="MD5_8cpp.html#a96d73bbd7af15cb1fc38c3f4a3bd82e9">F</a>, PreInsertBefore);</div>
<div class="line"><a name="l01083"></a><span class="lineno"> 1083</span>&#160;  <a class="code" href="classllvm_1_1BasicBlock.html">BasicBlock</a> *Header =</div>
<div class="line"><a name="l01084"></a><span class="lineno"> 1084</span>&#160;      <a class="code" href="classllvm_1_1BasicBlock.html#ace940beeee97c222f836fe0ac70f6cf5">BasicBlock::Create</a>(Ctx, <span class="stringliteral">&quot;omp_&quot;</span> + <a class="code" href="namespacellvm_1_1GraphProgram.html#a0ad4685976f8c4d4a697a53fbe05d10b">Name</a> + <span class="stringliteral">&quot;.header&quot;</span>, <a class="code" href="MD5_8cpp.html#a96d73bbd7af15cb1fc38c3f4a3bd82e9">F</a>, PreInsertBefore);</div>
<div class="line"><a name="l01085"></a><span class="lineno"> 1085</span>&#160;  <a class="code" href="classllvm_1_1BasicBlock.html">BasicBlock</a> *<a class="code" href="BasicBlockSections_8cpp.html#a5fd0741d696f28faf65b33f6c6af8fda">Cond</a> =</div>
<div class="line"><a name="l01086"></a><span class="lineno"> 1086</span>&#160;      <a class="code" href="classllvm_1_1BasicBlock.html#ace940beeee97c222f836fe0ac70f6cf5">BasicBlock::Create</a>(Ctx, <span class="stringliteral">&quot;omp_&quot;</span> + <a class="code" href="namespacellvm_1_1GraphProgram.html#a0ad4685976f8c4d4a697a53fbe05d10b">Name</a> + <span class="stringliteral">&quot;.cond&quot;</span>, <a class="code" href="MD5_8cpp.html#a96d73bbd7af15cb1fc38c3f4a3bd82e9">F</a>, PreInsertBefore);</div>
<div class="line"><a name="l01087"></a><span class="lineno"> 1087</span>&#160;  <a class="code" href="classllvm_1_1BasicBlock.html">BasicBlock</a> *Body =</div>
<div class="line"><a name="l01088"></a><span class="lineno"> 1088</span>&#160;      <a class="code" href="classllvm_1_1BasicBlock.html#ace940beeee97c222f836fe0ac70f6cf5">BasicBlock::Create</a>(Ctx, <span class="stringliteral">&quot;omp_&quot;</span> + <a class="code" href="namespacellvm_1_1GraphProgram.html#a0ad4685976f8c4d4a697a53fbe05d10b">Name</a> + <span class="stringliteral">&quot;.body&quot;</span>, <a class="code" href="MD5_8cpp.html#a96d73bbd7af15cb1fc38c3f4a3bd82e9">F</a>, PreInsertBefore);</div>
<div class="line"><a name="l01089"></a><span class="lineno"> 1089</span>&#160;  <a class="code" href="classllvm_1_1BasicBlock.html">BasicBlock</a> *Latch =</div>
<div class="line"><a name="l01090"></a><span class="lineno"> 1090</span>&#160;      <a class="code" href="classllvm_1_1BasicBlock.html#ace940beeee97c222f836fe0ac70f6cf5">BasicBlock::Create</a>(Ctx, <span class="stringliteral">&quot;omp_&quot;</span> + <a class="code" href="namespacellvm_1_1GraphProgram.html#a0ad4685976f8c4d4a697a53fbe05d10b">Name</a> + <span class="stringliteral">&quot;.inc&quot;</span>, <a class="code" href="MD5_8cpp.html#a96d73bbd7af15cb1fc38c3f4a3bd82e9">F</a>, PostInsertBefore);</div>
<div class="line"><a name="l01091"></a><span class="lineno"> 1091</span>&#160;  <a class="code" href="classllvm_1_1BasicBlock.html">BasicBlock</a> *Exit =</div>
<div class="line"><a name="l01092"></a><span class="lineno"> 1092</span>&#160;      <a class="code" href="classllvm_1_1BasicBlock.html#ace940beeee97c222f836fe0ac70f6cf5">BasicBlock::Create</a>(Ctx, <span class="stringliteral">&quot;omp_&quot;</span> + <a class="code" href="namespacellvm_1_1GraphProgram.html#a0ad4685976f8c4d4a697a53fbe05d10b">Name</a> + <span class="stringliteral">&quot;.exit&quot;</span>, <a class="code" href="MD5_8cpp.html#a96d73bbd7af15cb1fc38c3f4a3bd82e9">F</a>, PostInsertBefore);</div>
<div class="line"><a name="l01093"></a><span class="lineno"> 1093</span>&#160;  <a class="code" href="classllvm_1_1BasicBlock.html">BasicBlock</a> *After =</div>
<div class="line"><a name="l01094"></a><span class="lineno"> 1094</span>&#160;      <a class="code" href="classllvm_1_1BasicBlock.html#ace940beeee97c222f836fe0ac70f6cf5">BasicBlock::Create</a>(Ctx, <span class="stringliteral">&quot;omp_&quot;</span> + <a class="code" href="namespacellvm_1_1GraphProgram.html#a0ad4685976f8c4d4a697a53fbe05d10b">Name</a> + <span class="stringliteral">&quot;.after&quot;</span>, <a class="code" href="MD5_8cpp.html#a96d73bbd7af15cb1fc38c3f4a3bd82e9">F</a>, PostInsertBefore);</div>
<div class="line"><a name="l01095"></a><span class="lineno"> 1095</span>&#160; </div>
<div class="line"><a name="l01096"></a><span class="lineno"> 1096</span>&#160;  <span class="comment">// Use specified DebugLoc for new instructions.</span></div>
<div class="line"><a name="l01097"></a><span class="lineno"> 1097</span>&#160;  <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.SetCurrentDebugLocation(<a class="code" href="AArch64SLSHardening_8cpp.html#ad467c4ab9119043f9b7750ab986be61a">DL</a>);</div>
<div class="line"><a name="l01098"></a><span class="lineno"> 1098</span>&#160; </div>
<div class="line"><a name="l01099"></a><span class="lineno"> 1099</span>&#160;  <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.SetInsertPoint(Preheader);</div>
<div class="line"><a name="l01100"></a><span class="lineno"> 1100</span>&#160;  <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.CreateBr(Header);</div>
<div class="line"><a name="l01101"></a><span class="lineno"> 1101</span>&#160; </div>
<div class="line"><a name="l01102"></a><span class="lineno"> 1102</span>&#160;  <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.SetInsertPoint(Header);</div>
<div class="line"><a name="l01103"></a><span class="lineno"> 1103</span>&#160;  <a class="code" href="classllvm_1_1PHINode.html">PHINode</a> *IndVarPHI = <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.CreatePHI(IndVarTy, 2, <span class="stringliteral">&quot;omp_&quot;</span> + <a class="code" href="namespacellvm_1_1GraphProgram.html#a0ad4685976f8c4d4a697a53fbe05d10b">Name</a> + <span class="stringliteral">&quot;.iv&quot;</span>);</div>
<div class="line"><a name="l01104"></a><span class="lineno"> 1104</span>&#160;  IndVarPHI-&gt;<a class="code" href="classllvm_1_1PHINode.html#a089cccb6f231efee72abc76d0f9c695f">addIncoming</a>(<a class="code" href="classllvm_1_1ConstantInt.html#a969709dd49c28865a482d8b870f87c46">ConstantInt::get</a>(IndVarTy, 0), Preheader);</div>
<div class="line"><a name="l01105"></a><span class="lineno"> 1105</span>&#160;  <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.CreateBr(<a class="code" href="BasicBlockSections_8cpp.html#a5fd0741d696f28faf65b33f6c6af8fda">Cond</a>);</div>
<div class="line"><a name="l01106"></a><span class="lineno"> 1106</span>&#160; </div>
<div class="line"><a name="l01107"></a><span class="lineno"> 1107</span>&#160;  <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.SetInsertPoint(<a class="code" href="BasicBlockSections_8cpp.html#a5fd0741d696f28faf65b33f6c6af8fda">Cond</a>);</div>
<div class="line"><a name="l01108"></a><span class="lineno"> 1108</span>&#160;  <a class="code" href="classllvm_1_1Value.html">Value</a> *Cmp =</div>
<div class="line"><a name="l01109"></a><span class="lineno"> 1109</span>&#160;      <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.CreateICmpULT(IndVarPHI, TripCount, <span class="stringliteral">&quot;omp_&quot;</span> + <a class="code" href="namespacellvm_1_1GraphProgram.html#a0ad4685976f8c4d4a697a53fbe05d10b">Name</a> + <span class="stringliteral">&quot;.cmp&quot;</span>);</div>
<div class="line"><a name="l01110"></a><span class="lineno"> 1110</span>&#160;  <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.CreateCondBr(Cmp, Body, Exit);</div>
<div class="line"><a name="l01111"></a><span class="lineno"> 1111</span>&#160; </div>
<div class="line"><a name="l01112"></a><span class="lineno"> 1112</span>&#160;  <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.SetInsertPoint(Body);</div>
<div class="line"><a name="l01113"></a><span class="lineno"> 1113</span>&#160;  <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.CreateBr(Latch);</div>
<div class="line"><a name="l01114"></a><span class="lineno"> 1114</span>&#160; </div>
<div class="line"><a name="l01115"></a><span class="lineno"> 1115</span>&#160;  <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.SetInsertPoint(Latch);</div>
<div class="line"><a name="l01116"></a><span class="lineno"> 1116</span>&#160;  <a class="code" href="classllvm_1_1Value.html">Value</a> *Next = <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.CreateAdd(IndVarPHI, <a class="code" href="classllvm_1_1ConstantInt.html#a969709dd49c28865a482d8b870f87c46">ConstantInt::get</a>(IndVarTy, 1),</div>
<div class="line"><a name="l01117"></a><span class="lineno"> 1117</span>&#160;                                  <span class="stringliteral">&quot;omp_&quot;</span> + <a class="code" href="namespacellvm_1_1GraphProgram.html#a0ad4685976f8c4d4a697a53fbe05d10b">Name</a> + <span class="stringliteral">&quot;.next&quot;</span>, <span class="comment">/*HasNUW=*/</span><span class="keyword">true</span>);</div>
<div class="line"><a name="l01118"></a><span class="lineno"> 1118</span>&#160;  <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.CreateBr(Header);</div>
<div class="line"><a name="l01119"></a><span class="lineno"> 1119</span>&#160;  IndVarPHI-&gt;<a class="code" href="classllvm_1_1PHINode.html#a089cccb6f231efee72abc76d0f9c695f">addIncoming</a>(Next, Latch);</div>
<div class="line"><a name="l01120"></a><span class="lineno"> 1120</span>&#160; </div>
<div class="line"><a name="l01121"></a><span class="lineno"> 1121</span>&#160;  <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.SetInsertPoint(Exit);</div>
<div class="line"><a name="l01122"></a><span class="lineno"> 1122</span>&#160;  <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.CreateBr(After);</div>
<div class="line"><a name="l01123"></a><span class="lineno"> 1123</span>&#160; </div>
<div class="line"><a name="l01124"></a><span class="lineno"> 1124</span>&#160;  <span class="comment">// Remember and return the canonical control flow.</span></div>
<div class="line"><a name="l01125"></a><span class="lineno"> 1125</span>&#160;  LoopInfos.emplace_front();</div>
<div class="line"><a name="l01126"></a><span class="lineno"> 1126</span>&#160;  <a class="code" href="classllvm_1_1CanonicalLoopInfo.html">CanonicalLoopInfo</a> *CL = &amp;LoopInfos.front();</div>
<div class="line"><a name="l01127"></a><span class="lineno"> 1127</span>&#160; </div>
<div class="line"><a name="l01128"></a><span class="lineno"> 1128</span>&#160;  CL-&gt;Preheader = Preheader;</div>
<div class="line"><a name="l01129"></a><span class="lineno"> 1129</span>&#160;  CL-&gt;Header = Header;</div>
<div class="line"><a name="l01130"></a><span class="lineno"> 1130</span>&#160;  CL-&gt;Cond = <a class="code" href="BasicBlockSections_8cpp.html#a5fd0741d696f28faf65b33f6c6af8fda">Cond</a>;</div>
<div class="line"><a name="l01131"></a><span class="lineno"> 1131</span>&#160;  CL-&gt;Body = Body;</div>
<div class="line"><a name="l01132"></a><span class="lineno"> 1132</span>&#160;  CL-&gt;Latch = Latch;</div>
<div class="line"><a name="l01133"></a><span class="lineno"> 1133</span>&#160;  CL-&gt;Exit = Exit;</div>
<div class="line"><a name="l01134"></a><span class="lineno"> 1134</span>&#160;  CL-&gt;After = After;</div>
<div class="line"><a name="l01135"></a><span class="lineno"> 1135</span>&#160; </div>
<div class="line"><a name="l01136"></a><span class="lineno"> 1136</span>&#160;  CL-&gt;IsValid = <span class="keyword">true</span>;</div>
<div class="line"><a name="l01137"></a><span class="lineno"> 1137</span>&#160; </div>
<div class="line"><a name="l01138"></a><span class="lineno"> 1138</span>&#160;<span class="preprocessor">#ifndef NDEBUG</span></div>
<div class="line"><a name="l01139"></a><span class="lineno"> 1139</span>&#160;  CL-&gt;<a class="code" href="classllvm_1_1CanonicalLoopInfo.html#a32ff799dcb39887a8d21322020f305ba">assertOK</a>();</div>
<div class="line"><a name="l01140"></a><span class="lineno"> 1140</span>&#160;<span class="preprocessor">#endif</span></div>
<div class="line"><a name="l01141"></a><span class="lineno"> 1141</span>&#160;  <span class="keywordflow">return</span> CL;</div>
<div class="line"><a name="l01142"></a><span class="lineno"> 1142</span>&#160;}</div>
<div class="line"><a name="l01143"></a><span class="lineno"> 1143</span>&#160; </div>
<div class="line"><a name="l01144"></a><span class="lineno"> 1144</span>&#160;<a class="code" href="classllvm_1_1CanonicalLoopInfo.html">CanonicalLoopInfo</a> *</div>
<div class="line"><a name="l01145"></a><span class="lineno"><a class="line" href="classllvm_1_1OpenMPIRBuilder.html#a1f8ea3a2101b10ccd74e9840406abcf7"> 1145</a></span>&#160;<a class="code" href="classllvm_1_1OpenMPIRBuilder.html#a1f8ea3a2101b10ccd74e9840406abcf7">OpenMPIRBuilder::createCanonicalLoop</a>(<span class="keyword">const</span> <a class="code" href="structllvm_1_1OpenMPIRBuilder_1_1LocationDescription.html">LocationDescription</a> &amp;Loc,</div>
<div class="line"><a name="l01146"></a><span class="lineno"> 1146</span>&#160;                                     <a class="code" href="classllvm_1_1function__ref.html">LoopBodyGenCallbackTy</a> BodyGenCB,</div>
<div class="line"><a name="l01147"></a><span class="lineno"> 1147</span>&#160;                                     <a class="code" href="classllvm_1_1Value.html">Value</a> *TripCount, <span class="keyword">const</span> <a class="code" href="classllvm_1_1Twine.html">Twine</a> &amp;<a class="code" href="namespacellvm_1_1GraphProgram.html#a0ad4685976f8c4d4a697a53fbe05d10b">Name</a>) {</div>
<div class="line"><a name="l01148"></a><span class="lineno"> 1148</span>&#160;  <a class="code" href="classllvm_1_1BasicBlock.html">BasicBlock</a> *<a class="code" href="lib_2CodeGen_2README_8txt.html#a09776db24cf586ec9f1e18f3bae14099">BB</a> = Loc.<a class="code" href="structllvm_1_1OpenMPIRBuilder_1_1LocationDescription.html#aa15e9d88f98f6d7a0898e6aff4753040">IP</a>.getBlock();</div>
<div class="line"><a name="l01149"></a><span class="lineno"> 1149</span>&#160;  <a class="code" href="classllvm_1_1BasicBlock.html">BasicBlock</a> *NextBB = <a class="code" href="lib_2CodeGen_2README_8txt.html#a09776db24cf586ec9f1e18f3bae14099">BB</a>-&gt;getNextNode();</div>
<div class="line"><a name="l01150"></a><span class="lineno"> 1150</span>&#160; </div>
<div class="line"><a name="l01151"></a><span class="lineno"> 1151</span>&#160;  <a class="code" href="classllvm_1_1CanonicalLoopInfo.html">CanonicalLoopInfo</a> *CL = createLoopSkeleton(Loc.<a class="code" href="structllvm_1_1OpenMPIRBuilder_1_1LocationDescription.html#ac6a58d4f9cf1978ee50af30bdb248d73">DL</a>, TripCount, <a class="code" href="lib_2CodeGen_2README_8txt.html#a09776db24cf586ec9f1e18f3bae14099">BB</a>-&gt;getParent(),</div>
<div class="line"><a name="l01152"></a><span class="lineno"> 1152</span>&#160;                                             NextBB, NextBB, <a class="code" href="namespacellvm_1_1GraphProgram.html#a0ad4685976f8c4d4a697a53fbe05d10b">Name</a>);</div>
<div class="line"><a name="l01153"></a><span class="lineno"> 1153</span>&#160;  <a class="code" href="classllvm_1_1BasicBlock.html">BasicBlock</a> *After = CL-&gt;<a class="code" href="classllvm_1_1CanonicalLoopInfo.html#aba24a232ebb4ade12a5ed4d0d54d69ad">getAfter</a>();</div>
<div class="line"><a name="l01154"></a><span class="lineno"> 1154</span>&#160; </div>
<div class="line"><a name="l01155"></a><span class="lineno"> 1155</span>&#160;  <span class="comment">// If location is not set, don&#39;t connect the loop.</span></div>
<div class="line"><a name="l01156"></a><span class="lineno"> 1156</span>&#160;  <span class="keywordflow">if</span> (updateToLocation(Loc)) {</div>
<div class="line"><a name="l01157"></a><span class="lineno"> 1157</span>&#160;    <span class="comment">// Split the loop at the insertion point: Branch to the preheader and move</span></div>
<div class="line"><a name="l01158"></a><span class="lineno"> 1158</span>&#160;    <span class="comment">// every following instruction to after the loop (the After BB). Also, the</span></div>
<div class="line"><a name="l01159"></a><span class="lineno"> 1159</span>&#160;    <span class="comment">// new successor is the loop&#39;s after block.</span></div>
<div class="line"><a name="l01160"></a><span class="lineno"> 1160</span>&#160;    <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.CreateBr(CL-&gt;Preheader);</div>
<div class="line"><a name="l01161"></a><span class="lineno"> 1161</span>&#160;    After-&gt;<a class="code" href="classllvm_1_1BasicBlock.html#a76099f3fde625e6e75431b6afd7081ce">getInstList</a>().splice(After-&gt;<a class="code" href="classllvm_1_1BasicBlock.html#a0ed5f3ab3c2e4196ee0cffffa080c062">begin</a>(), <a class="code" href="lib_2CodeGen_2README_8txt.html#a09776db24cf586ec9f1e18f3bae14099">BB</a>-&gt;getInstList(),</div>
<div class="line"><a name="l01162"></a><span class="lineno"> 1162</span>&#160;                                <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.GetInsertPoint(), <a class="code" href="lib_2CodeGen_2README_8txt.html#a09776db24cf586ec9f1e18f3bae14099">BB</a>-&gt;end());</div>
<div class="line"><a name="l01163"></a><span class="lineno"> 1163</span>&#160;    After-&gt;<a class="code" href="classllvm_1_1BasicBlock.html#a089e003bb688e55b9a91ed4e7fed3678">replaceSuccessorsPhiUsesWith</a>(<a class="code" href="lib_2CodeGen_2README_8txt.html#a09776db24cf586ec9f1e18f3bae14099">BB</a>, After);</div>
<div class="line"><a name="l01164"></a><span class="lineno"> 1164</span>&#160;  }</div>
<div class="line"><a name="l01165"></a><span class="lineno"> 1165</span>&#160; </div>
<div class="line"><a name="l01166"></a><span class="lineno"> 1166</span>&#160;  <span class="comment">// Emit the body content. We do it after connecting the loop to the CFG to</span></div>
<div class="line"><a name="l01167"></a><span class="lineno"> 1167</span>&#160;  <span class="comment">// avoid that the callback encounters degenerate BBs.</span></div>
<div class="line"><a name="l01168"></a><span class="lineno"> 1168</span>&#160;  BodyGenCB(CL-&gt;<a class="code" href="classllvm_1_1CanonicalLoopInfo.html#a8031442528bff99473596a0de4aa0422">getBodyIP</a>(), CL-&gt;<a class="code" href="classllvm_1_1CanonicalLoopInfo.html#a230d812cc988ec3a48bf5206d3d72b88">getIndVar</a>());</div>
<div class="line"><a name="l01169"></a><span class="lineno"> 1169</span>&#160; </div>
<div class="line"><a name="l01170"></a><span class="lineno"> 1170</span>&#160;<span class="preprocessor">#ifndef NDEBUG</span></div>
<div class="line"><a name="l01171"></a><span class="lineno"> 1171</span>&#160;  CL-&gt;<a class="code" href="classllvm_1_1CanonicalLoopInfo.html#a32ff799dcb39887a8d21322020f305ba">assertOK</a>();</div>
<div class="line"><a name="l01172"></a><span class="lineno"> 1172</span>&#160;<span class="preprocessor">#endif</span></div>
<div class="line"><a name="l01173"></a><span class="lineno"> 1173</span>&#160;  <span class="keywordflow">return</span> CL;</div>
<div class="line"><a name="l01174"></a><span class="lineno"> 1174</span>&#160;}</div>
<div class="line"><a name="l01175"></a><span class="lineno"> 1175</span>&#160; </div>
<div class="line"><a name="l01176"></a><span class="lineno"><a class="line" href="classllvm_1_1OpenMPIRBuilder.html#ab923f1ecfb37a2c297245bdae392eda0"> 1176</a></span>&#160;<a class="code" href="classllvm_1_1CanonicalLoopInfo.html">CanonicalLoopInfo</a> *<a class="code" href="classllvm_1_1OpenMPIRBuilder.html#a1f8ea3a2101b10ccd74e9840406abcf7">OpenMPIRBuilder::createCanonicalLoop</a>(</div>
<div class="line"><a name="l01177"></a><span class="lineno"> 1177</span>&#160;    <span class="keyword">const</span> <a class="code" href="structllvm_1_1OpenMPIRBuilder_1_1LocationDescription.html">LocationDescription</a> &amp;Loc, <a class="code" href="classllvm_1_1function__ref.html">LoopBodyGenCallbackTy</a> BodyGenCB,</div>
<div class="line"><a name="l01178"></a><span class="lineno"> 1178</span>&#160;    <a class="code" href="classllvm_1_1Value.html">Value</a> *Start, <a class="code" href="classllvm_1_1Value.html">Value</a> *Stop, <a class="code" href="classllvm_1_1Value.html">Value</a> *Step, <span class="keywordtype">bool</span> IsSigned, <span class="keywordtype">bool</span> InclusiveStop,</div>
<div class="line"><a name="l01179"></a><span class="lineno"> 1179</span>&#160;    <a class="code" href="classllvm_1_1OpenMPIRBuilder.html#aafc1886793b898052f87edd7e9fdbaa3">InsertPointTy</a> ComputeIP, <span class="keyword">const</span> <a class="code" href="classllvm_1_1Twine.html">Twine</a> &amp;<a class="code" href="namespacellvm_1_1GraphProgram.html#a0ad4685976f8c4d4a697a53fbe05d10b">Name</a>) {</div>
<div class="line"><a name="l01180"></a><span class="lineno"> 1180</span>&#160; </div>
<div class="line"><a name="l01181"></a><span class="lineno"> 1181</span>&#160;  <span class="comment">// Consider the following difficulties (assuming 8-bit signed integers):</span></div>
<div class="line"><a name="l01182"></a><span class="lineno"> 1182</span>&#160;  <span class="comment">//  * Adding \p Step to the loop counter which passes \p Stop may overflow:</span></div>
<div class="line"><a name="l01183"></a><span class="lineno"> 1183</span>&#160;  <span class="comment">//      DO I = 1, 100, 50</span><span class="comment"></span></div>
<div class="line"><a name="l01184"></a><span class="lineno"> 1184</span>&#160;<span class="comment">  ///  * A \p Step of INT_MIN cannot not be normalized to a positive direction:</span></div>
<div class="line"><a name="l01185"></a><span class="lineno"> 1185</span>&#160;<span class="comment"></span>  <span class="comment">//      DO I = 100, 0, -128</span></div>
<div class="line"><a name="l01186"></a><span class="lineno"> 1186</span>&#160; </div>
<div class="line"><a name="l01187"></a><span class="lineno"> 1187</span>&#160;  <span class="comment">// Start, Stop and Step must be of the same integer type.</span></div>
<div class="line"><a name="l01188"></a><span class="lineno"> 1188</span>&#160;  <span class="keyword">auto</span> *IndVarTy = cast&lt;IntegerType&gt;(Start-&gt;getType());</div>
<div class="line"><a name="l01189"></a><span class="lineno"> 1189</span>&#160;  <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(IndVarTy == Stop-&gt;getType() &amp;&amp; <span class="stringliteral">&quot;Stop type mismatch&quot;</span>);</div>
<div class="line"><a name="l01190"></a><span class="lineno"> 1190</span>&#160;  <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(IndVarTy == Step-&gt;<a class="code" href="classllvm_1_1Value.html#a6393a2d4fe7e10b28a0dcc35f881567b">getType</a>() &amp;&amp; <span class="stringliteral">&quot;Step type mismatch&quot;</span>);</div>
<div class="line"><a name="l01191"></a><span class="lineno"> 1191</span>&#160; </div>
<div class="line"><a name="l01192"></a><span class="lineno"> 1192</span>&#160;  <a class="code" href="structllvm_1_1OpenMPIRBuilder_1_1LocationDescription.html">LocationDescription</a> ComputeLoc =</div>
<div class="line"><a name="l01193"></a><span class="lineno"> 1193</span>&#160;      ComputeIP.isSet() ? <a class="code" href="structllvm_1_1OpenMPIRBuilder_1_1LocationDescription.html">LocationDescription</a>(ComputeIP, Loc.<a class="code" href="structllvm_1_1OpenMPIRBuilder_1_1LocationDescription.html#ac6a58d4f9cf1978ee50af30bdb248d73">DL</a>) : Loc;</div>
<div class="line"><a name="l01194"></a><span class="lineno"> 1194</span>&#160;  updateToLocation(ComputeLoc);</div>
<div class="line"><a name="l01195"></a><span class="lineno"> 1195</span>&#160; </div>
<div class="line"><a name="l01196"></a><span class="lineno"> 1196</span>&#160;  <a class="code" href="classllvm_1_1ConstantInt.html">ConstantInt</a> *Zero = <a class="code" href="classllvm_1_1ConstantInt.html#a969709dd49c28865a482d8b870f87c46">ConstantInt::get</a>(IndVarTy, 0);</div>
<div class="line"><a name="l01197"></a><span class="lineno"> 1197</span>&#160;  <a class="code" href="classllvm_1_1ConstantInt.html">ConstantInt</a> *One = <a class="code" href="classllvm_1_1ConstantInt.html#a969709dd49c28865a482d8b870f87c46">ConstantInt::get</a>(IndVarTy, 1);</div>
<div class="line"><a name="l01198"></a><span class="lineno"> 1198</span>&#160; </div>
<div class="line"><a name="l01199"></a><span class="lineno"> 1199</span>&#160;  <span class="comment">// Like Step, but always positive.</span></div>
<div class="line"><a name="l01200"></a><span class="lineno"> 1200</span>&#160;  <a class="code" href="classllvm_1_1Value.html">Value</a> *Incr = Step;</div>
<div class="line"><a name="l01201"></a><span class="lineno"> 1201</span>&#160; </div>
<div class="line"><a name="l01202"></a><span class="lineno"> 1202</span>&#160;  <span class="comment">// Distance between Start and Stop; always positive.</span></div>
<div class="line"><a name="l01203"></a><span class="lineno"> 1203</span>&#160;  <a class="code" href="classllvm_1_1Value.html">Value</a> *Span;</div>
<div class="line"><a name="l01204"></a><span class="lineno"> 1204</span>&#160; </div>
<div class="line"><a name="l01205"></a><span class="lineno"> 1205</span>&#160;  <span class="comment">// Condition whether there are no iterations are executed at all, e.g. because</span></div>
<div class="line"><a name="l01206"></a><span class="lineno"> 1206</span>&#160;  <span class="comment">// UB &lt; LB.</span></div>
<div class="line"><a name="l01207"></a><span class="lineno"> 1207</span>&#160;  <a class="code" href="classllvm_1_1Value.html">Value</a> *ZeroCmp;</div>
<div class="line"><a name="l01208"></a><span class="lineno"> 1208</span>&#160; </div>
<div class="line"><a name="l01209"></a><span class="lineno"> 1209</span>&#160;  <span class="keywordflow">if</span> (IsSigned) {</div>
<div class="line"><a name="l01210"></a><span class="lineno"> 1210</span>&#160;    <span class="comment">// Ensure that increment is positive. If not, negate and invert LB and UB.</span></div>
<div class="line"><a name="l01211"></a><span class="lineno"> 1211</span>&#160;    <a class="code" href="classllvm_1_1Value.html">Value</a> *IsNeg = <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.CreateICmpSLT(Step, Zero);</div>
<div class="line"><a name="l01212"></a><span class="lineno"> 1212</span>&#160;    Incr = <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.CreateSelect(IsNeg, <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.CreateNeg(Step), Step);</div>
<div class="line"><a name="l01213"></a><span class="lineno"> 1213</span>&#160;    <a class="code" href="classllvm_1_1Value.html">Value</a> *LB = <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.CreateSelect(IsNeg, Stop, Start);</div>
<div class="line"><a name="l01214"></a><span class="lineno"> 1214</span>&#160;    <a class="code" href="classllvm_1_1Value.html">Value</a> *UB = <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.CreateSelect(IsNeg, Start, Stop);</div>
<div class="line"><a name="l01215"></a><span class="lineno"> 1215</span>&#160;    Span = <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.CreateSub(UB, LB, <span class="stringliteral">&quot;&quot;</span>, <span class="keyword">false</span>, <span class="keyword">true</span>);</div>
<div class="line"><a name="l01216"></a><span class="lineno"> 1216</span>&#160;    ZeroCmp = <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.CreateICmp(</div>
<div class="line"><a name="l01217"></a><span class="lineno"> 1217</span>&#160;        InclusiveStop ? <a class="code" href="classllvm_1_1CmpInst.html#a2be3583dac92a031fa1458d4d992c78ba15ae464950ac676919c2f0c7aafc706c">CmpInst::ICMP_SLT</a> : <a class="code" href="classllvm_1_1CmpInst.html#a2be3583dac92a031fa1458d4d992c78ba2751d6136a2819749dcef65dc19a4246">CmpInst::ICMP_SLE</a>, UB, LB);</div>
<div class="line"><a name="l01218"></a><span class="lineno"> 1218</span>&#160;  } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l01219"></a><span class="lineno"> 1219</span>&#160;    Span = <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.CreateSub(Stop, Start, <span class="stringliteral">&quot;&quot;</span>, <span class="keyword">true</span>);</div>
<div class="line"><a name="l01220"></a><span class="lineno"> 1220</span>&#160;    ZeroCmp = <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.CreateICmp(</div>
<div class="line"><a name="l01221"></a><span class="lineno"> 1221</span>&#160;        InclusiveStop ? <a class="code" href="classllvm_1_1CmpInst.html#a2be3583dac92a031fa1458d4d992c78ba91d86a4753c8bd7624e01bf565d87f8e">CmpInst::ICMP_ULT</a> : <a class="code" href="classllvm_1_1CmpInst.html#a2be3583dac92a031fa1458d4d992c78bad92f160316221fd4090520bb2b3cefc5">CmpInst::ICMP_ULE</a>, Stop, Start);</div>
<div class="line"><a name="l01222"></a><span class="lineno"> 1222</span>&#160;  }</div>
<div class="line"><a name="l01223"></a><span class="lineno"> 1223</span>&#160; </div>
<div class="line"><a name="l01224"></a><span class="lineno"> 1224</span>&#160;  <a class="code" href="classllvm_1_1Value.html">Value</a> *CountIfLooping;</div>
<div class="line"><a name="l01225"></a><span class="lineno"> 1225</span>&#160;  <span class="keywordflow">if</span> (InclusiveStop) {</div>
<div class="line"><a name="l01226"></a><span class="lineno"> 1226</span>&#160;    CountIfLooping = <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.CreateAdd(<a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.CreateUDiv(Span, Incr), One);</div>
<div class="line"><a name="l01227"></a><span class="lineno"> 1227</span>&#160;  } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l01228"></a><span class="lineno"> 1228</span>&#160;    <span class="comment">// Avoid incrementing past stop since it could overflow.</span></div>
<div class="line"><a name="l01229"></a><span class="lineno"> 1229</span>&#160;    <a class="code" href="classllvm_1_1Value.html">Value</a> *CountIfTwo = <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.CreateAdd(</div>
<div class="line"><a name="l01230"></a><span class="lineno"> 1230</span>&#160;        <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.CreateUDiv(<a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.CreateSub(Span, One), Incr), One);</div>
<div class="line"><a name="l01231"></a><span class="lineno"> 1231</span>&#160;    <a class="code" href="classllvm_1_1Value.html">Value</a> *OneCmp = <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.CreateICmp(</div>
<div class="line"><a name="l01232"></a><span class="lineno"> 1232</span>&#160;        InclusiveStop ? <a class="code" href="classllvm_1_1CmpInst.html#a2be3583dac92a031fa1458d4d992c78ba91d86a4753c8bd7624e01bf565d87f8e">CmpInst::ICMP_ULT</a> : <a class="code" href="classllvm_1_1CmpInst.html#a2be3583dac92a031fa1458d4d992c78bad92f160316221fd4090520bb2b3cefc5">CmpInst::ICMP_ULE</a>, Span, Incr);</div>
<div class="line"><a name="l01233"></a><span class="lineno"> 1233</span>&#160;    CountIfLooping = <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.CreateSelect(OneCmp, One, CountIfTwo);</div>
<div class="line"><a name="l01234"></a><span class="lineno"> 1234</span>&#160;  }</div>
<div class="line"><a name="l01235"></a><span class="lineno"> 1235</span>&#160;  <a class="code" href="classllvm_1_1Value.html">Value</a> *TripCount = <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.CreateSelect(ZeroCmp, Zero, CountIfLooping,</div>
<div class="line"><a name="l01236"></a><span class="lineno"> 1236</span>&#160;                                          <span class="stringliteral">&quot;omp_&quot;</span> + <a class="code" href="namespacellvm_1_1GraphProgram.html#a0ad4685976f8c4d4a697a53fbe05d10b">Name</a> + <span class="stringliteral">&quot;.tripcount&quot;</span>);</div>
<div class="line"><a name="l01237"></a><span class="lineno"> 1237</span>&#160; </div>
<div class="line"><a name="l01238"></a><span class="lineno"> 1238</span>&#160;  <span class="keyword">auto</span> BodyGen = [=](<a class="code" href="classllvm_1_1OpenMPIRBuilder.html#aafc1886793b898052f87edd7e9fdbaa3">InsertPointTy</a> CodeGenIP, <a class="code" href="classllvm_1_1Value.html">Value</a> *IV) {</div>
<div class="line"><a name="l01239"></a><span class="lineno"> 1239</span>&#160;    <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.restoreIP(CodeGenIP);</div>
<div class="line"><a name="l01240"></a><span class="lineno"> 1240</span>&#160;    <a class="code" href="classllvm_1_1Value.html">Value</a> *Span = <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.CreateMul(IV, Step);</div>
<div class="line"><a name="l01241"></a><span class="lineno"> 1241</span>&#160;    <a class="code" href="classllvm_1_1Value.html">Value</a> *IndVar = <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.CreateAdd(Span, Start);</div>
<div class="line"><a name="l01242"></a><span class="lineno"> 1242</span>&#160;    BodyGenCB(<a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.saveIP(), IndVar);</div>
<div class="line"><a name="l01243"></a><span class="lineno"> 1243</span>&#160;  };</div>
<div class="line"><a name="l01244"></a><span class="lineno"> 1244</span>&#160;  <a class="code" href="structllvm_1_1OpenMPIRBuilder_1_1LocationDescription.html">LocationDescription</a> LoopLoc = ComputeIP.isSet() ? Loc.<a class="code" href="structllvm_1_1OpenMPIRBuilder_1_1LocationDescription.html#aa15e9d88f98f6d7a0898e6aff4753040">IP</a> : <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.saveIP();</div>
<div class="line"><a name="l01245"></a><span class="lineno"> 1245</span>&#160;  <span class="keywordflow">return</span> createCanonicalLoop(LoopLoc, BodyGen, TripCount, <a class="code" href="namespacellvm_1_1GraphProgram.html#a0ad4685976f8c4d4a697a53fbe05d10b">Name</a>);</div>
<div class="line"><a name="l01246"></a><span class="lineno"> 1246</span>&#160;}</div>
<div class="line"><a name="l01247"></a><span class="lineno"> 1247</span>&#160; </div>
<div class="line"><a name="l01248"></a><span class="lineno"> 1248</span>&#160;<span class="comment">// Returns an LLVM function to call for initializing loop bounds using OpenMP</span></div>
<div class="line"><a name="l01249"></a><span class="lineno"> 1249</span>&#160;<span class="comment">// static scheduling depending on `type`. Only i32 and i64 are supported by the</span></div>
<div class="line"><a name="l01250"></a><span class="lineno"> 1250</span>&#160;<span class="comment">// runtime. Always interpret integers as unsigned similarly to</span></div>
<div class="line"><a name="l01251"></a><span class="lineno"> 1251</span>&#160;<span class="comment">// CanonicalLoopInfo.</span></div>
<div class="line"><a name="l01252"></a><span class="lineno"><a class="line" href="OMPIRBuilder_8cpp.html#ac04904b32ea7f45e108b8752b1a940e7"> 1252</a></span>&#160;<span class="keyword">static</span> <a class="code" href="classllvm_1_1FunctionCallee.html">FunctionCallee</a> <a class="code" href="OMPIRBuilder_8cpp.html#ac04904b32ea7f45e108b8752b1a940e7">getKmpcForStaticInitForType</a>(<a class="code" href="classllvm_1_1Type.html">Type</a> *Ty, <a class="code" href="classllvm_1_1Module.html">Module</a> &amp;M,</div>
<div class="line"><a name="l01253"></a><span class="lineno"> 1253</span>&#160;                                                  <a class="code" href="classllvm_1_1OpenMPIRBuilder.html">OpenMPIRBuilder</a> &amp;OMPBuilder) {</div>
<div class="line"><a name="l01254"></a><span class="lineno"> 1254</span>&#160;  <span class="keywordtype">unsigned</span> Bitwidth = Ty-&gt;<a class="code" href="classllvm_1_1Type.html#a13e877ef779ba7a0688081079f4f9b03">getIntegerBitWidth</a>();</div>
<div class="line"><a name="l01255"></a><span class="lineno"> 1255</span>&#160;  <span class="keywordflow">if</span> (Bitwidth == 32)</div>
<div class="line"><a name="l01256"></a><span class="lineno"> 1256</span>&#160;    <span class="keywordflow">return</span> OMPBuilder.<a class="code" href="classllvm_1_1OpenMPIRBuilder.html#a034dc6253a2a36f78ac071a7c12d5c27">getOrCreateRuntimeFunction</a>(</div>
<div class="line"><a name="l01257"></a><span class="lineno"> 1257</span>&#160;        <a class="code" href="lib_2Target_2X86_2README_8txt.html#ac88fe1d3a61b056a4f64fbbb156a62ff">M</a>, omp::RuntimeFunction::OMPRTL___kmpc_for_static_init_4u);</div>
<div class="line"><a name="l01258"></a><span class="lineno"> 1258</span>&#160;  <span class="keywordflow">if</span> (Bitwidth == 64)</div>
<div class="line"><a name="l01259"></a><span class="lineno"> 1259</span>&#160;    <span class="keywordflow">return</span> OMPBuilder.<a class="code" href="classllvm_1_1OpenMPIRBuilder.html#a034dc6253a2a36f78ac071a7c12d5c27">getOrCreateRuntimeFunction</a>(</div>
<div class="line"><a name="l01260"></a><span class="lineno"> 1260</span>&#160;        <a class="code" href="lib_2Target_2X86_2README_8txt.html#ac88fe1d3a61b056a4f64fbbb156a62ff">M</a>, omp::RuntimeFunction::OMPRTL___kmpc_for_static_init_8u);</div>
<div class="line"><a name="l01261"></a><span class="lineno"> 1261</span>&#160;  <a class="code" href="llvm_2Support_2ErrorHandling_8h.html#ace243f5c25697a1107cce46626b3dc94">llvm_unreachable</a>(<span class="stringliteral">&quot;unknown OpenMP loop iterator bitwidth&quot;</span>);</div>
<div class="line"><a name="l01262"></a><span class="lineno"> 1262</span>&#160;}</div>
<div class="line"><a name="l01263"></a><span class="lineno"> 1263</span>&#160; </div>
<div class="line"><a name="l01264"></a><span class="lineno"> 1264</span>&#160;<span class="comment">// Sets the number of loop iterations to the given value. This value must be</span></div>
<div class="line"><a name="l01265"></a><span class="lineno"> 1265</span>&#160;<span class="comment">// valid in the condition block (i.e., defined in the preheader) and is</span></div>
<div class="line"><a name="l01266"></a><span class="lineno"> 1266</span>&#160;<span class="comment">// interpreted as an unsigned integer.</span></div>
<div class="line"><a name="l01267"></a><span class="lineno"><a class="line" href="OMPIRBuilder_8cpp.html#adf3b5ee40ef3999c2de59256a82ee7f1"> 1267</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="OMPIRBuilder_8cpp.html#adf3b5ee40ef3999c2de59256a82ee7f1">setCanonicalLoopTripCount</a>(<a class="code" href="classllvm_1_1CanonicalLoopInfo.html">CanonicalLoopInfo</a> *CLI, <a class="code" href="classllvm_1_1Value.html">Value</a> *TripCount) {</div>
<div class="line"><a name="l01268"></a><span class="lineno"> 1268</span>&#160;  <a class="code" href="classllvm_1_1Instruction.html">Instruction</a> *CmpI = &amp;CLI-&gt;<a class="code" href="classllvm_1_1CanonicalLoopInfo.html#a71a16b42ce34255bd7a65902d15643fb">getCond</a>()-&gt;<a class="code" href="classllvm_1_1BasicBlock.html#ab706e7ebb1969c5e34f28bfcf2ff719e">front</a>();</div>
<div class="line"><a name="l01269"></a><span class="lineno"> 1269</span>&#160;  <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(isa&lt;CmpInst&gt;(CmpI) &amp;&amp; <span class="stringliteral">&quot;First inst must compare IV with TripCount&quot;</span>);</div>
<div class="line"><a name="l01270"></a><span class="lineno"> 1270</span>&#160;  CmpI-&gt;<a class="code" href="classllvm_1_1User.html#a5fa9b8e1842b354f64c1ba6be0a4a17f">setOperand</a>(1, TripCount);</div>
<div class="line"><a name="l01271"></a><span class="lineno"> 1271</span>&#160;  CLI-&gt;<a class="code" href="classllvm_1_1CanonicalLoopInfo.html#a32ff799dcb39887a8d21322020f305ba">assertOK</a>();</div>
<div class="line"><a name="l01272"></a><span class="lineno"> 1272</span>&#160;}</div>
<div class="line"><a name="l01273"></a><span class="lineno"> 1273</span>&#160; </div>
<div class="line"><a name="l01274"></a><span class="lineno"><a class="line" href="classllvm_1_1OpenMPIRBuilder.html#a36b7ed07d181d828c3a52b48b9f95bf9"> 1274</a></span>&#160;<a class="code" href="classllvm_1_1CanonicalLoopInfo.html">CanonicalLoopInfo</a> *<a class="code" href="classllvm_1_1OpenMPIRBuilder.html#a36b7ed07d181d828c3a52b48b9f95bf9">OpenMPIRBuilder::createStaticWorkshareLoop</a>(</div>
<div class="line"><a name="l01275"></a><span class="lineno"> 1275</span>&#160;    <span class="keyword">const</span> <a class="code" href="structllvm_1_1OpenMPIRBuilder_1_1LocationDescription.html">LocationDescription</a> &amp;Loc, <a class="code" href="classllvm_1_1CanonicalLoopInfo.html">CanonicalLoopInfo</a> *CLI,</div>
<div class="line"><a name="l01276"></a><span class="lineno"> 1276</span>&#160;    <a class="code" href="classllvm_1_1OpenMPIRBuilder.html#aafc1886793b898052f87edd7e9fdbaa3">InsertPointTy</a> AllocaIP, <span class="keywordtype">bool</span> NeedsBarrier, <a class="code" href="classllvm_1_1Value.html">Value</a> *Chunk) {</div>
<div class="line"><a name="l01277"></a><span class="lineno"> 1277</span>&#160;  <span class="comment">// Set up the source location value for OpenMP runtime.</span></div>
<div class="line"><a name="l01278"></a><span class="lineno"> 1278</span>&#160;  <span class="keywordflow">if</span> (!updateToLocation(Loc))</div>
<div class="line"><a name="l01279"></a><span class="lineno"> 1279</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l01280"></a><span class="lineno"> 1280</span>&#160; </div>
<div class="line"><a name="l01281"></a><span class="lineno"> 1281</span>&#160;  <a class="code" href="classllvm_1_1Constant.html">Constant</a> *SrcLocStr = getOrCreateSrcLocStr(Loc);</div>
<div class="line"><a name="l01282"></a><span class="lineno"> 1282</span>&#160;  <a class="code" href="classllvm_1_1Value.html">Value</a> *SrcLoc = getOrCreateIdent(SrcLocStr);</div>
<div class="line"><a name="l01283"></a><span class="lineno"> 1283</span>&#160; </div>
<div class="line"><a name="l01284"></a><span class="lineno"> 1284</span>&#160;  <span class="comment">// Declare useful OpenMP runtime functions.</span></div>
<div class="line"><a name="l01285"></a><span class="lineno"> 1285</span>&#160;  <a class="code" href="classllvm_1_1Value.html">Value</a> *IV = CLI-&gt;<a class="code" href="classllvm_1_1CanonicalLoopInfo.html#a230d812cc988ec3a48bf5206d3d72b88">getIndVar</a>();</div>
<div class="line"><a name="l01286"></a><span class="lineno"> 1286</span>&#160;  <a class="code" href="classllvm_1_1Type.html">Type</a> *IVTy = IV-&gt;<a class="code" href="classllvm_1_1Value.html#a6393a2d4fe7e10b28a0dcc35f881567b">getType</a>();</div>
<div class="line"><a name="l01287"></a><span class="lineno"> 1287</span>&#160;  <a class="code" href="classllvm_1_1FunctionCallee.html">FunctionCallee</a> StaticInit = <a class="code" href="OMPIRBuilder_8cpp.html#ac04904b32ea7f45e108b8752b1a940e7">getKmpcForStaticInitForType</a>(IVTy, <a class="code" href="lib_2Target_2X86_2README_8txt.html#ac88fe1d3a61b056a4f64fbbb156a62ff">M</a>, *<span class="keyword">this</span>);</div>
<div class="line"><a name="l01288"></a><span class="lineno"> 1288</span>&#160;  <a class="code" href="classllvm_1_1FunctionCallee.html">FunctionCallee</a> StaticFini =</div>
<div class="line"><a name="l01289"></a><span class="lineno"> 1289</span>&#160;      getOrCreateRuntimeFunction(<a class="code" href="lib_2Target_2X86_2README_8txt.html#ac88fe1d3a61b056a4f64fbbb156a62ff">M</a>, omp::OMPRTL___kmpc_for_static_fini);</div>
<div class="line"><a name="l01290"></a><span class="lineno"> 1290</span>&#160; </div>
<div class="line"><a name="l01291"></a><span class="lineno"> 1291</span>&#160;  <span class="comment">// Allocate space for computed loop bounds as expected by the &quot;init&quot; function.</span></div>
<div class="line"><a name="l01292"></a><span class="lineno"> 1292</span>&#160;  <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.restoreIP(AllocaIP);</div>
<div class="line"><a name="l01293"></a><span class="lineno"> 1293</span>&#160;  <a class="code" href="classllvm_1_1Type.html">Type</a> *I32Type = <a class="code" href="classllvm_1_1Type.html#a30dd396c5b40cd86c1591872e574ccdf">Type::getInt32Ty</a>(<a class="code" href="lib_2Target_2X86_2README_8txt.html#ac88fe1d3a61b056a4f64fbbb156a62ff">M</a>.getContext());</div>
<div class="line"><a name="l01294"></a><span class="lineno"> 1294</span>&#160;  <a class="code" href="classllvm_1_1Value.html">Value</a> *PLastIter = <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.CreateAlloca(I32Type, <span class="keyword">nullptr</span>, <span class="stringliteral">&quot;p.lastiter&quot;</span>);</div>
<div class="line"><a name="l01295"></a><span class="lineno"> 1295</span>&#160;  <a class="code" href="classllvm_1_1Value.html">Value</a> *PLowerBound = <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.CreateAlloca(IVTy, <span class="keyword">nullptr</span>, <span class="stringliteral">&quot;p.lowerbound&quot;</span>);</div>
<div class="line"><a name="l01296"></a><span class="lineno"> 1296</span>&#160;  <a class="code" href="classllvm_1_1Value.html">Value</a> *PUpperBound = <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.CreateAlloca(IVTy, <span class="keyword">nullptr</span>, <span class="stringliteral">&quot;p.upperbound&quot;</span>);</div>
<div class="line"><a name="l01297"></a><span class="lineno"> 1297</span>&#160;  <a class="code" href="classllvm_1_1Value.html">Value</a> *PStride = <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.CreateAlloca(IVTy, <span class="keyword">nullptr</span>, <span class="stringliteral">&quot;p.stride&quot;</span>);</div>
<div class="line"><a name="l01298"></a><span class="lineno"> 1298</span>&#160; </div>
<div class="line"><a name="l01299"></a><span class="lineno"> 1299</span>&#160;  <span class="comment">// At the end of the preheader, prepare for calling the &quot;init&quot; function by</span></div>
<div class="line"><a name="l01300"></a><span class="lineno"> 1300</span>&#160;  <span class="comment">// storing the current loop bounds into the allocated space. A canonical loop</span></div>
<div class="line"><a name="l01301"></a><span class="lineno"> 1301</span>&#160;  <span class="comment">// always iterates from 0 to trip-count with step 1. Note that &quot;init&quot; expects</span></div>
<div class="line"><a name="l01302"></a><span class="lineno"> 1302</span>&#160;  <span class="comment">// and produces an inclusive upper bound.</span></div>
<div class="line"><a name="l01303"></a><span class="lineno"> 1303</span>&#160;  <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.SetInsertPoint(CLI-&gt;<a class="code" href="classllvm_1_1CanonicalLoopInfo.html#adb9b8b6738256feb5857747cb8b87df7">getPreheader</a>()-&gt;<a class="code" href="classllvm_1_1BasicBlock.html#a71a9eabc4318b2fc34f83b01dfee484b">getTerminator</a>());</div>
<div class="line"><a name="l01304"></a><span class="lineno"> 1304</span>&#160;  <a class="code" href="classllvm_1_1Constant.html">Constant</a> *Zero = <a class="code" href="classllvm_1_1ConstantInt.html#a969709dd49c28865a482d8b870f87c46">ConstantInt::get</a>(IVTy, 0);</div>
<div class="line"><a name="l01305"></a><span class="lineno"> 1305</span>&#160;  <a class="code" href="classllvm_1_1Constant.html">Constant</a> *One = <a class="code" href="classllvm_1_1ConstantInt.html#a969709dd49c28865a482d8b870f87c46">ConstantInt::get</a>(IVTy, 1);</div>
<div class="line"><a name="l01306"></a><span class="lineno"> 1306</span>&#160;  <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.CreateStore(Zero, PLowerBound);</div>
<div class="line"><a name="l01307"></a><span class="lineno"> 1307</span>&#160;  <a class="code" href="classllvm_1_1Value.html">Value</a> *UpperBound = <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.CreateSub(CLI-&gt;<a class="code" href="classllvm_1_1CanonicalLoopInfo.html#a2077e6f8b41cd609c8e54e80767eb280">getTripCount</a>(), One);</div>
<div class="line"><a name="l01308"></a><span class="lineno"> 1308</span>&#160;  <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.CreateStore(UpperBound, PUpperBound);</div>
<div class="line"><a name="l01309"></a><span class="lineno"> 1309</span>&#160;  <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.CreateStore(One, PStride);</div>
<div class="line"><a name="l01310"></a><span class="lineno"> 1310</span>&#160; </div>
<div class="line"><a name="l01311"></a><span class="lineno"> 1311</span>&#160;  <span class="keywordflow">if</span> (!Chunk)</div>
<div class="line"><a name="l01312"></a><span class="lineno"> 1312</span>&#160;    Chunk = One;</div>
<div class="line"><a name="l01313"></a><span class="lineno"> 1313</span>&#160; </div>
<div class="line"><a name="l01314"></a><span class="lineno"> 1314</span>&#160;  <a class="code" href="classllvm_1_1Value.html">Value</a> *ThreadNum = getOrCreateThreadID(SrcLoc);</div>
<div class="line"><a name="l01315"></a><span class="lineno"> 1315</span>&#160; </div>
<div class="line"><a name="l01316"></a><span class="lineno"> 1316</span>&#160;  <a class="code" href="classllvm_1_1Constant.html">Constant</a> *SchedulingType =</div>
<div class="line"><a name="l01317"></a><span class="lineno"> 1317</span>&#160;      <a class="code" href="classllvm_1_1ConstantInt.html#a969709dd49c28865a482d8b870f87c46">ConstantInt::get</a>(I32Type, <span class="keyword">static_cast&lt;</span><span class="keywordtype">int</span><span class="keyword">&gt;</span>(<a class="code" href="namespacellvm_1_1Reloc.html#af59f6dc86e80aaf56f1afd155eebf568a2102fa713297236bf4339c5f0bf0f39d">OMPScheduleType::Static</a>));</div>
<div class="line"><a name="l01318"></a><span class="lineno"> 1318</span>&#160; </div>
<div class="line"><a name="l01319"></a><span class="lineno"> 1319</span>&#160;  <span class="comment">// Call the &quot;init&quot; function and update the trip count of the loop with the</span></div>
<div class="line"><a name="l01320"></a><span class="lineno"> 1320</span>&#160;  <span class="comment">// value it produced.</span></div>
<div class="line"><a name="l01321"></a><span class="lineno"> 1321</span>&#160;  <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.CreateCall(StaticInit,</div>
<div class="line"><a name="l01322"></a><span class="lineno"> 1322</span>&#160;                     {SrcLoc, ThreadNum, SchedulingType, PLastIter, PLowerBound,</div>
<div class="line"><a name="l01323"></a><span class="lineno"> 1323</span>&#160;                      PUpperBound, PStride, One, Chunk});</div>
<div class="line"><a name="l01324"></a><span class="lineno"> 1324</span>&#160;  <a class="code" href="classllvm_1_1Value.html">Value</a> *LowerBound = <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.CreateLoad(IVTy, PLowerBound);</div>
<div class="line"><a name="l01325"></a><span class="lineno"> 1325</span>&#160;  <a class="code" href="classllvm_1_1Value.html">Value</a> *InclusiveUpperBound = <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.CreateLoad(IVTy, PUpperBound);</div>
<div class="line"><a name="l01326"></a><span class="lineno"> 1326</span>&#160;  <a class="code" href="classllvm_1_1Value.html">Value</a> *TripCountMinusOne = <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.CreateSub(InclusiveUpperBound, LowerBound);</div>
<div class="line"><a name="l01327"></a><span class="lineno"> 1327</span>&#160;  <a class="code" href="classllvm_1_1Value.html">Value</a> *TripCount = <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.CreateAdd(TripCountMinusOne, One);</div>
<div class="line"><a name="l01328"></a><span class="lineno"> 1328</span>&#160;  <a class="code" href="OMPIRBuilder_8cpp.html#adf3b5ee40ef3999c2de59256a82ee7f1">setCanonicalLoopTripCount</a>(CLI, TripCount);</div>
<div class="line"><a name="l01329"></a><span class="lineno"> 1329</span>&#160; </div>
<div class="line"><a name="l01330"></a><span class="lineno"> 1330</span>&#160;  <span class="comment">// Update all uses of the induction variable except the one in the condition</span></div>
<div class="line"><a name="l01331"></a><span class="lineno"> 1331</span>&#160;  <span class="comment">// block that compares it with the actual upper bound, and the increment in</span></div>
<div class="line"><a name="l01332"></a><span class="lineno"> 1332</span>&#160;  <span class="comment">// the latch block.</span></div>
<div class="line"><a name="l01333"></a><span class="lineno"> 1333</span>&#160;  <span class="comment">// TODO: this can eventually move to CanonicalLoopInfo or to a new</span></div>
<div class="line"><a name="l01334"></a><span class="lineno"> 1334</span>&#160;  <span class="comment">// CanonicalLoopInfoUpdater interface.</span></div>
<div class="line"><a name="l01335"></a><span class="lineno"> 1335</span>&#160;  <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.SetInsertPoint(CLI-&gt;<a class="code" href="classllvm_1_1CanonicalLoopInfo.html#afe4ae11bae0a25e5ddc9615ef6852aed">getBody</a>(), CLI-&gt;<a class="code" href="classllvm_1_1CanonicalLoopInfo.html#afe4ae11bae0a25e5ddc9615ef6852aed">getBody</a>()-&gt;<a class="code" href="classllvm_1_1BasicBlock.html#a161fd4e9fa5367f64c2a4c9e921c3ad3">getFirstInsertionPt</a>());</div>
<div class="line"><a name="l01336"></a><span class="lineno"> 1336</span>&#160;  <a class="code" href="classllvm_1_1Value.html">Value</a> *UpdatedIV = <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.CreateAdd(IV, LowerBound);</div>
<div class="line"><a name="l01337"></a><span class="lineno"> 1337</span>&#160;  IV-&gt;<a class="code" href="classllvm_1_1Value.html#a7e8dad1701aa6445be4a29f654b0473c">replaceUsesWithIf</a>(UpdatedIV, [&amp;](<a class="code" href="classllvm_1_1Use.html">Use</a> &amp;U) {</div>
<div class="line"><a name="l01338"></a><span class="lineno"> 1338</span>&#160;    <span class="keyword">auto</span> *Instr = dyn_cast&lt;Instruction&gt;(U.<a class="code" href="classllvm_1_1Use.html#a50a2e57da274f8d69b9f932977379cdf">getUser</a>());</div>
<div class="line"><a name="l01339"></a><span class="lineno"> 1339</span>&#160;    <span class="keywordflow">return</span> !Instr ||</div>
<div class="line"><a name="l01340"></a><span class="lineno"> 1340</span>&#160;           (Instr-&gt;getParent() != CLI-&gt;<a class="code" href="classllvm_1_1CanonicalLoopInfo.html#a71a16b42ce34255bd7a65902d15643fb">getCond</a>() &amp;&amp;</div>
<div class="line"><a name="l01341"></a><span class="lineno"> 1341</span>&#160;            Instr-&gt;<a class="code" href="classllvm_1_1BasicBlock.html#a38bee869ad41aebfef3de2641b12004c">getParent</a>() != CLI-&gt;<a class="code" href="classllvm_1_1CanonicalLoopInfo.html#a8ffbd9b1e60e2bb15da132610ff997ac">getLatch</a>() &amp;&amp; Instr != UpdatedIV);</div>
<div class="line"><a name="l01342"></a><span class="lineno"> 1342</span>&#160;  });</div>
<div class="line"><a name="l01343"></a><span class="lineno"> 1343</span>&#160; </div>
<div class="line"><a name="l01344"></a><span class="lineno"> 1344</span>&#160;  <span class="comment">// In the &quot;exit&quot; block, call the &quot;fini&quot; function.</span></div>
<div class="line"><a name="l01345"></a><span class="lineno"> 1345</span>&#160;  <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.SetInsertPoint(CLI-&gt;<a class="code" href="classllvm_1_1CanonicalLoopInfo.html#a320de99bcedbb241fe54ed847482d27f">getExit</a>(),</div>
<div class="line"><a name="l01346"></a><span class="lineno"> 1346</span>&#160;                         CLI-&gt;<a class="code" href="classllvm_1_1CanonicalLoopInfo.html#a320de99bcedbb241fe54ed847482d27f">getExit</a>()-&gt;<a class="code" href="classllvm_1_1BasicBlock.html#a71a9eabc4318b2fc34f83b01dfee484b">getTerminator</a>()-&gt;<a class="code" href="classllvm_1_1ilist__node__impl.html#af719fc783be6589465137d997701a432">getIterator</a>());</div>
<div class="line"><a name="l01347"></a><span class="lineno"> 1347</span>&#160;  <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.CreateCall(StaticFini, {SrcLoc, ThreadNum});</div>
<div class="line"><a name="l01348"></a><span class="lineno"> 1348</span>&#160; </div>
<div class="line"><a name="l01349"></a><span class="lineno"> 1349</span>&#160;  <span class="comment">// Add the barrier if requested.</span></div>
<div class="line"><a name="l01350"></a><span class="lineno"> 1350</span>&#160;  <span class="keywordflow">if</span> (NeedsBarrier)</div>
<div class="line"><a name="l01351"></a><span class="lineno"> 1351</span>&#160;    createBarrier(<a class="code" href="structllvm_1_1OpenMPIRBuilder_1_1LocationDescription.html">LocationDescription</a>(<a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.saveIP(), Loc.<a class="code" href="structllvm_1_1OpenMPIRBuilder_1_1LocationDescription.html#ac6a58d4f9cf1978ee50af30bdb248d73">DL</a>),</div>
<div class="line"><a name="l01352"></a><span class="lineno"> 1352</span>&#160;                  omp::Directive::OMPD_for, <span class="comment">/* ForceSimpleCall */</span> <span class="keyword">false</span>,</div>
<div class="line"><a name="l01353"></a><span class="lineno"> 1353</span>&#160;                  <span class="comment">/* CheckCancelFlag */</span> <span class="keyword">false</span>);</div>
<div class="line"><a name="l01354"></a><span class="lineno"> 1354</span>&#160; </div>
<div class="line"><a name="l01355"></a><span class="lineno"> 1355</span>&#160;  CLI-&gt;<a class="code" href="classllvm_1_1CanonicalLoopInfo.html#a32ff799dcb39887a8d21322020f305ba">assertOK</a>();</div>
<div class="line"><a name="l01356"></a><span class="lineno"> 1356</span>&#160;  <span class="keywordflow">return</span> CLI;</div>
<div class="line"><a name="l01357"></a><span class="lineno"> 1357</span>&#160;}</div>
<div class="line"><a name="l01358"></a><span class="lineno"> 1358</span>&#160; </div>
<div class="line"><a name="l01359"></a><span class="lineno"><a class="line" href="classllvm_1_1OpenMPIRBuilder.html#a869d56f31fc5c82a49f7ab6720a46d55"> 1359</a></span>&#160;<a class="code" href="classllvm_1_1CanonicalLoopInfo.html">CanonicalLoopInfo</a> *<a class="code" href="classllvm_1_1OpenMPIRBuilder.html#a869d56f31fc5c82a49f7ab6720a46d55">OpenMPIRBuilder::createWorkshareLoop</a>(</div>
<div class="line"><a name="l01360"></a><span class="lineno"> 1360</span>&#160;    <span class="keyword">const</span> <a class="code" href="structllvm_1_1OpenMPIRBuilder_1_1LocationDescription.html">LocationDescription</a> &amp;Loc, <a class="code" href="classllvm_1_1CanonicalLoopInfo.html">CanonicalLoopInfo</a> *CLI,</div>
<div class="line"><a name="l01361"></a><span class="lineno"> 1361</span>&#160;    <a class="code" href="classllvm_1_1OpenMPIRBuilder.html#aafc1886793b898052f87edd7e9fdbaa3">InsertPointTy</a> AllocaIP, <span class="keywordtype">bool</span> NeedsBarrier) {</div>
<div class="line"><a name="l01362"></a><span class="lineno"> 1362</span>&#160;  <span class="comment">// Currently only supports static schedules.</span></div>
<div class="line"><a name="l01363"></a><span class="lineno"> 1363</span>&#160;  <span class="keywordflow">return</span> createStaticWorkshareLoop(Loc, CLI, AllocaIP, NeedsBarrier);</div>
<div class="line"><a name="l01364"></a><span class="lineno"> 1364</span>&#160;}</div>
<div class="line"><a name="l01365"></a><span class="lineno"> 1365</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l01366"></a><span class="lineno"> 1366</span>&#160;<span class="comment">/// Returns an LLVM function to call for initializing loop bounds using OpenMP</span></div>
<div class="line"><a name="l01367"></a><span class="lineno"> 1367</span>&#160;<span class="comment">/// dynamic scheduling depending on `type`. Only i32 and i64 are supported by</span></div>
<div class="line"><a name="l01368"></a><span class="lineno"> 1368</span>&#160;<span class="comment">/// the runtime. Always interpret integers as unsigned similarly to</span></div>
<div class="line"><a name="l01369"></a><span class="lineno"> 1369</span>&#160;<span class="comment">/// CanonicalLoopInfo.</span></div>
<div class="line"><a name="l01370"></a><span class="lineno"> 1370</span>&#160;<span class="comment"></span><span class="keyword">static</span> <a class="code" href="classllvm_1_1FunctionCallee.html">FunctionCallee</a></div>
<div class="line"><a name="l01371"></a><span class="lineno"><a class="line" href="OMPIRBuilder_8cpp.html#a7a68322ba864bccb8736e42fbc915a8a"> 1371</a></span>&#160;<a class="code" href="OMPIRBuilder_8cpp.html#a7a68322ba864bccb8736e42fbc915a8a">getKmpcForDynamicInitForType</a>(<a class="code" href="classllvm_1_1Type.html">Type</a> *Ty, <a class="code" href="classllvm_1_1Module.html">Module</a> &amp;M, <a class="code" href="classllvm_1_1OpenMPIRBuilder.html">OpenMPIRBuilder</a> &amp;OMPBuilder) {</div>
<div class="line"><a name="l01372"></a><span class="lineno"> 1372</span>&#160;  <span class="keywordtype">unsigned</span> Bitwidth = Ty-&gt;<a class="code" href="classllvm_1_1Type.html#a13e877ef779ba7a0688081079f4f9b03">getIntegerBitWidth</a>();</div>
<div class="line"><a name="l01373"></a><span class="lineno"> 1373</span>&#160;  <span class="keywordflow">if</span> (Bitwidth == 32)</div>
<div class="line"><a name="l01374"></a><span class="lineno"> 1374</span>&#160;    <span class="keywordflow">return</span> OMPBuilder.<a class="code" href="classllvm_1_1OpenMPIRBuilder.html#a034dc6253a2a36f78ac071a7c12d5c27">getOrCreateRuntimeFunction</a>(</div>
<div class="line"><a name="l01375"></a><span class="lineno"> 1375</span>&#160;        <a class="code" href="lib_2Target_2X86_2README_8txt.html#ac88fe1d3a61b056a4f64fbbb156a62ff">M</a>, omp::RuntimeFunction::OMPRTL___kmpc_dispatch_init_4u);</div>
<div class="line"><a name="l01376"></a><span class="lineno"> 1376</span>&#160;  <span class="keywordflow">if</span> (Bitwidth == 64)</div>
<div class="line"><a name="l01377"></a><span class="lineno"> 1377</span>&#160;    <span class="keywordflow">return</span> OMPBuilder.<a class="code" href="classllvm_1_1OpenMPIRBuilder.html#a034dc6253a2a36f78ac071a7c12d5c27">getOrCreateRuntimeFunction</a>(</div>
<div class="line"><a name="l01378"></a><span class="lineno"> 1378</span>&#160;        <a class="code" href="lib_2Target_2X86_2README_8txt.html#ac88fe1d3a61b056a4f64fbbb156a62ff">M</a>, omp::RuntimeFunction::OMPRTL___kmpc_dispatch_init_8u);</div>
<div class="line"><a name="l01379"></a><span class="lineno"> 1379</span>&#160;  <a class="code" href="llvm_2Support_2ErrorHandling_8h.html#ace243f5c25697a1107cce46626b3dc94">llvm_unreachable</a>(<span class="stringliteral">&quot;unknown OpenMP loop iterator bitwidth&quot;</span>);</div>
<div class="line"><a name="l01380"></a><span class="lineno"> 1380</span>&#160;}</div>
<div class="line"><a name="l01381"></a><span class="lineno"> 1381</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l01382"></a><span class="lineno"> 1382</span>&#160;<span class="comment">/// Returns an LLVM function to call for updating the next loop using OpenMP</span></div>
<div class="line"><a name="l01383"></a><span class="lineno"> 1383</span>&#160;<span class="comment">/// dynamic scheduling depending on `type`. Only i32 and i64 are supported by</span></div>
<div class="line"><a name="l01384"></a><span class="lineno"> 1384</span>&#160;<span class="comment">/// the runtime. Always interpret integers as unsigned similarly to</span></div>
<div class="line"><a name="l01385"></a><span class="lineno"> 1385</span>&#160;<span class="comment">/// CanonicalLoopInfo.</span></div>
<div class="line"><a name="l01386"></a><span class="lineno"> 1386</span>&#160;<span class="comment"></span><span class="keyword">static</span> <a class="code" href="classllvm_1_1FunctionCallee.html">FunctionCallee</a></div>
<div class="line"><a name="l01387"></a><span class="lineno"><a class="line" href="OMPIRBuilder_8cpp.html#a74bf2240e1da04168d57a7534c9613f7"> 1387</a></span>&#160;<a class="code" href="OMPIRBuilder_8cpp.html#a74bf2240e1da04168d57a7534c9613f7">getKmpcForDynamicNextForType</a>(<a class="code" href="classllvm_1_1Type.html">Type</a> *Ty, <a class="code" href="classllvm_1_1Module.html">Module</a> &amp;M, <a class="code" href="classllvm_1_1OpenMPIRBuilder.html">OpenMPIRBuilder</a> &amp;OMPBuilder) {</div>
<div class="line"><a name="l01388"></a><span class="lineno"> 1388</span>&#160;  <span class="keywordtype">unsigned</span> Bitwidth = Ty-&gt;<a class="code" href="classllvm_1_1Type.html#a13e877ef779ba7a0688081079f4f9b03">getIntegerBitWidth</a>();</div>
<div class="line"><a name="l01389"></a><span class="lineno"> 1389</span>&#160;  <span class="keywordflow">if</span> (Bitwidth == 32)</div>
<div class="line"><a name="l01390"></a><span class="lineno"> 1390</span>&#160;    <span class="keywordflow">return</span> OMPBuilder.<a class="code" href="classllvm_1_1OpenMPIRBuilder.html#a034dc6253a2a36f78ac071a7c12d5c27">getOrCreateRuntimeFunction</a>(</div>
<div class="line"><a name="l01391"></a><span class="lineno"> 1391</span>&#160;        <a class="code" href="lib_2Target_2X86_2README_8txt.html#ac88fe1d3a61b056a4f64fbbb156a62ff">M</a>, omp::RuntimeFunction::OMPRTL___kmpc_dispatch_next_4u);</div>
<div class="line"><a name="l01392"></a><span class="lineno"> 1392</span>&#160;  <span class="keywordflow">if</span> (Bitwidth == 64)</div>
<div class="line"><a name="l01393"></a><span class="lineno"> 1393</span>&#160;    <span class="keywordflow">return</span> OMPBuilder.<a class="code" href="classllvm_1_1OpenMPIRBuilder.html#a034dc6253a2a36f78ac071a7c12d5c27">getOrCreateRuntimeFunction</a>(</div>
<div class="line"><a name="l01394"></a><span class="lineno"> 1394</span>&#160;        <a class="code" href="lib_2Target_2X86_2README_8txt.html#ac88fe1d3a61b056a4f64fbbb156a62ff">M</a>, omp::RuntimeFunction::OMPRTL___kmpc_dispatch_next_8u);</div>
<div class="line"><a name="l01395"></a><span class="lineno"> 1395</span>&#160;  <a class="code" href="llvm_2Support_2ErrorHandling_8h.html#ace243f5c25697a1107cce46626b3dc94">llvm_unreachable</a>(<span class="stringliteral">&quot;unknown OpenMP loop iterator bitwidth&quot;</span>);</div>
<div class="line"><a name="l01396"></a><span class="lineno"> 1396</span>&#160;}</div>
<div class="line"><a name="l01397"></a><span class="lineno"> 1397</span>&#160; </div>
<div class="line"><a name="l01398"></a><span class="lineno"><a class="line" href="classllvm_1_1OpenMPIRBuilder.html#a5a98c86afe9b92a75e362c37cfba4a91"> 1398</a></span>&#160;<a class="code" href="classllvm_1_1OpenMPIRBuilder.html#aafc1886793b898052f87edd7e9fdbaa3">OpenMPIRBuilder::InsertPointTy</a> <a class="code" href="classllvm_1_1OpenMPIRBuilder.html#a5a98c86afe9b92a75e362c37cfba4a91">OpenMPIRBuilder::createDynamicWorkshareLoop</a>(</div>
<div class="line"><a name="l01399"></a><span class="lineno"> 1399</span>&#160;    <span class="keyword">const</span> <a class="code" href="structllvm_1_1OpenMPIRBuilder_1_1LocationDescription.html">LocationDescription</a> &amp;Loc, <a class="code" href="classllvm_1_1CanonicalLoopInfo.html">CanonicalLoopInfo</a> *CLI,</div>
<div class="line"><a name="l01400"></a><span class="lineno"> 1400</span>&#160;    <a class="code" href="classllvm_1_1OpenMPIRBuilder.html#aafc1886793b898052f87edd7e9fdbaa3">InsertPointTy</a> AllocaIP, <a class="code" href="namespacellvm_1_1omp.html#a231ea6a9a0009e38969a20d4293119c7">OMPScheduleType</a> SchedType, <span class="keywordtype">bool</span> NeedsBarrier,</div>
<div class="line"><a name="l01401"></a><span class="lineno"> 1401</span>&#160;    <a class="code" href="classllvm_1_1Value.html">Value</a> *Chunk) {</div>
<div class="line"><a name="l01402"></a><span class="lineno"> 1402</span>&#160;  <span class="comment">// Set up the source location value for OpenMP runtime.</span></div>
<div class="line"><a name="l01403"></a><span class="lineno"> 1403</span>&#160;  <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.SetCurrentDebugLocation(Loc.<a class="code" href="structllvm_1_1OpenMPIRBuilder_1_1LocationDescription.html#ac6a58d4f9cf1978ee50af30bdb248d73">DL</a>);</div>
<div class="line"><a name="l01404"></a><span class="lineno"> 1404</span>&#160; </div>
<div class="line"><a name="l01405"></a><span class="lineno"> 1405</span>&#160;  <a class="code" href="classllvm_1_1Constant.html">Constant</a> *SrcLocStr = getOrCreateSrcLocStr(Loc);</div>
<div class="line"><a name="l01406"></a><span class="lineno"> 1406</span>&#160;  <a class="code" href="classllvm_1_1Value.html">Value</a> *SrcLoc = getOrCreateIdent(SrcLocStr);</div>
<div class="line"><a name="l01407"></a><span class="lineno"> 1407</span>&#160; </div>
<div class="line"><a name="l01408"></a><span class="lineno"> 1408</span>&#160;  <span class="comment">// Declare useful OpenMP runtime functions.</span></div>
<div class="line"><a name="l01409"></a><span class="lineno"> 1409</span>&#160;  <a class="code" href="classllvm_1_1Value.html">Value</a> *IV = CLI-&gt;<a class="code" href="classllvm_1_1CanonicalLoopInfo.html#a230d812cc988ec3a48bf5206d3d72b88">getIndVar</a>();</div>
<div class="line"><a name="l01410"></a><span class="lineno"> 1410</span>&#160;  <a class="code" href="classllvm_1_1Type.html">Type</a> *IVTy = IV-&gt;<a class="code" href="classllvm_1_1Value.html#a6393a2d4fe7e10b28a0dcc35f881567b">getType</a>();</div>
<div class="line"><a name="l01411"></a><span class="lineno"> 1411</span>&#160;  <a class="code" href="classllvm_1_1FunctionCallee.html">FunctionCallee</a> DynamicInit = <a class="code" href="OMPIRBuilder_8cpp.html#a7a68322ba864bccb8736e42fbc915a8a">getKmpcForDynamicInitForType</a>(IVTy, <a class="code" href="lib_2Target_2X86_2README_8txt.html#ac88fe1d3a61b056a4f64fbbb156a62ff">M</a>, *<span class="keyword">this</span>);</div>
<div class="line"><a name="l01412"></a><span class="lineno"> 1412</span>&#160;  <a class="code" href="classllvm_1_1FunctionCallee.html">FunctionCallee</a> DynamicNext = <a class="code" href="OMPIRBuilder_8cpp.html#a74bf2240e1da04168d57a7534c9613f7">getKmpcForDynamicNextForType</a>(IVTy, <a class="code" href="lib_2Target_2X86_2README_8txt.html#ac88fe1d3a61b056a4f64fbbb156a62ff">M</a>, *<span class="keyword">this</span>);</div>
<div class="line"><a name="l01413"></a><span class="lineno"> 1413</span>&#160; </div>
<div class="line"><a name="l01414"></a><span class="lineno"> 1414</span>&#160;  <span class="comment">// Allocate space for computed loop bounds as expected by the &quot;init&quot; function.</span></div>
<div class="line"><a name="l01415"></a><span class="lineno"> 1415</span>&#160;  <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.restoreIP(AllocaIP);</div>
<div class="line"><a name="l01416"></a><span class="lineno"> 1416</span>&#160;  <a class="code" href="classllvm_1_1Type.html">Type</a> *I32Type = <a class="code" href="classllvm_1_1Type.html#a30dd396c5b40cd86c1591872e574ccdf">Type::getInt32Ty</a>(<a class="code" href="lib_2Target_2X86_2README_8txt.html#ac88fe1d3a61b056a4f64fbbb156a62ff">M</a>.getContext());</div>
<div class="line"><a name="l01417"></a><span class="lineno"> 1417</span>&#160;  <a class="code" href="classllvm_1_1Value.html">Value</a> *PLastIter = <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.CreateAlloca(I32Type, <span class="keyword">nullptr</span>, <span class="stringliteral">&quot;p.lastiter&quot;</span>);</div>
<div class="line"><a name="l01418"></a><span class="lineno"> 1418</span>&#160;  <a class="code" href="classllvm_1_1Value.html">Value</a> *PLowerBound = <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.CreateAlloca(IVTy, <span class="keyword">nullptr</span>, <span class="stringliteral">&quot;p.lowerbound&quot;</span>);</div>
<div class="line"><a name="l01419"></a><span class="lineno"> 1419</span>&#160;  <a class="code" href="classllvm_1_1Value.html">Value</a> *PUpperBound = <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.CreateAlloca(IVTy, <span class="keyword">nullptr</span>, <span class="stringliteral">&quot;p.upperbound&quot;</span>);</div>
<div class="line"><a name="l01420"></a><span class="lineno"> 1420</span>&#160;  <a class="code" href="classllvm_1_1Value.html">Value</a> *PStride = <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.CreateAlloca(IVTy, <span class="keyword">nullptr</span>, <span class="stringliteral">&quot;p.stride&quot;</span>);</div>
<div class="line"><a name="l01421"></a><span class="lineno"> 1421</span>&#160; </div>
<div class="line"><a name="l01422"></a><span class="lineno"> 1422</span>&#160;  <span class="comment">// At the end of the preheader, prepare for calling the &quot;init&quot; function by</span></div>
<div class="line"><a name="l01423"></a><span class="lineno"> 1423</span>&#160;  <span class="comment">// storing the current loop bounds into the allocated space. A canonical loop</span></div>
<div class="line"><a name="l01424"></a><span class="lineno"> 1424</span>&#160;  <span class="comment">// always iterates from 0 to trip-count with step 1. Note that &quot;init&quot; expects</span></div>
<div class="line"><a name="l01425"></a><span class="lineno"> 1425</span>&#160;  <span class="comment">// and produces an inclusive upper bound.</span></div>
<div class="line"><a name="l01426"></a><span class="lineno"> 1426</span>&#160;  <a class="code" href="classllvm_1_1BasicBlock.html">BasicBlock</a> *PreHeader = CLI-&gt;<a class="code" href="classllvm_1_1CanonicalLoopInfo.html#adb9b8b6738256feb5857747cb8b87df7">getPreheader</a>();</div>
<div class="line"><a name="l01427"></a><span class="lineno"> 1427</span>&#160;  <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.SetInsertPoint(PreHeader-&gt;<a class="code" href="classllvm_1_1BasicBlock.html#a71a9eabc4318b2fc34f83b01dfee484b">getTerminator</a>());</div>
<div class="line"><a name="l01428"></a><span class="lineno"> 1428</span>&#160;  <a class="code" href="classllvm_1_1Constant.html">Constant</a> *One = <a class="code" href="classllvm_1_1ConstantInt.html#a969709dd49c28865a482d8b870f87c46">ConstantInt::get</a>(IVTy, 1);</div>
<div class="line"><a name="l01429"></a><span class="lineno"> 1429</span>&#160;  <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.CreateStore(One, PLowerBound);</div>
<div class="line"><a name="l01430"></a><span class="lineno"> 1430</span>&#160;  <a class="code" href="classllvm_1_1Value.html">Value</a> *UpperBound = CLI-&gt;<a class="code" href="classllvm_1_1CanonicalLoopInfo.html#a2077e6f8b41cd609c8e54e80767eb280">getTripCount</a>();</div>
<div class="line"><a name="l01431"></a><span class="lineno"> 1431</span>&#160;  <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.CreateStore(UpperBound, PUpperBound);</div>
<div class="line"><a name="l01432"></a><span class="lineno"> 1432</span>&#160;  <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.CreateStore(One, PStride);</div>
<div class="line"><a name="l01433"></a><span class="lineno"> 1433</span>&#160; </div>
<div class="line"><a name="l01434"></a><span class="lineno"> 1434</span>&#160;  <a class="code" href="classllvm_1_1BasicBlock.html">BasicBlock</a> *Header = CLI-&gt;<a class="code" href="classllvm_1_1CanonicalLoopInfo.html#a5ddf1dc42b9030b248b6a6ec474512dd">getHeader</a>();</div>
<div class="line"><a name="l01435"></a><span class="lineno"> 1435</span>&#160;  <a class="code" href="classllvm_1_1BasicBlock.html">BasicBlock</a> *Exit = CLI-&gt;<a class="code" href="classllvm_1_1CanonicalLoopInfo.html#a320de99bcedbb241fe54ed847482d27f">getExit</a>();</div>
<div class="line"><a name="l01436"></a><span class="lineno"> 1436</span>&#160;  <a class="code" href="classllvm_1_1BasicBlock.html">BasicBlock</a> *<a class="code" href="BasicBlockSections_8cpp.html#a5fd0741d696f28faf65b33f6c6af8fda">Cond</a> = CLI-&gt;<a class="code" href="classllvm_1_1CanonicalLoopInfo.html#a71a16b42ce34255bd7a65902d15643fb">getCond</a>();</div>
<div class="line"><a name="l01437"></a><span class="lineno"> 1437</span>&#160;  <a class="code" href="classllvm_1_1OpenMPIRBuilder.html#aafc1886793b898052f87edd7e9fdbaa3">InsertPointTy</a> AfterIP = CLI-&gt;<a class="code" href="classllvm_1_1CanonicalLoopInfo.html#a578dd7d619d0ccfc6ace07aa380022cc">getAfterIP</a>();</div>
<div class="line"><a name="l01438"></a><span class="lineno"> 1438</span>&#160; </div>
<div class="line"><a name="l01439"></a><span class="lineno"> 1439</span>&#160;  <span class="comment">// The CLI will be &quot;broken&quot; in the code below, as the loop is no longer</span></div>
<div class="line"><a name="l01440"></a><span class="lineno"> 1440</span>&#160;  <span class="comment">// a valid canonical loop.</span></div>
<div class="line"><a name="l01441"></a><span class="lineno"> 1441</span>&#160; </div>
<div class="line"><a name="l01442"></a><span class="lineno"> 1442</span>&#160;  <span class="keywordflow">if</span> (!Chunk)</div>
<div class="line"><a name="l01443"></a><span class="lineno"> 1443</span>&#160;    Chunk = One;</div>
<div class="line"><a name="l01444"></a><span class="lineno"> 1444</span>&#160; </div>
<div class="line"><a name="l01445"></a><span class="lineno"> 1445</span>&#160;  <a class="code" href="classllvm_1_1Value.html">Value</a> *ThreadNum = getOrCreateThreadID(SrcLoc);</div>
<div class="line"><a name="l01446"></a><span class="lineno"> 1446</span>&#160; </div>
<div class="line"><a name="l01447"></a><span class="lineno"> 1447</span>&#160;  <a class="code" href="classllvm_1_1Constant.html">Constant</a> *SchedulingType =</div>
<div class="line"><a name="l01448"></a><span class="lineno"> 1448</span>&#160;      <a class="code" href="classllvm_1_1ConstantInt.html#a969709dd49c28865a482d8b870f87c46">ConstantInt::get</a>(I32Type, <span class="keyword">static_cast&lt;</span><span class="keywordtype">int</span><span class="keyword">&gt;</span>(SchedType));</div>
<div class="line"><a name="l01449"></a><span class="lineno"> 1449</span>&#160; </div>
<div class="line"><a name="l01450"></a><span class="lineno"> 1450</span>&#160;  <span class="comment">// Call the &quot;init&quot; function.</span></div>
<div class="line"><a name="l01451"></a><span class="lineno"> 1451</span>&#160;  <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.CreateCall(DynamicInit,</div>
<div class="line"><a name="l01452"></a><span class="lineno"> 1452</span>&#160;                     {SrcLoc, ThreadNum, SchedulingType, <span class="comment">/* LowerBound */</span> One,</div>
<div class="line"><a name="l01453"></a><span class="lineno"> 1453</span>&#160;                      UpperBound, <span class="comment">/* step */</span> One, Chunk});</div>
<div class="line"><a name="l01454"></a><span class="lineno"> 1454</span>&#160; </div>
<div class="line"><a name="l01455"></a><span class="lineno"> 1455</span>&#160;  <span class="comment">// An outer loop around the existing one.</span></div>
<div class="line"><a name="l01456"></a><span class="lineno"> 1456</span>&#160;  <a class="code" href="classllvm_1_1BasicBlock.html">BasicBlock</a> *OuterCond = <a class="code" href="classllvm_1_1BasicBlock.html#ace940beeee97c222f836fe0ac70f6cf5">BasicBlock::Create</a>(</div>
<div class="line"><a name="l01457"></a><span class="lineno"> 1457</span>&#160;      PreHeader-&gt;<a class="code" href="classllvm_1_1BasicBlock.html#aa286a0f7f5d38488d593bb7ef0ba183e">getContext</a>(), <a class="code" href="classllvm_1_1Twine.html">Twine</a>(PreHeader-&gt;<a class="code" href="classllvm_1_1Value.html#adb5c319f5905c1d3ca9eb5df546388c5">getName</a>()) + <span class="stringliteral">&quot;.outer.cond&quot;</span>,</div>
<div class="line"><a name="l01458"></a><span class="lineno"> 1458</span>&#160;      PreHeader-&gt;<a class="code" href="classllvm_1_1BasicBlock.html#a38bee869ad41aebfef3de2641b12004c">getParent</a>());</div>
<div class="line"><a name="l01459"></a><span class="lineno"> 1459</span>&#160;  <span class="comment">// This needs to be 32-bit always, so can&#39;t use the IVTy Zero above.</span></div>
<div class="line"><a name="l01460"></a><span class="lineno"> 1460</span>&#160;  <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.SetInsertPoint(OuterCond, OuterCond-&gt;<a class="code" href="classllvm_1_1BasicBlock.html#a161fd4e9fa5367f64c2a4c9e921c3ad3">getFirstInsertionPt</a>());</div>
<div class="line"><a name="l01461"></a><span class="lineno"> 1461</span>&#160;  <a class="code" href="classllvm_1_1Value.html">Value</a> *Res =</div>
<div class="line"><a name="l01462"></a><span class="lineno"> 1462</span>&#160;      <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.CreateCall(DynamicNext, {SrcLoc, ThreadNum, PLastIter,</div>
<div class="line"><a name="l01463"></a><span class="lineno"> 1463</span>&#160;                                       PLowerBound, PUpperBound, PStride});</div>
<div class="line"><a name="l01464"></a><span class="lineno"> 1464</span>&#160;  <a class="code" href="classllvm_1_1Constant.html">Constant</a> *Zero32 = <a class="code" href="classllvm_1_1ConstantInt.html#a969709dd49c28865a482d8b870f87c46">ConstantInt::get</a>(I32Type, 0);</div>
<div class="line"><a name="l01465"></a><span class="lineno"> 1465</span>&#160;  <a class="code" href="classllvm_1_1Value.html">Value</a> *MoreWork = <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.CreateCmp(<a class="code" href="classllvm_1_1CmpInst.html#a2be3583dac92a031fa1458d4d992c78bac17897ebf2f6a6986280fc3bdf28a30a">CmpInst::ICMP_NE</a>, Res, Zero32);</div>
<div class="line"><a name="l01466"></a><span class="lineno"> 1466</span>&#160;  <a class="code" href="classllvm_1_1Value.html">Value</a> *LowerBound =</div>
<div class="line"><a name="l01467"></a><span class="lineno"> 1467</span>&#160;      <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.CreateSub(<a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.CreateLoad(IVTy, PLowerBound), One, <span class="stringliteral">&quot;lb&quot;</span>);</div>
<div class="line"><a name="l01468"></a><span class="lineno"> 1468</span>&#160;  <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.CreateCondBr(MoreWork, Header, Exit);</div>
<div class="line"><a name="l01469"></a><span class="lineno"> 1469</span>&#160; </div>
<div class="line"><a name="l01470"></a><span class="lineno"> 1470</span>&#160;  <span class="comment">// Change PHI-node in loop header to use outer cond rather than preheader,</span></div>
<div class="line"><a name="l01471"></a><span class="lineno"> 1471</span>&#160;  <span class="comment">// and set IV to the LowerBound.</span></div>
<div class="line"><a name="l01472"></a><span class="lineno"> 1472</span>&#160;  <a class="code" href="classllvm_1_1Instruction.html">Instruction</a> *Phi = &amp;Header-&gt;<a class="code" href="classllvm_1_1BasicBlock.html#ab706e7ebb1969c5e34f28bfcf2ff719e">front</a>();</div>
<div class="line"><a name="l01473"></a><span class="lineno"> 1473</span>&#160;  <span class="keyword">auto</span> *PI = cast&lt;PHINode&gt;(Phi);</div>
<div class="line"><a name="l01474"></a><span class="lineno"> 1474</span>&#160;  PI-&gt;setIncomingBlock(0, OuterCond);</div>
<div class="line"><a name="l01475"></a><span class="lineno"> 1475</span>&#160;  PI-&gt;setIncomingValue(0, LowerBound);</div>
<div class="line"><a name="l01476"></a><span class="lineno"> 1476</span>&#160; </div>
<div class="line"><a name="l01477"></a><span class="lineno"> 1477</span>&#160;  <span class="comment">// Then set the pre-header to jump to the OuterCond</span></div>
<div class="line"><a name="l01478"></a><span class="lineno"> 1478</span>&#160;  <a class="code" href="classllvm_1_1Instruction.html">Instruction</a> *<a class="code" href="namespacellvm_1_1M68kBeads.html#ac808f5f233066c25641be8a6c1e2b100a27d0e059322508a76f918503800ef1bd">Term</a> = PreHeader-&gt;<a class="code" href="classllvm_1_1BasicBlock.html#a71a9eabc4318b2fc34f83b01dfee484b">getTerminator</a>();</div>
<div class="line"><a name="l01479"></a><span class="lineno"> 1479</span>&#160;  <span class="keyword">auto</span> *Br = cast&lt;BranchInst&gt;(<a class="code" href="namespacellvm_1_1M68kBeads.html#ac808f5f233066c25641be8a6c1e2b100a27d0e059322508a76f918503800ef1bd">Term</a>);</div>
<div class="line"><a name="l01480"></a><span class="lineno"> 1480</span>&#160;  Br-&gt;setSuccessor(0, OuterCond);</div>
<div class="line"><a name="l01481"></a><span class="lineno"> 1481</span>&#160; </div>
<div class="line"><a name="l01482"></a><span class="lineno"> 1482</span>&#160;  <span class="comment">// Modify the inner condition:</span></div>
<div class="line"><a name="l01483"></a><span class="lineno"> 1483</span>&#160;  <span class="comment">// * Use the UpperBound returned from the DynamicNext call.</span></div>
<div class="line"><a name="l01484"></a><span class="lineno"> 1484</span>&#160;  <span class="comment">// * jump to the loop outer loop when done with one of the inner loops.</span></div>
<div class="line"><a name="l01485"></a><span class="lineno"> 1485</span>&#160;  <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.SetInsertPoint(<a class="code" href="BasicBlockSections_8cpp.html#a5fd0741d696f28faf65b33f6c6af8fda">Cond</a>, <a class="code" href="BasicBlockSections_8cpp.html#a5fd0741d696f28faf65b33f6c6af8fda">Cond</a>-&gt;getFirstInsertionPt());</div>
<div class="line"><a name="l01486"></a><span class="lineno"> 1486</span>&#160;  UpperBound = <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.CreateLoad(IVTy, PUpperBound, <span class="stringliteral">&quot;ub&quot;</span>);</div>
<div class="line"><a name="l01487"></a><span class="lineno"> 1487</span>&#160;  <a class="code" href="classllvm_1_1Instruction.html">Instruction</a> *Comp = &amp;*<a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.GetInsertPoint();</div>
<div class="line"><a name="l01488"></a><span class="lineno"> 1488</span>&#160;  <span class="keyword">auto</span> *CI = cast&lt;CmpInst&gt;(Comp);</div>
<div class="line"><a name="l01489"></a><span class="lineno"> 1489</span>&#160;  CI-&gt;setOperand(1, UpperBound);</div>
<div class="line"><a name="l01490"></a><span class="lineno"> 1490</span>&#160;  <span class="comment">// Redirect the inner exit to branch to outer condition.</span></div>
<div class="line"><a name="l01491"></a><span class="lineno"> 1491</span>&#160;  <a class="code" href="classllvm_1_1Instruction.html">Instruction</a> *<a class="code" href="namespacellvm_1_1MCID.html#ab357441fcd1ea1f9b0d27c12700f6023a359237c780f7c8e40645575826da8a3c">Branch</a> = &amp;<a class="code" href="BasicBlockSections_8cpp.html#a5fd0741d696f28faf65b33f6c6af8fda">Cond</a>-&gt;back();</div>
<div class="line"><a name="l01492"></a><span class="lineno"> 1492</span>&#160;  <span class="keyword">auto</span> *BI = cast&lt;BranchInst&gt;(<a class="code" href="namespacellvm_1_1MCID.html#ab357441fcd1ea1f9b0d27c12700f6023a359237c780f7c8e40645575826da8a3c">Branch</a>);</div>
<div class="line"><a name="l01493"></a><span class="lineno"> 1493</span>&#160;  <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(BI-&gt;getSuccessor(1) == Exit);</div>
<div class="line"><a name="l01494"></a><span class="lineno"> 1494</span>&#160;  BI-&gt;setSuccessor(1, OuterCond);</div>
<div class="line"><a name="l01495"></a><span class="lineno"> 1495</span>&#160; </div>
<div class="line"><a name="l01496"></a><span class="lineno"> 1496</span>&#160;  <span class="comment">// Add the barrier if requested.</span></div>
<div class="line"><a name="l01497"></a><span class="lineno"> 1497</span>&#160;  <span class="keywordflow">if</span> (NeedsBarrier) {</div>
<div class="line"><a name="l01498"></a><span class="lineno"> 1498</span>&#160;    <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.SetInsertPoint(&amp;Exit-&gt;<a class="code" href="classllvm_1_1BasicBlock.html#a8f6f9b4a94dc0907499c03a9e1b6918b">back</a>());</div>
<div class="line"><a name="l01499"></a><span class="lineno"> 1499</span>&#160;    createBarrier(<a class="code" href="structllvm_1_1OpenMPIRBuilder_1_1LocationDescription.html">LocationDescription</a>(<a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.saveIP(), Loc.<a class="code" href="structllvm_1_1OpenMPIRBuilder_1_1LocationDescription.html#ac6a58d4f9cf1978ee50af30bdb248d73">DL</a>),</div>
<div class="line"><a name="l01500"></a><span class="lineno"> 1500</span>&#160;                  omp::Directive::OMPD_for, <span class="comment">/* ForceSimpleCall */</span> <span class="keyword">false</span>,</div>
<div class="line"><a name="l01501"></a><span class="lineno"> 1501</span>&#160;                  <span class="comment">/* CheckCancelFlag */</span> <span class="keyword">false</span>);</div>
<div class="line"><a name="l01502"></a><span class="lineno"> 1502</span>&#160;  }</div>
<div class="line"><a name="l01503"></a><span class="lineno"> 1503</span>&#160; </div>
<div class="line"><a name="l01504"></a><span class="lineno"> 1504</span>&#160;  <span class="keywordflow">return</span> AfterIP;</div>
<div class="line"><a name="l01505"></a><span class="lineno"> 1505</span>&#160;}</div>
<div class="line"><a name="l01506"></a><span class="lineno"> 1506</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l01507"></a><span class="lineno"> 1507</span>&#160;<span class="comment">/// Make \p Source branch to \p Target.</span></div>
<div class="line"><a name="l01508"></a><span class="lineno"> 1508</span>&#160;<span class="comment">///</span></div>
<div class="line"><a name="l01509"></a><span class="lineno"> 1509</span>&#160;<span class="comment">/// Handles two situations:</span></div>
<div class="line"><a name="l01510"></a><span class="lineno"> 1510</span>&#160;<span class="comment">/// * \p Source already has an unconditional branch.</span></div>
<div class="line"><a name="l01511"></a><span class="lineno"> 1511</span>&#160;<span class="comment">/// * \p Source is a degenerate block (no terminator because the BB is</span></div>
<div class="line"><a name="l01512"></a><span class="lineno"> 1512</span>&#160;<span class="comment">///             the current head of the IR construction).</span></div>
<div class="line"><a name="l01513"></a><span class="lineno"><a class="line" href="OMPIRBuilder_8cpp.html#a3057c2b7e1e25de160497b1ef3985c2a"> 1513</a></span>&#160;<span class="comment"></span><span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code" href="OMPIRBuilder_8cpp.html#a3057c2b7e1e25de160497b1ef3985c2a">redirectTo</a>(<a class="code" href="classllvm_1_1BasicBlock.html">BasicBlock</a> *<a class="code" href="namespacellvm_1_1Sched.html#ac1547cccaf660851fcd6863d1e60309eac13545a6345c7d5b3c9cc8932ad3b0e9">Source</a>, <a class="code" href="classllvm_1_1BasicBlock.html">BasicBlock</a> *<a class="code" href="classllvm_1_1Target.html">Target</a>, <a class="code" href="classllvm_1_1DebugLoc.html">DebugLoc</a> <a class="code" href="AArch64SLSHardening_8cpp.html#ad467c4ab9119043f9b7750ab986be61a">DL</a>) {</div>
<div class="line"><a name="l01514"></a><span class="lineno"> 1514</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1Instruction.html">Instruction</a> *<a class="code" href="namespacellvm_1_1M68kBeads.html#ac808f5f233066c25641be8a6c1e2b100a27d0e059322508a76f918503800ef1bd">Term</a> = <a class="code" href="namespacellvm_1_1Sched.html#ac1547cccaf660851fcd6863d1e60309eac13545a6345c7d5b3c9cc8932ad3b0e9">Source</a>-&gt;getTerminator()) {</div>
<div class="line"><a name="l01515"></a><span class="lineno"> 1515</span>&#160;    <span class="keyword">auto</span> *Br = cast&lt;BranchInst&gt;(<a class="code" href="namespacellvm_1_1M68kBeads.html#ac808f5f233066c25641be8a6c1e2b100a27d0e059322508a76f918503800ef1bd">Term</a>);</div>
<div class="line"><a name="l01516"></a><span class="lineno"> 1516</span>&#160;    <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(!Br-&gt;isConditional() &amp;&amp;</div>
<div class="line"><a name="l01517"></a><span class="lineno"> 1517</span>&#160;           <span class="stringliteral">&quot;BB&#39;s terminator must be an unconditional branch (or degenerate)&quot;</span>);</div>
<div class="line"><a name="l01518"></a><span class="lineno"> 1518</span>&#160;    <a class="code" href="classllvm_1_1BasicBlock.html">BasicBlock</a> *Succ = Br-&gt;getSuccessor(0);</div>
<div class="line"><a name="l01519"></a><span class="lineno"> 1519</span>&#160;    Succ-&gt;<a class="code" href="classllvm_1_1BasicBlock.html#afe7af0c3ec2ef1f525173acd2ea4ba60">removePredecessor</a>(<a class="code" href="namespacellvm_1_1Sched.html#ac1547cccaf660851fcd6863d1e60309eac13545a6345c7d5b3c9cc8932ad3b0e9">Source</a>, <span class="comment">/*KeepOneInputPHIs=*/</span><span class="keyword">true</span>);</div>
<div class="line"><a name="l01520"></a><span class="lineno"> 1520</span>&#160;    Br-&gt;setSuccessor(0, <a class="code" href="classllvm_1_1Target.html">Target</a>);</div>
<div class="line"><a name="l01521"></a><span class="lineno"> 1521</span>&#160;    <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l01522"></a><span class="lineno"> 1522</span>&#160;  }</div>
<div class="line"><a name="l01523"></a><span class="lineno"> 1523</span>&#160; </div>
<div class="line"><a name="l01524"></a><span class="lineno"> 1524</span>&#160;  <span class="keyword">auto</span> *NewBr = <a class="code" href="classllvm_1_1BranchInst.html#a38df51256d4b415b6a817b5e1c6d4d36">BranchInst::Create</a>(<a class="code" href="classllvm_1_1Target.html">Target</a>, <a class="code" href="namespacellvm_1_1Sched.html#ac1547cccaf660851fcd6863d1e60309eac13545a6345c7d5b3c9cc8932ad3b0e9">Source</a>);</div>
<div class="line"><a name="l01525"></a><span class="lineno"> 1525</span>&#160;  NewBr-&gt;setDebugLoc(<a class="code" href="AArch64SLSHardening_8cpp.html#ad467c4ab9119043f9b7750ab986be61a">DL</a>);</div>
<div class="line"><a name="l01526"></a><span class="lineno"> 1526</span>&#160;}</div>
<div class="line"><a name="l01527"></a><span class="lineno"> 1527</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l01528"></a><span class="lineno"> 1528</span>&#160;<span class="comment">/// Redirect all edges that branch to \p OldTarget to \p NewTarget. That is,</span></div>
<div class="line"><a name="l01529"></a><span class="lineno"> 1529</span>&#160;<span class="comment">/// after this \p OldTarget will be orphaned.</span></div>
<div class="line"><a name="l01530"></a><span class="lineno"><a class="line" href="OMPIRBuilder_8cpp.html#abdcdbfc178873f5055fbcf98bad92f53"> 1530</a></span>&#160;<span class="comment"></span><span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code" href="OMPIRBuilder_8cpp.html#abdcdbfc178873f5055fbcf98bad92f53">redirectAllPredecessorsTo</a>(<a class="code" href="classllvm_1_1BasicBlock.html">BasicBlock</a> *OldTarget,</div>
<div class="line"><a name="l01531"></a><span class="lineno"> 1531</span>&#160;                                      <a class="code" href="classllvm_1_1BasicBlock.html">BasicBlock</a> *NewTarget, <a class="code" href="classllvm_1_1DebugLoc.html">DebugLoc</a> <a class="code" href="AArch64SLSHardening_8cpp.html#ad467c4ab9119043f9b7750ab986be61a">DL</a>) {</div>
<div class="line"><a name="l01532"></a><span class="lineno"> 1532</span>&#160;  <span class="keywordflow">for</span> (<a class="code" href="classllvm_1_1BasicBlock.html">BasicBlock</a> *Pred : <a class="code" href="namespacellvm.html#a8154638df88e4eaa568b67b23d463dac">make_early_inc_range</a>(<a class="code" href="namespacellvm.html#a91d9d210ba428cc67e3c2e892f24529e">predecessors</a>(OldTarget)))</div>
<div class="line"><a name="l01533"></a><span class="lineno"> 1533</span>&#160;    <a class="code" href="OMPIRBuilder_8cpp.html#a3057c2b7e1e25de160497b1ef3985c2a">redirectTo</a>(Pred, NewTarget, <a class="code" href="AArch64SLSHardening_8cpp.html#ad467c4ab9119043f9b7750ab986be61a">DL</a>);</div>
<div class="line"><a name="l01534"></a><span class="lineno"> 1534</span>&#160;}</div>
<div class="line"><a name="l01535"></a><span class="lineno"> 1535</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l01536"></a><span class="lineno"> 1536</span>&#160;<span class="comment">/// Determine which blocks in \p BBs are reachable from outside and remove the</span></div>
<div class="line"><a name="l01537"></a><span class="lineno"> 1537</span>&#160;<span class="comment">/// ones that are not reachable from the function.</span></div>
<div class="line"><a name="l01538"></a><span class="lineno"><a class="line" href="OMPIRBuilder_8cpp.html#af0ce60c4a958016f62ce78f1eda423af"> 1538</a></span>&#160;<span class="comment"></span><span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code" href="OMPIRBuilder_8cpp.html#af0ce60c4a958016f62ce78f1eda423af">removeUnusedBlocksFromParent</a>(<a class="code" href="classllvm_1_1ArrayRef.html">ArrayRef&lt;BasicBlock *&gt;</a> BBs) {</div>
<div class="line"><a name="l01539"></a><span class="lineno"> 1539</span>&#160;  <a class="code" href="classllvm_1_1SmallPtrSet.html">SmallPtrSet&lt;BasicBlock *, 6&gt;</a> BBsToErase{BBs.<a class="code" href="classllvm_1_1ArrayRef.html#aab36927882fbfdcbb860d87fd9c30da8">begin</a>(), BBs.<a class="code" href="classllvm_1_1ArrayRef.html#a7ca5197533a9c1fb8a2bd30587fcec6b">end</a>()};</div>
<div class="line"><a name="l01540"></a><span class="lineno"> 1540</span>&#160;  <span class="keyword">auto</span> HasRemainingUses = [&amp;BBsToErase](<a class="code" href="classllvm_1_1BasicBlock.html">BasicBlock</a> *<a class="code" href="lib_2CodeGen_2README_8txt.html#a09776db24cf586ec9f1e18f3bae14099">BB</a>) {</div>
<div class="line"><a name="l01541"></a><span class="lineno"> 1541</span>&#160;    <span class="keywordflow">for</span> (<a class="code" href="classllvm_1_1Use.html">Use</a> &amp;U : <a class="code" href="lib_2CodeGen_2README_8txt.html#a09776db24cf586ec9f1e18f3bae14099">BB</a>-&gt;uses()) {</div>
<div class="line"><a name="l01542"></a><span class="lineno"> 1542</span>&#160;      <span class="keyword">auto</span> *UseInst = dyn_cast&lt;Instruction&gt;(U.getUser());</div>
<div class="line"><a name="l01543"></a><span class="lineno"> 1543</span>&#160;      <span class="keywordflow">if</span> (!UseInst)</div>
<div class="line"><a name="l01544"></a><span class="lineno"> 1544</span>&#160;        <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l01545"></a><span class="lineno"> 1545</span>&#160;      <span class="keywordflow">if</span> (BBsToErase.count(UseInst-&gt;getParent()))</div>
<div class="line"><a name="l01546"></a><span class="lineno"> 1546</span>&#160;        <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l01547"></a><span class="lineno"> 1547</span>&#160;      <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l01548"></a><span class="lineno"> 1548</span>&#160;    }</div>
<div class="line"><a name="l01549"></a><span class="lineno"> 1549</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l01550"></a><span class="lineno"> 1550</span>&#160;  };</div>
<div class="line"><a name="l01551"></a><span class="lineno"> 1551</span>&#160; </div>
<div class="line"><a name="l01552"></a><span class="lineno"> 1552</span>&#160;  <span class="keywordflow">while</span> (<span class="keyword">true</span>) {</div>
<div class="line"><a name="l01553"></a><span class="lineno"> 1553</span>&#160;    <span class="keywordtype">bool</span> Changed = <span class="keyword">false</span>;</div>
<div class="line"><a name="l01554"></a><span class="lineno"> 1554</span>&#160;    <span class="keywordflow">for</span> (<a class="code" href="classllvm_1_1BasicBlock.html">BasicBlock</a> *<a class="code" href="lib_2CodeGen_2README_8txt.html#a09776db24cf586ec9f1e18f3bae14099">BB</a> : <a class="code" href="namespacellvm.html#a8154638df88e4eaa568b67b23d463dac">make_early_inc_range</a>(BBsToErase)) {</div>
<div class="line"><a name="l01555"></a><span class="lineno"> 1555</span>&#160;      <span class="keywordflow">if</span> (HasRemainingUses(<a class="code" href="lib_2CodeGen_2README_8txt.html#a09776db24cf586ec9f1e18f3bae14099">BB</a>)) {</div>
<div class="line"><a name="l01556"></a><span class="lineno"> 1556</span>&#160;        BBsToErase.erase(<a class="code" href="lib_2CodeGen_2README_8txt.html#a09776db24cf586ec9f1e18f3bae14099">BB</a>);</div>
<div class="line"><a name="l01557"></a><span class="lineno"> 1557</span>&#160;        Changed = <span class="keyword">true</span>;</div>
<div class="line"><a name="l01558"></a><span class="lineno"> 1558</span>&#160;      }</div>
<div class="line"><a name="l01559"></a><span class="lineno"> 1559</span>&#160;    }</div>
<div class="line"><a name="l01560"></a><span class="lineno"> 1560</span>&#160;    <span class="keywordflow">if</span> (!Changed)</div>
<div class="line"><a name="l01561"></a><span class="lineno"> 1561</span>&#160;      <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l01562"></a><span class="lineno"> 1562</span>&#160;  }</div>
<div class="line"><a name="l01563"></a><span class="lineno"> 1563</span>&#160; </div>
<div class="line"><a name="l01564"></a><span class="lineno"> 1564</span>&#160;  <a class="code" href="classllvm_1_1SmallVector.html">SmallVector&lt;BasicBlock *, 7&gt;</a> BBVec(BBsToErase.begin(), BBsToErase.end());</div>
<div class="line"><a name="l01565"></a><span class="lineno"> 1565</span>&#160;  <a class="code" href="namespacellvm.html#addf42fea14164ec994d4d517eaa56688">DeleteDeadBlocks</a>(BBVec);</div>
<div class="line"><a name="l01566"></a><span class="lineno"> 1566</span>&#160;}</div>
<div class="line"><a name="l01567"></a><span class="lineno"> 1567</span>&#160; </div>
<div class="line"><a name="l01568"></a><span class="lineno"> 1568</span>&#160;<a class="code" href="classllvm_1_1CanonicalLoopInfo.html">CanonicalLoopInfo</a> *</div>
<div class="line"><a name="l01569"></a><span class="lineno"><a class="line" href="classllvm_1_1OpenMPIRBuilder.html#a08610118e213de1b759470f0eafb9b18"> 1569</a></span>&#160;<a class="code" href="classllvm_1_1OpenMPIRBuilder.html#a08610118e213de1b759470f0eafb9b18">OpenMPIRBuilder::collapseLoops</a>(<a class="code" href="classllvm_1_1DebugLoc.html">DebugLoc</a> <a class="code" href="AArch64SLSHardening_8cpp.html#ad467c4ab9119043f9b7750ab986be61a">DL</a>, <a class="code" href="classllvm_1_1ArrayRef.html">ArrayRef&lt;CanonicalLoopInfo *&gt;</a> <a class="code" href="HexagonHardwareLoops_8cpp.html#ada7c1594a393ede3ce32602d64d7ddb2">Loops</a>,</div>
<div class="line"><a name="l01570"></a><span class="lineno"> 1570</span>&#160;                               <a class="code" href="classllvm_1_1OpenMPIRBuilder.html#aafc1886793b898052f87edd7e9fdbaa3">InsertPointTy</a> ComputeIP) {</div>
<div class="line"><a name="l01571"></a><span class="lineno"> 1571</span>&#160;  <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(<a class="code" href="HexagonHardwareLoops_8cpp.html#ada7c1594a393ede3ce32602d64d7ddb2">Loops</a>.size() &gt;= 1 &amp;&amp; <span class="stringliteral">&quot;At least one loop required&quot;</span>);</div>
<div class="line"><a name="l01572"></a><span class="lineno"> 1572</span>&#160;  <span class="keywordtype">size_t</span> NumLoops = <a class="code" href="HexagonHardwareLoops_8cpp.html#ada7c1594a393ede3ce32602d64d7ddb2">Loops</a>.size();</div>
<div class="line"><a name="l01573"></a><span class="lineno"> 1573</span>&#160; </div>
<div class="line"><a name="l01574"></a><span class="lineno"> 1574</span>&#160;  <span class="comment">// Nothing to do if there is already just one loop.</span></div>
<div class="line"><a name="l01575"></a><span class="lineno"> 1575</span>&#160;  <span class="keywordflow">if</span> (NumLoops == 1)</div>
<div class="line"><a name="l01576"></a><span class="lineno"> 1576</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="HexagonHardwareLoops_8cpp.html#ada7c1594a393ede3ce32602d64d7ddb2">Loops</a>.front();</div>
<div class="line"><a name="l01577"></a><span class="lineno"> 1577</span>&#160; </div>
<div class="line"><a name="l01578"></a><span class="lineno"> 1578</span>&#160;  <a class="code" href="classllvm_1_1CanonicalLoopInfo.html">CanonicalLoopInfo</a> *Outermost = <a class="code" href="HexagonHardwareLoops_8cpp.html#ada7c1594a393ede3ce32602d64d7ddb2">Loops</a>.front();</div>
<div class="line"><a name="l01579"></a><span class="lineno"> 1579</span>&#160;  <a class="code" href="classllvm_1_1CanonicalLoopInfo.html">CanonicalLoopInfo</a> *Innermost = <a class="code" href="HexagonHardwareLoops_8cpp.html#ada7c1594a393ede3ce32602d64d7ddb2">Loops</a>.back();</div>
<div class="line"><a name="l01580"></a><span class="lineno"> 1580</span>&#160;  <a class="code" href="classllvm_1_1BasicBlock.html">BasicBlock</a> *OrigPreheader = Outermost-&gt;<a class="code" href="classllvm_1_1CanonicalLoopInfo.html#adb9b8b6738256feb5857747cb8b87df7">getPreheader</a>();</div>
<div class="line"><a name="l01581"></a><span class="lineno"> 1581</span>&#160;  <a class="code" href="classllvm_1_1BasicBlock.html">BasicBlock</a> *OrigAfter = Outermost-&gt;<a class="code" href="classllvm_1_1CanonicalLoopInfo.html#aba24a232ebb4ade12a5ed4d0d54d69ad">getAfter</a>();</div>
<div class="line"><a name="l01582"></a><span class="lineno"> 1582</span>&#160;  <a class="code" href="classllvm_1_1Function.html">Function</a> *<a class="code" href="MD5_8cpp.html#a96d73bbd7af15cb1fc38c3f4a3bd82e9">F</a> = OrigPreheader-&gt;<a class="code" href="classllvm_1_1BasicBlock.html#a38bee869ad41aebfef3de2641b12004c">getParent</a>();</div>
<div class="line"><a name="l01583"></a><span class="lineno"> 1583</span>&#160; </div>
<div class="line"><a name="l01584"></a><span class="lineno"> 1584</span>&#160;  <span class="comment">// Setup the IRBuilder for inserting the trip count computation.</span></div>
<div class="line"><a name="l01585"></a><span class="lineno"> 1585</span>&#160;  <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.SetCurrentDebugLocation(<a class="code" href="AArch64SLSHardening_8cpp.html#ad467c4ab9119043f9b7750ab986be61a">DL</a>);</div>
<div class="line"><a name="l01586"></a><span class="lineno"> 1586</span>&#160;  <span class="keywordflow">if</span> (ComputeIP.isSet())</div>
<div class="line"><a name="l01587"></a><span class="lineno"> 1587</span>&#160;    <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.restoreIP(ComputeIP);</div>
<div class="line"><a name="l01588"></a><span class="lineno"> 1588</span>&#160;  <span class="keywordflow">else</span></div>
<div class="line"><a name="l01589"></a><span class="lineno"> 1589</span>&#160;    <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.restoreIP(Outermost-&gt;<a class="code" href="classllvm_1_1CanonicalLoopInfo.html#ac72ebc430ef7dcf1791c66080ddedd9d">getPreheaderIP</a>());</div>
<div class="line"><a name="l01590"></a><span class="lineno"> 1590</span>&#160; </div>
<div class="line"><a name="l01591"></a><span class="lineno"> 1591</span>&#160;  <span class="comment">// Derive the collapsed&#39; loop trip count.</span></div>
<div class="line"><a name="l01592"></a><span class="lineno"> 1592</span>&#160;  <span class="comment">// TODO: Find common/largest indvar type.</span></div>
<div class="line"><a name="l01593"></a><span class="lineno"> 1593</span>&#160;  <a class="code" href="classllvm_1_1Value.html">Value</a> *CollapsedTripCount = <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l01594"></a><span class="lineno"> 1594</span>&#160;  <span class="keywordflow">for</span> (<a class="code" href="classllvm_1_1CanonicalLoopInfo.html">CanonicalLoopInfo</a> *L : <a class="code" href="HexagonHardwareLoops_8cpp.html#ada7c1594a393ede3ce32602d64d7ddb2">Loops</a>) {</div>
<div class="line"><a name="l01595"></a><span class="lineno"> 1595</span>&#160;    <a class="code" href="classllvm_1_1Value.html">Value</a> *OrigTripCount = L-&gt;getTripCount();</div>
<div class="line"><a name="l01596"></a><span class="lineno"> 1596</span>&#160;    <span class="keywordflow">if</span> (!CollapsedTripCount) {</div>
<div class="line"><a name="l01597"></a><span class="lineno"> 1597</span>&#160;      CollapsedTripCount = OrigTripCount;</div>
<div class="line"><a name="l01598"></a><span class="lineno"> 1598</span>&#160;      <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l01599"></a><span class="lineno"> 1599</span>&#160;    }</div>
<div class="line"><a name="l01600"></a><span class="lineno"> 1600</span>&#160; </div>
<div class="line"><a name="l01601"></a><span class="lineno"> 1601</span>&#160;    <span class="comment">// TODO: Enable UndefinedSanitizer to diagnose an overflow here.</span></div>
<div class="line"><a name="l01602"></a><span class="lineno"> 1602</span>&#160;    CollapsedTripCount = <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.CreateMul(CollapsedTripCount, OrigTripCount,</div>
<div class="line"><a name="l01603"></a><span class="lineno"> 1603</span>&#160;                                           {}, <span class="comment">/*HasNUW=*/</span><span class="keyword">true</span>);</div>
<div class="line"><a name="l01604"></a><span class="lineno"> 1604</span>&#160;  }</div>
<div class="line"><a name="l01605"></a><span class="lineno"> 1605</span>&#160; </div>
<div class="line"><a name="l01606"></a><span class="lineno"> 1606</span>&#160;  <span class="comment">// Create the collapsed loop control flow.</span></div>
<div class="line"><a name="l01607"></a><span class="lineno"> 1607</span>&#160;  <a class="code" href="classllvm_1_1CanonicalLoopInfo.html">CanonicalLoopInfo</a> *Result =</div>
<div class="line"><a name="l01608"></a><span class="lineno"> 1608</span>&#160;      createLoopSkeleton(<a class="code" href="AArch64SLSHardening_8cpp.html#ad467c4ab9119043f9b7750ab986be61a">DL</a>, CollapsedTripCount, <a class="code" href="MD5_8cpp.html#a96d73bbd7af15cb1fc38c3f4a3bd82e9">F</a>,</div>
<div class="line"><a name="l01609"></a><span class="lineno"> 1609</span>&#160;                         OrigPreheader-&gt;<a class="code" href="classllvm_1_1ilist__node__with__parent.html#a26708685cc8b94fe3d7092ee080dbb34">getNextNode</a>(), OrigAfter, <span class="stringliteral">&quot;collapsed&quot;</span>);</div>
<div class="line"><a name="l01610"></a><span class="lineno"> 1610</span>&#160; </div>
<div class="line"><a name="l01611"></a><span class="lineno"> 1611</span>&#160;  <span class="comment">// Build the collapsed loop body code.</span></div>
<div class="line"><a name="l01612"></a><span class="lineno"> 1612</span>&#160;  <span class="comment">// Start with deriving the input loop induction variables from the collapsed</span></div>
<div class="line"><a name="l01613"></a><span class="lineno"> 1613</span>&#160;  <span class="comment">// one, using a divmod scheme. To preserve the original loops&#39; order, the</span></div>
<div class="line"><a name="l01614"></a><span class="lineno"> 1614</span>&#160;  <span class="comment">// innermost loop use the least significant bits.</span></div>
<div class="line"><a name="l01615"></a><span class="lineno"> 1615</span>&#160;  <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.restoreIP(Result-&gt;getBodyIP());</div>
<div class="line"><a name="l01616"></a><span class="lineno"> 1616</span>&#160; </div>
<div class="line"><a name="l01617"></a><span class="lineno"> 1617</span>&#160;  <a class="code" href="classllvm_1_1Value.html">Value</a> *Leftover = Result-&gt;getIndVar();</div>
<div class="line"><a name="l01618"></a><span class="lineno"> 1618</span>&#160;  <a class="code" href="classllvm_1_1SmallVector.html">SmallVector&lt;Value *&gt;</a> NewIndVars;</div>
<div class="line"><a name="l01619"></a><span class="lineno"> 1619</span>&#160;  NewIndVars.set_size(NumLoops);</div>
<div class="line"><a name="l01620"></a><span class="lineno"> 1620</span>&#160;  <span class="keywordflow">for</span> (<span class="keywordtype">int</span> <a class="code" href="lib_2Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a> = NumLoops - 1; <a class="code" href="lib_2Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a> &gt;= 1; --<a class="code" href="lib_2Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a>) {</div>
<div class="line"><a name="l01621"></a><span class="lineno"> 1621</span>&#160;    <a class="code" href="classllvm_1_1Value.html">Value</a> *OrigTripCount = <a class="code" href="HexagonHardwareLoops_8cpp.html#ada7c1594a393ede3ce32602d64d7ddb2">Loops</a>[<a class="code" href="lib_2Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a>]-&gt;getTripCount();</div>
<div class="line"><a name="l01622"></a><span class="lineno"> 1622</span>&#160; </div>
<div class="line"><a name="l01623"></a><span class="lineno"> 1623</span>&#160;    <a class="code" href="classllvm_1_1Value.html">Value</a> *NewIndVar = <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.CreateURem(Leftover, OrigTripCount);</div>
<div class="line"><a name="l01624"></a><span class="lineno"> 1624</span>&#160;    NewIndVars[<a class="code" href="lib_2Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a>] = NewIndVar;</div>
<div class="line"><a name="l01625"></a><span class="lineno"> 1625</span>&#160; </div>
<div class="line"><a name="l01626"></a><span class="lineno"> 1626</span>&#160;    Leftover = <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.CreateUDiv(Leftover, OrigTripCount);</div>
<div class="line"><a name="l01627"></a><span class="lineno"> 1627</span>&#160;  }</div>
<div class="line"><a name="l01628"></a><span class="lineno"> 1628</span>&#160;  <span class="comment">// Outermost loop gets all the remaining bits.</span></div>
<div class="line"><a name="l01629"></a><span class="lineno"> 1629</span>&#160;  NewIndVars[0] = Leftover;</div>
<div class="line"><a name="l01630"></a><span class="lineno"> 1630</span>&#160; </div>
<div class="line"><a name="l01631"></a><span class="lineno"> 1631</span>&#160;  <span class="comment">// Construct the loop body control flow.</span></div>
<div class="line"><a name="l01632"></a><span class="lineno"> 1632</span>&#160;  <span class="comment">// We progressively construct the branch structure following in direction of</span></div>
<div class="line"><a name="l01633"></a><span class="lineno"> 1633</span>&#160;  <span class="comment">// the control flow, from the leading in-between code, the loop nest body, the</span></div>
<div class="line"><a name="l01634"></a><span class="lineno"> 1634</span>&#160;  <span class="comment">// trailing in-between code, and rejoining the collapsed loop&#39;s latch.</span></div>
<div class="line"><a name="l01635"></a><span class="lineno"> 1635</span>&#160;  <span class="comment">// ContinueBlock and ContinuePred keep track of the source(s) of next edge. If</span></div>
<div class="line"><a name="l01636"></a><span class="lineno"> 1636</span>&#160;  <span class="comment">// the ContinueBlock is set, continue with that block. If ContinuePred, use</span></div>
<div class="line"><a name="l01637"></a><span class="lineno"> 1637</span>&#160;  <span class="comment">// its predecessors as sources.</span></div>
<div class="line"><a name="l01638"></a><span class="lineno"> 1638</span>&#160;  <a class="code" href="classllvm_1_1BasicBlock.html">BasicBlock</a> *ContinueBlock = Result-&gt;getBody();</div>
<div class="line"><a name="l01639"></a><span class="lineno"> 1639</span>&#160;  <a class="code" href="classllvm_1_1BasicBlock.html">BasicBlock</a> *ContinuePred = <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l01640"></a><span class="lineno"> 1640</span>&#160;  <span class="keyword">auto</span> ContinueWith = [&amp;ContinueBlock, &amp;ContinuePred, <a class="code" href="AArch64SLSHardening_8cpp.html#ad467c4ab9119043f9b7750ab986be61a">DL</a>](<a class="code" href="classllvm_1_1BasicBlock.html">BasicBlock</a> *Dest,</div>
<div class="line"><a name="l01641"></a><span class="lineno"> 1641</span>&#160;                                                          <a class="code" href="classllvm_1_1BasicBlock.html">BasicBlock</a> *NextSrc) {</div>
<div class="line"><a name="l01642"></a><span class="lineno"> 1642</span>&#160;    <span class="keywordflow">if</span> (ContinueBlock)</div>
<div class="line"><a name="l01643"></a><span class="lineno"> 1643</span>&#160;      <a class="code" href="OMPIRBuilder_8cpp.html#a3057c2b7e1e25de160497b1ef3985c2a">redirectTo</a>(ContinueBlock, Dest, <a class="code" href="AArch64SLSHardening_8cpp.html#ad467c4ab9119043f9b7750ab986be61a">DL</a>);</div>
<div class="line"><a name="l01644"></a><span class="lineno"> 1644</span>&#160;    <span class="keywordflow">else</span></div>
<div class="line"><a name="l01645"></a><span class="lineno"> 1645</span>&#160;      <a class="code" href="OMPIRBuilder_8cpp.html#abdcdbfc178873f5055fbcf98bad92f53">redirectAllPredecessorsTo</a>(ContinuePred, Dest, <a class="code" href="AArch64SLSHardening_8cpp.html#ad467c4ab9119043f9b7750ab986be61a">DL</a>);</div>
<div class="line"><a name="l01646"></a><span class="lineno"> 1646</span>&#160; </div>
<div class="line"><a name="l01647"></a><span class="lineno"> 1647</span>&#160;    ContinueBlock = <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l01648"></a><span class="lineno"> 1648</span>&#160;    ContinuePred = NextSrc;</div>
<div class="line"><a name="l01649"></a><span class="lineno"> 1649</span>&#160;  };</div>
<div class="line"><a name="l01650"></a><span class="lineno"> 1650</span>&#160; </div>
<div class="line"><a name="l01651"></a><span class="lineno"> 1651</span>&#160;  <span class="comment">// The code before the nested loop of each level.</span></div>
<div class="line"><a name="l01652"></a><span class="lineno"> 1652</span>&#160;  <span class="comment">// Because we are sinking it into the nest, it will be executed more often</span></div>
<div class="line"><a name="l01653"></a><span class="lineno"> 1653</span>&#160;  <span class="comment">// that the original loop. More sophisticated schemes could keep track of what</span></div>
<div class="line"><a name="l01654"></a><span class="lineno"> 1654</span>&#160;  <span class="comment">// the in-between code is and instantiate it only once per thread.</span></div>
<div class="line"><a name="l01655"></a><span class="lineno"> 1655</span>&#160;  <span class="keywordflow">for</span> (<span class="keywordtype">size_t</span> <a class="code" href="lib_2Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a> = 0; <a class="code" href="lib_2Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a> &lt; NumLoops - 1; ++<a class="code" href="lib_2Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a>)</div>
<div class="line"><a name="l01656"></a><span class="lineno"> 1656</span>&#160;    ContinueWith(<a class="code" href="HexagonHardwareLoops_8cpp.html#ada7c1594a393ede3ce32602d64d7ddb2">Loops</a>[<a class="code" href="lib_2Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a>]-&gt;getBody(), <a class="code" href="HexagonHardwareLoops_8cpp.html#ada7c1594a393ede3ce32602d64d7ddb2">Loops</a>[<a class="code" href="lib_2Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a> + 1]-&gt;getHeader());</div>
<div class="line"><a name="l01657"></a><span class="lineno"> 1657</span>&#160; </div>
<div class="line"><a name="l01658"></a><span class="lineno"> 1658</span>&#160;  <span class="comment">// Connect the loop nest body.</span></div>
<div class="line"><a name="l01659"></a><span class="lineno"> 1659</span>&#160;  ContinueWith(Innermost-&gt;<a class="code" href="classllvm_1_1CanonicalLoopInfo.html#afe4ae11bae0a25e5ddc9615ef6852aed">getBody</a>(), Innermost-&gt;<a class="code" href="classllvm_1_1CanonicalLoopInfo.html#a8ffbd9b1e60e2bb15da132610ff997ac">getLatch</a>());</div>
<div class="line"><a name="l01660"></a><span class="lineno"> 1660</span>&#160; </div>
<div class="line"><a name="l01661"></a><span class="lineno"> 1661</span>&#160;  <span class="comment">// The code after the nested loop at each level.</span></div>
<div class="line"><a name="l01662"></a><span class="lineno"> 1662</span>&#160;  <span class="keywordflow">for</span> (<span class="keywordtype">size_t</span> <a class="code" href="lib_2Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a> = NumLoops - 1; <a class="code" href="lib_2Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a> &gt; 0; --<a class="code" href="lib_2Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a>)</div>
<div class="line"><a name="l01663"></a><span class="lineno"> 1663</span>&#160;    ContinueWith(<a class="code" href="HexagonHardwareLoops_8cpp.html#ada7c1594a393ede3ce32602d64d7ddb2">Loops</a>[<a class="code" href="lib_2Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a>]-&gt;getAfter(), <a class="code" href="HexagonHardwareLoops_8cpp.html#ada7c1594a393ede3ce32602d64d7ddb2">Loops</a>[<a class="code" href="lib_2Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a> - 1]-&gt;getLatch());</div>
<div class="line"><a name="l01664"></a><span class="lineno"> 1664</span>&#160; </div>
<div class="line"><a name="l01665"></a><span class="lineno"> 1665</span>&#160;  <span class="comment">// Connect the finished loop to the collapsed loop latch.</span></div>
<div class="line"><a name="l01666"></a><span class="lineno"> 1666</span>&#160;  ContinueWith(Result-&gt;getLatch(), <span class="keyword">nullptr</span>);</div>
<div class="line"><a name="l01667"></a><span class="lineno"> 1667</span>&#160; </div>
<div class="line"><a name="l01668"></a><span class="lineno"> 1668</span>&#160;  <span class="comment">// Replace the input loops with the new collapsed loop.</span></div>
<div class="line"><a name="l01669"></a><span class="lineno"> 1669</span>&#160;  <a class="code" href="OMPIRBuilder_8cpp.html#a3057c2b7e1e25de160497b1ef3985c2a">redirectTo</a>(Outermost-&gt;<a class="code" href="classllvm_1_1CanonicalLoopInfo.html#adb9b8b6738256feb5857747cb8b87df7">getPreheader</a>(), Result-&gt;getPreheader(), <a class="code" href="AArch64SLSHardening_8cpp.html#ad467c4ab9119043f9b7750ab986be61a">DL</a>);</div>
<div class="line"><a name="l01670"></a><span class="lineno"> 1670</span>&#160;  <a class="code" href="OMPIRBuilder_8cpp.html#a3057c2b7e1e25de160497b1ef3985c2a">redirectTo</a>(Result-&gt;getAfter(), Outermost-&gt;<a class="code" href="classllvm_1_1CanonicalLoopInfo.html#aba24a232ebb4ade12a5ed4d0d54d69ad">getAfter</a>(), <a class="code" href="AArch64SLSHardening_8cpp.html#ad467c4ab9119043f9b7750ab986be61a">DL</a>);</div>
<div class="line"><a name="l01671"></a><span class="lineno"> 1671</span>&#160; </div>
<div class="line"><a name="l01672"></a><span class="lineno"> 1672</span>&#160;  <span class="comment">// Replace the input loop indvars with the derived ones.</span></div>
<div class="line"><a name="l01673"></a><span class="lineno"> 1673</span>&#160;  <span class="keywordflow">for</span> (<span class="keywordtype">size_t</span> <a class="code" href="lib_2Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a> = 0; <a class="code" href="lib_2Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a> &lt; NumLoops; ++<a class="code" href="lib_2Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a>)</div>
<div class="line"><a name="l01674"></a><span class="lineno"> 1674</span>&#160;    <a class="code" href="HexagonHardwareLoops_8cpp.html#ada7c1594a393ede3ce32602d64d7ddb2">Loops</a>[<a class="code" href="lib_2Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a>]-&gt;getIndVar()-&gt;replaceAllUsesWith(NewIndVars[<a class="code" href="lib_2Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a>]);</div>
<div class="line"><a name="l01675"></a><span class="lineno"> 1675</span>&#160; </div>
<div class="line"><a name="l01676"></a><span class="lineno"> 1676</span>&#160;  <span class="comment">// Remove unused parts of the input loops.</span></div>
<div class="line"><a name="l01677"></a><span class="lineno"> 1677</span>&#160;  <a class="code" href="classllvm_1_1SmallVector.html">SmallVector&lt;BasicBlock *, 12&gt;</a> OldControlBBs;</div>
<div class="line"><a name="l01678"></a><span class="lineno"> 1678</span>&#160;  OldControlBBs.<a class="code" href="classllvm_1_1SmallVectorImpl.html#a499ea32ca1b8d16cedfe01d1e5b08f29">reserve</a>(6 * <a class="code" href="HexagonHardwareLoops_8cpp.html#ada7c1594a393ede3ce32602d64d7ddb2">Loops</a>.size());</div>
<div class="line"><a name="l01679"></a><span class="lineno"> 1679</span>&#160;  <span class="keywordflow">for</span> (<a class="code" href="classllvm_1_1CanonicalLoopInfo.html">CanonicalLoopInfo</a> *<a class="code" href="classllvm_1_1Loop.html">Loop</a> : <a class="code" href="HexagonHardwareLoops_8cpp.html#ada7c1594a393ede3ce32602d64d7ddb2">Loops</a>)</div>
<div class="line"><a name="l01680"></a><span class="lineno"> 1680</span>&#160;    <a class="code" href="classllvm_1_1Loop.html">Loop</a>-&gt;collectControlBlocks(OldControlBBs);</div>
<div class="line"><a name="l01681"></a><span class="lineno"> 1681</span>&#160;  <a class="code" href="OMPIRBuilder_8cpp.html#af0ce60c4a958016f62ce78f1eda423af">removeUnusedBlocksFromParent</a>(OldControlBBs);</div>
<div class="line"><a name="l01682"></a><span class="lineno"> 1682</span>&#160; </div>
<div class="line"><a name="l01683"></a><span class="lineno"> 1683</span>&#160;<span class="preprocessor">#ifndef NDEBUG</span></div>
<div class="line"><a name="l01684"></a><span class="lineno"> 1684</span>&#160;  Result-&gt;assertOK();</div>
<div class="line"><a name="l01685"></a><span class="lineno"> 1685</span>&#160;<span class="preprocessor">#endif</span></div>
<div class="line"><a name="l01686"></a><span class="lineno"> 1686</span>&#160;  <span class="keywordflow">return</span> Result;</div>
<div class="line"><a name="l01687"></a><span class="lineno"> 1687</span>&#160;}</div>
<div class="line"><a name="l01688"></a><span class="lineno"> 1688</span>&#160; </div>
<div class="line"><a name="l01689"></a><span class="lineno"> 1689</span>&#160;std::vector&lt;CanonicalLoopInfo *&gt;</div>
<div class="line"><a name="l01690"></a><span class="lineno"><a class="line" href="classllvm_1_1OpenMPIRBuilder.html#a76e12ec076e7af4be7b8b77a5d53d3fc"> 1690</a></span>&#160;<a class="code" href="classllvm_1_1OpenMPIRBuilder.html#a76e12ec076e7af4be7b8b77a5d53d3fc">OpenMPIRBuilder::tileLoops</a>(<a class="code" href="classllvm_1_1DebugLoc.html">DebugLoc</a> <a class="code" href="AArch64SLSHardening_8cpp.html#ad467c4ab9119043f9b7750ab986be61a">DL</a>, <a class="code" href="classllvm_1_1ArrayRef.html">ArrayRef&lt;CanonicalLoopInfo *&gt;</a> <a class="code" href="HexagonHardwareLoops_8cpp.html#ada7c1594a393ede3ce32602d64d7ddb2">Loops</a>,</div>
<div class="line"><a name="l01691"></a><span class="lineno"> 1691</span>&#160;                           <a class="code" href="classllvm_1_1ArrayRef.html">ArrayRef&lt;Value *&gt;</a> TileSizes) {</div>
<div class="line"><a name="l01692"></a><span class="lineno"> 1692</span>&#160;  <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(TileSizes.<a class="code" href="classllvm_1_1ArrayRef.html#a85ffb6531d4cda988ea81f18d4e56fb7">size</a>() == <a class="code" href="HexagonHardwareLoops_8cpp.html#ada7c1594a393ede3ce32602d64d7ddb2">Loops</a>.size() &amp;&amp;</div>
<div class="line"><a name="l01693"></a><span class="lineno"> 1693</span>&#160;         <span class="stringliteral">&quot;Must pass as many tile sizes as there are loops&quot;</span>);</div>
<div class="line"><a name="l01694"></a><span class="lineno"> 1694</span>&#160;  <span class="keywordtype">int</span> NumLoops = <a class="code" href="HexagonHardwareLoops_8cpp.html#ada7c1594a393ede3ce32602d64d7ddb2">Loops</a>.size();</div>
<div class="line"><a name="l01695"></a><span class="lineno"> 1695</span>&#160;  <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(NumLoops &gt;= 1 &amp;&amp; <span class="stringliteral">&quot;At least one loop to tile required&quot;</span>);</div>
<div class="line"><a name="l01696"></a><span class="lineno"> 1696</span>&#160; </div>
<div class="line"><a name="l01697"></a><span class="lineno"> 1697</span>&#160;  <a class="code" href="classllvm_1_1CanonicalLoopInfo.html">CanonicalLoopInfo</a> *OutermostLoop = <a class="code" href="HexagonHardwareLoops_8cpp.html#ada7c1594a393ede3ce32602d64d7ddb2">Loops</a>.front();</div>
<div class="line"><a name="l01698"></a><span class="lineno"> 1698</span>&#160;  <a class="code" href="classllvm_1_1CanonicalLoopInfo.html">CanonicalLoopInfo</a> *InnermostLoop = <a class="code" href="HexagonHardwareLoops_8cpp.html#ada7c1594a393ede3ce32602d64d7ddb2">Loops</a>.back();</div>
<div class="line"><a name="l01699"></a><span class="lineno"> 1699</span>&#160;  <a class="code" href="classllvm_1_1Function.html">Function</a> *<a class="code" href="MD5_8cpp.html#a96d73bbd7af15cb1fc38c3f4a3bd82e9">F</a> = OutermostLoop-&gt;<a class="code" href="classllvm_1_1CanonicalLoopInfo.html#afe4ae11bae0a25e5ddc9615ef6852aed">getBody</a>()-&gt;<a class="code" href="classllvm_1_1BasicBlock.html#a38bee869ad41aebfef3de2641b12004c">getParent</a>();</div>
<div class="line"><a name="l01700"></a><span class="lineno"> 1700</span>&#160;  <a class="code" href="classllvm_1_1BasicBlock.html">BasicBlock</a> *InnerEnter = InnermostLoop-&gt;<a class="code" href="classllvm_1_1CanonicalLoopInfo.html#afe4ae11bae0a25e5ddc9615ef6852aed">getBody</a>();</div>
<div class="line"><a name="l01701"></a><span class="lineno"> 1701</span>&#160;  <a class="code" href="classllvm_1_1BasicBlock.html">BasicBlock</a> *InnerLatch = InnermostLoop-&gt;<a class="code" href="classllvm_1_1CanonicalLoopInfo.html#a8ffbd9b1e60e2bb15da132610ff997ac">getLatch</a>();</div>
<div class="line"><a name="l01702"></a><span class="lineno"> 1702</span>&#160; </div>
<div class="line"><a name="l01703"></a><span class="lineno"> 1703</span>&#160;  <span class="comment">// Collect original trip counts and induction variable to be accessible by</span></div>
<div class="line"><a name="l01704"></a><span class="lineno"> 1704</span>&#160;  <span class="comment">// index. Also, the structure of the original loops is not preserved during</span></div>
<div class="line"><a name="l01705"></a><span class="lineno"> 1705</span>&#160;  <span class="comment">// the construction of the tiled loops, so do it before we scavenge the BBs of</span></div>
<div class="line"><a name="l01706"></a><span class="lineno"> 1706</span>&#160;  <span class="comment">// any original CanonicalLoopInfo.</span></div>
<div class="line"><a name="l01707"></a><span class="lineno"> 1707</span>&#160;  <a class="code" href="classllvm_1_1SmallVector.html">SmallVector&lt;Value *, 4&gt;</a> OrigTripCounts, OrigIndVars;</div>
<div class="line"><a name="l01708"></a><span class="lineno"> 1708</span>&#160;  <span class="keywordflow">for</span> (<a class="code" href="classllvm_1_1CanonicalLoopInfo.html">CanonicalLoopInfo</a> *L : <a class="code" href="HexagonHardwareLoops_8cpp.html#ada7c1594a393ede3ce32602d64d7ddb2">Loops</a>) {</div>
<div class="line"><a name="l01709"></a><span class="lineno"> 1709</span>&#160;    OrigTripCounts.push_back(L-&gt;getTripCount());</div>
<div class="line"><a name="l01710"></a><span class="lineno"> 1710</span>&#160;    OrigIndVars.push_back(L-&gt;getIndVar());</div>
<div class="line"><a name="l01711"></a><span class="lineno"> 1711</span>&#160;  }</div>
<div class="line"><a name="l01712"></a><span class="lineno"> 1712</span>&#160; </div>
<div class="line"><a name="l01713"></a><span class="lineno"> 1713</span>&#160;  <span class="comment">// Collect the code between loop headers. These may contain SSA definitions</span></div>
<div class="line"><a name="l01714"></a><span class="lineno"> 1714</span>&#160;  <span class="comment">// that are used in the loop nest body. To be usable with in the innermost</span></div>
<div class="line"><a name="l01715"></a><span class="lineno"> 1715</span>&#160;  <span class="comment">// body, these BasicBlocks will be sunk into the loop nest body. That is,</span></div>
<div class="line"><a name="l01716"></a><span class="lineno"> 1716</span>&#160;  <span class="comment">// these instructions may be executed more often than before the tiling.</span></div>
<div class="line"><a name="l01717"></a><span class="lineno"> 1717</span>&#160;  <span class="comment">// TODO: It would be sufficient to only sink them into body of the</span></div>
<div class="line"><a name="l01718"></a><span class="lineno"> 1718</span>&#160;  <span class="comment">// corresponding tile loop.</span></div>
<div class="line"><a name="l01719"></a><span class="lineno"> 1719</span>&#160;  <a class="code" href="classllvm_1_1SmallVector.html">SmallVector&lt;std::pair&lt;BasicBlock *, BasicBlock *&gt;</a>, 4&gt; InbetweenCode;</div>
<div class="line"><a name="l01720"></a><span class="lineno"> 1720</span>&#160;  <span class="keywordflow">for</span> (<span class="keywordtype">int</span> <a class="code" href="lib_2Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a> = 0; <a class="code" href="lib_2Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a> &lt; NumLoops - 1; ++<a class="code" href="lib_2Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a>) {</div>
<div class="line"><a name="l01721"></a><span class="lineno"> 1721</span>&#160;    <a class="code" href="classllvm_1_1CanonicalLoopInfo.html">CanonicalLoopInfo</a> *Surrounding = <a class="code" href="HexagonHardwareLoops_8cpp.html#ada7c1594a393ede3ce32602d64d7ddb2">Loops</a>[<a class="code" href="lib_2Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a>];</div>
<div class="line"><a name="l01722"></a><span class="lineno"> 1722</span>&#160;    <a class="code" href="classllvm_1_1CanonicalLoopInfo.html">CanonicalLoopInfo</a> *Nested = <a class="code" href="HexagonHardwareLoops_8cpp.html#ada7c1594a393ede3ce32602d64d7ddb2">Loops</a>[<a class="code" href="lib_2Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a> + 1];</div>
<div class="line"><a name="l01723"></a><span class="lineno"> 1723</span>&#160; </div>
<div class="line"><a name="l01724"></a><span class="lineno"> 1724</span>&#160;    <a class="code" href="classllvm_1_1BasicBlock.html">BasicBlock</a> *EnterBB = Surrounding-&gt;<a class="code" href="classllvm_1_1CanonicalLoopInfo.html#afe4ae11bae0a25e5ddc9615ef6852aed">getBody</a>();</div>
<div class="line"><a name="l01725"></a><span class="lineno"> 1725</span>&#160;    <a class="code" href="classllvm_1_1BasicBlock.html">BasicBlock</a> *ExitBB = Nested-&gt;<a class="code" href="classllvm_1_1CanonicalLoopInfo.html#a5ddf1dc42b9030b248b6a6ec474512dd">getHeader</a>();</div>
<div class="line"><a name="l01726"></a><span class="lineno"> 1726</span>&#160;    InbetweenCode.<a class="code" href="classllvm_1_1SmallVectorImpl.html#a396fcfee6914c76974b73c3d203da6a5">emplace_back</a>(EnterBB, ExitBB);</div>
<div class="line"><a name="l01727"></a><span class="lineno"> 1727</span>&#160;  }</div>
<div class="line"><a name="l01728"></a><span class="lineno"> 1728</span>&#160; </div>
<div class="line"><a name="l01729"></a><span class="lineno"> 1729</span>&#160;  <span class="comment">// Compute the trip counts of the floor loops.</span></div>
<div class="line"><a name="l01730"></a><span class="lineno"> 1730</span>&#160;  <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.SetCurrentDebugLocation(<a class="code" href="AArch64SLSHardening_8cpp.html#ad467c4ab9119043f9b7750ab986be61a">DL</a>);</div>
<div class="line"><a name="l01731"></a><span class="lineno"> 1731</span>&#160;  <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.restoreIP(OutermostLoop-&gt;<a class="code" href="classllvm_1_1CanonicalLoopInfo.html#ac72ebc430ef7dcf1791c66080ddedd9d">getPreheaderIP</a>());</div>
<div class="line"><a name="l01732"></a><span class="lineno"> 1732</span>&#160;  <a class="code" href="classllvm_1_1SmallVector.html">SmallVector&lt;Value *, 4&gt;</a> FloorCount, FloorRems;</div>
<div class="line"><a name="l01733"></a><span class="lineno"> 1733</span>&#160;  <span class="keywordflow">for</span> (<span class="keywordtype">int</span> <a class="code" href="lib_2Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a> = 0; <a class="code" href="lib_2Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a> &lt; NumLoops; ++<a class="code" href="lib_2Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a>) {</div>
<div class="line"><a name="l01734"></a><span class="lineno"> 1734</span>&#160;    <a class="code" href="classllvm_1_1Value.html">Value</a> *<a class="code" href="LowerMatrixIntrinsics_8cpp.html#a7f6b2a94f0c353d428cf953c17fb7da0">TileSize</a> = TileSizes[<a class="code" href="lib_2Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a>];</div>
<div class="line"><a name="l01735"></a><span class="lineno"> 1735</span>&#160;    <a class="code" href="classllvm_1_1Value.html">Value</a> *OrigTripCount = OrigTripCounts[<a class="code" href="lib_2Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a>];</div>
<div class="line"><a name="l01736"></a><span class="lineno"> 1736</span>&#160;    <a class="code" href="classllvm_1_1Type.html">Type</a> *IVType = OrigTripCount-&gt;<a class="code" href="classllvm_1_1Value.html#a6393a2d4fe7e10b28a0dcc35f881567b">getType</a>();</div>
<div class="line"><a name="l01737"></a><span class="lineno"> 1737</span>&#160; </div>
<div class="line"><a name="l01738"></a><span class="lineno"> 1738</span>&#160;    <a class="code" href="classllvm_1_1Value.html">Value</a> *FloorTripCount = <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.CreateUDiv(OrigTripCount, <a class="code" href="LowerMatrixIntrinsics_8cpp.html#a7f6b2a94f0c353d428cf953c17fb7da0">TileSize</a>);</div>
<div class="line"><a name="l01739"></a><span class="lineno"> 1739</span>&#160;    <a class="code" href="classllvm_1_1Value.html">Value</a> *FloorTripRem = <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.CreateURem(OrigTripCount, <a class="code" href="LowerMatrixIntrinsics_8cpp.html#a7f6b2a94f0c353d428cf953c17fb7da0">TileSize</a>);</div>
<div class="line"><a name="l01740"></a><span class="lineno"> 1740</span>&#160; </div>
<div class="line"><a name="l01741"></a><span class="lineno"> 1741</span>&#160;    <span class="comment">// 0 if tripcount divides the tilesize, 1 otherwise.</span></div>
<div class="line"><a name="l01742"></a><span class="lineno"> 1742</span>&#160;    <span class="comment">// 1 means we need an additional iteration for a partial tile.</span></div>
<div class="line"><a name="l01743"></a><span class="lineno"> 1743</span>&#160;    <span class="comment">//</span></div>
<div class="line"><a name="l01744"></a><span class="lineno"> 1744</span>&#160;    <span class="comment">// Unfortunately we cannot just use the roundup-formula</span></div>
<div class="line"><a name="l01745"></a><span class="lineno"> 1745</span>&#160;    <span class="comment">//   (tripcount + tilesize - 1)/tilesize</span></div>
<div class="line"><a name="l01746"></a><span class="lineno"> 1746</span>&#160;    <span class="comment">// because the summation might overflow. We do not want introduce undefined</span></div>
<div class="line"><a name="l01747"></a><span class="lineno"> 1747</span>&#160;    <span class="comment">// behavior when the untiled loop nest did not.</span></div>
<div class="line"><a name="l01748"></a><span class="lineno"> 1748</span>&#160;    <a class="code" href="classllvm_1_1Value.html">Value</a> *FloorTripOverflow =</div>
<div class="line"><a name="l01749"></a><span class="lineno"> 1749</span>&#160;        <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.CreateICmpNE(FloorTripRem, <a class="code" href="classllvm_1_1ConstantInt.html#a969709dd49c28865a482d8b870f87c46">ConstantInt::get</a>(IVType, 0));</div>
<div class="line"><a name="l01750"></a><span class="lineno"> 1750</span>&#160; </div>
<div class="line"><a name="l01751"></a><span class="lineno"> 1751</span>&#160;    FloorTripOverflow = <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.CreateZExt(FloorTripOverflow, IVType);</div>
<div class="line"><a name="l01752"></a><span class="lineno"> 1752</span>&#160;    FloorTripCount =</div>
<div class="line"><a name="l01753"></a><span class="lineno"> 1753</span>&#160;        <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.CreateAdd(FloorTripCount, FloorTripOverflow,</div>
<div class="line"><a name="l01754"></a><span class="lineno"> 1754</span>&#160;                          <span class="stringliteral">&quot;omp_floor&quot;</span> + <a class="code" href="classllvm_1_1Twine.html">Twine</a>(<a class="code" href="lib_2Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a>) + <span class="stringliteral">&quot;.tripcount&quot;</span>, <span class="keyword">true</span>);</div>
<div class="line"><a name="l01755"></a><span class="lineno"> 1755</span>&#160; </div>
<div class="line"><a name="l01756"></a><span class="lineno"> 1756</span>&#160;    <span class="comment">// Remember some values for later use.</span></div>
<div class="line"><a name="l01757"></a><span class="lineno"> 1757</span>&#160;    FloorCount.push_back(FloorTripCount);</div>
<div class="line"><a name="l01758"></a><span class="lineno"> 1758</span>&#160;    FloorRems.push_back(FloorTripRem);</div>
<div class="line"><a name="l01759"></a><span class="lineno"> 1759</span>&#160;  }</div>
<div class="line"><a name="l01760"></a><span class="lineno"> 1760</span>&#160; </div>
<div class="line"><a name="l01761"></a><span class="lineno"> 1761</span>&#160;  <span class="comment">// Generate the new loop nest, from the outermost to the innermost.</span></div>
<div class="line"><a name="l01762"></a><span class="lineno"> 1762</span>&#160;  std::vector&lt;CanonicalLoopInfo *&gt; Result;</div>
<div class="line"><a name="l01763"></a><span class="lineno"> 1763</span>&#160;  Result.reserve(NumLoops * 2);</div>
<div class="line"><a name="l01764"></a><span class="lineno"> 1764</span>&#160; </div>
<div class="line"><a name="l01765"></a><span class="lineno"> 1765</span>&#160;  <span class="comment">// The basic block of the surrounding loop that enters the nest generated</span></div>
<div class="line"><a name="l01766"></a><span class="lineno"> 1766</span>&#160;  <span class="comment">// loop.</span></div>
<div class="line"><a name="l01767"></a><span class="lineno"> 1767</span>&#160;  <a class="code" href="classllvm_1_1BasicBlock.html">BasicBlock</a> *Enter = OutermostLoop-&gt;<a class="code" href="classllvm_1_1CanonicalLoopInfo.html#adb9b8b6738256feb5857747cb8b87df7">getPreheader</a>();</div>
<div class="line"><a name="l01768"></a><span class="lineno"> 1768</span>&#160; </div>
<div class="line"><a name="l01769"></a><span class="lineno"> 1769</span>&#160;  <span class="comment">// The basic block of the surrounding loop where the inner code should</span></div>
<div class="line"><a name="l01770"></a><span class="lineno"> 1770</span>&#160;  <span class="comment">// continue.</span></div>
<div class="line"><a name="l01771"></a><span class="lineno"> 1771</span>&#160;  <a class="code" href="classllvm_1_1BasicBlock.html">BasicBlock</a> *Continue = OutermostLoop-&gt;<a class="code" href="classllvm_1_1CanonicalLoopInfo.html#aba24a232ebb4ade12a5ed4d0d54d69ad">getAfter</a>();</div>
<div class="line"><a name="l01772"></a><span class="lineno"> 1772</span>&#160; </div>
<div class="line"><a name="l01773"></a><span class="lineno"> 1773</span>&#160;  <span class="comment">// Where the next loop basic block should be inserted.</span></div>
<div class="line"><a name="l01774"></a><span class="lineno"> 1774</span>&#160;  <a class="code" href="classllvm_1_1BasicBlock.html">BasicBlock</a> *OutroInsertBefore = InnermostLoop-&gt;<a class="code" href="classllvm_1_1CanonicalLoopInfo.html#a320de99bcedbb241fe54ed847482d27f">getExit</a>();</div>
<div class="line"><a name="l01775"></a><span class="lineno"> 1775</span>&#160; </div>
<div class="line"><a name="l01776"></a><span class="lineno"> 1776</span>&#160;  <span class="keyword">auto</span> EmbeddNewLoop =</div>
<div class="line"><a name="l01777"></a><span class="lineno"> 1777</span>&#160;      [<span class="keyword">this</span>, <a class="code" href="AArch64SLSHardening_8cpp.html#ad467c4ab9119043f9b7750ab986be61a">DL</a>, <a class="code" href="MD5_8cpp.html#a96d73bbd7af15cb1fc38c3f4a3bd82e9">F</a>, InnerEnter, &amp;Enter, &amp;Continue, &amp;OutroInsertBefore](</div>
<div class="line"><a name="l01778"></a><span class="lineno"> 1778</span>&#160;          <a class="code" href="classllvm_1_1Value.html">Value</a> *TripCount, <span class="keyword">const</span> <a class="code" href="classllvm_1_1Twine.html">Twine</a> &amp;<a class="code" href="namespacellvm_1_1GraphProgram.html#a0ad4685976f8c4d4a697a53fbe05d10b">Name</a>) -&gt; <a class="code" href="classllvm_1_1CanonicalLoopInfo.html">CanonicalLoopInfo</a> * {</div>
<div class="line"><a name="l01779"></a><span class="lineno"> 1779</span>&#160;    <a class="code" href="classllvm_1_1CanonicalLoopInfo.html">CanonicalLoopInfo</a> *EmbeddedLoop = createLoopSkeleton(</div>
<div class="line"><a name="l01780"></a><span class="lineno"> 1780</span>&#160;        <a class="code" href="AArch64SLSHardening_8cpp.html#ad467c4ab9119043f9b7750ab986be61a">DL</a>, TripCount, <a class="code" href="MD5_8cpp.html#a96d73bbd7af15cb1fc38c3f4a3bd82e9">F</a>, InnerEnter, OutroInsertBefore, <a class="code" href="namespacellvm_1_1GraphProgram.html#a0ad4685976f8c4d4a697a53fbe05d10b">Name</a>);</div>
<div class="line"><a name="l01781"></a><span class="lineno"> 1781</span>&#160;    <a class="code" href="OMPIRBuilder_8cpp.html#a3057c2b7e1e25de160497b1ef3985c2a">redirectTo</a>(Enter, EmbeddedLoop-&gt;<a class="code" href="classllvm_1_1CanonicalLoopInfo.html#adb9b8b6738256feb5857747cb8b87df7">getPreheader</a>(), <a class="code" href="AArch64SLSHardening_8cpp.html#ad467c4ab9119043f9b7750ab986be61a">DL</a>);</div>
<div class="line"><a name="l01782"></a><span class="lineno"> 1782</span>&#160;    <a class="code" href="OMPIRBuilder_8cpp.html#a3057c2b7e1e25de160497b1ef3985c2a">redirectTo</a>(EmbeddedLoop-&gt;<a class="code" href="classllvm_1_1CanonicalLoopInfo.html#aba24a232ebb4ade12a5ed4d0d54d69ad">getAfter</a>(), Continue, <a class="code" href="AArch64SLSHardening_8cpp.html#ad467c4ab9119043f9b7750ab986be61a">DL</a>);</div>
<div class="line"><a name="l01783"></a><span class="lineno"> 1783</span>&#160; </div>
<div class="line"><a name="l01784"></a><span class="lineno"> 1784</span>&#160;    <span class="comment">// Setup the position where the next embedded loop connects to this loop.</span></div>
<div class="line"><a name="l01785"></a><span class="lineno"> 1785</span>&#160;    Enter = EmbeddedLoop-&gt;<a class="code" href="classllvm_1_1CanonicalLoopInfo.html#afe4ae11bae0a25e5ddc9615ef6852aed">getBody</a>();</div>
<div class="line"><a name="l01786"></a><span class="lineno"> 1786</span>&#160;    Continue = EmbeddedLoop-&gt;<a class="code" href="classllvm_1_1CanonicalLoopInfo.html#a8ffbd9b1e60e2bb15da132610ff997ac">getLatch</a>();</div>
<div class="line"><a name="l01787"></a><span class="lineno"> 1787</span>&#160;    OutroInsertBefore = EmbeddedLoop-&gt;<a class="code" href="classllvm_1_1CanonicalLoopInfo.html#a8ffbd9b1e60e2bb15da132610ff997ac">getLatch</a>();</div>
<div class="line"><a name="l01788"></a><span class="lineno"> 1788</span>&#160;    <span class="keywordflow">return</span> EmbeddedLoop;</div>
<div class="line"><a name="l01789"></a><span class="lineno"> 1789</span>&#160;  };</div>
<div class="line"><a name="l01790"></a><span class="lineno"> 1790</span>&#160; </div>
<div class="line"><a name="l01791"></a><span class="lineno"> 1791</span>&#160;  <span class="keyword">auto</span> EmbeddNewLoops = [&amp;Result, &amp;EmbeddNewLoop](<a class="code" href="classllvm_1_1ArrayRef.html">ArrayRef&lt;Value *&gt;</a> TripCounts,</div>
<div class="line"><a name="l01792"></a><span class="lineno"> 1792</span>&#160;                                                  <span class="keyword">const</span> <a class="code" href="classllvm_1_1Twine.html">Twine</a> &amp;NameBase) {</div>
<div class="line"><a name="l01793"></a><span class="lineno"> 1793</span>&#160;    <span class="keywordflow">for</span> (<span class="keyword">auto</span> <a class="code" href="README-SSE_8txt.html#a63d206a063eefcdf8c318ded97b65020">P</a> : <a class="code" href="namespacellvm.html#a7b2175e18ff52174fad26b6b68818564">enumerate</a>(TripCounts)) {</div>
<div class="line"><a name="l01794"></a><span class="lineno"> 1794</span>&#160;      <a class="code" href="classllvm_1_1CanonicalLoopInfo.html">CanonicalLoopInfo</a> *EmbeddedLoop =</div>
<div class="line"><a name="l01795"></a><span class="lineno"> 1795</span>&#160;          EmbeddNewLoop(<a class="code" href="README-SSE_8txt.html#a63d206a063eefcdf8c318ded97b65020">P</a>.value(), NameBase + <a class="code" href="classllvm_1_1Twine.html">Twine</a>(<a class="code" href="README-SSE_8txt.html#a63d206a063eefcdf8c318ded97b65020">P</a>.index()));</div>
<div class="line"><a name="l01796"></a><span class="lineno"> 1796</span>&#160;      Result.push_back(EmbeddedLoop);</div>
<div class="line"><a name="l01797"></a><span class="lineno"> 1797</span>&#160;    }</div>
<div class="line"><a name="l01798"></a><span class="lineno"> 1798</span>&#160;  };</div>
<div class="line"><a name="l01799"></a><span class="lineno"> 1799</span>&#160; </div>
<div class="line"><a name="l01800"></a><span class="lineno"> 1800</span>&#160;  EmbeddNewLoops(FloorCount, <span class="stringliteral">&quot;floor&quot;</span>);</div>
<div class="line"><a name="l01801"></a><span class="lineno"> 1801</span>&#160; </div>
<div class="line"><a name="l01802"></a><span class="lineno"> 1802</span>&#160;  <span class="comment">// Within the innermost floor loop, emit the code that computes the tile</span></div>
<div class="line"><a name="l01803"></a><span class="lineno"> 1803</span>&#160;  <span class="comment">// sizes.</span></div>
<div class="line"><a name="l01804"></a><span class="lineno"> 1804</span>&#160;  <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.SetInsertPoint(Enter-&gt;getTerminator());</div>
<div class="line"><a name="l01805"></a><span class="lineno"> 1805</span>&#160;  <a class="code" href="classllvm_1_1SmallVector.html">SmallVector&lt;Value *, 4&gt;</a> TileCounts;</div>
<div class="line"><a name="l01806"></a><span class="lineno"> 1806</span>&#160;  <span class="keywordflow">for</span> (<span class="keywordtype">int</span> <a class="code" href="lib_2Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a> = 0; <a class="code" href="lib_2Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a> &lt; NumLoops; ++<a class="code" href="lib_2Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a>) {</div>
<div class="line"><a name="l01807"></a><span class="lineno"> 1807</span>&#160;    <a class="code" href="classllvm_1_1CanonicalLoopInfo.html">CanonicalLoopInfo</a> *FloorLoop = Result[<a class="code" href="lib_2Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a>];</div>
<div class="line"><a name="l01808"></a><span class="lineno"> 1808</span>&#160;    <a class="code" href="classllvm_1_1Value.html">Value</a> *<a class="code" href="LowerMatrixIntrinsics_8cpp.html#a7f6b2a94f0c353d428cf953c17fb7da0">TileSize</a> = TileSizes[<a class="code" href="lib_2Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a>];</div>
<div class="line"><a name="l01809"></a><span class="lineno"> 1809</span>&#160; </div>
<div class="line"><a name="l01810"></a><span class="lineno"> 1810</span>&#160;    <a class="code" href="classllvm_1_1Value.html">Value</a> *FloorIsEpilogue =</div>
<div class="line"><a name="l01811"></a><span class="lineno"> 1811</span>&#160;        <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.CreateICmpEQ(FloorLoop-&gt;<a class="code" href="classllvm_1_1CanonicalLoopInfo.html#a230d812cc988ec3a48bf5206d3d72b88">getIndVar</a>(), FloorCount[<a class="code" href="lib_2Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a>]);</div>
<div class="line"><a name="l01812"></a><span class="lineno"> 1812</span>&#160;    <a class="code" href="classllvm_1_1Value.html">Value</a> *TileTripCount =</div>
<div class="line"><a name="l01813"></a><span class="lineno"> 1813</span>&#160;        <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.CreateSelect(FloorIsEpilogue, FloorRems[<a class="code" href="lib_2Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a>], <a class="code" href="LowerMatrixIntrinsics_8cpp.html#a7f6b2a94f0c353d428cf953c17fb7da0">TileSize</a>);</div>
<div class="line"><a name="l01814"></a><span class="lineno"> 1814</span>&#160; </div>
<div class="line"><a name="l01815"></a><span class="lineno"> 1815</span>&#160;    TileCounts.push_back(TileTripCount);</div>
<div class="line"><a name="l01816"></a><span class="lineno"> 1816</span>&#160;  }</div>
<div class="line"><a name="l01817"></a><span class="lineno"> 1817</span>&#160; </div>
<div class="line"><a name="l01818"></a><span class="lineno"> 1818</span>&#160;  <span class="comment">// Create the tile loops.</span></div>
<div class="line"><a name="l01819"></a><span class="lineno"> 1819</span>&#160;  EmbeddNewLoops(TileCounts, <span class="stringliteral">&quot;tile&quot;</span>);</div>
<div class="line"><a name="l01820"></a><span class="lineno"> 1820</span>&#160; </div>
<div class="line"><a name="l01821"></a><span class="lineno"> 1821</span>&#160;  <span class="comment">// Insert the inbetween code into the body.</span></div>
<div class="line"><a name="l01822"></a><span class="lineno"> 1822</span>&#160;  <a class="code" href="classllvm_1_1BasicBlock.html">BasicBlock</a> *BodyEnter = Enter;</div>
<div class="line"><a name="l01823"></a><span class="lineno"> 1823</span>&#160;  <a class="code" href="classllvm_1_1BasicBlock.html">BasicBlock</a> *BodyEntered = <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l01824"></a><span class="lineno"> 1824</span>&#160;  <span class="keywordflow">for</span> (std::pair&lt;BasicBlock *, BasicBlock *&gt; <a class="code" href="README-SSE_8txt.html#a63d206a063eefcdf8c318ded97b65020">P</a> : InbetweenCode) {</div>
<div class="line"><a name="l01825"></a><span class="lineno"> 1825</span>&#160;    <a class="code" href="classllvm_1_1BasicBlock.html">BasicBlock</a> *EnterBB = <a class="code" href="README-SSE_8txt.html#a63d206a063eefcdf8c318ded97b65020">P</a>.first;</div>
<div class="line"><a name="l01826"></a><span class="lineno"> 1826</span>&#160;    <a class="code" href="classllvm_1_1BasicBlock.html">BasicBlock</a> *ExitBB = <a class="code" href="README-SSE_8txt.html#a63d206a063eefcdf8c318ded97b65020">P</a>.second;</div>
<div class="line"><a name="l01827"></a><span class="lineno"> 1827</span>&#160; </div>
<div class="line"><a name="l01828"></a><span class="lineno"> 1828</span>&#160;    <span class="keywordflow">if</span> (BodyEnter)</div>
<div class="line"><a name="l01829"></a><span class="lineno"> 1829</span>&#160;      <a class="code" href="OMPIRBuilder_8cpp.html#a3057c2b7e1e25de160497b1ef3985c2a">redirectTo</a>(BodyEnter, EnterBB, <a class="code" href="AArch64SLSHardening_8cpp.html#ad467c4ab9119043f9b7750ab986be61a">DL</a>);</div>
<div class="line"><a name="l01830"></a><span class="lineno"> 1830</span>&#160;    <span class="keywordflow">else</span></div>
<div class="line"><a name="l01831"></a><span class="lineno"> 1831</span>&#160;      <a class="code" href="OMPIRBuilder_8cpp.html#abdcdbfc178873f5055fbcf98bad92f53">redirectAllPredecessorsTo</a>(BodyEntered, EnterBB, <a class="code" href="AArch64SLSHardening_8cpp.html#ad467c4ab9119043f9b7750ab986be61a">DL</a>);</div>
<div class="line"><a name="l01832"></a><span class="lineno"> 1832</span>&#160; </div>
<div class="line"><a name="l01833"></a><span class="lineno"> 1833</span>&#160;    BodyEnter = <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l01834"></a><span class="lineno"> 1834</span>&#160;    BodyEntered = ExitBB;</div>
<div class="line"><a name="l01835"></a><span class="lineno"> 1835</span>&#160;  }</div>
<div class="line"><a name="l01836"></a><span class="lineno"> 1836</span>&#160; </div>
<div class="line"><a name="l01837"></a><span class="lineno"> 1837</span>&#160;  <span class="comment">// Append the original loop nest body into the generated loop nest body.</span></div>
<div class="line"><a name="l01838"></a><span class="lineno"> 1838</span>&#160;  <span class="keywordflow">if</span> (BodyEnter)</div>
<div class="line"><a name="l01839"></a><span class="lineno"> 1839</span>&#160;    <a class="code" href="OMPIRBuilder_8cpp.html#a3057c2b7e1e25de160497b1ef3985c2a">redirectTo</a>(BodyEnter, InnerEnter, <a class="code" href="AArch64SLSHardening_8cpp.html#ad467c4ab9119043f9b7750ab986be61a">DL</a>);</div>
<div class="line"><a name="l01840"></a><span class="lineno"> 1840</span>&#160;  <span class="keywordflow">else</span></div>
<div class="line"><a name="l01841"></a><span class="lineno"> 1841</span>&#160;    <a class="code" href="OMPIRBuilder_8cpp.html#abdcdbfc178873f5055fbcf98bad92f53">redirectAllPredecessorsTo</a>(BodyEntered, InnerEnter, <a class="code" href="AArch64SLSHardening_8cpp.html#ad467c4ab9119043f9b7750ab986be61a">DL</a>);</div>
<div class="line"><a name="l01842"></a><span class="lineno"> 1842</span>&#160;  <a class="code" href="OMPIRBuilder_8cpp.html#abdcdbfc178873f5055fbcf98bad92f53">redirectAllPredecessorsTo</a>(InnerLatch, Continue, <a class="code" href="AArch64SLSHardening_8cpp.html#ad467c4ab9119043f9b7750ab986be61a">DL</a>);</div>
<div class="line"><a name="l01843"></a><span class="lineno"> 1843</span>&#160; </div>
<div class="line"><a name="l01844"></a><span class="lineno"> 1844</span>&#160;  <span class="comment">// Replace the original induction variable with an induction variable computed</span></div>
<div class="line"><a name="l01845"></a><span class="lineno"> 1845</span>&#160;  <span class="comment">// from the tile and floor induction variables.</span></div>
<div class="line"><a name="l01846"></a><span class="lineno"> 1846</span>&#160;  <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.restoreIP(Result.back()-&gt;getBodyIP());</div>
<div class="line"><a name="l01847"></a><span class="lineno"> 1847</span>&#160;  <span class="keywordflow">for</span> (<span class="keywordtype">int</span> <a class="code" href="lib_2Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a> = 0; <a class="code" href="lib_2Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a> &lt; NumLoops; ++<a class="code" href="lib_2Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a>) {</div>
<div class="line"><a name="l01848"></a><span class="lineno"> 1848</span>&#160;    <a class="code" href="classllvm_1_1CanonicalLoopInfo.html">CanonicalLoopInfo</a> *FloorLoop = Result[<a class="code" href="lib_2Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a>];</div>
<div class="line"><a name="l01849"></a><span class="lineno"> 1849</span>&#160;    <a class="code" href="classllvm_1_1CanonicalLoopInfo.html">CanonicalLoopInfo</a> *TileLoop = Result[NumLoops + <a class="code" href="lib_2Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a>];</div>
<div class="line"><a name="l01850"></a><span class="lineno"> 1850</span>&#160;    <a class="code" href="classllvm_1_1Value.html">Value</a> *OrigIndVar = OrigIndVars[<a class="code" href="lib_2Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a>];</div>
<div class="line"><a name="l01851"></a><span class="lineno"> 1851</span>&#160;    <a class="code" href="classllvm_1_1Value.html">Value</a> *<a class="code" href="namespacellvm_1_1Check.html#a067ee17412e800f03802fa9517685732a3450a9712780ac26b071f9da4288a396">Size</a> = TileSizes[<a class="code" href="lib_2Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a>];</div>
<div class="line"><a name="l01852"></a><span class="lineno"> 1852</span>&#160; </div>
<div class="line"><a name="l01853"></a><span class="lineno"> 1853</span>&#160;    <a class="code" href="classllvm_1_1Value.html">Value</a> *Scale =</div>
<div class="line"><a name="l01854"></a><span class="lineno"> 1854</span>&#160;        <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.CreateMul(<a class="code" href="namespacellvm_1_1Check.html#a067ee17412e800f03802fa9517685732a3450a9712780ac26b071f9da4288a396">Size</a>, FloorLoop-&gt;<a class="code" href="classllvm_1_1CanonicalLoopInfo.html#a230d812cc988ec3a48bf5206d3d72b88">getIndVar</a>(), {}, <span class="comment">/*HasNUW=*/</span><span class="keyword">true</span>);</div>
<div class="line"><a name="l01855"></a><span class="lineno"> 1855</span>&#160;    <a class="code" href="classllvm_1_1Value.html">Value</a> *<a class="code" href="lib_2Target_2README_8txt.html#a8db36c82f32d6f6a4d35a00e55be03a8">Shift</a> =</div>
<div class="line"><a name="l01856"></a><span class="lineno"> 1856</span>&#160;        <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.CreateAdd(Scale, TileLoop-&gt;<a class="code" href="classllvm_1_1CanonicalLoopInfo.html#a230d812cc988ec3a48bf5206d3d72b88">getIndVar</a>(), {}, <span class="comment">/*HasNUW=*/</span><span class="keyword">true</span>);</div>
<div class="line"><a name="l01857"></a><span class="lineno"> 1857</span>&#160;    OrigIndVar-&gt;<a class="code" href="classllvm_1_1Value.html#a3ab5fc45117b450e8bb04e564cb6e5f2">replaceAllUsesWith</a>(<a class="code" href="lib_2Target_2README_8txt.html#a8db36c82f32d6f6a4d35a00e55be03a8">Shift</a>);</div>
<div class="line"><a name="l01858"></a><span class="lineno"> 1858</span>&#160;  }</div>
<div class="line"><a name="l01859"></a><span class="lineno"> 1859</span>&#160; </div>
<div class="line"><a name="l01860"></a><span class="lineno"> 1860</span>&#160;  <span class="comment">// Remove unused parts of the original loops.</span></div>
<div class="line"><a name="l01861"></a><span class="lineno"> 1861</span>&#160;  <a class="code" href="classllvm_1_1SmallVector.html">SmallVector&lt;BasicBlock *, 12&gt;</a> OldControlBBs;</div>
<div class="line"><a name="l01862"></a><span class="lineno"> 1862</span>&#160;  OldControlBBs.<a class="code" href="classllvm_1_1SmallVectorImpl.html#a499ea32ca1b8d16cedfe01d1e5b08f29">reserve</a>(6 * <a class="code" href="HexagonHardwareLoops_8cpp.html#ada7c1594a393ede3ce32602d64d7ddb2">Loops</a>.size());</div>
<div class="line"><a name="l01863"></a><span class="lineno"> 1863</span>&#160;  <span class="keywordflow">for</span> (<a class="code" href="classllvm_1_1CanonicalLoopInfo.html">CanonicalLoopInfo</a> *<a class="code" href="classllvm_1_1Loop.html">Loop</a> : <a class="code" href="HexagonHardwareLoops_8cpp.html#ada7c1594a393ede3ce32602d64d7ddb2">Loops</a>)</div>
<div class="line"><a name="l01864"></a><span class="lineno"> 1864</span>&#160;    <a class="code" href="classllvm_1_1Loop.html">Loop</a>-&gt;collectControlBlocks(OldControlBBs);</div>
<div class="line"><a name="l01865"></a><span class="lineno"> 1865</span>&#160;  <a class="code" href="OMPIRBuilder_8cpp.html#af0ce60c4a958016f62ce78f1eda423af">removeUnusedBlocksFromParent</a>(OldControlBBs);</div>
<div class="line"><a name="l01866"></a><span class="lineno"> 1866</span>&#160; </div>
<div class="line"><a name="l01867"></a><span class="lineno"> 1867</span>&#160;<span class="preprocessor">#ifndef NDEBUG</span></div>
<div class="line"><a name="l01868"></a><span class="lineno"> 1868</span>&#160;  <span class="keywordflow">for</span> (<a class="code" href="classllvm_1_1CanonicalLoopInfo.html">CanonicalLoopInfo</a> *GenL : Result)</div>
<div class="line"><a name="l01869"></a><span class="lineno"> 1869</span>&#160;    GenL-&gt;assertOK();</div>
<div class="line"><a name="l01870"></a><span class="lineno"> 1870</span>&#160;<span class="preprocessor">#endif</span></div>
<div class="line"><a name="l01871"></a><span class="lineno"> 1871</span>&#160;  <span class="keywordflow">return</span> Result;</div>
<div class="line"><a name="l01872"></a><span class="lineno"> 1872</span>&#160;}</div>
<div class="line"><a name="l01873"></a><span class="lineno"> 1873</span>&#160; </div>
<div class="line"><a name="l01874"></a><span class="lineno"> 1874</span>&#160;<a class="code" href="classllvm_1_1OpenMPIRBuilder.html#aafc1886793b898052f87edd7e9fdbaa3">OpenMPIRBuilder::InsertPointTy</a></div>
<div class="line"><a name="l01875"></a><span class="lineno"><a class="line" href="classllvm_1_1OpenMPIRBuilder.html#af2808c704c935cee35e9529907b59b1c"> 1875</a></span>&#160;<a class="code" href="classllvm_1_1OpenMPIRBuilder.html#af2808c704c935cee35e9529907b59b1c">OpenMPIRBuilder::createCopyPrivate</a>(<span class="keyword">const</span> <a class="code" href="structllvm_1_1OpenMPIRBuilder_1_1LocationDescription.html">LocationDescription</a> &amp;Loc,</div>
<div class="line"><a name="l01876"></a><span class="lineno"> 1876</span>&#160;                                   <a class="code" href="classllvm_1_1Value.html">llvm::Value</a> *BufSize, <a class="code" href="classllvm_1_1Value.html">llvm::Value</a> *CpyBuf,</div>
<div class="line"><a name="l01877"></a><span class="lineno"> 1877</span>&#160;                                   <a class="code" href="classllvm_1_1Value.html">llvm::Value</a> *CpyFn, <a class="code" href="classllvm_1_1Value.html">llvm::Value</a> *DidIt) {</div>
<div class="line"><a name="l01878"></a><span class="lineno"> 1878</span>&#160;  <span class="keywordflow">if</span> (!updateToLocation(Loc))</div>
<div class="line"><a name="l01879"></a><span class="lineno"> 1879</span>&#160;    <span class="keywordflow">return</span> Loc.<a class="code" href="structllvm_1_1OpenMPIRBuilder_1_1LocationDescription.html#aa15e9d88f98f6d7a0898e6aff4753040">IP</a>;</div>
<div class="line"><a name="l01880"></a><span class="lineno"> 1880</span>&#160; </div>
<div class="line"><a name="l01881"></a><span class="lineno"> 1881</span>&#160;  <a class="code" href="classllvm_1_1Constant.html">Constant</a> *SrcLocStr = getOrCreateSrcLocStr(Loc);</div>
<div class="line"><a name="l01882"></a><span class="lineno"> 1882</span>&#160;  <a class="code" href="classllvm_1_1Value.html">Value</a> *Ident = getOrCreateIdent(SrcLocStr);</div>
<div class="line"><a name="l01883"></a><span class="lineno"> 1883</span>&#160;  <a class="code" href="classllvm_1_1Value.html">Value</a> *ThreadId = getOrCreateThreadID(Ident);</div>
<div class="line"><a name="l01884"></a><span class="lineno"> 1884</span>&#160; </div>
<div class="line"><a name="l01885"></a><span class="lineno"> 1885</span>&#160;  <a class="code" href="classllvm_1_1Value.html">llvm::Value</a> *DidItLD = <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.CreateLoad(<a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.getInt32Ty(), DidIt);</div>
<div class="line"><a name="l01886"></a><span class="lineno"> 1886</span>&#160; </div>
<div class="line"><a name="l01887"></a><span class="lineno"> 1887</span>&#160;  <a class="code" href="classllvm_1_1Value.html">Value</a> *<a class="code" href="namespacellvm_1_1AMDGPU_1_1HSAMD_1_1Kernel_1_1Key.html#a1958a762261549463a280bac3274d6d5">Args</a>[] = {Ident, ThreadId, BufSize, CpyBuf, CpyFn, DidItLD};</div>
<div class="line"><a name="l01888"></a><span class="lineno"> 1888</span>&#160; </div>
<div class="line"><a name="l01889"></a><span class="lineno"> 1889</span>&#160;  <a class="code" href="classllvm_1_1Function.html">Function</a> *Fn = getOrCreateRuntimeFunctionPtr(OMPRTL___kmpc_copyprivate);</div>
<div class="line"><a name="l01890"></a><span class="lineno"> 1890</span>&#160;  <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.CreateCall(Fn, <a class="code" href="namespacellvm_1_1AMDGPU_1_1HSAMD_1_1Kernel_1_1Key.html#a1958a762261549463a280bac3274d6d5">Args</a>);</div>
<div class="line"><a name="l01891"></a><span class="lineno"> 1891</span>&#160; </div>
<div class="line"><a name="l01892"></a><span class="lineno"> 1892</span>&#160;  <span class="keywordflow">return</span> <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.saveIP();</div>
<div class="line"><a name="l01893"></a><span class="lineno"> 1893</span>&#160;}</div>
<div class="line"><a name="l01894"></a><span class="lineno"> 1894</span>&#160; </div>
<div class="line"><a name="l01895"></a><span class="lineno"> 1895</span>&#160;<a class="code" href="classllvm_1_1OpenMPIRBuilder.html#aafc1886793b898052f87edd7e9fdbaa3">OpenMPIRBuilder::InsertPointTy</a></div>
<div class="line"><a name="l01896"></a><span class="lineno"><a class="line" href="classllvm_1_1OpenMPIRBuilder.html#a0d9ee1231b167902dbb582232e587681"> 1896</a></span>&#160;<a class="code" href="classllvm_1_1OpenMPIRBuilder.html#a0d9ee1231b167902dbb582232e587681">OpenMPIRBuilder::createSingle</a>(<span class="keyword">const</span> <a class="code" href="structllvm_1_1OpenMPIRBuilder_1_1LocationDescription.html">LocationDescription</a> &amp;Loc,</div>
<div class="line"><a name="l01897"></a><span class="lineno"> 1897</span>&#160;                              <a class="code" href="classllvm_1_1function__ref.html">BodyGenCallbackTy</a> BodyGenCB,</div>
<div class="line"><a name="l01898"></a><span class="lineno"> 1898</span>&#160;                              <a class="code" href="classllvm_1_1OpenMPIRBuilder.html#a03b6c43472b3040013de9cbc25376925">FinalizeCallbackTy</a> FiniCB, <a class="code" href="classllvm_1_1Value.html">llvm::Value</a> *DidIt) {</div>
<div class="line"><a name="l01899"></a><span class="lineno"> 1899</span>&#160; </div>
<div class="line"><a name="l01900"></a><span class="lineno"> 1900</span>&#160;  <span class="keywordflow">if</span> (!updateToLocation(Loc))</div>
<div class="line"><a name="l01901"></a><span class="lineno"> 1901</span>&#160;    <span class="keywordflow">return</span> Loc.<a class="code" href="structllvm_1_1OpenMPIRBuilder_1_1LocationDescription.html#aa15e9d88f98f6d7a0898e6aff4753040">IP</a>;</div>
<div class="line"><a name="l01902"></a><span class="lineno"> 1902</span>&#160; </div>
<div class="line"><a name="l01903"></a><span class="lineno"> 1903</span>&#160;  <span class="comment">// If needed (i.e. not null), initialize `DidIt` with 0</span></div>
<div class="line"><a name="l01904"></a><span class="lineno"> 1904</span>&#160;  <span class="keywordflow">if</span> (DidIt) {</div>
<div class="line"><a name="l01905"></a><span class="lineno"> 1905</span>&#160;    <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.CreateStore(<a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.getInt32(0), DidIt);</div>
<div class="line"><a name="l01906"></a><span class="lineno"> 1906</span>&#160;  }</div>
<div class="line"><a name="l01907"></a><span class="lineno"> 1907</span>&#160; </div>
<div class="line"><a name="l01908"></a><span class="lineno"> 1908</span>&#160;  <a class="code" href="classllvm_1_1Directive.html">Directive</a> OMPD = Directive::OMPD_single;</div>
<div class="line"><a name="l01909"></a><span class="lineno"> 1909</span>&#160;  <a class="code" href="classllvm_1_1Constant.html">Constant</a> *SrcLocStr = getOrCreateSrcLocStr(Loc);</div>
<div class="line"><a name="l01910"></a><span class="lineno"> 1910</span>&#160;  <a class="code" href="classllvm_1_1Value.html">Value</a> *Ident = getOrCreateIdent(SrcLocStr);</div>
<div class="line"><a name="l01911"></a><span class="lineno"> 1911</span>&#160;  <a class="code" href="classllvm_1_1Value.html">Value</a> *ThreadId = getOrCreateThreadID(Ident);</div>
<div class="line"><a name="l01912"></a><span class="lineno"> 1912</span>&#160;  <a class="code" href="classllvm_1_1Value.html">Value</a> *<a class="code" href="namespacellvm_1_1AMDGPU_1_1HSAMD_1_1Kernel_1_1Key.html#a1958a762261549463a280bac3274d6d5">Args</a>[] = {Ident, ThreadId};</div>
<div class="line"><a name="l01913"></a><span class="lineno"> 1913</span>&#160; </div>
<div class="line"><a name="l01914"></a><span class="lineno"> 1914</span>&#160;  <a class="code" href="classllvm_1_1Function.html">Function</a> *EntryRTLFn = getOrCreateRuntimeFunctionPtr(OMPRTL___kmpc_single);</div>
<div class="line"><a name="l01915"></a><span class="lineno"> 1915</span>&#160;  <a class="code" href="classllvm_1_1Instruction.html">Instruction</a> *EntryCall = <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.CreateCall(EntryRTLFn, <a class="code" href="namespacellvm_1_1AMDGPU_1_1HSAMD_1_1Kernel_1_1Key.html#a1958a762261549463a280bac3274d6d5">Args</a>);</div>
<div class="line"><a name="l01916"></a><span class="lineno"> 1916</span>&#160; </div>
<div class="line"><a name="l01917"></a><span class="lineno"> 1917</span>&#160;  <a class="code" href="classllvm_1_1Function.html">Function</a> *ExitRTLFn = getOrCreateRuntimeFunctionPtr(OMPRTL___kmpc_end_single);</div>
<div class="line"><a name="l01918"></a><span class="lineno"> 1918</span>&#160;  <a class="code" href="classllvm_1_1Instruction.html">Instruction</a> *ExitCall = <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.CreateCall(ExitRTLFn, <a class="code" href="namespacellvm_1_1AMDGPU_1_1HSAMD_1_1Kernel_1_1Key.html#a1958a762261549463a280bac3274d6d5">Args</a>);</div>
<div class="line"><a name="l01919"></a><span class="lineno"> 1919</span>&#160; </div>
<div class="line"><a name="l01920"></a><span class="lineno"> 1920</span>&#160;  <span class="comment">// generates the following:</span></div>
<div class="line"><a name="l01921"></a><span class="lineno"> 1921</span>&#160;  <span class="comment">// if (__kmpc_single()) {</span></div>
<div class="line"><a name="l01922"></a><span class="lineno"> 1922</span>&#160;  <span class="comment">//    .... single region ...</span></div>
<div class="line"><a name="l01923"></a><span class="lineno"> 1923</span>&#160;  <span class="comment">//    __kmpc_end_single</span></div>
<div class="line"><a name="l01924"></a><span class="lineno"> 1924</span>&#160;  <span class="comment">// }</span></div>
<div class="line"><a name="l01925"></a><span class="lineno"> 1925</span>&#160; </div>
<div class="line"><a name="l01926"></a><span class="lineno"> 1926</span>&#160;  <span class="keywordflow">return</span> EmitOMPInlinedRegion(OMPD, EntryCall, ExitCall, BodyGenCB, FiniCB,</div>
<div class="line"><a name="l01927"></a><span class="lineno"> 1927</span>&#160;                              <span class="comment">/*Conditional*/</span> <span class="keyword">true</span>, <span class="comment">/*hasFinalize*/</span> <span class="keyword">true</span>);</div>
<div class="line"><a name="l01928"></a><span class="lineno"> 1928</span>&#160;}</div>
<div class="line"><a name="l01929"></a><span class="lineno"> 1929</span>&#160; </div>
<div class="line"><a name="l01930"></a><span class="lineno"><a class="line" href="classllvm_1_1OpenMPIRBuilder.html#a10deef7fafe3eff4c9c1755ffda0e4cb"> 1930</a></span>&#160;<a class="code" href="classllvm_1_1OpenMPIRBuilder.html#aafc1886793b898052f87edd7e9fdbaa3">OpenMPIRBuilder::InsertPointTy</a> <a class="code" href="classllvm_1_1OpenMPIRBuilder.html#a10deef7fafe3eff4c9c1755ffda0e4cb">OpenMPIRBuilder::createCritical</a>(</div>
<div class="line"><a name="l01931"></a><span class="lineno"> 1931</span>&#160;    <span class="keyword">const</span> <a class="code" href="structllvm_1_1OpenMPIRBuilder_1_1LocationDescription.html">LocationDescription</a> &amp;Loc, <a class="code" href="classllvm_1_1function__ref.html">BodyGenCallbackTy</a> BodyGenCB,</div>
<div class="line"><a name="l01932"></a><span class="lineno"> 1932</span>&#160;    <a class="code" href="classllvm_1_1OpenMPIRBuilder.html#a03b6c43472b3040013de9cbc25376925">FinalizeCallbackTy</a> FiniCB, <a class="code" href="classllvm_1_1StringRef.html">StringRef</a> CriticalName, <a class="code" href="classllvm_1_1Value.html">Value</a> *HintInst) {</div>
<div class="line"><a name="l01933"></a><span class="lineno"> 1933</span>&#160; </div>
<div class="line"><a name="l01934"></a><span class="lineno"> 1934</span>&#160;  <span class="keywordflow">if</span> (!updateToLocation(Loc))</div>
<div class="line"><a name="l01935"></a><span class="lineno"> 1935</span>&#160;    <span class="keywordflow">return</span> Loc.<a class="code" href="structllvm_1_1OpenMPIRBuilder_1_1LocationDescription.html#aa15e9d88f98f6d7a0898e6aff4753040">IP</a>;</div>
<div class="line"><a name="l01936"></a><span class="lineno"> 1936</span>&#160; </div>
<div class="line"><a name="l01937"></a><span class="lineno"> 1937</span>&#160;  <a class="code" href="classllvm_1_1Directive.html">Directive</a> OMPD = Directive::OMPD_critical;</div>
<div class="line"><a name="l01938"></a><span class="lineno"> 1938</span>&#160;  <a class="code" href="classllvm_1_1Constant.html">Constant</a> *SrcLocStr = getOrCreateSrcLocStr(Loc);</div>
<div class="line"><a name="l01939"></a><span class="lineno"> 1939</span>&#160;  <a class="code" href="classllvm_1_1Value.html">Value</a> *Ident = getOrCreateIdent(SrcLocStr);</div>
<div class="line"><a name="l01940"></a><span class="lineno"> 1940</span>&#160;  <a class="code" href="classllvm_1_1Value.html">Value</a> *ThreadId = getOrCreateThreadID(Ident);</div>
<div class="line"><a name="l01941"></a><span class="lineno"> 1941</span>&#160;  <a class="code" href="classllvm_1_1Value.html">Value</a> *LockVar = getOMPCriticalRegionLock(CriticalName);</div>
<div class="line"><a name="l01942"></a><span class="lineno"> 1942</span>&#160;  <a class="code" href="classllvm_1_1Value.html">Value</a> *<a class="code" href="namespacellvm_1_1AMDGPU_1_1HSAMD_1_1Kernel_1_1Key.html#a1958a762261549463a280bac3274d6d5">Args</a>[] = {Ident, ThreadId, LockVar};</div>
<div class="line"><a name="l01943"></a><span class="lineno"> 1943</span>&#160; </div>
<div class="line"><a name="l01944"></a><span class="lineno"> 1944</span>&#160;  <a class="code" href="classllvm_1_1SmallVector.html">SmallVector&lt;llvm::Value *, 4&gt;</a> EnterArgs(<a class="code" href="namespacellvm_1_1sys_1_1path.html#a00a76a729b319dc47beffbe07325565f">std::begin</a>(<a class="code" href="namespacellvm_1_1AMDGPU_1_1HSAMD_1_1Kernel_1_1Key.html#a1958a762261549463a280bac3274d6d5">Args</a>), <a class="code" href="namespacellvm_1_1sys_1_1path.html#a214ec2f04ffd92636ed4bd2717607a1d">std::end</a>(<a class="code" href="namespacellvm_1_1AMDGPU_1_1HSAMD_1_1Kernel_1_1Key.html#a1958a762261549463a280bac3274d6d5">Args</a>));</div>
<div class="line"><a name="l01945"></a><span class="lineno"> 1945</span>&#160;  <a class="code" href="classllvm_1_1Function.html">Function</a> *RTFn = <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l01946"></a><span class="lineno"> 1946</span>&#160;  <span class="keywordflow">if</span> (HintInst) {</div>
<div class="line"><a name="l01947"></a><span class="lineno"> 1947</span>&#160;    <span class="comment">// Add Hint to entry Args and create call</span></div>
<div class="line"><a name="l01948"></a><span class="lineno"> 1948</span>&#160;    EnterArgs.push_back(HintInst);</div>
<div class="line"><a name="l01949"></a><span class="lineno"> 1949</span>&#160;    RTFn = getOrCreateRuntimeFunctionPtr(OMPRTL___kmpc_critical_with_hint);</div>
<div class="line"><a name="l01950"></a><span class="lineno"> 1950</span>&#160;  } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l01951"></a><span class="lineno"> 1951</span>&#160;    RTFn = getOrCreateRuntimeFunctionPtr(OMPRTL___kmpc_critical);</div>
<div class="line"><a name="l01952"></a><span class="lineno"> 1952</span>&#160;  }</div>
<div class="line"><a name="l01953"></a><span class="lineno"> 1953</span>&#160;  <a class="code" href="classllvm_1_1Instruction.html">Instruction</a> *EntryCall = <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.CreateCall(RTFn, EnterArgs);</div>
<div class="line"><a name="l01954"></a><span class="lineno"> 1954</span>&#160; </div>
<div class="line"><a name="l01955"></a><span class="lineno"> 1955</span>&#160;  <a class="code" href="classllvm_1_1Function.html">Function</a> *ExitRTLFn =</div>
<div class="line"><a name="l01956"></a><span class="lineno"> 1956</span>&#160;      getOrCreateRuntimeFunctionPtr(OMPRTL___kmpc_end_critical);</div>
<div class="line"><a name="l01957"></a><span class="lineno"> 1957</span>&#160;  <a class="code" href="classllvm_1_1Instruction.html">Instruction</a> *ExitCall = <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.CreateCall(ExitRTLFn, <a class="code" href="namespacellvm_1_1AMDGPU_1_1HSAMD_1_1Kernel_1_1Key.html#a1958a762261549463a280bac3274d6d5">Args</a>);</div>
<div class="line"><a name="l01958"></a><span class="lineno"> 1958</span>&#160; </div>
<div class="line"><a name="l01959"></a><span class="lineno"> 1959</span>&#160;  <span class="keywordflow">return</span> EmitOMPInlinedRegion(OMPD, EntryCall, ExitCall, BodyGenCB, FiniCB,</div>
<div class="line"><a name="l01960"></a><span class="lineno"> 1960</span>&#160;                              <span class="comment">/*Conditional*/</span> <span class="keyword">false</span>, <span class="comment">/*hasFinalize*/</span> <span class="keyword">true</span>);</div>
<div class="line"><a name="l01961"></a><span class="lineno"> 1961</span>&#160;}</div>
<div class="line"><a name="l01962"></a><span class="lineno"> 1962</span>&#160; </div>
<div class="line"><a name="l01963"></a><span class="lineno"> 1963</span>&#160;<a class="code" href="classllvm_1_1OpenMPIRBuilder.html#aafc1886793b898052f87edd7e9fdbaa3">OpenMPIRBuilder::InsertPointTy</a> OpenMPIRBuilder::EmitOMPInlinedRegion(</div>
<div class="line"><a name="l01964"></a><span class="lineno"> 1964</span>&#160;    <a class="code" href="classllvm_1_1Directive.html">Directive</a> OMPD, <a class="code" href="classllvm_1_1Instruction.html">Instruction</a> *EntryCall, <a class="code" href="classllvm_1_1Instruction.html">Instruction</a> *ExitCall,</div>
<div class="line"><a name="l01965"></a><span class="lineno"> 1965</span>&#160;    BodyGenCallbackTy BodyGenCB, FinalizeCallbackTy FiniCB, <span class="keywordtype">bool</span> Conditional,</div>
<div class="line"><a name="l01966"></a><span class="lineno"> 1966</span>&#160;    <span class="keywordtype">bool</span> HasFinalize, <span class="keywordtype">bool</span> IsCancellable) {</div>
<div class="line"><a name="l01967"></a><span class="lineno"> 1967</span>&#160; </div>
<div class="line"><a name="l01968"></a><span class="lineno"> 1968</span>&#160;  <span class="keywordflow">if</span> (HasFinalize)</div>
<div class="line"><a name="l01969"></a><span class="lineno"> 1969</span>&#160;    FinalizationStack.push_back({FiniCB, OMPD, IsCancellable});</div>
<div class="line"><a name="l01970"></a><span class="lineno"> 1970</span>&#160; </div>
<div class="line"><a name="l01971"></a><span class="lineno"> 1971</span>&#160;  <span class="comment">// Create inlined region&#39;s entry and body blocks, in preparation</span></div>
<div class="line"><a name="l01972"></a><span class="lineno"> 1972</span>&#160;  <span class="comment">// for conditional creation</span></div>
<div class="line"><a name="l01973"></a><span class="lineno"> 1973</span>&#160;  <a class="code" href="classllvm_1_1BasicBlock.html">BasicBlock</a> *EntryBB = <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.GetInsertBlock();</div>
<div class="line"><a name="l01974"></a><span class="lineno"> 1974</span>&#160;  <a class="code" href="classllvm_1_1Instruction.html">Instruction</a> *SplitPos = EntryBB-&gt;<a class="code" href="classllvm_1_1BasicBlock.html#a71a9eabc4318b2fc34f83b01dfee484b">getTerminator</a>();</div>
<div class="line"><a name="l01975"></a><span class="lineno"> 1975</span>&#160;  <span class="keywordflow">if</span> (!isa_and_nonnull&lt;BranchInst&gt;(SplitPos))</div>
<div class="line"><a name="l01976"></a><span class="lineno"> 1976</span>&#160;    SplitPos = <span class="keyword">new</span> <a class="code" href="classllvm_1_1UnreachableInst.html">UnreachableInst</a>(<a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.getContext(), EntryBB);</div>
<div class="line"><a name="l01977"></a><span class="lineno"> 1977</span>&#160;  <a class="code" href="classllvm_1_1BasicBlock.html">BasicBlock</a> *ExitBB = EntryBB-&gt;<a class="code" href="classllvm_1_1BasicBlock.html#a52c990590792c91dd20b6d45acebe359">splitBasicBlock</a>(SplitPos, <span class="stringliteral">&quot;omp_region.end&quot;</span>);</div>
<div class="line"><a name="l01978"></a><span class="lineno"> 1978</span>&#160;  <a class="code" href="classllvm_1_1BasicBlock.html">BasicBlock</a> *FiniBB =</div>
<div class="line"><a name="l01979"></a><span class="lineno"> 1979</span>&#160;      EntryBB-&gt;<a class="code" href="classllvm_1_1BasicBlock.html#a52c990590792c91dd20b6d45acebe359">splitBasicBlock</a>(EntryBB-&gt;<a class="code" href="classllvm_1_1BasicBlock.html#a71a9eabc4318b2fc34f83b01dfee484b">getTerminator</a>(), <span class="stringliteral">&quot;omp_region.finalize&quot;</span>);</div>
<div class="line"><a name="l01980"></a><span class="lineno"> 1980</span>&#160; </div>
<div class="line"><a name="l01981"></a><span class="lineno"> 1981</span>&#160;  <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.SetInsertPoint(EntryBB-&gt;<a class="code" href="classllvm_1_1BasicBlock.html#a71a9eabc4318b2fc34f83b01dfee484b">getTerminator</a>());</div>
<div class="line"><a name="l01982"></a><span class="lineno"> 1982</span>&#160;  emitCommonDirectiveEntry(OMPD, EntryCall, ExitBB, Conditional);</div>
<div class="line"><a name="l01983"></a><span class="lineno"> 1983</span>&#160; </div>
<div class="line"><a name="l01984"></a><span class="lineno"> 1984</span>&#160;  <span class="comment">// generate body</span></div>
<div class="line"><a name="l01985"></a><span class="lineno"> 1985</span>&#160;  BodyGenCB(<span class="comment">/* AllocaIP */</span> InsertPointTy(),</div>
<div class="line"><a name="l01986"></a><span class="lineno"> 1986</span>&#160;            <span class="comment">/* CodeGenIP */</span> <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.saveIP(), *FiniBB);</div>
<div class="line"><a name="l01987"></a><span class="lineno"> 1987</span>&#160; </div>
<div class="line"><a name="l01988"></a><span class="lineno"> 1988</span>&#160;  <span class="comment">// If we didn&#39;t emit a branch to FiniBB during body generation, it means</span></div>
<div class="line"><a name="l01989"></a><span class="lineno"> 1989</span>&#160;  <span class="comment">// FiniBB is unreachable (e.g. while(1);). stop generating all the</span></div>
<div class="line"><a name="l01990"></a><span class="lineno"> 1990</span>&#160;  <span class="comment">// unreachable blocks, and remove anything we are not going to use.</span></div>
<div class="line"><a name="l01991"></a><span class="lineno"> 1991</span>&#160;  <span class="keyword">auto</span> SkipEmittingRegion = FiniBB-&gt;<a class="code" href="classllvm_1_1BasicBlock.html#a526630ff85b48f29ac5b4c519c6c2243">hasNPredecessors</a>(0);</div>
<div class="line"><a name="l01992"></a><span class="lineno"> 1992</span>&#160;  <span class="keywordflow">if</span> (SkipEmittingRegion) {</div>
<div class="line"><a name="l01993"></a><span class="lineno"> 1993</span>&#160;    FiniBB-&gt;<a class="code" href="classllvm_1_1BasicBlock.html#a8dd327a937563afdb08250abc43820b0">eraseFromParent</a>();</div>
<div class="line"><a name="l01994"></a><span class="lineno"> 1994</span>&#160;    ExitCall-&gt;<a class="code" href="classllvm_1_1Instruction.html#ae6b978645b8ac72d1a35e1298ffdd4f0">eraseFromParent</a>();</div>
<div class="line"><a name="l01995"></a><span class="lineno"> 1995</span>&#160;    <span class="comment">// Discard finalization if we have it.</span></div>
<div class="line"><a name="l01996"></a><span class="lineno"> 1996</span>&#160;    <span class="keywordflow">if</span> (HasFinalize) {</div>
<div class="line"><a name="l01997"></a><span class="lineno"> 1997</span>&#160;      <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(!FinalizationStack.empty() &amp;&amp;</div>
<div class="line"><a name="l01998"></a><span class="lineno"> 1998</span>&#160;             <span class="stringliteral">&quot;Unexpected finalization stack state!&quot;</span>);</div>
<div class="line"><a name="l01999"></a><span class="lineno"> 1999</span>&#160;      FinalizationStack.pop_back();</div>
<div class="line"><a name="l02000"></a><span class="lineno"> 2000</span>&#160;    }</div>
<div class="line"><a name="l02001"></a><span class="lineno"> 2001</span>&#160;  } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l02002"></a><span class="lineno"> 2002</span>&#160;    <span class="comment">// emit exit call and do any needed finalization.</span></div>
<div class="line"><a name="l02003"></a><span class="lineno"> 2003</span>&#160;    <span class="keyword">auto</span> FinIP = InsertPointTy(FiniBB, FiniBB-&gt;<a class="code" href="classllvm_1_1BasicBlock.html#a161fd4e9fa5367f64c2a4c9e921c3ad3">getFirstInsertionPt</a>());</div>
<div class="line"><a name="l02004"></a><span class="lineno"> 2004</span>&#160;    <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(FiniBB-&gt;<a class="code" href="classllvm_1_1BasicBlock.html#a71a9eabc4318b2fc34f83b01dfee484b">getTerminator</a>()-&gt;<a class="code" href="classllvm_1_1Instruction.html#ad449a11cc9b14b0ac93bd61bd0bd9293">getNumSuccessors</a>() == 1 &amp;&amp;</div>
<div class="line"><a name="l02005"></a><span class="lineno"> 2005</span>&#160;           FiniBB-&gt;<a class="code" href="classllvm_1_1BasicBlock.html#a71a9eabc4318b2fc34f83b01dfee484b">getTerminator</a>()-&gt;<a class="code" href="classllvm_1_1Instruction.html#a944c50b4f5440b3914f5e2a157bb0fd3">getSuccessor</a>(0) == ExitBB &amp;&amp;</div>
<div class="line"><a name="l02006"></a><span class="lineno"> 2006</span>&#160;           <span class="stringliteral">&quot;Unexpected control flow graph state!!&quot;</span>);</div>
<div class="line"><a name="l02007"></a><span class="lineno"> 2007</span>&#160;    emitCommonDirectiveExit(OMPD, FinIP, ExitCall, HasFinalize);</div>
<div class="line"><a name="l02008"></a><span class="lineno"> 2008</span>&#160;    <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(FiniBB-&gt;<a class="code" href="classllvm_1_1BasicBlock.html#a74aa9daea070e2ad3394a3ec58b7316a">getUniquePredecessor</a>()-&gt;<a class="code" href="classllvm_1_1BasicBlock.html#a57f1945911ca1e95d0f51d7c3516b529">getUniqueSuccessor</a>() == FiniBB &amp;&amp;</div>
<div class="line"><a name="l02009"></a><span class="lineno"> 2009</span>&#160;           <span class="stringliteral">&quot;Unexpected Control Flow State!&quot;</span>);</div>
<div class="line"><a name="l02010"></a><span class="lineno"> 2010</span>&#160;    <a class="code" href="namespacellvm.html#a23ddcf4630aa7c7c250a1af5c9e7e20d">MergeBlockIntoPredecessor</a>(FiniBB);</div>
<div class="line"><a name="l02011"></a><span class="lineno"> 2011</span>&#160;  }</div>
<div class="line"><a name="l02012"></a><span class="lineno"> 2012</span>&#160; </div>
<div class="line"><a name="l02013"></a><span class="lineno"> 2013</span>&#160;  <span class="comment">// If we are skipping the region of a non conditional, remove the exit</span></div>
<div class="line"><a name="l02014"></a><span class="lineno"> 2014</span>&#160;  <span class="comment">// block, and clear the builder&#39;s insertion point.</span></div>
<div class="line"><a name="l02015"></a><span class="lineno"> 2015</span>&#160;  <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(SplitPos-&gt;<a class="code" href="classllvm_1_1Instruction.html#a1a7f07aaef6a3bee130bf0e0f0536802">getParent</a>() == ExitBB &amp;&amp;</div>
<div class="line"><a name="l02016"></a><span class="lineno"> 2016</span>&#160;         <span class="stringliteral">&quot;Unexpected Insertion point location!&quot;</span>);</div>
<div class="line"><a name="l02017"></a><span class="lineno"> 2017</span>&#160;  <span class="keywordflow">if</span> (!Conditional &amp;&amp; SkipEmittingRegion) {</div>
<div class="line"><a name="l02018"></a><span class="lineno"> 2018</span>&#160;    ExitBB-&gt;<a class="code" href="classllvm_1_1BasicBlock.html#a8dd327a937563afdb08250abc43820b0">eraseFromParent</a>();</div>
<div class="line"><a name="l02019"></a><span class="lineno"> 2019</span>&#160;    <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.ClearInsertionPoint();</div>
<div class="line"><a name="l02020"></a><span class="lineno"> 2020</span>&#160;  } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l02021"></a><span class="lineno"> 2021</span>&#160;    <span class="keyword">auto</span> merged = <a class="code" href="namespacellvm.html#a23ddcf4630aa7c7c250a1af5c9e7e20d">MergeBlockIntoPredecessor</a>(ExitBB);</div>
<div class="line"><a name="l02022"></a><span class="lineno"> 2022</span>&#160;    <a class="code" href="classllvm_1_1BasicBlock.html">BasicBlock</a> *ExitPredBB = SplitPos-&gt;<a class="code" href="classllvm_1_1Instruction.html#a1a7f07aaef6a3bee130bf0e0f0536802">getParent</a>();</div>
<div class="line"><a name="l02023"></a><span class="lineno"> 2023</span>&#160;    <span class="keyword">auto</span> InsertBB = merged ? ExitPredBB : ExitBB;</div>
<div class="line"><a name="l02024"></a><span class="lineno"> 2024</span>&#160;    <span class="keywordflow">if</span> (!isa_and_nonnull&lt;BranchInst&gt;(SplitPos))</div>
<div class="line"><a name="l02025"></a><span class="lineno"> 2025</span>&#160;      SplitPos-&gt;<a class="code" href="classllvm_1_1Instruction.html#ae6b978645b8ac72d1a35e1298ffdd4f0">eraseFromParent</a>();</div>
<div class="line"><a name="l02026"></a><span class="lineno"> 2026</span>&#160;    <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.SetInsertPoint(InsertBB);</div>
<div class="line"><a name="l02027"></a><span class="lineno"> 2027</span>&#160;  }</div>
<div class="line"><a name="l02028"></a><span class="lineno"> 2028</span>&#160; </div>
<div class="line"><a name="l02029"></a><span class="lineno"> 2029</span>&#160;  <span class="keywordflow">return</span> <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.saveIP();</div>
<div class="line"><a name="l02030"></a><span class="lineno"> 2030</span>&#160;}</div>
<div class="line"><a name="l02031"></a><span class="lineno"> 2031</span>&#160; </div>
<div class="line"><a name="l02032"></a><span class="lineno"> 2032</span>&#160;<a class="code" href="classllvm_1_1OpenMPIRBuilder.html#aafc1886793b898052f87edd7e9fdbaa3">OpenMPIRBuilder::InsertPointTy</a> OpenMPIRBuilder::emitCommonDirectiveEntry(</div>
<div class="line"><a name="l02033"></a><span class="lineno"> 2033</span>&#160;    <a class="code" href="classllvm_1_1Directive.html">Directive</a> OMPD, <a class="code" href="classllvm_1_1Value.html">Value</a> *EntryCall, <a class="code" href="classllvm_1_1BasicBlock.html">BasicBlock</a> *ExitBB, <span class="keywordtype">bool</span> Conditional) {</div>
<div class="line"><a name="l02034"></a><span class="lineno"> 2034</span>&#160;  <span class="comment">// if nothing to do, Return current insertion point.</span></div>
<div class="line"><a name="l02035"></a><span class="lineno"> 2035</span>&#160;  <span class="keywordflow">if</span> (!Conditional || !EntryCall)</div>
<div class="line"><a name="l02036"></a><span class="lineno"> 2036</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.saveIP();</div>
<div class="line"><a name="l02037"></a><span class="lineno"> 2037</span>&#160; </div>
<div class="line"><a name="l02038"></a><span class="lineno"> 2038</span>&#160;  <a class="code" href="classllvm_1_1BasicBlock.html">BasicBlock</a> *EntryBB = <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.GetInsertBlock();</div>
<div class="line"><a name="l02039"></a><span class="lineno"> 2039</span>&#160;  <a class="code" href="classllvm_1_1Value.html">Value</a> *CallBool = <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.CreateIsNotNull(EntryCall);</div>
<div class="line"><a name="l02040"></a><span class="lineno"> 2040</span>&#160;  <span class="keyword">auto</span> *ThenBB = <a class="code" href="classllvm_1_1BasicBlock.html#ace940beeee97c222f836fe0ac70f6cf5">BasicBlock::Create</a>(<a class="code" href="lib_2Target_2X86_2README_8txt.html#ac88fe1d3a61b056a4f64fbbb156a62ff">M</a>.getContext(), <span class="stringliteral">&quot;omp_region.body&quot;</span>);</div>
<div class="line"><a name="l02041"></a><span class="lineno"> 2041</span>&#160;  <span class="keyword">auto</span> *UI = <span class="keyword">new</span> <a class="code" href="classllvm_1_1UnreachableInst.html">UnreachableInst</a>(<a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.getContext(), ThenBB);</div>
<div class="line"><a name="l02042"></a><span class="lineno"> 2042</span>&#160; </div>
<div class="line"><a name="l02043"></a><span class="lineno"> 2043</span>&#160;  <span class="comment">// Emit thenBB and set the Builder&#39;s insertion point there for</span></div>
<div class="line"><a name="l02044"></a><span class="lineno"> 2044</span>&#160;  <span class="comment">// body generation next. Place the block after the current block.</span></div>
<div class="line"><a name="l02045"></a><span class="lineno"> 2045</span>&#160;  <a class="code" href="classllvm_1_1Function.html">Function</a> *CurFn = EntryBB-&gt;<a class="code" href="classllvm_1_1BasicBlock.html#a38bee869ad41aebfef3de2641b12004c">getParent</a>();</div>
<div class="line"><a name="l02046"></a><span class="lineno"> 2046</span>&#160;  CurFn-&gt;<a class="code" href="classllvm_1_1Function.html#a71918985bc82353ecbc009fcdd7ffa38">getBasicBlockList</a>().insertAfter(EntryBB-&gt;<a class="code" href="classllvm_1_1ilist__node__impl.html#af719fc783be6589465137d997701a432">getIterator</a>(), ThenBB);</div>
<div class="line"><a name="l02047"></a><span class="lineno"> 2047</span>&#160; </div>
<div class="line"><a name="l02048"></a><span class="lineno"> 2048</span>&#160;  <span class="comment">// Move Entry branch to end of ThenBB, and replace with conditional</span></div>
<div class="line"><a name="l02049"></a><span class="lineno"> 2049</span>&#160;  <span class="comment">// branch (If-stmt)</span></div>
<div class="line"><a name="l02050"></a><span class="lineno"> 2050</span>&#160;  <a class="code" href="classllvm_1_1Instruction.html">Instruction</a> *EntryBBTI = EntryBB-&gt;<a class="code" href="classllvm_1_1BasicBlock.html#a71a9eabc4318b2fc34f83b01dfee484b">getTerminator</a>();</div>
<div class="line"><a name="l02051"></a><span class="lineno"> 2051</span>&#160;  <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.CreateCondBr(CallBool, ThenBB, ExitBB);</div>
<div class="line"><a name="l02052"></a><span class="lineno"> 2052</span>&#160;  EntryBBTI-&gt;<a class="code" href="classllvm_1_1Instruction.html#a0fd53f63d349dc8a7c5fc0cdd7a94c8d">removeFromParent</a>();</div>
<div class="line"><a name="l02053"></a><span class="lineno"> 2053</span>&#160;  <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.SetInsertPoint(UI);</div>
<div class="line"><a name="l02054"></a><span class="lineno"> 2054</span>&#160;  <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.Insert(EntryBBTI);</div>
<div class="line"><a name="l02055"></a><span class="lineno"> 2055</span>&#160;  UI-&gt;eraseFromParent();</div>
<div class="line"><a name="l02056"></a><span class="lineno"> 2056</span>&#160;  <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.SetInsertPoint(ThenBB-&gt;getTerminator());</div>
<div class="line"><a name="l02057"></a><span class="lineno"> 2057</span>&#160; </div>
<div class="line"><a name="l02058"></a><span class="lineno"> 2058</span>&#160;  <span class="comment">// return an insertion point to ExitBB.</span></div>
<div class="line"><a name="l02059"></a><span class="lineno"> 2059</span>&#160;  <span class="keywordflow">return</span> <a class="code" href="classllvm_1_1IRBuilder.html">IRBuilder&lt;&gt;::InsertPoint</a>(ExitBB, ExitBB-&gt;<a class="code" href="classllvm_1_1BasicBlock.html#a161fd4e9fa5367f64c2a4c9e921c3ad3">getFirstInsertionPt</a>());</div>
<div class="line"><a name="l02060"></a><span class="lineno"> 2060</span>&#160;}</div>
<div class="line"><a name="l02061"></a><span class="lineno"> 2061</span>&#160; </div>
<div class="line"><a name="l02062"></a><span class="lineno"> 2062</span>&#160;<a class="code" href="classllvm_1_1OpenMPIRBuilder.html#aafc1886793b898052f87edd7e9fdbaa3">OpenMPIRBuilder::InsertPointTy</a> OpenMPIRBuilder::emitCommonDirectiveExit(</div>
<div class="line"><a name="l02063"></a><span class="lineno"> 2063</span>&#160;    omp::Directive OMPD, InsertPointTy FinIP, <a class="code" href="classllvm_1_1Instruction.html">Instruction</a> *ExitCall,</div>
<div class="line"><a name="l02064"></a><span class="lineno"> 2064</span>&#160;    <span class="keywordtype">bool</span> HasFinalize) {</div>
<div class="line"><a name="l02065"></a><span class="lineno"> 2065</span>&#160; </div>
<div class="line"><a name="l02066"></a><span class="lineno"> 2066</span>&#160;  <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.restoreIP(FinIP);</div>
<div class="line"><a name="l02067"></a><span class="lineno"> 2067</span>&#160; </div>
<div class="line"><a name="l02068"></a><span class="lineno"> 2068</span>&#160;  <span class="comment">// If there is finalization to do, emit it before the exit call</span></div>
<div class="line"><a name="l02069"></a><span class="lineno"> 2069</span>&#160;  <span class="keywordflow">if</span> (HasFinalize) {</div>
<div class="line"><a name="l02070"></a><span class="lineno"> 2070</span>&#160;    <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(!FinalizationStack.empty() &amp;&amp;</div>
<div class="line"><a name="l02071"></a><span class="lineno"> 2071</span>&#160;           <span class="stringliteral">&quot;Unexpected finalization stack state!&quot;</span>);</div>
<div class="line"><a name="l02072"></a><span class="lineno"> 2072</span>&#160; </div>
<div class="line"><a name="l02073"></a><span class="lineno"> 2073</span>&#160;    FinalizationInfo Fi = FinalizationStack.pop_back_val();</div>
<div class="line"><a name="l02074"></a><span class="lineno"> 2074</span>&#160;    <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(Fi.DK == OMPD &amp;&amp; <span class="stringliteral">&quot;Unexpected Directive for Finalization call!&quot;</span>);</div>
<div class="line"><a name="l02075"></a><span class="lineno"> 2075</span>&#160; </div>
<div class="line"><a name="l02076"></a><span class="lineno"> 2076</span>&#160;    Fi.FiniCB(FinIP);</div>
<div class="line"><a name="l02077"></a><span class="lineno"> 2077</span>&#160; </div>
<div class="line"><a name="l02078"></a><span class="lineno"> 2078</span>&#160;    <a class="code" href="classllvm_1_1BasicBlock.html">BasicBlock</a> *FiniBB = FinIP.getBlock();</div>
<div class="line"><a name="l02079"></a><span class="lineno"> 2079</span>&#160;    <a class="code" href="classllvm_1_1Instruction.html">Instruction</a> *FiniBBTI = FiniBB-&gt;<a class="code" href="classllvm_1_1BasicBlock.html#a71a9eabc4318b2fc34f83b01dfee484b">getTerminator</a>();</div>
<div class="line"><a name="l02080"></a><span class="lineno"> 2080</span>&#160; </div>
<div class="line"><a name="l02081"></a><span class="lineno"> 2081</span>&#160;    <span class="comment">// set Builder IP for call creation</span></div>
<div class="line"><a name="l02082"></a><span class="lineno"> 2082</span>&#160;    <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.SetInsertPoint(FiniBBTI);</div>
<div class="line"><a name="l02083"></a><span class="lineno"> 2083</span>&#160;  }</div>
<div class="line"><a name="l02084"></a><span class="lineno"> 2084</span>&#160; </div>
<div class="line"><a name="l02085"></a><span class="lineno"> 2085</span>&#160;  <span class="keywordflow">if</span> (!ExitCall)</div>
<div class="line"><a name="l02086"></a><span class="lineno"> 2086</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.saveIP();</div>
<div class="line"><a name="l02087"></a><span class="lineno"> 2087</span>&#160; </div>
<div class="line"><a name="l02088"></a><span class="lineno"> 2088</span>&#160;  <span class="comment">// place the Exitcall as last instruction before Finalization block terminator</span></div>
<div class="line"><a name="l02089"></a><span class="lineno"> 2089</span>&#160;  ExitCall-&gt;<a class="code" href="classllvm_1_1Instruction.html#a0fd53f63d349dc8a7c5fc0cdd7a94c8d">removeFromParent</a>();</div>
<div class="line"><a name="l02090"></a><span class="lineno"> 2090</span>&#160;  <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.Insert(ExitCall);</div>
<div class="line"><a name="l02091"></a><span class="lineno"> 2091</span>&#160; </div>
<div class="line"><a name="l02092"></a><span class="lineno"> 2092</span>&#160;  <span class="keywordflow">return</span> <a class="code" href="classllvm_1_1IRBuilder.html">IRBuilder&lt;&gt;::InsertPoint</a>(ExitCall-&gt;<a class="code" href="classllvm_1_1Instruction.html#a1a7f07aaef6a3bee130bf0e0f0536802">getParent</a>(),</div>
<div class="line"><a name="l02093"></a><span class="lineno"> 2093</span>&#160;                                  ExitCall-&gt;<a class="code" href="classllvm_1_1ilist__node__impl.html#af719fc783be6589465137d997701a432">getIterator</a>());</div>
<div class="line"><a name="l02094"></a><span class="lineno"> 2094</span>&#160;}</div>
<div class="line"><a name="l02095"></a><span class="lineno"> 2095</span>&#160; </div>
<div class="line"><a name="l02096"></a><span class="lineno"><a class="line" href="classllvm_1_1OpenMPIRBuilder.html#a70356a38271d388e7c4b477cef0d7b2c"> 2096</a></span>&#160;<a class="code" href="classllvm_1_1OpenMPIRBuilder.html#aafc1886793b898052f87edd7e9fdbaa3">OpenMPIRBuilder::InsertPointTy</a> <a class="code" href="classllvm_1_1OpenMPIRBuilder.html#a70356a38271d388e7c4b477cef0d7b2c">OpenMPIRBuilder::createCopyinClauseBlocks</a>(</div>
<div class="line"><a name="l02097"></a><span class="lineno"> 2097</span>&#160;    <a class="code" href="classllvm_1_1OpenMPIRBuilder.html#aafc1886793b898052f87edd7e9fdbaa3">InsertPointTy</a> <a class="code" href="structIP.html">IP</a>, <a class="code" href="classllvm_1_1Value.html">Value</a> *MasterAddr, <a class="code" href="classllvm_1_1Value.html">Value</a> *PrivateAddr,</div>
<div class="line"><a name="l02098"></a><span class="lineno"> 2098</span>&#160;    <a class="code" href="classllvm_1_1IntegerType.html">llvm::IntegerType</a> *IntPtrTy, <span class="keywordtype">bool</span> BranchtoEnd) {</div>
<div class="line"><a name="l02099"></a><span class="lineno"> 2099</span>&#160;  <span class="keywordflow">if</span> (!<a class="code" href="structIP.html">IP</a>.isSet())</div>
<div class="line"><a name="l02100"></a><span class="lineno"> 2100</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="structIP.html">IP</a>;</div>
<div class="line"><a name="l02101"></a><span class="lineno"> 2101</span>&#160; </div>
<div class="line"><a name="l02102"></a><span class="lineno"> 2102</span>&#160;  <a class="code" href="classllvm_1_1IRBuilder.html">IRBuilder&lt;&gt;::InsertPointGuard</a> IPG(<a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>);</div>
<div class="line"><a name="l02103"></a><span class="lineno"> 2103</span>&#160; </div>
<div class="line"><a name="l02104"></a><span class="lineno"> 2104</span>&#160;  <span class="comment">// creates the following CFG structure</span></div>
<div class="line"><a name="l02105"></a><span class="lineno"> 2105</span>&#160;  <span class="comment">//     OMP_Entry : (MasterAddr != PrivateAddr)?</span></div>
<div class="line"><a name="l02106"></a><span class="lineno"> 2106</span>&#160;  <span class="comment">//       F     T</span></div>
<div class="line"><a name="l02107"></a><span class="lineno"> 2107</span>&#160;  <span class="comment">//       |      \</span></div>
<div class="line"><a name="l02108"></a><span class="lineno"> 2108</span>&#160;<span class="comment">  //       |     copin.not.master</span></div>
<div class="line"><a name="l02109"></a><span class="lineno"> 2109</span>&#160;  <span class="comment">//       |      /</span></div>
<div class="line"><a name="l02110"></a><span class="lineno"> 2110</span>&#160;  <span class="comment">//       v     /</span></div>
<div class="line"><a name="l02111"></a><span class="lineno"> 2111</span>&#160;  <span class="comment">//   copyin.not.master.end</span></div>
<div class="line"><a name="l02112"></a><span class="lineno"> 2112</span>&#160;  <span class="comment">//         |</span></div>
<div class="line"><a name="l02113"></a><span class="lineno"> 2113</span>&#160;  <span class="comment">//         v</span></div>
<div class="line"><a name="l02114"></a><span class="lineno"> 2114</span>&#160;  <span class="comment">//   OMP.Entry.Next</span></div>
<div class="line"><a name="l02115"></a><span class="lineno"> 2115</span>&#160; </div>
<div class="line"><a name="l02116"></a><span class="lineno"> 2116</span>&#160;  <a class="code" href="classllvm_1_1BasicBlock.html">BasicBlock</a> *OMP_Entry = <a class="code" href="structIP.html">IP</a>.getBlock();</div>
<div class="line"><a name="l02117"></a><span class="lineno"> 2117</span>&#160;  <a class="code" href="classllvm_1_1Function.html">Function</a> *CurFn = OMP_Entry-&gt;<a class="code" href="classllvm_1_1BasicBlock.html#a38bee869ad41aebfef3de2641b12004c">getParent</a>();</div>
<div class="line"><a name="l02118"></a><span class="lineno"> 2118</span>&#160;  <a class="code" href="classllvm_1_1BasicBlock.html">BasicBlock</a> *CopyBegin =</div>
<div class="line"><a name="l02119"></a><span class="lineno"> 2119</span>&#160;      <a class="code" href="classllvm_1_1BasicBlock.html#ace940beeee97c222f836fe0ac70f6cf5">BasicBlock::Create</a>(<a class="code" href="lib_2Target_2X86_2README_8txt.html#ac88fe1d3a61b056a4f64fbbb156a62ff">M</a>.getContext(), <span class="stringliteral">&quot;copyin.not.master&quot;</span>, CurFn);</div>
<div class="line"><a name="l02120"></a><span class="lineno"> 2120</span>&#160;  <a class="code" href="classllvm_1_1BasicBlock.html">BasicBlock</a> *CopyEnd = <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l02121"></a><span class="lineno"> 2121</span>&#160; </div>
<div class="line"><a name="l02122"></a><span class="lineno"> 2122</span>&#160;  <span class="comment">// If entry block is terminated, split to preserve the branch to following</span></div>
<div class="line"><a name="l02123"></a><span class="lineno"> 2123</span>&#160;  <span class="comment">// basic block (i.e. OMP.Entry.Next), otherwise, leave everything as is.</span></div>
<div class="line"><a name="l02124"></a><span class="lineno"> 2124</span>&#160;  <span class="keywordflow">if</span> (isa_and_nonnull&lt;BranchInst&gt;(OMP_Entry-&gt;<a class="code" href="classllvm_1_1BasicBlock.html#a71a9eabc4318b2fc34f83b01dfee484b">getTerminator</a>())) {</div>
<div class="line"><a name="l02125"></a><span class="lineno"> 2125</span>&#160;    CopyEnd = OMP_Entry-&gt;<a class="code" href="classllvm_1_1BasicBlock.html#a52c990590792c91dd20b6d45acebe359">splitBasicBlock</a>(OMP_Entry-&gt;<a class="code" href="classllvm_1_1BasicBlock.html#a71a9eabc4318b2fc34f83b01dfee484b">getTerminator</a>(),</div>
<div class="line"><a name="l02126"></a><span class="lineno"> 2126</span>&#160;                                         <span class="stringliteral">&quot;copyin.not.master.end&quot;</span>);</div>
<div class="line"><a name="l02127"></a><span class="lineno"> 2127</span>&#160;    OMP_Entry-&gt;<a class="code" href="classllvm_1_1BasicBlock.html#a71a9eabc4318b2fc34f83b01dfee484b">getTerminator</a>()-&gt;<a class="code" href="classllvm_1_1Instruction.html#ae6b978645b8ac72d1a35e1298ffdd4f0">eraseFromParent</a>();</div>
<div class="line"><a name="l02128"></a><span class="lineno"> 2128</span>&#160;  } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l02129"></a><span class="lineno"> 2129</span>&#160;    CopyEnd =</div>
<div class="line"><a name="l02130"></a><span class="lineno"> 2130</span>&#160;        <a class="code" href="classllvm_1_1BasicBlock.html#ace940beeee97c222f836fe0ac70f6cf5">BasicBlock::Create</a>(<a class="code" href="lib_2Target_2X86_2README_8txt.html#ac88fe1d3a61b056a4f64fbbb156a62ff">M</a>.getContext(), <span class="stringliteral">&quot;copyin.not.master.end&quot;</span>, CurFn);</div>
<div class="line"><a name="l02131"></a><span class="lineno"> 2131</span>&#160;  }</div>
<div class="line"><a name="l02132"></a><span class="lineno"> 2132</span>&#160; </div>
<div class="line"><a name="l02133"></a><span class="lineno"> 2133</span>&#160;  <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.SetInsertPoint(OMP_Entry);</div>
<div class="line"><a name="l02134"></a><span class="lineno"> 2134</span>&#160;  <a class="code" href="classllvm_1_1Value.html">Value</a> *MasterPtr = <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.CreatePtrToInt(MasterAddr, IntPtrTy);</div>
<div class="line"><a name="l02135"></a><span class="lineno"> 2135</span>&#160;  <a class="code" href="classllvm_1_1Value.html">Value</a> *PrivatePtr = <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.CreatePtrToInt(PrivateAddr, IntPtrTy);</div>
<div class="line"><a name="l02136"></a><span class="lineno"> 2136</span>&#160;  <a class="code" href="classllvm_1_1Value.html">Value</a> *<a class="code" href="lib_2Target_2X86_2README_8txt.html#ad5da9a19280b84509a8d1cac2290a0ad">cmp</a> = <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.CreateICmpNE(MasterPtr, PrivatePtr);</div>
<div class="line"><a name="l02137"></a><span class="lineno"> 2137</span>&#160;  <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.CreateCondBr(<a class="code" href="lib_2Target_2X86_2README_8txt.html#ad5da9a19280b84509a8d1cac2290a0ad">cmp</a>, CopyBegin, CopyEnd);</div>
<div class="line"><a name="l02138"></a><span class="lineno"> 2138</span>&#160; </div>
<div class="line"><a name="l02139"></a><span class="lineno"> 2139</span>&#160;  <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.SetInsertPoint(CopyBegin);</div>
<div class="line"><a name="l02140"></a><span class="lineno"> 2140</span>&#160;  <span class="keywordflow">if</span> (BranchtoEnd)</div>
<div class="line"><a name="l02141"></a><span class="lineno"> 2141</span>&#160;    <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.SetInsertPoint(<a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.CreateBr(CopyEnd));</div>
<div class="line"><a name="l02142"></a><span class="lineno"> 2142</span>&#160; </div>
<div class="line"><a name="l02143"></a><span class="lineno"> 2143</span>&#160;  <span class="keywordflow">return</span> <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.saveIP();</div>
<div class="line"><a name="l02144"></a><span class="lineno"> 2144</span>&#160;}</div>
<div class="line"><a name="l02145"></a><span class="lineno"> 2145</span>&#160; </div>
<div class="line"><a name="l02146"></a><span class="lineno"><a class="line" href="classllvm_1_1OpenMPIRBuilder.html#a81bc7a57bd0332843aed6275ba47bee0"> 2146</a></span>&#160;<a class="code" href="classllvm_1_1CallInst.html">CallInst</a> *<a class="code" href="classllvm_1_1OpenMPIRBuilder.html#a81bc7a57bd0332843aed6275ba47bee0">OpenMPIRBuilder::createOMPAlloc</a>(<span class="keyword">const</span> <a class="code" href="structllvm_1_1OpenMPIRBuilder_1_1LocationDescription.html">LocationDescription</a> &amp;Loc,</div>
<div class="line"><a name="l02147"></a><span class="lineno"> 2147</span>&#160;                                          <a class="code" href="classllvm_1_1Value.html">Value</a> *<a class="code" href="namespacellvm_1_1Check.html#a067ee17412e800f03802fa9517685732a3450a9712780ac26b071f9da4288a396">Size</a>, <a class="code" href="classllvm_1_1Value.html">Value</a> *<a class="code" href="RegAllocBasic_8cpp.html#ad5d00e1d77644d95847b9bf8da12b759">Allocator</a>,</div>
<div class="line"><a name="l02148"></a><span class="lineno"> 2148</span>&#160;                                          std::string <a class="code" href="namespacellvm_1_1GraphProgram.html#a0ad4685976f8c4d4a697a53fbe05d10b">Name</a>) {</div>
<div class="line"><a name="l02149"></a><span class="lineno"> 2149</span>&#160;  <a class="code" href="classllvm_1_1IRBuilder.html">IRBuilder&lt;&gt;::InsertPointGuard</a> IPG(<a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>);</div>
<div class="line"><a name="l02150"></a><span class="lineno"> 2150</span>&#160;  <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.restoreIP(Loc.<a class="code" href="structllvm_1_1OpenMPIRBuilder_1_1LocationDescription.html#aa15e9d88f98f6d7a0898e6aff4753040">IP</a>);</div>
<div class="line"><a name="l02151"></a><span class="lineno"> 2151</span>&#160; </div>
<div class="line"><a name="l02152"></a><span class="lineno"> 2152</span>&#160;  <a class="code" href="classllvm_1_1Constant.html">Constant</a> *SrcLocStr = getOrCreateSrcLocStr(Loc);</div>
<div class="line"><a name="l02153"></a><span class="lineno"> 2153</span>&#160;  <a class="code" href="classllvm_1_1Value.html">Value</a> *Ident = getOrCreateIdent(SrcLocStr);</div>
<div class="line"><a name="l02154"></a><span class="lineno"> 2154</span>&#160;  <a class="code" href="classllvm_1_1Value.html">Value</a> *ThreadId = getOrCreateThreadID(Ident);</div>
<div class="line"><a name="l02155"></a><span class="lineno"> 2155</span>&#160;  <a class="code" href="classllvm_1_1Value.html">Value</a> *<a class="code" href="namespacellvm_1_1AMDGPU_1_1HSAMD_1_1Kernel_1_1Key.html#a1958a762261549463a280bac3274d6d5">Args</a>[] = {ThreadId, <a class="code" href="namespacellvm_1_1Check.html#a067ee17412e800f03802fa9517685732a3450a9712780ac26b071f9da4288a396">Size</a>, <a class="code" href="RegAllocBasic_8cpp.html#ad5d00e1d77644d95847b9bf8da12b759">Allocator</a>};</div>
<div class="line"><a name="l02156"></a><span class="lineno"> 2156</span>&#160; </div>
<div class="line"><a name="l02157"></a><span class="lineno"> 2157</span>&#160;  <a class="code" href="classllvm_1_1Function.html">Function</a> *Fn = getOrCreateRuntimeFunctionPtr(OMPRTL___kmpc_alloc);</div>
<div class="line"><a name="l02158"></a><span class="lineno"> 2158</span>&#160; </div>
<div class="line"><a name="l02159"></a><span class="lineno"> 2159</span>&#160;  <span class="keywordflow">return</span> <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.CreateCall(Fn, <a class="code" href="namespacellvm_1_1AMDGPU_1_1HSAMD_1_1Kernel_1_1Key.html#a1958a762261549463a280bac3274d6d5">Args</a>, <a class="code" href="namespacellvm_1_1GraphProgram.html#a0ad4685976f8c4d4a697a53fbe05d10b">Name</a>);</div>
<div class="line"><a name="l02160"></a><span class="lineno"> 2160</span>&#160;}</div>
<div class="line"><a name="l02161"></a><span class="lineno"> 2161</span>&#160; </div>
<div class="line"><a name="l02162"></a><span class="lineno"><a class="line" href="classllvm_1_1OpenMPIRBuilder.html#a807c913d5889a80440269b74d5755d6c"> 2162</a></span>&#160;<a class="code" href="classllvm_1_1CallInst.html">CallInst</a> *<a class="code" href="classllvm_1_1OpenMPIRBuilder.html#a807c913d5889a80440269b74d5755d6c">OpenMPIRBuilder::createOMPFree</a>(<span class="keyword">const</span> <a class="code" href="structllvm_1_1OpenMPIRBuilder_1_1LocationDescription.html">LocationDescription</a> &amp;Loc,</div>
<div class="line"><a name="l02163"></a><span class="lineno"> 2163</span>&#160;                                         <a class="code" href="classllvm_1_1Value.html">Value</a> *<a class="code" href="ELFObjHandler_8cpp.html#a9df82a8be2f17e80535a8937bf23e022">Addr</a>, <a class="code" href="classllvm_1_1Value.html">Value</a> *<a class="code" href="RegAllocBasic_8cpp.html#ad5d00e1d77644d95847b9bf8da12b759">Allocator</a>,</div>
<div class="line"><a name="l02164"></a><span class="lineno"> 2164</span>&#160;                                         std::string <a class="code" href="namespacellvm_1_1GraphProgram.html#a0ad4685976f8c4d4a697a53fbe05d10b">Name</a>) {</div>
<div class="line"><a name="l02165"></a><span class="lineno"> 2165</span>&#160;  <a class="code" href="classllvm_1_1IRBuilder.html">IRBuilder&lt;&gt;::InsertPointGuard</a> IPG(<a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>);</div>
<div class="line"><a name="l02166"></a><span class="lineno"> 2166</span>&#160;  <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.restoreIP(Loc.<a class="code" href="structllvm_1_1OpenMPIRBuilder_1_1LocationDescription.html#aa15e9d88f98f6d7a0898e6aff4753040">IP</a>);</div>
<div class="line"><a name="l02167"></a><span class="lineno"> 2167</span>&#160; </div>
<div class="line"><a name="l02168"></a><span class="lineno"> 2168</span>&#160;  <a class="code" href="classllvm_1_1Constant.html">Constant</a> *SrcLocStr = getOrCreateSrcLocStr(Loc);</div>
<div class="line"><a name="l02169"></a><span class="lineno"> 2169</span>&#160;  <a class="code" href="classllvm_1_1Value.html">Value</a> *Ident = getOrCreateIdent(SrcLocStr);</div>
<div class="line"><a name="l02170"></a><span class="lineno"> 2170</span>&#160;  <a class="code" href="classllvm_1_1Value.html">Value</a> *ThreadId = getOrCreateThreadID(Ident);</div>
<div class="line"><a name="l02171"></a><span class="lineno"> 2171</span>&#160;  <a class="code" href="classllvm_1_1Value.html">Value</a> *<a class="code" href="namespacellvm_1_1AMDGPU_1_1HSAMD_1_1Kernel_1_1Key.html#a1958a762261549463a280bac3274d6d5">Args</a>[] = {ThreadId, <a class="code" href="ELFObjHandler_8cpp.html#a9df82a8be2f17e80535a8937bf23e022">Addr</a>, <a class="code" href="RegAllocBasic_8cpp.html#ad5d00e1d77644d95847b9bf8da12b759">Allocator</a>};</div>
<div class="line"><a name="l02172"></a><span class="lineno"> 2172</span>&#160;  <a class="code" href="classllvm_1_1Function.html">Function</a> *Fn = getOrCreateRuntimeFunctionPtr(OMPRTL___kmpc_free);</div>
<div class="line"><a name="l02173"></a><span class="lineno"> 2173</span>&#160;  <span class="keywordflow">return</span> <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.CreateCall(Fn, <a class="code" href="namespacellvm_1_1AMDGPU_1_1HSAMD_1_1Kernel_1_1Key.html#a1958a762261549463a280bac3274d6d5">Args</a>, <a class="code" href="namespacellvm_1_1GraphProgram.html#a0ad4685976f8c4d4a697a53fbe05d10b">Name</a>);</div>
<div class="line"><a name="l02174"></a><span class="lineno"> 2174</span>&#160;}</div>
<div class="line"><a name="l02175"></a><span class="lineno"> 2175</span>&#160; </div>
<div class="line"><a name="l02176"></a><span class="lineno"><a class="line" href="classllvm_1_1OpenMPIRBuilder.html#ad89dcb3cd8a39ae57a69487c2988dace"> 2176</a></span>&#160;<a class="code" href="classllvm_1_1CallInst.html">CallInst</a> *<a class="code" href="classllvm_1_1OpenMPIRBuilder.html#ad89dcb3cd8a39ae57a69487c2988dace">OpenMPIRBuilder::createCachedThreadPrivate</a>(</div>
<div class="line"><a name="l02177"></a><span class="lineno"> 2177</span>&#160;    <span class="keyword">const</span> <a class="code" href="structllvm_1_1OpenMPIRBuilder_1_1LocationDescription.html">LocationDescription</a> &amp;Loc, <a class="code" href="classllvm_1_1Value.html">llvm::Value</a> *Pointer,</div>
<div class="line"><a name="l02178"></a><span class="lineno"> 2178</span>&#160;    <a class="code" href="classllvm_1_1ConstantInt.html">llvm::ConstantInt</a> *<a class="code" href="namespacellvm_1_1Check.html#a067ee17412e800f03802fa9517685732a3450a9712780ac26b071f9da4288a396">Size</a>, <span class="keyword">const</span> <a class="code" href="classllvm_1_1Twine.html">llvm::Twine</a> &amp;<a class="code" href="namespacellvm_1_1GraphProgram.html#a0ad4685976f8c4d4a697a53fbe05d10b">Name</a>) {</div>
<div class="line"><a name="l02179"></a><span class="lineno"> 2179</span>&#160;  <a class="code" href="classllvm_1_1IRBuilder.html">IRBuilder&lt;&gt;::InsertPointGuard</a> IPG(<a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>);</div>
<div class="line"><a name="l02180"></a><span class="lineno"> 2180</span>&#160;  <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.restoreIP(Loc.<a class="code" href="structllvm_1_1OpenMPIRBuilder_1_1LocationDescription.html#aa15e9d88f98f6d7a0898e6aff4753040">IP</a>);</div>
<div class="line"><a name="l02181"></a><span class="lineno"> 2181</span>&#160; </div>
<div class="line"><a name="l02182"></a><span class="lineno"> 2182</span>&#160;  <a class="code" href="classllvm_1_1Constant.html">Constant</a> *SrcLocStr = getOrCreateSrcLocStr(Loc);</div>
<div class="line"><a name="l02183"></a><span class="lineno"> 2183</span>&#160;  <a class="code" href="classllvm_1_1Value.html">Value</a> *Ident = getOrCreateIdent(SrcLocStr);</div>
<div class="line"><a name="l02184"></a><span class="lineno"> 2184</span>&#160;  <a class="code" href="classllvm_1_1Value.html">Value</a> *ThreadId = getOrCreateThreadID(Ident);</div>
<div class="line"><a name="l02185"></a><span class="lineno"> 2185</span>&#160;  <a class="code" href="classllvm_1_1Constant.html">Constant</a> *ThreadPrivateCache =</div>
<div class="line"><a name="l02186"></a><span class="lineno"> 2186</span>&#160;      getOrCreateOMPInternalVariable(Int8PtrPtr, <a class="code" href="namespacellvm_1_1GraphProgram.html#a0ad4685976f8c4d4a697a53fbe05d10b">Name</a>);</div>
<div class="line"><a name="l02187"></a><span class="lineno"> 2187</span>&#160;  <a class="code" href="classllvm_1_1Value.html">llvm::Value</a> *<a class="code" href="namespacellvm_1_1AMDGPU_1_1HSAMD_1_1Kernel_1_1Key.html#a1958a762261549463a280bac3274d6d5">Args</a>[] = {Ident, ThreadId, Pointer, <a class="code" href="namespacellvm_1_1Check.html#a067ee17412e800f03802fa9517685732a3450a9712780ac26b071f9da4288a396">Size</a>, ThreadPrivateCache};</div>
<div class="line"><a name="l02188"></a><span class="lineno"> 2188</span>&#160; </div>
<div class="line"><a name="l02189"></a><span class="lineno"> 2189</span>&#160;  <a class="code" href="classllvm_1_1Function.html">Function</a> *Fn =</div>
<div class="line"><a name="l02190"></a><span class="lineno"> 2190</span>&#160;      getOrCreateRuntimeFunctionPtr(OMPRTL___kmpc_threadprivate_cached);</div>
<div class="line"><a name="l02191"></a><span class="lineno"> 2191</span>&#160; </div>
<div class="line"><a name="l02192"></a><span class="lineno"> 2192</span>&#160;  <span class="keywordflow">return</span> <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.CreateCall(Fn, <a class="code" href="namespacellvm_1_1AMDGPU_1_1HSAMD_1_1Kernel_1_1Key.html#a1958a762261549463a280bac3274d6d5">Args</a>);</div>
<div class="line"><a name="l02193"></a><span class="lineno"> 2193</span>&#160;}</div>
<div class="line"><a name="l02194"></a><span class="lineno"> 2194</span>&#160; </div>
<div class="line"><a name="l02195"></a><span class="lineno"> 2195</span>&#160;<a class="code" href="classllvm_1_1OpenMPIRBuilder.html#aafc1886793b898052f87edd7e9fdbaa3">OpenMPIRBuilder::InsertPointTy</a></div>
<div class="line"><a name="l02196"></a><span class="lineno"><a class="line" href="classllvm_1_1OpenMPIRBuilder.html#a631e1d17c22a71e16034ea34407fe97a"> 2196</a></span>&#160;<a class="code" href="classllvm_1_1OpenMPIRBuilder.html#a631e1d17c22a71e16034ea34407fe97a">OpenMPIRBuilder::createTargetInit</a>(<span class="keyword">const</span> <a class="code" href="structllvm_1_1OpenMPIRBuilder_1_1LocationDescription.html">LocationDescription</a> &amp;Loc, <span class="keywordtype">bool</span> IsSPMD, <span class="keywordtype">bool</span> RequiresFullRuntime) {</div>
<div class="line"><a name="l02197"></a><span class="lineno"> 2197</span>&#160;  <span class="keywordflow">if</span> (!updateToLocation(Loc))</div>
<div class="line"><a name="l02198"></a><span class="lineno"> 2198</span>&#160;    <span class="keywordflow">return</span> Loc.<a class="code" href="structllvm_1_1OpenMPIRBuilder_1_1LocationDescription.html#aa15e9d88f98f6d7a0898e6aff4753040">IP</a>;</div>
<div class="line"><a name="l02199"></a><span class="lineno"> 2199</span>&#160; </div>
<div class="line"><a name="l02200"></a><span class="lineno"> 2200</span>&#160;  <a class="code" href="classllvm_1_1Constant.html">Constant</a> *SrcLocStr = getOrCreateSrcLocStr(Loc);</div>
<div class="line"><a name="l02201"></a><span class="lineno"> 2201</span>&#160;  <a class="code" href="classllvm_1_1Value.html">Value</a> *Ident = getOrCreateIdent(SrcLocStr);</div>
<div class="line"><a name="l02202"></a><span class="lineno"> 2202</span>&#160;  <a class="code" href="classllvm_1_1ConstantInt.html">ConstantInt</a> *IsSPMDVal = <a class="code" href="classllvm_1_1ConstantInt.html#afe7d477c6022fe7123b90e3b39c58e69">ConstantInt::getBool</a>(<a class="code" href="namespacellvm_1_1pdb.html#a434cfa04e4ed34b7a901378557d4ca9ea786eecab07351b4cc9e4c33f4cf5691e">Int32</a>-&gt;getContext(), IsSPMD);</div>
<div class="line"><a name="l02203"></a><span class="lineno"> 2203</span>&#160;  <a class="code" href="classllvm_1_1ConstantInt.html">ConstantInt</a> *UseGenericStateMachine =</div>
<div class="line"><a name="l02204"></a><span class="lineno"> 2204</span>&#160;      <a class="code" href="classllvm_1_1ConstantInt.html#afe7d477c6022fe7123b90e3b39c58e69">ConstantInt::getBool</a>(<a class="code" href="namespacellvm_1_1pdb.html#a434cfa04e4ed34b7a901378557d4ca9ea786eecab07351b4cc9e4c33f4cf5691e">Int32</a>-&gt;getContext(), !IsSPMD);</div>
<div class="line"><a name="l02205"></a><span class="lineno"> 2205</span>&#160;  <a class="code" href="classllvm_1_1ConstantInt.html">ConstantInt</a> *RequiresFullRuntimeVal = <a class="code" href="classllvm_1_1ConstantInt.html#afe7d477c6022fe7123b90e3b39c58e69">ConstantInt::getBool</a>(<a class="code" href="namespacellvm_1_1pdb.html#a434cfa04e4ed34b7a901378557d4ca9ea786eecab07351b4cc9e4c33f4cf5691e">Int32</a>-&gt;getContext(), RequiresFullRuntime);</div>
<div class="line"><a name="l02206"></a><span class="lineno"> 2206</span>&#160; </div>
<div class="line"><a name="l02207"></a><span class="lineno"> 2207</span>&#160;  <a class="code" href="classllvm_1_1Function.html">Function</a> *Fn = getOrCreateRuntimeFunctionPtr(</div>
<div class="line"><a name="l02208"></a><span class="lineno"> 2208</span>&#160;      omp::RuntimeFunction::OMPRTL___kmpc_target_init);</div>
<div class="line"><a name="l02209"></a><span class="lineno"> 2209</span>&#160; </div>
<div class="line"><a name="l02210"></a><span class="lineno"> 2210</span>&#160;  <a class="code" href="classllvm_1_1CallInst.html">CallInst</a> *ThreadKind =</div>
<div class="line"><a name="l02211"></a><span class="lineno"> 2211</span>&#160;      <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.CreateCall(Fn, {Ident, IsSPMDVal, UseGenericStateMachine, RequiresFullRuntimeVal});</div>
<div class="line"><a name="l02212"></a><span class="lineno"> 2212</span>&#160; </div>
<div class="line"><a name="l02213"></a><span class="lineno"> 2213</span>&#160;  <a class="code" href="classllvm_1_1Value.html">Value</a> *ExecUserCode = <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.CreateICmpEQ(</div>
<div class="line"><a name="l02214"></a><span class="lineno"> 2214</span>&#160;      ThreadKind, <a class="code" href="classllvm_1_1ConstantInt.html#a969709dd49c28865a482d8b870f87c46">ConstantInt::get</a>(ThreadKind-&gt;<a class="code" href="classllvm_1_1Value.html#a6393a2d4fe7e10b28a0dcc35f881567b">getType</a>(), -1), <span class="stringliteral">&quot;exec_user_code&quot;</span>);</div>
<div class="line"><a name="l02215"></a><span class="lineno"> 2215</span>&#160; </div>
<div class="line"><a name="l02216"></a><span class="lineno"> 2216</span>&#160;  <span class="comment">// ThreadKind = __kmpc_target_init(...)</span></div>
<div class="line"><a name="l02217"></a><span class="lineno"> 2217</span>&#160;  <span class="comment">// if (ThreadKind == -1)</span></div>
<div class="line"><a name="l02218"></a><span class="lineno"> 2218</span>&#160;  <span class="comment">//   user_code</span></div>
<div class="line"><a name="l02219"></a><span class="lineno"> 2219</span>&#160;  <span class="comment">// else</span></div>
<div class="line"><a name="l02220"></a><span class="lineno"> 2220</span>&#160;  <span class="comment">//   return;</span></div>
<div class="line"><a name="l02221"></a><span class="lineno"> 2221</span>&#160; </div>
<div class="line"><a name="l02222"></a><span class="lineno"> 2222</span>&#160;  <span class="keyword">auto</span> *UI = <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.CreateUnreachable();</div>
<div class="line"><a name="l02223"></a><span class="lineno"> 2223</span>&#160;  <a class="code" href="classllvm_1_1BasicBlock.html">BasicBlock</a> *CheckBB = UI-&gt;<a class="code" href="classllvm_1_1BasicBlock.html#a38bee869ad41aebfef3de2641b12004c">getParent</a>();</div>
<div class="line"><a name="l02224"></a><span class="lineno"> 2224</span>&#160;  <a class="code" href="classllvm_1_1BasicBlock.html">BasicBlock</a> *UserCodeEntryBB = CheckBB-&gt;<a class="code" href="classllvm_1_1BasicBlock.html#a52c990590792c91dd20b6d45acebe359">splitBasicBlock</a>(UI, <span class="stringliteral">&quot;user_code.entry&quot;</span>);</div>
<div class="line"><a name="l02225"></a><span class="lineno"> 2225</span>&#160; </div>
<div class="line"><a name="l02226"></a><span class="lineno"> 2226</span>&#160;  <a class="code" href="classllvm_1_1BasicBlock.html">BasicBlock</a> *WorkerExitBB = <a class="code" href="classllvm_1_1BasicBlock.html#ace940beeee97c222f836fe0ac70f6cf5">BasicBlock::Create</a>(</div>
<div class="line"><a name="l02227"></a><span class="lineno"> 2227</span>&#160;      CheckBB-&gt;<a class="code" href="classllvm_1_1BasicBlock.html#aa286a0f7f5d38488d593bb7ef0ba183e">getContext</a>(), <span class="stringliteral">&quot;worker.exit&quot;</span>, CheckBB-&gt;<a class="code" href="classllvm_1_1BasicBlock.html#a38bee869ad41aebfef3de2641b12004c">getParent</a>());</div>
<div class="line"><a name="l02228"></a><span class="lineno"> 2228</span>&#160;  <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.SetInsertPoint(WorkerExitBB);</div>
<div class="line"><a name="l02229"></a><span class="lineno"> 2229</span>&#160;  <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.CreateRetVoid();</div>
<div class="line"><a name="l02230"></a><span class="lineno"> 2230</span>&#160; </div>
<div class="line"><a name="l02231"></a><span class="lineno"> 2231</span>&#160;  <span class="keyword">auto</span> *CheckBBTI = CheckBB-&gt;<a class="code" href="classllvm_1_1BasicBlock.html#a71a9eabc4318b2fc34f83b01dfee484b">getTerminator</a>();</div>
<div class="line"><a name="l02232"></a><span class="lineno"> 2232</span>&#160;  <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.SetInsertPoint(CheckBBTI);</div>
<div class="line"><a name="l02233"></a><span class="lineno"> 2233</span>&#160;  <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.CreateCondBr(ExecUserCode, UI-&gt;getParent(), WorkerExitBB);</div>
<div class="line"><a name="l02234"></a><span class="lineno"> 2234</span>&#160; </div>
<div class="line"><a name="l02235"></a><span class="lineno"> 2235</span>&#160;  CheckBBTI-&gt;eraseFromParent();</div>
<div class="line"><a name="l02236"></a><span class="lineno"> 2236</span>&#160;  UI-&gt;eraseFromParent();</div>
<div class="line"><a name="l02237"></a><span class="lineno"> 2237</span>&#160; </div>
<div class="line"><a name="l02238"></a><span class="lineno"> 2238</span>&#160;  <span class="comment">// Continue in the &quot;user_code&quot; block, see diagram above and in</span></div>
<div class="line"><a name="l02239"></a><span class="lineno"> 2239</span>&#160;  <span class="comment">// openmp/libomptarget/deviceRTLs/common/include/target.h .</span></div>
<div class="line"><a name="l02240"></a><span class="lineno"> 2240</span>&#160;  <span class="keywordflow">return</span> <a class="code" href="classllvm_1_1OpenMPIRBuilder.html#aafc1886793b898052f87edd7e9fdbaa3">InsertPointTy</a>(UserCodeEntryBB, UserCodeEntryBB-&gt;<a class="code" href="classllvm_1_1BasicBlock.html#a161fd4e9fa5367f64c2a4c9e921c3ad3">getFirstInsertionPt</a>());</div>
<div class="line"><a name="l02241"></a><span class="lineno"> 2241</span>&#160;}</div>
<div class="line"><a name="l02242"></a><span class="lineno"> 2242</span>&#160; </div>
<div class="line"><a name="l02243"></a><span class="lineno"><a class="line" href="classllvm_1_1OpenMPIRBuilder.html#a97cba4631943c9810c80075665526f16"> 2243</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="classllvm_1_1OpenMPIRBuilder.html#a97cba4631943c9810c80075665526f16">OpenMPIRBuilder::createTargetDeinit</a>(<span class="keyword">const</span> <a class="code" href="structllvm_1_1OpenMPIRBuilder_1_1LocationDescription.html">LocationDescription</a> &amp;Loc,</div>
<div class="line"><a name="l02244"></a><span class="lineno"> 2244</span>&#160;                                         <span class="keywordtype">bool</span> IsSPMD, <span class="keywordtype">bool</span> RequiresFullRuntime) {</div>
<div class="line"><a name="l02245"></a><span class="lineno"> 2245</span>&#160;  <span class="keywordflow">if</span> (!updateToLocation(Loc))</div>
<div class="line"><a name="l02246"></a><span class="lineno"> 2246</span>&#160;    <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l02247"></a><span class="lineno"> 2247</span>&#160; </div>
<div class="line"><a name="l02248"></a><span class="lineno"> 2248</span>&#160;  <a class="code" href="classllvm_1_1Constant.html">Constant</a> *SrcLocStr = getOrCreateSrcLocStr(Loc);</div>
<div class="line"><a name="l02249"></a><span class="lineno"> 2249</span>&#160;  <a class="code" href="classllvm_1_1Value.html">Value</a> *Ident = getOrCreateIdent(SrcLocStr);</div>
<div class="line"><a name="l02250"></a><span class="lineno"> 2250</span>&#160;  <a class="code" href="classllvm_1_1ConstantInt.html">ConstantInt</a> *IsSPMDVal = <a class="code" href="classllvm_1_1ConstantInt.html#afe7d477c6022fe7123b90e3b39c58e69">ConstantInt::getBool</a>(<a class="code" href="namespacellvm_1_1pdb.html#a434cfa04e4ed34b7a901378557d4ca9ea786eecab07351b4cc9e4c33f4cf5691e">Int32</a>-&gt;getContext(), IsSPMD);</div>
<div class="line"><a name="l02251"></a><span class="lineno"> 2251</span>&#160;  <a class="code" href="classllvm_1_1ConstantInt.html">ConstantInt</a> *RequiresFullRuntimeVal = <a class="code" href="classllvm_1_1ConstantInt.html#afe7d477c6022fe7123b90e3b39c58e69">ConstantInt::getBool</a>(<a class="code" href="namespacellvm_1_1pdb.html#a434cfa04e4ed34b7a901378557d4ca9ea786eecab07351b4cc9e4c33f4cf5691e">Int32</a>-&gt;getContext(), RequiresFullRuntime);</div>
<div class="line"><a name="l02252"></a><span class="lineno"> 2252</span>&#160; </div>
<div class="line"><a name="l02253"></a><span class="lineno"> 2253</span>&#160;  <a class="code" href="classllvm_1_1Function.html">Function</a> *Fn = getOrCreateRuntimeFunctionPtr(</div>
<div class="line"><a name="l02254"></a><span class="lineno"> 2254</span>&#160;      omp::RuntimeFunction::OMPRTL___kmpc_target_deinit);</div>
<div class="line"><a name="l02255"></a><span class="lineno"> 2255</span>&#160; </div>
<div class="line"><a name="l02256"></a><span class="lineno"> 2256</span>&#160;  <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.CreateCall(Fn, {Ident, IsSPMDVal, RequiresFullRuntimeVal});</div>
<div class="line"><a name="l02257"></a><span class="lineno"> 2257</span>&#160;}</div>
<div class="line"><a name="l02258"></a><span class="lineno"> 2258</span>&#160; </div>
<div class="line"><a name="l02259"></a><span class="lineno"> 2259</span>&#160;std::string OpenMPIRBuilder::getNameWithSeparators(<a class="code" href="classllvm_1_1ArrayRef.html">ArrayRef&lt;StringRef&gt;</a> Parts,</div>
<div class="line"><a name="l02260"></a><span class="lineno"> 2260</span>&#160;                                                   <a class="code" href="classllvm_1_1StringRef.html">StringRef</a> FirstSeparator,</div>
<div class="line"><a name="l02261"></a><span class="lineno"> 2261</span>&#160;                                                   <a class="code" href="classllvm_1_1StringRef.html">StringRef</a> Separator) {</div>
<div class="line"><a name="l02262"></a><span class="lineno"> 2262</span>&#160;  <a class="code" href="classllvm_1_1SmallString.html">SmallString&lt;128&gt;</a> Buffer;</div>
<div class="line"><a name="l02263"></a><span class="lineno"> 2263</span>&#160;  <a class="code" href="classllvm_1_1raw__svector__ostream.html">llvm::raw_svector_ostream</a> OS(Buffer);</div>
<div class="line"><a name="l02264"></a><span class="lineno"> 2264</span>&#160;  <a class="code" href="classllvm_1_1StringRef.html">StringRef</a> Sep = FirstSeparator;</div>
<div class="line"><a name="l02265"></a><span class="lineno"> 2265</span>&#160;  <span class="keywordflow">for</span> (<a class="code" href="classllvm_1_1StringRef.html">StringRef</a> Part : Parts) {</div>
<div class="line"><a name="l02266"></a><span class="lineno"> 2266</span>&#160;    OS &lt;&lt; Sep &lt;&lt; Part;</div>
<div class="line"><a name="l02267"></a><span class="lineno"> 2267</span>&#160;    Sep = Separator;</div>
<div class="line"><a name="l02268"></a><span class="lineno"> 2268</span>&#160;  }</div>
<div class="line"><a name="l02269"></a><span class="lineno"> 2269</span>&#160;  <span class="keywordflow">return</span> OS.<a class="code" href="classllvm_1_1StringRef.html#ae2338e6739b671ea853b6154db368292">str</a>().str();</div>
<div class="line"><a name="l02270"></a><span class="lineno"> 2270</span>&#160;}</div>
<div class="line"><a name="l02271"></a><span class="lineno"> 2271</span>&#160; </div>
<div class="line"><a name="l02272"></a><span class="lineno"> 2272</span>&#160;<a class="code" href="classllvm_1_1Constant.html">Constant</a> *OpenMPIRBuilder::getOrCreateOMPInternalVariable(</div>
<div class="line"><a name="l02273"></a><span class="lineno"> 2273</span>&#160;    <a class="code" href="classllvm_1_1Type.html">llvm::Type</a> *Ty, <span class="keyword">const</span> <a class="code" href="classllvm_1_1Twine.html">llvm::Twine</a> &amp;<a class="code" href="namespacellvm_1_1GraphProgram.html#a0ad4685976f8c4d4a697a53fbe05d10b">Name</a>, <span class="keywordtype">unsigned</span> <a class="code" href="namespacellvm.html#a2c3c18bffdc25d969233c5448bdfe7eb">AddressSpace</a>) {</div>
<div class="line"><a name="l02274"></a><span class="lineno"> 2274</span>&#160;  <span class="comment">// TODO: Replace the twine arg with stringref to get rid of the conversion</span></div>
<div class="line"><a name="l02275"></a><span class="lineno"> 2275</span>&#160;  <span class="comment">// logic. However This is taken from current implementation in clang as is.</span></div>
<div class="line"><a name="l02276"></a><span class="lineno"> 2276</span>&#160;  <span class="comment">// Since this method is used in many places exclusively for OMP internal use</span></div>
<div class="line"><a name="l02277"></a><span class="lineno"> 2277</span>&#160;  <span class="comment">// we will keep it as is for temporarily until we move all users to the</span></div>
<div class="line"><a name="l02278"></a><span class="lineno"> 2278</span>&#160;  <span class="comment">// builder and then, if possible, fix it everywhere in one go.</span></div>
<div class="line"><a name="l02279"></a><span class="lineno"> 2279</span>&#160;  <a class="code" href="classllvm_1_1SmallString.html">SmallString&lt;256&gt;</a> Buffer;</div>
<div class="line"><a name="l02280"></a><span class="lineno"> 2280</span>&#160;  <a class="code" href="classllvm_1_1raw__svector__ostream.html">llvm::raw_svector_ostream</a> Out(Buffer);</div>
<div class="line"><a name="l02281"></a><span class="lineno"> 2281</span>&#160;  Out &lt;&lt; <a class="code" href="namespacellvm_1_1GraphProgram.html#a0ad4685976f8c4d4a697a53fbe05d10b">Name</a>;</div>
<div class="line"><a name="l02282"></a><span class="lineno"> 2282</span>&#160;  <a class="code" href="classllvm_1_1StringRef.html">StringRef</a> RuntimeName = Out.<a class="code" href="classllvm_1_1StringRef.html#ae2338e6739b671ea853b6154db368292">str</a>();</div>
<div class="line"><a name="l02283"></a><span class="lineno"> 2283</span>&#160;  <span class="keyword">auto</span> &amp;Elem = *InternalVars.try_emplace(RuntimeName, <span class="keyword">nullptr</span>).first;</div>
<div class="line"><a name="l02284"></a><span class="lineno"> 2284</span>&#160;  <span class="keywordflow">if</span> (Elem.second) {</div>
<div class="line"><a name="l02285"></a><span class="lineno"> 2285</span>&#160;    <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(Elem.second-&gt;getType()-&gt;getPointerElementType() == Ty &amp;&amp;</div>
<div class="line"><a name="l02286"></a><span class="lineno"> 2286</span>&#160;           <span class="stringliteral">&quot;OMP internal variable has different type than requested&quot;</span>);</div>
<div class="line"><a name="l02287"></a><span class="lineno"> 2287</span>&#160;  } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l02288"></a><span class="lineno"> 2288</span>&#160;    <span class="comment">// TODO: investigate the appropriate linkage type used for the global</span></div>
<div class="line"><a name="l02289"></a><span class="lineno"> 2289</span>&#160;    <span class="comment">// variable for possibly changing that to internal or private, or maybe</span></div>
<div class="line"><a name="l02290"></a><span class="lineno"> 2290</span>&#160;    <span class="comment">// create different versions of the function for different OMP internal</span></div>
<div class="line"><a name="l02291"></a><span class="lineno"> 2291</span>&#160;    <span class="comment">// variables.</span></div>
<div class="line"><a name="l02292"></a><span class="lineno"> 2292</span>&#160;    Elem.second = <span class="keyword">new</span> <a class="code" href="classllvm_1_1GlobalVariable.html">llvm::GlobalVariable</a>(</div>
<div class="line"><a name="l02293"></a><span class="lineno"> 2293</span>&#160;        M, Ty, <span class="comment">/*IsConstant*/</span> <span class="keyword">false</span>, <a class="code" href="classllvm_1_1GlobalValue.html#aedfa75f0c85c4aa85b257f066fbea57ca08c6a63ca3d9cdb39fb584655bf5c501">llvm::GlobalValue::CommonLinkage</a>,</div>
<div class="line"><a name="l02294"></a><span class="lineno"> 2294</span>&#160;        <a class="code" href="classllvm_1_1Constant.html#aa6574d526b3e38a28f688a7bb4325c2c">llvm::Constant::getNullValue</a>(Ty), Elem.first(),</div>
<div class="line"><a name="l02295"></a><span class="lineno"> 2295</span>&#160;        <span class="comment">/*InsertBefore=*/</span><span class="keyword">nullptr</span>, <a class="code" href="classllvm_1_1GlobalValue.html#a05c6b3b9372b56d130e005db4837da62a7483b56cbb22b39c485b4648ea3374b0">llvm::GlobalValue::NotThreadLocal</a>,</div>
<div class="line"><a name="l02296"></a><span class="lineno"> 2296</span>&#160;        <a class="code" href="namespacellvm.html#a2c3c18bffdc25d969233c5448bdfe7eb">AddressSpace</a>);</div>
<div class="line"><a name="l02297"></a><span class="lineno"> 2297</span>&#160;  }</div>
<div class="line"><a name="l02298"></a><span class="lineno"> 2298</span>&#160; </div>
<div class="line"><a name="l02299"></a><span class="lineno"> 2299</span>&#160;  <span class="keywordflow">return</span> Elem.second;</div>
<div class="line"><a name="l02300"></a><span class="lineno"> 2300</span>&#160;}</div>
<div class="line"><a name="l02301"></a><span class="lineno"> 2301</span>&#160; </div>
<div class="line"><a name="l02302"></a><span class="lineno"> 2302</span>&#160;<a class="code" href="classllvm_1_1Value.html">Value</a> *OpenMPIRBuilder::getOMPCriticalRegionLock(<a class="code" href="classllvm_1_1StringRef.html">StringRef</a> CriticalName) {</div>
<div class="line"><a name="l02303"></a><span class="lineno"> 2303</span>&#160;  std::string <a class="code" href="namespacellvm_1_1cl.html#afcbd4ecc474e2d218391d6d3027b086aa7861ef1db44eac8ea7a373cd7c53a7c5">Prefix</a> = <a class="code" href="classllvm_1_1Twine.html">Twine</a>(<span class="stringliteral">&quot;gomp_critical_user_&quot;</span>, CriticalName).<a class="code" href="classllvm_1_1Twine.html#a4c1c1093a7749409c70838678514cc7c">str</a>();</div>
<div class="line"><a name="l02304"></a><span class="lineno"> 2304</span>&#160;  std::string <a class="code" href="namespacellvm_1_1GraphProgram.html#a0ad4685976f8c4d4a697a53fbe05d10b">Name</a> = getNameWithSeparators({<a class="code" href="namespacellvm_1_1cl.html#afcbd4ecc474e2d218391d6d3027b086aa7861ef1db44eac8ea7a373cd7c53a7c5">Prefix</a>, <span class="stringliteral">&quot;var&quot;</span>}, <span class="stringliteral">&quot;.&quot;</span>, <span class="stringliteral">&quot;.&quot;</span>);</div>
<div class="line"><a name="l02305"></a><span class="lineno"> 2305</span>&#160;  <span class="keywordflow">return</span> getOrCreateOMPInternalVariable(KmpCriticalNameTy, <a class="code" href="namespacellvm_1_1GraphProgram.html#a0ad4685976f8c4d4a697a53fbe05d10b">Name</a>);</div>
<div class="line"><a name="l02306"></a><span class="lineno"> 2306</span>&#160;}</div>
<div class="line"><a name="l02307"></a><span class="lineno"> 2307</span>&#160; </div>
<div class="line"><a name="l02308"></a><span class="lineno"> 2308</span>&#160;<a class="code" href="classllvm_1_1GlobalVariable.html">GlobalVariable</a> *</div>
<div class="line"><a name="l02309"></a><span class="lineno"><a class="line" href="classllvm_1_1OpenMPIRBuilder.html#ad56f71598b251a0f66e590c94d01c67b"> 2309</a></span>&#160;<a class="code" href="classllvm_1_1OpenMPIRBuilder.html#ad56f71598b251a0f66e590c94d01c67b">OpenMPIRBuilder::createOffloadMaptypes</a>(<a class="code" href="classllvm_1_1SmallVectorImpl.html">SmallVectorImpl&lt;uint64_t&gt;</a> &amp;<a class="code" href="InjectTLIMappings_8cpp.html#a3d23fb8c590cd607d4b25a05e31c69f5">Mappings</a>,</div>
<div class="line"><a name="l02310"></a><span class="lineno"> 2310</span>&#160;                                       std::string <a class="code" href="namespacellvm_1_1tgtok.html#abbc5259d649363016626e2529fabe0c5a218a3df235546fc092fe0f463e6b714d">VarName</a>) {</div>
<div class="line"><a name="l02311"></a><span class="lineno"> 2311</span>&#160;  <a class="code" href="classllvm_1_1Constant.html">llvm::Constant</a> *MaptypesArrayInit =</div>
<div class="line"><a name="l02312"></a><span class="lineno"> 2312</span>&#160;      <a class="code" href="classllvm_1_1ConstantDataArray.html#acea0f5c18b4593bf27592dfcfe59de6f">llvm::ConstantDataArray::get</a>(<a class="code" href="lib_2Target_2X86_2README_8txt.html#ac88fe1d3a61b056a4f64fbbb156a62ff">M</a>.getContext(), <a class="code" href="InjectTLIMappings_8cpp.html#a3d23fb8c590cd607d4b25a05e31c69f5">Mappings</a>);</div>
<div class="line"><a name="l02313"></a><span class="lineno"> 2313</span>&#160;  <span class="keyword">auto</span> *MaptypesArrayGlobal = <span class="keyword">new</span> <a class="code" href="classllvm_1_1GlobalVariable.html">llvm::GlobalVariable</a>(</div>
<div class="line"><a name="l02314"></a><span class="lineno"> 2314</span>&#160;      <a class="code" href="lib_2Target_2X86_2README_8txt.html#ac88fe1d3a61b056a4f64fbbb156a62ff">M</a>, MaptypesArrayInit-&gt;<a class="code" href="classllvm_1_1Value.html#a6393a2d4fe7e10b28a0dcc35f881567b">getType</a>(),</div>
<div class="line"><a name="l02315"></a><span class="lineno"> 2315</span>&#160;      <span class="comment">/*isConstant=*/</span><span class="keyword">true</span>, <a class="code" href="classllvm_1_1GlobalValue.html#aedfa75f0c85c4aa85b257f066fbea57ca04ed141708c0fd16723d212502b046ae">llvm::GlobalValue::PrivateLinkage</a>, MaptypesArrayInit,</div>
<div class="line"><a name="l02316"></a><span class="lineno"> 2316</span>&#160;      <a class="code" href="namespacellvm_1_1tgtok.html#abbc5259d649363016626e2529fabe0c5a218a3df235546fc092fe0f463e6b714d">VarName</a>);</div>
<div class="line"><a name="l02317"></a><span class="lineno"> 2317</span>&#160;  MaptypesArrayGlobal-&gt;setUnnamedAddr(<a class="code" href="classllvm_1_1GlobalValue.html#ae8df4be75bfc50b1eadd74e85c25fa45a4cc6684df7b4a92b1dec6fce3264fac8">llvm::GlobalValue::UnnamedAddr::Global</a>);</div>
<div class="line"><a name="l02318"></a><span class="lineno"> 2318</span>&#160;  <span class="keywordflow">return</span> MaptypesArrayGlobal;</div>
<div class="line"><a name="l02319"></a><span class="lineno"> 2319</span>&#160;}</div>
<div class="line"><a name="l02320"></a><span class="lineno"> 2320</span>&#160; </div>
<div class="line"><a name="l02321"></a><span class="lineno"><a class="line" href="classllvm_1_1OpenMPIRBuilder.html#a544a84c75ac55356516cc7365cbe6f02"> 2321</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="classllvm_1_1OpenMPIRBuilder.html#a544a84c75ac55356516cc7365cbe6f02">OpenMPIRBuilder::createMapperAllocas</a>(<span class="keyword">const</span> <a class="code" href="structllvm_1_1OpenMPIRBuilder_1_1LocationDescription.html">LocationDescription</a> &amp;Loc,</div>
<div class="line"><a name="l02322"></a><span class="lineno"> 2322</span>&#160;                                          <a class="code" href="classllvm_1_1OpenMPIRBuilder.html#aafc1886793b898052f87edd7e9fdbaa3">InsertPointTy</a> AllocaIP,</div>
<div class="line"><a name="l02323"></a><span class="lineno"> 2323</span>&#160;                                          <span class="keywordtype">unsigned</span> NumOperands,</div>
<div class="line"><a name="l02324"></a><span class="lineno"> 2324</span>&#160;                                          <span class="keyword">struct</span> <a class="code" href="structllvm_1_1OpenMPIRBuilder_1_1MapperAllocas.html">MapperAllocas</a> &amp;<a class="code" href="structllvm_1_1OpenMPIRBuilder_1_1MapperAllocas.html">MapperAllocas</a>) {</div>
<div class="line"><a name="l02325"></a><span class="lineno"> 2325</span>&#160;  <span class="keywordflow">if</span> (!updateToLocation(Loc))</div>
<div class="line"><a name="l02326"></a><span class="lineno"> 2326</span>&#160;    <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l02327"></a><span class="lineno"> 2327</span>&#160; </div>
<div class="line"><a name="l02328"></a><span class="lineno"> 2328</span>&#160;  <span class="keyword">auto</span> *ArrI8PtrTy = <a class="code" href="classllvm_1_1ArrayType.html#adf411edc4f135b570ab218079474ce77">ArrayType::get</a>(Int8Ptr, NumOperands);</div>
<div class="line"><a name="l02329"></a><span class="lineno"> 2329</span>&#160;  <span class="keyword">auto</span> *ArrI64Ty = <a class="code" href="classllvm_1_1ArrayType.html#adf411edc4f135b570ab218079474ce77">ArrayType::get</a>(<a class="code" href="namespacellvm_1_1pdb.html#a434cfa04e4ed34b7a901378557d4ca9ea68311183bd3c447d90828b5e2c90f582">Int64</a>, NumOperands);</div>
<div class="line"><a name="l02330"></a><span class="lineno"> 2330</span>&#160;  <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.restoreIP(AllocaIP);</div>
<div class="line"><a name="l02331"></a><span class="lineno"> 2331</span>&#160;  <a class="code" href="classllvm_1_1AllocaInst.html">AllocaInst</a> *ArgsBase = <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.CreateAlloca(ArrI8PtrTy);</div>
<div class="line"><a name="l02332"></a><span class="lineno"> 2332</span>&#160;  <a class="code" href="classllvm_1_1AllocaInst.html">AllocaInst</a> *<a class="code" href="namespacellvm_1_1AMDGPU_1_1HSAMD_1_1Kernel_1_1Key.html#a1958a762261549463a280bac3274d6d5">Args</a> = <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.CreateAlloca(ArrI8PtrTy);</div>
<div class="line"><a name="l02333"></a><span class="lineno"> 2333</span>&#160;  <a class="code" href="classllvm_1_1AllocaInst.html">AllocaInst</a> *ArgSizes = <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.CreateAlloca(ArrI64Ty);</div>
<div class="line"><a name="l02334"></a><span class="lineno"> 2334</span>&#160;  <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.restoreIP(Loc.<a class="code" href="structllvm_1_1OpenMPIRBuilder_1_1LocationDescription.html#aa15e9d88f98f6d7a0898e6aff4753040">IP</a>);</div>
<div class="line"><a name="l02335"></a><span class="lineno"> 2335</span>&#160;  <a class="code" href="structllvm_1_1OpenMPIRBuilder_1_1MapperAllocas.html">MapperAllocas</a>.<a class="code" href="structllvm_1_1OpenMPIRBuilder_1_1MapperAllocas.html#a9d27bf73f53ec62c72ffd3137f47efde">ArgsBase</a> = ArgsBase;</div>
<div class="line"><a name="l02336"></a><span class="lineno"> 2336</span>&#160;  <a class="code" href="structllvm_1_1OpenMPIRBuilder_1_1MapperAllocas.html">MapperAllocas</a>.<a class="code" href="structllvm_1_1OpenMPIRBuilder_1_1MapperAllocas.html#aa90c5e272864414356fbeede370d5053">Args</a> = <a class="code" href="namespacellvm_1_1AMDGPU_1_1HSAMD_1_1Kernel_1_1Key.html#a1958a762261549463a280bac3274d6d5">Args</a>;</div>
<div class="line"><a name="l02337"></a><span class="lineno"> 2337</span>&#160;  <a class="code" href="structllvm_1_1OpenMPIRBuilder_1_1MapperAllocas.html">MapperAllocas</a>.<a class="code" href="structllvm_1_1OpenMPIRBuilder_1_1MapperAllocas.html#ad41f11a634af5e69560ac0279c74b100">ArgSizes</a> = ArgSizes;</div>
<div class="line"><a name="l02338"></a><span class="lineno"> 2338</span>&#160;}</div>
<div class="line"><a name="l02339"></a><span class="lineno"> 2339</span>&#160; </div>
<div class="line"><a name="l02340"></a><span class="lineno"><a class="line" href="classllvm_1_1OpenMPIRBuilder.html#a654b33adee2ae78ce74ecbe6aa5e5282"> 2340</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="classllvm_1_1OpenMPIRBuilder.html#a654b33adee2ae78ce74ecbe6aa5e5282">OpenMPIRBuilder::emitMapperCall</a>(<span class="keyword">const</span> <a class="code" href="structllvm_1_1OpenMPIRBuilder_1_1LocationDescription.html">LocationDescription</a> &amp;Loc,</div>
<div class="line"><a name="l02341"></a><span class="lineno"> 2341</span>&#160;                                     <a class="code" href="classllvm_1_1Function.html">Function</a> *MapperFunc, <a class="code" href="classllvm_1_1Value.html">Value</a> *SrcLocInfo,</div>
<div class="line"><a name="l02342"></a><span class="lineno"> 2342</span>&#160;                                     <a class="code" href="classllvm_1_1Value.html">Value</a> *MaptypesArg, <a class="code" href="classllvm_1_1Value.html">Value</a> *MapnamesArg,</div>
<div class="line"><a name="l02343"></a><span class="lineno"> 2343</span>&#160;                                     <span class="keyword">struct</span> <a class="code" href="structllvm_1_1OpenMPIRBuilder_1_1MapperAllocas.html">MapperAllocas</a> &amp;<a class="code" href="structllvm_1_1OpenMPIRBuilder_1_1MapperAllocas.html">MapperAllocas</a>,</div>
<div class="line"><a name="l02344"></a><span class="lineno"> 2344</span>&#160;                                     int64_t DeviceID, <span class="keywordtype">unsigned</span> NumOperands) {</div>
<div class="line"><a name="l02345"></a><span class="lineno"> 2345</span>&#160;  <span class="keywordflow">if</span> (!updateToLocation(Loc))</div>
<div class="line"><a name="l02346"></a><span class="lineno"> 2346</span>&#160;    <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l02347"></a><span class="lineno"> 2347</span>&#160; </div>
<div class="line"><a name="l02348"></a><span class="lineno"> 2348</span>&#160;  <span class="keyword">auto</span> *ArrI8PtrTy = <a class="code" href="classllvm_1_1ArrayType.html#adf411edc4f135b570ab218079474ce77">ArrayType::get</a>(Int8Ptr, NumOperands);</div>
<div class="line"><a name="l02349"></a><span class="lineno"> 2349</span>&#160;  <span class="keyword">auto</span> *ArrI64Ty = <a class="code" href="classllvm_1_1ArrayType.html#adf411edc4f135b570ab218079474ce77">ArrayType::get</a>(<a class="code" href="namespacellvm_1_1pdb.html#a434cfa04e4ed34b7a901378557d4ca9ea68311183bd3c447d90828b5e2c90f582">Int64</a>, NumOperands);</div>
<div class="line"><a name="l02350"></a><span class="lineno"> 2350</span>&#160;  <a class="code" href="classllvm_1_1Value.html">Value</a> *ArgsBaseGEP =</div>
<div class="line"><a name="l02351"></a><span class="lineno"> 2351</span>&#160;      <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.CreateInBoundsGEP(ArrI8PtrTy, <a class="code" href="structllvm_1_1OpenMPIRBuilder_1_1MapperAllocas.html">MapperAllocas</a>.<a class="code" href="structllvm_1_1OpenMPIRBuilder_1_1MapperAllocas.html#a9d27bf73f53ec62c72ffd3137f47efde">ArgsBase</a>,</div>
<div class="line"><a name="l02352"></a><span class="lineno"> 2352</span>&#160;                                {Builder.getInt32(0), Builder.getInt32(0)});</div>
<div class="line"><a name="l02353"></a><span class="lineno"> 2353</span>&#160;  <a class="code" href="classllvm_1_1Value.html">Value</a> *ArgsGEP =</div>
<div class="line"><a name="l02354"></a><span class="lineno"> 2354</span>&#160;      <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.CreateInBoundsGEP(ArrI8PtrTy, <a class="code" href="structllvm_1_1OpenMPIRBuilder_1_1MapperAllocas.html">MapperAllocas</a>.<a class="code" href="structllvm_1_1OpenMPIRBuilder_1_1MapperAllocas.html#aa90c5e272864414356fbeede370d5053">Args</a>,</div>
<div class="line"><a name="l02355"></a><span class="lineno"> 2355</span>&#160;                                {Builder.getInt32(0), Builder.getInt32(0)});</div>
<div class="line"><a name="l02356"></a><span class="lineno"> 2356</span>&#160;  <a class="code" href="classllvm_1_1Value.html">Value</a> *ArgSizesGEP =</div>
<div class="line"><a name="l02357"></a><span class="lineno"> 2357</span>&#160;      <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.CreateInBoundsGEP(ArrI64Ty, <a class="code" href="structllvm_1_1OpenMPIRBuilder_1_1MapperAllocas.html">MapperAllocas</a>.<a class="code" href="structllvm_1_1OpenMPIRBuilder_1_1MapperAllocas.html#ad41f11a634af5e69560ac0279c74b100">ArgSizes</a>,</div>
<div class="line"><a name="l02358"></a><span class="lineno"> 2358</span>&#160;                                {Builder.getInt32(0), Builder.getInt32(0)});</div>
<div class="line"><a name="l02359"></a><span class="lineno"> 2359</span>&#160;  <a class="code" href="classllvm_1_1Value.html">Value</a> *NullPtr = <a class="code" href="classllvm_1_1Constant.html#aa6574d526b3e38a28f688a7bb4325c2c">Constant::getNullValue</a>(Int8Ptr-&gt;getPointerTo());</div>
<div class="line"><a name="l02360"></a><span class="lineno"> 2360</span>&#160;  <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.CreateCall(MapperFunc,</div>
<div class="line"><a name="l02361"></a><span class="lineno"> 2361</span>&#160;                     {SrcLocInfo, <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.getInt64(DeviceID),</div>
<div class="line"><a name="l02362"></a><span class="lineno"> 2362</span>&#160;                      <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.getInt32(NumOperands), ArgsBaseGEP, ArgsGEP,</div>
<div class="line"><a name="l02363"></a><span class="lineno"> 2363</span>&#160;                      ArgSizesGEP, MaptypesArg, MapnamesArg, NullPtr});</div>
<div class="line"><a name="l02364"></a><span class="lineno"> 2364</span>&#160;}</div>
<div class="line"><a name="l02365"></a><span class="lineno"> 2365</span>&#160; </div>
<div class="line"><a name="l02366"></a><span class="lineno"> 2366</span>&#160;<span class="keywordtype">bool</span> OpenMPIRBuilder::checkAndEmitFlushAfterAtomic(</div>
<div class="line"><a name="l02367"></a><span class="lineno"> 2367</span>&#160;    <span class="keyword">const</span> LocationDescription &amp;Loc, <a class="code" href="namespacellvm.html#a9bccbe67aaab722783ca4e7c504aaaa7">llvm::AtomicOrdering</a> AO, AtomicKind AK) {</div>
<div class="line"><a name="l02368"></a><span class="lineno"> 2368</span>&#160;  <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(!(AO == AtomicOrdering::NotAtomic ||</div>
<div class="line"><a name="l02369"></a><span class="lineno"> 2369</span>&#160;           AO == <a class="code" href="README__P9_8txt.html#a0afe4617fad145d6ced5a18fd739cf06">llvm::AtomicOrdering::Unordered</a>) &amp;&amp;</div>
<div class="line"><a name="l02370"></a><span class="lineno"> 2370</span>&#160;         <span class="stringliteral">&quot;Unexpected Atomic Ordering.&quot;</span>);</div>
<div class="line"><a name="l02371"></a><span class="lineno"> 2371</span>&#160; </div>
<div class="line"><a name="l02372"></a><span class="lineno"> 2372</span>&#160;  <span class="keywordtype">bool</span> Flush = <span class="keyword">false</span>;</div>
<div class="line"><a name="l02373"></a><span class="lineno"> 2373</span>&#160;  <a class="code" href="namespacellvm.html#a9bccbe67aaab722783ca4e7c504aaaa7">llvm::AtomicOrdering</a> FlushAO = AtomicOrdering::Monotonic;</div>
<div class="line"><a name="l02374"></a><span class="lineno"> 2374</span>&#160; </div>
<div class="line"><a name="l02375"></a><span class="lineno"> 2375</span>&#160;  <span class="keywordflow">switch</span> (AK) {</div>
<div class="line"><a name="l02376"></a><span class="lineno"> 2376</span>&#160;  <span class="keywordflow">case</span> Read:</div>
<div class="line"><a name="l02377"></a><span class="lineno"> 2377</span>&#160;    <span class="keywordflow">if</span> (AO == AtomicOrdering::Acquire || AO == AtomicOrdering::AcquireRelease ||</div>
<div class="line"><a name="l02378"></a><span class="lineno"> 2378</span>&#160;        AO == AtomicOrdering::SequentiallyConsistent) {</div>
<div class="line"><a name="l02379"></a><span class="lineno"> 2379</span>&#160;      FlushAO = AtomicOrdering::Acquire;</div>
<div class="line"><a name="l02380"></a><span class="lineno"> 2380</span>&#160;      Flush = <span class="keyword">true</span>;</div>
<div class="line"><a name="l02381"></a><span class="lineno"> 2381</span>&#160;    }</div>
<div class="line"><a name="l02382"></a><span class="lineno"> 2382</span>&#160;    <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l02383"></a><span class="lineno"> 2383</span>&#160;  <span class="keywordflow">case</span> Write:</div>
<div class="line"><a name="l02384"></a><span class="lineno"> 2384</span>&#160;  <span class="keywordflow">case</span> Update:</div>
<div class="line"><a name="l02385"></a><span class="lineno"> 2385</span>&#160;    <span class="keywordflow">if</span> (AO == <a class="code" href="namespacellvm.html#a9bccbe67aaab722783ca4e7c504aaaa7ab8e7b465df7c5979dc731d06e84ce2cf">AtomicOrdering::Release</a> || AO == AtomicOrdering::AcquireRelease ||</div>
<div class="line"><a name="l02386"></a><span class="lineno"> 2386</span>&#160;        AO == AtomicOrdering::SequentiallyConsistent) {</div>
<div class="line"><a name="l02387"></a><span class="lineno"> 2387</span>&#160;      FlushAO = <a class="code" href="namespacellvm.html#a9bccbe67aaab722783ca4e7c504aaaa7ab8e7b465df7c5979dc731d06e84ce2cf">AtomicOrdering::Release</a>;</div>
<div class="line"><a name="l02388"></a><span class="lineno"> 2388</span>&#160;      Flush = <span class="keyword">true</span>;</div>
<div class="line"><a name="l02389"></a><span class="lineno"> 2389</span>&#160;    }</div>
<div class="line"><a name="l02390"></a><span class="lineno"> 2390</span>&#160;    <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l02391"></a><span class="lineno"> 2391</span>&#160;  <span class="keywordflow">case</span> Capture:</div>
<div class="line"><a name="l02392"></a><span class="lineno"> 2392</span>&#160;    <span class="keywordflow">switch</span> (AO) {</div>
<div class="line"><a name="l02393"></a><span class="lineno"> 2393</span>&#160;    <span class="keywordflow">case</span> AtomicOrdering::Acquire:</div>
<div class="line"><a name="l02394"></a><span class="lineno"> 2394</span>&#160;      FlushAO = AtomicOrdering::Acquire;</div>
<div class="line"><a name="l02395"></a><span class="lineno"> 2395</span>&#160;      Flush = <span class="keyword">true</span>;</div>
<div class="line"><a name="l02396"></a><span class="lineno"> 2396</span>&#160;      <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l02397"></a><span class="lineno"> 2397</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="namespacellvm.html#a9bccbe67aaab722783ca4e7c504aaaa7ab8e7b465df7c5979dc731d06e84ce2cf">AtomicOrdering::Release</a>:</div>
<div class="line"><a name="l02398"></a><span class="lineno"> 2398</span>&#160;      FlushAO = <a class="code" href="namespacellvm.html#a9bccbe67aaab722783ca4e7c504aaaa7ab8e7b465df7c5979dc731d06e84ce2cf">AtomicOrdering::Release</a>;</div>
<div class="line"><a name="l02399"></a><span class="lineno"> 2399</span>&#160;      Flush = <span class="keyword">true</span>;</div>
<div class="line"><a name="l02400"></a><span class="lineno"> 2400</span>&#160;      <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l02401"></a><span class="lineno"> 2401</span>&#160;    <span class="keywordflow">case</span> AtomicOrdering::AcquireRelease:</div>
<div class="line"><a name="l02402"></a><span class="lineno"> 2402</span>&#160;    <span class="keywordflow">case</span> AtomicOrdering::SequentiallyConsistent:</div>
<div class="line"><a name="l02403"></a><span class="lineno"> 2403</span>&#160;      FlushAO = AtomicOrdering::AcquireRelease;</div>
<div class="line"><a name="l02404"></a><span class="lineno"> 2404</span>&#160;      Flush = <span class="keyword">true</span>;</div>
<div class="line"><a name="l02405"></a><span class="lineno"> 2405</span>&#160;      <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l02406"></a><span class="lineno"> 2406</span>&#160;    <span class="keywordflow">default</span>:</div>
<div class="line"><a name="l02407"></a><span class="lineno"> 2407</span>&#160;      <span class="comment">// do nothing - leave silently.</span></div>
<div class="line"><a name="l02408"></a><span class="lineno"> 2408</span>&#160;      <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l02409"></a><span class="lineno"> 2409</span>&#160;    }</div>
<div class="line"><a name="l02410"></a><span class="lineno"> 2410</span>&#160;  }</div>
<div class="line"><a name="l02411"></a><span class="lineno"> 2411</span>&#160; </div>
<div class="line"><a name="l02412"></a><span class="lineno"> 2412</span>&#160;  <span class="keywordflow">if</span> (Flush) {</div>
<div class="line"><a name="l02413"></a><span class="lineno"> 2413</span>&#160;    <span class="comment">// Currently Flush RT call still doesn&#39;t take memory_ordering, so for when</span></div>
<div class="line"><a name="l02414"></a><span class="lineno"> 2414</span>&#160;    <span class="comment">// that happens, this tries to do the resolution of which atomic ordering</span></div>
<div class="line"><a name="l02415"></a><span class="lineno"> 2415</span>&#160;    <span class="comment">// to use with but issue the flush call</span></div>
<div class="line"><a name="l02416"></a><span class="lineno"> 2416</span>&#160;    <span class="comment">// TODO: pass `FlushAO` after memory ordering support is added</span></div>
<div class="line"><a name="l02417"></a><span class="lineno"> 2417</span>&#160;    (void)FlushAO;</div>
<div class="line"><a name="l02418"></a><span class="lineno"> 2418</span>&#160;    emitFlush(Loc);</div>
<div class="line"><a name="l02419"></a><span class="lineno"> 2419</span>&#160;  }</div>
<div class="line"><a name="l02420"></a><span class="lineno"> 2420</span>&#160; </div>
<div class="line"><a name="l02421"></a><span class="lineno"> 2421</span>&#160;  <span class="comment">// for AO == AtomicOrdering::Monotonic and  all other case combinations</span></div>
<div class="line"><a name="l02422"></a><span class="lineno"> 2422</span>&#160;  <span class="comment">// do nothing</span></div>
<div class="line"><a name="l02423"></a><span class="lineno"> 2423</span>&#160;  <span class="keywordflow">return</span> Flush;</div>
<div class="line"><a name="l02424"></a><span class="lineno"> 2424</span>&#160;}</div>
<div class="line"><a name="l02425"></a><span class="lineno"> 2425</span>&#160; </div>
<div class="line"><a name="l02426"></a><span class="lineno"> 2426</span>&#160;<a class="code" href="classllvm_1_1OpenMPIRBuilder.html#aafc1886793b898052f87edd7e9fdbaa3">OpenMPIRBuilder::InsertPointTy</a></div>
<div class="line"><a name="l02427"></a><span class="lineno"><a class="line" href="classllvm_1_1OpenMPIRBuilder.html#a388d5a62753f4e7ff4b72e54c1233fbc"> 2427</a></span>&#160;<a class="code" href="classllvm_1_1OpenMPIRBuilder.html#a388d5a62753f4e7ff4b72e54c1233fbc">OpenMPIRBuilder::createAtomicRead</a>(<span class="keyword">const</span> <a class="code" href="structllvm_1_1OpenMPIRBuilder_1_1LocationDescription.html">LocationDescription</a> &amp;Loc,</div>
<div class="line"><a name="l02428"></a><span class="lineno"> 2428</span>&#160;                                  <a class="code" href="structllvm_1_1OpenMPIRBuilder_1_1AtomicOpValue.html">AtomicOpValue</a> &amp;<a class="code" href="ErlangGCPrinter_8cpp.html#a74b474c0616ab55c1d9487f11fd31d26">X</a>, <a class="code" href="structllvm_1_1OpenMPIRBuilder_1_1AtomicOpValue.html">AtomicOpValue</a> &amp;V,</div>
<div class="line"><a name="l02429"></a><span class="lineno"> 2429</span>&#160;                                  <a class="code" href="namespacellvm.html#a9bccbe67aaab722783ca4e7c504aaaa7">AtomicOrdering</a> AO) {</div>
<div class="line"><a name="l02430"></a><span class="lineno"> 2430</span>&#160;  <span class="keywordflow">if</span> (!updateToLocation(Loc))</div>
<div class="line"><a name="l02431"></a><span class="lineno"> 2431</span>&#160;    <span class="keywordflow">return</span> Loc.<a class="code" href="structllvm_1_1OpenMPIRBuilder_1_1LocationDescription.html#aa15e9d88f98f6d7a0898e6aff4753040">IP</a>;</div>
<div class="line"><a name="l02432"></a><span class="lineno"> 2432</span>&#160; </div>
<div class="line"><a name="l02433"></a><span class="lineno"> 2433</span>&#160;  <a class="code" href="classllvm_1_1Type.html">Type</a> *XTy = <a class="code" href="ErlangGCPrinter_8cpp.html#a74b474c0616ab55c1d9487f11fd31d26">X</a>.Var-&gt;getType();</div>
<div class="line"><a name="l02434"></a><span class="lineno"> 2434</span>&#160;  <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(XTy-&gt;<a class="code" href="classllvm_1_1Type.html#a3b996fbf8458aafffc86cb98a68d0a47">isPointerTy</a>() &amp;&amp; <span class="stringliteral">&quot;OMP Atomic expects a pointer to target memory&quot;</span>);</div>
<div class="line"><a name="l02435"></a><span class="lineno"> 2435</span>&#160;  <a class="code" href="classllvm_1_1Type.html">Type</a> *XElemTy = XTy-&gt;<a class="code" href="classllvm_1_1Type.html#ae61f17d62c8a79bc5cffa63a2f152311">getPointerElementType</a>();</div>
<div class="line"><a name="l02436"></a><span class="lineno"> 2436</span>&#160;  <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>((XElemTy-&gt;<a class="code" href="classllvm_1_1Type.html#aac5759c83abd6a4af236401a7cfe7a0f">isFloatingPointTy</a>() || XElemTy-&gt;<a class="code" href="classllvm_1_1Type.html#ac6d28a9b11139182134a9618028a0d07">isIntegerTy</a>() ||</div>
<div class="line"><a name="l02437"></a><span class="lineno"> 2437</span>&#160;          XElemTy-&gt;<a class="code" href="classllvm_1_1Type.html#a3b996fbf8458aafffc86cb98a68d0a47">isPointerTy</a>()) &amp;&amp;</div>
<div class="line"><a name="l02438"></a><span class="lineno"> 2438</span>&#160;         <span class="stringliteral">&quot;OMP atomic read expected a scalar type&quot;</span>);</div>
<div class="line"><a name="l02439"></a><span class="lineno"> 2439</span>&#160; </div>
<div class="line"><a name="l02440"></a><span class="lineno"> 2440</span>&#160;  <a class="code" href="classllvm_1_1Value.html">Value</a> *XRead = <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l02441"></a><span class="lineno"> 2441</span>&#160; </div>
<div class="line"><a name="l02442"></a><span class="lineno"> 2442</span>&#160;  <span class="keywordflow">if</span> (XElemTy-&gt;<a class="code" href="classllvm_1_1Type.html#ac6d28a9b11139182134a9618028a0d07">isIntegerTy</a>()) {</div>
<div class="line"><a name="l02443"></a><span class="lineno"> 2443</span>&#160;    <a class="code" href="classllvm_1_1LoadInst.html">LoadInst</a> *XLD =</div>
<div class="line"><a name="l02444"></a><span class="lineno"> 2444</span>&#160;        <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.CreateLoad(XElemTy, <a class="code" href="ErlangGCPrinter_8cpp.html#a74b474c0616ab55c1d9487f11fd31d26">X</a>.Var, <a class="code" href="ErlangGCPrinter_8cpp.html#a74b474c0616ab55c1d9487f11fd31d26">X</a>.IsVolatile, <span class="stringliteral">&quot;omp.atomic.read&quot;</span>);</div>
<div class="line"><a name="l02445"></a><span class="lineno"> 2445</span>&#160;    XLD-&gt;<a class="code" href="classllvm_1_1LoadInst.html#a6ae88dc44b078c80ce3a25401fd4b05b">setAtomic</a>(AO);</div>
<div class="line"><a name="l02446"></a><span class="lineno"> 2446</span>&#160;    XRead = cast&lt;Value&gt;(XLD);</div>
<div class="line"><a name="l02447"></a><span class="lineno"> 2447</span>&#160;  } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l02448"></a><span class="lineno"> 2448</span>&#160;    <span class="comment">// We need to bitcast and perform atomic op as integer</span></div>
<div class="line"><a name="l02449"></a><span class="lineno"> 2449</span>&#160;    <span class="keywordtype">unsigned</span> Addrspace = cast&lt;PointerType&gt;(XTy)-&gt;getAddressSpace();</div>
<div class="line"><a name="l02450"></a><span class="lineno"> 2450</span>&#160;    <a class="code" href="classllvm_1_1IntegerType.html">IntegerType</a> *IntCastTy =</div>
<div class="line"><a name="l02451"></a><span class="lineno"> 2451</span>&#160;        <a class="code" href="classllvm_1_1IntegerType.html#a14f7b4f1aed38192fb6b7772eb506bdb">IntegerType::get</a>(<a class="code" href="lib_2Target_2X86_2README_8txt.html#ac88fe1d3a61b056a4f64fbbb156a62ff">M</a>.getContext(), XElemTy-&gt;<a class="code" href="classllvm_1_1Type.html#a9f382207d841377156d4c7868b66b9a5">getScalarSizeInBits</a>());</div>
<div class="line"><a name="l02452"></a><span class="lineno"> 2452</span>&#160;    <a class="code" href="classllvm_1_1Value.html">Value</a> *XBCast = <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.CreateBitCast(</div>
<div class="line"><a name="l02453"></a><span class="lineno"> 2453</span>&#160;        <a class="code" href="ErlangGCPrinter_8cpp.html#a74b474c0616ab55c1d9487f11fd31d26">X</a>.Var, IntCastTy-&gt;<a class="code" href="classllvm_1_1Type.html#adc01a7457de85fc52a3bb860d7e1c6a4">getPointerTo</a>(Addrspace), <span class="stringliteral">&quot;atomic.src.int.cast&quot;</span>);</div>
<div class="line"><a name="l02454"></a><span class="lineno"> 2454</span>&#160;    <a class="code" href="classllvm_1_1LoadInst.html">LoadInst</a> *XLoad =</div>
<div class="line"><a name="l02455"></a><span class="lineno"> 2455</span>&#160;        <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.CreateLoad(IntCastTy, XBCast, <a class="code" href="ErlangGCPrinter_8cpp.html#a74b474c0616ab55c1d9487f11fd31d26">X</a>.IsVolatile, <span class="stringliteral">&quot;omp.atomic.load&quot;</span>);</div>
<div class="line"><a name="l02456"></a><span class="lineno"> 2456</span>&#160;    XLoad-&gt;<a class="code" href="classllvm_1_1LoadInst.html#a6ae88dc44b078c80ce3a25401fd4b05b">setAtomic</a>(AO);</div>
<div class="line"><a name="l02457"></a><span class="lineno"> 2457</span>&#160;    <span class="keywordflow">if</span> (XElemTy-&gt;<a class="code" href="classllvm_1_1Type.html#aac5759c83abd6a4af236401a7cfe7a0f">isFloatingPointTy</a>()) {</div>
<div class="line"><a name="l02458"></a><span class="lineno"> 2458</span>&#160;      XRead = <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.CreateBitCast(XLoad, XElemTy, <span class="stringliteral">&quot;atomic.flt.cast&quot;</span>);</div>
<div class="line"><a name="l02459"></a><span class="lineno"> 2459</span>&#160;    } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l02460"></a><span class="lineno"> 2460</span>&#160;      XRead = <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.CreateIntToPtr(XLoad, XElemTy, <span class="stringliteral">&quot;atomic.ptr.cast&quot;</span>);</div>
<div class="line"><a name="l02461"></a><span class="lineno"> 2461</span>&#160;    }</div>
<div class="line"><a name="l02462"></a><span class="lineno"> 2462</span>&#160;  }</div>
<div class="line"><a name="l02463"></a><span class="lineno"> 2463</span>&#160;  checkAndEmitFlushAfterAtomic(Loc, AO, AtomicKind::Read);</div>
<div class="line"><a name="l02464"></a><span class="lineno"> 2464</span>&#160;  <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.CreateStore(XRead, V.<a class="code" href="structllvm_1_1OpenMPIRBuilder_1_1AtomicOpValue.html#afa06cdaada62e025bfb13b3ca8999963">Var</a>, V.<a class="code" href="structllvm_1_1OpenMPIRBuilder_1_1AtomicOpValue.html#a8405ac1a632edb9252a0d46334f45008">IsVolatile</a>);</div>
<div class="line"><a name="l02465"></a><span class="lineno"> 2465</span>&#160;  <span class="keywordflow">return</span> <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.saveIP();</div>
<div class="line"><a name="l02466"></a><span class="lineno"> 2466</span>&#160;}</div>
<div class="line"><a name="l02467"></a><span class="lineno"> 2467</span>&#160; </div>
<div class="line"><a name="l02468"></a><span class="lineno"> 2468</span>&#160;<a class="code" href="classllvm_1_1OpenMPIRBuilder.html#aafc1886793b898052f87edd7e9fdbaa3">OpenMPIRBuilder::InsertPointTy</a></div>
<div class="line"><a name="l02469"></a><span class="lineno"><a class="line" href="classllvm_1_1OpenMPIRBuilder.html#a0e2de2c034e3083d006b92ddf14b8bcf"> 2469</a></span>&#160;<a class="code" href="classllvm_1_1OpenMPIRBuilder.html#a0e2de2c034e3083d006b92ddf14b8bcf">OpenMPIRBuilder::createAtomicWrite</a>(<span class="keyword">const</span> <a class="code" href="structllvm_1_1OpenMPIRBuilder_1_1LocationDescription.html">LocationDescription</a> &amp;Loc,</div>
<div class="line"><a name="l02470"></a><span class="lineno"> 2470</span>&#160;                                   <a class="code" href="structllvm_1_1OpenMPIRBuilder_1_1AtomicOpValue.html">AtomicOpValue</a> &amp;<a class="code" href="ErlangGCPrinter_8cpp.html#a74b474c0616ab55c1d9487f11fd31d26">X</a>, <a class="code" href="classllvm_1_1Value.html">Value</a> *Expr,</div>
<div class="line"><a name="l02471"></a><span class="lineno"> 2471</span>&#160;                                   <a class="code" href="namespacellvm.html#a9bccbe67aaab722783ca4e7c504aaaa7">AtomicOrdering</a> AO) {</div>
<div class="line"><a name="l02472"></a><span class="lineno"> 2472</span>&#160;  <span class="keywordflow">if</span> (!updateToLocation(Loc))</div>
<div class="line"><a name="l02473"></a><span class="lineno"> 2473</span>&#160;    <span class="keywordflow">return</span> Loc.<a class="code" href="structllvm_1_1OpenMPIRBuilder_1_1LocationDescription.html#aa15e9d88f98f6d7a0898e6aff4753040">IP</a>;</div>
<div class="line"><a name="l02474"></a><span class="lineno"> 2474</span>&#160; </div>
<div class="line"><a name="l02475"></a><span class="lineno"> 2475</span>&#160;  <a class="code" href="classllvm_1_1Type.html">Type</a> *XTy = <a class="code" href="ErlangGCPrinter_8cpp.html#a74b474c0616ab55c1d9487f11fd31d26">X</a>.Var-&gt;getType();</div>
<div class="line"><a name="l02476"></a><span class="lineno"> 2476</span>&#160;  <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(XTy-&gt;<a class="code" href="classllvm_1_1Type.html#a3b996fbf8458aafffc86cb98a68d0a47">isPointerTy</a>() &amp;&amp; <span class="stringliteral">&quot;OMP Atomic expects a pointer to target memory&quot;</span>);</div>
<div class="line"><a name="l02477"></a><span class="lineno"> 2477</span>&#160;  <a class="code" href="classllvm_1_1Type.html">Type</a> *XElemTy = XTy-&gt;<a class="code" href="classllvm_1_1Type.html#ae61f17d62c8a79bc5cffa63a2f152311">getPointerElementType</a>();</div>
<div class="line"><a name="l02478"></a><span class="lineno"> 2478</span>&#160;  <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>((XElemTy-&gt;<a class="code" href="classllvm_1_1Type.html#aac5759c83abd6a4af236401a7cfe7a0f">isFloatingPointTy</a>() || XElemTy-&gt;<a class="code" href="classllvm_1_1Type.html#ac6d28a9b11139182134a9618028a0d07">isIntegerTy</a>() ||</div>
<div class="line"><a name="l02479"></a><span class="lineno"> 2479</span>&#160;          XElemTy-&gt;<a class="code" href="classllvm_1_1Type.html#a3b996fbf8458aafffc86cb98a68d0a47">isPointerTy</a>()) &amp;&amp;</div>
<div class="line"><a name="l02480"></a><span class="lineno"> 2480</span>&#160;         <span class="stringliteral">&quot;OMP atomic write expected a scalar type&quot;</span>);</div>
<div class="line"><a name="l02481"></a><span class="lineno"> 2481</span>&#160; </div>
<div class="line"><a name="l02482"></a><span class="lineno"> 2482</span>&#160;  <span class="keywordflow">if</span> (XElemTy-&gt;<a class="code" href="classllvm_1_1Type.html#ac6d28a9b11139182134a9618028a0d07">isIntegerTy</a>()) {</div>
<div class="line"><a name="l02483"></a><span class="lineno"> 2483</span>&#160;    <a class="code" href="classllvm_1_1StoreInst.html">StoreInst</a> *XSt = <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.CreateStore(Expr, <a class="code" href="ErlangGCPrinter_8cpp.html#a74b474c0616ab55c1d9487f11fd31d26">X</a>.Var, <a class="code" href="ErlangGCPrinter_8cpp.html#a74b474c0616ab55c1d9487f11fd31d26">X</a>.IsVolatile);</div>
<div class="line"><a name="l02484"></a><span class="lineno"> 2484</span>&#160;    XSt-&gt;<a class="code" href="classllvm_1_1StoreInst.html#aff28bd42ac76fc3e1c0e4db7f9e06f2d">setAtomic</a>(AO);</div>
<div class="line"><a name="l02485"></a><span class="lineno"> 2485</span>&#160;  } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l02486"></a><span class="lineno"> 2486</span>&#160;    <span class="comment">// We need to bitcast and perform atomic op as integers</span></div>
<div class="line"><a name="l02487"></a><span class="lineno"> 2487</span>&#160;    <span class="keywordtype">unsigned</span> Addrspace = cast&lt;PointerType&gt;(XTy)-&gt;getAddressSpace();</div>
<div class="line"><a name="l02488"></a><span class="lineno"> 2488</span>&#160;    <a class="code" href="classllvm_1_1IntegerType.html">IntegerType</a> *IntCastTy =</div>
<div class="line"><a name="l02489"></a><span class="lineno"> 2489</span>&#160;        <a class="code" href="classllvm_1_1IntegerType.html#a14f7b4f1aed38192fb6b7772eb506bdb">IntegerType::get</a>(<a class="code" href="lib_2Target_2X86_2README_8txt.html#ac88fe1d3a61b056a4f64fbbb156a62ff">M</a>.getContext(), XElemTy-&gt;<a class="code" href="classllvm_1_1Type.html#a9f382207d841377156d4c7868b66b9a5">getScalarSizeInBits</a>());</div>
<div class="line"><a name="l02490"></a><span class="lineno"> 2490</span>&#160;    <a class="code" href="classllvm_1_1Value.html">Value</a> *XBCast = <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.CreateBitCast(</div>
<div class="line"><a name="l02491"></a><span class="lineno"> 2491</span>&#160;        <a class="code" href="ErlangGCPrinter_8cpp.html#a74b474c0616ab55c1d9487f11fd31d26">X</a>.Var, IntCastTy-&gt;<a class="code" href="classllvm_1_1Type.html#adc01a7457de85fc52a3bb860d7e1c6a4">getPointerTo</a>(Addrspace), <span class="stringliteral">&quot;atomic.dst.int.cast&quot;</span>);</div>
<div class="line"><a name="l02492"></a><span class="lineno"> 2492</span>&#160;    <a class="code" href="classllvm_1_1Value.html">Value</a> *ExprCast =</div>
<div class="line"><a name="l02493"></a><span class="lineno"> 2493</span>&#160;        <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.CreateBitCast(Expr, IntCastTy, <span class="stringliteral">&quot;atomic.src.int.cast&quot;</span>);</div>
<div class="line"><a name="l02494"></a><span class="lineno"> 2494</span>&#160;    <a class="code" href="classllvm_1_1StoreInst.html">StoreInst</a> *XSt = <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.CreateStore(ExprCast, XBCast, <a class="code" href="ErlangGCPrinter_8cpp.html#a74b474c0616ab55c1d9487f11fd31d26">X</a>.IsVolatile);</div>
<div class="line"><a name="l02495"></a><span class="lineno"> 2495</span>&#160;    XSt-&gt;<a class="code" href="classllvm_1_1StoreInst.html#aff28bd42ac76fc3e1c0e4db7f9e06f2d">setAtomic</a>(AO);</div>
<div class="line"><a name="l02496"></a><span class="lineno"> 2496</span>&#160;  }</div>
<div class="line"><a name="l02497"></a><span class="lineno"> 2497</span>&#160; </div>
<div class="line"><a name="l02498"></a><span class="lineno"> 2498</span>&#160;  checkAndEmitFlushAfterAtomic(Loc, AO, AtomicKind::Write);</div>
<div class="line"><a name="l02499"></a><span class="lineno"> 2499</span>&#160;  <span class="keywordflow">return</span> <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.saveIP();</div>
<div class="line"><a name="l02500"></a><span class="lineno"> 2500</span>&#160;}</div>
<div class="line"><a name="l02501"></a><span class="lineno"> 2501</span>&#160; </div>
<div class="line"><a name="l02502"></a><span class="lineno"><a class="line" href="classllvm_1_1OpenMPIRBuilder.html#afdb0bb128b2da43594ed6593a5c48f31"> 2502</a></span>&#160;<a class="code" href="classllvm_1_1OpenMPIRBuilder.html#aafc1886793b898052f87edd7e9fdbaa3">OpenMPIRBuilder::InsertPointTy</a> <a class="code" href="classllvm_1_1OpenMPIRBuilder.html#afdb0bb128b2da43594ed6593a5c48f31">OpenMPIRBuilder::createAtomicUpdate</a>(</div>
<div class="line"><a name="l02503"></a><span class="lineno"> 2503</span>&#160;    <span class="keyword">const</span> <a class="code" href="structllvm_1_1OpenMPIRBuilder_1_1LocationDescription.html">LocationDescription</a> &amp;Loc, <a class="code" href="classllvm_1_1Instruction.html">Instruction</a> *AllocIP, <a class="code" href="structllvm_1_1OpenMPIRBuilder_1_1AtomicOpValue.html">AtomicOpValue</a> &amp;<a class="code" href="ErlangGCPrinter_8cpp.html#a74b474c0616ab55c1d9487f11fd31d26">X</a>,</div>
<div class="line"><a name="l02504"></a><span class="lineno"> 2504</span>&#160;    <a class="code" href="classllvm_1_1Value.html">Value</a> *Expr, <a class="code" href="namespacellvm.html#a9bccbe67aaab722783ca4e7c504aaaa7">AtomicOrdering</a> AO, <a class="code" href="classllvm_1_1AtomicRMWInst.html#a461cfbbb5c7a57ab73210498923cf615">AtomicRMWInst::BinOp</a> RMWOp,</div>
<div class="line"><a name="l02505"></a><span class="lineno"> 2505</span>&#160;    <a class="code" href="classllvm_1_1function__ref.html">AtomicUpdateCallbackTy</a> &amp;UpdateOp, <span class="keywordtype">bool</span> IsXLHSInRHSPart) {</div>
<div class="line"><a name="l02506"></a><span class="lineno"> 2506</span>&#160;  <span class="keywordflow">if</span> (!updateToLocation(Loc))</div>
<div class="line"><a name="l02507"></a><span class="lineno"> 2507</span>&#160;    <span class="keywordflow">return</span> Loc.<a class="code" href="structllvm_1_1OpenMPIRBuilder_1_1LocationDescription.html#aa15e9d88f98f6d7a0898e6aff4753040">IP</a>;</div>
<div class="line"><a name="l02508"></a><span class="lineno"> 2508</span>&#160; </div>
<div class="line"><a name="l02509"></a><span class="lineno"> 2509</span>&#160;  <a class="code" href="Debug_8h.html#a08efc68d15935eb8889400a46c3749ba">LLVM_DEBUG</a>({</div>
<div class="line"><a name="l02510"></a><span class="lineno"> 2510</span>&#160;    <a class="code" href="classllvm_1_1Type.html">Type</a> *XTy = <a class="code" href="ErlangGCPrinter_8cpp.html#a74b474c0616ab55c1d9487f11fd31d26">X</a>.Var-&gt;getType();</div>
<div class="line"><a name="l02511"></a><span class="lineno"> 2511</span>&#160;    <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(XTy-&gt;<a class="code" href="classllvm_1_1Type.html#a3b996fbf8458aafffc86cb98a68d0a47">isPointerTy</a>() &amp;&amp;</div>
<div class="line"><a name="l02512"></a><span class="lineno"> 2512</span>&#160;           <span class="stringliteral">&quot;OMP Atomic expects a pointer to target memory&quot;</span>);</div>
<div class="line"><a name="l02513"></a><span class="lineno"> 2513</span>&#160;    <a class="code" href="classllvm_1_1Type.html">Type</a> *XElemTy = XTy-&gt;<a class="code" href="classllvm_1_1Type.html#ae61f17d62c8a79bc5cffa63a2f152311">getPointerElementType</a>();</div>
<div class="line"><a name="l02514"></a><span class="lineno"> 2514</span>&#160;    <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>((XElemTy-&gt;<a class="code" href="classllvm_1_1Type.html#aac5759c83abd6a4af236401a7cfe7a0f">isFloatingPointTy</a>() || XElemTy-&gt;<a class="code" href="classllvm_1_1Type.html#ac6d28a9b11139182134a9618028a0d07">isIntegerTy</a>() ||</div>
<div class="line"><a name="l02515"></a><span class="lineno"> 2515</span>&#160;            XElemTy-&gt;<a class="code" href="classllvm_1_1Type.html#a3b996fbf8458aafffc86cb98a68d0a47">isPointerTy</a>()) &amp;&amp;</div>
<div class="line"><a name="l02516"></a><span class="lineno"> 2516</span>&#160;           <span class="stringliteral">&quot;OMP atomic update expected a scalar type&quot;</span>);</div>
<div class="line"><a name="l02517"></a><span class="lineno"> 2517</span>&#160;    <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>((RMWOp != <a class="code" href="classllvm_1_1AtomicRMWInst.html#a461cfbbb5c7a57ab73210498923cf615aa1184a7e35e94d162a2d40f2b11beeb2">AtomicRMWInst::Max</a>) &amp;&amp; (RMWOp != <a class="code" href="classllvm_1_1AtomicRMWInst.html#a461cfbbb5c7a57ab73210498923cf615a39edb6e51c1ad37244e8b32a2af4077d">AtomicRMWInst::Min</a>) &amp;&amp;</div>
<div class="line"><a name="l02518"></a><span class="lineno"> 2518</span>&#160;           (RMWOp != <a class="code" href="classllvm_1_1AtomicRMWInst.html#a461cfbbb5c7a57ab73210498923cf615abe171d96ba8de66fb30e08c00211591e">AtomicRMWInst::UMax</a>) &amp;&amp; (RMWOp != <a class="code" href="classllvm_1_1AtomicRMWInst.html#a461cfbbb5c7a57ab73210498923cf615aa53854e09143f57d2ff2ad6ac89dc55d">AtomicRMWInst::UMin</a>) &amp;&amp;</div>
<div class="line"><a name="l02519"></a><span class="lineno"> 2519</span>&#160;           <span class="stringliteral">&quot;OpenMP atomic does not support LT or GT operations&quot;</span>);</div>
<div class="line"><a name="l02520"></a><span class="lineno"> 2520</span>&#160;  });</div>
<div class="line"><a name="l02521"></a><span class="lineno"> 2521</span>&#160; </div>
<div class="line"><a name="l02522"></a><span class="lineno"> 2522</span>&#160;  emitAtomicUpdate(AllocIP, <a class="code" href="ErlangGCPrinter_8cpp.html#a74b474c0616ab55c1d9487f11fd31d26">X</a>.Var, Expr, AO, RMWOp, UpdateOp, <a class="code" href="ErlangGCPrinter_8cpp.html#a74b474c0616ab55c1d9487f11fd31d26">X</a>.IsVolatile,</div>
<div class="line"><a name="l02523"></a><span class="lineno"> 2523</span>&#160;                   IsXLHSInRHSPart);</div>
<div class="line"><a name="l02524"></a><span class="lineno"> 2524</span>&#160;  checkAndEmitFlushAfterAtomic(Loc, AO, AtomicKind::Update);</div>
<div class="line"><a name="l02525"></a><span class="lineno"> 2525</span>&#160;  <span class="keywordflow">return</span> <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.saveIP();</div>
<div class="line"><a name="l02526"></a><span class="lineno"> 2526</span>&#160;}</div>
<div class="line"><a name="l02527"></a><span class="lineno"> 2527</span>&#160; </div>
<div class="line"><a name="l02528"></a><span class="lineno"> 2528</span>&#160;<a class="code" href="classllvm_1_1Value.html">Value</a> *OpenMPIRBuilder::emitRMWOpAsInstruction(<a class="code" href="classllvm_1_1Value.html">Value</a> *Src1, <a class="code" href="classllvm_1_1Value.html">Value</a> *Src2,</div>
<div class="line"><a name="l02529"></a><span class="lineno"> 2529</span>&#160;                                               <a class="code" href="classllvm_1_1AtomicRMWInst.html#a461cfbbb5c7a57ab73210498923cf615">AtomicRMWInst::BinOp</a> RMWOp) {</div>
<div class="line"><a name="l02530"></a><span class="lineno"> 2530</span>&#160;  <span class="keywordflow">switch</span> (RMWOp) {</div>
<div class="line"><a name="l02531"></a><span class="lineno"> 2531</span>&#160;  <span class="keywordflow">case</span> <a class="code" href="classllvm_1_1AtomicRMWInst.html#a461cfbbb5c7a57ab73210498923cf615a0794c42b44989f9d9f1454d79ca0dd88">AtomicRMWInst::Add</a>:</div>
<div class="line"><a name="l02532"></a><span class="lineno"> 2532</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.CreateAdd(Src1, Src2);</div>
<div class="line"><a name="l02533"></a><span class="lineno"> 2533</span>&#160;  <span class="keywordflow">case</span> <a class="code" href="classllvm_1_1AtomicRMWInst.html#a461cfbbb5c7a57ab73210498923cf615a5db6ca0c3e18acd87290f22ccb2ce564">AtomicRMWInst::Sub</a>:</div>
<div class="line"><a name="l02534"></a><span class="lineno"> 2534</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.CreateSub(Src1, Src2);</div>
<div class="line"><a name="l02535"></a><span class="lineno"> 2535</span>&#160;  <span class="keywordflow">case</span> <a class="code" href="classllvm_1_1AtomicRMWInst.html#a461cfbbb5c7a57ab73210498923cf615a660a31179bfecd737a256372e5fd6122">AtomicRMWInst::And</a>:</div>
<div class="line"><a name="l02536"></a><span class="lineno"> 2536</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.CreateAnd(Src1, Src2);</div>
<div class="line"><a name="l02537"></a><span class="lineno"> 2537</span>&#160;  <span class="keywordflow">case</span> <a class="code" href="classllvm_1_1AtomicRMWInst.html#a461cfbbb5c7a57ab73210498923cf615afdcdc631cf4fa6829fd7499cd06a306b">AtomicRMWInst::Nand</a>:</div>
<div class="line"><a name="l02538"></a><span class="lineno"> 2538</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.CreateNeg(<a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.CreateAnd(Src1, Src2));</div>
<div class="line"><a name="l02539"></a><span class="lineno"> 2539</span>&#160;  <span class="keywordflow">case</span> <a class="code" href="classllvm_1_1AtomicRMWInst.html#a461cfbbb5c7a57ab73210498923cf615a5954f59053121b87ebe0c5fe79942c6e">AtomicRMWInst::Or</a>:</div>
<div class="line"><a name="l02540"></a><span class="lineno"> 2540</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.CreateOr(Src1, Src2);</div>
<div class="line"><a name="l02541"></a><span class="lineno"> 2541</span>&#160;  <span class="keywordflow">case</span> <a class="code" href="classllvm_1_1AtomicRMWInst.html#a461cfbbb5c7a57ab73210498923cf615a71aab8ee954b6d71a4eed315e8f6556e">AtomicRMWInst::Xor</a>:</div>
<div class="line"><a name="l02542"></a><span class="lineno"> 2542</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.CreateXor(Src1, Src2);</div>
<div class="line"><a name="l02543"></a><span class="lineno"> 2543</span>&#160;  <span class="keywordflow">case</span> <a class="code" href="classllvm_1_1AtomicRMWInst.html#a461cfbbb5c7a57ab73210498923cf615afc870a548088c5b7a93a34f648889d77">AtomicRMWInst::Xchg</a>:</div>
<div class="line"><a name="l02544"></a><span class="lineno"> 2544</span>&#160;  <span class="keywordflow">case</span> <a class="code" href="classllvm_1_1AtomicRMWInst.html#a461cfbbb5c7a57ab73210498923cf615a08ef06068dcd583c2476568dda59b324">AtomicRMWInst::FAdd</a>:</div>
<div class="line"><a name="l02545"></a><span class="lineno"> 2545</span>&#160;  <span class="keywordflow">case</span> <a class="code" href="classllvm_1_1AtomicRMWInst.html#a461cfbbb5c7a57ab73210498923cf615a92f66d4bc04fc8514bee80509f3e78d4">AtomicRMWInst::FSub</a>:</div>
<div class="line"><a name="l02546"></a><span class="lineno"> 2546</span>&#160;  <span class="keywordflow">case</span> <a class="code" href="classllvm_1_1AtomicRMWInst.html#a461cfbbb5c7a57ab73210498923cf615a497e8f347648b1b2823ee0338c95f65f">AtomicRMWInst::BAD_BINOP</a>:</div>
<div class="line"><a name="l02547"></a><span class="lineno"> 2547</span>&#160;  <span class="keywordflow">case</span> <a class="code" href="classllvm_1_1AtomicRMWInst.html#a461cfbbb5c7a57ab73210498923cf615aa1184a7e35e94d162a2d40f2b11beeb2">AtomicRMWInst::Max</a>:</div>
<div class="line"><a name="l02548"></a><span class="lineno"> 2548</span>&#160;  <span class="keywordflow">case</span> <a class="code" href="classllvm_1_1AtomicRMWInst.html#a461cfbbb5c7a57ab73210498923cf615a39edb6e51c1ad37244e8b32a2af4077d">AtomicRMWInst::Min</a>:</div>
<div class="line"><a name="l02549"></a><span class="lineno"> 2549</span>&#160;  <span class="keywordflow">case</span> <a class="code" href="classllvm_1_1AtomicRMWInst.html#a461cfbbb5c7a57ab73210498923cf615abe171d96ba8de66fb30e08c00211591e">AtomicRMWInst::UMax</a>:</div>
<div class="line"><a name="l02550"></a><span class="lineno"> 2550</span>&#160;  <span class="keywordflow">case</span> <a class="code" href="classllvm_1_1AtomicRMWInst.html#a461cfbbb5c7a57ab73210498923cf615aa53854e09143f57d2ff2ad6ac89dc55d">AtomicRMWInst::UMin</a>:</div>
<div class="line"><a name="l02551"></a><span class="lineno"> 2551</span>&#160;    <a class="code" href="llvm_2Support_2ErrorHandling_8h.html#ace243f5c25697a1107cce46626b3dc94">llvm_unreachable</a>(<span class="stringliteral">&quot;Unsupported atomic update operation&quot;</span>);</div>
<div class="line"><a name="l02552"></a><span class="lineno"> 2552</span>&#160;  }</div>
<div class="line"><a name="l02553"></a><span class="lineno"> 2553</span>&#160;  <a class="code" href="llvm_2Support_2ErrorHandling_8h.html#ace243f5c25697a1107cce46626b3dc94">llvm_unreachable</a>(<span class="stringliteral">&quot;Unsupported atomic update operation&quot;</span>);</div>
<div class="line"><a name="l02554"></a><span class="lineno"> 2554</span>&#160;}</div>
<div class="line"><a name="l02555"></a><span class="lineno"> 2555</span>&#160; </div>
<div class="line"><a name="l02556"></a><span class="lineno"> 2556</span>&#160;std::pair&lt;Value *, Value *&gt;</div>
<div class="line"><a name="l02557"></a><span class="lineno"> 2557</span>&#160;OpenMPIRBuilder::emitAtomicUpdate(<a class="code" href="classllvm_1_1Instruction.html">Instruction</a> *AllocIP, <a class="code" href="classllvm_1_1Value.html">Value</a> *<a class="code" href="ErlangGCPrinter_8cpp.html#a74b474c0616ab55c1d9487f11fd31d26">X</a>, <a class="code" href="classllvm_1_1Value.html">Value</a> *Expr,</div>
<div class="line"><a name="l02558"></a><span class="lineno"> 2558</span>&#160;                                  <a class="code" href="namespacellvm.html#a9bccbe67aaab722783ca4e7c504aaaa7">AtomicOrdering</a> AO, <a class="code" href="classllvm_1_1AtomicRMWInst.html#a461cfbbb5c7a57ab73210498923cf615">AtomicRMWInst::BinOp</a> RMWOp,</div>
<div class="line"><a name="l02559"></a><span class="lineno"> 2559</span>&#160;                                  AtomicUpdateCallbackTy &amp;UpdateOp,</div>
<div class="line"><a name="l02560"></a><span class="lineno"> 2560</span>&#160;                                  <span class="keywordtype">bool</span> VolatileX, <span class="keywordtype">bool</span> IsXLHSInRHSPart) {</div>
<div class="line"><a name="l02561"></a><span class="lineno"> 2561</span>&#160;  <a class="code" href="classllvm_1_1Type.html">Type</a> *XElemTy = <a class="code" href="ErlangGCPrinter_8cpp.html#a74b474c0616ab55c1d9487f11fd31d26">X</a>-&gt;getType()-&gt;getPointerElementType();</div>
<div class="line"><a name="l02562"></a><span class="lineno"> 2562</span>&#160; </div>
<div class="line"><a name="l02563"></a><span class="lineno"> 2563</span>&#160;  <span class="keywordtype">bool</span> DoCmpExch =</div>
<div class="line"><a name="l02564"></a><span class="lineno"> 2564</span>&#160;      ((RMWOp == <a class="code" href="classllvm_1_1AtomicRMWInst.html#a461cfbbb5c7a57ab73210498923cf615a497e8f347648b1b2823ee0338c95f65f">AtomicRMWInst::BAD_BINOP</a>) || (RMWOp == <a class="code" href="classllvm_1_1AtomicRMWInst.html#a461cfbbb5c7a57ab73210498923cf615a08ef06068dcd583c2476568dda59b324">AtomicRMWInst::FAdd</a>)) ||</div>
<div class="line"><a name="l02565"></a><span class="lineno"> 2565</span>&#160;      (RMWOp == <a class="code" href="classllvm_1_1AtomicRMWInst.html#a461cfbbb5c7a57ab73210498923cf615a92f66d4bc04fc8514bee80509f3e78d4">AtomicRMWInst::FSub</a>) ||</div>
<div class="line"><a name="l02566"></a><span class="lineno"> 2566</span>&#160;      (RMWOp == <a class="code" href="classllvm_1_1AtomicRMWInst.html#a461cfbbb5c7a57ab73210498923cf615a5db6ca0c3e18acd87290f22ccb2ce564">AtomicRMWInst::Sub</a> &amp;&amp; !IsXLHSInRHSPart);</div>
<div class="line"><a name="l02567"></a><span class="lineno"> 2567</span>&#160; </div>
<div class="line"><a name="l02568"></a><span class="lineno"> 2568</span>&#160;  std::pair&lt;Value *, Value *&gt; Res;</div>
<div class="line"><a name="l02569"></a><span class="lineno"> 2569</span>&#160;  <span class="keywordflow">if</span> (XElemTy-&gt;<a class="code" href="classllvm_1_1Type.html#ac6d28a9b11139182134a9618028a0d07">isIntegerTy</a>() &amp;&amp; !DoCmpExch) {</div>
<div class="line"><a name="l02570"></a><span class="lineno"> 2570</span>&#160;    Res.first = <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.CreateAtomicRMW(RMWOp, <a class="code" href="ErlangGCPrinter_8cpp.html#a74b474c0616ab55c1d9487f11fd31d26">X</a>, Expr, <a class="code" href="structllvm_1_1MaybeAlign.html">llvm::MaybeAlign</a>(), AO);</div>
<div class="line"><a name="l02571"></a><span class="lineno"> 2571</span>&#160;    <span class="comment">// not needed except in case of postfix captures. Generate anyway for</span></div>
<div class="line"><a name="l02572"></a><span class="lineno"> 2572</span>&#160;    <span class="comment">// consistency with the else part. Will be removed with any DCE pass.</span></div>
<div class="line"><a name="l02573"></a><span class="lineno"> 2573</span>&#160;    Res.second = emitRMWOpAsInstruction(Res.first, Expr, RMWOp);</div>
<div class="line"><a name="l02574"></a><span class="lineno"> 2574</span>&#160;  } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l02575"></a><span class="lineno"> 2575</span>&#160;    <span class="keywordtype">unsigned</span> Addrspace = cast&lt;PointerType&gt;(<a class="code" href="ErlangGCPrinter_8cpp.html#a74b474c0616ab55c1d9487f11fd31d26">X</a>-&gt;getType())-&gt;getAddressSpace();</div>
<div class="line"><a name="l02576"></a><span class="lineno"> 2576</span>&#160;    <a class="code" href="classllvm_1_1IntegerType.html">IntegerType</a> *IntCastTy =</div>
<div class="line"><a name="l02577"></a><span class="lineno"> 2577</span>&#160;        <a class="code" href="classllvm_1_1IntegerType.html#a14f7b4f1aed38192fb6b7772eb506bdb">IntegerType::get</a>(<a class="code" href="lib_2Target_2X86_2README_8txt.html#ac88fe1d3a61b056a4f64fbbb156a62ff">M</a>.getContext(), XElemTy-&gt;<a class="code" href="classllvm_1_1Type.html#a9f382207d841377156d4c7868b66b9a5">getScalarSizeInBits</a>());</div>
<div class="line"><a name="l02578"></a><span class="lineno"> 2578</span>&#160;    <a class="code" href="classllvm_1_1Value.html">Value</a> *XBCast =</div>
<div class="line"><a name="l02579"></a><span class="lineno"> 2579</span>&#160;        <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.CreateBitCast(<a class="code" href="ErlangGCPrinter_8cpp.html#a74b474c0616ab55c1d9487f11fd31d26">X</a>, IntCastTy-&gt;<a class="code" href="classllvm_1_1Type.html#adc01a7457de85fc52a3bb860d7e1c6a4">getPointerTo</a>(Addrspace));</div>
<div class="line"><a name="l02580"></a><span class="lineno"> 2580</span>&#160;    <a class="code" href="classllvm_1_1LoadInst.html">LoadInst</a> *OldVal =</div>
<div class="line"><a name="l02581"></a><span class="lineno"> 2581</span>&#160;        <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.CreateLoad(IntCastTy, XBCast, <a class="code" href="ErlangGCPrinter_8cpp.html#a74b474c0616ab55c1d9487f11fd31d26">X</a>-&gt;getName() + <span class="stringliteral">&quot;.atomic.load&quot;</span>);</div>
<div class="line"><a name="l02582"></a><span class="lineno"> 2582</span>&#160;    OldVal-&gt;<a class="code" href="classllvm_1_1LoadInst.html#a6ae88dc44b078c80ce3a25401fd4b05b">setAtomic</a>(AO);</div>
<div class="line"><a name="l02583"></a><span class="lineno"> 2583</span>&#160;    <span class="comment">// CurBB</span></div>
<div class="line"><a name="l02584"></a><span class="lineno"> 2584</span>&#160;    <span class="comment">// |     /---\</span></div>
<div class="line"><a name="l02585"></a><span class="lineno"> 2585</span>&#160;<span class="comment">    // ContBB    |</span></div>
<div class="line"><a name="l02586"></a><span class="lineno"> 2586</span>&#160;    <span class="comment">// |     \---/</span></div>
<div class="line"><a name="l02587"></a><span class="lineno"> 2587</span>&#160;    <span class="comment">// ExitBB</span></div>
<div class="line"><a name="l02588"></a><span class="lineno"> 2588</span>&#160;    <a class="code" href="classllvm_1_1BasicBlock.html">BasicBlock</a> *CurBB = <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.GetInsertBlock();</div>
<div class="line"><a name="l02589"></a><span class="lineno"> 2589</span>&#160;    <a class="code" href="classllvm_1_1Instruction.html">Instruction</a> *CurBBTI = CurBB-&gt;<a class="code" href="classllvm_1_1BasicBlock.html#a71a9eabc4318b2fc34f83b01dfee484b">getTerminator</a>();</div>
<div class="line"><a name="l02590"></a><span class="lineno"> 2590</span>&#160;    CurBBTI = CurBBTI ? CurBBTI : <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.CreateUnreachable();</div>
<div class="line"><a name="l02591"></a><span class="lineno"> 2591</span>&#160;    <a class="code" href="classllvm_1_1BasicBlock.html">BasicBlock</a> *ExitBB =</div>
<div class="line"><a name="l02592"></a><span class="lineno"> 2592</span>&#160;        CurBB-&gt;<a class="code" href="classllvm_1_1BasicBlock.html#a52c990590792c91dd20b6d45acebe359">splitBasicBlock</a>(CurBBTI, <a class="code" href="ErlangGCPrinter_8cpp.html#a74b474c0616ab55c1d9487f11fd31d26">X</a>-&gt;getName() + <span class="stringliteral">&quot;.atomic.exit&quot;</span>);</div>
<div class="line"><a name="l02593"></a><span class="lineno"> 2593</span>&#160;    <a class="code" href="classllvm_1_1BasicBlock.html">BasicBlock</a> *ContBB = CurBB-&gt;<a class="code" href="classllvm_1_1BasicBlock.html#a52c990590792c91dd20b6d45acebe359">splitBasicBlock</a>(CurBB-&gt;<a class="code" href="classllvm_1_1BasicBlock.html#a71a9eabc4318b2fc34f83b01dfee484b">getTerminator</a>(),</div>
<div class="line"><a name="l02594"></a><span class="lineno"> 2594</span>&#160;                                                <a class="code" href="ErlangGCPrinter_8cpp.html#a74b474c0616ab55c1d9487f11fd31d26">X</a>-&gt;getName() + <span class="stringliteral">&quot;.atomic.cont&quot;</span>);</div>
<div class="line"><a name="l02595"></a><span class="lineno"> 2595</span>&#160;    ContBB-&gt;<a class="code" href="classllvm_1_1BasicBlock.html#a71a9eabc4318b2fc34f83b01dfee484b">getTerminator</a>()-&gt;<a class="code" href="classllvm_1_1Instruction.html#ae6b978645b8ac72d1a35e1298ffdd4f0">eraseFromParent</a>();</div>
<div class="line"><a name="l02596"></a><span class="lineno"> 2596</span>&#160;    <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.SetInsertPoint(ContBB);</div>
<div class="line"><a name="l02597"></a><span class="lineno"> 2597</span>&#160;    <a class="code" href="classllvm_1_1PHINode.html">llvm::PHINode</a> *PHI = <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.CreatePHI(OldVal-&gt;<a class="code" href="classllvm_1_1Value.html#a6393a2d4fe7e10b28a0dcc35f881567b">getType</a>(), 2);</div>
<div class="line"><a name="l02598"></a><span class="lineno"> 2598</span>&#160;    PHI-&gt;<a class="code" href="classllvm_1_1PHINode.html#a089cccb6f231efee72abc76d0f9c695f">addIncoming</a>(OldVal, CurBB);</div>
<div class="line"><a name="l02599"></a><span class="lineno"> 2599</span>&#160;    <a class="code" href="classllvm_1_1AllocaInst.html">AllocaInst</a> *NewAtomicAddr = <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.CreateAlloca(XElemTy);</div>
<div class="line"><a name="l02600"></a><span class="lineno"> 2600</span>&#160;    NewAtomicAddr-&gt;<a class="code" href="classllvm_1_1Value.html#a35ee267850af7c235474a8c46c7ac5af">setName</a>(<a class="code" href="ErlangGCPrinter_8cpp.html#a74b474c0616ab55c1d9487f11fd31d26">X</a>-&gt;getName() + <span class="stringliteral">&quot;x.new.val&quot;</span>);</div>
<div class="line"><a name="l02601"></a><span class="lineno"> 2601</span>&#160;    NewAtomicAddr-&gt;<a class="code" href="classllvm_1_1Instruction.html#af67d1f3a518964d80a109bb3d9d5cf1e">moveBefore</a>(AllocIP);</div>
<div class="line"><a name="l02602"></a><span class="lineno"> 2602</span>&#160;    <a class="code" href="classllvm_1_1IntegerType.html">IntegerType</a> *NewAtomicCastTy =</div>
<div class="line"><a name="l02603"></a><span class="lineno"> 2603</span>&#160;        <a class="code" href="classllvm_1_1IntegerType.html#a14f7b4f1aed38192fb6b7772eb506bdb">IntegerType::get</a>(<a class="code" href="lib_2Target_2X86_2README_8txt.html#ac88fe1d3a61b056a4f64fbbb156a62ff">M</a>.getContext(), XElemTy-&gt;<a class="code" href="classllvm_1_1Type.html#a9f382207d841377156d4c7868b66b9a5">getScalarSizeInBits</a>());</div>
<div class="line"><a name="l02604"></a><span class="lineno"> 2604</span>&#160;    <span class="keywordtype">bool</span> IsIntTy = XElemTy-&gt;<a class="code" href="classllvm_1_1Type.html#ac6d28a9b11139182134a9618028a0d07">isIntegerTy</a>();</div>
<div class="line"><a name="l02605"></a><span class="lineno"> 2605</span>&#160;    <a class="code" href="classllvm_1_1Value.html">Value</a> *NewAtomicIntAddr =</div>
<div class="line"><a name="l02606"></a><span class="lineno"> 2606</span>&#160;        (IsIntTy)</div>
<div class="line"><a name="l02607"></a><span class="lineno"> 2607</span>&#160;            ? NewAtomicAddr</div>
<div class="line"><a name="l02608"></a><span class="lineno"> 2608</span>&#160;            : <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.CreateBitCast(NewAtomicAddr,</div>
<div class="line"><a name="l02609"></a><span class="lineno"> 2609</span>&#160;                                    NewAtomicCastTy-&gt;<a class="code" href="classllvm_1_1Type.html#adc01a7457de85fc52a3bb860d7e1c6a4">getPointerTo</a>(Addrspace));</div>
<div class="line"><a name="l02610"></a><span class="lineno"> 2610</span>&#160;    <a class="code" href="classllvm_1_1Value.html">Value</a> *OldExprVal = PHI;</div>
<div class="line"><a name="l02611"></a><span class="lineno"> 2611</span>&#160;    <span class="keywordflow">if</span> (!IsIntTy) {</div>
<div class="line"><a name="l02612"></a><span class="lineno"> 2612</span>&#160;      <span class="keywordflow">if</span> (XElemTy-&gt;<a class="code" href="classllvm_1_1Type.html#aac5759c83abd6a4af236401a7cfe7a0f">isFloatingPointTy</a>()) {</div>
<div class="line"><a name="l02613"></a><span class="lineno"> 2613</span>&#160;        OldExprVal = <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.CreateBitCast(PHI, XElemTy,</div>
<div class="line"><a name="l02614"></a><span class="lineno"> 2614</span>&#160;                                           <a class="code" href="ErlangGCPrinter_8cpp.html#a74b474c0616ab55c1d9487f11fd31d26">X</a>-&gt;getName() + <span class="stringliteral">&quot;.atomic.fltCast&quot;</span>);</div>
<div class="line"><a name="l02615"></a><span class="lineno"> 2615</span>&#160;      } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l02616"></a><span class="lineno"> 2616</span>&#160;        OldExprVal = <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.CreateIntToPtr(PHI, XElemTy,</div>
<div class="line"><a name="l02617"></a><span class="lineno"> 2617</span>&#160;                                            <a class="code" href="ErlangGCPrinter_8cpp.html#a74b474c0616ab55c1d9487f11fd31d26">X</a>-&gt;getName() + <span class="stringliteral">&quot;.atomic.ptrCast&quot;</span>);</div>
<div class="line"><a name="l02618"></a><span class="lineno"> 2618</span>&#160;      }</div>
<div class="line"><a name="l02619"></a><span class="lineno"> 2619</span>&#160;    }</div>
<div class="line"><a name="l02620"></a><span class="lineno"> 2620</span>&#160; </div>
<div class="line"><a name="l02621"></a><span class="lineno"> 2621</span>&#160;    <a class="code" href="classllvm_1_1Value.html">Value</a> *Upd = UpdateOp(OldExprVal, <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>);</div>
<div class="line"><a name="l02622"></a><span class="lineno"> 2622</span>&#160;    <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.CreateStore(Upd, NewAtomicAddr);</div>
<div class="line"><a name="l02623"></a><span class="lineno"> 2623</span>&#160;    <a class="code" href="classllvm_1_1LoadInst.html">LoadInst</a> *DesiredVal = <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.CreateLoad(XElemTy, NewAtomicIntAddr);</div>
<div class="line"><a name="l02624"></a><span class="lineno"> 2624</span>&#160;    <a class="code" href="classllvm_1_1Value.html">Value</a> *XAddr =</div>
<div class="line"><a name="l02625"></a><span class="lineno"> 2625</span>&#160;        (IsIntTy)</div>
<div class="line"><a name="l02626"></a><span class="lineno"> 2626</span>&#160;            ? <a class="code" href="ErlangGCPrinter_8cpp.html#a74b474c0616ab55c1d9487f11fd31d26">X</a></div>
<div class="line"><a name="l02627"></a><span class="lineno"> 2627</span>&#160;            : <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.CreateBitCast(<a class="code" href="ErlangGCPrinter_8cpp.html#a74b474c0616ab55c1d9487f11fd31d26">X</a>, IntCastTy-&gt;<a class="code" href="classllvm_1_1Type.html#adc01a7457de85fc52a3bb860d7e1c6a4">getPointerTo</a>(Addrspace));</div>
<div class="line"><a name="l02628"></a><span class="lineno"> 2628</span>&#160;    <a class="code" href="namespacellvm.html#a9bccbe67aaab722783ca4e7c504aaaa7">AtomicOrdering</a> Failure =</div>
<div class="line"><a name="l02629"></a><span class="lineno"> 2629</span>&#160;        <a class="code" href="classllvm_1_1AtomicCmpXchgInst.html#a7ce03ab5b2a6006ebcdfe804e4c8f1a1">llvm::AtomicCmpXchgInst::getStrongestFailureOrdering</a>(AO);</div>
<div class="line"><a name="l02630"></a><span class="lineno"> 2630</span>&#160;    <a class="code" href="classllvm_1_1AtomicCmpXchgInst.html">AtomicCmpXchgInst</a> *<a class="code" href="namespacellvm_1_1ms__demangle.html#afb795990ffc0cb7321e7d1eacc246324a3e679cff5b3a6f6f8f32aead541a0a12">Result</a> = <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.CreateAtomicCmpXchg(</div>
<div class="line"><a name="l02631"></a><span class="lineno"> 2631</span>&#160;        XAddr, OldExprVal, DesiredVal, <a class="code" href="structllvm_1_1MaybeAlign.html">llvm::MaybeAlign</a>(), AO, Failure);</div>
<div class="line"><a name="l02632"></a><span class="lineno"> 2632</span>&#160;    <a class="code" href="namespacellvm_1_1ms__demangle.html#afb795990ffc0cb7321e7d1eacc246324a3e679cff5b3a6f6f8f32aead541a0a12">Result</a>-&gt;setVolatile(VolatileX);</div>
<div class="line"><a name="l02633"></a><span class="lineno"> 2633</span>&#160;    <a class="code" href="classllvm_1_1Value.html">Value</a> *PreviousVal = <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.CreateExtractValue(Result, <span class="comment">/*Idxs=*/</span>0);</div>
<div class="line"><a name="l02634"></a><span class="lineno"> 2634</span>&#160;    <a class="code" href="classllvm_1_1Value.html">Value</a> *SuccessFailureVal = <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.CreateExtractValue(Result, <span class="comment">/*Idxs=*/</span>1);</div>
<div class="line"><a name="l02635"></a><span class="lineno"> 2635</span>&#160;    PHI-&gt;<a class="code" href="classllvm_1_1PHINode.html#a089cccb6f231efee72abc76d0f9c695f">addIncoming</a>(PreviousVal, <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.GetInsertBlock());</div>
<div class="line"><a name="l02636"></a><span class="lineno"> 2636</span>&#160;    <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.CreateCondBr(SuccessFailureVal, ExitBB, ContBB);</div>
<div class="line"><a name="l02637"></a><span class="lineno"> 2637</span>&#160; </div>
<div class="line"><a name="l02638"></a><span class="lineno"> 2638</span>&#160;    Res.first = OldExprVal;</div>
<div class="line"><a name="l02639"></a><span class="lineno"> 2639</span>&#160;    Res.second = Upd;</div>
<div class="line"><a name="l02640"></a><span class="lineno"> 2640</span>&#160; </div>
<div class="line"><a name="l02641"></a><span class="lineno"> 2641</span>&#160;    <span class="comment">// set Insertion point in exit block</span></div>
<div class="line"><a name="l02642"></a><span class="lineno"> 2642</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1UnreachableInst.html">UnreachableInst</a> *ExitTI =</div>
<div class="line"><a name="l02643"></a><span class="lineno"> 2643</span>&#160;            dyn_cast&lt;UnreachableInst&gt;(ExitBB-&gt;<a class="code" href="classllvm_1_1BasicBlock.html#a71a9eabc4318b2fc34f83b01dfee484b">getTerminator</a>())) {</div>
<div class="line"><a name="l02644"></a><span class="lineno"> 2644</span>&#160;      CurBBTI-&gt;<a class="code" href="classllvm_1_1Instruction.html#ae6b978645b8ac72d1a35e1298ffdd4f0">eraseFromParent</a>();</div>
<div class="line"><a name="l02645"></a><span class="lineno"> 2645</span>&#160;      <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.SetInsertPoint(ExitBB);</div>
<div class="line"><a name="l02646"></a><span class="lineno"> 2646</span>&#160;    } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l02647"></a><span class="lineno"> 2647</span>&#160;      <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.SetInsertPoint(ExitTI);</div>
<div class="line"><a name="l02648"></a><span class="lineno"> 2648</span>&#160;    }</div>
<div class="line"><a name="l02649"></a><span class="lineno"> 2649</span>&#160;  }</div>
<div class="line"><a name="l02650"></a><span class="lineno"> 2650</span>&#160; </div>
<div class="line"><a name="l02651"></a><span class="lineno"> 2651</span>&#160;  <span class="keywordflow">return</span> Res;</div>
<div class="line"><a name="l02652"></a><span class="lineno"> 2652</span>&#160;}</div>
<div class="line"><a name="l02653"></a><span class="lineno"> 2653</span>&#160; </div>
<div class="line"><a name="l02654"></a><span class="lineno"><a class="line" href="classllvm_1_1OpenMPIRBuilder.html#a660b3826e05cab3e906f32a0b6178028"> 2654</a></span>&#160;<a class="code" href="classllvm_1_1OpenMPIRBuilder.html#aafc1886793b898052f87edd7e9fdbaa3">OpenMPIRBuilder::InsertPointTy</a> <a class="code" href="classllvm_1_1OpenMPIRBuilder.html#a660b3826e05cab3e906f32a0b6178028">OpenMPIRBuilder::createAtomicCapture</a>(</div>
<div class="line"><a name="l02655"></a><span class="lineno"> 2655</span>&#160;    <span class="keyword">const</span> <a class="code" href="structllvm_1_1OpenMPIRBuilder_1_1LocationDescription.html">LocationDescription</a> &amp;Loc, <a class="code" href="classllvm_1_1Instruction.html">Instruction</a> *AllocIP, <a class="code" href="structllvm_1_1OpenMPIRBuilder_1_1AtomicOpValue.html">AtomicOpValue</a> &amp;<a class="code" href="ErlangGCPrinter_8cpp.html#a74b474c0616ab55c1d9487f11fd31d26">X</a>,</div>
<div class="line"><a name="l02656"></a><span class="lineno"> 2656</span>&#160;    <a class="code" href="structllvm_1_1OpenMPIRBuilder_1_1AtomicOpValue.html">AtomicOpValue</a> &amp;V, <a class="code" href="classllvm_1_1Value.html">Value</a> *Expr, <a class="code" href="namespacellvm.html#a9bccbe67aaab722783ca4e7c504aaaa7">AtomicOrdering</a> AO,</div>
<div class="line"><a name="l02657"></a><span class="lineno"> 2657</span>&#160;    <a class="code" href="classllvm_1_1AtomicRMWInst.html#a461cfbbb5c7a57ab73210498923cf615">AtomicRMWInst::BinOp</a> RMWOp, <a class="code" href="classllvm_1_1function__ref.html">AtomicUpdateCallbackTy</a> &amp;UpdateOp,</div>
<div class="line"><a name="l02658"></a><span class="lineno"> 2658</span>&#160;    <span class="keywordtype">bool</span> UpdateExpr, <span class="keywordtype">bool</span> IsPostfixUpdate, <span class="keywordtype">bool</span> IsXLHSInRHSPart) {</div>
<div class="line"><a name="l02659"></a><span class="lineno"> 2659</span>&#160;  <span class="keywordflow">if</span> (!updateToLocation(Loc))</div>
<div class="line"><a name="l02660"></a><span class="lineno"> 2660</span>&#160;    <span class="keywordflow">return</span> Loc.<a class="code" href="structllvm_1_1OpenMPIRBuilder_1_1LocationDescription.html#aa15e9d88f98f6d7a0898e6aff4753040">IP</a>;</div>
<div class="line"><a name="l02661"></a><span class="lineno"> 2661</span>&#160; </div>
<div class="line"><a name="l02662"></a><span class="lineno"> 2662</span>&#160;  <a class="code" href="Debug_8h.html#a08efc68d15935eb8889400a46c3749ba">LLVM_DEBUG</a>({</div>
<div class="line"><a name="l02663"></a><span class="lineno"> 2663</span>&#160;    <a class="code" href="classllvm_1_1Type.html">Type</a> *XTy = <a class="code" href="ErlangGCPrinter_8cpp.html#a74b474c0616ab55c1d9487f11fd31d26">X</a>.Var-&gt;getType();</div>
<div class="line"><a name="l02664"></a><span class="lineno"> 2664</span>&#160;    <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(XTy-&gt;<a class="code" href="classllvm_1_1Type.html#a3b996fbf8458aafffc86cb98a68d0a47">isPointerTy</a>() &amp;&amp;</div>
<div class="line"><a name="l02665"></a><span class="lineno"> 2665</span>&#160;           <span class="stringliteral">&quot;OMP Atomic expects a pointer to target memory&quot;</span>);</div>
<div class="line"><a name="l02666"></a><span class="lineno"> 2666</span>&#160;    <a class="code" href="classllvm_1_1Type.html">Type</a> *XElemTy = XTy-&gt;<a class="code" href="classllvm_1_1Type.html#ae61f17d62c8a79bc5cffa63a2f152311">getPointerElementType</a>();</div>
<div class="line"><a name="l02667"></a><span class="lineno"> 2667</span>&#160;    <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>((XElemTy-&gt;<a class="code" href="classllvm_1_1Type.html#aac5759c83abd6a4af236401a7cfe7a0f">isFloatingPointTy</a>() || XElemTy-&gt;<a class="code" href="classllvm_1_1Type.html#ac6d28a9b11139182134a9618028a0d07">isIntegerTy</a>() ||</div>
<div class="line"><a name="l02668"></a><span class="lineno"> 2668</span>&#160;            XElemTy-&gt;<a class="code" href="classllvm_1_1Type.html#a3b996fbf8458aafffc86cb98a68d0a47">isPointerTy</a>()) &amp;&amp;</div>
<div class="line"><a name="l02669"></a><span class="lineno"> 2669</span>&#160;           <span class="stringliteral">&quot;OMP atomic capture expected a scalar type&quot;</span>);</div>
<div class="line"><a name="l02670"></a><span class="lineno"> 2670</span>&#160;    <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>((RMWOp != <a class="code" href="classllvm_1_1AtomicRMWInst.html#a461cfbbb5c7a57ab73210498923cf615aa1184a7e35e94d162a2d40f2b11beeb2">AtomicRMWInst::Max</a>) &amp;&amp; (RMWOp != <a class="code" href="classllvm_1_1AtomicRMWInst.html#a461cfbbb5c7a57ab73210498923cf615a39edb6e51c1ad37244e8b32a2af4077d">AtomicRMWInst::Min</a>) &amp;&amp;</div>
<div class="line"><a name="l02671"></a><span class="lineno"> 2671</span>&#160;           <span class="stringliteral">&quot;OpenMP atomic does not support LT or GT operations&quot;</span>);</div>
<div class="line"><a name="l02672"></a><span class="lineno"> 2672</span>&#160;  });</div>
<div class="line"><a name="l02673"></a><span class="lineno"> 2673</span>&#160; </div>
<div class="line"><a name="l02674"></a><span class="lineno"> 2674</span>&#160;  <span class="comment">// If UpdateExpr is &#39;x&#39; updated with some `expr` not based on &#39;x&#39;,</span></div>
<div class="line"><a name="l02675"></a><span class="lineno"> 2675</span>&#160;  <span class="comment">// &#39;x&#39; is simply atomically rewritten with &#39;expr&#39;.</span></div>
<div class="line"><a name="l02676"></a><span class="lineno"> 2676</span>&#160;  <a class="code" href="classllvm_1_1AtomicRMWInst.html#a461cfbbb5c7a57ab73210498923cf615">AtomicRMWInst::BinOp</a> AtomicOp = (UpdateExpr ? RMWOp : <a class="code" href="classllvm_1_1AtomicRMWInst.html#a461cfbbb5c7a57ab73210498923cf615afc870a548088c5b7a93a34f648889d77">AtomicRMWInst::Xchg</a>);</div>
<div class="line"><a name="l02677"></a><span class="lineno"> 2677</span>&#160;  std::pair&lt;Value *, Value *&gt; Result =</div>
<div class="line"><a name="l02678"></a><span class="lineno"> 2678</span>&#160;      emitAtomicUpdate(AllocIP, <a class="code" href="ErlangGCPrinter_8cpp.html#a74b474c0616ab55c1d9487f11fd31d26">X</a>.Var, Expr, AO, AtomicOp, UpdateOp,</div>
<div class="line"><a name="l02679"></a><span class="lineno"> 2679</span>&#160;                       <a class="code" href="ErlangGCPrinter_8cpp.html#a74b474c0616ab55c1d9487f11fd31d26">X</a>.IsVolatile, IsXLHSInRHSPart);</div>
<div class="line"><a name="l02680"></a><span class="lineno"> 2680</span>&#160; </div>
<div class="line"><a name="l02681"></a><span class="lineno"> 2681</span>&#160;  <a class="code" href="classllvm_1_1Value.html">Value</a> *CapturedVal = (IsPostfixUpdate ? Result.first : Result.second);</div>
<div class="line"><a name="l02682"></a><span class="lineno"> 2682</span>&#160;  <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.CreateStore(CapturedVal, V.<a class="code" href="structllvm_1_1OpenMPIRBuilder_1_1AtomicOpValue.html#afa06cdaada62e025bfb13b3ca8999963">Var</a>, V.<a class="code" href="structllvm_1_1OpenMPIRBuilder_1_1AtomicOpValue.html#a8405ac1a632edb9252a0d46334f45008">IsVolatile</a>);</div>
<div class="line"><a name="l02683"></a><span class="lineno"> 2683</span>&#160; </div>
<div class="line"><a name="l02684"></a><span class="lineno"> 2684</span>&#160;  checkAndEmitFlushAfterAtomic(Loc, AO, AtomicKind::Capture);</div>
<div class="line"><a name="l02685"></a><span class="lineno"> 2685</span>&#160;  <span class="keywordflow">return</span> <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.saveIP();</div>
<div class="line"><a name="l02686"></a><span class="lineno"> 2686</span>&#160;}</div>
<div class="line"><a name="l02687"></a><span class="lineno"> 2687</span>&#160; </div>
<div class="line"><a name="l02688"></a><span class="lineno"> 2688</span>&#160;<a class="code" href="classllvm_1_1GlobalVariable.html">GlobalVariable</a> *</div>
<div class="line"><a name="l02689"></a><span class="lineno"><a class="line" href="classllvm_1_1OpenMPIRBuilder.html#ab1aa0d632549db4855d6412f4d2d44ae"> 2689</a></span>&#160;<a class="code" href="classllvm_1_1OpenMPIRBuilder.html#ab1aa0d632549db4855d6412f4d2d44ae">OpenMPIRBuilder::createOffloadMapnames</a>(<a class="code" href="classllvm_1_1SmallVectorImpl.html">SmallVectorImpl&lt;llvm::Constant *&gt;</a> &amp;Names,</div>
<div class="line"><a name="l02690"></a><span class="lineno"> 2690</span>&#160;                                       std::string <a class="code" href="namespacellvm_1_1tgtok.html#abbc5259d649363016626e2529fabe0c5a218a3df235546fc092fe0f463e6b714d">VarName</a>) {</div>
<div class="line"><a name="l02691"></a><span class="lineno"> 2691</span>&#160;  <a class="code" href="classllvm_1_1Constant.html">llvm::Constant</a> *MapNamesArrayInit = <a class="code" href="classllvm_1_1ConstantArray.html#a0900dacdc7ad8e3ea0cc92993c7fd422">llvm::ConstantArray::get</a>(</div>
<div class="line"><a name="l02692"></a><span class="lineno"> 2692</span>&#160;      <a class="code" href="classllvm_1_1ArrayType.html#adf411edc4f135b570ab218079474ce77">llvm::ArrayType::get</a>(</div>
<div class="line"><a name="l02693"></a><span class="lineno"> 2693</span>&#160;          <a class="code" href="classllvm_1_1Type.html#a7ba5de75f50bb4a4ba920698edf39b28">llvm::Type::getInt8Ty</a>(<a class="code" href="lib_2Target_2X86_2README_8txt.html#ac88fe1d3a61b056a4f64fbbb156a62ff">M</a>.getContext())-&gt;<a class="code" href="classllvm_1_1Type.html#adc01a7457de85fc52a3bb860d7e1c6a4">getPointerTo</a>(), Names.size()),</div>
<div class="line"><a name="l02694"></a><span class="lineno"> 2694</span>&#160;      Names);</div>
<div class="line"><a name="l02695"></a><span class="lineno"> 2695</span>&#160;  <span class="keyword">auto</span> *MapNamesArrayGlobal = <span class="keyword">new</span> <a class="code" href="classllvm_1_1GlobalVariable.html">llvm::GlobalVariable</a>(</div>
<div class="line"><a name="l02696"></a><span class="lineno"> 2696</span>&#160;      <a class="code" href="lib_2Target_2X86_2README_8txt.html#ac88fe1d3a61b056a4f64fbbb156a62ff">M</a>, MapNamesArrayInit-&gt;<a class="code" href="classllvm_1_1Value.html#a6393a2d4fe7e10b28a0dcc35f881567b">getType</a>(),</div>
<div class="line"><a name="l02697"></a><span class="lineno"> 2697</span>&#160;      <span class="comment">/*isConstant=*/</span><span class="keyword">true</span>, <a class="code" href="classllvm_1_1GlobalValue.html#aedfa75f0c85c4aa85b257f066fbea57ca04ed141708c0fd16723d212502b046ae">llvm::GlobalValue::PrivateLinkage</a>, MapNamesArrayInit,</div>
<div class="line"><a name="l02698"></a><span class="lineno"> 2698</span>&#160;      <a class="code" href="namespacellvm_1_1tgtok.html#abbc5259d649363016626e2529fabe0c5a218a3df235546fc092fe0f463e6b714d">VarName</a>);</div>
<div class="line"><a name="l02699"></a><span class="lineno"> 2699</span>&#160;  <span class="keywordflow">return</span> MapNamesArrayGlobal;</div>
<div class="line"><a name="l02700"></a><span class="lineno"> 2700</span>&#160;}</div>
<div class="line"><a name="l02701"></a><span class="lineno"> 2701</span>&#160; </div>
<div class="line"><a name="l02702"></a><span class="lineno"> 2702</span>&#160;<span class="comment">// Create all simple and struct types exposed by the runtime and remember</span></div>
<div class="line"><a name="l02703"></a><span class="lineno"> 2703</span>&#160;<span class="comment">// the llvm::PointerTypes of them for easy access later.</span></div>
<div class="line"><a name="l02704"></a><span class="lineno"> 2704</span>&#160;<span class="keywordtype">void</span> OpenMPIRBuilder::initializeTypes(<a class="code" href="classllvm_1_1Module.html">Module</a> &amp;M) {</div>
<div class="line"><a name="l02705"></a><span class="lineno"> 2705</span>&#160;  <a class="code" href="classllvm_1_1LLVMContext.html">LLVMContext</a> &amp;Ctx = <a class="code" href="lib_2Target_2X86_2README_8txt.html#ac88fe1d3a61b056a4f64fbbb156a62ff">M</a>.getContext();</div>
<div class="line"><a name="l02706"></a><span class="lineno"> 2706</span>&#160;  <a class="code" href="classllvm_1_1StructType.html">StructType</a> *<a class="code" href="Mips16ISelLowering_8cpp.html#a0acb682b8260ab1c60b918599864e2e5">T</a>;</div>
<div class="line"><a name="l02707"></a><span class="lineno"> 2707</span>&#160;<span class="preprocessor">#define OMP_TYPE(VarName, InitValue) VarName = InitValue;</span></div>
<div class="line"><a name="l02708"></a><span class="lineno"> 2708</span>&#160;<span class="preprocessor">#define OMP_ARRAY_TYPE(VarName, ElemTy, ArraySize)                             \</span></div>
<div class="line"><a name="l02709"></a><span class="lineno"> 2709</span>&#160;<span class="preprocessor">  VarName##Ty = ArrayType::get(ElemTy, ArraySize);                             \</span></div>
<div class="line"><a name="l02710"></a><span class="lineno"> 2710</span>&#160;<span class="preprocessor">  VarName##PtrTy = PointerType::getUnqual(VarName##Ty);</span></div>
<div class="line"><a name="l02711"></a><span class="lineno"> 2711</span>&#160;<span class="preprocessor">#define OMP_FUNCTION_TYPE(VarName, IsVarArg, ReturnType, ...)                  \</span></div>
<div class="line"><a name="l02712"></a><span class="lineno"> 2712</span>&#160;<span class="preprocessor">  VarName = FunctionType::get(ReturnType, {__VA_ARGS__}, IsVarArg);            \</span></div>
<div class="line"><a name="l02713"></a><span class="lineno"> 2713</span>&#160;<span class="preprocessor">  VarName##Ptr = PointerType::getUnqual(VarName);</span></div>
<div class="line"><a name="l02714"></a><span class="lineno"> 2714</span>&#160;<span class="preprocessor">#define OMP_STRUCT_TYPE(VarName, StructName, ...)                              \</span></div>
<div class="line"><a name="l02715"></a><span class="lineno"> 2715</span>&#160;<span class="preprocessor">  T = StructType::getTypeByName(Ctx, StructName);                              \</span></div>
<div class="line"><a name="l02716"></a><span class="lineno"> 2716</span>&#160;<span class="preprocessor">  if (!T)                                                                      \</span></div>
<div class="line"><a name="l02717"></a><span class="lineno"> 2717</span>&#160;<span class="preprocessor">    T = StructType::create(Ctx, {__VA_ARGS__}, StructName);                    \</span></div>
<div class="line"><a name="l02718"></a><span class="lineno"> 2718</span>&#160;<span class="preprocessor">  VarName = T;                                                                 \</span></div>
<div class="line"><a name="l02719"></a><span class="lineno"> 2719</span>&#160;<span class="preprocessor">  VarName##Ptr = PointerType::getUnqual(T);</span></div>
<div class="line"><a name="l02720"></a><span class="lineno"> 2720</span>&#160;<span class="preprocessor">#include &quot;llvm/Frontend/OpenMP/OMPKinds.def&quot;</span></div>
<div class="line"><a name="l02721"></a><span class="lineno"> 2721</span>&#160;}</div>
<div class="line"><a name="l02722"></a><span class="lineno"> 2722</span>&#160; </div>
<div class="line"><a name="l02723"></a><span class="lineno"><a class="line" href="structllvm_1_1OpenMPIRBuilder_1_1OutlineInfo.html#a218bc49443ef1f05fc8074d872d41fcd"> 2723</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="structllvm_1_1OpenMPIRBuilder_1_1OutlineInfo.html#a218bc49443ef1f05fc8074d872d41fcd">OpenMPIRBuilder::OutlineInfo::collectBlocks</a>(</div>
<div class="line"><a name="l02724"></a><span class="lineno"> 2724</span>&#160;    <a class="code" href="classllvm_1_1SmallPtrSetImpl.html">SmallPtrSetImpl&lt;BasicBlock *&gt;</a> &amp;BlockSet,</div>
<div class="line"><a name="l02725"></a><span class="lineno"> 2725</span>&#160;    <a class="code" href="classllvm_1_1SmallVectorImpl.html">SmallVectorImpl&lt;BasicBlock *&gt;</a> &amp;BlockVector) {</div>
<div class="line"><a name="l02726"></a><span class="lineno"> 2726</span>&#160;  <a class="code" href="classllvm_1_1SmallVector.html">SmallVector&lt;BasicBlock *, 32&gt;</a> Worklist;</div>
<div class="line"><a name="l02727"></a><span class="lineno"> 2727</span>&#160;  BlockSet.<a class="code" href="classllvm_1_1SmallPtrSetImpl.html#a6bc6fb89fe2e91c25559a8631f56e27e">insert</a>(EntryBB);</div>
<div class="line"><a name="l02728"></a><span class="lineno"> 2728</span>&#160;  BlockSet.<a class="code" href="classllvm_1_1SmallPtrSetImpl.html#a6bc6fb89fe2e91c25559a8631f56e27e">insert</a>(ExitBB);</div>
<div class="line"><a name="l02729"></a><span class="lineno"> 2729</span>&#160; </div>
<div class="line"><a name="l02730"></a><span class="lineno"> 2730</span>&#160;  Worklist.push_back(EntryBB);</div>
<div class="line"><a name="l02731"></a><span class="lineno"> 2731</span>&#160;  <span class="keywordflow">while</span> (!Worklist.empty()) {</div>
<div class="line"><a name="l02732"></a><span class="lineno"> 2732</span>&#160;    <a class="code" href="classllvm_1_1BasicBlock.html">BasicBlock</a> *<a class="code" href="lib_2CodeGen_2README_8txt.html#a09776db24cf586ec9f1e18f3bae14099">BB</a> = Worklist.<a class="code" href="classllvm_1_1SmallVectorImpl.html#a07e23ae504e2b8c72fd055f93ded8899">pop_back_val</a>();</div>
<div class="line"><a name="l02733"></a><span class="lineno"> 2733</span>&#160;    BlockVector.push_back(<a class="code" href="lib_2CodeGen_2README_8txt.html#a09776db24cf586ec9f1e18f3bae14099">BB</a>);</div>
<div class="line"><a name="l02734"></a><span class="lineno"> 2734</span>&#160;    <span class="keywordflow">for</span> (<a class="code" href="classllvm_1_1BasicBlock.html">BasicBlock</a> *SuccBB : <a class="code" href="namespacellvm.html#a3493591c859b8ae672dfa20950608c86">successors</a>(<a class="code" href="lib_2CodeGen_2README_8txt.html#a09776db24cf586ec9f1e18f3bae14099">BB</a>))</div>
<div class="line"><a name="l02735"></a><span class="lineno"> 2735</span>&#160;      <span class="keywordflow">if</span> (BlockSet.<a class="code" href="classllvm_1_1SmallPtrSetImpl.html#a6bc6fb89fe2e91c25559a8631f56e27e">insert</a>(SuccBB).second)</div>
<div class="line"><a name="l02736"></a><span class="lineno"> 2736</span>&#160;        Worklist.push_back(SuccBB);</div>
<div class="line"><a name="l02737"></a><span class="lineno"> 2737</span>&#160;  }</div>
<div class="line"><a name="l02738"></a><span class="lineno"> 2738</span>&#160;}</div>
<div class="line"><a name="l02739"></a><span class="lineno"> 2739</span>&#160; </div>
<div class="line"><a name="l02740"></a><span class="lineno"> 2740</span>&#160;<span class="keywordtype">void</span> CanonicalLoopInfo::collectControlBlocks(</div>
<div class="line"><a name="l02741"></a><span class="lineno"> 2741</span>&#160;    <a class="code" href="classllvm_1_1SmallVectorImpl.html">SmallVectorImpl&lt;BasicBlock *&gt;</a> &amp;BBs) {</div>
<div class="line"><a name="l02742"></a><span class="lineno"> 2742</span>&#160;  <span class="comment">// We only count those BBs as control block for which we do not need to</span></div>
<div class="line"><a name="l02743"></a><span class="lineno"> 2743</span>&#160;  <span class="comment">// reverse the CFG, i.e. not the loop body which can contain arbitrary control</span></div>
<div class="line"><a name="l02744"></a><span class="lineno"> 2744</span>&#160;  <span class="comment">// flow. For consistency, this also means we do not add the Body block, which</span></div>
<div class="line"><a name="l02745"></a><span class="lineno"> 2745</span>&#160;  <span class="comment">// is just the entry to the body code.</span></div>
<div class="line"><a name="l02746"></a><span class="lineno"> 2746</span>&#160;  BBs.<a class="code" href="classllvm_1_1SmallVectorImpl.html#a499ea32ca1b8d16cedfe01d1e5b08f29">reserve</a>(BBs.size() + 6);</div>
<div class="line"><a name="l02747"></a><span class="lineno"> 2747</span>&#160;  BBs.<a class="code" href="classllvm_1_1SmallVectorImpl.html#ac56f67ff590e79d76f8ebd243e4cf442">append</a>({Preheader, Header, <a class="code" href="BasicBlockSections_8cpp.html#a5fd0741d696f28faf65b33f6c6af8fda">Cond</a>, Latch, Exit, After});</div>
<div class="line"><a name="l02748"></a><span class="lineno"> 2748</span>&#160;}</div>
<div class="line"><a name="l02749"></a><span class="lineno"> 2749</span>&#160; </div>
<div class="line"><a name="l02750"></a><span class="lineno"><a class="line" href="classllvm_1_1CanonicalLoopInfo.html#a32ff799dcb39887a8d21322020f305ba"> 2750</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="classllvm_1_1CanonicalLoopInfo.html#a32ff799dcb39887a8d21322020f305ba">CanonicalLoopInfo::assertOK</a>()<span class="keyword"> const </span>{</div>
<div class="line"><a name="l02751"></a><span class="lineno"> 2751</span>&#160;<span class="preprocessor">#ifndef NDEBUG</span></div>
<div class="line"><a name="l02752"></a><span class="lineno"> 2752</span>&#160;  <span class="keywordflow">if</span> (!IsValid)</div>
<div class="line"><a name="l02753"></a><span class="lineno"> 2753</span>&#160;    <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l02754"></a><span class="lineno"> 2754</span>&#160; </div>
<div class="line"><a name="l02755"></a><span class="lineno"> 2755</span>&#160;  <span class="comment">// Verify standard control-flow we use for OpenMP loops.</span></div>
<div class="line"><a name="l02756"></a><span class="lineno"> 2756</span>&#160;  <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(Preheader);</div>
<div class="line"><a name="l02757"></a><span class="lineno"> 2757</span>&#160;  <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(isa&lt;BranchInst&gt;(Preheader-&gt;getTerminator()) &amp;&amp;</div>
<div class="line"><a name="l02758"></a><span class="lineno"> 2758</span>&#160;         <span class="stringliteral">&quot;Preheader must terminate with unconditional branch&quot;</span>);</div>
<div class="line"><a name="l02759"></a><span class="lineno"> 2759</span>&#160;  <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(Preheader-&gt;getSingleSuccessor() == Header &amp;&amp;</div>
<div class="line"><a name="l02760"></a><span class="lineno"> 2760</span>&#160;         <span class="stringliteral">&quot;Preheader must jump to header&quot;</span>);</div>
<div class="line"><a name="l02761"></a><span class="lineno"> 2761</span>&#160; </div>
<div class="line"><a name="l02762"></a><span class="lineno"> 2762</span>&#160;  <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(Header);</div>
<div class="line"><a name="l02763"></a><span class="lineno"> 2763</span>&#160;  <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(isa&lt;BranchInst&gt;(Header-&gt;getTerminator()) &amp;&amp;</div>
<div class="line"><a name="l02764"></a><span class="lineno"> 2764</span>&#160;         <span class="stringliteral">&quot;Header must terminate with unconditional branch&quot;</span>);</div>
<div class="line"><a name="l02765"></a><span class="lineno"> 2765</span>&#160;  <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(Header-&gt;getSingleSuccessor() == <a class="code" href="BasicBlockSections_8cpp.html#a5fd0741d696f28faf65b33f6c6af8fda">Cond</a> &amp;&amp;</div>
<div class="line"><a name="l02766"></a><span class="lineno"> 2766</span>&#160;         <span class="stringliteral">&quot;Header must jump to exiting block&quot;</span>);</div>
<div class="line"><a name="l02767"></a><span class="lineno"> 2767</span>&#160; </div>
<div class="line"><a name="l02768"></a><span class="lineno"> 2768</span>&#160;  <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(<a class="code" href="BasicBlockSections_8cpp.html#a5fd0741d696f28faf65b33f6c6af8fda">Cond</a>);</div>
<div class="line"><a name="l02769"></a><span class="lineno"> 2769</span>&#160;  <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(<a class="code" href="BasicBlockSections_8cpp.html#a5fd0741d696f28faf65b33f6c6af8fda">Cond</a>-&gt;getSinglePredecessor() == Header &amp;&amp;</div>
<div class="line"><a name="l02770"></a><span class="lineno"> 2770</span>&#160;         <span class="stringliteral">&quot;Exiting block only reachable from header&quot;</span>);</div>
<div class="line"><a name="l02771"></a><span class="lineno"> 2771</span>&#160; </div>
<div class="line"><a name="l02772"></a><span class="lineno"> 2772</span>&#160;  <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(isa&lt;BranchInst&gt;(<a class="code" href="BasicBlockSections_8cpp.html#a5fd0741d696f28faf65b33f6c6af8fda">Cond</a>-&gt;getTerminator()) &amp;&amp;</div>
<div class="line"><a name="l02773"></a><span class="lineno"> 2773</span>&#160;         <span class="stringliteral">&quot;Exiting block must terminate with conditional branch&quot;</span>);</div>
<div class="line"><a name="l02774"></a><span class="lineno"> 2774</span>&#160;  <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(<a class="code" href="namespacellvm.html#a10f3d955592ae2bc745f57e5b48ae115">size</a>(<a class="code" href="namespacellvm.html#a3493591c859b8ae672dfa20950608c86">successors</a>(<a class="code" href="BasicBlockSections_8cpp.html#a5fd0741d696f28faf65b33f6c6af8fda">Cond</a>)) == 2 &amp;&amp;</div>
<div class="line"><a name="l02775"></a><span class="lineno"> 2775</span>&#160;         <span class="stringliteral">&quot;Exiting block must have two successors&quot;</span>);</div>
<div class="line"><a name="l02776"></a><span class="lineno"> 2776</span>&#160;  <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(cast&lt;BranchInst&gt;(<a class="code" href="BasicBlockSections_8cpp.html#a5fd0741d696f28faf65b33f6c6af8fda">Cond</a>-&gt;getTerminator())-&gt;getSuccessor(0) == Body &amp;&amp;</div>
<div class="line"><a name="l02777"></a><span class="lineno"> 2777</span>&#160;         <span class="stringliteral">&quot;Exiting block&#39;s first successor jump to the body&quot;</span>);</div>
<div class="line"><a name="l02778"></a><span class="lineno"> 2778</span>&#160;  <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(cast&lt;BranchInst&gt;(<a class="code" href="BasicBlockSections_8cpp.html#a5fd0741d696f28faf65b33f6c6af8fda">Cond</a>-&gt;getTerminator())-&gt;getSuccessor(1) == Exit &amp;&amp;</div>
<div class="line"><a name="l02779"></a><span class="lineno"> 2779</span>&#160;         <span class="stringliteral">&quot;Exiting block&#39;s second successor must exit the loop&quot;</span>);</div>
<div class="line"><a name="l02780"></a><span class="lineno"> 2780</span>&#160; </div>
<div class="line"><a name="l02781"></a><span class="lineno"> 2781</span>&#160;  <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(Body);</div>
<div class="line"><a name="l02782"></a><span class="lineno"> 2782</span>&#160;  <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(Body-&gt;getSinglePredecessor() == <a class="code" href="BasicBlockSections_8cpp.html#a5fd0741d696f28faf65b33f6c6af8fda">Cond</a> &amp;&amp;</div>
<div class="line"><a name="l02783"></a><span class="lineno"> 2783</span>&#160;         <span class="stringliteral">&quot;Body only reachable from exiting block&quot;</span>);</div>
<div class="line"><a name="l02784"></a><span class="lineno"> 2784</span>&#160;  <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(!isa&lt;PHINode&gt;(Body-&gt;front()));</div>
<div class="line"><a name="l02785"></a><span class="lineno"> 2785</span>&#160; </div>
<div class="line"><a name="l02786"></a><span class="lineno"> 2786</span>&#160;  <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(Latch);</div>
<div class="line"><a name="l02787"></a><span class="lineno"> 2787</span>&#160;  <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(isa&lt;BranchInst&gt;(Latch-&gt;getTerminator()) &amp;&amp;</div>
<div class="line"><a name="l02788"></a><span class="lineno"> 2788</span>&#160;         <span class="stringliteral">&quot;Latch must terminate with unconditional branch&quot;</span>);</div>
<div class="line"><a name="l02789"></a><span class="lineno"> 2789</span>&#160;  <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(Latch-&gt;getSingleSuccessor() == Header &amp;&amp; <span class="stringliteral">&quot;Latch must jump to header&quot;</span>);</div>
<div class="line"><a name="l02790"></a><span class="lineno"> 2790</span>&#160;  <span class="comment">// TODO: To support simple redirecting of the end of the body code that has</span></div>
<div class="line"><a name="l02791"></a><span class="lineno"> 2791</span>&#160;  <span class="comment">// multiple; introduce another auxiliary basic block like preheader and after.</span></div>
<div class="line"><a name="l02792"></a><span class="lineno"> 2792</span>&#160;  <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(Latch-&gt;getSinglePredecessor() != <span class="keyword">nullptr</span>);</div>
<div class="line"><a name="l02793"></a><span class="lineno"> 2793</span>&#160;  <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(!isa&lt;PHINode&gt;(Latch-&gt;front()));</div>
<div class="line"><a name="l02794"></a><span class="lineno"> 2794</span>&#160; </div>
<div class="line"><a name="l02795"></a><span class="lineno"> 2795</span>&#160;  <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(Exit);</div>
<div class="line"><a name="l02796"></a><span class="lineno"> 2796</span>&#160;  <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(isa&lt;BranchInst&gt;(Exit-&gt;getTerminator()) &amp;&amp;</div>
<div class="line"><a name="l02797"></a><span class="lineno"> 2797</span>&#160;         <span class="stringliteral">&quot;Exit block must terminate with unconditional branch&quot;</span>);</div>
<div class="line"><a name="l02798"></a><span class="lineno"> 2798</span>&#160;  <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(Exit-&gt;getSingleSuccessor() == After &amp;&amp;</div>
<div class="line"><a name="l02799"></a><span class="lineno"> 2799</span>&#160;         <span class="stringliteral">&quot;Exit block must jump to after block&quot;</span>);</div>
<div class="line"><a name="l02800"></a><span class="lineno"> 2800</span>&#160; </div>
<div class="line"><a name="l02801"></a><span class="lineno"> 2801</span>&#160;  <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(After);</div>
<div class="line"><a name="l02802"></a><span class="lineno"> 2802</span>&#160;  <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(After-&gt;getSinglePredecessor() == Exit &amp;&amp;</div>
<div class="line"><a name="l02803"></a><span class="lineno"> 2803</span>&#160;         <span class="stringliteral">&quot;After block only reachable from exit block&quot;</span>);</div>
<div class="line"><a name="l02804"></a><span class="lineno"> 2804</span>&#160;  <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(After-&gt;empty() || !isa&lt;PHINode&gt;(After-&gt;front()));</div>
<div class="line"><a name="l02805"></a><span class="lineno"> 2805</span>&#160; </div>
<div class="line"><a name="l02806"></a><span class="lineno"> 2806</span>&#160;  <a class="code" href="classllvm_1_1Instruction.html">Instruction</a> *IndVar = getIndVar();</div>
<div class="line"><a name="l02807"></a><span class="lineno"> 2807</span>&#160;  <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(IndVar &amp;&amp; <span class="stringliteral">&quot;Canonical induction variable not found?&quot;</span>);</div>
<div class="line"><a name="l02808"></a><span class="lineno"> 2808</span>&#160;  <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(isa&lt;IntegerType&gt;(IndVar-&gt;<a class="code" href="classllvm_1_1Value.html#a6393a2d4fe7e10b28a0dcc35f881567b">getType</a>()) &amp;&amp;</div>
<div class="line"><a name="l02809"></a><span class="lineno"> 2809</span>&#160;         <span class="stringliteral">&quot;Induction variable must be an integer&quot;</span>);</div>
<div class="line"><a name="l02810"></a><span class="lineno"> 2810</span>&#160;  <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(cast&lt;PHINode&gt;(IndVar)-&gt;<a class="code" href="BasicAliasAnalysis_8cpp.html#a2675de1d8479c7b00387979714da43f7">getParent</a>() == Header &amp;&amp;</div>
<div class="line"><a name="l02811"></a><span class="lineno"> 2811</span>&#160;         <span class="stringliteral">&quot;Induction variable must be a PHI in the loop header&quot;</span>);</div>
<div class="line"><a name="l02812"></a><span class="lineno"> 2812</span>&#160;  <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(cast&lt;PHINode&gt;(IndVar)-&gt;getIncomingBlock(0) == Preheader);</div>
<div class="line"><a name="l02813"></a><span class="lineno"> 2813</span>&#160;  <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(</div>
<div class="line"><a name="l02814"></a><span class="lineno"> 2814</span>&#160;      cast&lt;ConstantInt&gt;(cast&lt;PHINode&gt;(IndVar)-&gt;getIncomingValue(0))-&gt;<a class="code" href="Lint_8cpp.html#a45005634b54e2126cb3e6ec0dbc9ade4">isZero</a>());</div>
<div class="line"><a name="l02815"></a><span class="lineno"> 2815</span>&#160;  <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(cast&lt;PHINode&gt;(IndVar)-&gt;getIncomingBlock(1) == Latch);</div>
<div class="line"><a name="l02816"></a><span class="lineno"> 2816</span>&#160; </div>
<div class="line"><a name="l02817"></a><span class="lineno"> 2817</span>&#160;  <span class="keyword">auto</span> *NextIndVar = cast&lt;PHINode&gt;(IndVar)-&gt;getIncomingValue(1);</div>
<div class="line"><a name="l02818"></a><span class="lineno"> 2818</span>&#160;  <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(cast&lt;Instruction&gt;(NextIndVar)-&gt;<a class="code" href="BasicAliasAnalysis_8cpp.html#a2675de1d8479c7b00387979714da43f7">getParent</a>() == Latch);</div>
<div class="line"><a name="l02819"></a><span class="lineno"> 2819</span>&#160;  <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(cast&lt;BinaryOperator&gt;(NextIndVar)-&gt;<a class="code" href="VPlanSLP_8cpp.html#a46eb381f7896233d7b3f14ad11ea22e3">getOpcode</a>() == <a class="code" href="namespacellvm_1_1MCID.html#ab357441fcd1ea1f9b0d27c12700f6023a2b016c207343046b2bac45e69e76dcec">BinaryOperator::Add</a>);</div>
<div class="line"><a name="l02820"></a><span class="lineno"> 2820</span>&#160;  <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(cast&lt;BinaryOperator&gt;(NextIndVar)-&gt;getOperand(0) == IndVar);</div>
<div class="line"><a name="l02821"></a><span class="lineno"> 2821</span>&#160;  <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(cast&lt;ConstantInt&gt;(cast&lt;BinaryOperator&gt;(NextIndVar)-&gt;getOperand(1))</div>
<div class="line"><a name="l02822"></a><span class="lineno"> 2822</span>&#160;             -&gt;isOne());</div>
<div class="line"><a name="l02823"></a><span class="lineno"> 2823</span>&#160; </div>
<div class="line"><a name="l02824"></a><span class="lineno"> 2824</span>&#160;  <a class="code" href="classllvm_1_1Value.html">Value</a> *TripCount = getTripCount();</div>
<div class="line"><a name="l02825"></a><span class="lineno"> 2825</span>&#160;  <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(TripCount &amp;&amp; <span class="stringliteral">&quot;Loop trip count not found?&quot;</span>);</div>
<div class="line"><a name="l02826"></a><span class="lineno"> 2826</span>&#160;  <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(IndVar-&gt;<a class="code" href="classllvm_1_1Value.html#a6393a2d4fe7e10b28a0dcc35f881567b">getType</a>() == TripCount-&gt;<a class="code" href="classllvm_1_1Value.html#a6393a2d4fe7e10b28a0dcc35f881567b">getType</a>() &amp;&amp;</div>
<div class="line"><a name="l02827"></a><span class="lineno"> 2827</span>&#160;         <span class="stringliteral">&quot;Trip count and induction variable must have the same type&quot;</span>);</div>
<div class="line"><a name="l02828"></a><span class="lineno"> 2828</span>&#160; </div>
<div class="line"><a name="l02829"></a><span class="lineno"> 2829</span>&#160;  <span class="keyword">auto</span> *CmpI = cast&lt;CmpInst&gt;(&amp;<a class="code" href="BasicBlockSections_8cpp.html#a5fd0741d696f28faf65b33f6c6af8fda">Cond</a>-&gt;front());</div>
<div class="line"><a name="l02830"></a><span class="lineno"> 2830</span>&#160;  <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(CmpI-&gt;getPredicate() == <a class="code" href="classllvm_1_1CmpInst.html#a2be3583dac92a031fa1458d4d992c78ba91d86a4753c8bd7624e01bf565d87f8e">CmpInst::ICMP_ULT</a> &amp;&amp;</div>
<div class="line"><a name="l02831"></a><span class="lineno"> 2831</span>&#160;         <span class="stringliteral">&quot;Exit condition must be a signed less-than comparison&quot;</span>);</div>
<div class="line"><a name="l02832"></a><span class="lineno"> 2832</span>&#160;  <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(CmpI-&gt;getOperand(0) == IndVar &amp;&amp;</div>
<div class="line"><a name="l02833"></a><span class="lineno"> 2833</span>&#160;         <span class="stringliteral">&quot;Exit condition must compare the induction variable&quot;</span>);</div>
<div class="line"><a name="l02834"></a><span class="lineno"> 2834</span>&#160;  <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(CmpI-&gt;getOperand(1) == TripCount &amp;&amp;</div>
<div class="line"><a name="l02835"></a><span class="lineno"> 2835</span>&#160;         <span class="stringliteral">&quot;Exit condition must compare with the trip count&quot;</span>);</div>
<div class="line"><a name="l02836"></a><span class="lineno"> 2836</span>&#160;<span class="preprocessor">#endif</span></div>
<div class="line"><a name="l02837"></a><span class="lineno"> 2837</span>&#160;}</div>
</div><!-- fragment --></div><!-- contents -->
<div class="ttc" id="anamespacellvm_1_1Check_html_a067ee17412e800f03802fa9517685732a3450a9712780ac26b071f9da4288a396"><div class="ttname"><a href="namespacellvm_1_1Check.html#a067ee17412e800f03802fa9517685732a3450a9712780ac26b071f9da4288a396">llvm::Check::Size</a></div><div class="ttdeci">@ Size</div><div class="ttdef"><b>Definition:</b> <a href="FileCheck_8h_source.html#l00074">FileCheck.h:73</a></div></div>
<div class="ttc" id="alib_2Target_2README_8txt_html_acb559820d9ca11295b4500f179ef6392"><div class="ttname"><a href="lib_2Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a></div><div class="ttdeci">i</div><div class="ttdef"><b>Definition:</b> <a href="lib_2Target_2README_8txt_source.html#l00029">README.txt:29</a></div></div>
<div class="ttc" id="aclassllvm_1_1CanonicalLoopInfo_html_ac72ebc430ef7dcf1791c66080ddedd9d"><div class="ttname"><a href="classllvm_1_1CanonicalLoopInfo.html#ac72ebc430ef7dcf1791c66080ddedd9d">llvm::CanonicalLoopInfo::getPreheaderIP</a></div><div class="ttdeci">OpenMPIRBuilder::InsertPointTy getPreheaderIP() const</div><div class="ttdoc">Return the insertion point for user code before the loop.</div><div class="ttdef"><b>Definition:</b> <a href="OMPIRBuilder_8h_source.html#l01228">OMPIRBuilder.h:1228</a></div></div>
<div class="ttc" id="aclassllvm_1_1Argument_html"><div class="ttname"><a href="classllvm_1_1Argument.html">llvm::Argument</a></div><div class="ttdoc">This class represents an incoming formal argument to a Function.</div><div class="ttdef"><b>Definition:</b> <a href="Argument_8h_source.html#l00029">Argument.h:29</a></div></div>
<div class="ttc" id="aclassllvm_1_1OpenMPIRBuilder_html_ad89dcb3cd8a39ae57a69487c2988dace"><div class="ttname"><a href="classllvm_1_1OpenMPIRBuilder.html#ad89dcb3cd8a39ae57a69487c2988dace">llvm::OpenMPIRBuilder::createCachedThreadPrivate</a></div><div class="ttdeci">CallInst * createCachedThreadPrivate(const LocationDescription &amp;Loc, llvm::Value *Pointer, llvm::ConstantInt *Size, const llvm::Twine &amp;Name=Twine(&quot;&quot;))</div><div class="ttdoc">Create a runtime call for kmpc_threadprivate_cached.</div><div class="ttdef"><b>Definition:</b> <a href="OMPIRBuilder_8cpp_source.html#l02176">OMPIRBuilder.cpp:2176</a></div></div>
<div class="ttc" id="aclassllvm_1_1BasicBlock_html_a0b4e7bee9b8575cc7db73329f1a561bd"><div class="ttname"><a href="classllvm_1_1BasicBlock.html#a0b4e7bee9b8575cc7db73329f1a561bd">llvm::BasicBlock::end</a></div><div class="ttdeci">iterator end()</div><div class="ttdef"><b>Definition:</b> <a href="BasicBlock_8h_source.html#l00298">BasicBlock.h:298</a></div></div>
<div class="ttc" id="aREADME__ALTIVEC_8txt_html_a9d3ba236d13373cde794da2023acc7a0"><div class="ttname"><a href="README__ALTIVEC_8txt.html#a9d3ba236d13373cde794da2023acc7a0">Attrs</a></div><div class="ttdeci">Function Attrs</div><div class="ttdef"><b>Definition:</b> <a href="README__ALTIVEC_8txt_source.html#l00212">README_ALTIVEC.txt:215</a></div></div>
<div class="ttc" id="anamespacellvm_html_a91d9d210ba428cc67e3c2e892f24529e"><div class="ttname"><a href="namespacellvm.html#a91d9d210ba428cc67e3c2e892f24529e">llvm::predecessors</a></div><div class="ttdeci">pred_range predecessors(BasicBlock *BB)</div><div class="ttdef"><b>Definition:</b> <a href="IR_2CFG_8h_source.html#l00127">CFG.h:127</a></div></div>
<div class="ttc" id="astructllvm_1_1OpenMPIRBuilder_1_1LocationDescription_html"><div class="ttname"><a href="structllvm_1_1OpenMPIRBuilder_1_1LocationDescription.html">llvm::OpenMPIRBuilder::LocationDescription</a></div><div class="ttdoc">Description of a LLVM-IR insertion point (IP) and a debug/source location (filename,...</div><div class="ttdef"><b>Definition:</b> <a href="OMPIRBuilder_8h_source.html#l00150">OMPIRBuilder.h:150</a></div></div>
<div class="ttc" id="astructllvm_1_1OpenMPIRBuilder_1_1OutlineInfo_html_adb6b79680b86167fd4ec4f32346e9e58"><div class="ttname"><a href="structllvm_1_1OpenMPIRBuilder_1_1OutlineInfo.html#adb6b79680b86167fd4ec4f32346e9e58">llvm::OpenMPIRBuilder::OutlineInfo::ExitBB</a></div><div class="ttdeci">BasicBlock * ExitBB</div><div class="ttdef"><b>Definition:</b> <a href="OMPIRBuilder_8h_source.html#l00602">OMPIRBuilder.h:602</a></div></div>
<div class="ttc" id="anamespacellvm_html"><div class="ttname"><a href="namespacellvm.html">llvm</a></div><div class="ttdoc">--------------------- PointerInfo ------------------------------------</div><div class="ttdef"><b>Definition:</b> <a href="AllocatorList_8h_source.html#l00023">AllocatorList.h:23</a></div></div>
<div class="ttc" id="alib_2Target_2X86_2README_8txt_html_ac88fe1d3a61b056a4f64fbbb156a62ff"><div class="ttname"><a href="lib_2Target_2X86_2README_8txt.html#ac88fe1d3a61b056a4f64fbbb156a62ff">M</a></div><div class="ttdeci">We currently emits eax Perhaps this is what we really should generate is Is imull three or four cycles eax eax The current instruction priority is based on pattern complexity The former is more complex because it folds a load so the latter will not be emitted Perhaps we should use AddedComplexity to give LEA32r a higher priority We should always try to match LEA first since the LEA matching code does some estimate to determine whether the match is profitable if we care more about code then imull is better It s two bytes shorter than movl leal On a Pentium M</div><div class="ttdef"><b>Definition:</b> <a href="lib_2Target_2X86_2README_8txt_source.html#l00252">README.txt:252</a></div></div>
<div class="ttc" id="aclassllvm_1_1OpenMPIRBuilder_html_a88cb26bb78b23c1f0aa1988725d46e1c"><div class="ttname"><a href="classllvm_1_1OpenMPIRBuilder.html#a88cb26bb78b23c1f0aa1988725d46e1c">llvm::OpenMPIRBuilder::createSection</a></div><div class="ttdeci">InsertPointTy createSection(const LocationDescription &amp;Loc, BodyGenCallbackTy BodyGenCB, FinalizeCallbackTy FiniCB)</div><div class="ttdoc">Generator for '#omp section'.</div><div class="ttdef"><b>Definition:</b> <a href="OMPIRBuilder_8cpp_source.html#l00991">OMPIRBuilder.cpp:991</a></div></div>
<div class="ttc" id="aclassllvm_1_1OpenMPIRBuilder_html_a10deef7fafe3eff4c9c1755ffda0e4cb"><div class="ttname"><a href="classllvm_1_1OpenMPIRBuilder.html#a10deef7fafe3eff4c9c1755ffda0e4cb">llvm::OpenMPIRBuilder::createCritical</a></div><div class="ttdeci">InsertPointTy createCritical(const LocationDescription &amp;Loc, BodyGenCallbackTy BodyGenCB, FinalizeCallbackTy FiniCB, StringRef CriticalName, Value *HintInst)</div><div class="ttdoc">Generator for '#omp critical'.</div><div class="ttdef"><b>Definition:</b> <a href="OMPIRBuilder_8cpp_source.html#l01930">OMPIRBuilder.cpp:1930</a></div></div>
<div class="ttc" id="aclassllvm_1_1CanonicalLoopInfo_html_aba24a232ebb4ade12a5ed4d0d54d69ad"><div class="ttname"><a href="classllvm_1_1CanonicalLoopInfo.html#aba24a232ebb4ade12a5ed4d0d54d69ad">llvm::CanonicalLoopInfo::getAfter</a></div><div class="ttdeci">BasicBlock * getAfter() const</div><div class="ttdoc">The after block is intended for clean-up code such as lifetime end markers.</div><div class="ttdef"><b>Definition:</b> <a href="OMPIRBuilder_8h_source.html#l01205">OMPIRBuilder.h:1205</a></div></div>
<div class="ttc" id="aclassllvm_1_1BasicBlock_html_a98c0a84a5dfa8bce341c829709f171e5"><div class="ttname"><a href="classllvm_1_1BasicBlock.html#a98c0a84a5dfa8bce341c829709f171e5">llvm::BasicBlock::iterator</a></div><div class="ttdeci">InstListType::iterator iterator</div><div class="ttdoc">Instruction iterators...</div><div class="ttdef"><b>Definition:</b> <a href="BasicBlock_8h_source.html#l00090">BasicBlock.h:90</a></div></div>
<div class="ttc" id="aclassllvm_1_1BasicBlock_html_a38bee869ad41aebfef3de2641b12004c"><div class="ttname"><a href="classllvm_1_1BasicBlock.html#a38bee869ad41aebfef3de2641b12004c">llvm::BasicBlock::getParent</a></div><div class="ttdeci">const Function * getParent() const</div><div class="ttdoc">Return the enclosing method, or null if none.</div><div class="ttdef"><b>Definition:</b> <a href="BasicBlock_8h_source.html#l00107">BasicBlock.h:107</a></div></div>
<div class="ttc" id="aclassllvm_1_1Type_html_a3b996fbf8458aafffc86cb98a68d0a47"><div class="ttname"><a href="classllvm_1_1Type.html#a3b996fbf8458aafffc86cb98a68d0a47">llvm::Type::isPointerTy</a></div><div class="ttdeci">bool isPointerTy() const</div><div class="ttdoc">True if this is an instance of PointerType.</div><div class="ttdef"><b>Definition:</b> <a href="Type_8h_source.html#l00228">Type.h:228</a></div></div>
<div class="ttc" id="aclassllvm_1_1OpenMPIRBuilder_html_a445fa52d77040bccb16bfea111234a2e"><div class="ttname"><a href="classllvm_1_1OpenMPIRBuilder.html#a445fa52d77040bccb16bfea111234a2e">llvm::OpenMPIRBuilder::createLoopSkeleton</a></div><div class="ttdeci">CanonicalLoopInfo * createLoopSkeleton(DebugLoc DL, Value *TripCount, Function *F, BasicBlock *PreInsertBefore, BasicBlock *PostInsertBefore, const Twine &amp;Name={})</div><div class="ttdoc">Create the control flow structure of a canonical OpenMP loop.</div><div class="ttdef"><b>Definition:</b> <a href="OMPIRBuilder_8cpp_source.html#l01073">OMPIRBuilder.cpp:1073</a></div></div>
<div class="ttc" id="anamespacellvm_1_1cl_html_afcbd4ecc474e2d218391d6d3027b086aa7861ef1db44eac8ea7a373cd7c53a7c5"><div class="ttname"><a href="namespacellvm_1_1cl.html#afcbd4ecc474e2d218391d6d3027b086aa7861ef1db44eac8ea7a373cd7c53a7c5">llvm::cl::Prefix</a></div><div class="ttdeci">@ Prefix</div><div class="ttdef"><b>Definition:</b> <a href="CommandLine_8h_source.html#l00164">CommandLine.h:164</a></div></div>
<div class="ttc" id="aclassllvm_1_1Function_html_a1d8eb3054fd49a89ff41bc22a48f87e7"><div class="ttname"><a href="classllvm_1_1Function.html#a1d8eb3054fd49a89ff41bc22a48f87e7">llvm::Function::empty</a></div><div class="ttdeci">bool empty() const</div><div class="ttdef"><b>Definition:</b> <a href="Function_8h_source.html#l00785">Function.h:785</a></div></div>
<div class="ttc" id="aclassllvm_1_1Function_html_a71918985bc82353ecbc009fcdd7ffa38"><div class="ttname"><a href="classllvm_1_1Function.html#a71918985bc82353ecbc009fcdd7ffa38">llvm::Function::getBasicBlockList</a></div><div class="ttdeci">const BasicBlockListType &amp; getBasicBlockList() const</div><div class="ttdoc">Get the underlying elements of the Function...</div><div class="ttdef"><b>Definition:</b> <a href="Function_8h_source.html#l00756">Function.h:756</a></div></div>
<div class="ttc" id="aclassllvm_1_1CodeExtractor_html_a537993928c8af5b0d064fcd5ce1dec2f"><div class="ttname"><a href="classllvm_1_1CodeExtractor.html#a537993928c8af5b0d064fcd5ce1dec2f">llvm::CodeExtractor::findAllocas</a></div><div class="ttdeci">void findAllocas(const CodeExtractorAnalysisCache &amp;CEAC, ValueSet &amp;SinkCands, ValueSet &amp;HoistCands, BasicBlock *&amp;ExitBlock) const</div><div class="ttdoc">Find the set of allocas whose life ranges are contained within the outlined region.</div><div class="ttdef"><b>Definition:</b> <a href="CodeExtractor_8cpp_source.html#l00494">CodeExtractor.cpp:494</a></div></div>
<div class="ttc" id="aclassllvm_1_1Function_html"><div class="ttname"><a href="classllvm_1_1Function.html">llvm::Function</a></div><div class="ttdef"><b>Definition:</b> <a href="Function_8h_source.html#l00061">Function.h:62</a></div></div>
<div class="ttc" id="anamespacellvm_1_1pdb_html_a434cfa04e4ed34b7a901378557d4ca9ea68311183bd3c447d90828b5e2c90f582"><div class="ttname"><a href="namespacellvm_1_1pdb.html#a434cfa04e4ed34b7a901378557d4ca9ea68311183bd3c447d90828b5e2c90f582">llvm::pdb::Int64</a></div><div class="ttdeci">@ Int64</div><div class="ttdef"><b>Definition:</b> <a href="PDBTypes_8h_source.html#l00399">PDBTypes.h:399</a></div></div>
<div class="ttc" id="aclassllvm_1_1Loop_html"><div class="ttname"><a href="classllvm_1_1Loop.html">llvm::Loop</a></div><div class="ttdoc">Represents a single loop in the control flow graph.</div><div class="ttdef"><b>Definition:</b> <a href="LoopInfo_8h_source.html#l00530">LoopInfo.h:530</a></div></div>
<div class="ttc" id="aStringRef_8h_html"><div class="ttname"><a href="StringRef_8h.html">StringRef.h</a></div></div>
<div class="ttc" id="aREADME-SSE_8txt_html_a63d206a063eefcdf8c318ded97b65020"><div class="ttname"><a href="README-SSE_8txt.html#a63d206a063eefcdf8c318ded97b65020">P</a></div><div class="ttdeci">This currently compiles esp xmm0 movsd esp eax eax esp ret We should use not the dag combiner This is because dagcombine2 needs to be able to see through the X86ISD::Wrapper which DAGCombine can t really do The code for turning x load into a single vector load is target independent and should be moved to the dag combiner The code for turning x load into a vector load can only handle a direct load from a global or a direct load from the stack It should be generalized to handle any load from P</div><div class="ttdef"><b>Definition:</b> <a href="README-SSE_8txt_source.html#l00411">README-SSE.txt:411</a></div></div>
<div class="ttc" id="aclassllvm_1_1ConstantStruct_html_a54fcfa620deb80373f489ba2fdad7643"><div class="ttname"><a href="classllvm_1_1ConstantStruct.html#a54fcfa620deb80373f489ba2fdad7643">llvm::ConstantStruct::get</a></div><div class="ttdeci">static Constant * get(StructType *T, ArrayRef&lt; Constant * &gt; V)</div><div class="ttdef"><b>Definition:</b> <a href="Constants_8cpp_source.html#l01328">Constants.cpp:1328</a></div></div>
<div class="ttc" id="aclassllvm_1_1AtomicRMWInst_html_a461cfbbb5c7a57ab73210498923cf615a71aab8ee954b6d71a4eed315e8f6556e"><div class="ttname"><a href="classllvm_1_1AtomicRMWInst.html#a461cfbbb5c7a57ab73210498923cf615a71aab8ee954b6d71a4eed315e8f6556e">llvm::AtomicRMWInst::Xor</a></div><div class="ttdeci">@ Xor</div><div class="ttdoc">*p = old ^ v</div><div class="ttdef"><b>Definition:</b> <a href="Instructions_8h_source.html#l00752">Instructions.h:752</a></div></div>
<div class="ttc" id="aclassllvm_1_1CodeExtractor_html_a8561c48aa0b397c37f9e071dad7df392"><div class="ttname"><a href="classllvm_1_1CodeExtractor.html#a8561c48aa0b397c37f9e071dad7df392">llvm::CodeExtractor::extractCodeRegion</a></div><div class="ttdeci">Function * extractCodeRegion(const CodeExtractorAnalysisCache &amp;CEAC)</div><div class="ttdoc">Perform the extraction, returning the new function.</div><div class="ttdef"><b>Definition:</b> <a href="CodeExtractor_8cpp_source.html#l01571">CodeExtractor.cpp:1571</a></div></div>
<div class="ttc" id="aHexagonHardwareLoops_8cpp_html_ada7c1594a393ede3ce32602d64d7ddb2"><div class="ttname"><a href="HexagonHardwareLoops_8cpp.html#ada7c1594a393ede3ce32602d64d7ddb2">Loops</a></div><div class="ttdeci">Hexagon Hardware Loops</div><div class="ttdef"><b>Definition:</b> <a href="HexagonHardwareLoops_8cpp_source.html#l00372">HexagonHardwareLoops.cpp:372</a></div></div>
<div class="ttc" id="aclassllvm_1_1Target_html"><div class="ttname"><a href="classllvm_1_1Target.html">llvm::Target</a></div><div class="ttdoc">Target - Wrapper for Target specific information.</div><div class="ttdef"><b>Definition:</b> <a href="TargetRegistry_8h_source.html#l00125">TargetRegistry.h:125</a></div></div>
<div class="ttc" id="aclassllvm_1_1GlobalValue_html_a05c6b3b9372b56d130e005db4837da62a7483b56cbb22b39c485b4648ea3374b0"><div class="ttname"><a href="classllvm_1_1GlobalValue.html#a05c6b3b9372b56d130e005db4837da62a7483b56cbb22b39c485b4648ea3374b0">llvm::GlobalValue::NotThreadLocal</a></div><div class="ttdeci">@ NotThreadLocal</div><div class="ttdef"><b>Definition:</b> <a href="GlobalValue_8h_source.html#l00179">GlobalValue.h:179</a></div></div>
<div class="ttc" id="aclassllvm_1_1AtomicRMWInst_html_a461cfbbb5c7a57ab73210498923cf615"><div class="ttname"><a href="classllvm_1_1AtomicRMWInst.html#a461cfbbb5c7a57ab73210498923cf615">llvm::AtomicRMWInst::BinOp</a></div><div class="ttdeci">BinOp</div><div class="ttdoc">This enumeration lists the possible modifications atomicrmw can make.</div><div class="ttdef"><b>Definition:</b> <a href="Instructions_8h_source.html#l00738">Instructions.h:738</a></div></div>
<div class="ttc" id="aclassllvm_1_1ilist__node__with__parent_html_a26708685cc8b94fe3d7092ee080dbb34"><div class="ttname"><a href="classllvm_1_1ilist__node__with__parent.html#a26708685cc8b94fe3d7092ee080dbb34">llvm::ilist_node_with_parent::getNextNode</a></div><div class="ttdeci">NodeTy * getNextNode()</div><div class="ttdoc">Get the next node, or nullptr for the list tail.</div><div class="ttdef"><b>Definition:</b> <a href="ilist__node_8h_source.html#l00288">ilist_node.h:288</a></div></div>
<div class="ttc" id="aclassllvm_1_1SmallVector_html"><div class="ttname"><a href="classllvm_1_1SmallVector.html">llvm::SmallVector</a></div><div class="ttdoc">This is a 'vector' (really, a variable-sized array), optimized for the case when the array is small.</div><div class="ttdef"><b>Definition:</b> <a href="SmallVector_8h_source.html#l01168">SmallVector.h:1169</a></div></div>
<div class="ttc" id="aclassllvm_1_1BasicBlock_html_a266367eb01c634406b32f816d2d9c6bf"><div class="ttname"><a href="classllvm_1_1BasicBlock.html#a266367eb01c634406b32f816d2d9c6bf">llvm::BasicBlock::empty</a></div><div class="ttdeci">bool empty() const</div><div class="ttdef"><b>Definition:</b> <a href="BasicBlock_8h_source.html#l00307">BasicBlock.h:307</a></div></div>
<div class="ttc" id="aclassllvm_1_1OpenMPIRBuilder_html_a76e12ec076e7af4be7b8b77a5d53d3fc"><div class="ttname"><a href="classllvm_1_1OpenMPIRBuilder.html#a76e12ec076e7af4be7b8b77a5d53d3fc">llvm::OpenMPIRBuilder::tileLoops</a></div><div class="ttdeci">std::vector&lt; CanonicalLoopInfo * &gt; tileLoops(DebugLoc DL, ArrayRef&lt; CanonicalLoopInfo * &gt; Loops, ArrayRef&lt; Value * &gt; TileSizes)</div><div class="ttdoc">Tile a loop nest.</div><div class="ttdef"><b>Definition:</b> <a href="OMPIRBuilder_8cpp_source.html#l01690">OMPIRBuilder.cpp:1690</a></div></div>
<div class="ttc" id="anamespacellvm_html_a7b2175e18ff52174fad26b6b68818564"><div class="ttname"><a href="namespacellvm.html#a7b2175e18ff52174fad26b6b68818564">llvm::enumerate</a></div><div class="ttdeci">detail::enumerator&lt; R &gt; enumerate(R &amp;&amp;TheRange)</div><div class="ttdoc">Given an input range, returns a new range whose values are are pair (A,B) such that A is the 0-based ...</div><div class="ttdef"><b>Definition:</b> <a href="STLExtras_8h_source.html#l01964">STLExtras.h:1964</a></div></div>
<div class="ttc" id="aclassllvm_1_1OpenMPIRBuilder_html_a869d56f31fc5c82a49f7ab6720a46d55"><div class="ttname"><a href="classllvm_1_1OpenMPIRBuilder.html#a869d56f31fc5c82a49f7ab6720a46d55">llvm::OpenMPIRBuilder::createWorkshareLoop</a></div><div class="ttdeci">CanonicalLoopInfo * createWorkshareLoop(const LocationDescription &amp;Loc, CanonicalLoopInfo *CLI, InsertPointTy AllocaIP, bool NeedsBarrier)</div><div class="ttdoc">Modifies the canonical loop to be a workshare loop.</div><div class="ttdef"><b>Definition:</b> <a href="OMPIRBuilder_8cpp_source.html#l01359">OMPIRBuilder.cpp:1359</a></div></div>
<div class="ttc" id="aclassllvm_1_1OpenMPIRBuilder_html_ae50b50ebadf256e03cbd4f47a2f4af86"><div class="ttname"><a href="classllvm_1_1OpenMPIRBuilder.html#ae50b50ebadf256e03cbd4f47a2f4af86">llvm::OpenMPIRBuilder::getLanemaskType</a></div><div class="ttdeci">Type * getLanemaskType()</div><div class="ttdef"><b>Definition:</b> <a href="OMPIRBuilder_8cpp_source.html#l00264">OMPIRBuilder.cpp:264</a></div></div>
<div class="ttc" id="aclassllvm_1_1Function_html_ae6a4da5f41fc6a36735cc1704c01ce60"><div class="ttname"><a href="classllvm_1_1Function.html#ae6a4da5f41fc6a36735cc1704c01ce60">llvm::Function::getEntryBlock</a></div><div class="ttdeci">const BasicBlock &amp; getEntryBlock() const</div><div class="ttdef"><b>Definition:</b> <a href="Function_8h_source.html#l00763">Function.h:763</a></div></div>
<div class="ttc" id="aclassllvm_1_1OpenMPIRBuilder_html_aafc1886793b898052f87edd7e9fdbaa3"><div class="ttname"><a href="classllvm_1_1OpenMPIRBuilder.html#aafc1886793b898052f87edd7e9fdbaa3">llvm::OpenMPIRBuilder::InsertPointTy</a></div><div class="ttdeci">IRBuilder&lt;&gt;::InsertPoint InsertPointTy</div><div class="ttdoc">Type used throughout for insertion points.</div><div class="ttdef"><b>Definition:</b> <a href="OMPIRBuilder_8h_source.html#l00053">OMPIRBuilder.h:53</a></div></div>
<div class="ttc" id="aclassllvm_1_1BasicBlock_html_a089e003bb688e55b9a91ed4e7fed3678"><div class="ttname"><a href="classllvm_1_1BasicBlock.html#a089e003bb688e55b9a91ed4e7fed3678">llvm::BasicBlock::replaceSuccessorsPhiUsesWith</a></div><div class="ttdeci">void replaceSuccessorsPhiUsesWith(BasicBlock *Old, BasicBlock *New)</div><div class="ttdoc">Update all phi nodes in this basic block's successors to refer to basic block New instead of basic bl...</div><div class="ttdef"><b>Definition:</b> <a href="BasicBlock_8cpp_source.html#l00457">BasicBlock.cpp:457</a></div></div>
<div class="ttc" id="aclassllvm_1_1IRBuilder_html"><div class="ttname"><a href="classllvm_1_1IRBuilder.html">llvm::IRBuilder</a></div><div class="ttdoc">This provides a uniform API for creating instructions and inserting them into a basic block: either a...</div><div class="ttdef"><b>Definition:</b> <a href="IRBuilder_8h_source.html#l02643">IRBuilder.h:2643</a></div></div>
<div class="ttc" id="aclassllvm_1_1OpenMPIRBuilder_html_a9607f501333d84917dc48f5d263e9b6c"><div class="ttname"><a href="classllvm_1_1OpenMPIRBuilder.html#a9607f501333d84917dc48f5d263e9b6c">llvm::OpenMPIRBuilder::getOrCreateThreadID</a></div><div class="ttdeci">Value * getOrCreateThreadID(Value *Ident)</div><div class="ttdoc">Return the current thread ID.</div><div class="ttdef"><b>Definition:</b> <a href="OMPIRBuilder_8cpp_source.html#l00329">OMPIRBuilder.cpp:329</a></div></div>
<div class="ttc" id="aclassllvm_1_1GlobalVariable_html"><div class="ttname"><a href="classllvm_1_1GlobalVariable.html">llvm::GlobalVariable</a></div><div class="ttdef"><b>Definition:</b> <a href="GlobalVariable_8h_source.html#l00040">GlobalVariable.h:40</a></div></div>
<div class="ttc" id="aclassllvm_1_1CmpInst_html_a2be3583dac92a031fa1458d4d992c78bac17897ebf2f6a6986280fc3bdf28a30a"><div class="ttname"><a href="classllvm_1_1CmpInst.html#a2be3583dac92a031fa1458d4d992c78bac17897ebf2f6a6986280fc3bdf28a30a">llvm::CmpInst::ICMP_NE</a></div><div class="ttdeci">@ ICMP_NE</div><div class="ttdoc">not equal</div><div class="ttdef"><b>Definition:</b> <a href="InstrTypes_8h_source.html#l00742">InstrTypes.h:742</a></div></div>
<div class="ttc" id="aclassllvm_1_1ConstantExpr_html_ae79d05dd3d0b05e080e08f8c5c33f880"><div class="ttname"><a href="classllvm_1_1ConstantExpr.html#ae79d05dd3d0b05e080e08f8c5c33f880">llvm::ConstantExpr::getBitCast</a></div><div class="ttdeci">static Constant * getBitCast(Constant *C, Type *Ty, bool OnlyIfReduced=false)</div><div class="ttdef"><b>Definition:</b> <a href="Constants_8cpp_source.html#l02223">Constants.cpp:2223</a></div></div>
<div class="ttc" id="anamespacellvm_html_addf42fea14164ec994d4d517eaa56688"><div class="ttname"><a href="namespacellvm.html#addf42fea14164ec994d4d517eaa56688">llvm::DeleteDeadBlocks</a></div><div class="ttdeci">void DeleteDeadBlocks(ArrayRef&lt; BasicBlock * &gt; BBs, DomTreeUpdater *DTU=nullptr, bool KeepOneInputPHIs=false)</div><div class="ttdoc">Delete the specified blocks from BB.</div><div class="ttdef"><b>Definition:</b> <a href="BasicBlockUtils_8cpp_source.html#l00094">BasicBlockUtils.cpp:94</a></div></div>
<div class="ttc" id="aclassllvm_1_1Triple_html"><div class="ttname"><a href="classllvm_1_1Triple.html">llvm::Triple</a></div><div class="ttdoc">Triple - Helper class for working with autoconf configuration names.</div><div class="ttdef"><b>Definition:</b> <a href="Triple_8h_source.html#l00045">Triple.h:45</a></div></div>
<div class="ttc" id="anamespacellvm_1_1tgtok_html_abbc5259d649363016626e2529fabe0c5a218a3df235546fc092fe0f463e6b714d"><div class="ttname"><a href="namespacellvm_1_1tgtok.html#abbc5259d649363016626e2529fabe0c5a218a3df235546fc092fe0f463e6b714d">llvm::tgtok::VarName</a></div><div class="ttdeci">@ VarName</div><div class="ttdef"><b>Definition:</b> <a href="TGLexer_8h_source.html#l00071">TGLexer.h:71</a></div></div>
<div class="ttc" id="anamespacellvm_1_1cl_html_a68075925a54790e71ca790e1d4f21a40a263ac008d8d31f13ce460395fc4cf7e6"><div class="ttname"><a href="namespacellvm_1_1cl.html#a68075925a54790e71ca790e1d4f21a40a263ac008d8d31f13ce460395fc4cf7e6">llvm::cl::Hidden</a></div><div class="ttdeci">@ Hidden</div><div class="ttdef"><b>Definition:</b> <a href="CommandLine_8h_source.html#l00143">CommandLine.h:143</a></div></div>
<div class="ttc" id="aclassllvm_1_1DILocation_html"><div class="ttname"><a href="classllvm_1_1DILocation.html">llvm::DILocation</a></div><div class="ttdoc">Debug location.</div><div class="ttdef"><b>Definition:</b> <a href="DebugInfoMetadata_8h_source.html#l01562">DebugInfoMetadata.h:1562</a></div></div>
<div class="ttc" id="aclassllvm_1_1Function_html_a9fffac2512fe651f0d5e37e27f5bd51c"><div class="ttname"><a href="classllvm_1_1Function.html#a9fffac2512fe651f0d5e37e27f5bd51c">llvm::Function::getContext</a></div><div class="ttdeci">LLVMContext &amp; getContext() const</div><div class="ttdoc">getContext - Return a reference to the LLVMContext associated with this function.</div><div class="ttdef"><b>Definition:</b> <a href="Function_8cpp_source.html#l00321">Function.cpp:321</a></div></div>
<div class="ttc" id="aclassllvm_1_1Function_html_ac6baa801e4aea800984e760d5460662f"><div class="ttname"><a href="classllvm_1_1Function.html#ac6baa801e4aea800984e760d5460662f">llvm::Function::arg_size</a></div><div class="ttdeci">size_t arg_size() const</div><div class="ttdef"><b>Definition:</b> <a href="Function_8h_source.html#l00827">Function.h:827</a></div></div>
<div class="ttc" id="alib_2Target_2README_8txt_html_a8db36c82f32d6f6a4d35a00e55be03a8"><div class="ttname"><a href="lib_2Target_2README_8txt.html#a8db36c82f32d6f6a4d35a00e55be03a8">Shift</a></div><div class="ttdeci">bool Shift</div><div class="ttdef"><b>Definition:</b> <a href="lib_2Target_2README_8txt_source.html#l00468">README.txt:468</a></div></div>
<div class="ttc" id="aclassllvm_1_1Type_html"><div class="ttname"><a href="classllvm_1_1Type.html">llvm::Type</a></div><div class="ttdoc">The instances of the Type class are immutable: once they are created, they are never changed.</div><div class="ttdef"><b>Definition:</b> <a href="Type_8h_source.html#l00045">Type.h:45</a></div></div>
<div class="ttc" id="aclassllvm_1_1BasicBlock_html_a8dd327a937563afdb08250abc43820b0"><div class="ttname"><a href="classllvm_1_1BasicBlock.html#a8dd327a937563afdb08250abc43820b0">llvm::BasicBlock::eraseFromParent</a></div><div class="ttdeci">SymbolTableList&lt; BasicBlock &gt;::iterator eraseFromParent()</div><div class="ttdoc">Unlink 'this' from the containing function and delete it.</div><div class="ttdef"><b>Definition:</b> <a href="BasicBlock_8cpp_source.html#l00129">BasicBlock.cpp:129</a></div></div>
<div class="ttc" id="astructllvm_1_1OpenMPIRBuilder_1_1AtomicOpValue_html"><div class="ttname"><a href="structllvm_1_1OpenMPIRBuilder_1_1AtomicOpValue.html">llvm::OpenMPIRBuilder::AtomicOpValue</a></div><div class="ttdoc">a struct to pack relevant information while generating atomic Ops</div><div class="ttdef"><b>Definition:</b> <a href="OMPIRBuilder_8h_source.html#l01000">OMPIRBuilder.h:1000</a></div></div>
<div class="ttc" id="aclassllvm_1_1CanonicalLoopInfo_html_a578dd7d619d0ccfc6ace07aa380022cc"><div class="ttname"><a href="classllvm_1_1CanonicalLoopInfo.html#a578dd7d619d0ccfc6ace07aa380022cc">llvm::CanonicalLoopInfo::getAfterIP</a></div><div class="ttdeci">OpenMPIRBuilder::InsertPointTy getAfterIP() const</div><div class="ttdoc">Return the insertion point for user code after the loop.</div><div class="ttdef"><b>Definition:</b> <a href="OMPIRBuilder_8h_source.html#l01238">OMPIRBuilder.h:1238</a></div></div>
<div class="ttc" id="anamespacellvm_1_1sys_1_1path_html_a214ec2f04ffd92636ed4bd2717607a1d"><div class="ttname"><a href="namespacellvm_1_1sys_1_1path.html#a214ec2f04ffd92636ed4bd2717607a1d">llvm::sys::path::end</a></div><div class="ttdeci">const_iterator end(StringRef path)</div><div class="ttdoc">Get end iterator over path.</div><div class="ttdef"><b>Definition:</b> <a href="Path_8cpp_source.html#l00233">Path.cpp:233</a></div></div>
<div class="ttc" id="anamespacellvm_1_1sys_1_1path_html_a00a76a729b319dc47beffbe07325565f"><div class="ttname"><a href="namespacellvm_1_1sys_1_1path.html#a00a76a729b319dc47beffbe07325565f">llvm::sys::path::begin</a></div><div class="ttdeci">const_iterator begin(StringRef path, Style style=Style::native)</div><div class="ttdoc">Get begin iterator over path.</div><div class="ttdef"><b>Definition:</b> <a href="Path_8cpp_source.html#l00224">Path.cpp:224</a></div></div>
<div class="ttc" id="aclassllvm_1_1BasicBlock_html_a52c990590792c91dd20b6d45acebe359"><div class="ttname"><a href="classllvm_1_1BasicBlock.html#a52c990590792c91dd20b6d45acebe359">llvm::BasicBlock::splitBasicBlock</a></div><div class="ttdeci">BasicBlock * splitBasicBlock(iterator I, const Twine &amp;BBName=&quot;&quot;, bool Before=false)</div><div class="ttdoc">Split the basic block into two basic blocks at the specified instruction.</div><div class="ttdef"><b>Definition:</b> <a href="BasicBlock_8cpp_source.html#l00381">BasicBlock.cpp:381</a></div></div>
<div class="ttc" id="aclassllvm_1_1GlobalValue_html_ae8df4be75bfc50b1eadd74e85c25fa45a4cc6684df7b4a92b1dec6fce3264fac8"><div class="ttname"><a href="classllvm_1_1GlobalValue.html#ae8df4be75bfc50b1eadd74e85c25fa45a4cc6684df7b4a92b1dec6fce3264fac8">llvm::GlobalValue::UnnamedAddr::Global</a></div><div class="ttdeci">@ Global</div></div>
<div class="ttc" id="aclassllvm_1_1Optional_html"><div class="ttname"><a href="classllvm_1_1Optional.html">llvm::Optional</a></div><div class="ttdef"><b>Definition:</b> <a href="Optional_8h_source.html#l00238">Optional.h:238</a></div></div>
<div class="ttc" id="aMips16ISelLowering_8cpp_html_a0acb682b8260ab1c60b918599864e2e5"><div class="ttname"><a href="Mips16ISelLowering_8cpp.html#a0acb682b8260ab1c60b918599864e2e5">T</a></div><div class="ttdeci">#define T</div><div class="ttdef"><b>Definition:</b> <a href="Mips16ISelLowering_8cpp_source.html#l00341">Mips16ISelLowering.cpp:341</a></div></div>
<div class="ttc" id="anamespacellvm_1_1M68kBeads_html_ac808f5f233066c25641be8a6c1e2b100a27d0e059322508a76f918503800ef1bd"><div class="ttname"><a href="namespacellvm_1_1M68kBeads.html#ac808f5f233066c25641be8a6c1e2b100a27d0e059322508a76f918503800ef1bd">llvm::M68kBeads::Term</a></div><div class="ttdeci">@ Term</div><div class="ttdef"><b>Definition:</b> <a href="M68kBaseInfo_8h_source.html#l00071">M68kBaseInfo.h:71</a></div></div>
<div class="ttc" id="aclassllvm_1_1SmallPtrSet_html"><div class="ttname"><a href="classllvm_1_1SmallPtrSet.html">llvm::SmallPtrSet</a></div><div class="ttdoc">SmallPtrSet - This class implements a set which is optimized for holding SmallSize or less elements.</div><div class="ttdef"><b>Definition:</b> <a href="SmallPtrSet_8h_source.html#l00449">SmallPtrSet.h:449</a></div></div>
<div class="ttc" id="aCodeExtractor_8h_html"><div class="ttname"><a href="CodeExtractor_8h.html">CodeExtractor.h</a></div></div>
<div class="ttc" id="aclassllvm_1_1OpenMPIRBuilder_html_a03b6c43472b3040013de9cbc25376925"><div class="ttname"><a href="classllvm_1_1OpenMPIRBuilder.html#a03b6c43472b3040013de9cbc25376925">llvm::OpenMPIRBuilder::FinalizeCallbackTy</a></div><div class="ttdeci">std::function&lt; void(InsertPointTy CodeGenIP)&gt; FinalizeCallbackTy</div><div class="ttdoc">Callback type for variable finalization (think destructors).</div><div class="ttdef"><b>Definition:</b> <a href="OMPIRBuilder_8h_source.html#l00063">OMPIRBuilder.h:63</a></div></div>
<div class="ttc" id="aclassllvm_1_1CmpInst_html_a2be3583dac92a031fa1458d4d992c78ba2751d6136a2819749dcef65dc19a4246"><div class="ttname"><a href="classllvm_1_1CmpInst.html#a2be3583dac92a031fa1458d4d992c78ba2751d6136a2819749dcef65dc19a4246">llvm::CmpInst::ICMP_SLE</a></div><div class="ttdeci">@ ICMP_SLE</div><div class="ttdoc">signed less or equal</div><div class="ttdef"><b>Definition:</b> <a href="InstrTypes_8h_source.html#l00750">InstrTypes.h:750</a></div></div>
<div class="ttc" id="astructllvm_1_1OpenMPIRBuilder_1_1AtomicOpValue_html_afa06cdaada62e025bfb13b3ca8999963"><div class="ttname"><a href="structllvm_1_1OpenMPIRBuilder_1_1AtomicOpValue.html#afa06cdaada62e025bfb13b3ca8999963">llvm::OpenMPIRBuilder::AtomicOpValue::Var</a></div><div class="ttdeci">Value * Var</div><div class="ttdef"><b>Definition:</b> <a href="OMPIRBuilder_8h_source.html#l01001">OMPIRBuilder.h:1001</a></div></div>
<div class="ttc" id="aclassllvm_1_1BasicBlock_html_a526630ff85b48f29ac5b4c519c6c2243"><div class="ttname"><a href="classllvm_1_1BasicBlock.html#a526630ff85b48f29ac5b4c519c6c2243">llvm::BasicBlock::hasNPredecessors</a></div><div class="ttdeci">bool hasNPredecessors(unsigned N) const</div><div class="ttdoc">Return true if this block has exactly N predecessors.</div><div class="ttdef"><b>Definition:</b> <a href="BasicBlock_8cpp_source.html#l00286">BasicBlock.cpp:286</a></div></div>
<div class="ttc" id="aclassllvm_1_1CallBase_html_a4fb513d744ca72275932b2c7003f16f6"><div class="ttname"><a href="classllvm_1_1CallBase.html#a4fb513d744ca72275932b2c7003f16f6">llvm::CallBase::arg_begin</a></div><div class="ttdeci">User::op_iterator arg_begin()</div><div class="ttdoc">Return the iterator pointing to the beginning of the argument list.</div><div class="ttdef"><b>Definition:</b> <a href="InstrTypes_8h_source.html#l01303">InstrTypes.h:1303</a></div></div>
<div class="ttc" id="aclassllvm_1_1SmallVectorImpl_html_a07e23ae504e2b8c72fd055f93ded8899"><div class="ttname"><a href="classllvm_1_1SmallVectorImpl.html#a07e23ae504e2b8c72fd055f93ded8899">llvm::SmallVectorImpl::pop_back_val</a></div><div class="ttdeci">LLVM_NODISCARD T pop_back_val()</div><div class="ttdef"><b>Definition:</b> <a href="SmallVector_8h_source.html#l00635">SmallVector.h:635</a></div></div>
<div class="ttc" id="anamespacellvm_html_a3493591c859b8ae672dfa20950608c86"><div class="ttname"><a href="namespacellvm.html#a3493591c859b8ae672dfa20950608c86">llvm::successors</a></div><div class="ttdeci">succ_range successors(Instruction *I)</div><div class="ttdef"><b>Definition:</b> <a href="IR_2CFG_8h_source.html#l00262">CFG.h:262</a></div></div>
<div class="ttc" id="aclassllvm_1_1OpenMPIRBuilder_html_a660b3826e05cab3e906f32a0b6178028"><div class="ttname"><a href="classllvm_1_1OpenMPIRBuilder.html#a660b3826e05cab3e906f32a0b6178028">llvm::OpenMPIRBuilder::createAtomicCapture</a></div><div class="ttdeci">InsertPointTy createAtomicCapture(const LocationDescription &amp;Loc, Instruction *AllocIP, AtomicOpValue &amp;X, AtomicOpValue &amp;V, Value *Expr, AtomicOrdering AO, AtomicRMWInst::BinOp RMWOp, AtomicUpdateCallbackTy &amp;UpdateOp, bool UpdateExpr, bool IsPostfixUpdate, bool IsXLHSInRHSPart)</div><div class="ttdoc">Emit atomic update for constructs:  Only Scalar data types V = X; X = X BinOp Expr ,...</div><div class="ttdef"><b>Definition:</b> <a href="OMPIRBuilder_8cpp_source.html#l02654">OMPIRBuilder.cpp:2654</a></div></div>
<div class="ttc" id="aclassllvm_1_1Type_html_aac5759c83abd6a4af236401a7cfe7a0f"><div class="ttname"><a href="classllvm_1_1Type.html#aac5759c83abd6a4af236401a7cfe7a0f">llvm::Type::isFloatingPointTy</a></div><div class="ttdeci">bool isFloatingPointTy() const</div><div class="ttdoc">Return true if this is one of the six floating-point types.</div><div class="ttdef"><b>Definition:</b> <a href="Type_8h_source.html#l00162">Type.h:162</a></div></div>
<div class="ttc" id="aclassllvm_1_1Type_html_a7ba5de75f50bb4a4ba920698edf39b28"><div class="ttname"><a href="classllvm_1_1Type.html#a7ba5de75f50bb4a4ba920698edf39b28">llvm::Type::getInt8Ty</a></div><div class="ttdeci">static IntegerType * getInt8Ty(LLVMContext &amp;C)</div><div class="ttdef"><b>Definition:</b> <a href="Type_8cpp_source.html#l00201">Type.cpp:201</a></div></div>
<div class="ttc" id="aclassllvm_1_1Type_html_a30dd396c5b40cd86c1591872e574ccdf"><div class="ttname"><a href="classllvm_1_1Type.html#a30dd396c5b40cd86c1591872e574ccdf">llvm::Type::getInt32Ty</a></div><div class="ttdeci">static IntegerType * getInt32Ty(LLVMContext &amp;C)</div><div class="ttdef"><b>Definition:</b> <a href="Type_8cpp_source.html#l00203">Type.cpp:203</a></div></div>
<div class="ttc" id="aclassllvm_1_1OpenMPIRBuilder_html_a6383328cfcdbbd56502b92f9e2415432"><div class="ttname"><a href="classllvm_1_1OpenMPIRBuilder.html#a6383328cfcdbbd56502b92f9e2415432">llvm::OpenMPIRBuilder::emitTaskyieldImpl</a></div><div class="ttdeci">void emitTaskyieldImpl(const LocationDescription &amp;Loc)</div><div class="ttdoc">Generate a taskyield runtime call.</div><div class="ttdef"><b>Definition:</b> <a href="OMPIRBuilder_8cpp_source.html#l00876">OMPIRBuilder.cpp:876</a></div></div>
<div class="ttc" id="aDebug_8h_html_a08efc68d15935eb8889400a46c3749ba"><div class="ttname"><a href="Debug_8h.html#a08efc68d15935eb8889400a46c3749ba">LLVM_DEBUG</a></div><div class="ttdeci">#define LLVM_DEBUG(X)</div><div class="ttdef"><b>Definition:</b> <a href="Debug_8h_source.html#l00122">Debug.h:122</a></div></div>
<div class="ttc" id="aclassllvm_1_1StoreInst_html_aff28bd42ac76fc3e1c0e4db7f9e06f2d"><div class="ttname"><a href="classllvm_1_1StoreInst.html#aff28bd42ac76fc3e1c0e4db7f9e06f2d">llvm::StoreInst::setAtomic</a></div><div class="ttdeci">void setAtomic(AtomicOrdering Ordering, SyncScope::ID SSID=SyncScope::System)</div><div class="ttdoc">Sets the ordering constraint and the synchronization scope ID of this store instruction.</div><div class="ttdef"><b>Definition:</b> <a href="Instructions_8h_source.html#l00384">Instructions.h:384</a></div></div>
<div class="ttc" id="aclassllvm_1_1MDNode_html_a7d10a7b9b7f40b04d27ed97c38ea1950"><div class="ttname"><a href="classllvm_1_1MDNode.html#a7d10a7b9b7f40b04d27ed97c38ea1950">llvm::MDNode::get</a></div><div class="ttdeci">static MDTuple * get(LLVMContext &amp;Context, ArrayRef&lt; Metadata * &gt; MDs)</div><div class="ttdef"><b>Definition:</b> <a href="Metadata_8h_source.html#l01199">Metadata.h:1199</a></div></div>
<div class="ttc" id="aclassllvm_1_1OpenMPIRBuilder_html_a08610118e213de1b759470f0eafb9b18"><div class="ttname"><a href="classllvm_1_1OpenMPIRBuilder.html#a08610118e213de1b759470f0eafb9b18">llvm::OpenMPIRBuilder::collapseLoops</a></div><div class="ttdeci">CanonicalLoopInfo * collapseLoops(DebugLoc DL, ArrayRef&lt; CanonicalLoopInfo * &gt; Loops, InsertPointTy ComputeIP)</div><div class="ttdoc">Collapse a loop nest into a single loop.</div><div class="ttdef"><b>Definition:</b> <a href="OMPIRBuilder_8cpp_source.html#l01569">OMPIRBuilder.cpp:1569</a></div></div>
<div class="ttc" id="aMD5_8cpp_html_a96d73bbd7af15cb1fc38c3f4a3bd82e9"><div class="ttname"><a href="MD5_8cpp.html#a96d73bbd7af15cb1fc38c3f4a3bd82e9">F</a></div><div class="ttdeci">#define F(x, y, z)</div><div class="ttdef"><b>Definition:</b> <a href="MD5_8cpp_source.html#l00056">MD5.cpp:56</a></div></div>
<div class="ttc" id="aclassllvm_1_1ConstantExpr_html_a1f469b1f703519ae25ce564c8704310f"><div class="ttname"><a href="classllvm_1_1ConstantExpr.html#a1f469b1f703519ae25ce564c8704310f">llvm::ConstantExpr::getPointerCast</a></div><div class="ttdeci">static Constant * getPointerCast(Constant *C, Type *Ty)</div><div class="ttdoc">Create a BitCast, AddrSpaceCast, or a PtrToInt cast constant expression.</div><div class="ttdef"><b>Definition:</b> <a href="Constants_8cpp_source.html#l02035">Constants.cpp:2035</a></div></div>
<div class="ttc" id="aclassllvm_1_1BasicBlock_html_a57f1945911ca1e95d0f51d7c3516b529"><div class="ttname"><a href="classllvm_1_1BasicBlock.html#a57f1945911ca1e95d0f51d7c3516b529">llvm::BasicBlock::getUniqueSuccessor</a></div><div class="ttdeci">const BasicBlock * getUniqueSuccessor() const</div><div class="ttdoc">Return the successor of this block if it has a unique successor.</div><div class="ttdef"><b>Definition:</b> <a href="BasicBlock_8cpp_source.html#l00302">BasicBlock.cpp:302</a></div></div>
<div class="ttc" id="aARMLowOverheadLoops_8cpp_html_a0a0971d62011c35b29ff4a2325d45e93"><div class="ttname"><a href="ARMLowOverheadLoops_8cpp.html#a0a0971d62011c35b29ff4a2325d45e93">Uses</a></div><div class="ttdeci">SmallPtrSet&lt; MachineInstr *, 2 &gt; Uses</div><div class="ttdef"><b>Definition:</b> <a href="ARMLowOverheadLoops_8cpp_source.html#l00579">ARMLowOverheadLoops.cpp:579</a></div></div>
<div class="ttc" id="aclassllvm_1_1CanonicalLoopInfo_html_a230d812cc988ec3a48bf5206d3d72b88"><div class="ttname"><a href="classllvm_1_1CanonicalLoopInfo.html#a230d812cc988ec3a48bf5206d3d72b88">llvm::CanonicalLoopInfo::getIndVar</a></div><div class="ttdeci">Instruction * getIndVar() const</div><div class="ttdoc">Returns the instruction representing the current logical induction variable.</div><div class="ttdef"><b>Definition:</b> <a href="OMPIRBuilder_8h_source.html#l01218">OMPIRBuilder.h:1218</a></div></div>
<div class="ttc" id="aclassllvm_1_1BasicBlock_html"><div class="ttname"><a href="classllvm_1_1BasicBlock.html">llvm::BasicBlock</a></div><div class="ttdoc">LLVM Basic Block Representation.</div><div class="ttdef"><b>Definition:</b> <a href="BasicBlock_8h_source.html#l00058">BasicBlock.h:59</a></div></div>
<div class="ttc" id="anamespacellvm_html_a7c46c742c31be54870e2038048e6b391"><div class="ttname"><a href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">llvm::dbgs</a></div><div class="ttdeci">raw_ostream &amp; dbgs()</div><div class="ttdoc">dbgs() - This returns a reference to a raw_ostream for debugging messages.</div><div class="ttdef"><b>Definition:</b> <a href="Debug_8cpp_source.html#l00163">Debug.cpp:163</a></div></div>
<div class="ttc" id="aclassllvm_1_1OpenMPIRBuilder_html_a1a4a64f28790dd1fcb4f393ebe41b96a"><div class="ttname"><a href="classllvm_1_1OpenMPIRBuilder.html#a1a4a64f28790dd1fcb4f393ebe41b96a">llvm::OpenMPIRBuilder::finalize</a></div><div class="ttdeci">void finalize(Function *Fn=nullptr, bool AllowExtractorSinking=false)</div><div class="ttdoc">Finalize the underlying module, e.g., by outlining regions.</div><div class="ttdef"><b>Definition:</b> <a href="OMPIRBuilder_8cpp_source.html#l00142">OMPIRBuilder.cpp:142</a></div></div>
<div class="ttc" id="aInjectTLIMappings_8cpp_html_a3d23fb8c590cd607d4b25a05e31c69f5"><div class="ttname"><a href="InjectTLIMappings_8cpp.html#a3d23fb8c590cd607d4b25a05e31c69f5">Mappings</a></div><div class="ttdeci">Inject TLI Mappings</div><div class="ttdef"><b>Definition:</b> <a href="InjectTLIMappings_8cpp_source.html#l00172">InjectTLIMappings.cpp:172</a></div></div>
<div class="ttc" id="aCommandLine_8h_html"><div class="ttname"><a href="CommandLine_8h.html">CommandLine.h</a></div></div>
<div class="ttc" id="aclassllvm_1_1OpenMPIRBuilder_html_a5a98c86afe9b92a75e362c37cfba4a91"><div class="ttname"><a href="classllvm_1_1OpenMPIRBuilder.html#a5a98c86afe9b92a75e362c37cfba4a91">llvm::OpenMPIRBuilder::createDynamicWorkshareLoop</a></div><div class="ttdeci">InsertPointTy createDynamicWorkshareLoop(const LocationDescription &amp;Loc, CanonicalLoopInfo *CLI, InsertPointTy AllocaIP, omp::OMPScheduleType SchedType, bool NeedsBarrier, Value *Chunk=nullptr)</div><div class="ttdoc">Modifies the canonical loop to be a dynamically-scheduled workshare loop.</div><div class="ttdef"><b>Definition:</b> <a href="OMPIRBuilder_8cpp_source.html#l01398">OMPIRBuilder.cpp:1398</a></div></div>
<div class="ttc" id="aclassllvm_1_1ConstantInt_html"><div class="ttname"><a href="classllvm_1_1ConstantInt.html">llvm::ConstantInt</a></div><div class="ttdoc">This is the shared class of boolean and integer constants.</div><div class="ttdef"><b>Definition:</b> <a href="Constants_8h_source.html#l00079">Constants.h:79</a></div></div>
<div class="ttc" id="aclassllvm_1_1Instruction_html_ad449a11cc9b14b0ac93bd61bd0bd9293"><div class="ttname"><a href="classllvm_1_1Instruction.html#ad449a11cc9b14b0ac93bd61bd0bd9293">llvm::Instruction::getNumSuccessors</a></div><div class="ttdeci">unsigned getNumSuccessors() const</div><div class="ttdoc">Return the number of successors that this instruction has.</div><div class="ttdef"><b>Definition:</b> <a href="IR_2Instruction_8cpp_source.html#l00765">Instruction.cpp:765</a></div></div>
<div class="ttc" id="aclassllvm_1_1OpenMPIRBuilder_html_ae8aef8ddfc754d66c1bcf00a9fc9e5c9"><div class="ttname"><a href="classllvm_1_1OpenMPIRBuilder.html#ae8aef8ddfc754d66c1bcf00a9fc9e5c9">llvm::OpenMPIRBuilder::getOrCreateDefaultSrcLocStr</a></div><div class="ttdeci">Constant * getOrCreateDefaultSrcLocStr()</div><div class="ttdoc">Return the (LLVM-IR) string describing the default source location.</div><div class="ttdef"><b>Definition:</b> <a href="OMPIRBuilder_8cpp_source.html#l00309">OMPIRBuilder.cpp:309</a></div></div>
<div class="ttc" id="aclassllvm_1_1OpenMPIRBuilder_html_a654b33adee2ae78ce74ecbe6aa5e5282"><div class="ttname"><a href="classllvm_1_1OpenMPIRBuilder.html#a654b33adee2ae78ce74ecbe6aa5e5282">llvm::OpenMPIRBuilder::emitMapperCall</a></div><div class="ttdeci">void emitMapperCall(const LocationDescription &amp;Loc, Function *MapperFunc, Value *SrcLocInfo, Value *MaptypesArg, Value *MapnamesArg, struct MapperAllocas &amp;MapperAllocas, int64_t DeviceID, unsigned NumOperands)</div><div class="ttdoc">Create the call for the target mapper function.</div><div class="ttdef"><b>Definition:</b> <a href="OMPIRBuilder_8cpp_source.html#l02340">OMPIRBuilder.cpp:2340</a></div></div>
<div class="ttc" id="aclassllvm_1_1OpenMPIRBuilder_html_abdf5229286f8fa98bf05a35a91b50839"><div class="ttname"><a href="classllvm_1_1OpenMPIRBuilder.html#abdf5229286f8fa98bf05a35a91b50839">llvm::OpenMPIRBuilder::getOrCreateIdent</a></div><div class="ttdeci">Value * getOrCreateIdent(Constant *SrcLocStr, omp::IdentFlag Flags=omp::IdentFlag(0), unsigned Reserve2Flags=0)</div><div class="ttdoc">Return an ident_t* encoding the source location SrcLocStr and Flags.</div><div class="ttdef"><b>Definition:</b> <a href="OMPIRBuilder_8cpp_source.html#l00231">OMPIRBuilder.cpp:231</a></div></div>
<div class="ttc" id="aOMPIRBuilder_8h_html"><div class="ttname"><a href="OMPIRBuilder_8h.html">OMPIRBuilder.h</a></div></div>
<div class="ttc" id="aLint_8cpp_html_a45005634b54e2126cb3e6ec0dbc9ade4"><div class="ttname"><a href="Lint_8cpp.html#a45005634b54e2126cb3e6ec0dbc9ade4">isZero</a></div><div class="ttdeci">static bool isZero(Value *V, const DataLayout &amp;DL, DominatorTree *DT, AssumptionCache *AC)</div><div class="ttdef"><b>Definition:</b> <a href="Lint_8cpp_source.html#l00519">Lint.cpp:519</a></div></div>
<div class="ttc" id="aclassllvm_1_1SmallVectorImpl_html_ac56f67ff590e79d76f8ebd243e4cf442"><div class="ttname"><a href="classllvm_1_1SmallVectorImpl.html#ac56f67ff590e79d76f8ebd243e4cf442">llvm::SmallVectorImpl::append</a></div><div class="ttdeci">void append(in_iter in_start, in_iter in_end)</div><div class="ttdoc">Add the specified range to the end of the SmallVector.</div><div class="ttdef"><b>Definition:</b> <a href="SmallVector_8h_source.html#l00648">SmallVector.h:648</a></div></div>
<div class="ttc" id="aclassllvm_1_1CanonicalLoopInfo_html_a32ff799dcb39887a8d21322020f305ba"><div class="ttname"><a href="classllvm_1_1CanonicalLoopInfo.html#a32ff799dcb39887a8d21322020f305ba">llvm::CanonicalLoopInfo::assertOK</a></div><div class="ttdeci">void assertOK() const</div><div class="ttdoc">Consistency self-check.</div><div class="ttdef"><b>Definition:</b> <a href="OMPIRBuilder_8cpp_source.html#l02750">OMPIRBuilder.cpp:2750</a></div></div>
<div class="ttc" id="aclassllvm_1_1CanonicalLoopInfo_html_a71a16b42ce34255bd7a65902d15643fb"><div class="ttname"><a href="classllvm_1_1CanonicalLoopInfo.html#a71a16b42ce34255bd7a65902d15643fb">llvm::CanonicalLoopInfo::getCond</a></div><div class="ttdeci">BasicBlock * getCond() const</div><div class="ttdoc">The condition block computes whether there is another loop iteration.</div><div class="ttdef"><b>Definition:</b> <a href="OMPIRBuilder_8h_source.html#l01185">OMPIRBuilder.h:1185</a></div></div>
<div class="ttc" id="aclassllvm_1_1OpenMPIRBuilder_html"><div class="ttname"><a href="classllvm_1_1OpenMPIRBuilder.html">llvm::OpenMPIRBuilder</a></div><div class="ttdoc">An interface to create LLVM-IR for OpenMP directives.</div><div class="ttdef"><b>Definition:</b> <a href="OMPIRBuilder_8h_source.html#l00029">OMPIRBuilder.h:29</a></div></div>
<div class="ttc" id="aclassllvm_1_1OpenMPIRBuilder_html_a807c913d5889a80440269b74d5755d6c"><div class="ttname"><a href="classllvm_1_1OpenMPIRBuilder.html#a807c913d5889a80440269b74d5755d6c">llvm::OpenMPIRBuilder::createOMPFree</a></div><div class="ttdeci">CallInst * createOMPFree(const LocationDescription &amp;Loc, Value *Addr, Value *Allocator, std::string Name=&quot;&quot;)</div><div class="ttdoc">Create a runtime call for kmpc_free.</div><div class="ttdef"><b>Definition:</b> <a href="OMPIRBuilder_8cpp_source.html#l02162">OMPIRBuilder.cpp:2162</a></div></div>
<div class="ttc" id="aREADME__ALTIVEC_8txt_html_a9aacd9146afe44bf656cd664e2a88c8c"><div class="ttname"><a href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a></div><div class="ttdeci">(vector float) vec_cmpeq(*A, *B) C</div><div class="ttdef"><b>Definition:</b> <a href="README__ALTIVEC_8txt_source.html#l00086">README_ALTIVEC.txt:86</a></div></div>
<div class="ttc" id="alib_2Target_2X86_2README_8txt_html_ad5da9a19280b84509a8d1cac2290a0ad"><div class="ttname"><a href="lib_2Target_2X86_2README_8txt.html#ad5da9a19280b84509a8d1cac2290a0ad">cmp</a></div><div class="ttdeci">&lt; i32 &gt;&lt; i32 &gt; cmp</div><div class="ttdef"><b>Definition:</b> <a href="lib_2Target_2X86_2README_8txt_source.html#l01447">README.txt:1447</a></div></div>
<div class="ttc" id="aclassllvm_1_1CmpInst_html_a2be3583dac92a031fa1458d4d992c78bad92f160316221fd4090520bb2b3cefc5"><div class="ttname"><a href="classllvm_1_1CmpInst.html#a2be3583dac92a031fa1458d4d992c78bad92f160316221fd4090520bb2b3cefc5">llvm::CmpInst::ICMP_ULE</a></div><div class="ttdeci">@ ICMP_ULE</div><div class="ttdoc">unsigned less or equal</div><div class="ttdef"><b>Definition:</b> <a href="InstrTypes_8h_source.html#l00746">InstrTypes.h:746</a></div></div>
<div class="ttc" id="aLowerMatrixIntrinsics_8cpp_html_a7f6b2a94f0c353d428cf953c17fb7da0"><div class="ttname"><a href="LowerMatrixIntrinsics_8cpp.html#a7f6b2a94f0c353d428cf953c17fb7da0">TileSize</a></div><div class="ttdeci">static cl::opt&lt; unsigned &gt; TileSize(&quot;fuse-matrix-tile-size&quot;, cl::init(4), cl::Hidden, cl::desc(&quot;Tile size for matrix instruction fusion using square-shaped tiles.&quot;))</div></div>
<div class="ttc" id="aclassllvm_1_1CallBase_html_a83b8c9e572130f403445c0b0f69b837c"><div class="ttname"><a href="classllvm_1_1CallBase.html#a83b8c9e572130f403445c0b0f69b837c">llvm::CallBase::getCalledFunction</a></div><div class="ttdeci">Function * getCalledFunction() const</div><div class="ttdoc">Returns the function called, or null if this is an indirect function invocation.</div><div class="ttdef"><b>Definition:</b> <a href="InstrTypes_8h_source.html#l01393">InstrTypes.h:1393</a></div></div>
<div class="ttc" id="aclassllvm_1_1BasicBlock_html_a0ed5f3ab3c2e4196ee0cffffa080c062"><div class="ttname"><a href="classllvm_1_1BasicBlock.html#a0ed5f3ab3c2e4196ee0cffffa080c062">llvm::BasicBlock::begin</a></div><div class="ttdeci">iterator begin()</div><div class="ttdoc">Instruction iterator methods.</div><div class="ttdef"><b>Definition:</b> <a href="BasicBlock_8h_source.html#l00296">BasicBlock.h:296</a></div></div>
<div class="ttc" id="aclassllvm_1_1OpenMPIRBuilder_html_a544a84c75ac55356516cc7365cbe6f02"><div class="ttname"><a href="classllvm_1_1OpenMPIRBuilder.html#a544a84c75ac55356516cc7365cbe6f02">llvm::OpenMPIRBuilder::createMapperAllocas</a></div><div class="ttdeci">void createMapperAllocas(const LocationDescription &amp;Loc, InsertPointTy AllocaIP, unsigned NumOperands, struct MapperAllocas &amp;MapperAllocas)</div><div class="ttdoc">Create the allocas instruction used in call to mapper functions.</div><div class="ttdef"><b>Definition:</b> <a href="OMPIRBuilder_8cpp_source.html#l02321">OMPIRBuilder.cpp:2321</a></div></div>
<div class="ttc" id="aOMPIRBuilder_8cpp_html_abdcdbfc178873f5055fbcf98bad92f53"><div class="ttname"><a href="OMPIRBuilder_8cpp.html#abdcdbfc178873f5055fbcf98bad92f53">redirectAllPredecessorsTo</a></div><div class="ttdeci">static void redirectAllPredecessorsTo(BasicBlock *OldTarget, BasicBlock *NewTarget, DebugLoc DL)</div><div class="ttdoc">Redirect all edges that branch to OldTarget to NewTarget.</div><div class="ttdef"><b>Definition:</b> <a href="OMPIRBuilder_8cpp_source.html#l01530">OMPIRBuilder.cpp:1530</a></div></div>
<div class="ttc" id="aclassllvm_1_1OpenMPIRBuilder_html_a4761ddf3a15247582e7106e3968adba5"><div class="ttname"><a href="classllvm_1_1OpenMPIRBuilder.html#a4761ddf3a15247582e7106e3968adba5">llvm::OpenMPIRBuilder::createBarrier</a></div><div class="ttdeci">InsertPointTy createBarrier(const LocationDescription &amp;Loc, omp::Directive DK, bool ForceSimpleCall=false, bool CheckCancelFlag=true)</div><div class="ttdoc">Emitter methods for OpenMP directives.</div><div class="ttdef"><b>Definition:</b> <a href="OMPIRBuilder_8cpp_source.html#l00336">OMPIRBuilder.cpp:336</a></div></div>
<div class="ttc" id="aclassllvm_1_1OpenMPIRBuilder_html_a388d5a62753f4e7ff4b72e54c1233fbc"><div class="ttname"><a href="classllvm_1_1OpenMPIRBuilder.html#a388d5a62753f4e7ff4b72e54c1233fbc">llvm::OpenMPIRBuilder::createAtomicRead</a></div><div class="ttdeci">InsertPointTy createAtomicRead(const LocationDescription &amp;Loc, AtomicOpValue &amp;X, AtomicOpValue &amp;V, AtomicOrdering AO)</div><div class="ttdoc">Emit atomic Read for : V = X  Only Scalar data types.</div><div class="ttdef"><b>Definition:</b> <a href="OMPIRBuilder_8cpp_source.html#l02427">OMPIRBuilder.cpp:2427</a></div></div>
<div class="ttc" id="aVPlanSLP_8cpp_html_a46eb381f7896233d7b3f14ad11ea22e3"><div class="ttname"><a href="VPlanSLP_8cpp.html#a46eb381f7896233d7b3f14ad11ea22e3">getOpcode</a></div><div class="ttdeci">static Optional&lt; unsigned &gt; getOpcode(ArrayRef&lt; VPValue * &gt; Values)</div><div class="ttdoc">Returns the opcode of Values or ~0 if they do not all agree.</div><div class="ttdef"><b>Definition:</b> <a href="VPlanSLP_8cpp_source.html#l00199">VPlanSLP.cpp:199</a></div></div>
<div class="ttc" id="astructIP_html"><div class="ttname"><a href="structIP.html">IP</a></div><div class="ttdef"><b>Definition:</b> <a href="NVPTXLowerArgs_8cpp_source.html#l00166">NVPTXLowerArgs.cpp:166</a></div></div>
<div class="ttc" id="aclassllvm_1_1BasicBlock_html_a161fd4e9fa5367f64c2a4c9e921c3ad3"><div class="ttname"><a href="classllvm_1_1BasicBlock.html#a161fd4e9fa5367f64c2a4c9e921c3ad3">llvm::BasicBlock::getFirstInsertionPt</a></div><div class="ttdeci">const_iterator getFirstInsertionPt() const</div><div class="ttdoc">Returns an iterator to the first instruction in this block that is suitable for inserting a non-PHI i...</div><div class="ttdef"><b>Definition:</b> <a href="BasicBlock_8cpp_source.html#l00249">BasicBlock.cpp:249</a></div></div>
<div class="ttc" id="astructllvm_1_1MaybeAlign_html"><div class="ttname"><a href="structllvm_1_1MaybeAlign.html">llvm::MaybeAlign</a></div><div class="ttdoc">This struct is a compact representation of a valid (power of two) or undefined (0) alignment.</div><div class="ttdef"><b>Definition:</b> <a href="Alignment_8h_source.html#l00109">Alignment.h:109</a></div></div>
<div class="ttc" id="aclassllvm_1_1OpenMPIRBuilder_html_ad66949e2e846451e61d9c8f34014ea31"><div class="ttname"><a href="classllvm_1_1OpenMPIRBuilder.html#ad66949e2e846451e61d9c8f34014ea31">llvm::OpenMPIRBuilder::~OpenMPIRBuilder</a></div><div class="ttdeci">~OpenMPIRBuilder()</div><div class="ttdef"><b>Definition:</b> <a href="OMPIRBuilder_8cpp_source.html#l00227">OMPIRBuilder.cpp:227</a></div></div>
<div class="ttc" id="aclassllvm_1_1IntegerType_html"><div class="ttname"><a href="classllvm_1_1IntegerType.html">llvm::IntegerType</a></div><div class="ttdoc">Class to represent integer types.</div><div class="ttdef"><b>Definition:</b> <a href="DerivedTypes_8h_source.html#l00040">DerivedTypes.h:40</a></div></div>
<div class="ttc" id="aclassllvm_1_1CodeExtractor_html_a3719f9e5392a61378d7815a6c346abda"><div class="ttname"><a href="classllvm_1_1CodeExtractor.html#a3719f9e5392a61378d7815a6c346abda">llvm::CodeExtractor::findInputsOutputs</a></div><div class="ttdeci">void findInputsOutputs(ValueSet &amp;Inputs, ValueSet &amp;Outputs, const ValueSet &amp;Allocas) const</div><div class="ttdoc">Compute the set of input values and output values for the code.</div><div class="ttdef"><b>Definition:</b> <a href="CodeExtractor_8cpp_source.html#l00646">CodeExtractor.cpp:646</a></div></div>
<div class="ttc" id="aclassllvm_1_1Instruction_html"><div class="ttname"><a href="classllvm_1_1Instruction.html">llvm::Instruction</a></div><div class="ttdef"><b>Definition:</b> <a href="IR_2Instruction_8h_source.html#l00045">Instruction.h:46</a></div></div>
<div class="ttc" id="aclassllvm_1_1Type_html_a9f382207d841377156d4c7868b66b9a5"><div class="ttname"><a href="classllvm_1_1Type.html#a9f382207d841377156d4c7868b66b9a5">llvm::Type::getScalarSizeInBits</a></div><div class="ttdeci">unsigned getScalarSizeInBits() const LLVM_READONLY</div><div class="ttdoc">If this is a vector type, return the getPrimitiveSizeInBits value for the element type.</div><div class="ttdef"><b>Definition:</b> <a href="Type_8cpp_source.html#l00153">Type.cpp:153</a></div></div>
<div class="ttc" id="aMDBuilder_8h_html"><div class="ttname"><a href="MDBuilder_8h.html">MDBuilder.h</a></div></div>
<div class="ttc" id="aclassllvm_1_1AtomicRMWInst_html_a461cfbbb5c7a57ab73210498923cf615afdcdc631cf4fa6829fd7499cd06a306b"><div class="ttname"><a href="classllvm_1_1AtomicRMWInst.html#a461cfbbb5c7a57ab73210498923cf615afdcdc631cf4fa6829fd7499cd06a306b">llvm::AtomicRMWInst::Nand</a></div><div class="ttdeci">@ Nand</div><div class="ttdoc">*p = ~(old &amp; v)</div><div class="ttdef"><b>Definition:</b> <a href="Instructions_8h_source.html#l00748">Instructions.h:748</a></div></div>
<div class="ttc" id="aOMPIRBuilder_8cpp_html_adf3b5ee40ef3999c2de59256a82ee7f1"><div class="ttname"><a href="OMPIRBuilder_8cpp.html#adf3b5ee40ef3999c2de59256a82ee7f1">setCanonicalLoopTripCount</a></div><div class="ttdeci">void setCanonicalLoopTripCount(CanonicalLoopInfo *CLI, Value *TripCount)</div><div class="ttdef"><b>Definition:</b> <a href="OMPIRBuilder_8cpp_source.html#l01267">OMPIRBuilder.cpp:1267</a></div></div>
<div class="ttc" id="aclassllvm_1_1GlobalObject_html_aa1b0638c63ba711320b3bb9c69367ed6"><div class="ttname"><a href="classllvm_1_1GlobalObject.html#aa1b0638c63ba711320b3bb9c69367ed6">llvm::GlobalObject::addMetadata</a></div><div class="ttdeci">void addMetadata(unsigned KindID, MDNode &amp;MD)</div><div class="ttdoc">Add a metadata attachment.</div><div class="ttdef"><b>Definition:</b> <a href="Metadata_8cpp_source.html#l00608">Metadata.cpp:1268</a></div></div>
<div class="ttc" id="aclassllvm_1_1Value_html_a35ee267850af7c235474a8c46c7ac5af"><div class="ttname"><a href="classllvm_1_1Value.html#a35ee267850af7c235474a8c46c7ac5af">llvm::Value::setName</a></div><div class="ttdeci">void setName(const Twine &amp;Name)</div><div class="ttdoc">Change the name of the value.</div><div class="ttdef"><b>Definition:</b> <a href="Value_8cpp_source.html#l00364">Value.cpp:364</a></div></div>
<div class="ttc" id="aclassllvm_1_1ConstantInt_html_a969709dd49c28865a482d8b870f87c46"><div class="ttname"><a href="classllvm_1_1ConstantInt.html#a969709dd49c28865a482d8b870f87c46">llvm::ConstantInt::get</a></div><div class="ttdeci">static Constant * get(Type *Ty, uint64_t V, bool IsSigned=false)</div><div class="ttdoc">If Ty is a vector type, return a Constant with a splat of the given value.</div><div class="ttdef"><b>Definition:</b> <a href="Constants_8cpp_source.html#l00901">Constants.cpp:901</a></div></div>
<div class="ttc" id="aclassllvm_1_1Use_html_a50a2e57da274f8d69b9f932977379cdf"><div class="ttname"><a href="classllvm_1_1Use.html#a50a2e57da274f8d69b9f932977379cdf">llvm::Use::getUser</a></div><div class="ttdeci">User * getUser() const</div><div class="ttdoc">Returns the User that contains this Use.</div><div class="ttdef"><b>Definition:</b> <a href="Use_8h_source.html#l00073">Use.h:73</a></div></div>
<div class="ttc" id="aclassllvm_1_1CanonicalLoopInfo_html_a8031442528bff99473596a0de4aa0422"><div class="ttname"><a href="classllvm_1_1CanonicalLoopInfo.html#a8031442528bff99473596a0de4aa0422">llvm::CanonicalLoopInfo::getBodyIP</a></div><div class="ttdeci">OpenMPIRBuilder::InsertPointTy getBodyIP() const</div><div class="ttdoc">Return the insertion point for user code in the body.</div><div class="ttdef"><b>Definition:</b> <a href="OMPIRBuilder_8h_source.html#l01233">OMPIRBuilder.h:1233</a></div></div>
<div class="ttc" id="anamespacellvm_1_1ms__demangle_html_afb795990ffc0cb7321e7d1eacc246324a3e679cff5b3a6f6f8f32aead541a0a12"><div class="ttname"><a href="namespacellvm_1_1ms__demangle.html#afb795990ffc0cb7321e7d1eacc246324a3e679cff5b3a6f6f8f32aead541a0a12">llvm::ms_demangle::QualifierMangleMode::Drop</a></div><div class="ttdeci">@ Drop</div></div>
<div class="ttc" id="aclassllvm_1_1Instruction_html_a944c50b4f5440b3914f5e2a157bb0fd3"><div class="ttname"><a href="classllvm_1_1Instruction.html#a944c50b4f5440b3914f5e2a157bb0fd3">llvm::Instruction::getSuccessor</a></div><div class="ttdeci">BasicBlock * getSuccessor(unsigned Idx) const</div><div class="ttdoc">Return the specified successor. This instruction must be a terminator.</div><div class="ttdef"><b>Definition:</b> <a href="IR_2Instruction_8cpp_source.html#l00777">Instruction.cpp:777</a></div></div>
<div class="ttc" id="aOMPIRBuilder_8cpp_html_af0ce60c4a958016f62ce78f1eda423af"><div class="ttname"><a href="OMPIRBuilder_8cpp.html#af0ce60c4a958016f62ce78f1eda423af">removeUnusedBlocksFromParent</a></div><div class="ttdeci">static void removeUnusedBlocksFromParent(ArrayRef&lt; BasicBlock * &gt; BBs)</div><div class="ttdoc">Determine which blocks in BBs are reachable from outside and remove the ones that are not reachable f...</div><div class="ttdef"><b>Definition:</b> <a href="OMPIRBuilder_8cpp_source.html#l01538">OMPIRBuilder.cpp:1538</a></div></div>
<div class="ttc" id="aclassllvm_1_1Instruction_html_a0fd53f63d349dc8a7c5fc0cdd7a94c8d"><div class="ttname"><a href="classllvm_1_1Instruction.html#a0fd53f63d349dc8a7c5fc0cdd7a94c8d">llvm::Instruction::removeFromParent</a></div><div class="ttdeci">void removeFromParent()</div><div class="ttdoc">This method unlinks 'this' from the containing basic block, but does not delete it.</div><div class="ttdef"><b>Definition:</b> <a href="IR_2Instruction_8cpp_source.html#l00074">Instruction.cpp:74</a></div></div>
<div class="ttc" id="astructllvm_1_1OpenMPIRBuilder_1_1MapperAllocas_html_aa90c5e272864414356fbeede370d5053"><div class="ttname"><a href="structllvm_1_1OpenMPIRBuilder_1_1MapperAllocas.html#aa90c5e272864414356fbeede370d5053">llvm::OpenMPIRBuilder::MapperAllocas::Args</a></div><div class="ttdeci">AllocaInst * Args</div><div class="ttdef"><b>Definition:</b> <a href="OMPIRBuilder_8h_source.html#l00641">OMPIRBuilder.h:641</a></div></div>
<div class="ttc" id="aELFObjHandler_8cpp_html_a043cdaf7b89aaeeb127be5d93411637f"><div class="ttname"><a href="ELFObjHandler_8cpp.html#a043cdaf7b89aaeeb127be5d93411637f">Align</a></div><div class="ttdeci">uint64_t Align</div><div class="ttdef"><b>Definition:</b> <a href="ELFObjHandler_8cpp_source.html#l00083">ELFObjHandler.cpp:83</a></div></div>
<div class="ttc" id="anamespacellvm_1_1omp_html_a0e821d8251c97d66ca185efe2f8ffde2"><div class="ttname"><a href="namespacellvm_1_1omp.html#a0e821d8251c97d66ca185efe2f8ffde2">llvm::omp::IdentFlag</a></div><div class="ttdeci">IdentFlag</div><div class="ttdoc">IDs for all omp runtime library ident_t flag encodings (see their defintion in openmp/runtime/src/kmp...</div><div class="ttdef"><b>Definition:</b> <a href="OMPConstants_8h_source.html#l00074">OMPConstants.h:74</a></div></div>
<div class="ttc" id="aclassllvm_1_1AtomicRMWInst_html_a461cfbbb5c7a57ab73210498923cf615afc870a548088c5b7a93a34f648889d77"><div class="ttname"><a href="classllvm_1_1AtomicRMWInst.html#a461cfbbb5c7a57ab73210498923cf615afc870a548088c5b7a93a34f648889d77">llvm::AtomicRMWInst::Xchg</a></div><div class="ttdeci">@ Xchg</div><div class="ttdoc">*p = v</div><div class="ttdef"><b>Definition:</b> <a href="Instructions_8h_source.html#l00740">Instructions.h:740</a></div></div>
<div class="ttc" id="aclassllvm_1_1OpenMPIRBuilder_html_a177df2c9d7d8692ed214018f420c3de6"><div class="ttname"><a href="classllvm_1_1OpenMPIRBuilder.html#a177df2c9d7d8692ed214018f420c3de6">llvm::OpenMPIRBuilder::emitTaskwaitImpl</a></div><div class="ttdeci">void emitTaskwaitImpl(const LocationDescription &amp;Loc)</div><div class="ttdoc">Generate a taskwait runtime call.</div><div class="ttdef"><b>Definition:</b> <a href="OMPIRBuilder_8cpp_source.html#l00858">OMPIRBuilder.cpp:858</a></div></div>
<div class="ttc" id="aclassllvm_1_1OpenMPIRBuilder_html_afdb0bb128b2da43594ed6593a5c48f31"><div class="ttname"><a href="classllvm_1_1OpenMPIRBuilder.html#afdb0bb128b2da43594ed6593a5c48f31">llvm::OpenMPIRBuilder::createAtomicUpdate</a></div><div class="ttdeci">InsertPointTy createAtomicUpdate(const LocationDescription &amp;Loc, Instruction *AllocIP, AtomicOpValue &amp;X, Value *Expr, AtomicOrdering AO, AtomicRMWInst::BinOp RMWOp, AtomicUpdateCallbackTy &amp;UpdateOp, bool IsXLHSInRHSPart)</div><div class="ttdoc">Emit atomic update for constructs: X = X BinOp Expr ,or X = Expr BinOp X For complex Operations: X = ...</div><div class="ttdef"><b>Definition:</b> <a href="OMPIRBuilder_8cpp_source.html#l02502">OMPIRBuilder.cpp:2502</a></div></div>
<div class="ttc" id="anamespacellvm_html_a2c3c18bffdc25d969233c5448bdfe7eb"><div class="ttname"><a href="namespacellvm.html#a2c3c18bffdc25d969233c5448bdfe7eb">llvm::AddressSpace</a></div><div class="ttdeci">AddressSpace</div><div class="ttdef"><b>Definition:</b> <a href="NVPTXBaseInfo_8h_source.html#l00021">NVPTXBaseInfo.h:21</a></div></div>
<div class="ttc" id="aclassllvm_1_1StringRef_html_ae2338e6739b671ea853b6154db368292"><div class="ttname"><a href="classllvm_1_1StringRef.html#ae2338e6739b671ea853b6154db368292">llvm::StringRef::str</a></div><div class="ttdeci">LLVM_NODISCARD std::string str() const</div><div class="ttdoc">str - Get the contents as an std::string.</div><div class="ttdef"><b>Definition:</b> <a href="StringRef_8h_source.html#l00245">StringRef.h:245</a></div></div>
<div class="ttc" id="aclassllvm_1_1OpenMPIRBuilder_html_a81bc7a57bd0332843aed6275ba47bee0"><div class="ttname"><a href="classllvm_1_1OpenMPIRBuilder.html#a81bc7a57bd0332843aed6275ba47bee0">llvm::OpenMPIRBuilder::createOMPAlloc</a></div><div class="ttdeci">CallInst * createOMPAlloc(const LocationDescription &amp;Loc, Value *Size, Value *Allocator, std::string Name=&quot;&quot;)</div><div class="ttdoc">Create a runtime call for kmpc_Alloc.</div><div class="ttdef"><b>Definition:</b> <a href="OMPIRBuilder_8cpp_source.html#l02146">OMPIRBuilder.cpp:2146</a></div></div>
<div class="ttc" id="aclassllvm_1_1SetVector_html_aaf9ee38b9973681c1720aaf03af3a069"><div class="ttname"><a href="classllvm_1_1SetVector.html#aaf9ee38b9973681c1720aaf03af3a069">llvm::SetVector::empty</a></div><div class="ttdeci">bool empty() const</div><div class="ttdoc">Determine if the SetVector is empty or not.</div><div class="ttdef"><b>Definition:</b> <a href="SetVector_8h_source.html#l00072">SetVector.h:72</a></div></div>
<div class="ttc" id="aclassllvm_1_1OpenMPIRBuilder_html_a50c6490cf353f064946c4e32673ac098"><div class="ttname"><a href="classllvm_1_1OpenMPIRBuilder.html#a50c6490cf353f064946c4e32673ac098">llvm::OpenMPIRBuilder::addAttributes</a></div><div class="ttdeci">void addAttributes(omp::RuntimeFunction FnID, Function &amp;Fn)</div><div class="ttdoc">Add attributes known for FnID to Fn.</div><div class="ttdef"><b>Definition:</b> <a href="OMPIRBuilder_8cpp_source.html#l00042">OMPIRBuilder.cpp:42</a></div></div>
<div class="ttc" id="aclassllvm_1_1AtomicRMWInst_html_a461cfbbb5c7a57ab73210498923cf615a0794c42b44989f9d9f1454d79ca0dd88"><div class="ttname"><a href="classllvm_1_1AtomicRMWInst.html#a461cfbbb5c7a57ab73210498923cf615a0794c42b44989f9d9f1454d79ca0dd88">llvm::AtomicRMWInst::Add</a></div><div class="ttdeci">@ Add</div><div class="ttdoc">*p = old + v</div><div class="ttdef"><b>Definition:</b> <a href="Instructions_8h_source.html#l00742">Instructions.h:742</a></div></div>
<div class="ttc" id="anamespacellvm_1_1lltok_html_af353621f14cb4b4b3af5ffaff84076b1"><div class="ttname"><a href="namespacellvm_1_1lltok.html#af353621f14cb4b4b3af5ffaff84076b1">llvm::lltok::Kind</a></div><div class="ttdeci">Kind</div><div class="ttdef"><b>Definition:</b> <a href="LLToken_8h_source.html#l00018">LLToken.h:18</a></div></div>
<div class="ttc" id="aclassllvm_1_1Type_html_a13e877ef779ba7a0688081079f4f9b03"><div class="ttname"><a href="classllvm_1_1Type.html#a13e877ef779ba7a0688081079f4f9b03">llvm::Type::getIntegerBitWidth</a></div><div class="ttdeci">unsigned getIntegerBitWidth() const</div><div class="ttdef"><b>Definition:</b> <a href="DerivedTypes_8h_source.html#l00096">DerivedTypes.h:96</a></div></div>
<div class="ttc" id="aErlangGCPrinter_8cpp_html_a74b474c0616ab55c1d9487f11fd31d26"><div class="ttname"><a href="ErlangGCPrinter_8cpp.html#a74b474c0616ab55c1d9487f11fd31d26">X</a></div><div class="ttdeci">static GCMetadataPrinterRegistry::Add&lt; ErlangGCPrinter &gt; X(&quot;erlang&quot;, &quot;erlang-compatible garbage collector&quot;)</div></div>
<div class="ttc" id="aclassllvm_1_1SmallString_html"><div class="ttname"><a href="classllvm_1_1SmallString.html">llvm::SmallString&lt; 128 &gt;</a></div></div>
<div class="ttc" id="aIR_2CFG_8h_html"><div class="ttname"><a href="IR_2CFG_8h.html">CFG.h</a></div><div class="ttdoc">This file provides various utilities for inspecting and working with the control flow graph in LLVM I...</div></div>
<div class="ttc" id="aclassllvm_1_1Twine_html_a4c1c1093a7749409c70838678514cc7c"><div class="ttname"><a href="classllvm_1_1Twine.html#a4c1c1093a7749409c70838678514cc7c">llvm::Twine::str</a></div><div class="ttdeci">std::string str() const</div><div class="ttdoc">Return the twine contents as a std::string.</div><div class="ttdef"><b>Definition:</b> <a href="Twine_8cpp_source.html#l00017">Twine.cpp:17</a></div></div>
<div class="ttc" id="astructllvm_1_1OpenMPIRBuilder_1_1OutlineInfo_html_adc0b48022847ca44b3868d058cb98686"><div class="ttname"><a href="structllvm_1_1OpenMPIRBuilder_1_1OutlineInfo.html#adc0b48022847ca44b3868d058cb98686">llvm::OpenMPIRBuilder::OutlineInfo::EntryBB</a></div><div class="ttdeci">BasicBlock * EntryBB</div><div class="ttdef"><b>Definition:</b> <a href="OMPIRBuilder_8h_source.html#l00602">OMPIRBuilder.h:602</a></div></div>
<div class="ttc" id="aclassllvm_1_1Function_html_a7477aafbbe989ad35b96fac186d8e9fd"><div class="ttname"><a href="classllvm_1_1Function.html#a7477aafbbe989ad35b96fac186d8e9fd">llvm::Function::getAttributes</a></div><div class="ttdeci">AttributeList getAttributes() const</div><div class="ttdoc">Return the attribute list for this Function.</div><div class="ttdef"><b>Definition:</b> <a href="Function_8h_source.html#l00250">Function.h:250</a></div></div>
<div class="ttc" id="aclassllvm_1_1Type_html_ac6d28a9b11139182134a9618028a0d07"><div class="ttname"><a href="classllvm_1_1Type.html#ac6d28a9b11139182134a9618028a0d07">llvm::Type::isIntegerTy</a></div><div class="ttdeci">bool isIntegerTy() const</div><div class="ttdoc">True if this is an instance of IntegerType.</div><div class="ttdef"><b>Definition:</b> <a href="Type_8h_source.html#l00201">Type.h:201</a></div></div>
<div class="ttc" id="aclassllvm_1_1function__ref_html"><div class="ttname"><a href="classllvm_1_1function__ref.html">llvm::function_ref</a></div><div class="ttdoc">An efficient, type-erasing, non-owning reference to a callable.</div><div class="ttdef"><b>Definition:</b> <a href="STLExtras_8h_source.html#l00168">STLExtras.h:168</a></div></div>
<div class="ttc" id="anamespacellvm_1_1omp_html_a4c503140c7f851151906d85b515330e9"><div class="ttname"><a href="namespacellvm_1_1omp.html#a4c503140c7f851151906d85b515330e9">llvm::omp::RuntimeFunction</a></div><div class="ttdeci">RuntimeFunction</div><div class="ttdoc">IDs for all omp runtime library (RTL) functions.</div><div class="ttdef"><b>Definition:</b> <a href="OMPConstants_8h_source.html#l00054">OMPConstants.h:54</a></div></div>
<div class="ttc" id="aclassllvm_1_1SmallString_html_ac22cf1a1c08b7ccaefc51508536312a4"><div class="ttname"><a href="classllvm_1_1SmallString.html#ac22cf1a1c08b7ccaefc51508536312a4">llvm::SmallString::append</a></div><div class="ttdeci">void append(StringRef RHS)</div><div class="ttdoc">Append from a StringRef.</div><div class="ttdef"><b>Definition:</b> <a href="SmallString_8h_source.html#l00067">SmallString.h:67</a></div></div>
<div class="ttc" id="anamespacellvm_html_a9bccbe67aaab722783ca4e7c504aaaa7"><div class="ttname"><a href="namespacellvm.html#a9bccbe67aaab722783ca4e7c504aaaa7">llvm::AtomicOrdering</a></div><div class="ttdeci">AtomicOrdering</div><div class="ttdoc">Atomic ordering for LLVM's memory model.</div><div class="ttdef"><b>Definition:</b> <a href="AtomicOrdering_8h_source.html#l00056">AtomicOrdering.h:56</a></div></div>
<div class="ttc" id="aclassllvm_1_1OpenMPIRBuilder_html_a0b0ed7f600549e4239bf10b5b85de66c"><div class="ttname"><a href="classllvm_1_1OpenMPIRBuilder.html#a0b0ed7f600549e4239bf10b5b85de66c">llvm::OpenMPIRBuilder::createTaskyield</a></div><div class="ttdeci">void createTaskyield(const LocationDescription &amp;Loc)</div><div class="ttdoc">Generator for '#omp taskyield'.</div><div class="ttdef"><b>Definition:</b> <a href="OMPIRBuilder_8cpp_source.html#l00887">OMPIRBuilder.cpp:887</a></div></div>
<div class="ttc" id="aclassllvm_1_1AtomicRMWInst_html_a461cfbbb5c7a57ab73210498923cf615aa53854e09143f57d2ff2ad6ac89dc55d"><div class="ttname"><a href="classllvm_1_1AtomicRMWInst.html#a461cfbbb5c7a57ab73210498923cf615aa53854e09143f57d2ff2ad6ac89dc55d">llvm::AtomicRMWInst::UMin</a></div><div class="ttdeci">@ UMin</div><div class="ttdoc">*p = old &lt;unsigned v ? old : v</div><div class="ttdef"><b>Definition:</b> <a href="Instructions_8h_source.html#l00760">Instructions.h:760</a></div></div>
<div class="ttc" id="aclassllvm_1_1cl_1_1opt_html"><div class="ttname"><a href="classllvm_1_1cl_1_1opt.html">llvm::cl::opt&lt; bool &gt;</a></div></div>
<div class="ttc" id="aclassllvm_1_1CanonicalLoopInfo_html_adb9b8b6738256feb5857747cb8b87df7"><div class="ttname"><a href="classllvm_1_1CanonicalLoopInfo.html#adb9b8b6738256feb5857747cb8b87df7">llvm::CanonicalLoopInfo::getPreheader</a></div><div class="ttdeci">BasicBlock * getPreheader() const</div><div class="ttdoc">The preheader ensures that there is only a single edge entering the loop.</div><div class="ttdef"><b>Definition:</b> <a href="OMPIRBuilder_8h_source.html#l01177">OMPIRBuilder.h:1177</a></div></div>
<div class="ttc" id="aclassllvm_1_1OpenMPIRBuilder_html_ad56f71598b251a0f66e590c94d01c67b"><div class="ttname"><a href="classllvm_1_1OpenMPIRBuilder.html#ad56f71598b251a0f66e590c94d01c67b">llvm::OpenMPIRBuilder::createOffloadMaptypes</a></div><div class="ttdeci">GlobalVariable * createOffloadMaptypes(SmallVectorImpl&lt; uint64_t &gt; &amp;Mappings, std::string VarName)</div><div class="ttdoc">Create the global variable holding the offload mappings information.</div><div class="ttdef"><b>Definition:</b> <a href="OMPIRBuilder_8cpp_source.html#l02309">OMPIRBuilder.cpp:2309</a></div></div>
<div class="ttc" id="astructllvm_1_1OpenMPIRBuilder_1_1AtomicOpValue_html_a8405ac1a632edb9252a0d46334f45008"><div class="ttname"><a href="structllvm_1_1OpenMPIRBuilder_1_1AtomicOpValue.html#a8405ac1a632edb9252a0d46334f45008">llvm::OpenMPIRBuilder::AtomicOpValue::IsVolatile</a></div><div class="ttdeci">bool IsVolatile</div><div class="ttdef"><b>Definition:</b> <a href="OMPIRBuilder_8h_source.html#l01003">OMPIRBuilder.h:1003</a></div></div>
<div class="ttc" id="aclassllvm_1_1OpenMPIRBuilder_html_a5ffd15d898e32d3abd76f5d961781dd2"><div class="ttname"><a href="classllvm_1_1OpenMPIRBuilder.html#a5ffd15d898e32d3abd76f5d961781dd2">llvm::OpenMPIRBuilder::createSections</a></div><div class="ttdeci">InsertPointTy createSections(const LocationDescription &amp;Loc, InsertPointTy AllocaIP, ArrayRef&lt; StorableBodyGenCallbackTy &gt; SectionCBs, PrivatizeCallbackTy PrivCB, FinalizeCallbackTy FiniCB, bool IsCancellable, bool IsNowait)</div><div class="ttdoc">Generator for '#omp sections'.</div><div class="ttdef"><b>Definition:</b> <a href="OMPIRBuilder_8cpp_source.html#l00893">OMPIRBuilder.cpp:893</a></div></div>
<div class="ttc" id="astructllvm_1_1OpenMPIRBuilder_1_1MapperAllocas_html_a9d27bf73f53ec62c72ffd3137f47efde"><div class="ttname"><a href="structllvm_1_1OpenMPIRBuilder_1_1MapperAllocas.html#a9d27bf73f53ec62c72ffd3137f47efde">llvm::OpenMPIRBuilder::MapperAllocas::ArgsBase</a></div><div class="ttdeci">AllocaInst * ArgsBase</div><div class="ttdef"><b>Definition:</b> <a href="OMPIRBuilder_8h_source.html#l00640">OMPIRBuilder.h:640</a></div></div>
<div class="ttc" id="aclassllvm_1_1StoreInst_html"><div class="ttname"><a href="classllvm_1_1StoreInst.html">llvm::StoreInst</a></div><div class="ttdoc">An instruction for storing to memory.</div><div class="ttdef"><b>Definition:</b> <a href="Instructions_8h_source.html#l00304">Instructions.h:304</a></div></div>
<div class="ttc" id="aclassllvm_1_1Constant_html"><div class="ttname"><a href="classllvm_1_1Constant.html">llvm::Constant</a></div><div class="ttdoc">This is an important base class in LLVM.</div><div class="ttdef"><b>Definition:</b> <a href="Constant_8h_source.html#l00041">Constant.h:41</a></div></div>
<div class="ttc" id="aclassllvm_1_1Instruction_html_ae6b978645b8ac72d1a35e1298ffdd4f0"><div class="ttname"><a href="classllvm_1_1Instruction.html#ae6b978645b8ac72d1a35e1298ffdd4f0">llvm::Instruction::eraseFromParent</a></div><div class="ttdeci">SymbolTableList&lt; Instruction &gt;::iterator eraseFromParent()</div><div class="ttdoc">This method unlinks 'this' from the containing basic block and deletes it.</div><div class="ttdef"><b>Definition:</b> <a href="IR_2Instruction_8cpp_source.html#l00078">Instruction.cpp:78</a></div></div>
<div class="ttc" id="aclassllvm_1_1Function_html_aaea88376352c42347dceccdd5ab1c20c"><div class="ttname"><a href="classllvm_1_1Function.html#aaea88376352c42347dceccdd5ab1c20c">llvm::Function::getReturnType</a></div><div class="ttdeci">Type * getReturnType() const</div><div class="ttdoc">Returns the type of the ret val.</div><div class="ttdef"><b>Definition:</b> <a href="Function_8h_source.html#l00181">Function.h:181</a></div></div>
<div class="ttc" id="aclassllvm_1_1AtomicRMWInst_html_a461cfbbb5c7a57ab73210498923cf615a5db6ca0c3e18acd87290f22ccb2ce564"><div class="ttname"><a href="classllvm_1_1AtomicRMWInst.html#a461cfbbb5c7a57ab73210498923cf615a5db6ca0c3e18acd87290f22ccb2ce564">llvm::AtomicRMWInst::Sub</a></div><div class="ttdeci">@ Sub</div><div class="ttdoc">*p = old - v</div><div class="ttdef"><b>Definition:</b> <a href="Instructions_8h_source.html#l00744">Instructions.h:744</a></div></div>
<div class="ttc" id="allvm_2Support_2Error_8h_html"><div class="ttname"><a href="llvm_2Support_2Error_8h.html">Error.h</a></div></div>
<div class="ttc" id="anamespacellvm_1_1ARM__MB_html_ad70272e2a9ec2a7e3a497458e1edbc85aed0b9bef861c96eee19e89db753db7b2"><div class="ttname"><a href="namespacellvm_1_1ARM__MB.html#ad70272e2a9ec2a7e3a497458e1edbc85aed0b9bef861c96eee19e89db753db7b2">llvm::ARM_MB::ST</a></div><div class="ttdeci">@ ST</div><div class="ttdef"><b>Definition:</b> <a href="MCTargetDesc_2ARMBaseInfo_8h_source.html#l00073">ARMBaseInfo.h:73</a></div></div>
<div class="ttc" id="aELFObjHandler_8cpp_html_a9df82a8be2f17e80535a8937bf23e022"><div class="ttname"><a href="ELFObjHandler_8cpp.html#a9df82a8be2f17e80535a8937bf23e022">Addr</a></div><div class="ttdeci">uint64_t Addr</div><div class="ttdef"><b>Definition:</b> <a href="ELFObjHandler_8cpp_source.html#l00080">ELFObjHandler.cpp:80</a></div></div>
<div class="ttc" id="aclassllvm_1_1PHINode_html_a089cccb6f231efee72abc76d0f9c695f"><div class="ttname"><a href="classllvm_1_1PHINode.html#a089cccb6f231efee72abc76d0f9c695f">llvm::PHINode::addIncoming</a></div><div class="ttdeci">void addIncoming(Value *V, BasicBlock *BB)</div><div class="ttdoc">Add an incoming value to the end of the PHI list.</div><div class="ttdef"><b>Definition:</b> <a href="Instructions_8h_source.html#l02747">Instructions.h:2747</a></div></div>
<div class="ttc" id="alib_2Target_2ARM_2README_8txt_html_ad3a99906764c35b2694ae90fa57744a5"><div class="ttname"><a href="lib_2Target_2ARM_2README_8txt.html#ad3a99906764c35b2694ae90fa57744a5">move</a></div><div class="ttdeci">compiles ldr LCPI1_0 ldr ldr mov lsr tst moveq r1 ldr LCPI1_1 and r0 bx lr It would be better to do something like to fold the shift into the conditional move</div><div class="ttdef"><b>Definition:</b> <a href="lib_2Target_2ARM_2README_8txt_source.html#l00544">README.txt:546</a></div></div>
<div class="ttc" id="aclassllvm_1_1LLVMContext_html"><div class="ttname"><a href="classllvm_1_1LLVMContext.html">llvm::LLVMContext</a></div><div class="ttdoc">This is an important class for using LLVM in a threaded context.</div><div class="ttdef"><b>Definition:</b> <a href="LLVMContext_8h_source.html#l00068">LLVMContext.h:68</a></div></div>
<div class="ttc" id="anamespacellvm_1_1pdb_html_a434cfa04e4ed34b7a901378557d4ca9ea786eecab07351b4cc9e4c33f4cf5691e"><div class="ttname"><a href="namespacellvm_1_1pdb.html#a434cfa04e4ed34b7a901378557d4ca9ea786eecab07351b4cc9e4c33f4cf5691e">llvm::pdb::Int32</a></div><div class="ttdeci">@ Int32</div><div class="ttdef"><b>Definition:</b> <a href="PDBTypes_8h_source.html#l00398">PDBTypes.h:398</a></div></div>
<div class="ttc" id="aclassllvm_1_1BranchInst_html_a38df51256d4b415b6a817b5e1c6d4d36"><div class="ttname"><a href="classllvm_1_1BranchInst.html#a38df51256d4b415b6a817b5e1c6d4d36">llvm::BranchInst::Create</a></div><div class="ttdeci">static BranchInst * Create(BasicBlock *IfTrue, Instruction *InsertBefore=nullptr)</div><div class="ttdef"><b>Definition:</b> <a href="Instructions_8h_source.html#l03088">Instructions.h:3088</a></div></div>
<div class="ttc" id="aMD5_8cpp_html_ac0eafdc9ee161b71e7af98af736952fd"><div class="ttname"><a href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a></div><div class="ttdeci">#define I(x, y, z)</div><div class="ttdef"><b>Definition:</b> <a href="MD5_8cpp_source.html#l00059">MD5.cpp:59</a></div></div>
<div class="ttc" id="aclassllvm_1_1DebugLoc_html_a4ff1bb484be62f8dac94fc087f72f524"><div class="ttname"><a href="classllvm_1_1DebugLoc.html#a4ff1bb484be62f8dac94fc087f72f524">llvm::DebugLoc::get</a></div><div class="ttdeci">DILocation * get() const</div><div class="ttdoc">Get the underlying DILocation.</div><div class="ttdef"><b>Definition:</b> <a href="DebugLoc_8cpp_source.html#l00021">DebugLoc.cpp:21</a></div></div>
<div class="ttc" id="aclassllvm_1_1OpenMPIRBuilder_html_ac0057ec814345445fc0c55e9fe928e35"><div class="ttname"><a href="classllvm_1_1OpenMPIRBuilder.html#ac0057ec814345445fc0c55e9fe928e35">llvm::OpenMPIRBuilder::emitCancelationCheckImpl</a></div><div class="ttdeci">void emitCancelationCheckImpl(Value *CancelFlag, omp::Directive CanceledDirective, FinalizeCallbackTy ExitCB={})</div><div class="ttdoc">Generate control flow and cleanup for cancellation.</div><div class="ttdef"><b>Definition:</b> <a href="OMPIRBuilder_8cpp_source.html#l00441">OMPIRBuilder.cpp:441</a></div></div>
<div class="ttc" id="aclassllvm_1_1OpenMPIRBuilder_html_a1f8ea3a2101b10ccd74e9840406abcf7"><div class="ttname"><a href="classllvm_1_1OpenMPIRBuilder.html#a1f8ea3a2101b10ccd74e9840406abcf7">llvm::OpenMPIRBuilder::createCanonicalLoop</a></div><div class="ttdeci">CanonicalLoopInfo * createCanonicalLoop(const LocationDescription &amp;Loc, LoopBodyGenCallbackTy BodyGenCB, Value *TripCount, const Twine &amp;Name=&quot;loop&quot;)</div><div class="ttdoc">Generator for the control flow structure of an OpenMP canonical loop.</div><div class="ttdef"><b>Definition:</b> <a href="OMPIRBuilder_8cpp_source.html#l01145">OMPIRBuilder.cpp:1145</a></div></div>
<div class="ttc" id="aclassllvm_1_1AtomicRMWInst_html_a461cfbbb5c7a57ab73210498923cf615a39edb6e51c1ad37244e8b32a2af4077d"><div class="ttname"><a href="classllvm_1_1AtomicRMWInst.html#a461cfbbb5c7a57ab73210498923cf615a39edb6e51c1ad37244e8b32a2af4077d">llvm::AtomicRMWInst::Min</a></div><div class="ttdeci">@ Min</div><div class="ttdoc">*p = old &lt;signed v ? old : v</div><div class="ttdef"><b>Definition:</b> <a href="Instructions_8h_source.html#l00756">Instructions.h:756</a></div></div>
<div class="ttc" id="aclassllvm_1_1OpenMPIRBuilder_html_a631e1d17c22a71e16034ea34407fe97a"><div class="ttname"><a href="classllvm_1_1OpenMPIRBuilder.html#a631e1d17c22a71e16034ea34407fe97a">llvm::OpenMPIRBuilder::createTargetInit</a></div><div class="ttdeci">InsertPointTy createTargetInit(const LocationDescription &amp;Loc, bool IsSPMD, bool RequiresFullRuntime)</div><div class="ttdoc">The omp target interface.</div><div class="ttdef"><b>Definition:</b> <a href="OMPIRBuilder_8cpp_source.html#l02196">OMPIRBuilder.cpp:2196</a></div></div>
<div class="ttc" id="anamespacellvm_1_1cl_html_a10a041239ae1870cfcc064bfaa79fb65"><div class="ttname"><a href="namespacellvm_1_1cl.html#a10a041239ae1870cfcc064bfaa79fb65">llvm::cl::init</a></div><div class="ttdeci">initializer&lt; Ty &gt; init(const Ty &amp;Val)</div><div class="ttdef"><b>Definition:</b> <a href="CommandLine_8h_source.html#l00443">CommandLine.h:443</a></div></div>
<div class="ttc" id="anamespacellvm_html_a8154638df88e4eaa568b67b23d463dac"><div class="ttname"><a href="namespacellvm.html#a8154638df88e4eaa568b67b23d463dac">llvm::make_early_inc_range</a></div><div class="ttdeci">iterator_range&lt; early_inc_iterator_impl&lt; detail::IterOfRange&lt; RangeT &gt; &gt; &gt; make_early_inc_range(RangeT &amp;&amp;Range)</div><div class="ttdoc">Make a range that does early increment to allow mutation of the underlying range without disrupting i...</div><div class="ttdef"><b>Definition:</b> <a href="STLExtras_8h_source.html#l00572">STLExtras.h:572</a></div></div>
<div class="ttc" id="aclassllvm_1_1AtomicRMWInst_html_a461cfbbb5c7a57ab73210498923cf615a5954f59053121b87ebe0c5fe79942c6e"><div class="ttname"><a href="classllvm_1_1AtomicRMWInst.html#a461cfbbb5c7a57ab73210498923cf615a5954f59053121b87ebe0c5fe79942c6e">llvm::AtomicRMWInst::Or</a></div><div class="ttdeci">@ Or</div><div class="ttdoc">*p = old | v</div><div class="ttdef"><b>Definition:</b> <a href="Instructions_8h_source.html#l00750">Instructions.h:750</a></div></div>
<div class="ttc" id="aclassllvm_1_1OpenMPIRBuilder_html_aa453737596c25281abfa783850b1e15c"><div class="ttname"><a href="classllvm_1_1OpenMPIRBuilder.html#aa453737596c25281abfa783850b1e15c">llvm::OpenMPIRBuilder::createParallel</a></div><div class="ttdeci">IRBuilder ::InsertPoint createParallel(const LocationDescription &amp;Loc, InsertPointTy AllocaIP, BodyGenCallbackTy BodyGenCB, PrivatizeCallbackTy PrivCB, FinalizeCallbackTy FiniCB, Value *IfCondition, Value *NumThreads, omp::ProcBindKind ProcBind, bool IsCancellable)</div><div class="ttdoc">Generator for '#omp parallel'.</div><div class="ttdef"><b>Definition:</b> <a href="OMPIRBuilder_8cpp_source.html#l00480">OMPIRBuilder.cpp:480</a></div></div>
<div class="ttc" id="aclassllvm_1_1Triple_html_a92da6cf2a6b4ce43d5c5e4ef110511aa"><div class="ttname"><a href="classllvm_1_1Triple.html#a92da6cf2a6b4ce43d5c5e4ef110511aa">llvm::Triple::isAMDGCN</a></div><div class="ttdeci">bool isAMDGCN() const</div><div class="ttdoc">Tests whether the target is AMDGCN.</div><div class="ttdef"><b>Definition:</b> <a href="Triple_8h_source.html#l00707">Triple.h:707</a></div></div>
<div class="ttc" id="allvm_2IR_2DebugInfo_8h_html"><div class="ttname"><a href="llvm_2IR_2DebugInfo_8h.html">DebugInfo.h</a></div></div>
<div class="ttc" id="aIRBuilder_8h_html"><div class="ttname"><a href="IRBuilder_8h.html">IRBuilder.h</a></div></div>
<div class="ttc" id="aSILowerControlFlow_8cpp_html_a4868c5d81c5ccc98c47aeab6244346a0"><div class="ttname"><a href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a></div><div class="ttdeci">assert(ImpDefSCC.getReg()==AMDGPU::SCC &amp;&amp;ImpDefSCC.isDef())</div></div>
<div class="ttc" id="aclassllvm_1_1MDBuilder_html_a1d51e11adfffd05afe252d3398f50d4e"><div class="ttname"><a href="classllvm_1_1MDBuilder.html#a1d51e11adfffd05afe252d3398f50d4e">llvm::MDBuilder::createCallbackEncoding</a></div><div class="ttdeci">MDNode * createCallbackEncoding(unsigned CalleeArgNo, ArrayRef&lt; int &gt; Arguments, bool VarArgsArePassed)</div><div class="ttdoc">Return metadata describing a callback (see llvm::AbstractCallSite).</div><div class="ttdef"><b>Definition:</b> <a href="MDBuilder_8cpp_source.html#l00107">MDBuilder.cpp:107</a></div></div>
<div class="ttc" id="allvm_2Support_2ErrorHandling_8h_html_ace243f5c25697a1107cce46626b3dc94"><div class="ttname"><a href="llvm_2Support_2ErrorHandling_8h.html#ace243f5c25697a1107cce46626b3dc94">llvm_unreachable</a></div><div class="ttdeci">#define llvm_unreachable(msg)</div><div class="ttdoc">Marks that the current location is not supposed to be reachable.</div><div class="ttdef"><b>Definition:</b> <a href="llvm_2Support_2ErrorHandling_8h_source.html#l00136">ErrorHandling.h:136</a></div></div>
<div class="ttc" id="astructllvm_1_1OpenMPIRBuilder_1_1LocationDescription_html_ac6a58d4f9cf1978ee50af30bdb248d73"><div class="ttname"><a href="structllvm_1_1OpenMPIRBuilder_1_1LocationDescription.html#ac6a58d4f9cf1978ee50af30bdb248d73">llvm::OpenMPIRBuilder::LocationDescription::DL</a></div><div class="ttdeci">DebugLoc DL</div><div class="ttdef"><b>Definition:</b> <a href="OMPIRBuilder_8h_source.html#l00158">OMPIRBuilder.h:158</a></div></div>
<div class="ttc" id="aclassllvm_1_1Type_html_ae8eaa0b4eeac52a2b2282cb1bfd981ae"><div class="ttname"><a href="classllvm_1_1Type.html#ae8eaa0b4eeac52a2b2282cb1bfd981ae">llvm::Type::isVoidTy</a></div><div class="ttdeci">bool isVoidTy() const</div><div class="ttdoc">Return true if this is 'void'.</div><div class="ttdef"><b>Definition:</b> <a href="Type_8h_source.html#l00138">Type.h:138</a></div></div>
<div class="ttc" id="aclassllvm_1_1ArrayType_html_adf411edc4f135b570ab218079474ce77"><div class="ttname"><a href="classllvm_1_1ArrayType.html#adf411edc4f135b570ab218079474ce77">llvm::ArrayType::get</a></div><div class="ttdeci">static ArrayType * get(Type *ElementType, uint64_t NumElements)</div><div class="ttdoc">This static method is the primary way to construct an ArrayType.</div><div class="ttdef"><b>Definition:</b> <a href="Type_8cpp_source.html#l00604">Type.cpp:604</a></div></div>
<div class="ttc" id="aclassllvm_1_1OpenMPIRBuilder_html_a7a0ce50dfb1a164ee67119899992c75b"><div class="ttname"><a href="classllvm_1_1OpenMPIRBuilder.html#a7a0ce50dfb1a164ee67119899992c75b">llvm::OpenMPIRBuilder::getOrCreateRuntimeFunctionPtr</a></div><div class="ttdeci">Function * getOrCreateRuntimeFunctionPtr(omp::RuntimeFunction FnID)</div><div class="ttdef"><b>Definition:</b> <a href="OMPIRBuilder_8cpp_source.html#l00133">OMPIRBuilder.cpp:133</a></div></div>
<div class="ttc" id="aclassllvm_1_1Module_html"><div class="ttname"><a href="classllvm_1_1Module.html">llvm::Module</a></div><div class="ttdoc">A Module instance is used to store all the information related to an LLVM module.</div><div class="ttdef"><b>Definition:</b> <a href="Module_8h_source.html#l00067">Module.h:67</a></div></div>
<div class="ttc" id="aclassllvm_1_1OpenMPIRBuilder_html_a9776896fee5db5da9e39fd96819e360a"><div class="ttname"><a href="classllvm_1_1OpenMPIRBuilder.html#a9776896fee5db5da9e39fd96819e360a">llvm::OpenMPIRBuilder::createMaster</a></div><div class="ttdeci">InsertPointTy createMaster(const LocationDescription &amp;Loc, BodyGenCallbackTy BodyGenCB, FinalizeCallbackTy FiniCB)</div><div class="ttdoc">Generator for '#omp master'.</div><div class="ttdef"><b>Definition:</b> <a href="OMPIRBuilder_8cpp_source.html#l01026">OMPIRBuilder.cpp:1026</a></div></div>
<div class="ttc" id="anamespacellvm_html_a2cda6d46faab8ed9b9c1e5edd3a1ed48"><div class="ttname"><a href="namespacellvm.html#a2cda6d46faab8ed9b9c1e5edd3a1ed48">llvm::SplitBlockAndInsertIfThenElse</a></div><div class="ttdeci">void SplitBlockAndInsertIfThenElse(Value *Cond, Instruction *SplitBefore, Instruction **ThenTerm, Instruction **ElseTerm, MDNode *BranchWeights=nullptr)</div><div class="ttdoc">SplitBlockAndInsertIfThenElse is similar to SplitBlockAndInsertIfThen, but also creates the ElseBlock...</div><div class="ttdef"><b>Definition:</b> <a href="BasicBlockUtils_8cpp_source.html#l01439">BasicBlockUtils.cpp:1439</a></div></div>
<div class="ttc" id="aclassllvm_1_1OpenMPIRBuilder_html_afc2cc623eda981e1b3fbb61a44e80ef8"><div class="ttname"><a href="classllvm_1_1OpenMPIRBuilder.html#afc2cc623eda981e1b3fbb61a44e80ef8">llvm::OpenMPIRBuilder::createFlush</a></div><div class="ttdeci">void createFlush(const LocationDescription &amp;Loc)</div><div class="ttdoc">Generator for '#omp flush'.</div><div class="ttdef"><b>Definition:</b> <a href="OMPIRBuilder_8cpp_source.html#l00852">OMPIRBuilder.cpp:852</a></div></div>
<div class="ttc" id="aclassllvm_1_1CallBase_html_ac0f11b96f81b2769dd23d028e3189075"><div class="ttname"><a href="classllvm_1_1CallBase.html#ac0f11b96f81b2769dd23d028e3189075">llvm::CallBase::arg_end</a></div><div class="ttdeci">User::op_iterator arg_end()</div><div class="ttdoc">Return the iterator pointing to the end of the argument list.</div><div class="ttdef"><b>Definition:</b> <a href="InstrTypes_8h_source.html#l01309">InstrTypes.h:1309</a></div></div>
<div class="ttc" id="aclassllvm_1_1SmallPtrSetImpl_html_a1f475b0df44ebd7169e720fa1bf9169e"><div class="ttname"><a href="classllvm_1_1SmallPtrSetImpl.html#a1f475b0df44ebd7169e720fa1bf9169e">llvm::SmallPtrSetImpl::count</a></div><div class="ttdeci">size_type count(ConstPtrType Ptr) const</div><div class="ttdoc">count - Return 1 if the specified pointer is in the set, 0 otherwise.</div><div class="ttdef"><b>Definition:</b> <a href="SmallPtrSet_8h_source.html#l00382">SmallPtrSet.h:382</a></div></div>
<div class="ttc" id="aclassllvm_1_1Function_html_a16be569c794ac815f294b1f651587e48"><div class="ttname"><a href="classllvm_1_1Function.html#a16be569c794ac815f294b1f651587e48">llvm::Function::getFunction</a></div><div class="ttdeci">const Function &amp; getFunction() const</div><div class="ttdef"><b>Definition:</b> <a href="Function_8h_source.html#l00136">Function.h:136</a></div></div>
<div class="ttc" id="aAssumeBundleBuilder_8cpp_html_afb136e0532bcaed86521b462e6538d62"><div class="ttname"><a href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a></div><div class="ttdeci">assume Assume Builder</div><div class="ttdef"><b>Definition:</b> <a href="AssumeBundleBuilder_8cpp_source.html#l00651">AssumeBundleBuilder.cpp:651</a></div></div>
<div class="ttc" id="astructllvm_1_1OpenMPIRBuilder_1_1OutlineInfo_html"><div class="ttname"><a href="structllvm_1_1OpenMPIRBuilder_1_1OutlineInfo.html">llvm::OpenMPIRBuilder::OutlineInfo</a></div><div class="ttdoc">Helper that contains information about regions we need to outline during finalization.</div><div class="ttdef"><b>Definition:</b> <a href="OMPIRBuilder_8h_source.html#l00599">OMPIRBuilder.h:599</a></div></div>
<div class="ttc" id="aclassllvm_1_1CanonicalLoopInfo_html"><div class="ttname"><a href="classllvm_1_1CanonicalLoopInfo.html">llvm::CanonicalLoopInfo</a></div><div class="ttdoc">Class to represented the control flow structure of an OpenMP canonical loop.</div><div class="ttdef"><b>Definition:</b> <a href="OMPIRBuilder_8h_source.html#l01151">OMPIRBuilder.h:1151</a></div></div>
<div class="ttc" id="aclassllvm_1_1User_html_a5fa9b8e1842b354f64c1ba6be0a4a17f"><div class="ttname"><a href="classllvm_1_1User.html#a5fa9b8e1842b354f64c1ba6be0a4a17f">llvm::User::setOperand</a></div><div class="ttdeci">void setOperand(unsigned i, Value *Val)</div><div class="ttdef"><b>Definition:</b> <a href="User_8h_source.html#l00174">User.h:174</a></div></div>
<div class="ttc" id="aTriple_8h_html"><div class="ttname"><a href="Triple_8h.html">Triple.h</a></div></div>
<div class="ttc" id="aclassllvm_1_1CmpInst_html_a2be3583dac92a031fa1458d4d992c78ba15ae464950ac676919c2f0c7aafc706c"><div class="ttname"><a href="classllvm_1_1CmpInst.html#a2be3583dac92a031fa1458d4d992c78ba15ae464950ac676919c2f0c7aafc706c">llvm::CmpInst::ICMP_SLT</a></div><div class="ttdeci">@ ICMP_SLT</div><div class="ttdoc">signed less than</div><div class="ttdef"><b>Definition:</b> <a href="InstrTypes_8h_source.html#l00749">InstrTypes.h:749</a></div></div>
<div class="ttc" id="anamespacellvm_html_a10f3d955592ae2bc745f57e5b48ae115"><div class="ttname"><a href="namespacellvm.html#a10f3d955592ae2bc745f57e5b48ae115">llvm::size</a></div><div class="ttdeci">auto size(R &amp;&amp;Range, std::enable_if_t&lt; std::is_base_of&lt; std::random_access_iterator_tag, typename std::iterator_traits&lt; decltype(Range.begin())&gt;::iterator_category &gt;::value, void &gt; *=nullptr)</div><div class="ttdoc">Get the size of a range.</div><div class="ttdef"><b>Definition:</b> <a href="STLExtras_8h_source.html#l01515">STLExtras.h:1515</a></div></div>
<div class="ttc" id="aclassllvm_1_1SmallPtrSetImplBase_html_a16413f1a88d8baca228d0a1b4cc0bfc6"><div class="ttname"><a href="classllvm_1_1SmallPtrSetImplBase.html#a16413f1a88d8baca228d0a1b4cc0bfc6">llvm::SmallPtrSetImplBase::clear</a></div><div class="ttdeci">void clear()</div><div class="ttdef"><b>Definition:</b> <a href="SmallPtrSet_8h_source.html#l00094">SmallPtrSet.h:94</a></div></div>
<div class="ttc" id="anamespacellvm_1_1Sched_html_ac1547cccaf660851fcd6863d1e60309eac13545a6345c7d5b3c9cc8932ad3b0e9"><div class="ttname"><a href="namespacellvm_1_1Sched.html#ac1547cccaf660851fcd6863d1e60309eac13545a6345c7d5b3c9cc8932ad3b0e9">llvm::Sched::Source</a></div><div class="ttdeci">@ Source</div><div class="ttdef"><b>Definition:</b> <a href="TargetLowering_8h_source.html#l00099">TargetLowering.h:99</a></div></div>
<div class="ttc" id="aclassllvm_1_1ArrayRef_html"><div class="ttname"><a href="classllvm_1_1ArrayRef.html">llvm::ArrayRef</a></div><div class="ttdoc">ArrayRef - Represent a constant reference to an array (0 or more elements consecutively in memory),...</div><div class="ttdef"><b>Definition:</b> <a href="ArrayRef_8h_source.html#l00043">ArrayRef.h:43</a></div></div>
<div class="ttc" id="aclassllvm_1_1LoopInfo_html"><div class="ttname"><a href="classllvm_1_1LoopInfo.html">llvm::LoopInfo</a></div><div class="ttdef"><b>Definition:</b> <a href="LoopInfo_8h_source.html#l01083">LoopInfo.h:1083</a></div></div>
<div class="ttc" id="anamespacellvm_html_a23ddcf4630aa7c7c250a1af5c9e7e20d"><div class="ttname"><a href="namespacellvm.html#a23ddcf4630aa7c7c250a1af5c9e7e20d">llvm::MergeBlockIntoPredecessor</a></div><div class="ttdeci">bool MergeBlockIntoPredecessor(BasicBlock *BB, DomTreeUpdater *DTU=nullptr, LoopInfo *LI=nullptr, MemorySSAUpdater *MSSAU=nullptr, MemoryDependenceResults *MemDep=nullptr, bool PredecessorWithTwoSuccessors=false)</div><div class="ttdoc">Attempts to merge a block into its predecessor, if possible.</div><div class="ttdef"><b>Definition:</b> <a href="BasicBlockUtils_8cpp_source.html#l00173">BasicBlockUtils.cpp:173</a></div></div>
<div class="ttc" id="aclassllvm_1_1StructType_html"><div class="ttname"><a href="classllvm_1_1StructType.html">llvm::StructType</a></div><div class="ttdoc">Class to represent struct types.</div><div class="ttdef"><b>Definition:</b> <a href="DerivedTypes_8h_source.html#l00212">DerivedTypes.h:212</a></div></div>
<div class="ttc" id="aBasicBlockSections_8cpp_html_a5fd0741d696f28faf65b33f6c6af8fda"><div class="ttname"><a href="BasicBlockSections_8cpp.html#a5fd0741d696f28faf65b33f6c6af8fda">Cond</a></div><div class="ttdeci">SmallVector&lt; MachineOperand, 4 &gt; Cond</div><div class="ttdef"><b>Definition:</b> <a href="BasicBlockSections_8cpp_source.html#l00167">BasicBlockSections.cpp:167</a></div></div>
<div class="ttc" id="aclassllvm_1_1StringRef_html"><div class="ttname"><a href="classllvm_1_1StringRef.html">llvm::StringRef</a></div><div class="ttdoc">StringRef - Represent a constant reference to a string, i.e.</div><div class="ttdef"><b>Definition:</b> <a href="StringRef_8h_source.html#l00058">StringRef.h:58</a></div></div>
<div class="ttc" id="aclassllvm_1_1CmpInst_html_a2be3583dac92a031fa1458d4d992c78ba91d86a4753c8bd7624e01bf565d87f8e"><div class="ttname"><a href="classllvm_1_1CmpInst.html#a2be3583dac92a031fa1458d4d992c78ba91d86a4753c8bd7624e01bf565d87f8e">llvm::CmpInst::ICMP_ULT</a></div><div class="ttdeci">@ ICMP_ULT</div><div class="ttdoc">unsigned less than</div><div class="ttdef"><b>Definition:</b> <a href="InstrTypes_8h_source.html#l00745">InstrTypes.h:745</a></div></div>
<div class="ttc" id="aclassllvm_1_1Value_html_a6393a2d4fe7e10b28a0dcc35f881567b"><div class="ttname"><a href="classllvm_1_1Value.html#a6393a2d4fe7e10b28a0dcc35f881567b">llvm::Value::getType</a></div><div class="ttdeci">Type * getType() const</div><div class="ttdoc">All values are typed, get the type of this value.</div><div class="ttdef"><b>Definition:</b> <a href="Value_8h_source.html#l00256">Value.h:256</a></div></div>
<div class="ttc" id="aclassllvm_1_1Value_html_aba0055050d741f60b6e0523507a2c79f"><div class="ttname"><a href="classllvm_1_1Value.html#aba0055050d741f60b6e0523507a2c79f">llvm::Value::getNumUses</a></div><div class="ttdeci">unsigned getNumUses() const</div><div class="ttdoc">This method computes the number of uses of this Value.</div><div class="ttdef"><b>Definition:</b> <a href="Value_8cpp_source.html#l00243">Value.cpp:243</a></div></div>
<div class="ttc" id="aclassllvm_1_1OpenMPIRBuilder_html_ab1aa0d632549db4855d6412f4d2d44ae"><div class="ttname"><a href="classllvm_1_1OpenMPIRBuilder.html#ab1aa0d632549db4855d6412f4d2d44ae">llvm::OpenMPIRBuilder::createOffloadMapnames</a></div><div class="ttdeci">GlobalVariable * createOffloadMapnames(SmallVectorImpl&lt; llvm::Constant * &gt; &amp;Names, std::string VarName)</div><div class="ttdoc">Create the global variable holding the offload names information.</div><div class="ttdef"><b>Definition:</b> <a href="OMPIRBuilder_8cpp_source.html#l02689">OMPIRBuilder.cpp:2689</a></div></div>
<div class="ttc" id="aclassllvm_1_1ConstantDataArray_html_acea0f5c18b4593bf27592dfcfe59de6f"><div class="ttname"><a href="classllvm_1_1ConstantDataArray.html#acea0f5c18b4593bf27592dfcfe59de6f">llvm::ConstantDataArray::get</a></div><div class="ttdeci">static Constant * get(LLVMContext &amp;Context, ArrayRef&lt; ElementTy &gt; Elts)</div><div class="ttdoc">get() constructor - Return a constant with array type with an element count and element type matching...</div><div class="ttdef"><b>Definition:</b> <a href="Constants_8h_source.html#l00691">Constants.h:691</a></div></div>
<div class="ttc" id="aclassllvm_1_1BasicBlock_html_a74aa9daea070e2ad3394a3ec58b7316a"><div class="ttname"><a href="classllvm_1_1BasicBlock.html#a74aa9daea070e2ad3394a3ec58b7316a">llvm::BasicBlock::getUniquePredecessor</a></div><div class="ttdeci">const BasicBlock * getUniquePredecessor() const</div><div class="ttdoc">Return the predecessor of this block if it has a unique predecessor block.</div><div class="ttdef"><b>Definition:</b> <a href="BasicBlock_8cpp_source.html#l00272">BasicBlock.cpp:272</a></div></div>
<div class="ttc" id="anamespacellvm_1_1Reloc_html_af59f6dc86e80aaf56f1afd155eebf568a2102fa713297236bf4339c5f0bf0f39d"><div class="ttname"><a href="namespacellvm_1_1Reloc.html#af59f6dc86e80aaf56f1afd155eebf568a2102fa713297236bf4339c5f0bf0f39d">llvm::Reloc::Static</a></div><div class="ttdeci">@ Static</div><div class="ttdef"><b>Definition:</b> <a href="CodeGen_8h_source.html#l00022">CodeGen.h:22</a></div></div>
<div class="ttc" id="aclassllvm_1_1Value_html_a3ab5fc45117b450e8bb04e564cb6e5f2"><div class="ttname"><a href="classllvm_1_1Value.html#a3ab5fc45117b450e8bb04e564cb6e5f2">llvm::Value::replaceAllUsesWith</a></div><div class="ttdeci">void replaceAllUsesWith(Value *V)</div><div class="ttdoc">Change all uses of this to point to a new Value.</div><div class="ttdef"><b>Definition:</b> <a href="Value_8cpp_source.html#l00520">Value.cpp:520</a></div></div>
<div class="ttc" id="aclassllvm_1_1BasicBlock_html_ace940beeee97c222f836fe0ac70f6cf5"><div class="ttname"><a href="classllvm_1_1BasicBlock.html#ace940beeee97c222f836fe0ac70f6cf5">llvm::BasicBlock::Create</a></div><div class="ttdeci">static BasicBlock * Create(LLVMContext &amp;Context, const Twine &amp;Name=&quot;&quot;, Function *Parent=nullptr, BasicBlock *InsertBefore=nullptr)</div><div class="ttdoc">Creates a new BasicBlock.</div><div class="ttdef"><b>Definition:</b> <a href="BasicBlock_8h_source.html#l00100">BasicBlock.h:100</a></div></div>
<div class="ttc" id="aBasicAliasAnalysis_8cpp_html_a2675de1d8479c7b00387979714da43f7"><div class="ttname"><a href="BasicAliasAnalysis_8cpp.html#a2675de1d8479c7b00387979714da43f7">getParent</a></div><div class="ttdeci">static const Function * getParent(const Value *V)</div><div class="ttdef"><b>Definition:</b> <a href="BasicAliasAnalysis_8cpp_source.html#l00776">BasicAliasAnalysis.cpp:776</a></div></div>
<div class="ttc" id="aclassuint32__t_html"><div class="ttname"><a href="classuint32__t.html">uint32_t</a></div></div>
<div class="ttc" id="aclassllvm_1_1ilist__node__impl_html_af719fc783be6589465137d997701a432"><div class="ttname"><a href="classllvm_1_1ilist__node__impl.html#af719fc783be6589465137d997701a432">llvm::ilist_node_impl::getIterator</a></div><div class="ttdeci">self_iterator getIterator()</div><div class="ttdef"><b>Definition:</b> <a href="ilist__node_8h_source.html#l00081">ilist_node.h:81</a></div></div>
<div class="ttc" id="aAArch64SLSHardening_8cpp_html_ad467c4ab9119043f9b7750ab986be61a"><div class="ttname"><a href="AArch64SLSHardening_8cpp.html#ad467c4ab9119043f9b7750ab986be61a">DL</a></div><div class="ttdeci">MachineBasicBlock MachineBasicBlock::iterator DebugLoc DL</div><div class="ttdef"><b>Definition:</b> <a href="AArch64SLSHardening_8cpp_source.html#l00076">AArch64SLSHardening.cpp:76</a></div></div>
<div class="ttc" id="aclassllvm_1_1ConstantDataArray_html_a3edef3fa47c611d3d10606591213e57b"><div class="ttname"><a href="classllvm_1_1ConstantDataArray.html#a3edef3fa47c611d3d10606591213e57b">llvm::ConstantDataArray::getString</a></div><div class="ttdeci">static Constant * getString(LLVMContext &amp;Context, StringRef Initializer, bool AddNull=true)</div><div class="ttdoc">This method constructs a CDS and initializes it with a text string.</div><div class="ttdef"><b>Definition:</b> <a href="Constants_8cpp_source.html#l03056">Constants.cpp:3056</a></div></div>
<div class="ttc" id="aclassllvm_1_1GlobalObject_html_a1f496e54accb2cbe919fb456cb703f1a"><div class="ttname"><a href="classllvm_1_1GlobalObject.html#a1f496e54accb2cbe919fb456cb703f1a">llvm::GlobalObject::hasMetadata</a></div><div class="ttdeci">bool hasMetadata() const</div><div class="ttdoc">Return true if this value has any metadata attached to it.</div><div class="ttdef"><b>Definition:</b> <a href="Value_8h_source.html#l00585">Value.h:585</a></div></div>
<div class="ttc" id="aclassllvm_1_1CodeExtractor_html"><div class="ttname"><a href="classllvm_1_1CodeExtractor.html">llvm::CodeExtractor</a></div><div class="ttdoc">Utility class for extracting code into a new function.</div><div class="ttdef"><b>Definition:</b> <a href="CodeExtractor_8h_source.html#l00085">CodeExtractor.h:85</a></div></div>
<div class="ttc" id="aOMPIRBuilder_8cpp_html_a74bf2240e1da04168d57a7534c9613f7"><div class="ttname"><a href="OMPIRBuilder_8cpp.html#a74bf2240e1da04168d57a7534c9613f7">getKmpcForDynamicNextForType</a></div><div class="ttdeci">static FunctionCallee getKmpcForDynamicNextForType(Type *Ty, Module &amp;M, OpenMPIRBuilder &amp;OMPBuilder)</div><div class="ttdoc">Returns an LLVM function to call for updating the next loop using OpenMP dynamic scheduling depending...</div><div class="ttdef"><b>Definition:</b> <a href="OMPIRBuilder_8cpp_source.html#l01387">OMPIRBuilder.cpp:1387</a></div></div>
<div class="ttc" id="astructllvm_1_1OpenMPIRBuilder_1_1MapperAllocas_html_ad41f11a634af5e69560ac0279c74b100"><div class="ttname"><a href="structllvm_1_1OpenMPIRBuilder_1_1MapperAllocas.html#ad41f11a634af5e69560ac0279c74b100">llvm::OpenMPIRBuilder::MapperAllocas::ArgSizes</a></div><div class="ttdeci">AllocaInst * ArgSizes</div><div class="ttdef"><b>Definition:</b> <a href="OMPIRBuilder_8h_source.html#l00642">OMPIRBuilder.h:642</a></div></div>
<div class="ttc" id="astructllvm_1_1OpenMPIRBuilder_1_1OutlineInfo_html_a0b8f73f7987421a24a842d3e2633278d"><div class="ttname"><a href="structllvm_1_1OpenMPIRBuilder_1_1OutlineInfo.html#a0b8f73f7987421a24a842d3e2633278d">llvm::OpenMPIRBuilder::OutlineInfo::PostOutlineCB</a></div><div class="ttdeci">PostOutlineCBTy PostOutlineCB</div><div class="ttdef"><b>Definition:</b> <a href="OMPIRBuilder_8h_source.html#l00601">OMPIRBuilder.h:601</a></div></div>
<div class="ttc" id="aclassllvm_1_1LoadInst_html_a6ae88dc44b078c80ce3a25401fd4b05b"><div class="ttname"><a href="classllvm_1_1LoadInst.html#a6ae88dc44b078c80ce3a25401fd4b05b">llvm::LoadInst::setAtomic</a></div><div class="ttdeci">void setAtomic(AtomicOrdering Ordering, SyncScope::ID SSID=SyncScope::System)</div><div class="ttdoc">Sets the ordering constraint and the synchronization scope ID of this load instruction.</div><div class="ttdef"><b>Definition:</b> <a href="Instructions_8h_source.html#l00253">Instructions.h:253</a></div></div>
<div class="ttc" id="aclassllvm_1_1Value_html_adb5c319f5905c1d3ca9eb5df546388c5"><div class="ttname"><a href="classllvm_1_1Value.html#adb5c319f5905c1d3ca9eb5df546388c5">llvm::Value::getName</a></div><div class="ttdeci">StringRef getName() const</div><div class="ttdoc">Return a constant reference to the value's name.</div><div class="ttdef"><b>Definition:</b> <a href="Value_8cpp_source.html#l00297">Value.cpp:297</a></div></div>
<div class="ttc" id="aclassllvm_1_1LoadInst_html"><div class="ttname"><a href="classllvm_1_1LoadInst.html">llvm::LoadInst</a></div><div class="ttdoc">An instruction for reading from memory.</div><div class="ttdef"><b>Definition:</b> <a href="Instructions_8h_source.html#l00175">Instructions.h:175</a></div></div>
<div class="ttc" id="aclassllvm_1_1OpenMPIRBuilder_html_ac50024248a5e85a1192de8410d5448ca"><div class="ttname"><a href="classllvm_1_1OpenMPIRBuilder.html#ac50024248a5e85a1192de8410d5448ca">llvm::OpenMPIRBuilder::createMasked</a></div><div class="ttdeci">InsertPointTy createMasked(const LocationDescription &amp;Loc, BodyGenCallbackTy BodyGenCB, FinalizeCallbackTy FiniCB, Value *Filter)</div><div class="ttdoc">Generator for '#omp masked'.</div><div class="ttdef"><b>Definition:</b> <a href="OMPIRBuilder_8cpp_source.html#l01050">OMPIRBuilder.cpp:1050</a></div></div>
<div class="ttc" id="aclassllvm_1_1BasicBlock_html_a71a9eabc4318b2fc34f83b01dfee484b"><div class="ttname"><a href="classllvm_1_1BasicBlock.html#a71a9eabc4318b2fc34f83b01dfee484b">llvm::BasicBlock::getTerminator</a></div><div class="ttdeci">const Instruction * getTerminator() const LLVM_READONLY</div><div class="ttdoc">Returns the terminator instruction if the block is well formed or null if the block is not well forme...</div><div class="ttdef"><b>Definition:</b> <a href="BasicBlock_8cpp_source.html#l00148">BasicBlock.cpp:148</a></div></div>
<div class="ttc" id="aclassllvm_1_1GlobalValue_html_aedfa75f0c85c4aa85b257f066fbea57ca08c6a63ca3d9cdb39fb584655bf5c501"><div class="ttname"><a href="classllvm_1_1GlobalValue.html#aedfa75f0c85c4aa85b257f066fbea57ca08c6a63ca3d9cdb39fb584655bf5c501">llvm::GlobalValue::CommonLinkage</a></div><div class="ttdeci">@ CommonLinkage</div><div class="ttdoc">Tentative definitions.</div><div class="ttdef"><b>Definition:</b> <a href="GlobalValue_8h_source.html#l00059">GlobalValue.h:58</a></div></div>
<div class="ttc" id="aclassllvm_1_1FunctionCallee_html_a0055cd5464b935f571b36979a86bd7fc"><div class="ttname"><a href="classllvm_1_1FunctionCallee.html#a0055cd5464b935f571b36979a86bd7fc">llvm::FunctionCallee::getCallee</a></div><div class="ttdeci">Value * getCallee()</div><div class="ttdef"><b>Definition:</b> <a href="DerivedTypes_8h_source.html#l00183">DerivedTypes.h:183</a></div></div>
<div class="ttc" id="aclassllvm_1_1BasicBlock_html_ab706e7ebb1969c5e34f28bfcf2ff719e"><div class="ttname"><a href="classllvm_1_1BasicBlock.html#ab706e7ebb1969c5e34f28bfcf2ff719e">llvm::BasicBlock::front</a></div><div class="ttdeci">const Instruction &amp; front() const</div><div class="ttdef"><b>Definition:</b> <a href="BasicBlock_8h_source.html#l00308">BasicBlock.h:308</a></div></div>
<div class="ttc" id="aclassllvm_1_1CanonicalLoopInfo_html_a320de99bcedbb241fe54ed847482d27f"><div class="ttname"><a href="classllvm_1_1CanonicalLoopInfo.html#a320de99bcedbb241fe54ed847482d27f">llvm::CanonicalLoopInfo::getExit</a></div><div class="ttdeci">BasicBlock * getExit() const</div><div class="ttdoc">Reaching the exit indicates no more iterations are being executed.</div><div class="ttdef"><b>Definition:</b> <a href="OMPIRBuilder_8h_source.html#l01198">OMPIRBuilder.h:1198</a></div></div>
<div class="ttc" id="anamespacellvm_html_a9bccbe67aaab722783ca4e7c504aaaa7ab8e7b465df7c5979dc731d06e84ce2cf"><div class="ttname"><a href="namespacellvm.html#a9bccbe67aaab722783ca4e7c504aaaa7ab8e7b465df7c5979dc731d06e84ce2cf">llvm::AtomicOrdering::Release</a></div><div class="ttdeci">@ Release</div></div>
<div class="ttc" id="aclassllvm_1_1BasicBlock_html_aa286a0f7f5d38488d593bb7ef0ba183e"><div class="ttname"><a href="classllvm_1_1BasicBlock.html#aa286a0f7f5d38488d593bb7ef0ba183e">llvm::BasicBlock::getContext</a></div><div class="ttdeci">LLVMContext &amp; getContext() const</div><div class="ttdoc">Get the context in which this basic block lives.</div><div class="ttdef"><b>Definition:</b> <a href="BasicBlock_8cpp_source.html#l00032">BasicBlock.cpp:32</a></div></div>
<div class="ttc" id="aclassllvm_1_1OpenMPIRBuilder_html_a36b7ed07d181d828c3a52b48b9f95bf9"><div class="ttname"><a href="classllvm_1_1OpenMPIRBuilder.html#a36b7ed07d181d828c3a52b48b9f95bf9">llvm::OpenMPIRBuilder::createStaticWorkshareLoop</a></div><div class="ttdeci">CanonicalLoopInfo * createStaticWorkshareLoop(const LocationDescription &amp;Loc, CanonicalLoopInfo *CLI, InsertPointTy AllocaIP, bool NeedsBarrier, Value *Chunk=nullptr)</div><div class="ttdoc">Modifies the canonical loop to be a statically-scheduled workshare loop.</div><div class="ttdef"><b>Definition:</b> <a href="OMPIRBuilder_8cpp_source.html#l01274">OMPIRBuilder.cpp:1274</a></div></div>
<div class="ttc" id="aclassllvm_1_1OpenMPIRBuilder_html_a419ffad9e4d59275e299ce1ad3c73cd4"><div class="ttname"><a href="classllvm_1_1OpenMPIRBuilder.html#a419ffad9e4d59275e299ce1ad3c73cd4">llvm::OpenMPIRBuilder::createTaskwait</a></div><div class="ttdeci">void createTaskwait(const LocationDescription &amp;Loc)</div><div class="ttdoc">Generator for '#omp taskwait'.</div><div class="ttdef"><b>Definition:</b> <a href="OMPIRBuilder_8cpp_source.html#l00870">OMPIRBuilder.cpp:870</a></div></div>
<div class="ttc" id="aOMPIRBuilder_8cpp_html_a3057c2b7e1e25de160497b1ef3985c2a"><div class="ttname"><a href="OMPIRBuilder_8cpp.html#a3057c2b7e1e25de160497b1ef3985c2a">redirectTo</a></div><div class="ttdeci">static void redirectTo(BasicBlock *Source, BasicBlock *Target, DebugLoc DL)</div><div class="ttdoc">Make Source branch to Target.</div><div class="ttdef"><b>Definition:</b> <a href="OMPIRBuilder_8cpp_source.html#l01513">OMPIRBuilder.cpp:1513</a></div></div>
<div class="ttc" id="aclassllvm_1_1Twine_html"><div class="ttname"><a href="classllvm_1_1Twine.html">llvm::Twine</a></div><div class="ttdoc">Twine - A lightweight data structure for efficiently representing the concatenation of temporary valu...</div><div class="ttdef"><b>Definition:</b> <a href="Twine_8h_source.html#l00083">Twine.h:83</a></div></div>
<div class="ttc" id="aclassllvm_1_1Type_html_a05186fa23e4d11b9855a9599ba87a4b7"><div class="ttname"><a href="classllvm_1_1Type.html#a05186fa23e4d11b9855a9599ba87a4b7">llvm::Type::getInt64Ty</a></div><div class="ttdeci">static IntegerType * getInt64Ty(LLVMContext &amp;C)</div><div class="ttdef"><b>Definition:</b> <a href="Type_8cpp_source.html#l00204">Type.cpp:204</a></div></div>
<div class="ttc" id="anamespacellvm_1_1GraphProgram_html_a0ad4685976f8c4d4a697a53fbe05d10b"><div class="ttname"><a href="namespacellvm_1_1GraphProgram.html#a0ad4685976f8c4d4a697a53fbe05d10b">llvm::GraphProgram::Name</a></div><div class="ttdeci">Name</div><div class="ttdef"><b>Definition:</b> <a href="GraphWriter_8h_source.html#l00052">GraphWriter.h:52</a></div></div>
<div class="ttc" id="aclassllvm_1_1Constant_html_aa6574d526b3e38a28f688a7bb4325c2c"><div class="ttname"><a href="classllvm_1_1Constant.html#aa6574d526b3e38a28f688a7bb4325c2c">llvm::Constant::getNullValue</a></div><div class="ttdeci">static Constant * getNullValue(Type *Ty)</div><div class="ttdoc">Constructor to create a '0' constant of arbitrary type.</div><div class="ttdef"><b>Definition:</b> <a href="Constants_8cpp_source.html#l00348">Constants.cpp:348</a></div></div>
<div class="ttc" id="aclassllvm_1_1AtomicRMWInst_html_a461cfbbb5c7a57ab73210498923cf615a92f66d4bc04fc8514bee80509f3e78d4"><div class="ttname"><a href="classllvm_1_1AtomicRMWInst.html#a461cfbbb5c7a57ab73210498923cf615a92f66d4bc04fc8514bee80509f3e78d4">llvm::AtomicRMWInst::FSub</a></div><div class="ttdeci">@ FSub</div><div class="ttdoc">*p = old - v</div><div class="ttdef"><b>Definition:</b> <a href="Instructions_8h_source.html#l00766">Instructions.h:766</a></div></div>
<div class="ttc" id="aclassllvm_1_1OpenMPIRBuilder_html_a0e2de2c034e3083d006b92ddf14b8bcf"><div class="ttname"><a href="classllvm_1_1OpenMPIRBuilder.html#a0e2de2c034e3083d006b92ddf14b8bcf">llvm::OpenMPIRBuilder::createAtomicWrite</a></div><div class="ttdeci">InsertPointTy createAtomicWrite(const LocationDescription &amp;Loc, AtomicOpValue &amp;X, Value *Expr, AtomicOrdering AO)</div><div class="ttdoc">Emit atomic write for : X = Expr  Only Scalar data types.</div><div class="ttdef"><b>Definition:</b> <a href="OMPIRBuilder_8cpp_source.html#l02469">OMPIRBuilder.cpp:2469</a></div></div>
<div class="ttc" id="aclassllvm_1_1ArrayRef_html_aab36927882fbfdcbb860d87fd9c30da8"><div class="ttname"><a href="classllvm_1_1ArrayRef.html#aab36927882fbfdcbb860d87fd9c30da8">llvm::ArrayRef::begin</a></div><div class="ttdeci">iterator begin() const</div><div class="ttdef"><b>Definition:</b> <a href="ArrayRef_8h_source.html#l00153">ArrayRef.h:153</a></div></div>
<div class="ttc" id="aclassllvm_1_1ConstantInt_html_afe7d477c6022fe7123b90e3b39c58e69"><div class="ttname"><a href="classllvm_1_1ConstantInt.html#afe7d477c6022fe7123b90e3b39c58e69">llvm::ConstantInt::getBool</a></div><div class="ttdeci">static ConstantInt * getBool(LLVMContext &amp;Context, bool V)</div><div class="ttdef"><b>Definition:</b> <a href="Constants_8cpp_source.html#l00863">Constants.cpp:863</a></div></div>
<div class="ttc" id="aclassllvm_1_1AtomicRMWInst_html_a461cfbbb5c7a57ab73210498923cf615a660a31179bfecd737a256372e5fd6122"><div class="ttname"><a href="classllvm_1_1AtomicRMWInst.html#a461cfbbb5c7a57ab73210498923cf615a660a31179bfecd737a256372e5fd6122">llvm::AtomicRMWInst::And</a></div><div class="ttdeci">@ And</div><div class="ttdoc">*p = old &amp; v</div><div class="ttdef"><b>Definition:</b> <a href="Instructions_8h_source.html#l00746">Instructions.h:746</a></div></div>
<div class="ttc" id="anamespacellvm_1_1MCID_html_ab357441fcd1ea1f9b0d27c12700f6023a359237c780f7c8e40645575826da8a3c"><div class="ttname"><a href="namespacellvm_1_1MCID.html#ab357441fcd1ea1f9b0d27c12700f6023a359237c780f7c8e40645575826da8a3c">llvm::MCID::Branch</a></div><div class="ttdeci">@ Branch</div><div class="ttdef"><b>Definition:</b> <a href="MCInstrDesc_8h_source.html#l00156">MCInstrDesc.h:156</a></div></div>
<div class="ttc" id="aclassllvm_1_1OpenMPIRBuilder_html_a30999e2e13909b5f129f0bae43095f3b"><div class="ttname"><a href="classllvm_1_1OpenMPIRBuilder.html#a30999e2e13909b5f129f0bae43095f3b">llvm::OpenMPIRBuilder::createCancel</a></div><div class="ttdeci">InsertPointTy createCancel(const LocationDescription &amp;Loc, Value *IfCondition, omp::Directive CanceledDirective)</div><div class="ttdoc">Generator for '#omp cancel'.</div><div class="ttdef"><b>Definition:</b> <a href="OMPIRBuilder_8cpp_source.html#l00391">OMPIRBuilder.cpp:391</a></div></div>
<div class="ttc" id="aOMPIRBuilder_8cpp_html_afe7d677770e0678840e54ebb3a9b932c"><div class="ttname"><a href="OMPIRBuilder_8cpp.html#afe7d677770e0678840e54ebb3a9b932c">OptimisticAttributes</a></div><div class="ttdeci">static cl::opt&lt; bool &gt; OptimisticAttributes(&quot;openmp-ir-builder-optimistic-attributes&quot;, cl::Hidden, cl::desc(&quot;Use optimistic attributes describing &quot; &quot;'as-if' properties of runtime calls.&quot;), cl::init(false))</div></div>
<div class="ttc" id="aclassllvm_1_1Type_html_adc01a7457de85fc52a3bb860d7e1c6a4"><div class="ttname"><a href="classllvm_1_1Type.html#adc01a7457de85fc52a3bb860d7e1c6a4">llvm::Type::getPointerTo</a></div><div class="ttdeci">PointerType * getPointerTo(unsigned AddrSpace=0) const</div><div class="ttdoc">Return a pointer to the current type.</div><div class="ttdef"><b>Definition:</b> <a href="Type_8cpp_source.html#l00738">Type.cpp:738</a></div></div>
<div class="ttc" id="aclassllvm_1_1Function_html_adf50671db83d2813e0d897ea2cfc9102"><div class="ttname"><a href="classllvm_1_1Function.html#adf50671db83d2813e0d897ea2cfc9102">llvm::Function::getFunctionType</a></div><div class="ttdeci">FunctionType * getFunctionType() const</div><div class="ttdoc">Returns the FunctionType for me.</div><div class="ttdef"><b>Definition:</b> <a href="Function_8h_source.html#l00176">Function.h:176</a></div></div>
<div class="ttc" id="aclassllvm_1_1ConstantArray_html_a0900dacdc7ad8e3ea0cc92993c7fd422"><div class="ttname"><a href="classllvm_1_1ConstantArray.html#a0900dacdc7ad8e3ea0cc92993c7fd422">llvm::ConstantArray::get</a></div><div class="ttdeci">static Constant * get(ArrayType *T, ArrayRef&lt; Constant * &gt; V)</div><div class="ttdef"><b>Definition:</b> <a href="Constants_8cpp_source.html#l01264">Constants.cpp:1264</a></div></div>
<div class="ttc" id="aclassllvm_1_1SmallVectorImpl_html_aac0ea55010b7b1a301e65a0baea057aa"><div class="ttname"><a href="classllvm_1_1SmallVectorImpl.html#aac0ea55010b7b1a301e65a0baea057aa">llvm::SmallVectorImpl::clear</a></div><div class="ttdeci">void clear()</div><div class="ttdef"><b>Definition:</b> <a href="SmallVector_8h_source.html#l00585">SmallVector.h:585</a></div></div>
<div class="ttc" id="aclassllvm_1_1CanonicalLoopInfo_html_a5ddf1dc42b9030b248b6a6ec474512dd"><div class="ttname"><a href="classllvm_1_1CanonicalLoopInfo.html#a5ddf1dc42b9030b248b6a6ec474512dd">llvm::CanonicalLoopInfo::getHeader</a></div><div class="ttdeci">BasicBlock * getHeader() const</div><div class="ttdoc">The header is the entry for each iteration.</div><div class="ttdef"><b>Definition:</b> <a href="OMPIRBuilder_8h_source.html#l01181">OMPIRBuilder.h:1181</a></div></div>
<div class="ttc" id="aREADME__P9_8txt_html_a0afe4617fad145d6ced5a18fd739cf06"><div class="ttname"><a href="README__P9_8txt.html#a0afe4617fad145d6ced5a18fd739cf06">Unordered</a></div><div class="ttdeci">QP Compare Ordered Unordered</div><div class="ttdef"><b>Definition:</b> <a href="README__P9_8txt_source.html#l00297">README_P9.txt:299</a></div></div>
<div class="ttc" id="aclassllvm_1_1OpenMPIRBuilder_html_ab50a97f63942119622c62951304580ac"><div class="ttname"><a href="classllvm_1_1OpenMPIRBuilder.html#ab50a97f63942119622c62951304580ac">llvm::OpenMPIRBuilder::getOrCreateSrcLocStr</a></div><div class="ttdeci">Constant * getOrCreateSrcLocStr(StringRef LocStr)</div><div class="ttdoc">Return the (LLVM-IR) string describing the source location LocStr.</div><div class="ttdef"><b>Definition:</b> <a href="OMPIRBuilder_8cpp_source.html#l00272">OMPIRBuilder.cpp:272</a></div></div>
<div class="ttc" id="aclassllvm_1_1CodeExtractorAnalysisCache_html"><div class="ttname"><a href="classllvm_1_1CodeExtractorAnalysisCache.html">llvm::CodeExtractorAnalysisCache</a></div><div class="ttdoc">A cache for the CodeExtractor analysis.</div><div class="ttdef"><b>Definition:</b> <a href="CodeExtractor_8h_source.html#l00046">CodeExtractor.h:46</a></div></div>
<div class="ttc" id="anamespacellvm_1_1MCID_html_ab357441fcd1ea1f9b0d27c12700f6023a2b016c207343046b2bac45e69e76dcec"><div class="ttname"><a href="namespacellvm_1_1MCID.html#ab357441fcd1ea1f9b0d27c12700f6023a2b016c207343046b2bac45e69e76dcec">llvm::MCID::Add</a></div><div class="ttdeci">@ Add</div><div class="ttdef"><b>Definition:</b> <a href="MCInstrDesc_8h_source.html#l00183">MCInstrDesc.h:183</a></div></div>
<div class="ttc" id="aclassllvm_1_1SmallString_html_af5dd7241878be5eed07736eb156bb10b"><div class="ttname"><a href="classllvm_1_1SmallString.html#af5dd7241878be5eed07736eb156bb10b">llvm::SmallString::str</a></div><div class="ttdeci">StringRef str() const</div><div class="ttdoc">Explicit conversion to StringRef.</div><div class="ttdef"><b>Definition:</b> <a href="SmallString_8h_source.html#l00259">SmallString.h:259</a></div></div>
<div class="ttc" id="aOMPIRBuilder_8cpp_html_a7a68322ba864bccb8736e42fbc915a8a"><div class="ttname"><a href="OMPIRBuilder_8cpp.html#a7a68322ba864bccb8736e42fbc915a8a">getKmpcForDynamicInitForType</a></div><div class="ttdeci">static FunctionCallee getKmpcForDynamicInitForType(Type *Ty, Module &amp;M, OpenMPIRBuilder &amp;OMPBuilder)</div><div class="ttdoc">Returns an LLVM function to call for initializing loop bounds using OpenMP dynamic scheduling dependi...</div><div class="ttdef"><b>Definition:</b> <a href="OMPIRBuilder_8cpp_source.html#l01371">OMPIRBuilder.cpp:1371</a></div></div>
<div class="ttc" id="anamespacellvm_html_aaee5189b9c4db9ad666a88abaf1ee0c4ac5d59568835d0760e318829b800ee06d"><div class="ttname"><a href="namespacellvm.html#aaee5189b9c4db9ad666a88abaf1ee0c4ac5d59568835d0760e318829b800ee06d">llvm::ClrHandlerType::Catch</a></div><div class="ttdeci">@ Catch</div></div>
<div class="ttc" id="aclassllvm_1_1OpenMPIRBuilder_html_a97cba4631943c9810c80075665526f16"><div class="ttname"><a href="classllvm_1_1OpenMPIRBuilder.html#a97cba4631943c9810c80075665526f16">llvm::OpenMPIRBuilder::createTargetDeinit</a></div><div class="ttdeci">void createTargetDeinit(const LocationDescription &amp;Loc, bool IsSPMD, bool RequiresFullRuntime)</div><div class="ttdoc">Create a runtime call for kmpc_target_deinit.</div><div class="ttdef"><b>Definition:</b> <a href="OMPIRBuilder_8cpp_source.html#l02243">OMPIRBuilder.cpp:2243</a></div></div>
<div class="ttc" id="aclassllvm_1_1MDBuilder_html"><div class="ttname"><a href="classllvm_1_1MDBuilder.html">llvm::MDBuilder</a></div><div class="ttdef"><b>Definition:</b> <a href="MDBuilder_8h_source.html#l00035">MDBuilder.h:35</a></div></div>
<div class="ttc" id="aclassllvm_1_1BasicBlock_html_a8f6f9b4a94dc0907499c03a9e1b6918b"><div class="ttname"><a href="classllvm_1_1BasicBlock.html#a8f6f9b4a94dc0907499c03a9e1b6918b">llvm::BasicBlock::back</a></div><div class="ttdeci">const Instruction &amp; back() const</div><div class="ttdef"><b>Definition:</b> <a href="BasicBlock_8h_source.html#l00310">BasicBlock.h:310</a></div></div>
<div class="ttc" id="aclassllvm_1_1OpenMPIRBuilder_html_a1af99f6f33b0db83a3e941fcb819fa29"><div class="ttname"><a href="classllvm_1_1OpenMPIRBuilder.html#a1af99f6f33b0db83a3e941fcb819fa29">llvm::OpenMPIRBuilder::initialize</a></div><div class="ttdeci">void initialize()</div><div class="ttdoc">Initialize the internal state, this will put structures types and potentially other helpers into the ...</div><div class="ttdef"><b>Definition:</b> <a href="OMPIRBuilder_8cpp_source.html#l00140">OMPIRBuilder.cpp:140</a></div></div>
<div class="ttc" id="aclassllvm_1_1BasicBlock_html_a76099f3fde625e6e75431b6afd7081ce"><div class="ttname"><a href="classllvm_1_1BasicBlock.html#a76099f3fde625e6e75431b6afd7081ce">llvm::BasicBlock::getInstList</a></div><div class="ttdeci">const InstListType &amp; getInstList() const</div><div class="ttdoc">Return the underlying instruction list container.</div><div class="ttdef"><b>Definition:</b> <a href="BasicBlock_8h_source.html#l00363">BasicBlock.h:363</a></div></div>
<div class="ttc" id="aclassllvm_1_1GlobalValue_html_aedfa75f0c85c4aa85b257f066fbea57ca04ed141708c0fd16723d212502b046ae"><div class="ttname"><a href="classllvm_1_1GlobalValue.html#aedfa75f0c85c4aa85b257f066fbea57ca04ed141708c0fd16723d212502b046ae">llvm::GlobalValue::PrivateLinkage</a></div><div class="ttdeci">@ PrivateLinkage</div><div class="ttdoc">Like Internal, but omit from symbol table.</div><div class="ttdef"><b>Definition:</b> <a href="GlobalValue_8h_source.html#l00056">GlobalValue.h:56</a></div></div>
<div class="ttc" id="aclassllvm_1_1CanonicalLoopInfo_html_a8ffbd9b1e60e2bb15da132610ff997ac"><div class="ttname"><a href="classllvm_1_1CanonicalLoopInfo.html#a8ffbd9b1e60e2bb15da132610ff997ac">llvm::CanonicalLoopInfo::getLatch</a></div><div class="ttdeci">BasicBlock * getLatch() const</div><div class="ttdoc">Reaching the latch indicates the end of the loop body code.</div><div class="ttdef"><b>Definition:</b> <a href="OMPIRBuilder_8h_source.html#l01195">OMPIRBuilder.h:1195</a></div></div>
<div class="ttc" id="aRegAllocBasic_8cpp_html_ad5d00e1d77644d95847b9bf8da12b759"><div class="ttname"><a href="RegAllocBasic_8cpp.html#ad5d00e1d77644d95847b9bf8da12b759">Allocator</a></div><div class="ttdeci">Basic Register Allocator</div><div class="ttdef"><b>Definition:</b> <a href="RegAllocBasic_8cpp_source.html#l00146">RegAllocBasic.cpp:146</a></div></div>
<div class="ttc" id="aclassllvm_1_1Type_html_ae61f17d62c8a79bc5cffa63a2f152311"><div class="ttname"><a href="classllvm_1_1Type.html#ae61f17d62c8a79bc5cffa63a2f152311">llvm::Type::getPointerElementType</a></div><div class="ttdeci">Type * getPointerElementType() const</div><div class="ttdef"><b>Definition:</b> <a href="Type_8h_source.html#l00380">Type.h:380</a></div></div>
<div class="ttc" id="aclassllvm_1_1Instruction_html_a1a7f07aaef6a3bee130bf0e0f0536802"><div class="ttname"><a href="classllvm_1_1Instruction.html#a1a7f07aaef6a3bee130bf0e0f0536802">llvm::Instruction::getParent</a></div><div class="ttdeci">const BasicBlock * getParent() const</div><div class="ttdef"><b>Definition:</b> <a href="IR_2Instruction_8h_source.html#l00094">Instruction.h:94</a></div></div>
<div class="ttc" id="anamespacellvm_html_a13c1b5a253da5da49ce33d03dc1efc07"><div class="ttname"><a href="namespacellvm.html#a13c1b5a253da5da49ce33d03dc1efc07">llvm::to_string</a></div><div class="ttdeci">std::string to_string(const T &amp;Value)</div><div class="ttdef"><b>Definition:</b> <a href="ScopedPrinter_8h_source.html#l00063">ScopedPrinter.h:63</a></div></div>
<div class="ttc" id="aclassllvm_1_1ArrayRef_html_a85ffb6531d4cda988ea81f18d4e56fb7"><div class="ttname"><a href="classllvm_1_1ArrayRef.html#a85ffb6531d4cda988ea81f18d4e56fb7">llvm::ArrayRef::size</a></div><div class="ttdeci">size_t size() const</div><div class="ttdoc">size - Get the array size.</div><div class="ttdef"><b>Definition:</b> <a href="ArrayRef_8h_source.html#l00165">ArrayRef.h:165</a></div></div>
<div class="ttc" id="aclassllvm_1_1AtomicRMWInst_html_a461cfbbb5c7a57ab73210498923cf615a08ef06068dcd583c2476568dda59b324"><div class="ttname"><a href="classllvm_1_1AtomicRMWInst.html#a461cfbbb5c7a57ab73210498923cf615a08ef06068dcd583c2476568dda59b324">llvm::AtomicRMWInst::FAdd</a></div><div class="ttdeci">@ FAdd</div><div class="ttdoc">*p = old + v</div><div class="ttdef"><b>Definition:</b> <a href="Instructions_8h_source.html#l00763">Instructions.h:763</a></div></div>
<div class="ttc" id="aclassllvm_1_1raw__svector__ostream_html"><div class="ttname"><a href="classllvm_1_1raw__svector__ostream.html">llvm::raw_svector_ostream</a></div><div class="ttdoc">A raw_ostream that writes to an SmallVector or SmallString.</div><div class="ttdef"><b>Definition:</b> <a href="raw__ostream_8h_source.html#l00656">raw_ostream.h:656</a></div></div>
<div class="ttc" id="aclassllvm_1_1OpenMPIRBuilder_html_a28153a5c4f51d07c8228ac5fb5eea266"><div class="ttname"><a href="classllvm_1_1OpenMPIRBuilder.html#a28153a5c4f51d07c8228ac5fb5eea266">llvm::OpenMPIRBuilder::emitBarrierImpl</a></div><div class="ttdeci">InsertPointTy emitBarrierImpl(const LocationDescription &amp;Loc, omp::Directive DK, bool ForceSimpleCall, bool CheckCancelFlag)</div><div class="ttdoc">Generate a barrier runtime call.</div><div class="ttdef"><b>Definition:</b> <a href="OMPIRBuilder_8cpp_source.html#l00344">OMPIRBuilder.cpp:344</a></div></div>
<div class="ttc" id="aclassllvm_1_1FunctionCallee_html"><div class="ttname"><a href="classllvm_1_1FunctionCallee.html">llvm::FunctionCallee</a></div><div class="ttdoc">A handy container for a FunctionType+Callee-pointer pair, which can be passed around as a single enti...</div><div class="ttdef"><b>Definition:</b> <a href="DerivedTypes_8h_source.html#l00164">DerivedTypes.h:164</a></div></div>
<div class="ttc" id="aclassllvm_1_1PHINode_html"><div class="ttname"><a href="classllvm_1_1PHINode.html">llvm::PHINode</a></div><div class="ttdef"><b>Definition:</b> <a href="Instructions_8h_source.html#l02597">Instructions.h:2597</a></div></div>
<div class="ttc" id="aclassllvm_1_1BasicBlock_html_afe7af0c3ec2ef1f525173acd2ea4ba60"><div class="ttname"><a href="classllvm_1_1BasicBlock.html#afe7af0c3ec2ef1f525173acd2ea4ba60">llvm::BasicBlock::removePredecessor</a></div><div class="ttdeci">void removePredecessor(BasicBlock *Pred, bool KeepOneInputPHIs=false)</div><div class="ttdoc">Update PHI nodes in this BasicBlock before removal of predecessor Pred.</div><div class="ttdef"><b>Definition:</b> <a href="BasicBlock_8cpp_source.html#l00321">BasicBlock.cpp:321</a></div></div>
<div class="ttc" id="aclassllvm_1_1Function_html_a29e0a562beb4b5d20eb0c426b363ceed"><div class="ttname"><a href="classllvm_1_1Function.html#a29e0a562beb4b5d20eb0c426b363ceed">llvm::Function::removeFromParent</a></div><div class="ttdeci">void removeFromParent()</div><div class="ttdoc">removeFromParent - This method unlinks 'this' from the containing module, but does not delete it.</div><div class="ttdef"><b>Definition:</b> <a href="Function_8cpp_source.html#l00361">Function.cpp:361</a></div></div>
<div class="ttc" id="aclassllvm_1_1SmallVectorImpl_html"><div class="ttname"><a href="classllvm_1_1SmallVectorImpl.html">llvm::SmallVectorImpl&lt; uint64_t &gt;</a></div></div>
<div class="ttc" id="aclassllvm_1_1AtomicRMWInst_html_a461cfbbb5c7a57ab73210498923cf615a497e8f347648b1b2823ee0338c95f65f"><div class="ttname"><a href="classllvm_1_1AtomicRMWInst.html#a461cfbbb5c7a57ab73210498923cf615a497e8f347648b1b2823ee0338c95f65f">llvm::AtomicRMWInst::BAD_BINOP</a></div><div class="ttdeci">@ BAD_BINOP</div><div class="ttdef"><b>Definition:</b> <a href="Instructions_8h_source.html#l00771">Instructions.h:770</a></div></div>
<div class="ttc" id="aclassllvm_1_1CodeExtractor_html_ad3a4770e725305d3529cba8c6562c85a"><div class="ttname"><a href="classllvm_1_1CodeExtractor.html#ad3a4770e725305d3529cba8c6562c85a">llvm::CodeExtractor::isEligible</a></div><div class="ttdeci">bool isEligible() const</div><div class="ttdoc">Test whether this code extractor is eligible.</div><div class="ttdef"><b>Definition:</b> <a href="CodeExtractor_8cpp_source.html#l00619">CodeExtractor.cpp:619</a></div></div>
<div class="ttc" id="aclassllvm_1_1CanonicalLoopInfo_html_a2077e6f8b41cd609c8e54e80767eb280"><div class="ttname"><a href="classllvm_1_1CanonicalLoopInfo.html#a2077e6f8b41cd609c8e54e80767eb280">llvm::CanonicalLoopInfo::getTripCount</a></div><div class="ttdeci">Value * getTripCount() const</div><div class="ttdoc">Returns the llvm::Value containing the number of loop iterations.</div><div class="ttdef"><b>Definition:</b> <a href="OMPIRBuilder_8h_source.html#l01210">OMPIRBuilder.h:1210</a></div></div>
<div class="ttc" id="aclassllvm_1_1SmallPtrSetImpl_html"><div class="ttname"><a href="classllvm_1_1SmallPtrSetImpl.html">llvm::SmallPtrSetImpl</a></div><div class="ttdoc">A templated base class for SmallPtrSet which provides the typesafe interface that is common across al...</div><div class="ttdef"><b>Definition:</b> <a href="SmallPtrSet_8h_source.html#l00343">SmallPtrSet.h:343</a></div></div>
<div class="ttc" id="aclassllvm_1_1IntegerType_html_a14f7b4f1aed38192fb6b7772eb506bdb"><div class="ttname"><a href="classllvm_1_1IntegerType.html#a14f7b4f1aed38192fb6b7772eb506bdb">llvm::IntegerType::get</a></div><div class="ttdeci">static IntegerType * get(LLVMContext &amp;C, unsigned NumBits)</div><div class="ttdoc">This static method is the primary way of constructing an IntegerType.</div><div class="ttdef"><b>Definition:</b> <a href="Type_8cpp_source.html#l00275">Type.cpp:275</a></div></div>
<div class="ttc" id="aclassllvm_1_1OpenMPIRBuilder_html_a2a4b97bb7670d306c756cdbd5ee9b560"><div class="ttname"><a href="classllvm_1_1OpenMPIRBuilder.html#a2a4b97bb7670d306c756cdbd5ee9b560">llvm::OpenMPIRBuilder::emitFlush</a></div><div class="ttdeci">void emitFlush(const LocationDescription &amp;Loc)</div><div class="ttdoc">Generate a flush runtime call.</div><div class="ttdef"><b>Definition:</b> <a href="OMPIRBuilder_8cpp_source.html#l00844">OMPIRBuilder.cpp:844</a></div></div>
<div class="ttc" id="aclassllvm_1_1CallInst_html"><div class="ttname"><a href="classllvm_1_1CallInst.html">llvm::CallInst</a></div><div class="ttdoc">This class represents a function call, abstracting a target machine's calling convention.</div><div class="ttdef"><b>Definition:</b> <a href="Instructions_8h_source.html#l01475">Instructions.h:1475</a></div></div>
<div class="ttc" id="astructllvm_1_1OpenMPIRBuilder_1_1OutlineInfo_html_a218bc49443ef1f05fc8074d872d41fcd"><div class="ttname"><a href="structllvm_1_1OpenMPIRBuilder_1_1OutlineInfo.html#a218bc49443ef1f05fc8074d872d41fcd">llvm::OpenMPIRBuilder::OutlineInfo::collectBlocks</a></div><div class="ttdeci">void collectBlocks(SmallPtrSetImpl&lt; BasicBlock * &gt; &amp;BlockSet, SmallVectorImpl&lt; BasicBlock * &gt; &amp;BlockVector)</div><div class="ttdoc">Collect all blocks in between EntryBB and ExitBB in both the given vector and set.</div><div class="ttdef"><b>Definition:</b> <a href="OMPIRBuilder_8cpp_source.html#l02723">OMPIRBuilder.cpp:2723</a></div></div>
<div class="ttc" id="astructllvm_1_1OpenMPIRBuilder_1_1MapperAllocas_html"><div class="ttname"><a href="structllvm_1_1OpenMPIRBuilder_1_1MapperAllocas.html">llvm::OpenMPIRBuilder::MapperAllocas</a></div><div class="ttdef"><b>Definition:</b> <a href="OMPIRBuilder_8h_source.html#l00639">OMPIRBuilder.h:639</a></div></div>
<div class="ttc" id="alib_2CodeGen_2README_8txt_html_a09776db24cf586ec9f1e18f3bae14099"><div class="ttname"><a href="lib_2CodeGen_2README_8txt.html#a09776db24cf586ec9f1e18f3bae14099">BB</a></div><div class="ttdeci">Common register allocation spilling lr str ldr sxth r3 ldr mla r4 can lr mov lr str ldr sxth r3 mla r4 and then merge mul and lr str ldr sxth r3 mla r4 It also increase the likelihood the store may become dead bb27 Successors according to LLVM BB</div><div class="ttdef"><b>Definition:</b> <a href="lib_2CodeGen_2README_8txt_source.html#l00039">README.txt:39</a></div></div>
<div class="ttc" id="aclassllvm_1_1UnreachableInst_html"><div class="ttname"><a href="classllvm_1_1UnreachableInst.html">llvm::UnreachableInst</a></div><div class="ttdoc">This function has undefined behavior.</div><div class="ttdef"><b>Definition:</b> <a href="Instructions_8h_source.html#l04679">Instructions.h:4679</a></div></div>
<div class="ttc" id="aclassllvm_1_1Value_html_a7e8dad1701aa6445be4a29f654b0473c"><div class="ttname"><a href="classllvm_1_1Value.html#a7e8dad1701aa6445be4a29f654b0473c">llvm::Value::replaceUsesWithIf</a></div><div class="ttdeci">void replaceUsesWithIf(Value *New, llvm::function_ref&lt; bool(Use &amp;U)&gt; ShouldReplace)</div><div class="ttdoc">Go through the uses list for this definition and make each use point to &quot;V&quot; if the callback ShouldRep...</div><div class="ttdef"><b>Definition:</b> <a href="Value_8cpp_source.html#l00528">Value.cpp:528</a></div></div>
<div class="ttc" id="aclassllvm_1_1SwitchInst_html"><div class="ttname"><a href="classllvm_1_1SwitchInst.html">llvm::SwitchInst</a></div><div class="ttdoc">Multiway switch.</div><div class="ttdef"><b>Definition:</b> <a href="Instructions_8h_source.html#l03176">Instructions.h:3176</a></div></div>
<div class="ttc" id="aclassllvm_1_1DebugLoc_html"><div class="ttname"><a href="classllvm_1_1DebugLoc.html">llvm::DebugLoc</a></div><div class="ttdoc">A debug info location.</div><div class="ttdef"><b>Definition:</b> <a href="DebugLoc_8h_source.html#l00033">DebugLoc.h:33</a></div></div>
<div class="ttc" id="anamespacellvm_1_1AMDGPU_1_1HSAMD_1_1Kernel_1_1Key_html_a1958a762261549463a280bac3274d6d5"><div class="ttname"><a href="namespacellvm_1_1AMDGPU_1_1HSAMD_1_1Kernel_1_1Key.html#a1958a762261549463a280bac3274d6d5">llvm::AMDGPU::HSAMD::Kernel::Key::Args</a></div><div class="ttdeci">constexpr char Args[]</div><div class="ttdoc">Key for Kernel::Metadata::mArgs.</div><div class="ttdef"><b>Definition:</b> <a href="AMDGPUMetadata_8h_source.html#l00389">AMDGPUMetadata.h:389</a></div></div>
<div class="ttc" id="aclassllvm_1_1AllocaInst_html"><div class="ttname"><a href="classllvm_1_1AllocaInst.html">llvm::AllocaInst</a></div><div class="ttdoc">an instruction to allocate memory on the stack</div><div class="ttdef"><b>Definition:</b> <a href="Instructions_8h_source.html#l00062">Instructions.h:62</a></div></div>
<div class="ttc" id="aclassllvm_1_1SwitchInst_html_a62abc2475d09c01d583ba24a487898fd"><div class="ttname"><a href="classllvm_1_1SwitchInst.html#a62abc2475d09c01d583ba24a487898fd">llvm::SwitchInst::addCase</a></div><div class="ttdeci">void addCase(ConstantInt *OnVal, BasicBlock *Dest)</div><div class="ttdoc">Add an entry to the switch instruction.</div><div class="ttdef"><b>Definition:</b> <a href="Instructions_8cpp_source.html#l04074">Instructions.cpp:4074</a></div></div>
<div class="ttc" id="astructllvm_1_1cl_1_1desc_html"><div class="ttname"><a href="structllvm_1_1cl_1_1desc.html">llvm::cl::desc</a></div><div class="ttdef"><b>Definition:</b> <a href="CommandLine_8h_source.html#l00414">CommandLine.h:414</a></div></div>
<div class="ttc" id="aclassllvm_1_1OpenMPIRBuilder_html_a0d9ee1231b167902dbb582232e587681"><div class="ttname"><a href="classllvm_1_1OpenMPIRBuilder.html#a0d9ee1231b167902dbb582232e587681">llvm::OpenMPIRBuilder::createSingle</a></div><div class="ttdeci">InsertPointTy createSingle(const LocationDescription &amp;Loc, BodyGenCallbackTy BodyGenCB, FinalizeCallbackTy FiniCB, llvm::Value *DidIt)</div><div class="ttdoc">Generator for '#omp single'.</div><div class="ttdef"><b>Definition:</b> <a href="OMPIRBuilder_8cpp_source.html#l01896">OMPIRBuilder.cpp:1896</a></div></div>
<div class="ttc" id="aclassllvm_1_1AtomicRMWInst_html_a461cfbbb5c7a57ab73210498923cf615abe171d96ba8de66fb30e08c00211591e"><div class="ttname"><a href="classllvm_1_1AtomicRMWInst.html#a461cfbbb5c7a57ab73210498923cf615abe171d96ba8de66fb30e08c00211591e">llvm::AtomicRMWInst::UMax</a></div><div class="ttdeci">@ UMax</div><div class="ttdoc">*p = old &gt;unsigned v ? old : v</div><div class="ttdef"><b>Definition:</b> <a href="Instructions_8h_source.html#l00758">Instructions.h:758</a></div></div>
<div class="ttc" id="aclassllvm_1_1OpenMPIRBuilder_html_a70356a38271d388e7c4b477cef0d7b2c"><div class="ttname"><a href="classllvm_1_1OpenMPIRBuilder.html#a70356a38271d388e7c4b477cef0d7b2c">llvm::OpenMPIRBuilder::createCopyinClauseBlocks</a></div><div class="ttdeci">InsertPointTy createCopyinClauseBlocks(InsertPointTy IP, Value *MasterAddr, Value *PrivateAddr, llvm::IntegerType *IntPtrTy, bool BranchtoEnd=true)</div><div class="ttdoc">Generate conditional branch and relevant BasicBlocks through which private threads copy the 'copyin' ...</div><div class="ttdef"><b>Definition:</b> <a href="OMPIRBuilder_8cpp_source.html#l02096">OMPIRBuilder.cpp:2096</a></div></div>
<div class="ttc" id="aclassllvm_1_1OpenMPIRBuilder_html_af2808c704c935cee35e9529907b59b1c"><div class="ttname"><a href="classllvm_1_1OpenMPIRBuilder.html#af2808c704c935cee35e9529907b59b1c">llvm::OpenMPIRBuilder::createCopyPrivate</a></div><div class="ttdeci">InsertPointTy createCopyPrivate(const LocationDescription &amp;Loc, llvm::Value *BufSize, llvm::Value *CpyBuf, llvm::Value *CpyFn, llvm::Value *DidIt)</div><div class="ttdoc">Generator for __kmpc_copyprivate.</div><div class="ttdef"><b>Definition:</b> <a href="OMPIRBuilder_8cpp_source.html#l01875">OMPIRBuilder.cpp:1875</a></div></div>
<div class="ttc" id="aclassllvm_1_1SetVector_html"><div class="ttname"><a href="classllvm_1_1SetVector.html">llvm::SetVector&lt; Value * &gt;</a></div></div>
<div class="ttc" id="anamespacellvm_1_1omp_html_a231ea6a9a0009e38969a20d4293119c7"><div class="ttname"><a href="namespacellvm_1_1omp.html#a231ea6a9a0009e38969a20d4293119c7">llvm::omp::OMPScheduleType</a></div><div class="ttdeci">OMPScheduleType</div><div class="ttdef"><b>Definition:</b> <a href="OMPConstants_8h_source.html#l00113">OMPConstants.h:113</a></div></div>
<div class="ttc" id="aclassllvm_1_1SmallVectorImpl_html_a499ea32ca1b8d16cedfe01d1e5b08f29"><div class="ttname"><a href="classllvm_1_1SmallVectorImpl.html#a499ea32ca1b8d16cedfe01d1e5b08f29">llvm::SmallVectorImpl::reserve</a></div><div class="ttdeci">void reserve(size_type N)</div><div class="ttdef"><b>Definition:</b> <a href="SmallVector_8h_source.html#l00624">SmallVector.h:624</a></div></div>
<div class="ttc" id="aclassllvm_1_1OpenMPIRBuilder_html_a034dc6253a2a36f78ac071a7c12d5c27"><div class="ttname"><a href="classllvm_1_1OpenMPIRBuilder.html#a034dc6253a2a36f78ac071a7c12d5c27">llvm::OpenMPIRBuilder::getOrCreateRuntimeFunction</a></div><div class="ttdeci">FunctionCallee getOrCreateRuntimeFunction(Module &amp;M, omp::RuntimeFunction FnID)</div><div class="ttdoc">Return the function declaration for the runtime function with FnID.</div><div class="ttdef"><b>Definition:</b> <a href="OMPIRBuilder_8cpp_source.html#l00075">OMPIRBuilder.cpp:75</a></div></div>
<div class="ttc" id="aBasicBlockUtils_8h_html"><div class="ttname"><a href="BasicBlockUtils_8h.html">BasicBlockUtils.h</a></div></div>
<div class="ttc" id="anamespacellvm_html_ad295cb34421c21507bc9cdefe1ba3f16"><div class="ttname"><a href="namespacellvm.html#ad295cb34421c21507bc9cdefe1ba3f16">llvm::SplitBlock</a></div><div class="ttdeci">BasicBlock * SplitBlock(BasicBlock *Old, Instruction *SplitPt, DominatorTree *DT, LoopInfo *LI=nullptr, MemorySSAUpdater *MSSAU=nullptr, const Twine &amp;BBName=&quot;&quot;, bool Before=false)</div><div class="ttdoc">Split the specified block at the specified instruction.</div><div class="ttdef"><b>Definition:</b> <a href="BasicBlockUtils_8cpp_source.html#l00814">BasicBlockUtils.cpp:814</a></div></div>
<div class="ttc" id="aValue_8h_html"><div class="ttname"><a href="Value_8h.html">Value.h</a></div></div>
<div class="ttc" id="aclassllvm_1_1CanonicalLoopInfo_html_afe4ae11bae0a25e5ddc9615ef6852aed"><div class="ttname"><a href="classllvm_1_1CanonicalLoopInfo.html#afe4ae11bae0a25e5ddc9615ef6852aed">llvm::CanonicalLoopInfo::getBody</a></div><div class="ttdeci">BasicBlock * getBody() const</div><div class="ttdoc">The body block is the single entry for a loop iteration and not controlled by CanonicalLoopInfo.</div><div class="ttdef"><b>Definition:</b> <a href="OMPIRBuilder_8h_source.html#l01190">OMPIRBuilder.h:1190</a></div></div>
<div class="ttc" id="aclassllvm_1_1AtomicCmpXchgInst_html_a7ce03ab5b2a6006ebcdfe804e4c8f1a1"><div class="ttname"><a href="classllvm_1_1AtomicCmpXchgInst.html#a7ce03ab5b2a6006ebcdfe804e4c8f1a1">llvm::AtomicCmpXchgInst::getStrongestFailureOrdering</a></div><div class="ttdeci">static AtomicOrdering getStrongestFailureOrdering(AtomicOrdering SuccessOrdering)</div><div class="ttdoc">Returns the strongest permitted ordering on failure, given the desired ordering on success.</div><div class="ttdef"><b>Definition:</b> <a href="Instructions_8h_source.html#l00674">Instructions.h:674</a></div></div>
<div class="ttc" id="aclassllvm_1_1Value_html"><div class="ttname"><a href="classllvm_1_1Value.html">llvm::Value</a></div><div class="ttdoc">LLVM Value Representation.</div><div class="ttdef"><b>Definition:</b> <a href="Value_8h_source.html#l00075">Value.h:75</a></div></div>
<div class="ttc" id="aclassllvm_1_1AtomicCmpXchgInst_html"><div class="ttname"><a href="classllvm_1_1AtomicCmpXchgInst.html">llvm::AtomicCmpXchgInst</a></div><div class="ttdoc">An instruction that atomically checks whether a specified value is in a memory location,...</div><div class="ttdef"><b>Definition:</b> <a href="Instructions_8h_source.html#l00521">Instructions.h:521</a></div></div>
<div class="ttc" id="aOMPIRBuilder_8cpp_html_ac04904b32ea7f45e108b8752b1a940e7"><div class="ttname"><a href="OMPIRBuilder_8cpp.html#ac04904b32ea7f45e108b8752b1a940e7">getKmpcForStaticInitForType</a></div><div class="ttdeci">static FunctionCallee getKmpcForStaticInitForType(Type *Ty, Module &amp;M, OpenMPIRBuilder &amp;OMPBuilder)</div><div class="ttdef"><b>Definition:</b> <a href="OMPIRBuilder_8cpp_source.html#l01252">OMPIRBuilder.cpp:1252</a></div></div>
<div class="ttc" id="aclassllvm_1_1Directive_html"><div class="ttname"><a href="classllvm_1_1Directive.html">llvm::Directive</a></div><div class="ttdef"><b>Definition:</b> <a href="DirectiveEmitter_8h_source.html#l00100">DirectiveEmitter.h:100</a></div></div>
<div class="ttc" id="aclassllvm_1_1ArrayRef_html_a7ca5197533a9c1fb8a2bd30587fcec6b"><div class="ttname"><a href="classllvm_1_1ArrayRef.html#a7ca5197533a9c1fb8a2bd30587fcec6b">llvm::ArrayRef::end</a></div><div class="ttdeci">iterator end() const</div><div class="ttdef"><b>Definition:</b> <a href="ArrayRef_8h_source.html#l00154">ArrayRef.h:154</a></div></div>
<div class="ttc" id="aclassllvm_1_1Instruction_html_af67d1f3a518964d80a109bb3d9d5cf1e"><div class="ttname"><a href="classllvm_1_1Instruction.html#af67d1f3a518964d80a109bb3d9d5cf1e">llvm::Instruction::moveBefore</a></div><div class="ttdeci">void moveBefore(Instruction *MovePos)</div><div class="ttdoc">Unlink this instruction from its current basic block and insert it into the basic block that MovePos ...</div><div class="ttdef"><b>Definition:</b> <a href="IR_2Instruction_8cpp_source.html#l00097">Instruction.cpp:97</a></div></div>
<div class="ttc" id="aclassllvm_1_1DIFile_html"><div class="ttname"><a href="classllvm_1_1DIFile.html">llvm::DIFile</a></div><div class="ttdoc">File.</div><div class="ttdef"><b>Definition:</b> <a href="DebugInfoMetadata_8h_source.html#l00530">DebugInfoMetadata.h:530</a></div></div>
<div class="ttc" id="aclassllvm_1_1FunctionType_html"><div class="ttname"><a href="classllvm_1_1FunctionType.html">llvm::FunctionType</a></div><div class="ttdoc">Class to represent function types.</div><div class="ttdef"><b>Definition:</b> <a href="DerivedTypes_8h_source.html#l00102">DerivedTypes.h:102</a></div></div>
<div class="ttc" id="aclassllvm_1_1Use_html"><div class="ttname"><a href="classllvm_1_1Use.html">llvm::Use</a></div><div class="ttdoc">A Use represents the edge between a Value definition and its users.</div><div class="ttdef"><b>Definition:</b> <a href="Use_8h_source.html#l00044">Use.h:44</a></div></div>
<div class="ttc" id="aclassllvm_1_1SmallVectorImpl_html_a396fcfee6914c76974b73c3d203da6a5"><div class="ttname"><a href="classllvm_1_1SmallVectorImpl.html#a396fcfee6914c76974b73c3d203da6a5">llvm::SmallVectorImpl::emplace_back</a></div><div class="ttdeci">reference emplace_back(ArgTypes &amp;&amp;... Args)</div><div class="ttdef"><b>Definition:</b> <a href="SmallVector_8h_source.html#l00908">SmallVector.h:908</a></div></div>
<div class="ttc" id="aclassllvm_1_1SmallPtrSetImpl_html_a6bc6fb89fe2e91c25559a8631f56e27e"><div class="ttname"><a href="classllvm_1_1SmallPtrSetImpl.html#a6bc6fb89fe2e91c25559a8631f56e27e">llvm::SmallPtrSetImpl::insert</a></div><div class="ttdeci">std::pair&lt; iterator, bool &gt; insert(PtrType Ptr)</div><div class="ttdoc">Inserts Ptr if and only if there is no element in the container equal to Ptr.</div><div class="ttdef"><b>Definition:</b> <a href="SmallPtrSet_8h_source.html#l00364">SmallPtrSet.h:364</a></div></div>
<div class="ttc" id="astructllvm_1_1OpenMPIRBuilder_1_1LocationDescription_html_aa15e9d88f98f6d7a0898e6aff4753040"><div class="ttname"><a href="structllvm_1_1OpenMPIRBuilder_1_1LocationDescription.html#aa15e9d88f98f6d7a0898e6aff4753040">llvm::OpenMPIRBuilder::LocationDescription::IP</a></div><div class="ttdeci">InsertPointTy IP</div><div class="ttdef"><b>Definition:</b> <a href="OMPIRBuilder_8h_source.html#l00157">OMPIRBuilder.h:157</a></div></div>
<div class="ttc" id="aclassllvm_1_1AtomicRMWInst_html_a461cfbbb5c7a57ab73210498923cf615aa1184a7e35e94d162a2d40f2b11beeb2"><div class="ttname"><a href="classllvm_1_1AtomicRMWInst.html#a461cfbbb5c7a57ab73210498923cf615aa1184a7e35e94d162a2d40f2b11beeb2">llvm::AtomicRMWInst::Max</a></div><div class="ttdeci">@ Max</div><div class="ttdoc">*p = old &gt;signed v ? old : v</div><div class="ttdef"><b>Definition:</b> <a href="Instructions_8h_source.html#l00754">Instructions.h:754</a></div></div>
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated on Tue Feb 8 2022 04:36:47 for LLVM by&#160;<a href="http://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.8.20
</small></address>
</body>
</html>
