<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.20"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>LLVM: lib/CodeGen/BasicBlockSections.cpp Source File</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<script type="text/x-mathjax-config">
  MathJax.Hub.Config({
    extensions: ["tex2jax.js"],
    jax: ["input/TeX","output/HTML-CSS"],
});
</script>
<script type="text/javascript" async="async" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.7/MathJax.js/MathJax.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">LLVM
   &#160;<span id="projectnumber">13.0.1</span>
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.20 -->
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',false,false,'search.php','Search');
});
/* @license-end */</script>
<div id="main-nav"></div>
<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="dir_97aefd0d527b934f1d99a682da8fe6a9.html">lib</a></li><li class="navelem"><a class="el" href="dir_1e8ad0574bd6e387992681ee57691a07.html">CodeGen</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="headertitle">
<div class="title">BasicBlockSections.cpp</div>  </div>
</div><!--header-->
<div class="contents">
<a href="BasicBlockSections_8cpp.html">Go to the documentation of this file.</a><div class="fragment"><div class="line"><a name="l00001"></a><span class="lineno">    1</span>&#160;<span class="comment">//===-- BasicBlockSections.cpp ---=========--------------------------------===//</span></div>
<div class="line"><a name="l00002"></a><span class="lineno">    2</span>&#160;<span class="comment">//</span></div>
<div class="line"><a name="l00003"></a><span class="lineno">    3</span>&#160;<span class="comment">// Part of the LLVM Project, under the Apache License v2.0 with LLVM Exceptions.</span></div>
<div class="line"><a name="l00004"></a><span class="lineno">    4</span>&#160;<span class="comment">// See https://llvm.org/LICENSE.txt for license information.</span></div>
<div class="line"><a name="l00005"></a><span class="lineno">    5</span>&#160;<span class="comment">// SPDX-License-Identifier: Apache-2.0 WITH LLVM-exception</span></div>
<div class="line"><a name="l00006"></a><span class="lineno">    6</span>&#160;<span class="comment">//</span></div>
<div class="line"><a name="l00007"></a><span class="lineno">    7</span>&#160;<span class="comment">//===----------------------------------------------------------------------===//</span></div>
<div class="line"><a name="l00008"></a><span class="lineno">    8</span>&#160;<span class="comment">//</span></div>
<div class="line"><a name="l00009"></a><span class="lineno">    9</span>&#160;<span class="comment">// BasicBlockSections implementation.</span></div>
<div class="line"><a name="l00010"></a><span class="lineno">   10</span>&#160;<span class="comment">//</span></div>
<div class="line"><a name="l00011"></a><span class="lineno">   11</span>&#160;<span class="comment">// The purpose of this pass is to assign sections to basic blocks when</span></div>
<div class="line"><a name="l00012"></a><span class="lineno">   12</span>&#160;<span class="comment">// -fbasic-block-sections= option is used. Further, with profile information</span></div>
<div class="line"><a name="l00013"></a><span class="lineno">   13</span>&#160;<span class="comment">// only the subset of basic blocks with profiles are placed in separate sections</span></div>
<div class="line"><a name="l00014"></a><span class="lineno">   14</span>&#160;<span class="comment">// and the rest are grouped in a cold section. The exception handling blocks are</span></div>
<div class="line"><a name="l00015"></a><span class="lineno">   15</span>&#160;<span class="comment">// treated specially to ensure they are all in one seciton.</span></div>
<div class="line"><a name="l00016"></a><span class="lineno">   16</span>&#160;<span class="comment">//</span></div>
<div class="line"><a name="l00017"></a><span class="lineno">   17</span>&#160;<span class="comment">// Basic Block Sections</span></div>
<div class="line"><a name="l00018"></a><span class="lineno">   18</span>&#160;<span class="comment">// ====================</span></div>
<div class="line"><a name="l00019"></a><span class="lineno">   19</span>&#160;<span class="comment">//</span></div>
<div class="line"><a name="l00020"></a><span class="lineno">   20</span>&#160;<span class="comment">// With option, -fbasic-block-sections=list, every function may be split into</span></div>
<div class="line"><a name="l00021"></a><span class="lineno">   21</span>&#160;<span class="comment">// clusters of basic blocks. Every cluster will be emitted into a separate</span></div>
<div class="line"><a name="l00022"></a><span class="lineno">   22</span>&#160;<span class="comment">// section with its basic blocks sequenced in the given order. To get the</span></div>
<div class="line"><a name="l00023"></a><span class="lineno">   23</span>&#160;<span class="comment">// optimized performance, the clusters must form an optimal BB layout for the</span></div>
<div class="line"><a name="l00024"></a><span class="lineno">   24</span>&#160;<span class="comment">// function. Every cluster&#39;s section is labeled with a symbol to allow the</span></div>
<div class="line"><a name="l00025"></a><span class="lineno">   25</span>&#160;<span class="comment">// linker to reorder the sections in any arbitrary sequence. A global order of</span></div>
<div class="line"><a name="l00026"></a><span class="lineno">   26</span>&#160;<span class="comment">// these sections would encapsulate the function layout.</span></div>
<div class="line"><a name="l00027"></a><span class="lineno">   27</span>&#160;<span class="comment">//</span></div>
<div class="line"><a name="l00028"></a><span class="lineno">   28</span>&#160;<span class="comment">// There are a couple of challenges to be addressed:</span></div>
<div class="line"><a name="l00029"></a><span class="lineno">   29</span>&#160;<span class="comment">//</span></div>
<div class="line"><a name="l00030"></a><span class="lineno">   30</span>&#160;<span class="comment">// 1. The last basic block of every cluster should not have any implicit</span></div>
<div class="line"><a name="l00031"></a><span class="lineno">   31</span>&#160;<span class="comment">//    fallthrough to its next basic block, as it can be reordered by the linker.</span></div>
<div class="line"><a name="l00032"></a><span class="lineno">   32</span>&#160;<span class="comment">//    The compiler should make these fallthroughs explicit by adding</span></div>
<div class="line"><a name="l00033"></a><span class="lineno">   33</span>&#160;<span class="comment">//    unconditional jumps..</span></div>
<div class="line"><a name="l00034"></a><span class="lineno">   34</span>&#160;<span class="comment">//</span></div>
<div class="line"><a name="l00035"></a><span class="lineno">   35</span>&#160;<span class="comment">// 2. All inter-cluster branch targets would now need to be resolved by the</span></div>
<div class="line"><a name="l00036"></a><span class="lineno">   36</span>&#160;<span class="comment">//    linker as they cannot be calculated during compile time. This is done</span></div>
<div class="line"><a name="l00037"></a><span class="lineno">   37</span>&#160;<span class="comment">//    using static relocations. Further, the compiler tries to use short branch</span></div>
<div class="line"><a name="l00038"></a><span class="lineno">   38</span>&#160;<span class="comment">//    instructions on some ISAs for small branch offsets. This is not possible</span></div>
<div class="line"><a name="l00039"></a><span class="lineno">   39</span>&#160;<span class="comment">//    for inter-cluster branches as the offset is not determined at compile</span></div>
<div class="line"><a name="l00040"></a><span class="lineno">   40</span>&#160;<span class="comment">//    time, and therefore, long branch instructions have to be used for those.</span></div>
<div class="line"><a name="l00041"></a><span class="lineno">   41</span>&#160;<span class="comment">//</span></div>
<div class="line"><a name="l00042"></a><span class="lineno">   42</span>&#160;<span class="comment">// 3. Debug Information (DebugInfo) and Call Frame Information (CFI) emission</span></div>
<div class="line"><a name="l00043"></a><span class="lineno">   43</span>&#160;<span class="comment">//    needs special handling with basic block sections. DebugInfo needs to be</span></div>
<div class="line"><a name="l00044"></a><span class="lineno">   44</span>&#160;<span class="comment">//    emitted with more relocations as basic block sections can break a</span></div>
<div class="line"><a name="l00045"></a><span class="lineno">   45</span>&#160;<span class="comment">//    function into potentially several disjoint pieces, and CFI needs to be</span></div>
<div class="line"><a name="l00046"></a><span class="lineno">   46</span>&#160;<span class="comment">//    emitted per cluster. This also bloats the object file and binary sizes.</span></div>
<div class="line"><a name="l00047"></a><span class="lineno">   47</span>&#160;<span class="comment">//</span></div>
<div class="line"><a name="l00048"></a><span class="lineno">   48</span>&#160;<span class="comment">// Basic Block Labels</span></div>
<div class="line"><a name="l00049"></a><span class="lineno">   49</span>&#160;<span class="comment">// ==================</span></div>
<div class="line"><a name="l00050"></a><span class="lineno">   50</span>&#160;<span class="comment">//</span></div>
<div class="line"><a name="l00051"></a><span class="lineno">   51</span>&#160;<span class="comment">// With -fbasic-block-sections=labels, we emit the offsets of BB addresses of</span></div>
<div class="line"><a name="l00052"></a><span class="lineno">   52</span>&#160;<span class="comment">// every function into the .llvm_bb_addr_map section. Along with the function</span></div>
<div class="line"><a name="l00053"></a><span class="lineno">   53</span>&#160;<span class="comment">// symbols, this allows for mapping of virtual addresses in PMU profiles back to</span></div>
<div class="line"><a name="l00054"></a><span class="lineno">   54</span>&#160;<span class="comment">// the corresponding basic blocks. This logic is implemented in AsmPrinter. This</span></div>
<div class="line"><a name="l00055"></a><span class="lineno">   55</span>&#160;<span class="comment">// pass only assigns the BBSectionType of every function to ``labels``.</span></div>
<div class="line"><a name="l00056"></a><span class="lineno">   56</span>&#160;<span class="comment">//</span></div>
<div class="line"><a name="l00057"></a><span class="lineno">   57</span>&#160;<span class="comment">//===----------------------------------------------------------------------===//</span></div>
<div class="line"><a name="l00058"></a><span class="lineno">   58</span>&#160; </div>
<div class="line"><a name="l00059"></a><span class="lineno">   59</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="Optional_8h.html">llvm/ADT/Optional.h</a>&quot;</span></div>
<div class="line"><a name="l00060"></a><span class="lineno">   60</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="SmallSet_8h.html">llvm/ADT/SmallSet.h</a>&quot;</span></div>
<div class="line"><a name="l00061"></a><span class="lineno">   61</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="SmallVector_8h.html">llvm/ADT/SmallVector.h</a>&quot;</span></div>
<div class="line"><a name="l00062"></a><span class="lineno">   62</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="StringMap_8h.html">llvm/ADT/StringMap.h</a>&quot;</span></div>
<div class="line"><a name="l00063"></a><span class="lineno">   63</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="StringRef_8h.html">llvm/ADT/StringRef.h</a>&quot;</span></div>
<div class="line"><a name="l00064"></a><span class="lineno">   64</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="BasicBlockSectionUtils_8h.html">llvm/CodeGen/BasicBlockSectionUtils.h</a>&quot;</span></div>
<div class="line"><a name="l00065"></a><span class="lineno">   65</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="MachineFunction_8h.html">llvm/CodeGen/MachineFunction.h</a>&quot;</span></div>
<div class="line"><a name="l00066"></a><span class="lineno">   66</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="MachineFunctionPass_8h.html">llvm/CodeGen/MachineFunctionPass.h</a>&quot;</span></div>
<div class="line"><a name="l00067"></a><span class="lineno">   67</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="MachineModuleInfo_8h.html">llvm/CodeGen/MachineModuleInfo.h</a>&quot;</span></div>
<div class="line"><a name="l00068"></a><span class="lineno">   68</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="CodeGen_2Passes_8h.html">llvm/CodeGen/Passes.h</a>&quot;</span></div>
<div class="line"><a name="l00069"></a><span class="lineno">   69</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="TargetInstrInfo_8h.html">llvm/CodeGen/TargetInstrInfo.h</a>&quot;</span></div>
<div class="line"><a name="l00070"></a><span class="lineno">   70</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="InitializePasses_8h.html">llvm/InitializePasses.h</a>&quot;</span></div>
<div class="line"><a name="l00071"></a><span class="lineno">   71</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="llvm_2Support_2Error_8h.html">llvm/Support/Error.h</a>&quot;</span></div>
<div class="line"><a name="l00072"></a><span class="lineno">   72</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="LineIterator_8h.html">llvm/Support/LineIterator.h</a>&quot;</span></div>
<div class="line"><a name="l00073"></a><span class="lineno">   73</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="MemoryBuffer_8h.html">llvm/Support/MemoryBuffer.h</a>&quot;</span></div>
<div class="line"><a name="l00074"></a><span class="lineno">   74</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="llvm_2Target_2TargetMachine_8h.html">llvm/Target/TargetMachine.h</a>&quot;</span></div>
<div class="line"><a name="l00075"></a><span class="lineno">   75</span>&#160; </div>
<div class="line"><a name="l00076"></a><span class="lineno">   76</span>&#160;<span class="keyword">using</span> <a class="code" href="classllvm_1_1SmallSet.html">llvm::SmallSet</a>;</div>
<div class="line"><a name="l00077"></a><span class="lineno">   77</span>&#160;<span class="keyword">using</span> <a class="code" href="namespacellvm.html#a8fc529c79977cdd01e187986f960a07f">llvm::SmallVector</a>;</div>
<div class="line"><a name="l00078"></a><span class="lineno">   78</span>&#160;<span class="keyword">using</span> <a class="code" href="classllvm_1_1StringMap.html">llvm::StringMap</a>;</div>
<div class="line"><a name="l00079"></a><span class="lineno">   79</span>&#160;<span class="keyword">using</span> <a class="code" href="classllvm_1_1StringRef.html">llvm::StringRef</a>;</div>
<div class="line"><a name="l00080"></a><span class="lineno">   80</span>&#160;<span class="keyword">using namespace </span><a class="code" href="namespacellvm.html">llvm</a>;</div>
<div class="line"><a name="l00081"></a><span class="lineno">   81</span>&#160; </div>
<div class="line"><a name="l00082"></a><span class="lineno">   82</span>&#160;<span class="comment">// Placing the cold clusters in a separate section mitigates against poor</span></div>
<div class="line"><a name="l00083"></a><span class="lineno">   83</span>&#160;<span class="comment">// profiles and allows optimizations such as hugepage mapping to be applied at a</span></div>
<div class="line"><a name="l00084"></a><span class="lineno">   84</span>&#160;<span class="comment">// section granularity. Defaults to &quot;.text.split.&quot; which is recognized by lld</span></div>
<div class="line"><a name="l00085"></a><span class="lineno">   85</span>&#160;<span class="comment">// via the `-z keep-text-section-prefix` flag.</span></div>
<div class="line"><a name="l00086"></a><span class="lineno">   86</span>&#160;<a class="code" href="classllvm_1_1cl_1_1opt.html">cl::opt&lt;std::string&gt;</a> <a class="code" href="namespacellvm.html#ada47e93839622848d23e6495c448161f">llvm::BBSectionsColdTextPrefix</a>(</div>
<div class="line"><a name="l00087"></a><span class="lineno">   87</span>&#160;    <span class="stringliteral">&quot;bbsections-cold-text-prefix&quot;</span>,</div>
<div class="line"><a name="l00088"></a><span class="lineno">   88</span>&#160;    <a class="code" href="structllvm_1_1cl_1_1desc.html">cl::desc</a>(<span class="stringliteral">&quot;The text prefix to use for cold basic block clusters&quot;</span>),</div>
<div class="line"><a name="l00089"></a><span class="lineno">   89</span>&#160;    <a class="code" href="namespacellvm_1_1cl.html#a10a041239ae1870cfcc064bfaa79fb65">cl::init</a>(<span class="stringliteral">&quot;.text.split.&quot;</span>), <a class="code" href="namespacellvm_1_1cl.html#a68075925a54790e71ca790e1d4f21a40a263ac008d8d31f13ce460395fc4cf7e6">cl::Hidden</a>);</div>
<div class="line"><a name="l00090"></a><span class="lineno">   90</span>&#160; </div>
<div class="line"><a name="l00091"></a><span class="lineno"><a class="line" href="BasicBlockSections_8cpp.html#a98a48f24b040649ac9f8d80695047c38">   91</a></span>&#160;<a class="code" href="classllvm_1_1cl_1_1opt.html">cl::opt&lt;bool&gt;</a> <a class="code" href="BasicBlockSections_8cpp.html#a98a48f24b040649ac9f8d80695047c38">BBSectionsDetectSourceDrift</a>(</div>
<div class="line"><a name="l00092"></a><span class="lineno">   92</span>&#160;    <span class="stringliteral">&quot;bbsections-detect-source-drift&quot;</span>,</div>
<div class="line"><a name="l00093"></a><span class="lineno">   93</span>&#160;    <a class="code" href="structllvm_1_1cl_1_1desc.html">cl::desc</a>(<span class="stringliteral">&quot;This checks if there is a fdo instr. profile hash &quot;</span></div>
<div class="line"><a name="l00094"></a><span class="lineno">   94</span>&#160;             <span class="stringliteral">&quot;mismatch for this function&quot;</span>),</div>
<div class="line"><a name="l00095"></a><span class="lineno">   95</span>&#160;    <a class="code" href="namespacellvm_1_1cl.html#a10a041239ae1870cfcc064bfaa79fb65">cl::init</a>(<span class="keyword">true</span>), <a class="code" href="namespacellvm_1_1cl.html#a68075925a54790e71ca790e1d4f21a40a263ac008d8d31f13ce460395fc4cf7e6">cl::Hidden</a>);</div>
<div class="line"><a name="l00096"></a><span class="lineno">   96</span>&#160; </div>
<div class="line"><a name="l00097"></a><span class="lineno">   97</span>&#160;<span class="keyword">namespace </span>{</div>
<div class="line"><a name="l00098"></a><span class="lineno">   98</span>&#160; </div>
<div class="line"><a name="l00099"></a><span class="lineno">   99</span>&#160;<span class="comment">// This struct represents the cluster information for a machine basic block.</span></div>
<div class="line"><a name="l00100"></a><span class="lineno">  100</span>&#160;<span class="keyword">struct </span>BBClusterInfo {</div>
<div class="line"><a name="l00101"></a><span class="lineno">  101</span>&#160;  <span class="comment">// MachineBasicBlock ID.</span></div>
<div class="line"><a name="l00102"></a><span class="lineno">  102</span>&#160;  <span class="keywordtype">unsigned</span> MBBNumber;</div>
<div class="line"><a name="l00103"></a><span class="lineno">  103</span>&#160;  <span class="comment">// Cluster ID this basic block belongs to.</span></div>
<div class="line"><a name="l00104"></a><span class="lineno">  104</span>&#160;  <span class="keywordtype">unsigned</span> ClusterID;</div>
<div class="line"><a name="l00105"></a><span class="lineno">  105</span>&#160;  <span class="comment">// Position of basic block within the cluster.</span></div>
<div class="line"><a name="l00106"></a><span class="lineno">  106</span>&#160;  <span class="keywordtype">unsigned</span> PositionInCluster;</div>
<div class="line"><a name="l00107"></a><span class="lineno">  107</span>&#160;};</div>
<div class="line"><a name="l00108"></a><span class="lineno">  108</span>&#160; </div>
<div class="line"><a name="l00109"></a><span class="lineno">  109</span>&#160;<span class="keyword">using</span> ProgramBBClusterInfoMapTy = <a class="code" href="classllvm_1_1StringMap.html">StringMap&lt;SmallVector&lt;BBClusterInfo, 4&gt;</a>&gt;;</div>
<div class="line"><a name="l00110"></a><span class="lineno">  110</span>&#160; </div>
<div class="line"><a name="l00111"></a><span class="lineno">  111</span>&#160;<span class="keyword">class </span>BasicBlockSections : <span class="keyword">public</span> <a class="code" href="classllvm_1_1MachineFunctionPass.html">MachineFunctionPass</a> {</div>
<div class="line"><a name="l00112"></a><span class="lineno">  112</span>&#160;<span class="keyword">public</span>:</div>
<div class="line"><a name="l00113"></a><span class="lineno">  113</span>&#160;  <span class="keyword">static</span> <span class="keywordtype">char</span> <a class="code" href="namespacellvm_1_1Intrinsic.html#a80add6b3b1cdaec560907995127adc16">ID</a>;</div>
<div class="line"><a name="l00114"></a><span class="lineno">  114</span>&#160; </div>
<div class="line"><a name="l00115"></a><span class="lineno">  115</span>&#160;  <span class="comment">// This contains the basic-block-sections profile.</span></div>
<div class="line"><a name="l00116"></a><span class="lineno">  116</span>&#160;  <span class="keyword">const</span> <a class="code" href="classllvm_1_1MemoryBuffer.html">MemoryBuffer</a> *MBuf = <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l00117"></a><span class="lineno">  117</span>&#160; </div>
<div class="line"><a name="l00118"></a><span class="lineno">  118</span>&#160;  <span class="comment">// This encapsulates the BB cluster information for the whole program.</span></div>
<div class="line"><a name="l00119"></a><span class="lineno">  119</span>&#160;  <span class="comment">//</span></div>
<div class="line"><a name="l00120"></a><span class="lineno">  120</span>&#160;  <span class="comment">// For every function name, it contains the cluster information for (all or</span></div>
<div class="line"><a name="l00121"></a><span class="lineno">  121</span>&#160;  <span class="comment">// some of) its basic blocks. The cluster information for every basic block</span></div>
<div class="line"><a name="l00122"></a><span class="lineno">  122</span>&#160;  <span class="comment">// includes its cluster ID along with the position of the basic block in that</span></div>
<div class="line"><a name="l00123"></a><span class="lineno">  123</span>&#160;  <span class="comment">// cluster.</span></div>
<div class="line"><a name="l00124"></a><span class="lineno">  124</span>&#160;  ProgramBBClusterInfoMapTy ProgramBBClusterInfo;</div>
<div class="line"><a name="l00125"></a><span class="lineno">  125</span>&#160; </div>
<div class="line"><a name="l00126"></a><span class="lineno">  126</span>&#160;  <span class="comment">// Some functions have alias names. We use this map to find the main alias</span></div>
<div class="line"><a name="l00127"></a><span class="lineno">  127</span>&#160;  <span class="comment">// name for which we have mapping in ProgramBBClusterInfo.</span></div>
<div class="line"><a name="l00128"></a><span class="lineno">  128</span>&#160;  <a class="code" href="classllvm_1_1StringMap.html">StringMap&lt;StringRef&gt;</a> FuncAliasMap;</div>
<div class="line"><a name="l00129"></a><span class="lineno">  129</span>&#160; </div>
<div class="line"><a name="l00130"></a><span class="lineno">  130</span>&#160;  BasicBlockSections(<span class="keyword">const</span> <a class="code" href="classllvm_1_1MemoryBuffer.html">MemoryBuffer</a> *Buf)</div>
<div class="line"><a name="l00131"></a><span class="lineno">  131</span>&#160;      : <a class="code" href="classllvm_1_1MachineFunctionPass.html">MachineFunctionPass</a>(<a class="code" href="namespacellvm_1_1Intrinsic.html#a80add6b3b1cdaec560907995127adc16">ID</a>), MBuf(Buf) {</div>
<div class="line"><a name="l00132"></a><span class="lineno">  132</span>&#160;    <a class="code" href="namespacellvm.html#aa0d2314a668f0ec788a393f088eb479d">initializeBasicBlockSectionsPass</a>(*<a class="code" href="classllvm_1_1PassRegistry.html#a05a729900b76c89e808c6c3094921b2f">PassRegistry::getPassRegistry</a>());</div>
<div class="line"><a name="l00133"></a><span class="lineno">  133</span>&#160;  };</div>
<div class="line"><a name="l00134"></a><span class="lineno">  134</span>&#160; </div>
<div class="line"><a name="l00135"></a><span class="lineno">  135</span>&#160;  BasicBlockSections() : <a class="code" href="classllvm_1_1MachineFunctionPass.html">MachineFunctionPass</a>(<a class="code" href="namespacellvm_1_1Intrinsic.html#a80add6b3b1cdaec560907995127adc16">ID</a>) {</div>
<div class="line"><a name="l00136"></a><span class="lineno">  136</span>&#160;    <a class="code" href="namespacellvm.html#aa0d2314a668f0ec788a393f088eb479d">initializeBasicBlockSectionsPass</a>(*<a class="code" href="classllvm_1_1PassRegistry.html#a05a729900b76c89e808c6c3094921b2f">PassRegistry::getPassRegistry</a>());</div>
<div class="line"><a name="l00137"></a><span class="lineno">  137</span>&#160;  }</div>
<div class="line"><a name="l00138"></a><span class="lineno">  138</span>&#160; </div>
<div class="line"><a name="l00139"></a><span class="lineno">  139</span>&#160;  <a class="code" href="classllvm_1_1StringRef.html">StringRef</a> getPassName()<span class="keyword"> const override </span>{</div>
<div class="line"><a name="l00140"></a><span class="lineno">  140</span>&#160;    <span class="keywordflow">return</span> <span class="stringliteral">&quot;Basic Block Sections Analysis&quot;</span>;</div>
<div class="line"><a name="l00141"></a><span class="lineno">  141</span>&#160;  }</div>
<div class="line"><a name="l00142"></a><span class="lineno">  142</span>&#160; </div>
<div class="line"><a name="l00143"></a><span class="lineno">  143</span>&#160;  <span class="keywordtype">void</span> getAnalysisUsage(<a class="code" href="classllvm_1_1AnalysisUsage.html">AnalysisUsage</a> &amp;AU) <span class="keyword">const override</span>;</div>
<div class="line"><a name="l00144"></a><span class="lineno">  144</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l00145"></a><span class="lineno">  145</span>&#160;<span class="comment">  /// Read profiles of basic blocks if available here.</span></div>
<div class="line"><a name="l00146"></a><span class="lineno">  146</span>&#160;<span class="comment"></span>  <span class="keywordtype">bool</span> doInitialization(<a class="code" href="classllvm_1_1Module.html">Module</a> &amp;M) <span class="keyword">override</span>;</div>
<div class="line"><a name="l00147"></a><span class="lineno">  147</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l00148"></a><span class="lineno">  148</span>&#160;<span class="comment">  /// Identify basic blocks that need separate sections and prepare to emit them</span></div>
<div class="line"><a name="l00149"></a><span class="lineno">  149</span>&#160;<span class="comment">  /// accordingly.</span></div>
<div class="line"><a name="l00150"></a><span class="lineno">  150</span>&#160;<span class="comment"></span>  <span class="keywordtype">bool</span> runOnMachineFunction(<a class="code" href="classllvm_1_1MachineFunction.html">MachineFunction</a> &amp;MF) <span class="keyword">override</span>;</div>
<div class="line"><a name="l00151"></a><span class="lineno">  151</span>&#160;};</div>
<div class="line"><a name="l00152"></a><span class="lineno">  152</span>&#160; </div>
<div class="line"><a name="l00153"></a><span class="lineno">  153</span>&#160;} <span class="comment">// end anonymous namespace</span></div>
<div class="line"><a name="l00154"></a><span class="lineno">  154</span>&#160; </div>
<div class="line"><a name="l00155"></a><span class="lineno">  155</span>&#160;<span class="keywordtype">char</span> <a class="code" href="namespacellvm_1_1Intrinsic.html#a80add6b3b1cdaec560907995127adc16">BasicBlockSections::ID</a> = 0;</div>
<div class="line"><a name="l00156"></a><span class="lineno"><a class="line" href="BasicBlockSections_8cpp.html#a04f99531130ada5826ce2b96ec79d8d7">  156</a></span>&#160;<a class="code" href="BasicBlockSections_8cpp.html#a04f99531130ada5826ce2b96ec79d8d7">INITIALIZE_PASS</a>(BasicBlockSections, <span class="stringliteral">&quot;bbsections-prepare&quot;</span>,</div>
<div class="line"><a name="l00157"></a><span class="lineno">  157</span>&#160;                <span class="stringliteral">&quot;Prepares for basic block sections, by splitting functions &quot;</span></div>
<div class="line"><a name="l00158"></a><span class="lineno">  158</span>&#160;                <span class="stringliteral">&quot;into clusters of basic blocks.&quot;</span>,</div>
<div class="line"><a name="l00159"></a><span class="lineno">  159</span>&#160;                <span class="keyword">false</span>, <span class="keyword">false</span>)</div>
<div class="line"><a name="l00160"></a><span class="lineno">  160</span>&#160; </div>
<div class="line"><a name="l00161"></a><span class="lineno">  161</span>&#160;<span class="comment">// This function updates and optimizes the branching instructions of every basic</span></div>
<div class="line"><a name="l00162"></a><span class="lineno">  162</span>&#160;<span class="comment">// block in a given function to account for changes in the layout.</span></div>
<div class="line"><a name="l00163"></a><span class="lineno">  163</span>&#160;static <span class="keywordtype">void</span> updateBranches(</div>
<div class="line"><a name="l00164"></a><span class="lineno">  164</span>&#160;    <a class="code" href="classllvm_1_1MachineFunction.html">MachineFunction</a> &amp;MF,</div>
<div class="line"><a name="l00165"></a><span class="lineno"><a class="line" href="BasicBlockSections_8cpp.html#a1bcd35bcf6d7e166b113fb44ce6df061">  165</a></span>&#160;    <a class="code" href="AArch64PromoteConstant_8cpp.html#a90f8350fecae261c25be85d38b451bff">const</a> <a class="code" href="classllvm_1_1SmallVector.html">SmallVector</a>&lt;<a class="code" href="classllvm_1_1MachineBasicBlock.html">MachineBasicBlock</a> *, 4&gt; &amp;<a class="code" href="BasicBlockSections_8cpp.html#a1bcd35bcf6d7e166b113fb44ce6df061">PreLayoutFallThroughs</a>) {</div>
<div class="line"><a name="l00166"></a><span class="lineno">  166</span>&#160;  <span class="keyword">const</span> <a class="code" href="classllvm_1_1TargetInstrInfo.html">TargetInstrInfo</a> *<a class="code" href="HexagonCopyToCombine_8cpp.html#a1d40004718218dbdf06b496766299101">TII</a> = MF.getSubtarget().getInstrInfo();</div>
<div class="line"><a name="l00167"></a><span class="lineno"><a class="line" href="BasicBlockSections_8cpp.html#a5fd0741d696f28faf65b33f6c6af8fda">  167</a></span>&#160;  <a class="code" href="classllvm_1_1SmallVector.html">SmallVector&lt;MachineOperand, 4&gt;</a> <a class="code" href="BasicBlockSections_8cpp.html#a5fd0741d696f28faf65b33f6c6af8fda">Cond</a>;</div>
<div class="line"><a name="l00168"></a><span class="lineno"><a class="line" href="BasicBlockSections_8cpp.html#a5e5c642a0309c0657f3efa8a8b687008">  168</a></span>&#160;  <span class="keywordflow">for</span> (<span class="keyword">auto</span> &amp;<a class="code" href="AArch64SLSHardening_8cpp.html#a5958512eae2979bd2eb383977996a600">MBB</a> : MF) {</div>
<div class="line"><a name="l00169"></a><span class="lineno">  169</span>&#160;    <span class="keyword">auto</span> NextMBBI = std::next(<a class="code" href="AArch64SLSHardening_8cpp.html#a5958512eae2979bd2eb383977996a600">MBB</a>.<a class="code" href="classllvm_1_1ilist__node__impl.html#af719fc783be6589465137d997701a432">getIterator</a>());</div>
<div class="line"><a name="l00170"></a><span class="lineno">  170</span>&#160;    <span class="keyword">auto</span> *FTMBB = <a class="code" href="BasicBlockSections_8cpp.html#a1bcd35bcf6d7e166b113fb44ce6df061">PreLayoutFallThroughs</a>[<a class="code" href="AArch64SLSHardening_8cpp.html#a5958512eae2979bd2eb383977996a600">MBB</a>.<a class="code" href="classllvm_1_1MachineBasicBlock.html#a3aa22d521bd6a7e6b9f35545dc7b0f1e">getNumber</a>()];</div>
<div class="line"><a name="l00171"></a><span class="lineno">  171</span>&#160;    <span class="comment">// If this block had a fallthrough before we need an explicit unconditional</span></div>
<div class="line"><a name="l00172"></a><span class="lineno">  172</span>&#160;    <span class="comment">// branch to that block if either</span></div>
<div class="line"><a name="l00173"></a><span class="lineno">  173</span>&#160;    <span class="comment">//     1- the block ends a section, which means its next block may be</span></div>
<div class="line"><a name="l00174"></a><span class="lineno">  174</span>&#160;    <span class="comment">//        reorderd by the linker, or</span></div>
<div class="line"><a name="l00175"></a><span class="lineno">  175</span>&#160;    <span class="comment">//     2- the fallthrough block is not adjacent to the block in the new</span></div>
<div class="line"><a name="l00176"></a><span class="lineno">  176</span>&#160;    <span class="comment">//        order.</span></div>
<div class="line"><a name="l00177"></a><span class="lineno">  177</span>&#160;    <span class="keywordflow">if</span> (FTMBB &amp;&amp; (<a class="code" href="AArch64SLSHardening_8cpp.html#a5958512eae2979bd2eb383977996a600">MBB</a>.<a class="code" href="classllvm_1_1MachineBasicBlock.html#ae0fd0a5397ceb88bd0d58ecb1708e1dc">isEndSection</a>() || &amp;*NextMBBI != FTMBB))</div>
<div class="line"><a name="l00178"></a><span class="lineno">  178</span>&#160;      <a class="code" href="HexagonCopyToCombine_8cpp.html#a1d40004718218dbdf06b496766299101">TII</a>-&gt;insertUnconditionalBranch(<a class="code" href="AArch64SLSHardening_8cpp.html#a5958512eae2979bd2eb383977996a600">MBB</a>, FTMBB, <a class="code" href="AArch64SLSHardening_8cpp.html#a5958512eae2979bd2eb383977996a600">MBB</a>.<a class="code" href="classllvm_1_1MachineBasicBlock.html#ad81901d0d8b768b240e78bf357999f34">findBranchDebugLoc</a>());</div>
<div class="line"><a name="l00179"></a><span class="lineno">  179</span>&#160; </div>
<div class="line"><a name="l00180"></a><span class="lineno">  180</span>&#160;    <span class="comment">// We do not optimize branches for machine basic blocks ending sections, as</span></div>
<div class="line"><a name="l00181"></a><span class="lineno">  181</span>&#160;    <span class="comment">// their adjacent block might be reordered by the linker.</span></div>
<div class="line"><a name="l00182"></a><span class="lineno">  182</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="AArch64SLSHardening_8cpp.html#a5958512eae2979bd2eb383977996a600">MBB</a>.<a class="code" href="classllvm_1_1MachineBasicBlock.html#ae0fd0a5397ceb88bd0d58ecb1708e1dc">isEndSection</a>())</div>
<div class="line"><a name="l00183"></a><span class="lineno">  183</span>&#160;      <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l00184"></a><span class="lineno">  184</span>&#160; </div>
<div class="line"><a name="l00185"></a><span class="lineno">  185</span>&#160;    <span class="comment">// It might be possible to optimize branches by flipping the branch</span></div>
<div class="line"><a name="l00186"></a><span class="lineno">  186</span>&#160;    <span class="comment">// condition.</span></div>
<div class="line"><a name="l00187"></a><span class="lineno">  187</span>&#160;    <a class="code" href="BasicBlockSections_8cpp.html#a5fd0741d696f28faf65b33f6c6af8fda">Cond</a>.clear();</div>
<div class="line"><a name="l00188"></a><span class="lineno">  188</span>&#160;    <a class="code" href="classllvm_1_1MachineBasicBlock.html">MachineBasicBlock</a> *TBB = <span class="keyword">nullptr</span>, *FBB = <span class="keyword">nullptr</span>; <span class="comment">// For analyzeBranch.</span></div>
<div class="line"><a name="l00189"></a><span class="lineno">  189</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="HexagonCopyToCombine_8cpp.html#a1d40004718218dbdf06b496766299101">TII</a>-&gt;<a class="code" href="classllvm_1_1HexagonInstrInfo.html#a36c56da02f10d527ab7084e5d172d1d4">analyzeBranch</a>(<a class="code" href="AArch64SLSHardening_8cpp.html#a5958512eae2979bd2eb383977996a600">MBB</a>, TBB, FBB, <a class="code" href="BasicBlockSections_8cpp.html#a5fd0741d696f28faf65b33f6c6af8fda">Cond</a>))</div>
<div class="line"><a name="l00190"></a><span class="lineno">  190</span>&#160;      <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l00191"></a><span class="lineno">  191</span>&#160;    <a class="code" href="AArch64SLSHardening_8cpp.html#a5958512eae2979bd2eb383977996a600">MBB</a>.<a class="code" href="classllvm_1_1MachineBasicBlock.html#a5803a49facae20ca4b002dcba6f1d03e">updateTerminator</a>(FTMBB);</div>
<div class="line"><a name="l00192"></a><span class="lineno">  192</span>&#160;  }</div>
<div class="line"><a name="l00193"></a><span class="lineno">  193</span>&#160;}</div>
<div class="line"><a name="l00194"></a><span class="lineno">  194</span>&#160; </div>
<div class="line"><a name="l00195"></a><span class="lineno">  195</span>&#160;<span class="comment">// This function provides the BBCluster information associated with a function.</span></div>
<div class="line"><a name="l00196"></a><span class="lineno">  196</span>&#160;<span class="comment">// Returns true if a valid association exists and false otherwise.</span></div>
<div class="line"><a name="l00197"></a><span class="lineno"><a class="line" href="BasicBlockSections_8cpp.html#a7d0c135c530f2717ae6e0387f8d45cac">  197</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">bool</span> <a class="code" href="BasicBlockSections_8cpp.html#a7d0c135c530f2717ae6e0387f8d45cac">getBBClusterInfoForFunction</a>(</div>
<div class="line"><a name="l00198"></a><span class="lineno">  198</span>&#160;    <span class="keyword">const</span> <a class="code" href="classllvm_1_1MachineFunction.html">MachineFunction</a> &amp;MF, <span class="keyword">const</span> <a class="code" href="classllvm_1_1StringMap.html">StringMap&lt;StringRef&gt;</a> FuncAliasMap,</div>
<div class="line"><a name="l00199"></a><span class="lineno">  199</span>&#160;    <span class="keyword">const</span> ProgramBBClusterInfoMapTy &amp;ProgramBBClusterInfo,</div>
<div class="line"><a name="l00200"></a><span class="lineno">  200</span>&#160;    std::vector&lt;<a class="code" href="classllvm_1_1Optional.html">Optional&lt;BBClusterInfo&gt;</a>&gt; &amp;V) {</div>
<div class="line"><a name="l00201"></a><span class="lineno">  201</span>&#160;  <span class="comment">// Get the main alias name for the function.</span></div>
<div class="line"><a name="l00202"></a><span class="lineno">  202</span>&#160;  <span class="keyword">auto</span> FuncName = MF.<a class="code" href="classllvm_1_1MachineFunction.html#a3d142c9e7c066059e15232c56dec9e2e">getName</a>();</div>
<div class="line"><a name="l00203"></a><span class="lineno">  203</span>&#160;  <span class="keyword">auto</span> <a class="code" href="namespacellvm_1_1RISCVFenceField.html#a147be9e9780c1e33363ea572d4c7b25fa1835091d83e0e052cd1a32c99b2be731">R</a> = FuncAliasMap.<a class="code" href="classllvm_1_1StringMap.html#a49e68e4c86fe0b96c633adea0c366d74">find</a>(FuncName);</div>
<div class="line"><a name="l00204"></a><span class="lineno">  204</span>&#160;  <a class="code" href="classllvm_1_1StringRef.html">StringRef</a> AliasName = <a class="code" href="namespacellvm_1_1RISCVFenceField.html#a147be9e9780c1e33363ea572d4c7b25fa1835091d83e0e052cd1a32c99b2be731">R</a> == FuncAliasMap.<a class="code" href="classllvm_1_1StringMap.html#a16e5eaf2df56249e87019be23ee07695">end</a>() ? FuncName : <a class="code" href="namespacellvm_1_1RISCVFenceField.html#a147be9e9780c1e33363ea572d4c7b25fa1835091d83e0e052cd1a32c99b2be731">R</a>-&gt;second;</div>
<div class="line"><a name="l00205"></a><span class="lineno">  205</span>&#160; </div>
<div class="line"><a name="l00206"></a><span class="lineno">  206</span>&#160;  <span class="comment">// Find the assoicated cluster information.</span></div>
<div class="line"><a name="l00207"></a><span class="lineno">  207</span>&#160;  <span class="keyword">auto</span> <a class="code" href="README-SSE_8txt.html#a63d206a063eefcdf8c318ded97b65020">P</a> = ProgramBBClusterInfo.find(AliasName);</div>
<div class="line"><a name="l00208"></a><span class="lineno">  208</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="README-SSE_8txt.html#a63d206a063eefcdf8c318ded97b65020">P</a> == ProgramBBClusterInfo.end())</div>
<div class="line"><a name="l00209"></a><span class="lineno">  209</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l00210"></a><span class="lineno">  210</span>&#160; </div>
<div class="line"><a name="l00211"></a><span class="lineno">  211</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="README-SSE_8txt.html#a63d206a063eefcdf8c318ded97b65020">P</a>-&gt;second.empty()) {</div>
<div class="line"><a name="l00212"></a><span class="lineno">  212</span>&#160;    <span class="comment">// This indicates that sections are desired for all basic blocks of this</span></div>
<div class="line"><a name="l00213"></a><span class="lineno">  213</span>&#160;    <span class="comment">// function. We clear the BBClusterInfo vector to denote this.</span></div>
<div class="line"><a name="l00214"></a><span class="lineno">  214</span>&#160;    V.clear();</div>
<div class="line"><a name="l00215"></a><span class="lineno">  215</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l00216"></a><span class="lineno">  216</span>&#160;  }</div>
<div class="line"><a name="l00217"></a><span class="lineno">  217</span>&#160; </div>
<div class="line"><a name="l00218"></a><span class="lineno">  218</span>&#160;  V.resize(MF.<a class="code" href="classllvm_1_1MachineFunction.html#aa22424ba23740b6a748e8d0c239b7e4c">getNumBlockIDs</a>());</div>
<div class="line"><a name="l00219"></a><span class="lineno">  219</span>&#160;  <span class="keywordflow">for</span> (<span class="keyword">auto</span> bbClusterInfo : <a class="code" href="README-SSE_8txt.html#a63d206a063eefcdf8c318ded97b65020">P</a>-&gt;second) {</div>
<div class="line"><a name="l00220"></a><span class="lineno">  220</span>&#160;    <span class="comment">// Bail out if the cluster information contains invalid MBB numbers.</span></div>
<div class="line"><a name="l00221"></a><span class="lineno">  221</span>&#160;    <span class="keywordflow">if</span> (bbClusterInfo.MBBNumber &gt;= MF.<a class="code" href="classllvm_1_1MachineFunction.html#aa22424ba23740b6a748e8d0c239b7e4c">getNumBlockIDs</a>())</div>
<div class="line"><a name="l00222"></a><span class="lineno">  222</span>&#160;      <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l00223"></a><span class="lineno">  223</span>&#160;    V[bbClusterInfo.MBBNumber] = bbClusterInfo;</div>
<div class="line"><a name="l00224"></a><span class="lineno">  224</span>&#160;  }</div>
<div class="line"><a name="l00225"></a><span class="lineno">  225</span>&#160;  <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l00226"></a><span class="lineno">  226</span>&#160;}</div>
<div class="line"><a name="l00227"></a><span class="lineno">  227</span>&#160; </div>
<div class="line"><a name="l00228"></a><span class="lineno">  228</span>&#160;<span class="comment">// This function sorts basic blocks according to the cluster&#39;s information.</span></div>
<div class="line"><a name="l00229"></a><span class="lineno">  229</span>&#160;<span class="comment">// All explicitly specified clusters of basic blocks will be ordered</span></div>
<div class="line"><a name="l00230"></a><span class="lineno">  230</span>&#160;<span class="comment">// accordingly. All non-specified BBs go into a separate &quot;Cold&quot; section.</span></div>
<div class="line"><a name="l00231"></a><span class="lineno">  231</span>&#160;<span class="comment">// Additionally, if exception handling landing pads end up in more than one</span></div>
<div class="line"><a name="l00232"></a><span class="lineno">  232</span>&#160;<span class="comment">// clusters, they are moved into a single &quot;Exception&quot; section. Eventually,</span></div>
<div class="line"><a name="l00233"></a><span class="lineno">  233</span>&#160;<span class="comment">// clusters are ordered in increasing order of their IDs, with the &quot;Exception&quot;</span></div>
<div class="line"><a name="l00234"></a><span class="lineno">  234</span>&#160;<span class="comment">// and &quot;Cold&quot; succeeding all other clusters.</span></div>
<div class="line"><a name="l00235"></a><span class="lineno">  235</span>&#160;<span class="comment">// FuncBBClusterInfo represent the cluster information for basic blocks. If this</span></div>
<div class="line"><a name="l00236"></a><span class="lineno">  236</span>&#160;<span class="comment">// is empty, it means unique sections for all basic blocks in the function.</span></div>
<div class="line"><a name="l00237"></a><span class="lineno">  237</span>&#160;<span class="keyword">static</span> <span class="keywordtype">void</span></div>
<div class="line"><a name="l00238"></a><span class="lineno"><a class="line" href="BasicBlockSections_8cpp.html#a2034e8b50909d95ad07f1637343097f2">  238</a></span>&#160;<a class="code" href="BasicBlockSections_8cpp.html#a2034e8b50909d95ad07f1637343097f2">assignSections</a>(<a class="code" href="classllvm_1_1MachineFunction.html">MachineFunction</a> &amp;MF,</div>
<div class="line"><a name="l00239"></a><span class="lineno">  239</span>&#160;               <span class="keyword">const</span> std::vector&lt;<a class="code" href="classllvm_1_1Optional.html">Optional&lt;BBClusterInfo&gt;</a>&gt; &amp;FuncBBClusterInfo) {</div>
<div class="line"><a name="l00240"></a><span class="lineno">  240</span>&#160;  <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(MF.<a class="code" href="classllvm_1_1MachineFunction.html#a74e97fc3012191edf10e8c51291da4a7">hasBBSections</a>() &amp;&amp; <span class="stringliteral">&quot;BB Sections is not set for function.&quot;</span>);</div>
<div class="line"><a name="l00241"></a><span class="lineno">  241</span>&#160;  <span class="comment">// This variable stores the section ID of the cluster containing eh_pads (if</span></div>
<div class="line"><a name="l00242"></a><span class="lineno">  242</span>&#160;  <span class="comment">// all eh_pads are one cluster). If more than one cluster contain eh_pads, we</span></div>
<div class="line"><a name="l00243"></a><span class="lineno">  243</span>&#160;  <span class="comment">// set it equal to ExceptionSectionID.</span></div>
<div class="line"><a name="l00244"></a><span class="lineno">  244</span>&#160;  <a class="code" href="classllvm_1_1Optional.html">Optional&lt;MBBSectionID&gt;</a> EHPadsSectionID;</div>
<div class="line"><a name="l00245"></a><span class="lineno">  245</span>&#160; </div>
<div class="line"><a name="l00246"></a><span class="lineno">  246</span>&#160;  <span class="keywordflow">for</span> (<span class="keyword">auto</span> &amp;<a class="code" href="AArch64SLSHardening_8cpp.html#a5958512eae2979bd2eb383977996a600">MBB</a> : MF) {</div>
<div class="line"><a name="l00247"></a><span class="lineno">  247</span>&#160;    <span class="comment">// With the &#39;all&#39; option, every basic block is placed in a unique section.</span></div>
<div class="line"><a name="l00248"></a><span class="lineno">  248</span>&#160;    <span class="comment">// With the &#39;list&#39; option, every basic block is placed in a section</span></div>
<div class="line"><a name="l00249"></a><span class="lineno">  249</span>&#160;    <span class="comment">// associated with its cluster, unless we want individual unique sections</span></div>
<div class="line"><a name="l00250"></a><span class="lineno">  250</span>&#160;    <span class="comment">// for every basic block in this function (if FuncBBClusterInfo is empty).</span></div>
<div class="line"><a name="l00251"></a><span class="lineno">  251</span>&#160;    <span class="keywordflow">if</span> (MF.getTarget().getBBSectionsType() == <a class="code" href="namespacellvm.html#acefe92adee8725ad904c7c43649790e8ab1c94ca2fbc3e78fc30069c8d0f01680">llvm::BasicBlockSection::All</a> ||</div>
<div class="line"><a name="l00252"></a><span class="lineno">  252</span>&#160;        FuncBBClusterInfo.empty()) {</div>
<div class="line"><a name="l00253"></a><span class="lineno">  253</span>&#160;      <span class="comment">// If unique sections are desired for all basic blocks of the function, we</span></div>
<div class="line"><a name="l00254"></a><span class="lineno">  254</span>&#160;      <span class="comment">// set every basic block&#39;s section ID equal to its number (basic block</span></div>
<div class="line"><a name="l00255"></a><span class="lineno">  255</span>&#160;      <span class="comment">// id). This further ensures that basic blocks are ordered canonically.</span></div>
<div class="line"><a name="l00256"></a><span class="lineno">  256</span>&#160;      <a class="code" href="AArch64SLSHardening_8cpp.html#a5958512eae2979bd2eb383977996a600">MBB</a>.<a class="code" href="classllvm_1_1MachineBasicBlock.html#aac864a2ce4f4fcac4c21062b29986c5c">setSectionID</a>({<span class="keyword">static_cast&lt;</span><span class="keywordtype">unsigned</span> <span class="keywordtype">int</span><span class="keyword">&gt;</span>(<a class="code" href="AArch64SLSHardening_8cpp.html#a5958512eae2979bd2eb383977996a600">MBB</a>.<a class="code" href="classllvm_1_1MachineBasicBlock.html#a3aa22d521bd6a7e6b9f35545dc7b0f1e">getNumber</a>())});</div>
<div class="line"><a name="l00257"></a><span class="lineno">  257</span>&#160;    } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (FuncBBClusterInfo[<a class="code" href="AArch64SLSHardening_8cpp.html#a5958512eae2979bd2eb383977996a600">MBB</a>.<a class="code" href="classllvm_1_1MachineBasicBlock.html#a3aa22d521bd6a7e6b9f35545dc7b0f1e">getNumber</a>()].hasValue())</div>
<div class="line"><a name="l00258"></a><span class="lineno">  258</span>&#160;      <a class="code" href="AArch64SLSHardening_8cpp.html#a5958512eae2979bd2eb383977996a600">MBB</a>.<a class="code" href="classllvm_1_1MachineBasicBlock.html#aac864a2ce4f4fcac4c21062b29986c5c">setSectionID</a>(FuncBBClusterInfo[<a class="code" href="AArch64SLSHardening_8cpp.html#a5958512eae2979bd2eb383977996a600">MBB</a>.<a class="code" href="classllvm_1_1MachineBasicBlock.html#a3aa22d521bd6a7e6b9f35545dc7b0f1e">getNumber</a>()]-&gt;ClusterID);</div>
<div class="line"><a name="l00259"></a><span class="lineno">  259</span>&#160;    <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00260"></a><span class="lineno">  260</span>&#160;      <span class="comment">// BB goes into the special cold section if it is not specified in the</span></div>
<div class="line"><a name="l00261"></a><span class="lineno">  261</span>&#160;      <span class="comment">// cluster info map.</span></div>
<div class="line"><a name="l00262"></a><span class="lineno">  262</span>&#160;      <a class="code" href="AArch64SLSHardening_8cpp.html#a5958512eae2979bd2eb383977996a600">MBB</a>.<a class="code" href="classllvm_1_1MachineBasicBlock.html#aac864a2ce4f4fcac4c21062b29986c5c">setSectionID</a>(<a class="code" href="structllvm_1_1MBBSectionID.html#a2cbbe04f568b5890eeb2b58c0cbf6d71">MBBSectionID::ColdSectionID</a>);</div>
<div class="line"><a name="l00263"></a><span class="lineno">  263</span>&#160;    }</div>
<div class="line"><a name="l00264"></a><span class="lineno">  264</span>&#160; </div>
<div class="line"><a name="l00265"></a><span class="lineno">  265</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="AArch64SLSHardening_8cpp.html#a5958512eae2979bd2eb383977996a600">MBB</a>.<a class="code" href="classllvm_1_1MachineBasicBlock.html#a1100bfbadd996d464150c6a68fa8dc1d">isEHPad</a>() &amp;&amp; EHPadsSectionID != <a class="code" href="AArch64SLSHardening_8cpp.html#a5958512eae2979bd2eb383977996a600">MBB</a>.<a class="code" href="classllvm_1_1MachineBasicBlock.html#a87ee39ccabd6fa5abe6302ebffd768c9">getSectionID</a>() &amp;&amp;</div>
<div class="line"><a name="l00266"></a><span class="lineno">  266</span>&#160;        EHPadsSectionID != <a class="code" href="structllvm_1_1MBBSectionID.html#a27940a53407c67036b8292fa9bf4721d">MBBSectionID::ExceptionSectionID</a>) {</div>
<div class="line"><a name="l00267"></a><span class="lineno">  267</span>&#160;      <span class="comment">// If we already have one cluster containing eh_pads, this must be updated</span></div>
<div class="line"><a name="l00268"></a><span class="lineno">  268</span>&#160;      <span class="comment">// to ExceptionSectionID. Otherwise, we set it equal to the current</span></div>
<div class="line"><a name="l00269"></a><span class="lineno">  269</span>&#160;      <span class="comment">// section ID.</span></div>
<div class="line"><a name="l00270"></a><span class="lineno">  270</span>&#160;      EHPadsSectionID = EHPadsSectionID.<a class="code" href="classllvm_1_1Optional.html#ab8f06efe88f146384116a787058ab420">hasValue</a>()</div>
<div class="line"><a name="l00271"></a><span class="lineno">  271</span>&#160;                            ? <a class="code" href="structllvm_1_1MBBSectionID.html#a27940a53407c67036b8292fa9bf4721d">MBBSectionID::ExceptionSectionID</a></div>
<div class="line"><a name="l00272"></a><span class="lineno">  272</span>&#160;                            : <a class="code" href="AArch64SLSHardening_8cpp.html#a5958512eae2979bd2eb383977996a600">MBB</a>.<a class="code" href="classllvm_1_1MachineBasicBlock.html#a87ee39ccabd6fa5abe6302ebffd768c9">getSectionID</a>();</div>
<div class="line"><a name="l00273"></a><span class="lineno">  273</span>&#160;    }</div>
<div class="line"><a name="l00274"></a><span class="lineno">  274</span>&#160;  }</div>
<div class="line"><a name="l00275"></a><span class="lineno">  275</span>&#160; </div>
<div class="line"><a name="l00276"></a><span class="lineno">  276</span>&#160;  <span class="comment">// If EHPads are in more than one section, this places all of them in the</span></div>
<div class="line"><a name="l00277"></a><span class="lineno">  277</span>&#160;  <span class="comment">// special exception section.</span></div>
<div class="line"><a name="l00278"></a><span class="lineno">  278</span>&#160;  <span class="keywordflow">if</span> (EHPadsSectionID == <a class="code" href="structllvm_1_1MBBSectionID.html#a27940a53407c67036b8292fa9bf4721d">MBBSectionID::ExceptionSectionID</a>)</div>
<div class="line"><a name="l00279"></a><span class="lineno">  279</span>&#160;    <span class="keywordflow">for</span> (<span class="keyword">auto</span> &amp;<a class="code" href="AArch64SLSHardening_8cpp.html#a5958512eae2979bd2eb383977996a600">MBB</a> : MF)</div>
<div class="line"><a name="l00280"></a><span class="lineno">  280</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="AArch64SLSHardening_8cpp.html#a5958512eae2979bd2eb383977996a600">MBB</a>.<a class="code" href="classllvm_1_1MachineBasicBlock.html#a1100bfbadd996d464150c6a68fa8dc1d">isEHPad</a>())</div>
<div class="line"><a name="l00281"></a><span class="lineno">  281</span>&#160;        <a class="code" href="AArch64SLSHardening_8cpp.html#a5958512eae2979bd2eb383977996a600">MBB</a>.<a class="code" href="classllvm_1_1MachineBasicBlock.html#aac864a2ce4f4fcac4c21062b29986c5c">setSectionID</a>(EHPadsSectionID.<a class="code" href="classllvm_1_1Optional.html#a9ed8669536d806aff028d983595bab4d">getValue</a>());</div>
<div class="line"><a name="l00282"></a><span class="lineno">  282</span>&#160;}</div>
<div class="line"><a name="l00283"></a><span class="lineno">  283</span>&#160; </div>
<div class="line"><a name="l00284"></a><span class="lineno"><a class="line" href="namespacellvm.html#afad2bbe677ba3de73946c95070c7cdb1">  284</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="namespacellvm.html#afad2bbe677ba3de73946c95070c7cdb1">llvm::sortBasicBlocksAndUpdateBranches</a>(</div>
<div class="line"><a name="l00285"></a><span class="lineno">  285</span>&#160;    <a class="code" href="classllvm_1_1MachineFunction.html">MachineFunction</a> &amp;MF, <a class="code" href="classllvm_1_1function__ref.html">MachineBasicBlockComparator</a> MBBCmp) {</div>
<div class="line"><a name="l00286"></a><span class="lineno">  286</span>&#160;  <a class="code" href="classllvm_1_1SmallVector.html">SmallVector&lt;MachineBasicBlock *, 4&gt;</a> <a class="code" href="BasicBlockSections_8cpp.html#a1bcd35bcf6d7e166b113fb44ce6df061">PreLayoutFallThroughs</a>(</div>
<div class="line"><a name="l00287"></a><span class="lineno">  287</span>&#160;      MF.<a class="code" href="classllvm_1_1MachineFunction.html#aa22424ba23740b6a748e8d0c239b7e4c">getNumBlockIDs</a>());</div>
<div class="line"><a name="l00288"></a><span class="lineno">  288</span>&#160;  <span class="keywordflow">for</span> (<span class="keyword">auto</span> &amp;<a class="code" href="AArch64SLSHardening_8cpp.html#a5958512eae2979bd2eb383977996a600">MBB</a> : MF)</div>
<div class="line"><a name="l00289"></a><span class="lineno">  289</span>&#160;    <a class="code" href="BasicBlockSections_8cpp.html#a1bcd35bcf6d7e166b113fb44ce6df061">PreLayoutFallThroughs</a>[<a class="code" href="AArch64SLSHardening_8cpp.html#a5958512eae2979bd2eb383977996a600">MBB</a>.<a class="code" href="classllvm_1_1MachineBasicBlock.html#a3aa22d521bd6a7e6b9f35545dc7b0f1e">getNumber</a>()] = <a class="code" href="AArch64SLSHardening_8cpp.html#a5958512eae2979bd2eb383977996a600">MBB</a>.<a class="code" href="classllvm_1_1MachineBasicBlock.html#aa87a93c7232702163833fc57e2da6e59">getFallThrough</a>();</div>
<div class="line"><a name="l00290"></a><span class="lineno">  290</span>&#160; </div>
<div class="line"><a name="l00291"></a><span class="lineno">  291</span>&#160;  MF.sort(MBBCmp);</div>
<div class="line"><a name="l00292"></a><span class="lineno">  292</span>&#160; </div>
<div class="line"><a name="l00293"></a><span class="lineno">  293</span>&#160;  <span class="comment">// Set IsBeginSection and IsEndSection according to the assigned section IDs.</span></div>
<div class="line"><a name="l00294"></a><span class="lineno">  294</span>&#160;  MF.assignBeginEndSections();</div>
<div class="line"><a name="l00295"></a><span class="lineno">  295</span>&#160; </div>
<div class="line"><a name="l00296"></a><span class="lineno">  296</span>&#160;  <span class="comment">// After reordering basic blocks, we must update basic block branches to</span></div>
<div class="line"><a name="l00297"></a><span class="lineno">  297</span>&#160;  <span class="comment">// insert explicit fallthrough branches when required and optimize branches</span></div>
<div class="line"><a name="l00298"></a><span class="lineno">  298</span>&#160;  <span class="comment">// when possible.</span></div>
<div class="line"><a name="l00299"></a><span class="lineno">  299</span>&#160;  updateBranches(MF, <a class="code" href="BasicBlockSections_8cpp.html#a1bcd35bcf6d7e166b113fb44ce6df061">PreLayoutFallThroughs</a>);</div>
<div class="line"><a name="l00300"></a><span class="lineno">  300</span>&#160;}</div>
<div class="line"><a name="l00301"></a><span class="lineno">  301</span>&#160; </div>
<div class="line"><a name="l00302"></a><span class="lineno">  302</span>&#160;<span class="comment">// If the exception section begins with a landing pad, that landing pad will</span></div>
<div class="line"><a name="l00303"></a><span class="lineno">  303</span>&#160;<span class="comment">// assume a zero offset (relative to @LPStart) in the LSDA. However, a value of</span></div>
<div class="line"><a name="l00304"></a><span class="lineno">  304</span>&#160;<span class="comment">// zero implies &quot;no landing pad.&quot; This function inserts a NOP just before the EH</span></div>
<div class="line"><a name="l00305"></a><span class="lineno">  305</span>&#160;<span class="comment">// pad label to ensure a nonzero offset. Returns true if padding is not needed.</span></div>
<div class="line"><a name="l00306"></a><span class="lineno"><a class="line" href="BasicBlockSections_8cpp.html#a908f7d2df5ef691200a73df06eebde57">  306</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">bool</span> <a class="code" href="BasicBlockSections_8cpp.html#a908f7d2df5ef691200a73df06eebde57">avoidZeroOffsetLandingPad</a>(<a class="code" href="classllvm_1_1MachineFunction.html">MachineFunction</a> &amp;MF) {</div>
<div class="line"><a name="l00307"></a><span class="lineno">  307</span>&#160;  <span class="keywordflow">for</span> (<span class="keyword">auto</span> &amp;<a class="code" href="AArch64SLSHardening_8cpp.html#a5958512eae2979bd2eb383977996a600">MBB</a> : MF) {</div>
<div class="line"><a name="l00308"></a><span class="lineno">  308</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="AArch64SLSHardening_8cpp.html#a5958512eae2979bd2eb383977996a600">MBB</a>.<a class="code" href="classllvm_1_1MachineBasicBlock.html#ad4835355c1e5ca306abd15f5b90bd9b4">isBeginSection</a>() &amp;&amp; <a class="code" href="AArch64SLSHardening_8cpp.html#a5958512eae2979bd2eb383977996a600">MBB</a>.<a class="code" href="classllvm_1_1MachineBasicBlock.html#a1100bfbadd996d464150c6a68fa8dc1d">isEHPad</a>()) {</div>
<div class="line"><a name="l00309"></a><span class="lineno">  309</span>&#160;      <a class="code" href="classllvm_1_1MachineInstrBundleIterator.html">MachineBasicBlock::iterator</a> <a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a> = <a class="code" href="AArch64SLSHardening_8cpp.html#a5958512eae2979bd2eb383977996a600">MBB</a>.<a class="code" href="classllvm_1_1MachineBasicBlock.html#ab2d91e7bec944efcbc39d8e30644f111">begin</a>();</div>
<div class="line"><a name="l00310"></a><span class="lineno">  310</span>&#160;      <span class="keywordflow">while</span> (!<a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>-&gt;isEHLabel())</div>
<div class="line"><a name="l00311"></a><span class="lineno">  311</span>&#160;        ++<a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>;</div>
<div class="line"><a name="l00312"></a><span class="lineno">  312</span>&#160;      <a class="code" href="classllvm_1_1MCInst.html">MCInst</a> <a class="code" href="namespacellvm_1_1WebAssembly.html#a8252c3c3e2c889ea98eea628b81d2999">Nop</a> = MF.getSubtarget().getInstrInfo()-&gt;getNop();</div>
<div class="line"><a name="l00313"></a><span class="lineno">  313</span>&#160;      <a class="code" href="namespacellvm.html#abe63d9ba16515b8df95d8b2a677d39d8">BuildMI</a>(<a class="code" href="AArch64SLSHardening_8cpp.html#a5958512eae2979bd2eb383977996a600">MBB</a>, <a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>, <a class="code" href="classllvm_1_1DebugLoc.html">DebugLoc</a>(),</div>
<div class="line"><a name="l00314"></a><span class="lineno">  314</span>&#160;              MF.getSubtarget().getInstrInfo()-&gt;<a class="code" href="classllvm_1_1MDNode.html#a7d10a7b9b7f40b04d27ed97c38ea1950">get</a>(<a class="code" href="namespacellvm_1_1WebAssembly.html#a8252c3c3e2c889ea98eea628b81d2999">Nop</a>.getOpcode()));</div>
<div class="line"><a name="l00315"></a><span class="lineno">  315</span>&#160;      <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l00316"></a><span class="lineno">  316</span>&#160;    }</div>
<div class="line"><a name="l00317"></a><span class="lineno">  317</span>&#160;  }</div>
<div class="line"><a name="l00318"></a><span class="lineno">  318</span>&#160;  <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l00319"></a><span class="lineno">  319</span>&#160;}</div>
<div class="line"><a name="l00320"></a><span class="lineno">  320</span>&#160; </div>
<div class="line"><a name="l00321"></a><span class="lineno">  321</span>&#160;<span class="comment">// This checks if the source of this function has drifted since this binary was</span></div>
<div class="line"><a name="l00322"></a><span class="lineno">  322</span>&#160;<span class="comment">// profiled previously.  For now, we are piggy backing on what PGO does to</span></div>
<div class="line"><a name="l00323"></a><span class="lineno">  323</span>&#160;<span class="comment">// detect this with instrumented profiles.  PGO emits an hash of the IR and</span></div>
<div class="line"><a name="l00324"></a><span class="lineno">  324</span>&#160;<span class="comment">// checks if the hash has changed.  Advanced basic block layout is usually done</span></div>
<div class="line"><a name="l00325"></a><span class="lineno">  325</span>&#160;<span class="comment">// on top of PGO optimized binaries and hence this check works well in practice.</span></div>
<div class="line"><a name="l00326"></a><span class="lineno"><a class="line" href="BasicBlockSections_8cpp.html#a881d0acd36db4711b50eeefff3112067">  326</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">bool</span> <a class="code" href="BasicBlockSections_8cpp.html#a881d0acd36db4711b50eeefff3112067">hasInstrProfHashMismatch</a>(<a class="code" href="classllvm_1_1MachineFunction.html">MachineFunction</a> &amp;MF) {</div>
<div class="line"><a name="l00327"></a><span class="lineno">  327</span>&#160;  <span class="keywordflow">if</span> (!<a class="code" href="BasicBlockSections_8cpp.html#a98a48f24b040649ac9f8d80695047c38">BBSectionsDetectSourceDrift</a>)</div>
<div class="line"><a name="l00328"></a><span class="lineno">  328</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l00329"></a><span class="lineno">  329</span>&#160; </div>
<div class="line"><a name="l00330"></a><span class="lineno">  330</span>&#160;  <span class="keyword">const</span> <span class="keywordtype">char</span> MetadataName[] = <span class="stringliteral">&quot;instr_prof_hash_mismatch&quot;</span>;</div>
<div class="line"><a name="l00331"></a><span class="lineno">  331</span>&#160;  <span class="keyword">auto</span> *Existing = MF.<a class="code" href="classllvm_1_1MachineFunction.html#a4b21394c138cc5ae719510bb529ee099">getFunction</a>().<a class="code" href="classllvm_1_1GlobalObject.html#a61a186a60c64a2a5225db9944eaf7df8">getMetadata</a>(LLVMContext::MD_annotation);</div>
<div class="line"><a name="l00332"></a><span class="lineno">  332</span>&#160;  <span class="keywordflow">if</span> (Existing) {</div>
<div class="line"><a name="l00333"></a><span class="lineno">  333</span>&#160;    <a class="code" href="classllvm_1_1MDTuple.html">MDTuple</a> *Tuple = cast&lt;MDTuple&gt;(Existing);</div>
<div class="line"><a name="l00334"></a><span class="lineno">  334</span>&#160;    <span class="keywordflow">for</span> (<span class="keyword">auto</span> &amp;<a class="code" href="regcomp_8c.html#a0240ac851181b84ac374872dc5434ee4">N</a> : Tuple-&gt;<a class="code" href="classllvm_1_1MDNode.html#a072c9e049554ca7a1c987fd81133d746">operands</a>())</div>
<div class="line"><a name="l00335"></a><span class="lineno">  335</span>&#160;      <span class="keywordflow">if</span> (cast&lt;MDString&gt;(<a class="code" href="regcomp_8c.html#a0240ac851181b84ac374872dc5434ee4">N</a>.get())-&gt;getString() == MetadataName)</div>
<div class="line"><a name="l00336"></a><span class="lineno">  336</span>&#160;        <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l00337"></a><span class="lineno">  337</span>&#160;  }</div>
<div class="line"><a name="l00338"></a><span class="lineno">  338</span>&#160; </div>
<div class="line"><a name="l00339"></a><span class="lineno">  339</span>&#160;  <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l00340"></a><span class="lineno">  340</span>&#160;}</div>
<div class="line"><a name="l00341"></a><span class="lineno">  341</span>&#160; </div>
<div class="line"><a name="l00342"></a><span class="lineno">  342</span>&#160;<span class="keywordtype">bool</span> BasicBlockSections::runOnMachineFunction(<a class="code" href="classllvm_1_1MachineFunction.html">MachineFunction</a> &amp;MF) {</div>
<div class="line"><a name="l00343"></a><span class="lineno">  343</span>&#160;  <span class="keyword">auto</span> BBSectionsType = MF.<a class="code" href="classllvm_1_1MachineFunction.html#ae68d159179d37dc7969439d842e2644f">getTarget</a>().<a class="code" href="classllvm_1_1TargetMachine.html#afab3c5f91842d5dd9f6aaf78a1ff34a9">getBBSectionsType</a>();</div>
<div class="line"><a name="l00344"></a><span class="lineno">  344</span>&#160;  <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(BBSectionsType != <a class="code" href="namespacellvm.html#acefe92adee8725ad904c7c43649790e8a6adf97f83acf6453d4a6a4b1070f3754">BasicBlockSection::None</a> &amp;&amp;</div>
<div class="line"><a name="l00345"></a><span class="lineno">  345</span>&#160;         <span class="stringliteral">&quot;BB Sections not enabled!&quot;</span>);</div>
<div class="line"><a name="l00346"></a><span class="lineno">  346</span>&#160; </div>
<div class="line"><a name="l00347"></a><span class="lineno">  347</span>&#160;  <span class="comment">// Check for source drift.  If the source has changed since the profiles</span></div>
<div class="line"><a name="l00348"></a><span class="lineno">  348</span>&#160;  <span class="comment">// were obtained, optimizing basic blocks might be sub-optimal.</span></div>
<div class="line"><a name="l00349"></a><span class="lineno">  349</span>&#160;  <span class="comment">// This only applies to BasicBlockSection::List as it creates</span></div>
<div class="line"><a name="l00350"></a><span class="lineno">  350</span>&#160;  <span class="comment">// clusters of basic blocks using basic block ids. Source drift can</span></div>
<div class="line"><a name="l00351"></a><span class="lineno">  351</span>&#160;  <span class="comment">// invalidate these groupings leading to sub-optimal code generation with</span></div>
<div class="line"><a name="l00352"></a><span class="lineno">  352</span>&#160;  <span class="comment">// regards to performance.</span></div>
<div class="line"><a name="l00353"></a><span class="lineno">  353</span>&#160;  <span class="keywordflow">if</span> (BBSectionsType == <a class="code" href="namespacellvm.html#acefe92adee8725ad904c7c43649790e8a4ee29ca12c7d126654bd0e5275de6135">BasicBlockSection::List</a> &amp;&amp;</div>
<div class="line"><a name="l00354"></a><span class="lineno">  354</span>&#160;      <a class="code" href="BasicBlockSections_8cpp.html#a881d0acd36db4711b50eeefff3112067">hasInstrProfHashMismatch</a>(MF))</div>
<div class="line"><a name="l00355"></a><span class="lineno">  355</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l00356"></a><span class="lineno">  356</span>&#160; </div>
<div class="line"><a name="l00357"></a><span class="lineno">  357</span>&#160;  <span class="comment">// Renumber blocks before sorting them for basic block sections.  This is</span></div>
<div class="line"><a name="l00358"></a><span class="lineno">  358</span>&#160;  <span class="comment">// useful during sorting, basic blocks in the same section will retain the</span></div>
<div class="line"><a name="l00359"></a><span class="lineno">  359</span>&#160;  <span class="comment">// default order.  This renumbering should also be done for basic block</span></div>
<div class="line"><a name="l00360"></a><span class="lineno">  360</span>&#160;  <span class="comment">// labels to match the profiles with the correct blocks.</span></div>
<div class="line"><a name="l00361"></a><span class="lineno">  361</span>&#160;  MF.<a class="code" href="classllvm_1_1MachineFunction.html#ac85349aab432e6b7d8b2e8926048a6de">RenumberBlocks</a>();</div>
<div class="line"><a name="l00362"></a><span class="lineno">  362</span>&#160; </div>
<div class="line"><a name="l00363"></a><span class="lineno">  363</span>&#160;  <span class="keywordflow">if</span> (BBSectionsType == <a class="code" href="namespacellvm.html#acefe92adee8725ad904c7c43649790e8a3ad6cb6100190c8f81e99fd52debf7ef">BasicBlockSection::Labels</a>) {</div>
<div class="line"><a name="l00364"></a><span class="lineno">  364</span>&#160;    MF.<a class="code" href="classllvm_1_1MachineFunction.html#a0b33ee771a8f9b7f684ffd266040d89f">setBBSectionsType</a>(BBSectionsType);</div>
<div class="line"><a name="l00365"></a><span class="lineno">  365</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l00366"></a><span class="lineno">  366</span>&#160;  }</div>
<div class="line"><a name="l00367"></a><span class="lineno">  367</span>&#160; </div>
<div class="line"><a name="l00368"></a><span class="lineno">  368</span>&#160;  std::vector&lt;Optional&lt;BBClusterInfo&gt;&gt; FuncBBClusterInfo;</div>
<div class="line"><a name="l00369"></a><span class="lineno">  369</span>&#160;  <span class="keywordflow">if</span> (BBSectionsType == <a class="code" href="namespacellvm.html#acefe92adee8725ad904c7c43649790e8a4ee29ca12c7d126654bd0e5275de6135">BasicBlockSection::List</a> &amp;&amp;</div>
<div class="line"><a name="l00370"></a><span class="lineno">  370</span>&#160;      !<a class="code" href="BasicBlockSections_8cpp.html#a7d0c135c530f2717ae6e0387f8d45cac">getBBClusterInfoForFunction</a>(MF, FuncAliasMap, ProgramBBClusterInfo,</div>
<div class="line"><a name="l00371"></a><span class="lineno">  371</span>&#160;                                   FuncBBClusterInfo))</div>
<div class="line"><a name="l00372"></a><span class="lineno">  372</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l00373"></a><span class="lineno">  373</span>&#160;  MF.<a class="code" href="classllvm_1_1MachineFunction.html#a0b33ee771a8f9b7f684ffd266040d89f">setBBSectionsType</a>(BBSectionsType);</div>
<div class="line"><a name="l00374"></a><span class="lineno">  374</span>&#160;  <a class="code" href="BasicBlockSections_8cpp.html#a2034e8b50909d95ad07f1637343097f2">assignSections</a>(MF, FuncBBClusterInfo);</div>
<div class="line"><a name="l00375"></a><span class="lineno">  375</span>&#160; </div>
<div class="line"><a name="l00376"></a><span class="lineno">  376</span>&#160;  <span class="comment">// We make sure that the cluster including the entry basic block precedes all</span></div>
<div class="line"><a name="l00377"></a><span class="lineno">  377</span>&#160;  <span class="comment">// other clusters.</span></div>
<div class="line"><a name="l00378"></a><span class="lineno">  378</span>&#160;  <span class="keyword">auto</span> EntryBBSectionID = MF.<a class="code" href="classllvm_1_1MachineFunction.html#ab1063ce5e180c89490fae50511a46a29">front</a>().<a class="code" href="classllvm_1_1MachineBasicBlock.html#a87ee39ccabd6fa5abe6302ebffd768c9">getSectionID</a>();</div>
<div class="line"><a name="l00379"></a><span class="lineno">  379</span>&#160; </div>
<div class="line"><a name="l00380"></a><span class="lineno">  380</span>&#160;  <span class="comment">// Helper function for ordering BB sections as follows:</span></div>
<div class="line"><a name="l00381"></a><span class="lineno">  381</span>&#160;  <span class="comment">//   * Entry section (section including the entry block).</span></div>
<div class="line"><a name="l00382"></a><span class="lineno">  382</span>&#160;  <span class="comment">//   * Regular sections (in increasing order of their Number).</span></div>
<div class="line"><a name="l00383"></a><span class="lineno">  383</span>&#160;  <span class="comment">//     ...</span></div>
<div class="line"><a name="l00384"></a><span class="lineno">  384</span>&#160;  <span class="comment">//   * Exception section</span></div>
<div class="line"><a name="l00385"></a><span class="lineno">  385</span>&#160;  <span class="comment">//   * Cold section</span></div>
<div class="line"><a name="l00386"></a><span class="lineno">  386</span>&#160;  <span class="keyword">auto</span> MBBSectionOrder = [EntryBBSectionID](<span class="keyword">const</span> <a class="code" href="structllvm_1_1MBBSectionID.html">MBBSectionID</a> &amp;LHS,</div>
<div class="line"><a name="l00387"></a><span class="lineno">  387</span>&#160;                                            <span class="keyword">const</span> <a class="code" href="structllvm_1_1MBBSectionID.html">MBBSectionID</a> &amp;RHS) {</div>
<div class="line"><a name="l00388"></a><span class="lineno">  388</span>&#160;    <span class="comment">// We make sure that the section containing the entry block precedes all the</span></div>
<div class="line"><a name="l00389"></a><span class="lineno">  389</span>&#160;    <span class="comment">// other sections.</span></div>
<div class="line"><a name="l00390"></a><span class="lineno">  390</span>&#160;    <span class="keywordflow">if</span> (LHS == EntryBBSectionID || RHS == EntryBBSectionID)</div>
<div class="line"><a name="l00391"></a><span class="lineno">  391</span>&#160;      <span class="keywordflow">return</span> LHS == EntryBBSectionID;</div>
<div class="line"><a name="l00392"></a><span class="lineno">  392</span>&#160;    <span class="keywordflow">return</span> LHS.<a class="code" href="structllvm_1_1MBBSectionID.html#a82d1efaa8d99c6fa3360fc8b695cc0bb">Type</a> == RHS.Type ? LHS.<a class="code" href="structllvm_1_1MBBSectionID.html#a2948b9ecb725f98db2afa43ce1d78b94">Number</a> &lt; RHS.Number : LHS.<a class="code" href="structllvm_1_1MBBSectionID.html#a82d1efaa8d99c6fa3360fc8b695cc0bb">Type</a> &lt; RHS.Type;</div>
<div class="line"><a name="l00393"></a><span class="lineno">  393</span>&#160;  };</div>
<div class="line"><a name="l00394"></a><span class="lineno">  394</span>&#160; </div>
<div class="line"><a name="l00395"></a><span class="lineno">  395</span>&#160;  <span class="comment">// We sort all basic blocks to make sure the basic blocks of every cluster are</span></div>
<div class="line"><a name="l00396"></a><span class="lineno">  396</span>&#160;  <span class="comment">// contiguous and ordered accordingly. Furthermore, clusters are ordered in</span></div>
<div class="line"><a name="l00397"></a><span class="lineno">  397</span>&#160;  <span class="comment">// increasing order of their section IDs, with the exception and the</span></div>
<div class="line"><a name="l00398"></a><span class="lineno">  398</span>&#160;  <span class="comment">// cold section placed at the end of the function.</span></div>
<div class="line"><a name="l00399"></a><span class="lineno">  399</span>&#160;  <span class="keyword">auto</span> Comparator = [&amp;](<span class="keyword">const</span> <a class="code" href="classllvm_1_1MachineBasicBlock.html">MachineBasicBlock</a> &amp;<a class="code" href="ErlangGCPrinter_8cpp.html#a74b474c0616ab55c1d9487f11fd31d26">X</a>,</div>
<div class="line"><a name="l00400"></a><span class="lineno">  400</span>&#160;                        <span class="keyword">const</span> <a class="code" href="classllvm_1_1MachineBasicBlock.html">MachineBasicBlock</a> &amp;<a class="code" href="OcamlGCPrinter_8cpp.html#afcf2f797ed287a723263583c9b1c1bce">Y</a>) {</div>
<div class="line"><a name="l00401"></a><span class="lineno">  401</span>&#160;    <span class="keyword">auto</span> XSectionID = <a class="code" href="ErlangGCPrinter_8cpp.html#a74b474c0616ab55c1d9487f11fd31d26">X</a>.getSectionID();</div>
<div class="line"><a name="l00402"></a><span class="lineno">  402</span>&#160;    <span class="keyword">auto</span> YSectionID = <a class="code" href="OcamlGCPrinter_8cpp.html#afcf2f797ed287a723263583c9b1c1bce">Y</a>.getSectionID();</div>
<div class="line"><a name="l00403"></a><span class="lineno">  403</span>&#160;    <span class="keywordflow">if</span> (XSectionID != YSectionID)</div>
<div class="line"><a name="l00404"></a><span class="lineno">  404</span>&#160;      <span class="keywordflow">return</span> MBBSectionOrder(XSectionID, YSectionID);</div>
<div class="line"><a name="l00405"></a><span class="lineno">  405</span>&#160;    <span class="comment">// If the two basic block are in the same section, the order is decided by</span></div>
<div class="line"><a name="l00406"></a><span class="lineno">  406</span>&#160;    <span class="comment">// their position within the section.</span></div>
<div class="line"><a name="l00407"></a><span class="lineno">  407</span>&#160;    <span class="keywordflow">if</span> (XSectionID.Type == <a class="code" href="namespacellvm_1_1TargetStackID.html#a71392100eb15ba746b1f898986f5d8a5af2af9eb94ff1bc08308bc738d744ee85">MBBSectionID::SectionType::Default</a>)</div>
<div class="line"><a name="l00408"></a><span class="lineno">  408</span>&#160;      <span class="keywordflow">return</span> FuncBBClusterInfo[<a class="code" href="ErlangGCPrinter_8cpp.html#a74b474c0616ab55c1d9487f11fd31d26">X</a>.getNumber()]-&gt;PositionInCluster &lt;</div>
<div class="line"><a name="l00409"></a><span class="lineno">  409</span>&#160;             FuncBBClusterInfo[<a class="code" href="OcamlGCPrinter_8cpp.html#afcf2f797ed287a723263583c9b1c1bce">Y</a>.getNumber()]-&gt;PositionInCluster;</div>
<div class="line"><a name="l00410"></a><span class="lineno">  410</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="ErlangGCPrinter_8cpp.html#a74b474c0616ab55c1d9487f11fd31d26">X</a>.getNumber() &lt; <a class="code" href="OcamlGCPrinter_8cpp.html#afcf2f797ed287a723263583c9b1c1bce">Y</a>.getNumber();</div>
<div class="line"><a name="l00411"></a><span class="lineno">  411</span>&#160;  };</div>
<div class="line"><a name="l00412"></a><span class="lineno">  412</span>&#160; </div>
<div class="line"><a name="l00413"></a><span class="lineno">  413</span>&#160;  <a class="code" href="namespacellvm.html#afad2bbe677ba3de73946c95070c7cdb1">sortBasicBlocksAndUpdateBranches</a>(MF, Comparator);</div>
<div class="line"><a name="l00414"></a><span class="lineno">  414</span>&#160;  <a class="code" href="BasicBlockSections_8cpp.html#a908f7d2df5ef691200a73df06eebde57">avoidZeroOffsetLandingPad</a>(MF);</div>
<div class="line"><a name="l00415"></a><span class="lineno">  415</span>&#160;  <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l00416"></a><span class="lineno">  416</span>&#160;}</div>
<div class="line"><a name="l00417"></a><span class="lineno">  417</span>&#160; </div>
<div class="line"><a name="l00418"></a><span class="lineno">  418</span>&#160;<span class="comment">// Basic Block Sections can be enabled for a subset of machine basic blocks.</span></div>
<div class="line"><a name="l00419"></a><span class="lineno">  419</span>&#160;<span class="comment">// This is done by passing a file containing names of functions for which basic</span></div>
<div class="line"><a name="l00420"></a><span class="lineno">  420</span>&#160;<span class="comment">// block sections are desired.  Additionally, machine basic block ids of the</span></div>
<div class="line"><a name="l00421"></a><span class="lineno">  421</span>&#160;<span class="comment">// functions can also be specified for a finer granularity. Moreover, a cluster</span></div>
<div class="line"><a name="l00422"></a><span class="lineno">  422</span>&#160;<span class="comment">// of basic blocks could be assigned to the same section.</span></div>
<div class="line"><a name="l00423"></a><span class="lineno">  423</span>&#160;<span class="comment">// A file with basic block sections for all of function main and three blocks</span></div>
<div class="line"><a name="l00424"></a><span class="lineno">  424</span>&#160;<span class="comment">// for function foo (of which 1 and 2 are placed in a cluster) looks like this:</span></div>
<div class="line"><a name="l00425"></a><span class="lineno">  425</span>&#160;<span class="comment">// ----------------------------</span></div>
<div class="line"><a name="l00426"></a><span class="lineno">  426</span>&#160;<span class="comment">// list.txt:</span></div>
<div class="line"><a name="l00427"></a><span class="lineno">  427</span>&#160;<span class="comment">// !main</span></div>
<div class="line"><a name="l00428"></a><span class="lineno">  428</span>&#160;<span class="comment">// !foo</span></div>
<div class="line"><a name="l00429"></a><span class="lineno">  429</span>&#160;<span class="comment">// !!1 2</span></div>
<div class="line"><a name="l00430"></a><span class="lineno">  430</span>&#160;<span class="comment">// !!4</span></div>
<div class="line"><a name="l00431"></a><span class="lineno"><a class="line" href="BasicBlockSections_8cpp.html#aacf72417715a0033cccffbb124b39dfc">  431</a></span>&#160;<span class="keyword">static</span> <a class="code" href="classllvm_1_1Error.html">Error</a> <a class="code" href="BasicBlockSections_8cpp.html#aacf72417715a0033cccffbb124b39dfc">getBBClusterInfo</a>(<span class="keyword">const</span> <a class="code" href="classllvm_1_1MemoryBuffer.html">MemoryBuffer</a> *MBuf,</div>
<div class="line"><a name="l00432"></a><span class="lineno">  432</span>&#160;                              ProgramBBClusterInfoMapTy &amp;ProgramBBClusterInfo,</div>
<div class="line"><a name="l00433"></a><span class="lineno">  433</span>&#160;                              <a class="code" href="classllvm_1_1StringMap.html">StringMap&lt;StringRef&gt;</a> &amp;FuncAliasMap) {</div>
<div class="line"><a name="l00434"></a><span class="lineno">  434</span>&#160;  <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(MBuf);</div>
<div class="line"><a name="l00435"></a><span class="lineno">  435</span>&#160;  <a class="code" href="classllvm_1_1line__iterator.html">line_iterator</a> LineIt(*MBuf, <span class="comment">/*SkipBlanks=*/</span><span class="keyword">true</span>, <span class="comment">/*CommentMarker=*/</span><span class="charliteral">&#39;#&#39;</span>);</div>
<div class="line"><a name="l00436"></a><span class="lineno">  436</span>&#160; </div>
<div class="line"><a name="l00437"></a><span class="lineno">  437</span>&#160;  <span class="keyword">auto</span> invalidProfileError = [&amp;](<span class="keyword">auto</span> Message) {</div>
<div class="line"><a name="l00438"></a><span class="lineno">  438</span>&#160;    <span class="keywordflow">return</span> make_error&lt;StringError&gt;(</div>
<div class="line"><a name="l00439"></a><span class="lineno">  439</span>&#160;        <a class="code" href="classllvm_1_1Twine.html">Twine</a>(<span class="stringliteral">&quot;Invalid profile &quot;</span> + MBuf-&gt;<a class="code" href="classllvm_1_1MemoryBuffer.html#a2037f11968aa30bfda0b4de9f335624d">getBufferIdentifier</a>() + <span class="stringliteral">&quot; at line &quot;</span> +</div>
<div class="line"><a name="l00440"></a><span class="lineno">  440</span>&#160;              <a class="code" href="classllvm_1_1Twine.html">Twine</a>(LineIt.<a class="code" href="classllvm_1_1line__iterator.html#a51eb9a429555dd682d9b265cff7f869f">line_number</a>()) + <span class="stringliteral">&quot;: &quot;</span> + Message),</div>
<div class="line"><a name="l00441"></a><span class="lineno">  441</span>&#160;        <a class="code" href="namespacellvm.html#a2b43c21951d0948b34bcf7019949032d">inconvertibleErrorCode</a>());</div>
<div class="line"><a name="l00442"></a><span class="lineno">  442</span>&#160;  };</div>
<div class="line"><a name="l00443"></a><span class="lineno">  443</span>&#160; </div>
<div class="line"><a name="l00444"></a><span class="lineno">  444</span>&#160;  <span class="keyword">auto</span> FI = ProgramBBClusterInfo.end();</div>
<div class="line"><a name="l00445"></a><span class="lineno">  445</span>&#160; </div>
<div class="line"><a name="l00446"></a><span class="lineno">  446</span>&#160;  <span class="comment">// Current cluster ID corresponding to this function.</span></div>
<div class="line"><a name="l00447"></a><span class="lineno">  447</span>&#160;  <span class="keywordtype">unsigned</span> CurrentCluster = 0;</div>
<div class="line"><a name="l00448"></a><span class="lineno">  448</span>&#160;  <span class="comment">// Current position in the current cluster.</span></div>
<div class="line"><a name="l00449"></a><span class="lineno">  449</span>&#160;  <span class="keywordtype">unsigned</span> CurrentPosition = 0;</div>
<div class="line"><a name="l00450"></a><span class="lineno">  450</span>&#160; </div>
<div class="line"><a name="l00451"></a><span class="lineno">  451</span>&#160;  <span class="comment">// Temporary set to ensure every basic block ID appears once in the clusters</span></div>
<div class="line"><a name="l00452"></a><span class="lineno">  452</span>&#160;  <span class="comment">// of a function.</span></div>
<div class="line"><a name="l00453"></a><span class="lineno">  453</span>&#160;  <a class="code" href="classllvm_1_1SmallSet.html">SmallSet&lt;unsigned, 4&gt;</a> FuncBBIDs;</div>
<div class="line"><a name="l00454"></a><span class="lineno">  454</span>&#160; </div>
<div class="line"><a name="l00455"></a><span class="lineno">  455</span>&#160;  <span class="keywordflow">for</span> (; !LineIt.<a class="code" href="classllvm_1_1line__iterator.html#a617941704a472090ba3304c9daf1c37f">is_at_eof</a>(); ++LineIt) {</div>
<div class="line"><a name="l00456"></a><span class="lineno">  456</span>&#160;    <a class="code" href="classllvm_1_1StringRef.html">StringRef</a> <a class="code" href="lib_2Target_2ARM_2README_8txt.html#a1b45f45820a60c09244a87eb59824aec">S</a>(*LineIt);</div>
<div class="line"><a name="l00457"></a><span class="lineno">  457</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="lib_2Target_2ARM_2README_8txt.html#a1b45f45820a60c09244a87eb59824aec">S</a>[0] == <span class="charliteral">&#39;@&#39;</span>)</div>
<div class="line"><a name="l00458"></a><span class="lineno">  458</span>&#160;      <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l00459"></a><span class="lineno">  459</span>&#160;    <span class="comment">// Check for the leading &quot;!&quot;</span></div>
<div class="line"><a name="l00460"></a><span class="lineno">  460</span>&#160;    <span class="keywordflow">if</span> (!<a class="code" href="lib_2Target_2ARM_2README_8txt.html#a1b45f45820a60c09244a87eb59824aec">S</a>.consume_front(<span class="stringliteral">&quot;!&quot;</span>) || <a class="code" href="lib_2Target_2ARM_2README_8txt.html#a1b45f45820a60c09244a87eb59824aec">S</a>.empty())</div>
<div class="line"><a name="l00461"></a><span class="lineno">  461</span>&#160;      <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00462"></a><span class="lineno">  462</span>&#160;    <span class="comment">// Check for second &quot;!&quot; which indicates a cluster of basic blocks.</span></div>
<div class="line"><a name="l00463"></a><span class="lineno">  463</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="lib_2Target_2ARM_2README_8txt.html#a1b45f45820a60c09244a87eb59824aec">S</a>.consume_front(<span class="stringliteral">&quot;!&quot;</span>)) {</div>
<div class="line"><a name="l00464"></a><span class="lineno">  464</span>&#160;      <span class="keywordflow">if</span> (FI == ProgramBBClusterInfo.end())</div>
<div class="line"><a name="l00465"></a><span class="lineno">  465</span>&#160;        <span class="keywordflow">return</span> invalidProfileError(</div>
<div class="line"><a name="l00466"></a><span class="lineno">  466</span>&#160;            <span class="stringliteral">&quot;Cluster list does not follow a function name specifier.&quot;</span>);</div>
<div class="line"><a name="l00467"></a><span class="lineno">  467</span>&#160;      <a class="code" href="classllvm_1_1SmallVector.html">SmallVector&lt;StringRef, 4&gt;</a> BBIndexes;</div>
<div class="line"><a name="l00468"></a><span class="lineno">  468</span>&#160;      <a class="code" href="lib_2Target_2ARM_2README_8txt.html#a1b45f45820a60c09244a87eb59824aec">S</a>.split(BBIndexes, <span class="charliteral">&#39; &#39;</span>);</div>
<div class="line"><a name="l00469"></a><span class="lineno">  469</span>&#160;      <span class="comment">// Reset current cluster position.</span></div>
<div class="line"><a name="l00470"></a><span class="lineno">  470</span>&#160;      CurrentPosition = 0;</div>
<div class="line"><a name="l00471"></a><span class="lineno">  471</span>&#160;      <span class="keywordflow">for</span> (<span class="keyword">auto</span> BBIndexStr : BBIndexes) {</div>
<div class="line"><a name="l00472"></a><span class="lineno">  472</span>&#160;        <span class="keywordtype">unsigned</span> <span class="keywordtype">long</span> <span class="keywordtype">long</span> BBIndex;</div>
<div class="line"><a name="l00473"></a><span class="lineno">  473</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="namespacellvm.html#aceda0d316aed2b818b731917d21b88bc">getAsUnsignedInteger</a>(BBIndexStr, 10, BBIndex))</div>
<div class="line"><a name="l00474"></a><span class="lineno">  474</span>&#160;          <span class="keywordflow">return</span> invalidProfileError(<a class="code" href="classllvm_1_1Twine.html">Twine</a>(<span class="stringliteral">&quot;Unsigned integer expected: &#39;&quot;</span>) +</div>
<div class="line"><a name="l00475"></a><span class="lineno">  475</span>&#160;                                     BBIndexStr + <span class="stringliteral">&quot;&#39;.&quot;</span>);</div>
<div class="line"><a name="l00476"></a><span class="lineno">  476</span>&#160;        <span class="keywordflow">if</span> (!FuncBBIDs.<a class="code" href="classllvm_1_1SmallSet.html#a892daa20eb21173ba89e9fe9702e7f6c">insert</a>(BBIndex).second)</div>
<div class="line"><a name="l00477"></a><span class="lineno">  477</span>&#160;          <span class="keywordflow">return</span> invalidProfileError(<a class="code" href="classllvm_1_1Twine.html">Twine</a>(<span class="stringliteral">&quot;Duplicate basic block id found &#39;&quot;</span>) +</div>
<div class="line"><a name="l00478"></a><span class="lineno">  478</span>&#160;                                     BBIndexStr + <span class="stringliteral">&quot;&#39;.&quot;</span>);</div>
<div class="line"><a name="l00479"></a><span class="lineno">  479</span>&#160;        <span class="keywordflow">if</span> (!BBIndex &amp;&amp; CurrentPosition)</div>
<div class="line"><a name="l00480"></a><span class="lineno">  480</span>&#160;          <span class="keywordflow">return</span> invalidProfileError(<span class="stringliteral">&quot;Entry BB (0) does not begin a cluster.&quot;</span>);</div>
<div class="line"><a name="l00481"></a><span class="lineno">  481</span>&#160; </div>
<div class="line"><a name="l00482"></a><span class="lineno">  482</span>&#160;        FI-&gt;second.emplace_back(BBClusterInfo{</div>
<div class="line"><a name="l00483"></a><span class="lineno">  483</span>&#160;            ((unsigned)BBIndex), CurrentCluster, CurrentPosition++});</div>
<div class="line"><a name="l00484"></a><span class="lineno">  484</span>&#160;      }</div>
<div class="line"><a name="l00485"></a><span class="lineno">  485</span>&#160;      CurrentCluster++;</div>
<div class="line"><a name="l00486"></a><span class="lineno">  486</span>&#160;    } <span class="keywordflow">else</span> { <span class="comment">// This is a function name specifier.</span></div>
<div class="line"><a name="l00487"></a><span class="lineno">  487</span>&#160;      <span class="comment">// Function aliases are separated using &#39;/&#39;. We use the first function</span></div>
<div class="line"><a name="l00488"></a><span class="lineno">  488</span>&#160;      <span class="comment">// name for the cluster info mapping and delegate all other aliases to</span></div>
<div class="line"><a name="l00489"></a><span class="lineno">  489</span>&#160;      <span class="comment">// this one.</span></div>
<div class="line"><a name="l00490"></a><span class="lineno">  490</span>&#160;      <a class="code" href="classllvm_1_1SmallVector.html">SmallVector&lt;StringRef, 4&gt;</a> Aliases;</div>
<div class="line"><a name="l00491"></a><span class="lineno">  491</span>&#160;      <a class="code" href="lib_2Target_2ARM_2README_8txt.html#a1b45f45820a60c09244a87eb59824aec">S</a>.split(Aliases, <span class="charliteral">&#39;/&#39;</span>);</div>
<div class="line"><a name="l00492"></a><span class="lineno">  492</span>&#160;      <span class="keywordflow">for</span> (<span class="keywordtype">size_t</span> <a class="code" href="lib_2Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a> = 1; <a class="code" href="lib_2Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a> &lt; Aliases.size(); ++<a class="code" href="lib_2Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a>)</div>
<div class="line"><a name="l00493"></a><span class="lineno">  493</span>&#160;        FuncAliasMap.<a class="code" href="classllvm_1_1StringMap.html#a3f1b153d947276395158efe9e5aa7693">try_emplace</a>(Aliases[<a class="code" href="lib_2Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a>], Aliases.front());</div>
<div class="line"><a name="l00494"></a><span class="lineno">  494</span>&#160; </div>
<div class="line"><a name="l00495"></a><span class="lineno">  495</span>&#160;      <span class="comment">// Prepare for parsing clusters of this function name.</span></div>
<div class="line"><a name="l00496"></a><span class="lineno">  496</span>&#160;      <span class="comment">// Start a new cluster map for this function name.</span></div>
<div class="line"><a name="l00497"></a><span class="lineno">  497</span>&#160;      FI = ProgramBBClusterInfo.try_emplace(Aliases.front()).first;</div>
<div class="line"><a name="l00498"></a><span class="lineno">  498</span>&#160;      CurrentCluster = 0;</div>
<div class="line"><a name="l00499"></a><span class="lineno">  499</span>&#160;      FuncBBIDs.<a class="code" href="classllvm_1_1SmallSet.html#a76b3fc7c102561fb5210d5151531e409">clear</a>();</div>
<div class="line"><a name="l00500"></a><span class="lineno">  500</span>&#160;    }</div>
<div class="line"><a name="l00501"></a><span class="lineno">  501</span>&#160;  }</div>
<div class="line"><a name="l00502"></a><span class="lineno">  502</span>&#160;  <span class="keywordflow">return</span> <a class="code" href="classllvm_1_1Error.html#a4dfd0813c3d0e0a30439b5a3e9196b59">Error::success</a>();</div>
<div class="line"><a name="l00503"></a><span class="lineno">  503</span>&#160;}</div>
<div class="line"><a name="l00504"></a><span class="lineno">  504</span>&#160; </div>
<div class="line"><a name="l00505"></a><span class="lineno">  505</span>&#160;<span class="keywordtype">bool</span> BasicBlockSections::doInitialization(<a class="code" href="classllvm_1_1Module.html">Module</a> &amp;M) {</div>
<div class="line"><a name="l00506"></a><span class="lineno">  506</span>&#160;  <span class="keywordflow">if</span> (!MBuf)</div>
<div class="line"><a name="l00507"></a><span class="lineno">  507</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l00508"></a><span class="lineno">  508</span>&#160;  <span class="keywordflow">if</span> (<span class="keyword">auto</span> Err = <a class="code" href="BasicBlockSections_8cpp.html#aacf72417715a0033cccffbb124b39dfc">getBBClusterInfo</a>(MBuf, ProgramBBClusterInfo, FuncAliasMap))</div>
<div class="line"><a name="l00509"></a><span class="lineno">  509</span>&#160;    <a class="code" href="namespacellvm.html#a7f2a3d4dcfee70225988aec53ff1e173">report_fatal_error</a>(<a class="code" href="lib_2Target_2ARM_2README_8txt.html#ad3a99906764c35b2694ae90fa57744a5">std::move</a>(Err));</div>
<div class="line"><a name="l00510"></a><span class="lineno">  510</span>&#160;  <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l00511"></a><span class="lineno">  511</span>&#160;}</div>
<div class="line"><a name="l00512"></a><span class="lineno">  512</span>&#160; </div>
<div class="line"><a name="l00513"></a><span class="lineno">  513</span>&#160;<span class="keywordtype">void</span> BasicBlockSections::getAnalysisUsage(<a class="code" href="classllvm_1_1AnalysisUsage.html">AnalysisUsage</a> &amp;AU)<span class="keyword"> const </span>{</div>
<div class="line"><a name="l00514"></a><span class="lineno">  514</span>&#160;  AU.<a class="code" href="classllvm_1_1AnalysisUsage.html#af22b06a6a4f9df80454071685a0d6a02">setPreservesAll</a>();</div>
<div class="line"><a name="l00515"></a><span class="lineno">  515</span>&#160;  <a class="code" href="classllvm_1_1MachineFunctionPass.html#a864fd57b4304ef933b3281d0ef85a88e">MachineFunctionPass::getAnalysisUsage</a>(AU);</div>
<div class="line"><a name="l00516"></a><span class="lineno">  516</span>&#160;}</div>
<div class="line"><a name="l00517"></a><span class="lineno">  517</span>&#160; </div>
<div class="line"><a name="l00518"></a><span class="lineno">  518</span>&#160;<a class="code" href="classllvm_1_1MachineFunctionPass.html">MachineFunctionPass</a> *</div>
<div class="line"><a name="l00519"></a><span class="lineno"><a class="line" href="namespacellvm.html#acb37d848480610dbda2cd225dcdeb5ed">  519</a></span>&#160;<a class="code" href="namespacellvm.html#acb37d848480610dbda2cd225dcdeb5ed">llvm::createBasicBlockSectionsPass</a>(<span class="keyword">const</span> <a class="code" href="classllvm_1_1MemoryBuffer.html">MemoryBuffer</a> *Buf) {</div>
<div class="line"><a name="l00520"></a><span class="lineno">  520</span>&#160;  <span class="keywordflow">return</span> <span class="keyword">new</span> BasicBlockSections(Buf);</div>
<div class="line"><a name="l00521"></a><span class="lineno">  521</span>&#160;}</div>
</div><!-- fragment --></div><!-- contents -->
<div class="ttc" id="alib_2Target_2README_8txt_html_acb559820d9ca11295b4500f179ef6392"><div class="ttname"><a href="lib_2Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a></div><div class="ttdeci">i</div><div class="ttdef"><b>Definition:</b> <a href="lib_2Target_2README_8txt_source.html#l00029">README.txt:29</a></div></div>
<div class="ttc" id="aMemoryBuffer_8h_html"><div class="ttname"><a href="MemoryBuffer_8h.html">MemoryBuffer.h</a></div></div>
<div class="ttc" id="aIRTranslator_8cpp_html_abe44dfdea65b4f7e11e0a608ab708b76"><div class="ttname"><a href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a></div><div class="ttdeci">IRTranslator LLVM IR MI</div><div class="ttdef"><b>Definition:</b> <a href="IRTranslator_8cpp_source.html#l00102">IRTranslator.cpp:102</a></div></div>
<div class="ttc" id="anamespacellvm_html"><div class="ttname"><a href="namespacellvm.html">llvm</a></div><div class="ttdoc">--------------------- PointerInfo ------------------------------------</div><div class="ttdef"><b>Definition:</b> <a href="AllocatorList_8h_source.html#l00023">AllocatorList.h:23</a></div></div>
<div class="ttc" id="aOptional_8h_html"><div class="ttname"><a href="Optional_8h.html">Optional.h</a></div></div>
<div class="ttc" id="anamespacellvm_html_afad2bbe677ba3de73946c95070c7cdb1"><div class="ttname"><a href="namespacellvm.html#afad2bbe677ba3de73946c95070c7cdb1">llvm::sortBasicBlocksAndUpdateBranches</a></div><div class="ttdeci">void sortBasicBlocksAndUpdateBranches(MachineFunction &amp;MF, MachineBasicBlockComparator MBBCmp)</div><div class="ttdef"><b>Definition:</b> <a href="BasicBlockSections_8cpp_source.html#l00284">BasicBlockSections.cpp:284</a></div></div>
<div class="ttc" id="anamespacellvm_1_1WebAssembly_html_a8252c3c3e2c889ea98eea628b81d2999"><div class="ttname"><a href="namespacellvm_1_1WebAssembly.html#a8252c3c3e2c889ea98eea628b81d2999">llvm::WebAssembly::Nop</a></div><div class="ttdeci">static const unsigned Nop</div><div class="ttdoc">Instruction opcodes emitted via means other than CodeGen.</div><div class="ttdef"><b>Definition:</b> <a href="WebAssemblyMCTargetDesc_8h_source.html#l00133">WebAssemblyMCTargetDesc.h:133</a></div></div>
<div class="ttc" id="aclassllvm_1_1line__iterator_html"><div class="ttname"><a href="classllvm_1_1line__iterator.html">llvm::line_iterator</a></div><div class="ttdoc">A forward iterator which reads text lines from a buffer.</div><div class="ttdef"><b>Definition:</b> <a href="LineIterator_8h_source.html#l00033">LineIterator.h:33</a></div></div>
<div class="ttc" id="anamespacellvm_html_ada47e93839622848d23e6495c448161f"><div class="ttname"><a href="namespacellvm.html#ada47e93839622848d23e6495c448161f">llvm::BBSectionsColdTextPrefix</a></div><div class="ttdeci">cl::opt&lt; std::string &gt; BBSectionsColdTextPrefix</div></div>
<div class="ttc" id="aStringRef_8h_html"><div class="ttname"><a href="StringRef_8h.html">StringRef.h</a></div></div>
<div class="ttc" id="aREADME-SSE_8txt_html_a63d206a063eefcdf8c318ded97b65020"><div class="ttname"><a href="README-SSE_8txt.html#a63d206a063eefcdf8c318ded97b65020">P</a></div><div class="ttdeci">This currently compiles esp xmm0 movsd esp eax eax esp ret We should use not the dag combiner This is because dagcombine2 needs to be able to see through the X86ISD::Wrapper which DAGCombine can t really do The code for turning x load into a single vector load is target independent and should be moved to the dag combiner The code for turning x load into a vector load can only handle a direct load from a global or a direct load from the stack It should be generalized to handle any load from P</div><div class="ttdef"><b>Definition:</b> <a href="README-SSE_8txt_source.html#l00411">README-SSE.txt:411</a></div></div>
<div class="ttc" id="aclassllvm_1_1HexagonInstrInfo_html_a36c56da02f10d527ab7084e5d172d1d4"><div class="ttname"><a href="classllvm_1_1HexagonInstrInfo.html#a36c56da02f10d527ab7084e5d172d1d4">llvm::HexagonInstrInfo::analyzeBranch</a></div><div class="ttdeci">bool analyzeBranch(MachineBasicBlock &amp;MBB, MachineBasicBlock *&amp;TBB, MachineBasicBlock *&amp;FBB, SmallVectorImpl&lt; MachineOperand &gt; &amp;Cond, bool AllowModify) const override</div><div class="ttdoc">Analyze the branching code at the end of MBB, returning true if it cannot be understood (e....</div><div class="ttdef"><b>Definition:</b> <a href="HexagonInstrInfo_8cpp_source.html#l00391">HexagonInstrInfo.cpp:391</a></div></div>
<div class="ttc" id="aBasicBlockSections_8cpp_html_a7d0c135c530f2717ae6e0387f8d45cac"><div class="ttname"><a href="BasicBlockSections_8cpp.html#a7d0c135c530f2717ae6e0387f8d45cac">getBBClusterInfoForFunction</a></div><div class="ttdeci">static bool getBBClusterInfoForFunction(const MachineFunction &amp;MF, const StringMap&lt; StringRef &gt; FuncAliasMap, const ProgramBBClusterInfoMapTy &amp;ProgramBBClusterInfo, std::vector&lt; Optional&lt; BBClusterInfo &gt;&gt; &amp;V)</div><div class="ttdef"><b>Definition:</b> <a href="BasicBlockSections_8cpp_source.html#l00197">BasicBlockSections.cpp:197</a></div></div>
<div class="ttc" id="aclassllvm_1_1SmallVector_html"><div class="ttname"><a href="classllvm_1_1SmallVector.html">llvm::SmallVector</a></div><div class="ttdoc">This is a 'vector' (really, a variable-sized array), optimized for the case when the array is small.</div><div class="ttdef"><b>Definition:</b> <a href="SmallVector_8h_source.html#l01168">SmallVector.h:1169</a></div></div>
<div class="ttc" id="aclassllvm_1_1Error_html_a4dfd0813c3d0e0a30439b5a3e9196b59"><div class="ttname"><a href="classllvm_1_1Error.html#a4dfd0813c3d0e0a30439b5a3e9196b59">llvm::Error::success</a></div><div class="ttdeci">static ErrorSuccess success()</div><div class="ttdoc">Create a success value.</div><div class="ttdef"><b>Definition:</b> <a href="llvm_2Support_2Error_8h_source.html#l00332">Error.h:332</a></div></div>
<div class="ttc" id="aclassllvm_1_1GlobalObject_html_a61a186a60c64a2a5225db9944eaf7df8"><div class="ttname"><a href="classllvm_1_1GlobalObject.html#a61a186a60c64a2a5225db9944eaf7df8">llvm::GlobalObject::getMetadata</a></div><div class="ttdeci">MDNode * getMetadata(unsigned KindID) const</div><div class="ttdoc">Get the current metadata attachments for the given kind, if any.</div><div class="ttdef"><b>Definition:</b> <a href="Metadata_8cpp_source.html#l00565">Metadata.cpp:1197</a></div></div>
<div class="ttc" id="aclassllvm_1_1MachineFunctionPass_html"><div class="ttname"><a href="classllvm_1_1MachineFunctionPass.html">llvm::MachineFunctionPass</a></div><div class="ttdoc">MachineFunctionPass - This class adapts the FunctionPass interface to allow convenient creation of pa...</div><div class="ttdef"><b>Definition:</b> <a href="MachineFunctionPass_8h_source.html#l00030">MachineFunctionPass.h:30</a></div></div>
<div class="ttc" id="aBasicBlockSections_8cpp_html_a908f7d2df5ef691200a73df06eebde57"><div class="ttname"><a href="BasicBlockSections_8cpp.html#a908f7d2df5ef691200a73df06eebde57">avoidZeroOffsetLandingPad</a></div><div class="ttdeci">static bool avoidZeroOffsetLandingPad(MachineFunction &amp;MF)</div><div class="ttdef"><b>Definition:</b> <a href="BasicBlockSections_8cpp_source.html#l00306">BasicBlockSections.cpp:306</a></div></div>
<div class="ttc" id="anamespacellvm_1_1cl_html_a68075925a54790e71ca790e1d4f21a40a263ac008d8d31f13ce460395fc4cf7e6"><div class="ttname"><a href="namespacellvm_1_1cl.html#a68075925a54790e71ca790e1d4f21a40a263ac008d8d31f13ce460395fc4cf7e6">llvm::cl::Hidden</a></div><div class="ttdeci">@ Hidden</div><div class="ttdef"><b>Definition:</b> <a href="CommandLine_8h_source.html#l00143">CommandLine.h:143</a></div></div>
<div class="ttc" id="aclassllvm_1_1MachineFunction_html_aa22424ba23740b6a748e8d0c239b7e4c"><div class="ttname"><a href="classllvm_1_1MachineFunction.html#aa22424ba23740b6a748e8d0c239b7e4c">llvm::MachineFunction::getNumBlockIDs</a></div><div class="ttdeci">unsigned getNumBlockIDs() const</div><div class="ttdoc">getNumBlockIDs - Return the number of MBB ID's allocated.</div><div class="ttdef"><b>Definition:</b> <a href="MachineFunction_8h_source.html#l00749">MachineFunction.h:749</a></div></div>
<div class="ttc" id="aclassllvm_1_1StringMap_html_a16e5eaf2df56249e87019be23ee07695"><div class="ttname"><a href="classllvm_1_1StringMap.html#a16e5eaf2df56249e87019be23ee07695">llvm::StringMap::end</a></div><div class="ttdeci">iterator end()</div><div class="ttdef"><b>Definition:</b> <a href="StringMap_8h_source.html#l00205">StringMap.h:205</a></div></div>
<div class="ttc" id="aTargetInstrInfo_8h_html"><div class="ttname"><a href="TargetInstrInfo_8h.html">TargetInstrInfo.h</a></div></div>
<div class="ttc" id="astructllvm_1_1MBBSectionID_html_a2948b9ecb725f98db2afa43ce1d78b94"><div class="ttname"><a href="structllvm_1_1MBBSectionID.html#a2948b9ecb725f98db2afa43ce1d78b94">llvm::MBBSectionID::Number</a></div><div class="ttdeci">unsigned Number</div><div class="ttdef"><b>Definition:</b> <a href="MachineBasicBlock_8h_source.html#l00059">MachineBasicBlock.h:59</a></div></div>
<div class="ttc" id="aclassllvm_1_1SmallSet_html"><div class="ttname"><a href="classllvm_1_1SmallSet.html">llvm::SmallSet</a></div><div class="ttdoc">SmallSet - This maintains a set of unique values, optimizing for the case when the set is small (less...</div><div class="ttdef"><b>Definition:</b> <a href="SmallSet_8h_source.html#l00134">SmallSet.h:134</a></div></div>
<div class="ttc" id="aclassllvm_1_1Optional_html"><div class="ttname"><a href="classllvm_1_1Optional.html">llvm::Optional</a></div><div class="ttdef"><b>Definition:</b> <a href="Optional_8h_source.html#l00238">Optional.h:238</a></div></div>
<div class="ttc" id="aBasicBlockSections_8cpp_html_aacf72417715a0033cccffbb124b39dfc"><div class="ttname"><a href="BasicBlockSections_8cpp.html#aacf72417715a0033cccffbb124b39dfc">getBBClusterInfo</a></div><div class="ttdeci">static Error getBBClusterInfo(const MemoryBuffer *MBuf, ProgramBBClusterInfoMapTy &amp;ProgramBBClusterInfo, StringMap&lt; StringRef &gt; &amp;FuncAliasMap)</div><div class="ttdef"><b>Definition:</b> <a href="BasicBlockSections_8cpp_source.html#l00431">BasicBlockSections.cpp:431</a></div></div>
<div class="ttc" id="aclassllvm_1_1MCInst_html"><div class="ttname"><a href="classllvm_1_1MCInst.html">llvm::MCInst</a></div><div class="ttdoc">Instances of this class represent a single low-level machine instruction.</div><div class="ttdef"><b>Definition:</b> <a href="MCInst_8h_source.html#l00184">MCInst.h:184</a></div></div>
<div class="ttc" id="aclassllvm_1_1StringMap_html_a49e68e4c86fe0b96c633adea0c366d74"><div class="ttname"><a href="classllvm_1_1StringMap.html#a49e68e4c86fe0b96c633adea0c366d74">llvm::StringMap::find</a></div><div class="ttdeci">iterator find(StringRef Key)</div><div class="ttdef"><b>Definition:</b> <a href="StringMap_8h_source.html#l00218">StringMap.h:218</a></div></div>
<div class="ttc" id="astructllvm_1_1MBBSectionID_html"><div class="ttname"><a href="structllvm_1_1MBBSectionID.html">llvm::MBBSectionID</a></div><div class="ttdef"><b>Definition:</b> <a href="MachineBasicBlock_8h_source.html#l00052">MachineBasicBlock.h:52</a></div></div>
<div class="ttc" id="anamespacellvm_html_acefe92adee8725ad904c7c43649790e8a4ee29ca12c7d126654bd0e5275de6135"><div class="ttname"><a href="namespacellvm.html#acefe92adee8725ad904c7c43649790e8a4ee29ca12c7d126654bd0e5275de6135">llvm::BasicBlockSection::List</a></div><div class="ttdeci">@ List</div></div>
<div class="ttc" id="anamespacellvm_html_acefe92adee8725ad904c7c43649790e8a6adf97f83acf6453d4a6a4b1070f3754"><div class="ttname"><a href="namespacellvm.html#acefe92adee8725ad904c7c43649790e8a6adf97f83acf6453d4a6a4b1070f3754">llvm::BasicBlockSection::None</a></div><div class="ttdeci">@ None</div></div>
<div class="ttc" id="aclassllvm_1_1MemoryBuffer_html"><div class="ttname"><a href="classllvm_1_1MemoryBuffer.html">llvm::MemoryBuffer</a></div><div class="ttdoc">This interface provides simple read-only access to a block of memory, and provides simple methods for...</div><div class="ttdef"><b>Definition:</b> <a href="MemoryBuffer_8h_source.html#l00050">MemoryBuffer.h:50</a></div></div>
<div class="ttc" id="aclassllvm_1_1MachineFunctionPass_html_a864fd57b4304ef933b3281d0ef85a88e"><div class="ttname"><a href="classllvm_1_1MachineFunctionPass.html#a864fd57b4304ef933b3281d0ef85a88e">llvm::MachineFunctionPass::getAnalysisUsage</a></div><div class="ttdeci">void getAnalysisUsage(AnalysisUsage &amp;AU) const override</div><div class="ttdoc">getAnalysisUsage - Subclasses that override getAnalysisUsage must call this.</div><div class="ttdef"><b>Definition:</b> <a href="MachineFunctionPass_8cpp_source.html#l00102">MachineFunctionPass.cpp:102</a></div></div>
<div class="ttc" id="aclassllvm_1_1MDNode_html_a7d10a7b9b7f40b04d27ed97c38ea1950"><div class="ttname"><a href="classllvm_1_1MDNode.html#a7d10a7b9b7f40b04d27ed97c38ea1950">llvm::MDNode::get</a></div><div class="ttdeci">static MDTuple * get(LLVMContext &amp;Context, ArrayRef&lt; Metadata * &gt; MDs)</div><div class="ttdef"><b>Definition:</b> <a href="Metadata_8h_source.html#l01199">Metadata.h:1199</a></div></div>
<div class="ttc" id="anamespacellvm_1_1RISCVFenceField_html_a147be9e9780c1e33363ea572d4c7b25fa1835091d83e0e052cd1a32c99b2be731"><div class="ttname"><a href="namespacellvm_1_1RISCVFenceField.html#a147be9e9780c1e33363ea572d4c7b25fa1835091d83e0e052cd1a32c99b2be731">llvm::RISCVFenceField::R</a></div><div class="ttdeci">@ R</div><div class="ttdef"><b>Definition:</b> <a href="RISCVBaseInfo_8h_source.html#l00180">RISCVBaseInfo.h:180</a></div></div>
<div class="ttc" id="aclassllvm_1_1MDNode_html_a072c9e049554ca7a1c987fd81133d746"><div class="ttname"><a href="classllvm_1_1MDNode.html#a072c9e049554ca7a1c987fd81133d746">llvm::MDNode::operands</a></div><div class="ttdeci">op_range operands() const</div><div class="ttdef"><b>Definition:</b> <a href="Metadata_8h_source.html#l01101">Metadata.h:1101</a></div></div>
<div class="ttc" id="aclassllvm_1_1MachineBasicBlock_html_ad4835355c1e5ca306abd15f5b90bd9b4"><div class="ttname"><a href="classllvm_1_1MachineBasicBlock.html#ad4835355c1e5ca306abd15f5b90bd9b4">llvm::MachineBasicBlock::isBeginSection</a></div><div class="ttdeci">bool isBeginSection() const</div><div class="ttdoc">Returns true if this block begins any section.</div><div class="ttdef"><b>Definition:</b> <a href="MachineBasicBlock_8h_source.html#l00564">MachineBasicBlock.h:564</a></div></div>
<div class="ttc" id="aclassllvm_1_1Optional_html_ab8f06efe88f146384116a787058ab420"><div class="ttname"><a href="classllvm_1_1Optional.html#ab8f06efe88f146384116a787058ab420">llvm::Optional::hasValue</a></div><div class="ttdeci">constexpr bool hasValue() const</div><div class="ttdef"><b>Definition:</b> <a href="Optional_8h_source.html#l00288">Optional.h:288</a></div></div>
<div class="ttc" id="aclassllvm_1_1MachineBasicBlock_html_aac864a2ce4f4fcac4c21062b29986c5c"><div class="ttname"><a href="classllvm_1_1MachineBasicBlock.html#aac864a2ce4f4fcac4c21062b29986c5c">llvm::MachineBasicBlock::setSectionID</a></div><div class="ttdeci">void setSectionID(MBBSectionID V)</div><div class="ttdoc">Sets the section ID for this basic block.</div><div class="ttdef"><b>Definition:</b> <a href="MachineBasicBlock_8h_source.html#l00583">MachineBasicBlock.h:583</a></div></div>
<div class="ttc" id="aclassllvm_1_1MachineFunction_html_ab1063ce5e180c89490fae50511a46a29"><div class="ttname"><a href="classllvm_1_1MachineFunction.html#ab1063ce5e180c89490fae50511a46a29">llvm::MachineFunction::front</a></div><div class="ttdeci">const MachineBasicBlock &amp; front() const</div><div class="ttdef"><b>Definition:</b> <a href="MachineFunction_8h_source.html#l00816">MachineFunction.h:816</a></div></div>
<div class="ttc" id="anamespacellvm_html_a8fc529c79977cdd01e187986f960a07f"><div class="ttname"><a href="namespacellvm.html#a8fc529c79977cdd01e187986f960a07f">llvm::SmallVector</a></div><div class="ttdeci">class LLVM_GSL_OWNER SmallVector</div><div class="ttdoc">Forward declaration of SmallVector so that calculateSmallVectorDefaultInlinedElements can reference s...</div><div class="ttdef"><b>Definition:</b> <a href="SmallVector_8h_source.html#l01020">SmallVector.h:1095</a></div></div>
<div class="ttc" id="aclassllvm_1_1TargetInstrInfo_html"><div class="ttname"><a href="classllvm_1_1TargetInstrInfo.html">llvm::TargetInstrInfo</a></div><div class="ttdoc">TargetInstrInfo - Interface to description of machine instruction set.</div><div class="ttdef"><b>Definition:</b> <a href="TargetInstrInfo_8h_source.html#l00097">TargetInstrInfo.h:97</a></div></div>
<div class="ttc" id="aclassllvm_1_1PassRegistry_html_a05a729900b76c89e808c6c3094921b2f"><div class="ttname"><a href="classllvm_1_1PassRegistry.html#a05a729900b76c89e808c6c3094921b2f">llvm::PassRegistry::getPassRegistry</a></div><div class="ttdeci">static PassRegistry * getPassRegistry()</div><div class="ttdoc">getPassRegistry - Access the global registry object, which is automatically initialized at applicatio...</div><div class="ttdef"><b>Definition:</b> <a href="PassRegistry_8cpp_source.html#l00031">PassRegistry.cpp:31</a></div></div>
<div class="ttc" id="anamespacellvm_html_aceda0d316aed2b818b731917d21b88bc"><div class="ttname"><a href="namespacellvm.html#aceda0d316aed2b818b731917d21b88bc">llvm::getAsUnsignedInteger</a></div><div class="ttdeci">bool getAsUnsignedInteger(StringRef Str, unsigned Radix, unsigned long long &amp;Result)</div><div class="ttdoc">Helper functions for StringRef::getAsInteger.</div><div class="ttdef"><b>Definition:</b> <a href="StringRef_8cpp_source.html#l00485">StringRef.cpp:485</a></div></div>
<div class="ttc" id="aOcamlGCPrinter_8cpp_html_afcf2f797ed287a723263583c9b1c1bce"><div class="ttname"><a href="OcamlGCPrinter_8cpp.html#afcf2f797ed287a723263583c9b1c1bce">Y</a></div><div class="ttdeci">static GCMetadataPrinterRegistry::Add&lt; OcamlGCMetadataPrinter &gt; Y(&quot;ocaml&quot;, &quot;ocaml 3.10-compatible collector&quot;)</div></div>
<div class="ttc" id="aclassllvm_1_1AnalysisUsage_html"><div class="ttname"><a href="classllvm_1_1AnalysisUsage.html">llvm::AnalysisUsage</a></div><div class="ttdoc">Represent the analysis usage information of a pass.</div><div class="ttdef"><b>Definition:</b> <a href="PassAnalysisSupport_8h_source.html#l00047">PassAnalysisSupport.h:47</a></div></div>
<div class="ttc" id="allvm_2Target_2TargetMachine_8h_html"><div class="ttname"><a href="llvm_2Target_2TargetMachine_8h.html">TargetMachine.h</a></div></div>
<div class="ttc" id="aclassllvm_1_1MDTuple_html"><div class="ttname"><a href="classllvm_1_1MDTuple.html">llvm::MDTuple</a></div><div class="ttdoc">Tuple of metadata.</div><div class="ttdef"><b>Definition:</b> <a href="Metadata_8h_source.html#l01140">Metadata.h:1140</a></div></div>
<div class="ttc" id="aHexagonCopyToCombine_8cpp_html_a1d40004718218dbdf06b496766299101"><div class="ttname"><a href="HexagonCopyToCombine_8cpp.html#a1d40004718218dbdf06b496766299101">TII</a></div><div class="ttdeci">const HexagonInstrInfo * TII</div><div class="ttdef"><b>Definition:</b> <a href="HexagonCopyToCombine_8cpp_source.html#l00129">HexagonCopyToCombine.cpp:129</a></div></div>
<div class="ttc" id="anamespacellvm_html_acefe92adee8725ad904c7c43649790e8a3ad6cb6100190c8f81e99fd52debf7ef"><div class="ttname"><a href="namespacellvm.html#acefe92adee8725ad904c7c43649790e8a3ad6cb6100190c8f81e99fd52debf7ef">llvm::BasicBlockSection::Labels</a></div><div class="ttdeci">@ Labels</div></div>
<div class="ttc" id="aBasicBlockSections_8cpp_html_a04f99531130ada5826ce2b96ec79d8d7"><div class="ttname"><a href="BasicBlockSections_8cpp.html#a04f99531130ada5826ce2b96ec79d8d7">INITIALIZE_PASS</a></div><div class="ttdeci">INITIALIZE_PASS(BasicBlockSections, &quot;bbsections-prepare&quot;, &quot;Prepares for basic block sections, by splitting functions &quot; &quot;into clusters of basic blocks.&quot;, false, false) static void updateBranches(MachineFunction &amp;MF</div></div>
<div class="ttc" id="aLineIterator_8h_html"><div class="ttname"><a href="LineIterator_8h.html">LineIterator.h</a></div></div>
<div class="ttc" id="anamespacellvm_html_a7f2a3d4dcfee70225988aec53ff1e173"><div class="ttname"><a href="namespacellvm.html#a7f2a3d4dcfee70225988aec53ff1e173">llvm::report_fatal_error</a></div><div class="ttdeci">LLVM_ATTRIBUTE_NORETURN void report_fatal_error(Error Err, bool gen_crash_diag=true)</div><div class="ttdoc">Report a serious error, calling any installed error handler.</div><div class="ttdef"><b>Definition:</b> <a href="Testing_2Support_2Error_8cpp_source.html#l00140">Error.cpp:140</a></div></div>
<div class="ttc" id="anamespacellvm_html_acefe92adee8725ad904c7c43649790e8ab1c94ca2fbc3e78fc30069c8d0f01680"><div class="ttname"><a href="namespacellvm.html#acefe92adee8725ad904c7c43649790e8ab1c94ca2fbc3e78fc30069c8d0f01680">llvm::BasicBlockSection::All</a></div><div class="ttdeci">@ All</div></div>
<div class="ttc" id="aStringMap_8h_html"><div class="ttname"><a href="StringMap_8h.html">StringMap.h</a></div></div>
<div class="ttc" id="aErlangGCPrinter_8cpp_html_a74b474c0616ab55c1d9487f11fd31d26"><div class="ttname"><a href="ErlangGCPrinter_8cpp.html#a74b474c0616ab55c1d9487f11fd31d26">X</a></div><div class="ttdeci">static GCMetadataPrinterRegistry::Add&lt; ErlangGCPrinter &gt; X(&quot;erlang&quot;, &quot;erlang-compatible garbage collector&quot;)</div></div>
<div class="ttc" id="aclassllvm_1_1MachineBasicBlock_html"><div class="ttname"><a href="classllvm_1_1MachineBasicBlock.html">llvm::MachineBasicBlock</a></div><div class="ttdef"><b>Definition:</b> <a href="MachineBasicBlock_8h_source.html#l00095">MachineBasicBlock.h:96</a></div></div>
<div class="ttc" id="aclassllvm_1_1StringMap_html"><div class="ttname"><a href="classllvm_1_1StringMap.html">llvm::StringMap</a></div><div class="ttdoc">StringMap - This is an unconventional map that is specialized for handling keys that are &quot;strings&quot;,...</div><div class="ttdef"><b>Definition:</b> <a href="StringMap_8h_source.html#l00108">StringMap.h:108</a></div></div>
<div class="ttc" id="aclassllvm_1_1MemoryBuffer_html_a2037f11968aa30bfda0b4de9f335624d"><div class="ttname"><a href="classllvm_1_1MemoryBuffer.html#a2037f11968aa30bfda0b4de9f335624d">llvm::MemoryBuffer::getBufferIdentifier</a></div><div class="ttdeci">virtual StringRef getBufferIdentifier() const</div><div class="ttdoc">Return an identifier for this buffer, typically the filename it was read from.</div><div class="ttdef"><b>Definition:</b> <a href="MemoryBuffer_8h_source.html#l00075">MemoryBuffer.h:75</a></div></div>
<div class="ttc" id="aCodeGen_2Passes_8h_html"><div class="ttname"><a href="CodeGen_2Passes_8h.html">Passes.h</a></div></div>
<div class="ttc" id="aclassllvm_1_1function__ref_html"><div class="ttname"><a href="classllvm_1_1function__ref.html">llvm::function_ref</a></div><div class="ttdoc">An efficient, type-erasing, non-owning reference to a callable.</div><div class="ttdef"><b>Definition:</b> <a href="STLExtras_8h_source.html#l00168">STLExtras.h:168</a></div></div>
<div class="ttc" id="aclassllvm_1_1cl_1_1opt_html"><div class="ttname"><a href="classllvm_1_1cl_1_1opt.html">llvm::cl::opt</a></div><div class="ttdef"><b>Definition:</b> <a href="CommandLine_8h_source.html#l01422">CommandLine.h:1424</a></div></div>
<div class="ttc" id="allvm_2Support_2Error_8h_html"><div class="ttname"><a href="llvm_2Support_2Error_8h.html">Error.h</a></div></div>
<div class="ttc" id="aAArch64PromoteConstant_8cpp_html_a90f8350fecae261c25be85d38b451bff"><div class="ttname"><a href="AArch64PromoteConstant_8cpp.html#a90f8350fecae261c25be85d38b451bff">const</a></div><div class="ttdeci">aarch64 promote const</div><div class="ttdef"><b>Definition:</b> <a href="AArch64PromoteConstant_8cpp_source.html#l00232">AArch64PromoteConstant.cpp:232</a></div></div>
<div class="ttc" id="alib_2Target_2ARM_2README_8txt_html_ad3a99906764c35b2694ae90fa57744a5"><div class="ttname"><a href="lib_2Target_2ARM_2README_8txt.html#ad3a99906764c35b2694ae90fa57744a5">move</a></div><div class="ttdeci">compiles ldr LCPI1_0 ldr ldr mov lsr tst moveq r1 ldr LCPI1_1 and r0 bx lr It would be better to do something like to fold the shift into the conditional move</div><div class="ttdef"><b>Definition:</b> <a href="lib_2Target_2ARM_2README_8txt_source.html#l00544">README.txt:546</a></div></div>
<div class="ttc" id="aBasicBlockSectionUtils_8h_html"><div class="ttname"><a href="BasicBlockSectionUtils_8h.html">BasicBlockSectionUtils.h</a></div></div>
<div class="ttc" id="anamespacellvm_1_1cl_html_a10a041239ae1870cfcc064bfaa79fb65"><div class="ttname"><a href="namespacellvm_1_1cl.html#a10a041239ae1870cfcc064bfaa79fb65">llvm::cl::init</a></div><div class="ttdeci">initializer&lt; Ty &gt; init(const Ty &amp;Val)</div><div class="ttdef"><b>Definition:</b> <a href="CommandLine_8h_source.html#l00443">CommandLine.h:443</a></div></div>
<div class="ttc" id="aMachineFunctionPass_8h_html"><div class="ttname"><a href="MachineFunctionPass_8h.html">MachineFunctionPass.h</a></div></div>
<div class="ttc" id="aclassllvm_1_1MachineFunction_html_a3d142c9e7c066059e15232c56dec9e2e"><div class="ttname"><a href="classllvm_1_1MachineFunction.html#a3d142c9e7c066059e15232c56dec9e2e">llvm::MachineFunction::getName</a></div><div class="ttdeci">StringRef getName() const</div><div class="ttdoc">getName - Return the name of the corresponding LLVM function.</div><div class="ttdef"><b>Definition:</b> <a href="MachineFunction_8cpp_source.html#l00541">MachineFunction.cpp:541</a></div></div>
<div class="ttc" id="astructllvm_1_1MBBSectionID_html_a27940a53407c67036b8292fa9bf4721d"><div class="ttname"><a href="structllvm_1_1MBBSectionID.html#a27940a53407c67036b8292fa9bf4721d">llvm::MBBSectionID::ExceptionSectionID</a></div><div class="ttdeci">static const MBBSectionID ExceptionSectionID</div><div class="ttdef"><b>Definition:</b> <a href="MachineBasicBlock_8h_source.html#l00065">MachineBasicBlock.h:65</a></div></div>
<div class="ttc" id="aSILowerControlFlow_8cpp_html_a4868c5d81c5ccc98c47aeab6244346a0"><div class="ttname"><a href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a></div><div class="ttdeci">assert(ImpDefSCC.getReg()==AMDGPU::SCC &amp;&amp;ImpDefSCC.isDef())</div></div>
<div class="ttc" id="aMachineModuleInfo_8h_html"><div class="ttname"><a href="MachineModuleInfo_8h.html">MachineModuleInfo.h</a></div></div>
<div class="ttc" id="aclassllvm_1_1Module_html"><div class="ttname"><a href="classllvm_1_1Module.html">llvm::Module</a></div><div class="ttdoc">A Module instance is used to store all the information related to an LLVM module.</div><div class="ttdef"><b>Definition:</b> <a href="Module_8h_source.html#l00067">Module.h:67</a></div></div>
<div class="ttc" id="aclassllvm_1_1MachineFunction_html"><div class="ttname"><a href="classllvm_1_1MachineFunction.html">llvm::MachineFunction</a></div><div class="ttdef"><b>Definition:</b> <a href="MachineFunction_8h_source.html#l00230">MachineFunction.h:230</a></div></div>
<div class="ttc" id="aclassllvm_1_1MachineBasicBlock_html_a3aa22d521bd6a7e6b9f35545dc7b0f1e"><div class="ttname"><a href="classllvm_1_1MachineBasicBlock.html#a3aa22d521bd6a7e6b9f35545dc7b0f1e">llvm::MachineBasicBlock::getNumber</a></div><div class="ttdeci">int getNumber() const</div><div class="ttdoc">MachineBasicBlocks are uniquely numbered at the function level, unless they're not in a MachineFuncti...</div><div class="ttdef"><b>Definition:</b> <a href="MachineBasicBlock_8h_source.html#l01056">MachineBasicBlock.h:1056</a></div></div>
<div class="ttc" id="aBasicBlockSections_8cpp_html_a5fd0741d696f28faf65b33f6c6af8fda"><div class="ttname"><a href="BasicBlockSections_8cpp.html#a5fd0741d696f28faf65b33f6c6af8fda">Cond</a></div><div class="ttdeci">SmallVector&lt; MachineOperand, 4 &gt; Cond</div><div class="ttdef"><b>Definition:</b> <a href="BasicBlockSections_8cpp_source.html#l00167">BasicBlockSections.cpp:167</a></div></div>
<div class="ttc" id="aclassllvm_1_1MachineBasicBlock_html_a1100bfbadd996d464150c6a68fa8dc1d"><div class="ttname"><a href="classllvm_1_1MachineBasicBlock.html#a1100bfbadd996d464150c6a68fa8dc1d">llvm::MachineBasicBlock::isEHPad</a></div><div class="ttdeci">bool isEHPad() const</div><div class="ttdoc">Returns true if the block is a landing pad.</div><div class="ttdef"><b>Definition:</b> <a href="MachineBasicBlock_8h_source.html#l00526">MachineBasicBlock.h:526</a></div></div>
<div class="ttc" id="aclassllvm_1_1StringRef_html"><div class="ttname"><a href="classllvm_1_1StringRef.html">llvm::StringRef</a></div><div class="ttdoc">StringRef - Represent a constant reference to a string, i.e.</div><div class="ttdef"><b>Definition:</b> <a href="StringRef_8h_source.html#l00058">StringRef.h:58</a></div></div>
<div class="ttc" id="aclassllvm_1_1MachineBasicBlock_html_ad81901d0d8b768b240e78bf357999f34"><div class="ttname"><a href="classllvm_1_1MachineBasicBlock.html#ad81901d0d8b768b240e78bf357999f34">llvm::MachineBasicBlock::findBranchDebugLoc</a></div><div class="ttdeci">DebugLoc findBranchDebugLoc()</div><div class="ttdoc">Find and return the merged DebugLoc of the branch instructions of the block.</div><div class="ttdef"><b>Definition:</b> <a href="MachineBasicBlock_8cpp_source.html#l01412">MachineBasicBlock.cpp:1412</a></div></div>
<div class="ttc" id="astructllvm_1_1MBBSectionID_html_a82d1efaa8d99c6fa3360fc8b695cc0bb"><div class="ttname"><a href="structllvm_1_1MBBSectionID.html#a82d1efaa8d99c6fa3360fc8b695cc0bb">llvm::MBBSectionID::Type</a></div><div class="ttdeci">enum llvm::MBBSectionID::SectionType Type</div></div>
<div class="ttc" id="aclassllvm_1_1ilist__node__impl_html_af719fc783be6589465137d997701a432"><div class="ttname"><a href="classllvm_1_1ilist__node__impl.html#af719fc783be6589465137d997701a432">llvm::ilist_node_impl::getIterator</a></div><div class="ttdeci">self_iterator getIterator()</div><div class="ttdef"><b>Definition:</b> <a href="ilist__node_8h_source.html#l00081">ilist_node.h:81</a></div></div>
<div class="ttc" id="alib_2Target_2ARM_2README_8txt_html_a1b45f45820a60c09244a87eb59824aec"><div class="ttname"><a href="lib_2Target_2ARM_2README_8txt.html#a1b45f45820a60c09244a87eb59824aec">S</a></div><div class="ttdeci">add sub stmia L5 ldr r0 bl L_printf $stub Instead of a and a wouldn t it be better to do three moves *Return an aggregate type is even return S</div><div class="ttdef"><b>Definition:</b> <a href="lib_2Target_2ARM_2README_8txt_source.html#l00211">README.txt:210</a></div></div>
<div class="ttc" id="aclassllvm_1_1MachineFunction_html_a74e97fc3012191edf10e8c51291da4a7"><div class="ttname"><a href="classllvm_1_1MachineFunction.html#a74e97fc3012191edf10e8c51291da4a7">llvm::MachineFunction::hasBBSections</a></div><div class="ttdeci">bool hasBBSections() const</div><div class="ttdoc">Returns true if this function has basic block sections enabled.</div><div class="ttdef"><b>Definition:</b> <a href="MachineFunction_8h_source.html#l00600">MachineFunction.h:600</a></div></div>
<div class="ttc" id="anamespacellvm_html_aa0d2314a668f0ec788a393f088eb479d"><div class="ttname"><a href="namespacellvm.html#aa0d2314a668f0ec788a393f088eb479d">llvm::initializeBasicBlockSectionsPass</a></div><div class="ttdeci">void initializeBasicBlockSectionsPass(PassRegistry &amp;)</div></div>
<div class="ttc" id="aclassllvm_1_1SmallSet_html_a892daa20eb21173ba89e9fe9702e7f6c"><div class="ttname"><a href="classllvm_1_1SmallSet.html#a892daa20eb21173ba89e9fe9702e7f6c">llvm::SmallSet::insert</a></div><div class="ttdeci">std::pair&lt; NoneType, bool &gt; insert(const T &amp;V)</div><div class="ttdoc">insert - Insert an element into the set if it isn't already there.</div><div class="ttdef"><b>Definition:</b> <a href="SmallSet_8h_source.html#l00180">SmallSet.h:180</a></div></div>
<div class="ttc" id="aclassllvm_1_1MachineBasicBlock_html_a87ee39ccabd6fa5abe6302ebffd768c9"><div class="ttname"><a href="classllvm_1_1MachineBasicBlock.html#a87ee39ccabd6fa5abe6302ebffd768c9">llvm::MachineBasicBlock::getSectionID</a></div><div class="ttdeci">MBBSectionID getSectionID() const</div><div class="ttdoc">Returns the section ID of this basic block.</div><div class="ttdef"><b>Definition:</b> <a href="MachineBasicBlock_8h_source.html#l00574">MachineBasicBlock.h:574</a></div></div>
<div class="ttc" id="aAArch64SLSHardening_8cpp_html_a5958512eae2979bd2eb383977996a600"><div class="ttname"><a href="AArch64SLSHardening_8cpp.html#a5958512eae2979bd2eb383977996a600">MBB</a></div><div class="ttdeci">MachineBasicBlock &amp; MBB</div><div class="ttdef"><b>Definition:</b> <a href="AArch64SLSHardening_8cpp_source.html#l00074">AArch64SLSHardening.cpp:74</a></div></div>
<div class="ttc" id="aclassllvm_1_1Twine_html"><div class="ttname"><a href="classllvm_1_1Twine.html">llvm::Twine</a></div><div class="ttdoc">Twine - A lightweight data structure for efficiently representing the concatenation of temporary valu...</div><div class="ttdef"><b>Definition:</b> <a href="Twine_8h_source.html#l00083">Twine.h:83</a></div></div>
<div class="ttc" id="aBasicBlockSections_8cpp_html_a881d0acd36db4711b50eeefff3112067"><div class="ttname"><a href="BasicBlockSections_8cpp.html#a881d0acd36db4711b50eeefff3112067">hasInstrProfHashMismatch</a></div><div class="ttdeci">static bool hasInstrProfHashMismatch(MachineFunction &amp;MF)</div><div class="ttdef"><b>Definition:</b> <a href="BasicBlockSections_8cpp_source.html#l00326">BasicBlockSections.cpp:326</a></div></div>
<div class="ttc" id="aclassllvm_1_1MachineFunction_html_a4b21394c138cc5ae719510bb529ee099"><div class="ttname"><a href="classllvm_1_1MachineFunction.html#a4b21394c138cc5ae719510bb529ee099">llvm::MachineFunction::getFunction</a></div><div class="ttdeci">Function &amp; getFunction()</div><div class="ttdoc">Return the LLVM function that this machine code represents.</div><div class="ttdef"><b>Definition:</b> <a href="MachineFunction_8h_source.html#l00588">MachineFunction.h:588</a></div></div>
<div class="ttc" id="anamespacellvm_html_a2b43c21951d0948b34bcf7019949032d"><div class="ttname"><a href="namespacellvm.html#a2b43c21951d0948b34bcf7019949032d">llvm::inconvertibleErrorCode</a></div><div class="ttdeci">std::error_code inconvertibleErrorCode()</div><div class="ttdoc">The value returned by this function can be returned from convertToErrorCode for Error values where no...</div><div class="ttdef"><b>Definition:</b> <a href="Testing_2Support_2Error_8cpp_source.html#l00077">Error.cpp:77</a></div></div>
<div class="ttc" id="aclassllvm_1_1AnalysisUsage_html_af22b06a6a4f9df80454071685a0d6a02"><div class="ttname"><a href="classllvm_1_1AnalysisUsage.html#af22b06a6a4f9df80454071685a0d6a02">llvm::AnalysisUsage::setPreservesAll</a></div><div class="ttdeci">void setPreservesAll()</div><div class="ttdoc">Set by analyses that do not transform their input at all.</div><div class="ttdef"><b>Definition:</b> <a href="PassAnalysisSupport_8h_source.html#l00130">PassAnalysisSupport.h:130</a></div></div>
<div class="ttc" id="aclassllvm_1_1MachineFunction_html_ae68d159179d37dc7969439d842e2644f"><div class="ttname"><a href="classllvm_1_1MachineFunction.html#ae68d159179d37dc7969439d842e2644f">llvm::MachineFunction::getTarget</a></div><div class="ttdeci">const LLVMTargetMachine &amp; getTarget() const</div><div class="ttdoc">getTarget - Return the target machine this machine code is compiled with</div><div class="ttdef"><b>Definition:</b> <a href="MachineFunction_8h_source.html#l00618">MachineFunction.h:618</a></div></div>
<div class="ttc" id="aclassllvm_1_1MachineBasicBlock_html_ae0fd0a5397ceb88bd0d58ecb1708e1dc"><div class="ttname"><a href="classllvm_1_1MachineBasicBlock.html#ae0fd0a5397ceb88bd0d58ecb1708e1dc">llvm::MachineBasicBlock::isEndSection</a></div><div class="ttdeci">bool isEndSection() const</div><div class="ttdoc">Returns true if this block ends any section.</div><div class="ttdef"><b>Definition:</b> <a href="MachineBasicBlock_8h_source.html#l00567">MachineBasicBlock.h:567</a></div></div>
<div class="ttc" id="astructllvm_1_1MBBSectionID_html_a2cbbe04f568b5890eeb2b58c0cbf6d71"><div class="ttname"><a href="structllvm_1_1MBBSectionID.html#a2cbbe04f568b5890eeb2b58c0cbf6d71">llvm::MBBSectionID::ColdSectionID</a></div><div class="ttdeci">static const MBBSectionID ColdSectionID</div><div class="ttdef"><b>Definition:</b> <a href="MachineBasicBlock_8h_source.html#l00064">MachineBasicBlock.h:64</a></div></div>
<div class="ttc" id="aBasicBlockSections_8cpp_html_a98a48f24b040649ac9f8d80695047c38"><div class="ttname"><a href="BasicBlockSections_8cpp.html#a98a48f24b040649ac9f8d80695047c38">BBSectionsDetectSourceDrift</a></div><div class="ttdeci">cl::opt&lt; bool &gt; BBSectionsDetectSourceDrift(&quot;bbsections-detect-source-drift&quot;, cl::desc(&quot;This checks if there is a fdo instr. profile hash &quot; &quot;mismatch for this function&quot;), cl::init(true), cl::Hidden)</div></div>
<div class="ttc" id="anamespacellvm_html_acb37d848480610dbda2cd225dcdeb5ed"><div class="ttname"><a href="namespacellvm.html#acb37d848480610dbda2cd225dcdeb5ed">llvm::createBasicBlockSectionsPass</a></div><div class="ttdeci">MachineFunctionPass * createBasicBlockSectionsPass(const MemoryBuffer *Buf)</div><div class="ttdoc">createBasicBlockSections Pass - This pass assigns sections to machine basic blocks and is enabled wit...</div><div class="ttdef"><b>Definition:</b> <a href="BasicBlockSections_8cpp_source.html#l00519">BasicBlockSections.cpp:519</a></div></div>
<div class="ttc" id="aclassllvm_1_1Error_html"><div class="ttname"><a href="classllvm_1_1Error.html">llvm::Error</a></div><div class="ttdoc">Lightweight error class with error context and mandatory checking.</div><div class="ttdef"><b>Definition:</b> <a href="llvm_2Support_2Error_8h_source.html#l00157">Error.h:157</a></div></div>
<div class="ttc" id="anamespacellvm_1_1TargetStackID_html_a71392100eb15ba746b1f898986f5d8a5af2af9eb94ff1bc08308bc738d744ee85"><div class="ttname"><a href="namespacellvm_1_1TargetStackID.html#a71392100eb15ba746b1f898986f5d8a5af2af9eb94ff1bc08308bc738d744ee85">llvm::TargetStackID::Default</a></div><div class="ttdeci">@ Default</div><div class="ttdef"><b>Definition:</b> <a href="TargetFrameLowering_8h_source.html#l00028">TargetFrameLowering.h:28</a></div></div>
<div class="ttc" id="aclassllvm_1_1line__iterator_html_a617941704a472090ba3304c9daf1c37f"><div class="ttname"><a href="classllvm_1_1line__iterator.html#a617941704a472090ba3304c9daf1c37f">llvm::line_iterator::is_at_eof</a></div><div class="ttdeci">bool is_at_eof() const</div><div class="ttdoc">Return true if we've reached EOF or are an &quot;end&quot; iterator.</div><div class="ttdef"><b>Definition:</b> <a href="LineIterator_8h_source.html#l00060">LineIterator.h:60</a></div></div>
<div class="ttc" id="aclassllvm_1_1MachineBasicBlock_html_aa87a93c7232702163833fc57e2da6e59"><div class="ttname"><a href="classllvm_1_1MachineBasicBlock.html#aa87a93c7232702163833fc57e2da6e59">llvm::MachineBasicBlock::getFallThrough</a></div><div class="ttdeci">MachineBasicBlock * getFallThrough()</div><div class="ttdoc">Return the fallthrough block if the block can implicitly transfer control to the block after it by fa...</div><div class="ttdef"><b>Definition:</b> <a href="MachineBasicBlock_8cpp_source.html#l00917">MachineBasicBlock.cpp:917</a></div></div>
<div class="ttc" id="aclassllvm_1_1line__iterator_html_a51eb9a429555dd682d9b265cff7f869f"><div class="ttname"><a href="classllvm_1_1line__iterator.html#a51eb9a429555dd682d9b265cff7f869f">llvm::line_iterator::line_number</a></div><div class="ttdeci">int64_t line_number() const</div><div class="ttdoc">Return the current line number. May return any number at EOF.</div><div class="ttdef"><b>Definition:</b> <a href="LineIterator_8h_source.html#l00066">LineIterator.h:66</a></div></div>
<div class="ttc" id="aSmallVector_8h_html"><div class="ttname"><a href="SmallVector_8h.html">SmallVector.h</a></div></div>
<div class="ttc" id="aBasicBlockSections_8cpp_html_a1bcd35bcf6d7e166b113fb44ce6df061"><div class="ttname"><a href="BasicBlockSections_8cpp.html#a1bcd35bcf6d7e166b113fb44ce6df061">PreLayoutFallThroughs</a></div><div class="ttdeci">const SmallVector&lt; MachineBasicBlock *, 4 &gt; &amp; PreLayoutFallThroughs</div><div class="ttdef"><b>Definition:</b> <a href="BasicBlockSections_8cpp_source.html#l00165">BasicBlockSections.cpp:165</a></div></div>
<div class="ttc" id="aclassllvm_1_1MachineBasicBlock_html_ab2d91e7bec944efcbc39d8e30644f111"><div class="ttname"><a href="classllvm_1_1MachineBasicBlock.html#ab2d91e7bec944efcbc39d8e30644f111">llvm::MachineBasicBlock::begin</a></div><div class="ttdeci">iterator begin()</div><div class="ttdef"><b>Definition:</b> <a href="MachineBasicBlock_8h_source.html#l00268">MachineBasicBlock.h:268</a></div></div>
<div class="ttc" id="aBasicBlockSections_8cpp_html_a2034e8b50909d95ad07f1637343097f2"><div class="ttname"><a href="BasicBlockSections_8cpp.html#a2034e8b50909d95ad07f1637343097f2">assignSections</a></div><div class="ttdeci">static void assignSections(MachineFunction &amp;MF, const std::vector&lt; Optional&lt; BBClusterInfo &gt;&gt; &amp;FuncBBClusterInfo)</div><div class="ttdef"><b>Definition:</b> <a href="BasicBlockSections_8cpp_source.html#l00238">BasicBlockSections.cpp:238</a></div></div>
<div class="ttc" id="anamespacellvm_html_abe63d9ba16515b8df95d8b2a677d39d8"><div class="ttname"><a href="namespacellvm.html#abe63d9ba16515b8df95d8b2a677d39d8">llvm::BuildMI</a></div><div class="ttdeci">MachineInstrBuilder BuildMI(MachineFunction &amp;MF, const DebugLoc &amp;DL, const MCInstrDesc &amp;MCID)</div><div class="ttdoc">Builder interface. Specify how to create the initial instruction itself.</div><div class="ttdef"><b>Definition:</b> <a href="MachineInstrBuilder_8h_source.html#l00328">MachineInstrBuilder.h:328</a></div></div>
<div class="ttc" id="aregcomp_8c_html_a0240ac851181b84ac374872dc5434ee4"><div class="ttname"><a href="regcomp_8c.html#a0240ac851181b84ac374872dc5434ee4">N</a></div><div class="ttdeci">#define N</div></div>
<div class="ttc" id="aclassllvm_1_1SmallSet_html_a76b3fc7c102561fb5210d5151531e409"><div class="ttname"><a href="classllvm_1_1SmallSet.html#a76b3fc7c102561fb5210d5151531e409">llvm::SmallSet::clear</a></div><div class="ttdeci">void clear()</div><div class="ttdef"><b>Definition:</b> <a href="SmallSet_8h_source.html#l00218">SmallSet.h:218</a></div></div>
<div class="ttc" id="aclassllvm_1_1DebugLoc_html"><div class="ttname"><a href="classllvm_1_1DebugLoc.html">llvm::DebugLoc</a></div><div class="ttdoc">A debug info location.</div><div class="ttdef"><b>Definition:</b> <a href="DebugLoc_8h_source.html#l00033">DebugLoc.h:33</a></div></div>
<div class="ttc" id="astructllvm_1_1cl_1_1desc_html"><div class="ttname"><a href="structllvm_1_1cl_1_1desc.html">llvm::cl::desc</a></div><div class="ttdef"><b>Definition:</b> <a href="CommandLine_8h_source.html#l00414">CommandLine.h:414</a></div></div>
<div class="ttc" id="aclassllvm_1_1MachineBasicBlock_html_a5803a49facae20ca4b002dcba6f1d03e"><div class="ttname"><a href="classllvm_1_1MachineBasicBlock.html#a5803a49facae20ca4b002dcba6f1d03e">llvm::MachineBasicBlock::updateTerminator</a></div><div class="ttdeci">void updateTerminator(MachineBasicBlock *PreviousLayoutSuccessor)</div><div class="ttdoc">Update the terminator instructions in block to account for changes to block layout which may have bee...</div><div class="ttdef"><b>Definition:</b> <a href="MachineBasicBlock_8cpp_source.html#l00641">MachineBasicBlock.cpp:641</a></div></div>
<div class="ttc" id="aMachineFunction_8h_html"><div class="ttname"><a href="MachineFunction_8h.html">MachineFunction.h</a></div></div>
<div class="ttc" id="aclassllvm_1_1MachineInstrBundleIterator_html"><div class="ttname"><a href="classllvm_1_1MachineInstrBundleIterator.html">llvm::MachineInstrBundleIterator&lt; MachineInstr &gt;</a></div></div>
<div class="ttc" id="aclassllvm_1_1MachineFunction_html_a0b33ee771a8f9b7f684ffd266040d89f"><div class="ttname"><a href="classllvm_1_1MachineFunction.html#a0b33ee771a8f9b7f684ffd266040d89f">llvm::MachineFunction::setBBSectionsType</a></div><div class="ttdeci">void setBBSectionsType(BasicBlockSection V)</div><div class="ttdef"><b>Definition:</b> <a href="MachineFunction_8h_source.html#l00611">MachineFunction.h:611</a></div></div>
<div class="ttc" id="aInitializePasses_8h_html"><div class="ttname"><a href="InitializePasses_8h.html">InitializePasses.h</a></div></div>
<div class="ttc" id="aclassllvm_1_1MachineFunction_html_ac85349aab432e6b7d8b2e8926048a6de"><div class="ttname"><a href="classllvm_1_1MachineFunction.html#ac85349aab432e6b7d8b2e8926048a6de">llvm::MachineFunction::RenumberBlocks</a></div><div class="ttdeci">void RenumberBlocks(MachineBasicBlock *MBBFrom=nullptr)</div><div class="ttdoc">RenumberBlocks - This discards all of the MachineBasicBlock numbers and recomputes them.</div><div class="ttdef"><b>Definition:</b> <a href="MachineFunction_8cpp_source.html#l00294">MachineFunction.cpp:294</a></div></div>
<div class="ttc" id="aclassllvm_1_1StringMap_html_a3f1b153d947276395158efe9e5aa7693"><div class="ttname"><a href="classllvm_1_1StringMap.html#a3f1b153d947276395158efe9e5aa7693">llvm::StringMap::try_emplace</a></div><div class="ttdeci">std::pair&lt; iterator, bool &gt; try_emplace(StringRef Key, ArgsTy &amp;&amp;... Args)</div><div class="ttdoc">Emplace a new element for the specified key into the map if the key isn't already in the map.</div><div class="ttdef"><b>Definition:</b> <a href="StringMap_8h_source.html#l00315">StringMap.h:315</a></div></div>
<div class="ttc" id="aclassllvm_1_1Optional_html_a9ed8669536d806aff028d983595bab4d"><div class="ttname"><a href="classllvm_1_1Optional.html#a9ed8669536d806aff028d983595bab4d">llvm::Optional::getValue</a></div><div class="ttdeci">constexpr const T &amp; getValue() const LLVM_LVALUE_FUNCTION</div><div class="ttdef"><b>Definition:</b> <a href="Optional_8h_source.html#l00282">Optional.h:282</a></div></div>
<div class="ttc" id="aclassllvm_1_1TargetMachine_html_afab3c5f91842d5dd9f6aaf78a1ff34a9"><div class="ttname"><a href="classllvm_1_1TargetMachine.html#afab3c5f91842d5dd9f6aaf78a1ff34a9">llvm::TargetMachine::getBBSectionsType</a></div><div class="ttdeci">llvm::BasicBlockSection getBBSectionsType() const</div><div class="ttdoc">If basic blocks should be emitted into their own section, corresponding to -fbasic-block-sections.</div><div class="ttdef"><b>Definition:</b> <a href="llvm_2Target_2TargetMachine_8h_source.html#l00292">TargetMachine.h:292</a></div></div>
<div class="ttc" id="aSmallSet_8h_html"><div class="ttname"><a href="SmallSet_8h.html">SmallSet.h</a></div></div>
<div class="ttc" id="anamespacellvm_1_1Intrinsic_html_a80add6b3b1cdaec560907995127adc16"><div class="ttname"><a href="namespacellvm_1_1Intrinsic.html#a80add6b3b1cdaec560907995127adc16">llvm::Intrinsic::ID</a></div><div class="ttdeci">unsigned ID</div><div class="ttdef"><b>Definition:</b> <a href="TargetTransformInfo_8h_source.html#l00038">TargetTransformInfo.h:38</a></div></div>
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated on Tue Feb 8 2022 04:26:35 for LLVM by&#160;<a href="http://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.8.20
</small></address>
</body>
</html>
