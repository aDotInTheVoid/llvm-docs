<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.20"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>LLVM: lib/Transforms/Instrumentation/InstrProfiling.cpp Source File</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<script type="text/x-mathjax-config">
  MathJax.Hub.Config({
    extensions: ["tex2jax.js"],
    jax: ["input/TeX","output/HTML-CSS"],
});
</script>
<script type="text/javascript" async="async" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.7/MathJax.js/MathJax.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">LLVM
   &#160;<span id="projectnumber">13.0.1</span>
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.20 -->
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',false,false,'search.php','Search');
});
/* @license-end */</script>
<div id="main-nav"></div>
<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="dir_97aefd0d527b934f1d99a682da8fe6a9.html">lib</a></li><li class="navelem"><a class="el" href="dir_a72932e0778af28115095468f6286ff8.html">Transforms</a></li><li class="navelem"><a class="el" href="dir_f844fca3b2393802daa002d01dc8623e.html">Instrumentation</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="headertitle">
<div class="title">InstrProfiling.cpp</div>  </div>
</div><!--header-->
<div class="contents">
<a href="InstrProfiling_8cpp.html">Go to the documentation of this file.</a><div class="fragment"><div class="line"><a name="l00001"></a><span class="lineno">    1</span>&#160;<span class="comment">//===-- InstrProfiling.cpp - Frontend instrumentation based profiling -----===//</span></div>
<div class="line"><a name="l00002"></a><span class="lineno">    2</span>&#160;<span class="comment">//</span></div>
<div class="line"><a name="l00003"></a><span class="lineno">    3</span>&#160;<span class="comment">// Part of the LLVM Project, under the Apache License v2.0 with LLVM Exceptions.</span></div>
<div class="line"><a name="l00004"></a><span class="lineno">    4</span>&#160;<span class="comment">// See https://llvm.org/LICENSE.txt for license information.</span></div>
<div class="line"><a name="l00005"></a><span class="lineno">    5</span>&#160;<span class="comment">// SPDX-License-Identifier: Apache-2.0 WITH LLVM-exception</span></div>
<div class="line"><a name="l00006"></a><span class="lineno">    6</span>&#160;<span class="comment">//</span></div>
<div class="line"><a name="l00007"></a><span class="lineno">    7</span>&#160;<span class="comment">//===----------------------------------------------------------------------===//</span></div>
<div class="line"><a name="l00008"></a><span class="lineno">    8</span>&#160;<span class="comment">//</span></div>
<div class="line"><a name="l00009"></a><span class="lineno">    9</span>&#160;<span class="comment">// This pass lowers instrprof_* intrinsics emitted by a frontend for profiling.</span></div>
<div class="line"><a name="l00010"></a><span class="lineno">   10</span>&#160;<span class="comment">// It also builds the data structures and initialization code needed for</span></div>
<div class="line"><a name="l00011"></a><span class="lineno">   11</span>&#160;<span class="comment">// updating execution counts and emitting the profile at runtime.</span></div>
<div class="line"><a name="l00012"></a><span class="lineno">   12</span>&#160;<span class="comment">//</span></div>
<div class="line"><a name="l00013"></a><span class="lineno">   13</span>&#160;<span class="comment">//===----------------------------------------------------------------------===//</span></div>
<div class="line"><a name="l00014"></a><span class="lineno">   14</span>&#160; </div>
<div class="line"><a name="l00015"></a><span class="lineno">   15</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="InstrProfiling_8h.html">llvm/Transforms/Instrumentation/InstrProfiling.h</a>&quot;</span></div>
<div class="line"><a name="l00016"></a><span class="lineno">   16</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="ArrayRef_8h.html">llvm/ADT/ArrayRef.h</a>&quot;</span></div>
<div class="line"><a name="l00017"></a><span class="lineno">   17</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="SmallVector_8h.html">llvm/ADT/SmallVector.h</a>&quot;</span></div>
<div class="line"><a name="l00018"></a><span class="lineno">   18</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="StringRef_8h.html">llvm/ADT/StringRef.h</a>&quot;</span></div>
<div class="line"><a name="l00019"></a><span class="lineno">   19</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="Triple_8h.html">llvm/ADT/Triple.h</a>&quot;</span></div>
<div class="line"><a name="l00020"></a><span class="lineno">   20</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="Twine_8h.html">llvm/ADT/Twine.h</a>&quot;</span></div>
<div class="line"><a name="l00021"></a><span class="lineno">   21</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="BlockFrequencyInfo_8h.html">llvm/Analysis/BlockFrequencyInfo.h</a>&quot;</span></div>
<div class="line"><a name="l00022"></a><span class="lineno">   22</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="BranchProbabilityInfo_8h.html">llvm/Analysis/BranchProbabilityInfo.h</a>&quot;</span></div>
<div class="line"><a name="l00023"></a><span class="lineno">   23</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="LoopInfo_8h.html">llvm/Analysis/LoopInfo.h</a>&quot;</span></div>
<div class="line"><a name="l00024"></a><span class="lineno">   24</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="TargetLibraryInfo_8h.html">llvm/Analysis/TargetLibraryInfo.h</a>&quot;</span></div>
<div class="line"><a name="l00025"></a><span class="lineno">   25</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="Attributes_8h.html">llvm/IR/Attributes.h</a>&quot;</span></div>
<div class="line"><a name="l00026"></a><span class="lineno">   26</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="BasicBlock_8h.html">llvm/IR/BasicBlock.h</a>&quot;</span></div>
<div class="line"><a name="l00027"></a><span class="lineno">   27</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="Constant_8h.html">llvm/IR/Constant.h</a>&quot;</span></div>
<div class="line"><a name="l00028"></a><span class="lineno">   28</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="Constants_8h.html">llvm/IR/Constants.h</a>&quot;</span></div>
<div class="line"><a name="l00029"></a><span class="lineno">   29</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="DerivedTypes_8h.html">llvm/IR/DerivedTypes.h</a>&quot;</span></div>
<div class="line"><a name="l00030"></a><span class="lineno">   30</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="Dominators_8h.html">llvm/IR/Dominators.h</a>&quot;</span></div>
<div class="line"><a name="l00031"></a><span class="lineno">   31</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="Function_8h.html">llvm/IR/Function.h</a>&quot;</span></div>
<div class="line"><a name="l00032"></a><span class="lineno">   32</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="GlobalValue_8h.html">llvm/IR/GlobalValue.h</a>&quot;</span></div>
<div class="line"><a name="l00033"></a><span class="lineno">   33</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="GlobalVariable_8h.html">llvm/IR/GlobalVariable.h</a>&quot;</span></div>
<div class="line"><a name="l00034"></a><span class="lineno">   34</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="IRBuilder_8h.html">llvm/IR/IRBuilder.h</a>&quot;</span></div>
<div class="line"><a name="l00035"></a><span class="lineno">   35</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="IR_2Instruction_8h.html">llvm/IR/Instruction.h</a>&quot;</span></div>
<div class="line"><a name="l00036"></a><span class="lineno">   36</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="Instructions_8h.html">llvm/IR/Instructions.h</a>&quot;</span></div>
<div class="line"><a name="l00037"></a><span class="lineno">   37</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="IntrinsicInst_8h.html">llvm/IR/IntrinsicInst.h</a>&quot;</span></div>
<div class="line"><a name="l00038"></a><span class="lineno">   38</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="Module_8h.html">llvm/IR/Module.h</a>&quot;</span></div>
<div class="line"><a name="l00039"></a><span class="lineno">   39</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="Type_8h.html">llvm/IR/Type.h</a>&quot;</span></div>
<div class="line"><a name="l00040"></a><span class="lineno">   40</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="InitializePasses_8h.html">llvm/InitializePasses.h</a>&quot;</span></div>
<div class="line"><a name="l00041"></a><span class="lineno">   41</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="Pass_8h.html">llvm/Pass.h</a>&quot;</span></div>
<div class="line"><a name="l00042"></a><span class="lineno">   42</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="InstrProf_8h.html">llvm/ProfileData/InstrProf.h</a>&quot;</span></div>
<div class="line"><a name="l00043"></a><span class="lineno">   43</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="Casting_8h.html">llvm/Support/Casting.h</a>&quot;</span></div>
<div class="line"><a name="l00044"></a><span class="lineno">   44</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="CommandLine_8h.html">llvm/Support/CommandLine.h</a>&quot;</span></div>
<div class="line"><a name="l00045"></a><span class="lineno">   45</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="llvm_2Support_2Error_8h.html">llvm/Support/Error.h</a>&quot;</span></div>
<div class="line"><a name="l00046"></a><span class="lineno">   46</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="llvm_2Support_2ErrorHandling_8h.html">llvm/Support/ErrorHandling.h</a>&quot;</span></div>
<div class="line"><a name="l00047"></a><span class="lineno">   47</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="BasicBlockUtils_8h.html">llvm/Transforms/Utils/BasicBlockUtils.h</a>&quot;</span></div>
<div class="line"><a name="l00048"></a><span class="lineno">   48</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="ModuleUtils_8h.html">llvm/Transforms/Utils/ModuleUtils.h</a>&quot;</span></div>
<div class="line"><a name="l00049"></a><span class="lineno">   49</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="SSAUpdater_8h.html">llvm/Transforms/Utils/SSAUpdater.h</a>&quot;</span></div>
<div class="line"><a name="l00050"></a><span class="lineno">   50</span>&#160;<span class="preprocessor">#include &lt;algorithm&gt;</span></div>
<div class="line"><a name="l00051"></a><span class="lineno">   51</span>&#160;<span class="preprocessor">#include &lt;cassert&gt;</span></div>
<div class="line"><a name="l00052"></a><span class="lineno">   52</span>&#160;<span class="preprocessor">#include &lt;cstddef&gt;</span></div>
<div class="line"><a name="l00053"></a><span class="lineno">   53</span>&#160;<span class="preprocessor">#include &lt;cstdint&gt;</span></div>
<div class="line"><a name="l00054"></a><span class="lineno">   54</span>&#160;<span class="preprocessor">#include &lt;string&gt;</span></div>
<div class="line"><a name="l00055"></a><span class="lineno">   55</span>&#160; </div>
<div class="line"><a name="l00056"></a><span class="lineno">   56</span>&#160;<span class="keyword">using namespace </span><a class="code" href="namespacellvm.html">llvm</a>;</div>
<div class="line"><a name="l00057"></a><span class="lineno">   57</span>&#160; </div>
<div class="line"><a name="l00058"></a><span class="lineno"><a class="line" href="InstrProfiling_8cpp.html#ad78e062f62e0d6e453941fb4ca843e4d">   58</a></span>&#160;<span class="preprocessor">#define DEBUG_TYPE &quot;instrprof&quot;</span></div>
<div class="line"><a name="l00059"></a><span class="lineno">   59</span>&#160; </div>
<div class="line"><a name="l00060"></a><span class="lineno">   60</span>&#160;<span class="keyword">namespace </span>{</div>
<div class="line"><a name="l00061"></a><span class="lineno">   61</span>&#160; </div>
<div class="line"><a name="l00062"></a><span class="lineno">   62</span>&#160;<a class="code" href="classllvm_1_1cl_1_1opt.html">cl::opt&lt;bool&gt;</a> DoHashBasedCounterSplit(</div>
<div class="line"><a name="l00063"></a><span class="lineno">   63</span>&#160;    <span class="stringliteral">&quot;hash-based-counter-split&quot;</span>,</div>
<div class="line"><a name="l00064"></a><span class="lineno">   64</span>&#160;    <a class="code" href="structllvm_1_1cl_1_1desc.html">cl::desc</a>(<span class="stringliteral">&quot;Rename counter variable of a comdat function based on cfg hash&quot;</span>),</div>
<div class="line"><a name="l00065"></a><span class="lineno">   65</span>&#160;    <a class="code" href="namespacellvm_1_1cl.html#a10a041239ae1870cfcc064bfaa79fb65">cl::init</a>(<span class="keyword">true</span>));</div>
<div class="line"><a name="l00066"></a><span class="lineno">   66</span>&#160; </div>
<div class="line"><a name="l00067"></a><span class="lineno">   67</span>&#160;<a class="code" href="classllvm_1_1cl_1_1opt.html">cl::opt&lt;bool&gt;</a> RuntimeCounterRelocation(</div>
<div class="line"><a name="l00068"></a><span class="lineno">   68</span>&#160;    <span class="stringliteral">&quot;runtime-counter-relocation&quot;</span>,</div>
<div class="line"><a name="l00069"></a><span class="lineno">   69</span>&#160;    <a class="code" href="structllvm_1_1cl_1_1desc.html">cl::desc</a>(<span class="stringliteral">&quot;Enable relocating counters at runtime.&quot;</span>),</div>
<div class="line"><a name="l00070"></a><span class="lineno">   70</span>&#160;    <a class="code" href="namespacellvm_1_1cl.html#a10a041239ae1870cfcc064bfaa79fb65">cl::init</a>(<span class="keyword">false</span>));</div>
<div class="line"><a name="l00071"></a><span class="lineno">   71</span>&#160; </div>
<div class="line"><a name="l00072"></a><span class="lineno">   72</span>&#160;<a class="code" href="classllvm_1_1cl_1_1opt.html">cl::opt&lt;bool&gt;</a> ValueProfileStaticAlloc(</div>
<div class="line"><a name="l00073"></a><span class="lineno">   73</span>&#160;    <span class="stringliteral">&quot;vp-static-alloc&quot;</span>,</div>
<div class="line"><a name="l00074"></a><span class="lineno">   74</span>&#160;    <a class="code" href="structllvm_1_1cl_1_1desc.html">cl::desc</a>(<span class="stringliteral">&quot;Do static counter allocation for value profiler&quot;</span>),</div>
<div class="line"><a name="l00075"></a><span class="lineno">   75</span>&#160;    <a class="code" href="namespacellvm_1_1cl.html#a10a041239ae1870cfcc064bfaa79fb65">cl::init</a>(<span class="keyword">true</span>));</div>
<div class="line"><a name="l00076"></a><span class="lineno">   76</span>&#160; </div>
<div class="line"><a name="l00077"></a><span class="lineno">   77</span>&#160;<a class="code" href="classllvm_1_1cl_1_1opt.html">cl::opt&lt;double&gt;</a> NumCountersPerValueSite(</div>
<div class="line"><a name="l00078"></a><span class="lineno">   78</span>&#160;    <span class="stringliteral">&quot;vp-counters-per-site&quot;</span>,</div>
<div class="line"><a name="l00079"></a><span class="lineno">   79</span>&#160;    <a class="code" href="structllvm_1_1cl_1_1desc.html">cl::desc</a>(<span class="stringliteral">&quot;The average number of profile counters allocated &quot;</span></div>
<div class="line"><a name="l00080"></a><span class="lineno">   80</span>&#160;             <span class="stringliteral">&quot;per value profiling site.&quot;</span>),</div>
<div class="line"><a name="l00081"></a><span class="lineno">   81</span>&#160;    <span class="comment">// This is set to a very small value because in real programs, only</span></div>
<div class="line"><a name="l00082"></a><span class="lineno">   82</span>&#160;    <span class="comment">// a very small percentage of value sites have non-zero targets, e.g, 1/30.</span></div>
<div class="line"><a name="l00083"></a><span class="lineno">   83</span>&#160;    <span class="comment">// For those sites with non-zero profile, the average number of targets</span></div>
<div class="line"><a name="l00084"></a><span class="lineno">   84</span>&#160;    <span class="comment">// is usually smaller than 2.</span></div>
<div class="line"><a name="l00085"></a><span class="lineno">   85</span>&#160;    <a class="code" href="namespacellvm_1_1cl.html#a10a041239ae1870cfcc064bfaa79fb65">cl::init</a>(1.0));</div>
<div class="line"><a name="l00086"></a><span class="lineno">   86</span>&#160; </div>
<div class="line"><a name="l00087"></a><span class="lineno">   87</span>&#160;<a class="code" href="classllvm_1_1cl_1_1opt.html">cl::opt&lt;bool&gt;</a> AtomicCounterUpdateAll(</div>
<div class="line"><a name="l00088"></a><span class="lineno">   88</span>&#160;    <span class="stringliteral">&quot;instrprof-atomic-counter-update-all&quot;</span>, <a class="code" href="namespacellvm_1_1cl.html#a492234b10e0c5918d72a3a15a6f0fa6ea61d3cb794533763159788c493ad266d9">cl::ZeroOrMore</a>,</div>
<div class="line"><a name="l00089"></a><span class="lineno">   89</span>&#160;    <a class="code" href="structllvm_1_1cl_1_1desc.html">cl::desc</a>(<span class="stringliteral">&quot;Make all profile counter updates atomic (for testing only)&quot;</span>),</div>
<div class="line"><a name="l00090"></a><span class="lineno">   90</span>&#160;    <a class="code" href="namespacellvm_1_1cl.html#a10a041239ae1870cfcc064bfaa79fb65">cl::init</a>(<span class="keyword">false</span>));</div>
<div class="line"><a name="l00091"></a><span class="lineno">   91</span>&#160; </div>
<div class="line"><a name="l00092"></a><span class="lineno">   92</span>&#160;<a class="code" href="classllvm_1_1cl_1_1opt.html">cl::opt&lt;bool&gt;</a> AtomicCounterUpdatePromoted(</div>
<div class="line"><a name="l00093"></a><span class="lineno">   93</span>&#160;    <span class="stringliteral">&quot;atomic-counter-update-promoted&quot;</span>, <a class="code" href="namespacellvm_1_1cl.html#a492234b10e0c5918d72a3a15a6f0fa6ea61d3cb794533763159788c493ad266d9">cl::ZeroOrMore</a>,</div>
<div class="line"><a name="l00094"></a><span class="lineno">   94</span>&#160;    <a class="code" href="structllvm_1_1cl_1_1desc.html">cl::desc</a>(<span class="stringliteral">&quot;Do counter update using atomic fetch add &quot;</span></div>
<div class="line"><a name="l00095"></a><span class="lineno">   95</span>&#160;             <span class="stringliteral">&quot; for promoted counters only&quot;</span>),</div>
<div class="line"><a name="l00096"></a><span class="lineno">   96</span>&#160;    <a class="code" href="namespacellvm_1_1cl.html#a10a041239ae1870cfcc064bfaa79fb65">cl::init</a>(<span class="keyword">false</span>));</div>
<div class="line"><a name="l00097"></a><span class="lineno">   97</span>&#160; </div>
<div class="line"><a name="l00098"></a><span class="lineno">   98</span>&#160;<a class="code" href="classllvm_1_1cl_1_1opt.html">cl::opt&lt;bool&gt;</a> AtomicFirstCounter(</div>
<div class="line"><a name="l00099"></a><span class="lineno">   99</span>&#160;    <span class="stringliteral">&quot;atomic-first-counter&quot;</span>, <a class="code" href="namespacellvm_1_1cl.html#a492234b10e0c5918d72a3a15a6f0fa6ea61d3cb794533763159788c493ad266d9">cl::ZeroOrMore</a>,</div>
<div class="line"><a name="l00100"></a><span class="lineno">  100</span>&#160;    <a class="code" href="structllvm_1_1cl_1_1desc.html">cl::desc</a>(<span class="stringliteral">&quot;Use atomic fetch add for first counter in a function (usually &quot;</span></div>
<div class="line"><a name="l00101"></a><span class="lineno">  101</span>&#160;             <span class="stringliteral">&quot;the entry counter)&quot;</span>),</div>
<div class="line"><a name="l00102"></a><span class="lineno">  102</span>&#160;    <a class="code" href="namespacellvm_1_1cl.html#a10a041239ae1870cfcc064bfaa79fb65">cl::init</a>(<span class="keyword">false</span>));</div>
<div class="line"><a name="l00103"></a><span class="lineno">  103</span>&#160; </div>
<div class="line"><a name="l00104"></a><span class="lineno">  104</span>&#160;<span class="comment">// If the option is not specified, the default behavior about whether</span></div>
<div class="line"><a name="l00105"></a><span class="lineno">  105</span>&#160;<span class="comment">// counter promotion is done depends on how instrumentaiton lowering</span></div>
<div class="line"><a name="l00106"></a><span class="lineno">  106</span>&#160;<span class="comment">// pipeline is setup, i.e., the default value of true of this option</span></div>
<div class="line"><a name="l00107"></a><span class="lineno">  107</span>&#160;<span class="comment">// does not mean the promotion will be done by default. Explicitly</span></div>
<div class="line"><a name="l00108"></a><span class="lineno">  108</span>&#160;<span class="comment">// setting this option can override the default behavior.</span></div>
<div class="line"><a name="l00109"></a><span class="lineno">  109</span>&#160;<a class="code" href="classllvm_1_1cl_1_1opt.html">cl::opt&lt;bool&gt;</a> DoCounterPromotion(<span class="stringliteral">&quot;do-counter-promotion&quot;</span>, <a class="code" href="namespacellvm_1_1cl.html#a492234b10e0c5918d72a3a15a6f0fa6ea61d3cb794533763159788c493ad266d9">cl::ZeroOrMore</a>,</div>
<div class="line"><a name="l00110"></a><span class="lineno">  110</span>&#160;                                 <a class="code" href="structllvm_1_1cl_1_1desc.html">cl::desc</a>(<span class="stringliteral">&quot;Do counter register promotion&quot;</span>),</div>
<div class="line"><a name="l00111"></a><span class="lineno">  111</span>&#160;                                 <a class="code" href="namespacellvm_1_1cl.html#a10a041239ae1870cfcc064bfaa79fb65">cl::init</a>(<span class="keyword">false</span>));</div>
<div class="line"><a name="l00112"></a><span class="lineno">  112</span>&#160;<a class="code" href="classllvm_1_1cl_1_1opt.html">cl::opt&lt;unsigned&gt;</a> MaxNumOfPromotionsPerLoop(</div>
<div class="line"><a name="l00113"></a><span class="lineno">  113</span>&#160;    <a class="code" href="namespacellvm_1_1cl.html#a492234b10e0c5918d72a3a15a6f0fa6ea61d3cb794533763159788c493ad266d9">cl::ZeroOrMore</a>, <span class="stringliteral">&quot;max-counter-promotions-per-loop&quot;</span>, <a class="code" href="namespacellvm_1_1cl.html#a10a041239ae1870cfcc064bfaa79fb65">cl::init</a>(20),</div>
<div class="line"><a name="l00114"></a><span class="lineno">  114</span>&#160;    <a class="code" href="structllvm_1_1cl_1_1desc.html">cl::desc</a>(<span class="stringliteral">&quot;Max number counter promotions per loop to avoid&quot;</span></div>
<div class="line"><a name="l00115"></a><span class="lineno">  115</span>&#160;             <span class="stringliteral">&quot; increasing register pressure too much&quot;</span>));</div>
<div class="line"><a name="l00116"></a><span class="lineno">  116</span>&#160; </div>
<div class="line"><a name="l00117"></a><span class="lineno">  117</span>&#160;<span class="comment">// A debug option</span></div>
<div class="line"><a name="l00118"></a><span class="lineno">  118</span>&#160;<a class="code" href="classllvm_1_1cl_1_1opt.html">cl::opt&lt;int&gt;</a></div>
<div class="line"><a name="l00119"></a><span class="lineno">  119</span>&#160;    MaxNumOfPromotions(<a class="code" href="namespacellvm_1_1cl.html#a492234b10e0c5918d72a3a15a6f0fa6ea61d3cb794533763159788c493ad266d9">cl::ZeroOrMore</a>, <span class="stringliteral">&quot;max-counter-promotions&quot;</span>, <a class="code" href="namespacellvm_1_1cl.html#a10a041239ae1870cfcc064bfaa79fb65">cl::init</a>(-1),</div>
<div class="line"><a name="l00120"></a><span class="lineno">  120</span>&#160;                       <a class="code" href="structllvm_1_1cl_1_1desc.html">cl::desc</a>(<span class="stringliteral">&quot;Max number of allowed counter promotions&quot;</span>));</div>
<div class="line"><a name="l00121"></a><span class="lineno">  121</span>&#160; </div>
<div class="line"><a name="l00122"></a><span class="lineno">  122</span>&#160;<a class="code" href="classllvm_1_1cl_1_1opt.html">cl::opt&lt;unsigned&gt;</a> SpeculativeCounterPromotionMaxExiting(</div>
<div class="line"><a name="l00123"></a><span class="lineno">  123</span>&#160;    <a class="code" href="namespacellvm_1_1cl.html#a492234b10e0c5918d72a3a15a6f0fa6ea61d3cb794533763159788c493ad266d9">cl::ZeroOrMore</a>, <span class="stringliteral">&quot;speculative-counter-promotion-max-exiting&quot;</span>, <a class="code" href="namespacellvm_1_1cl.html#a10a041239ae1870cfcc064bfaa79fb65">cl::init</a>(3),</div>
<div class="line"><a name="l00124"></a><span class="lineno">  124</span>&#160;    <a class="code" href="structllvm_1_1cl_1_1desc.html">cl::desc</a>(<span class="stringliteral">&quot;The max number of exiting blocks of a loop to allow &quot;</span></div>
<div class="line"><a name="l00125"></a><span class="lineno">  125</span>&#160;             <span class="stringliteral">&quot; speculative counter promotion&quot;</span>));</div>
<div class="line"><a name="l00126"></a><span class="lineno">  126</span>&#160; </div>
<div class="line"><a name="l00127"></a><span class="lineno">  127</span>&#160;<a class="code" href="classllvm_1_1cl_1_1opt.html">cl::opt&lt;bool&gt;</a> SpeculativeCounterPromotionToLoop(</div>
<div class="line"><a name="l00128"></a><span class="lineno">  128</span>&#160;    <a class="code" href="namespacellvm_1_1cl.html#a492234b10e0c5918d72a3a15a6f0fa6ea61d3cb794533763159788c493ad266d9">cl::ZeroOrMore</a>, <span class="stringliteral">&quot;speculative-counter-promotion-to-loop&quot;</span>, <a class="code" href="namespacellvm_1_1cl.html#a10a041239ae1870cfcc064bfaa79fb65">cl::init</a>(<span class="keyword">false</span>),</div>
<div class="line"><a name="l00129"></a><span class="lineno">  129</span>&#160;    <a class="code" href="structllvm_1_1cl_1_1desc.html">cl::desc</a>(<span class="stringliteral">&quot;When the option is false, if the target block is in a loop, &quot;</span></div>
<div class="line"><a name="l00130"></a><span class="lineno">  130</span>&#160;             <span class="stringliteral">&quot;the promotion will be disallowed unless the promoted counter &quot;</span></div>
<div class="line"><a name="l00131"></a><span class="lineno">  131</span>&#160;             <span class="stringliteral">&quot; update can be further/iteratively promoted into an acyclic &quot;</span></div>
<div class="line"><a name="l00132"></a><span class="lineno">  132</span>&#160;             <span class="stringliteral">&quot; region.&quot;</span>));</div>
<div class="line"><a name="l00133"></a><span class="lineno">  133</span>&#160; </div>
<div class="line"><a name="l00134"></a><span class="lineno">  134</span>&#160;<a class="code" href="classllvm_1_1cl_1_1opt.html">cl::opt&lt;bool&gt;</a> IterativeCounterPromotion(</div>
<div class="line"><a name="l00135"></a><span class="lineno">  135</span>&#160;    <a class="code" href="namespacellvm_1_1cl.html#a492234b10e0c5918d72a3a15a6f0fa6ea61d3cb794533763159788c493ad266d9">cl::ZeroOrMore</a>, <span class="stringliteral">&quot;iterative-counter-promotion&quot;</span>, <a class="code" href="namespacellvm_1_1cl.html#a10a041239ae1870cfcc064bfaa79fb65">cl::init</a>(<span class="keyword">true</span>),</div>
<div class="line"><a name="l00136"></a><span class="lineno">  136</span>&#160;    <a class="code" href="structllvm_1_1cl_1_1desc.html">cl::desc</a>(<span class="stringliteral">&quot;Allow counter promotion across the whole loop nest.&quot;</span>));</div>
<div class="line"><a name="l00137"></a><span class="lineno">  137</span>&#160; </div>
<div class="line"><a name="l00138"></a><span class="lineno">  138</span>&#160;<a class="code" href="classllvm_1_1cl_1_1opt.html">cl::opt&lt;bool&gt;</a> SkipRetExitBlock(</div>
<div class="line"><a name="l00139"></a><span class="lineno">  139</span>&#160;    <a class="code" href="namespacellvm_1_1cl.html#a492234b10e0c5918d72a3a15a6f0fa6ea61d3cb794533763159788c493ad266d9">cl::ZeroOrMore</a>, <span class="stringliteral">&quot;skip-ret-exit-block&quot;</span>, <a class="code" href="namespacellvm_1_1cl.html#a10a041239ae1870cfcc064bfaa79fb65">cl::init</a>(<span class="keyword">true</span>),</div>
<div class="line"><a name="l00140"></a><span class="lineno">  140</span>&#160;    <a class="code" href="structllvm_1_1cl_1_1desc.html">cl::desc</a>(<span class="stringliteral">&quot;Suppress counter promotion if exit blocks contain ret.&quot;</span>));</div>
<div class="line"><a name="l00141"></a><span class="lineno">  141</span>&#160; </div>
<div class="line"><a name="l00142"></a><span class="lineno">  142</span>&#160;<span class="keyword">class </span>InstrProfilingLegacyPass : <span class="keyword">public</span> <a class="code" href="classllvm_1_1ModulePass.html">ModulePass</a> {</div>
<div class="line"><a name="l00143"></a><span class="lineno">  143</span>&#160;  <a class="code" href="classllvm_1_1InstrProfiling.html">InstrProfiling</a> InstrProf;</div>
<div class="line"><a name="l00144"></a><span class="lineno">  144</span>&#160; </div>
<div class="line"><a name="l00145"></a><span class="lineno">  145</span>&#160;<span class="keyword">public</span>:</div>
<div class="line"><a name="l00146"></a><span class="lineno">  146</span>&#160;  <span class="keyword">static</span> <span class="keywordtype">char</span> <a class="code" href="namespacellvm_1_1Intrinsic.html#a80add6b3b1cdaec560907995127adc16">ID</a>;</div>
<div class="line"><a name="l00147"></a><span class="lineno">  147</span>&#160; </div>
<div class="line"><a name="l00148"></a><span class="lineno">  148</span>&#160;  InstrProfilingLegacyPass() : <a class="code" href="classllvm_1_1ModulePass.html">ModulePass</a>(<a class="code" href="namespacellvm_1_1Intrinsic.html#a80add6b3b1cdaec560907995127adc16">ID</a>) {}</div>
<div class="line"><a name="l00149"></a><span class="lineno">  149</span>&#160;  InstrProfilingLegacyPass(<span class="keyword">const</span> <a class="code" href="structllvm_1_1InstrProfOptions.html">InstrProfOptions</a> &amp;<a class="code" href="PassBuilderBindings_8cpp.html#a47c521bf7ba0bb2147b96d068af30d04">Options</a>, <span class="keywordtype">bool</span> IsCS = <span class="keyword">false</span>)</div>
<div class="line"><a name="l00150"></a><span class="lineno">  150</span>&#160;      : <a class="code" href="classllvm_1_1ModulePass.html">ModulePass</a>(<a class="code" href="namespacellvm_1_1Intrinsic.html#a80add6b3b1cdaec560907995127adc16">ID</a>), InstrProf(<a class="code" href="PassBuilderBindings_8cpp.html#a47c521bf7ba0bb2147b96d068af30d04">Options</a>, IsCS) {</div>
<div class="line"><a name="l00151"></a><span class="lineno">  151</span>&#160;    <a class="code" href="namespacellvm.html#a431d60cd32f837830187f89607e8658d">initializeInstrProfilingLegacyPassPass</a>(*<a class="code" href="classllvm_1_1PassRegistry.html#a05a729900b76c89e808c6c3094921b2f">PassRegistry::getPassRegistry</a>());</div>
<div class="line"><a name="l00152"></a><span class="lineno">  152</span>&#160;  }</div>
<div class="line"><a name="l00153"></a><span class="lineno">  153</span>&#160; </div>
<div class="line"><a name="l00154"></a><span class="lineno">  154</span>&#160;  <a class="code" href="classllvm_1_1StringRef.html">StringRef</a> getPassName()<span class="keyword"> const override </span>{</div>
<div class="line"><a name="l00155"></a><span class="lineno">  155</span>&#160;    <span class="keywordflow">return</span> <span class="stringliteral">&quot;Frontend instrumentation-based coverage lowering&quot;</span>;</div>
<div class="line"><a name="l00156"></a><span class="lineno">  156</span>&#160;  }</div>
<div class="line"><a name="l00157"></a><span class="lineno">  157</span>&#160; </div>
<div class="line"><a name="l00158"></a><span class="lineno">  158</span>&#160;  <span class="keywordtype">bool</span> runOnModule(<a class="code" href="classllvm_1_1Module.html">Module</a> &amp;<a class="code" href="lib_2Target_2X86_2README_8txt.html#ac88fe1d3a61b056a4f64fbbb156a62ff">M</a>)<span class="keyword"> override </span>{</div>
<div class="line"><a name="l00159"></a><span class="lineno">  159</span>&#160;    <span class="keyword">auto</span> GetTLI = [<span class="keyword">this</span>](<a class="code" href="classllvm_1_1Function.html">Function</a> &amp;<a class="code" href="MD5_8cpp.html#a96d73bbd7af15cb1fc38c3f4a3bd82e9">F</a>) -&gt; <a class="code" href="classllvm_1_1TargetLibraryInfo.html">TargetLibraryInfo</a> &amp; {</div>
<div class="line"><a name="l00160"></a><span class="lineno">  160</span>&#160;      <span class="keywordflow">return</span> this-&gt;getAnalysis&lt;TargetLibraryInfoWrapperPass&gt;().getTLI(<a class="code" href="MD5_8cpp.html#a96d73bbd7af15cb1fc38c3f4a3bd82e9">F</a>);</div>
<div class="line"><a name="l00161"></a><span class="lineno">  161</span>&#160;    };</div>
<div class="line"><a name="l00162"></a><span class="lineno">  162</span>&#160;    <span class="keywordflow">return</span> InstrProf.<a class="code" href="classllvm_1_1InstrProfiling.html#a20487c4884c2053c68ca2838df9c76d1">run</a>(<a class="code" href="lib_2Target_2X86_2README_8txt.html#ac88fe1d3a61b056a4f64fbbb156a62ff">M</a>, GetTLI);</div>
<div class="line"><a name="l00163"></a><span class="lineno">  163</span>&#160;  }</div>
<div class="line"><a name="l00164"></a><span class="lineno">  164</span>&#160; </div>
<div class="line"><a name="l00165"></a><span class="lineno">  165</span>&#160;  <span class="keywordtype">void</span> getAnalysisUsage(<a class="code" href="classllvm_1_1AnalysisUsage.html">AnalysisUsage</a> &amp;AU)<span class="keyword"> const override </span>{</div>
<div class="line"><a name="l00166"></a><span class="lineno">  166</span>&#160;    AU.<a class="code" href="classllvm_1_1AnalysisUsage.html#af11a6ebf7ab3c388234cb6d5378439a3">setPreservesCFG</a>();</div>
<div class="line"><a name="l00167"></a><span class="lineno">  167</span>&#160;    AU.<a class="code" href="classllvm_1_1AnalysisUsage.html#ae5c60fd282ee894c87ea02c3f0fcb6d0">addRequired</a>&lt;<a class="code" href="classllvm_1_1TargetLibraryInfoWrapperPass.html">TargetLibraryInfoWrapperPass</a>&gt;();</div>
<div class="line"><a name="l00168"></a><span class="lineno">  168</span>&#160;  }</div>
<div class="line"><a name="l00169"></a><span class="lineno">  169</span>&#160;};</div>
<div class="line"><a name="l00170"></a><span class="lineno">  170</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l00171"></a><span class="lineno">  171</span>&#160;<span class="comment">///</span></div>
<div class="line"><a name="l00172"></a><span class="lineno">  172</span>&#160;<span class="comment">/// A helper class to promote one counter RMW operation in the loop</span></div>
<div class="line"><a name="l00173"></a><span class="lineno">  173</span>&#160;<span class="comment">/// into register update.</span></div>
<div class="line"><a name="l00174"></a><span class="lineno">  174</span>&#160;<span class="comment">///</span></div>
<div class="line"><a name="l00175"></a><span class="lineno">  175</span>&#160;<span class="comment">/// RWM update for the counter will be sinked out of the loop after</span></div>
<div class="line"><a name="l00176"></a><span class="lineno">  176</span>&#160;<span class="comment">/// the transformation.</span></div>
<div class="line"><a name="l00177"></a><span class="lineno">  177</span>&#160;<span class="comment">///</span></div>
<div class="line"><a name="l00178"></a><span class="lineno">  178</span>&#160;<span class="comment"></span><span class="keyword">class </span>PGOCounterPromoterHelper : <span class="keyword">public</span> <a class="code" href="classllvm_1_1LoadAndStorePromoter.html">LoadAndStorePromoter</a> {</div>
<div class="line"><a name="l00179"></a><span class="lineno">  179</span>&#160;<span class="keyword">public</span>:</div>
<div class="line"><a name="l00180"></a><span class="lineno">  180</span>&#160;  PGOCounterPromoterHelper(</div>
<div class="line"><a name="l00181"></a><span class="lineno">  181</span>&#160;      <a class="code" href="classllvm_1_1Instruction.html">Instruction</a> *L, <a class="code" href="classllvm_1_1Instruction.html">Instruction</a> *<a class="code" href="lib_2Target_2ARM_2README_8txt.html#a1b45f45820a60c09244a87eb59824aec">S</a>, <a class="code" href="classllvm_1_1SSAUpdater.html">SSAUpdater</a> &amp;<a class="code" href="MemorySSA_8cpp.html#a20a60bdac22b099d87d8cb0c1d554120">SSA</a>, <a class="code" href="classllvm_1_1Value.html">Value</a> *<a class="code" href="classllvm_1_1Init.html">Init</a>,</div>
<div class="line"><a name="l00182"></a><span class="lineno">  182</span>&#160;      <a class="code" href="classllvm_1_1BasicBlock.html">BasicBlock</a> *PH, <a class="code" href="classllvm_1_1ArrayRef.html">ArrayRef&lt;BasicBlock *&gt;</a> ExitBlocks,</div>
<div class="line"><a name="l00183"></a><span class="lineno">  183</span>&#160;      <a class="code" href="classllvm_1_1ArrayRef.html">ArrayRef&lt;Instruction *&gt;</a> InsertPts,</div>
<div class="line"><a name="l00184"></a><span class="lineno">  184</span>&#160;      <a class="code" href="classllvm_1_1DenseMap.html">DenseMap</a>&lt;<a class="code" href="classllvm_1_1Loop.html">Loop</a> *, <a class="code" href="classllvm_1_1SmallVector.html">SmallVector&lt;LoadStorePair, 8&gt;</a>&gt; &amp;LoopToCands,</div>
<div class="line"><a name="l00185"></a><span class="lineno">  185</span>&#160;      <a class="code" href="classllvm_1_1LoopInfo.html">LoopInfo</a> &amp;LI)</div>
<div class="line"><a name="l00186"></a><span class="lineno">  186</span>&#160;      : <a class="code" href="classllvm_1_1LoadAndStorePromoter.html">LoadAndStorePromoter</a>({L, <a class="code" href="lib_2Target_2ARM_2README_8txt.html#a1b45f45820a60c09244a87eb59824aec">S</a>}, <a class="code" href="MemorySSA_8cpp.html#a20a60bdac22b099d87d8cb0c1d554120">SSA</a>), <a class="code" href="namespacellvm_1_1SPII.html#a2ab8a310a4181c487902735f4758ca88a36b3dd3b84fde3f8494a9b18af131856">Store</a>(<a class="code" href="lib_2Target_2ARM_2README_8txt.html#a1b45f45820a60c09244a87eb59824aec">S</a>), ExitBlocks(ExitBlocks),</div>
<div class="line"><a name="l00187"></a><span class="lineno">  187</span>&#160;        InsertPts(InsertPts), LoopToCandidates(LoopToCands), LI(LI) {</div>
<div class="line"><a name="l00188"></a><span class="lineno">  188</span>&#160;    <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(isa&lt;LoadInst&gt;(L));</div>
<div class="line"><a name="l00189"></a><span class="lineno">  189</span>&#160;    <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(isa&lt;StoreInst&gt;(<a class="code" href="lib_2Target_2ARM_2README_8txt.html#a1b45f45820a60c09244a87eb59824aec">S</a>));</div>
<div class="line"><a name="l00190"></a><span class="lineno">  190</span>&#160;    <a class="code" href="MemorySSA_8cpp.html#a20a60bdac22b099d87d8cb0c1d554120">SSA</a>.AddAvailableValue(PH, <a class="code" href="classllvm_1_1Init.html">Init</a>);</div>
<div class="line"><a name="l00191"></a><span class="lineno">  191</span>&#160;  }</div>
<div class="line"><a name="l00192"></a><span class="lineno">  192</span>&#160; </div>
<div class="line"><a name="l00193"></a><span class="lineno">  193</span>&#160;  <span class="keywordtype">void</span> doExtraRewritesBeforeFinalDeletion()<span class="keyword"> override </span>{</div>
<div class="line"><a name="l00194"></a><span class="lineno">  194</span>&#160;    <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> <a class="code" href="lib_2Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a> = 0, <a class="code" href="namespacellvm_1_1numbers.html#a92f4283d4e0e2ea1776894b3ae93640f">e</a> = ExitBlocks.<a class="code" href="classllvm_1_1ArrayRef.html#a85ffb6531d4cda988ea81f18d4e56fb7">size</a>(); <a class="code" href="lib_2Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a> != <a class="code" href="namespacellvm_1_1numbers.html#a92f4283d4e0e2ea1776894b3ae93640f">e</a>; ++<a class="code" href="lib_2Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a>) {</div>
<div class="line"><a name="l00195"></a><span class="lineno">  195</span>&#160;      <a class="code" href="classllvm_1_1BasicBlock.html">BasicBlock</a> *ExitBlock = ExitBlocks[<a class="code" href="lib_2Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a>];</div>
<div class="line"><a name="l00196"></a><span class="lineno">  196</span>&#160;      <a class="code" href="classllvm_1_1Instruction.html">Instruction</a> *InsertPos = InsertPts[<a class="code" href="lib_2Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a>];</div>
<div class="line"><a name="l00197"></a><span class="lineno">  197</span>&#160;      <span class="comment">// Get LiveIn value into the ExitBlock. If there are multiple</span></div>
<div class="line"><a name="l00198"></a><span class="lineno">  198</span>&#160;      <span class="comment">// predecessors, the value is defined by a PHI node in this</span></div>
<div class="line"><a name="l00199"></a><span class="lineno">  199</span>&#160;      <span class="comment">// block.</span></div>
<div class="line"><a name="l00200"></a><span class="lineno">  200</span>&#160;      <a class="code" href="classllvm_1_1Value.html">Value</a> *LiveInValue = <a class="code" href="MemorySSA_8cpp.html#a20a60bdac22b099d87d8cb0c1d554120">SSA</a>.GetValueInMiddleOfBlock(ExitBlock);</div>
<div class="line"><a name="l00201"></a><span class="lineno">  201</span>&#160;      <a class="code" href="classllvm_1_1Value.html">Value</a> *<a class="code" href="ELFObjHandler_8cpp.html#a9df82a8be2f17e80535a8937bf23e022">Addr</a> = cast&lt;StoreInst&gt;(<a class="code" href="namespacellvm_1_1SPII.html#a2ab8a310a4181c487902735f4758ca88a36b3dd3b84fde3f8494a9b18af131856">Store</a>)-&gt;getPointerOperand();</div>
<div class="line"><a name="l00202"></a><span class="lineno">  202</span>&#160;      <a class="code" href="classllvm_1_1Type.html">Type</a> *Ty = LiveInValue-&gt;<a class="code" href="classllvm_1_1Value.html#a6393a2d4fe7e10b28a0dcc35f881567b">getType</a>();</div>
<div class="line"><a name="l00203"></a><span class="lineno">  203</span>&#160;      <a class="code" href="classllvm_1_1IRBuilder.html">IRBuilder&lt;&gt;</a> <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>(InsertPos);</div>
<div class="line"><a name="l00204"></a><span class="lineno">  204</span>&#160;      <span class="keywordflow">if</span> (AtomicCounterUpdatePromoted)</div>
<div class="line"><a name="l00205"></a><span class="lineno">  205</span>&#160;        <span class="comment">// automic update currently can only be promoted across the current</span></div>
<div class="line"><a name="l00206"></a><span class="lineno">  206</span>&#160;        <span class="comment">// loop, not the whole loop nest.</span></div>
<div class="line"><a name="l00207"></a><span class="lineno">  207</span>&#160;        <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.CreateAtomicRMW(<a class="code" href="classllvm_1_1AtomicRMWInst.html#a461cfbbb5c7a57ab73210498923cf615a0794c42b44989f9d9f1454d79ca0dd88">AtomicRMWInst::Add</a>, <a class="code" href="ELFObjHandler_8cpp.html#a9df82a8be2f17e80535a8937bf23e022">Addr</a>, LiveInValue,</div>
<div class="line"><a name="l00208"></a><span class="lineno">  208</span>&#160;                                <a class="code" href="structllvm_1_1MaybeAlign.html">MaybeAlign</a>(),</div>
<div class="line"><a name="l00209"></a><span class="lineno">  209</span>&#160;                                AtomicOrdering::SequentiallyConsistent);</div>
<div class="line"><a name="l00210"></a><span class="lineno">  210</span>&#160;      <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00211"></a><span class="lineno">  211</span>&#160;        <a class="code" href="classllvm_1_1LoadInst.html">LoadInst</a> *OldVal = <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.CreateLoad(Ty, <a class="code" href="ELFObjHandler_8cpp.html#a9df82a8be2f17e80535a8937bf23e022">Addr</a>, <span class="stringliteral">&quot;pgocount.promoted&quot;</span>);</div>
<div class="line"><a name="l00212"></a><span class="lineno">  212</span>&#160;        <span class="keyword">auto</span> *NewVal = <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.CreateAdd(OldVal, LiveInValue);</div>
<div class="line"><a name="l00213"></a><span class="lineno">  213</span>&#160;        <span class="keyword">auto</span> *NewStore = <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.CreateStore(NewVal, <a class="code" href="ELFObjHandler_8cpp.html#a9df82a8be2f17e80535a8937bf23e022">Addr</a>);</div>
<div class="line"><a name="l00214"></a><span class="lineno">  214</span>&#160; </div>
<div class="line"><a name="l00215"></a><span class="lineno">  215</span>&#160;        <span class="comment">// Now update the parent loop&#39;s candidate list:</span></div>
<div class="line"><a name="l00216"></a><span class="lineno">  216</span>&#160;        <span class="keywordflow">if</span> (IterativeCounterPromotion) {</div>
<div class="line"><a name="l00217"></a><span class="lineno">  217</span>&#160;          <span class="keyword">auto</span> *TargetLoop = LI.<a class="code" href="classllvm_1_1LoopInfoBase.html#a7a7c8e0e4f836c13c015b62e18f386bd">getLoopFor</a>(ExitBlock);</div>
<div class="line"><a name="l00218"></a><span class="lineno">  218</span>&#160;          <span class="keywordflow">if</span> (TargetLoop)</div>
<div class="line"><a name="l00219"></a><span class="lineno">  219</span>&#160;            LoopToCandidates[TargetLoop].emplace_back(OldVal, NewStore);</div>
<div class="line"><a name="l00220"></a><span class="lineno">  220</span>&#160;        }</div>
<div class="line"><a name="l00221"></a><span class="lineno">  221</span>&#160;      }</div>
<div class="line"><a name="l00222"></a><span class="lineno">  222</span>&#160;    }</div>
<div class="line"><a name="l00223"></a><span class="lineno">  223</span>&#160;  }</div>
<div class="line"><a name="l00224"></a><span class="lineno">  224</span>&#160; </div>
<div class="line"><a name="l00225"></a><span class="lineno">  225</span>&#160;<span class="keyword">private</span>:</div>
<div class="line"><a name="l00226"></a><span class="lineno">  226</span>&#160;  <a class="code" href="classllvm_1_1Instruction.html">Instruction</a> *<a class="code" href="namespacellvm_1_1SPII.html#a2ab8a310a4181c487902735f4758ca88a36b3dd3b84fde3f8494a9b18af131856">Store</a>;</div>
<div class="line"><a name="l00227"></a><span class="lineno">  227</span>&#160;  <a class="code" href="classllvm_1_1ArrayRef.html">ArrayRef&lt;BasicBlock *&gt;</a> ExitBlocks;</div>
<div class="line"><a name="l00228"></a><span class="lineno">  228</span>&#160;  <a class="code" href="classllvm_1_1ArrayRef.html">ArrayRef&lt;Instruction *&gt;</a> InsertPts;</div>
<div class="line"><a name="l00229"></a><span class="lineno">  229</span>&#160;  <a class="code" href="classllvm_1_1DenseMap.html">DenseMap&lt;Loop *, SmallVector&lt;LoadStorePair, 8&gt;</a>&gt; &amp;LoopToCandidates;</div>
<div class="line"><a name="l00230"></a><span class="lineno">  230</span>&#160;  <a class="code" href="classllvm_1_1LoopInfo.html">LoopInfo</a> &amp;LI;</div>
<div class="line"><a name="l00231"></a><span class="lineno">  231</span>&#160;};</div>
<div class="line"><a name="l00232"></a><span class="lineno">  232</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l00233"></a><span class="lineno">  233</span>&#160;<span class="comment">/// A helper class to do register promotion for all profile counter</span></div>
<div class="line"><a name="l00234"></a><span class="lineno">  234</span>&#160;<span class="comment">/// updates in a loop.</span></div>
<div class="line"><a name="l00235"></a><span class="lineno">  235</span>&#160;<span class="comment">///</span></div>
<div class="line"><a name="l00236"></a><span class="lineno">  236</span>&#160;<span class="comment"></span><span class="keyword">class </span>PGOCounterPromoter {</div>
<div class="line"><a name="l00237"></a><span class="lineno">  237</span>&#160;<span class="keyword">public</span>:</div>
<div class="line"><a name="l00238"></a><span class="lineno">  238</span>&#160;  PGOCounterPromoter(</div>
<div class="line"><a name="l00239"></a><span class="lineno">  239</span>&#160;      <a class="code" href="classllvm_1_1DenseMap.html">DenseMap</a>&lt;<a class="code" href="classllvm_1_1Loop.html">Loop</a> *, <a class="code" href="classllvm_1_1SmallVector.html">SmallVector&lt;LoadStorePair, 8&gt;</a>&gt; &amp;LoopToCands,</div>
<div class="line"><a name="l00240"></a><span class="lineno">  240</span>&#160;      <a class="code" href="classllvm_1_1Loop.html">Loop</a> &amp;CurLoop, <a class="code" href="classllvm_1_1LoopInfo.html">LoopInfo</a> &amp;LI, <a class="code" href="classllvm_1_1BlockFrequencyInfo.html">BlockFrequencyInfo</a> *<a class="code" href="namespacellvm_1_1AMDGPUISD.html#a739d53294bc38cd6b0b23332f9994c0eafbca76f7875e080d97cee761de04d996">BFI</a>)</div>
<div class="line"><a name="l00241"></a><span class="lineno">  241</span>&#160;      : LoopToCandidates(LoopToCands), ExitBlocks(), InsertPts(), L(CurLoop),</div>
<div class="line"><a name="l00242"></a><span class="lineno">  242</span>&#160;        LI(LI), <a class="code" href="namespacellvm_1_1AMDGPUISD.html#a739d53294bc38cd6b0b23332f9994c0eafbca76f7875e080d97cee761de04d996">BFI</a>(<a class="code" href="namespacellvm_1_1AMDGPUISD.html#a739d53294bc38cd6b0b23332f9994c0eafbca76f7875e080d97cee761de04d996">BFI</a>) {</div>
<div class="line"><a name="l00243"></a><span class="lineno">  243</span>&#160; </div>
<div class="line"><a name="l00244"></a><span class="lineno">  244</span>&#160;    <span class="comment">// Skip collection of ExitBlocks and InsertPts for loops that will not be</span></div>
<div class="line"><a name="l00245"></a><span class="lineno">  245</span>&#160;    <span class="comment">// able to have counters promoted.</span></div>
<div class="line"><a name="l00246"></a><span class="lineno">  246</span>&#160;    <a class="code" href="classllvm_1_1SmallVector.html">SmallVector&lt;BasicBlock *, 8&gt;</a> LoopExitBlocks;</div>
<div class="line"><a name="l00247"></a><span class="lineno">  247</span>&#160;    <a class="code" href="classllvm_1_1SmallPtrSet.html">SmallPtrSet&lt;BasicBlock *, 8&gt;</a> BlockSet;</div>
<div class="line"><a name="l00248"></a><span class="lineno">  248</span>&#160; </div>
<div class="line"><a name="l00249"></a><span class="lineno">  249</span>&#160;    L.getExitBlocks(LoopExitBlocks);</div>
<div class="line"><a name="l00250"></a><span class="lineno">  250</span>&#160;    <span class="keywordflow">if</span> (!isPromotionPossible(&amp;L, LoopExitBlocks))</div>
<div class="line"><a name="l00251"></a><span class="lineno">  251</span>&#160;      <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l00252"></a><span class="lineno">  252</span>&#160; </div>
<div class="line"><a name="l00253"></a><span class="lineno">  253</span>&#160;    <span class="keywordflow">for</span> (<a class="code" href="classllvm_1_1BasicBlock.html">BasicBlock</a> *ExitBlock : LoopExitBlocks) {</div>
<div class="line"><a name="l00254"></a><span class="lineno">  254</span>&#160;      <span class="keywordflow">if</span> (BlockSet.<a class="code" href="classllvm_1_1SmallPtrSetImpl.html#a6bc6fb89fe2e91c25559a8631f56e27e">insert</a>(ExitBlock).second) {</div>
<div class="line"><a name="l00255"></a><span class="lineno">  255</span>&#160;        ExitBlocks.push_back(ExitBlock);</div>
<div class="line"><a name="l00256"></a><span class="lineno">  256</span>&#160;        InsertPts.push_back(&amp;*ExitBlock-&gt;getFirstInsertionPt());</div>
<div class="line"><a name="l00257"></a><span class="lineno">  257</span>&#160;      }</div>
<div class="line"><a name="l00258"></a><span class="lineno">  258</span>&#160;    }</div>
<div class="line"><a name="l00259"></a><span class="lineno">  259</span>&#160;  }</div>
<div class="line"><a name="l00260"></a><span class="lineno">  260</span>&#160; </div>
<div class="line"><a name="l00261"></a><span class="lineno">  261</span>&#160;  <span class="keywordtype">bool</span> run(int64_t *NumPromoted) {</div>
<div class="line"><a name="l00262"></a><span class="lineno">  262</span>&#160;    <span class="comment">// Skip &#39;infinite&#39; loops:</span></div>
<div class="line"><a name="l00263"></a><span class="lineno">  263</span>&#160;    <span class="keywordflow">if</span> (ExitBlocks.size() == 0)</div>
<div class="line"><a name="l00264"></a><span class="lineno">  264</span>&#160;      <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l00265"></a><span class="lineno">  265</span>&#160; </div>
<div class="line"><a name="l00266"></a><span class="lineno">  266</span>&#160;    <span class="comment">// Skip if any of the ExitBlocks contains a ret instruction.</span></div>
<div class="line"><a name="l00267"></a><span class="lineno">  267</span>&#160;    <span class="comment">// This is to prevent dumping of incomplete profile -- if the</span></div>
<div class="line"><a name="l00268"></a><span class="lineno">  268</span>&#160;    <span class="comment">// the loop is a long running loop and dump is called in the middle</span></div>
<div class="line"><a name="l00269"></a><span class="lineno">  269</span>&#160;    <span class="comment">// of the loop, the result profile is incomplete.</span></div>
<div class="line"><a name="l00270"></a><span class="lineno">  270</span>&#160;    <span class="comment">// FIXME: add other heuristics to detect long running loops.</span></div>
<div class="line"><a name="l00271"></a><span class="lineno">  271</span>&#160;    <span class="keywordflow">if</span> (SkipRetExitBlock) {</div>
<div class="line"><a name="l00272"></a><span class="lineno">  272</span>&#160;      <span class="keywordflow">for</span> (<span class="keyword">auto</span> <a class="code" href="lib_2CodeGen_2README_8txt.html#a09776db24cf586ec9f1e18f3bae14099">BB</a> : ExitBlocks)</div>
<div class="line"><a name="l00273"></a><span class="lineno">  273</span>&#160;        <span class="keywordflow">if</span> (isa&lt;ReturnInst&gt;(<a class="code" href="lib_2CodeGen_2README_8txt.html#a09776db24cf586ec9f1e18f3bae14099">BB</a>-&gt;getTerminator()))</div>
<div class="line"><a name="l00274"></a><span class="lineno">  274</span>&#160;          <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l00275"></a><span class="lineno">  275</span>&#160;    }</div>
<div class="line"><a name="l00276"></a><span class="lineno">  276</span>&#160; </div>
<div class="line"><a name="l00277"></a><span class="lineno">  277</span>&#160;    <span class="keywordtype">unsigned</span> MaxProm = getMaxNumOfPromotionsInLoop(&amp;L);</div>
<div class="line"><a name="l00278"></a><span class="lineno">  278</span>&#160;    <span class="keywordflow">if</span> (MaxProm == 0)</div>
<div class="line"><a name="l00279"></a><span class="lineno">  279</span>&#160;      <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l00280"></a><span class="lineno">  280</span>&#160; </div>
<div class="line"><a name="l00281"></a><span class="lineno">  281</span>&#160;    <span class="keywordtype">unsigned</span> Promoted = 0;</div>
<div class="line"><a name="l00282"></a><span class="lineno">  282</span>&#160;    <span class="keywordflow">for</span> (<span class="keyword">auto</span> &amp;Cand : LoopToCandidates[&amp;L]) {</div>
<div class="line"><a name="l00283"></a><span class="lineno">  283</span>&#160; </div>
<div class="line"><a name="l00284"></a><span class="lineno">  284</span>&#160;      <a class="code" href="classllvm_1_1SmallVector.html">SmallVector&lt;PHINode *, 4&gt;</a> NewPHIs;</div>
<div class="line"><a name="l00285"></a><span class="lineno">  285</span>&#160;      <a class="code" href="classllvm_1_1SSAUpdater.html">SSAUpdater</a> <a class="code" href="MemorySSA_8cpp.html#a20a60bdac22b099d87d8cb0c1d554120">SSA</a>(&amp;NewPHIs);</div>
<div class="line"><a name="l00286"></a><span class="lineno">  286</span>&#160;      <a class="code" href="classllvm_1_1Value.html">Value</a> *InitVal = <a class="code" href="classllvm_1_1ConstantInt.html#a969709dd49c28865a482d8b870f87c46">ConstantInt::get</a>(Cand.first-&gt;getType(), 0);</div>
<div class="line"><a name="l00287"></a><span class="lineno">  287</span>&#160; </div>
<div class="line"><a name="l00288"></a><span class="lineno">  288</span>&#160;      <span class="comment">// If BFI is set, we will use it to guide the promotions.</span></div>
<div class="line"><a name="l00289"></a><span class="lineno">  289</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="namespacellvm_1_1AMDGPUISD.html#a739d53294bc38cd6b0b23332f9994c0eafbca76f7875e080d97cee761de04d996">BFI</a>) {</div>
<div class="line"><a name="l00290"></a><span class="lineno">  290</span>&#160;        <span class="keyword">auto</span> *<a class="code" href="lib_2CodeGen_2README_8txt.html#a09776db24cf586ec9f1e18f3bae14099">BB</a> = Cand.first-&gt;getParent();</div>
<div class="line"><a name="l00291"></a><span class="lineno">  291</span>&#160;        <span class="keyword">auto</span> <a class="code" href="DFAPacketizer_8cpp.html#acc16edf21eddec420cd4b27adb3111c6">InstrCount</a> = <a class="code" href="namespacellvm_1_1AMDGPUISD.html#a739d53294bc38cd6b0b23332f9994c0eafbca76f7875e080d97cee761de04d996">BFI</a>-&gt;getBlockProfileCount(<a class="code" href="lib_2CodeGen_2README_8txt.html#a09776db24cf586ec9f1e18f3bae14099">BB</a>);</div>
<div class="line"><a name="l00292"></a><span class="lineno">  292</span>&#160;        <span class="keywordflow">if</span> (!<a class="code" href="DFAPacketizer_8cpp.html#acc16edf21eddec420cd4b27adb3111c6">InstrCount</a>)</div>
<div class="line"><a name="l00293"></a><span class="lineno">  293</span>&#160;          <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l00294"></a><span class="lineno">  294</span>&#160;        <span class="keyword">auto</span> PreheaderCount = <a class="code" href="namespacellvm_1_1AMDGPUISD.html#a739d53294bc38cd6b0b23332f9994c0eafbca76f7875e080d97cee761de04d996">BFI</a>-&gt;getBlockProfileCount(L.getLoopPreheader());</div>
<div class="line"><a name="l00295"></a><span class="lineno">  295</span>&#160;        <span class="comment">// If the average loop trip count is not greater than 1.5, we skip</span></div>
<div class="line"><a name="l00296"></a><span class="lineno">  296</span>&#160;        <span class="comment">// promotion.</span></div>
<div class="line"><a name="l00297"></a><span class="lineno">  297</span>&#160;        <span class="keywordflow">if</span> (PreheaderCount &amp;&amp;</div>
<div class="line"><a name="l00298"></a><span class="lineno">  298</span>&#160;            (PreheaderCount.getValue() * 3) &gt;= (<a class="code" href="DFAPacketizer_8cpp.html#acc16edf21eddec420cd4b27adb3111c6">InstrCount</a>.getValue() * 2))</div>
<div class="line"><a name="l00299"></a><span class="lineno">  299</span>&#160;          <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l00300"></a><span class="lineno">  300</span>&#160;      }</div>
<div class="line"><a name="l00301"></a><span class="lineno">  301</span>&#160; </div>
<div class="line"><a name="l00302"></a><span class="lineno">  302</span>&#160;      PGOCounterPromoterHelper Promoter(Cand.first, Cand.second, <a class="code" href="MemorySSA_8cpp.html#a20a60bdac22b099d87d8cb0c1d554120">SSA</a>, InitVal,</div>
<div class="line"><a name="l00303"></a><span class="lineno">  303</span>&#160;                                        L.getLoopPreheader(), ExitBlocks,</div>
<div class="line"><a name="l00304"></a><span class="lineno">  304</span>&#160;                                        InsertPts, LoopToCandidates, LI);</div>
<div class="line"><a name="l00305"></a><span class="lineno">  305</span>&#160;      Promoter.run(<a class="code" href="classllvm_1_1SmallVector.html">SmallVector&lt;Instruction *, 2&gt;</a>({Cand.first, Cand.second}));</div>
<div class="line"><a name="l00306"></a><span class="lineno">  306</span>&#160;      Promoted++;</div>
<div class="line"><a name="l00307"></a><span class="lineno">  307</span>&#160;      <span class="keywordflow">if</span> (Promoted &gt;= MaxProm)</div>
<div class="line"><a name="l00308"></a><span class="lineno">  308</span>&#160;        <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00309"></a><span class="lineno">  309</span>&#160; </div>
<div class="line"><a name="l00310"></a><span class="lineno">  310</span>&#160;      (*NumPromoted)++;</div>
<div class="line"><a name="l00311"></a><span class="lineno">  311</span>&#160;      <span class="keywordflow">if</span> (MaxNumOfPromotions != -1 &amp;&amp; *NumPromoted &gt;= MaxNumOfPromotions)</div>
<div class="line"><a name="l00312"></a><span class="lineno">  312</span>&#160;        <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00313"></a><span class="lineno">  313</span>&#160;    }</div>
<div class="line"><a name="l00314"></a><span class="lineno">  314</span>&#160; </div>
<div class="line"><a name="l00315"></a><span class="lineno">  315</span>&#160;    <a class="code" href="Debug_8h.html#a08efc68d15935eb8889400a46c3749ba">LLVM_DEBUG</a>(<a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; Promoted &lt;&lt; <span class="stringliteral">&quot; counters promoted for loop (depth=&quot;</span></div>
<div class="line"><a name="l00316"></a><span class="lineno">  316</span>&#160;                      &lt;&lt; L.getLoopDepth() &lt;&lt; <span class="stringliteral">&quot;)\n&quot;</span>);</div>
<div class="line"><a name="l00317"></a><span class="lineno">  317</span>&#160;    <span class="keywordflow">return</span> Promoted != 0;</div>
<div class="line"><a name="l00318"></a><span class="lineno">  318</span>&#160;  }</div>
<div class="line"><a name="l00319"></a><span class="lineno">  319</span>&#160; </div>
<div class="line"><a name="l00320"></a><span class="lineno">  320</span>&#160;<span class="keyword">private</span>:</div>
<div class="line"><a name="l00321"></a><span class="lineno">  321</span>&#160;  <span class="keywordtype">bool</span> allowSpeculativeCounterPromotion(<a class="code" href="classllvm_1_1Loop.html">Loop</a> *LP) {</div>
<div class="line"><a name="l00322"></a><span class="lineno">  322</span>&#160;    <a class="code" href="classllvm_1_1SmallVector.html">SmallVector&lt;BasicBlock *, 8&gt;</a> ExitingBlocks;</div>
<div class="line"><a name="l00323"></a><span class="lineno">  323</span>&#160;    L.getExitingBlocks(ExitingBlocks);</div>
<div class="line"><a name="l00324"></a><span class="lineno">  324</span>&#160;    <span class="comment">// Not considierered speculative.</span></div>
<div class="line"><a name="l00325"></a><span class="lineno">  325</span>&#160;    <span class="keywordflow">if</span> (ExitingBlocks.size() == 1)</div>
<div class="line"><a name="l00326"></a><span class="lineno">  326</span>&#160;      <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l00327"></a><span class="lineno">  327</span>&#160;    <span class="keywordflow">if</span> (ExitingBlocks.size() &gt; SpeculativeCounterPromotionMaxExiting)</div>
<div class="line"><a name="l00328"></a><span class="lineno">  328</span>&#160;      <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l00329"></a><span class="lineno">  329</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l00330"></a><span class="lineno">  330</span>&#160;  }</div>
<div class="line"><a name="l00331"></a><span class="lineno">  331</span>&#160; </div>
<div class="line"><a name="l00332"></a><span class="lineno">  332</span>&#160;  <span class="comment">// Check whether the loop satisfies the basic conditions needed to perform</span></div>
<div class="line"><a name="l00333"></a><span class="lineno">  333</span>&#160;  <span class="comment">// Counter Promotions.</span></div>
<div class="line"><a name="l00334"></a><span class="lineno">  334</span>&#160;  <span class="keywordtype">bool</span> isPromotionPossible(<a class="code" href="classllvm_1_1Loop.html">Loop</a> *LP,</div>
<div class="line"><a name="l00335"></a><span class="lineno">  335</span>&#160;                           <span class="keyword">const</span> <a class="code" href="classllvm_1_1SmallVectorImpl.html">SmallVectorImpl&lt;BasicBlock *&gt;</a> &amp;LoopExitBlocks) {</div>
<div class="line"><a name="l00336"></a><span class="lineno">  336</span>&#160;    <span class="comment">// We can&#39;t insert into a catchswitch.</span></div>
<div class="line"><a name="l00337"></a><span class="lineno">  337</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="namespacellvm.html#a61d13d6824ec46c31260a4fd0997eda0">llvm::any_of</a>(LoopExitBlocks, [](<a class="code" href="classllvm_1_1BasicBlock.html">BasicBlock</a> *Exit) {</div>
<div class="line"><a name="l00338"></a><span class="lineno">  338</span>&#160;          <span class="keywordflow">return</span> isa&lt;CatchSwitchInst&gt;(Exit-&gt;<a class="code" href="classllvm_1_1BasicBlock.html#a71a9eabc4318b2fc34f83b01dfee484b">getTerminator</a>());</div>
<div class="line"><a name="l00339"></a><span class="lineno">  339</span>&#160;        }))</div>
<div class="line"><a name="l00340"></a><span class="lineno">  340</span>&#160;      <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l00341"></a><span class="lineno">  341</span>&#160; </div>
<div class="line"><a name="l00342"></a><span class="lineno">  342</span>&#160;    <span class="keywordflow">if</span> (!LP-&gt;<a class="code" href="classllvm_1_1LoopBase.html#ae7ebc88c9b32b51b749bd5bbcfaa5fb8">hasDedicatedExits</a>())</div>
<div class="line"><a name="l00343"></a><span class="lineno">  343</span>&#160;      <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l00344"></a><span class="lineno">  344</span>&#160; </div>
<div class="line"><a name="l00345"></a><span class="lineno">  345</span>&#160;    <a class="code" href="classllvm_1_1BasicBlock.html">BasicBlock</a> *PH = LP-&gt;<a class="code" href="classllvm_1_1LoopBase.html#ac3280e7f76f955403fe17eacf126b90d">getLoopPreheader</a>();</div>
<div class="line"><a name="l00346"></a><span class="lineno">  346</span>&#160;    <span class="keywordflow">if</span> (!PH)</div>
<div class="line"><a name="l00347"></a><span class="lineno">  347</span>&#160;      <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l00348"></a><span class="lineno">  348</span>&#160; </div>
<div class="line"><a name="l00349"></a><span class="lineno">  349</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l00350"></a><span class="lineno">  350</span>&#160;  }</div>
<div class="line"><a name="l00351"></a><span class="lineno">  351</span>&#160; </div>
<div class="line"><a name="l00352"></a><span class="lineno">  352</span>&#160;  <span class="comment">// Returns the max number of Counter Promotions for LP.</span></div>
<div class="line"><a name="l00353"></a><span class="lineno">  353</span>&#160;  <span class="keywordtype">unsigned</span> getMaxNumOfPromotionsInLoop(<a class="code" href="classllvm_1_1Loop.html">Loop</a> *LP) {</div>
<div class="line"><a name="l00354"></a><span class="lineno">  354</span>&#160;    <a class="code" href="classllvm_1_1SmallVector.html">SmallVector&lt;BasicBlock *, 8&gt;</a> LoopExitBlocks;</div>
<div class="line"><a name="l00355"></a><span class="lineno">  355</span>&#160;    LP-&gt;<a class="code" href="classllvm_1_1LoopBase.html#a1d9238c61483c12dce660bae4c8cc2d2">getExitBlocks</a>(LoopExitBlocks);</div>
<div class="line"><a name="l00356"></a><span class="lineno">  356</span>&#160;    <span class="keywordflow">if</span> (!isPromotionPossible(LP, LoopExitBlocks))</div>
<div class="line"><a name="l00357"></a><span class="lineno">  357</span>&#160;      <span class="keywordflow">return</span> 0;</div>
<div class="line"><a name="l00358"></a><span class="lineno">  358</span>&#160; </div>
<div class="line"><a name="l00359"></a><span class="lineno">  359</span>&#160;    <a class="code" href="classllvm_1_1SmallVector.html">SmallVector&lt;BasicBlock *, 8&gt;</a> ExitingBlocks;</div>
<div class="line"><a name="l00360"></a><span class="lineno">  360</span>&#160;    LP-&gt;<a class="code" href="classllvm_1_1LoopBase.html#a46880fab7a9d5bd439725f2acc59b80d">getExitingBlocks</a>(ExitingBlocks);</div>
<div class="line"><a name="l00361"></a><span class="lineno">  361</span>&#160; </div>
<div class="line"><a name="l00362"></a><span class="lineno">  362</span>&#160;    <span class="comment">// If BFI is set, we do more aggressive promotions based on BFI.</span></div>
<div class="line"><a name="l00363"></a><span class="lineno">  363</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="namespacellvm_1_1AMDGPUISD.html#a739d53294bc38cd6b0b23332f9994c0eafbca76f7875e080d97cee761de04d996">BFI</a>)</div>
<div class="line"><a name="l00364"></a><span class="lineno">  364</span>&#160;      <span class="keywordflow">return</span> (<span class="keywordtype">unsigned</span>)-1;</div>
<div class="line"><a name="l00365"></a><span class="lineno">  365</span>&#160; </div>
<div class="line"><a name="l00366"></a><span class="lineno">  366</span>&#160;    <span class="comment">// Not considierered speculative.</span></div>
<div class="line"><a name="l00367"></a><span class="lineno">  367</span>&#160;    <span class="keywordflow">if</span> (ExitingBlocks.size() == 1)</div>
<div class="line"><a name="l00368"></a><span class="lineno">  368</span>&#160;      <span class="keywordflow">return</span> MaxNumOfPromotionsPerLoop;</div>
<div class="line"><a name="l00369"></a><span class="lineno">  369</span>&#160; </div>
<div class="line"><a name="l00370"></a><span class="lineno">  370</span>&#160;    <span class="keywordflow">if</span> (ExitingBlocks.size() &gt; SpeculativeCounterPromotionMaxExiting)</div>
<div class="line"><a name="l00371"></a><span class="lineno">  371</span>&#160;      <span class="keywordflow">return</span> 0;</div>
<div class="line"><a name="l00372"></a><span class="lineno">  372</span>&#160; </div>
<div class="line"><a name="l00373"></a><span class="lineno">  373</span>&#160;    <span class="comment">// Whether the target block is in a loop does not matter:</span></div>
<div class="line"><a name="l00374"></a><span class="lineno">  374</span>&#160;    <span class="keywordflow">if</span> (SpeculativeCounterPromotionToLoop)</div>
<div class="line"><a name="l00375"></a><span class="lineno">  375</span>&#160;      <span class="keywordflow">return</span> MaxNumOfPromotionsPerLoop;</div>
<div class="line"><a name="l00376"></a><span class="lineno">  376</span>&#160; </div>
<div class="line"><a name="l00377"></a><span class="lineno">  377</span>&#160;    <span class="comment">// Now check the target block:</span></div>
<div class="line"><a name="l00378"></a><span class="lineno">  378</span>&#160;    <span class="keywordtype">unsigned</span> MaxProm = MaxNumOfPromotionsPerLoop;</div>
<div class="line"><a name="l00379"></a><span class="lineno">  379</span>&#160;    <span class="keywordflow">for</span> (<span class="keyword">auto</span> *TargetBlock : LoopExitBlocks) {</div>
<div class="line"><a name="l00380"></a><span class="lineno">  380</span>&#160;      <span class="keyword">auto</span> *TargetLoop = LI.<a class="code" href="classllvm_1_1LoopInfoBase.html#a7a7c8e0e4f836c13c015b62e18f386bd">getLoopFor</a>(TargetBlock);</div>
<div class="line"><a name="l00381"></a><span class="lineno">  381</span>&#160;      <span class="keywordflow">if</span> (!TargetLoop)</div>
<div class="line"><a name="l00382"></a><span class="lineno">  382</span>&#160;        <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l00383"></a><span class="lineno">  383</span>&#160;      <span class="keywordtype">unsigned</span> MaxPromForTarget = getMaxNumOfPromotionsInLoop(TargetLoop);</div>
<div class="line"><a name="l00384"></a><span class="lineno">  384</span>&#160;      <span class="keywordtype">unsigned</span> PendingCandsInTarget = LoopToCandidates[TargetLoop].size();</div>
<div class="line"><a name="l00385"></a><span class="lineno">  385</span>&#160;      MaxProm =</div>
<div class="line"><a name="l00386"></a><span class="lineno">  386</span>&#160;          <a class="code" href="namespacellvm.html#a57f2ca0e57f4f7b13f56f9aa16af3e0d">std::min</a>(MaxProm, <a class="code" href="namespacellvm.html#a81b52e18d84e3cc61df7e897bba1b259">std::max</a>(MaxPromForTarget, PendingCandsInTarget) -</div>
<div class="line"><a name="l00387"></a><span class="lineno">  387</span>&#160;                                PendingCandsInTarget);</div>
<div class="line"><a name="l00388"></a><span class="lineno">  388</span>&#160;    }</div>
<div class="line"><a name="l00389"></a><span class="lineno">  389</span>&#160;    <span class="keywordflow">return</span> MaxProm;</div>
<div class="line"><a name="l00390"></a><span class="lineno">  390</span>&#160;  }</div>
<div class="line"><a name="l00391"></a><span class="lineno">  391</span>&#160; </div>
<div class="line"><a name="l00392"></a><span class="lineno">  392</span>&#160;  <a class="code" href="classllvm_1_1DenseMap.html">DenseMap&lt;Loop *, SmallVector&lt;LoadStorePair, 8&gt;</a>&gt; &amp;LoopToCandidates;</div>
<div class="line"><a name="l00393"></a><span class="lineno">  393</span>&#160;  <a class="code" href="classllvm_1_1SmallVector.html">SmallVector&lt;BasicBlock *, 8&gt;</a> ExitBlocks;</div>
<div class="line"><a name="l00394"></a><span class="lineno">  394</span>&#160;  <a class="code" href="classllvm_1_1SmallVector.html">SmallVector&lt;Instruction *, 8&gt;</a> InsertPts;</div>
<div class="line"><a name="l00395"></a><span class="lineno">  395</span>&#160;  <a class="code" href="classllvm_1_1Loop.html">Loop</a> &amp;L;</div>
<div class="line"><a name="l00396"></a><span class="lineno">  396</span>&#160;  <a class="code" href="classllvm_1_1LoopInfo.html">LoopInfo</a> &amp;LI;</div>
<div class="line"><a name="l00397"></a><span class="lineno">  397</span>&#160;  <a class="code" href="classllvm_1_1BlockFrequencyInfo.html">BlockFrequencyInfo</a> *<a class="code" href="namespacellvm_1_1AMDGPUISD.html#a739d53294bc38cd6b0b23332f9994c0eafbca76f7875e080d97cee761de04d996">BFI</a>;</div>
<div class="line"><a name="l00398"></a><span class="lineno">  398</span>&#160;};</div>
<div class="line"><a name="l00399"></a><span class="lineno">  399</span>&#160; </div>
<div class="line"><a name="l00400"></a><span class="lineno">  400</span>&#160;<span class="keyword">enum class</span> ValueProfilingCallType {</div>
<div class="line"><a name="l00401"></a><span class="lineno">  401</span>&#160;  <span class="comment">// Individual values are tracked. Currently used for indiret call target</span></div>
<div class="line"><a name="l00402"></a><span class="lineno">  402</span>&#160;  <span class="comment">// profiling.</span></div>
<div class="line"><a name="l00403"></a><span class="lineno">  403</span>&#160;  Default,</div>
<div class="line"><a name="l00404"></a><span class="lineno">  404</span>&#160; </div>
<div class="line"><a name="l00405"></a><span class="lineno">  405</span>&#160;  <span class="comment">// MemOp: the memop size value profiling.</span></div>
<div class="line"><a name="l00406"></a><span class="lineno">  406</span>&#160;  <a class="code" href="structllvm_1_1MemOp.html">MemOp</a></div>
<div class="line"><a name="l00407"></a><span class="lineno">  407</span>&#160;};</div>
<div class="line"><a name="l00408"></a><span class="lineno">  408</span>&#160; </div>
<div class="line"><a name="l00409"></a><span class="lineno">  409</span>&#160;} <span class="comment">// end anonymous namespace</span></div>
<div class="line"><a name="l00410"></a><span class="lineno">  410</span>&#160; </div>
<div class="line"><a name="l00411"></a><span class="lineno"><a class="line" href="classllvm_1_1InstrProfiling.html#a20487c4884c2053c68ca2838df9c76d1">  411</a></span>&#160;<a class="code" href="classllvm_1_1PreservedAnalyses.html">PreservedAnalyses</a> <a class="code" href="classllvm_1_1InstrProfiling.html#a20487c4884c2053c68ca2838df9c76d1">InstrProfiling::run</a>(<a class="code" href="classllvm_1_1Module.html">Module</a> &amp;M, <a class="code" href="classllvm_1_1AnalysisManager.html">ModuleAnalysisManager</a> &amp;AM) {</div>
<div class="line"><a name="l00412"></a><span class="lineno">  412</span>&#160;  <a class="code" href="classllvm_1_1AnalysisManager.html">FunctionAnalysisManager</a> &amp;<a class="code" href="PassBuilderBindings_8cpp.html#a83c7e5ca51099e4efa895791a02fb0ed">FAM</a> =</div>
<div class="line"><a name="l00413"></a><span class="lineno">  413</span>&#160;      AM.<a class="code" href="classllvm_1_1AnalysisManager.html#ab9d3d5412c20747fd0110a046604f09a">getResult</a>&lt;<a class="code" href="classllvm_1_1InnerAnalysisManagerProxy.html">FunctionAnalysisManagerModuleProxy</a>&gt;(<a class="code" href="lib_2Target_2X86_2README_8txt.html#ac88fe1d3a61b056a4f64fbbb156a62ff">M</a>).getManager();</div>
<div class="line"><a name="l00414"></a><span class="lineno">  414</span>&#160;  <span class="keyword">auto</span> GetTLI = [&amp;<a class="code" href="PassBuilderBindings_8cpp.html#a83c7e5ca51099e4efa895791a02fb0ed">FAM</a>](<a class="code" href="classllvm_1_1Function.html">Function</a> &amp;<a class="code" href="MD5_8cpp.html#a96d73bbd7af15cb1fc38c3f4a3bd82e9">F</a>) -&gt; <a class="code" href="classllvm_1_1TargetLibraryInfo.html">TargetLibraryInfo</a> &amp; {</div>
<div class="line"><a name="l00415"></a><span class="lineno">  415</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="PassBuilderBindings_8cpp.html#a83c7e5ca51099e4efa895791a02fb0ed">FAM</a>.<a class="code" href="classllvm_1_1AnalysisManager.html#ab9d3d5412c20747fd0110a046604f09a">getResult</a>&lt;<a class="code" href="classllvm_1_1TargetLibraryAnalysis.html">TargetLibraryAnalysis</a>&gt;(<a class="code" href="MD5_8cpp.html#a96d73bbd7af15cb1fc38c3f4a3bd82e9">F</a>);</div>
<div class="line"><a name="l00416"></a><span class="lineno">  416</span>&#160;  };</div>
<div class="line"><a name="l00417"></a><span class="lineno">  417</span>&#160;  <span class="keywordflow">if</span> (!<a class="code" href="classllvm_1_1InstrProfiling.html#a20487c4884c2053c68ca2838df9c76d1">run</a>(<a class="code" href="lib_2Target_2X86_2README_8txt.html#ac88fe1d3a61b056a4f64fbbb156a62ff">M</a>, GetTLI))</div>
<div class="line"><a name="l00418"></a><span class="lineno">  418</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="classllvm_1_1PreservedAnalyses.html#a1258a1ff55557c27684010ebd7283712">PreservedAnalyses::all</a>();</div>
<div class="line"><a name="l00419"></a><span class="lineno">  419</span>&#160; </div>
<div class="line"><a name="l00420"></a><span class="lineno">  420</span>&#160;  <span class="keywordflow">return</span> <a class="code" href="classllvm_1_1PreservedAnalyses.html#a03797a73044a81cbc6a3409d6c72ee8f">PreservedAnalyses::none</a>();</div>
<div class="line"><a name="l00421"></a><span class="lineno">  421</span>&#160;}</div>
<div class="line"><a name="l00422"></a><span class="lineno">  422</span>&#160; </div>
<div class="line"><a name="l00423"></a><span class="lineno">  423</span>&#160;<span class="keywordtype">char</span> <a class="code" href="namespacellvm_1_1Intrinsic.html#a80add6b3b1cdaec560907995127adc16">InstrProfilingLegacyPass::ID</a> = 0;</div>
<div class="line"><a name="l00424"></a><span class="lineno"><a class="line" href="InstrProfiling_8cpp.html#a67bc2c6586c0db4cfbfde6d7dd7cba14">  424</a></span>&#160;<a class="code" href="InstrProfiling_8cpp.html#a67bc2c6586c0db4cfbfde6d7dd7cba14">INITIALIZE_PASS_BEGIN</a>(</div>
<div class="line"><a name="l00425"></a><span class="lineno">  425</span>&#160;    InstrProfilingLegacyPass, <span class="stringliteral">&quot;instrprof&quot;</span>,</div>
<div class="line"><a name="l00426"></a><span class="lineno">  426</span>&#160;    <span class="stringliteral">&quot;Frontend instrumentation-based coverage lowering.&quot;</span>, <span class="keyword">false</span>, <span class="keyword">false</span>)</div>
<div class="line"><a name="l00427"></a><span class="lineno">  427</span>&#160;<a class="code" href="SVEIntrinsicOpts_8cpp.html#a2bb87eb1bcbc74783a83ae945eb8fa36">INITIALIZE_PASS_DEPENDENCY</a>(<a class="code" href="classllvm_1_1TargetLibraryInfoWrapperPass.html">TargetLibraryInfoWrapperPass</a>)</div>
<div class="line"><a name="l00428"></a><span class="lineno">  428</span>&#160;<a class="code" href="PassSupport_8h.html#a74ce8276b89067e806f67c45a6d92575">INITIALIZE_PASS_END</a>(</div>
<div class="line"><a name="l00429"></a><span class="lineno"><a class="line" href="InstrProfiling_8cpp.html#a194c800ff697b17dfd4090d3d09d8607">  429</a></span>&#160;    InstrProfilingLegacyPass, &quot;<a class="code" href="InstrProfiling_8cpp.html#a194c800ff697b17dfd4090d3d09d8607">instrprof</a>&quot;,</div>
<div class="line"><a name="l00430"></a><span class="lineno"><a class="line" href="InstrProfiling_8cpp.html#a2e9a586792e82fb2fa53608f1fec0bd0">  430</a></span>&#160;    &quot;Frontend <a class="code" href="XRayInstrumentation_8cpp.html#a154603d920c7f291eb16bbff268a8f2a">instrumentation</a>-based coverage <a class="code" href="InstrProfiling_8cpp.html#a2e9a586792e82fb2fa53608f1fec0bd0">lowering</a>.&quot;, <a class="code" href="namespacefalse.html">false</a>, <a class="code" href="namespacefalse.html">false</a>)</div>
<div class="line"><a name="l00431"></a><span class="lineno">  431</span>&#160; </div>
<div class="line"><a name="l00432"></a><span class="lineno">  432</span>&#160;<a class="code" href="classllvm_1_1ModulePass.html">ModulePass</a> *</div>
<div class="line"><a name="l00433"></a><span class="lineno"><a class="line" href="namespacellvm.html#a80c27119469452e61e19326b15e24c2c">  433</a></span>&#160;<a class="code" href="namespacellvm.html">llvm</a>::<a class="code" href="namespacellvm.html#a80c27119469452e61e19326b15e24c2c">createInstrProfilingLegacyPass</a>(<a class="code" href="AArch64PromoteConstant_8cpp.html#a90f8350fecae261c25be85d38b451bff">const</a> <a class="code" href="structllvm_1_1InstrProfOptions.html">InstrProfOptions</a> &amp;<a class="code" href="PassBuilderBindings_8cpp.html#a47c521bf7ba0bb2147b96d068af30d04">Options</a>,</div>
<div class="line"><a name="l00434"></a><span class="lineno">  434</span>&#160;                                     <span class="keywordtype">bool</span> IsCS) {</div>
<div class="line"><a name="l00435"></a><span class="lineno">  435</span>&#160;  <span class="keywordflow">return</span> <span class="keyword">new</span> InstrProfilingLegacyPass(<a class="code" href="PassBuilderBindings_8cpp.html#a47c521bf7ba0bb2147b96d068af30d04">Options</a>, IsCS);</div>
<div class="line"><a name="l00436"></a><span class="lineno">  436</span>&#160;}</div>
<div class="line"><a name="l00437"></a><span class="lineno">  437</span>&#160; </div>
<div class="line"><a name="l00438"></a><span class="lineno"><a class="line" href="InstrProfiling_8cpp.html#a03bbe6ff5b8b0924a94e9d4d0f600ada">  438</a></span>&#160;<span class="keyword">static</span> <a class="code" href="classllvm_1_1InstrProfIncrementInst.html">InstrProfIncrementInst</a> *<a class="code" href="InstrProfiling_8cpp.html#a03bbe6ff5b8b0924a94e9d4d0f600ada">castToIncrementInst</a>(<a class="code" href="classllvm_1_1Instruction.html">Instruction</a> *Instr) {</div>
<div class="line"><a name="l00439"></a><span class="lineno">  439</span>&#160;  <a class="code" href="classllvm_1_1InstrProfIncrementInst.html">InstrProfIncrementInst</a> *Inc = dyn_cast&lt;InstrProfIncrementInstStep&gt;(Instr);</div>
<div class="line"><a name="l00440"></a><span class="lineno">  440</span>&#160;  <span class="keywordflow">if</span> (Inc)</div>
<div class="line"><a name="l00441"></a><span class="lineno">  441</span>&#160;    <span class="keywordflow">return</span> Inc;</div>
<div class="line"><a name="l00442"></a><span class="lineno">  442</span>&#160;  <span class="keywordflow">return</span> dyn_cast&lt;InstrProfIncrementInst&gt;(Instr);</div>
<div class="line"><a name="l00443"></a><span class="lineno">  443</span>&#160;}</div>
<div class="line"><a name="l00444"></a><span class="lineno">  444</span>&#160; </div>
<div class="line"><a name="l00445"></a><span class="lineno">  445</span>&#160;<span class="keywordtype">bool</span> InstrProfiling::lowerIntrinsics(<a class="code" href="classllvm_1_1Function.html">Function</a> *<a class="code" href="MD5_8cpp.html#a96d73bbd7af15cb1fc38c3f4a3bd82e9">F</a>) {</div>
<div class="line"><a name="l00446"></a><span class="lineno">  446</span>&#160;  <span class="keywordtype">bool</span> MadeChange = <span class="keyword">false</span>;</div>
<div class="line"><a name="l00447"></a><span class="lineno">  447</span>&#160;  PromotionCandidates.clear();</div>
<div class="line"><a name="l00448"></a><span class="lineno">  448</span>&#160;  <span class="keywordflow">for</span> (<a class="code" href="classllvm_1_1BasicBlock.html">BasicBlock</a> &amp;<a class="code" href="lib_2CodeGen_2README_8txt.html#a09776db24cf586ec9f1e18f3bae14099">BB</a> : *<a class="code" href="MD5_8cpp.html#a96d73bbd7af15cb1fc38c3f4a3bd82e9">F</a>) {</div>
<div class="line"><a name="l00449"></a><span class="lineno">  449</span>&#160;    <span class="keywordflow">for</span> (<span class="keyword">auto</span> <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a> = <a class="code" href="lib_2CodeGen_2README_8txt.html#a09776db24cf586ec9f1e18f3bae14099">BB</a>.begin(), <a class="code" href="BuiltinGCs_8cpp.html#a6742d2e0a668baf1196ec69e158d5f15">E</a> = <a class="code" href="lib_2CodeGen_2README_8txt.html#a09776db24cf586ec9f1e18f3bae14099">BB</a>.end(); <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a> != <a class="code" href="BuiltinGCs_8cpp.html#a6742d2e0a668baf1196ec69e158d5f15">E</a>;) {</div>
<div class="line"><a name="l00450"></a><span class="lineno">  450</span>&#160;      <span class="keyword">auto</span> Instr = <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>++;</div>
<div class="line"><a name="l00451"></a><span class="lineno">  451</span>&#160;      <a class="code" href="classllvm_1_1InstrProfIncrementInst.html">InstrProfIncrementInst</a> *Inc = <a class="code" href="InstrProfiling_8cpp.html#a03bbe6ff5b8b0924a94e9d4d0f600ada">castToIncrementInst</a>(&amp;*Instr);</div>
<div class="line"><a name="l00452"></a><span class="lineno">  452</span>&#160;      <span class="keywordflow">if</span> (Inc) {</div>
<div class="line"><a name="l00453"></a><span class="lineno">  453</span>&#160;        lowerIncrement(Inc);</div>
<div class="line"><a name="l00454"></a><span class="lineno">  454</span>&#160;        MadeChange = <span class="keyword">true</span>;</div>
<div class="line"><a name="l00455"></a><span class="lineno">  455</span>&#160;      } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<span class="keyword">auto</span> *Ind = dyn_cast&lt;InstrProfValueProfileInst&gt;(Instr)) {</div>
<div class="line"><a name="l00456"></a><span class="lineno">  456</span>&#160;        lowerValueProfileInst(Ind);</div>
<div class="line"><a name="l00457"></a><span class="lineno">  457</span>&#160;        MadeChange = <span class="keyword">true</span>;</div>
<div class="line"><a name="l00458"></a><span class="lineno">  458</span>&#160;      }</div>
<div class="line"><a name="l00459"></a><span class="lineno">  459</span>&#160;    }</div>
<div class="line"><a name="l00460"></a><span class="lineno">  460</span>&#160;  }</div>
<div class="line"><a name="l00461"></a><span class="lineno">  461</span>&#160; </div>
<div class="line"><a name="l00462"></a><span class="lineno">  462</span>&#160;  <span class="keywordflow">if</span> (!MadeChange)</div>
<div class="line"><a name="l00463"></a><span class="lineno">  463</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l00464"></a><span class="lineno">  464</span>&#160; </div>
<div class="line"><a name="l00465"></a><span class="lineno">  465</span>&#160;  promoteCounterLoadStores(<a class="code" href="MD5_8cpp.html#a96d73bbd7af15cb1fc38c3f4a3bd82e9">F</a>);</div>
<div class="line"><a name="l00466"></a><span class="lineno">  466</span>&#160;  <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l00467"></a><span class="lineno">  467</span>&#160;}</div>
<div class="line"><a name="l00468"></a><span class="lineno">  468</span>&#160; </div>
<div class="line"><a name="l00469"></a><span class="lineno">  469</span>&#160;<span class="keywordtype">bool</span> InstrProfiling::isRuntimeCounterRelocationEnabled()<span class="keyword"> const </span>{</div>
<div class="line"><a name="l00470"></a><span class="lineno">  470</span>&#160;  <span class="comment">// Mach-O don&#39;t support weak external references.</span></div>
<div class="line"><a name="l00471"></a><span class="lineno">  471</span>&#160;  <span class="keywordflow">if</span> (TT.<a class="code" href="classllvm_1_1Triple.html#a444e46ff0a17a6c9480eb151bd42c9bc">isOSBinFormatMachO</a>())</div>
<div class="line"><a name="l00472"></a><span class="lineno">  472</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l00473"></a><span class="lineno">  473</span>&#160; </div>
<div class="line"><a name="l00474"></a><span class="lineno">  474</span>&#160;  <span class="keywordflow">if</span> (RuntimeCounterRelocation.getNumOccurrences() &gt; 0)</div>
<div class="line"><a name="l00475"></a><span class="lineno">  475</span>&#160;    <span class="keywordflow">return</span> RuntimeCounterRelocation;</div>
<div class="line"><a name="l00476"></a><span class="lineno">  476</span>&#160; </div>
<div class="line"><a name="l00477"></a><span class="lineno">  477</span>&#160;  <span class="comment">// Fuchsia uses runtime counter relocation by default.</span></div>
<div class="line"><a name="l00478"></a><span class="lineno">  478</span>&#160;  <span class="keywordflow">return</span> TT.<a class="code" href="classllvm_1_1Triple.html#ae891092a64f3b737dcba557a8450587c">isOSFuchsia</a>();</div>
<div class="line"><a name="l00479"></a><span class="lineno">  479</span>&#160;}</div>
<div class="line"><a name="l00480"></a><span class="lineno">  480</span>&#160; </div>
<div class="line"><a name="l00481"></a><span class="lineno">  481</span>&#160;<span class="keywordtype">bool</span> InstrProfiling::isCounterPromotionEnabled()<span class="keyword"> const </span>{</div>
<div class="line"><a name="l00482"></a><span class="lineno">  482</span>&#160;  <span class="keywordflow">if</span> (DoCounterPromotion.getNumOccurrences() &gt; 0)</div>
<div class="line"><a name="l00483"></a><span class="lineno">  483</span>&#160;    <span class="keywordflow">return</span> DoCounterPromotion;</div>
<div class="line"><a name="l00484"></a><span class="lineno">  484</span>&#160; </div>
<div class="line"><a name="l00485"></a><span class="lineno">  485</span>&#160;  <span class="keywordflow">return</span> Options.<a class="code" href="structllvm_1_1InstrProfOptions.html#a7961a6dd8e7618d08b3ffe19e1a3c7e3">DoCounterPromotion</a>;</div>
<div class="line"><a name="l00486"></a><span class="lineno">  486</span>&#160;}</div>
<div class="line"><a name="l00487"></a><span class="lineno">  487</span>&#160; </div>
<div class="line"><a name="l00488"></a><span class="lineno">  488</span>&#160;<span class="keywordtype">void</span> InstrProfiling::promoteCounterLoadStores(<a class="code" href="classllvm_1_1Function.html">Function</a> *<a class="code" href="MD5_8cpp.html#a96d73bbd7af15cb1fc38c3f4a3bd82e9">F</a>) {</div>
<div class="line"><a name="l00489"></a><span class="lineno">  489</span>&#160;  <span class="keywordflow">if</span> (!isCounterPromotionEnabled())</div>
<div class="line"><a name="l00490"></a><span class="lineno">  490</span>&#160;    <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l00491"></a><span class="lineno">  491</span>&#160; </div>
<div class="line"><a name="l00492"></a><span class="lineno">  492</span>&#160;  <a class="code" href="classllvm_1_1DominatorTree.html">DominatorTree</a> DT(*<a class="code" href="MD5_8cpp.html#a96d73bbd7af15cb1fc38c3f4a3bd82e9">F</a>);</div>
<div class="line"><a name="l00493"></a><span class="lineno">  493</span>&#160;  <a class="code" href="classllvm_1_1LoopInfo.html">LoopInfo</a> LI(DT);</div>
<div class="line"><a name="l00494"></a><span class="lineno">  494</span>&#160;  <a class="code" href="classllvm_1_1DenseMap.html">DenseMap&lt;Loop *, SmallVector&lt;LoadStorePair, 8&gt;</a>&gt; LoopPromotionCandidates;</div>
<div class="line"><a name="l00495"></a><span class="lineno">  495</span>&#160; </div>
<div class="line"><a name="l00496"></a><span class="lineno">  496</span>&#160;  std::unique_ptr&lt;BlockFrequencyInfo&gt; <a class="code" href="namespacellvm_1_1AMDGPUISD.html#a739d53294bc38cd6b0b23332f9994c0eafbca76f7875e080d97cee761de04d996">BFI</a>;</div>
<div class="line"><a name="l00497"></a><span class="lineno">  497</span>&#160;  <span class="keywordflow">if</span> (Options.<a class="code" href="structllvm_1_1InstrProfOptions.html#a3924c5cb31de4d5bd52aa9191186765f">UseBFIInPromotion</a>) {</div>
<div class="line"><a name="l00498"></a><span class="lineno">  498</span>&#160;    std::unique_ptr&lt;BranchProbabilityInfo&gt; BPI;</div>
<div class="line"><a name="l00499"></a><span class="lineno">  499</span>&#160;    BPI.reset(<span class="keyword">new</span> <a class="code" href="classllvm_1_1BranchProbabilityInfo.html">BranchProbabilityInfo</a>(*<a class="code" href="MD5_8cpp.html#a96d73bbd7af15cb1fc38c3f4a3bd82e9">F</a>, LI, &amp;GetTLI(*<a class="code" href="MD5_8cpp.html#a96d73bbd7af15cb1fc38c3f4a3bd82e9">F</a>)));</div>
<div class="line"><a name="l00500"></a><span class="lineno">  500</span>&#160;    <a class="code" href="namespacellvm_1_1AMDGPUISD.html#a739d53294bc38cd6b0b23332f9994c0eafbca76f7875e080d97cee761de04d996">BFI</a>.reset(<span class="keyword">new</span> <a class="code" href="classllvm_1_1BlockFrequencyInfo.html">BlockFrequencyInfo</a>(*<a class="code" href="MD5_8cpp.html#a96d73bbd7af15cb1fc38c3f4a3bd82e9">F</a>, *BPI, LI));</div>
<div class="line"><a name="l00501"></a><span class="lineno">  501</span>&#160;  }</div>
<div class="line"><a name="l00502"></a><span class="lineno">  502</span>&#160; </div>
<div class="line"><a name="l00503"></a><span class="lineno">  503</span>&#160;  <span class="keywordflow">for</span> (<span class="keyword">const</span> <span class="keyword">auto</span> &amp;<a class="code" href="namespacellvm_1_1NVPTX.html#ae1895e876155cbfcaf03955b78ff4a0e">LoadStore</a> : PromotionCandidates) {</div>
<div class="line"><a name="l00504"></a><span class="lineno">  504</span>&#160;    <span class="keyword">auto</span> *CounterLoad = <a class="code" href="namespacellvm_1_1NVPTX.html#ae1895e876155cbfcaf03955b78ff4a0e">LoadStore</a>.first;</div>
<div class="line"><a name="l00505"></a><span class="lineno">  505</span>&#160;    <span class="keyword">auto</span> *CounterStore = <a class="code" href="namespacellvm_1_1NVPTX.html#ae1895e876155cbfcaf03955b78ff4a0e">LoadStore</a>.second;</div>
<div class="line"><a name="l00506"></a><span class="lineno">  506</span>&#160;    <a class="code" href="classllvm_1_1BasicBlock.html">BasicBlock</a> *<a class="code" href="lib_2CodeGen_2README_8txt.html#a09776db24cf586ec9f1e18f3bae14099">BB</a> = CounterLoad-&gt;getParent();</div>
<div class="line"><a name="l00507"></a><span class="lineno">  507</span>&#160;    <a class="code" href="classllvm_1_1Loop.html">Loop</a> *ParentLoop = LI.getLoopFor(<a class="code" href="lib_2CodeGen_2README_8txt.html#a09776db24cf586ec9f1e18f3bae14099">BB</a>);</div>
<div class="line"><a name="l00508"></a><span class="lineno">  508</span>&#160;    <span class="keywordflow">if</span> (!ParentLoop)</div>
<div class="line"><a name="l00509"></a><span class="lineno">  509</span>&#160;      <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l00510"></a><span class="lineno">  510</span>&#160;    LoopPromotionCandidates[ParentLoop].emplace_back(CounterLoad, CounterStore);</div>
<div class="line"><a name="l00511"></a><span class="lineno">  511</span>&#160;  }</div>
<div class="line"><a name="l00512"></a><span class="lineno">  512</span>&#160; </div>
<div class="line"><a name="l00513"></a><span class="lineno">  513</span>&#160;  <a class="code" href="classllvm_1_1SmallVector.html">SmallVector&lt;Loop *, 4&gt;</a> <a class="code" href="HexagonHardwareLoops_8cpp.html#ada7c1594a393ede3ce32602d64d7ddb2">Loops</a> = LI.getLoopsInPreorder();</div>
<div class="line"><a name="l00514"></a><span class="lineno">  514</span>&#160; </div>
<div class="line"><a name="l00515"></a><span class="lineno">  515</span>&#160;  <span class="comment">// Do a post-order traversal of the loops so that counter updates can be</span></div>
<div class="line"><a name="l00516"></a><span class="lineno">  516</span>&#160;  <span class="comment">// iteratively hoisted outside the loop nest.</span></div>
<div class="line"><a name="l00517"></a><span class="lineno">  517</span>&#160;  <span class="keywordflow">for</span> (<span class="keyword">auto</span> *<a class="code" href="classllvm_1_1Loop.html">Loop</a> : <a class="code" href="namespacellvm.html#a469101ea87b8b432a1b4f7935c97f35c">llvm::reverse</a>(<a class="code" href="HexagonHardwareLoops_8cpp.html#ada7c1594a393ede3ce32602d64d7ddb2">Loops</a>)) {</div>
<div class="line"><a name="l00518"></a><span class="lineno">  518</span>&#160;    PGOCounterPromoter Promoter(LoopPromotionCandidates, *<a class="code" href="classllvm_1_1Loop.html">Loop</a>, LI, <a class="code" href="namespacellvm_1_1AMDGPUISD.html#a739d53294bc38cd6b0b23332f9994c0eafbca76f7875e080d97cee761de04d996">BFI</a>.get());</div>
<div class="line"><a name="l00519"></a><span class="lineno">  519</span>&#160;    Promoter.run(&amp;TotalCountersPromoted);</div>
<div class="line"><a name="l00520"></a><span class="lineno">  520</span>&#160;  }</div>
<div class="line"><a name="l00521"></a><span class="lineno">  521</span>&#160;}</div>
<div class="line"><a name="l00522"></a><span class="lineno">  522</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l00523"></a><span class="lineno">  523</span>&#160;<span class="comment">/// Check if the module contains uses of any profiling intrinsics.</span></div>
<div class="line"><a name="l00524"></a><span class="lineno"><a class="line" href="InstrProfiling_8cpp.html#a3ca28a37cc6f2fdfc1a57471623dd411">  524</a></span>&#160;<span class="comment"></span><span class="keyword">static</span> <span class="keywordtype">bool</span> <a class="code" href="InstrProfiling_8cpp.html#a3ca28a37cc6f2fdfc1a57471623dd411">containsProfilingIntrinsics</a>(<a class="code" href="classllvm_1_1Module.html">Module</a> &amp;M) {</div>
<div class="line"><a name="l00525"></a><span class="lineno">  525</span>&#160;  <span class="keywordflow">if</span> (<span class="keyword">auto</span> *<a class="code" href="MD5_8cpp.html#a96d73bbd7af15cb1fc38c3f4a3bd82e9">F</a> = <a class="code" href="lib_2Target_2X86_2README_8txt.html#ac88fe1d3a61b056a4f64fbbb156a62ff">M</a>.getFunction(</div>
<div class="line"><a name="l00526"></a><span class="lineno">  526</span>&#160;          <a class="code" href="namespacellvm_1_1Intrinsic.html#a7157f9fa9dd11f234ec3c58517cb6d96">Intrinsic::getName</a>(llvm::Intrinsic::instrprof_increment)))</div>
<div class="line"><a name="l00527"></a><span class="lineno">  527</span>&#160;    <span class="keywordflow">if</span> (!<a class="code" href="MD5_8cpp.html#a96d73bbd7af15cb1fc38c3f4a3bd82e9">F</a>-&gt;use_empty())</div>
<div class="line"><a name="l00528"></a><span class="lineno">  528</span>&#160;      <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l00529"></a><span class="lineno">  529</span>&#160;  <span class="keywordflow">if</span> (<span class="keyword">auto</span> *<a class="code" href="MD5_8cpp.html#a96d73bbd7af15cb1fc38c3f4a3bd82e9">F</a> = <a class="code" href="lib_2Target_2X86_2README_8txt.html#ac88fe1d3a61b056a4f64fbbb156a62ff">M</a>.getFunction(</div>
<div class="line"><a name="l00530"></a><span class="lineno">  530</span>&#160;          <a class="code" href="namespacellvm_1_1Intrinsic.html#a7157f9fa9dd11f234ec3c58517cb6d96">Intrinsic::getName</a>(llvm::Intrinsic::instrprof_increment_step)))</div>
<div class="line"><a name="l00531"></a><span class="lineno">  531</span>&#160;    <span class="keywordflow">if</span> (!<a class="code" href="MD5_8cpp.html#a96d73bbd7af15cb1fc38c3f4a3bd82e9">F</a>-&gt;use_empty())</div>
<div class="line"><a name="l00532"></a><span class="lineno">  532</span>&#160;      <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l00533"></a><span class="lineno">  533</span>&#160;  <span class="keywordflow">if</span> (<span class="keyword">auto</span> *<a class="code" href="MD5_8cpp.html#a96d73bbd7af15cb1fc38c3f4a3bd82e9">F</a> = <a class="code" href="lib_2Target_2X86_2README_8txt.html#ac88fe1d3a61b056a4f64fbbb156a62ff">M</a>.getFunction(</div>
<div class="line"><a name="l00534"></a><span class="lineno">  534</span>&#160;          <a class="code" href="namespacellvm_1_1Intrinsic.html#a7157f9fa9dd11f234ec3c58517cb6d96">Intrinsic::getName</a>(llvm::Intrinsic::instrprof_value_profile)))</div>
<div class="line"><a name="l00535"></a><span class="lineno">  535</span>&#160;    <span class="keywordflow">if</span> (!<a class="code" href="MD5_8cpp.html#a96d73bbd7af15cb1fc38c3f4a3bd82e9">F</a>-&gt;use_empty())</div>
<div class="line"><a name="l00536"></a><span class="lineno">  536</span>&#160;      <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l00537"></a><span class="lineno">  537</span>&#160;  <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l00538"></a><span class="lineno">  538</span>&#160;}</div>
<div class="line"><a name="l00539"></a><span class="lineno">  539</span>&#160; </div>
<div class="line"><a name="l00540"></a><span class="lineno"><a class="line" href="classllvm_1_1InstrProfiling.html#af5e84df2faaa921bd22ef9f48e724602">  540</a></span>&#160;<span class="keywordtype">bool</span> <a class="code" href="classllvm_1_1InstrProfiling.html#a20487c4884c2053c68ca2838df9c76d1">InstrProfiling::run</a>(</div>
<div class="line"><a name="l00541"></a><span class="lineno">  541</span>&#160;    <a class="code" href="classllvm_1_1Module.html">Module</a> &amp;M, <a class="code" href="MemDepPrinter_8cpp.html#a470d8721ad7c3b718e9daeabdaeb4700">std::function</a>&lt;<span class="keyword">const</span> <a class="code" href="classllvm_1_1TargetLibraryInfo.html">TargetLibraryInfo</a> &amp;(<a class="code" href="classllvm_1_1Function.html">Function</a> &amp;<a class="code" href="MD5_8cpp.html#a96d73bbd7af15cb1fc38c3f4a3bd82e9">F</a>)&gt; GetTLI) {</div>
<div class="line"><a name="l00542"></a><span class="lineno">  542</span>&#160;  this-&gt;M = &amp;<a class="code" href="lib_2Target_2X86_2README_8txt.html#ac88fe1d3a61b056a4f64fbbb156a62ff">M</a>;</div>
<div class="line"><a name="l00543"></a><span class="lineno">  543</span>&#160;  this-&gt;GetTLI = <a class="code" href="lib_2Target_2ARM_2README_8txt.html#ad3a99906764c35b2694ae90fa57744a5">std::move</a>(GetTLI);</div>
<div class="line"><a name="l00544"></a><span class="lineno">  544</span>&#160;  NamesVar = <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l00545"></a><span class="lineno">  545</span>&#160;  NamesSize = 0;</div>
<div class="line"><a name="l00546"></a><span class="lineno">  546</span>&#160;  ProfileDataMap.clear();</div>
<div class="line"><a name="l00547"></a><span class="lineno">  547</span>&#160;  CompilerUsedVars.clear();</div>
<div class="line"><a name="l00548"></a><span class="lineno">  548</span>&#160;  UsedVars.clear();</div>
<div class="line"><a name="l00549"></a><span class="lineno">  549</span>&#160;  TT = <a class="code" href="classllvm_1_1Triple.html">Triple</a>(<a class="code" href="lib_2Target_2X86_2README_8txt.html#ac88fe1d3a61b056a4f64fbbb156a62ff">M</a>.getTargetTriple());</div>
<div class="line"><a name="l00550"></a><span class="lineno">  550</span>&#160; </div>
<div class="line"><a name="l00551"></a><span class="lineno">  551</span>&#160;  <span class="comment">// Emit the runtime hook even if no counters are present.</span></div>
<div class="line"><a name="l00552"></a><span class="lineno">  552</span>&#160;  <span class="keywordtype">bool</span> MadeChange = emitRuntimeHook();</div>
<div class="line"><a name="l00553"></a><span class="lineno">  553</span>&#160; </div>
<div class="line"><a name="l00554"></a><span class="lineno">  554</span>&#160;  <span class="comment">// Improve compile time by avoiding linear scans when there is no work.</span></div>
<div class="line"><a name="l00555"></a><span class="lineno">  555</span>&#160;  <a class="code" href="classllvm_1_1GlobalVariable.html">GlobalVariable</a> *CoverageNamesVar =</div>
<div class="line"><a name="l00556"></a><span class="lineno">  556</span>&#160;      <a class="code" href="lib_2Target_2X86_2README_8txt.html#ac88fe1d3a61b056a4f64fbbb156a62ff">M</a>.getNamedGlobal(<a class="code" href="namespacellvm.html#a50d466b105ab8b79cf83a6b49cf54886">getCoverageUnusedNamesVarName</a>());</div>
<div class="line"><a name="l00557"></a><span class="lineno">  557</span>&#160;  <span class="keywordflow">if</span> (!<a class="code" href="InstrProfiling_8cpp.html#a3ca28a37cc6f2fdfc1a57471623dd411">containsProfilingIntrinsics</a>(<a class="code" href="lib_2Target_2X86_2README_8txt.html#ac88fe1d3a61b056a4f64fbbb156a62ff">M</a>) &amp;&amp; !CoverageNamesVar)</div>
<div class="line"><a name="l00558"></a><span class="lineno">  558</span>&#160;    <span class="keywordflow">return</span> MadeChange;</div>
<div class="line"><a name="l00559"></a><span class="lineno">  559</span>&#160; </div>
<div class="line"><a name="l00560"></a><span class="lineno">  560</span>&#160;  <span class="comment">// We did not know how many value sites there would be inside</span></div>
<div class="line"><a name="l00561"></a><span class="lineno">  561</span>&#160;  <span class="comment">// the instrumented function. This is counting the number of instrumented</span></div>
<div class="line"><a name="l00562"></a><span class="lineno">  562</span>&#160;  <span class="comment">// target value sites to enter it as field in the profile data variable.</span></div>
<div class="line"><a name="l00563"></a><span class="lineno">  563</span>&#160;  <span class="keywordflow">for</span> (<a class="code" href="classllvm_1_1Function.html">Function</a> &amp;<a class="code" href="MD5_8cpp.html#a96d73bbd7af15cb1fc38c3f4a3bd82e9">F</a> : <a class="code" href="lib_2Target_2X86_2README_8txt.html#ac88fe1d3a61b056a4f64fbbb156a62ff">M</a>) {</div>
<div class="line"><a name="l00564"></a><span class="lineno">  564</span>&#160;    <a class="code" href="classllvm_1_1InstrProfIncrementInst.html">InstrProfIncrementInst</a> *FirstProfIncInst = <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l00565"></a><span class="lineno">  565</span>&#160;    <span class="keywordflow">for</span> (<a class="code" href="classllvm_1_1BasicBlock.html">BasicBlock</a> &amp;<a class="code" href="lib_2CodeGen_2README_8txt.html#a09776db24cf586ec9f1e18f3bae14099">BB</a> : <a class="code" href="MD5_8cpp.html#a96d73bbd7af15cb1fc38c3f4a3bd82e9">F</a>)</div>
<div class="line"><a name="l00566"></a><span class="lineno">  566</span>&#160;      <span class="keywordflow">for</span> (<span class="keyword">auto</span> <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a> = <a class="code" href="lib_2CodeGen_2README_8txt.html#a09776db24cf586ec9f1e18f3bae14099">BB</a>.begin(), <a class="code" href="BuiltinGCs_8cpp.html#a6742d2e0a668baf1196ec69e158d5f15">E</a> = <a class="code" href="lib_2CodeGen_2README_8txt.html#a09776db24cf586ec9f1e18f3bae14099">BB</a>.end(); <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a> != <a class="code" href="BuiltinGCs_8cpp.html#a6742d2e0a668baf1196ec69e158d5f15">E</a>; <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>++)</div>
<div class="line"><a name="l00567"></a><span class="lineno">  567</span>&#160;        <span class="keywordflow">if</span> (<span class="keyword">auto</span> *Ind = dyn_cast&lt;InstrProfValueProfileInst&gt;(<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>))</div>
<div class="line"><a name="l00568"></a><span class="lineno">  568</span>&#160;          computeNumValueSiteCounts(Ind);</div>
<div class="line"><a name="l00569"></a><span class="lineno">  569</span>&#160;        <span class="keywordflow">else</span> <span class="keywordflow">if</span> (FirstProfIncInst == <span class="keyword">nullptr</span>)</div>
<div class="line"><a name="l00570"></a><span class="lineno">  570</span>&#160;          FirstProfIncInst = dyn_cast&lt;InstrProfIncrementInst&gt;(<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>);</div>
<div class="line"><a name="l00571"></a><span class="lineno">  571</span>&#160; </div>
<div class="line"><a name="l00572"></a><span class="lineno">  572</span>&#160;    <span class="comment">// Value profiling intrinsic lowering requires per-function profile data</span></div>
<div class="line"><a name="l00573"></a><span class="lineno">  573</span>&#160;    <span class="comment">// variable to be created first.</span></div>
<div class="line"><a name="l00574"></a><span class="lineno">  574</span>&#160;    <span class="keywordflow">if</span> (FirstProfIncInst != <span class="keyword">nullptr</span>)</div>
<div class="line"><a name="l00575"></a><span class="lineno">  575</span>&#160;      <span class="keyword">static_cast&lt;</span><span class="keywordtype">void</span><span class="keyword">&gt;</span>(getOrCreateRegionCounters(FirstProfIncInst));</div>
<div class="line"><a name="l00576"></a><span class="lineno">  576</span>&#160;  }</div>
<div class="line"><a name="l00577"></a><span class="lineno">  577</span>&#160; </div>
<div class="line"><a name="l00578"></a><span class="lineno">  578</span>&#160;  <span class="keywordflow">for</span> (<a class="code" href="classllvm_1_1Function.html">Function</a> &amp;<a class="code" href="MD5_8cpp.html#a96d73bbd7af15cb1fc38c3f4a3bd82e9">F</a> : <a class="code" href="lib_2Target_2X86_2README_8txt.html#ac88fe1d3a61b056a4f64fbbb156a62ff">M</a>)</div>
<div class="line"><a name="l00579"></a><span class="lineno">  579</span>&#160;    MadeChange |= lowerIntrinsics(&amp;<a class="code" href="MD5_8cpp.html#a96d73bbd7af15cb1fc38c3f4a3bd82e9">F</a>);</div>
<div class="line"><a name="l00580"></a><span class="lineno">  580</span>&#160; </div>
<div class="line"><a name="l00581"></a><span class="lineno">  581</span>&#160;  <span class="keywordflow">if</span> (CoverageNamesVar) {</div>
<div class="line"><a name="l00582"></a><span class="lineno">  582</span>&#160;    lowerCoverageData(CoverageNamesVar);</div>
<div class="line"><a name="l00583"></a><span class="lineno">  583</span>&#160;    MadeChange = <span class="keyword">true</span>;</div>
<div class="line"><a name="l00584"></a><span class="lineno">  584</span>&#160;  }</div>
<div class="line"><a name="l00585"></a><span class="lineno">  585</span>&#160; </div>
<div class="line"><a name="l00586"></a><span class="lineno">  586</span>&#160;  <span class="keywordflow">if</span> (!MadeChange)</div>
<div class="line"><a name="l00587"></a><span class="lineno">  587</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l00588"></a><span class="lineno">  588</span>&#160; </div>
<div class="line"><a name="l00589"></a><span class="lineno">  589</span>&#160;  emitVNodes();</div>
<div class="line"><a name="l00590"></a><span class="lineno">  590</span>&#160;  emitNameData();</div>
<div class="line"><a name="l00591"></a><span class="lineno">  591</span>&#160;  emitRegistration();</div>
<div class="line"><a name="l00592"></a><span class="lineno">  592</span>&#160;  emitUses();</div>
<div class="line"><a name="l00593"></a><span class="lineno">  593</span>&#160;  emitInitialization();</div>
<div class="line"><a name="l00594"></a><span class="lineno">  594</span>&#160;  <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l00595"></a><span class="lineno">  595</span>&#160;}</div>
<div class="line"><a name="l00596"></a><span class="lineno">  596</span>&#160; </div>
<div class="line"><a name="l00597"></a><span class="lineno"><a class="line" href="InstrProfiling_8cpp.html#acad385080d103af2e3c47f9d4124827a">  597</a></span>&#160;<span class="keyword">static</span> <a class="code" href="classllvm_1_1FunctionCallee.html">FunctionCallee</a> <a class="code" href="InstrProfiling_8cpp.html#acad385080d103af2e3c47f9d4124827a">getOrInsertValueProfilingCall</a>(</div>
<div class="line"><a name="l00598"></a><span class="lineno">  598</span>&#160;    <a class="code" href="classllvm_1_1Module.html">Module</a> &amp;M, <span class="keyword">const</span> <a class="code" href="classllvm_1_1TargetLibraryInfo.html">TargetLibraryInfo</a> &amp;TLI,</div>
<div class="line"><a name="l00599"></a><span class="lineno">  599</span>&#160;    ValueProfilingCallType CallType = <a class="code" href="namespacellvm_1_1TargetStackID.html#a71392100eb15ba746b1f898986f5d8a5af2af9eb94ff1bc08308bc738d744ee85">ValueProfilingCallType::Default</a>) {</div>
<div class="line"><a name="l00600"></a><span class="lineno">  600</span>&#160;  <a class="code" href="classllvm_1_1LLVMContext.html">LLVMContext</a> &amp;Ctx = <a class="code" href="lib_2Target_2X86_2README_8txt.html#ac88fe1d3a61b056a4f64fbbb156a62ff">M</a>.getContext();</div>
<div class="line"><a name="l00601"></a><span class="lineno">  601</span>&#160;  <span class="keyword">auto</span> *ReturnTy = <a class="code" href="classllvm_1_1Type.html#a6e20e76960d952de088354cbcd14c3ab">Type::getVoidTy</a>(<a class="code" href="lib_2Target_2X86_2README_8txt.html#ac88fe1d3a61b056a4f64fbbb156a62ff">M</a>.getContext());</div>
<div class="line"><a name="l00602"></a><span class="lineno">  602</span>&#160; </div>
<div class="line"><a name="l00603"></a><span class="lineno">  603</span>&#160;  <a class="code" href="classllvm_1_1AttributeList.html">AttributeList</a> <a class="code" href="namespacellvm_1_1AArch64CC.html#abfa1f7dce576430da99eed57807c7f28ab89adee997fb2a645a2d26e1f1bdaadf">AL</a>;</div>
<div class="line"><a name="l00604"></a><span class="lineno">  604</span>&#160;  <span class="keywordflow">if</span> (<span class="keyword">auto</span> AK = TLI.<a class="code" href="classllvm_1_1TargetLibraryInfo.html#af091deb7d771e1462ad4f69354d45d0a">getExtAttrForI32Param</a>(<span class="keyword">false</span>))</div>
<div class="line"><a name="l00605"></a><span class="lineno">  605</span>&#160;    <a class="code" href="namespacellvm_1_1AArch64CC.html#abfa1f7dce576430da99eed57807c7f28ab89adee997fb2a645a2d26e1f1bdaadf">AL</a> = <a class="code" href="namespacellvm_1_1AArch64CC.html#abfa1f7dce576430da99eed57807c7f28ab89adee997fb2a645a2d26e1f1bdaadf">AL</a>.addParamAttribute(<a class="code" href="lib_2Target_2X86_2README_8txt.html#ac88fe1d3a61b056a4f64fbbb156a62ff">M</a>.getContext(), 2, AK);</div>
<div class="line"><a name="l00606"></a><span class="lineno">  606</span>&#160; </div>
<div class="line"><a name="l00607"></a><span class="lineno">  607</span>&#160;  <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>((CallType == <a class="code" href="namespacellvm_1_1TargetStackID.html#a71392100eb15ba746b1f898986f5d8a5af2af9eb94ff1bc08308bc738d744ee85">ValueProfilingCallType::Default</a> ||</div>
<div class="line"><a name="l00608"></a><span class="lineno">  608</span>&#160;          CallType == ValueProfilingCallType::MemOp) &amp;&amp;</div>
<div class="line"><a name="l00609"></a><span class="lineno">  609</span>&#160;         <span class="stringliteral">&quot;Must be Default or MemOp&quot;</span>);</div>
<div class="line"><a name="l00610"></a><span class="lineno">  610</span>&#160;  <a class="code" href="classllvm_1_1Type.html">Type</a> *ParamTypes[] = {</div>
<div class="line"><a name="l00611"></a><span class="lineno">  611</span>&#160;<span class="preprocessor">#define VALUE_PROF_FUNC_PARAM(ParamType, ParamName, ParamLLVMType) ParamLLVMType</span></div>
<div class="line"><a name="l00612"></a><span class="lineno">  612</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="InstrProfData_8inc.html">llvm/ProfileData/InstrProfData.inc</a>&quot;</span></div>
<div class="line"><a name="l00613"></a><span class="lineno">  613</span>&#160;  };</div>
<div class="line"><a name="l00614"></a><span class="lineno">  614</span>&#160;  <span class="keyword">auto</span> *ValueProfilingCallTy =</div>
<div class="line"><a name="l00615"></a><span class="lineno">  615</span>&#160;      <a class="code" href="classllvm_1_1FunctionType.html#a7e89b55242c964ae61b7850e99cacef0">FunctionType::get</a>(ReturnTy, <a class="code" href="namespacellvm.html#a0448108c43f3a226744d0a4c28c989f7">makeArrayRef</a>(ParamTypes), <span class="keyword">false</span>);</div>
<div class="line"><a name="l00616"></a><span class="lineno">  616</span>&#160;  <a class="code" href="classllvm_1_1StringRef.html">StringRef</a> FuncName = CallType == <a class="code" href="namespacellvm_1_1TargetStackID.html#a71392100eb15ba746b1f898986f5d8a5af2af9eb94ff1bc08308bc738d744ee85">ValueProfilingCallType::Default</a></div>
<div class="line"><a name="l00617"></a><span class="lineno">  617</span>&#160;                           ? <a class="code" href="namespacellvm.html#acbf6b95a912f653f2e224154413cf534">getInstrProfValueProfFuncName</a>()</div>
<div class="line"><a name="l00618"></a><span class="lineno">  618</span>&#160;                           : <a class="code" href="namespacellvm.html#a911e8357d1f938a45e20b725872e703e">getInstrProfValueProfMemOpFuncName</a>();</div>
<div class="line"><a name="l00619"></a><span class="lineno">  619</span>&#160;  <span class="keywordflow">return</span> <a class="code" href="lib_2Target_2X86_2README_8txt.html#ac88fe1d3a61b056a4f64fbbb156a62ff">M</a>.getOrInsertFunction(FuncName, ValueProfilingCallTy, <a class="code" href="namespacellvm_1_1AArch64CC.html#abfa1f7dce576430da99eed57807c7f28ab89adee997fb2a645a2d26e1f1bdaadf">AL</a>);</div>
<div class="line"><a name="l00620"></a><span class="lineno">  620</span>&#160;}</div>
<div class="line"><a name="l00621"></a><span class="lineno">  621</span>&#160; </div>
<div class="line"><a name="l00622"></a><span class="lineno">  622</span>&#160;<span class="keywordtype">void</span> InstrProfiling::computeNumValueSiteCounts(<a class="code" href="classllvm_1_1InstrProfValueProfileInst.html">InstrProfValueProfileInst</a> *Ind) {</div>
<div class="line"><a name="l00623"></a><span class="lineno">  623</span>&#160;  <a class="code" href="classllvm_1_1GlobalVariable.html">GlobalVariable</a> *<a class="code" href="namespacellvm_1_1GraphProgram.html#a0ad4685976f8c4d4a697a53fbe05d10b">Name</a> = Ind-&gt;<a class="code" href="classllvm_1_1InstrProfValueProfileInst.html#a6c30393f7531cacd1523d099392b5031">getName</a>();</div>
<div class="line"><a name="l00624"></a><span class="lineno">  624</span>&#160;  uint64_t <a class="code" href="namespacellvm_1_1AMDGPU_1_1HSAMD.html#a85803b71729d5d098ca2099f23cbf72e">ValueKind</a> = Ind-&gt;<a class="code" href="classllvm_1_1InstrProfValueProfileInst.html#a762382cbbd22a9b9d4d0f116ae674529">getValueKind</a>()-&gt;<a class="code" href="classllvm_1_1ConstantInt.html#ac09a21c371a9c535cbc13e8f82503aec">getZExtValue</a>();</div>
<div class="line"><a name="l00625"></a><span class="lineno">  625</span>&#160;  uint64_t <a class="code" href="ELFObjHandler_8cpp.html#aef61945034b9431b804748fc317c5548">Index</a> = Ind-&gt;<a class="code" href="classllvm_1_1InstrProfValueProfileInst.html#aeb0bc0430ea23e8b9112e4aed4c453e4">getIndex</a>()-&gt;<a class="code" href="classllvm_1_1ConstantInt.html#ac09a21c371a9c535cbc13e8f82503aec">getZExtValue</a>();</div>
<div class="line"><a name="l00626"></a><span class="lineno">  626</span>&#160;  <span class="keyword">auto</span> It = ProfileDataMap.find(<a class="code" href="namespacellvm_1_1GraphProgram.html#a0ad4685976f8c4d4a697a53fbe05d10b">Name</a>);</div>
<div class="line"><a name="l00627"></a><span class="lineno">  627</span>&#160;  <span class="keywordflow">if</span> (It == ProfileDataMap.end()) {</div>
<div class="line"><a name="l00628"></a><span class="lineno">  628</span>&#160;    PerFunctionProfileData <a class="code" href="namespacellvm_1_1X86II.html#a15cbb72b959838d6e0f002ce58bc4bb2a8d230b4df405685c7dc1f1db718d7008">PD</a>;</div>
<div class="line"><a name="l00629"></a><span class="lineno">  629</span>&#160;    <a class="code" href="namespacellvm_1_1X86II.html#a15cbb72b959838d6e0f002ce58bc4bb2a8d230b4df405685c7dc1f1db718d7008">PD</a>.NumValueSites[<a class="code" href="namespacellvm_1_1AMDGPU_1_1HSAMD.html#a85803b71729d5d098ca2099f23cbf72e">ValueKind</a>] = <a class="code" href="ELFObjHandler_8cpp.html#aef61945034b9431b804748fc317c5548">Index</a> + 1;</div>
<div class="line"><a name="l00630"></a><span class="lineno">  630</span>&#160;    ProfileDataMap[<a class="code" href="namespacellvm_1_1GraphProgram.html#a0ad4685976f8c4d4a697a53fbe05d10b">Name</a>] = <a class="code" href="namespacellvm_1_1X86II.html#a15cbb72b959838d6e0f002ce58bc4bb2a8d230b4df405685c7dc1f1db718d7008">PD</a>;</div>
<div class="line"><a name="l00631"></a><span class="lineno">  631</span>&#160;  } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (It-&gt;second.NumValueSites[<a class="code" href="namespacellvm_1_1AMDGPU_1_1HSAMD.html#a85803b71729d5d098ca2099f23cbf72e">ValueKind</a>] &lt;= <a class="code" href="ELFObjHandler_8cpp.html#aef61945034b9431b804748fc317c5548">Index</a>)</div>
<div class="line"><a name="l00632"></a><span class="lineno">  632</span>&#160;    It-&gt;second.NumValueSites[<a class="code" href="namespacellvm_1_1AMDGPU_1_1HSAMD.html#a85803b71729d5d098ca2099f23cbf72e">ValueKind</a>] = <a class="code" href="ELFObjHandler_8cpp.html#aef61945034b9431b804748fc317c5548">Index</a> + 1;</div>
<div class="line"><a name="l00633"></a><span class="lineno">  633</span>&#160;}</div>
<div class="line"><a name="l00634"></a><span class="lineno">  634</span>&#160; </div>
<div class="line"><a name="l00635"></a><span class="lineno">  635</span>&#160;<span class="keywordtype">void</span> InstrProfiling::lowerValueProfileInst(<a class="code" href="classllvm_1_1InstrProfValueProfileInst.html">InstrProfValueProfileInst</a> *Ind) {</div>
<div class="line"><a name="l00636"></a><span class="lineno">  636</span>&#160;  <a class="code" href="classllvm_1_1GlobalVariable.html">GlobalVariable</a> *<a class="code" href="namespacellvm_1_1GraphProgram.html#a0ad4685976f8c4d4a697a53fbe05d10b">Name</a> = Ind-&gt;<a class="code" href="classllvm_1_1InstrProfValueProfileInst.html#a6c30393f7531cacd1523d099392b5031">getName</a>();</div>
<div class="line"><a name="l00637"></a><span class="lineno">  637</span>&#160;  <span class="keyword">auto</span> It = ProfileDataMap.find(<a class="code" href="namespacellvm_1_1GraphProgram.html#a0ad4685976f8c4d4a697a53fbe05d10b">Name</a>);</div>
<div class="line"><a name="l00638"></a><span class="lineno">  638</span>&#160;  <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(It != ProfileDataMap.end() &amp;&amp; It-&gt;second.DataVar &amp;&amp;</div>
<div class="line"><a name="l00639"></a><span class="lineno">  639</span>&#160;         <span class="stringliteral">&quot;value profiling detected in function with no counter incerement&quot;</span>);</div>
<div class="line"><a name="l00640"></a><span class="lineno">  640</span>&#160; </div>
<div class="line"><a name="l00641"></a><span class="lineno">  641</span>&#160;  <a class="code" href="classllvm_1_1GlobalVariable.html">GlobalVariable</a> *DataVar = It-&gt;second.DataVar;</div>
<div class="line"><a name="l00642"></a><span class="lineno">  642</span>&#160;  uint64_t <a class="code" href="namespacellvm_1_1AMDGPU_1_1HSAMD.html#a85803b71729d5d098ca2099f23cbf72e">ValueKind</a> = Ind-&gt;<a class="code" href="classllvm_1_1InstrProfValueProfileInst.html#a762382cbbd22a9b9d4d0f116ae674529">getValueKind</a>()-&gt;<a class="code" href="classllvm_1_1ConstantInt.html#ac09a21c371a9c535cbc13e8f82503aec">getZExtValue</a>();</div>
<div class="line"><a name="l00643"></a><span class="lineno">  643</span>&#160;  uint64_t <a class="code" href="ELFObjHandler_8cpp.html#aef61945034b9431b804748fc317c5548">Index</a> = Ind-&gt;<a class="code" href="classllvm_1_1InstrProfValueProfileInst.html#aeb0bc0430ea23e8b9112e4aed4c453e4">getIndex</a>()-&gt;<a class="code" href="classllvm_1_1ConstantInt.html#ac09a21c371a9c535cbc13e8f82503aec">getZExtValue</a>();</div>
<div class="line"><a name="l00644"></a><span class="lineno">  644</span>&#160;  <span class="keywordflow">for</span> (<a class="code" href="classuint32__t.html">uint32_t</a> <a class="code" href="namespacellvm_1_1lltok.html#af353621f14cb4b4b3af5ffaff84076b1">Kind</a> = IPVK_First; <a class="code" href="namespacellvm_1_1lltok.html#af353621f14cb4b4b3af5ffaff84076b1">Kind</a> &lt; <a class="code" href="namespacellvm_1_1AMDGPU_1_1HSAMD.html#a85803b71729d5d098ca2099f23cbf72e">ValueKind</a>; ++<a class="code" href="namespacellvm_1_1lltok.html#af353621f14cb4b4b3af5ffaff84076b1">Kind</a>)</div>
<div class="line"><a name="l00645"></a><span class="lineno">  645</span>&#160;    <a class="code" href="ELFObjHandler_8cpp.html#aef61945034b9431b804748fc317c5548">Index</a> += It-&gt;second.NumValueSites[<a class="code" href="namespacellvm_1_1lltok.html#af353621f14cb4b4b3af5ffaff84076b1">Kind</a>];</div>
<div class="line"><a name="l00646"></a><span class="lineno">  646</span>&#160; </div>
<div class="line"><a name="l00647"></a><span class="lineno">  647</span>&#160;  <a class="code" href="classllvm_1_1IRBuilder.html">IRBuilder&lt;&gt;</a> <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>(Ind);</div>
<div class="line"><a name="l00648"></a><span class="lineno">  648</span>&#160;  <span class="keywordtype">bool</span> IsMemOpSize = (Ind-&gt;<a class="code" href="classllvm_1_1InstrProfValueProfileInst.html#a762382cbbd22a9b9d4d0f116ae674529">getValueKind</a>()-&gt;<a class="code" href="classllvm_1_1ConstantInt.html#ac09a21c371a9c535cbc13e8f82503aec">getZExtValue</a>() ==</div>
<div class="line"><a name="l00649"></a><span class="lineno">  649</span>&#160;                      llvm::InstrProfValueKind::IPVK_MemOPSize);</div>
<div class="line"><a name="l00650"></a><span class="lineno">  650</span>&#160;  <a class="code" href="classllvm_1_1CallInst.html">CallInst</a> *<a class="code" href="namespacellvm_1_1MCID.html#ab357441fcd1ea1f9b0d27c12700f6023a463baf545246fea9718664d933ffe66f">Call</a> = <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l00651"></a><span class="lineno">  651</span>&#160;  <span class="keyword">auto</span> *TLI = &amp;GetTLI(*Ind-&gt;<a class="code" href="classllvm_1_1Instruction.html#a6a66ebb3aa12757479a3c88de77d78f8">getFunction</a>());</div>
<div class="line"><a name="l00652"></a><span class="lineno">  652</span>&#160; </div>
<div class="line"><a name="l00653"></a><span class="lineno">  653</span>&#160;  <span class="comment">// To support value profiling calls within Windows exception handlers, funclet</span></div>
<div class="line"><a name="l00654"></a><span class="lineno">  654</span>&#160;  <span class="comment">// information contained within operand bundles needs to be copied over to</span></div>
<div class="line"><a name="l00655"></a><span class="lineno">  655</span>&#160;  <span class="comment">// the library call. This is required for the IR to be processed by the</span></div>
<div class="line"><a name="l00656"></a><span class="lineno">  656</span>&#160;  <span class="comment">// WinEHPrepare pass.</span></div>
<div class="line"><a name="l00657"></a><span class="lineno">  657</span>&#160;  <a class="code" href="classllvm_1_1SmallVector.html">SmallVector&lt;OperandBundleDef, 1&gt;</a> OpBundles;</div>
<div class="line"><a name="l00658"></a><span class="lineno">  658</span>&#160;  Ind-&gt;<a class="code" href="classllvm_1_1CallBase.html#a19263fff7f5b3a9d22b48151fa0d85d0">getOperandBundlesAsDefs</a>(OpBundles);</div>
<div class="line"><a name="l00659"></a><span class="lineno">  659</span>&#160;  <span class="keywordflow">if</span> (!IsMemOpSize) {</div>
<div class="line"><a name="l00660"></a><span class="lineno">  660</span>&#160;    <a class="code" href="classllvm_1_1Value.html">Value</a> *<a class="code" href="namespacellvm_1_1AMDGPU_1_1HSAMD_1_1Kernel_1_1Key.html#a1958a762261549463a280bac3274d6d5">Args</a>[3] = {Ind-&gt;<a class="code" href="classllvm_1_1InstrProfValueProfileInst.html#ab9fc2e7188a59c1ccf31a61e39abc679">getTargetValue</a>(),</div>
<div class="line"><a name="l00661"></a><span class="lineno">  661</span>&#160;                      <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.CreateBitCast(DataVar, <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.getInt8PtrTy()),</div>
<div class="line"><a name="l00662"></a><span class="lineno">  662</span>&#160;                      <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.getInt32(<a class="code" href="ELFObjHandler_8cpp.html#aef61945034b9431b804748fc317c5548">Index</a>)};</div>
<div class="line"><a name="l00663"></a><span class="lineno">  663</span>&#160;    <a class="code" href="namespacellvm_1_1MCID.html#ab357441fcd1ea1f9b0d27c12700f6023a463baf545246fea9718664d933ffe66f">Call</a> = <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.CreateCall(<a class="code" href="InstrProfiling_8cpp.html#acad385080d103af2e3c47f9d4124827a">getOrInsertValueProfilingCall</a>(*M, *TLI), <a class="code" href="namespacellvm_1_1AMDGPU_1_1HSAMD_1_1Kernel_1_1Key.html#a1958a762261549463a280bac3274d6d5">Args</a>,</div>
<div class="line"><a name="l00664"></a><span class="lineno">  664</span>&#160;                              OpBundles);</div>
<div class="line"><a name="l00665"></a><span class="lineno">  665</span>&#160;  } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00666"></a><span class="lineno">  666</span>&#160;    <a class="code" href="classllvm_1_1Value.html">Value</a> *<a class="code" href="namespacellvm_1_1AMDGPU_1_1HSAMD_1_1Kernel_1_1Key.html#a1958a762261549463a280bac3274d6d5">Args</a>[3] = {Ind-&gt;<a class="code" href="classllvm_1_1InstrProfValueProfileInst.html#ab9fc2e7188a59c1ccf31a61e39abc679">getTargetValue</a>(),</div>
<div class="line"><a name="l00667"></a><span class="lineno">  667</span>&#160;                      <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.CreateBitCast(DataVar, <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.getInt8PtrTy()),</div>
<div class="line"><a name="l00668"></a><span class="lineno">  668</span>&#160;                      <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.getInt32(<a class="code" href="ELFObjHandler_8cpp.html#aef61945034b9431b804748fc317c5548">Index</a>)};</div>
<div class="line"><a name="l00669"></a><span class="lineno">  669</span>&#160;    <a class="code" href="namespacellvm_1_1MCID.html#ab357441fcd1ea1f9b0d27c12700f6023a463baf545246fea9718664d933ffe66f">Call</a> = <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.CreateCall(</div>
<div class="line"><a name="l00670"></a><span class="lineno">  670</span>&#160;        <a class="code" href="InstrProfiling_8cpp.html#acad385080d103af2e3c47f9d4124827a">getOrInsertValueProfilingCall</a>(*M, *TLI, ValueProfilingCallType::MemOp),</div>
<div class="line"><a name="l00671"></a><span class="lineno">  671</span>&#160;        <a class="code" href="namespacellvm_1_1AMDGPU_1_1HSAMD_1_1Kernel_1_1Key.html#a1958a762261549463a280bac3274d6d5">Args</a>, OpBundles);</div>
<div class="line"><a name="l00672"></a><span class="lineno">  672</span>&#160;  }</div>
<div class="line"><a name="l00673"></a><span class="lineno">  673</span>&#160;  <span class="keywordflow">if</span> (<span class="keyword">auto</span> AK = TLI-&gt;getExtAttrForI32Param(<span class="keyword">false</span>))</div>
<div class="line"><a name="l00674"></a><span class="lineno">  674</span>&#160;    <a class="code" href="namespacellvm_1_1MCID.html#ab357441fcd1ea1f9b0d27c12700f6023a463baf545246fea9718664d933ffe66f">Call</a>-&gt;addParamAttr(2, AK);</div>
<div class="line"><a name="l00675"></a><span class="lineno">  675</span>&#160;  Ind-&gt;<a class="code" href="classllvm_1_1Value.html#a3ab5fc45117b450e8bb04e564cb6e5f2">replaceAllUsesWith</a>(<a class="code" href="namespacellvm_1_1MCID.html#ab357441fcd1ea1f9b0d27c12700f6023a463baf545246fea9718664d933ffe66f">Call</a>);</div>
<div class="line"><a name="l00676"></a><span class="lineno">  676</span>&#160;  Ind-&gt;<a class="code" href="classllvm_1_1Instruction.html#ae6b978645b8ac72d1a35e1298ffdd4f0">eraseFromParent</a>();</div>
<div class="line"><a name="l00677"></a><span class="lineno">  677</span>&#160;}</div>
<div class="line"><a name="l00678"></a><span class="lineno">  678</span>&#160; </div>
<div class="line"><a name="l00679"></a><span class="lineno">  679</span>&#160;<span class="keywordtype">void</span> InstrProfiling::lowerIncrement(<a class="code" href="classllvm_1_1InstrProfIncrementInst.html">InstrProfIncrementInst</a> *Inc) {</div>
<div class="line"><a name="l00680"></a><span class="lineno">  680</span>&#160;  <a class="code" href="classllvm_1_1GlobalVariable.html">GlobalVariable</a> *Counters = getOrCreateRegionCounters(Inc);</div>
<div class="line"><a name="l00681"></a><span class="lineno">  681</span>&#160; </div>
<div class="line"><a name="l00682"></a><span class="lineno">  682</span>&#160;  <a class="code" href="classllvm_1_1IRBuilder.html">IRBuilder&lt;&gt;</a> <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>(Inc);</div>
<div class="line"><a name="l00683"></a><span class="lineno">  683</span>&#160;  uint64_t <a class="code" href="ELFObjHandler_8cpp.html#aef61945034b9431b804748fc317c5548">Index</a> = Inc-&gt;<a class="code" href="classllvm_1_1InstrProfIncrementInst.html#acafba4ddbe7047a5ac0632bce6ada313">getIndex</a>()-&gt;<a class="code" href="classllvm_1_1ConstantInt.html#ac09a21c371a9c535cbc13e8f82503aec">getZExtValue</a>();</div>
<div class="line"><a name="l00684"></a><span class="lineno">  684</span>&#160;  <a class="code" href="classllvm_1_1Value.html">Value</a> *<a class="code" href="ELFObjHandler_8cpp.html#a9df82a8be2f17e80535a8937bf23e022">Addr</a> = <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.CreateConstInBoundsGEP2_64(Counters-&gt;<a class="code" href="classllvm_1_1GlobalValue.html#a29e0b1c558b350347e2652b35b26fea8">getValueType</a>(),</div>
<div class="line"><a name="l00685"></a><span class="lineno">  685</span>&#160;                                                   Counters, 0, <a class="code" href="ELFObjHandler_8cpp.html#aef61945034b9431b804748fc317c5548">Index</a>);</div>
<div class="line"><a name="l00686"></a><span class="lineno">  686</span>&#160; </div>
<div class="line"><a name="l00687"></a><span class="lineno">  687</span>&#160;  <span class="keywordflow">if</span> (isRuntimeCounterRelocationEnabled()) {</div>
<div class="line"><a name="l00688"></a><span class="lineno">  688</span>&#160;    <a class="code" href="classllvm_1_1Type.html">Type</a> *Int64Ty = <a class="code" href="classllvm_1_1Type.html#a05186fa23e4d11b9855a9599ba87a4b7">Type::getInt64Ty</a>(<a class="code" href="lib_2Target_2X86_2README_8txt.html#ac88fe1d3a61b056a4f64fbbb156a62ff">M</a>-&gt;getContext());</div>
<div class="line"><a name="l00689"></a><span class="lineno">  689</span>&#160;    <a class="code" href="classllvm_1_1Type.html">Type</a> *Int64PtrTy = <a class="code" href="classllvm_1_1Type.html#a9739fda41ce7be4d43bb5b45bbd0e460">Type::getInt64PtrTy</a>(<a class="code" href="lib_2Target_2X86_2README_8txt.html#ac88fe1d3a61b056a4f64fbbb156a62ff">M</a>-&gt;getContext());</div>
<div class="line"><a name="l00690"></a><span class="lineno">  690</span>&#160;    <a class="code" href="classllvm_1_1Function.html">Function</a> *Fn = Inc-&gt;<a class="code" href="classllvm_1_1Instruction.html#a1a7f07aaef6a3bee130bf0e0f0536802">getParent</a>()-&gt;<a class="code" href="classllvm_1_1BasicBlock.html#a38bee869ad41aebfef3de2641b12004c">getParent</a>();</div>
<div class="line"><a name="l00691"></a><span class="lineno">  691</span>&#160;    <a class="code" href="classllvm_1_1Instruction.html">Instruction</a> &amp;<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a> = Fn-&gt;<a class="code" href="classllvm_1_1Function.html#ae6a4da5f41fc6a36735cc1704c01ce60">getEntryBlock</a>().<a class="code" href="classllvm_1_1BasicBlock.html#ab706e7ebb1969c5e34f28bfcf2ff719e">front</a>();</div>
<div class="line"><a name="l00692"></a><span class="lineno">  692</span>&#160;    <a class="code" href="classllvm_1_1LoadInst.html">LoadInst</a> *LI = dyn_cast&lt;LoadInst&gt;(&amp;<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>);</div>
<div class="line"><a name="l00693"></a><span class="lineno">  693</span>&#160;    <span class="keywordflow">if</span> (!LI) {</div>
<div class="line"><a name="l00694"></a><span class="lineno">  694</span>&#160;      <a class="code" href="classllvm_1_1IRBuilder.html">IRBuilder&lt;&gt;</a> <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>(&amp;<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>);</div>
<div class="line"><a name="l00695"></a><span class="lineno">  695</span>&#160;      <a class="code" href="classllvm_1_1Type.html">Type</a> *Int64Ty = <a class="code" href="classllvm_1_1Type.html#a05186fa23e4d11b9855a9599ba87a4b7">Type::getInt64Ty</a>(<a class="code" href="lib_2Target_2X86_2README_8txt.html#ac88fe1d3a61b056a4f64fbbb156a62ff">M</a>-&gt;getContext());</div>
<div class="line"><a name="l00696"></a><span class="lineno">  696</span>&#160;      <a class="code" href="classllvm_1_1GlobalVariable.html">GlobalVariable</a> *Bias = <a class="code" href="lib_2Target_2X86_2README_8txt.html#ac88fe1d3a61b056a4f64fbbb156a62ff">M</a>-&gt;getGlobalVariable(<a class="code" href="namespacellvm.html#a62e221646506147afeb0bf76d8e3366a">getInstrProfCounterBiasVarName</a>());</div>
<div class="line"><a name="l00697"></a><span class="lineno">  697</span>&#160;      <span class="keywordflow">if</span> (!Bias) {</div>
<div class="line"><a name="l00698"></a><span class="lineno">  698</span>&#160;        <span class="comment">// Compiler must define this variable when runtime counter relocation</span></div>
<div class="line"><a name="l00699"></a><span class="lineno">  699</span>&#160;        <span class="comment">// is being used. Runtime has a weak external reference that is used</span></div>
<div class="line"><a name="l00700"></a><span class="lineno">  700</span>&#160;        <span class="comment">// to check whether that&#39;s the case or not.</span></div>
<div class="line"><a name="l00701"></a><span class="lineno">  701</span>&#160;        Bias = <span class="keyword">new</span> <a class="code" href="classllvm_1_1GlobalVariable.html">GlobalVariable</a>(*M, Int64Ty, <span class="keyword">false</span>, <a class="code" href="classllvm_1_1GlobalValue.html#aedfa75f0c85c4aa85b257f066fbea57caf2b592edf18170e7aff4e8f3bae3360c">GlobalValue::LinkOnceODRLinkage</a>,</div>
<div class="line"><a name="l00702"></a><span class="lineno">  702</span>&#160;                                  <a class="code" href="classllvm_1_1Constant.html#aa6574d526b3e38a28f688a7bb4325c2c">Constant::getNullValue</a>(Int64Ty),</div>
<div class="line"><a name="l00703"></a><span class="lineno">  703</span>&#160;                                  <a class="code" href="namespacellvm.html#a62e221646506147afeb0bf76d8e3366a">getInstrProfCounterBiasVarName</a>());</div>
<div class="line"><a name="l00704"></a><span class="lineno">  704</span>&#160;        Bias-&gt;<a class="code" href="classllvm_1_1GlobalValue.html#aa242d8ab89216c14beab812e07009b2a">setVisibility</a>(<a class="code" href="classllvm_1_1GlobalValue.html#a9141f967188383108a69cc1b8ed3c195a7eade123587a08e674f2ca72e2443771">GlobalVariable::HiddenVisibility</a>);</div>
<div class="line"><a name="l00705"></a><span class="lineno">  705</span>&#160;        <span class="comment">// A definition that&#39;s weak (linkonce_odr) without being in a COMDAT</span></div>
<div class="line"><a name="l00706"></a><span class="lineno">  706</span>&#160;        <span class="comment">// section wouldn&#39;t lead to link errors, but it would lead to a dead</span></div>
<div class="line"><a name="l00707"></a><span class="lineno">  707</span>&#160;        <span class="comment">// data word from every TU but one. Putting it in COMDAT ensures there</span></div>
<div class="line"><a name="l00708"></a><span class="lineno">  708</span>&#160;        <span class="comment">// will be exactly one data slot in the link.</span></div>
<div class="line"><a name="l00709"></a><span class="lineno">  709</span>&#160;        <span class="keywordflow">if</span> (TT.<a class="code" href="classllvm_1_1Triple.html#a49a399e1ef632107f1a062a3d22f2118">supportsCOMDAT</a>())</div>
<div class="line"><a name="l00710"></a><span class="lineno">  710</span>&#160;          Bias-&gt;<a class="code" href="classllvm_1_1GlobalObject.html#ad580cf48b6ca7169e9166f0d19464ee0">setComdat</a>(<a class="code" href="lib_2Target_2X86_2README_8txt.html#ac88fe1d3a61b056a4f64fbbb156a62ff">M</a>-&gt;getOrInsertComdat(Bias-&gt;<a class="code" href="classllvm_1_1Value.html#adb5c319f5905c1d3ca9eb5df546388c5">getName</a>()));</div>
<div class="line"><a name="l00711"></a><span class="lineno">  711</span>&#160;      }</div>
<div class="line"><a name="l00712"></a><span class="lineno">  712</span>&#160;      LI = <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.CreateLoad(Int64Ty, Bias);</div>
<div class="line"><a name="l00713"></a><span class="lineno">  713</span>&#160;    }</div>
<div class="line"><a name="l00714"></a><span class="lineno">  714</span>&#160;    <span class="keyword">auto</span> *<a class="code" href="namespacellvm_1_1MCID.html#ab357441fcd1ea1f9b0d27c12700f6023a2b016c207343046b2bac45e69e76dcec">Add</a> = <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.CreateAdd(<a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.CreatePtrToInt(<a class="code" href="ELFObjHandler_8cpp.html#a9df82a8be2f17e80535a8937bf23e022">Addr</a>, Int64Ty), LI);</div>
<div class="line"><a name="l00715"></a><span class="lineno">  715</span>&#160;    <a class="code" href="ELFObjHandler_8cpp.html#a9df82a8be2f17e80535a8937bf23e022">Addr</a> = <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.CreateIntToPtr(<a class="code" href="namespacellvm_1_1MCID.html#ab357441fcd1ea1f9b0d27c12700f6023a2b016c207343046b2bac45e69e76dcec">Add</a>, Int64PtrTy);</div>
<div class="line"><a name="l00716"></a><span class="lineno">  716</span>&#160;  }</div>
<div class="line"><a name="l00717"></a><span class="lineno">  717</span>&#160; </div>
<div class="line"><a name="l00718"></a><span class="lineno">  718</span>&#160;  <span class="keywordflow">if</span> (Options.<a class="code" href="structllvm_1_1InstrProfOptions.html#a599d8f0899e3ea8da9d84cae20c82164">Atomic</a> || AtomicCounterUpdateAll ||</div>
<div class="line"><a name="l00719"></a><span class="lineno">  719</span>&#160;      (<a class="code" href="ELFObjHandler_8cpp.html#aef61945034b9431b804748fc317c5548">Index</a> == 0 &amp;&amp; AtomicFirstCounter)) {</div>
<div class="line"><a name="l00720"></a><span class="lineno">  720</span>&#160;    <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.CreateAtomicRMW(<a class="code" href="classllvm_1_1AtomicRMWInst.html#a461cfbbb5c7a57ab73210498923cf615a0794c42b44989f9d9f1454d79ca0dd88">AtomicRMWInst::Add</a>, <a class="code" href="ELFObjHandler_8cpp.html#a9df82a8be2f17e80535a8937bf23e022">Addr</a>, Inc-&gt;<a class="code" href="classllvm_1_1InstrProfIncrementInst.html#afe7c16bf1ea59bb69a0e02f5d80aadda">getStep</a>(),</div>
<div class="line"><a name="l00721"></a><span class="lineno">  721</span>&#160;                            <a class="code" href="structllvm_1_1MaybeAlign.html">MaybeAlign</a>(), AtomicOrdering::Monotonic);</div>
<div class="line"><a name="l00722"></a><span class="lineno">  722</span>&#160;  } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00723"></a><span class="lineno">  723</span>&#160;    <a class="code" href="classllvm_1_1Value.html">Value</a> *IncStep = Inc-&gt;<a class="code" href="classllvm_1_1InstrProfIncrementInst.html#afe7c16bf1ea59bb69a0e02f5d80aadda">getStep</a>();</div>
<div class="line"><a name="l00724"></a><span class="lineno">  724</span>&#160;    <a class="code" href="classllvm_1_1Value.html">Value</a> *<a class="code" href="namespacellvm_1_1SPII.html#a2ab8a310a4181c487902735f4758ca88a5069619ca8fdce305534f3fe85091a0f">Load</a> = <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.CreateLoad(IncStep-&gt;<a class="code" href="classllvm_1_1Value.html#a6393a2d4fe7e10b28a0dcc35f881567b">getType</a>(), <a class="code" href="ELFObjHandler_8cpp.html#a9df82a8be2f17e80535a8937bf23e022">Addr</a>, <span class="stringliteral">&quot;pgocount&quot;</span>);</div>
<div class="line"><a name="l00725"></a><span class="lineno">  725</span>&#160;    <span class="keyword">auto</span> *Count = <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.CreateAdd(<a class="code" href="namespacellvm_1_1SPII.html#a2ab8a310a4181c487902735f4758ca88a5069619ca8fdce305534f3fe85091a0f">Load</a>, Inc-&gt;<a class="code" href="classllvm_1_1InstrProfIncrementInst.html#afe7c16bf1ea59bb69a0e02f5d80aadda">getStep</a>());</div>
<div class="line"><a name="l00726"></a><span class="lineno">  726</span>&#160;    <span class="keyword">auto</span> *<a class="code" href="namespacellvm_1_1SPII.html#a2ab8a310a4181c487902735f4758ca88a36b3dd3b84fde3f8494a9b18af131856">Store</a> = <a class="code" href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a>.CreateStore(Count, <a class="code" href="ELFObjHandler_8cpp.html#a9df82a8be2f17e80535a8937bf23e022">Addr</a>);</div>
<div class="line"><a name="l00727"></a><span class="lineno">  727</span>&#160;    <span class="keywordflow">if</span> (isCounterPromotionEnabled())</div>
<div class="line"><a name="l00728"></a><span class="lineno">  728</span>&#160;      PromotionCandidates.emplace_back(cast&lt;Instruction&gt;(<a class="code" href="namespacellvm_1_1SPII.html#a2ab8a310a4181c487902735f4758ca88a5069619ca8fdce305534f3fe85091a0f">Load</a>), <a class="code" href="namespacellvm_1_1SPII.html#a2ab8a310a4181c487902735f4758ca88a36b3dd3b84fde3f8494a9b18af131856">Store</a>);</div>
<div class="line"><a name="l00729"></a><span class="lineno">  729</span>&#160;  }</div>
<div class="line"><a name="l00730"></a><span class="lineno">  730</span>&#160;  Inc-&gt;<a class="code" href="classllvm_1_1Instruction.html#ae6b978645b8ac72d1a35e1298ffdd4f0">eraseFromParent</a>();</div>
<div class="line"><a name="l00731"></a><span class="lineno">  731</span>&#160;}</div>
<div class="line"><a name="l00732"></a><span class="lineno">  732</span>&#160; </div>
<div class="line"><a name="l00733"></a><span class="lineno">  733</span>&#160;<span class="keywordtype">void</span> InstrProfiling::lowerCoverageData(<a class="code" href="classllvm_1_1GlobalVariable.html">GlobalVariable</a> *CoverageNamesVar) {</div>
<div class="line"><a name="l00734"></a><span class="lineno">  734</span>&#160;  <a class="code" href="classllvm_1_1ConstantArray.html">ConstantArray</a> *Names =</div>
<div class="line"><a name="l00735"></a><span class="lineno">  735</span>&#160;      cast&lt;ConstantArray&gt;(CoverageNamesVar-&gt;<a class="code" href="classllvm_1_1GlobalVariable.html#a0e5946885029c1bce1350d34f2539b1b">getInitializer</a>());</div>
<div class="line"><a name="l00736"></a><span class="lineno">  736</span>&#160;  <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a> = 0, <a class="code" href="BuiltinGCs_8cpp.html#a6742d2e0a668baf1196ec69e158d5f15">E</a> = Names-&gt;<a class="code" href="classllvm_1_1User.html#addec638786f763d967811b45cb662f1f">getNumOperands</a>(); <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a> &lt; <a class="code" href="BuiltinGCs_8cpp.html#a6742d2e0a668baf1196ec69e158d5f15">E</a>; ++<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>) {</div>
<div class="line"><a name="l00737"></a><span class="lineno">  737</span>&#160;    <a class="code" href="classllvm_1_1Constant.html">Constant</a> *<a class="code" href="regutils_8h.html#a1fa2460e32327ade49189c95740bc1b5">NC</a> = Names-&gt;<a class="code" href="classllvm_1_1User.html#abe1de1520a21f77ac57cc210bf0fb0b4">getOperand</a>(<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>);</div>
<div class="line"><a name="l00738"></a><span class="lineno">  738</span>&#160;    <a class="code" href="classllvm_1_1Value.html">Value</a> *V = <a class="code" href="regutils_8h.html#a1fa2460e32327ade49189c95740bc1b5">NC</a>-&gt;stripPointerCasts();</div>
<div class="line"><a name="l00739"></a><span class="lineno">  739</span>&#160;    <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(isa&lt;GlobalVariable&gt;(V) &amp;&amp; <span class="stringliteral">&quot;Missing reference to function name&quot;</span>);</div>
<div class="line"><a name="l00740"></a><span class="lineno">  740</span>&#160;    <a class="code" href="classllvm_1_1GlobalVariable.html">GlobalVariable</a> *<a class="code" href="namespacellvm_1_1GraphProgram.html#a0ad4685976f8c4d4a697a53fbe05d10b">Name</a> = cast&lt;GlobalVariable&gt;(V);</div>
<div class="line"><a name="l00741"></a><span class="lineno">  741</span>&#160; </div>
<div class="line"><a name="l00742"></a><span class="lineno">  742</span>&#160;    <a class="code" href="namespacellvm_1_1GraphProgram.html#a0ad4685976f8c4d4a697a53fbe05d10b">Name</a>-&gt;setLinkage(<a class="code" href="classllvm_1_1GlobalValue.html#aedfa75f0c85c4aa85b257f066fbea57ca04ed141708c0fd16723d212502b046ae">GlobalValue::PrivateLinkage</a>);</div>
<div class="line"><a name="l00743"></a><span class="lineno">  743</span>&#160;    ReferencedNames.push_back(<a class="code" href="namespacellvm_1_1GraphProgram.html#a0ad4685976f8c4d4a697a53fbe05d10b">Name</a>);</div>
<div class="line"><a name="l00744"></a><span class="lineno">  744</span>&#160;    <a class="code" href="regutils_8h.html#a1fa2460e32327ade49189c95740bc1b5">NC</a>-&gt;dropAllReferences();</div>
<div class="line"><a name="l00745"></a><span class="lineno">  745</span>&#160;  }</div>
<div class="line"><a name="l00746"></a><span class="lineno">  746</span>&#160;  CoverageNamesVar-&gt;<a class="code" href="classllvm_1_1GlobalVariable.html#ae0cf03d5de37330b1eb69dd22a1d5057">eraseFromParent</a>();</div>
<div class="line"><a name="l00747"></a><span class="lineno">  747</span>&#160;}</div>
<div class="line"><a name="l00748"></a><span class="lineno">  748</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l00749"></a><span class="lineno">  749</span>&#160;<span class="comment">/// Get the name of a profiling variable for a particular function.</span></div>
<div class="line"><a name="l00750"></a><span class="lineno"><a class="line" href="InstrProfiling_8cpp.html#a5443297c33124bc3c402c77959675ced">  750</a></span>&#160;<span class="comment"></span><span class="keyword">static</span> std::string <a class="code" href="InstrProfiling_8cpp.html#a5443297c33124bc3c402c77959675ced">getVarName</a>(<a class="code" href="classllvm_1_1InstrProfIncrementInst.html">InstrProfIncrementInst</a> *Inc, <a class="code" href="classllvm_1_1StringRef.html">StringRef</a> <a class="code" href="namespacellvm_1_1cl.html#afcbd4ecc474e2d218391d6d3027b086aa7861ef1db44eac8ea7a373cd7c53a7c5">Prefix</a>) {</div>
<div class="line"><a name="l00751"></a><span class="lineno">  751</span>&#160;  <a class="code" href="classllvm_1_1StringRef.html">StringRef</a> NamePrefix = <a class="code" href="namespacellvm.html#a09062024aadcf782f213596f52b732bb">getInstrProfNameVarPrefix</a>();</div>
<div class="line"><a name="l00752"></a><span class="lineno">  752</span>&#160;  <a class="code" href="classllvm_1_1StringRef.html">StringRef</a> <a class="code" href="namespacellvm_1_1GraphProgram.html#a0ad4685976f8c4d4a697a53fbe05d10b">Name</a> = Inc-&gt;<a class="code" href="classllvm_1_1InstrProfIncrementInst.html#a5a112055860338913dddf58db3b853a8">getName</a>()-&gt;<a class="code" href="classllvm_1_1Value.html#adb5c319f5905c1d3ca9eb5df546388c5">getName</a>().<a class="code" href="classllvm_1_1StringRef.html#a9a453439ca990fd1ae7ab9ed728d23f8">substr</a>(NamePrefix.<a class="code" href="classllvm_1_1StringRef.html#ad3ec22d51ff579206e10783e872a0327">size</a>());</div>
<div class="line"><a name="l00753"></a><span class="lineno">  753</span>&#160;  <a class="code" href="classllvm_1_1Function.html">Function</a> *<a class="code" href="MD5_8cpp.html#a96d73bbd7af15cb1fc38c3f4a3bd82e9">F</a> = Inc-&gt;<a class="code" href="classllvm_1_1Instruction.html#a1a7f07aaef6a3bee130bf0e0f0536802">getParent</a>()-&gt;<a class="code" href="classllvm_1_1BasicBlock.html#a38bee869ad41aebfef3de2641b12004c">getParent</a>();</div>
<div class="line"><a name="l00754"></a><span class="lineno">  754</span>&#160;  <a class="code" href="classllvm_1_1Module.html">Module</a> *<a class="code" href="lib_2Target_2X86_2README_8txt.html#ac88fe1d3a61b056a4f64fbbb156a62ff">M</a> = <a class="code" href="MD5_8cpp.html#a96d73bbd7af15cb1fc38c3f4a3bd82e9">F</a>-&gt;getParent();</div>
<div class="line"><a name="l00755"></a><span class="lineno">  755</span>&#160;  <span class="keywordflow">if</span> (!DoHashBasedCounterSplit || !<a class="code" href="namespacellvm.html#aeb5dc4f19ccfe906a67745d10a39b4c6">isIRPGOFlagSet</a>(<a class="code" href="lib_2Target_2X86_2README_8txt.html#ac88fe1d3a61b056a4f64fbbb156a62ff">M</a>) ||</div>
<div class="line"><a name="l00756"></a><span class="lineno">  756</span>&#160;      !<a class="code" href="namespacellvm.html#abbbd1b6fc4b1028641e564b0e972e18b">canRenameComdatFunc</a>(*<a class="code" href="MD5_8cpp.html#a96d73bbd7af15cb1fc38c3f4a3bd82e9">F</a>))</div>
<div class="line"><a name="l00757"></a><span class="lineno">  757</span>&#160;    <span class="keywordflow">return</span> (<a class="code" href="namespacellvm_1_1cl.html#afcbd4ecc474e2d218391d6d3027b086aa7861ef1db44eac8ea7a373cd7c53a7c5">Prefix</a> + <a class="code" href="namespacellvm_1_1GraphProgram.html#a0ad4685976f8c4d4a697a53fbe05d10b">Name</a>).str();</div>
<div class="line"><a name="l00758"></a><span class="lineno">  758</span>&#160;  uint64_t FuncHash = Inc-&gt;<a class="code" href="classllvm_1_1InstrProfIncrementInst.html#a3f71bcdce98e69d2e5b4723a9b4b19b6">getHash</a>()-&gt;<a class="code" href="classllvm_1_1ConstantInt.html#ac09a21c371a9c535cbc13e8f82503aec">getZExtValue</a>();</div>
<div class="line"><a name="l00759"></a><span class="lineno">  759</span>&#160;  <a class="code" href="classllvm_1_1SmallVector.html">SmallVector&lt;char, 24&gt;</a> HashPostfix;</div>
<div class="line"><a name="l00760"></a><span class="lineno">  760</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="namespacellvm_1_1GraphProgram.html#a0ad4685976f8c4d4a697a53fbe05d10b">Name</a>.endswith((<a class="code" href="classllvm_1_1Twine.html">Twine</a>(<span class="stringliteral">&quot;.&quot;</span>) + <a class="code" href="classllvm_1_1Twine.html">Twine</a>(FuncHash)).<a class="code" href="namespacellvm_1_1dwarf.html#a1245cd64fecb20c25cb4d00c5d96c3d4">toStringRef</a>(HashPostfix)))</div>
<div class="line"><a name="l00761"></a><span class="lineno">  761</span>&#160;    <span class="keywordflow">return</span> (<a class="code" href="namespacellvm_1_1cl.html#afcbd4ecc474e2d218391d6d3027b086aa7861ef1db44eac8ea7a373cd7c53a7c5">Prefix</a> + <a class="code" href="namespacellvm_1_1GraphProgram.html#a0ad4685976f8c4d4a697a53fbe05d10b">Name</a>).str();</div>
<div class="line"><a name="l00762"></a><span class="lineno">  762</span>&#160;  <span class="keywordflow">return</span> (<a class="code" href="namespacellvm_1_1cl.html#afcbd4ecc474e2d218391d6d3027b086aa7861ef1db44eac8ea7a373cd7c53a7c5">Prefix</a> + <a class="code" href="namespacellvm_1_1GraphProgram.html#a0ad4685976f8c4d4a697a53fbe05d10b">Name</a> + <span class="stringliteral">&quot;.&quot;</span> + <a class="code" href="classllvm_1_1Twine.html">Twine</a>(FuncHash)).str();</div>
<div class="line"><a name="l00763"></a><span class="lineno">  763</span>&#160;}</div>
<div class="line"><a name="l00764"></a><span class="lineno">  764</span>&#160; </div>
<div class="line"><a name="l00765"></a><span class="lineno"><a class="line" href="InstrProfiling_8cpp.html#adab9dec19dd536fe15a56e7f17e1ab33">  765</a></span>&#160;<span class="keyword">static</span> uint64_t <a class="code" href="InstrProfiling_8cpp.html#adab9dec19dd536fe15a56e7f17e1ab33">getIntModuleFlagOrZero</a>(<span class="keyword">const</span> <a class="code" href="classllvm_1_1Module.html">Module</a> &amp;M, <a class="code" href="classllvm_1_1StringRef.html">StringRef</a> <a class="code" href="namespacellvm_1_1MCID.html#ab357441fcd1ea1f9b0d27c12700f6023">Flag</a>) {</div>
<div class="line"><a name="l00766"></a><span class="lineno">  766</span>&#160;  <span class="keyword">auto</span> *MD = dyn_cast_or_null&lt;ConstantAsMetadata&gt;(<a class="code" href="lib_2Target_2X86_2README_8txt.html#ac88fe1d3a61b056a4f64fbbb156a62ff">M</a>.getModuleFlag(<a class="code" href="namespacellvm_1_1MCID.html#ab357441fcd1ea1f9b0d27c12700f6023">Flag</a>));</div>
<div class="line"><a name="l00767"></a><span class="lineno">  767</span>&#160;  <span class="keywordflow">if</span> (!MD)</div>
<div class="line"><a name="l00768"></a><span class="lineno">  768</span>&#160;    <span class="keywordflow">return</span> 0;</div>
<div class="line"><a name="l00769"></a><span class="lineno">  769</span>&#160; </div>
<div class="line"><a name="l00770"></a><span class="lineno">  770</span>&#160;  <span class="comment">// If the flag is a ConstantAsMetadata, it should be an integer representable</span></div>
<div class="line"><a name="l00771"></a><span class="lineno">  771</span>&#160;  <span class="comment">// in 64-bits.</span></div>
<div class="line"><a name="l00772"></a><span class="lineno">  772</span>&#160;  <span class="keywordflow">return</span> cast&lt;ConstantInt&gt;(MD-&gt;getValue())-&gt;getZExtValue();</div>
<div class="line"><a name="l00773"></a><span class="lineno">  773</span>&#160;}</div>
<div class="line"><a name="l00774"></a><span class="lineno">  774</span>&#160; </div>
<div class="line"><a name="l00775"></a><span class="lineno"><a class="line" href="InstrProfiling_8cpp.html#a02f3e811dd60ecb90ac73f992b73e048">  775</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">bool</span> <a class="code" href="InstrProfiling_8cpp.html#a02f3e811dd60ecb90ac73f992b73e048">enablesValueProfiling</a>(<span class="keyword">const</span> <a class="code" href="classllvm_1_1Module.html">Module</a> &amp;M) {</div>
<div class="line"><a name="l00776"></a><span class="lineno">  776</span>&#160;  <span class="keywordflow">return</span> <a class="code" href="namespacellvm.html#aeb5dc4f19ccfe906a67745d10a39b4c6">isIRPGOFlagSet</a>(&amp;<a class="code" href="lib_2Target_2X86_2README_8txt.html#ac88fe1d3a61b056a4f64fbbb156a62ff">M</a>) ||</div>
<div class="line"><a name="l00777"></a><span class="lineno">  777</span>&#160;         <a class="code" href="InstrProfiling_8cpp.html#adab9dec19dd536fe15a56e7f17e1ab33">getIntModuleFlagOrZero</a>(<a class="code" href="lib_2Target_2X86_2README_8txt.html#ac88fe1d3a61b056a4f64fbbb156a62ff">M</a>, <span class="stringliteral">&quot;EnableValueProfiling&quot;</span>) != 0;</div>
<div class="line"><a name="l00778"></a><span class="lineno">  778</span>&#160;}</div>
<div class="line"><a name="l00779"></a><span class="lineno">  779</span>&#160; </div>
<div class="line"><a name="l00780"></a><span class="lineno">  780</span>&#160;<span class="comment">// Conservatively returns true if data variables may be referenced by code.</span></div>
<div class="line"><a name="l00781"></a><span class="lineno"><a class="line" href="InstrProfiling_8cpp.html#aea15570513f8fc01807564eb53f2d695">  781</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">bool</span> <a class="code" href="InstrProfiling_8cpp.html#aea15570513f8fc01807564eb53f2d695">profDataReferencedByCode</a>(<span class="keyword">const</span> <a class="code" href="classllvm_1_1Module.html">Module</a> &amp;M) {</div>
<div class="line"><a name="l00782"></a><span class="lineno">  782</span>&#160;  <span class="keywordflow">return</span> <a class="code" href="InstrProfiling_8cpp.html#a02f3e811dd60ecb90ac73f992b73e048">enablesValueProfiling</a>(<a class="code" href="lib_2Target_2X86_2README_8txt.html#ac88fe1d3a61b056a4f64fbbb156a62ff">M</a>);</div>
<div class="line"><a name="l00783"></a><span class="lineno">  783</span>&#160;}</div>
<div class="line"><a name="l00784"></a><span class="lineno">  784</span>&#160; </div>
<div class="line"><a name="l00785"></a><span class="lineno"><a class="line" href="InstrProfiling_8cpp.html#a086fd5027d9c9be2f6540c33e9e777dc">  785</a></span>&#160;<span class="keyword">static</span> <span class="keyword">inline</span> <span class="keywordtype">bool</span> <a class="code" href="InstrProfiling_8cpp.html#a086fd5027d9c9be2f6540c33e9e777dc">shouldRecordFunctionAddr</a>(<a class="code" href="classllvm_1_1Function.html">Function</a> *<a class="code" href="MD5_8cpp.html#a96d73bbd7af15cb1fc38c3f4a3bd82e9">F</a>) {</div>
<div class="line"><a name="l00786"></a><span class="lineno">  786</span>&#160;  <span class="comment">// Only record function addresses if IR PGO is enabled or if clang value</span></div>
<div class="line"><a name="l00787"></a><span class="lineno">  787</span>&#160;  <span class="comment">// profiling is enabled. Recording function addresses greatly increases object</span></div>
<div class="line"><a name="l00788"></a><span class="lineno">  788</span>&#160;  <span class="comment">// file size, because it prevents the inliner from deleting functions that</span></div>
<div class="line"><a name="l00789"></a><span class="lineno">  789</span>&#160;  <span class="comment">// have been inlined everywhere.</span></div>
<div class="line"><a name="l00790"></a><span class="lineno">  790</span>&#160;  <span class="keywordflow">if</span> (!<a class="code" href="InstrProfiling_8cpp.html#aea15570513f8fc01807564eb53f2d695">profDataReferencedByCode</a>(*<a class="code" href="MD5_8cpp.html#a96d73bbd7af15cb1fc38c3f4a3bd82e9">F</a>-&gt;getParent()))</div>
<div class="line"><a name="l00791"></a><span class="lineno">  791</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l00792"></a><span class="lineno">  792</span>&#160; </div>
<div class="line"><a name="l00793"></a><span class="lineno">  793</span>&#160;  <span class="comment">// Check the linkage</span></div>
<div class="line"><a name="l00794"></a><span class="lineno">  794</span>&#160;  <span class="keywordtype">bool</span> HasAvailableExternallyLinkage = <a class="code" href="MD5_8cpp.html#a96d73bbd7af15cb1fc38c3f4a3bd82e9">F</a>-&gt;hasAvailableExternallyLinkage();</div>
<div class="line"><a name="l00795"></a><span class="lineno">  795</span>&#160;  <span class="keywordflow">if</span> (!<a class="code" href="MD5_8cpp.html#a96d73bbd7af15cb1fc38c3f4a3bd82e9">F</a>-&gt;hasLinkOnceLinkage() &amp;&amp; !<a class="code" href="MD5_8cpp.html#a96d73bbd7af15cb1fc38c3f4a3bd82e9">F</a>-&gt;hasLocalLinkage() &amp;&amp;</div>
<div class="line"><a name="l00796"></a><span class="lineno">  796</span>&#160;      !HasAvailableExternallyLinkage)</div>
<div class="line"><a name="l00797"></a><span class="lineno">  797</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l00798"></a><span class="lineno">  798</span>&#160; </div>
<div class="line"><a name="l00799"></a><span class="lineno">  799</span>&#160;  <span class="comment">// A function marked &#39;alwaysinline&#39; with available_externally linkage can&#39;t</span></div>
<div class="line"><a name="l00800"></a><span class="lineno">  800</span>&#160;  <span class="comment">// have its address taken. Doing so would create an undefined external ref to</span></div>
<div class="line"><a name="l00801"></a><span class="lineno">  801</span>&#160;  <span class="comment">// the function, which would fail to link.</span></div>
<div class="line"><a name="l00802"></a><span class="lineno">  802</span>&#160;  <span class="keywordflow">if</span> (HasAvailableExternallyLinkage &amp;&amp;</div>
<div class="line"><a name="l00803"></a><span class="lineno">  803</span>&#160;      <a class="code" href="MD5_8cpp.html#a96d73bbd7af15cb1fc38c3f4a3bd82e9">F</a>-&gt;hasFnAttribute(Attribute::AlwaysInline))</div>
<div class="line"><a name="l00804"></a><span class="lineno">  804</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l00805"></a><span class="lineno">  805</span>&#160; </div>
<div class="line"><a name="l00806"></a><span class="lineno">  806</span>&#160;  <span class="comment">// Prohibit function address recording if the function is both internal and</span></div>
<div class="line"><a name="l00807"></a><span class="lineno">  807</span>&#160;  <span class="comment">// COMDAT. This avoids the profile data variable referencing internal symbols</span></div>
<div class="line"><a name="l00808"></a><span class="lineno">  808</span>&#160;  <span class="comment">// in COMDAT.</span></div>
<div class="line"><a name="l00809"></a><span class="lineno">  809</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="MD5_8cpp.html#a96d73bbd7af15cb1fc38c3f4a3bd82e9">F</a>-&gt;hasLocalLinkage() &amp;&amp; <a class="code" href="MD5_8cpp.html#a96d73bbd7af15cb1fc38c3f4a3bd82e9">F</a>-&gt;hasComdat())</div>
<div class="line"><a name="l00810"></a><span class="lineno">  810</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l00811"></a><span class="lineno">  811</span>&#160; </div>
<div class="line"><a name="l00812"></a><span class="lineno">  812</span>&#160;  <span class="comment">// Check uses of this function for other than direct calls or invokes to it.</span></div>
<div class="line"><a name="l00813"></a><span class="lineno">  813</span>&#160;  <span class="comment">// Inline virtual functions have linkeOnceODR linkage. When a key method</span></div>
<div class="line"><a name="l00814"></a><span class="lineno">  814</span>&#160;  <span class="comment">// exists, the vtable will only be emitted in the TU where the key method</span></div>
<div class="line"><a name="l00815"></a><span class="lineno">  815</span>&#160;  <span class="comment">// is defined. In a TU where vtable is not available, the function won&#39;t</span></div>
<div class="line"><a name="l00816"></a><span class="lineno">  816</span>&#160;  <span class="comment">// be &#39;addresstaken&#39;. If its address is not recorded here, the profile data</span></div>
<div class="line"><a name="l00817"></a><span class="lineno">  817</span>&#160;  <span class="comment">// with missing address may be picked by the linker leading  to missing</span></div>
<div class="line"><a name="l00818"></a><span class="lineno">  818</span>&#160;  <span class="comment">// indirect call target info.</span></div>
<div class="line"><a name="l00819"></a><span class="lineno">  819</span>&#160;  <span class="keywordflow">return</span> <a class="code" href="MD5_8cpp.html#a96d73bbd7af15cb1fc38c3f4a3bd82e9">F</a>-&gt;hasAddressTaken() || <a class="code" href="MD5_8cpp.html#a96d73bbd7af15cb1fc38c3f4a3bd82e9">F</a>-&gt;hasLinkOnceLinkage();</div>
<div class="line"><a name="l00820"></a><span class="lineno">  820</span>&#160;}</div>
<div class="line"><a name="l00821"></a><span class="lineno">  821</span>&#160; </div>
<div class="line"><a name="l00822"></a><span class="lineno"><a class="line" href="InstrProfiling_8cpp.html#aeea8848370a2113b69a2c4b4f4ad2473">  822</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">bool</span> <a class="code" href="InstrProfiling_8cpp.html#aeea8848370a2113b69a2c4b4f4ad2473">needsRuntimeRegistrationOfSectionRange</a>(<span class="keyword">const</span> <a class="code" href="classllvm_1_1Triple.html">Triple</a> &amp;TT) {</div>
<div class="line"><a name="l00823"></a><span class="lineno">  823</span>&#160;  <span class="comment">// Don&#39;t do this for Darwin.  compiler-rt uses linker magic.</span></div>
<div class="line"><a name="l00824"></a><span class="lineno">  824</span>&#160;  <span class="keywordflow">if</span> (TT.<a class="code" href="classllvm_1_1Triple.html#ab6fdf9b428bc3d57837022121c155cbf">isOSDarwin</a>())</div>
<div class="line"><a name="l00825"></a><span class="lineno">  825</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l00826"></a><span class="lineno">  826</span>&#160;  <span class="comment">// Use linker script magic to get data/cnts/name start/end.</span></div>
<div class="line"><a name="l00827"></a><span class="lineno">  827</span>&#160;  <span class="keywordflow">if</span> (TT.<a class="code" href="classllvm_1_1Triple.html#a898af817f450422b11443c35c99e64da">isOSLinux</a>() || TT.<a class="code" href="classllvm_1_1Triple.html#aa98a01c1d72fde0f87823d204dc98334">isOSFreeBSD</a>() || TT.<a class="code" href="classllvm_1_1Triple.html#a3d98f3cc4fe2adddfa98dc0dbee55bdb">isOSNetBSD</a>() ||</div>
<div class="line"><a name="l00828"></a><span class="lineno">  828</span>&#160;      TT.<a class="code" href="classllvm_1_1Triple.html#a565d07b44e55cbff02db88c1d5cf3cb1">isOSSolaris</a>() || TT.<a class="code" href="classllvm_1_1Triple.html#ae891092a64f3b737dcba557a8450587c">isOSFuchsia</a>() || TT.<a class="code" href="classllvm_1_1Triple.html#a0633689ffd7c2b293bf95fb2f0e14f4f">isPS4CPU</a>() ||</div>
<div class="line"><a name="l00829"></a><span class="lineno">  829</span>&#160;      TT.<a class="code" href="classllvm_1_1Triple.html#a7736bfc4c1afef875ecf02f2a7701fe3">isOSWindows</a>())</div>
<div class="line"><a name="l00830"></a><span class="lineno">  830</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l00831"></a><span class="lineno">  831</span>&#160; </div>
<div class="line"><a name="l00832"></a><span class="lineno">  832</span>&#160;  <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l00833"></a><span class="lineno">  833</span>&#160;}</div>
<div class="line"><a name="l00834"></a><span class="lineno">  834</span>&#160; </div>
<div class="line"><a name="l00835"></a><span class="lineno">  835</span>&#160;<a class="code" href="classllvm_1_1GlobalVariable.html">GlobalVariable</a> *</div>
<div class="line"><a name="l00836"></a><span class="lineno">  836</span>&#160;InstrProfiling::getOrCreateRegionCounters(<a class="code" href="classllvm_1_1InstrProfIncrementInst.html">InstrProfIncrementInst</a> *Inc) {</div>
<div class="line"><a name="l00837"></a><span class="lineno">  837</span>&#160;  <a class="code" href="classllvm_1_1GlobalVariable.html">GlobalVariable</a> *NamePtr = Inc-&gt;<a class="code" href="classllvm_1_1InstrProfIncrementInst.html#a5a112055860338913dddf58db3b853a8">getName</a>();</div>
<div class="line"><a name="l00838"></a><span class="lineno">  838</span>&#160;  <span class="keyword">auto</span> It = ProfileDataMap.find(NamePtr);</div>
<div class="line"><a name="l00839"></a><span class="lineno">  839</span>&#160;  PerFunctionProfileData <a class="code" href="namespacellvm_1_1X86II.html#a15cbb72b959838d6e0f002ce58bc4bb2a8d230b4df405685c7dc1f1db718d7008">PD</a>;</div>
<div class="line"><a name="l00840"></a><span class="lineno">  840</span>&#160;  <span class="keywordflow">if</span> (It != ProfileDataMap.end()) {</div>
<div class="line"><a name="l00841"></a><span class="lineno">  841</span>&#160;    <span class="keywordflow">if</span> (It-&gt;second.RegionCounters)</div>
<div class="line"><a name="l00842"></a><span class="lineno">  842</span>&#160;      <span class="keywordflow">return</span> It-&gt;second.RegionCounters;</div>
<div class="line"><a name="l00843"></a><span class="lineno">  843</span>&#160;    <a class="code" href="namespacellvm_1_1X86II.html#a15cbb72b959838d6e0f002ce58bc4bb2a8d230b4df405685c7dc1f1db718d7008">PD</a> = It-&gt;second;</div>
<div class="line"><a name="l00844"></a><span class="lineno">  844</span>&#160;  }</div>
<div class="line"><a name="l00845"></a><span class="lineno">  845</span>&#160; </div>
<div class="line"><a name="l00846"></a><span class="lineno">  846</span>&#160;  <span class="comment">// Match the linkage and visibility of the name global.</span></div>
<div class="line"><a name="l00847"></a><span class="lineno">  847</span>&#160;  <a class="code" href="classllvm_1_1Function.html">Function</a> *Fn = Inc-&gt;<a class="code" href="classllvm_1_1Instruction.html#a1a7f07aaef6a3bee130bf0e0f0536802">getParent</a>()-&gt;<a class="code" href="classllvm_1_1BasicBlock.html#a38bee869ad41aebfef3de2641b12004c">getParent</a>();</div>
<div class="line"><a name="l00848"></a><span class="lineno">  848</span>&#160;  <a class="code" href="classllvm_1_1GlobalValue.html#aedfa75f0c85c4aa85b257f066fbea57c">GlobalValue::LinkageTypes</a> <a class="code" href="namespacellvm_1_1jitlink.html#abee99c9c75d23a0304e5e58e3128a55f">Linkage</a> = NamePtr-&gt;<a class="code" href="classllvm_1_1GlobalValue.html#a3547d58a060ee2e4a29cbea85bef91af">getLinkage</a>();</div>
<div class="line"><a name="l00849"></a><span class="lineno">  849</span>&#160;  <a class="code" href="classllvm_1_1GlobalValue.html#a9141f967188383108a69cc1b8ed3c195">GlobalValue::VisibilityTypes</a> Visibility = NamePtr-&gt;<a class="code" href="classllvm_1_1GlobalValue.html#a28b9561d9ef3d237ef894023187fa26c">getVisibility</a>();</div>
<div class="line"><a name="l00850"></a><span class="lineno">  850</span>&#160; </div>
<div class="line"><a name="l00851"></a><span class="lineno">  851</span>&#160;  <span class="comment">// Move the name variable to the right section. Place them in a COMDAT group</span></div>
<div class="line"><a name="l00852"></a><span class="lineno">  852</span>&#160;  <span class="comment">// if the associated function is a COMDAT. This will make sure that only one</span></div>
<div class="line"><a name="l00853"></a><span class="lineno">  853</span>&#160;  <span class="comment">// copy of counters of the COMDAT function will be emitted after linking. Keep</span></div>
<div class="line"><a name="l00854"></a><span class="lineno">  854</span>&#160;  <span class="comment">// in mind that this pass may run before the inliner, so we need to create a</span></div>
<div class="line"><a name="l00855"></a><span class="lineno">  855</span>&#160;  <span class="comment">// new comdat group for the counters and profiling data. If we use the comdat</span></div>
<div class="line"><a name="l00856"></a><span class="lineno">  856</span>&#160;  <span class="comment">// of the parent function, that will result in relocations against discarded</span></div>
<div class="line"><a name="l00857"></a><span class="lineno">  857</span>&#160;  <span class="comment">// sections.</span></div>
<div class="line"><a name="l00858"></a><span class="lineno">  858</span>&#160;  <span class="comment">//</span></div>
<div class="line"><a name="l00859"></a><span class="lineno">  859</span>&#160;  <span class="comment">// If the data variable is referenced by code,  counters and data have to be</span></div>
<div class="line"><a name="l00860"></a><span class="lineno">  860</span>&#160;  <span class="comment">// in different comdats for COFF because the Visual C++ linker will report</span></div>
<div class="line"><a name="l00861"></a><span class="lineno">  861</span>&#160;  <span class="comment">// duplicate symbol errors if there are multiple external symbols with the</span></div>
<div class="line"><a name="l00862"></a><span class="lineno">  862</span>&#160;  <span class="comment">// same name marked IMAGE_COMDAT_SELECT_ASSOCIATIVE.</span></div>
<div class="line"><a name="l00863"></a><span class="lineno">  863</span>&#160;  <span class="comment">//</span></div>
<div class="line"><a name="l00864"></a><span class="lineno">  864</span>&#160;  <span class="comment">// For ELF, when not using COMDAT, put counters, data and values into a</span></div>
<div class="line"><a name="l00865"></a><span class="lineno">  865</span>&#160;  <span class="comment">// nodeduplicate COMDAT which is lowered to a zero-flag section group. This</span></div>
<div class="line"><a name="l00866"></a><span class="lineno">  866</span>&#160;  <span class="comment">// allows -z start-stop-gc to discard the entire group when the function is</span></div>
<div class="line"><a name="l00867"></a><span class="lineno">  867</span>&#160;  <span class="comment">// discarded.</span></div>
<div class="line"><a name="l00868"></a><span class="lineno">  868</span>&#160;  <span class="keywordtype">bool</span> DataReferencedByCode = <a class="code" href="InstrProfiling_8cpp.html#aea15570513f8fc01807564eb53f2d695">profDataReferencedByCode</a>(*M);</div>
<div class="line"><a name="l00869"></a><span class="lineno">  869</span>&#160;  <span class="keywordtype">bool</span> NeedComdat = <a class="code" href="namespacellvm.html#ab76756b8d32dc1d4e0e9c96b2d396307">needsComdatForCounter</a>(*Fn, *M);</div>
<div class="line"><a name="l00870"></a><span class="lineno">  870</span>&#160;  std::string CntsVarName = <a class="code" href="InstrProfiling_8cpp.html#a5443297c33124bc3c402c77959675ced">getVarName</a>(Inc, <a class="code" href="namespacellvm.html#a7c3a00523afbec28a3254458a2b42e80">getInstrProfCountersVarPrefix</a>());</div>
<div class="line"><a name="l00871"></a><span class="lineno">  871</span>&#160;  std::string DataVarName = <a class="code" href="InstrProfiling_8cpp.html#a5443297c33124bc3c402c77959675ced">getVarName</a>(Inc, <a class="code" href="namespacellvm.html#a4c851da0fc911f82efe3ddda6664e5d1">getInstrProfDataVarPrefix</a>());</div>
<div class="line"><a name="l00872"></a><span class="lineno">  872</span>&#160;  <span class="keyword">auto</span> MaybeSetComdat = [&amp;](<a class="code" href="classllvm_1_1GlobalVariable.html">GlobalVariable</a> *GV) {</div>
<div class="line"><a name="l00873"></a><span class="lineno">  873</span>&#160;    <span class="keywordtype">bool</span> UseComdat = (NeedComdat || TT.<a class="code" href="classllvm_1_1Triple.html#aea6d215256ae43bc9149bf41f2cc7694">isOSBinFormatELF</a>());</div>
<div class="line"><a name="l00874"></a><span class="lineno">  874</span>&#160;    <span class="keywordflow">if</span> (UseComdat) {</div>
<div class="line"><a name="l00875"></a><span class="lineno">  875</span>&#160;      <a class="code" href="classllvm_1_1StringRef.html">StringRef</a> GroupName = TT.<a class="code" href="classllvm_1_1Triple.html#a6300d761fd69580d711fad99b934950a">isOSBinFormatCOFF</a>() &amp;&amp; DataReferencedByCode</div>
<div class="line"><a name="l00876"></a><span class="lineno">  876</span>&#160;                                ? GV-&gt;getName()</div>
<div class="line"><a name="l00877"></a><span class="lineno">  877</span>&#160;                                : CntsVarName;</div>
<div class="line"><a name="l00878"></a><span class="lineno">  878</span>&#160;      <a class="code" href="classllvm_1_1Comdat.html">Comdat</a> *<a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a> = <a class="code" href="lib_2Target_2X86_2README_8txt.html#ac88fe1d3a61b056a4f64fbbb156a62ff">M</a>-&gt;getOrInsertComdat(GroupName);</div>
<div class="line"><a name="l00879"></a><span class="lineno">  879</span>&#160;      <span class="keywordflow">if</span> (!NeedComdat)</div>
<div class="line"><a name="l00880"></a><span class="lineno">  880</span>&#160;        <a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a>-&gt;setSelectionKind(<a class="code" href="classllvm_1_1Comdat.html#ab40cbf8243fad70968f9ecf82f48a035ab2d0d4bc9ba11b7324f5ffc20a9dc37a">Comdat::NoDeduplicate</a>);</div>
<div class="line"><a name="l00881"></a><span class="lineno">  881</span>&#160;      GV-&gt;setComdat(<a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a>);</div>
<div class="line"><a name="l00882"></a><span class="lineno">  882</span>&#160;    }</div>
<div class="line"><a name="l00883"></a><span class="lineno">  883</span>&#160;  };</div>
<div class="line"><a name="l00884"></a><span class="lineno">  884</span>&#160; </div>
<div class="line"><a name="l00885"></a><span class="lineno">  885</span>&#160;  uint64_t NumCounters = Inc-&gt;<a class="code" href="classllvm_1_1InstrProfIncrementInst.html#ab82edcca18db0e7929b9d668f445e5bb">getNumCounters</a>()-&gt;<a class="code" href="classllvm_1_1ConstantInt.html#ac09a21c371a9c535cbc13e8f82503aec">getZExtValue</a>();</div>
<div class="line"><a name="l00886"></a><span class="lineno">  886</span>&#160;  <a class="code" href="classllvm_1_1LLVMContext.html">LLVMContext</a> &amp;Ctx = <a class="code" href="lib_2Target_2X86_2README_8txt.html#ac88fe1d3a61b056a4f64fbbb156a62ff">M</a>-&gt;getContext();</div>
<div class="line"><a name="l00887"></a><span class="lineno">  887</span>&#160;  <a class="code" href="classllvm_1_1ArrayType.html">ArrayType</a> *CounterTy = <a class="code" href="classllvm_1_1ArrayType.html#adf411edc4f135b570ab218079474ce77">ArrayType::get</a>(<a class="code" href="classllvm_1_1Type.html#a05186fa23e4d11b9855a9599ba87a4b7">Type::getInt64Ty</a>(Ctx), NumCounters);</div>
<div class="line"><a name="l00888"></a><span class="lineno">  888</span>&#160; </div>
<div class="line"><a name="l00889"></a><span class="lineno">  889</span>&#160;  <span class="comment">// Create the counters variable.</span></div>
<div class="line"><a name="l00890"></a><span class="lineno">  890</span>&#160;  <span class="keyword">auto</span> *CounterPtr =</div>
<div class="line"><a name="l00891"></a><span class="lineno">  891</span>&#160;      <span class="keyword">new</span> <a class="code" href="classllvm_1_1GlobalVariable.html">GlobalVariable</a>(*M, CounterTy, <span class="keyword">false</span>, <a class="code" href="namespacellvm_1_1jitlink.html#abee99c9c75d23a0304e5e58e3128a55f">Linkage</a>,</div>
<div class="line"><a name="l00892"></a><span class="lineno">  892</span>&#160;                         <a class="code" href="classllvm_1_1Constant.html#aa6574d526b3e38a28f688a7bb4325c2c">Constant::getNullValue</a>(CounterTy), CntsVarName);</div>
<div class="line"><a name="l00893"></a><span class="lineno">  893</span>&#160;  CounterPtr-&gt;setVisibility(Visibility);</div>
<div class="line"><a name="l00894"></a><span class="lineno">  894</span>&#160;  CounterPtr-&gt;setSection(</div>
<div class="line"><a name="l00895"></a><span class="lineno">  895</span>&#160;      <a class="code" href="namespacellvm.html#a50e3b943e26ec60c2aa24a7ff43a2d17">getInstrProfSectionName</a>(IPSK_cnts, TT.<a class="code" href="classllvm_1_1Triple.html#a2e265a0d332c3e2db0acf0c7afd4175d">getObjectFormat</a>()));</div>
<div class="line"><a name="l00896"></a><span class="lineno">  896</span>&#160;  CounterPtr-&gt;setAlignment(<a class="code" href="ELFObjHandler_8cpp.html#a043cdaf7b89aaeeb127be5d93411637f">Align</a>(8));</div>
<div class="line"><a name="l00897"></a><span class="lineno">  897</span>&#160;  MaybeSetComdat(CounterPtr);</div>
<div class="line"><a name="l00898"></a><span class="lineno">  898</span>&#160;  CounterPtr-&gt;setLinkage(<a class="code" href="namespacellvm_1_1jitlink.html#abee99c9c75d23a0304e5e58e3128a55f">Linkage</a>);</div>
<div class="line"><a name="l00899"></a><span class="lineno">  899</span>&#160; </div>
<div class="line"><a name="l00900"></a><span class="lineno">  900</span>&#160;  <span class="keyword">auto</span> *Int8PtrTy = <a class="code" href="classllvm_1_1Type.html#a7fe9ccd4893f4e2caa826126c09545ea">Type::getInt8PtrTy</a>(Ctx);</div>
<div class="line"><a name="l00901"></a><span class="lineno">  901</span>&#160;  <span class="comment">// Allocate statically the array of pointers to value profile nodes for</span></div>
<div class="line"><a name="l00902"></a><span class="lineno">  902</span>&#160;  <span class="comment">// the current function.</span></div>
<div class="line"><a name="l00903"></a><span class="lineno">  903</span>&#160;  <a class="code" href="classllvm_1_1Constant.html">Constant</a> *ValuesPtrExpr = <a class="code" href="classllvm_1_1ConstantPointerNull.html#a96f5c85e4022e369266541b2db3fda69">ConstantPointerNull::get</a>(Int8PtrTy);</div>
<div class="line"><a name="l00904"></a><span class="lineno">  904</span>&#160;  uint64_t NS = 0;</div>
<div class="line"><a name="l00905"></a><span class="lineno">  905</span>&#160;  <span class="keywordflow">for</span> (<a class="code" href="classuint32__t.html">uint32_t</a> <a class="code" href="namespacellvm_1_1lltok.html#af353621f14cb4b4b3af5ffaff84076b1">Kind</a> = IPVK_First; <a class="code" href="namespacellvm_1_1lltok.html#af353621f14cb4b4b3af5ffaff84076b1">Kind</a> &lt;= IPVK_Last; ++<a class="code" href="namespacellvm_1_1lltok.html#af353621f14cb4b4b3af5ffaff84076b1">Kind</a>)</div>
<div class="line"><a name="l00906"></a><span class="lineno">  906</span>&#160;    NS += <a class="code" href="namespacellvm_1_1X86II.html#a15cbb72b959838d6e0f002ce58bc4bb2a8d230b4df405685c7dc1f1db718d7008">PD</a>.NumValueSites[<a class="code" href="namespacellvm_1_1lltok.html#af353621f14cb4b4b3af5ffaff84076b1">Kind</a>];</div>
<div class="line"><a name="l00907"></a><span class="lineno">  907</span>&#160;  <a class="code" href="include_2llvm_2Support_2CMakeLists_8txt.html#aef9367eb0b7430eaf70b1f2725488f2a">if</a> (NS &gt; 0 &amp;&amp; ValueProfileStaticAlloc &amp;&amp;</div>
<div class="line"><a name="l00908"></a><span class="lineno">  908</span>&#160;      !<a class="code" href="InstrProfiling_8cpp.html#aeea8848370a2113b69a2c4b4f4ad2473">needsRuntimeRegistrationOfSectionRange</a>(TT)) {</div>
<div class="line"><a name="l00909"></a><span class="lineno">  909</span>&#160;    <a class="code" href="classllvm_1_1ArrayType.html">ArrayType</a> *ValuesTy = <a class="code" href="classllvm_1_1ArrayType.html#adf411edc4f135b570ab218079474ce77">ArrayType::get</a>(<a class="code" href="classllvm_1_1Type.html#a05186fa23e4d11b9855a9599ba87a4b7">Type::getInt64Ty</a>(Ctx), NS);</div>
<div class="line"><a name="l00910"></a><span class="lineno">  910</span>&#160;    <span class="keyword">auto</span> *ValuesVar = <span class="keyword">new</span> <a class="code" href="classllvm_1_1GlobalVariable.html">GlobalVariable</a>(</div>
<div class="line"><a name="l00911"></a><span class="lineno">  911</span>&#160;        *M, ValuesTy, <span class="keyword">false</span>, <a class="code" href="namespacellvm_1_1jitlink.html#abee99c9c75d23a0304e5e58e3128a55f">Linkage</a>, <a class="code" href="classllvm_1_1Constant.html#aa6574d526b3e38a28f688a7bb4325c2c">Constant::getNullValue</a>(ValuesTy),</div>
<div class="line"><a name="l00912"></a><span class="lineno">  912</span>&#160;        <a class="code" href="InstrProfiling_8cpp.html#a5443297c33124bc3c402c77959675ced">getVarName</a>(Inc, <a class="code" href="namespacellvm.html#a61b849e48600c5db3a1b714f659990be">getInstrProfValuesVarPrefix</a>()));</div>
<div class="line"><a name="l00913"></a><span class="lineno">  913</span>&#160;    ValuesVar-&gt;setVisibility(Visibility);</div>
<div class="line"><a name="l00914"></a><span class="lineno">  914</span>&#160;    ValuesVar-&gt;setSection(</div>
<div class="line"><a name="l00915"></a><span class="lineno">  915</span>&#160;        <a class="code" href="namespacellvm.html#a50e3b943e26ec60c2aa24a7ff43a2d17">getInstrProfSectionName</a>(IPSK_vals, TT.<a class="code" href="classllvm_1_1Triple.html#a2e265a0d332c3e2db0acf0c7afd4175d">getObjectFormat</a>()));</div>
<div class="line"><a name="l00916"></a><span class="lineno">  916</span>&#160;    ValuesVar-&gt;setAlignment(<a class="code" href="ELFObjHandler_8cpp.html#a043cdaf7b89aaeeb127be5d93411637f">Align</a>(8));</div>
<div class="line"><a name="l00917"></a><span class="lineno">  917</span>&#160;    MaybeSetComdat(ValuesVar);</div>
<div class="line"><a name="l00918"></a><span class="lineno">  918</span>&#160;    ValuesPtrExpr =</div>
<div class="line"><a name="l00919"></a><span class="lineno">  919</span>&#160;        <a class="code" href="classllvm_1_1ConstantExpr.html#ae79d05dd3d0b05e080e08f8c5c33f880">ConstantExpr::getBitCast</a>(ValuesVar, <a class="code" href="classllvm_1_1Type.html#a7fe9ccd4893f4e2caa826126c09545ea">Type::getInt8PtrTy</a>(Ctx));</div>
<div class="line"><a name="l00920"></a><span class="lineno">  920</span>&#160;  }</div>
<div class="line"><a name="l00921"></a><span class="lineno">  921</span>&#160; </div>
<div class="line"><a name="l00922"></a><span class="lineno">  922</span>&#160;  <span class="comment">// Create data variable.</span></div>
<div class="line"><a name="l00923"></a><span class="lineno">  923</span>&#160;  <span class="keyword">auto</span> *Int16Ty = <a class="code" href="classllvm_1_1Type.html#a87f56db834c58ca630624956ecf6972f">Type::getInt16Ty</a>(Ctx);</div>
<div class="line"><a name="l00924"></a><span class="lineno">  924</span>&#160;  <span class="keyword">auto</span> *Int16ArrayTy = <a class="code" href="classllvm_1_1ArrayType.html#adf411edc4f135b570ab218079474ce77">ArrayType::get</a>(Int16Ty, IPVK_Last + 1);</div>
<div class="line"><a name="l00925"></a><span class="lineno">  925</span>&#160;  <a class="code" href="classllvm_1_1Type.html">Type</a> *DataTypes[] = {</div>
<div class="line"><a name="l00926"></a><span class="lineno">  926</span>&#160;<span class="preprocessor">#define INSTR_PROF_DATA(Type, LLVMType, Name, Init) LLVMType,</span></div>
<div class="line"><a name="l00927"></a><span class="lineno">  927</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="InstrProfData_8inc.html">llvm/ProfileData/InstrProfData.inc</a>&quot;</span></div>
<div class="line"><a name="l00928"></a><span class="lineno">  928</span>&#160;  };</div>
<div class="line"><a name="l00929"></a><span class="lineno">  929</span>&#160;  <span class="keyword">auto</span> *DataTy = <a class="code" href="classllvm_1_1StructType.html#a18fc4545474c6ebb6f7c547f64f4fb31">StructType::get</a>(Ctx, <a class="code" href="namespacellvm.html#a0448108c43f3a226744d0a4c28c989f7">makeArrayRef</a>(DataTypes));</div>
<div class="line"><a name="l00930"></a><span class="lineno">  930</span>&#160; </div>
<div class="line"><a name="l00931"></a><span class="lineno">  931</span>&#160;  <a class="code" href="classllvm_1_1Constant.html">Constant</a> *FunctionAddr = <a class="code" href="InstrProfiling_8cpp.html#a086fd5027d9c9be2f6540c33e9e777dc">shouldRecordFunctionAddr</a>(Fn)</div>
<div class="line"><a name="l00932"></a><span class="lineno">  932</span>&#160;                               ? <a class="code" href="classllvm_1_1ConstantExpr.html#ae79d05dd3d0b05e080e08f8c5c33f880">ConstantExpr::getBitCast</a>(Fn, Int8PtrTy)</div>
<div class="line"><a name="l00933"></a><span class="lineno">  933</span>&#160;                               : <a class="code" href="classllvm_1_1ConstantPointerNull.html">ConstantPointerNull</a>::<a class="code" href="lib_2Target_2PowerPC_2README_8txt.html#aa91241c8c54738377749dc47ee489e0d">get</a>(Int8PtrTy);</div>
<div class="line"><a name="l00934"></a><span class="lineno">  934</span>&#160; </div>
<div class="line"><a name="l00935"></a><span class="lineno">  935</span>&#160;  <a class="code" href="classllvm_1_1Constant.html">Constant</a> *Int16ArrayVals[IPVK_Last + 1];</div>
<div class="line"><a name="l00936"></a><span class="lineno">  936</span>&#160;  <span class="keywordflow">for</span> (<a class="code" href="classuint32__t.html">uint32_t</a> <a class="code" href="namespacellvm_1_1lltok.html#af353621f14cb4b4b3af5ffaff84076b1">Kind</a> = IPVK_First; <a class="code" href="namespacellvm_1_1lltok.html#af353621f14cb4b4b3af5ffaff84076b1">Kind</a> &lt;= IPVK_Last; ++<a class="code" href="namespacellvm_1_1lltok.html#af353621f14cb4b4b3af5ffaff84076b1">Kind</a>)</div>
<div class="line"><a name="l00937"></a><span class="lineno">  937</span>&#160;    Int16ArrayVals[<a class="code" href="namespacellvm_1_1lltok.html#af353621f14cb4b4b3af5ffaff84076b1">Kind</a>] = <a class="code" href="classllvm_1_1ConstantInt.html#a969709dd49c28865a482d8b870f87c46">ConstantInt::get</a>(Int16Ty, <a class="code" href="namespacellvm_1_1X86II.html#a15cbb72b959838d6e0f002ce58bc4bb2a8d230b4df405685c7dc1f1db718d7008">PD</a>.NumValueSites[<a class="code" href="namespacellvm_1_1lltok.html#af353621f14cb4b4b3af5ffaff84076b1">Kind</a>]);</div>
<div class="line"><a name="l00938"></a><span class="lineno">  938</span>&#160; </div>
<div class="line"><a name="l00939"></a><span class="lineno">  939</span>&#160;  <a class="code" href="classllvm_1_1Constant.html">Constant</a> *DataVals[] = {</div>
<div class="line"><a name="l00940"></a><span class="lineno">  940</span>&#160;<span class="preprocessor">#define INSTR_PROF_DATA(Type, LLVMType, Name, Init) Init,</span></div>
<div class="line"><a name="l00941"></a><span class="lineno">  941</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="InstrProfData_8inc.html">llvm/ProfileData/InstrProfData.inc</a>&quot;</span></div>
<div class="line"><a name="l00942"></a><span class="lineno">  942</span>&#160;  };</div>
<div class="line"><a name="l00943"></a><span class="lineno">  943</span>&#160;  <span class="comment">// If the data variable is not referenced by code (if we don&#39;t emit</span></div>
<div class="line"><a name="l00944"></a><span class="lineno">  944</span>&#160;  <span class="comment">// @llvm.instrprof.value.profile, NS will be 0), and the counter keeps the</span></div>
<div class="line"><a name="l00945"></a><span class="lineno">  945</span>&#160;  <span class="comment">// data variable live under linker GC, the data variable can be private. This</span></div>
<div class="line"><a name="l00946"></a><span class="lineno">  946</span>&#160;  <span class="comment">// optimization applies to ELF.</span></div>
<div class="line"><a name="l00947"></a><span class="lineno">  947</span>&#160;  <span class="comment">//</span></div>
<div class="line"><a name="l00948"></a><span class="lineno">  948</span>&#160;  <span class="comment">// On COFF, a comdat leader cannot be local so we require DataReferencedByCode</span></div>
<div class="line"><a name="l00949"></a><span class="lineno">  949</span>&#160;  <span class="comment">// to be false.</span></div>
<div class="line"><a name="l00950"></a><span class="lineno">  950</span>&#160;  <span class="keywordflow">if</span> (NS == 0 &amp;&amp; (TT.<a class="code" href="classllvm_1_1Triple.html#aea6d215256ae43bc9149bf41f2cc7694">isOSBinFormatELF</a>() ||</div>
<div class="line"><a name="l00951"></a><span class="lineno">  951</span>&#160;                  (!DataReferencedByCode &amp;&amp; TT.<a class="code" href="classllvm_1_1Triple.html#a6300d761fd69580d711fad99b934950a">isOSBinFormatCOFF</a>()))) {</div>
<div class="line"><a name="l00952"></a><span class="lineno">  952</span>&#160;    <a class="code" href="namespacellvm_1_1jitlink.html#abee99c9c75d23a0304e5e58e3128a55f">Linkage</a> = <a class="code" href="classllvm_1_1GlobalValue.html#aedfa75f0c85c4aa85b257f066fbea57ca04ed141708c0fd16723d212502b046ae">GlobalValue::PrivateLinkage</a>;</div>
<div class="line"><a name="l00953"></a><span class="lineno">  953</span>&#160;    Visibility = <a class="code" href="classllvm_1_1GlobalValue.html#a9141f967188383108a69cc1b8ed3c195a2491e41d821f1d8fd3958ce3df2fddb2">GlobalValue::DefaultVisibility</a>;</div>
<div class="line"><a name="l00954"></a><span class="lineno">  954</span>&#160;  }</div>
<div class="line"><a name="l00955"></a><span class="lineno">  955</span>&#160;  <span class="keyword">auto</span> *<a class="code" href="namespacellvm.html#ae551fe3e2b167b36005b26473e993884a26aa2e7865f749b52f3b77991776c40d">Data</a> =</div>
<div class="line"><a name="l00956"></a><span class="lineno">  956</span>&#160;      <span class="keyword">new</span> <a class="code" href="classllvm_1_1GlobalVariable.html">GlobalVariable</a>(*M, DataTy, <span class="keyword">false</span>, <a class="code" href="namespacellvm_1_1jitlink.html#abee99c9c75d23a0304e5e58e3128a55f">Linkage</a>,</div>
<div class="line"><a name="l00957"></a><span class="lineno">  957</span>&#160;                         <a class="code" href="classllvm_1_1ConstantStruct.html#a54fcfa620deb80373f489ba2fdad7643">ConstantStruct::get</a>(DataTy, DataVals), DataVarName);</div>
<div class="line"><a name="l00958"></a><span class="lineno">  958</span>&#160;  <a class="code" href="namespacellvm.html#ae551fe3e2b167b36005b26473e993884a26aa2e7865f749b52f3b77991776c40d">Data</a>-&gt;setVisibility(Visibility);</div>
<div class="line"><a name="l00959"></a><span class="lineno">  959</span>&#160;  <a class="code" href="namespacellvm.html#ae551fe3e2b167b36005b26473e993884a26aa2e7865f749b52f3b77991776c40d">Data</a>-&gt;setSection(<a class="code" href="namespacellvm.html#a50e3b943e26ec60c2aa24a7ff43a2d17">getInstrProfSectionName</a>(IPSK_data, TT.<a class="code" href="classllvm_1_1Triple.html#a2e265a0d332c3e2db0acf0c7afd4175d">getObjectFormat</a>()));</div>
<div class="line"><a name="l00960"></a><span class="lineno">  960</span>&#160;  <a class="code" href="namespacellvm.html#ae551fe3e2b167b36005b26473e993884a26aa2e7865f749b52f3b77991776c40d">Data</a>-&gt;setAlignment(<a class="code" href="ELFObjHandler_8cpp.html#a043cdaf7b89aaeeb127be5d93411637f">Align</a>(INSTR_PROF_DATA_ALIGNMENT));</div>
<div class="line"><a name="l00961"></a><span class="lineno">  961</span>&#160;  MaybeSetComdat(<a class="code" href="namespacellvm.html#ae551fe3e2b167b36005b26473e993884a26aa2e7865f749b52f3b77991776c40d">Data</a>);</div>
<div class="line"><a name="l00962"></a><span class="lineno">  962</span>&#160;  <a class="code" href="namespacellvm.html#ae551fe3e2b167b36005b26473e993884a26aa2e7865f749b52f3b77991776c40d">Data</a>-&gt;setLinkage(<a class="code" href="namespacellvm_1_1jitlink.html#abee99c9c75d23a0304e5e58e3128a55f">Linkage</a>);</div>
<div class="line"><a name="l00963"></a><span class="lineno">  963</span>&#160; </div>
<div class="line"><a name="l00964"></a><span class="lineno">  964</span>&#160;  <a class="code" href="namespacellvm_1_1X86II.html#a15cbb72b959838d6e0f002ce58bc4bb2a8d230b4df405685c7dc1f1db718d7008">PD</a>.RegionCounters = CounterPtr;</div>
<div class="line"><a name="l00965"></a><span class="lineno">  965</span>&#160;  <a class="code" href="namespacellvm_1_1X86II.html#a15cbb72b959838d6e0f002ce58bc4bb2a8d230b4df405685c7dc1f1db718d7008">PD</a>.DataVar = <a class="code" href="namespacellvm.html#ae551fe3e2b167b36005b26473e993884a26aa2e7865f749b52f3b77991776c40d">Data</a>;</div>
<div class="line"><a name="l00966"></a><span class="lineno">  966</span>&#160;  ProfileDataMap[NamePtr] = <a class="code" href="namespacellvm_1_1X86II.html#a15cbb72b959838d6e0f002ce58bc4bb2a8d230b4df405685c7dc1f1db718d7008">PD</a>;</div>
<div class="line"><a name="l00967"></a><span class="lineno">  967</span>&#160; </div>
<div class="line"><a name="l00968"></a><span class="lineno">  968</span>&#160;  <span class="comment">// Mark the data variable as used so that it isn&#39;t stripped out.</span></div>
<div class="line"><a name="l00969"></a><span class="lineno">  969</span>&#160;  CompilerUsedVars.push_back(<a class="code" href="namespacellvm.html#ae551fe3e2b167b36005b26473e993884a26aa2e7865f749b52f3b77991776c40d">Data</a>);</div>
<div class="line"><a name="l00970"></a><span class="lineno">  970</span>&#160;  <span class="comment">// Now that the linkage set by the FE has been passed to the data and counter</span></div>
<div class="line"><a name="l00971"></a><span class="lineno">  971</span>&#160;  <span class="comment">// variables, reset Name variable&#39;s linkage and visibility to private so that</span></div>
<div class="line"><a name="l00972"></a><span class="lineno">  972</span>&#160;  <span class="comment">// it can be removed later by the compiler.</span></div>
<div class="line"><a name="l00973"></a><span class="lineno">  973</span>&#160;  NamePtr-&gt;<a class="code" href="classllvm_1_1GlobalValue.html#a687973de03d041e04b50a76d19d4fd36">setLinkage</a>(<a class="code" href="classllvm_1_1GlobalValue.html#aedfa75f0c85c4aa85b257f066fbea57ca04ed141708c0fd16723d212502b046ae">GlobalValue::PrivateLinkage</a>);</div>
<div class="line"><a name="l00974"></a><span class="lineno">  974</span>&#160;  <span class="comment">// Collect the referenced names to be used by emitNameData.</span></div>
<div class="line"><a name="l00975"></a><span class="lineno">  975</span>&#160;  ReferencedNames.push_back(NamePtr);</div>
<div class="line"><a name="l00976"></a><span class="lineno">  976</span>&#160; </div>
<div class="line"><a name="l00977"></a><span class="lineno">  977</span>&#160;  <span class="keywordflow">return</span> CounterPtr;</div>
<div class="line"><a name="l00978"></a><span class="lineno">  978</span>&#160;}</div>
<div class="line"><a name="l00979"></a><span class="lineno">  979</span>&#160; </div>
<div class="line"><a name="l00980"></a><span class="lineno">  980</span>&#160;<span class="keywordtype">void</span> InstrProfiling::emitVNodes() {</div>
<div class="line"><a name="l00981"></a><span class="lineno">  981</span>&#160;  <span class="keywordflow">if</span> (!ValueProfileStaticAlloc)</div>
<div class="line"><a name="l00982"></a><span class="lineno">  982</span>&#160;    <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l00983"></a><span class="lineno">  983</span>&#160; </div>
<div class="line"><a name="l00984"></a><span class="lineno">  984</span>&#160;  <span class="comment">// For now only support this on platforms that do</span></div>
<div class="line"><a name="l00985"></a><span class="lineno">  985</span>&#160;  <span class="comment">// not require runtime registration to discover</span></div>
<div class="line"><a name="l00986"></a><span class="lineno">  986</span>&#160;  <span class="comment">// named section start/end.</span></div>
<div class="line"><a name="l00987"></a><span class="lineno">  987</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="InstrProfiling_8cpp.html#aeea8848370a2113b69a2c4b4f4ad2473">needsRuntimeRegistrationOfSectionRange</a>(TT))</div>
<div class="line"><a name="l00988"></a><span class="lineno">  988</span>&#160;    <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l00989"></a><span class="lineno">  989</span>&#160; </div>
<div class="line"><a name="l00990"></a><span class="lineno">  990</span>&#160;  <span class="keywordtype">size_t</span> TotalNS = 0;</div>
<div class="line"><a name="l00991"></a><span class="lineno">  991</span>&#160;  <span class="keywordflow">for</span> (<span class="keyword">auto</span> &amp;<a class="code" href="namespacellvm_1_1X86II.html#a15cbb72b959838d6e0f002ce58bc4bb2a8d230b4df405685c7dc1f1db718d7008">PD</a> : ProfileDataMap) {</div>
<div class="line"><a name="l00992"></a><span class="lineno">  992</span>&#160;    <span class="keywordflow">for</span> (<a class="code" href="classuint32__t.html">uint32_t</a> <a class="code" href="namespacellvm_1_1lltok.html#af353621f14cb4b4b3af5ffaff84076b1">Kind</a> = IPVK_First; <a class="code" href="namespacellvm_1_1lltok.html#af353621f14cb4b4b3af5ffaff84076b1">Kind</a> &lt;= IPVK_Last; ++<a class="code" href="namespacellvm_1_1lltok.html#af353621f14cb4b4b3af5ffaff84076b1">Kind</a>)</div>
<div class="line"><a name="l00993"></a><span class="lineno">  993</span>&#160;      TotalNS += <a class="code" href="namespacellvm_1_1X86II.html#a15cbb72b959838d6e0f002ce58bc4bb2a8d230b4df405685c7dc1f1db718d7008">PD</a>.second.NumValueSites[<a class="code" href="namespacellvm_1_1lltok.html#af353621f14cb4b4b3af5ffaff84076b1">Kind</a>];</div>
<div class="line"><a name="l00994"></a><span class="lineno">  994</span>&#160;  }</div>
<div class="line"><a name="l00995"></a><span class="lineno">  995</span>&#160; </div>
<div class="line"><a name="l00996"></a><span class="lineno">  996</span>&#160;  <span class="keywordflow">if</span> (!TotalNS)</div>
<div class="line"><a name="l00997"></a><span class="lineno">  997</span>&#160;    <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l00998"></a><span class="lineno">  998</span>&#160; </div>
<div class="line"><a name="l00999"></a><span class="lineno">  999</span>&#160;  uint64_t NumCounters = TotalNS * NumCountersPerValueSite;</div>
<div class="line"><a name="l01000"></a><span class="lineno"> 1000</span>&#160;<span class="comment">// Heuristic for small programs with very few total value sites.</span></div>
<div class="line"><a name="l01001"></a><span class="lineno"> 1001</span>&#160;<span class="comment">// The default value of vp-counters-per-site is chosen based on</span></div>
<div class="line"><a name="l01002"></a><span class="lineno"> 1002</span>&#160;<span class="comment">// the observation that large apps usually have a low percentage</span></div>
<div class="line"><a name="l01003"></a><span class="lineno"> 1003</span>&#160;<span class="comment">// of value sites that actually have any profile data, and thus</span></div>
<div class="line"><a name="l01004"></a><span class="lineno"> 1004</span>&#160;<span class="comment">// the average number of counters per site is low. For small</span></div>
<div class="line"><a name="l01005"></a><span class="lineno"> 1005</span>&#160;<span class="comment">// apps with very few sites, this may not be true. Bump up the</span></div>
<div class="line"><a name="l01006"></a><span class="lineno"> 1006</span>&#160;<span class="comment">// number of counters in this case.</span></div>
<div class="line"><a name="l01007"></a><span class="lineno"> 1007</span>&#160;<span class="preprocessor">#define INSTR_PROF_MIN_VAL_COUNTS 10</span></div>
<div class="line"><a name="l01008"></a><span class="lineno"> 1008</span>&#160;  <span class="keywordflow">if</span> (NumCounters &lt; <a class="code" href="InstrProfiling_8cpp.html#a93e915bb608cd018593a10deb3bf386b">INSTR_PROF_MIN_VAL_COUNTS</a>)</div>
<div class="line"><a name="l01009"></a><span class="lineno"> 1009</span>&#160;    NumCounters = <a class="code" href="namespacellvm.html#a81b52e18d84e3cc61df7e897bba1b259">std::max</a>(<a class="code" href="InstrProfiling_8cpp.html#a93e915bb608cd018593a10deb3bf386b">INSTR_PROF_MIN_VAL_COUNTS</a>, (<span class="keywordtype">int</span>)NumCounters * 2);</div>
<div class="line"><a name="l01010"></a><span class="lineno"> 1010</span>&#160; </div>
<div class="line"><a name="l01011"></a><span class="lineno"> 1011</span>&#160;  <span class="keyword">auto</span> &amp;Ctx = <a class="code" href="lib_2Target_2X86_2README_8txt.html#ac88fe1d3a61b056a4f64fbbb156a62ff">M</a>-&gt;getContext();</div>
<div class="line"><a name="l01012"></a><span class="lineno"> 1012</span>&#160;  <a class="code" href="classllvm_1_1Type.html">Type</a> *VNodeTypes[] = {</div>
<div class="line"><a name="l01013"></a><span class="lineno"> 1013</span>&#160;<span class="preprocessor">#define INSTR_PROF_VALUE_NODE(Type, LLVMType, Name, Init) LLVMType,</span></div>
<div class="line"><a name="l01014"></a><span class="lineno"> 1014</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="InstrProfData_8inc.html">llvm/ProfileData/InstrProfData.inc</a>&quot;</span></div>
<div class="line"><a name="l01015"></a><span class="lineno"> 1015</span>&#160;  };</div>
<div class="line"><a name="l01016"></a><span class="lineno"> 1016</span>&#160;  <span class="keyword">auto</span> *VNodeTy = <a class="code" href="classllvm_1_1StructType.html#a18fc4545474c6ebb6f7c547f64f4fb31">StructType::get</a>(Ctx, <a class="code" href="namespacellvm.html#a0448108c43f3a226744d0a4c28c989f7">makeArrayRef</a>(VNodeTypes));</div>
<div class="line"><a name="l01017"></a><span class="lineno"> 1017</span>&#160; </div>
<div class="line"><a name="l01018"></a><span class="lineno"> 1018</span>&#160;  <a class="code" href="classllvm_1_1ArrayType.html">ArrayType</a> *VNodesTy = <a class="code" href="classllvm_1_1ArrayType.html#adf411edc4f135b570ab218079474ce77">ArrayType::get</a>(VNodeTy, NumCounters);</div>
<div class="line"><a name="l01019"></a><span class="lineno"> 1019</span>&#160;  <span class="keyword">auto</span> *VNodesVar = <span class="keyword">new</span> <a class="code" href="classllvm_1_1GlobalVariable.html">GlobalVariable</a>(</div>
<div class="line"><a name="l01020"></a><span class="lineno"> 1020</span>&#160;      *M, VNodesTy, <span class="keyword">false</span>, <a class="code" href="classllvm_1_1GlobalValue.html#aedfa75f0c85c4aa85b257f066fbea57ca04ed141708c0fd16723d212502b046ae">GlobalValue::PrivateLinkage</a>,</div>
<div class="line"><a name="l01021"></a><span class="lineno"> 1021</span>&#160;      <a class="code" href="classllvm_1_1Constant.html#aa6574d526b3e38a28f688a7bb4325c2c">Constant::getNullValue</a>(VNodesTy), <a class="code" href="namespacellvm.html#aee16f26551d92fb5f1d238ea25db5404">getInstrProfVNodesVarName</a>());</div>
<div class="line"><a name="l01022"></a><span class="lineno"> 1022</span>&#160;  VNodesVar-&gt;setSection(</div>
<div class="line"><a name="l01023"></a><span class="lineno"> 1023</span>&#160;      <a class="code" href="namespacellvm.html#a50e3b943e26ec60c2aa24a7ff43a2d17">getInstrProfSectionName</a>(IPSK_vnodes, TT.<a class="code" href="classllvm_1_1Triple.html#a2e265a0d332c3e2db0acf0c7afd4175d">getObjectFormat</a>()));</div>
<div class="line"><a name="l01024"></a><span class="lineno"> 1024</span>&#160;  <span class="comment">// VNodesVar is used by runtime but not referenced via relocation by other</span></div>
<div class="line"><a name="l01025"></a><span class="lineno"> 1025</span>&#160;  <span class="comment">// sections. Conservatively make it linker retained.</span></div>
<div class="line"><a name="l01026"></a><span class="lineno"> 1026</span>&#160;  UsedVars.push_back(VNodesVar);</div>
<div class="line"><a name="l01027"></a><span class="lineno"> 1027</span>&#160;}</div>
<div class="line"><a name="l01028"></a><span class="lineno"> 1028</span>&#160; </div>
<div class="line"><a name="l01029"></a><span class="lineno"> 1029</span>&#160;<span class="keywordtype">void</span> InstrProfiling::emitNameData() {</div>
<div class="line"><a name="l01030"></a><span class="lineno"> 1030</span>&#160;  std::string UncompressedData;</div>
<div class="line"><a name="l01031"></a><span class="lineno"> 1031</span>&#160; </div>
<div class="line"><a name="l01032"></a><span class="lineno"> 1032</span>&#160;  <span class="keywordflow">if</span> (ReferencedNames.empty())</div>
<div class="line"><a name="l01033"></a><span class="lineno"> 1033</span>&#160;    <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l01034"></a><span class="lineno"> 1034</span>&#160; </div>
<div class="line"><a name="l01035"></a><span class="lineno"> 1035</span>&#160;  std::string CompressedNameStr;</div>
<div class="line"><a name="l01036"></a><span class="lineno"> 1036</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1Error.html">Error</a> <a class="code" href="BuiltinGCs_8cpp.html#a6742d2e0a668baf1196ec69e158d5f15">E</a> = <a class="code" href="namespacellvm.html#acb335d79af5f249c5c1194f13c177a32">collectPGOFuncNameStrings</a>(ReferencedNames, CompressedNameStr,</div>
<div class="line"><a name="l01037"></a><span class="lineno"> 1037</span>&#160;                                          <a class="code" href="namespacellvm.html#afdb2ad41922139461cf6e66f3e3e4319">DoInstrProfNameCompression</a>)) {</div>
<div class="line"><a name="l01038"></a><span class="lineno"> 1038</span>&#160;    <a class="code" href="namespacellvm.html#a7f2a3d4dcfee70225988aec53ff1e173">report_fatal_error</a>(<a class="code" href="namespacellvm.html#abf268a1885585020415ba707112a5bd6">toString</a>(<a class="code" href="lib_2Target_2ARM_2README_8txt.html#ad3a99906764c35b2694ae90fa57744a5">std::move</a>(<a class="code" href="BuiltinGCs_8cpp.html#a6742d2e0a668baf1196ec69e158d5f15">E</a>)), <span class="keyword">false</span>);</div>
<div class="line"><a name="l01039"></a><span class="lineno"> 1039</span>&#160;  }</div>
<div class="line"><a name="l01040"></a><span class="lineno"> 1040</span>&#160; </div>
<div class="line"><a name="l01041"></a><span class="lineno"> 1041</span>&#160;  <span class="keyword">auto</span> &amp;Ctx = <a class="code" href="lib_2Target_2X86_2README_8txt.html#ac88fe1d3a61b056a4f64fbbb156a62ff">M</a>-&gt;getContext();</div>
<div class="line"><a name="l01042"></a><span class="lineno"> 1042</span>&#160;  <span class="keyword">auto</span> *NamesVal = <a class="code" href="classllvm_1_1ConstantDataArray.html#a3edef3fa47c611d3d10606591213e57b">ConstantDataArray::getString</a>(</div>
<div class="line"><a name="l01043"></a><span class="lineno"> 1043</span>&#160;      Ctx, <a class="code" href="classllvm_1_1StringRef.html">StringRef</a>(CompressedNameStr), <span class="keyword">false</span>);</div>
<div class="line"><a name="l01044"></a><span class="lineno"> 1044</span>&#160;  NamesVar = <span class="keyword">new</span> <a class="code" href="classllvm_1_1GlobalVariable.html">GlobalVariable</a>(*M, NamesVal-&gt;getType(), <span class="keyword">true</span>,</div>
<div class="line"><a name="l01045"></a><span class="lineno"> 1045</span>&#160;                                <a class="code" href="classllvm_1_1GlobalValue.html#aedfa75f0c85c4aa85b257f066fbea57ca04ed141708c0fd16723d212502b046ae">GlobalValue::PrivateLinkage</a>, NamesVal,</div>
<div class="line"><a name="l01046"></a><span class="lineno"> 1046</span>&#160;                                <a class="code" href="namespacellvm.html#ae8be577acee298ae6c07048e41944b88">getInstrProfNamesVarName</a>());</div>
<div class="line"><a name="l01047"></a><span class="lineno"> 1047</span>&#160;  NamesSize = CompressedNameStr.size();</div>
<div class="line"><a name="l01048"></a><span class="lineno"> 1048</span>&#160;  NamesVar-&gt;<a class="code" href="classllvm_1_1GlobalObject.html#a959c99adbdc7f8375cf866916c6b60f2">setSection</a>(</div>
<div class="line"><a name="l01049"></a><span class="lineno"> 1049</span>&#160;      <a class="code" href="namespacellvm.html#a50e3b943e26ec60c2aa24a7ff43a2d17">getInstrProfSectionName</a>(IPSK_name, TT.<a class="code" href="classllvm_1_1Triple.html#a2e265a0d332c3e2db0acf0c7afd4175d">getObjectFormat</a>()));</div>
<div class="line"><a name="l01050"></a><span class="lineno"> 1050</span>&#160;  <span class="comment">// On COFF, it&#39;s important to reduce the alignment down to 1 to prevent the</span></div>
<div class="line"><a name="l01051"></a><span class="lineno"> 1051</span>&#160;  <span class="comment">// linker from inserting padding before the start of the names section or</span></div>
<div class="line"><a name="l01052"></a><span class="lineno"> 1052</span>&#160;  <span class="comment">// between names entries.</span></div>
<div class="line"><a name="l01053"></a><span class="lineno"> 1053</span>&#160;  NamesVar-&gt;<a class="code" href="classllvm_1_1GlobalObject.html#a744c0517c37679d036cc7f381a12f60f">setAlignment</a>(<a class="code" href="ELFObjHandler_8cpp.html#a043cdaf7b89aaeeb127be5d93411637f">Align</a>(1));</div>
<div class="line"><a name="l01054"></a><span class="lineno"> 1054</span>&#160;  <span class="comment">// NamesVar is used by runtime but not referenced via relocation by other</span></div>
<div class="line"><a name="l01055"></a><span class="lineno"> 1055</span>&#160;  <span class="comment">// sections. Conservatively make it linker retained.</span></div>
<div class="line"><a name="l01056"></a><span class="lineno"> 1056</span>&#160;  UsedVars.push_back(NamesVar);</div>
<div class="line"><a name="l01057"></a><span class="lineno"> 1057</span>&#160; </div>
<div class="line"><a name="l01058"></a><span class="lineno"> 1058</span>&#160;  <span class="keywordflow">for</span> (<span class="keyword">auto</span> *NamePtr : ReferencedNames)</div>
<div class="line"><a name="l01059"></a><span class="lineno"> 1059</span>&#160;    NamePtr-&gt;<a class="code" href="classllvm_1_1GlobalVariable.html#ae0cf03d5de37330b1eb69dd22a1d5057">eraseFromParent</a>();</div>
<div class="line"><a name="l01060"></a><span class="lineno"> 1060</span>&#160;}</div>
<div class="line"><a name="l01061"></a><span class="lineno"> 1061</span>&#160; </div>
<div class="line"><a name="l01062"></a><span class="lineno"> 1062</span>&#160;<span class="keywordtype">void</span> InstrProfiling::emitRegistration() {</div>
<div class="line"><a name="l01063"></a><span class="lineno"> 1063</span>&#160;  <span class="keywordflow">if</span> (!<a class="code" href="InstrProfiling_8cpp.html#aeea8848370a2113b69a2c4b4f4ad2473">needsRuntimeRegistrationOfSectionRange</a>(TT))</div>
<div class="line"><a name="l01064"></a><span class="lineno"> 1064</span>&#160;    <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l01065"></a><span class="lineno"> 1065</span>&#160; </div>
<div class="line"><a name="l01066"></a><span class="lineno"> 1066</span>&#160;  <span class="comment">// Construct the function.</span></div>
<div class="line"><a name="l01067"></a><span class="lineno"> 1067</span>&#160;  <span class="keyword">auto</span> *VoidTy = <a class="code" href="classllvm_1_1Type.html#a6e20e76960d952de088354cbcd14c3ab">Type::getVoidTy</a>(<a class="code" href="lib_2Target_2X86_2README_8txt.html#ac88fe1d3a61b056a4f64fbbb156a62ff">M</a>-&gt;getContext());</div>
<div class="line"><a name="l01068"></a><span class="lineno"> 1068</span>&#160;  <span class="keyword">auto</span> *VoidPtrTy = <a class="code" href="classllvm_1_1Type.html#a7fe9ccd4893f4e2caa826126c09545ea">Type::getInt8PtrTy</a>(<a class="code" href="lib_2Target_2X86_2README_8txt.html#ac88fe1d3a61b056a4f64fbbb156a62ff">M</a>-&gt;getContext());</div>
<div class="line"><a name="l01069"></a><span class="lineno"> 1069</span>&#160;  <span class="keyword">auto</span> *Int64Ty = <a class="code" href="classllvm_1_1Type.html#a05186fa23e4d11b9855a9599ba87a4b7">Type::getInt64Ty</a>(<a class="code" href="lib_2Target_2X86_2README_8txt.html#ac88fe1d3a61b056a4f64fbbb156a62ff">M</a>-&gt;getContext());</div>
<div class="line"><a name="l01070"></a><span class="lineno"> 1070</span>&#160;  <span class="keyword">auto</span> *RegisterFTy = <a class="code" href="classllvm_1_1FunctionType.html#a7e89b55242c964ae61b7850e99cacef0">FunctionType::get</a>(VoidTy, <span class="keyword">false</span>);</div>
<div class="line"><a name="l01071"></a><span class="lineno"> 1071</span>&#160;  <span class="keyword">auto</span> *RegisterF = <a class="code" href="classllvm_1_1Function.html#a6adbed68009f582caa84cdfd2adf36f1">Function::Create</a>(RegisterFTy, <a class="code" href="classllvm_1_1GlobalValue.html#aedfa75f0c85c4aa85b257f066fbea57ca1511edd03e02d1f3dd277a3c6abf6ad5">GlobalValue::InternalLinkage</a>,</div>
<div class="line"><a name="l01072"></a><span class="lineno"> 1072</span>&#160;                                     <a class="code" href="namespacellvm.html#a7122dbb59beeaaf08765b4dabcb0b9d2">getInstrProfRegFuncsName</a>(), M);</div>
<div class="line"><a name="l01073"></a><span class="lineno"> 1073</span>&#160;  RegisterF-&gt;setUnnamedAddr(<a class="code" href="classllvm_1_1GlobalValue.html#ae8df4be75bfc50b1eadd74e85c25fa45a4cc6684df7b4a92b1dec6fce3264fac8">GlobalValue::UnnamedAddr::Global</a>);</div>
<div class="line"><a name="l01074"></a><span class="lineno"> 1074</span>&#160;  <span class="keywordflow">if</span> (Options.<a class="code" href="structllvm_1_1InstrProfOptions.html#a453a285abbd4055529d0113e34222fde">NoRedZone</a>)</div>
<div class="line"><a name="l01075"></a><span class="lineno"> 1075</span>&#160;    RegisterF-&gt;addFnAttr(Attribute::NoRedZone);</div>
<div class="line"><a name="l01076"></a><span class="lineno"> 1076</span>&#160; </div>
<div class="line"><a name="l01077"></a><span class="lineno"> 1077</span>&#160;  <span class="keyword">auto</span> *RuntimeRegisterTy = <a class="code" href="classllvm_1_1FunctionType.html#a7e89b55242c964ae61b7850e99cacef0">FunctionType::get</a>(VoidTy, VoidPtrTy, <span class="keyword">false</span>);</div>
<div class="line"><a name="l01078"></a><span class="lineno"> 1078</span>&#160;  <span class="keyword">auto</span> *RuntimeRegisterF =</div>
<div class="line"><a name="l01079"></a><span class="lineno"> 1079</span>&#160;      <a class="code" href="classllvm_1_1Function.html#a6adbed68009f582caa84cdfd2adf36f1">Function::Create</a>(RuntimeRegisterTy, <a class="code" href="classllvm_1_1GlobalValue.html#aedfa75f0c85c4aa85b257f066fbea57ca6c93794d7b99cd433e96c53eadb15a6e">GlobalVariable::ExternalLinkage</a>,</div>
<div class="line"><a name="l01080"></a><span class="lineno"> 1080</span>&#160;                       <a class="code" href="namespacellvm.html#acee06462d45644f09bfa298c8a862c0a">getInstrProfRegFuncName</a>(), M);</div>
<div class="line"><a name="l01081"></a><span class="lineno"> 1081</span>&#160; </div>
<div class="line"><a name="l01082"></a><span class="lineno"> 1082</span>&#160;  <a class="code" href="classllvm_1_1IRBuilder.html">IRBuilder&lt;&gt;</a> IRB(<a class="code" href="classllvm_1_1BasicBlock.html#ace940beeee97c222f836fe0ac70f6cf5">BasicBlock::Create</a>(<a class="code" href="lib_2Target_2X86_2README_8txt.html#ac88fe1d3a61b056a4f64fbbb156a62ff">M</a>-&gt;getContext(), <span class="stringliteral">&quot;&quot;</span>, RegisterF));</div>
<div class="line"><a name="l01083"></a><span class="lineno"> 1083</span>&#160;  <span class="keywordflow">for</span> (<a class="code" href="classllvm_1_1Value.html">Value</a> *<a class="code" href="namespacellvm.html#ae551fe3e2b167b36005b26473e993884a26aa2e7865f749b52f3b77991776c40d">Data</a> : CompilerUsedVars)</div>
<div class="line"><a name="l01084"></a><span class="lineno"> 1084</span>&#160;    <span class="keywordflow">if</span> (!isa&lt;Function&gt;(<a class="code" href="namespacellvm.html#ae551fe3e2b167b36005b26473e993884a26aa2e7865f749b52f3b77991776c40d">Data</a>))</div>
<div class="line"><a name="l01085"></a><span class="lineno"> 1085</span>&#160;      IRB.CreateCall(RuntimeRegisterF, IRB.CreateBitCast(<a class="code" href="namespacellvm.html#ae551fe3e2b167b36005b26473e993884a26aa2e7865f749b52f3b77991776c40d">Data</a>, VoidPtrTy));</div>
<div class="line"><a name="l01086"></a><span class="lineno"> 1086</span>&#160;  <span class="keywordflow">for</span> (<a class="code" href="classllvm_1_1Value.html">Value</a> *<a class="code" href="namespacellvm.html#ae551fe3e2b167b36005b26473e993884a26aa2e7865f749b52f3b77991776c40d">Data</a> : UsedVars)</div>
<div class="line"><a name="l01087"></a><span class="lineno"> 1087</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="namespacellvm.html#ae551fe3e2b167b36005b26473e993884a26aa2e7865f749b52f3b77991776c40d">Data</a> != NamesVar &amp;&amp; !isa&lt;Function&gt;(<a class="code" href="namespacellvm.html#ae551fe3e2b167b36005b26473e993884a26aa2e7865f749b52f3b77991776c40d">Data</a>))</div>
<div class="line"><a name="l01088"></a><span class="lineno"> 1088</span>&#160;      IRB.CreateCall(RuntimeRegisterF, IRB.CreateBitCast(<a class="code" href="namespacellvm.html#ae551fe3e2b167b36005b26473e993884a26aa2e7865f749b52f3b77991776c40d">Data</a>, VoidPtrTy));</div>
<div class="line"><a name="l01089"></a><span class="lineno"> 1089</span>&#160; </div>
<div class="line"><a name="l01090"></a><span class="lineno"> 1090</span>&#160;  <span class="keywordflow">if</span> (NamesVar) {</div>
<div class="line"><a name="l01091"></a><span class="lineno"> 1091</span>&#160;    <a class="code" href="classllvm_1_1Type.html">Type</a> *ParamTypes[] = {VoidPtrTy, Int64Ty};</div>
<div class="line"><a name="l01092"></a><span class="lineno"> 1092</span>&#160;    <span class="keyword">auto</span> *NamesRegisterTy =</div>
<div class="line"><a name="l01093"></a><span class="lineno"> 1093</span>&#160;        <a class="code" href="classllvm_1_1FunctionType.html#a7e89b55242c964ae61b7850e99cacef0">FunctionType::get</a>(VoidTy, <a class="code" href="namespacellvm.html#a0448108c43f3a226744d0a4c28c989f7">makeArrayRef</a>(ParamTypes), <span class="keyword">false</span>);</div>
<div class="line"><a name="l01094"></a><span class="lineno"> 1094</span>&#160;    <span class="keyword">auto</span> *NamesRegisterF =</div>
<div class="line"><a name="l01095"></a><span class="lineno"> 1095</span>&#160;        <a class="code" href="classllvm_1_1Function.html#a6adbed68009f582caa84cdfd2adf36f1">Function::Create</a>(NamesRegisterTy, <a class="code" href="classllvm_1_1GlobalValue.html#aedfa75f0c85c4aa85b257f066fbea57ca6c93794d7b99cd433e96c53eadb15a6e">GlobalVariable::ExternalLinkage</a>,</div>
<div class="line"><a name="l01096"></a><span class="lineno"> 1096</span>&#160;                         <a class="code" href="namespacellvm.html#aa499f913821eb51737d3022851b612d5">getInstrProfNamesRegFuncName</a>(), M);</div>
<div class="line"><a name="l01097"></a><span class="lineno"> 1097</span>&#160;    IRB.CreateCall(NamesRegisterF, {IRB.CreateBitCast(NamesVar, VoidPtrTy),</div>
<div class="line"><a name="l01098"></a><span class="lineno"> 1098</span>&#160;                                    IRB.getInt64(NamesSize)});</div>
<div class="line"><a name="l01099"></a><span class="lineno"> 1099</span>&#160;  }</div>
<div class="line"><a name="l01100"></a><span class="lineno"> 1100</span>&#160; </div>
<div class="line"><a name="l01101"></a><span class="lineno"> 1101</span>&#160;  IRB.CreateRetVoid();</div>
<div class="line"><a name="l01102"></a><span class="lineno"> 1102</span>&#160;}</div>
<div class="line"><a name="l01103"></a><span class="lineno"> 1103</span>&#160; </div>
<div class="line"><a name="l01104"></a><span class="lineno"> 1104</span>&#160;<span class="keywordtype">bool</span> InstrProfiling::emitRuntimeHook() {</div>
<div class="line"><a name="l01105"></a><span class="lineno"> 1105</span>&#160;  <span class="comment">// We expect the linker to be invoked with -u&lt;hook_var&gt; flag for Linux or</span></div>
<div class="line"><a name="l01106"></a><span class="lineno"> 1106</span>&#160;  <span class="comment">// Fuchsia, in which case there is no need to emit the user function.</span></div>
<div class="line"><a name="l01107"></a><span class="lineno"> 1107</span>&#160;  <span class="keywordflow">if</span> (TT.<a class="code" href="classllvm_1_1Triple.html#a898af817f450422b11443c35c99e64da">isOSLinux</a>() || TT.<a class="code" href="classllvm_1_1Triple.html#ae891092a64f3b737dcba557a8450587c">isOSFuchsia</a>())</div>
<div class="line"><a name="l01108"></a><span class="lineno"> 1108</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l01109"></a><span class="lineno"> 1109</span>&#160; </div>
<div class="line"><a name="l01110"></a><span class="lineno"> 1110</span>&#160;  <span class="comment">// If the module&#39;s provided its own runtime, we don&#39;t need to do anything.</span></div>
<div class="line"><a name="l01111"></a><span class="lineno"> 1111</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="lib_2Target_2X86_2README_8txt.html#ac88fe1d3a61b056a4f64fbbb156a62ff">M</a>-&gt;getGlobalVariable(<a class="code" href="namespacellvm.html#a18189242c2cc6362a03ab3d073578529">getInstrProfRuntimeHookVarName</a>()))</div>
<div class="line"><a name="l01112"></a><span class="lineno"> 1112</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l01113"></a><span class="lineno"> 1113</span>&#160; </div>
<div class="line"><a name="l01114"></a><span class="lineno"> 1114</span>&#160;  <span class="comment">// Declare an external variable that will pull in the runtime initialization.</span></div>
<div class="line"><a name="l01115"></a><span class="lineno"> 1115</span>&#160;  <span class="keyword">auto</span> *<a class="code" href="NVVMIntrRange_8cpp.html#abc8aecb5b627f6a91fc2fb09762d2a41">Int32Ty</a> = <a class="code" href="classllvm_1_1Type.html#a30dd396c5b40cd86c1591872e574ccdf">Type::getInt32Ty</a>(<a class="code" href="lib_2Target_2X86_2README_8txt.html#ac88fe1d3a61b056a4f64fbbb156a62ff">M</a>-&gt;getContext());</div>
<div class="line"><a name="l01116"></a><span class="lineno"> 1116</span>&#160;  <span class="keyword">auto</span> *Var =</div>
<div class="line"><a name="l01117"></a><span class="lineno"> 1117</span>&#160;      <span class="keyword">new</span> <a class="code" href="classllvm_1_1GlobalVariable.html">GlobalVariable</a>(*M, <a class="code" href="NVVMIntrRange_8cpp.html#abc8aecb5b627f6a91fc2fb09762d2a41">Int32Ty</a>, <span class="keyword">false</span>, <a class="code" href="classllvm_1_1GlobalValue.html#aedfa75f0c85c4aa85b257f066fbea57ca6c93794d7b99cd433e96c53eadb15a6e">GlobalValue::ExternalLinkage</a>,</div>
<div class="line"><a name="l01118"></a><span class="lineno"> 1118</span>&#160;                         <span class="keyword">nullptr</span>, <a class="code" href="namespacellvm.html#a18189242c2cc6362a03ab3d073578529">getInstrProfRuntimeHookVarName</a>());</div>
<div class="line"><a name="l01119"></a><span class="lineno"> 1119</span>&#160; </div>
<div class="line"><a name="l01120"></a><span class="lineno"> 1120</span>&#160;  <span class="comment">// Make a function that uses it.</span></div>
<div class="line"><a name="l01121"></a><span class="lineno"> 1121</span>&#160;  <span class="keyword">auto</span> *<a class="code" href="classllvm_1_1User.html">User</a> = <a class="code" href="classllvm_1_1Function.html#a6adbed68009f582caa84cdfd2adf36f1">Function::Create</a>(<a class="code" href="classllvm_1_1FunctionType.html#a7e89b55242c964ae61b7850e99cacef0">FunctionType::get</a>(<a class="code" href="NVVMIntrRange_8cpp.html#abc8aecb5b627f6a91fc2fb09762d2a41">Int32Ty</a>, <span class="keyword">false</span>),</div>
<div class="line"><a name="l01122"></a><span class="lineno"> 1122</span>&#160;                                <a class="code" href="classllvm_1_1GlobalValue.html#aedfa75f0c85c4aa85b257f066fbea57caf2b592edf18170e7aff4e8f3bae3360c">GlobalValue::LinkOnceODRLinkage</a>,</div>
<div class="line"><a name="l01123"></a><span class="lineno"> 1123</span>&#160;                                <a class="code" href="namespacellvm.html#a6b45bff5a5ff8d93f08235760de0d5c7">getInstrProfRuntimeHookVarUseFuncName</a>(), M);</div>
<div class="line"><a name="l01124"></a><span class="lineno"> 1124</span>&#160;  <a class="code" href="classllvm_1_1User.html">User</a>-&gt;addFnAttr(Attribute::NoInline);</div>
<div class="line"><a name="l01125"></a><span class="lineno"> 1125</span>&#160;  <span class="keywordflow">if</span> (Options.<a class="code" href="structllvm_1_1InstrProfOptions.html#a453a285abbd4055529d0113e34222fde">NoRedZone</a>)</div>
<div class="line"><a name="l01126"></a><span class="lineno"> 1126</span>&#160;    <a class="code" href="classllvm_1_1User.html">User</a>-&gt;addFnAttr(Attribute::NoRedZone);</div>
<div class="line"><a name="l01127"></a><span class="lineno"> 1127</span>&#160;  <a class="code" href="classllvm_1_1User.html">User</a>-&gt;setVisibility(<a class="code" href="classllvm_1_1GlobalValue.html#a9141f967188383108a69cc1b8ed3c195a7eade123587a08e674f2ca72e2443771">GlobalValue::HiddenVisibility</a>);</div>
<div class="line"><a name="l01128"></a><span class="lineno"> 1128</span>&#160;  <span class="keywordflow">if</span> (TT.<a class="code" href="classllvm_1_1Triple.html#a49a399e1ef632107f1a062a3d22f2118">supportsCOMDAT</a>())</div>
<div class="line"><a name="l01129"></a><span class="lineno"> 1129</span>&#160;    <a class="code" href="classllvm_1_1User.html">User</a>-&gt;setComdat(<a class="code" href="lib_2Target_2X86_2README_8txt.html#ac88fe1d3a61b056a4f64fbbb156a62ff">M</a>-&gt;getOrInsertComdat(<a class="code" href="classllvm_1_1User.html">User</a>-&gt;<a class="code" href="classllvm_1_1Value.html#adb5c319f5905c1d3ca9eb5df546388c5">getName</a>()));</div>
<div class="line"><a name="l01130"></a><span class="lineno"> 1130</span>&#160; </div>
<div class="line"><a name="l01131"></a><span class="lineno"> 1131</span>&#160;  <a class="code" href="classllvm_1_1IRBuilder.html">IRBuilder&lt;&gt;</a> IRB(<a class="code" href="classllvm_1_1BasicBlock.html#ace940beeee97c222f836fe0ac70f6cf5">BasicBlock::Create</a>(<a class="code" href="lib_2Target_2X86_2README_8txt.html#ac88fe1d3a61b056a4f64fbbb156a62ff">M</a>-&gt;getContext(), <span class="stringliteral">&quot;&quot;</span>, <a class="code" href="classllvm_1_1User.html">User</a>));</div>
<div class="line"><a name="l01132"></a><span class="lineno"> 1132</span>&#160;  <span class="keyword">auto</span> *<a class="code" href="namespacellvm_1_1SPII.html#a2ab8a310a4181c487902735f4758ca88a5069619ca8fdce305534f3fe85091a0f">Load</a> = IRB.CreateLoad(<a class="code" href="NVVMIntrRange_8cpp.html#abc8aecb5b627f6a91fc2fb09762d2a41">Int32Ty</a>, Var);</div>
<div class="line"><a name="l01133"></a><span class="lineno"> 1133</span>&#160;  IRB.CreateRet(<a class="code" href="namespacellvm_1_1SPII.html#a2ab8a310a4181c487902735f4758ca88a5069619ca8fdce305534f3fe85091a0f">Load</a>);</div>
<div class="line"><a name="l01134"></a><span class="lineno"> 1134</span>&#160; </div>
<div class="line"><a name="l01135"></a><span class="lineno"> 1135</span>&#160;  <span class="comment">// Mark the user variable as used so that it isn&#39;t stripped out.</span></div>
<div class="line"><a name="l01136"></a><span class="lineno"> 1136</span>&#160;  CompilerUsedVars.push_back(<a class="code" href="classllvm_1_1User.html">User</a>);</div>
<div class="line"><a name="l01137"></a><span class="lineno"> 1137</span>&#160;  <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l01138"></a><span class="lineno"> 1138</span>&#160;}</div>
<div class="line"><a name="l01139"></a><span class="lineno"> 1139</span>&#160; </div>
<div class="line"><a name="l01140"></a><span class="lineno"> 1140</span>&#160;<span class="keywordtype">void</span> InstrProfiling::emitUses() {</div>
<div class="line"><a name="l01141"></a><span class="lineno"> 1141</span>&#160;  <span class="comment">// The metadata sections are parallel arrays. Optimizers (e.g.</span></div>
<div class="line"><a name="l01142"></a><span class="lineno"> 1142</span>&#160;  <span class="comment">// GlobalOpt/ConstantMerge) may not discard associated sections as a unit, so</span></div>
<div class="line"><a name="l01143"></a><span class="lineno"> 1143</span>&#160;  <span class="comment">// we conservatively retain all unconditionally in the compiler.</span></div>
<div class="line"><a name="l01144"></a><span class="lineno"> 1144</span>&#160;  <span class="comment">//</span></div>
<div class="line"><a name="l01145"></a><span class="lineno"> 1145</span>&#160;  <span class="comment">// On ELF, the linker can guarantee the associated sections will be retained</span></div>
<div class="line"><a name="l01146"></a><span class="lineno"> 1146</span>&#160;  <span class="comment">// or discarded as a unit, so llvm.compiler.used is sufficient. Similarly on</span></div>
<div class="line"><a name="l01147"></a><span class="lineno"> 1147</span>&#160;  <span class="comment">// COFF, if prof data is not referenced by code we use one comdat and ensure</span></div>
<div class="line"><a name="l01148"></a><span class="lineno"> 1148</span>&#160;  <span class="comment">// this GC property as well. Otherwise, we have to conservatively make all of</span></div>
<div class="line"><a name="l01149"></a><span class="lineno"> 1149</span>&#160;  <span class="comment">// the sections retained by the linker.</span></div>
<div class="line"><a name="l01150"></a><span class="lineno"> 1150</span>&#160;  <span class="keywordflow">if</span> (TT.<a class="code" href="classllvm_1_1Triple.html#aea6d215256ae43bc9149bf41f2cc7694">isOSBinFormatELF</a>() ||</div>
<div class="line"><a name="l01151"></a><span class="lineno"> 1151</span>&#160;      (TT.<a class="code" href="classllvm_1_1Triple.html#a6300d761fd69580d711fad99b934950a">isOSBinFormatCOFF</a>() &amp;&amp; !<a class="code" href="InstrProfiling_8cpp.html#aea15570513f8fc01807564eb53f2d695">profDataReferencedByCode</a>(*M)))</div>
<div class="line"><a name="l01152"></a><span class="lineno"> 1152</span>&#160;    <a class="code" href="namespacellvm.html#aab730f72aa213d5ecc7d1101efda8811">appendToCompilerUsed</a>(*M, CompilerUsedVars);</div>
<div class="line"><a name="l01153"></a><span class="lineno"> 1153</span>&#160;  <span class="keywordflow">else</span></div>
<div class="line"><a name="l01154"></a><span class="lineno"> 1154</span>&#160;    <a class="code" href="namespacellvm.html#ae879dd14ccc28696f3d8c7b484df3c9a">appendToUsed</a>(*M, CompilerUsedVars);</div>
<div class="line"><a name="l01155"></a><span class="lineno"> 1155</span>&#160; </div>
<div class="line"><a name="l01156"></a><span class="lineno"> 1156</span>&#160;  <span class="comment">// We do not add proper references from used metadata sections to NamesVar and</span></div>
<div class="line"><a name="l01157"></a><span class="lineno"> 1157</span>&#160;  <span class="comment">// VNodesVar, so we have to be conservative and place them in llvm.used</span></div>
<div class="line"><a name="l01158"></a><span class="lineno"> 1158</span>&#160;  <span class="comment">// regardless of the target,</span></div>
<div class="line"><a name="l01159"></a><span class="lineno"> 1159</span>&#160;  <a class="code" href="namespacellvm.html#ae879dd14ccc28696f3d8c7b484df3c9a">appendToUsed</a>(*M, UsedVars);</div>
<div class="line"><a name="l01160"></a><span class="lineno"> 1160</span>&#160;}</div>
<div class="line"><a name="l01161"></a><span class="lineno"> 1161</span>&#160; </div>
<div class="line"><a name="l01162"></a><span class="lineno"> 1162</span>&#160;<span class="keywordtype">void</span> InstrProfiling::emitInitialization() {</div>
<div class="line"><a name="l01163"></a><span class="lineno"> 1163</span>&#160;  <span class="comment">// Create ProfileFileName variable. Don&#39;t don&#39;t this for the</span></div>
<div class="line"><a name="l01164"></a><span class="lineno"> 1164</span>&#160;  <span class="comment">// context-sensitive instrumentation lowering: This lowering is after</span></div>
<div class="line"><a name="l01165"></a><span class="lineno"> 1165</span>&#160;  <span class="comment">// LTO/ThinLTO linking. Pass PGOInstrumentationGenCreateVar should</span></div>
<div class="line"><a name="l01166"></a><span class="lineno"> 1166</span>&#160;  <span class="comment">// have already create the variable before LTO/ThinLTO linking.</span></div>
<div class="line"><a name="l01167"></a><span class="lineno"> 1167</span>&#160;  <span class="keywordflow">if</span> (!IsCS)</div>
<div class="line"><a name="l01168"></a><span class="lineno"> 1168</span>&#160;    <a class="code" href="namespacellvm.html#abd35d43ef05edd633413fa4cfa802c0e">createProfileFileNameVar</a>(*M, Options.<a class="code" href="structllvm_1_1InstrProfOptions.html#ab9246d23776e80d142b6245f1ac54761">InstrProfileOutput</a>);</div>
<div class="line"><a name="l01169"></a><span class="lineno"> 1169</span>&#160;  <a class="code" href="classllvm_1_1Function.html">Function</a> *RegisterF = <a class="code" href="lib_2Target_2X86_2README_8txt.html#ac88fe1d3a61b056a4f64fbbb156a62ff">M</a>-&gt;getFunction(<a class="code" href="namespacellvm.html#a7122dbb59beeaaf08765b4dabcb0b9d2">getInstrProfRegFuncsName</a>());</div>
<div class="line"><a name="l01170"></a><span class="lineno"> 1170</span>&#160;  <span class="keywordflow">if</span> (!RegisterF)</div>
<div class="line"><a name="l01171"></a><span class="lineno"> 1171</span>&#160;    <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l01172"></a><span class="lineno"> 1172</span>&#160; </div>
<div class="line"><a name="l01173"></a><span class="lineno"> 1173</span>&#160;  <span class="comment">// Create the initialization function.</span></div>
<div class="line"><a name="l01174"></a><span class="lineno"> 1174</span>&#160;  <span class="keyword">auto</span> *VoidTy = <a class="code" href="classllvm_1_1Type.html#a6e20e76960d952de088354cbcd14c3ab">Type::getVoidTy</a>(<a class="code" href="lib_2Target_2X86_2README_8txt.html#ac88fe1d3a61b056a4f64fbbb156a62ff">M</a>-&gt;getContext());</div>
<div class="line"><a name="l01175"></a><span class="lineno"> 1175</span>&#160;  <span class="keyword">auto</span> *<a class="code" href="MD5_8cpp.html#a96d73bbd7af15cb1fc38c3f4a3bd82e9">F</a> = <a class="code" href="classllvm_1_1Function.html#a6adbed68009f582caa84cdfd2adf36f1">Function::Create</a>(<a class="code" href="classllvm_1_1FunctionType.html#a7e89b55242c964ae61b7850e99cacef0">FunctionType::get</a>(VoidTy, <span class="keyword">false</span>),</div>
<div class="line"><a name="l01176"></a><span class="lineno"> 1176</span>&#160;                             <a class="code" href="classllvm_1_1GlobalValue.html#aedfa75f0c85c4aa85b257f066fbea57ca1511edd03e02d1f3dd277a3c6abf6ad5">GlobalValue::InternalLinkage</a>,</div>
<div class="line"><a name="l01177"></a><span class="lineno"> 1177</span>&#160;                             <a class="code" href="namespacellvm.html#a614025a994116ebcf54db743d6fa4760">getInstrProfInitFuncName</a>(), M);</div>
<div class="line"><a name="l01178"></a><span class="lineno"> 1178</span>&#160;  <a class="code" href="MD5_8cpp.html#a96d73bbd7af15cb1fc38c3f4a3bd82e9">F</a>-&gt;setUnnamedAddr(<a class="code" href="classllvm_1_1GlobalValue.html#ae8df4be75bfc50b1eadd74e85c25fa45a4cc6684df7b4a92b1dec6fce3264fac8">GlobalValue::UnnamedAddr::Global</a>);</div>
<div class="line"><a name="l01179"></a><span class="lineno"> 1179</span>&#160;  <a class="code" href="MD5_8cpp.html#a96d73bbd7af15cb1fc38c3f4a3bd82e9">F</a>-&gt;addFnAttr(Attribute::NoInline);</div>
<div class="line"><a name="l01180"></a><span class="lineno"> 1180</span>&#160;  <span class="keywordflow">if</span> (Options.<a class="code" href="structllvm_1_1InstrProfOptions.html#a453a285abbd4055529d0113e34222fde">NoRedZone</a>)</div>
<div class="line"><a name="l01181"></a><span class="lineno"> 1181</span>&#160;    <a class="code" href="MD5_8cpp.html#a96d73bbd7af15cb1fc38c3f4a3bd82e9">F</a>-&gt;addFnAttr(Attribute::NoRedZone);</div>
<div class="line"><a name="l01182"></a><span class="lineno"> 1182</span>&#160; </div>
<div class="line"><a name="l01183"></a><span class="lineno"> 1183</span>&#160;  <span class="comment">// Add the basic block and the necessary calls.</span></div>
<div class="line"><a name="l01184"></a><span class="lineno"> 1184</span>&#160;  <a class="code" href="classllvm_1_1IRBuilder.html">IRBuilder&lt;&gt;</a> IRB(<a class="code" href="classllvm_1_1BasicBlock.html#ace940beeee97c222f836fe0ac70f6cf5">BasicBlock::Create</a>(<a class="code" href="lib_2Target_2X86_2README_8txt.html#ac88fe1d3a61b056a4f64fbbb156a62ff">M</a>-&gt;getContext(), <span class="stringliteral">&quot;&quot;</span>, <a class="code" href="MD5_8cpp.html#a96d73bbd7af15cb1fc38c3f4a3bd82e9">F</a>));</div>
<div class="line"><a name="l01185"></a><span class="lineno"> 1185</span>&#160;  IRB.CreateCall(RegisterF, {});</div>
<div class="line"><a name="l01186"></a><span class="lineno"> 1186</span>&#160;  IRB.CreateRetVoid();</div>
<div class="line"><a name="l01187"></a><span class="lineno"> 1187</span>&#160; </div>
<div class="line"><a name="l01188"></a><span class="lineno"> 1188</span>&#160;  <a class="code" href="namespacellvm.html#ac030f6d03b674c2d132fd54fb60c9f26">appendToGlobalCtors</a>(*M, <a class="code" href="MD5_8cpp.html#a96d73bbd7af15cb1fc38c3f4a3bd82e9">F</a>, 0);</div>
<div class="line"><a name="l01189"></a><span class="lineno"> 1189</span>&#160;}</div>
</div><!-- fragment --></div><!-- contents -->
<div class="ttc" id="anamespacellvm_html_a80c27119469452e61e19326b15e24c2c"><div class="ttname"><a href="namespacellvm.html#a80c27119469452e61e19326b15e24c2c">llvm::createInstrProfilingLegacyPass</a></div><div class="ttdeci">ModulePass * createInstrProfilingLegacyPass(const InstrProfOptions &amp;Options=InstrProfOptions(), bool IsCS=false)</div><div class="ttdoc">Insert frontend instrumentation based profiling. Parameter IsCS indicates if.</div><div class="ttdef"><b>Definition:</b> <a href="InstrProfiling_8cpp_source.html#l00433">InstrProfiling.cpp:433</a></div></div>
<div class="ttc" id="aInstrProfiling_8cpp_html_a93e915bb608cd018593a10deb3bf386b"><div class="ttname"><a href="InstrProfiling_8cpp.html#a93e915bb608cd018593a10deb3bf386b">INSTR_PROF_MIN_VAL_COUNTS</a></div><div class="ttdeci">#define INSTR_PROF_MIN_VAL_COUNTS</div></div>
<div class="ttc" id="alib_2Target_2README_8txt_html_acb559820d9ca11295b4500f179ef6392"><div class="ttname"><a href="lib_2Target_2README_8txt.html#acb559820d9ca11295b4500f179ef6392">i</a></div><div class="ttdeci">i</div><div class="ttdef"><b>Definition:</b> <a href="lib_2Target_2README_8txt_source.html#l00029">README.txt:29</a></div></div>
<div class="ttc" id="aclassllvm_1_1PreservedAnalyses_html"><div class="ttname"><a href="classllvm_1_1PreservedAnalyses.html">llvm::PreservedAnalyses</a></div><div class="ttdoc">A set of analyses that are preserved following a run of a transformation pass.</div><div class="ttdef"><b>Definition:</b> <a href="PassManager_8h_source.html#l00155">PassManager.h:155</a></div></div>
<div class="ttc" id="aNVVMIntrRange_8cpp_html_abc8aecb5b627f6a91fc2fb09762d2a41"><div class="ttname"><a href="NVVMIntrRange_8cpp.html#abc8aecb5b627f6a91fc2fb09762d2a41">Int32Ty</a></div><div class="ttdeci">IntegerType * Int32Ty</div><div class="ttdef"><b>Definition:</b> <a href="NVVMIntrRange_8cpp_source.html#l00067">NVVMIntrRange.cpp:67</a></div></div>
<div class="ttc" id="aclassllvm_1_1GlobalVariable_html_ae0cf03d5de37330b1eb69dd22a1d5057"><div class="ttname"><a href="classllvm_1_1GlobalVariable.html#ae0cf03d5de37330b1eb69dd22a1d5057">llvm::GlobalVariable::eraseFromParent</a></div><div class="ttdeci">void eraseFromParent()</div><div class="ttdoc">eraseFromParent - This method unlinks 'this' from the containing module and deletes it.</div><div class="ttdef"><b>Definition:</b> <a href="Globals_8cpp_source.html#l00385">Globals.cpp:385</a></div></div>
<div class="ttc" id="aXRayInstrumentation_8cpp_html_a154603d920c7f291eb16bbff268a8f2a"><div class="ttname"><a href="XRayInstrumentation_8cpp.html#a154603d920c7f291eb16bbff268a8f2a">instrumentation</a></div><div class="ttdeci">xray instrumentation</div><div class="ttdef"><b>Definition:</b> <a href="XRayInstrumentation_8cpp_source.html#l00267">XRayInstrumentation.cpp:267</a></div></div>
<div class="ttc" id="anamespacellvm_html"><div class="ttname"><a href="namespacellvm.html">llvm</a></div><div class="ttdoc">--------------------- PointerInfo ------------------------------------</div><div class="ttdef"><b>Definition:</b> <a href="AllocatorList_8h_source.html#l00023">AllocatorList.h:23</a></div></div>
<div class="ttc" id="aclassllvm_1_1CallBase_html_a19263fff7f5b3a9d22b48151fa0d85d0"><div class="ttname"><a href="classllvm_1_1CallBase.html#a19263fff7f5b3a9d22b48151fa0d85d0">llvm::CallBase::getOperandBundlesAsDefs</a></div><div class="ttdeci">void getOperandBundlesAsDefs(SmallVectorImpl&lt; OperandBundleDef &gt; &amp;Defs) const</div><div class="ttdoc">Return the list of operand bundles attached to this instruction as a vector of OperandBundleDefs.</div><div class="ttdef"><b>Definition:</b> <a href="Instructions_8cpp_source.html#l00365">Instructions.cpp:365</a></div></div>
<div class="ttc" id="aclassllvm_1_1InstrProfIncrementInst_html_afe7c16bf1ea59bb69a0e02f5d80aadda"><div class="ttname"><a href="classllvm_1_1InstrProfIncrementInst.html#afe7c16bf1ea59bb69a0e02f5d80aadda">llvm::InstrProfIncrementInst::getStep</a></div><div class="ttdeci">Value * getStep() const</div><div class="ttdef"><b>Definition:</b> <a href="IntrinsicInst_8cpp_source.html#l00181">IntrinsicInst.cpp:181</a></div></div>
<div class="ttc" id="aInstrProfiling_8cpp_html_a67bc2c6586c0db4cfbfde6d7dd7cba14"><div class="ttname"><a href="InstrProfiling_8cpp.html#a67bc2c6586c0db4cfbfde6d7dd7cba14">INITIALIZE_PASS_BEGIN</a></div><div class="ttdeci">INITIALIZE_PASS_BEGIN(InstrProfilingLegacyPass, &quot;instrprof&quot;, &quot;Frontend instrumentation-based coverage lowering.&quot;, false, false) INITIALIZE_PASS_END(InstrProfilingLegacyPass</div></div>
<div class="ttc" id="alib_2Target_2X86_2README_8txt_html_ac88fe1d3a61b056a4f64fbbb156a62ff"><div class="ttname"><a href="lib_2Target_2X86_2README_8txt.html#ac88fe1d3a61b056a4f64fbbb156a62ff">M</a></div><div class="ttdeci">We currently emits eax Perhaps this is what we really should generate is Is imull three or four cycles eax eax The current instruction priority is based on pattern complexity The former is more complex because it folds a load so the latter will not be emitted Perhaps we should use AddedComplexity to give LEA32r a higher priority We should always try to match LEA first since the LEA matching code does some estimate to determine whether the match is profitable if we care more about code then imull is better It s two bytes shorter than movl leal On a Pentium M</div><div class="ttdef"><b>Definition:</b> <a href="lib_2Target_2X86_2README_8txt_source.html#l00252">README.txt:252</a></div></div>
<div class="ttc" id="anamespacellvm_1_1AArch64CC_html_abfa1f7dce576430da99eed57807c7f28ab89adee997fb2a645a2d26e1f1bdaadf"><div class="ttname"><a href="namespacellvm_1_1AArch64CC.html#abfa1f7dce576430da99eed57807c7f28ab89adee997fb2a645a2d26e1f1bdaadf">llvm::AArch64CC::AL</a></div><div class="ttdeci">@ AL</div><div class="ttdef"><b>Definition:</b> <a href="AArch64BaseInfo_8h_source.html#l00269">AArch64BaseInfo.h:269</a></div></div>
<div class="ttc" id="aclassllvm_1_1LoopBase_html_a1d9238c61483c12dce660bae4c8cc2d2"><div class="ttname"><a href="classllvm_1_1LoopBase.html#a1d9238c61483c12dce660bae4c8cc2d2">llvm::LoopBase::getExitBlocks</a></div><div class="ttdeci">void getExitBlocks(SmallVectorImpl&lt; BlockT * &gt; &amp;ExitBlocks) const</div><div class="ttdoc">Return all of the successor blocks of this loop.</div><div class="ttdef"><b>Definition:</b> <a href="LoopInfoImpl_8h_source.html#l00062">LoopInfoImpl.h:62</a></div></div>
<div class="ttc" id="aclassllvm_1_1StructType_html_a18fc4545474c6ebb6f7c547f64f4fb31"><div class="ttname"><a href="classllvm_1_1StructType.html#a18fc4545474c6ebb6f7c547f64f4fb31">llvm::StructType::get</a></div><div class="ttdeci">static StructType * get(LLVMContext &amp;Context, ArrayRef&lt; Type * &gt; Elements, bool isPacked=false)</div><div class="ttdoc">This static method is the primary way to create a literal StructType.</div><div class="ttdef"><b>Definition:</b> <a href="Type_8cpp_source.html#l00372">Type.cpp:372</a></div></div>
<div class="ttc" id="aclassllvm_1_1Type_html_a7fe9ccd4893f4e2caa826126c09545ea"><div class="ttname"><a href="classllvm_1_1Type.html#a7fe9ccd4893f4e2caa826126c09545ea">llvm::Type::getInt8PtrTy</a></div><div class="ttdeci">static PointerType * getInt8PtrTy(LLVMContext &amp;C, unsigned AS=0)</div><div class="ttdef"><b>Definition:</b> <a href="Type_8cpp_source.html#l00255">Type.cpp:255</a></div></div>
<div class="ttc" id="anamespacellvm_html_ae8be577acee298ae6c07048e41944b88"><div class="ttname"><a href="namespacellvm.html#ae8be577acee298ae6c07048e41944b88">llvm::getInstrProfNamesVarName</a></div><div class="ttdeci">StringRef getInstrProfNamesVarName()</div><div class="ttdoc">Return the name of the variable holding the strings (possibly compressed) of all function's PGO names...</div><div class="ttdef"><b>Definition:</b> <a href="InstrProf_8h_source.html#l00100">InstrProf.h:100</a></div></div>
<div class="ttc" id="aclassllvm_1_1ModulePass_html"><div class="ttname"><a href="classllvm_1_1ModulePass.html">llvm::ModulePass</a></div><div class="ttdoc">ModulePass class - This class is used to implement unstructured interprocedural optimizations and ana...</div><div class="ttdef"><b>Definition:</b> <a href="Pass_8h_source.html#l00238">Pass.h:238</a></div></div>
<div class="ttc" id="aclassllvm_1_1BasicBlock_html_a38bee869ad41aebfef3de2641b12004c"><div class="ttname"><a href="classllvm_1_1BasicBlock.html#a38bee869ad41aebfef3de2641b12004c">llvm::BasicBlock::getParent</a></div><div class="ttdeci">const Function * getParent() const</div><div class="ttdoc">Return the enclosing method, or null if none.</div><div class="ttdef"><b>Definition:</b> <a href="BasicBlock_8h_source.html#l00107">BasicBlock.h:107</a></div></div>
<div class="ttc" id="aIntrinsicInst_8h_html"><div class="ttname"><a href="IntrinsicInst_8h.html">IntrinsicInst.h</a></div></div>
<div class="ttc" id="aclassllvm_1_1AnalysisManager_html_ab9d3d5412c20747fd0110a046604f09a"><div class="ttname"><a href="classllvm_1_1AnalysisManager.html#ab9d3d5412c20747fd0110a046604f09a">llvm::AnalysisManager::getResult</a></div><div class="ttdeci">PassT::Result &amp; getResult(IRUnitT &amp;IR, ExtraArgTs... ExtraArgs)</div><div class="ttdoc">Get the result of an analysis pass for a given IR unit.</div><div class="ttdef"><b>Definition:</b> <a href="PassManager_8h_source.html#l00769">PassManager.h:769</a></div></div>
<div class="ttc" id="aclassllvm_1_1Triple_html_a6300d761fd69580d711fad99b934950a"><div class="ttname"><a href="classllvm_1_1Triple.html#a6300d761fd69580d711fad99b934950a">llvm::Triple::isOSBinFormatCOFF</a></div><div class="ttdeci">bool isOSBinFormatCOFF() const</div><div class="ttdoc">Tests whether the OS uses the COFF binary format.</div><div class="ttdef"><b>Definition:</b> <a href="Triple_8h_source.html#l00637">Triple.h:637</a></div></div>
<div class="ttc" id="anamespacellvm_1_1cl_html_afcbd4ecc474e2d218391d6d3027b086aa7861ef1db44eac8ea7a373cd7c53a7c5"><div class="ttname"><a href="namespacellvm_1_1cl.html#afcbd4ecc474e2d218391d6d3027b086aa7861ef1db44eac8ea7a373cd7c53a7c5">llvm::cl::Prefix</a></div><div class="ttdeci">@ Prefix</div><div class="ttdef"><b>Definition:</b> <a href="CommandLine_8h_source.html#l00164">CommandLine.h:164</a></div></div>
<div class="ttc" id="aclassllvm_1_1LoadAndStorePromoter_html"><div class="ttname"><a href="classllvm_1_1LoadAndStorePromoter.html">llvm::LoadAndStorePromoter</a></div><div class="ttdoc">Helper class for promoting a collection of loads and stores into SSA Form using the SSAUpdater.</div><div class="ttdef"><b>Definition:</b> <a href="SSAUpdater_8h_source.html#l00136">SSAUpdater.h:136</a></div></div>
<div class="ttc" id="aclassllvm_1_1GlobalValue_html_a3547d58a060ee2e4a29cbea85bef91af"><div class="ttname"><a href="classllvm_1_1GlobalValue.html#a3547d58a060ee2e4a29cbea85bef91af">llvm::GlobalValue::getLinkage</a></div><div class="ttdeci">LinkageTypes getLinkage() const</div><div class="ttdef"><b>Definition:</b> <a href="GlobalValue_8h_source.html#l00461">GlobalValue.h:461</a></div></div>
<div class="ttc" id="aclassllvm_1_1GlobalValue_html_a9141f967188383108a69cc1b8ed3c195a7eade123587a08e674f2ca72e2443771"><div class="ttname"><a href="classllvm_1_1GlobalValue.html#a9141f967188383108a69cc1b8ed3c195a7eade123587a08e674f2ca72e2443771">llvm::GlobalValue::HiddenVisibility</a></div><div class="ttdeci">@ HiddenVisibility</div><div class="ttdoc">The GV is hidden.</div><div class="ttdef"><b>Definition:</b> <a href="GlobalValue_8h_source.html#l00064">GlobalValue.h:64</a></div></div>
<div class="ttc" id="astructllvm_1_1InstrProfOptions_html_a3924c5cb31de4d5bd52aa9191186765f"><div class="ttname"><a href="structllvm_1_1InstrProfOptions.html#a3924c5cb31de4d5bd52aa9191186765f">llvm::InstrProfOptions::UseBFIInPromotion</a></div><div class="ttdeci">bool UseBFIInPromotion</div><div class="ttdef"><b>Definition:</b> <a href="Instrumentation_8h_source.html#l00132">Instrumentation.h:132</a></div></div>
<div class="ttc" id="aclassllvm_1_1Function_html"><div class="ttname"><a href="classllvm_1_1Function.html">llvm::Function</a></div><div class="ttdef"><b>Definition:</b> <a href="Function_8h_source.html#l00061">Function.h:62</a></div></div>
<div class="ttc" id="aclassllvm_1_1Loop_html"><div class="ttname"><a href="classllvm_1_1Loop.html">llvm::Loop</a></div><div class="ttdoc">Represents a single loop in the control flow graph.</div><div class="ttdef"><b>Definition:</b> <a href="LoopInfo_8h_source.html#l00530">LoopInfo.h:530</a></div></div>
<div class="ttc" id="aStringRef_8h_html"><div class="ttname"><a href="StringRef_8h.html">StringRef.h</a></div></div>
<div class="ttc" id="aclassllvm_1_1ConstantStruct_html_a54fcfa620deb80373f489ba2fdad7643"><div class="ttname"><a href="classllvm_1_1ConstantStruct.html#a54fcfa620deb80373f489ba2fdad7643">llvm::ConstantStruct::get</a></div><div class="ttdeci">static Constant * get(StructType *T, ArrayRef&lt; Constant * &gt; V)</div><div class="ttdef"><b>Definition:</b> <a href="Constants_8cpp_source.html#l01328">Constants.cpp:1328</a></div></div>
<div class="ttc" id="anamespacellvm_1_1NVPTX_html_ae1895e876155cbfcaf03955b78ff4a0e"><div class="ttname"><a href="namespacellvm_1_1NVPTX.html#ae1895e876155cbfcaf03955b78ff4a0e">llvm::NVPTX::LoadStore</a></div><div class="ttdeci">LoadStore</div><div class="ttdef"><b>Definition:</b> <a href="NVPTX_8h_source.html#l00099">NVPTX.h:99</a></div></div>
<div class="ttc" id="aPass_8h_html"><div class="ttname"><a href="Pass_8h.html">Pass.h</a></div></div>
<div class="ttc" id="aHexagonHardwareLoops_8cpp_html_ada7c1594a393ede3ce32602d64d7ddb2"><div class="ttname"><a href="HexagonHardwareLoops_8cpp.html#ada7c1594a393ede3ce32602d64d7ddb2">Loops</a></div><div class="ttdeci">Hexagon Hardware Loops</div><div class="ttdef"><b>Definition:</b> <a href="HexagonHardwareLoops_8cpp_source.html#l00372">HexagonHardwareLoops.cpp:372</a></div></div>
<div class="ttc" id="anamespacellvm_html_ab76756b8d32dc1d4e0e9c96b2d396307"><div class="ttname"><a href="namespacellvm.html#ab76756b8d32dc1d4e0e9c96b2d396307">llvm::needsComdatForCounter</a></div><div class="ttdeci">bool needsComdatForCounter(const Function &amp;F, const Module &amp;M)</div><div class="ttdoc">Check if we can use Comdat for profile variables.</div><div class="ttdef"><b>Definition:</b> <a href="InstrProf_8cpp_source.html#l01072">InstrProf.cpp:1072</a></div></div>
<div class="ttc" id="anamespacellvm_html_abf268a1885585020415ba707112a5bd6"><div class="ttname"><a href="namespacellvm.html#abf268a1885585020415ba707112a5bd6">llvm::toString</a></div><div class="ttdeci">std::string toString(Error E)</div><div class="ttdoc">Write all error messages (if any) in E to a string.</div><div class="ttdef"><b>Definition:</b> <a href="llvm_2Support_2Error_8h_source.html#l01024">Error.h:1024</a></div></div>
<div class="ttc" id="aclassllvm_1_1Comdat_html_ab40cbf8243fad70968f9ecf82f48a035ab2d0d4bc9ba11b7324f5ffc20a9dc37a"><div class="ttname"><a href="classllvm_1_1Comdat.html#ab40cbf8243fad70968f9ecf82f48a035ab2d0d4bc9ba11b7324f5ffc20a9dc37a">llvm::Comdat::NoDeduplicate</a></div><div class="ttdeci">@ NoDeduplicate</div><div class="ttdoc">No deduplication is performed.</div><div class="ttdef"><b>Definition:</b> <a href="llvm_2IR_2Comdat_8h_source.html#l00037">Comdat.h:37</a></div></div>
<div class="ttc" id="aclassllvm_1_1SmallVector_html"><div class="ttname"><a href="classllvm_1_1SmallVector.html">llvm::SmallVector</a></div><div class="ttdoc">This is a 'vector' (really, a variable-sized array), optimized for the case when the array is small.</div><div class="ttdef"><b>Definition:</b> <a href="SmallVector_8h_source.html#l01168">SmallVector.h:1169</a></div></div>
<div class="ttc" id="aclassllvm_1_1Function_html_ae6a4da5f41fc6a36735cc1704c01ce60"><div class="ttname"><a href="classllvm_1_1Function.html#ae6a4da5f41fc6a36735cc1704c01ce60">llvm::Function::getEntryBlock</a></div><div class="ttdeci">const BasicBlock &amp; getEntryBlock() const</div><div class="ttdef"><b>Definition:</b> <a href="Function_8h_source.html#l00763">Function.h:763</a></div></div>
<div class="ttc" id="anamespacellvm_1_1Intrinsic_html_a7157f9fa9dd11f234ec3c58517cb6d96"><div class="ttname"><a href="namespacellvm_1_1Intrinsic.html#a7157f9fa9dd11f234ec3c58517cb6d96">llvm::Intrinsic::getName</a></div><div class="ttdeci">StringRef getName(ID id)</div><div class="ttdoc">Return the LLVM name for an intrinsic, such as &quot;llvm.ppc.altivec.lvx&quot;.</div><div class="ttdef"><b>Definition:</b> <a href="Function_8cpp_source.html#l00836">Function.cpp:836</a></div></div>
<div class="ttc" id="aclassllvm_1_1IRBuilder_html"><div class="ttname"><a href="classllvm_1_1IRBuilder.html">llvm::IRBuilder&lt;&gt;</a></div></div>
<div class="ttc" id="aclassllvm_1_1GlobalVariable_html"><div class="ttname"><a href="classllvm_1_1GlobalVariable.html">llvm::GlobalVariable</a></div><div class="ttdef"><b>Definition:</b> <a href="GlobalVariable_8h_source.html#l00040">GlobalVariable.h:40</a></div></div>
<div class="ttc" id="aclassllvm_1_1ConstantExpr_html_ae79d05dd3d0b05e080e08f8c5c33f880"><div class="ttname"><a href="classllvm_1_1ConstantExpr.html#ae79d05dd3d0b05e080e08f8c5c33f880">llvm::ConstantExpr::getBitCast</a></div><div class="ttdeci">static Constant * getBitCast(Constant *C, Type *Ty, bool OnlyIfReduced=false)</div><div class="ttdef"><b>Definition:</b> <a href="Constants_8cpp_source.html#l02223">Constants.cpp:2223</a></div></div>
<div class="ttc" id="aclassllvm_1_1FunctionType_html_a7e89b55242c964ae61b7850e99cacef0"><div class="ttname"><a href="classllvm_1_1FunctionType.html#a7e89b55242c964ae61b7850e99cacef0">llvm::FunctionType::get</a></div><div class="ttdeci">static FunctionType * get(Type *Result, ArrayRef&lt; Type * &gt; Params, bool isVarArg)</div><div class="ttdoc">This static method is the primary way of constructing a FunctionType.</div><div class="ttdef"><b>Definition:</b> <a href="Type_8cpp_source.html#l00327">Type.cpp:327</a></div></div>
<div class="ttc" id="aclassllvm_1_1DominatorTree_html"><div class="ttname"><a href="classllvm_1_1DominatorTree.html">llvm::DominatorTree</a></div><div class="ttdoc">Concrete subclass of DominatorTreeBase that is used to compute a normal dominator tree.</div><div class="ttdef"><b>Definition:</b> <a href="Dominators_8h_source.html#l00151">Dominators.h:151</a></div></div>
<div class="ttc" id="aclassllvm_1_1Triple_html"><div class="ttname"><a href="classllvm_1_1Triple.html">llvm::Triple</a></div><div class="ttdoc">Triple - Helper class for working with autoconf configuration names.</div><div class="ttdef"><b>Definition:</b> <a href="Triple_8h_source.html#l00045">Triple.h:45</a></div></div>
<div class="ttc" id="aPassBuilderBindings_8cpp_html_a83c7e5ca51099e4efa895791a02fb0ed"><div class="ttname"><a href="PassBuilderBindings_8cpp.html#a83c7e5ca51099e4efa895791a02fb0ed">FAM</a></div><div class="ttdeci">FunctionAnalysisManager FAM</div><div class="ttdef"><b>Definition:</b> <a href="PassBuilderBindings_8cpp_source.html#l00059">PassBuilderBindings.cpp:59</a></div></div>
<div class="ttc" id="anamespacellvm_html_a18189242c2cc6362a03ab3d073578529"><div class="ttname"><a href="namespacellvm.html#a18189242c2cc6362a03ab3d073578529">llvm::getInstrProfRuntimeHookVarName</a></div><div class="ttdeci">StringRef getInstrProfRuntimeHookVarName()</div><div class="ttdoc">Return the name of the hook variable defined in profile runtime library.</div><div class="ttdef"><b>Definition:</b> <a href="InstrProf_8h_source.html#l00148">InstrProf.h:148</a></div></div>
<div class="ttc" id="astructllvm_1_1MemOp_html"><div class="ttname"><a href="structllvm_1_1MemOp.html">llvm::MemOp</a></div><div class="ttdef"><b>Definition:</b> <a href="TargetLowering_8h_source.html#l00111">TargetLowering.h:111</a></div></div>
<div class="ttc" id="aDFAPacketizer_8cpp_html_acc16edf21eddec420cd4b27adb3111c6"><div class="ttname"><a href="DFAPacketizer_8cpp.html#acc16edf21eddec420cd4b27adb3111c6">InstrCount</a></div><div class="ttdeci">static unsigned InstrCount</div><div class="ttdef"><b>Definition:</b> <a href="DFAPacketizer_8cpp_source.html#l00053">DFAPacketizer.cpp:53</a></div></div>
<div class="ttc" id="aclassllvm_1_1PreservedAnalyses_html_a03797a73044a81cbc6a3409d6c72ee8f"><div class="ttname"><a href="classllvm_1_1PreservedAnalyses.html#a03797a73044a81cbc6a3409d6c72ee8f">llvm::PreservedAnalyses::none</a></div><div class="ttdeci">static PreservedAnalyses none()</div><div class="ttdoc">Convenience factory function for the empty preserved set.</div><div class="ttdef"><b>Definition:</b> <a href="PassManager_8h_source.html#l00158">PassManager.h:158</a></div></div>
<div class="ttc" id="aclassllvm_1_1Type_html"><div class="ttname"><a href="classllvm_1_1Type.html">llvm::Type</a></div><div class="ttdoc">The instances of the Type class are immutable: once they are created, they are never changed.</div><div class="ttdef"><b>Definition:</b> <a href="Type_8h_source.html#l00045">Type.h:45</a></div></div>
<div class="ttc" id="aInstrProfiling_8cpp_html_a3ca28a37cc6f2fdfc1a57471623dd411"><div class="ttname"><a href="InstrProfiling_8cpp.html#a3ca28a37cc6f2fdfc1a57471623dd411">containsProfilingIntrinsics</a></div><div class="ttdeci">static bool containsProfilingIntrinsics(Module &amp;M)</div><div class="ttdoc">Check if the module contains uses of any profiling intrinsics.</div><div class="ttdef"><b>Definition:</b> <a href="InstrProfiling_8cpp_source.html#l00524">InstrProfiling.cpp:524</a></div></div>
<div class="ttc" id="aModule_8h_html"><div class="ttname"><a href="Module_8h.html">Module.h</a></div><div class="ttdoc">Module.h This file contains the declarations for the Module class.</div></div>
<div class="ttc" id="anamespacellvm_html_a469101ea87b8b432a1b4f7935c97f35c"><div class="ttname"><a href="namespacellvm.html#a469101ea87b8b432a1b4f7935c97f35c">llvm::reverse</a></div><div class="ttdeci">auto reverse(ContainerTy &amp;&amp;C, std::enable_if_t&lt; has_rbegin&lt; ContainerTy &gt;::value &gt; *=nullptr)</div><div class="ttdef"><b>Definition:</b> <a href="STLExtras_8h_source.html#l00329">STLExtras.h:329</a></div></div>
<div class="ttc" id="aclassllvm_1_1AttributeList_html"><div class="ttname"><a href="classllvm_1_1AttributeList.html">llvm::AttributeList</a></div><div class="ttdef"><b>Definition:</b> <a href="Attributes_8h_source.html#l00398">Attributes.h:398</a></div></div>
<div class="ttc" id="aclassllvm_1_1TargetLibraryInfo_html_af091deb7d771e1462ad4f69354d45d0a"><div class="ttname"><a href="classllvm_1_1TargetLibraryInfo.html#af091deb7d771e1462ad4f69354d45d0a">llvm::TargetLibraryInfo::getExtAttrForI32Param</a></div><div class="ttdeci">Attribute::AttrKind getExtAttrForI32Param(bool Signed=true) const</div><div class="ttdoc">Returns extension attribute kind to be used for i32 parameters corresponding to C-level int or unsign...</div><div class="ttdef"><b>Definition:</b> <a href="TargetLibraryInfo_8h_source.html#l00382">TargetLibraryInfo.h:382</a></div></div>
<div class="ttc" id="astructllvm_1_1InstrProfOptions_html_a599d8f0899e3ea8da9d84cae20c82164"><div class="ttname"><a href="structllvm_1_1InstrProfOptions.html#a599d8f0899e3ea8da9d84cae20c82164">llvm::InstrProfOptions::Atomic</a></div><div class="ttdeci">bool Atomic</div><div class="ttdef"><b>Definition:</b> <a href="Instrumentation_8h_source.html#l00129">Instrumentation.h:129</a></div></div>
<div class="ttc" id="anamespacellvm_html_aa499f913821eb51737d3022851b612d5"><div class="ttname"><a href="namespacellvm.html#aa499f913821eb51737d3022851b612d5">llvm::getInstrProfNamesRegFuncName</a></div><div class="ttdeci">StringRef getInstrProfNamesRegFuncName()</div><div class="ttdoc">Return the name of the runtime interface that registers the PGO name strings.</div><div class="ttdef"><b>Definition:</b> <a href="InstrProf_8h_source.html#l00135">InstrProf.h:135</a></div></div>
<div class="ttc" id="aclassllvm_1_1GlobalValue_html_ae8df4be75bfc50b1eadd74e85c25fa45a4cc6684df7b4a92b1dec6fce3264fac8"><div class="ttname"><a href="classllvm_1_1GlobalValue.html#ae8df4be75bfc50b1eadd74e85c25fa45a4cc6684df7b4a92b1dec6fce3264fac8">llvm::GlobalValue::UnnamedAddr::Global</a></div><div class="ttdeci">@ Global</div></div>
<div class="ttc" id="aclassllvm_1_1GlobalValue_html_a9141f967188383108a69cc1b8ed3c195a2491e41d821f1d8fd3958ce3df2fddb2"><div class="ttname"><a href="classllvm_1_1GlobalValue.html#a9141f967188383108a69cc1b8ed3c195a2491e41d821f1d8fd3958ce3df2fddb2">llvm::GlobalValue::DefaultVisibility</a></div><div class="ttdeci">@ DefaultVisibility</div><div class="ttdoc">The GV is visible.</div><div class="ttdef"><b>Definition:</b> <a href="GlobalValue_8h_source.html#l00063">GlobalValue.h:63</a></div></div>
<div class="ttc" id="aclassllvm_1_1SmallPtrSet_html"><div class="ttname"><a href="classllvm_1_1SmallPtrSet.html">llvm::SmallPtrSet</a></div><div class="ttdoc">SmallPtrSet - This class implements a set which is optimized for holding SmallSize or less elements.</div><div class="ttdef"><b>Definition:</b> <a href="SmallPtrSet_8h_source.html#l00449">SmallPtrSet.h:449</a></div></div>
<div class="ttc" id="aclassllvm_1_1Triple_html_a898af817f450422b11443c35c99e64da"><div class="ttname"><a href="classllvm_1_1Triple.html#a898af817f450422b11443c35c99e64da">llvm::Triple::isOSLinux</a></div><div class="ttdeci">bool isOSLinux() const</div><div class="ttdoc">Tests whether the OS is Linux.</div><div class="ttdef"><b>Definition:</b> <a href="Triple_8h_source.html#l00595">Triple.h:595</a></div></div>
<div class="ttc" id="aclassllvm_1_1GlobalValue_html_aedfa75f0c85c4aa85b257f066fbea57c"><div class="ttname"><a href="classllvm_1_1GlobalValue.html#aedfa75f0c85c4aa85b257f066fbea57c">llvm::GlobalValue::LinkageTypes</a></div><div class="ttdeci">LinkageTypes</div><div class="ttdoc">An enumeration for the kinds of linkage for global values.</div><div class="ttdef"><b>Definition:</b> <a href="GlobalValue_8h_source.html#l00047">GlobalValue.h:47</a></div></div>
<div class="ttc" id="aclassllvm_1_1ArrayType_html"><div class="ttname"><a href="classllvm_1_1ArrayType.html">llvm::ArrayType</a></div><div class="ttdoc">Class to represent array types.</div><div class="ttdef"><b>Definition:</b> <a href="DerivedTypes_8h_source.html#l00356">DerivedTypes.h:356</a></div></div>
<div class="ttc" id="anamespacellvm_html_abd35d43ef05edd633413fa4cfa802c0e"><div class="ttname"><a href="namespacellvm.html#abd35d43ef05edd633413fa4cfa802c0e">llvm::createProfileFileNameVar</a></div><div class="ttdeci">void createProfileFileNameVar(Module &amp;M, StringRef InstrProfileOutput)</div><div class="ttdef"><b>Definition:</b> <a href="InstrProf_8cpp_source.html#l01161">InstrProf.cpp:1161</a></div></div>
<div class="ttc" id="aclassllvm_1_1Triple_html_a0633689ffd7c2b293bf95fb2f0e14f4f"><div class="ttname"><a href="classllvm_1_1Triple.html#a0633689ffd7c2b293bf95fb2f0e14f4f">llvm::Triple::isPS4CPU</a></div><div class="ttdeci">bool isPS4CPU() const</div><div class="ttdoc">Tests whether the target is the PS4 CPU.</div><div class="ttdef"><b>Definition:</b> <a href="Triple_8h_source.html#l00660">Triple.h:660</a></div></div>
<div class="ttc" id="anamespacellvm_html_ae551fe3e2b167b36005b26473e993884a26aa2e7865f749b52f3b77991776c40d"><div class="ttname"><a href="namespacellvm.html#ae551fe3e2b167b36005b26473e993884a26aa2e7865f749b52f3b77991776c40d">llvm::Data</a></div><div class="ttdeci">@ Data</div><div class="ttdef"><b>Definition:</b> <a href="SIMachineScheduler_8h_source.html#l00057">SIMachineScheduler.h:56</a></div></div>
<div class="ttc" id="aclassllvm_1_1Type_html_a30dd396c5b40cd86c1591872e574ccdf"><div class="ttname"><a href="classllvm_1_1Type.html#a30dd396c5b40cd86c1591872e574ccdf">llvm::Type::getInt32Ty</a></div><div class="ttdeci">static IntegerType * getInt32Ty(LLVMContext &amp;C)</div><div class="ttdef"><b>Definition:</b> <a href="Type_8cpp_source.html#l00203">Type.cpp:203</a></div></div>
<div class="ttc" id="aDebug_8h_html_a08efc68d15935eb8889400a46c3749ba"><div class="ttname"><a href="Debug_8h.html#a08efc68d15935eb8889400a46c3749ba">LLVM_DEBUG</a></div><div class="ttdeci">#define LLVM_DEBUG(X)</div><div class="ttdef"><b>Definition:</b> <a href="Debug_8h_source.html#l00122">Debug.h:122</a></div></div>
<div class="ttc" id="aclassllvm_1_1InstrProfiling_html"><div class="ttname"><a href="classllvm_1_1InstrProfiling.html">llvm::InstrProfiling</a></div><div class="ttdoc">Instrumentation based profiling lowering pass.</div><div class="ttdef"><b>Definition:</b> <a href="InstrProfiling_8h_source.html#l00035">InstrProfiling.h:35</a></div></div>
<div class="ttc" id="aMD5_8cpp_html_a96d73bbd7af15cb1fc38c3f4a3bd82e9"><div class="ttname"><a href="MD5_8cpp.html#a96d73bbd7af15cb1fc38c3f4a3bd82e9">F</a></div><div class="ttdeci">#define F(x, y, z)</div><div class="ttdef"><b>Definition:</b> <a href="MD5_8cpp_source.html#l00056">MD5.cpp:56</a></div></div>
<div class="ttc" id="aInstrProfData_8inc_html"><div class="ttname"><a href="InstrProfData_8inc.html">InstrProfData.inc</a></div></div>
<div class="ttc" id="aInstrProfiling_8cpp_html_adab9dec19dd536fe15a56e7f17e1ab33"><div class="ttname"><a href="InstrProfiling_8cpp.html#adab9dec19dd536fe15a56e7f17e1ab33">getIntModuleFlagOrZero</a></div><div class="ttdeci">static uint64_t getIntModuleFlagOrZero(const Module &amp;M, StringRef Flag)</div><div class="ttdef"><b>Definition:</b> <a href="InstrProfiling_8cpp_source.html#l00765">InstrProfiling.cpp:765</a></div></div>
<div class="ttc" id="aclassllvm_1_1BasicBlock_html"><div class="ttname"><a href="classllvm_1_1BasicBlock.html">llvm::BasicBlock</a></div><div class="ttdoc">LLVM Basic Block Representation.</div><div class="ttdef"><b>Definition:</b> <a href="BasicBlock_8h_source.html#l00058">BasicBlock.h:59</a></div></div>
<div class="ttc" id="aclassllvm_1_1InstrProfValueProfileInst_html_a762382cbbd22a9b9d4d0f116ae674529"><div class="ttname"><a href="classllvm_1_1InstrProfValueProfileInst.html#a762382cbbd22a9b9d4d0f116ae674529">llvm::InstrProfValueProfileInst::getValueKind</a></div><div class="ttdeci">ConstantInt * getValueKind() const</div><div class="ttdef"><b>Definition:</b> <a href="IntrinsicInst_8h_source.html#l01168">IntrinsicInst.h:1168</a></div></div>
<div class="ttc" id="anamespacellvm_html_a7c46c742c31be54870e2038048e6b391"><div class="ttname"><a href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">llvm::dbgs</a></div><div class="ttdeci">raw_ostream &amp; dbgs()</div><div class="ttdoc">dbgs() - This returns a reference to a raw_ostream for debugging messages.</div><div class="ttdef"><b>Definition:</b> <a href="Debug_8cpp_source.html#l00163">Debug.cpp:163</a></div></div>
<div class="ttc" id="aclassllvm_1_1StringRef_html_a9a453439ca990fd1ae7ab9ed728d23f8"><div class="ttname"><a href="classllvm_1_1StringRef.html#a9a453439ca990fd1ae7ab9ed728d23f8">llvm::StringRef::substr</a></div><div class="ttdeci">LLVM_NODISCARD StringRef substr(size_t Start, size_t N=npos) const</div><div class="ttdoc">Return a reference to the substring from [Start, Start + N).</div><div class="ttdef"><b>Definition:</b> <a href="StringRef_8h_source.html#l00611">StringRef.h:611</a></div></div>
<div class="ttc" id="aclassllvm_1_1ConstantPointerNull_html"><div class="ttname"><a href="classllvm_1_1ConstantPointerNull.html">llvm::ConstantPointerNull</a></div><div class="ttdoc">A constant pointer value that points to null.</div><div class="ttdef"><b>Definition:</b> <a href="Constants_8h_source.html#l00534">Constants.h:534</a></div></div>
<div class="ttc" id="aIR_2Instruction_8h_html"><div class="ttname"><a href="IR_2Instruction_8h.html">Instruction.h</a></div></div>
<div class="ttc" id="aCommandLine_8h_html"><div class="ttname"><a href="CommandLine_8h.html">CommandLine.h</a></div></div>
<div class="ttc" id="anamespacellvm_1_1AMDGPU_1_1HSAMD_html_a85803b71729d5d098ca2099f23cbf72e"><div class="ttname"><a href="namespacellvm_1_1AMDGPU_1_1HSAMD.html#a85803b71729d5d098ca2099f23cbf72e">llvm::AMDGPU::HSAMD::ValueKind</a></div><div class="ttdeci">ValueKind</div><div class="ttdoc">Value kinds.</div><div class="ttdef"><b>Definition:</b> <a href="AMDGPUMetadata_8h_source.html#l00073">AMDGPUMetadata.h:73</a></div></div>
<div class="ttc" id="aclassllvm_1_1BlockFrequencyInfo_html"><div class="ttname"><a href="classllvm_1_1BlockFrequencyInfo.html">llvm::BlockFrequencyInfo</a></div><div class="ttdoc">BlockFrequencyInfo pass uses BlockFrequencyInfoImpl implementation to estimate IR basic block frequen...</div><div class="ttdef"><b>Definition:</b> <a href="BlockFrequencyInfo_8h_source.html#l00037">BlockFrequencyInfo.h:37</a></div></div>
<div class="ttc" id="aclassllvm_1_1Triple_html_aea6d215256ae43bc9149bf41f2cc7694"><div class="ttname"><a href="classllvm_1_1Triple.html#aea6d215256ae43bc9149bf41f2cc7694">llvm::Triple::isOSBinFormatELF</a></div><div class="ttdeci">bool isOSBinFormatELF() const</div><div class="ttdoc">Tests whether the OS uses the ELF binary format.</div><div class="ttdef"><b>Definition:</b> <a href="Triple_8h_source.html#l00632">Triple.h:632</a></div></div>
<div class="ttc" id="aGlobalValue_8h_html"><div class="ttname"><a href="GlobalValue_8h.html">GlobalValue.h</a></div></div>
<div class="ttc" id="anamespacellvm_1_1SPII_html_a2ab8a310a4181c487902735f4758ca88a5069619ca8fdce305534f3fe85091a0f"><div class="ttname"><a href="namespacellvm_1_1SPII.html#a2ab8a310a4181c487902735f4758ca88a5069619ca8fdce305534f3fe85091a0f">llvm::SPII::Load</a></div><div class="ttdeci">@ Load</div><div class="ttdef"><b>Definition:</b> <a href="SparcInstrInfo_8h_source.html#l00032">SparcInstrInfo.h:32</a></div></div>
<div class="ttc" id="aclassllvm_1_1PassRegistry_html_a05a729900b76c89e808c6c3094921b2f"><div class="ttname"><a href="classllvm_1_1PassRegistry.html#a05a729900b76c89e808c6c3094921b2f">llvm::PassRegistry::getPassRegistry</a></div><div class="ttdeci">static PassRegistry * getPassRegistry()</div><div class="ttdoc">getPassRegistry - Access the global registry object, which is automatically initialized at applicatio...</div><div class="ttdef"><b>Definition:</b> <a href="PassRegistry_8cpp_source.html#l00031">PassRegistry.cpp:31</a></div></div>
<div class="ttc" id="aclassllvm_1_1GlobalValue_html_a9141f967188383108a69cc1b8ed3c195"><div class="ttname"><a href="classllvm_1_1GlobalValue.html#a9141f967188383108a69cc1b8ed3c195">llvm::GlobalValue::VisibilityTypes</a></div><div class="ttdeci">VisibilityTypes</div><div class="ttdoc">An enumeration for the kinds of visibility of global values.</div><div class="ttdef"><b>Definition:</b> <a href="GlobalValue_8h_source.html#l00062">GlobalValue.h:62</a></div></div>
<div class="ttc" id="aConstants_8h_html"><div class="ttname"><a href="Constants_8h.html">Constants.h</a></div><div class="ttdoc">This file contains the declarations for the subclasses of Constant, which represent the different fla...</div></div>
<div class="ttc" id="aInstrProfiling_8h_html"><div class="ttname"><a href="InstrProfiling_8h.html">InstrProfiling.h</a></div><div class="ttdoc">This file provides the interface for LLVM's PGO Instrumentation lowering pass.</div></div>
<div class="ttc" id="aBuiltinGCs_8cpp_html_a6742d2e0a668baf1196ec69e158d5f15"><div class="ttname"><a href="BuiltinGCs_8cpp.html#a6742d2e0a668baf1196ec69e158d5f15">E</a></div><div class="ttdeci">static GCRegistry::Add&lt; CoreCLRGC &gt; E(&quot;coreclr&quot;, &quot;CoreCLR-compatible GC&quot;)</div></div>
<div class="ttc" id="anamespacellvm_html_a61b849e48600c5db3a1b714f659990be"><div class="ttname"><a href="namespacellvm.html#a61b849e48600c5db3a1b714f659990be">llvm::getInstrProfValuesVarPrefix</a></div><div class="ttdeci">StringRef getInstrProfValuesVarPrefix()</div><div class="ttdoc">Return the name prefix of value profile variables.</div><div class="ttdef"><b>Definition:</b> <a href="InstrProf_8h_source.html#l00093">InstrProf.h:93</a></div></div>
<div class="ttc" id="aclassllvm_1_1Triple_html_ab6fdf9b428bc3d57837022121c155cbf"><div class="ttname"><a href="classllvm_1_1Triple.html#ab6fdf9b428bc3d57837022121c155cbf">llvm::Triple::isOSDarwin</a></div><div class="ttdeci">bool isOSDarwin() const</div><div class="ttdoc">isOSDarwin - Is this a &quot;Darwin&quot; OS (macOS, iOS, tvOS or watchOS).</div><div class="ttdef"><b>Definition:</b> <a href="Triple_8h_source.html#l00484">Triple.h:484</a></div></div>
<div class="ttc" id="aclassllvm_1_1GlobalObject_html_a959c99adbdc7f8375cf866916c6b60f2"><div class="ttname"><a href="classllvm_1_1GlobalObject.html#a959c99adbdc7f8375cf866916c6b60f2">llvm::GlobalObject::setSection</a></div><div class="ttdeci">void setSection(StringRef S)</div><div class="ttdoc">Change the section for this global.</div><div class="ttdef"><b>Definition:</b> <a href="Globals_8cpp_source.html#l00212">Globals.cpp:212</a></div></div>
<div class="ttc" id="aclassllvm_1_1User_html"><div class="ttname"><a href="classllvm_1_1User.html">llvm::User</a></div><div class="ttdef"><b>Definition:</b> <a href="User_8h_source.html#l00044">User.h:44</a></div></div>
<div class="ttc" id="aInstrProfiling_8cpp_html_a194c800ff697b17dfd4090d3d09d8607"><div class="ttname"><a href="InstrProfiling_8cpp.html#a194c800ff697b17dfd4090d3d09d8607">instrprof</a></div><div class="ttdeci">instrprof</div><div class="ttdef"><b>Definition:</b> <a href="InstrProfiling_8cpp_source.html#l00429">InstrProfiling.cpp:429</a></div></div>
<div class="ttc" id="aREADME__ALTIVEC_8txt_html_a9aacd9146afe44bf656cd664e2a88c8c"><div class="ttname"><a href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a></div><div class="ttdeci">(vector float) vec_cmpeq(*A, *B) C</div><div class="ttdef"><b>Definition:</b> <a href="README__ALTIVEC_8txt_source.html#l00086">README_ALTIVEC.txt:86</a></div></div>
<div class="ttc" id="aTwine_8h_html"><div class="ttname"><a href="Twine_8h.html">Twine.h</a></div></div>
<div class="ttc" id="aclassllvm_1_1InstrProfValueProfileInst_html_ab9fc2e7188a59c1ccf31a61e39abc679"><div class="ttname"><a href="classllvm_1_1InstrProfValueProfileInst.html#ab9fc2e7188a59c1ccf31a61e39abc679">llvm::InstrProfValueProfileInst::getTargetValue</a></div><div class="ttdeci">Value * getTargetValue() const</div><div class="ttdef"><b>Definition:</b> <a href="IntrinsicInst_8h_source.html#l01164">IntrinsicInst.h:1164</a></div></div>
<div class="ttc" id="aclassllvm_1_1BranchProbabilityInfo_html"><div class="ttname"><a href="classllvm_1_1BranchProbabilityInfo.html">llvm::BranchProbabilityInfo</a></div><div class="ttdoc">Analysis providing branch probability information.</div><div class="ttdef"><b>Definition:</b> <a href="BranchProbabilityInfo_8h_source.html#l00115">BranchProbabilityInfo.h:115</a></div></div>
<div class="ttc" id="aclassllvm_1_1AnalysisUsage_html"><div class="ttname"><a href="classllvm_1_1AnalysisUsage.html">llvm::AnalysisUsage</a></div><div class="ttdoc">Represent the analysis usage information of a pass.</div><div class="ttdef"><b>Definition:</b> <a href="PassAnalysisSupport_8h_source.html#l00047">PassAnalysisSupport.h:47</a></div></div>
<div class="ttc" id="anamespacellvm_html_abbbd1b6fc4b1028641e564b0e972e18b"><div class="ttname"><a href="namespacellvm.html#abbbd1b6fc4b1028641e564b0e972e18b">llvm::canRenameComdatFunc</a></div><div class="ttdeci">bool canRenameComdatFunc(const Function &amp;F, bool CheckAddressTaken=false)</div><div class="ttdoc">Check if we can safely rename this Comdat function.</div><div class="ttdef"><b>Definition:</b> <a href="InstrProf_8cpp_source.html#l01116">InstrProf.cpp:1116</a></div></div>
<div class="ttc" id="aTargetLibraryInfo_8h_html"><div class="ttname"><a href="TargetLibraryInfo_8h.html">TargetLibraryInfo.h</a></div></div>
<div class="ttc" id="anamespacellvm_html_a7c3a00523afbec28a3254458a2b42e80"><div class="ttname"><a href="namespacellvm.html#a7c3a00523afbec28a3254458a2b42e80">llvm::getInstrProfCountersVarPrefix</a></div><div class="ttdeci">StringRef getInstrProfCountersVarPrefix()</div><div class="ttdoc">Return the name prefix of profile counter variables.</div><div class="ttdef"><b>Definition:</b> <a href="InstrProf_8h_source.html#l00090">InstrProf.h:90</a></div></div>
<div class="ttc" id="aclassllvm_1_1Triple_html_a49a399e1ef632107f1a062a3d22f2118"><div class="ttname"><a href="classllvm_1_1Triple.html#a49a399e1ef632107f1a062a3d22f2118">llvm::Triple::supportsCOMDAT</a></div><div class="ttdeci">bool supportsCOMDAT() const</div><div class="ttdoc">Tests whether the target supports comdat.</div><div class="ttdef"><b>Definition:</b> <a href="Triple_8h_source.html#l00815">Triple.h:815</a></div></div>
<div class="ttc" id="anamespacefalse_html"><div class="ttname"><a href="namespacefalse.html">false</a></div><div class="ttdef"><b>Definition:</b> <a href="StackSlotColoring_8cpp_source.html#l00142">StackSlotColoring.cpp:142</a></div></div>
<div class="ttc" id="astructllvm_1_1MaybeAlign_html"><div class="ttname"><a href="structllvm_1_1MaybeAlign.html">llvm::MaybeAlign</a></div><div class="ttdoc">This struct is a compact representation of a valid (power of two) or undefined (0) alignment.</div><div class="ttdef"><b>Definition:</b> <a href="Alignment_8h_source.html#l00109">Alignment.h:109</a></div></div>
<div class="ttc" id="anamespacellvm_1_1dwarf_html_a1245cd64fecb20c25cb4d00c5d96c3d4"><div class="ttname"><a href="namespacellvm_1_1dwarf.html#a1245cd64fecb20c25cb4d00c5d96c3d4">llvm::dwarf::toStringRef</a></div><div class="ttdeci">StringRef toStringRef(const Optional&lt; DWARFFormValue &gt; &amp;V, StringRef Default={})</div><div class="ttdoc">Take an optional DWARFFormValue and try to extract a string value from it.</div><div class="ttdef"><b>Definition:</b> <a href="DWARFFormValue_8h_source.html#l00177">DWARFFormValue.h:177</a></div></div>
<div class="ttc" id="anamespacellvm_html_a614025a994116ebcf54db743d6fa4760"><div class="ttname"><a href="namespacellvm.html#a614025a994116ebcf54db743d6fa4760">llvm::getInstrProfInitFuncName</a></div><div class="ttdeci">StringRef getInstrProfInitFuncName()</div><div class="ttdoc">Return the name of the runtime initialization method that is generated by the compiler.</div><div class="ttdef"><b>Definition:</b> <a href="InstrProf_8h_source.html#l00143">InstrProf.h:143</a></div></div>
<div class="ttc" id="aclassllvm_1_1ConstantArray_html"><div class="ttname"><a href="classllvm_1_1ConstantArray.html">llvm::ConstantArray</a></div><div class="ttdoc">ConstantArray - Constant Array Declarations.</div><div class="ttdef"><b>Definition:</b> <a href="Constants_8h_source.html#l00409">Constants.h:409</a></div></div>
<div class="ttc" id="aclassllvm_1_1Triple_html_a444e46ff0a17a6c9480eb151bd42c9bc"><div class="ttname"><a href="classllvm_1_1Triple.html#a444e46ff0a17a6c9480eb151bd42c9bc">llvm::Triple::isOSBinFormatMachO</a></div><div class="ttdeci">bool isOSBinFormatMachO() const</div><div class="ttdoc">Tests whether the environment is MachO.</div><div class="ttdef"><b>Definition:</b> <a href="Triple_8h_source.html#l00645">Triple.h:645</a></div></div>
<div class="ttc" id="aclassllvm_1_1Instruction_html"><div class="ttname"><a href="classllvm_1_1Instruction.html">llvm::Instruction</a></div><div class="ttdef"><b>Definition:</b> <a href="IR_2Instruction_8h_source.html#l00045">Instruction.h:46</a></div></div>
<div class="ttc" id="anamespacellvm_1_1MCID_html_ab357441fcd1ea1f9b0d27c12700f6023"><div class="ttname"><a href="namespacellvm_1_1MCID.html#ab357441fcd1ea1f9b0d27c12700f6023">llvm::MCID::Flag</a></div><div class="ttdeci">Flag</div><div class="ttdoc">These should be considered private to the implementation of the MCInstrDesc class.</div><div class="ttdef"><b>Definition:</b> <a href="MCInstrDesc_8h_source.html#l00146">MCInstrDesc.h:146</a></div></div>
<div class="ttc" id="aInstrProf_8h_html"><div class="ttname"><a href="InstrProf_8h.html">InstrProf.h</a></div></div>
<div class="ttc" id="aclassllvm_1_1Triple_html_a2e265a0d332c3e2db0acf0c7afd4175d"><div class="ttname"><a href="classllvm_1_1Triple.html#a2e265a0d332c3e2db0acf0c7afd4175d">llvm::Triple::getObjectFormat</a></div><div class="ttdeci">ObjectFormatType getObjectFormat() const</div><div class="ttdoc">getFormat - Get the object format for this triple.</div><div class="ttdef"><b>Definition:</b> <a href="Triple_8h_source.html#l00337">Triple.h:337</a></div></div>
<div class="ttc" id="anamespacellvm_html_aab730f72aa213d5ecc7d1101efda8811"><div class="ttname"><a href="namespacellvm.html#aab730f72aa213d5ecc7d1101efda8811">llvm::appendToCompilerUsed</a></div><div class="ttdeci">void appendToCompilerUsed(Module &amp;M, ArrayRef&lt; GlobalValue * &gt; Values)</div><div class="ttdoc">Adds global values to the llvm.compiler.used list.</div><div class="ttdef"><b>Definition:</b> <a href="ModuleUtils_8cpp_source.html#l00110">ModuleUtils.cpp:110</a></div></div>
<div class="ttc" id="anamespacellvm_html_a7f2a3d4dcfee70225988aec53ff1e173"><div class="ttname"><a href="namespacellvm.html#a7f2a3d4dcfee70225988aec53ff1e173">llvm::report_fatal_error</a></div><div class="ttdeci">LLVM_ATTRIBUTE_NORETURN void report_fatal_error(Error Err, bool gen_crash_diag=true)</div><div class="ttdoc">Report a serious error, calling any installed error handler.</div><div class="ttdef"><b>Definition:</b> <a href="Testing_2Support_2Error_8cpp_source.html#l00140">Error.cpp:140</a></div></div>
<div class="ttc" id="aPassBuilderBindings_8cpp_html_a47c521bf7ba0bb2147b96d068af30d04"><div class="ttname"><a href="PassBuilderBindings_8cpp.html#a47c521bf7ba0bb2147b96d068af30d04">Options</a></div><div class="ttdeci">const char LLVMTargetMachineRef LLVMPassBuilderOptionsRef Options</div><div class="ttdef"><b>Definition:</b> <a href="PassBuilderBindings_8cpp_source.html#l00048">PassBuilderBindings.cpp:48</a></div></div>
<div class="ttc" id="aclassllvm_1_1LoopBase_html_a46880fab7a9d5bd439725f2acc59b80d"><div class="ttname"><a href="classllvm_1_1LoopBase.html#a46880fab7a9d5bd439725f2acc59b80d">llvm::LoopBase::getExitingBlocks</a></div><div class="ttdeci">void getExitingBlocks(SmallVectorImpl&lt; BlockT * &gt; &amp;ExitingBlocks) const</div><div class="ttdoc">Return all blocks inside the loop that have successors outside of the loop.</div><div class="ttdef"><b>Definition:</b> <a href="LoopInfoImpl_8h_source.html#l00034">LoopInfoImpl.h:34</a></div></div>
<div class="ttc" id="allvm_2Support_2ErrorHandling_8h_html"><div class="ttname"><a href="llvm_2Support_2ErrorHandling_8h.html">ErrorHandling.h</a></div></div>
<div class="ttc" id="aclassllvm_1_1ConstantInt_html_a969709dd49c28865a482d8b870f87c46"><div class="ttname"><a href="classllvm_1_1ConstantInt.html#a969709dd49c28865a482d8b870f87c46">llvm::ConstantInt::get</a></div><div class="ttdeci">static Constant * get(Type *Ty, uint64_t V, bool IsSigned=false)</div><div class="ttdoc">If Ty is a vector type, return a Constant with a splat of the given value.</div><div class="ttdef"><b>Definition:</b> <a href="Constants_8cpp_source.html#l00901">Constants.cpp:901</a></div></div>
<div class="ttc" id="aclassllvm_1_1InstrProfValueProfileInst_html_aeb0bc0430ea23e8b9112e4aed4c453e4"><div class="ttname"><a href="classllvm_1_1InstrProfValueProfileInst.html#aeb0bc0430ea23e8b9112e4aed4c453e4">llvm::InstrProfValueProfileInst::getIndex</a></div><div class="ttdeci">ConstantInt * getIndex() const</div><div class="ttdef"><b>Definition:</b> <a href="IntrinsicInst_8h_source.html#l01173">IntrinsicInst.h:1173</a></div></div>
<div class="ttc" id="aELFObjHandler_8cpp_html_a043cdaf7b89aaeeb127be5d93411637f"><div class="ttname"><a href="ELFObjHandler_8cpp.html#a043cdaf7b89aaeeb127be5d93411637f">Align</a></div><div class="ttdeci">uint64_t Align</div><div class="ttdef"><b>Definition:</b> <a href="ELFObjHandler_8cpp_source.html#l00083">ELFObjHandler.cpp:83</a></div></div>
<div class="ttc" id="astructllvm_1_1InstrProfOptions_html_a7961a6dd8e7618d08b3ffe19e1a3c7e3"><div class="ttname"><a href="structllvm_1_1InstrProfOptions.html#a7961a6dd8e7618d08b3ffe19e1a3c7e3">llvm::InstrProfOptions::DoCounterPromotion</a></div><div class="ttdeci">bool DoCounterPromotion</div><div class="ttdef"><b>Definition:</b> <a href="Instrumentation_8h_source.html#l00126">Instrumentation.h:126</a></div></div>
<div class="ttc" id="aclassllvm_1_1GlobalValue_html_aedfa75f0c85c4aa85b257f066fbea57ca1511edd03e02d1f3dd277a3c6abf6ad5"><div class="ttname"><a href="classllvm_1_1GlobalValue.html#aedfa75f0c85c4aa85b257f066fbea57ca1511edd03e02d1f3dd277a3c6abf6ad5">llvm::GlobalValue::InternalLinkage</a></div><div class="ttdeci">@ InternalLinkage</div><div class="ttdoc">Rename collisions when linking (static functions).</div><div class="ttdef"><b>Definition:</b> <a href="GlobalValue_8h_source.html#l00055">GlobalValue.h:55</a></div></div>
<div class="ttc" id="aclassllvm_1_1Comdat_html"><div class="ttname"><a href="classllvm_1_1Comdat.html">llvm::Comdat</a></div><div class="ttdef"><b>Definition:</b> <a href="llvm_2IR_2Comdat_8h_source.html#l00031">Comdat.h:31</a></div></div>
<div class="ttc" id="anamespacellvm_1_1MCID_html_ab357441fcd1ea1f9b0d27c12700f6023a463baf545246fea9718664d933ffe66f"><div class="ttname"><a href="namespacellvm_1_1MCID.html#ab357441fcd1ea1f9b0d27c12700f6023a463baf545246fea9718664d933ffe66f">llvm::MCID::Call</a></div><div class="ttdeci">@ Call</div><div class="ttdef"><b>Definition:</b> <a href="MCInstrDesc_8h_source.html#l00153">MCInstrDesc.h:153</a></div></div>
<div class="ttc" id="aclassllvm_1_1AtomicRMWInst_html_a461cfbbb5c7a57ab73210498923cf615a0794c42b44989f9d9f1454d79ca0dd88"><div class="ttname"><a href="classllvm_1_1AtomicRMWInst.html#a461cfbbb5c7a57ab73210498923cf615a0794c42b44989f9d9f1454d79ca0dd88">llvm::AtomicRMWInst::Add</a></div><div class="ttdeci">@ Add</div><div class="ttdoc">*p = old + v</div><div class="ttdef"><b>Definition:</b> <a href="Instructions_8h_source.html#l00742">Instructions.h:742</a></div></div>
<div class="ttc" id="anamespacellvm_1_1lltok_html_af353621f14cb4b4b3af5ffaff84076b1"><div class="ttname"><a href="namespacellvm_1_1lltok.html#af353621f14cb4b4b3af5ffaff84076b1">llvm::lltok::Kind</a></div><div class="ttdeci">Kind</div><div class="ttdef"><b>Definition:</b> <a href="LLToken_8h_source.html#l00018">LLToken.h:18</a></div></div>
<div class="ttc" id="aType_8h_html"><div class="ttname"><a href="Type_8h.html">Type.h</a></div></div>
<div class="ttc" id="aPassSupport_8h_html_a74ce8276b89067e806f67c45a6d92575"><div class="ttname"><a href="PassSupport_8h.html#a74ce8276b89067e806f67c45a6d92575">INITIALIZE_PASS_END</a></div><div class="ttdeci">#define INITIALIZE_PASS_END(passName, arg, name, cfg, analysis)</div><div class="ttdef"><b>Definition:</b> <a href="PassSupport_8h_source.html#l00058">PassSupport.h:58</a></div></div>
<div class="ttc" id="aLoopInfo_8h_html"><div class="ttname"><a href="LoopInfo_8h.html">LoopInfo.h</a></div></div>
<div class="ttc" id="aclassllvm_1_1Triple_html_ae891092a64f3b737dcba557a8450587c"><div class="ttname"><a href="classllvm_1_1Triple.html#ae891092a64f3b737dcba557a8450587c">llvm::Triple::isOSFuchsia</a></div><div class="ttdeci">bool isOSFuchsia() const</div><div class="ttdef"><b>Definition:</b> <a href="Triple_8h_source.html#l00514">Triple.h:514</a></div></div>
<div class="ttc" id="anamespacellvm_html_aee16f26551d92fb5f1d238ea25db5404"><div class="ttname"><a href="namespacellvm.html#aee16f26551d92fb5f1d238ea25db5404">llvm::getInstrProfVNodesVarName</a></div><div class="ttdeci">StringRef getInstrProfVNodesVarName()</div><div class="ttdoc">Return the name of value profile node array variables:</div><div class="ttdef"><b>Definition:</b> <a href="InstrProf_8h_source.html#l00096">InstrProf.h:96</a></div></div>
<div class="ttc" id="anamespacellvm_1_1cl_html_a492234b10e0c5918d72a3a15a6f0fa6ea61d3cb794533763159788c493ad266d9"><div class="ttname"><a href="namespacellvm_1_1cl.html#a492234b10e0c5918d72a3a15a6f0fa6ea61d3cb794533763159788c493ad266d9">llvm::cl::ZeroOrMore</a></div><div class="ttdeci">@ ZeroOrMore</div><div class="ttdef"><b>Definition:</b> <a href="CommandLine_8h_source.html#l00120">CommandLine.h:120</a></div></div>
<div class="ttc" id="anamespacellvm_html_a09062024aadcf782f213596f52b732bb"><div class="ttname"><a href="namespacellvm.html#a09062024aadcf782f213596f52b732bb">llvm::getInstrProfNameVarPrefix</a></div><div class="ttdeci">StringRef getInstrProfNameVarPrefix()</div><div class="ttdoc">Return the name prefix of variables containing instrumented function names.</div><div class="ttdef"><b>Definition:</b> <a href="InstrProf_8h_source.html#l00084">InstrProf.h:84</a></div></div>
<div class="ttc" id="aBasicBlock_8h_html"><div class="ttname"><a href="BasicBlock_8h.html">BasicBlock.h</a></div></div>
<div class="ttc" id="aclassllvm_1_1cl_1_1opt_html"><div class="ttname"><a href="classllvm_1_1cl_1_1opt.html">llvm::cl::opt&lt; bool &gt;</a></div></div>
<div class="ttc" id="aclassllvm_1_1Triple_html_a565d07b44e55cbff02db88c1d5cf3cb1"><div class="ttname"><a href="classllvm_1_1Triple.html#a565d07b44e55cbff02db88c1d5cf3cb1">llvm::Triple::isOSSolaris</a></div><div class="ttdeci">bool isOSSolaris() const</div><div class="ttdef"><b>Definition:</b> <a href="Triple_8h_source.html#l00520">Triple.h:520</a></div></div>
<div class="ttc" id="aMemorySSA_8cpp_html_a20a60bdac22b099d87d8cb0c1d554120"><div class="ttname"><a href="MemorySSA_8cpp.html#a20a60bdac22b099d87d8cb0c1d554120">SSA</a></div><div class="ttdeci">Memory SSA</div><div class="ttdef"><b>Definition:</b> <a href="MemorySSA_8cpp_source.html#l00073">MemorySSA.cpp:73</a></div></div>
<div class="ttc" id="anamespacellvm_1_1X86II_html_a15cbb72b959838d6e0f002ce58bc4bb2a8d230b4df405685c7dc1f1db718d7008"><div class="ttname"><a href="namespacellvm_1_1X86II.html#a15cbb72b959838d6e0f002ce58bc4bb2a8d230b4df405685c7dc1f1db718d7008">llvm::X86II::PD</a></div><div class="ttdeci">@ PD</div><div class="ttdef"><b>Definition:</b> <a href="X86BaseInfo_8h_source.html#l00782">X86BaseInfo.h:782</a></div></div>
<div class="ttc" id="aclassllvm_1_1GlobalVariable_html_a0e5946885029c1bce1350d34f2539b1b"><div class="ttname"><a href="classllvm_1_1GlobalVariable.html#a0e5946885029c1bce1350d34f2539b1b">llvm::GlobalVariable::getInitializer</a></div><div class="ttdeci">const Constant * getInitializer() const</div><div class="ttdoc">getInitializer - Return the initializer for this global variable.</div><div class="ttdef"><b>Definition:</b> <a href="GlobalVariable_8h_source.html#l00136">GlobalVariable.h:136</a></div></div>
<div class="ttc" id="aclassllvm_1_1Constant_html"><div class="ttname"><a href="classllvm_1_1Constant.html">llvm::Constant</a></div><div class="ttdoc">This is an important base class in LLVM.</div><div class="ttdef"><b>Definition:</b> <a href="Constant_8h_source.html#l00041">Constant.h:41</a></div></div>
<div class="ttc" id="aInstrProfiling_8cpp_html_a5443297c33124bc3c402c77959675ced"><div class="ttname"><a href="InstrProfiling_8cpp.html#a5443297c33124bc3c402c77959675ced">getVarName</a></div><div class="ttdeci">static std::string getVarName(InstrProfIncrementInst *Inc, StringRef Prefix)</div><div class="ttdoc">Get the name of a profiling variable for a particular function.</div><div class="ttdef"><b>Definition:</b> <a href="InstrProfiling_8cpp_source.html#l00750">InstrProfiling.cpp:750</a></div></div>
<div class="ttc" id="aclassllvm_1_1Instruction_html_ae6b978645b8ac72d1a35e1298ffdd4f0"><div class="ttname"><a href="classllvm_1_1Instruction.html#ae6b978645b8ac72d1a35e1298ffdd4f0">llvm::Instruction::eraseFromParent</a></div><div class="ttdeci">SymbolTableList&lt; Instruction &gt;::iterator eraseFromParent()</div><div class="ttdoc">This method unlinks 'this' from the containing basic block and deletes it.</div><div class="ttdef"><b>Definition:</b> <a href="IR_2Instruction_8cpp_source.html#l00078">Instruction.cpp:78</a></div></div>
<div class="ttc" id="aBranchProbabilityInfo_8h_html"><div class="ttname"><a href="BranchProbabilityInfo_8h.html">BranchProbabilityInfo.h</a></div></div>
<div class="ttc" id="aclassllvm_1_1InstrProfValueProfileInst_html"><div class="ttname"><a href="classllvm_1_1InstrProfValueProfileInst.html">llvm::InstrProfValueProfileInst</a></div><div class="ttdoc">This represents the llvm.instrprof_value_profile intrinsic.</div><div class="ttdef"><b>Definition:</b> <a href="IntrinsicInst_8h_source.html#l01146">IntrinsicInst.h:1146</a></div></div>
<div class="ttc" id="aELFObjHandler_8cpp_html_aef61945034b9431b804748fc317c5548"><div class="ttname"><a href="ELFObjHandler_8cpp.html#aef61945034b9431b804748fc317c5548">Index</a></div><div class="ttdeci">uint32_t Index</div><div class="ttdef"><b>Definition:</b> <a href="ELFObjHandler_8cpp_source.html#l00084">ELFObjHandler.cpp:84</a></div></div>
<div class="ttc" id="aclassllvm_1_1TargetLibraryInfoWrapperPass_html"><div class="ttname"><a href="classllvm_1_1TargetLibraryInfoWrapperPass.html">llvm::TargetLibraryInfoWrapperPass</a></div><div class="ttdef"><b>Definition:</b> <a href="TargetLibraryInfo_8h_source.html#l00463">TargetLibraryInfo.h:463</a></div></div>
<div class="ttc" id="aclassllvm_1_1GlobalValue_html_a28b9561d9ef3d237ef894023187fa26c"><div class="ttname"><a href="classllvm_1_1GlobalValue.html#a28b9561d9ef3d237ef894023187fa26c">llvm::GlobalValue::getVisibility</a></div><div class="ttdeci">VisibilityTypes getVisibility() const</div><div class="ttdef"><b>Definition:</b> <a href="GlobalValue_8h_source.html#l00229">GlobalValue.h:229</a></div></div>
<div class="ttc" id="allvm_2Support_2Error_8h_html"><div class="ttname"><a href="llvm_2Support_2Error_8h.html">Error.h</a></div></div>
<div class="ttc" id="aAArch64PromoteConstant_8cpp_html_a90f8350fecae261c25be85d38b451bff"><div class="ttname"><a href="AArch64PromoteConstant_8cpp.html#a90f8350fecae261c25be85d38b451bff">const</a></div><div class="ttdeci">aarch64 promote const</div><div class="ttdef"><b>Definition:</b> <a href="AArch64PromoteConstant_8cpp_source.html#l00232">AArch64PromoteConstant.cpp:232</a></div></div>
<div class="ttc" id="aELFObjHandler_8cpp_html_a9df82a8be2f17e80535a8937bf23e022"><div class="ttname"><a href="ELFObjHandler_8cpp.html#a9df82a8be2f17e80535a8937bf23e022">Addr</a></div><div class="ttdeci">uint64_t Addr</div><div class="ttdef"><b>Definition:</b> <a href="ELFObjHandler_8cpp_source.html#l00080">ELFObjHandler.cpp:80</a></div></div>
<div class="ttc" id="aclassllvm_1_1Triple_html_aa98a01c1d72fde0f87823d204dc98334"><div class="ttname"><a href="classllvm_1_1Triple.html#aa98a01c1d72fde0f87823d204dc98334">llvm::Triple::isOSFreeBSD</a></div><div class="ttdeci">bool isOSFreeBSD() const</div><div class="ttdef"><b>Definition:</b> <a href="Triple_8h_source.html#l00510">Triple.h:510</a></div></div>
<div class="ttc" id="aSVEIntrinsicOpts_8cpp_html_a2bb87eb1bcbc74783a83ae945eb8fa36"><div class="ttname"><a href="SVEIntrinsicOpts_8cpp.html#a2bb87eb1bcbc74783a83ae945eb8fa36">INITIALIZE_PASS_DEPENDENCY</a></div><div class="ttdeci">INITIALIZE_PASS_DEPENDENCY(DominatorTreeWrapperPass)</div></div>
<div class="ttc" id="aclassllvm_1_1ConstantPointerNull_html_a96f5c85e4022e369266541b2db3fda69"><div class="ttname"><a href="classllvm_1_1ConstantPointerNull.html#a96f5c85e4022e369266541b2db3fda69">llvm::ConstantPointerNull::get</a></div><div class="ttdeci">static ConstantPointerNull * get(PointerType *T)</div><div class="ttdoc">Static factory methods - Return objects of the specified value.</div><div class="ttdef"><b>Definition:</b> <a href="Constants_8cpp_source.html#l01772">Constants.cpp:1772</a></div></div>
<div class="ttc" id="alib_2Target_2ARM_2README_8txt_html_ad3a99906764c35b2694ae90fa57744a5"><div class="ttname"><a href="lib_2Target_2ARM_2README_8txt.html#ad3a99906764c35b2694ae90fa57744a5">move</a></div><div class="ttdeci">compiles ldr LCPI1_0 ldr ldr mov lsr tst moveq r1 ldr LCPI1_1 and r0 bx lr It would be better to do something like to fold the shift into the conditional move</div><div class="ttdef"><b>Definition:</b> <a href="lib_2Target_2ARM_2README_8txt_source.html#l00544">README.txt:546</a></div></div>
<div class="ttc" id="astructllvm_1_1InstrProfOptions_html_ab9246d23776e80d142b6245f1ac54761"><div class="ttname"><a href="structllvm_1_1InstrProfOptions.html#ab9246d23776e80d142b6245f1ac54761">llvm::InstrProfOptions::InstrProfileOutput</a></div><div class="ttdeci">std::string InstrProfileOutput</div><div class="ttdef"><b>Definition:</b> <a href="Instrumentation_8h_source.html#l00135">Instrumentation.h:135</a></div></div>
<div class="ttc" id="aclassllvm_1_1LLVMContext_html"><div class="ttname"><a href="classllvm_1_1LLVMContext.html">llvm::LLVMContext</a></div><div class="ttdoc">This is an important class for using LLVM in a threaded context.</div><div class="ttdef"><b>Definition:</b> <a href="LLVMContext_8h_source.html#l00068">LLVMContext.h:68</a></div></div>
<div class="ttc" id="aInstrProfiling_8cpp_html_aea15570513f8fc01807564eb53f2d695"><div class="ttname"><a href="InstrProfiling_8cpp.html#aea15570513f8fc01807564eb53f2d695">profDataReferencedByCode</a></div><div class="ttdeci">static bool profDataReferencedByCode(const Module &amp;M)</div><div class="ttdef"><b>Definition:</b> <a href="InstrProfiling_8cpp_source.html#l00781">InstrProfiling.cpp:781</a></div></div>
<div class="ttc" id="anamespacellvm_1_1numbers_html_a92f4283d4e0e2ea1776894b3ae93640f"><div class="ttname"><a href="namespacellvm_1_1numbers.html#a92f4283d4e0e2ea1776894b3ae93640f">llvm::numbers::e</a></div><div class="ttdeci">constexpr double e</div><div class="ttdef"><b>Definition:</b> <a href="MathExtras_8h_source.html#l00057">MathExtras.h:57</a></div></div>
<div class="ttc" id="aclassllvm_1_1DenseMap_html"><div class="ttname"><a href="classllvm_1_1DenseMap.html">llvm::DenseMap</a></div><div class="ttdef"><b>Definition:</b> <a href="DenseMap_8h_source.html#l00714">DenseMap.h:715</a></div></div>
<div class="ttc" id="aInstrProfiling_8cpp_html_a086fd5027d9c9be2f6540c33e9e777dc"><div class="ttname"><a href="InstrProfiling_8cpp.html#a086fd5027d9c9be2f6540c33e9e777dc">shouldRecordFunctionAddr</a></div><div class="ttdeci">static bool shouldRecordFunctionAddr(Function *F)</div><div class="ttdef"><b>Definition:</b> <a href="InstrProfiling_8cpp_source.html#l00785">InstrProfiling.cpp:785</a></div></div>
<div class="ttc" id="anamespacellvm_html_aeb5dc4f19ccfe906a67745d10a39b4c6"><div class="ttname"><a href="namespacellvm.html#aeb5dc4f19ccfe906a67745d10a39b4c6">llvm::isIRPGOFlagSet</a></div><div class="ttdeci">bool isIRPGOFlagSet(const Module *M)</div><div class="ttdoc">Check if INSTR_PROF_RAW_VERSION_VAR is defined.</div><div class="ttdef"><b>Definition:</b> <a href="InstrProf_8cpp_source.html#l01098">InstrProf.cpp:1098</a></div></div>
<div class="ttc" id="aclassllvm_1_1LoopInfoBase_html_a7a7c8e0e4f836c13c015b62e18f386bd"><div class="ttname"><a href="classllvm_1_1LoopInfoBase.html#a7a7c8e0e4f836c13c015b62e18f386bd">llvm::LoopInfoBase::getLoopFor</a></div><div class="ttdeci">LoopT * getLoopFor(const BlockT *BB) const</div><div class="ttdoc">Return the inner most loop that BB lives in.</div><div class="ttdef"><b>Definition:</b> <a href="LoopInfo_8h_source.html#l00967">LoopInfo.h:967</a></div></div>
<div class="ttc" id="aMD5_8cpp_html_ac0eafdc9ee161b71e7af98af736952fd"><div class="ttname"><a href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a></div><div class="ttdeci">#define I(x, y, z)</div><div class="ttdef"><b>Definition:</b> <a href="MD5_8cpp_source.html#l00059">MD5.cpp:59</a></div></div>
<div class="ttc" id="aclassllvm_1_1GlobalObject_html_ad580cf48b6ca7169e9166f0d19464ee0"><div class="ttname"><a href="classllvm_1_1GlobalObject.html#ad580cf48b6ca7169e9166f0d19464ee0">llvm::GlobalObject::setComdat</a></div><div class="ttdeci">void setComdat(Comdat *C)</div><div class="ttdef"><b>Definition:</b> <a href="GlobalObject_8h_source.html#l00125">GlobalObject.h:125</a></div></div>
<div class="ttc" id="aclassllvm_1_1Type_html_a9739fda41ce7be4d43bb5b45bbd0e460"><div class="ttname"><a href="classllvm_1_1Type.html#a9739fda41ce7be4d43bb5b45bbd0e460">llvm::Type::getInt64PtrTy</a></div><div class="ttdeci">static PointerType * getInt64PtrTy(LLVMContext &amp;C, unsigned AS=0)</div><div class="ttdef"><b>Definition:</b> <a href="Type_8cpp_source.html#l00267">Type.cpp:267</a></div></div>
<div class="ttc" id="anamespacellvm_1_1cl_html_a10a041239ae1870cfcc064bfaa79fb65"><div class="ttname"><a href="namespacellvm_1_1cl.html#a10a041239ae1870cfcc064bfaa79fb65">llvm::cl::init</a></div><div class="ttdeci">initializer&lt; Ty &gt; init(const Ty &amp;Val)</div><div class="ttdef"><b>Definition:</b> <a href="CommandLine_8h_source.html#l00443">CommandLine.h:443</a></div></div>
<div class="ttc" id="anamespacellvm_html_ae879dd14ccc28696f3d8c7b484df3c9a"><div class="ttname"><a href="namespacellvm.html#ae879dd14ccc28696f3d8c7b484df3c9a">llvm::appendToUsed</a></div><div class="ttdeci">void appendToUsed(Module &amp;M, ArrayRef&lt; GlobalValue * &gt; Values)</div><div class="ttdoc">Adds global values to the llvm.used list.</div><div class="ttdef"><b>Definition:</b> <a href="ModuleUtils_8cpp_source.html#l00106">ModuleUtils.cpp:106</a></div></div>
<div class="ttc" id="aclassllvm_1_1LoopBase_html_ac3280e7f76f955403fe17eacf126b90d"><div class="ttname"><a href="classllvm_1_1LoopBase.html#ac3280e7f76f955403fe17eacf126b90d">llvm::LoopBase::getLoopPreheader</a></div><div class="ttdeci">BlockT * getLoopPreheader() const</div><div class="ttdoc">If there is a preheader for this loop, return it.</div><div class="ttdef"><b>Definition:</b> <a href="LoopInfoImpl_8h_source.html#l00167">LoopInfoImpl.h:167</a></div></div>
<div class="ttc" id="aclassllvm_1_1InstrProfIncrementInst_html_acafba4ddbe7047a5ac0632bce6ada313"><div class="ttname"><a href="classllvm_1_1InstrProfIncrementInst.html#acafba4ddbe7047a5ac0632bce6ada313">llvm::InstrProfIncrementInst::getIndex</a></div><div class="ttdeci">ConstantInt * getIndex() const</div><div class="ttdef"><b>Definition:</b> <a href="IntrinsicInst_8h_source.html#l01128">IntrinsicInst.h:1128</a></div></div>
<div class="ttc" id="aclassllvm_1_1GlobalValue_html_a687973de03d041e04b50a76d19d4fd36"><div class="ttname"><a href="classllvm_1_1GlobalValue.html#a687973de03d041e04b50a76d19d4fd36">llvm::GlobalValue::setLinkage</a></div><div class="ttdeci">void setLinkage(LinkageTypes LT)</div><div class="ttdef"><b>Definition:</b> <a href="GlobalValue_8h_source.html#l00454">GlobalValue.h:454</a></div></div>
<div class="ttc" id="aArrayRef_8h_html"><div class="ttname"><a href="ArrayRef_8h.html">ArrayRef.h</a></div></div>
<div class="ttc" id="astructllvm_1_1InstrProfOptions_html"><div class="ttname"><a href="structllvm_1_1InstrProfOptions.html">llvm::InstrProfOptions</a></div><div class="ttdoc">Options for the frontend instrumentation based profiling pass.</div><div class="ttdef"><b>Definition:</b> <a href="Instrumentation_8h_source.html#l00121">Instrumentation.h:121</a></div></div>
<div class="ttc" id="aclassllvm_1_1Function_html_a6adbed68009f582caa84cdfd2adf36f1"><div class="ttname"><a href="classllvm_1_1Function.html#a6adbed68009f582caa84cdfd2adf36f1">llvm::Function::Create</a></div><div class="ttdeci">static Function * Create(FunctionType *Ty, LinkageTypes Linkage, unsigned AddrSpace, const Twine &amp;N=&quot;&quot;, Module *M=nullptr)</div><div class="ttdef"><b>Definition:</b> <a href="Function_8h_source.html#l00138">Function.h:138</a></div></div>
<div class="ttc" id="aclassllvm_1_1LoopBase_html_ae7ebc88c9b32b51b749bd5bbcfaa5fb8"><div class="ttname"><a href="classllvm_1_1LoopBase.html#ae7ebc88c9b32b51b749bd5bbcfaa5fb8">llvm::LoopBase::hasDedicatedExits</a></div><div class="ttdeci">bool hasDedicatedExits() const</div><div class="ttdoc">Return true if no exit block for the loop has a predecessor that is outside the loop.</div><div class="ttdef"><b>Definition:</b> <a href="LoopInfoImpl_8h_source.html#l00092">LoopInfoImpl.h:92</a></div></div>
<div class="ttc" id="anamespacellvm_html_a6b45bff5a5ff8d93f08235760de0d5c7"><div class="ttname"><a href="namespacellvm.html#a6b45bff5a5ff8d93f08235760de0d5c7">llvm::getInstrProfRuntimeHookVarUseFuncName</a></div><div class="ttdeci">StringRef getInstrProfRuntimeHookVarUseFuncName()</div><div class="ttdoc">Return the name of the compiler generated function that references the runtime hook variable.</div><div class="ttdef"><b>Definition:</b> <a href="InstrProf_8h_source.html#l00154">InstrProf.h:154</a></div></div>
<div class="ttc" id="aIRBuilder_8h_html"><div class="ttname"><a href="IRBuilder_8h.html">IRBuilder.h</a></div></div>
<div class="ttc" id="aSILowerControlFlow_8cpp_html_a4868c5d81c5ccc98c47aeab6244346a0"><div class="ttname"><a href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a></div><div class="ttdeci">assert(ImpDefSCC.getReg()==AMDGPU::SCC &amp;&amp;ImpDefSCC.isDef())</div></div>
<div class="ttc" id="aMemDepPrinter_8cpp_html_a470d8721ad7c3b718e9daeabdaeb4700"><div class="ttname"><a href="MemDepPrinter_8cpp.html#a470d8721ad7c3b718e9daeabdaeb4700">function</a></div><div class="ttdeci">print Print MemDeps of function</div><div class="ttdef"><b>Definition:</b> <a href="MemDepPrinter_8cpp_source.html#l00083">MemDepPrinter.cpp:83</a></div></div>
<div class="ttc" id="aInstrProfiling_8cpp_html_a2e9a586792e82fb2fa53608f1fec0bd0"><div class="ttname"><a href="InstrProfiling_8cpp.html#a2e9a586792e82fb2fa53608f1fec0bd0">lowering</a></div><div class="ttdeci">Frontend instrumentation based coverage lowering</div><div class="ttdef"><b>Definition:</b> <a href="InstrProfiling_8cpp_source.html#l00430">InstrProfiling.cpp:430</a></div></div>
<div class="ttc" id="aclassllvm_1_1ArrayType_html_adf411edc4f135b570ab218079474ce77"><div class="ttname"><a href="classllvm_1_1ArrayType.html#adf411edc4f135b570ab218079474ce77">llvm::ArrayType::get</a></div><div class="ttdeci">static ArrayType * get(Type *ElementType, uint64_t NumElements)</div><div class="ttdoc">This static method is the primary way to construct an ArrayType.</div><div class="ttdef"><b>Definition:</b> <a href="Type_8cpp_source.html#l00604">Type.cpp:604</a></div></div>
<div class="ttc" id="aclassllvm_1_1Module_html"><div class="ttname"><a href="classllvm_1_1Module.html">llvm::Module</a></div><div class="ttdoc">A Module instance is used to store all the information related to an LLVM module.</div><div class="ttdef"><b>Definition:</b> <a href="Module_8h_source.html#l00067">Module.h:67</a></div></div>
<div class="ttc" id="aclassllvm_1_1InstrProfIncrementInst_html_ab82edcca18db0e7929b9d668f445e5bb"><div class="ttname"><a href="classllvm_1_1InstrProfIncrementInst.html#ab82edcca18db0e7929b9d668f445e5bb">llvm::InstrProfIncrementInst::getNumCounters</a></div><div class="ttdeci">ConstantInt * getNumCounters() const</div><div class="ttdef"><b>Definition:</b> <a href="IntrinsicInst_8h_source.html#l01124">IntrinsicInst.h:1124</a></div></div>
<div class="ttc" id="anamespacellvm_html_acb335d79af5f249c5c1194f13c177a32"><div class="ttname"><a href="namespacellvm.html#acb335d79af5f249c5c1194f13c177a32">llvm::collectPGOFuncNameStrings</a></div><div class="ttdeci">Error collectPGOFuncNameStrings(ArrayRef&lt; std::string &gt; NameStrs, bool doCompression, std::string &amp;Result)</div><div class="ttdoc">Given a vector of strings (function PGO names) NameStrs, the method generates a combined string Resul...</div><div class="ttdef"><b>Definition:</b> <a href="InstrProf_8cpp_source.html#l00401">InstrProf.cpp:401</a></div></div>
<div class="ttc" id="aAssumeBundleBuilder_8cpp_html_afb136e0532bcaed86521b462e6538d62"><div class="ttname"><a href="AssumeBundleBuilder_8cpp.html#afb136e0532bcaed86521b462e6538d62">Builder</a></div><div class="ttdeci">assume Assume Builder</div><div class="ttdef"><b>Definition:</b> <a href="AssumeBundleBuilder_8cpp_source.html#l00651">AssumeBundleBuilder.cpp:651</a></div></div>
<div class="ttc" id="aTriple_8h_html"><div class="ttname"><a href="Triple_8h.html">Triple.h</a></div></div>
<div class="ttc" id="anamespacellvm_html_a7122dbb59beeaaf08765b4dabcb0b9d2"><div class="ttname"><a href="namespacellvm.html#a7122dbb59beeaaf08765b4dabcb0b9d2">llvm::getInstrProfRegFuncsName</a></div><div class="ttdeci">StringRef getInstrProfRegFuncsName()</div><div class="ttdoc">Return the name of function that registers all the per-function control data at program startup time ...</div><div class="ttdef"><b>Definition:</b> <a href="InstrProf_8h_source.html#l00124">InstrProf.h:124</a></div></div>
<div class="ttc" id="aclassllvm_1_1InstrProfIncrementInst_html_a3f71bcdce98e69d2e5b4723a9b4b19b6"><div class="ttname"><a href="classllvm_1_1InstrProfIncrementInst.html#a3f71bcdce98e69d2e5b4723a9b4b19b6">llvm::InstrProfIncrementInst::getHash</a></div><div class="ttdeci">ConstantInt * getHash() const</div><div class="ttdef"><b>Definition:</b> <a href="IntrinsicInst_8h_source.html#l01120">IntrinsicInst.h:1120</a></div></div>
<div class="ttc" id="aclassllvm_1_1ArrayRef_html"><div class="ttname"><a href="classllvm_1_1ArrayRef.html">llvm::ArrayRef</a></div><div class="ttdoc">ArrayRef - Represent a constant reference to an array (0 or more elements consecutively in memory),...</div><div class="ttdef"><b>Definition:</b> <a href="ArrayRef_8h_source.html#l00043">ArrayRef.h:43</a></div></div>
<div class="ttc" id="aclassllvm_1_1LoopInfo_html"><div class="ttname"><a href="classllvm_1_1LoopInfo.html">llvm::LoopInfo</a></div><div class="ttdef"><b>Definition:</b> <a href="LoopInfo_8h_source.html#l01083">LoopInfo.h:1083</a></div></div>
<div class="ttc" id="anamespacellvm_html_a57f2ca0e57f4f7b13f56f9aa16af3e0d"><div class="ttname"><a href="namespacellvm.html#a57f2ca0e57f4f7b13f56f9aa16af3e0d">llvm::min</a></div><div class="ttdeci">Expected&lt; ExpressionValue &gt; min(const ExpressionValue &amp;Lhs, const ExpressionValue &amp;Rhs)</div><div class="ttdef"><b>Definition:</b> <a href="FileCheck_8cpp_source.html#l00357">FileCheck.cpp:357</a></div></div>
<div class="ttc" id="anamespacellvm_html_a61d13d6824ec46c31260a4fd0997eda0"><div class="ttname"><a href="namespacellvm.html#a61d13d6824ec46c31260a4fd0997eda0">llvm::any_of</a></div><div class="ttdeci">bool any_of(R &amp;&amp;range, UnaryPredicate P)</div><div class="ttdoc">Provide wrappers to std::any_of which take ranges instead of having to pass begin/end explicitly.</div><div class="ttdef"><b>Definition:</b> <a href="STLExtras_8h_source.html#l01541">STLExtras.h:1541</a></div></div>
<div class="ttc" id="aclassllvm_1_1AnalysisUsage_html_af11a6ebf7ab3c388234cb6d5378439a3"><div class="ttname"><a href="classllvm_1_1AnalysisUsage.html#af11a6ebf7ab3c388234cb6d5378439a3">llvm::AnalysisUsage::setPreservesCFG</a></div><div class="ttdeci">void setPreservesCFG()</div><div class="ttdoc">This function should be called by the pass, iff they do not:</div><div class="ttdef"><b>Definition:</b> <a href="Pass_8cpp_source.html#l00253">Pass.cpp:253</a></div></div>
<div class="ttc" id="aclassllvm_1_1StringRef_html"><div class="ttname"><a href="classllvm_1_1StringRef.html">llvm::StringRef</a></div><div class="ttdoc">StringRef - Represent a constant reference to a string, i.e.</div><div class="ttdef"><b>Definition:</b> <a href="StringRef_8h_source.html#l00058">StringRef.h:58</a></div></div>
<div class="ttc" id="aclassllvm_1_1Value_html_a6393a2d4fe7e10b28a0dcc35f881567b"><div class="ttname"><a href="classllvm_1_1Value.html#a6393a2d4fe7e10b28a0dcc35f881567b">llvm::Value::getType</a></div><div class="ttdeci">Type * getType() const</div><div class="ttdoc">All values are typed, get the type of this value.</div><div class="ttdef"><b>Definition:</b> <a href="Value_8h_source.html#l00256">Value.h:256</a></div></div>
<div class="ttc" id="anamespacellvm_1_1SPII_html_a2ab8a310a4181c487902735f4758ca88a36b3dd3b84fde3f8494a9b18af131856"><div class="ttname"><a href="namespacellvm_1_1SPII.html#a2ab8a310a4181c487902735f4758ca88a36b3dd3b84fde3f8494a9b18af131856">llvm::SPII::Store</a></div><div class="ttdeci">@ Store</div><div class="ttdef"><b>Definition:</b> <a href="SparcInstrInfo_8h_source.html#l00033">SparcInstrInfo.h:33</a></div></div>
<div class="ttc" id="ainclude_2llvm_2Support_2CMakeLists_8txt_html_aef9367eb0b7430eaf70b1f2725488f2a"><div class="ttname"><a href="include_2llvm_2Support_2CMakeLists_8txt.html#aef9367eb0b7430eaf70b1f2725488f2a">if</a></div><div class="ttdeci">if(llvm_vc STREQUAL &quot;&quot;) set(fake_version_inc &quot;$</div><div class="ttdef"><b>Definition:</b> <a href="include_2llvm_2Support_2CMakeLists_8txt_source.html#l00014">CMakeLists.txt:14</a></div></div>
<div class="ttc" id="aclassllvm_1_1Instruction_html_a6a66ebb3aa12757479a3c88de77d78f8"><div class="ttname"><a href="classllvm_1_1Instruction.html#a6a66ebb3aa12757479a3c88de77d78f8">llvm::Instruction::getFunction</a></div><div class="ttdeci">const Function * getFunction() const</div><div class="ttdoc">Return the function this instruction belongs to.</div><div class="ttdef"><b>Definition:</b> <a href="IR_2Instruction_8cpp_source.html#l00070">Instruction.cpp:70</a></div></div>
<div class="ttc" id="aclassllvm_1_1Value_html_a3ab5fc45117b450e8bb04e564cb6e5f2"><div class="ttname"><a href="classllvm_1_1Value.html#a3ab5fc45117b450e8bb04e564cb6e5f2">llvm::Value::replaceAllUsesWith</a></div><div class="ttdeci">void replaceAllUsesWith(Value *V)</div><div class="ttdoc">Change all uses of this to point to a new Value.</div><div class="ttdef"><b>Definition:</b> <a href="Value_8cpp_source.html#l00520">Value.cpp:520</a></div></div>
<div class="ttc" id="aclassllvm_1_1BasicBlock_html_ace940beeee97c222f836fe0ac70f6cf5"><div class="ttname"><a href="classllvm_1_1BasicBlock.html#ace940beeee97c222f836fe0ac70f6cf5">llvm::BasicBlock::Create</a></div><div class="ttdeci">static BasicBlock * Create(LLVMContext &amp;Context, const Twine &amp;Name=&quot;&quot;, Function *Parent=nullptr, BasicBlock *InsertBefore=nullptr)</div><div class="ttdoc">Creates a new BasicBlock.</div><div class="ttdef"><b>Definition:</b> <a href="BasicBlock_8h_source.html#l00100">BasicBlock.h:100</a></div></div>
<div class="ttc" id="aclassuint32__t_html"><div class="ttname"><a href="classuint32__t.html">uint32_t</a></div></div>
<div class="ttc" id="aclassllvm_1_1ConstantDataArray_html_a3edef3fa47c611d3d10606591213e57b"><div class="ttname"><a href="classllvm_1_1ConstantDataArray.html#a3edef3fa47c611d3d10606591213e57b">llvm::ConstantDataArray::getString</a></div><div class="ttdeci">static Constant * getString(LLVMContext &amp;Context, StringRef Initializer, bool AddNull=true)</div><div class="ttdoc">This method constructs a CDS and initializes it with a text string.</div><div class="ttdef"><b>Definition:</b> <a href="Constants_8cpp_source.html#l03056">Constants.cpp:3056</a></div></div>
<div class="ttc" id="alib_2Target_2ARM_2README_8txt_html_a1b45f45820a60c09244a87eb59824aec"><div class="ttname"><a href="lib_2Target_2ARM_2README_8txt.html#a1b45f45820a60c09244a87eb59824aec">S</a></div><div class="ttdeci">add sub stmia L5 ldr r0 bl L_printf $stub Instead of a and a wouldn t it be better to do three moves *Return an aggregate type is even return S</div><div class="ttdef"><b>Definition:</b> <a href="lib_2Target_2ARM_2README_8txt_source.html#l00211">README.txt:210</a></div></div>
<div class="ttc" id="aSSAUpdater_8h_html"><div class="ttname"><a href="SSAUpdater_8h.html">SSAUpdater.h</a></div></div>
<div class="ttc" id="aBlockFrequencyInfo_8h_html"><div class="ttname"><a href="BlockFrequencyInfo_8h.html">BlockFrequencyInfo.h</a></div></div>
<div class="ttc" id="anamespacellvm_1_1AMDGPUISD_html_a739d53294bc38cd6b0b23332f9994c0eafbca76f7875e080d97cee761de04d996"><div class="ttname"><a href="namespacellvm_1_1AMDGPUISD.html#a739d53294bc38cd6b0b23332f9994c0eafbca76f7875e080d97cee761de04d996">llvm::AMDGPUISD::BFI</a></div><div class="ttdeci">@ BFI</div><div class="ttdef"><b>Definition:</b> <a href="AMDGPUISelLowering_8h_source.html#l00421">AMDGPUISelLowering.h:421</a></div></div>
<div class="ttc" id="anamespacellvm_1_1jitlink_html_abee99c9c75d23a0304e5e58e3128a55f"><div class="ttname"><a href="namespacellvm_1_1jitlink.html#abee99c9c75d23a0304e5e58e3128a55f">llvm::jitlink::Linkage</a></div><div class="ttdeci">Linkage</div><div class="ttdoc">Describes symbol linkage.</div><div class="ttdef"><b>Definition:</b> <a href="JITLink_8h_source.html#l00344">JITLink.h:344</a></div></div>
<div class="ttc" id="aclassllvm_1_1Value_html_adb5c319f5905c1d3ca9eb5df546388c5"><div class="ttname"><a href="classllvm_1_1Value.html#adb5c319f5905c1d3ca9eb5df546388c5">llvm::Value::getName</a></div><div class="ttdeci">StringRef getName() const</div><div class="ttdoc">Return a constant reference to the value's name.</div><div class="ttdef"><b>Definition:</b> <a href="Value_8cpp_source.html#l00297">Value.cpp:297</a></div></div>
<div class="ttc" id="aclassllvm_1_1LoadInst_html"><div class="ttname"><a href="classllvm_1_1LoadInst.html">llvm::LoadInst</a></div><div class="ttdoc">An instruction for reading from memory.</div><div class="ttdef"><b>Definition:</b> <a href="Instructions_8h_source.html#l00175">Instructions.h:175</a></div></div>
<div class="ttc" id="aclassllvm_1_1BasicBlock_html_a71a9eabc4318b2fc34f83b01dfee484b"><div class="ttname"><a href="classllvm_1_1BasicBlock.html#a71a9eabc4318b2fc34f83b01dfee484b">llvm::BasicBlock::getTerminator</a></div><div class="ttdeci">const Instruction * getTerminator() const LLVM_READONLY</div><div class="ttdoc">Returns the terminator instruction if the block is well formed or null if the block is not well forme...</div><div class="ttdef"><b>Definition:</b> <a href="BasicBlock_8cpp_source.html#l00148">BasicBlock.cpp:148</a></div></div>
<div class="ttc" id="aclassllvm_1_1Init_html"><div class="ttname"><a href="classllvm_1_1Init.html">llvm::Init</a></div><div class="ttdef"><b>Definition:</b> <a href="Record_8h_source.html#l00271">Record.h:271</a></div></div>
<div class="ttc" id="aclassllvm_1_1ConstantInt_html_ac09a21c371a9c535cbc13e8f82503aec"><div class="ttname"><a href="classllvm_1_1ConstantInt.html#ac09a21c371a9c535cbc13e8f82503aec">llvm::ConstantInt::getZExtValue</a></div><div class="ttdeci">uint64_t getZExtValue() const</div><div class="ttdoc">Return the constant as a 64-bit unsigned integer value after it has been zero extended as appropriate...</div><div class="ttdef"><b>Definition:</b> <a href="Constants_8h_source.html#l00142">Constants.h:142</a></div></div>
<div class="ttc" id="aclassllvm_1_1BasicBlock_html_ab706e7ebb1969c5e34f28bfcf2ff719e"><div class="ttname"><a href="classllvm_1_1BasicBlock.html#ab706e7ebb1969c5e34f28bfcf2ff719e">llvm::BasicBlock::front</a></div><div class="ttdeci">const Instruction &amp; front() const</div><div class="ttdef"><b>Definition:</b> <a href="BasicBlock_8h_source.html#l00308">BasicBlock.h:308</a></div></div>
<div class="ttc" id="aclassllvm_1_1Triple_html_a7736bfc4c1afef875ecf02f2a7701fe3"><div class="ttname"><a href="classllvm_1_1Triple.html#a7736bfc4c1afef875ecf02f2a7701fe3">llvm::Triple::isOSWindows</a></div><div class="ttdeci">bool isOSWindows() const</div><div class="ttdoc">Tests whether the OS is Windows.</div><div class="ttdef"><b>Definition:</b> <a href="Triple_8h_source.html#l00547">Triple.h:547</a></div></div>
<div class="ttc" id="anamespacellvm_html_afdb2ad41922139461cf6e66f3e3e4319"><div class="ttname"><a href="namespacellvm.html#afdb2ad41922139461cf6e66f3e3e4319">llvm::DoInstrProfNameCompression</a></div><div class="ttdeci">cl::opt&lt; bool &gt; DoInstrProfNameCompression</div></div>
<div class="ttc" id="aAttributes_8h_html"><div class="ttname"><a href="Attributes_8h.html">Attributes.h</a></div><div class="ttdoc">This file contains the simple types necessary to represent the attributes associated with functions a...</div></div>
<div class="ttc" id="aConstant_8h_html"><div class="ttname"><a href="Constant_8h.html">Constant.h</a></div></div>
<div class="ttc" id="aclassllvm_1_1Twine_html"><div class="ttname"><a href="classllvm_1_1Twine.html">llvm::Twine</a></div><div class="ttdoc">Twine - A lightweight data structure for efficiently representing the concatenation of temporary valu...</div><div class="ttdef"><b>Definition:</b> <a href="Twine_8h_source.html#l00083">Twine.h:83</a></div></div>
<div class="ttc" id="aclassllvm_1_1Type_html_a05186fa23e4d11b9855a9599ba87a4b7"><div class="ttname"><a href="classllvm_1_1Type.html#a05186fa23e4d11b9855a9599ba87a4b7">llvm::Type::getInt64Ty</a></div><div class="ttdeci">static IntegerType * getInt64Ty(LLVMContext &amp;C)</div><div class="ttdef"><b>Definition:</b> <a href="Type_8cpp_source.html#l00204">Type.cpp:204</a></div></div>
<div class="ttc" id="anamespacellvm_1_1GraphProgram_html_a0ad4685976f8c4d4a697a53fbe05d10b"><div class="ttname"><a href="namespacellvm_1_1GraphProgram.html#a0ad4685976f8c4d4a697a53fbe05d10b">llvm::GraphProgram::Name</a></div><div class="ttdeci">Name</div><div class="ttdef"><b>Definition:</b> <a href="GraphWriter_8h_source.html#l00052">GraphWriter.h:52</a></div></div>
<div class="ttc" id="aclassllvm_1_1Constant_html_aa6574d526b3e38a28f688a7bb4325c2c"><div class="ttname"><a href="classllvm_1_1Constant.html#aa6574d526b3e38a28f688a7bb4325c2c">llvm::Constant::getNullValue</a></div><div class="ttdeci">static Constant * getNullValue(Type *Ty)</div><div class="ttdoc">Constructor to create a '0' constant of arbitrary type.</div><div class="ttdef"><b>Definition:</b> <a href="Constants_8cpp_source.html#l00348">Constants.cpp:348</a></div></div>
<div class="ttc" id="alib_2Target_2PowerPC_2README_8txt_html_aa91241c8c54738377749dc47ee489e0d"><div class="ttname"><a href="lib_2Target_2PowerPC_2README_8txt.html#aa91241c8c54738377749dc47ee489e0d">get</a></div><div class="ttdeci">Should compile to something r4 addze r3 instead we get</div><div class="ttdef"><b>Definition:</b> <a href="lib_2Target_2PowerPC_2README_8txt_source.html#l00022">README.txt:24</a></div></div>
<div class="ttc" id="aregutils_8h_html_a1fa2460e32327ade49189c95740bc1b5"><div class="ttname"><a href="regutils_8h.html#a1fa2460e32327ade49189c95740bc1b5">NC</a></div><div class="ttdeci">#define NC</div><div class="ttdef"><b>Definition:</b> <a href="regutils_8h_source.html#l00042">regutils.h:42</a></div></div>
<div class="ttc" id="aclassllvm_1_1PreservedAnalyses_html_a1258a1ff55557c27684010ebd7283712"><div class="ttname"><a href="classllvm_1_1PreservedAnalyses.html#a1258a1ff55557c27684010ebd7283712">llvm::PreservedAnalyses::all</a></div><div class="ttdeci">static PreservedAnalyses all()</div><div class="ttdoc">Construct a special preserved set that preserves all passes.</div><div class="ttdef"><b>Definition:</b> <a href="PassManager_8h_source.html#l00161">PassManager.h:161</a></div></div>
<div class="ttc" id="aclassllvm_1_1Error_html"><div class="ttname"><a href="classllvm_1_1Error.html">llvm::Error</a></div><div class="ttdoc">Lightweight error class with error context and mandatory checking.</div><div class="ttdef"><b>Definition:</b> <a href="llvm_2Support_2Error_8h_source.html#l00157">Error.h:157</a></div></div>
<div class="ttc" id="aGlobalVariable_8h_html"><div class="ttname"><a href="GlobalVariable_8h.html">GlobalVariable.h</a></div></div>
<div class="ttc" id="aInstrProfiling_8cpp_html_acad385080d103af2e3c47f9d4124827a"><div class="ttname"><a href="InstrProfiling_8cpp.html#acad385080d103af2e3c47f9d4124827a">getOrInsertValueProfilingCall</a></div><div class="ttdeci">static FunctionCallee getOrInsertValueProfilingCall(Module &amp;M, const TargetLibraryInfo &amp;TLI, ValueProfilingCallType CallType=ValueProfilingCallType::Default)</div><div class="ttdef"><b>Definition:</b> <a href="InstrProfiling_8cpp_source.html#l00597">InstrProfiling.cpp:597</a></div></div>
<div class="ttc" id="aCasting_8h_html"><div class="ttname"><a href="Casting_8h.html">Casting.h</a></div></div>
<div class="ttc" id="aFunction_8h_html"><div class="ttname"><a href="Function_8h.html">Function.h</a></div></div>
<div class="ttc" id="aInstrProfiling_8cpp_html_a02f3e811dd60ecb90ac73f992b73e048"><div class="ttname"><a href="InstrProfiling_8cpp.html#a02f3e811dd60ecb90ac73f992b73e048">enablesValueProfiling</a></div><div class="ttdeci">static bool enablesValueProfiling(const Module &amp;M)</div><div class="ttdef"><b>Definition:</b> <a href="InstrProfiling_8cpp_source.html#l00775">InstrProfiling.cpp:775</a></div></div>
<div class="ttc" id="aclassllvm_1_1TargetLibraryInfo_html"><div class="ttname"><a href="classllvm_1_1TargetLibraryInfo.html">llvm::TargetLibraryInfo</a></div><div class="ttdoc">Provides information about what library functions are available for the current target.</div><div class="ttdef"><b>Definition:</b> <a href="TargetLibraryInfo_8h_source.html#l00219">TargetLibraryInfo.h:219</a></div></div>
<div class="ttc" id="anamespacellvm_1_1TargetStackID_html_a71392100eb15ba746b1f898986f5d8a5af2af9eb94ff1bc08308bc738d744ee85"><div class="ttname"><a href="namespacellvm_1_1TargetStackID.html#a71392100eb15ba746b1f898986f5d8a5af2af9eb94ff1bc08308bc738d744ee85">llvm::TargetStackID::Default</a></div><div class="ttdeci">@ Default</div><div class="ttdef"><b>Definition:</b> <a href="TargetFrameLowering_8h_source.html#l00028">TargetFrameLowering.h:28</a></div></div>
<div class="ttc" id="aclassllvm_1_1InstrProfiling_html_a20487c4884c2053c68ca2838df9c76d1"><div class="ttname"><a href="classllvm_1_1InstrProfiling.html#a20487c4884c2053c68ca2838df9c76d1">llvm::InstrProfiling::run</a></div><div class="ttdeci">PreservedAnalyses run(Module &amp;M, ModuleAnalysisManager &amp;AM)</div><div class="ttdef"><b>Definition:</b> <a href="InstrProfiling_8cpp_source.html#l00411">InstrProfiling.cpp:411</a></div></div>
<div class="ttc" id="anamespacellvm_1_1MCID_html_ab357441fcd1ea1f9b0d27c12700f6023a2b016c207343046b2bac45e69e76dcec"><div class="ttname"><a href="namespacellvm_1_1MCID.html#ab357441fcd1ea1f9b0d27c12700f6023a2b016c207343046b2bac45e69e76dcec">llvm::MCID::Add</a></div><div class="ttdeci">@ Add</div><div class="ttdef"><b>Definition:</b> <a href="MCInstrDesc_8h_source.html#l00183">MCInstrDesc.h:183</a></div></div>
<div class="ttc" id="anamespacellvm_html_a0448108c43f3a226744d0a4c28c989f7"><div class="ttname"><a href="namespacellvm.html#a0448108c43f3a226744d0a4c28c989f7">llvm::makeArrayRef</a></div><div class="ttdeci">ArrayRef&lt; T &gt; makeArrayRef(const T &amp;OneElt)</div><div class="ttdoc">Construct an ArrayRef from a single element.</div><div class="ttdef"><b>Definition:</b> <a href="ArrayRef_8h_source.html#l00476">ArrayRef.h:476</a></div></div>
<div class="ttc" id="aclassllvm_1_1InstrProfIncrementInst_html"><div class="ttname"><a href="classllvm_1_1InstrProfIncrementInst.html">llvm::InstrProfIncrementInst</a></div><div class="ttdoc">This represents the llvm.instrprof_increment intrinsic.</div><div class="ttdef"><b>Definition:</b> <a href="IntrinsicInst_8h_source.html#l01106">IntrinsicInst.h:1106</a></div></div>
<div class="ttc" id="anamespacellvm_html_a50e3b943e26ec60c2aa24a7ff43a2d17"><div class="ttname"><a href="namespacellvm.html#a50e3b943e26ec60c2aa24a7ff43a2d17">llvm::getInstrProfSectionName</a></div><div class="ttdeci">std::string getInstrProfSectionName(InstrProfSectKind IPSK, Triple::ObjectFormatType OF, bool AddSegmentInfo=true)</div><div class="ttdoc">Return the name of the profile section corresponding to IPSK.</div><div class="ttdef"><b>Definition:</b> <a href="InstrProf_8cpp_source.html#l00175">InstrProf.cpp:175</a></div></div>
<div class="ttc" id="aclassllvm_1_1GlobalValue_html_aedfa75f0c85c4aa85b257f066fbea57ca6c93794d7b99cd433e96c53eadb15a6e"><div class="ttname"><a href="classllvm_1_1GlobalValue.html#aedfa75f0c85c4aa85b257f066fbea57ca6c93794d7b99cd433e96c53eadb15a6e">llvm::GlobalValue::ExternalLinkage</a></div><div class="ttdeci">@ ExternalLinkage</div><div class="ttdoc">Externally visible function.</div><div class="ttdef"><b>Definition:</b> <a href="GlobalValue_8h_source.html#l00048">GlobalValue.h:48</a></div></div>
<div class="ttc" id="aInstrProfiling_8cpp_html_a03bbe6ff5b8b0924a94e9d4d0f600ada"><div class="ttname"><a href="InstrProfiling_8cpp.html#a03bbe6ff5b8b0924a94e9d4d0f600ada">castToIncrementInst</a></div><div class="ttdeci">static InstrProfIncrementInst * castToIncrementInst(Instruction *Instr)</div><div class="ttdef"><b>Definition:</b> <a href="InstrProfiling_8cpp_source.html#l00438">InstrProfiling.cpp:438</a></div></div>
<div class="ttc" id="aclassllvm_1_1Type_html_a6e20e76960d952de088354cbcd14c3ab"><div class="ttname"><a href="classllvm_1_1Type.html#a6e20e76960d952de088354cbcd14c3ab">llvm::Type::getVoidTy</a></div><div class="ttdeci">static Type * getVoidTy(LLVMContext &amp;C)</div><div class="ttdef"><b>Definition:</b> <a href="Type_8cpp_source.html#l00186">Type.cpp:186</a></div></div>
<div class="ttc" id="aclassllvm_1_1GlobalValue_html_aedfa75f0c85c4aa85b257f066fbea57ca04ed141708c0fd16723d212502b046ae"><div class="ttname"><a href="classllvm_1_1GlobalValue.html#aedfa75f0c85c4aa85b257f066fbea57ca04ed141708c0fd16723d212502b046ae">llvm::GlobalValue::PrivateLinkage</a></div><div class="ttdeci">@ PrivateLinkage</div><div class="ttdoc">Like Internal, but omit from symbol table.</div><div class="ttdef"><b>Definition:</b> <a href="GlobalValue_8h_source.html#l00056">GlobalValue.h:56</a></div></div>
<div class="ttc" id="aInstructions_8h_html"><div class="ttname"><a href="Instructions_8h.html">Instructions.h</a></div></div>
<div class="ttc" id="anamespacellvm_html_a911e8357d1f938a45e20b725872e703e"><div class="ttname"><a href="namespacellvm.html#a911e8357d1f938a45e20b725872e703e">llvm::getInstrProfValueProfMemOpFuncName</a></div><div class="ttdeci">StringRef getInstrProfValueProfMemOpFuncName()</div><div class="ttdoc">Return the name profile runtime entry point to do memop size value profiling.</div><div class="ttdef"><b>Definition:</b> <a href="InstrProf_8h_source.html#l00079">InstrProf.h:79</a></div></div>
<div class="ttc" id="aclassllvm_1_1User_html_addec638786f763d967811b45cb662f1f"><div class="ttname"><a href="classllvm_1_1User.html#addec638786f763d967811b45cb662f1f">llvm::User::getNumOperands</a></div><div class="ttdeci">unsigned getNumOperands() const</div><div class="ttdef"><b>Definition:</b> <a href="User_8h_source.html#l00191">User.h:191</a></div></div>
<div class="ttc" id="aInstrProfiling_8cpp_html_aeea8848370a2113b69a2c4b4f4ad2473"><div class="ttname"><a href="InstrProfiling_8cpp.html#aeea8848370a2113b69a2c4b4f4ad2473">needsRuntimeRegistrationOfSectionRange</a></div><div class="ttdeci">static bool needsRuntimeRegistrationOfSectionRange(const Triple &amp;TT)</div><div class="ttdef"><b>Definition:</b> <a href="InstrProfiling_8cpp_source.html#l00822">InstrProfiling.cpp:822</a></div></div>
<div class="ttc" id="aSmallVector_8h_html"><div class="ttname"><a href="SmallVector_8h.html">SmallVector.h</a></div></div>
<div class="ttc" id="astructllvm_1_1InstrProfOptions_html_a453a285abbd4055529d0113e34222fde"><div class="ttname"><a href="structllvm_1_1InstrProfOptions.html#a453a285abbd4055529d0113e34222fde">llvm::InstrProfOptions::NoRedZone</a></div><div class="ttdeci">bool NoRedZone</div><div class="ttdef"><b>Definition:</b> <a href="Instrumentation_8h_source.html#l00123">Instrumentation.h:123</a></div></div>
<div class="ttc" id="aclassllvm_1_1Triple_html_a3d98f3cc4fe2adddfa98dc0dbee55bdb"><div class="ttname"><a href="classllvm_1_1Triple.html#a3d98f3cc4fe2adddfa98dc0dbee55bdb">llvm::Triple::isOSNetBSD</a></div><div class="ttdeci">bool isOSNetBSD() const</div><div class="ttdef"><b>Definition:</b> <a href="Triple_8h_source.html#l00502">Triple.h:502</a></div></div>
<div class="ttc" id="aDominators_8h_html"><div class="ttname"><a href="Dominators_8h.html">Dominators.h</a></div></div>
<div class="ttc" id="anamespacellvm_html_a50d466b105ab8b79cf83a6b49cf54886"><div class="ttname"><a href="namespacellvm.html#a50d466b105ab8b79cf83a6b49cf54886">llvm::getCoverageUnusedNamesVarName</a></div><div class="ttdeci">StringRef getCoverageUnusedNamesVarName()</div><div class="ttdoc">Return the name of the internal variable recording the array of PGO name vars referenced by the cover...</div><div class="ttdef"><b>Definition:</b> <a href="InstrProf_8h_source.html#l00115">InstrProf.h:115</a></div></div>
<div class="ttc" id="aModuleUtils_8h_html"><div class="ttname"><a href="ModuleUtils_8h.html">ModuleUtils.h</a></div></div>
<div class="ttc" id="anamespacellvm_html_a62e221646506147afeb0bf76d8e3366a"><div class="ttname"><a href="namespacellvm.html#a62e221646506147afeb0bf76d8e3366a">llvm::getInstrProfCounterBiasVarName</a></div><div class="ttdeci">StringRef getInstrProfCounterBiasVarName()</div><div class="ttdef"><b>Definition:</b> <a href="InstrProf_8h_source.html#l00158">InstrProf.h:158</a></div></div>
<div class="ttc" id="aclassllvm_1_1Instruction_html_a1a7f07aaef6a3bee130bf0e0f0536802"><div class="ttname"><a href="classllvm_1_1Instruction.html#a1a7f07aaef6a3bee130bf0e0f0536802">llvm::Instruction::getParent</a></div><div class="ttdeci">const BasicBlock * getParent() const</div><div class="ttdef"><b>Definition:</b> <a href="IR_2Instruction_8h_source.html#l00094">Instruction.h:94</a></div></div>
<div class="ttc" id="aclassllvm_1_1ArrayRef_html_a85ffb6531d4cda988ea81f18d4e56fb7"><div class="ttname"><a href="classllvm_1_1ArrayRef.html#a85ffb6531d4cda988ea81f18d4e56fb7">llvm::ArrayRef::size</a></div><div class="ttdeci">size_t size() const</div><div class="ttdoc">size - Get the array size.</div><div class="ttdef"><b>Definition:</b> <a href="ArrayRef_8h_source.html#l00165">ArrayRef.h:165</a></div></div>
<div class="ttc" id="anamespacellvm_html_a81b52e18d84e3cc61df7e897bba1b259"><div class="ttname"><a href="namespacellvm.html#a81b52e18d84e3cc61df7e897bba1b259">llvm::max</a></div><div class="ttdeci">Align max(MaybeAlign Lhs, Align Rhs)</div><div class="ttdef"><b>Definition:</b> <a href="Alignment_8h_source.html#l00340">Alignment.h:340</a></div></div>
<div class="ttc" id="aclassllvm_1_1InstrProfValueProfileInst_html_a6c30393f7531cacd1523d099392b5031"><div class="ttname"><a href="classllvm_1_1InstrProfValueProfileInst.html#a6c30393f7531cacd1523d099392b5031">llvm::InstrProfValueProfileInst::getName</a></div><div class="ttdeci">GlobalVariable * getName() const</div><div class="ttdef"><b>Definition:</b> <a href="IntrinsicInst_8h_source.html#l01155">IntrinsicInst.h:1155</a></div></div>
<div class="ttc" id="aclassllvm_1_1FunctionCallee_html"><div class="ttname"><a href="classllvm_1_1FunctionCallee.html">llvm::FunctionCallee</a></div><div class="ttdoc">A handy container for a FunctionType+Callee-pointer pair, which can be passed around as a single enti...</div><div class="ttdef"><b>Definition:</b> <a href="DerivedTypes_8h_source.html#l00164">DerivedTypes.h:164</a></div></div>
<div class="ttc" id="aclassllvm_1_1SmallVectorImpl_html"><div class="ttname"><a href="classllvm_1_1SmallVectorImpl.html">llvm::SmallVectorImpl&lt; BasicBlock * &gt;</a></div></div>
<div class="ttc" id="aclassllvm_1_1Type_html_a87f56db834c58ca630624956ecf6972f"><div class="ttname"><a href="classllvm_1_1Type.html#a87f56db834c58ca630624956ecf6972f">llvm::Type::getInt16Ty</a></div><div class="ttdeci">static IntegerType * getInt16Ty(LLVMContext &amp;C)</div><div class="ttdef"><b>Definition:</b> <a href="Type_8cpp_source.html#l00202">Type.cpp:202</a></div></div>
<div class="ttc" id="aDerivedTypes_8h_html"><div class="ttname"><a href="DerivedTypes_8h.html">DerivedTypes.h</a></div></div>
<div class="ttc" id="aclassllvm_1_1AnalysisManager_html"><div class="ttname"><a href="classllvm_1_1AnalysisManager.html">llvm::AnalysisManager</a></div><div class="ttdoc">A container for analyses that lazily runs them and caches their results.</div><div class="ttdef"><b>Definition:</b> <a href="PassManager_8h_source.html#l00615">PassManager.h:615</a></div></div>
<div class="ttc" id="aclassllvm_1_1GlobalValue_html_a29e0b1c558b350347e2652b35b26fea8"><div class="ttname"><a href="classllvm_1_1GlobalValue.html#a29e0b1c558b350347e2652b35b26fea8">llvm::GlobalValue::getValueType</a></div><div class="ttdeci">Type * getValueType() const</div><div class="ttdef"><b>Definition:</b> <a href="GlobalValue_8h_source.html#l00273">GlobalValue.h:273</a></div></div>
<div class="ttc" id="aclassllvm_1_1InnerAnalysisManagerProxy_html"><div class="ttname"><a href="classllvm_1_1InnerAnalysisManagerProxy.html">llvm::InnerAnalysisManagerProxy</a></div><div class="ttdoc">An analysis over an &quot;outer&quot; IR unit that provides access to an analysis manager over an &quot;inner&quot; IR un...</div><div class="ttdef"><b>Definition:</b> <a href="PassManager_8h_source.html#l00926">PassManager.h:928</a></div></div>
<div class="ttc" id="aclassllvm_1_1CallInst_html"><div class="ttname"><a href="classllvm_1_1CallInst.html">llvm::CallInst</a></div><div class="ttdoc">This class represents a function call, abstracting a target machine's calling convention.</div><div class="ttdef"><b>Definition:</b> <a href="Instructions_8h_source.html#l01475">Instructions.h:1475</a></div></div>
<div class="ttc" id="anamespacellvm_html_acbf6b95a912f653f2e224154413cf534"><div class="ttname"><a href="namespacellvm.html#acbf6b95a912f653f2e224154413cf534">llvm::getInstrProfValueProfFuncName</a></div><div class="ttdeci">StringRef getInstrProfValueProfFuncName()</div><div class="ttdoc">Return the name profile runtime entry point to do value profiling for a given site.</div><div class="ttdef"><b>Definition:</b> <a href="InstrProf_8h_source.html#l00073">InstrProf.h:73</a></div></div>
<div class="ttc" id="alib_2CodeGen_2README_8txt_html_a09776db24cf586ec9f1e18f3bae14099"><div class="ttname"><a href="lib_2CodeGen_2README_8txt.html#a09776db24cf586ec9f1e18f3bae14099">BB</a></div><div class="ttdeci">Common register allocation spilling lr str ldr sxth r3 ldr mla r4 can lr mov lr str ldr sxth r3 mla r4 and then merge mul and lr str ldr sxth r3 mla r4 It also increase the likelihood the store may become dead bb27 Successors according to LLVM BB</div><div class="ttdef"><b>Definition:</b> <a href="lib_2CodeGen_2README_8txt_source.html#l00039">README.txt:39</a></div></div>
<div class="ttc" id="aclassllvm_1_1AnalysisUsage_html_ae5c60fd282ee894c87ea02c3f0fcb6d0"><div class="ttname"><a href="classllvm_1_1AnalysisUsage.html#ae5c60fd282ee894c87ea02c3f0fcb6d0">llvm::AnalysisUsage::addRequired</a></div><div class="ttdeci">AnalysisUsage &amp; addRequired()</div><div class="ttdef"><b>Definition:</b> <a href="PassAnalysisSupport_8h_source.html#l00075">PassAnalysisSupport.h:75</a></div></div>
<div class="ttc" id="anamespacellvm_1_1AMDGPU_1_1HSAMD_1_1Kernel_1_1Key_html_a1958a762261549463a280bac3274d6d5"><div class="ttname"><a href="namespacellvm_1_1AMDGPU_1_1HSAMD_1_1Kernel_1_1Key.html#a1958a762261549463a280bac3274d6d5">llvm::AMDGPU::HSAMD::Kernel::Key::Args</a></div><div class="ttdeci">constexpr char Args[]</div><div class="ttdoc">Key for Kernel::Metadata::mArgs.</div><div class="ttdef"><b>Definition:</b> <a href="AMDGPUMetadata_8h_source.html#l00389">AMDGPUMetadata.h:389</a></div></div>
<div class="ttc" id="anamespacellvm_html_ac030f6d03b674c2d132fd54fb60c9f26"><div class="ttname"><a href="namespacellvm.html#ac030f6d03b674c2d132fd54fb60c9f26">llvm::appendToGlobalCtors</a></div><div class="ttdeci">void appendToGlobalCtors(Module &amp;M, Function *F, int Priority, Constant *Data=nullptr)</div><div class="ttdoc">Append F to the list of global ctors of module M with the given Priority.</div><div class="ttdef"><b>Definition:</b> <a href="ModuleUtils_8cpp_source.html#l00066">ModuleUtils.cpp:66</a></div></div>
<div class="ttc" id="aclassllvm_1_1User_html_abe1de1520a21f77ac57cc210bf0fb0b4"><div class="ttname"><a href="classllvm_1_1User.html#abe1de1520a21f77ac57cc210bf0fb0b4">llvm::User::getOperand</a></div><div class="ttdeci">Value * getOperand(unsigned i) const</div><div class="ttdef"><b>Definition:</b> <a href="User_8h_source.html#l00169">User.h:169</a></div></div>
<div class="ttc" id="anamespacellvm_html_a4c851da0fc911f82efe3ddda6664e5d1"><div class="ttname"><a href="namespacellvm.html#a4c851da0fc911f82efe3ddda6664e5d1">llvm::getInstrProfDataVarPrefix</a></div><div class="ttdeci">StringRef getInstrProfDataVarPrefix()</div><div class="ttdoc">Return the name prefix of variables containing per-function control data.</div><div class="ttdef"><b>Definition:</b> <a href="InstrProf_8h_source.html#l00087">InstrProf.h:87</a></div></div>
<div class="ttc" id="astructllvm_1_1cl_1_1desc_html"><div class="ttname"><a href="structllvm_1_1cl_1_1desc.html">llvm::cl::desc</a></div><div class="ttdef"><b>Definition:</b> <a href="CommandLine_8h_source.html#l00414">CommandLine.h:414</a></div></div>
<div class="ttc" id="aclassllvm_1_1GlobalObject_html_a744c0517c37679d036cc7f381a12f60f"><div class="ttname"><a href="classllvm_1_1GlobalObject.html#a744c0517c37679d036cc7f381a12f60f">llvm::GlobalObject::setAlignment</a></div><div class="ttdeci">void setAlignment(MaybeAlign Align)</div><div class="ttdef"><b>Definition:</b> <a href="Globals_8cpp_source.html#l00117">Globals.cpp:117</a></div></div>
<div class="ttc" id="aclassllvm_1_1InstrProfIncrementInst_html_a5a112055860338913dddf58db3b853a8"><div class="ttname"><a href="classllvm_1_1InstrProfIncrementInst.html#a5a112055860338913dddf58db3b853a8">llvm::InstrProfIncrementInst::getName</a></div><div class="ttdeci">GlobalVariable * getName() const</div><div class="ttdef"><b>Definition:</b> <a href="IntrinsicInst_8h_source.html#l01115">IntrinsicInst.h:1115</a></div></div>
<div class="ttc" id="aclassllvm_1_1SSAUpdater_html"><div class="ttname"><a href="classllvm_1_1SSAUpdater.html">llvm::SSAUpdater</a></div><div class="ttdoc">Helper class for SSA formation on a set of values defined in multiple blocks.</div><div class="ttdef"><b>Definition:</b> <a href="SSAUpdater_8h_source.html#l00038">SSAUpdater.h:38</a></div></div>
<div class="ttc" id="aclassllvm_1_1StringRef_html_ad3ec22d51ff579206e10783e872a0327"><div class="ttname"><a href="classllvm_1_1StringRef.html#ad3ec22d51ff579206e10783e872a0327">llvm::StringRef::size</a></div><div class="ttdeci">LLVM_NODISCARD size_t size() const</div><div class="ttdoc">size - Get the string size.</div><div class="ttdef"><b>Definition:</b> <a href="StringRef_8h_source.html#l00157">StringRef.h:157</a></div></div>
<div class="ttc" id="aBasicBlockUtils_8h_html"><div class="ttname"><a href="BasicBlockUtils_8h.html">BasicBlockUtils.h</a></div></div>
<div class="ttc" id="anamespacellvm_html_a431d60cd32f837830187f89607e8658d"><div class="ttname"><a href="namespacellvm.html#a431d60cd32f837830187f89607e8658d">llvm::initializeInstrProfilingLegacyPassPass</a></div><div class="ttdeci">void initializeInstrProfilingLegacyPassPass(PassRegistry &amp;)</div></div>
<div class="ttc" id="aclassllvm_1_1GlobalValue_html_aedfa75f0c85c4aa85b257f066fbea57caf2b592edf18170e7aff4e8f3bae3360c"><div class="ttname"><a href="classllvm_1_1GlobalValue.html#aedfa75f0c85c4aa85b257f066fbea57caf2b592edf18170e7aff4e8f3bae3360c">llvm::GlobalValue::LinkOnceODRLinkage</a></div><div class="ttdeci">@ LinkOnceODRLinkage</div><div class="ttdoc">Same, but only replaced by something equivalent.</div><div class="ttdef"><b>Definition:</b> <a href="GlobalValue_8h_source.html#l00051">GlobalValue.h:51</a></div></div>
<div class="ttc" id="aclassllvm_1_1GlobalValue_html_aa242d8ab89216c14beab812e07009b2a"><div class="ttname"><a href="classllvm_1_1GlobalValue.html#aa242d8ab89216c14beab812e07009b2a">llvm::GlobalValue::setVisibility</a></div><div class="ttdeci">void setVisibility(VisibilityTypes V)</div><div class="ttdef"><b>Definition:</b> <a href="GlobalValue_8h_source.html#l00235">GlobalValue.h:235</a></div></div>
<div class="ttc" id="aInitializePasses_8h_html"><div class="ttname"><a href="InitializePasses_8h.html">InitializePasses.h</a></div></div>
<div class="ttc" id="aclassllvm_1_1Value_html"><div class="ttname"><a href="classllvm_1_1Value.html">llvm::Value</a></div><div class="ttdoc">LLVM Value Representation.</div><div class="ttdef"><b>Definition:</b> <a href="Value_8h_source.html#l00075">Value.h:75</a></div></div>
<div class="ttc" id="anamespacellvm_html_acee06462d45644f09bfa298c8a862c0a"><div class="ttname"><a href="namespacellvm.html#acee06462d45644f09bfa298c8a862c0a">llvm::getInstrProfRegFuncName</a></div><div class="ttdeci">StringRef getInstrProfRegFuncName()</div><div class="ttdoc">Return the name of the runtime interface that registers per-function control data for one instrumente...</div><div class="ttdef"><b>Definition:</b> <a href="InstrProf_8h_source.html#l00130">InstrProf.h:130</a></div></div>
<div class="ttc" id="aclassllvm_1_1TargetLibraryAnalysis_html"><div class="ttname"><a href="classllvm_1_1TargetLibraryAnalysis.html">llvm::TargetLibraryAnalysis</a></div><div class="ttdoc">Analysis pass providing the TargetLibraryInfo.</div><div class="ttdef"><b>Definition:</b> <a href="TargetLibraryInfo_8h_source.html#l00438">TargetLibraryInfo.h:438</a></div></div>
<div class="ttc" id="aclassllvm_1_1SmallPtrSetImpl_html_a6bc6fb89fe2e91c25559a8631f56e27e"><div class="ttname"><a href="classllvm_1_1SmallPtrSetImpl.html#a6bc6fb89fe2e91c25559a8631f56e27e">llvm::SmallPtrSetImpl::insert</a></div><div class="ttdeci">std::pair&lt; iterator, bool &gt; insert(PtrType Ptr)</div><div class="ttdoc">Inserts Ptr if and only if there is no element in the container equal to Ptr.</div><div class="ttdef"><b>Definition:</b> <a href="SmallPtrSet_8h_source.html#l00364">SmallPtrSet.h:364</a></div></div>
<div class="ttc" id="anamespacellvm_1_1Intrinsic_html_a80add6b3b1cdaec560907995127adc16"><div class="ttname"><a href="namespacellvm_1_1Intrinsic.html#a80add6b3b1cdaec560907995127adc16">llvm::Intrinsic::ID</a></div><div class="ttdeci">unsigned ID</div><div class="ttdef"><b>Definition:</b> <a href="TargetTransformInfo_8h_source.html#l00038">TargetTransformInfo.h:38</a></div></div>
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated on Tue Feb 8 2022 04:54:41 for LLVM by&#160;<a href="http://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.8.20
</small></address>
</body>
</html>
