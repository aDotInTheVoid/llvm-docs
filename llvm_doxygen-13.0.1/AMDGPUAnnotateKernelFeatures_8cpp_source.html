<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.20"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>LLVM: lib/Target/AMDGPU/AMDGPUAnnotateKernelFeatures.cpp Source File</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<script type="text/x-mathjax-config">
  MathJax.Hub.Config({
    extensions: ["tex2jax.js"],
    jax: ["input/TeX","output/HTML-CSS"],
});
</script>
<script type="text/javascript" async="async" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.7/MathJax.js/MathJax.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">LLVM
   &#160;<span id="projectnumber">13.0.1</span>
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.20 -->
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',false,false,'search.php','Search');
});
/* @license-end */</script>
<div id="main-nav"></div>
<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="dir_97aefd0d527b934f1d99a682da8fe6a9.html">lib</a></li><li class="navelem"><a class="el" href="dir_794e483eb1cc7921d35fd149d9cc325b.html">Target</a></li><li class="navelem"><a class="el" href="dir_447ce995d6e35417de5ec3060e97c93e.html">AMDGPU</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="headertitle">
<div class="title">AMDGPUAnnotateKernelFeatures.cpp</div>  </div>
</div><!--header-->
<div class="contents">
<a href="AMDGPUAnnotateKernelFeatures_8cpp.html">Go to the documentation of this file.</a><div class="fragment"><div class="line"><a name="l00001"></a><span class="lineno">    1</span>&#160;<span class="comment">//===- AMDGPUAnnotateKernelFeaturesPass.cpp -------------------------------===//</span></div>
<div class="line"><a name="l00002"></a><span class="lineno">    2</span>&#160;<span class="comment">//</span></div>
<div class="line"><a name="l00003"></a><span class="lineno">    3</span>&#160;<span class="comment">// Part of the LLVM Project, under the Apache License v2.0 with LLVM Exceptions.</span></div>
<div class="line"><a name="l00004"></a><span class="lineno">    4</span>&#160;<span class="comment">// See https://llvm.org/LICENSE.txt for license information.</span></div>
<div class="line"><a name="l00005"></a><span class="lineno">    5</span>&#160;<span class="comment">// SPDX-License-Identifier: Apache-2.0 WITH LLVM-exception</span></div>
<div class="line"><a name="l00006"></a><span class="lineno">    6</span>&#160;<span class="comment">//</span></div>
<div class="line"><a name="l00007"></a><span class="lineno">    7</span>&#160;<span class="comment">//===----------------------------------------------------------------------===//</span></div>
<div class="line"><a name="l00008"></a><span class="lineno">    8</span>&#160;<span class="comment">//</span><span class="comment"></span></div>
<div class="line"><a name="l00009"></a><span class="lineno">    9</span>&#160;<span class="comment">/// \file This pass adds target attributes to functions which use intrinsics</span></div>
<div class="line"><a name="l00010"></a><span class="lineno">   10</span>&#160;<span class="comment">/// which will impact calling convention lowering.</span></div>
<div class="line"><a name="l00011"></a><span class="lineno">   11</span>&#160;<span class="comment"></span><span class="comment">//</span></div>
<div class="line"><a name="l00012"></a><span class="lineno">   12</span>&#160;<span class="comment">//===----------------------------------------------------------------------===//</span></div>
<div class="line"><a name="l00013"></a><span class="lineno">   13</span>&#160; </div>
<div class="line"><a name="l00014"></a><span class="lineno">   14</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="AMDGPU_8h.html">AMDGPU.h</a>&quot;</span></div>
<div class="line"><a name="l00015"></a><span class="lineno">   15</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="GCNSubtarget_8h.html">GCNSubtarget.h</a>&quot;</span></div>
<div class="line"><a name="l00016"></a><span class="lineno">   16</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="CallGraph_8h.html">llvm/Analysis/CallGraph.h</a>&quot;</span></div>
<div class="line"><a name="l00017"></a><span class="lineno">   17</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="CallGraphSCCPass_8h.html">llvm/Analysis/CallGraphSCCPass.h</a>&quot;</span></div>
<div class="line"><a name="l00018"></a><span class="lineno">   18</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="TargetPassConfig_8h.html">llvm/CodeGen/TargetPassConfig.h</a>&quot;</span></div>
<div class="line"><a name="l00019"></a><span class="lineno">   19</span>&#160;<span class="preprocessor">#include &quot;llvm/IR/IntrinsicsAMDGPU.h&quot;</span></div>
<div class="line"><a name="l00020"></a><span class="lineno">   20</span>&#160;<span class="preprocessor">#include &quot;llvm/IR/IntrinsicsR600.h&quot;</span></div>
<div class="line"><a name="l00021"></a><span class="lineno">   21</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="llvm_2Target_2TargetMachine_8h.html">llvm/Target/TargetMachine.h</a>&quot;</span></div>
<div class="line"><a name="l00022"></a><span class="lineno">   22</span>&#160; </div>
<div class="line"><a name="l00023"></a><span class="lineno"><a class="line" href="AMDGPUAnnotateKernelFeatures_8cpp.html#ad78e062f62e0d6e453941fb4ca843e4d">   23</a></span>&#160;<span class="preprocessor">#define DEBUG_TYPE &quot;amdgpu-annotate-kernel-features&quot;</span></div>
<div class="line"><a name="l00024"></a><span class="lineno">   24</span>&#160; </div>
<div class="line"><a name="l00025"></a><span class="lineno">   25</span>&#160;<span class="keyword">using namespace </span><a class="code" href="namespacellvm.html">llvm</a>;</div>
<div class="line"><a name="l00026"></a><span class="lineno">   26</span>&#160; </div>
<div class="line"><a name="l00027"></a><span class="lineno">   27</span>&#160;<span class="keyword">namespace </span>{</div>
<div class="line"><a name="l00028"></a><span class="lineno">   28</span>&#160;<span class="keyword">static</span> constexpr <a class="code" href="classllvm_1_1StringLiteral.html">StringLiteral</a> <a class="code" href="AMDGPUAttributor_8cpp.html#af51b9b4f8bc5b41db21eb7d5b75bbbc2">ImplicitAttrNames</a>[] = {</div>
<div class="line"><a name="l00029"></a><span class="lineno">   29</span>&#160;    <span class="comment">// X ids unnecessarily propagated to kernels.</span></div>
<div class="line"><a name="l00030"></a><span class="lineno">   30</span>&#160;    <span class="stringliteral">&quot;amdgpu-work-item-id-x&quot;</span>,  <span class="stringliteral">&quot;amdgpu-work-item-id-y&quot;</span>,</div>
<div class="line"><a name="l00031"></a><span class="lineno">   31</span>&#160;    <span class="stringliteral">&quot;amdgpu-work-item-id-z&quot;</span>,  <span class="stringliteral">&quot;amdgpu-work-group-id-x&quot;</span>,</div>
<div class="line"><a name="l00032"></a><span class="lineno">   32</span>&#160;    <span class="stringliteral">&quot;amdgpu-work-group-id-y&quot;</span>, <span class="stringliteral">&quot;amdgpu-work-group-id-z&quot;</span>,</div>
<div class="line"><a name="l00033"></a><span class="lineno">   33</span>&#160;    <span class="stringliteral">&quot;amdgpu-dispatch-ptr&quot;</span>,    <span class="stringliteral">&quot;amdgpu-dispatch-id&quot;</span>,</div>
<div class="line"><a name="l00034"></a><span class="lineno">   34</span>&#160;    <span class="stringliteral">&quot;amdgpu-queue-ptr&quot;</span>,       <span class="stringliteral">&quot;amdgpu-implicitarg-ptr&quot;</span>};</div>
<div class="line"><a name="l00035"></a><span class="lineno">   35</span>&#160; </div>
<div class="line"><a name="l00036"></a><span class="lineno">   36</span>&#160;<span class="keyword">class </span>AMDGPUAnnotateKernelFeatures : <span class="keyword">public</span> <a class="code" href="classllvm_1_1CallGraphSCCPass.html">CallGraphSCCPass</a> {</div>
<div class="line"><a name="l00037"></a><span class="lineno">   37</span>&#160;<span class="keyword">private</span>:</div>
<div class="line"><a name="l00038"></a><span class="lineno">   38</span>&#160;  <span class="keyword">const</span> <a class="code" href="classllvm_1_1TargetMachine.html">TargetMachine</a> *<a class="code" href="PassBuilderBindings_8cpp.html#ab76052bb166c65901edb603a3e1f03ab">TM</a> = <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l00039"></a><span class="lineno">   39</span>&#160;  <a class="code" href="classllvm_1_1SmallVector.html">SmallVector&lt;CallGraphNode*, 8&gt;</a> <a class="code" href="namespacellvm_1_1rdf.html#adff32edf02469b3f29d410c0a4d68be3">NodeList</a>;</div>
<div class="line"><a name="l00040"></a><span class="lineno">   40</span>&#160; </div>
<div class="line"><a name="l00041"></a><span class="lineno">   41</span>&#160;  <span class="keywordtype">bool</span> addFeatureAttributes(<a class="code" href="classllvm_1_1Function.html">Function</a> &amp;<a class="code" href="MD5_8cpp.html#a96d73bbd7af15cb1fc38c3f4a3bd82e9">F</a>);</div>
<div class="line"><a name="l00042"></a><span class="lineno">   42</span>&#160;  <span class="keywordtype">bool</span> processUniformWorkGroupAttribute();</div>
<div class="line"><a name="l00043"></a><span class="lineno">   43</span>&#160;  <span class="keywordtype">bool</span> propagateUniformWorkGroupAttribute(<a class="code" href="classllvm_1_1Function.html">Function</a> &amp;Caller, <a class="code" href="classllvm_1_1Function.html">Function</a> &amp;<a class="code" href="AMDGPULibCalls_8cpp.html#a537c835c34f0b44b6ad2696643754390">Callee</a>);</div>
<div class="line"><a name="l00044"></a><span class="lineno">   44</span>&#160; </div>
<div class="line"><a name="l00045"></a><span class="lineno">   45</span>&#160;<span class="keyword">public</span>:</div>
<div class="line"><a name="l00046"></a><span class="lineno">   46</span>&#160;  <span class="keyword">static</span> <span class="keywordtype">char</span> <a class="code" href="namespacellvm_1_1Intrinsic.html#a80add6b3b1cdaec560907995127adc16">ID</a>;</div>
<div class="line"><a name="l00047"></a><span class="lineno">   47</span>&#160; </div>
<div class="line"><a name="l00048"></a><span class="lineno">   48</span>&#160;  AMDGPUAnnotateKernelFeatures() : <a class="code" href="classllvm_1_1CallGraphSCCPass.html">CallGraphSCCPass</a>(<a class="code" href="namespacellvm_1_1Intrinsic.html#a80add6b3b1cdaec560907995127adc16">ID</a>) {}</div>
<div class="line"><a name="l00049"></a><span class="lineno">   49</span>&#160; </div>
<div class="line"><a name="l00050"></a><span class="lineno">   50</span>&#160;  <span class="keywordtype">bool</span> doInitialization(<a class="code" href="classllvm_1_1CallGraph.html">CallGraph</a> &amp;CG) <span class="keyword">override</span>;</div>
<div class="line"><a name="l00051"></a><span class="lineno">   51</span>&#160;  <span class="keywordtype">bool</span> runOnSCC(<a class="code" href="classllvm_1_1CallGraphSCC.html">CallGraphSCC</a> &amp;<a class="code" href="namespacellvm_1_1AMDGPU_1_1CPol.html#a7d79a4b341da8ac60b91c1f4b1ea42c4aca1659af59093b2b14c2f8aad41e8e2a">SCC</a>) <span class="keyword">override</span>;</div>
<div class="line"><a name="l00052"></a><span class="lineno">   52</span>&#160; </div>
<div class="line"><a name="l00053"></a><span class="lineno">   53</span>&#160;  <a class="code" href="classllvm_1_1StringRef.html">StringRef</a> getPassName()<span class="keyword"> const override </span>{</div>
<div class="line"><a name="l00054"></a><span class="lineno">   54</span>&#160;    <span class="keywordflow">return</span> <span class="stringliteral">&quot;AMDGPU Annotate Kernel Features&quot;</span>;</div>
<div class="line"><a name="l00055"></a><span class="lineno">   55</span>&#160;  }</div>
<div class="line"><a name="l00056"></a><span class="lineno">   56</span>&#160; </div>
<div class="line"><a name="l00057"></a><span class="lineno">   57</span>&#160;  <span class="keywordtype">void</span> getAnalysisUsage(<a class="code" href="classllvm_1_1AnalysisUsage.html">AnalysisUsage</a> &amp;AU)<span class="keyword"> const override </span>{</div>
<div class="line"><a name="l00058"></a><span class="lineno">   58</span>&#160;    AU.<a class="code" href="classllvm_1_1AnalysisUsage.html#af22b06a6a4f9df80454071685a0d6a02">setPreservesAll</a>();</div>
<div class="line"><a name="l00059"></a><span class="lineno">   59</span>&#160;    <a class="code" href="classllvm_1_1CallGraphSCCPass.html#a6cc67c5a27b53bc940d292c0aeb6aba3">CallGraphSCCPass::getAnalysisUsage</a>(AU);</div>
<div class="line"><a name="l00060"></a><span class="lineno">   60</span>&#160;  }</div>
<div class="line"><a name="l00061"></a><span class="lineno">   61</span>&#160; </div>
<div class="line"><a name="l00062"></a><span class="lineno">   62</span>&#160;  <span class="keyword">static</span> <span class="keywordtype">bool</span> visitConstantExpr(<span class="keyword">const</span> <a class="code" href="classllvm_1_1ConstantExpr.html">ConstantExpr</a> *CE);</div>
<div class="line"><a name="l00063"></a><span class="lineno">   63</span>&#160;  <span class="keyword">static</span> <span class="keywordtype">bool</span> visitConstantExprsRecursively(</div>
<div class="line"><a name="l00064"></a><span class="lineno">   64</span>&#160;    <span class="keyword">const</span> <a class="code" href="classllvm_1_1Constant.html">Constant</a> *EntryC,</div>
<div class="line"><a name="l00065"></a><span class="lineno">   65</span>&#160;    <a class="code" href="classllvm_1_1SmallPtrSet.html">SmallPtrSet&lt;const Constant *, 8&gt;</a> &amp;ConstantExprVisited, <span class="keywordtype">bool</span> IsFunc,</div>
<div class="line"><a name="l00066"></a><span class="lineno">   66</span>&#160;    <span class="keywordtype">bool</span> HasApertureRegs);</div>
<div class="line"><a name="l00067"></a><span class="lineno">   67</span>&#160;};</div>
<div class="line"><a name="l00068"></a><span class="lineno">   68</span>&#160; </div>
<div class="line"><a name="l00069"></a><span class="lineno">   69</span>&#160;} <span class="comment">// end anonymous namespace</span></div>
<div class="line"><a name="l00070"></a><span class="lineno">   70</span>&#160; </div>
<div class="line"><a name="l00071"></a><span class="lineno">   71</span>&#160;<span class="keywordtype">char</span> <a class="code" href="namespacellvm_1_1Intrinsic.html#a80add6b3b1cdaec560907995127adc16">AMDGPUAnnotateKernelFeatures::ID</a> = 0;</div>
<div class="line"><a name="l00072"></a><span class="lineno">   72</span>&#160; </div>
<div class="line"><a name="l00073"></a><span class="lineno"><a class="line" href="namespacellvm.html#a13ce4816876838986d290fa0c392626c">   73</a></span>&#160;<span class="keywordtype">char</span> &amp;<a class="code" href="namespacellvm.html#a13ce4816876838986d290fa0c392626c">llvm::AMDGPUAnnotateKernelFeaturesID</a> = <a class="code" href="namespacellvm_1_1Intrinsic.html#a80add6b3b1cdaec560907995127adc16">AMDGPUAnnotateKernelFeatures::ID</a>;</div>
<div class="line"><a name="l00074"></a><span class="lineno">   74</span>&#160; </div>
<div class="line"><a name="l00075"></a><span class="lineno"><a class="line" href="AMDGPUAnnotateKernelFeatures_8cpp.html#aeba77c73b22751eee7b54fbd95094b01">   75</a></span>&#160;<a class="code" href="AMDGPUAnnotateKernelFeatures_8cpp.html#aeba77c73b22751eee7b54fbd95094b01">INITIALIZE_PASS</a>(AMDGPUAnnotateKernelFeatures, <a class="code" href="AMDGPUAnnotateKernelFeatures_8cpp.html#ad78e062f62e0d6e453941fb4ca843e4d">DEBUG_TYPE</a>,</div>
<div class="line"><a name="l00076"></a><span class="lineno">   76</span>&#160;                <span class="stringliteral">&quot;Add AMDGPU function attributes&quot;</span>, <span class="keyword">false</span>, <span class="keyword">false</span>)</div>
<div class="line"><a name="l00077"></a><span class="lineno">   77</span>&#160; </div>
<div class="line"><a name="l00078"></a><span class="lineno">   78</span>&#160; </div>
<div class="line"><a name="l00079"></a><span class="lineno">   79</span>&#160;<span class="comment">// The queue ptr is only needed when casting to flat, not from it.</span></div>
<div class="line"><a name="l00080"></a><span class="lineno">   80</span>&#160;static <span class="keywordtype">bool</span> <a class="code" href="AMDGPUAnnotateKernelFeatures_8cpp.html#a3d2260c3ae78f911d4ba4ed38ef90972">castRequiresQueuePtr</a>(<span class="keywordtype">unsigned</span> SrcAS) {</div>
<div class="line"><a name="l00081"></a><span class="lineno">   81</span>&#160;  <span class="keywordflow">return</span> SrcAS == <a class="code" href="namespacellvm_1_1AMDGPUAS.html#ab16da35bdfcc21c512a66e8c4eba94a5a77b1c964e2ff99057bf5e75140457abe">AMDGPUAS::LOCAL_ADDRESS</a> || SrcAS == <a class="code" href="namespacellvm_1_1AMDGPUAS.html#ab16da35bdfcc21c512a66e8c4eba94a5aec164f45437d8827346f2d8ec645479a">AMDGPUAS::PRIVATE_ADDRESS</a>;</div>
<div class="line"><a name="l00082"></a><span class="lineno">   82</span>&#160;}</div>
<div class="line"><a name="l00083"></a><span class="lineno">   83</span>&#160; </div>
<div class="line"><a name="l00084"></a><span class="lineno"><a class="line" href="AMDGPUAnnotateKernelFeatures_8cpp.html#a3d2260c3ae78f911d4ba4ed38ef90972">   84</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">bool</span> <a class="code" href="AMDGPUAnnotateKernelFeatures_8cpp.html#a3d2260c3ae78f911d4ba4ed38ef90972">castRequiresQueuePtr</a>(<span class="keyword">const</span> <a class="code" href="classllvm_1_1AddrSpaceCastInst.html">AddrSpaceCastInst</a> *ASC) {</div>
<div class="line"><a name="l00085"></a><span class="lineno">   85</span>&#160;  <span class="keywordflow">return</span> <a class="code" href="AMDGPUAnnotateKernelFeatures_8cpp.html#a3d2260c3ae78f911d4ba4ed38ef90972">castRequiresQueuePtr</a>(ASC-&gt;<a class="code" href="classllvm_1_1AddrSpaceCastInst.html#ab292fdaede434f81cf224662e9de7e35">getSrcAddressSpace</a>());</div>
<div class="line"><a name="l00086"></a><span class="lineno">   86</span>&#160;}</div>
<div class="line"><a name="l00087"></a><span class="lineno">   87</span>&#160; </div>
<div class="line"><a name="l00088"></a><span class="lineno"><a class="line" href="AMDGPUAnnotateKernelFeatures_8cpp.html#a10dea573184b324cee05982745c07f27">   88</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">bool</span> <a class="code" href="AMDGPUAnnotateKernelFeatures_8cpp.html#a10dea573184b324cee05982745c07f27">isDSAddress</a>(<span class="keyword">const</span> <a class="code" href="classllvm_1_1Constant.html">Constant</a> *<a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a>) {</div>
<div class="line"><a name="l00089"></a><span class="lineno">   89</span>&#160;  <span class="keyword">const</span> <a class="code" href="classllvm_1_1GlobalValue.html">GlobalValue</a> *GV = dyn_cast&lt;GlobalValue&gt;(<a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a>);</div>
<div class="line"><a name="l00090"></a><span class="lineno">   90</span>&#160;  <span class="keywordflow">if</span> (!GV)</div>
<div class="line"><a name="l00091"></a><span class="lineno">   91</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l00092"></a><span class="lineno">   92</span>&#160;  <span class="keywordtype">unsigned</span> AS = GV-&gt;<a class="code" href="classllvm_1_1GlobalValue.html#a0557bd873ed2afae533faa02e3168d70">getAddressSpace</a>();</div>
<div class="line"><a name="l00093"></a><span class="lineno">   93</span>&#160;  <span class="keywordflow">return</span> AS == <a class="code" href="namespacellvm_1_1AMDGPUAS.html#ab16da35bdfcc21c512a66e8c4eba94a5a77b1c964e2ff99057bf5e75140457abe">AMDGPUAS::LOCAL_ADDRESS</a> || AS == <a class="code" href="namespacellvm_1_1AMDGPUAS.html#ab16da35bdfcc21c512a66e8c4eba94a5a5b71ba6fa435ec288aba849e113721a7">AMDGPUAS::REGION_ADDRESS</a>;</div>
<div class="line"><a name="l00094"></a><span class="lineno">   94</span>&#160;}</div>
<div class="line"><a name="l00095"></a><span class="lineno">   95</span>&#160; </div>
<div class="line"><a name="l00096"></a><span class="lineno">   96</span>&#160;<span class="keywordtype">bool</span> AMDGPUAnnotateKernelFeatures::visitConstantExpr(<span class="keyword">const</span> <a class="code" href="classllvm_1_1ConstantExpr.html">ConstantExpr</a> *CE) {</div>
<div class="line"><a name="l00097"></a><span class="lineno">   97</span>&#160;  <span class="keywordflow">if</span> (CE-&gt;<a class="code" href="classllvm_1_1ConstantExpr.html#ad7c657cd513c76f7d328ffdf0fc46f2b">getOpcode</a>() == Instruction::AddrSpaceCast) {</div>
<div class="line"><a name="l00098"></a><span class="lineno">   98</span>&#160;    <span class="keywordtype">unsigned</span> SrcAS = CE-&gt;<a class="code" href="classllvm_1_1User.html#abe1de1520a21f77ac57cc210bf0fb0b4">getOperand</a>(0)-&gt;<a class="code" href="classllvm_1_1Value.html#a6393a2d4fe7e10b28a0dcc35f881567b">getType</a>()-&gt;<a class="code" href="classllvm_1_1Type.html#a5ab2d0b0f0b8ceec3b907184e7567197">getPointerAddressSpace</a>();</div>
<div class="line"><a name="l00099"></a><span class="lineno">   99</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="AMDGPUAnnotateKernelFeatures_8cpp.html#a3d2260c3ae78f911d4ba4ed38ef90972">castRequiresQueuePtr</a>(SrcAS);</div>
<div class="line"><a name="l00100"></a><span class="lineno">  100</span>&#160;  }</div>
<div class="line"><a name="l00101"></a><span class="lineno">  101</span>&#160; </div>
<div class="line"><a name="l00102"></a><span class="lineno">  102</span>&#160;  <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l00103"></a><span class="lineno">  103</span>&#160;}</div>
<div class="line"><a name="l00104"></a><span class="lineno">  104</span>&#160; </div>
<div class="line"><a name="l00105"></a><span class="lineno">  105</span>&#160;<span class="keywordtype">bool</span> AMDGPUAnnotateKernelFeatures::visitConstantExprsRecursively(</div>
<div class="line"><a name="l00106"></a><span class="lineno">  106</span>&#160;  <span class="keyword">const</span> <a class="code" href="classllvm_1_1Constant.html">Constant</a> *EntryC,</div>
<div class="line"><a name="l00107"></a><span class="lineno">  107</span>&#160;  <a class="code" href="classllvm_1_1SmallPtrSet.html">SmallPtrSet&lt;const Constant *, 8&gt;</a> &amp;ConstantExprVisited,</div>
<div class="line"><a name="l00108"></a><span class="lineno">  108</span>&#160;  <span class="keywordtype">bool</span> IsFunc, <span class="keywordtype">bool</span> HasApertureRegs) {</div>
<div class="line"><a name="l00109"></a><span class="lineno">  109</span>&#160; </div>
<div class="line"><a name="l00110"></a><span class="lineno">  110</span>&#160;  <span class="keywordflow">if</span> (!ConstantExprVisited.<a class="code" href="classllvm_1_1SmallPtrSetImpl.html#a6bc6fb89fe2e91c25559a8631f56e27e">insert</a>(EntryC).second)</div>
<div class="line"><a name="l00111"></a><span class="lineno">  111</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l00112"></a><span class="lineno">  112</span>&#160; </div>
<div class="line"><a name="l00113"></a><span class="lineno">  113</span>&#160;  <a class="code" href="classllvm_1_1SmallVector.html">SmallVector&lt;const Constant *, 16&gt;</a> Stack;</div>
<div class="line"><a name="l00114"></a><span class="lineno">  114</span>&#160;  Stack.push_back(EntryC);</div>
<div class="line"><a name="l00115"></a><span class="lineno">  115</span>&#160; </div>
<div class="line"><a name="l00116"></a><span class="lineno">  116</span>&#160;  <span class="keywordflow">while</span> (!Stack.empty()) {</div>
<div class="line"><a name="l00117"></a><span class="lineno">  117</span>&#160;    <span class="keyword">const</span> <a class="code" href="classllvm_1_1Constant.html">Constant</a> *<a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a> = Stack.<a class="code" href="classllvm_1_1SmallVectorImpl.html#a07e23ae504e2b8c72fd055f93ded8899">pop_back_val</a>();</div>
<div class="line"><a name="l00118"></a><span class="lineno">  118</span>&#160; </div>
<div class="line"><a name="l00119"></a><span class="lineno">  119</span>&#160;    <span class="comment">// We need to trap on DS globals in non-entry functions.</span></div>
<div class="line"><a name="l00120"></a><span class="lineno">  120</span>&#160;    <span class="keywordflow">if</span> (IsFunc &amp;&amp; <a class="code" href="AMDGPUAnnotateKernelFeatures_8cpp.html#a10dea573184b324cee05982745c07f27">isDSAddress</a>(<a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a>))</div>
<div class="line"><a name="l00121"></a><span class="lineno">  121</span>&#160;      <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l00122"></a><span class="lineno">  122</span>&#160; </div>
<div class="line"><a name="l00123"></a><span class="lineno">  123</span>&#160;    <span class="comment">// Check this constant expression.</span></div>
<div class="line"><a name="l00124"></a><span class="lineno">  124</span>&#160;    <span class="keywordflow">if</span> (<span class="keyword">const</span> <span class="keyword">auto</span> *CE = dyn_cast&lt;ConstantExpr&gt;(<a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a>)) {</div>
<div class="line"><a name="l00125"></a><span class="lineno">  125</span>&#160;      <span class="keywordflow">if</span> (!HasApertureRegs &amp;&amp; visitConstantExpr(CE))</div>
<div class="line"><a name="l00126"></a><span class="lineno">  126</span>&#160;        <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l00127"></a><span class="lineno">  127</span>&#160;    }</div>
<div class="line"><a name="l00128"></a><span class="lineno">  128</span>&#160; </div>
<div class="line"><a name="l00129"></a><span class="lineno">  129</span>&#160;    <span class="comment">// Visit all sub-expressions.</span></div>
<div class="line"><a name="l00130"></a><span class="lineno">  130</span>&#160;    <span class="keywordflow">for</span> (<span class="keyword">const</span> <a class="code" href="classllvm_1_1Use.html">Use</a> &amp;U : <a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a>-&gt;operands()) {</div>
<div class="line"><a name="l00131"></a><span class="lineno">  131</span>&#160;      <span class="keyword">const</span> <span class="keyword">auto</span> *OpC = dyn_cast&lt;Constant&gt;(U);</div>
<div class="line"><a name="l00132"></a><span class="lineno">  132</span>&#160;      <span class="keywordflow">if</span> (!OpC)</div>
<div class="line"><a name="l00133"></a><span class="lineno">  133</span>&#160;        <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l00134"></a><span class="lineno">  134</span>&#160; </div>
<div class="line"><a name="l00135"></a><span class="lineno">  135</span>&#160;      <span class="keywordflow">if</span> (!ConstantExprVisited.<a class="code" href="classllvm_1_1SmallPtrSetImpl.html#a6bc6fb89fe2e91c25559a8631f56e27e">insert</a>(OpC).second)</div>
<div class="line"><a name="l00136"></a><span class="lineno">  136</span>&#160;        <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l00137"></a><span class="lineno">  137</span>&#160; </div>
<div class="line"><a name="l00138"></a><span class="lineno">  138</span>&#160;      Stack.push_back(OpC);</div>
<div class="line"><a name="l00139"></a><span class="lineno">  139</span>&#160;    }</div>
<div class="line"><a name="l00140"></a><span class="lineno">  140</span>&#160;  }</div>
<div class="line"><a name="l00141"></a><span class="lineno">  141</span>&#160; </div>
<div class="line"><a name="l00142"></a><span class="lineno">  142</span>&#160;  <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l00143"></a><span class="lineno">  143</span>&#160;}</div>
<div class="line"><a name="l00144"></a><span class="lineno">  144</span>&#160; </div>
<div class="line"><a name="l00145"></a><span class="lineno">  145</span>&#160;<span class="comment">// We do not need to note the x workitem or workgroup id because they are always</span></div>
<div class="line"><a name="l00146"></a><span class="lineno">  146</span>&#160;<span class="comment">// initialized.</span></div>
<div class="line"><a name="l00147"></a><span class="lineno">  147</span>&#160;<span class="comment">//</span></div>
<div class="line"><a name="l00148"></a><span class="lineno">  148</span>&#160;<span class="comment">// TODO: We should not add the attributes if the known compile time workgroup</span></div>
<div class="line"><a name="l00149"></a><span class="lineno">  149</span>&#160;<span class="comment">// size is 1 for y/z.</span></div>
<div class="line"><a name="l00150"></a><span class="lineno"><a class="line" href="AMDGPUAnnotateKernelFeatures_8cpp.html#a4f3eae09dd5dbc07a527d13014924710">  150</a></span>&#160;<span class="keyword">static</span> <a class="code" href="classllvm_1_1StringRef.html">StringRef</a> <a class="code" href="AMDGPUAnnotateKernelFeatures_8cpp.html#a4f3eae09dd5dbc07a527d13014924710">intrinsicToAttrName</a>(<a class="code" href="namespacellvm_1_1Intrinsic.html#a80add6b3b1cdaec560907995127adc16">Intrinsic::ID</a> <a class="code" href="namespacellvm_1_1Intrinsic.html#a80add6b3b1cdaec560907995127adc16">ID</a>,</div>
<div class="line"><a name="l00151"></a><span class="lineno">  151</span>&#160;                                     <span class="keywordtype">bool</span> &amp;NonKernelOnly,</div>
<div class="line"><a name="l00152"></a><span class="lineno">  152</span>&#160;                                     <span class="keywordtype">bool</span> &amp;IsQueuePtr) {</div>
<div class="line"><a name="l00153"></a><span class="lineno">  153</span>&#160;  <span class="keywordflow">switch</span> (<a class="code" href="namespacellvm_1_1Intrinsic.html#a80add6b3b1cdaec560907995127adc16">ID</a>) {</div>
<div class="line"><a name="l00154"></a><span class="lineno">  154</span>&#160;  <span class="keywordflow">case</span> Intrinsic::amdgcn_workitem_id_x:</div>
<div class="line"><a name="l00155"></a><span class="lineno">  155</span>&#160;    NonKernelOnly = <span class="keyword">true</span>;</div>
<div class="line"><a name="l00156"></a><span class="lineno">  156</span>&#160;    <span class="keywordflow">return</span> <span class="stringliteral">&quot;amdgpu-work-item-id-x&quot;</span>;</div>
<div class="line"><a name="l00157"></a><span class="lineno">  157</span>&#160;  <span class="keywordflow">case</span> Intrinsic::amdgcn_workgroup_id_x:</div>
<div class="line"><a name="l00158"></a><span class="lineno">  158</span>&#160;    NonKernelOnly = <span class="keyword">true</span>;</div>
<div class="line"><a name="l00159"></a><span class="lineno">  159</span>&#160;    <span class="keywordflow">return</span> <span class="stringliteral">&quot;amdgpu-work-group-id-x&quot;</span>;</div>
<div class="line"><a name="l00160"></a><span class="lineno">  160</span>&#160;  <span class="keywordflow">case</span> Intrinsic::amdgcn_workitem_id_y:</div>
<div class="line"><a name="l00161"></a><span class="lineno">  161</span>&#160;  <span class="keywordflow">case</span> Intrinsic::r600_read_tidig_y:</div>
<div class="line"><a name="l00162"></a><span class="lineno">  162</span>&#160;    <span class="keywordflow">return</span> <span class="stringliteral">&quot;amdgpu-work-item-id-y&quot;</span>;</div>
<div class="line"><a name="l00163"></a><span class="lineno">  163</span>&#160;  <span class="keywordflow">case</span> Intrinsic::amdgcn_workitem_id_z:</div>
<div class="line"><a name="l00164"></a><span class="lineno">  164</span>&#160;  <span class="keywordflow">case</span> Intrinsic::r600_read_tidig_z:</div>
<div class="line"><a name="l00165"></a><span class="lineno">  165</span>&#160;    <span class="keywordflow">return</span> <span class="stringliteral">&quot;amdgpu-work-item-id-z&quot;</span>;</div>
<div class="line"><a name="l00166"></a><span class="lineno">  166</span>&#160;  <span class="keywordflow">case</span> Intrinsic::amdgcn_workgroup_id_y:</div>
<div class="line"><a name="l00167"></a><span class="lineno">  167</span>&#160;  <span class="keywordflow">case</span> Intrinsic::r600_read_tgid_y:</div>
<div class="line"><a name="l00168"></a><span class="lineno">  168</span>&#160;    <span class="keywordflow">return</span> <span class="stringliteral">&quot;amdgpu-work-group-id-y&quot;</span>;</div>
<div class="line"><a name="l00169"></a><span class="lineno">  169</span>&#160;  <span class="keywordflow">case</span> Intrinsic::amdgcn_workgroup_id_z:</div>
<div class="line"><a name="l00170"></a><span class="lineno">  170</span>&#160;  <span class="keywordflow">case</span> Intrinsic::r600_read_tgid_z:</div>
<div class="line"><a name="l00171"></a><span class="lineno">  171</span>&#160;    <span class="keywordflow">return</span> <span class="stringliteral">&quot;amdgpu-work-group-id-z&quot;</span>;</div>
<div class="line"><a name="l00172"></a><span class="lineno">  172</span>&#160;  <span class="keywordflow">case</span> Intrinsic::amdgcn_dispatch_ptr:</div>
<div class="line"><a name="l00173"></a><span class="lineno">  173</span>&#160;    <span class="keywordflow">return</span> <span class="stringliteral">&quot;amdgpu-dispatch-ptr&quot;</span>;</div>
<div class="line"><a name="l00174"></a><span class="lineno">  174</span>&#160;  <span class="keywordflow">case</span> Intrinsic::amdgcn_dispatch_id:</div>
<div class="line"><a name="l00175"></a><span class="lineno">  175</span>&#160;    <span class="keywordflow">return</span> <span class="stringliteral">&quot;amdgpu-dispatch-id&quot;</span>;</div>
<div class="line"><a name="l00176"></a><span class="lineno">  176</span>&#160;  <span class="keywordflow">case</span> Intrinsic::amdgcn_kernarg_segment_ptr:</div>
<div class="line"><a name="l00177"></a><span class="lineno">  177</span>&#160;    <span class="keywordflow">return</span> <span class="stringliteral">&quot;amdgpu-kernarg-segment-ptr&quot;</span>;</div>
<div class="line"><a name="l00178"></a><span class="lineno">  178</span>&#160;  <span class="keywordflow">case</span> Intrinsic::amdgcn_implicitarg_ptr:</div>
<div class="line"><a name="l00179"></a><span class="lineno">  179</span>&#160;    <span class="keywordflow">return</span> <span class="stringliteral">&quot;amdgpu-implicitarg-ptr&quot;</span>;</div>
<div class="line"><a name="l00180"></a><span class="lineno">  180</span>&#160;  <span class="keywordflow">case</span> Intrinsic::amdgcn_queue_ptr:</div>
<div class="line"><a name="l00181"></a><span class="lineno">  181</span>&#160;  <span class="keywordflow">case</span> Intrinsic::amdgcn_is_shared:</div>
<div class="line"><a name="l00182"></a><span class="lineno">  182</span>&#160;  <span class="keywordflow">case</span> Intrinsic::amdgcn_is_private:</div>
<div class="line"><a name="l00183"></a><span class="lineno">  183</span>&#160;    <span class="comment">// TODO: Does not require queue ptr on gfx9+</span></div>
<div class="line"><a name="l00184"></a><span class="lineno">  184</span>&#160;  <span class="keywordflow">case</span> Intrinsic::trap:</div>
<div class="line"><a name="l00185"></a><span class="lineno">  185</span>&#160;  <span class="keywordflow">case</span> Intrinsic::debugtrap:</div>
<div class="line"><a name="l00186"></a><span class="lineno">  186</span>&#160;    IsQueuePtr = <span class="keyword">true</span>;</div>
<div class="line"><a name="l00187"></a><span class="lineno">  187</span>&#160;    <span class="keywordflow">return</span> <span class="stringliteral">&quot;amdgpu-queue-ptr&quot;</span>;</div>
<div class="line"><a name="l00188"></a><span class="lineno">  188</span>&#160;  <span class="keywordflow">default</span>:</div>
<div class="line"><a name="l00189"></a><span class="lineno">  189</span>&#160;    <span class="keywordflow">return</span> <span class="stringliteral">&quot;&quot;</span>;</div>
<div class="line"><a name="l00190"></a><span class="lineno">  190</span>&#160;  }</div>
<div class="line"><a name="l00191"></a><span class="lineno">  191</span>&#160;}</div>
<div class="line"><a name="l00192"></a><span class="lineno">  192</span>&#160; </div>
<div class="line"><a name="l00193"></a><span class="lineno"><a class="line" href="AMDGPUAnnotateKernelFeatures_8cpp.html#a332e3a49fe8b88f8808745c6c60a6973">  193</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">bool</span> <a class="code" href="AMDGPUAnnotateKernelFeatures_8cpp.html#a332e3a49fe8b88f8808745c6c60a6973">handleAttr</a>(<a class="code" href="classllvm_1_1Function.html">Function</a> &amp;Parent, <span class="keyword">const</span> <a class="code" href="classllvm_1_1Function.html">Function</a> &amp;<a class="code" href="AMDGPULibCalls_8cpp.html#a537c835c34f0b44b6ad2696643754390">Callee</a>,</div>
<div class="line"><a name="l00194"></a><span class="lineno">  194</span>&#160;                       <a class="code" href="classllvm_1_1StringRef.html">StringRef</a> <a class="code" href="namespacellvm_1_1GraphProgram.html#a0ad4685976f8c4d4a697a53fbe05d10b">Name</a>) {</div>
<div class="line"><a name="l00195"></a><span class="lineno">  195</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="AMDGPULibCalls_8cpp.html#a537c835c34f0b44b6ad2696643754390">Callee</a>.hasFnAttribute(<a class="code" href="namespacellvm_1_1GraphProgram.html#a0ad4685976f8c4d4a697a53fbe05d10b">Name</a>)) {</div>
<div class="line"><a name="l00196"></a><span class="lineno">  196</span>&#160;    Parent.<a class="code" href="classllvm_1_1Function.html#ac277aebd990c638895a05b0ffae6f7ec">addFnAttr</a>(<a class="code" href="namespacellvm_1_1GraphProgram.html#a0ad4685976f8c4d4a697a53fbe05d10b">Name</a>);</div>
<div class="line"><a name="l00197"></a><span class="lineno">  197</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l00198"></a><span class="lineno">  198</span>&#160;  }</div>
<div class="line"><a name="l00199"></a><span class="lineno">  199</span>&#160;  <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l00200"></a><span class="lineno">  200</span>&#160;}</div>
<div class="line"><a name="l00201"></a><span class="lineno">  201</span>&#160; </div>
<div class="line"><a name="l00202"></a><span class="lineno"><a class="line" href="AMDGPUAnnotateKernelFeatures_8cpp.html#aaeaac88b68785c897f4b4c9103cc9da5">  202</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code" href="AMDGPUAnnotateKernelFeatures_8cpp.html#aaeaac88b68785c897f4b4c9103cc9da5">copyFeaturesToFunction</a>(<a class="code" href="classllvm_1_1Function.html">Function</a> &amp;Parent, <span class="keyword">const</span> <a class="code" href="classllvm_1_1Function.html">Function</a> &amp;<a class="code" href="AMDGPULibCalls_8cpp.html#a537c835c34f0b44b6ad2696643754390">Callee</a>,</div>
<div class="line"><a name="l00203"></a><span class="lineno">  203</span>&#160;                                   <span class="keywordtype">bool</span> &amp;NeedQueuePtr) {</div>
<div class="line"><a name="l00204"></a><span class="lineno">  204</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="AMDGPUAnnotateKernelFeatures_8cpp.html#a332e3a49fe8b88f8808745c6c60a6973">handleAttr</a>(Parent, <a class="code" href="AMDGPULibCalls_8cpp.html#a537c835c34f0b44b6ad2696643754390">Callee</a>, <span class="stringliteral">&quot;amdgpu-queue-ptr&quot;</span>))</div>
<div class="line"><a name="l00205"></a><span class="lineno">  205</span>&#160;    NeedQueuePtr = <span class="keyword">true</span>;</div>
<div class="line"><a name="l00206"></a><span class="lineno">  206</span>&#160; </div>
<div class="line"><a name="l00207"></a><span class="lineno">  207</span>&#160;  <span class="keywordflow">for</span> (<a class="code" href="classllvm_1_1StringRef.html">StringRef</a> AttrName : <a class="code" href="AMDGPUAttributor_8cpp.html#af51b9b4f8bc5b41db21eb7d5b75bbbc2">ImplicitAttrNames</a>)</div>
<div class="line"><a name="l00208"></a><span class="lineno">  208</span>&#160;    <a class="code" href="AMDGPUAnnotateKernelFeatures_8cpp.html#a332e3a49fe8b88f8808745c6c60a6973">handleAttr</a>(Parent, <a class="code" href="AMDGPULibCalls_8cpp.html#a537c835c34f0b44b6ad2696643754390">Callee</a>, AttrName);</div>
<div class="line"><a name="l00209"></a><span class="lineno">  209</span>&#160;}</div>
<div class="line"><a name="l00210"></a><span class="lineno">  210</span>&#160; </div>
<div class="line"><a name="l00211"></a><span class="lineno">  211</span>&#160;<span class="keywordtype">bool</span> AMDGPUAnnotateKernelFeatures::processUniformWorkGroupAttribute() {</div>
<div class="line"><a name="l00212"></a><span class="lineno">  212</span>&#160;  <span class="keywordtype">bool</span> Changed = <span class="keyword">false</span>;</div>
<div class="line"><a name="l00213"></a><span class="lineno">  213</span>&#160; </div>
<div class="line"><a name="l00214"></a><span class="lineno">  214</span>&#160;  <span class="keywordflow">for</span> (<span class="keyword">auto</span> *Node : <a class="code" href="namespacellvm.html#a469101ea87b8b432a1b4f7935c97f35c">reverse</a>(<a class="code" href="structNodeList.html">NodeList</a>)) {</div>
<div class="line"><a name="l00215"></a><span class="lineno">  215</span>&#160;    <a class="code" href="classllvm_1_1Function.html">Function</a> *Caller = Node-&gt;getFunction();</div>
<div class="line"><a name="l00216"></a><span class="lineno">  216</span>&#160; </div>
<div class="line"><a name="l00217"></a><span class="lineno">  217</span>&#160;    <span class="keywordflow">for</span> (<span class="keyword">auto</span> <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a> : *Node) {</div>
<div class="line"><a name="l00218"></a><span class="lineno">  218</span>&#160;      <a class="code" href="classllvm_1_1Function.html">Function</a> *<a class="code" href="AMDGPULibCalls_8cpp.html#a537c835c34f0b44b6ad2696643754390">Callee</a> = std::get&lt;1&gt;(<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>)-&gt;getFunction();</div>
<div class="line"><a name="l00219"></a><span class="lineno">  219</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="AMDGPULibCalls_8cpp.html#a537c835c34f0b44b6ad2696643754390">Callee</a>)</div>
<div class="line"><a name="l00220"></a><span class="lineno">  220</span>&#160;        Changed = propagateUniformWorkGroupAttribute(*Caller, *<a class="code" href="AMDGPULibCalls_8cpp.html#a537c835c34f0b44b6ad2696643754390">Callee</a>);</div>
<div class="line"><a name="l00221"></a><span class="lineno">  221</span>&#160;    }</div>
<div class="line"><a name="l00222"></a><span class="lineno">  222</span>&#160;  }</div>
<div class="line"><a name="l00223"></a><span class="lineno">  223</span>&#160; </div>
<div class="line"><a name="l00224"></a><span class="lineno">  224</span>&#160;  <span class="keywordflow">return</span> Changed;</div>
<div class="line"><a name="l00225"></a><span class="lineno">  225</span>&#160;}</div>
<div class="line"><a name="l00226"></a><span class="lineno">  226</span>&#160; </div>
<div class="line"><a name="l00227"></a><span class="lineno">  227</span>&#160;<span class="keywordtype">bool</span> AMDGPUAnnotateKernelFeatures::propagateUniformWorkGroupAttribute(</div>
<div class="line"><a name="l00228"></a><span class="lineno">  228</span>&#160;       <a class="code" href="classllvm_1_1Function.html">Function</a> &amp;Caller, <a class="code" href="classllvm_1_1Function.html">Function</a> &amp;<a class="code" href="AMDGPULibCalls_8cpp.html#a537c835c34f0b44b6ad2696643754390">Callee</a>) {</div>
<div class="line"><a name="l00229"></a><span class="lineno">  229</span>&#160; </div>
<div class="line"><a name="l00230"></a><span class="lineno">  230</span>&#160;  <span class="comment">// Check for externally defined function</span></div>
<div class="line"><a name="l00231"></a><span class="lineno">  231</span>&#160;  <span class="keywordflow">if</span> (!<a class="code" href="AMDGPULibCalls_8cpp.html#a537c835c34f0b44b6ad2696643754390">Callee</a>.hasExactDefinition()) {</div>
<div class="line"><a name="l00232"></a><span class="lineno">  232</span>&#160;    <a class="code" href="AMDGPULibCalls_8cpp.html#a537c835c34f0b44b6ad2696643754390">Callee</a>.addFnAttr(<span class="stringliteral">&quot;uniform-work-group-size&quot;</span>, <span class="stringliteral">&quot;false&quot;</span>);</div>
<div class="line"><a name="l00233"></a><span class="lineno">  233</span>&#160;    <span class="keywordflow">if</span> (!Caller.<a class="code" href="classllvm_1_1Function.html#aa84505c70a7f4ae97082df0b91bd7a9a">hasFnAttribute</a>(<span class="stringliteral">&quot;uniform-work-group-size&quot;</span>))</div>
<div class="line"><a name="l00234"></a><span class="lineno">  234</span>&#160;      Caller.<a class="code" href="classllvm_1_1Function.html#ac277aebd990c638895a05b0ffae6f7ec">addFnAttr</a>(<span class="stringliteral">&quot;uniform-work-group-size&quot;</span>, <span class="stringliteral">&quot;false&quot;</span>);</div>
<div class="line"><a name="l00235"></a><span class="lineno">  235</span>&#160; </div>
<div class="line"><a name="l00236"></a><span class="lineno">  236</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l00237"></a><span class="lineno">  237</span>&#160;  }</div>
<div class="line"><a name="l00238"></a><span class="lineno">  238</span>&#160;  <span class="comment">// Check if the Caller has the attribute</span></div>
<div class="line"><a name="l00239"></a><span class="lineno">  239</span>&#160;  <span class="keywordflow">if</span> (Caller.<a class="code" href="classllvm_1_1Function.html#aa84505c70a7f4ae97082df0b91bd7a9a">hasFnAttribute</a>(<span class="stringliteral">&quot;uniform-work-group-size&quot;</span>)) {</div>
<div class="line"><a name="l00240"></a><span class="lineno">  240</span>&#160;    <span class="comment">// Check if the value of the attribute is true</span></div>
<div class="line"><a name="l00241"></a><span class="lineno">  241</span>&#160;    <span class="keywordflow">if</span> (Caller.<a class="code" href="classllvm_1_1Function.html#a3fe81bf8ec280aadc0e37a4b11408fa6">getFnAttribute</a>(<span class="stringliteral">&quot;uniform-work-group-size&quot;</span>)</div>
<div class="line"><a name="l00242"></a><span class="lineno">  242</span>&#160;        .<a class="code" href="classllvm_1_1Attribute.html#a968930aea9d9efa8d46dd890fce75643">getValueAsString</a>().<a class="code" href="classllvm_1_1StringRef.html#aec5c723a077f34100bba97e1df17c6b2">equals</a>(<span class="stringliteral">&quot;true&quot;</span>)) {</div>
<div class="line"><a name="l00243"></a><span class="lineno">  243</span>&#160;      <span class="comment">// Propagate the attribute to the Callee, if it does not have it</span></div>
<div class="line"><a name="l00244"></a><span class="lineno">  244</span>&#160;      <span class="keywordflow">if</span> (!<a class="code" href="AMDGPULibCalls_8cpp.html#a537c835c34f0b44b6ad2696643754390">Callee</a>.hasFnAttribute(<span class="stringliteral">&quot;uniform-work-group-size&quot;</span>)) {</div>
<div class="line"><a name="l00245"></a><span class="lineno">  245</span>&#160;        <a class="code" href="AMDGPULibCalls_8cpp.html#a537c835c34f0b44b6ad2696643754390">Callee</a>.addFnAttr(<span class="stringliteral">&quot;uniform-work-group-size&quot;</span>, <span class="stringliteral">&quot;true&quot;</span>);</div>
<div class="line"><a name="l00246"></a><span class="lineno">  246</span>&#160;        <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l00247"></a><span class="lineno">  247</span>&#160;      }</div>
<div class="line"><a name="l00248"></a><span class="lineno">  248</span>&#160;    } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00249"></a><span class="lineno">  249</span>&#160;      <a class="code" href="AMDGPULibCalls_8cpp.html#a537c835c34f0b44b6ad2696643754390">Callee</a>.addFnAttr(<span class="stringliteral">&quot;uniform-work-group-size&quot;</span>, <span class="stringliteral">&quot;false&quot;</span>);</div>
<div class="line"><a name="l00250"></a><span class="lineno">  250</span>&#160;      <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l00251"></a><span class="lineno">  251</span>&#160;    }</div>
<div class="line"><a name="l00252"></a><span class="lineno">  252</span>&#160;  } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00253"></a><span class="lineno">  253</span>&#160;    <span class="comment">// If the attribute is absent, set it as false</span></div>
<div class="line"><a name="l00254"></a><span class="lineno">  254</span>&#160;    Caller.<a class="code" href="classllvm_1_1Function.html#ac277aebd990c638895a05b0ffae6f7ec">addFnAttr</a>(<span class="stringliteral">&quot;uniform-work-group-size&quot;</span>, <span class="stringliteral">&quot;false&quot;</span>);</div>
<div class="line"><a name="l00255"></a><span class="lineno">  255</span>&#160;    <a class="code" href="AMDGPULibCalls_8cpp.html#a537c835c34f0b44b6ad2696643754390">Callee</a>.addFnAttr(<span class="stringliteral">&quot;uniform-work-group-size&quot;</span>, <span class="stringliteral">&quot;false&quot;</span>);</div>
<div class="line"><a name="l00256"></a><span class="lineno">  256</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l00257"></a><span class="lineno">  257</span>&#160;  }</div>
<div class="line"><a name="l00258"></a><span class="lineno">  258</span>&#160;  <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l00259"></a><span class="lineno">  259</span>&#160;}</div>
<div class="line"><a name="l00260"></a><span class="lineno">  260</span>&#160; </div>
<div class="line"><a name="l00261"></a><span class="lineno">  261</span>&#160;<span class="keywordtype">bool</span> AMDGPUAnnotateKernelFeatures::addFeatureAttributes(<a class="code" href="classllvm_1_1Function.html">Function</a> &amp;<a class="code" href="MD5_8cpp.html#a96d73bbd7af15cb1fc38c3f4a3bd82e9">F</a>) {</div>
<div class="line"><a name="l00262"></a><span class="lineno">  262</span>&#160;  <span class="keyword">const</span> <a class="code" href="classllvm_1_1GCNSubtarget.html">GCNSubtarget</a> &amp;<a class="code" href="namespacellvm_1_1ARM__MB.html#ad70272e2a9ec2a7e3a497458e1edbc85aed0b9bef861c96eee19e89db753db7b2">ST</a> = <a class="code" href="PassBuilderBindings_8cpp.html#ab76052bb166c65901edb603a3e1f03ab">TM</a>-&gt;getSubtarget&lt;<a class="code" href="classllvm_1_1GCNSubtarget.html">GCNSubtarget</a>&gt;(<a class="code" href="MD5_8cpp.html#a96d73bbd7af15cb1fc38c3f4a3bd82e9">F</a>);</div>
<div class="line"><a name="l00263"></a><span class="lineno">  263</span>&#160;  <span class="keywordtype">bool</span> HasApertureRegs = <a class="code" href="namespacellvm_1_1ARM__MB.html#ad70272e2a9ec2a7e3a497458e1edbc85aed0b9bef861c96eee19e89db753db7b2">ST</a>.hasApertureRegs();</div>
<div class="line"><a name="l00264"></a><span class="lineno">  264</span>&#160;  <a class="code" href="classllvm_1_1SmallPtrSet.html">SmallPtrSet&lt;const Constant *, 8&gt;</a> ConstantExprVisited;</div>
<div class="line"><a name="l00265"></a><span class="lineno">  265</span>&#160; </div>
<div class="line"><a name="l00266"></a><span class="lineno">  266</span>&#160;  <span class="keywordtype">bool</span> HaveStackObjects = <span class="keyword">false</span>;</div>
<div class="line"><a name="l00267"></a><span class="lineno">  267</span>&#160;  <span class="keywordtype">bool</span> Changed = <span class="keyword">false</span>;</div>
<div class="line"><a name="l00268"></a><span class="lineno">  268</span>&#160;  <span class="keywordtype">bool</span> NeedQueuePtr = <span class="keyword">false</span>;</div>
<div class="line"><a name="l00269"></a><span class="lineno">  269</span>&#160;  <span class="keywordtype">bool</span> HaveCall = <span class="keyword">false</span>;</div>
<div class="line"><a name="l00270"></a><span class="lineno">  270</span>&#160;  <span class="keywordtype">bool</span> HasIndirectCall = <span class="keyword">false</span>;</div>
<div class="line"><a name="l00271"></a><span class="lineno">  271</span>&#160;  <span class="keywordtype">bool</span> IsFunc = !<a class="code" href="namespacellvm_1_1AMDGPU.html#a3c65c76a817d60e322ff750366674a92">AMDGPU::isEntryFunctionCC</a>(<a class="code" href="MD5_8cpp.html#a96d73bbd7af15cb1fc38c3f4a3bd82e9">F</a>.getCallingConv());</div>
<div class="line"><a name="l00272"></a><span class="lineno">  272</span>&#160;  <a class="code" href="namespacellvm_1_1CallingConv.html#a188c0836f8c3528401f1c236fd93b977">CallingConv::ID</a> CC = <a class="code" href="MD5_8cpp.html#a96d73bbd7af15cb1fc38c3f4a3bd82e9">F</a>.getCallingConv();</div>
<div class="line"><a name="l00273"></a><span class="lineno">  273</span>&#160;  <span class="keywordtype">bool</span> CallingConvSupportsAllImplicits = (CC != <a class="code" href="namespacellvm_1_1CallingConv.html#a1164d38770245d57c05e35f916b1ed17a4f9824c54cfd32b3e38c01d5331f318b">CallingConv::AMDGPU_Gfx</a>);</div>
<div class="line"><a name="l00274"></a><span class="lineno">  274</span>&#160; </div>
<div class="line"><a name="l00275"></a><span class="lineno">  275</span>&#160;  <span class="comment">// If this function hasAddressTaken() = true</span></div>
<div class="line"><a name="l00276"></a><span class="lineno">  276</span>&#160;  <span class="comment">// then add all attributes corresponding to the implicit args.</span></div>
<div class="line"><a name="l00277"></a><span class="lineno">  277</span>&#160;  <span class="keywordflow">if</span> (CallingConvSupportsAllImplicits &amp;&amp;</div>
<div class="line"><a name="l00278"></a><span class="lineno">  278</span>&#160;      <a class="code" href="MD5_8cpp.html#a96d73bbd7af15cb1fc38c3f4a3bd82e9">F</a>.hasAddressTaken(<span class="keyword">nullptr</span>, <span class="keyword">true</span>, <span class="keyword">true</span>, <span class="keyword">true</span>)) {</div>
<div class="line"><a name="l00279"></a><span class="lineno">  279</span>&#160;    <span class="keywordflow">for</span> (<a class="code" href="classllvm_1_1StringRef.html">StringRef</a> AttrName : <a class="code" href="AMDGPUAttributor_8cpp.html#af51b9b4f8bc5b41db21eb7d5b75bbbc2">ImplicitAttrNames</a>) {</div>
<div class="line"><a name="l00280"></a><span class="lineno">  280</span>&#160;      <a class="code" href="MD5_8cpp.html#a96d73bbd7af15cb1fc38c3f4a3bd82e9">F</a>.addFnAttr(AttrName);</div>
<div class="line"><a name="l00281"></a><span class="lineno">  281</span>&#160;    }</div>
<div class="line"><a name="l00282"></a><span class="lineno">  282</span>&#160;    Changed = <span class="keyword">true</span>;</div>
<div class="line"><a name="l00283"></a><span class="lineno">  283</span>&#160;  }</div>
<div class="line"><a name="l00284"></a><span class="lineno">  284</span>&#160; </div>
<div class="line"><a name="l00285"></a><span class="lineno">  285</span>&#160;  <span class="keywordflow">for</span> (<a class="code" href="classllvm_1_1BasicBlock.html">BasicBlock</a> &amp;<a class="code" href="lib_2CodeGen_2README_8txt.html#a09776db24cf586ec9f1e18f3bae14099">BB</a> : <a class="code" href="MD5_8cpp.html#a96d73bbd7af15cb1fc38c3f4a3bd82e9">F</a>) {</div>
<div class="line"><a name="l00286"></a><span class="lineno">  286</span>&#160;    <span class="keywordflow">for</span> (<a class="code" href="classllvm_1_1Instruction.html">Instruction</a> &amp;<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a> : <a class="code" href="lib_2CodeGen_2README_8txt.html#a09776db24cf586ec9f1e18f3bae14099">BB</a>) {</div>
<div class="line"><a name="l00287"></a><span class="lineno">  287</span>&#160;      <span class="keywordflow">if</span> (isa&lt;AllocaInst&gt;(<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>)) {</div>
<div class="line"><a name="l00288"></a><span class="lineno">  288</span>&#160;        HaveStackObjects = <span class="keyword">true</span>;</div>
<div class="line"><a name="l00289"></a><span class="lineno">  289</span>&#160;        <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l00290"></a><span class="lineno">  290</span>&#160;      }</div>
<div class="line"><a name="l00291"></a><span class="lineno">  291</span>&#160; </div>
<div class="line"><a name="l00292"></a><span class="lineno">  292</span>&#160;      <span class="keywordflow">if</span> (<span class="keyword">auto</span> *CB = dyn_cast&lt;CallBase&gt;(&amp;<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>)) {</div>
<div class="line"><a name="l00293"></a><span class="lineno">  293</span>&#160;        <span class="keyword">const</span> <a class="code" href="classllvm_1_1Function.html">Function</a> *<a class="code" href="AMDGPULibCalls_8cpp.html#a537c835c34f0b44b6ad2696643754390">Callee</a> =</div>
<div class="line"><a name="l00294"></a><span class="lineno">  294</span>&#160;            dyn_cast&lt;Function&gt;(CB-&gt;getCalledOperand()-&gt;stripPointerCasts());</div>
<div class="line"><a name="l00295"></a><span class="lineno">  295</span>&#160; </div>
<div class="line"><a name="l00296"></a><span class="lineno">  296</span>&#160;        <span class="comment">// Note the occurence of indirect call.</span></div>
<div class="line"><a name="l00297"></a><span class="lineno">  297</span>&#160;        <span class="keywordflow">if</span> (!<a class="code" href="AMDGPULibCalls_8cpp.html#a537c835c34f0b44b6ad2696643754390">Callee</a>) {</div>
<div class="line"><a name="l00298"></a><span class="lineno">  298</span>&#160;          <span class="keywordflow">if</span> (!CB-&gt;isInlineAsm()) {</div>
<div class="line"><a name="l00299"></a><span class="lineno">  299</span>&#160;            HasIndirectCall = <span class="keyword">true</span>;</div>
<div class="line"><a name="l00300"></a><span class="lineno">  300</span>&#160;            HaveCall = <span class="keyword">true</span>;</div>
<div class="line"><a name="l00301"></a><span class="lineno">  301</span>&#160;          }</div>
<div class="line"><a name="l00302"></a><span class="lineno">  302</span>&#160;          <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l00303"></a><span class="lineno">  303</span>&#160;        }</div>
<div class="line"><a name="l00304"></a><span class="lineno">  304</span>&#160; </div>
<div class="line"><a name="l00305"></a><span class="lineno">  305</span>&#160;        <a class="code" href="namespacellvm_1_1Intrinsic.html#a80add6b3b1cdaec560907995127adc16">Intrinsic::ID</a> IID = <a class="code" href="AMDGPULibCalls_8cpp.html#a537c835c34f0b44b6ad2696643754390">Callee</a>-&gt;getIntrinsicID();</div>
<div class="line"><a name="l00306"></a><span class="lineno">  306</span>&#160;        <span class="keywordflow">if</span> (IID == <a class="code" href="namespacellvm_1_1Intrinsic.html#a35fedf4db6d756bd82501607f93c1e79aab5fb650050f184fa7c19c26abde5226">Intrinsic::not_intrinsic</a>) {</div>
<div class="line"><a name="l00307"></a><span class="lineno">  307</span>&#160;          HaveCall = <span class="keyword">true</span>;</div>
<div class="line"><a name="l00308"></a><span class="lineno">  308</span>&#160;          <a class="code" href="AMDGPUAnnotateKernelFeatures_8cpp.html#aaeaac88b68785c897f4b4c9103cc9da5">copyFeaturesToFunction</a>(<a class="code" href="MD5_8cpp.html#a96d73bbd7af15cb1fc38c3f4a3bd82e9">F</a>, *<a class="code" href="AMDGPULibCalls_8cpp.html#a537c835c34f0b44b6ad2696643754390">Callee</a>, NeedQueuePtr);</div>
<div class="line"><a name="l00309"></a><span class="lineno">  309</span>&#160;          Changed = <span class="keyword">true</span>;</div>
<div class="line"><a name="l00310"></a><span class="lineno">  310</span>&#160;        } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00311"></a><span class="lineno">  311</span>&#160;          <span class="keywordtype">bool</span> NonKernelOnly = <span class="keyword">false</span>;</div>
<div class="line"><a name="l00312"></a><span class="lineno">  312</span>&#160; </div>
<div class="line"><a name="l00313"></a><span class="lineno">  313</span>&#160;          <span class="keywordflow">if</span> (!IsFunc &amp;&amp; IID == Intrinsic::amdgcn_kernarg_segment_ptr) {</div>
<div class="line"><a name="l00314"></a><span class="lineno">  314</span>&#160;            <a class="code" href="MD5_8cpp.html#a96d73bbd7af15cb1fc38c3f4a3bd82e9">F</a>.addFnAttr(<span class="stringliteral">&quot;amdgpu-kernarg-segment-ptr&quot;</span>);</div>
<div class="line"><a name="l00315"></a><span class="lineno">  315</span>&#160;          } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00316"></a><span class="lineno">  316</span>&#160;            <a class="code" href="classllvm_1_1StringRef.html">StringRef</a> AttrName = <a class="code" href="AMDGPUAnnotateKernelFeatures_8cpp.html#a4f3eae09dd5dbc07a527d13014924710">intrinsicToAttrName</a>(IID, NonKernelOnly,</div>
<div class="line"><a name="l00317"></a><span class="lineno">  317</span>&#160;                                                     NeedQueuePtr);</div>
<div class="line"><a name="l00318"></a><span class="lineno">  318</span>&#160;            <span class="keywordflow">if</span> (!AttrName.<a class="code" href="classllvm_1_1StringRef.html#ae415c9b5bbaab9c349061d3392c1b198">empty</a>() &amp;&amp; (IsFunc || !NonKernelOnly)) {</div>
<div class="line"><a name="l00319"></a><span class="lineno">  319</span>&#160;              <a class="code" href="MD5_8cpp.html#a96d73bbd7af15cb1fc38c3f4a3bd82e9">F</a>.addFnAttr(AttrName);</div>
<div class="line"><a name="l00320"></a><span class="lineno">  320</span>&#160;              Changed = <span class="keyword">true</span>;</div>
<div class="line"><a name="l00321"></a><span class="lineno">  321</span>&#160;            }</div>
<div class="line"><a name="l00322"></a><span class="lineno">  322</span>&#160;          }</div>
<div class="line"><a name="l00323"></a><span class="lineno">  323</span>&#160;        }</div>
<div class="line"><a name="l00324"></a><span class="lineno">  324</span>&#160;      }</div>
<div class="line"><a name="l00325"></a><span class="lineno">  325</span>&#160; </div>
<div class="line"><a name="l00326"></a><span class="lineno">  326</span>&#160;      <span class="keywordflow">if</span> (NeedQueuePtr || (!IsFunc &amp;&amp; HasApertureRegs))</div>
<div class="line"><a name="l00327"></a><span class="lineno">  327</span>&#160;        <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l00328"></a><span class="lineno">  328</span>&#160; </div>
<div class="line"><a name="l00329"></a><span class="lineno">  329</span>&#160;      <span class="keywordflow">if</span> (<span class="keyword">const</span> <a class="code" href="classllvm_1_1AddrSpaceCastInst.html">AddrSpaceCastInst</a> *ASC = dyn_cast&lt;AddrSpaceCastInst&gt;(&amp;<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>)) {</div>
<div class="line"><a name="l00330"></a><span class="lineno">  330</span>&#160;        <span class="keywordflow">if</span> (!HasApertureRegs &amp;&amp; <a class="code" href="AMDGPUAnnotateKernelFeatures_8cpp.html#a3d2260c3ae78f911d4ba4ed38ef90972">castRequiresQueuePtr</a>(ASC)) {</div>
<div class="line"><a name="l00331"></a><span class="lineno">  331</span>&#160;          NeedQueuePtr = <span class="keyword">true</span>;</div>
<div class="line"><a name="l00332"></a><span class="lineno">  332</span>&#160;          <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l00333"></a><span class="lineno">  333</span>&#160;        }</div>
<div class="line"><a name="l00334"></a><span class="lineno">  334</span>&#160;      }</div>
<div class="line"><a name="l00335"></a><span class="lineno">  335</span>&#160; </div>
<div class="line"><a name="l00336"></a><span class="lineno">  336</span>&#160;      <span class="keywordflow">for</span> (<span class="keyword">const</span> <a class="code" href="classllvm_1_1Use.html">Use</a> &amp;U : <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>.operands()) {</div>
<div class="line"><a name="l00337"></a><span class="lineno">  337</span>&#160;        <span class="keyword">const</span> <span class="keyword">auto</span> *OpC = dyn_cast&lt;Constant&gt;(U);</div>
<div class="line"><a name="l00338"></a><span class="lineno">  338</span>&#160;        <span class="keywordflow">if</span> (!OpC)</div>
<div class="line"><a name="l00339"></a><span class="lineno">  339</span>&#160;          <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l00340"></a><span class="lineno">  340</span>&#160; </div>
<div class="line"><a name="l00341"></a><span class="lineno">  341</span>&#160;        <span class="keywordflow">if</span> (visitConstantExprsRecursively(OpC, ConstantExprVisited, IsFunc,</div>
<div class="line"><a name="l00342"></a><span class="lineno">  342</span>&#160;                                          HasApertureRegs)) {</div>
<div class="line"><a name="l00343"></a><span class="lineno">  343</span>&#160;          NeedQueuePtr = <span class="keyword">true</span>;</div>
<div class="line"><a name="l00344"></a><span class="lineno">  344</span>&#160;          <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00345"></a><span class="lineno">  345</span>&#160;        }</div>
<div class="line"><a name="l00346"></a><span class="lineno">  346</span>&#160;      }</div>
<div class="line"><a name="l00347"></a><span class="lineno">  347</span>&#160;    }</div>
<div class="line"><a name="l00348"></a><span class="lineno">  348</span>&#160;  }</div>
<div class="line"><a name="l00349"></a><span class="lineno">  349</span>&#160; </div>
<div class="line"><a name="l00350"></a><span class="lineno">  350</span>&#160;  <span class="keywordflow">if</span> (NeedQueuePtr) {</div>
<div class="line"><a name="l00351"></a><span class="lineno">  351</span>&#160;    <a class="code" href="MD5_8cpp.html#a96d73bbd7af15cb1fc38c3f4a3bd82e9">F</a>.addFnAttr(<span class="stringliteral">&quot;amdgpu-queue-ptr&quot;</span>);</div>
<div class="line"><a name="l00352"></a><span class="lineno">  352</span>&#160;    Changed = <span class="keyword">true</span>;</div>
<div class="line"><a name="l00353"></a><span class="lineno">  353</span>&#160;  }</div>
<div class="line"><a name="l00354"></a><span class="lineno">  354</span>&#160; </div>
<div class="line"><a name="l00355"></a><span class="lineno">  355</span>&#160;  <span class="comment">// TODO: We could refine this to captured pointers that could possibly be</span></div>
<div class="line"><a name="l00356"></a><span class="lineno">  356</span>&#160;  <span class="comment">// accessed by flat instructions. For now this is mostly a poor way of</span></div>
<div class="line"><a name="l00357"></a><span class="lineno">  357</span>&#160;  <span class="comment">// estimating whether there are calls before argument lowering.</span></div>
<div class="line"><a name="l00358"></a><span class="lineno">  358</span>&#160;  <span class="keywordflow">if</span> (!IsFunc &amp;&amp; HaveCall) {</div>
<div class="line"><a name="l00359"></a><span class="lineno">  359</span>&#160;    <a class="code" href="MD5_8cpp.html#a96d73bbd7af15cb1fc38c3f4a3bd82e9">F</a>.addFnAttr(<span class="stringliteral">&quot;amdgpu-calls&quot;</span>);</div>
<div class="line"><a name="l00360"></a><span class="lineno">  360</span>&#160;    Changed = <span class="keyword">true</span>;</div>
<div class="line"><a name="l00361"></a><span class="lineno">  361</span>&#160;  }</div>
<div class="line"><a name="l00362"></a><span class="lineno">  362</span>&#160; </div>
<div class="line"><a name="l00363"></a><span class="lineno">  363</span>&#160;  <span class="keywordflow">if</span> (HaveStackObjects) {</div>
<div class="line"><a name="l00364"></a><span class="lineno">  364</span>&#160;    <a class="code" href="MD5_8cpp.html#a96d73bbd7af15cb1fc38c3f4a3bd82e9">F</a>.addFnAttr(<span class="stringliteral">&quot;amdgpu-stack-objects&quot;</span>);</div>
<div class="line"><a name="l00365"></a><span class="lineno">  365</span>&#160;    Changed = <span class="keyword">true</span>;</div>
<div class="line"><a name="l00366"></a><span class="lineno">  366</span>&#160;  }</div>
<div class="line"><a name="l00367"></a><span class="lineno">  367</span>&#160; </div>
<div class="line"><a name="l00368"></a><span class="lineno">  368</span>&#160;  <span class="comment">// This pass cannot copy attributes from callees to callers</span></div>
<div class="line"><a name="l00369"></a><span class="lineno">  369</span>&#160;  <span class="comment">// if there is an indirect call and in thus such cases,</span></div>
<div class="line"><a name="l00370"></a><span class="lineno">  370</span>&#160;  <span class="comment">// hasAddressTaken() would be false for kernels and functions</span></div>
<div class="line"><a name="l00371"></a><span class="lineno">  371</span>&#160;  <span class="comment">// making an indirect call (if they are themselves not indirectly called).</span></div>
<div class="line"><a name="l00372"></a><span class="lineno">  372</span>&#160;  <span class="comment">// We must tag all such kernels/functions with all implicits attributes</span></div>
<div class="line"><a name="l00373"></a><span class="lineno">  373</span>&#160;  <span class="comment">// for correctness.</span></div>
<div class="line"><a name="l00374"></a><span class="lineno">  374</span>&#160;  <span class="comment">// e.g.</span></div>
<div class="line"><a name="l00375"></a><span class="lineno">  375</span>&#160;  <span class="comment">// 1. Kernel K1 makes an indirect call to function F1.</span></div>
<div class="line"><a name="l00376"></a><span class="lineno">  376</span>&#160;  <span class="comment">//    Without detecting an indirect call in K1, this pass will not</span></div>
<div class="line"><a name="l00377"></a><span class="lineno">  377</span>&#160;  <span class="comment">//    add all implicit args to K1 (which is incorrect).</span></div>
<div class="line"><a name="l00378"></a><span class="lineno">  378</span>&#160;  <span class="comment">// 2. Kernel K1 makes direct call to F1 which makes indirect call to function</span></div>
<div class="line"><a name="l00379"></a><span class="lineno">  379</span>&#160;  <span class="comment">// F2.</span></div>
<div class="line"><a name="l00380"></a><span class="lineno">  380</span>&#160;  <span class="comment">//    Without detecting an indirect call in F1 (whose hasAddressTaken() is</span></div>
<div class="line"><a name="l00381"></a><span class="lineno">  381</span>&#160;  <span class="comment">//    false), the pass will not add all implicit args to F1 (which is</span></div>
<div class="line"><a name="l00382"></a><span class="lineno">  382</span>&#160;  <span class="comment">//    essential for correctness).</span></div>
<div class="line"><a name="l00383"></a><span class="lineno">  383</span>&#160;  <span class="keywordflow">if</span> (CallingConvSupportsAllImplicits &amp;&amp; HasIndirectCall) {</div>
<div class="line"><a name="l00384"></a><span class="lineno">  384</span>&#160;    <span class="keywordflow">for</span> (<a class="code" href="classllvm_1_1StringRef.html">StringRef</a> AttrName : <a class="code" href="AMDGPUAttributor_8cpp.html#af51b9b4f8bc5b41db21eb7d5b75bbbc2">ImplicitAttrNames</a>) {</div>
<div class="line"><a name="l00385"></a><span class="lineno">  385</span>&#160;      <a class="code" href="MD5_8cpp.html#a96d73bbd7af15cb1fc38c3f4a3bd82e9">F</a>.addFnAttr(AttrName);</div>
<div class="line"><a name="l00386"></a><span class="lineno">  386</span>&#160;    }</div>
<div class="line"><a name="l00387"></a><span class="lineno">  387</span>&#160;    Changed = <span class="keyword">true</span>;</div>
<div class="line"><a name="l00388"></a><span class="lineno">  388</span>&#160;  }</div>
<div class="line"><a name="l00389"></a><span class="lineno">  389</span>&#160; </div>
<div class="line"><a name="l00390"></a><span class="lineno">  390</span>&#160;  <span class="keywordflow">return</span> Changed;</div>
<div class="line"><a name="l00391"></a><span class="lineno">  391</span>&#160;}</div>
<div class="line"><a name="l00392"></a><span class="lineno">  392</span>&#160; </div>
<div class="line"><a name="l00393"></a><span class="lineno">  393</span>&#160;<span class="keywordtype">bool</span> AMDGPUAnnotateKernelFeatures::runOnSCC(<a class="code" href="classllvm_1_1CallGraphSCC.html">CallGraphSCC</a> &amp;<a class="code" href="namespacellvm_1_1AMDGPU_1_1CPol.html#a7d79a4b341da8ac60b91c1f4b1ea42c4aca1659af59093b2b14c2f8aad41e8e2a">SCC</a>) {</div>
<div class="line"><a name="l00394"></a><span class="lineno">  394</span>&#160;  <span class="keywordtype">bool</span> Changed = <span class="keyword">false</span>;</div>
<div class="line"><a name="l00395"></a><span class="lineno">  395</span>&#160; </div>
<div class="line"><a name="l00396"></a><span class="lineno">  396</span>&#160;  <span class="keywordflow">for</span> (<a class="code" href="classllvm_1_1CallGraphNode.html">CallGraphNode</a> *<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a> : <a class="code" href="namespacellvm_1_1AMDGPU_1_1CPol.html#a7d79a4b341da8ac60b91c1f4b1ea42c4aca1659af59093b2b14c2f8aad41e8e2a">SCC</a>) {</div>
<div class="line"><a name="l00397"></a><span class="lineno">  397</span>&#160;    <span class="comment">// Build a list of CallGraphNodes from most number of uses to least</span></div>
<div class="line"><a name="l00398"></a><span class="lineno">  398</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>-&gt;getNumReferences())</div>
<div class="line"><a name="l00399"></a><span class="lineno">  399</span>&#160;      <a class="code" href="structNodeList.html">NodeList</a>.push_back(<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>);</div>
<div class="line"><a name="l00400"></a><span class="lineno">  400</span>&#160;    <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00401"></a><span class="lineno">  401</span>&#160;      processUniformWorkGroupAttribute();</div>
<div class="line"><a name="l00402"></a><span class="lineno">  402</span>&#160;      <a class="code" href="structNodeList.html">NodeList</a>.clear();</div>
<div class="line"><a name="l00403"></a><span class="lineno">  403</span>&#160;    }</div>
<div class="line"><a name="l00404"></a><span class="lineno">  404</span>&#160; </div>
<div class="line"><a name="l00405"></a><span class="lineno">  405</span>&#160;    <a class="code" href="classllvm_1_1Function.html">Function</a> *<a class="code" href="MD5_8cpp.html#a96d73bbd7af15cb1fc38c3f4a3bd82e9">F</a> = <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>-&gt;getFunction();</div>
<div class="line"><a name="l00406"></a><span class="lineno">  406</span>&#160;    <span class="comment">// Ignore functions with graphics calling conventions, these are currently</span></div>
<div class="line"><a name="l00407"></a><span class="lineno">  407</span>&#160;    <span class="comment">// not allowed to have kernel arguments.</span></div>
<div class="line"><a name="l00408"></a><span class="lineno">  408</span>&#160;    <span class="keywordflow">if</span> (!<a class="code" href="MD5_8cpp.html#a96d73bbd7af15cb1fc38c3f4a3bd82e9">F</a> || <a class="code" href="MD5_8cpp.html#a96d73bbd7af15cb1fc38c3f4a3bd82e9">F</a>-&gt;isDeclaration() || <a class="code" href="namespacellvm_1_1AMDGPU.html#af9f05d3701d61f10054f263eec92da45">AMDGPU::isGraphics</a>(<a class="code" href="MD5_8cpp.html#a96d73bbd7af15cb1fc38c3f4a3bd82e9">F</a>-&gt;getCallingConv()))</div>
<div class="line"><a name="l00409"></a><span class="lineno">  409</span>&#160;      <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l00410"></a><span class="lineno">  410</span>&#160;    <span class="comment">// Add feature attributes</span></div>
<div class="line"><a name="l00411"></a><span class="lineno">  411</span>&#160;    Changed |= addFeatureAttributes(*<a class="code" href="MD5_8cpp.html#a96d73bbd7af15cb1fc38c3f4a3bd82e9">F</a>);</div>
<div class="line"><a name="l00412"></a><span class="lineno">  412</span>&#160;  }</div>
<div class="line"><a name="l00413"></a><span class="lineno">  413</span>&#160; </div>
<div class="line"><a name="l00414"></a><span class="lineno">  414</span>&#160;  <span class="keywordflow">return</span> Changed;</div>
<div class="line"><a name="l00415"></a><span class="lineno">  415</span>&#160;}</div>
<div class="line"><a name="l00416"></a><span class="lineno">  416</span>&#160; </div>
<div class="line"><a name="l00417"></a><span class="lineno">  417</span>&#160;<span class="keywordtype">bool</span> AMDGPUAnnotateKernelFeatures::doInitialization(<a class="code" href="classllvm_1_1CallGraph.html">CallGraph</a> &amp;CG) {</div>
<div class="line"><a name="l00418"></a><span class="lineno">  418</span>&#160;  <span class="keyword">auto</span> *TPC = getAnalysisIfAvailable&lt;TargetPassConfig&gt;();</div>
<div class="line"><a name="l00419"></a><span class="lineno">  419</span>&#160;  <span class="keywordflow">if</span> (!TPC)</div>
<div class="line"><a name="l00420"></a><span class="lineno">  420</span>&#160;    <a class="code" href="namespacellvm.html#a7f2a3d4dcfee70225988aec53ff1e173">report_fatal_error</a>(<span class="stringliteral">&quot;TargetMachine is required&quot;</span>);</div>
<div class="line"><a name="l00421"></a><span class="lineno">  421</span>&#160; </div>
<div class="line"><a name="l00422"></a><span class="lineno">  422</span>&#160;  <a class="code" href="PassBuilderBindings_8cpp.html#ab76052bb166c65901edb603a3e1f03ab">TM</a> = &amp;TPC-&gt;getTM&lt;<a class="code" href="classllvm_1_1TargetMachine.html">TargetMachine</a>&gt;();</div>
<div class="line"><a name="l00423"></a><span class="lineno">  423</span>&#160;  <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l00424"></a><span class="lineno">  424</span>&#160;}</div>
<div class="line"><a name="l00425"></a><span class="lineno">  425</span>&#160; </div>
<div class="line"><a name="l00426"></a><span class="lineno"><a class="line" href="namespacellvm.html#a7f211632b99f0ebf19db46192940082b">  426</a></span>&#160;<a class="code" href="classllvm_1_1Pass.html">Pass</a> *<a class="code" href="namespacellvm.html#a7f211632b99f0ebf19db46192940082b">llvm::createAMDGPUAnnotateKernelFeaturesPass</a>() {</div>
<div class="line"><a name="l00427"></a><span class="lineno">  427</span>&#160;  <span class="keywordflow">return</span> <span class="keyword">new</span> AMDGPUAnnotateKernelFeatures();</div>
<div class="line"><a name="l00428"></a><span class="lineno">  428</span>&#160;}</div>
</div><!-- fragment --></div><!-- contents -->
<div class="ttc" id="anamespacellvm_1_1CallingConv_html_a1164d38770245d57c05e35f916b1ed17a4f9824c54cfd32b3e38c01d5331f318b"><div class="ttname"><a href="namespacellvm_1_1CallingConv.html#a1164d38770245d57c05e35f916b1ed17a4f9824c54cfd32b3e38c01d5331f318b">llvm::CallingConv::AMDGPU_Gfx</a></div><div class="ttdeci">@ AMDGPU_Gfx</div><div class="ttdoc">Calling convention used for AMD graphics targets.</div><div class="ttdef"><b>Definition:</b> <a href="CallingConv_8h_source.html#l00250">CallingConv.h:250</a></div></div>
<div class="ttc" id="anamespacellvm_html"><div class="ttname"><a href="namespacellvm.html">llvm</a></div><div class="ttdoc">--------------------- PointerInfo ------------------------------------</div><div class="ttdef"><b>Definition:</b> <a href="AllocatorList_8h_source.html#l00023">AllocatorList.h:23</a></div></div>
<div class="ttc" id="aclassllvm_1_1StringRef_html_ae415c9b5bbaab9c349061d3392c1b198"><div class="ttname"><a href="classllvm_1_1StringRef.html#ae415c9b5bbaab9c349061d3392c1b198">llvm::StringRef::empty</a></div><div class="ttdeci">LLVM_NODISCARD bool empty() const</div><div class="ttdoc">empty - Check if the string is empty.</div><div class="ttdef"><b>Definition:</b> <a href="StringRef_8h_source.html#l00153">StringRef.h:153</a></div></div>
<div class="ttc" id="aclassllvm_1_1AddrSpaceCastInst_html_ab292fdaede434f81cf224662e9de7e35"><div class="ttname"><a href="classllvm_1_1AddrSpaceCastInst.html#ab292fdaede434f81cf224662e9de7e35">llvm::AddrSpaceCastInst::getSrcAddressSpace</a></div><div class="ttdeci">unsigned getSrcAddressSpace() const</div><div class="ttdoc">Returns the address space of the pointer operand.</div><div class="ttdef"><b>Definition:</b> <a href="Instructions_8h_source.html#l05253">Instructions.h:5253</a></div></div>
<div class="ttc" id="aclassllvm_1_1Function_html"><div class="ttname"><a href="classllvm_1_1Function.html">llvm::Function</a></div><div class="ttdef"><b>Definition:</b> <a href="Function_8h_source.html#l00061">Function.h:62</a></div></div>
<div class="ttc" id="aclassllvm_1_1ConstantExpr_html_ad7c657cd513c76f7d328ffdf0fc46f2b"><div class="ttname"><a href="classllvm_1_1ConstantExpr.html#ad7c657cd513c76f7d328ffdf0fc46f2b">llvm::ConstantExpr::getOpcode</a></div><div class="ttdeci">unsigned getOpcode() const</div><div class="ttdoc">Return the opcode at the root of this constant expression.</div><div class="ttdef"><b>Definition:</b> <a href="Constants_8h_source.html#l01267">Constants.h:1267</a></div></div>
<div class="ttc" id="aclassllvm_1_1SmallVector_html"><div class="ttname"><a href="classllvm_1_1SmallVector.html">llvm::SmallVector</a></div><div class="ttdoc">This is a 'vector' (really, a variable-sized array), optimized for the case when the array is small.</div><div class="ttdef"><b>Definition:</b> <a href="SmallVector_8h_source.html#l01168">SmallVector.h:1169</a></div></div>
<div class="ttc" id="aclassllvm_1_1Type_html_a5ab2d0b0f0b8ceec3b907184e7567197"><div class="ttname"><a href="classllvm_1_1Type.html#a5ab2d0b0f0b8ceec3b907184e7567197">llvm::Type::getPointerAddressSpace</a></div><div class="ttdeci">unsigned getPointerAddressSpace() const</div><div class="ttdoc">Get the address space of this pointer or pointer vector type.</div><div class="ttdef"><b>Definition:</b> <a href="DerivedTypes_8h_source.html#l00733">DerivedTypes.h:733</a></div></div>
<div class="ttc" id="aclassllvm_1_1CallGraph_html"><div class="ttname"><a href="classllvm_1_1CallGraph.html">llvm::CallGraph</a></div><div class="ttdoc">The basic data container for the call graph of a Module of IR.</div><div class="ttdef"><b>Definition:</b> <a href="CallGraph_8h_source.html#l00073">CallGraph.h:73</a></div></div>
<div class="ttc" id="anamespacellvm_html_a469101ea87b8b432a1b4f7935c97f35c"><div class="ttname"><a href="namespacellvm.html#a469101ea87b8b432a1b4f7935c97f35c">llvm::reverse</a></div><div class="ttdeci">auto reverse(ContainerTy &amp;&amp;C, std::enable_if_t&lt; has_rbegin&lt; ContainerTy &gt;::value &gt; *=nullptr)</div><div class="ttdef"><b>Definition:</b> <a href="STLExtras_8h_source.html#l00329">STLExtras.h:329</a></div></div>
<div class="ttc" id="anamespacellvm_1_1rdf_html_adff32edf02469b3f29d410c0a4d68be3"><div class="ttname"><a href="namespacellvm_1_1rdf.html#adff32edf02469b3f29d410c0a4d68be3">llvm::rdf::NodeList</a></div><div class="ttdeci">SmallVector&lt; NodeAddr&lt; NodeBase * &gt;, 4 &gt; NodeList</div><div class="ttdef"><b>Definition:</b> <a href="RDFGraph_8h_source.html#l00512">RDFGraph.h:512</a></div></div>
<div class="ttc" id="aclassllvm_1_1Function_html_aa84505c70a7f4ae97082df0b91bd7a9a"><div class="ttname"><a href="classllvm_1_1Function.html#aa84505c70a7f4ae97082df0b91bd7a9a">llvm::Function::hasFnAttribute</a></div><div class="ttdeci">bool hasFnAttribute(Attribute::AttrKind Kind) const</div><div class="ttdoc">Return true if the function has the attribute.</div><div class="ttdef"><b>Definition:</b> <a href="Function_8h_source.html#l00356">Function.h:356</a></div></div>
<div class="ttc" id="aclassllvm_1_1SmallPtrSet_html"><div class="ttname"><a href="classllvm_1_1SmallPtrSet.html">llvm::SmallPtrSet</a></div><div class="ttdoc">SmallPtrSet - This class implements a set which is optimized for holding SmallSize or less elements.</div><div class="ttdef"><b>Definition:</b> <a href="SmallPtrSet_8h_source.html#l00449">SmallPtrSet.h:449</a></div></div>
<div class="ttc" id="aclassllvm_1_1GCNSubtarget_html"><div class="ttname"><a href="classllvm_1_1GCNSubtarget.html">llvm::GCNSubtarget</a></div><div class="ttdef"><b>Definition:</b> <a href="GCNSubtarget_8h_source.html#l00038">GCNSubtarget.h:39</a></div></div>
<div class="ttc" id="anamespacellvm_1_1Intrinsic_html_a35fedf4db6d756bd82501607f93c1e79aab5fb650050f184fa7c19c26abde5226"><div class="ttname"><a href="namespacellvm_1_1Intrinsic.html#a35fedf4db6d756bd82501607f93c1e79aab5fb650050f184fa7c19c26abde5226">llvm::Intrinsic::not_intrinsic</a></div><div class="ttdeci">@ not_intrinsic</div><div class="ttdef"><b>Definition:</b> <a href="Intrinsics_8h_source.html#l00045">Intrinsics.h:45</a></div></div>
<div class="ttc" id="aclassllvm_1_1SmallVectorImpl_html_a07e23ae504e2b8c72fd055f93ded8899"><div class="ttname"><a href="classllvm_1_1SmallVectorImpl.html#a07e23ae504e2b8c72fd055f93ded8899">llvm::SmallVectorImpl::pop_back_val</a></div><div class="ttdeci">LLVM_NODISCARD T pop_back_val()</div><div class="ttdef"><b>Definition:</b> <a href="SmallVector_8h_source.html#l00635">SmallVector.h:635</a></div></div>
<div class="ttc" id="aclassllvm_1_1Function_html_ac277aebd990c638895a05b0ffae6f7ec"><div class="ttname"><a href="classllvm_1_1Function.html#ac277aebd990c638895a05b0ffae6f7ec">llvm::Function::addFnAttr</a></div><div class="ttdeci">void addFnAttr(Attribute::AttrKind Kind)</div><div class="ttdoc">Add function attributes to this function.</div><div class="ttdef"><b>Definition:</b> <a href="Function_8h_source.html#l00256">Function.h:256</a></div></div>
<div class="ttc" id="aMD5_8cpp_html_a96d73bbd7af15cb1fc38c3f4a3bd82e9"><div class="ttname"><a href="MD5_8cpp.html#a96d73bbd7af15cb1fc38c3f4a3bd82e9">F</a></div><div class="ttdeci">#define F(x, y, z)</div><div class="ttdef"><b>Definition:</b> <a href="MD5_8cpp_source.html#l00056">MD5.cpp:56</a></div></div>
<div class="ttc" id="aclassllvm_1_1BasicBlock_html"><div class="ttname"><a href="classllvm_1_1BasicBlock.html">llvm::BasicBlock</a></div><div class="ttdoc">LLVM Basic Block Representation.</div><div class="ttdef"><b>Definition:</b> <a href="BasicBlock_8h_source.html#l00058">BasicBlock.h:59</a></div></div>
<div class="ttc" id="aclassllvm_1_1StringLiteral_html"><div class="ttname"><a href="classllvm_1_1StringLiteral.html">llvm::StringLiteral</a></div><div class="ttdoc">A wrapper around a string literal that serves as a proxy for constructing global tables of StringRefs...</div><div class="ttdef"><b>Definition:</b> <a href="StringRef_8h_source.html#l00891">StringRef.h:891</a></div></div>
<div class="ttc" id="aclassllvm_1_1CallGraphSCC_html"><div class="ttname"><a href="classllvm_1_1CallGraphSCC.html">llvm::CallGraphSCC</a></div><div class="ttdoc">CallGraphSCC - This is a single SCC that a CallGraphSCCPass is run on.</div><div class="ttdef"><b>Definition:</b> <a href="CallGraphSCCPass_8h_source.html#l00087">CallGraphSCCPass.h:87</a></div></div>
<div class="ttc" id="aclassllvm_1_1AddrSpaceCastInst_html"><div class="ttname"><a href="classllvm_1_1AddrSpaceCastInst.html">llvm::AddrSpaceCastInst</a></div><div class="ttdoc">This class represents a conversion between pointers from one address space to another.</div><div class="ttdef"><b>Definition:</b> <a href="Instructions_8h_source.html#l05204">Instructions.h:5204</a></div></div>
<div class="ttc" id="aAMDGPUAnnotateKernelFeatures_8cpp_html_a3d2260c3ae78f911d4ba4ed38ef90972"><div class="ttname"><a href="AMDGPUAnnotateKernelFeatures_8cpp.html#a3d2260c3ae78f911d4ba4ed38ef90972">castRequiresQueuePtr</a></div><div class="ttdeci">static bool castRequiresQueuePtr(const AddrSpaceCastInst *ASC)</div><div class="ttdef"><b>Definition:</b> <a href="AMDGPUAnnotateKernelFeatures_8cpp_source.html#l00084">AMDGPUAnnotateKernelFeatures.cpp:84</a></div></div>
<div class="ttc" id="aGCNSubtarget_8h_html"><div class="ttname"><a href="GCNSubtarget_8h.html">GCNSubtarget.h</a></div><div class="ttdoc">AMD GCN specific subclass of TargetSubtarget.</div></div>
<div class="ttc" id="aREADME__ALTIVEC_8txt_html_a9aacd9146afe44bf656cd664e2a88c8c"><div class="ttname"><a href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a></div><div class="ttdeci">(vector float) vec_cmpeq(*A, *B) C</div><div class="ttdef"><b>Definition:</b> <a href="README__ALTIVEC_8txt_source.html#l00086">README_ALTIVEC.txt:86</a></div></div>
<div class="ttc" id="aclassllvm_1_1AnalysisUsage_html"><div class="ttname"><a href="classllvm_1_1AnalysisUsage.html">llvm::AnalysisUsage</a></div><div class="ttdoc">Represent the analysis usage information of a pass.</div><div class="ttdef"><b>Definition:</b> <a href="PassAnalysisSupport_8h_source.html#l00047">PassAnalysisSupport.h:47</a></div></div>
<div class="ttc" id="allvm_2Target_2TargetMachine_8h_html"><div class="ttname"><a href="llvm_2Target_2TargetMachine_8h.html">TargetMachine.h</a></div></div>
<div class="ttc" id="astructNodeList_html"><div class="ttname"><a href="structNodeList.html">NodeList</a></div><div class="ttdef"><b>Definition:</b> <a href="MicrosoftDemangle_8cpp_source.html#l00037">MicrosoftDemangle.cpp:37</a></div></div>
<div class="ttc" id="aclassllvm_1_1Instruction_html"><div class="ttname"><a href="classllvm_1_1Instruction.html">llvm::Instruction</a></div><div class="ttdef"><b>Definition:</b> <a href="IR_2Instruction_8h_source.html#l00045">Instruction.h:46</a></div></div>
<div class="ttc" id="anamespacellvm_html_a7f2a3d4dcfee70225988aec53ff1e173"><div class="ttname"><a href="namespacellvm.html#a7f2a3d4dcfee70225988aec53ff1e173">llvm::report_fatal_error</a></div><div class="ttdeci">LLVM_ATTRIBUTE_NORETURN void report_fatal_error(Error Err, bool gen_crash_diag=true)</div><div class="ttdoc">Report a serious error, calling any installed error handler.</div><div class="ttdef"><b>Definition:</b> <a href="Testing_2Support_2Error_8cpp_source.html#l00140">Error.cpp:140</a></div></div>
<div class="ttc" id="anamespacellvm_1_1AMDGPUAS_html_ab16da35bdfcc21c512a66e8c4eba94a5a5b71ba6fa435ec288aba849e113721a7"><div class="ttname"><a href="namespacellvm_1_1AMDGPUAS.html#ab16da35bdfcc21c512a66e8c4eba94a5a5b71ba6fa435ec288aba849e113721a7">llvm::AMDGPUAS::REGION_ADDRESS</a></div><div class="ttdeci">@ REGION_ADDRESS</div><div class="ttdoc">Address space for region memory. (GDS)</div><div class="ttdef"><b>Definition:</b> <a href="AMDGPU_8h_source.html#l00383">AMDGPU.h:383</a></div></div>
<div class="ttc" id="aclassllvm_1_1CallGraphNode_html"><div class="ttname"><a href="classllvm_1_1CallGraphNode.html">llvm::CallGraphNode</a></div><div class="ttdoc">A node in the call graph for a module.</div><div class="ttdef"><b>Definition:</b> <a href="CallGraph_8h_source.html#l00167">CallGraph.h:167</a></div></div>
<div class="ttc" id="anamespacellvm_html_a7f211632b99f0ebf19db46192940082b"><div class="ttname"><a href="namespacellvm.html#a7f211632b99f0ebf19db46192940082b">llvm::createAMDGPUAnnotateKernelFeaturesPass</a></div><div class="ttdeci">Pass * createAMDGPUAnnotateKernelFeaturesPass()</div><div class="ttdef"><b>Definition:</b> <a href="AMDGPUAnnotateKernelFeatures_8cpp_source.html#l00426">AMDGPUAnnotateKernelFeatures.cpp:426</a></div></div>
<div class="ttc" id="aclassllvm_1_1Attribute_html_a968930aea9d9efa8d46dd890fce75643"><div class="ttname"><a href="classllvm_1_1Attribute.html#a968930aea9d9efa8d46dd890fce75643">llvm::Attribute::getValueAsString</a></div><div class="ttdeci">StringRef getValueAsString() const</div><div class="ttdoc">Return the attribute's value as a string.</div><div class="ttdef"><b>Definition:</b> <a href="Attributes_8cpp_source.html#l00301">Attributes.cpp:301</a></div></div>
<div class="ttc" id="anamespacellvm_1_1CallingConv_html_a188c0836f8c3528401f1c236fd93b977"><div class="ttname"><a href="namespacellvm_1_1CallingConv.html#a188c0836f8c3528401f1c236fd93b977">llvm::CallingConv::ID</a></div><div class="ttdeci">unsigned ID</div><div class="ttdoc">LLVM IR allows to use arbitrary numbers as calling convention identifiers.</div><div class="ttdef"><b>Definition:</b> <a href="CallingConv_8h_source.html#l00024">CallingConv.h:24</a></div></div>
<div class="ttc" id="aclassllvm_1_1StringRef_html_aec5c723a077f34100bba97e1df17c6b2"><div class="ttname"><a href="classllvm_1_1StringRef.html#aec5c723a077f34100bba97e1df17c6b2">llvm::StringRef::equals</a></div><div class="ttdeci">LLVM_NODISCARD bool equals(StringRef RHS) const</div><div class="ttdoc">equals - Check for string equality, this is more efficient than compare() when the relative ordering ...</div><div class="ttdef"><b>Definition:</b> <a href="StringRef_8h_source.html#l00187">StringRef.h:187</a></div></div>
<div class="ttc" id="anamespacellvm_1_1AMDGPU_html_a3c65c76a817d60e322ff750366674a92"><div class="ttname"><a href="namespacellvm_1_1AMDGPU.html#a3c65c76a817d60e322ff750366674a92">llvm::AMDGPU::isEntryFunctionCC</a></div><div class="ttdeci">bool isEntryFunctionCC(CallingConv::ID CC)</div><div class="ttdef"><b>Definition:</b> <a href="AMDGPUBaseInfo_8cpp_source.html#l01381">AMDGPUBaseInfo.cpp:1381</a></div></div>
<div class="ttc" id="aclassllvm_1_1GlobalValue_html"><div class="ttname"><a href="classllvm_1_1GlobalValue.html">llvm::GlobalValue</a></div><div class="ttdef"><b>Definition:</b> <a href="GlobalValue_8h_source.html#l00044">GlobalValue.h:44</a></div></div>
<div class="ttc" id="aclassllvm_1_1Constant_html"><div class="ttname"><a href="classllvm_1_1Constant.html">llvm::Constant</a></div><div class="ttdoc">This is an important base class in LLVM.</div><div class="ttdef"><b>Definition:</b> <a href="Constant_8h_source.html#l00041">Constant.h:41</a></div></div>
<div class="ttc" id="aclassllvm_1_1CallGraphSCCPass_html_a6cc67c5a27b53bc940d292c0aeb6aba3"><div class="ttname"><a href="classllvm_1_1CallGraphSCCPass.html#a6cc67c5a27b53bc940d292c0aeb6aba3">llvm::CallGraphSCCPass::getAnalysisUsage</a></div><div class="ttdeci">void getAnalysisUsage(AnalysisUsage &amp;Info) const override</div><div class="ttdoc">getAnalysisUsage - For this class, we declare that we require and preserve the call graph.</div><div class="ttdef"><b>Definition:</b> <a href="CallGraphSCCPass_8cpp_source.html#l00659">CallGraphSCCPass.cpp:659</a></div></div>
<div class="ttc" id="anamespacellvm_1_1AMDGPUAS_html_ab16da35bdfcc21c512a66e8c4eba94a5aec164f45437d8827346f2d8ec645479a"><div class="ttname"><a href="namespacellvm_1_1AMDGPUAS.html#ab16da35bdfcc21c512a66e8c4eba94a5aec164f45437d8827346f2d8ec645479a">llvm::AMDGPUAS::PRIVATE_ADDRESS</a></div><div class="ttdeci">@ PRIVATE_ADDRESS</div><div class="ttdoc">Address space for private memory.</div><div class="ttdef"><b>Definition:</b> <a href="AMDGPU_8h_source.html#l00387">AMDGPU.h:387</a></div></div>
<div class="ttc" id="anamespacellvm_1_1ARM__MB_html_ad70272e2a9ec2a7e3a497458e1edbc85aed0b9bef861c96eee19e89db753db7b2"><div class="ttname"><a href="namespacellvm_1_1ARM__MB.html#ad70272e2a9ec2a7e3a497458e1edbc85aed0b9bef861c96eee19e89db753db7b2">llvm::ARM_MB::ST</a></div><div class="ttdeci">@ ST</div><div class="ttdef"><b>Definition:</b> <a href="MCTargetDesc_2ARMBaseInfo_8h_source.html#l00073">ARMBaseInfo.h:73</a></div></div>
<div class="ttc" id="aMD5_8cpp_html_ac0eafdc9ee161b71e7af98af736952fd"><div class="ttname"><a href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a></div><div class="ttdeci">#define I(x, y, z)</div><div class="ttdef"><b>Definition:</b> <a href="MD5_8cpp_source.html#l00059">MD5.cpp:59</a></div></div>
<div class="ttc" id="aTargetPassConfig_8h_html"><div class="ttname"><a href="TargetPassConfig_8h.html">TargetPassConfig.h</a></div><div class="ttdoc">Target-Independent Code Generator Pass Configuration Options pass.</div></div>
<div class="ttc" id="aclassllvm_1_1TargetMachine_html"><div class="ttname"><a href="classllvm_1_1TargetMachine.html">llvm::TargetMachine</a></div><div class="ttdoc">Primary interface to the complete machine description for the target machine.</div><div class="ttdef"><b>Definition:</b> <a href="llvm_2Target_2TargetMachine_8h_source.html#l00077">TargetMachine.h:77</a></div></div>
<div class="ttc" id="aAMDGPUAnnotateKernelFeatures_8cpp_html_aaeaac88b68785c897f4b4c9103cc9da5"><div class="ttname"><a href="AMDGPUAnnotateKernelFeatures_8cpp.html#aaeaac88b68785c897f4b4c9103cc9da5">copyFeaturesToFunction</a></div><div class="ttdeci">static void copyFeaturesToFunction(Function &amp;Parent, const Function &amp;Callee, bool &amp;NeedQueuePtr)</div><div class="ttdef"><b>Definition:</b> <a href="AMDGPUAnnotateKernelFeatures_8cpp_source.html#l00202">AMDGPUAnnotateKernelFeatures.cpp:202</a></div></div>
<div class="ttc" id="anamespacellvm_1_1AMDGPU_1_1CPol_html_a7d79a4b341da8ac60b91c1f4b1ea42c4aca1659af59093b2b14c2f8aad41e8e2a"><div class="ttname"><a href="namespacellvm_1_1AMDGPU_1_1CPol.html#a7d79a4b341da8ac60b91c1f4b1ea42c4aca1659af59093b2b14c2f8aad41e8e2a">llvm::AMDGPU::CPol::SCC</a></div><div class="ttdeci">@ SCC</div><div class="ttdef"><b>Definition:</b> <a href="SIDefines_8h_source.html#l00285">SIDefines.h:285</a></div></div>
<div class="ttc" id="anamespacellvm_1_1AMDGPUAS_html_ab16da35bdfcc21c512a66e8c4eba94a5a77b1c964e2ff99057bf5e75140457abe"><div class="ttname"><a href="namespacellvm_1_1AMDGPUAS.html#ab16da35bdfcc21c512a66e8c4eba94a5a77b1c964e2ff99057bf5e75140457abe">llvm::AMDGPUAS::LOCAL_ADDRESS</a></div><div class="ttdeci">@ LOCAL_ADDRESS</div><div class="ttdoc">Address space for local memory.</div><div class="ttdef"><b>Definition:</b> <a href="AMDGPU_8h_source.html#l00386">AMDGPU.h:386</a></div></div>
<div class="ttc" id="aclassllvm_1_1StringRef_html"><div class="ttname"><a href="classllvm_1_1StringRef.html">llvm::StringRef</a></div><div class="ttdoc">StringRef - Represent a constant reference to a string, i.e.</div><div class="ttdef"><b>Definition:</b> <a href="StringRef_8h_source.html#l00058">StringRef.h:58</a></div></div>
<div class="ttc" id="aAMDGPU_8h_html"><div class="ttname"><a href="AMDGPU_8h.html">AMDGPU.h</a></div></div>
<div class="ttc" id="aclassllvm_1_1Value_html_a6393a2d4fe7e10b28a0dcc35f881567b"><div class="ttname"><a href="classllvm_1_1Value.html#a6393a2d4fe7e10b28a0dcc35f881567b">llvm::Value::getType</a></div><div class="ttdeci">Type * getType() const</div><div class="ttdoc">All values are typed, get the type of this value.</div><div class="ttdef"><b>Definition:</b> <a href="Value_8h_source.html#l00256">Value.h:256</a></div></div>
<div class="ttc" id="anamespacellvm_1_1AMDGPU_html_af9f05d3701d61f10054f263eec92da45"><div class="ttname"><a href="namespacellvm_1_1AMDGPU.html#af9f05d3701d61f10054f263eec92da45">llvm::AMDGPU::isGraphics</a></div><div class="ttdeci">bool isGraphics(CallingConv::ID cc)</div><div class="ttdef"><b>Definition:</b> <a href="AMDGPUBaseInfo_8cpp_source.html#l01373">AMDGPUBaseInfo.cpp:1373</a></div></div>
<div class="ttc" id="aCallGraphSCCPass_8h_html"><div class="ttname"><a href="CallGraphSCCPass_8h.html">CallGraphSCCPass.h</a></div></div>
<div class="ttc" id="aAMDGPUAnnotateKernelFeatures_8cpp_html_a4f3eae09dd5dbc07a527d13014924710"><div class="ttname"><a href="AMDGPUAnnotateKernelFeatures_8cpp.html#a4f3eae09dd5dbc07a527d13014924710">intrinsicToAttrName</a></div><div class="ttdeci">static StringRef intrinsicToAttrName(Intrinsic::ID ID, bool &amp;NonKernelOnly, bool &amp;IsQueuePtr)</div><div class="ttdef"><b>Definition:</b> <a href="AMDGPUAnnotateKernelFeatures_8cpp_source.html#l00150">AMDGPUAnnotateKernelFeatures.cpp:150</a></div></div>
<div class="ttc" id="aAMDGPULibCalls_8cpp_html_a537c835c34f0b44b6ad2696643754390"><div class="ttname"><a href="AMDGPULibCalls_8cpp.html#a537c835c34f0b44b6ad2696643754390">Callee</a></div><div class="ttdeci">amdgpu Simplify well known AMD library false FunctionCallee Callee</div><div class="ttdef"><b>Definition:</b> <a href="AMDGPULibCalls_8cpp_source.html#l00206">AMDGPULibCalls.cpp:206</a></div></div>
<div class="ttc" id="aclassllvm_1_1ConstantExpr_html"><div class="ttname"><a href="classllvm_1_1ConstantExpr.html">llvm::ConstantExpr</a></div><div class="ttdoc">A constant value that is initialized with an expression using other constant values.</div><div class="ttdef"><b>Definition:</b> <a href="Constants_8h_source.html#l00936">Constants.h:936</a></div></div>
<div class="ttc" id="anamespacellvm_1_1GraphProgram_html_a0ad4685976f8c4d4a697a53fbe05d10b"><div class="ttname"><a href="namespacellvm_1_1GraphProgram.html#a0ad4685976f8c4d4a697a53fbe05d10b">llvm::GraphProgram::Name</a></div><div class="ttdeci">Name</div><div class="ttdef"><b>Definition:</b> <a href="GraphWriter_8h_source.html#l00052">GraphWriter.h:52</a></div></div>
<div class="ttc" id="aclassllvm_1_1AnalysisUsage_html_af22b06a6a4f9df80454071685a0d6a02"><div class="ttname"><a href="classllvm_1_1AnalysisUsage.html#af22b06a6a4f9df80454071685a0d6a02">llvm::AnalysisUsage::setPreservesAll</a></div><div class="ttdeci">void setPreservesAll()</div><div class="ttdoc">Set by analyses that do not transform their input at all.</div><div class="ttdef"><b>Definition:</b> <a href="PassAnalysisSupport_8h_source.html#l00130">PassAnalysisSupport.h:130</a></div></div>
<div class="ttc" id="aclassllvm_1_1Function_html_a3fe81bf8ec280aadc0e37a4b11408fa6"><div class="ttname"><a href="classllvm_1_1Function.html#a3fe81bf8ec280aadc0e37a4b11408fa6">llvm::Function::getFnAttribute</a></div><div class="ttdeci">Attribute getFnAttribute(Attribute::AttrKind Kind) const</div><div class="ttdoc">Return the attribute for the given attribute kind.</div><div class="ttdef"><b>Definition:</b> <a href="Function_8h_source.html#l00366">Function.h:366</a></div></div>
<div class="ttc" id="aAMDGPUAnnotateKernelFeatures_8cpp_html_ad78e062f62e0d6e453941fb4ca843e4d"><div class="ttname"><a href="AMDGPUAnnotateKernelFeatures_8cpp.html#ad78e062f62e0d6e453941fb4ca843e4d">DEBUG_TYPE</a></div><div class="ttdeci">#define DEBUG_TYPE</div><div class="ttdef"><b>Definition:</b> <a href="AMDGPUAnnotateKernelFeatures_8cpp_source.html#l00023">AMDGPUAnnotateKernelFeatures.cpp:23</a></div></div>
<div class="ttc" id="aclassllvm_1_1CallGraphSCCPass_html"><div class="ttname"><a href="classllvm_1_1CallGraphSCCPass.html">llvm::CallGraphSCCPass</a></div><div class="ttdef"><b>Definition:</b> <a href="CallGraphSCCPass_8h_source.html#l00034">CallGraphSCCPass.h:34</a></div></div>
<div class="ttc" id="aclassllvm_1_1GlobalValue_html_a0557bd873ed2afae533faa02e3168d70"><div class="ttname"><a href="classllvm_1_1GlobalValue.html#a0557bd873ed2afae533faa02e3168d70">llvm::GlobalValue::getAddressSpace</a></div><div class="ttdeci">unsigned getAddressSpace() const</div><div class="ttdef"><b>Definition:</b> <a href="Globals_8cpp_source.html#l00112">Globals.cpp:112</a></div></div>
<div class="ttc" id="aCallGraph_8h_html"><div class="ttname"><a href="CallGraph_8h.html">CallGraph.h</a></div><div class="ttdoc">This file provides interfaces used to build and manipulate a call graph, which is a very useful tool ...</div></div>
<div class="ttc" id="aclassllvm_1_1Pass_html"><div class="ttname"><a href="classllvm_1_1Pass.html">llvm::Pass</a></div><div class="ttdoc">Pass interface - Implemented by all 'passes'.</div><div class="ttdef"><b>Definition:</b> <a href="Pass_8h_source.html#l00091">Pass.h:91</a></div></div>
<div class="ttc" id="aAMDGPUAttributor_8cpp_html_af51b9b4f8bc5b41db21eb7d5b75bbbc2"><div class="ttname"><a href="AMDGPUAttributor_8cpp.html#af51b9b4f8bc5b41db21eb7d5b75bbbc2">ImplicitAttrNames</a></div><div class="ttdeci">static constexpr StringLiteral ImplicitAttrNames[]</div><div class="ttdef"><b>Definition:</b> <a href="AMDGPUAttributor_8cpp_source.html#l00025">AMDGPUAttributor.cpp:25</a></div></div>
<div class="ttc" id="aAMDGPUAnnotateKernelFeatures_8cpp_html_a10dea573184b324cee05982745c07f27"><div class="ttname"><a href="AMDGPUAnnotateKernelFeatures_8cpp.html#a10dea573184b324cee05982745c07f27">isDSAddress</a></div><div class="ttdeci">static bool isDSAddress(const Constant *C)</div><div class="ttdef"><b>Definition:</b> <a href="AMDGPUAnnotateKernelFeatures_8cpp_source.html#l00088">AMDGPUAnnotateKernelFeatures.cpp:88</a></div></div>
<div class="ttc" id="aPassBuilderBindings_8cpp_html_ab76052bb166c65901edb603a3e1f03ab"><div class="ttname"><a href="PassBuilderBindings_8cpp.html#ab76052bb166c65901edb603a3e1f03ab">TM</a></div><div class="ttdeci">const char LLVMTargetMachineRef TM</div><div class="ttdef"><b>Definition:</b> <a href="PassBuilderBindings_8cpp_source.html#l00047">PassBuilderBindings.cpp:47</a></div></div>
<div class="ttc" id="aAMDGPUAnnotateKernelFeatures_8cpp_html_a332e3a49fe8b88f8808745c6c60a6973"><div class="ttname"><a href="AMDGPUAnnotateKernelFeatures_8cpp.html#a332e3a49fe8b88f8808745c6c60a6973">handleAttr</a></div><div class="ttdeci">static bool handleAttr(Function &amp;Parent, const Function &amp;Callee, StringRef Name)</div><div class="ttdef"><b>Definition:</b> <a href="AMDGPUAnnotateKernelFeatures_8cpp_source.html#l00193">AMDGPUAnnotateKernelFeatures.cpp:193</a></div></div>
<div class="ttc" id="alib_2CodeGen_2README_8txt_html_a09776db24cf586ec9f1e18f3bae14099"><div class="ttname"><a href="lib_2CodeGen_2README_8txt.html#a09776db24cf586ec9f1e18f3bae14099">BB</a></div><div class="ttdeci">Common register allocation spilling lr str ldr sxth r3 ldr mla r4 can lr mov lr str ldr sxth r3 mla r4 and then merge mul and lr str ldr sxth r3 mla r4 It also increase the likelihood the store may become dead bb27 Successors according to LLVM BB</div><div class="ttdef"><b>Definition:</b> <a href="lib_2CodeGen_2README_8txt_source.html#l00039">README.txt:39</a></div></div>
<div class="ttc" id="aclassllvm_1_1User_html_abe1de1520a21f77ac57cc210bf0fb0b4"><div class="ttname"><a href="classllvm_1_1User.html#abe1de1520a21f77ac57cc210bf0fb0b4">llvm::User::getOperand</a></div><div class="ttdeci">Value * getOperand(unsigned i) const</div><div class="ttdef"><b>Definition:</b> <a href="User_8h_source.html#l00169">User.h:169</a></div></div>
<div class="ttc" id="anamespacellvm_html_a13ce4816876838986d290fa0c392626c"><div class="ttname"><a href="namespacellvm.html#a13ce4816876838986d290fa0c392626c">llvm::AMDGPUAnnotateKernelFeaturesID</a></div><div class="ttdeci">char &amp; AMDGPUAnnotateKernelFeaturesID</div><div class="ttdef"><b>Definition:</b> <a href="AMDGPUAnnotateKernelFeatures_8cpp_source.html#l00073">AMDGPUAnnotateKernelFeatures.cpp:73</a></div></div>
<div class="ttc" id="aAMDGPUAnnotateKernelFeatures_8cpp_html_aeba77c73b22751eee7b54fbd95094b01"><div class="ttname"><a href="AMDGPUAnnotateKernelFeatures_8cpp.html#aeba77c73b22751eee7b54fbd95094b01">INITIALIZE_PASS</a></div><div class="ttdeci">INITIALIZE_PASS(AMDGPUAnnotateKernelFeatures, DEBUG_TYPE, &quot;Add AMDGPU function attributes&quot;, false, false) static bool castRequiresQueuePtr(unsigned SrcAS)</div><div class="ttdef"><b>Definition:</b> <a href="AMDGPUAnnotateKernelFeatures_8cpp_source.html#l00075">AMDGPUAnnotateKernelFeatures.cpp:75</a></div></div>
<div class="ttc" id="aclassllvm_1_1Use_html"><div class="ttname"><a href="classllvm_1_1Use.html">llvm::Use</a></div><div class="ttdoc">A Use represents the edge between a Value definition and its users.</div><div class="ttdef"><b>Definition:</b> <a href="Use_8h_source.html#l00044">Use.h:44</a></div></div>
<div class="ttc" id="aclassllvm_1_1SmallPtrSetImpl_html_a6bc6fb89fe2e91c25559a8631f56e27e"><div class="ttname"><a href="classllvm_1_1SmallPtrSetImpl.html#a6bc6fb89fe2e91c25559a8631f56e27e">llvm::SmallPtrSetImpl::insert</a></div><div class="ttdeci">std::pair&lt; iterator, bool &gt; insert(PtrType Ptr)</div><div class="ttdoc">Inserts Ptr if and only if there is no element in the container equal to Ptr.</div><div class="ttdef"><b>Definition:</b> <a href="SmallPtrSet_8h_source.html#l00364">SmallPtrSet.h:364</a></div></div>
<div class="ttc" id="anamespacellvm_1_1Intrinsic_html_a80add6b3b1cdaec560907995127adc16"><div class="ttname"><a href="namespacellvm_1_1Intrinsic.html#a80add6b3b1cdaec560907995127adc16">llvm::Intrinsic::ID</a></div><div class="ttdeci">unsigned ID</div><div class="ttdef"><b>Definition:</b> <a href="TargetTransformInfo_8h_source.html#l00038">TargetTransformInfo.h:38</a></div></div>
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated on Tue Feb 8 2022 04:41:02 for LLVM by&#160;<a href="http://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.8.20
</small></address>
</body>
</html>
