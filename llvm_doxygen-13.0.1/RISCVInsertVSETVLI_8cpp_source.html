<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.20"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>LLVM: lib/Target/RISCV/RISCVInsertVSETVLI.cpp Source File</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<script type="text/x-mathjax-config">
  MathJax.Hub.Config({
    extensions: ["tex2jax.js"],
    jax: ["input/TeX","output/HTML-CSS"],
});
</script>
<script type="text/javascript" async="async" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.7/MathJax.js/MathJax.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">LLVM
   &#160;<span id="projectnumber">13.0.1</span>
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.20 -->
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',false,false,'search.php','Search');
});
/* @license-end */</script>
<div id="main-nav"></div>
<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="dir_97aefd0d527b934f1d99a682da8fe6a9.html">lib</a></li><li class="navelem"><a class="el" href="dir_794e483eb1cc7921d35fd149d9cc325b.html">Target</a></li><li class="navelem"><a class="el" href="dir_fc62c913e8b7bfce256a9466d87d79c7.html">RISCV</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="headertitle">
<div class="title">RISCVInsertVSETVLI.cpp</div>  </div>
</div><!--header-->
<div class="contents">
<a href="RISCVInsertVSETVLI_8cpp.html">Go to the documentation of this file.</a><div class="fragment"><div class="line"><a name="l00001"></a><span class="lineno">    1</span>&#160;<span class="comment">//===- RISCVInsertVSETVLI.cpp - Insert VSETVLI instructions ---------------===//</span></div>
<div class="line"><a name="l00002"></a><span class="lineno">    2</span>&#160;<span class="comment">//</span></div>
<div class="line"><a name="l00003"></a><span class="lineno">    3</span>&#160;<span class="comment">// Part of the LLVM Project, under the Apache License v2.0 with LLVM Exceptions.</span></div>
<div class="line"><a name="l00004"></a><span class="lineno">    4</span>&#160;<span class="comment">// See https://llvm.org/LICENSE.txt for license information.</span></div>
<div class="line"><a name="l00005"></a><span class="lineno">    5</span>&#160;<span class="comment">// SPDX-License-Identifier: Apache-2.0 WITH LLVM-exception</span></div>
<div class="line"><a name="l00006"></a><span class="lineno">    6</span>&#160;<span class="comment">//</span></div>
<div class="line"><a name="l00007"></a><span class="lineno">    7</span>&#160;<span class="comment">//===----------------------------------------------------------------------===//</span></div>
<div class="line"><a name="l00008"></a><span class="lineno">    8</span>&#160;<span class="comment">//</span></div>
<div class="line"><a name="l00009"></a><span class="lineno">    9</span>&#160;<span class="comment">// This file implements a function pass that inserts VSETVLI instructions where</span></div>
<div class="line"><a name="l00010"></a><span class="lineno">   10</span>&#160;<span class="comment">// needed.</span></div>
<div class="line"><a name="l00011"></a><span class="lineno">   11</span>&#160;<span class="comment">//</span></div>
<div class="line"><a name="l00012"></a><span class="lineno">   12</span>&#160;<span class="comment">// This pass consists of 3 phases:</span></div>
<div class="line"><a name="l00013"></a><span class="lineno">   13</span>&#160;<span class="comment">//</span></div>
<div class="line"><a name="l00014"></a><span class="lineno">   14</span>&#160;<span class="comment">// Phase 1 collects how each basic block affects VL/VTYPE.</span></div>
<div class="line"><a name="l00015"></a><span class="lineno">   15</span>&#160;<span class="comment">//</span></div>
<div class="line"><a name="l00016"></a><span class="lineno">   16</span>&#160;<span class="comment">// Phase 2 uses the information from phase 1 to do a data flow analysis to</span></div>
<div class="line"><a name="l00017"></a><span class="lineno">   17</span>&#160;<span class="comment">// propagate the VL/VTYPE changes through the function. This gives us the</span></div>
<div class="line"><a name="l00018"></a><span class="lineno">   18</span>&#160;<span class="comment">// VL/VTYPE at the start of each basic block.</span></div>
<div class="line"><a name="l00019"></a><span class="lineno">   19</span>&#160;<span class="comment">//</span></div>
<div class="line"><a name="l00020"></a><span class="lineno">   20</span>&#160;<span class="comment">// Phase 3 inserts VSETVLI instructions in each basic block. Information from</span></div>
<div class="line"><a name="l00021"></a><span class="lineno">   21</span>&#160;<span class="comment">// phase 2 is used to prevent inserting a VSETVLI before the first vector</span></div>
<div class="line"><a name="l00022"></a><span class="lineno">   22</span>&#160;<span class="comment">// instruction in the block if possible.</span></div>
<div class="line"><a name="l00023"></a><span class="lineno">   23</span>&#160;<span class="comment">//</span></div>
<div class="line"><a name="l00024"></a><span class="lineno">   24</span>&#160;<span class="comment">//===----------------------------------------------------------------------===//</span></div>
<div class="line"><a name="l00025"></a><span class="lineno">   25</span>&#160; </div>
<div class="line"><a name="l00026"></a><span class="lineno">   26</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="RISCV_8h.html">RISCV.h</a>&quot;</span></div>
<div class="line"><a name="l00027"></a><span class="lineno">   27</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="RISCVSubtarget_8h.html">RISCVSubtarget.h</a>&quot;</span></div>
<div class="line"><a name="l00028"></a><span class="lineno">   28</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="LiveIntervals_8h.html">llvm/CodeGen/LiveIntervals.h</a>&quot;</span></div>
<div class="line"><a name="l00029"></a><span class="lineno">   29</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="MachineFunctionPass_8h.html">llvm/CodeGen/MachineFunctionPass.h</a>&quot;</span></div>
<div class="line"><a name="l00030"></a><span class="lineno">   30</span>&#160;<span class="preprocessor">#include &lt;queue&gt;</span></div>
<div class="line"><a name="l00031"></a><span class="lineno">   31</span>&#160;<span class="keyword">using namespace </span><a class="code" href="namespacellvm.html">llvm</a>;</div>
<div class="line"><a name="l00032"></a><span class="lineno">   32</span>&#160; </div>
<div class="line"><a name="l00033"></a><span class="lineno"><a class="line" href="RISCVInsertVSETVLI_8cpp.html#ad78e062f62e0d6e453941fb4ca843e4d">   33</a></span>&#160;<span class="preprocessor">#define DEBUG_TYPE &quot;riscv-insert-vsetvli&quot;</span></div>
<div class="line"><a name="l00034"></a><span class="lineno"><a class="line" href="RISCVInsertVSETVLI_8cpp.html#a4de876ab2e84826768e79441d88e1b14">   34</a></span>&#160;<span class="preprocessor">#define RISCV_INSERT_VSETVLI_NAME &quot;RISCV Insert VSETVLI pass&quot;</span></div>
<div class="line"><a name="l00035"></a><span class="lineno">   35</span>&#160; </div>
<div class="line"><a name="l00036"></a><span class="lineno"><a class="line" href="RISCVInsertVSETVLI_8cpp.html#a29b0570e44859d5df506ee5d309fb228">   36</a></span>&#160;<span class="keyword">static</span> <a class="code" href="classllvm_1_1cl_1_1opt.html">cl::opt&lt;bool&gt;</a> <a class="code" href="RISCVInsertVSETVLI_8cpp.html#a29b0570e44859d5df506ee5d309fb228">DisableInsertVSETVLPHIOpt</a>(</div>
<div class="line"><a name="l00037"></a><span class="lineno">   37</span>&#160;    <span class="stringliteral">&quot;riscv-disable-insert-vsetvl-phi-opt&quot;</span>, <a class="code" href="namespacellvm_1_1cl.html#a10a041239ae1870cfcc064bfaa79fb65">cl::init</a>(<span class="keyword">false</span>), <a class="code" href="namespacellvm_1_1cl.html#a68075925a54790e71ca790e1d4f21a40a263ac008d8d31f13ce460395fc4cf7e6">cl::Hidden</a>,</div>
<div class="line"><a name="l00038"></a><span class="lineno">   38</span>&#160;    <a class="code" href="structllvm_1_1cl_1_1desc.html">cl::desc</a>(<span class="stringliteral">&quot;Disable looking through phis when inserting vsetvlis.&quot;</span>));</div>
<div class="line"><a name="l00039"></a><span class="lineno">   39</span>&#160; </div>
<div class="line"><a name="l00040"></a><span class="lineno">   40</span>&#160;<span class="keyword">namespace </span>{</div>
<div class="line"><a name="l00041"></a><span class="lineno">   41</span>&#160; </div>
<div class="line"><a name="l00042"></a><span class="lineno">   42</span>&#160;<span class="keyword">class </span>VSETVLIInfo {</div>
<div class="line"><a name="l00043"></a><span class="lineno">   43</span>&#160;  <span class="keyword">union </span>{</div>
<div class="line"><a name="l00044"></a><span class="lineno">   44</span>&#160;    <a class="code" href="classllvm_1_1Register.html">Register</a> AVLReg;</div>
<div class="line"><a name="l00045"></a><span class="lineno">   45</span>&#160;    <span class="keywordtype">unsigned</span> AVLImm;</div>
<div class="line"><a name="l00046"></a><span class="lineno">   46</span>&#160;  };</div>
<div class="line"><a name="l00047"></a><span class="lineno">   47</span>&#160; </div>
<div class="line"><a name="l00048"></a><span class="lineno">   48</span>&#160;  enum : uint8_t {</div>
<div class="line"><a name="l00049"></a><span class="lineno">   49</span>&#160;    Uninitialized,</div>
<div class="line"><a name="l00050"></a><span class="lineno">   50</span>&#160;    AVLIsReg,</div>
<div class="line"><a name="l00051"></a><span class="lineno">   51</span>&#160;    AVLIsImm,</div>
<div class="line"><a name="l00052"></a><span class="lineno">   52</span>&#160;    <a class="code" href="namespacellvm_1_1pdb.html#a434cfa04e4ed34b7a901378557d4ca9eab5923ebc864d1679cf1c3a929c122037">Unknown</a>,</div>
<div class="line"><a name="l00053"></a><span class="lineno">   53</span>&#160;  } State = Uninitialized;</div>
<div class="line"><a name="l00054"></a><span class="lineno">   54</span>&#160; </div>
<div class="line"><a name="l00055"></a><span class="lineno">   55</span>&#160;  <span class="comment">// Fields from VTYPE.</span></div>
<div class="line"><a name="l00056"></a><span class="lineno">   56</span>&#160;  <a class="code" href="namespacellvm_1_1RISCVII.html#ab335a6694bd42d4d2f807ec281af1e1c">RISCVII::VLMUL</a> VLMul = <a class="code" href="namespacellvm_1_1RISCVII.html#ab335a6694bd42d4d2f807ec281af1e1ca1fc4732c22ad534f1cec77512aa4c451">RISCVII::LMUL_1</a>;</div>
<div class="line"><a name="l00057"></a><span class="lineno">   57</span>&#160;  uint8_t SEW = 0;</div>
<div class="line"><a name="l00058"></a><span class="lineno">   58</span>&#160;  uint8_t TailAgnostic : 1;</div>
<div class="line"><a name="l00059"></a><span class="lineno">   59</span>&#160;  uint8_t MaskAgnostic : 1;</div>
<div class="line"><a name="l00060"></a><span class="lineno">   60</span>&#160;  uint8_t MaskRegOp : 1;</div>
<div class="line"><a name="l00061"></a><span class="lineno">   61</span>&#160;  uint8_t SEWLMULRatioOnly : 1;</div>
<div class="line"><a name="l00062"></a><span class="lineno">   62</span>&#160; </div>
<div class="line"><a name="l00063"></a><span class="lineno">   63</span>&#160;<span class="keyword">public</span>:</div>
<div class="line"><a name="l00064"></a><span class="lineno">   64</span>&#160;  VSETVLIInfo()</div>
<div class="line"><a name="l00065"></a><span class="lineno">   65</span>&#160;      : AVLImm(0), TailAgnostic(<a class="code" href="namespacefalse.html">false</a>), MaskAgnostic(<a class="code" href="namespacefalse.html">false</a>), MaskRegOp(<a class="code" href="namespacefalse.html">false</a>),</div>
<div class="line"><a name="l00066"></a><span class="lineno">   66</span>&#160;        SEWLMULRatioOnly(<a class="code" href="namespacefalse.html">false</a>) {}</div>
<div class="line"><a name="l00067"></a><span class="lineno">   67</span>&#160; </div>
<div class="line"><a name="l00068"></a><span class="lineno">   68</span>&#160;  <span class="keyword">static</span> VSETVLIInfo getUnknown() {</div>
<div class="line"><a name="l00069"></a><span class="lineno">   69</span>&#160;    VSETVLIInfo <a class="code" href="CSEInfo_8cpp.html#a75f8a8519c2c9b30e7c06dc5e256fffa">Info</a>;</div>
<div class="line"><a name="l00070"></a><span class="lineno">   70</span>&#160;    <a class="code" href="CSEInfo_8cpp.html#a75f8a8519c2c9b30e7c06dc5e256fffa">Info</a>.setUnknown();</div>
<div class="line"><a name="l00071"></a><span class="lineno">   71</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="CSEInfo_8cpp.html#a75f8a8519c2c9b30e7c06dc5e256fffa">Info</a>;</div>
<div class="line"><a name="l00072"></a><span class="lineno">   72</span>&#160;  }</div>
<div class="line"><a name="l00073"></a><span class="lineno">   73</span>&#160; </div>
<div class="line"><a name="l00074"></a><span class="lineno">   74</span>&#160;  <span class="keywordtype">bool</span> <a class="code" href="RustDemangle_8cpp.html#a103d8cfe62c1651cd70e181746f8a840">isValid</a>()<span class="keyword"> const </span>{ <span class="keywordflow">return</span> State != Uninitialized; }</div>
<div class="line"><a name="l00075"></a><span class="lineno">   75</span>&#160;  <span class="keywordtype">void</span> setUnknown() { State = <a class="code" href="namespacellvm_1_1pdb.html#a434cfa04e4ed34b7a901378557d4ca9eab5923ebc864d1679cf1c3a929c122037">Unknown</a>; }</div>
<div class="line"><a name="l00076"></a><span class="lineno">   76</span>&#160;  <span class="keywordtype">bool</span> isUnknown()<span class="keyword"> const </span>{ <span class="keywordflow">return</span> State == <a class="code" href="namespacellvm_1_1pdb.html#a434cfa04e4ed34b7a901378557d4ca9eab5923ebc864d1679cf1c3a929c122037">Unknown</a>; }</div>
<div class="line"><a name="l00077"></a><span class="lineno">   77</span>&#160; </div>
<div class="line"><a name="l00078"></a><span class="lineno">   78</span>&#160;  <span class="keywordtype">void</span> setAVLReg(<a class="code" href="classllvm_1_1Register.html">Register</a> <a class="code" href="MachineSink_8cpp.html#a359e1ff26f6d466d927a61aae45b05c3">Reg</a>) {</div>
<div class="line"><a name="l00079"></a><span class="lineno">   79</span>&#160;    AVLReg = <a class="code" href="MachineSink_8cpp.html#a359e1ff26f6d466d927a61aae45b05c3">Reg</a>;</div>
<div class="line"><a name="l00080"></a><span class="lineno">   80</span>&#160;    State = AVLIsReg;</div>
<div class="line"><a name="l00081"></a><span class="lineno">   81</span>&#160;  }</div>
<div class="line"><a name="l00082"></a><span class="lineno">   82</span>&#160; </div>
<div class="line"><a name="l00083"></a><span class="lineno">   83</span>&#160;  <span class="keywordtype">void</span> setAVLImm(<span class="keywordtype">unsigned</span> Imm) {</div>
<div class="line"><a name="l00084"></a><span class="lineno">   84</span>&#160;    AVLImm = Imm;</div>
<div class="line"><a name="l00085"></a><span class="lineno">   85</span>&#160;    State = AVLIsImm;</div>
<div class="line"><a name="l00086"></a><span class="lineno">   86</span>&#160;  }</div>
<div class="line"><a name="l00087"></a><span class="lineno">   87</span>&#160; </div>
<div class="line"><a name="l00088"></a><span class="lineno">   88</span>&#160;  <span class="keywordtype">bool</span> hasAVLImm()<span class="keyword"> const </span>{ <span class="keywordflow">return</span> State == AVLIsImm; }</div>
<div class="line"><a name="l00089"></a><span class="lineno">   89</span>&#160;  <span class="keywordtype">bool</span> hasAVLReg()<span class="keyword"> const </span>{ <span class="keywordflow">return</span> State == AVLIsReg; }</div>
<div class="line"><a name="l00090"></a><span class="lineno">   90</span>&#160;  <a class="code" href="classllvm_1_1Register.html">Register</a> getAVLReg()<span class="keyword"> const </span>{</div>
<div class="line"><a name="l00091"></a><span class="lineno">   91</span>&#160;    <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(hasAVLReg());</div>
<div class="line"><a name="l00092"></a><span class="lineno">   92</span>&#160;    <span class="keywordflow">return</span> AVLReg;</div>
<div class="line"><a name="l00093"></a><span class="lineno">   93</span>&#160;  }</div>
<div class="line"><a name="l00094"></a><span class="lineno">   94</span>&#160;  <span class="keywordtype">unsigned</span> getAVLImm()<span class="keyword"> const </span>{</div>
<div class="line"><a name="l00095"></a><span class="lineno">   95</span>&#160;    <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(hasAVLImm());</div>
<div class="line"><a name="l00096"></a><span class="lineno">   96</span>&#160;    <span class="keywordflow">return</span> AVLImm;</div>
<div class="line"><a name="l00097"></a><span class="lineno">   97</span>&#160;  }</div>
<div class="line"><a name="l00098"></a><span class="lineno">   98</span>&#160; </div>
<div class="line"><a name="l00099"></a><span class="lineno">   99</span>&#160;  <span class="keywordtype">bool</span> hasSameAVL(<span class="keyword">const</span> VSETVLIInfo &amp;Other)<span class="keyword"> const </span>{</div>
<div class="line"><a name="l00100"></a><span class="lineno">  100</span>&#160;    <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(<a class="code" href="RustDemangle_8cpp.html#a103d8cfe62c1651cd70e181746f8a840">isValid</a>() &amp;&amp; <a class="code" href="ELFYAML_8cpp.html#a2a91b094e777dacc21de2a7f35da6805">Other</a>.isValid() &amp;&amp;</div>
<div class="line"><a name="l00101"></a><span class="lineno">  101</span>&#160;           <span class="stringliteral">&quot;Can&#39;t compare invalid VSETVLIInfos&quot;</span>);</div>
<div class="line"><a name="l00102"></a><span class="lineno">  102</span>&#160;    <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(!isUnknown() &amp;&amp; !<a class="code" href="ELFYAML_8cpp.html#a2a91b094e777dacc21de2a7f35da6805">Other</a>.isUnknown() &amp;&amp;</div>
<div class="line"><a name="l00103"></a><span class="lineno">  103</span>&#160;           <span class="stringliteral">&quot;Can&#39;t compare AVL in unknown state&quot;</span>);</div>
<div class="line"><a name="l00104"></a><span class="lineno">  104</span>&#160;    <span class="keywordflow">if</span> (hasAVLReg() &amp;&amp; <a class="code" href="ELFYAML_8cpp.html#a2a91b094e777dacc21de2a7f35da6805">Other</a>.hasAVLReg())</div>
<div class="line"><a name="l00105"></a><span class="lineno">  105</span>&#160;      <span class="keywordflow">return</span> getAVLReg() == <a class="code" href="ELFYAML_8cpp.html#a2a91b094e777dacc21de2a7f35da6805">Other</a>.getAVLReg();</div>
<div class="line"><a name="l00106"></a><span class="lineno">  106</span>&#160; </div>
<div class="line"><a name="l00107"></a><span class="lineno">  107</span>&#160;    <span class="keywordflow">if</span> (hasAVLImm() &amp;&amp; <a class="code" href="ELFYAML_8cpp.html#a2a91b094e777dacc21de2a7f35da6805">Other</a>.hasAVLImm())</div>
<div class="line"><a name="l00108"></a><span class="lineno">  108</span>&#160;      <span class="keywordflow">return</span> getAVLImm() == <a class="code" href="ELFYAML_8cpp.html#a2a91b094e777dacc21de2a7f35da6805">Other</a>.getAVLImm();</div>
<div class="line"><a name="l00109"></a><span class="lineno">  109</span>&#160; </div>
<div class="line"><a name="l00110"></a><span class="lineno">  110</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l00111"></a><span class="lineno">  111</span>&#160;  }</div>
<div class="line"><a name="l00112"></a><span class="lineno">  112</span>&#160; </div>
<div class="line"><a name="l00113"></a><span class="lineno">  113</span>&#160;  <span class="keywordtype">void</span> setVTYPE(<span class="keywordtype">unsigned</span> VType) {</div>
<div class="line"><a name="l00114"></a><span class="lineno">  114</span>&#160;    <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(<a class="code" href="RustDemangle_8cpp.html#a103d8cfe62c1651cd70e181746f8a840">isValid</a>() &amp;&amp; !isUnknown() &amp;&amp;</div>
<div class="line"><a name="l00115"></a><span class="lineno">  115</span>&#160;           <span class="stringliteral">&quot;Can&#39;t set VTYPE for uninitialized or unknown&quot;</span>);</div>
<div class="line"><a name="l00116"></a><span class="lineno">  116</span>&#160;    VLMul = <a class="code" href="namespacellvm_1_1RISCVVType.html#a12465125c9315bf864c53298cccde08a">RISCVVType::getVLMUL</a>(VType);</div>
<div class="line"><a name="l00117"></a><span class="lineno">  117</span>&#160;    SEW = <a class="code" href="namespacellvm_1_1RISCVVType.html#af5af8d664535a4bfbb71f0243ed9ae3a">RISCVVType::getSEW</a>(VType);</div>
<div class="line"><a name="l00118"></a><span class="lineno">  118</span>&#160;    TailAgnostic = <a class="code" href="namespacellvm_1_1RISCVVType.html#a08cfea4b8c9e0a6118dc031cafeb0773">RISCVVType::isTailAgnostic</a>(VType);</div>
<div class="line"><a name="l00119"></a><span class="lineno">  119</span>&#160;    MaskAgnostic = <a class="code" href="namespacellvm_1_1RISCVVType.html#a7dc0d6840d44bc9348088a786932fc68">RISCVVType::isMaskAgnostic</a>(VType);</div>
<div class="line"><a name="l00120"></a><span class="lineno">  120</span>&#160;  }</div>
<div class="line"><a name="l00121"></a><span class="lineno">  121</span>&#160;  <span class="keywordtype">void</span> setVTYPE(<a class="code" href="namespacellvm_1_1RISCVII.html#ab335a6694bd42d4d2f807ec281af1e1c">RISCVII::VLMUL</a> L, <span class="keywordtype">unsigned</span> <a class="code" href="lib_2Target_2ARM_2README_8txt.html#a1b45f45820a60c09244a87eb59824aec">S</a>, <span class="keywordtype">bool</span> <a class="code" href="namespacellvm_1_1X86II.html#a15cbb72b959838d6e0f002ce58bc4bb2ad254d64df655ab661c3c3330610385af">TA</a>, <span class="keywordtype">bool</span> MA, <span class="keywordtype">bool</span> MRO) {</div>
<div class="line"><a name="l00122"></a><span class="lineno">  122</span>&#160;    <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(<a class="code" href="RustDemangle_8cpp.html#a103d8cfe62c1651cd70e181746f8a840">isValid</a>() &amp;&amp; !isUnknown() &amp;&amp;</div>
<div class="line"><a name="l00123"></a><span class="lineno">  123</span>&#160;           <span class="stringliteral">&quot;Can&#39;t set VTYPE for uninitialized or unknown&quot;</span>);</div>
<div class="line"><a name="l00124"></a><span class="lineno">  124</span>&#160;    VLMul = L;</div>
<div class="line"><a name="l00125"></a><span class="lineno">  125</span>&#160;    SEW = <a class="code" href="lib_2Target_2ARM_2README_8txt.html#a1b45f45820a60c09244a87eb59824aec">S</a>;</div>
<div class="line"><a name="l00126"></a><span class="lineno">  126</span>&#160;    TailAgnostic = <a class="code" href="namespacellvm_1_1X86II.html#a15cbb72b959838d6e0f002ce58bc4bb2ad254d64df655ab661c3c3330610385af">TA</a>;</div>
<div class="line"><a name="l00127"></a><span class="lineno">  127</span>&#160;    MaskAgnostic = MA;</div>
<div class="line"><a name="l00128"></a><span class="lineno">  128</span>&#160;    MaskRegOp = MRO;</div>
<div class="line"><a name="l00129"></a><span class="lineno">  129</span>&#160;  }</div>
<div class="line"><a name="l00130"></a><span class="lineno">  130</span>&#160; </div>
<div class="line"><a name="l00131"></a><span class="lineno">  131</span>&#160;  <span class="keywordtype">unsigned</span> <a class="code" href="namespacellvm_1_1RISCVVType.html#ad3636219b4d0045029530c6a16c160dc">encodeVTYPE</a>()<span class="keyword"> const </span>{</div>
<div class="line"><a name="l00132"></a><span class="lineno">  132</span>&#160;    <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(<a class="code" href="RustDemangle_8cpp.html#a103d8cfe62c1651cd70e181746f8a840">isValid</a>() &amp;&amp; !isUnknown() &amp;&amp; !SEWLMULRatioOnly &amp;&amp;</div>
<div class="line"><a name="l00133"></a><span class="lineno">  133</span>&#160;           <span class="stringliteral">&quot;Can&#39;t encode VTYPE for uninitialized or unknown&quot;</span>);</div>
<div class="line"><a name="l00134"></a><span class="lineno">  134</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="namespacellvm_1_1RISCVVType.html#ad3636219b4d0045029530c6a16c160dc">RISCVVType::encodeVTYPE</a>(VLMul, SEW, TailAgnostic, MaskAgnostic);</div>
<div class="line"><a name="l00135"></a><span class="lineno">  135</span>&#160;  }</div>
<div class="line"><a name="l00136"></a><span class="lineno">  136</span>&#160; </div>
<div class="line"><a name="l00137"></a><span class="lineno">  137</span>&#160;  <span class="keywordtype">bool</span> hasSEWLMULRatioOnly()<span class="keyword"> const </span>{ <span class="keywordflow">return</span> SEWLMULRatioOnly; }</div>
<div class="line"><a name="l00138"></a><span class="lineno">  138</span>&#160; </div>
<div class="line"><a name="l00139"></a><span class="lineno">  139</span>&#160;  <span class="keywordtype">bool</span> hasSameVTYPE(<span class="keyword">const</span> VSETVLIInfo &amp;Other)<span class="keyword"> const </span>{</div>
<div class="line"><a name="l00140"></a><span class="lineno">  140</span>&#160;    <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(<a class="code" href="RustDemangle_8cpp.html#a103d8cfe62c1651cd70e181746f8a840">isValid</a>() &amp;&amp; <a class="code" href="ELFYAML_8cpp.html#a2a91b094e777dacc21de2a7f35da6805">Other</a>.isValid() &amp;&amp;</div>
<div class="line"><a name="l00141"></a><span class="lineno">  141</span>&#160;           <span class="stringliteral">&quot;Can&#39;t compare invalid VSETVLIInfos&quot;</span>);</div>
<div class="line"><a name="l00142"></a><span class="lineno">  142</span>&#160;    <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(!isUnknown() &amp;&amp; !<a class="code" href="ELFYAML_8cpp.html#a2a91b094e777dacc21de2a7f35da6805">Other</a>.isUnknown() &amp;&amp;</div>
<div class="line"><a name="l00143"></a><span class="lineno">  143</span>&#160;           <span class="stringliteral">&quot;Can&#39;t compare VTYPE in unknown state&quot;</span>);</div>
<div class="line"><a name="l00144"></a><span class="lineno">  144</span>&#160;    <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(!SEWLMULRatioOnly &amp;&amp; !<a class="code" href="ELFYAML_8cpp.html#a2a91b094e777dacc21de2a7f35da6805">Other</a>.SEWLMULRatioOnly &amp;&amp;</div>
<div class="line"><a name="l00145"></a><span class="lineno">  145</span>&#160;           <span class="stringliteral">&quot;Can&#39;t compare when only LMUL/SEW ratio is valid.&quot;</span>);</div>
<div class="line"><a name="l00146"></a><span class="lineno">  146</span>&#160;    <span class="keywordflow">return</span> std::tie(VLMul, SEW, TailAgnostic, MaskAgnostic) ==</div>
<div class="line"><a name="l00147"></a><span class="lineno">  147</span>&#160;           std::tie(<a class="code" href="ELFYAML_8cpp.html#a2a91b094e777dacc21de2a7f35da6805">Other</a>.VLMul, <a class="code" href="ELFYAML_8cpp.html#a2a91b094e777dacc21de2a7f35da6805">Other</a>.SEW, <a class="code" href="ELFYAML_8cpp.html#a2a91b094e777dacc21de2a7f35da6805">Other</a>.TailAgnostic,</div>
<div class="line"><a name="l00148"></a><span class="lineno">  148</span>&#160;                    <a class="code" href="ELFYAML_8cpp.html#a2a91b094e777dacc21de2a7f35da6805">Other</a>.MaskAgnostic);</div>
<div class="line"><a name="l00149"></a><span class="lineno">  149</span>&#160;  }</div>
<div class="line"><a name="l00150"></a><span class="lineno">  150</span>&#160; </div>
<div class="line"><a name="l00151"></a><span class="lineno">  151</span>&#160;  <span class="comment">// Convert VLMUL to a fixed point value with 3 bits of fraction.</span></div>
<div class="line"><a name="l00152"></a><span class="lineno">  152</span>&#160;  <span class="keywordtype">unsigned</span> getSEWLMULRatio()<span class="keyword"> const </span>{</div>
<div class="line"><a name="l00153"></a><span class="lineno">  153</span>&#160;    <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(<a class="code" href="RustDemangle_8cpp.html#a103d8cfe62c1651cd70e181746f8a840">isValid</a>() &amp;&amp; !isUnknown() &amp;&amp;</div>
<div class="line"><a name="l00154"></a><span class="lineno">  154</span>&#160;           <span class="stringliteral">&quot;Can&#39;t use VTYPE for uninitialized or unknown&quot;</span>);</div>
<div class="line"><a name="l00155"></a><span class="lineno">  155</span>&#160;    <span class="keywordtype">unsigned</span> LMul;</div>
<div class="line"><a name="l00156"></a><span class="lineno">  156</span>&#160;    <span class="keywordtype">bool</span> Fractional;</div>
<div class="line"><a name="l00157"></a><span class="lineno">  157</span>&#160;    std::tie(LMul, Fractional) = <a class="code" href="namespacellvm_1_1RISCVVType.html#a5144889af710ec49f5eeff7be79e671d">RISCVVType::decodeVLMUL</a>(VLMul);</div>
<div class="line"><a name="l00158"></a><span class="lineno">  158</span>&#160; </div>
<div class="line"><a name="l00159"></a><span class="lineno">  159</span>&#160;    <span class="comment">// Convert LMul to a fixed point value with 3 fractional bits.</span></div>
<div class="line"><a name="l00160"></a><span class="lineno">  160</span>&#160;    LMul = Fractional ? (8 / LMul) : (LMul * 8);</div>
<div class="line"><a name="l00161"></a><span class="lineno">  161</span>&#160; </div>
<div class="line"><a name="l00162"></a><span class="lineno">  162</span>&#160;    <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(SEW &gt;= 8 &amp;&amp; <span class="stringliteral">&quot;Unexpected SEW value&quot;</span>);</div>
<div class="line"><a name="l00163"></a><span class="lineno">  163</span>&#160;    <span class="keywordflow">return</span> (SEW * 8) / LMul;</div>
<div class="line"><a name="l00164"></a><span class="lineno">  164</span>&#160;  }</div>
<div class="line"><a name="l00165"></a><span class="lineno">  165</span>&#160; </div>
<div class="line"><a name="l00166"></a><span class="lineno">  166</span>&#160;  <span class="comment">// Check if the VTYPE for these two VSETVLIInfos produce the same VLMAX.</span></div>
<div class="line"><a name="l00167"></a><span class="lineno">  167</span>&#160;  <span class="keywordtype">bool</span> hasSameVLMAX(<span class="keyword">const</span> VSETVLIInfo &amp;Other)<span class="keyword"> const </span>{</div>
<div class="line"><a name="l00168"></a><span class="lineno">  168</span>&#160;    <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(<a class="code" href="RustDemangle_8cpp.html#a103d8cfe62c1651cd70e181746f8a840">isValid</a>() &amp;&amp; <a class="code" href="ELFYAML_8cpp.html#a2a91b094e777dacc21de2a7f35da6805">Other</a>.isValid() &amp;&amp;</div>
<div class="line"><a name="l00169"></a><span class="lineno">  169</span>&#160;           <span class="stringliteral">&quot;Can&#39;t compare invalid VSETVLIInfos&quot;</span>);</div>
<div class="line"><a name="l00170"></a><span class="lineno">  170</span>&#160;    <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(!isUnknown() &amp;&amp; !<a class="code" href="ELFYAML_8cpp.html#a2a91b094e777dacc21de2a7f35da6805">Other</a>.isUnknown() &amp;&amp;</div>
<div class="line"><a name="l00171"></a><span class="lineno">  171</span>&#160;           <span class="stringliteral">&quot;Can&#39;t compare VTYPE in unknown state&quot;</span>);</div>
<div class="line"><a name="l00172"></a><span class="lineno">  172</span>&#160;    <span class="keywordflow">return</span> getSEWLMULRatio() == <a class="code" href="ELFYAML_8cpp.html#a2a91b094e777dacc21de2a7f35da6805">Other</a>.getSEWLMULRatio();</div>
<div class="line"><a name="l00173"></a><span class="lineno">  173</span>&#160;  }</div>
<div class="line"><a name="l00174"></a><span class="lineno">  174</span>&#160; </div>
<div class="line"><a name="l00175"></a><span class="lineno">  175</span>&#160;  <span class="comment">// Determine whether the vector instructions requirements represented by</span></div>
<div class="line"><a name="l00176"></a><span class="lineno">  176</span>&#160;  <span class="comment">// InstrInfo are compatible with the previous vsetvli instruction represented</span></div>
<div class="line"><a name="l00177"></a><span class="lineno">  177</span>&#160;  <span class="comment">// by this.</span></div>
<div class="line"><a name="l00178"></a><span class="lineno">  178</span>&#160;  <span class="keywordtype">bool</span> isCompatible(<span class="keyword">const</span> VSETVLIInfo &amp;InstrInfo)<span class="keyword"> const </span>{</div>
<div class="line"><a name="l00179"></a><span class="lineno">  179</span>&#160;    <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(<a class="code" href="RustDemangle_8cpp.html#a103d8cfe62c1651cd70e181746f8a840">isValid</a>() &amp;&amp; InstrInfo.isValid() &amp;&amp;</div>
<div class="line"><a name="l00180"></a><span class="lineno">  180</span>&#160;           <span class="stringliteral">&quot;Can&#39;t compare invalid VSETVLIInfos&quot;</span>);</div>
<div class="line"><a name="l00181"></a><span class="lineno">  181</span>&#160;    <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(!InstrInfo.SEWLMULRatioOnly &amp;&amp;</div>
<div class="line"><a name="l00182"></a><span class="lineno">  182</span>&#160;           <span class="stringliteral">&quot;Expected a valid VTYPE for instruction!&quot;</span>);</div>
<div class="line"><a name="l00183"></a><span class="lineno">  183</span>&#160;    <span class="comment">// Nothing is compatible with Unknown.</span></div>
<div class="line"><a name="l00184"></a><span class="lineno">  184</span>&#160;    <span class="keywordflow">if</span> (isUnknown() || InstrInfo.isUnknown())</div>
<div class="line"><a name="l00185"></a><span class="lineno">  185</span>&#160;      <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l00186"></a><span class="lineno">  186</span>&#160; </div>
<div class="line"><a name="l00187"></a><span class="lineno">  187</span>&#160;    <span class="comment">// If only our VLMAX ratio is valid, then this isn&#39;t compatible.</span></div>
<div class="line"><a name="l00188"></a><span class="lineno">  188</span>&#160;    <span class="keywordflow">if</span> (SEWLMULRatioOnly)</div>
<div class="line"><a name="l00189"></a><span class="lineno">  189</span>&#160;      <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l00190"></a><span class="lineno">  190</span>&#160; </div>
<div class="line"><a name="l00191"></a><span class="lineno">  191</span>&#160;    <span class="comment">// If the instruction doesn&#39;t need an AVLReg and the SEW matches, consider</span></div>
<div class="line"><a name="l00192"></a><span class="lineno">  192</span>&#160;    <span class="comment">// it compatible.</span></div>
<div class="line"><a name="l00193"></a><span class="lineno">  193</span>&#160;    <span class="keywordflow">if</span> (InstrInfo.hasAVLReg() &amp;&amp; InstrInfo.AVLReg == RISCV::NoRegister) {</div>
<div class="line"><a name="l00194"></a><span class="lineno">  194</span>&#160;      <span class="keywordflow">if</span> (SEW == InstrInfo.SEW)</div>
<div class="line"><a name="l00195"></a><span class="lineno">  195</span>&#160;        <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l00196"></a><span class="lineno">  196</span>&#160;    }</div>
<div class="line"><a name="l00197"></a><span class="lineno">  197</span>&#160; </div>
<div class="line"><a name="l00198"></a><span class="lineno">  198</span>&#160;    <span class="comment">// VTypes must match unless the instruction is a mask reg operation, then it</span></div>
<div class="line"><a name="l00199"></a><span class="lineno">  199</span>&#160;    <span class="comment">// only care about VLMAX.</span></div>
<div class="line"><a name="l00200"></a><span class="lineno">  200</span>&#160;    <span class="comment">// FIXME: Mask reg operations are probably ok if &quot;this&quot; VLMAX is larger</span></div>
<div class="line"><a name="l00201"></a><span class="lineno">  201</span>&#160;    <span class="comment">// than &quot;InstrInfo&quot;.</span></div>
<div class="line"><a name="l00202"></a><span class="lineno">  202</span>&#160;    <span class="keywordflow">if</span> (!hasSameVTYPE(InstrInfo) &amp;&amp;</div>
<div class="line"><a name="l00203"></a><span class="lineno">  203</span>&#160;        !(InstrInfo.MaskRegOp &amp;&amp; hasSameVLMAX(InstrInfo) &amp;&amp;</div>
<div class="line"><a name="l00204"></a><span class="lineno">  204</span>&#160;          TailAgnostic == InstrInfo.TailAgnostic &amp;&amp;</div>
<div class="line"><a name="l00205"></a><span class="lineno">  205</span>&#160;          MaskAgnostic == InstrInfo.MaskAgnostic))</div>
<div class="line"><a name="l00206"></a><span class="lineno">  206</span>&#160;      <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l00207"></a><span class="lineno">  207</span>&#160; </div>
<div class="line"><a name="l00208"></a><span class="lineno">  208</span>&#160;    <span class="keywordflow">return</span> hasSameAVL(InstrInfo);</div>
<div class="line"><a name="l00209"></a><span class="lineno">  209</span>&#160;  }</div>
<div class="line"><a name="l00210"></a><span class="lineno">  210</span>&#160; </div>
<div class="line"><a name="l00211"></a><span class="lineno">  211</span>&#160;  <span class="keywordtype">bool</span> <a class="code" href="namespacellvm.html#a162c90bc179a6359438d060722bee35f">operator==</a>(<span class="keyword">const</span> VSETVLIInfo &amp;Other)<span class="keyword"> const </span>{</div>
<div class="line"><a name="l00212"></a><span class="lineno">  212</span>&#160;    <span class="comment">// Uninitialized is only equal to another Uninitialized.</span></div>
<div class="line"><a name="l00213"></a><span class="lineno">  213</span>&#160;    <span class="keywordflow">if</span> (!<a class="code" href="RustDemangle_8cpp.html#a103d8cfe62c1651cd70e181746f8a840">isValid</a>())</div>
<div class="line"><a name="l00214"></a><span class="lineno">  214</span>&#160;      <span class="keywordflow">return</span> !<a class="code" href="ELFYAML_8cpp.html#a2a91b094e777dacc21de2a7f35da6805">Other</a>.isValid();</div>
<div class="line"><a name="l00215"></a><span class="lineno">  215</span>&#160;    <span class="keywordflow">if</span> (!<a class="code" href="ELFYAML_8cpp.html#a2a91b094e777dacc21de2a7f35da6805">Other</a>.isValid())</div>
<div class="line"><a name="l00216"></a><span class="lineno">  216</span>&#160;      <span class="keywordflow">return</span> !<a class="code" href="RustDemangle_8cpp.html#a103d8cfe62c1651cd70e181746f8a840">isValid</a>();</div>
<div class="line"><a name="l00217"></a><span class="lineno">  217</span>&#160; </div>
<div class="line"><a name="l00218"></a><span class="lineno">  218</span>&#160;    <span class="comment">// Unknown is only equal to another Unknown.</span></div>
<div class="line"><a name="l00219"></a><span class="lineno">  219</span>&#160;    <span class="keywordflow">if</span> (isUnknown())</div>
<div class="line"><a name="l00220"></a><span class="lineno">  220</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="ELFYAML_8cpp.html#a2a91b094e777dacc21de2a7f35da6805">Other</a>.isUnknown();</div>
<div class="line"><a name="l00221"></a><span class="lineno">  221</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="ELFYAML_8cpp.html#a2a91b094e777dacc21de2a7f35da6805">Other</a>.isUnknown())</div>
<div class="line"><a name="l00222"></a><span class="lineno">  222</span>&#160;      <span class="keywordflow">return</span> isUnknown();</div>
<div class="line"><a name="l00223"></a><span class="lineno">  223</span>&#160; </div>
<div class="line"><a name="l00224"></a><span class="lineno">  224</span>&#160;    <span class="keywordflow">if</span> (!hasSameAVL(Other))</div>
<div class="line"><a name="l00225"></a><span class="lineno">  225</span>&#160;      <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l00226"></a><span class="lineno">  226</span>&#160; </div>
<div class="line"><a name="l00227"></a><span class="lineno">  227</span>&#160;    <span class="comment">// If only the VLMAX is valid, check that it is the same.</span></div>
<div class="line"><a name="l00228"></a><span class="lineno">  228</span>&#160;    <span class="keywordflow">if</span> (SEWLMULRatioOnly &amp;&amp; <a class="code" href="ELFYAML_8cpp.html#a2a91b094e777dacc21de2a7f35da6805">Other</a>.SEWLMULRatioOnly)</div>
<div class="line"><a name="l00229"></a><span class="lineno">  229</span>&#160;      <span class="keywordflow">return</span> hasSameVLMAX(Other);</div>
<div class="line"><a name="l00230"></a><span class="lineno">  230</span>&#160; </div>
<div class="line"><a name="l00231"></a><span class="lineno">  231</span>&#160;    <span class="comment">// If the full VTYPE is valid, check that it is the same.</span></div>
<div class="line"><a name="l00232"></a><span class="lineno">  232</span>&#160;    <span class="keywordflow">if</span> (!SEWLMULRatioOnly &amp;&amp; !<a class="code" href="ELFYAML_8cpp.html#a2a91b094e777dacc21de2a7f35da6805">Other</a>.SEWLMULRatioOnly)</div>
<div class="line"><a name="l00233"></a><span class="lineno">  233</span>&#160;      <span class="keywordflow">return</span> hasSameVTYPE(Other);</div>
<div class="line"><a name="l00234"></a><span class="lineno">  234</span>&#160; </div>
<div class="line"><a name="l00235"></a><span class="lineno">  235</span>&#160;    <span class="comment">// If the SEWLMULRatioOnly bits are different, then they aren&#39;t equal.</span></div>
<div class="line"><a name="l00236"></a><span class="lineno">  236</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l00237"></a><span class="lineno">  237</span>&#160;  }</div>
<div class="line"><a name="l00238"></a><span class="lineno">  238</span>&#160; </div>
<div class="line"><a name="l00239"></a><span class="lineno">  239</span>&#160;  <span class="comment">// Calculate the VSETVLIInfo visible to a block assuming this and Other are</span></div>
<div class="line"><a name="l00240"></a><span class="lineno">  240</span>&#160;  <span class="comment">// both predecessors.</span></div>
<div class="line"><a name="l00241"></a><span class="lineno">  241</span>&#160;  VSETVLIInfo <a class="code" href="LazyValueInfo_8cpp.html#ac20acbd89e45284bfb32ca506d20749d">intersect</a>(<span class="keyword">const</span> VSETVLIInfo &amp;Other)<span class="keyword"> const </span>{</div>
<div class="line"><a name="l00242"></a><span class="lineno">  242</span>&#160;    <span class="comment">// If the new value isn&#39;t valid, ignore it.</span></div>
<div class="line"><a name="l00243"></a><span class="lineno">  243</span>&#160;    <span class="keywordflow">if</span> (!<a class="code" href="ELFYAML_8cpp.html#a2a91b094e777dacc21de2a7f35da6805">Other</a>.isValid())</div>
<div class="line"><a name="l00244"></a><span class="lineno">  244</span>&#160;      <span class="keywordflow">return</span> *<span class="keyword">this</span>;</div>
<div class="line"><a name="l00245"></a><span class="lineno">  245</span>&#160; </div>
<div class="line"><a name="l00246"></a><span class="lineno">  246</span>&#160;    <span class="comment">// If this value isn&#39;t valid, this must be the first predecessor, use it.</span></div>
<div class="line"><a name="l00247"></a><span class="lineno">  247</span>&#160;    <span class="keywordflow">if</span> (!<a class="code" href="RustDemangle_8cpp.html#a103d8cfe62c1651cd70e181746f8a840">isValid</a>())</div>
<div class="line"><a name="l00248"></a><span class="lineno">  248</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="ELFYAML_8cpp.html#a2a91b094e777dacc21de2a7f35da6805">Other</a>;</div>
<div class="line"><a name="l00249"></a><span class="lineno">  249</span>&#160; </div>
<div class="line"><a name="l00250"></a><span class="lineno">  250</span>&#160;    <span class="comment">// If either is unknown, the result is unknown.</span></div>
<div class="line"><a name="l00251"></a><span class="lineno">  251</span>&#160;    <span class="keywordflow">if</span> (isUnknown() || <a class="code" href="ELFYAML_8cpp.html#a2a91b094e777dacc21de2a7f35da6805">Other</a>.isUnknown())</div>
<div class="line"><a name="l00252"></a><span class="lineno">  252</span>&#160;      <span class="keywordflow">return</span> VSETVLIInfo::getUnknown();</div>
<div class="line"><a name="l00253"></a><span class="lineno">  253</span>&#160; </div>
<div class="line"><a name="l00254"></a><span class="lineno">  254</span>&#160;    <span class="comment">// If we have an exact, match return this.</span></div>
<div class="line"><a name="l00255"></a><span class="lineno">  255</span>&#160;    <span class="keywordflow">if</span> (*<span class="keyword">this</span> == Other)</div>
<div class="line"><a name="l00256"></a><span class="lineno">  256</span>&#160;      <span class="keywordflow">return</span> *<span class="keyword">this</span>;</div>
<div class="line"><a name="l00257"></a><span class="lineno">  257</span>&#160; </div>
<div class="line"><a name="l00258"></a><span class="lineno">  258</span>&#160;    <span class="comment">// Not an exact match, but maybe the AVL and VLMAX are the same. If so,</span></div>
<div class="line"><a name="l00259"></a><span class="lineno">  259</span>&#160;    <span class="comment">// return an SEW/LMUL ratio only value.</span></div>
<div class="line"><a name="l00260"></a><span class="lineno">  260</span>&#160;    <span class="keywordflow">if</span> (hasSameAVL(Other) &amp;&amp; hasSameVLMAX(Other)) {</div>
<div class="line"><a name="l00261"></a><span class="lineno">  261</span>&#160;      VSETVLIInfo MergeInfo = *<span class="keyword">this</span>;</div>
<div class="line"><a name="l00262"></a><span class="lineno">  262</span>&#160;      MergeInfo.SEWLMULRatioOnly = <span class="keyword">true</span>;</div>
<div class="line"><a name="l00263"></a><span class="lineno">  263</span>&#160;      <span class="keywordflow">return</span> MergeInfo;</div>
<div class="line"><a name="l00264"></a><span class="lineno">  264</span>&#160;    }</div>
<div class="line"><a name="l00265"></a><span class="lineno">  265</span>&#160; </div>
<div class="line"><a name="l00266"></a><span class="lineno">  266</span>&#160;    <span class="comment">// Otherwise the result is unknown.</span></div>
<div class="line"><a name="l00267"></a><span class="lineno">  267</span>&#160;    <span class="keywordflow">return</span> VSETVLIInfo::getUnknown();</div>
<div class="line"><a name="l00268"></a><span class="lineno">  268</span>&#160;  }</div>
<div class="line"><a name="l00269"></a><span class="lineno">  269</span>&#160; </div>
<div class="line"><a name="l00270"></a><span class="lineno">  270</span>&#160;  <span class="comment">// Calculate the VSETVLIInfo visible at the end of the block assuming this</span></div>
<div class="line"><a name="l00271"></a><span class="lineno">  271</span>&#160;  <span class="comment">// is the predecessor value, and Other is change for this block.</span></div>
<div class="line"><a name="l00272"></a><span class="lineno">  272</span>&#160;  VSETVLIInfo <a class="code" href="LoopDeletion_8cpp.html#a66a2592ace8a67bc796c72710d632bab">merge</a>(<span class="keyword">const</span> VSETVLIInfo &amp;Other)<span class="keyword"> const </span>{</div>
<div class="line"><a name="l00273"></a><span class="lineno">  273</span>&#160;    <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(<a class="code" href="RustDemangle_8cpp.html#a103d8cfe62c1651cd70e181746f8a840">isValid</a>() &amp;&amp; <span class="stringliteral">&quot;Can only merge with a valid VSETVLInfo&quot;</span>);</div>
<div class="line"><a name="l00274"></a><span class="lineno">  274</span>&#160; </div>
<div class="line"><a name="l00275"></a><span class="lineno">  275</span>&#160;    <span class="comment">// Nothing changed from the predecessor, keep it.</span></div>
<div class="line"><a name="l00276"></a><span class="lineno">  276</span>&#160;    <span class="keywordflow">if</span> (!<a class="code" href="ELFYAML_8cpp.html#a2a91b094e777dacc21de2a7f35da6805">Other</a>.isValid())</div>
<div class="line"><a name="l00277"></a><span class="lineno">  277</span>&#160;      <span class="keywordflow">return</span> *<span class="keyword">this</span>;</div>
<div class="line"><a name="l00278"></a><span class="lineno">  278</span>&#160; </div>
<div class="line"><a name="l00279"></a><span class="lineno">  279</span>&#160;    <span class="comment">// If the change is compatible with the input, we won&#39;t create a VSETVLI</span></div>
<div class="line"><a name="l00280"></a><span class="lineno">  280</span>&#160;    <span class="comment">// and should keep the predecessor.</span></div>
<div class="line"><a name="l00281"></a><span class="lineno">  281</span>&#160;    <span class="keywordflow">if</span> (isCompatible(Other))</div>
<div class="line"><a name="l00282"></a><span class="lineno">  282</span>&#160;      <span class="keywordflow">return</span> *<span class="keyword">this</span>;</div>
<div class="line"><a name="l00283"></a><span class="lineno">  283</span>&#160; </div>
<div class="line"><a name="l00284"></a><span class="lineno">  284</span>&#160;    <span class="comment">// Otherwise just use whatever is in this block.</span></div>
<div class="line"><a name="l00285"></a><span class="lineno">  285</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="ELFYAML_8cpp.html#a2a91b094e777dacc21de2a7f35da6805">Other</a>;</div>
<div class="line"><a name="l00286"></a><span class="lineno">  286</span>&#160;  }</div>
<div class="line"><a name="l00287"></a><span class="lineno">  287</span>&#160;};</div>
<div class="line"><a name="l00288"></a><span class="lineno">  288</span>&#160; </div>
<div class="line"><a name="l00289"></a><span class="lineno">  289</span>&#160;<span class="keyword">struct </span><a class="code" href="classBlockData.html#a3a4dfddb67525d6766e5b78956395fb9">BlockData</a> {</div>
<div class="line"><a name="l00290"></a><span class="lineno">  290</span>&#160;  <span class="comment">// The VSETVLIInfo that represents the net changes to the VL/VTYPE registers</span></div>
<div class="line"><a name="l00291"></a><span class="lineno">  291</span>&#160;  <span class="comment">// made by this block. Calculated in Phase 1.</span></div>
<div class="line"><a name="l00292"></a><span class="lineno">  292</span>&#160;  VSETVLIInfo Change;</div>
<div class="line"><a name="l00293"></a><span class="lineno">  293</span>&#160; </div>
<div class="line"><a name="l00294"></a><span class="lineno">  294</span>&#160;  <span class="comment">// The VSETVLIInfo that represents the VL/VTYPE settings on exit from this</span></div>
<div class="line"><a name="l00295"></a><span class="lineno">  295</span>&#160;  <span class="comment">// block. Calculated in Phase 2.</span></div>
<div class="line"><a name="l00296"></a><span class="lineno">  296</span>&#160;  VSETVLIInfo Exit;</div>
<div class="line"><a name="l00297"></a><span class="lineno">  297</span>&#160; </div>
<div class="line"><a name="l00298"></a><span class="lineno">  298</span>&#160;  <span class="comment">// The VSETVLIInfo that represents the VL/VTYPE settings from all predecessor</span></div>
<div class="line"><a name="l00299"></a><span class="lineno">  299</span>&#160;  <span class="comment">// blocks. Calculated in Phase 2, and used by Phase 3.</span></div>
<div class="line"><a name="l00300"></a><span class="lineno">  300</span>&#160;  VSETVLIInfo Pred;</div>
<div class="line"><a name="l00301"></a><span class="lineno">  301</span>&#160; </div>
<div class="line"><a name="l00302"></a><span class="lineno">  302</span>&#160;  <span class="comment">// Keeps track of whether the block is already in the queue.</span></div>
<div class="line"><a name="l00303"></a><span class="lineno">  303</span>&#160;  <span class="keywordtype">bool</span> InQueue = <span class="keyword">false</span>;</div>
<div class="line"><a name="l00304"></a><span class="lineno">  304</span>&#160; </div>
<div class="line"><a name="l00305"></a><span class="lineno">  305</span>&#160;  BlockData() {}</div>
<div class="line"><a name="l00306"></a><span class="lineno">  306</span>&#160;};</div>
<div class="line"><a name="l00307"></a><span class="lineno">  307</span>&#160; </div>
<div class="line"><a name="l00308"></a><span class="lineno">  308</span>&#160;<span class="keyword">class </span>RISCVInsertVSETVLI : <span class="keyword">public</span> <a class="code" href="classllvm_1_1MachineFunctionPass.html">MachineFunctionPass</a> {</div>
<div class="line"><a name="l00309"></a><span class="lineno">  309</span>&#160;  <span class="keyword">const</span> <a class="code" href="classllvm_1_1TargetInstrInfo.html">TargetInstrInfo</a> *<a class="code" href="HexagonCopyToCombine_8cpp.html#a1d40004718218dbdf06b496766299101">TII</a>;</div>
<div class="line"><a name="l00310"></a><span class="lineno">  310</span>&#160;  <a class="code" href="classllvm_1_1MachineRegisterInfo.html">MachineRegisterInfo</a> *<a class="code" href="AArch64AdvSIMDScalarPass_8cpp.html#aacd2ab195054a3e6a74bfbb9d5d571c8">MRI</a>;</div>
<div class="line"><a name="l00311"></a><span class="lineno">  311</span>&#160; </div>
<div class="line"><a name="l00312"></a><span class="lineno">  312</span>&#160;  std::vector&lt;BlockData&gt; BlockInfo;</div>
<div class="line"><a name="l00313"></a><span class="lineno">  313</span>&#160;  std::queue&lt;const MachineBasicBlock *&gt; WorkList;</div>
<div class="line"><a name="l00314"></a><span class="lineno">  314</span>&#160; </div>
<div class="line"><a name="l00315"></a><span class="lineno">  315</span>&#160;<span class="keyword">public</span>:</div>
<div class="line"><a name="l00316"></a><span class="lineno">  316</span>&#160;  <span class="keyword">static</span> <span class="keywordtype">char</span> <a class="code" href="namespacellvm_1_1Intrinsic.html#a80add6b3b1cdaec560907995127adc16">ID</a>;</div>
<div class="line"><a name="l00317"></a><span class="lineno">  317</span>&#160; </div>
<div class="line"><a name="l00318"></a><span class="lineno">  318</span>&#160;  RISCVInsertVSETVLI() : <a class="code" href="classllvm_1_1MachineFunctionPass.html">MachineFunctionPass</a>(<a class="code" href="namespacellvm_1_1Intrinsic.html#a80add6b3b1cdaec560907995127adc16">ID</a>) {</div>
<div class="line"><a name="l00319"></a><span class="lineno">  319</span>&#160;    <a class="code" href="namespacellvm.html#a372d99cc1a229ad0e8ef80f12a0cd7cf">initializeRISCVInsertVSETVLIPass</a>(*<a class="code" href="classllvm_1_1PassRegistry.html#a05a729900b76c89e808c6c3094921b2f">PassRegistry::getPassRegistry</a>());</div>
<div class="line"><a name="l00320"></a><span class="lineno">  320</span>&#160;  }</div>
<div class="line"><a name="l00321"></a><span class="lineno">  321</span>&#160;  <span class="keywordtype">bool</span> runOnMachineFunction(<a class="code" href="classllvm_1_1MachineFunction.html">MachineFunction</a> &amp;MF) <span class="keyword">override</span>;</div>
<div class="line"><a name="l00322"></a><span class="lineno">  322</span>&#160; </div>
<div class="line"><a name="l00323"></a><span class="lineno">  323</span>&#160;  <span class="keywordtype">void</span> getAnalysisUsage(<a class="code" href="classllvm_1_1AnalysisUsage.html">AnalysisUsage</a> &amp;AU)<span class="keyword"> const override </span>{</div>
<div class="line"><a name="l00324"></a><span class="lineno">  324</span>&#160;    AU.<a class="code" href="classllvm_1_1AnalysisUsage.html#af11a6ebf7ab3c388234cb6d5378439a3">setPreservesCFG</a>();</div>
<div class="line"><a name="l00325"></a><span class="lineno">  325</span>&#160;    <a class="code" href="classllvm_1_1MachineFunctionPass.html#a864fd57b4304ef933b3281d0ef85a88e">MachineFunctionPass::getAnalysisUsage</a>(AU);</div>
<div class="line"><a name="l00326"></a><span class="lineno">  326</span>&#160;  }</div>
<div class="line"><a name="l00327"></a><span class="lineno">  327</span>&#160; </div>
<div class="line"><a name="l00328"></a><span class="lineno">  328</span>&#160;  <a class="code" href="classllvm_1_1StringRef.html">StringRef</a> getPassName()<span class="keyword"> const override </span>{ <span class="keywordflow">return</span> <a class="code" href="RISCVInsertVSETVLI_8cpp.html#a4de876ab2e84826768e79441d88e1b14">RISCV_INSERT_VSETVLI_NAME</a>; }</div>
<div class="line"><a name="l00329"></a><span class="lineno">  329</span>&#160; </div>
<div class="line"><a name="l00330"></a><span class="lineno">  330</span>&#160;<span class="keyword">private</span>:</div>
<div class="line"><a name="l00331"></a><span class="lineno">  331</span>&#160;  <span class="keywordtype">bool</span> needVSETVLI(<span class="keyword">const</span> VSETVLIInfo &amp;Require, <span class="keyword">const</span> VSETVLIInfo &amp;CurInfo);</div>
<div class="line"><a name="l00332"></a><span class="lineno">  332</span>&#160;  <span class="keywordtype">bool</span> needVSETVLIPHI(<span class="keyword">const</span> VSETVLIInfo &amp;Require, <span class="keyword">const</span> <a class="code" href="classllvm_1_1MachineBasicBlock.html">MachineBasicBlock</a> &amp;<a class="code" href="AArch64SLSHardening_8cpp.html#a5958512eae2979bd2eb383977996a600">MBB</a>);</div>
<div class="line"><a name="l00333"></a><span class="lineno">  333</span>&#160;  <span class="keywordtype">void</span> insertVSETVLI(<a class="code" href="classllvm_1_1MachineBasicBlock.html">MachineBasicBlock</a> &amp;<a class="code" href="AArch64SLSHardening_8cpp.html#a5958512eae2979bd2eb383977996a600">MBB</a>, <a class="code" href="classllvm_1_1MachineInstr.html">MachineInstr</a> &amp;<a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>,</div>
<div class="line"><a name="l00334"></a><span class="lineno">  334</span>&#160;                     <span class="keyword">const</span> VSETVLIInfo &amp;<a class="code" href="CSEInfo_8cpp.html#a75f8a8519c2c9b30e7c06dc5e256fffa">Info</a>, <span class="keyword">const</span> VSETVLIInfo &amp;PrevInfo);</div>
<div class="line"><a name="l00335"></a><span class="lineno">  335</span>&#160; </div>
<div class="line"><a name="l00336"></a><span class="lineno">  336</span>&#160;  <span class="keywordtype">bool</span> computeVLVTYPEChanges(<span class="keyword">const</span> <a class="code" href="classllvm_1_1MachineBasicBlock.html">MachineBasicBlock</a> &amp;<a class="code" href="AArch64SLSHardening_8cpp.html#a5958512eae2979bd2eb383977996a600">MBB</a>);</div>
<div class="line"><a name="l00337"></a><span class="lineno">  337</span>&#160;  <span class="keywordtype">void</span> computeIncomingVLVTYPE(<span class="keyword">const</span> <a class="code" href="classllvm_1_1MachineBasicBlock.html">MachineBasicBlock</a> &amp;<a class="code" href="AArch64SLSHardening_8cpp.html#a5958512eae2979bd2eb383977996a600">MBB</a>);</div>
<div class="line"><a name="l00338"></a><span class="lineno">  338</span>&#160;  <span class="keywordtype">void</span> emitVSETVLIs(<a class="code" href="classllvm_1_1MachineBasicBlock.html">MachineBasicBlock</a> &amp;<a class="code" href="AArch64SLSHardening_8cpp.html#a5958512eae2979bd2eb383977996a600">MBB</a>);</div>
<div class="line"><a name="l00339"></a><span class="lineno">  339</span>&#160;};</div>
<div class="line"><a name="l00340"></a><span class="lineno">  340</span>&#160; </div>
<div class="line"><a name="l00341"></a><span class="lineno">  341</span>&#160;} <span class="comment">// end anonymous namespace</span></div>
<div class="line"><a name="l00342"></a><span class="lineno">  342</span>&#160; </div>
<div class="line"><a name="l00343"></a><span class="lineno">  343</span>&#160;<span class="keywordtype">char</span> <a class="code" href="namespacellvm_1_1Intrinsic.html#a80add6b3b1cdaec560907995127adc16">RISCVInsertVSETVLI::ID</a> = 0;</div>
<div class="line"><a name="l00344"></a><span class="lineno">  344</span>&#160; </div>
<div class="line"><a name="l00345"></a><span class="lineno"><a class="line" href="RISCVInsertVSETVLI_8cpp.html#af5783a89cb6c8b0cc18ddd1318de6eb9">  345</a></span>&#160;<a class="code" href="RISCVInsertVSETVLI_8cpp.html#af5783a89cb6c8b0cc18ddd1318de6eb9">INITIALIZE_PASS</a>(RISCVInsertVSETVLI, <a class="code" href="RISCVInsertVSETVLI_8cpp.html#ad78e062f62e0d6e453941fb4ca843e4d">DEBUG_TYPE</a>, <a class="code" href="RISCVInsertVSETVLI_8cpp.html#a4de876ab2e84826768e79441d88e1b14">RISCV_INSERT_VSETVLI_NAME</a>,</div>
<div class="line"><a name="l00346"></a><span class="lineno">  346</span>&#160;                <span class="keyword">false</span>, <span class="keyword">false</span>)</div>
<div class="line"><a name="l00347"></a><span class="lineno">  347</span>&#160; </div>
<div class="line"><a name="l00348"></a><span class="lineno">  348</span>&#160;static <a class="code" href="classllvm_1_1MachineInstr.html">MachineInstr</a> *elideCopies(<a class="code" href="classllvm_1_1MachineInstr.html">MachineInstr</a> *<a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>,</div>
<div class="line"><a name="l00349"></a><span class="lineno">  349</span>&#160;                                 <a class="code" href="AArch64PromoteConstant_8cpp.html#a90f8350fecae261c25be85d38b451bff">const</a> <a class="code" href="classllvm_1_1MachineRegisterInfo.html">MachineRegisterInfo</a> *<a class="code" href="AArch64AdvSIMDScalarPass_8cpp.html#aacd2ab195054a3e6a74bfbb9d5d571c8">MRI</a>) {</div>
<div class="line"><a name="l00350"></a><span class="lineno">  350</span>&#160;  <span class="keywordflow">while</span> (<span class="keyword">true</span>) {</div>
<div class="line"><a name="l00351"></a><span class="lineno">  351</span>&#160;    <span class="keywordflow">if</span> (!<a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>-&gt;isFullCopy())</div>
<div class="line"><a name="l00352"></a><span class="lineno">  352</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>;</div>
<div class="line"><a name="l00353"></a><span class="lineno">  353</span>&#160;    <span class="keywordflow">if</span> (!<a class="code" href="classllvm_1_1Register.html#ab94ac0eb79655589fb116359f862886c">Register::isVirtualRegister</a>(<a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>-&gt;getOperand(1).getReg()))</div>
<div class="line"><a name="l00354"></a><span class="lineno">  354</span>&#160;      <span class="keywordflow">return</span> <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l00355"></a><span class="lineno">  355</span>&#160;    <a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a> = <a class="code" href="AArch64AdvSIMDScalarPass_8cpp.html#aacd2ab195054a3e6a74bfbb9d5d571c8">MRI</a>-&gt;<a class="code" href="classllvm_1_1MachineRegisterInfo.html#a40d954b9cf9ee8b545a78725f2549cba">getVRegDef</a>(<a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>-&gt;getOperand(1).getReg());</div>
<div class="line"><a name="l00356"></a><span class="lineno">  356</span>&#160;    <span class="keywordflow">if</span> (!<a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>)</div>
<div class="line"><a name="l00357"></a><span class="lineno">  357</span>&#160;      <span class="keywordflow">return</span> <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l00358"></a><span class="lineno">  358</span>&#160;  }</div>
<div class="line"><a name="l00359"></a><span class="lineno">  359</span>&#160;}</div>
<div class="line"><a name="l00360"></a><span class="lineno">  360</span>&#160; </div>
<div class="line"><a name="l00361"></a><span class="lineno">  361</span>&#160;<span class="keyword">static</span> VSETVLIInfo computeInfoForInstr(<span class="keyword">const</span> <a class="code" href="classllvm_1_1MachineInstr.html">MachineInstr</a> &amp;<a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>, uint64_t TSFlags,</div>
<div class="line"><a name="l00362"></a><span class="lineno">  362</span>&#160;                                       <span class="keyword">const</span> <a class="code" href="classllvm_1_1MachineRegisterInfo.html">MachineRegisterInfo</a> *<a class="code" href="AArch64AdvSIMDScalarPass_8cpp.html#aacd2ab195054a3e6a74bfbb9d5d571c8">MRI</a>) {</div>
<div class="line"><a name="l00363"></a><span class="lineno">  363</span>&#160;  VSETVLIInfo InstrInfo;</div>
<div class="line"><a name="l00364"></a><span class="lineno">  364</span>&#160;  <span class="keywordtype">unsigned</span> NumOperands = <a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.getNumExplicitOperands();</div>
<div class="line"><a name="l00365"></a><span class="lineno">  365</span>&#160; </div>
<div class="line"><a name="l00366"></a><span class="lineno">  366</span>&#160;  <a class="code" href="namespacellvm_1_1RISCVII.html#ab335a6694bd42d4d2f807ec281af1e1c">RISCVII::VLMUL</a> VLMul = <a class="code" href="namespacellvm_1_1RISCVII.html#a7dd086d89a22b8e83abd3e687cd13a35">RISCVII::getLMul</a>(TSFlags);</div>
<div class="line"><a name="l00367"></a><span class="lineno">  367</span>&#160; </div>
<div class="line"><a name="l00368"></a><span class="lineno">  368</span>&#160;  <span class="keywordtype">unsigned</span> Log2SEW = <a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.getOperand(NumOperands - 1).getImm();</div>
<div class="line"><a name="l00369"></a><span class="lineno">  369</span>&#160;  <span class="comment">// A Log2SEW of 0 is an operation on mask registers only.</span></div>
<div class="line"><a name="l00370"></a><span class="lineno">  370</span>&#160;  <span class="keywordtype">bool</span> MaskRegOp = Log2SEW == 0;</div>
<div class="line"><a name="l00371"></a><span class="lineno">  371</span>&#160;  <span class="keywordtype">unsigned</span> SEW = Log2SEW ? 1 &lt;&lt; Log2SEW : 8;</div>
<div class="line"><a name="l00372"></a><span class="lineno">  372</span>&#160;  <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(<a class="code" href="namespacellvm_1_1RISCVVType.html#aa18a6c74ee58139536f65e458f1c4586">RISCVVType::isValidSEW</a>(SEW) &amp;&amp; <span class="stringliteral">&quot;Unexpected SEW&quot;</span>);</div>
<div class="line"><a name="l00373"></a><span class="lineno">  373</span>&#160; </div>
<div class="line"><a name="l00374"></a><span class="lineno">  374</span>&#160;  <span class="comment">// Default to tail agnostic unless the destination is tied to a source.</span></div>
<div class="line"><a name="l00375"></a><span class="lineno">  375</span>&#160;  <span class="comment">// Unless the source is undef. In that case the user would have some control</span></div>
<div class="line"><a name="l00376"></a><span class="lineno">  376</span>&#160;  <span class="comment">// over the tail values. Some pseudo instructions force a tail agnostic policy</span></div>
<div class="line"><a name="l00377"></a><span class="lineno">  377</span>&#160;  <span class="comment">// despite having a tied def.</span></div>
<div class="line"><a name="l00378"></a><span class="lineno">  378</span>&#160;  <span class="keywordtype">bool</span> ForceTailAgnostic = <a class="code" href="namespacellvm_1_1RISCVII.html#a6f7616aee876ea307c715d2ef9fb041b">RISCVII::doesForceTailAgnostic</a>(TSFlags);</div>
<div class="line"><a name="l00379"></a><span class="lineno">  379</span>&#160;  <span class="keywordtype">bool</span> TailAgnostic = <span class="keyword">true</span>;</div>
<div class="line"><a name="l00380"></a><span class="lineno">  380</span>&#160;  <span class="keywordtype">unsigned</span> UseOpIdx;</div>
<div class="line"><a name="l00381"></a><span class="lineno">  381</span>&#160;  <span class="keywordflow">if</span> (!ForceTailAgnostic &amp;&amp; <a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.isRegTiedToUseOperand(0, &amp;UseOpIdx)) {</div>
<div class="line"><a name="l00382"></a><span class="lineno">  382</span>&#160;    TailAgnostic = <span class="keyword">false</span>;</div>
<div class="line"><a name="l00383"></a><span class="lineno">  383</span>&#160;    <span class="comment">// If the tied operand is an IMPLICIT_DEF we can keep TailAgnostic.</span></div>
<div class="line"><a name="l00384"></a><span class="lineno">  384</span>&#160;    <span class="keyword">const</span> <a class="code" href="classllvm_1_1MachineOperand.html">MachineOperand</a> &amp;UseMO = <a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.getOperand(UseOpIdx);</div>
<div class="line"><a name="l00385"></a><span class="lineno">  385</span>&#160;    <a class="code" href="classllvm_1_1MachineInstr.html">MachineInstr</a> *<a class="code" href="AArch64ExpandPseudoInsts_8cpp.html#a6cf2f8996b1e9aaf2d7a435aaa62382f">UseMI</a> = <a class="code" href="AArch64AdvSIMDScalarPass_8cpp.html#aacd2ab195054a3e6a74bfbb9d5d571c8">MRI</a>-&gt;<a class="code" href="classllvm_1_1MachineRegisterInfo.html#a40d954b9cf9ee8b545a78725f2549cba">getVRegDef</a>(UseMO.<a class="code" href="classllvm_1_1MachineOperand.html#ac0035d7c1c860501c877c20e6e93297b">getReg</a>());</div>
<div class="line"><a name="l00386"></a><span class="lineno">  386</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="AArch64ExpandPseudoInsts_8cpp.html#a6cf2f8996b1e9aaf2d7a435aaa62382f">UseMI</a>) {</div>
<div class="line"><a name="l00387"></a><span class="lineno">  387</span>&#160;      <a class="code" href="AArch64ExpandPseudoInsts_8cpp.html#a6cf2f8996b1e9aaf2d7a435aaa62382f">UseMI</a> = elideCopies(<a class="code" href="AArch64ExpandPseudoInsts_8cpp.html#a6cf2f8996b1e9aaf2d7a435aaa62382f">UseMI</a>, <a class="code" href="AArch64AdvSIMDScalarPass_8cpp.html#aacd2ab195054a3e6a74bfbb9d5d571c8">MRI</a>);</div>
<div class="line"><a name="l00388"></a><span class="lineno">  388</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="AArch64ExpandPseudoInsts_8cpp.html#a6cf2f8996b1e9aaf2d7a435aaa62382f">UseMI</a> &amp;&amp; <a class="code" href="AArch64ExpandPseudoInsts_8cpp.html#a6cf2f8996b1e9aaf2d7a435aaa62382f">UseMI</a>-&gt;<a class="code" href="classllvm_1_1MachineInstr.html#a120ccebe70e1b0ddf72fc776229d0025">isImplicitDef</a>())</div>
<div class="line"><a name="l00389"></a><span class="lineno">  389</span>&#160;        TailAgnostic = <span class="keyword">true</span>;</div>
<div class="line"><a name="l00390"></a><span class="lineno">  390</span>&#160;    }</div>
<div class="line"><a name="l00391"></a><span class="lineno">  391</span>&#160;  }</div>
<div class="line"><a name="l00392"></a><span class="lineno">  392</span>&#160; </div>
<div class="line"><a name="l00393"></a><span class="lineno">  393</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="namespacellvm_1_1RISCVII.html#a81c11c8178c6df7f55ef0557daa54765">RISCVII::hasVLOp</a>(TSFlags)) {</div>
<div class="line"><a name="l00394"></a><span class="lineno">  394</span>&#160;    <span class="keyword">const</span> <a class="code" href="classllvm_1_1MachineOperand.html">MachineOperand</a> &amp;VLOp = <a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.getOperand(<a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.getNumExplicitOperands() - 2);</div>
<div class="line"><a name="l00395"></a><span class="lineno">  395</span>&#160;    <span class="keywordflow">if</span> (VLOp.<a class="code" href="classllvm_1_1MachineOperand.html#a76f61c6784df6dc8402a8b9011041926">isImm</a>())</div>
<div class="line"><a name="l00396"></a><span class="lineno">  396</span>&#160;      InstrInfo.setAVLImm(VLOp.<a class="code" href="classllvm_1_1MachineOperand.html#a38b28a85f818b49d8806c150b8a5b4f7">getImm</a>());</div>
<div class="line"><a name="l00397"></a><span class="lineno">  397</span>&#160;    <span class="keywordflow">else</span></div>
<div class="line"><a name="l00398"></a><span class="lineno">  398</span>&#160;      InstrInfo.setAVLReg(VLOp.<a class="code" href="classllvm_1_1MachineOperand.html#ac0035d7c1c860501c877c20e6e93297b">getReg</a>());</div>
<div class="line"><a name="l00399"></a><span class="lineno">  399</span>&#160;  } <span class="keywordflow">else</span></div>
<div class="line"><a name="l00400"></a><span class="lineno">  400</span>&#160;    InstrInfo.setAVLReg(RISCV::NoRegister);</div>
<div class="line"><a name="l00401"></a><span class="lineno">  401</span>&#160;  InstrInfo.setVTYPE(VLMul, SEW, <span class="comment">/*TailAgnostic*/</span> TailAgnostic,</div>
<div class="line"><a name="l00402"></a><span class="lineno">  402</span>&#160;                     <span class="comment">/*MaskAgnostic*/</span> <span class="keyword">false</span>, MaskRegOp);</div>
<div class="line"><a name="l00403"></a><span class="lineno">  403</span>&#160; </div>
<div class="line"><a name="l00404"></a><span class="lineno">  404</span>&#160;  <span class="keywordflow">return</span> InstrInfo;</div>
<div class="line"><a name="l00405"></a><span class="lineno">  405</span>&#160;}</div>
<div class="line"><a name="l00406"></a><span class="lineno">  406</span>&#160; </div>
<div class="line"><a name="l00407"></a><span class="lineno">  407</span>&#160;<span class="keywordtype">void</span> RISCVInsertVSETVLI::insertVSETVLI(<a class="code" href="classllvm_1_1MachineBasicBlock.html">MachineBasicBlock</a> &amp;<a class="code" href="AArch64SLSHardening_8cpp.html#a5958512eae2979bd2eb383977996a600">MBB</a>, <a class="code" href="classllvm_1_1MachineInstr.html">MachineInstr</a> &amp;<a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>,</div>
<div class="line"><a name="l00408"></a><span class="lineno">  408</span>&#160;                                       <span class="keyword">const</span> VSETVLIInfo &amp;<a class="code" href="CSEInfo_8cpp.html#a75f8a8519c2c9b30e7c06dc5e256fffa">Info</a>,</div>
<div class="line"><a name="l00409"></a><span class="lineno">  409</span>&#160;                                       <span class="keyword">const</span> VSETVLIInfo &amp;PrevInfo) {</div>
<div class="line"><a name="l00410"></a><span class="lineno">  410</span>&#160;  <a class="code" href="classllvm_1_1DebugLoc.html">DebugLoc</a> <a class="code" href="AArch64SLSHardening_8cpp.html#ad467c4ab9119043f9b7750ab986be61a">DL</a> = <a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.getDebugLoc();</div>
<div class="line"><a name="l00411"></a><span class="lineno">  411</span>&#160; </div>
<div class="line"><a name="l00412"></a><span class="lineno">  412</span>&#160;  <span class="comment">// Use X0, X0 form if the AVL is the same and the SEW+LMUL gives the same</span></div>
<div class="line"><a name="l00413"></a><span class="lineno">  413</span>&#160;  <span class="comment">// VLMAX.</span></div>
<div class="line"><a name="l00414"></a><span class="lineno">  414</span>&#160;  <span class="keywordflow">if</span> (PrevInfo.isValid() &amp;&amp; !PrevInfo.isUnknown() &amp;&amp;</div>
<div class="line"><a name="l00415"></a><span class="lineno">  415</span>&#160;      <a class="code" href="CSEInfo_8cpp.html#a75f8a8519c2c9b30e7c06dc5e256fffa">Info</a>.hasSameAVL(PrevInfo) &amp;&amp; <a class="code" href="CSEInfo_8cpp.html#a75f8a8519c2c9b30e7c06dc5e256fffa">Info</a>.hasSameVLMAX(PrevInfo)) {</div>
<div class="line"><a name="l00416"></a><span class="lineno">  416</span>&#160;    <a class="code" href="namespacellvm.html#abe63d9ba16515b8df95d8b2a677d39d8">BuildMI</a>(<a class="code" href="AArch64SLSHardening_8cpp.html#a5958512eae2979bd2eb383977996a600">MBB</a>, <a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>, <a class="code" href="AArch64SLSHardening_8cpp.html#ad467c4ab9119043f9b7750ab986be61a">DL</a>, <a class="code" href="HexagonCopyToCombine_8cpp.html#a1d40004718218dbdf06b496766299101">TII</a>-&gt;get(RISCV::PseudoVSETVLI))</div>
<div class="line"><a name="l00417"></a><span class="lineno">  417</span>&#160;        .<a class="code" href="classllvm_1_1MachineInstrBuilder.html#ad08ed580345a51c50d9477dec1e65818">addReg</a>(RISCV::X0, <a class="code" href="namespacellvm_1_1RegState.html#a5a2c54ccd4089208481258b7803e01a8a72c17e2ff2d5af62a30e56ac152aa8d5">RegState::Define</a> | <a class="code" href="namespacellvm_1_1RegState.html#a5a2c54ccd4089208481258b7803e01a8a2fee1a7db4e84247a193a9af1f907013">RegState::Dead</a>)</div>
<div class="line"><a name="l00418"></a><span class="lineno">  418</span>&#160;        .<a class="code" href="classllvm_1_1MachineInstrBuilder.html#ad08ed580345a51c50d9477dec1e65818">addReg</a>(RISCV::X0, <a class="code" href="namespacellvm_1_1RegState.html#a5a2c54ccd4089208481258b7803e01a8a9ddde91ef09476d28a088fe57f8e2921">RegState::Kill</a>)</div>
<div class="line"><a name="l00419"></a><span class="lineno">  419</span>&#160;        .<a class="code" href="classllvm_1_1MachineInstrBuilder.html#a4f1ceb770fe3446bfb2b3fa26858098f">addImm</a>(<a class="code" href="CSEInfo_8cpp.html#a75f8a8519c2c9b30e7c06dc5e256fffa">Info</a>.encodeVTYPE())</div>
<div class="line"><a name="l00420"></a><span class="lineno">  420</span>&#160;        .<a class="code" href="classllvm_1_1MachineInstrBuilder.html#ad08ed580345a51c50d9477dec1e65818">addReg</a>(RISCV::VL, <a class="code" href="namespacellvm_1_1RegState.html#a5a2c54ccd4089208481258b7803e01a8a0fec8ba6f4a4dc758b725205985eee99">RegState::Implicit</a>);</div>
<div class="line"><a name="l00421"></a><span class="lineno">  421</span>&#160;    <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l00422"></a><span class="lineno">  422</span>&#160;  }</div>
<div class="line"><a name="l00423"></a><span class="lineno">  423</span>&#160; </div>
<div class="line"><a name="l00424"></a><span class="lineno">  424</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="CSEInfo_8cpp.html#a75f8a8519c2c9b30e7c06dc5e256fffa">Info</a>.hasAVLImm()) {</div>
<div class="line"><a name="l00425"></a><span class="lineno">  425</span>&#160;    <a class="code" href="namespacellvm.html#abe63d9ba16515b8df95d8b2a677d39d8">BuildMI</a>(<a class="code" href="AArch64SLSHardening_8cpp.html#a5958512eae2979bd2eb383977996a600">MBB</a>, <a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>, <a class="code" href="AArch64SLSHardening_8cpp.html#ad467c4ab9119043f9b7750ab986be61a">DL</a>, <a class="code" href="HexagonCopyToCombine_8cpp.html#a1d40004718218dbdf06b496766299101">TII</a>-&gt;get(RISCV::PseudoVSETIVLI))</div>
<div class="line"><a name="l00426"></a><span class="lineno">  426</span>&#160;        .<a class="code" href="classllvm_1_1MachineInstrBuilder.html#ad08ed580345a51c50d9477dec1e65818">addReg</a>(RISCV::X0, <a class="code" href="namespacellvm_1_1RegState.html#a5a2c54ccd4089208481258b7803e01a8a72c17e2ff2d5af62a30e56ac152aa8d5">RegState::Define</a> | <a class="code" href="namespacellvm_1_1RegState.html#a5a2c54ccd4089208481258b7803e01a8a2fee1a7db4e84247a193a9af1f907013">RegState::Dead</a>)</div>
<div class="line"><a name="l00427"></a><span class="lineno">  427</span>&#160;        .<a class="code" href="classllvm_1_1MachineInstrBuilder.html#a4f1ceb770fe3446bfb2b3fa26858098f">addImm</a>(<a class="code" href="CSEInfo_8cpp.html#a75f8a8519c2c9b30e7c06dc5e256fffa">Info</a>.getAVLImm())</div>
<div class="line"><a name="l00428"></a><span class="lineno">  428</span>&#160;        .<a class="code" href="classllvm_1_1MachineInstrBuilder.html#a4f1ceb770fe3446bfb2b3fa26858098f">addImm</a>(<a class="code" href="CSEInfo_8cpp.html#a75f8a8519c2c9b30e7c06dc5e256fffa">Info</a>.encodeVTYPE());</div>
<div class="line"><a name="l00429"></a><span class="lineno">  429</span>&#160;    <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l00430"></a><span class="lineno">  430</span>&#160;  }</div>
<div class="line"><a name="l00431"></a><span class="lineno">  431</span>&#160; </div>
<div class="line"><a name="l00432"></a><span class="lineno">  432</span>&#160;  <a class="code" href="classllvm_1_1Register.html">Register</a> AVLReg = <a class="code" href="CSEInfo_8cpp.html#a75f8a8519c2c9b30e7c06dc5e256fffa">Info</a>.getAVLReg();</div>
<div class="line"><a name="l00433"></a><span class="lineno">  433</span>&#160;  <span class="keywordflow">if</span> (AVLReg == RISCV::NoRegister) {</div>
<div class="line"><a name="l00434"></a><span class="lineno">  434</span>&#160;    <span class="comment">// We can only use x0, x0 if there&#39;s no chance of the vtype change causing</span></div>
<div class="line"><a name="l00435"></a><span class="lineno">  435</span>&#160;    <span class="comment">// the previous vl to become invalid.</span></div>
<div class="line"><a name="l00436"></a><span class="lineno">  436</span>&#160;    <span class="keywordflow">if</span> (PrevInfo.isValid() &amp;&amp; !PrevInfo.isUnknown() &amp;&amp;</div>
<div class="line"><a name="l00437"></a><span class="lineno">  437</span>&#160;        <a class="code" href="CSEInfo_8cpp.html#a75f8a8519c2c9b30e7c06dc5e256fffa">Info</a>.hasSameVLMAX(PrevInfo)) {</div>
<div class="line"><a name="l00438"></a><span class="lineno">  438</span>&#160;      <a class="code" href="namespacellvm.html#abe63d9ba16515b8df95d8b2a677d39d8">BuildMI</a>(<a class="code" href="AArch64SLSHardening_8cpp.html#a5958512eae2979bd2eb383977996a600">MBB</a>, <a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>, <a class="code" href="AArch64SLSHardening_8cpp.html#ad467c4ab9119043f9b7750ab986be61a">DL</a>, <a class="code" href="HexagonCopyToCombine_8cpp.html#a1d40004718218dbdf06b496766299101">TII</a>-&gt;get(RISCV::PseudoVSETVLI))</div>
<div class="line"><a name="l00439"></a><span class="lineno">  439</span>&#160;          .<a class="code" href="classllvm_1_1MachineInstrBuilder.html#ad08ed580345a51c50d9477dec1e65818">addReg</a>(RISCV::X0, <a class="code" href="namespacellvm_1_1RegState.html#a5a2c54ccd4089208481258b7803e01a8a72c17e2ff2d5af62a30e56ac152aa8d5">RegState::Define</a> | <a class="code" href="namespacellvm_1_1RegState.html#a5a2c54ccd4089208481258b7803e01a8a2fee1a7db4e84247a193a9af1f907013">RegState::Dead</a>)</div>
<div class="line"><a name="l00440"></a><span class="lineno">  440</span>&#160;          .<a class="code" href="classllvm_1_1MachineInstrBuilder.html#ad08ed580345a51c50d9477dec1e65818">addReg</a>(RISCV::X0, <a class="code" href="namespacellvm_1_1RegState.html#a5a2c54ccd4089208481258b7803e01a8a9ddde91ef09476d28a088fe57f8e2921">RegState::Kill</a>)</div>
<div class="line"><a name="l00441"></a><span class="lineno">  441</span>&#160;          .<a class="code" href="classllvm_1_1MachineInstrBuilder.html#a4f1ceb770fe3446bfb2b3fa26858098f">addImm</a>(<a class="code" href="CSEInfo_8cpp.html#a75f8a8519c2c9b30e7c06dc5e256fffa">Info</a>.encodeVTYPE())</div>
<div class="line"><a name="l00442"></a><span class="lineno">  442</span>&#160;          .<a class="code" href="classllvm_1_1MachineInstrBuilder.html#ad08ed580345a51c50d9477dec1e65818">addReg</a>(RISCV::VL, <a class="code" href="namespacellvm_1_1RegState.html#a5a2c54ccd4089208481258b7803e01a8a0fec8ba6f4a4dc758b725205985eee99">RegState::Implicit</a>);</div>
<div class="line"><a name="l00443"></a><span class="lineno">  443</span>&#160;      <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l00444"></a><span class="lineno">  444</span>&#160;    }</div>
<div class="line"><a name="l00445"></a><span class="lineno">  445</span>&#160;    <span class="comment">// Otherwise use an AVL of 0 to avoid depending on previous vl.</span></div>
<div class="line"><a name="l00446"></a><span class="lineno">  446</span>&#160;    <a class="code" href="namespacellvm.html#abe63d9ba16515b8df95d8b2a677d39d8">BuildMI</a>(<a class="code" href="AArch64SLSHardening_8cpp.html#a5958512eae2979bd2eb383977996a600">MBB</a>, <a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>, <a class="code" href="AArch64SLSHardening_8cpp.html#ad467c4ab9119043f9b7750ab986be61a">DL</a>, <a class="code" href="HexagonCopyToCombine_8cpp.html#a1d40004718218dbdf06b496766299101">TII</a>-&gt;get(RISCV::PseudoVSETIVLI))</div>
<div class="line"><a name="l00447"></a><span class="lineno">  447</span>&#160;        .<a class="code" href="classllvm_1_1MachineInstrBuilder.html#ad08ed580345a51c50d9477dec1e65818">addReg</a>(RISCV::X0, <a class="code" href="namespacellvm_1_1RegState.html#a5a2c54ccd4089208481258b7803e01a8a72c17e2ff2d5af62a30e56ac152aa8d5">RegState::Define</a> | <a class="code" href="namespacellvm_1_1RegState.html#a5a2c54ccd4089208481258b7803e01a8a2fee1a7db4e84247a193a9af1f907013">RegState::Dead</a>)</div>
<div class="line"><a name="l00448"></a><span class="lineno">  448</span>&#160;        .<a class="code" href="classllvm_1_1MachineInstrBuilder.html#a4f1ceb770fe3446bfb2b3fa26858098f">addImm</a>(0)</div>
<div class="line"><a name="l00449"></a><span class="lineno">  449</span>&#160;        .<a class="code" href="classllvm_1_1MachineInstrBuilder.html#a4f1ceb770fe3446bfb2b3fa26858098f">addImm</a>(<a class="code" href="CSEInfo_8cpp.html#a75f8a8519c2c9b30e7c06dc5e256fffa">Info</a>.encodeVTYPE());</div>
<div class="line"><a name="l00450"></a><span class="lineno">  450</span>&#160;    <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l00451"></a><span class="lineno">  451</span>&#160;  }</div>
<div class="line"><a name="l00452"></a><span class="lineno">  452</span>&#160; </div>
<div class="line"><a name="l00453"></a><span class="lineno">  453</span>&#160;  <span class="comment">// Use X0 as the DestReg unless AVLReg is X0.</span></div>
<div class="line"><a name="l00454"></a><span class="lineno">  454</span>&#160;  <a class="code" href="classllvm_1_1Register.html">Register</a> DestReg = RISCV::X0;</div>
<div class="line"><a name="l00455"></a><span class="lineno">  455</span>&#160;  <span class="keywordflow">if</span> (AVLReg == RISCV::X0)</div>
<div class="line"><a name="l00456"></a><span class="lineno">  456</span>&#160;    DestReg = <a class="code" href="AArch64AdvSIMDScalarPass_8cpp.html#aacd2ab195054a3e6a74bfbb9d5d571c8">MRI</a>-&gt;<a class="code" href="classllvm_1_1MachineRegisterInfo.html#a5c77792a06583e0fe7a0379ad94a2809">createVirtualRegister</a>(&amp;RISCV::GPRRegClass);</div>
<div class="line"><a name="l00457"></a><span class="lineno">  457</span>&#160;  <a class="code" href="namespacellvm.html#abe63d9ba16515b8df95d8b2a677d39d8">BuildMI</a>(<a class="code" href="AArch64SLSHardening_8cpp.html#a5958512eae2979bd2eb383977996a600">MBB</a>, <a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>, <a class="code" href="AArch64SLSHardening_8cpp.html#ad467c4ab9119043f9b7750ab986be61a">DL</a>, <a class="code" href="HexagonCopyToCombine_8cpp.html#a1d40004718218dbdf06b496766299101">TII</a>-&gt;get(RISCV::PseudoVSETVLI))</div>
<div class="line"><a name="l00458"></a><span class="lineno">  458</span>&#160;      .<a class="code" href="classllvm_1_1MachineInstrBuilder.html#ad08ed580345a51c50d9477dec1e65818">addReg</a>(DestReg, <a class="code" href="namespacellvm_1_1RegState.html#a5a2c54ccd4089208481258b7803e01a8a72c17e2ff2d5af62a30e56ac152aa8d5">RegState::Define</a> | <a class="code" href="namespacellvm_1_1RegState.html#a5a2c54ccd4089208481258b7803e01a8a2fee1a7db4e84247a193a9af1f907013">RegState::Dead</a>)</div>
<div class="line"><a name="l00459"></a><span class="lineno">  459</span>&#160;      .<a class="code" href="classllvm_1_1MachineInstrBuilder.html#ad08ed580345a51c50d9477dec1e65818">addReg</a>(AVLReg)</div>
<div class="line"><a name="l00460"></a><span class="lineno">  460</span>&#160;      .<a class="code" href="classllvm_1_1MachineInstrBuilder.html#a4f1ceb770fe3446bfb2b3fa26858098f">addImm</a>(<a class="code" href="CSEInfo_8cpp.html#a75f8a8519c2c9b30e7c06dc5e256fffa">Info</a>.encodeVTYPE());</div>
<div class="line"><a name="l00461"></a><span class="lineno">  461</span>&#160;}</div>
<div class="line"><a name="l00462"></a><span class="lineno">  462</span>&#160; </div>
<div class="line"><a name="l00463"></a><span class="lineno">  463</span>&#160;<span class="comment">// Return a VSETVLIInfo representing the changes made by this VSETVLI or</span></div>
<div class="line"><a name="l00464"></a><span class="lineno">  464</span>&#160;<span class="comment">// VSETIVLI instruction.</span></div>
<div class="line"><a name="l00465"></a><span class="lineno">  465</span>&#160;<span class="keyword">static</span> VSETVLIInfo getInfoForVSETVLI(<span class="keyword">const</span> <a class="code" href="classllvm_1_1MachineInstr.html">MachineInstr</a> &amp;<a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>) {</div>
<div class="line"><a name="l00466"></a><span class="lineno">  466</span>&#160;  VSETVLIInfo NewInfo;</div>
<div class="line"><a name="l00467"></a><span class="lineno">  467</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.getOpcode() == RISCV::PseudoVSETVLI) {</div>
<div class="line"><a name="l00468"></a><span class="lineno">  468</span>&#160;    <a class="code" href="classllvm_1_1Register.html">Register</a> AVLReg = <a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.getOperand(1).getReg();</div>
<div class="line"><a name="l00469"></a><span class="lineno">  469</span>&#160;    <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>((AVLReg != RISCV::X0 || <a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.getOperand(0).getReg() != RISCV::X0) &amp;&amp;</div>
<div class="line"><a name="l00470"></a><span class="lineno">  470</span>&#160;           <span class="stringliteral">&quot;Can&#39;t handle X0, X0 vsetvli yet&quot;</span>);</div>
<div class="line"><a name="l00471"></a><span class="lineno">  471</span>&#160;    NewInfo.setAVLReg(AVLReg);</div>
<div class="line"><a name="l00472"></a><span class="lineno">  472</span>&#160;  } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00473"></a><span class="lineno">  473</span>&#160;    <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(<a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.getOpcode() == RISCV::PseudoVSETIVLI);</div>
<div class="line"><a name="l00474"></a><span class="lineno">  474</span>&#160;    NewInfo.setAVLImm(<a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.getOperand(1).getImm());</div>
<div class="line"><a name="l00475"></a><span class="lineno">  475</span>&#160;  }</div>
<div class="line"><a name="l00476"></a><span class="lineno">  476</span>&#160;  NewInfo.setVTYPE(<a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.getOperand(2).getImm());</div>
<div class="line"><a name="l00477"></a><span class="lineno">  477</span>&#160; </div>
<div class="line"><a name="l00478"></a><span class="lineno">  478</span>&#160;  <span class="keywordflow">return</span> NewInfo;</div>
<div class="line"><a name="l00479"></a><span class="lineno">  479</span>&#160;}</div>
<div class="line"><a name="l00480"></a><span class="lineno">  480</span>&#160; </div>
<div class="line"><a name="l00481"></a><span class="lineno">  481</span>&#160;<span class="keywordtype">bool</span> RISCVInsertVSETVLI::needVSETVLI(<span class="keyword">const</span> VSETVLIInfo &amp;Require,</div>
<div class="line"><a name="l00482"></a><span class="lineno">  482</span>&#160;                                     <span class="keyword">const</span> VSETVLIInfo &amp;CurInfo) {</div>
<div class="line"><a name="l00483"></a><span class="lineno">  483</span>&#160;  <span class="keywordflow">if</span> (CurInfo.isCompatible(Require))</div>
<div class="line"><a name="l00484"></a><span class="lineno">  484</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l00485"></a><span class="lineno">  485</span>&#160; </div>
<div class="line"><a name="l00486"></a><span class="lineno">  486</span>&#160;  <span class="comment">// We didn&#39;t find a compatible value. If our AVL is a virtual register,</span></div>
<div class="line"><a name="l00487"></a><span class="lineno">  487</span>&#160;  <span class="comment">// it might be defined by a VSET(I)VLI. If it has the same VTYPE we need</span></div>
<div class="line"><a name="l00488"></a><span class="lineno">  488</span>&#160;  <span class="comment">// and the last VL/VTYPE we observed is the same, we don&#39;t need a</span></div>
<div class="line"><a name="l00489"></a><span class="lineno">  489</span>&#160;  <span class="comment">// VSETVLI here.</span></div>
<div class="line"><a name="l00490"></a><span class="lineno">  490</span>&#160;  <span class="keywordflow">if</span> (!CurInfo.isUnknown() &amp;&amp; Require.hasAVLReg() &amp;&amp;</div>
<div class="line"><a name="l00491"></a><span class="lineno">  491</span>&#160;      Require.getAVLReg().isVirtual() &amp;&amp; !CurInfo.hasSEWLMULRatioOnly() &amp;&amp;</div>
<div class="line"><a name="l00492"></a><span class="lineno">  492</span>&#160;      Require.hasSameVTYPE(CurInfo)) {</div>
<div class="line"><a name="l00493"></a><span class="lineno">  493</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1MachineInstr.html">MachineInstr</a> *<a class="code" href="AArch64ExpandPseudoInsts_8cpp.html#ad3ece0ac2421637044624c9b01c42466">DefMI</a> = <a class="code" href="AArch64AdvSIMDScalarPass_8cpp.html#aacd2ab195054a3e6a74bfbb9d5d571c8">MRI</a>-&gt;<a class="code" href="classllvm_1_1MachineRegisterInfo.html#a40d954b9cf9ee8b545a78725f2549cba">getVRegDef</a>(Require.getAVLReg())) {</div>
<div class="line"><a name="l00494"></a><span class="lineno">  494</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="AArch64ExpandPseudoInsts_8cpp.html#ad3ece0ac2421637044624c9b01c42466">DefMI</a>-&gt;<a class="code" href="classllvm_1_1MachineInstr.html#a0363204b5fbab08a46f5a7cd7f376f78">getOpcode</a>() == RISCV::PseudoVSETVLI ||</div>
<div class="line"><a name="l00495"></a><span class="lineno">  495</span>&#160;          <a class="code" href="AArch64ExpandPseudoInsts_8cpp.html#ad3ece0ac2421637044624c9b01c42466">DefMI</a>-&gt;<a class="code" href="classllvm_1_1MachineInstr.html#a0363204b5fbab08a46f5a7cd7f376f78">getOpcode</a>() == RISCV::PseudoVSETIVLI) {</div>
<div class="line"><a name="l00496"></a><span class="lineno">  496</span>&#160;        VSETVLIInfo DefInfo = getInfoForVSETVLI(*<a class="code" href="AArch64ExpandPseudoInsts_8cpp.html#ad3ece0ac2421637044624c9b01c42466">DefMI</a>);</div>
<div class="line"><a name="l00497"></a><span class="lineno">  497</span>&#160;        <span class="keywordflow">if</span> (DefInfo.hasSameAVL(CurInfo) &amp;&amp; DefInfo.hasSameVTYPE(CurInfo))</div>
<div class="line"><a name="l00498"></a><span class="lineno">  498</span>&#160;          <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l00499"></a><span class="lineno">  499</span>&#160;      }</div>
<div class="line"><a name="l00500"></a><span class="lineno">  500</span>&#160;    }</div>
<div class="line"><a name="l00501"></a><span class="lineno">  501</span>&#160;  }</div>
<div class="line"><a name="l00502"></a><span class="lineno">  502</span>&#160; </div>
<div class="line"><a name="l00503"></a><span class="lineno">  503</span>&#160;  <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l00504"></a><span class="lineno">  504</span>&#160;}</div>
<div class="line"><a name="l00505"></a><span class="lineno">  505</span>&#160; </div>
<div class="line"><a name="l00506"></a><span class="lineno">  506</span>&#160;<span class="keywordtype">bool</span> RISCVInsertVSETVLI::computeVLVTYPEChanges(<span class="keyword">const</span> <a class="code" href="classllvm_1_1MachineBasicBlock.html">MachineBasicBlock</a> &amp;<a class="code" href="AArch64SLSHardening_8cpp.html#a5958512eae2979bd2eb383977996a600">MBB</a>) {</div>
<div class="line"><a name="l00507"></a><span class="lineno">  507</span>&#160;  <span class="keywordtype">bool</span> HadVectorOp = <span class="keyword">false</span>;</div>
<div class="line"><a name="l00508"></a><span class="lineno">  508</span>&#160; </div>
<div class="line"><a name="l00509"></a><span class="lineno">  509</span>&#160;  BlockData &amp;BBInfo = BlockInfo[<a class="code" href="AArch64SLSHardening_8cpp.html#a5958512eae2979bd2eb383977996a600">MBB</a>.<a class="code" href="classllvm_1_1MachineBasicBlock.html#a3aa22d521bd6a7e6b9f35545dc7b0f1e">getNumber</a>()];</div>
<div class="line"><a name="l00510"></a><span class="lineno">  510</span>&#160;  <span class="keywordflow">for</span> (<span class="keyword">const</span> <a class="code" href="classllvm_1_1MachineInstr.html">MachineInstr</a> &amp;<a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a> : <a class="code" href="AArch64SLSHardening_8cpp.html#a5958512eae2979bd2eb383977996a600">MBB</a>) {</div>
<div class="line"><a name="l00511"></a><span class="lineno">  511</span>&#160;    <span class="comment">// If this is an explicit VSETVLI or VSETIVLI, update our state.</span></div>
<div class="line"><a name="l00512"></a><span class="lineno">  512</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.getOpcode() == RISCV::PseudoVSETVLI ||</div>
<div class="line"><a name="l00513"></a><span class="lineno">  513</span>&#160;        <a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.getOpcode() == RISCV::PseudoVSETIVLI) {</div>
<div class="line"><a name="l00514"></a><span class="lineno">  514</span>&#160;      HadVectorOp = <span class="keyword">true</span>;</div>
<div class="line"><a name="l00515"></a><span class="lineno">  515</span>&#160;      BBInfo.Change = getInfoForVSETVLI(<a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>);</div>
<div class="line"><a name="l00516"></a><span class="lineno">  516</span>&#160;      <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l00517"></a><span class="lineno">  517</span>&#160;    }</div>
<div class="line"><a name="l00518"></a><span class="lineno">  518</span>&#160; </div>
<div class="line"><a name="l00519"></a><span class="lineno">  519</span>&#160;    uint64_t TSFlags = <a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.getDesc().TSFlags;</div>
<div class="line"><a name="l00520"></a><span class="lineno">  520</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="namespacellvm_1_1RISCVII.html#afc858f8e35813be95df97504afd771ef">RISCVII::hasSEWOp</a>(TSFlags)) {</div>
<div class="line"><a name="l00521"></a><span class="lineno">  521</span>&#160;      HadVectorOp = <span class="keyword">true</span>;</div>
<div class="line"><a name="l00522"></a><span class="lineno">  522</span>&#160; </div>
<div class="line"><a name="l00523"></a><span class="lineno">  523</span>&#160;      VSETVLIInfo NewInfo = computeInfoForInstr(<a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>, TSFlags, <a class="code" href="AArch64AdvSIMDScalarPass_8cpp.html#aacd2ab195054a3e6a74bfbb9d5d571c8">MRI</a>);</div>
<div class="line"><a name="l00524"></a><span class="lineno">  524</span>&#160; </div>
<div class="line"><a name="l00525"></a><span class="lineno">  525</span>&#160;      <span class="keywordflow">if</span> (!BBInfo.Change.isValid()) {</div>
<div class="line"><a name="l00526"></a><span class="lineno">  526</span>&#160;        BBInfo.Change = NewInfo;</div>
<div class="line"><a name="l00527"></a><span class="lineno">  527</span>&#160;      } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00528"></a><span class="lineno">  528</span>&#160;        <span class="comment">// If this instruction isn&#39;t compatible with the previous VL/VTYPE</span></div>
<div class="line"><a name="l00529"></a><span class="lineno">  529</span>&#160;        <span class="comment">// we need to insert a VSETVLI.</span></div>
<div class="line"><a name="l00530"></a><span class="lineno">  530</span>&#160;        <span class="keywordflow">if</span> (needVSETVLI(NewInfo, BBInfo.Change))</div>
<div class="line"><a name="l00531"></a><span class="lineno">  531</span>&#160;          BBInfo.Change = NewInfo;</div>
<div class="line"><a name="l00532"></a><span class="lineno">  532</span>&#160;      }</div>
<div class="line"><a name="l00533"></a><span class="lineno">  533</span>&#160;    }</div>
<div class="line"><a name="l00534"></a><span class="lineno">  534</span>&#160; </div>
<div class="line"><a name="l00535"></a><span class="lineno">  535</span>&#160;    <span class="comment">// If this is something that updates VL/VTYPE that we don&#39;t know about, set</span></div>
<div class="line"><a name="l00536"></a><span class="lineno">  536</span>&#160;    <span class="comment">// the state to unknown.</span></div>
<div class="line"><a name="l00537"></a><span class="lineno">  537</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.isCall() || <a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.isInlineAsm() || <a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.modifiesRegister(RISCV::VL) ||</div>
<div class="line"><a name="l00538"></a><span class="lineno">  538</span>&#160;        <a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.modifiesRegister(RISCV::VTYPE)) {</div>
<div class="line"><a name="l00539"></a><span class="lineno">  539</span>&#160;      BBInfo.Change = VSETVLIInfo::getUnknown();</div>
<div class="line"><a name="l00540"></a><span class="lineno">  540</span>&#160;    }</div>
<div class="line"><a name="l00541"></a><span class="lineno">  541</span>&#160;  }</div>
<div class="line"><a name="l00542"></a><span class="lineno">  542</span>&#160; </div>
<div class="line"><a name="l00543"></a><span class="lineno">  543</span>&#160;  <span class="comment">// Initial exit state is whatever change we found in the block.</span></div>
<div class="line"><a name="l00544"></a><span class="lineno">  544</span>&#160;  BBInfo.Exit = BBInfo.Change;</div>
<div class="line"><a name="l00545"></a><span class="lineno">  545</span>&#160; </div>
<div class="line"><a name="l00546"></a><span class="lineno">  546</span>&#160;  <span class="keywordflow">return</span> HadVectorOp;</div>
<div class="line"><a name="l00547"></a><span class="lineno">  547</span>&#160;}</div>
<div class="line"><a name="l00548"></a><span class="lineno">  548</span>&#160; </div>
<div class="line"><a name="l00549"></a><span class="lineno">  549</span>&#160;<span class="keywordtype">void</span> RISCVInsertVSETVLI::computeIncomingVLVTYPE(<span class="keyword">const</span> <a class="code" href="classllvm_1_1MachineBasicBlock.html">MachineBasicBlock</a> &amp;<a class="code" href="AArch64SLSHardening_8cpp.html#a5958512eae2979bd2eb383977996a600">MBB</a>) {</div>
<div class="line"><a name="l00550"></a><span class="lineno">  550</span>&#160;  BlockData &amp;BBInfo = BlockInfo[<a class="code" href="AArch64SLSHardening_8cpp.html#a5958512eae2979bd2eb383977996a600">MBB</a>.<a class="code" href="classllvm_1_1MachineBasicBlock.html#a3aa22d521bd6a7e6b9f35545dc7b0f1e">getNumber</a>()];</div>
<div class="line"><a name="l00551"></a><span class="lineno">  551</span>&#160; </div>
<div class="line"><a name="l00552"></a><span class="lineno">  552</span>&#160;  BBInfo.InQueue = <span class="keyword">false</span>;</div>
<div class="line"><a name="l00553"></a><span class="lineno">  553</span>&#160; </div>
<div class="line"><a name="l00554"></a><span class="lineno">  554</span>&#160;  VSETVLIInfo InInfo;</div>
<div class="line"><a name="l00555"></a><span class="lineno">  555</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="AArch64SLSHardening_8cpp.html#a5958512eae2979bd2eb383977996a600">MBB</a>.<a class="code" href="classllvm_1_1MachineBasicBlock.html#a877507fda31c207ec36a018784369708">pred_empty</a>()) {</div>
<div class="line"><a name="l00556"></a><span class="lineno">  556</span>&#160;    <span class="comment">// There are no predecessors, so use the default starting status.</span></div>
<div class="line"><a name="l00557"></a><span class="lineno">  557</span>&#160;    InInfo.setUnknown();</div>
<div class="line"><a name="l00558"></a><span class="lineno">  558</span>&#160;  } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00559"></a><span class="lineno">  559</span>&#160;    <span class="keywordflow">for</span> (<a class="code" href="classllvm_1_1MachineBasicBlock.html">MachineBasicBlock</a> *<a class="code" href="README-SSE_8txt.html#a63d206a063eefcdf8c318ded97b65020">P</a> : <a class="code" href="AArch64SLSHardening_8cpp.html#a5958512eae2979bd2eb383977996a600">MBB</a>.<a class="code" href="classllvm_1_1MachineBasicBlock.html#afd9b9b8655c008bf6cd6afb05d41b69e">predecessors</a>())</div>
<div class="line"><a name="l00560"></a><span class="lineno">  560</span>&#160;      InInfo = InInfo.intersect(BlockInfo[<a class="code" href="README-SSE_8txt.html#a63d206a063eefcdf8c318ded97b65020">P</a>-&gt;getNumber()].Exit);</div>
<div class="line"><a name="l00561"></a><span class="lineno">  561</span>&#160;  }</div>
<div class="line"><a name="l00562"></a><span class="lineno">  562</span>&#160; </div>
<div class="line"><a name="l00563"></a><span class="lineno">  563</span>&#160;  <span class="comment">// If we don&#39;t have any valid predecessor value, wait until we do.</span></div>
<div class="line"><a name="l00564"></a><span class="lineno">  564</span>&#160;  <span class="keywordflow">if</span> (!InInfo.isValid())</div>
<div class="line"><a name="l00565"></a><span class="lineno">  565</span>&#160;    <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l00566"></a><span class="lineno">  566</span>&#160; </div>
<div class="line"><a name="l00567"></a><span class="lineno">  567</span>&#160;  BBInfo.Pred = InInfo;</div>
<div class="line"><a name="l00568"></a><span class="lineno">  568</span>&#160; </div>
<div class="line"><a name="l00569"></a><span class="lineno">  569</span>&#160;  VSETVLIInfo TmpStatus = BBInfo.Pred.merge(BBInfo.Change);</div>
<div class="line"><a name="l00570"></a><span class="lineno">  570</span>&#160; </div>
<div class="line"><a name="l00571"></a><span class="lineno">  571</span>&#160;  <span class="comment">// If the new exit value matches the old exit value, we don&#39;t need to revisit</span></div>
<div class="line"><a name="l00572"></a><span class="lineno">  572</span>&#160;  <span class="comment">// any blocks.</span></div>
<div class="line"><a name="l00573"></a><span class="lineno">  573</span>&#160;  <span class="keywordflow">if</span> (BBInfo.Exit == TmpStatus)</div>
<div class="line"><a name="l00574"></a><span class="lineno">  574</span>&#160;    <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l00575"></a><span class="lineno">  575</span>&#160; </div>
<div class="line"><a name="l00576"></a><span class="lineno">  576</span>&#160;  BBInfo.Exit = TmpStatus;</div>
<div class="line"><a name="l00577"></a><span class="lineno">  577</span>&#160; </div>
<div class="line"><a name="l00578"></a><span class="lineno">  578</span>&#160;  <span class="comment">// Add the successors to the work list so we can propagate the changed exit</span></div>
<div class="line"><a name="l00579"></a><span class="lineno">  579</span>&#160;  <span class="comment">// status.</span></div>
<div class="line"><a name="l00580"></a><span class="lineno">  580</span>&#160;  <span class="keywordflow">for</span> (<a class="code" href="classllvm_1_1MachineBasicBlock.html">MachineBasicBlock</a> *<a class="code" href="lib_2Target_2ARM_2README_8txt.html#a1b45f45820a60c09244a87eb59824aec">S</a> : <a class="code" href="AArch64SLSHardening_8cpp.html#a5958512eae2979bd2eb383977996a600">MBB</a>.<a class="code" href="classllvm_1_1MachineBasicBlock.html#a4d2c96836214c1f13357ffb99125fb4a">successors</a>())</div>
<div class="line"><a name="l00581"></a><span class="lineno">  581</span>&#160;    <span class="keywordflow">if</span> (!BlockInfo[<a class="code" href="lib_2Target_2ARM_2README_8txt.html#a1b45f45820a60c09244a87eb59824aec">S</a>-&gt;getNumber()].InQueue)</div>
<div class="line"><a name="l00582"></a><span class="lineno">  582</span>&#160;      WorkList.push(<a class="code" href="lib_2Target_2ARM_2README_8txt.html#a1b45f45820a60c09244a87eb59824aec">S</a>);</div>
<div class="line"><a name="l00583"></a><span class="lineno">  583</span>&#160;}</div>
<div class="line"><a name="l00584"></a><span class="lineno">  584</span>&#160; </div>
<div class="line"><a name="l00585"></a><span class="lineno">  585</span>&#160;<span class="comment">// If we weren&#39;t able to prove a vsetvli was directly unneeded, it might still</span></div>
<div class="line"><a name="l00586"></a><span class="lineno">  586</span>&#160;<span class="comment">// be/ unneeded if the AVL is a phi node where all incoming values are VL</span></div>
<div class="line"><a name="l00587"></a><span class="lineno">  587</span>&#160;<span class="comment">// outputs from the last VSETVLI in their respective basic blocks.</span></div>
<div class="line"><a name="l00588"></a><span class="lineno">  588</span>&#160;<span class="keywordtype">bool</span> RISCVInsertVSETVLI::needVSETVLIPHI(<span class="keyword">const</span> VSETVLIInfo &amp;Require,</div>
<div class="line"><a name="l00589"></a><span class="lineno">  589</span>&#160;                                        <span class="keyword">const</span> <a class="code" href="classllvm_1_1MachineBasicBlock.html">MachineBasicBlock</a> &amp;<a class="code" href="AArch64SLSHardening_8cpp.html#a5958512eae2979bd2eb383977996a600">MBB</a>) {</div>
<div class="line"><a name="l00590"></a><span class="lineno">  590</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="RISCVInsertVSETVLI_8cpp.html#a29b0570e44859d5df506ee5d309fb228">DisableInsertVSETVLPHIOpt</a>)</div>
<div class="line"><a name="l00591"></a><span class="lineno">  591</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l00592"></a><span class="lineno">  592</span>&#160; </div>
<div class="line"><a name="l00593"></a><span class="lineno">  593</span>&#160;  <span class="keywordflow">if</span> (!Require.hasAVLReg())</div>
<div class="line"><a name="l00594"></a><span class="lineno">  594</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l00595"></a><span class="lineno">  595</span>&#160; </div>
<div class="line"><a name="l00596"></a><span class="lineno">  596</span>&#160;  <a class="code" href="classllvm_1_1Register.html">Register</a> AVLReg = Require.getAVLReg();</div>
<div class="line"><a name="l00597"></a><span class="lineno">  597</span>&#160;  <span class="keywordflow">if</span> (!AVLReg.<a class="code" href="classllvm_1_1Register.html#aebafd86dde59b5a05b22e8720e808a9d">isVirtual</a>())</div>
<div class="line"><a name="l00598"></a><span class="lineno">  598</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l00599"></a><span class="lineno">  599</span>&#160; </div>
<div class="line"><a name="l00600"></a><span class="lineno">  600</span>&#160;  <span class="comment">// We need the AVL to be produce by a PHI node in this basic block.</span></div>
<div class="line"><a name="l00601"></a><span class="lineno">  601</span>&#160;  <a class="code" href="classllvm_1_1MachineInstr.html">MachineInstr</a> *PHI = <a class="code" href="AArch64AdvSIMDScalarPass_8cpp.html#aacd2ab195054a3e6a74bfbb9d5d571c8">MRI</a>-&gt;<a class="code" href="classllvm_1_1MachineRegisterInfo.html#a40d954b9cf9ee8b545a78725f2549cba">getVRegDef</a>(AVLReg);</div>
<div class="line"><a name="l00602"></a><span class="lineno">  602</span>&#160;  <span class="keywordflow">if</span> (!PHI || PHI-&gt;<a class="code" href="classllvm_1_1MachineInstr.html#a0363204b5fbab08a46f5a7cd7f376f78">getOpcode</a>() != RISCV::PHI || PHI-&gt;<a class="code" href="classllvm_1_1MachineInstr.html#a002fd916e7206e01d512eeb06d405cf0">getParent</a>() != &amp;<a class="code" href="AArch64SLSHardening_8cpp.html#a5958512eae2979bd2eb383977996a600">MBB</a>)</div>
<div class="line"><a name="l00603"></a><span class="lineno">  603</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l00604"></a><span class="lineno">  604</span>&#160; </div>
<div class="line"><a name="l00605"></a><span class="lineno">  605</span>&#160;  <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> PHIOp = 1, NumOps = PHI-&gt;<a class="code" href="classllvm_1_1MachineInstr.html#a432824f0975bb863478bf4ef3a5df258">getNumOperands</a>(); PHIOp != NumOps;</div>
<div class="line"><a name="l00606"></a><span class="lineno">  606</span>&#160;       PHIOp += 2) {</div>
<div class="line"><a name="l00607"></a><span class="lineno">  607</span>&#160;    <a class="code" href="classllvm_1_1Register.html">Register</a> InReg = PHI-&gt;<a class="code" href="classllvm_1_1MachineInstr.html#a3f7a45f6e10668a5f702e26bca80d18e">getOperand</a>(PHIOp).<a class="code" href="classllvm_1_1MachineOperand.html#ac0035d7c1c860501c877c20e6e93297b">getReg</a>();</div>
<div class="line"><a name="l00608"></a><span class="lineno">  608</span>&#160;    <a class="code" href="classllvm_1_1MachineBasicBlock.html">MachineBasicBlock</a> *PBB = PHI-&gt;<a class="code" href="classllvm_1_1MachineInstr.html#a3f7a45f6e10668a5f702e26bca80d18e">getOperand</a>(PHIOp + 1).<a class="code" href="classllvm_1_1MachineOperand.html#a9b48cb80ee1534c2b51d789b673137c1">getMBB</a>();</div>
<div class="line"><a name="l00609"></a><span class="lineno">  609</span>&#160;    <span class="keyword">const</span> BlockData &amp;PBBInfo = BlockInfo[PBB-&gt;<a class="code" href="classllvm_1_1MachineBasicBlock.html#a3aa22d521bd6a7e6b9f35545dc7b0f1e">getNumber</a>()];</div>
<div class="line"><a name="l00610"></a><span class="lineno">  610</span>&#160;    <span class="comment">// If the exit from the predecessor has the VTYPE we are looking for</span></div>
<div class="line"><a name="l00611"></a><span class="lineno">  611</span>&#160;    <span class="comment">// we might be able to avoid a VSETVLI.</span></div>
<div class="line"><a name="l00612"></a><span class="lineno">  612</span>&#160;    <span class="keywordflow">if</span> (PBBInfo.Exit.isUnknown() || !PBBInfo.Exit.hasSameVTYPE(Require))</div>
<div class="line"><a name="l00613"></a><span class="lineno">  613</span>&#160;      <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l00614"></a><span class="lineno">  614</span>&#160; </div>
<div class="line"><a name="l00615"></a><span class="lineno">  615</span>&#160;    <span class="comment">// We need the PHI input to the be the output of a VSET(I)VLI.</span></div>
<div class="line"><a name="l00616"></a><span class="lineno">  616</span>&#160;    <a class="code" href="classllvm_1_1MachineInstr.html">MachineInstr</a> *<a class="code" href="AArch64ExpandPseudoInsts_8cpp.html#ad3ece0ac2421637044624c9b01c42466">DefMI</a> = <a class="code" href="AArch64AdvSIMDScalarPass_8cpp.html#aacd2ab195054a3e6a74bfbb9d5d571c8">MRI</a>-&gt;<a class="code" href="classllvm_1_1MachineRegisterInfo.html#a40d954b9cf9ee8b545a78725f2549cba">getVRegDef</a>(InReg);</div>
<div class="line"><a name="l00617"></a><span class="lineno">  617</span>&#160;    <span class="keywordflow">if</span> (!<a class="code" href="AArch64ExpandPseudoInsts_8cpp.html#ad3ece0ac2421637044624c9b01c42466">DefMI</a> || (<a class="code" href="AArch64ExpandPseudoInsts_8cpp.html#ad3ece0ac2421637044624c9b01c42466">DefMI</a>-&gt;<a class="code" href="classllvm_1_1MachineInstr.html#a0363204b5fbab08a46f5a7cd7f376f78">getOpcode</a>() != RISCV::PseudoVSETVLI &amp;&amp;</div>
<div class="line"><a name="l00618"></a><span class="lineno">  618</span>&#160;                   <a class="code" href="AArch64ExpandPseudoInsts_8cpp.html#ad3ece0ac2421637044624c9b01c42466">DefMI</a>-&gt;<a class="code" href="classllvm_1_1MachineInstr.html#a0363204b5fbab08a46f5a7cd7f376f78">getOpcode</a>() != RISCV::PseudoVSETIVLI))</div>
<div class="line"><a name="l00619"></a><span class="lineno">  619</span>&#160;      <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l00620"></a><span class="lineno">  620</span>&#160; </div>
<div class="line"><a name="l00621"></a><span class="lineno">  621</span>&#160;    <span class="comment">// We found a VSET(I)VLI make sure it matches the output of the</span></div>
<div class="line"><a name="l00622"></a><span class="lineno">  622</span>&#160;    <span class="comment">// predecessor block.</span></div>
<div class="line"><a name="l00623"></a><span class="lineno">  623</span>&#160;    VSETVLIInfo DefInfo = getInfoForVSETVLI(*<a class="code" href="AArch64ExpandPseudoInsts_8cpp.html#ad3ece0ac2421637044624c9b01c42466">DefMI</a>);</div>
<div class="line"><a name="l00624"></a><span class="lineno">  624</span>&#160;    <span class="keywordflow">if</span> (!DefInfo.hasSameAVL(PBBInfo.Exit) ||</div>
<div class="line"><a name="l00625"></a><span class="lineno">  625</span>&#160;        !DefInfo.hasSameVTYPE(PBBInfo.Exit))</div>
<div class="line"><a name="l00626"></a><span class="lineno">  626</span>&#160;      <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l00627"></a><span class="lineno">  627</span>&#160;  }</div>
<div class="line"><a name="l00628"></a><span class="lineno">  628</span>&#160; </div>
<div class="line"><a name="l00629"></a><span class="lineno">  629</span>&#160;  <span class="comment">// If all the incoming values to the PHI checked out, we don&#39;t need</span></div>
<div class="line"><a name="l00630"></a><span class="lineno">  630</span>&#160;  <span class="comment">// to insert a VSETVLI.</span></div>
<div class="line"><a name="l00631"></a><span class="lineno">  631</span>&#160;  <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l00632"></a><span class="lineno">  632</span>&#160;}</div>
<div class="line"><a name="l00633"></a><span class="lineno">  633</span>&#160; </div>
<div class="line"><a name="l00634"></a><span class="lineno">  634</span>&#160;<span class="keywordtype">void</span> RISCVInsertVSETVLI::emitVSETVLIs(<a class="code" href="classllvm_1_1MachineBasicBlock.html">MachineBasicBlock</a> &amp;<a class="code" href="AArch64SLSHardening_8cpp.html#a5958512eae2979bd2eb383977996a600">MBB</a>) {</div>
<div class="line"><a name="l00635"></a><span class="lineno">  635</span>&#160;  VSETVLIInfo CurInfo;</div>
<div class="line"><a name="l00636"></a><span class="lineno">  636</span>&#160; </div>
<div class="line"><a name="l00637"></a><span class="lineno">  637</span>&#160;  <span class="keywordflow">for</span> (<a class="code" href="classllvm_1_1MachineInstr.html">MachineInstr</a> &amp;<a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a> : <a class="code" href="AArch64SLSHardening_8cpp.html#a5958512eae2979bd2eb383977996a600">MBB</a>) {</div>
<div class="line"><a name="l00638"></a><span class="lineno">  638</span>&#160;    <span class="comment">// If this is an explicit VSETVLI or VSETIVLI, update our state.</span></div>
<div class="line"><a name="l00639"></a><span class="lineno">  639</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.getOpcode() == RISCV::PseudoVSETVLI ||</div>
<div class="line"><a name="l00640"></a><span class="lineno">  640</span>&#160;        <a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.getOpcode() == RISCV::PseudoVSETIVLI) {</div>
<div class="line"><a name="l00641"></a><span class="lineno">  641</span>&#160;      <span class="comment">// Conservatively, mark the VL and VTYPE as live.</span></div>
<div class="line"><a name="l00642"></a><span class="lineno">  642</span>&#160;      <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(<a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.getOperand(3).getReg() == RISCV::VL &amp;&amp;</div>
<div class="line"><a name="l00643"></a><span class="lineno">  643</span>&#160;             <a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.getOperand(4).getReg() == RISCV::VTYPE &amp;&amp;</div>
<div class="line"><a name="l00644"></a><span class="lineno">  644</span>&#160;             <span class="stringliteral">&quot;Unexpected operands where VL and VTYPE should be&quot;</span>);</div>
<div class="line"><a name="l00645"></a><span class="lineno">  645</span>&#160;      <a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.getOperand(3).setIsDead(<span class="keyword">false</span>);</div>
<div class="line"><a name="l00646"></a><span class="lineno">  646</span>&#160;      <a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.getOperand(4).setIsDead(<span class="keyword">false</span>);</div>
<div class="line"><a name="l00647"></a><span class="lineno">  647</span>&#160;      CurInfo = getInfoForVSETVLI(<a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>);</div>
<div class="line"><a name="l00648"></a><span class="lineno">  648</span>&#160;      <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l00649"></a><span class="lineno">  649</span>&#160;    }</div>
<div class="line"><a name="l00650"></a><span class="lineno">  650</span>&#160; </div>
<div class="line"><a name="l00651"></a><span class="lineno">  651</span>&#160;    uint64_t TSFlags = <a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.getDesc().TSFlags;</div>
<div class="line"><a name="l00652"></a><span class="lineno">  652</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="namespacellvm_1_1RISCVII.html#afc858f8e35813be95df97504afd771ef">RISCVII::hasSEWOp</a>(TSFlags)) {</div>
<div class="line"><a name="l00653"></a><span class="lineno">  653</span>&#160;      VSETVLIInfo NewInfo = computeInfoForInstr(<a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>, TSFlags, <a class="code" href="AArch64AdvSIMDScalarPass_8cpp.html#aacd2ab195054a3e6a74bfbb9d5d571c8">MRI</a>);</div>
<div class="line"><a name="l00654"></a><span class="lineno">  654</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="namespacellvm_1_1RISCVII.html#a81c11c8178c6df7f55ef0557daa54765">RISCVII::hasVLOp</a>(TSFlags)) {</div>
<div class="line"><a name="l00655"></a><span class="lineno">  655</span>&#160;        <a class="code" href="classllvm_1_1MachineOperand.html">MachineOperand</a> &amp;VLOp = <a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.getOperand(<a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.getNumExplicitOperands() - 2);</div>
<div class="line"><a name="l00656"></a><span class="lineno">  656</span>&#160;        <span class="keywordflow">if</span> (VLOp.<a class="code" href="classllvm_1_1MachineOperand.html#a4c9594c955fec80c73ddd964b5efd554">isReg</a>()) {</div>
<div class="line"><a name="l00657"></a><span class="lineno">  657</span>&#160;          <span class="comment">// Erase the AVL operand from the instruction.</span></div>
<div class="line"><a name="l00658"></a><span class="lineno">  658</span>&#160;          VLOp.<a class="code" href="classllvm_1_1MachineOperand.html#a682ba82f42f7903d0000ffbb13ea3b57">setReg</a>(RISCV::NoRegister);</div>
<div class="line"><a name="l00659"></a><span class="lineno">  659</span>&#160;          VLOp.<a class="code" href="classllvm_1_1MachineOperand.html#a8a82683fccdef8a5ef772ef03277aee7">setIsKill</a>(<span class="keyword">false</span>);</div>
<div class="line"><a name="l00660"></a><span class="lineno">  660</span>&#160;        }</div>
<div class="line"><a name="l00661"></a><span class="lineno">  661</span>&#160;        <a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.addOperand(<a class="code" href="classllvm_1_1MachineOperand.html#af2c351dad09a71aa08e1d85c67ae6e53">MachineOperand::CreateReg</a>(RISCV::VL, <span class="comment">/*isDef*/</span> <span class="keyword">false</span>,</div>
<div class="line"><a name="l00662"></a><span class="lineno">  662</span>&#160;                                                <span class="comment">/*isImp*/</span> <span class="keyword">true</span>));</div>
<div class="line"><a name="l00663"></a><span class="lineno">  663</span>&#160;      }</div>
<div class="line"><a name="l00664"></a><span class="lineno">  664</span>&#160;      <a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.addOperand(<a class="code" href="classllvm_1_1MachineOperand.html#af2c351dad09a71aa08e1d85c67ae6e53">MachineOperand::CreateReg</a>(RISCV::VTYPE, <span class="comment">/*isDef*/</span> <span class="keyword">false</span>,</div>
<div class="line"><a name="l00665"></a><span class="lineno">  665</span>&#160;                                              <span class="comment">/*isImp*/</span> <span class="keyword">true</span>));</div>
<div class="line"><a name="l00666"></a><span class="lineno">  666</span>&#160; </div>
<div class="line"><a name="l00667"></a><span class="lineno">  667</span>&#160;      <span class="keywordflow">if</span> (!CurInfo.isValid()) {</div>
<div class="line"><a name="l00668"></a><span class="lineno">  668</span>&#160;        <span class="comment">// We haven&#39;t found any vector instructions or VL/VTYPE changes yet,</span></div>
<div class="line"><a name="l00669"></a><span class="lineno">  669</span>&#160;        <span class="comment">// use the predecessor information.</span></div>
<div class="line"><a name="l00670"></a><span class="lineno">  670</span>&#160;        <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(BlockInfo[<a class="code" href="AArch64SLSHardening_8cpp.html#a5958512eae2979bd2eb383977996a600">MBB</a>.<a class="code" href="classllvm_1_1MachineBasicBlock.html#a3aa22d521bd6a7e6b9f35545dc7b0f1e">getNumber</a>()].Pred.isValid() &amp;&amp;</div>
<div class="line"><a name="l00671"></a><span class="lineno">  671</span>&#160;               <span class="stringliteral">&quot;Expected a valid predecessor state.&quot;</span>);</div>
<div class="line"><a name="l00672"></a><span class="lineno">  672</span>&#160;        <span class="keywordflow">if</span> (needVSETVLI(NewInfo, BlockInfo[<a class="code" href="AArch64SLSHardening_8cpp.html#a5958512eae2979bd2eb383977996a600">MBB</a>.<a class="code" href="classllvm_1_1MachineBasicBlock.html#a3aa22d521bd6a7e6b9f35545dc7b0f1e">getNumber</a>()].Pred) &amp;&amp;</div>
<div class="line"><a name="l00673"></a><span class="lineno">  673</span>&#160;            needVSETVLIPHI(NewInfo, <a class="code" href="AArch64SLSHardening_8cpp.html#a5958512eae2979bd2eb383977996a600">MBB</a>)) {</div>
<div class="line"><a name="l00674"></a><span class="lineno">  674</span>&#160;          insertVSETVLI(<a class="code" href="AArch64SLSHardening_8cpp.html#a5958512eae2979bd2eb383977996a600">MBB</a>, <a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>, NewInfo, BlockInfo[<a class="code" href="AArch64SLSHardening_8cpp.html#a5958512eae2979bd2eb383977996a600">MBB</a>.<a class="code" href="classllvm_1_1MachineBasicBlock.html#a3aa22d521bd6a7e6b9f35545dc7b0f1e">getNumber</a>()].Pred);</div>
<div class="line"><a name="l00675"></a><span class="lineno">  675</span>&#160;          CurInfo = NewInfo;</div>
<div class="line"><a name="l00676"></a><span class="lineno">  676</span>&#160;        }</div>
<div class="line"><a name="l00677"></a><span class="lineno">  677</span>&#160;      } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00678"></a><span class="lineno">  678</span>&#160;        <span class="comment">// If this instruction isn&#39;t compatible with the previous VL/VTYPE</span></div>
<div class="line"><a name="l00679"></a><span class="lineno">  679</span>&#160;        <span class="comment">// we need to insert a VSETVLI.</span></div>
<div class="line"><a name="l00680"></a><span class="lineno">  680</span>&#160;        <span class="keywordflow">if</span> (needVSETVLI(NewInfo, CurInfo)) {</div>
<div class="line"><a name="l00681"></a><span class="lineno">  681</span>&#160;          insertVSETVLI(<a class="code" href="AArch64SLSHardening_8cpp.html#a5958512eae2979bd2eb383977996a600">MBB</a>, <a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>, NewInfo, CurInfo);</div>
<div class="line"><a name="l00682"></a><span class="lineno">  682</span>&#160;          CurInfo = NewInfo;</div>
<div class="line"><a name="l00683"></a><span class="lineno">  683</span>&#160;        }</div>
<div class="line"><a name="l00684"></a><span class="lineno">  684</span>&#160;      }</div>
<div class="line"><a name="l00685"></a><span class="lineno">  685</span>&#160;    }</div>
<div class="line"><a name="l00686"></a><span class="lineno">  686</span>&#160; </div>
<div class="line"><a name="l00687"></a><span class="lineno">  687</span>&#160;    <span class="comment">// If this is something updates VL/VTYPE that we don&#39;t know about, set</span></div>
<div class="line"><a name="l00688"></a><span class="lineno">  688</span>&#160;    <span class="comment">// the state to unknown.</span></div>
<div class="line"><a name="l00689"></a><span class="lineno">  689</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.isCall() || <a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.isInlineAsm() || <a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.modifiesRegister(RISCV::VL) ||</div>
<div class="line"><a name="l00690"></a><span class="lineno">  690</span>&#160;        <a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>.modifiesRegister(RISCV::VTYPE)) {</div>
<div class="line"><a name="l00691"></a><span class="lineno">  691</span>&#160;      CurInfo = VSETVLIInfo::getUnknown();</div>
<div class="line"><a name="l00692"></a><span class="lineno">  692</span>&#160;    }</div>
<div class="line"><a name="l00693"></a><span class="lineno">  693</span>&#160;  }</div>
<div class="line"><a name="l00694"></a><span class="lineno">  694</span>&#160;}</div>
<div class="line"><a name="l00695"></a><span class="lineno">  695</span>&#160; </div>
<div class="line"><a name="l00696"></a><span class="lineno">  696</span>&#160;<span class="keywordtype">bool</span> RISCVInsertVSETVLI::runOnMachineFunction(<a class="code" href="classllvm_1_1MachineFunction.html">MachineFunction</a> &amp;MF) {</div>
<div class="line"><a name="l00697"></a><span class="lineno">  697</span>&#160;  <span class="comment">// Skip if the vector extension is not enabled.</span></div>
<div class="line"><a name="l00698"></a><span class="lineno">  698</span>&#160;  <span class="keyword">const</span> <a class="code" href="classllvm_1_1RISCVSubtarget.html">RISCVSubtarget</a> &amp;<a class="code" href="namespacellvm_1_1ARM__MB.html#ad70272e2a9ec2a7e3a497458e1edbc85aed0b9bef861c96eee19e89db753db7b2">ST</a> = MF.<a class="code" href="classllvm_1_1MachineFunction.html#a325f6b611ef9ec06798d3b4eb9572093">getSubtarget</a>&lt;<a class="code" href="classllvm_1_1RISCVSubtarget.html">RISCVSubtarget</a>&gt;();</div>
<div class="line"><a name="l00699"></a><span class="lineno">  699</span>&#160;  <span class="keywordflow">if</span> (!<a class="code" href="namespacellvm_1_1ARM__MB.html#ad70272e2a9ec2a7e3a497458e1edbc85aed0b9bef861c96eee19e89db753db7b2">ST</a>.hasStdExtV())</div>
<div class="line"><a name="l00700"></a><span class="lineno">  700</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l00701"></a><span class="lineno">  701</span>&#160; </div>
<div class="line"><a name="l00702"></a><span class="lineno">  702</span>&#160;  <a class="code" href="HexagonCopyToCombine_8cpp.html#a1d40004718218dbdf06b496766299101">TII</a> = <a class="code" href="namespacellvm_1_1ARM__MB.html#ad70272e2a9ec2a7e3a497458e1edbc85aed0b9bef861c96eee19e89db753db7b2">ST</a>.getInstrInfo();</div>
<div class="line"><a name="l00703"></a><span class="lineno">  703</span>&#160;  <a class="code" href="AArch64AdvSIMDScalarPass_8cpp.html#aacd2ab195054a3e6a74bfbb9d5d571c8">MRI</a> = &amp;MF.<a class="code" href="classllvm_1_1MachineFunction.html#ab4a6ca428289b667dd691a00e9f7e334">getRegInfo</a>();</div>
<div class="line"><a name="l00704"></a><span class="lineno">  704</span>&#160; </div>
<div class="line"><a name="l00705"></a><span class="lineno">  705</span>&#160;  <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(BlockInfo.empty() &amp;&amp; <span class="stringliteral">&quot;Expect empty block infos&quot;</span>);</div>
<div class="line"><a name="l00706"></a><span class="lineno">  706</span>&#160;  BlockInfo.resize(MF.<a class="code" href="classllvm_1_1MachineFunction.html#aa22424ba23740b6a748e8d0c239b7e4c">getNumBlockIDs</a>());</div>
<div class="line"><a name="l00707"></a><span class="lineno">  707</span>&#160; </div>
<div class="line"><a name="l00708"></a><span class="lineno">  708</span>&#160;  <span class="keywordtype">bool</span> HaveVectorOp = <span class="keyword">false</span>;</div>
<div class="line"><a name="l00709"></a><span class="lineno">  709</span>&#160; </div>
<div class="line"><a name="l00710"></a><span class="lineno">  710</span>&#160;  <span class="comment">// Phase 1 - determine how VL/VTYPE are affected by the each block.</span></div>
<div class="line"><a name="l00711"></a><span class="lineno">  711</span>&#160;  <span class="keywordflow">for</span> (<span class="keyword">const</span> <a class="code" href="classllvm_1_1MachineBasicBlock.html">MachineBasicBlock</a> &amp;<a class="code" href="AArch64SLSHardening_8cpp.html#a5958512eae2979bd2eb383977996a600">MBB</a> : MF)</div>
<div class="line"><a name="l00712"></a><span class="lineno">  712</span>&#160;    HaveVectorOp |= computeVLVTYPEChanges(<a class="code" href="AArch64SLSHardening_8cpp.html#a5958512eae2979bd2eb383977996a600">MBB</a>);</div>
<div class="line"><a name="l00713"></a><span class="lineno">  713</span>&#160; </div>
<div class="line"><a name="l00714"></a><span class="lineno">  714</span>&#160;  <span class="comment">// If we didn&#39;t find any instructions that need VSETVLI, we&#39;re done.</span></div>
<div class="line"><a name="l00715"></a><span class="lineno">  715</span>&#160;  <span class="keywordflow">if</span> (HaveVectorOp) {</div>
<div class="line"><a name="l00716"></a><span class="lineno">  716</span>&#160;    <span class="comment">// Phase 2 - determine the exit VL/VTYPE from each block. We add all</span></div>
<div class="line"><a name="l00717"></a><span class="lineno">  717</span>&#160;    <span class="comment">// blocks to the list here, but will also add any that need to be revisited</span></div>
<div class="line"><a name="l00718"></a><span class="lineno">  718</span>&#160;    <span class="comment">// during Phase 2 processing.</span></div>
<div class="line"><a name="l00719"></a><span class="lineno">  719</span>&#160;    <span class="keywordflow">for</span> (<span class="keyword">const</span> <a class="code" href="classllvm_1_1MachineBasicBlock.html">MachineBasicBlock</a> &amp;<a class="code" href="AArch64SLSHardening_8cpp.html#a5958512eae2979bd2eb383977996a600">MBB</a> : MF) {</div>
<div class="line"><a name="l00720"></a><span class="lineno">  720</span>&#160;      WorkList.push(&amp;<a class="code" href="AArch64SLSHardening_8cpp.html#a5958512eae2979bd2eb383977996a600">MBB</a>);</div>
<div class="line"><a name="l00721"></a><span class="lineno">  721</span>&#160;      BlockInfo[<a class="code" href="AArch64SLSHardening_8cpp.html#a5958512eae2979bd2eb383977996a600">MBB</a>.<a class="code" href="classllvm_1_1MachineBasicBlock.html#a3aa22d521bd6a7e6b9f35545dc7b0f1e">getNumber</a>()].InQueue = <span class="keyword">true</span>;</div>
<div class="line"><a name="l00722"></a><span class="lineno">  722</span>&#160;    }</div>
<div class="line"><a name="l00723"></a><span class="lineno">  723</span>&#160;    <span class="keywordflow">while</span> (!WorkList.empty()) {</div>
<div class="line"><a name="l00724"></a><span class="lineno">  724</span>&#160;      <span class="keyword">const</span> <a class="code" href="classllvm_1_1MachineBasicBlock.html">MachineBasicBlock</a> &amp;<a class="code" href="AArch64SLSHardening_8cpp.html#a5958512eae2979bd2eb383977996a600">MBB</a> = *WorkList.<a class="code" href="classllvm_1_1MachineBasicBlock.html#acb4d7c02992f3821f3e3432b6c65de49">front</a>();</div>
<div class="line"><a name="l00725"></a><span class="lineno">  725</span>&#160;      WorkList.pop();</div>
<div class="line"><a name="l00726"></a><span class="lineno">  726</span>&#160;      computeIncomingVLVTYPE(<a class="code" href="AArch64SLSHardening_8cpp.html#a5958512eae2979bd2eb383977996a600">MBB</a>);</div>
<div class="line"><a name="l00727"></a><span class="lineno">  727</span>&#160;    }</div>
<div class="line"><a name="l00728"></a><span class="lineno">  728</span>&#160; </div>
<div class="line"><a name="l00729"></a><span class="lineno">  729</span>&#160;    <span class="comment">// Phase 3 - add any vsetvli instructions needed in the block. Use the</span></div>
<div class="line"><a name="l00730"></a><span class="lineno">  730</span>&#160;    <span class="comment">// Phase 2 information to avoid adding vsetvlis before the first vector</span></div>
<div class="line"><a name="l00731"></a><span class="lineno">  731</span>&#160;    <span class="comment">// instruction in the block if the VL/VTYPE is satisfied by its</span></div>
<div class="line"><a name="l00732"></a><span class="lineno">  732</span>&#160;    <span class="comment">// predecessors.</span></div>
<div class="line"><a name="l00733"></a><span class="lineno">  733</span>&#160;    <span class="keywordflow">for</span> (<a class="code" href="classllvm_1_1MachineBasicBlock.html">MachineBasicBlock</a> &amp;<a class="code" href="AArch64SLSHardening_8cpp.html#a5958512eae2979bd2eb383977996a600">MBB</a> : MF)</div>
<div class="line"><a name="l00734"></a><span class="lineno">  734</span>&#160;      emitVSETVLIs(<a class="code" href="AArch64SLSHardening_8cpp.html#a5958512eae2979bd2eb383977996a600">MBB</a>);</div>
<div class="line"><a name="l00735"></a><span class="lineno">  735</span>&#160;  }</div>
<div class="line"><a name="l00736"></a><span class="lineno">  736</span>&#160; </div>
<div class="line"><a name="l00737"></a><span class="lineno">  737</span>&#160;  BlockInfo.clear();</div>
<div class="line"><a name="l00738"></a><span class="lineno">  738</span>&#160; </div>
<div class="line"><a name="l00739"></a><span class="lineno">  739</span>&#160;  <span class="keywordflow">return</span> HaveVectorOp;</div>
<div class="line"><a name="l00740"></a><span class="lineno">  740</span>&#160;}</div>
<div class="line"><a name="l00741"></a><span class="lineno">  741</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l00742"></a><span class="lineno">  742</span>&#160;<span class="comment">/// Returns an instance of the Insert VSETVLI pass.</span></div>
<div class="line"><a name="l00743"></a><span class="lineno">  743</span>&#160;<span class="comment"></span><a class="code" href="classllvm_1_1FunctionPass.html">FunctionPass</a> *<a class="code" href="namespacellvm.html#a5eaa588ea9cfb18a6c2549662aad7c42">llvm::createRISCVInsertVSETVLIPass</a>() {</div>
<div class="line"><a name="l00744"></a><span class="lineno">  744</span>&#160;  <span class="keywordflow">return</span> <span class="keyword">new</span> RISCVInsertVSETVLI();</div>
<div class="line"><a name="l00745"></a><span class="lineno">  745</span>&#160;}</div>
</div><!-- fragment --></div><!-- contents -->
<div class="ttc" id="anamespacellvm_1_1RISCVII_html_ab335a6694bd42d4d2f807ec281af1e1ca1fc4732c22ad534f1cec77512aa4c451"><div class="ttname"><a href="namespacellvm_1_1RISCVII.html#ab335a6694bd42d4d2f807ec281af1e1ca1fc4732c22ad534f1cec77512aa4c451">llvm::RISCVII::LMUL_1</a></div><div class="ttdeci">@ LMUL_1</div><div class="ttdef"><b>Definition:</b> <a href="RISCVBaseInfo_8h_source.html#l00090">RISCVBaseInfo.h:90</a></div></div>
<div class="ttc" id="aLazyValueInfo_8cpp_html_ac20acbd89e45284bfb32ca506d20749d"><div class="ttname"><a href="LazyValueInfo_8cpp.html#ac20acbd89e45284bfb32ca506d20749d">intersect</a></div><div class="ttdeci">static ValueLatticeElement intersect(const ValueLatticeElement &amp;A, const ValueLatticeElement &amp;B)</div><div class="ttdoc">Combine two sets of facts about the same value into a single set of facts.</div><div class="ttdef"><b>Definition:</b> <a href="LazyValueInfo_8cpp_source.html#l00096">LazyValueInfo.cpp:96</a></div></div>
<div class="ttc" id="aRISCVInsertVSETVLI_8cpp_html_a4de876ab2e84826768e79441d88e1b14"><div class="ttname"><a href="RISCVInsertVSETVLI_8cpp.html#a4de876ab2e84826768e79441d88e1b14">RISCV_INSERT_VSETVLI_NAME</a></div><div class="ttdeci">#define RISCV_INSERT_VSETVLI_NAME</div><div class="ttdef"><b>Definition:</b> <a href="RISCVInsertVSETVLI_8cpp_source.html#l00034">RISCVInsertVSETVLI.cpp:34</a></div></div>
<div class="ttc" id="aIRTranslator_8cpp_html_abe44dfdea65b4f7e11e0a608ab708b76"><div class="ttname"><a href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a></div><div class="ttdeci">IRTranslator LLVM IR MI</div><div class="ttdef"><b>Definition:</b> <a href="IRTranslator_8cpp_source.html#l00102">IRTranslator.cpp:102</a></div></div>
<div class="ttc" id="aclassllvm_1_1MachineInstrBuilder_html_a4f1ceb770fe3446bfb2b3fa26858098f"><div class="ttname"><a href="classllvm_1_1MachineInstrBuilder.html#a4f1ceb770fe3446bfb2b3fa26858098f">llvm::MachineInstrBuilder::addImm</a></div><div class="ttdeci">const MachineInstrBuilder &amp; addImm(int64_t Val) const</div><div class="ttdoc">Add a new immediate operand.</div><div class="ttdef"><b>Definition:</b> <a href="MachineInstrBuilder_8h_source.html#l00131">MachineInstrBuilder.h:131</a></div></div>
<div class="ttc" id="anamespacellvm_html"><div class="ttname"><a href="namespacellvm.html">llvm</a></div><div class="ttdoc">---------------------— PointerInfo ------------------------------------—</div><div class="ttdef"><b>Definition:</b> <a href="AllocatorList_8h_source.html#l00023">AllocatorList.h:23</a></div></div>
<div class="ttc" id="aclassllvm_1_1MachineInstr_html_a120ccebe70e1b0ddf72fc776229d0025"><div class="ttname"><a href="classllvm_1_1MachineInstr.html#a120ccebe70e1b0ddf72fc776229d0025">llvm::MachineInstr::isImplicitDef</a></div><div class="ttdeci">bool isImplicitDef() const</div><div class="ttdef"><b>Definition:</b> <a href="MachineInstr_8h_source.html#l01260">MachineInstr.h:1260</a></div></div>
<div class="ttc" id="aMachineSink_8cpp_html_a359e1ff26f6d466d927a61aae45b05c3"><div class="ttname"><a href="MachineSink_8cpp.html#a359e1ff26f6d466d927a61aae45b05c3">Reg</a></div><div class="ttdeci">unsigned Reg</div><div class="ttdef"><b>Definition:</b> <a href="MachineSink_8cpp_source.html#l01566">MachineSink.cpp:1566</a></div></div>
<div class="ttc" id="aAArch64ExpandPseudoInsts_8cpp_html_a6cf2f8996b1e9aaf2d7a435aaa62382f"><div class="ttname"><a href="AArch64ExpandPseudoInsts_8cpp.html#a6cf2f8996b1e9aaf2d7a435aaa62382f">UseMI</a></div><div class="ttdeci">MachineInstrBuilder &amp; UseMI</div><div class="ttdef"><b>Definition:</b> <a href="AArch64ExpandPseudoInsts_8cpp_source.html#l00102">AArch64ExpandPseudoInsts.cpp:102</a></div></div>
<div class="ttc" id="aclassllvm_1_1MachineOperand_html_af2c351dad09a71aa08e1d85c67ae6e53"><div class="ttname"><a href="classllvm_1_1MachineOperand.html#af2c351dad09a71aa08e1d85c67ae6e53">llvm::MachineOperand::CreateReg</a></div><div class="ttdeci">static MachineOperand CreateReg(Register Reg, bool isDef, bool isImp=false, bool isKill=false, bool isDead=false, bool isUndef=false, bool isEarlyClobber=false, unsigned SubReg=0, bool isDebug=false, bool isInternalRead=false, bool isRenamable=false)</div><div class="ttdef"><b>Definition:</b> <a href="MachineOperand_8h_source.html#l00791">MachineOperand.h:791</a></div></div>
<div class="ttc" id="aclassllvm_1_1MachineRegisterInfo_html_a5c77792a06583e0fe7a0379ad94a2809"><div class="ttname"><a href="classllvm_1_1MachineRegisterInfo.html#a5c77792a06583e0fe7a0379ad94a2809">llvm::MachineRegisterInfo::createVirtualRegister</a></div><div class="ttdeci">Register createVirtualRegister(const TargetRegisterClass *RegClass, StringRef Name=&quot;&quot;)</div><div class="ttdoc">createVirtualRegister - Create and return a new virtual register in the function with the specified r...</div><div class="ttdef"><b>Definition:</b> <a href="MachineRegisterInfo_8cpp_source.html#l00158">MachineRegisterInfo.cpp:158</a></div></div>
<div class="ttc" id="anamespacellvm_html_a5eaa588ea9cfb18a6c2549662aad7c42"><div class="ttname"><a href="namespacellvm.html#a5eaa588ea9cfb18a6c2549662aad7c42">llvm::createRISCVInsertVSETVLIPass</a></div><div class="ttdeci">FunctionPass * createRISCVInsertVSETVLIPass()</div></div>
<div class="ttc" id="aclassllvm_1_1MachineRegisterInfo_html"><div class="ttname"><a href="classllvm_1_1MachineRegisterInfo.html">llvm::MachineRegisterInfo</a></div><div class="ttdoc">MachineRegisterInfo - Keep track of information for virtual and physical registers,...</div><div class="ttdef"><b>Definition:</b> <a href="MachineRegisterInfo_8h_source.html#l00052">MachineRegisterInfo.h:52</a></div></div>
<div class="ttc" id="aREADME-SSE_8txt_html_a63d206a063eefcdf8c318ded97b65020"><div class="ttname"><a href="README-SSE_8txt.html#a63d206a063eefcdf8c318ded97b65020">P</a></div><div class="ttdeci">This currently compiles esp xmm0 movsd esp eax eax esp ret We should use not the dag combiner This is because dagcombine2 needs to be able to see through the X86ISD::Wrapper which DAGCombine can t really do The code for turning x load into a single vector load is target independent and should be moved to the dag combiner The code for turning x load into a vector load can only handle a direct load from a global or a direct load from the stack It should be generalized to handle any load from P</div><div class="ttdef"><b>Definition:</b> <a href="README-SSE_8txt_source.html#l00411">README-SSE.txt:411</a></div></div>
<div class="ttc" id="aclassllvm_1_1MachineOperand_html_a8a82683fccdef8a5ef772ef03277aee7"><div class="ttname"><a href="classllvm_1_1MachineOperand.html#a8a82683fccdef8a5ef772ef03277aee7">llvm::MachineOperand::setIsKill</a></div><div class="ttdeci">void setIsKill(bool Val=true)</div><div class="ttdef"><b>Definition:</b> <a href="MachineOperand_8h_source.html#l00500">MachineOperand.h:500</a></div></div>
<div class="ttc" id="aclassllvm_1_1MachineFunctionPass_html"><div class="ttname"><a href="classllvm_1_1MachineFunctionPass.html">llvm::MachineFunctionPass</a></div><div class="ttdoc">MachineFunctionPass - This class adapts the FunctionPass interface to allow convenient creation of pa...</div><div class="ttdef"><b>Definition:</b> <a href="MachineFunctionPass_8h_source.html#l00030">MachineFunctionPass.h:30</a></div></div>
<div class="ttc" id="anamespacellvm_1_1RegState_html_a5a2c54ccd4089208481258b7803e01a8a9ddde91ef09476d28a088fe57f8e2921"><div class="ttname"><a href="namespacellvm_1_1RegState.html#a5a2c54ccd4089208481258b7803e01a8a9ddde91ef09476d28a088fe57f8e2921">llvm::RegState::Kill</a></div><div class="ttdeci">@ Kill</div><div class="ttdoc">The last use of a register.</div><div class="ttdef"><b>Definition:</b> <a href="MachineInstrBuilder_8h_source.html#l00048">MachineInstrBuilder.h:48</a></div></div>
<div class="ttc" id="anamespacellvm_1_1cl_html_a68075925a54790e71ca790e1d4f21a40a263ac008d8d31f13ce460395fc4cf7e6"><div class="ttname"><a href="namespacellvm_1_1cl.html#a68075925a54790e71ca790e1d4f21a40a263ac008d8d31f13ce460395fc4cf7e6">llvm::cl::Hidden</a></div><div class="ttdeci">@ Hidden</div><div class="ttdef"><b>Definition:</b> <a href="CommandLine_8h_source.html#l00143">CommandLine.h:143</a></div></div>
<div class="ttc" id="aclassllvm_1_1MachineFunction_html_aa22424ba23740b6a748e8d0c239b7e4c"><div class="ttname"><a href="classllvm_1_1MachineFunction.html#aa22424ba23740b6a748e8d0c239b7e4c">llvm::MachineFunction::getNumBlockIDs</a></div><div class="ttdeci">unsigned getNumBlockIDs() const</div><div class="ttdoc">getNumBlockIDs - Return the number of MBB ID's allocated.</div><div class="ttdef"><b>Definition:</b> <a href="MachineFunction_8h_source.html#l00749">MachineFunction.h:749</a></div></div>
<div class="ttc" id="anamespacellvm_1_1RISCVVType_html_aa18a6c74ee58139536f65e458f1c4586"><div class="ttname"><a href="namespacellvm_1_1RISCVVType.html#aa18a6c74ee58139536f65e458f1c4586">llvm::RISCVVType::isValidSEW</a></div><div class="ttdeci">static bool isValidSEW(unsigned SEW)</div><div class="ttdef"><b>Definition:</b> <a href="RISCVBaseInfo_8h_source.html#l00313">RISCVBaseInfo.h:313</a></div></div>
<div class="ttc" id="anamespacellvm_1_1RISCVII_html_afc858f8e35813be95df97504afd771ef"><div class="ttname"><a href="namespacellvm_1_1RISCVII.html#afc858f8e35813be95df97504afd771ef">llvm::RISCVII::hasSEWOp</a></div><div class="ttdeci">static bool hasSEWOp(uint64_t TSFlags)</div><div class="ttdef"><b>Definition:</b> <a href="RISCVBaseInfo_8h_source.html#l00127">RISCVBaseInfo.h:127</a></div></div>
<div class="ttc" id="anamespacellvm_1_1RISCVVType_html_a08cfea4b8c9e0a6118dc031cafeb0773"><div class="ttname"><a href="namespacellvm_1_1RISCVVType.html#a08cfea4b8c9e0a6118dc031cafeb0773">llvm::RISCVVType::isTailAgnostic</a></div><div class="ttdeci">static bool isTailAgnostic(unsigned VType)</div><div class="ttdef"><b>Definition:</b> <a href="RISCVBaseInfo_8h_source.html#l00343">RISCVBaseInfo.h:343</a></div></div>
<div class="ttc" id="aclassBlockData_html_a3a4dfddb67525d6766e5b78956395fb9"><div class="ttname"><a href="classBlockData.html#a3a4dfddb67525d6766e5b78956395fb9">BlockData::BlockData</a></div><div class="ttdeci">BlockData()</div><div class="ttdef"><b>Definition:</b> <a href="SIModeRegister_8cpp_source.html#l00104">SIModeRegister.cpp:104</a></div></div>
<div class="ttc" id="anamespacellvm_1_1X86II_html_a15cbb72b959838d6e0f002ce58bc4bb2ad254d64df655ab661c3c3330610385af"><div class="ttname"><a href="namespacellvm_1_1X86II.html#a15cbb72b959838d6e0f002ce58bc4bb2ad254d64df655ab661c3c3330610385af">llvm::X86II::TA</a></div><div class="ttdeci">@ TA</div><div class="ttdef"><b>Definition:</b> <a href="X86BaseInfo_8h_source.html#l00803">X86BaseInfo.h:803</a></div></div>
<div class="ttc" id="anamespacellvm_1_1RegState_html_a5a2c54ccd4089208481258b7803e01a8a72c17e2ff2d5af62a30e56ac152aa8d5"><div class="ttname"><a href="namespacellvm_1_1RegState.html#a5a2c54ccd4089208481258b7803e01a8a72c17e2ff2d5af62a30e56ac152aa8d5">llvm::RegState::Define</a></div><div class="ttdeci">@ Define</div><div class="ttdoc">Register definition.</div><div class="ttdef"><b>Definition:</b> <a href="MachineInstrBuilder_8h_source.html#l00044">MachineInstrBuilder.h:44</a></div></div>
<div class="ttc" id="anamespacellvm_1_1RegState_html_a5a2c54ccd4089208481258b7803e01a8a0fec8ba6f4a4dc758b725205985eee99"><div class="ttname"><a href="namespacellvm_1_1RegState.html#a5a2c54ccd4089208481258b7803e01a8a0fec8ba6f4a4dc758b725205985eee99">llvm::RegState::Implicit</a></div><div class="ttdeci">@ Implicit</div><div class="ttdoc">Not emitted register (e.g. carry, or temporary result).</div><div class="ttdef"><b>Definition:</b> <a href="MachineInstrBuilder_8h_source.html#l00046">MachineInstrBuilder.h:46</a></div></div>
<div class="ttc" id="anamespacellvm_1_1RISCVVType_html_af5af8d664535a4bfbb71f0243ed9ae3a"><div class="ttname"><a href="namespacellvm_1_1RISCVVType.html#af5af8d664535a4bfbb71f0243ed9ae3a">llvm::RISCVVType::getSEW</a></div><div class="ttdeci">static unsigned getSEW(unsigned VType)</div><div class="ttdef"><b>Definition:</b> <a href="RISCVBaseInfo_8h_source.html#l00338">RISCVBaseInfo.h:338</a></div></div>
<div class="ttc" id="aclassllvm_1_1MachineFunctionPass_html_a864fd57b4304ef933b3281d0ef85a88e"><div class="ttname"><a href="classllvm_1_1MachineFunctionPass.html#a864fd57b4304ef933b3281d0ef85a88e">llvm::MachineFunctionPass::getAnalysisUsage</a></div><div class="ttdeci">void getAnalysisUsage(AnalysisUsage &amp;AU) const override</div><div class="ttdoc">getAnalysisUsage - Subclasses that override getAnalysisUsage must call this.</div><div class="ttdef"><b>Definition:</b> <a href="MachineFunctionPass_8cpp_source.html#l00102">MachineFunctionPass.cpp:102</a></div></div>
<div class="ttc" id="aclassllvm_1_1MachineFunction_html_ab4a6ca428289b667dd691a00e9f7e334"><div class="ttname"><a href="classllvm_1_1MachineFunction.html#ab4a6ca428289b667dd691a00e9f7e334">llvm::MachineFunction::getRegInfo</a></div><div class="ttdeci">MachineRegisterInfo &amp; getRegInfo()</div><div class="ttdoc">getRegInfo - Return information about the registers currently in use.</div><div class="ttdef"><b>Definition:</b> <a href="MachineFunction_8h_source.html#l00632">MachineFunction.h:632</a></div></div>
<div class="ttc" id="aclassllvm_1_1TargetInstrInfo_html"><div class="ttname"><a href="classllvm_1_1TargetInstrInfo.html">llvm::TargetInstrInfo</a></div><div class="ttdoc">TargetInstrInfo - Interface to description of machine instruction set.</div><div class="ttdef"><b>Definition:</b> <a href="TargetInstrInfo_8h_source.html#l00097">TargetInstrInfo.h:97</a></div></div>
<div class="ttc" id="aclassllvm_1_1PassRegistry_html_a05a729900b76c89e808c6c3094921b2f"><div class="ttname"><a href="classllvm_1_1PassRegistry.html#a05a729900b76c89e808c6c3094921b2f">llvm::PassRegistry::getPassRegistry</a></div><div class="ttdeci">static PassRegistry * getPassRegistry()</div><div class="ttdoc">getPassRegistry - Access the global registry object, which is automatically initialized at applicatio...</div><div class="ttdef"><b>Definition:</b> <a href="PassRegistry_8cpp_source.html#l00031">PassRegistry.cpp:31</a></div></div>
<div class="ttc" id="aclassllvm_1_1MachineOperand_html_a38b28a85f818b49d8806c150b8a5b4f7"><div class="ttname"><a href="classllvm_1_1MachineOperand.html#a38b28a85f818b49d8806c150b8a5b4f7">llvm::MachineOperand::getImm</a></div><div class="ttdeci">int64_t getImm() const</div><div class="ttdef"><b>Definition:</b> <a href="MachineOperand_8h_source.html#l00537">MachineOperand.h:537</a></div></div>
<div class="ttc" id="aclassllvm_1_1MachineInstr_html_a3f7a45f6e10668a5f702e26bca80d18e"><div class="ttname"><a href="classllvm_1_1MachineInstr.html#a3f7a45f6e10668a5f702e26bca80d18e">llvm::MachineInstr::getOperand</a></div><div class="ttdeci">const MachineOperand &amp; getOperand(unsigned i) const</div><div class="ttdef"><b>Definition:</b> <a href="MachineInstr_8h_source.html#l00499">MachineInstr.h:499</a></div></div>
<div class="ttc" id="anamespacellvm_1_1RegState_html_a5a2c54ccd4089208481258b7803e01a8a2fee1a7db4e84247a193a9af1f907013"><div class="ttname"><a href="namespacellvm_1_1RegState.html#a5a2c54ccd4089208481258b7803e01a8a2fee1a7db4e84247a193a9af1f907013">llvm::RegState::Dead</a></div><div class="ttdeci">@ Dead</div><div class="ttdoc">Unused definition.</div><div class="ttdef"><b>Definition:</b> <a href="MachineInstrBuilder_8h_source.html#l00050">MachineInstrBuilder.h:50</a></div></div>
<div class="ttc" id="aclassllvm_1_1AnalysisUsage_html"><div class="ttname"><a href="classllvm_1_1AnalysisUsage.html">llvm::AnalysisUsage</a></div><div class="ttdoc">Represent the analysis usage information of a pass.</div><div class="ttdef"><b>Definition:</b> <a href="PassAnalysisSupport_8h_source.html#l00047">PassAnalysisSupport.h:47</a></div></div>
<div class="ttc" id="aRISCVInsertVSETVLI_8cpp_html_a29b0570e44859d5df506ee5d309fb228"><div class="ttname"><a href="RISCVInsertVSETVLI_8cpp.html#a29b0570e44859d5df506ee5d309fb228">DisableInsertVSETVLPHIOpt</a></div><div class="ttdeci">static cl::opt&lt; bool &gt; DisableInsertVSETVLPHIOpt(&quot;riscv-disable-insert-vsetvl-phi-opt&quot;, cl::init(false), cl::Hidden, cl::desc(&quot;Disable looking through phis when inserting vsetvlis.&quot;))</div></div>
<div class="ttc" id="anamespacefalse_html"><div class="ttname"><a href="namespacefalse.html">false</a></div><div class="ttdef"><b>Definition:</b> <a href="StackSlotColoring_8cpp_source.html#l00142">StackSlotColoring.cpp:142</a></div></div>
<div class="ttc" id="aHexagonCopyToCombine_8cpp_html_a1d40004718218dbdf06b496766299101"><div class="ttname"><a href="HexagonCopyToCombine_8cpp.html#a1d40004718218dbdf06b496766299101">TII</a></div><div class="ttdeci">const HexagonInstrInfo * TII</div><div class="ttdef"><b>Definition:</b> <a href="HexagonCopyToCombine_8cpp_source.html#l00129">HexagonCopyToCombine.cpp:129</a></div></div>
<div class="ttc" id="aLoopDeletion_8cpp_html_a66a2592ace8a67bc796c72710d632bab"><div class="ttname"><a href="LoopDeletion_8cpp.html#a66a2592ace8a67bc796c72710d632bab">merge</a></div><div class="ttdeci">static LoopDeletionResult merge(LoopDeletionResult A, LoopDeletionResult B)</div><div class="ttdef"><b>Definition:</b> <a href="LoopDeletion_8cpp_source.html#l00051">LoopDeletion.cpp:51</a></div></div>
<div class="ttc" id="aclassllvm_1_1MachineOperand_html"><div class="ttname"><a href="classllvm_1_1MachineOperand.html">llvm::MachineOperand</a></div><div class="ttdoc">MachineOperand class - Representation of each machine instruction operand.</div><div class="ttdef"><b>Definition:</b> <a href="MachineOperand_8h_source.html#l00049">MachineOperand.h:49</a></div></div>
<div class="ttc" id="anamespacellvm_1_1RISCVII_html_a81c11c8178c6df7f55ef0557daa54765"><div class="ttname"><a href="namespacellvm_1_1RISCVII.html#a81c11c8178c6df7f55ef0557daa54765">llvm::RISCVII::hasVLOp</a></div><div class="ttdeci">static bool hasVLOp(uint64_t TSFlags)</div><div class="ttdef"><b>Definition:</b> <a href="RISCVBaseInfo_8h_source.html#l00131">RISCVBaseInfo.h:131</a></div></div>
<div class="ttc" id="aCSEInfo_8cpp_html_a75f8a8519c2c9b30e7c06dc5e256fffa"><div class="ttname"><a href="CSEInfo_8cpp.html#a75f8a8519c2c9b30e7c06dc5e256fffa">Info</a></div><div class="ttdeci">Analysis containing CSE Info</div><div class="ttdef"><b>Definition:</b> <a href="CSEInfo_8cpp_source.html#l00027">CSEInfo.cpp:27</a></div></div>
<div class="ttc" id="aclassllvm_1_1MachineRegisterInfo_html_a40d954b9cf9ee8b545a78725f2549cba"><div class="ttname"><a href="classllvm_1_1MachineRegisterInfo.html#a40d954b9cf9ee8b545a78725f2549cba">llvm::MachineRegisterInfo::getVRegDef</a></div><div class="ttdeci">MachineInstr * getVRegDef(Register Reg) const</div><div class="ttdoc">getVRegDef - Return the machine instr that defines the specified virtual register or null if none is ...</div><div class="ttdef"><b>Definition:</b> <a href="MachineRegisterInfo_8cpp_source.html#l00400">MachineRegisterInfo.cpp:400</a></div></div>
<div class="ttc" id="aclassllvm_1_1MachineBasicBlock_html"><div class="ttname"><a href="classllvm_1_1MachineBasicBlock.html">llvm::MachineBasicBlock</a></div><div class="ttdef"><b>Definition:</b> <a href="MachineBasicBlock_8h_source.html#l00095">MachineBasicBlock.h:96</a></div></div>
<div class="ttc" id="aclassllvm_1_1Register_html_aebafd86dde59b5a05b22e8720e808a9d"><div class="ttname"><a href="classllvm_1_1Register.html#aebafd86dde59b5a05b22e8720e808a9d">llvm::Register::isVirtual</a></div><div class="ttdeci">bool isVirtual() const</div><div class="ttdoc">Return true if the specified register number is in the virtual register namespace.</div><div class="ttdef"><b>Definition:</b> <a href="Register_8h_source.html#l00091">Register.h:91</a></div></div>
<div class="ttc" id="aclassllvm_1_1MachineFunction_html_a325f6b611ef9ec06798d3b4eb9572093"><div class="ttname"><a href="classllvm_1_1MachineFunction.html#a325f6b611ef9ec06798d3b4eb9572093">llvm::MachineFunction::getSubtarget</a></div><div class="ttdeci">const TargetSubtargetInfo &amp; getSubtarget() const</div><div class="ttdoc">getSubtarget - Return the subtarget for which this machine code is being compiled.</div><div class="ttdef"><b>Definition:</b> <a href="MachineFunction_8h_source.html#l00622">MachineFunction.h:622</a></div></div>
<div class="ttc" id="aclassllvm_1_1cl_1_1opt_html"><div class="ttname"><a href="classllvm_1_1cl_1_1opt.html">llvm::cl::opt&lt; bool &gt;</a></div></div>
<div class="ttc" id="anamespacellvm_1_1RISCVVType_html_a5144889af710ec49f5eeff7be79e671d"><div class="ttname"><a href="namespacellvm_1_1RISCVVType.html#a5144889af710ec49f5eeff7be79e671d">llvm::RISCVVType::decodeVLMUL</a></div><div class="ttdeci">std::pair&lt; unsigned, bool &gt; decodeVLMUL(RISCVII::VLMUL VLMUL)</div><div class="ttdef"><b>Definition:</b> <a href="RISCVBaseInfo_8cpp_source.html#l00124">RISCVBaseInfo.cpp:124</a></div></div>
<div class="ttc" id="aclassllvm_1_1MachineOperand_html_a4c9594c955fec80c73ddd964b5efd554"><div class="ttname"><a href="classllvm_1_1MachineOperand.html#a4c9594c955fec80c73ddd964b5efd554">llvm::MachineOperand::isReg</a></div><div class="ttdeci">bool isReg() const</div><div class="ttdoc">isReg - Tests if this is a MO_Register operand.</div><div class="ttdef"><b>Definition:</b> <a href="MachineOperand_8h_source.html#l00321">MachineOperand.h:321</a></div></div>
<div class="ttc" id="aclassllvm_1_1MachineInstr_html"><div class="ttname"><a href="classllvm_1_1MachineInstr.html">llvm::MachineInstr</a></div><div class="ttdoc">Representation of each machine instruction.</div><div class="ttdef"><b>Definition:</b> <a href="MachineInstr_8h_source.html#l00064">MachineInstr.h:66</a></div></div>
<div class="ttc" id="anamespacellvm_1_1pdb_html_a434cfa04e4ed34b7a901378557d4ca9eab5923ebc864d1679cf1c3a929c122037"><div class="ttname"><a href="namespacellvm_1_1pdb.html#a434cfa04e4ed34b7a901378557d4ca9eab5923ebc864d1679cf1c3a929c122037">llvm::pdb::Unknown</a></div><div class="ttdeci">@ Unknown</div><div class="ttdef"><b>Definition:</b> <a href="PDBTypes_8h_source.html#l00395">PDBTypes.h:395</a></div></div>
<div class="ttc" id="aLiveIntervals_8h_html"><div class="ttname"><a href="LiveIntervals_8h.html">LiveIntervals.h</a></div></div>
<div class="ttc" id="aAArch64PromoteConstant_8cpp_html_a90f8350fecae261c25be85d38b451bff"><div class="ttname"><a href="AArch64PromoteConstant_8cpp.html#a90f8350fecae261c25be85d38b451bff">const</a></div><div class="ttdeci">aarch64 promote const</div><div class="ttdef"><b>Definition:</b> <a href="AArch64PromoteConstant_8cpp_source.html#l00232">AArch64PromoteConstant.cpp:232</a></div></div>
<div class="ttc" id="anamespacellvm_1_1ARM__MB_html_ad70272e2a9ec2a7e3a497458e1edbc85aed0b9bef861c96eee19e89db753db7b2"><div class="ttname"><a href="namespacellvm_1_1ARM__MB.html#ad70272e2a9ec2a7e3a497458e1edbc85aed0b9bef861c96eee19e89db753db7b2">llvm::ARM_MB::ST</a></div><div class="ttdeci">@ ST</div><div class="ttdef"><b>Definition:</b> <a href="MCTargetDesc_2ARMBaseInfo_8h_source.html#l00073">ARMBaseInfo.h:73</a></div></div>
<div class="ttc" id="anamespacellvm_1_1cl_html_a10a041239ae1870cfcc064bfaa79fb65"><div class="ttname"><a href="namespacellvm_1_1cl.html#a10a041239ae1870cfcc064bfaa79fb65">llvm::cl::init</a></div><div class="ttdeci">initializer&lt; Ty &gt; init(const Ty &amp;Val)</div><div class="ttdef"><b>Definition:</b> <a href="CommandLine_8h_source.html#l00443">CommandLine.h:443</a></div></div>
<div class="ttc" id="aMachineFunctionPass_8h_html"><div class="ttname"><a href="MachineFunctionPass_8h.html">MachineFunctionPass.h</a></div></div>
<div class="ttc" id="aclassllvm_1_1Register_html_ab94ac0eb79655589fb116359f862886c"><div class="ttname"><a href="classllvm_1_1Register.html#ab94ac0eb79655589fb116359f862886c">llvm::Register::isVirtualRegister</a></div><div class="ttdeci">static bool isVirtualRegister(unsigned Reg)</div><div class="ttdoc">Return true if the specified register number is in the virtual register namespace.</div><div class="ttdef"><b>Definition:</b> <a href="Register_8h_source.html#l00071">Register.h:71</a></div></div>
<div class="ttc" id="aclassllvm_1_1RISCVSubtarget_html"><div class="ttname"><a href="classllvm_1_1RISCVSubtarget.html">llvm::RISCVSubtarget</a></div><div class="ttdef"><b>Definition:</b> <a href="RISCVSubtarget_8h_source.html#l00035">RISCVSubtarget.h:35</a></div></div>
<div class="ttc" id="aSILowerControlFlow_8cpp_html_a4868c5d81c5ccc98c47aeab6244346a0"><div class="ttname"><a href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a></div><div class="ttdeci">assert(ImpDefSCC.getReg()==AMDGPU::SCC &amp;&amp;ImpDefSCC.isDef())</div></div>
<div class="ttc" id="anamespacellvm_html_a162c90bc179a6359438d060722bee35f"><div class="ttname"><a href="namespacellvm.html#a162c90bc179a6359438d060722bee35f">llvm::operator==</a></div><div class="ttdeci">bool operator==(uint64_t V1, const APInt &amp;V2)</div><div class="ttdef"><b>Definition:</b> <a href="APInt_8h_source.html#l02030">APInt.h:2030</a></div></div>
<div class="ttc" id="aclassllvm_1_1MachineInstrBuilder_html_ad08ed580345a51c50d9477dec1e65818"><div class="ttname"><a href="classllvm_1_1MachineInstrBuilder.html#ad08ed580345a51c50d9477dec1e65818">llvm::MachineInstrBuilder::addReg</a></div><div class="ttdeci">const MachineInstrBuilder &amp; addReg(Register RegNo, unsigned flags=0, unsigned SubReg=0) const</div><div class="ttdoc">Add a new virtual register operand.</div><div class="ttdef"><b>Definition:</b> <a href="MachineInstrBuilder_8h_source.html#l00097">MachineInstrBuilder.h:97</a></div></div>
<div class="ttc" id="aclassllvm_1_1MachineOperand_html_ac0035d7c1c860501c877c20e6e93297b"><div class="ttname"><a href="classllvm_1_1MachineOperand.html#ac0035d7c1c860501c877c20e6e93297b">llvm::MachineOperand::getReg</a></div><div class="ttdeci">Register getReg() const</div><div class="ttdoc">getReg - Returns the register number.</div><div class="ttdef"><b>Definition:</b> <a href="MachineOperand_8h_source.html#l00360">MachineOperand.h:360</a></div></div>
<div class="ttc" id="aclassllvm_1_1MachineBasicBlock_html_afd9b9b8655c008bf6cd6afb05d41b69e"><div class="ttname"><a href="classllvm_1_1MachineBasicBlock.html#afd9b9b8655c008bf6cd6afb05d41b69e">llvm::MachineBasicBlock::predecessors</a></div><div class="ttdeci">iterator_range&lt; pred_iterator &gt; predecessors()</div><div class="ttdef"><b>Definition:</b> <a href="MachineBasicBlock_8h_source.html#l00349">MachineBasicBlock.h:349</a></div></div>
<div class="ttc" id="aRISCVInsertVSETVLI_8cpp_html_af5783a89cb6c8b0cc18ddd1318de6eb9"><div class="ttname"><a href="RISCVInsertVSETVLI_8cpp.html#af5783a89cb6c8b0cc18ddd1318de6eb9">INITIALIZE_PASS</a></div><div class="ttdeci">INITIALIZE_PASS(RISCVInsertVSETVLI, DEBUG_TYPE, RISCV_INSERT_VSETVLI_NAME, false, false) static MachineInstr *elideCopies(MachineInstr *MI</div></div>
<div class="ttc" id="aRISCV_8h_html"><div class="ttname"><a href="RISCV_8h.html">RISCV.h</a></div></div>
<div class="ttc" id="aclassllvm_1_1MachineBasicBlock_html_a877507fda31c207ec36a018784369708"><div class="ttname"><a href="classllvm_1_1MachineBasicBlock.html#a877507fda31c207ec36a018784369708">llvm::MachineBasicBlock::pred_empty</a></div><div class="ttdeci">bool pred_empty() const</div><div class="ttdef"><b>Definition:</b> <a href="MachineBasicBlock_8h_source.html#l00331">MachineBasicBlock.h:331</a></div></div>
<div class="ttc" id="aclassllvm_1_1MachineFunction_html"><div class="ttname"><a href="classllvm_1_1MachineFunction.html">llvm::MachineFunction</a></div><div class="ttdef"><b>Definition:</b> <a href="MachineFunction_8h_source.html#l00230">MachineFunction.h:230</a></div></div>
<div class="ttc" id="aclassllvm_1_1MachineOperand_html_a9b48cb80ee1534c2b51d789b673137c1"><div class="ttname"><a href="classllvm_1_1MachineOperand.html#a9b48cb80ee1534c2b51d789b673137c1">llvm::MachineOperand::getMBB</a></div><div class="ttdeci">MachineBasicBlock * getMBB() const</div><div class="ttdef"><b>Definition:</b> <a href="MachineOperand_8h_source.html#l00552">MachineOperand.h:552</a></div></div>
<div class="ttc" id="aclassllvm_1_1MachineBasicBlock_html_a3aa22d521bd6a7e6b9f35545dc7b0f1e"><div class="ttname"><a href="classllvm_1_1MachineBasicBlock.html#a3aa22d521bd6a7e6b9f35545dc7b0f1e">llvm::MachineBasicBlock::getNumber</a></div><div class="ttdeci">int getNumber() const</div><div class="ttdoc">MachineBasicBlocks are uniquely numbered at the function level, unless they're not in a MachineFuncti...</div><div class="ttdef"><b>Definition:</b> <a href="MachineBasicBlock_8h_source.html#l01056">MachineBasicBlock.h:1056</a></div></div>
<div class="ttc" id="aclassllvm_1_1MachineBasicBlock_html_a4d2c96836214c1f13357ffb99125fb4a"><div class="ttname"><a href="classllvm_1_1MachineBasicBlock.html#a4d2c96836214c1f13357ffb99125fb4a">llvm::MachineBasicBlock::successors</a></div><div class="ttdeci">iterator_range&lt; succ_iterator &gt; successors()</div><div class="ttdef"><b>Definition:</b> <a href="MachineBasicBlock_8h_source.html#l00355">MachineBasicBlock.h:355</a></div></div>
<div class="ttc" id="aclassllvm_1_1StringRef_html"><div class="ttname"><a href="classllvm_1_1StringRef.html">llvm::StringRef</a></div><div class="ttdoc">StringRef - Represent a constant reference to a string, i.e.</div><div class="ttdef"><b>Definition:</b> <a href="StringRef_8h_source.html#l00058">StringRef.h:58</a></div></div>
<div class="ttc" id="aclassllvm_1_1AnalysisUsage_html_af11a6ebf7ab3c388234cb6d5378439a3"><div class="ttname"><a href="classllvm_1_1AnalysisUsage.html#af11a6ebf7ab3c388234cb6d5378439a3">llvm::AnalysisUsage::setPreservesCFG</a></div><div class="ttdeci">void setPreservesCFG()</div><div class="ttdoc">This function should be called by the pass, iff they do not:</div><div class="ttdef"><b>Definition:</b> <a href="Pass_8cpp_source.html#l00253">Pass.cpp:253</a></div></div>
<div class="ttc" id="aclassllvm_1_1MachineInstr_html_a0363204b5fbab08a46f5a7cd7f376f78"><div class="ttname"><a href="classllvm_1_1MachineInstr.html#a0363204b5fbab08a46f5a7cd7f376f78">llvm::MachineInstr::getOpcode</a></div><div class="ttdeci">unsigned getOpcode() const</div><div class="ttdoc">Returns the opcode of this MachineInstr.</div><div class="ttdef"><b>Definition:</b> <a href="MachineInstr_8h_source.html#l00489">MachineInstr.h:489</a></div></div>
<div class="ttc" id="aAArch64SLSHardening_8cpp_html_ad467c4ab9119043f9b7750ab986be61a"><div class="ttname"><a href="AArch64SLSHardening_8cpp.html#ad467c4ab9119043f9b7750ab986be61a">DL</a></div><div class="ttdeci">MachineBasicBlock MachineBasicBlock::iterator DebugLoc DL</div><div class="ttdef"><b>Definition:</b> <a href="AArch64SLSHardening_8cpp_source.html#l00076">AArch64SLSHardening.cpp:76</a></div></div>
<div class="ttc" id="alib_2Target_2ARM_2README_8txt_html_a1b45f45820a60c09244a87eb59824aec"><div class="ttname"><a href="lib_2Target_2ARM_2README_8txt.html#a1b45f45820a60c09244a87eb59824aec">S</a></div><div class="ttdeci">add sub stmia L5 ldr r0 bl L_printf $stub Instead of a and a wouldn t it be better to do three moves *Return an aggregate type is even return S</div><div class="ttdef"><b>Definition:</b> <a href="lib_2Target_2ARM_2README_8txt_source.html#l00211">README.txt:210</a></div></div>
<div class="ttc" id="aclassllvm_1_1MachineInstr_html_a002fd916e7206e01d512eeb06d405cf0"><div class="ttname"><a href="classllvm_1_1MachineInstr.html#a002fd916e7206e01d512eeb06d405cf0">llvm::MachineInstr::getParent</a></div><div class="ttdeci">const MachineBasicBlock * getParent() const</div><div class="ttdef"><b>Definition:</b> <a href="MachineInstr_8h_source.html#l00286">MachineInstr.h:286</a></div></div>
<div class="ttc" id="aAArch64AdvSIMDScalarPass_8cpp_html_aacd2ab195054a3e6a74bfbb9d5d571c8"><div class="ttname"><a href="AArch64AdvSIMDScalarPass_8cpp.html#aacd2ab195054a3e6a74bfbb9d5d571c8">MRI</a></div><div class="ttdeci">unsigned const MachineRegisterInfo * MRI</div><div class="ttdef"><b>Definition:</b> <a href="AArch64AdvSIMDScalarPass_8cpp_source.html#l00105">AArch64AdvSIMDScalarPass.cpp:105</a></div></div>
<div class="ttc" id="aclassllvm_1_1Register_html"><div class="ttname"><a href="classllvm_1_1Register.html">llvm::Register</a></div><div class="ttdoc">Wrapper class representing virtual and physical registers.</div><div class="ttdef"><b>Definition:</b> <a href="Register_8h_source.html#l00019">Register.h:19</a></div></div>
<div class="ttc" id="anamespacellvm_1_1RISCVII_html_a6f7616aee876ea307c715d2ef9fb041b"><div class="ttname"><a href="namespacellvm_1_1RISCVII.html#a6f7616aee876ea307c715d2ef9fb041b">llvm::RISCVII::doesForceTailAgnostic</a></div><div class="ttdeci">static bool doesForceTailAgnostic(uint64_t TSFlags)</div><div class="ttdef"><b>Definition:</b> <a href="RISCVBaseInfo_8h_source.html#l00119">RISCVBaseInfo.h:119</a></div></div>
<div class="ttc" id="aAArch64SLSHardening_8cpp_html_a5958512eae2979bd2eb383977996a600"><div class="ttname"><a href="AArch64SLSHardening_8cpp.html#a5958512eae2979bd2eb383977996a600">MBB</a></div><div class="ttdeci">MachineBasicBlock &amp; MBB</div><div class="ttdef"><b>Definition:</b> <a href="AArch64SLSHardening_8cpp_source.html#l00074">AArch64SLSHardening.cpp:74</a></div></div>
<div class="ttc" id="anamespacellvm_1_1RISCVVType_html_a12465125c9315bf864c53298cccde08a"><div class="ttname"><a href="namespacellvm_1_1RISCVVType.html#a12465125c9315bf864c53298cccde08a">llvm::RISCVVType::getVLMUL</a></div><div class="ttdeci">static RISCVII::VLMUL getVLMUL(unsigned VType)</div><div class="ttdef"><b>Definition:</b> <a href="RISCVBaseInfo_8h_source.html#l00325">RISCVBaseInfo.h:325</a></div></div>
<div class="ttc" id="anamespacellvm_1_1RISCVVType_html_a7dc0d6840d44bc9348088a786932fc68"><div class="ttname"><a href="namespacellvm_1_1RISCVVType.html#a7dc0d6840d44bc9348088a786932fc68">llvm::RISCVVType::isMaskAgnostic</a></div><div class="ttdeci">static bool isMaskAgnostic(unsigned VType)</div><div class="ttdef"><b>Definition:</b> <a href="RISCVBaseInfo_8h_source.html#l00345">RISCVBaseInfo.h:345</a></div></div>
<div class="ttc" id="anamespacellvm_1_1RISCVVType_html_ad3636219b4d0045029530c6a16c160dc"><div class="ttname"><a href="namespacellvm_1_1RISCVVType.html#ad3636219b4d0045029530c6a16c160dc">llvm::RISCVVType::encodeVTYPE</a></div><div class="ttdeci">unsigned encodeVTYPE(RISCVII::VLMUL VLMUL, unsigned SEW, bool TailAgnostic, bool MaskAgnostic)</div><div class="ttdef"><b>Definition:</b> <a href="RISCVBaseInfo_8cpp_source.html#l00110">RISCVBaseInfo.cpp:110</a></div></div>
<div class="ttc" id="anamespacellvm_1_1RISCVII_html_a7dd086d89a22b8e83abd3e687cd13a35"><div class="ttname"><a href="namespacellvm_1_1RISCVII.html#a7dd086d89a22b8e83abd3e687cd13a35">llvm::RISCVII::getLMul</a></div><div class="ttdeci">static VLMUL getLMul(uint64_t TSFlags)</div><div class="ttdef"><b>Definition:</b> <a href="RISCVBaseInfo_8h_source.html#l00111">RISCVBaseInfo.h:111</a></div></div>
<div class="ttc" id="aclassllvm_1_1MachineBasicBlock_html_acb4d7c02992f3821f3e3432b6c65de49"><div class="ttname"><a href="classllvm_1_1MachineBasicBlock.html#acb4d7c02992f3821f3e3432b6c65de49">llvm::MachineBasicBlock::front</a></div><div class="ttdeci">MachineInstr &amp; front()</div><div class="ttdef"><b>Definition:</b> <a href="MachineBasicBlock_8h_source.html#l00247">MachineBasicBlock.h:247</a></div></div>
<div class="ttc" id="aclassllvm_1_1MachineOperand_html_a76f61c6784df6dc8402a8b9011041926"><div class="ttname"><a href="classllvm_1_1MachineOperand.html#a76f61c6784df6dc8402a8b9011041926">llvm::MachineOperand::isImm</a></div><div class="ttdeci">bool isImm() const</div><div class="ttdoc">isImm - Tests if this is a MO_Immediate operand.</div><div class="ttdef"><b>Definition:</b> <a href="MachineOperand_8h_source.html#l00323">MachineOperand.h:323</a></div></div>
<div class="ttc" id="aRISCVSubtarget_8h_html"><div class="ttname"><a href="RISCVSubtarget_8h.html">RISCVSubtarget.h</a></div></div>
<div class="ttc" id="anamespacellvm_html_a372d99cc1a229ad0e8ef80f12a0cd7cf"><div class="ttname"><a href="namespacellvm.html#a372d99cc1a229ad0e8ef80f12a0cd7cf">llvm::initializeRISCVInsertVSETVLIPass</a></div><div class="ttdeci">void initializeRISCVInsertVSETVLIPass(PassRegistry &amp;)</div></div>
<div class="ttc" id="aRustDemangle_8cpp_html_a103d8cfe62c1651cd70e181746f8a840"><div class="ttname"><a href="RustDemangle_8cpp.html#a103d8cfe62c1651cd70e181746f8a840">isValid</a></div><div class="ttdeci">static bool isValid(const char C)</div><div class="ttdoc">Returns true if C is a valid mangled character: &lt;0-9a-zA-Z_&gt;.</div><div class="ttdef"><b>Definition:</b> <a href="RustDemangle_8cpp_source.html#l00216">RustDemangle.cpp:216</a></div></div>
<div class="ttc" id="anamespacellvm_html_abe63d9ba16515b8df95d8b2a677d39d8"><div class="ttname"><a href="namespacellvm.html#abe63d9ba16515b8df95d8b2a677d39d8">llvm::BuildMI</a></div><div class="ttdeci">MachineInstrBuilder BuildMI(MachineFunction &amp;MF, const DebugLoc &amp;DL, const MCInstrDesc &amp;MCID)</div><div class="ttdoc">Builder interface. Specify how to create the initial instruction itself.</div><div class="ttdef"><b>Definition:</b> <a href="MachineInstrBuilder_8h_source.html#l00328">MachineInstrBuilder.h:328</a></div></div>
<div class="ttc" id="aclassllvm_1_1MachineOperand_html_a682ba82f42f7903d0000ffbb13ea3b57"><div class="ttname"><a href="classllvm_1_1MachineOperand.html#a682ba82f42f7903d0000ffbb13ea3b57">llvm::MachineOperand::setReg</a></div><div class="ttdeci">void setReg(Register Reg)</div><div class="ttdoc">Change the register this operand corresponds to.</div><div class="ttdef"><b>Definition:</b> <a href="MachineOperand_8cpp_source.html#l00055">MachineOperand.cpp:55</a></div></div>
<div class="ttc" id="aAArch64ExpandPseudoInsts_8cpp_html_ad3ece0ac2421637044624c9b01c42466"><div class="ttname"><a href="AArch64ExpandPseudoInsts_8cpp.html#ad3ece0ac2421637044624c9b01c42466">DefMI</a></div><div class="ttdeci">MachineInstrBuilder MachineInstrBuilder &amp; DefMI</div><div class="ttdef"><b>Definition:</b> <a href="AArch64ExpandPseudoInsts_8cpp_source.html#l00103">AArch64ExpandPseudoInsts.cpp:103</a></div></div>
<div class="ttc" id="aclassllvm_1_1MachineInstr_html_a432824f0975bb863478bf4ef3a5df258"><div class="ttname"><a href="classllvm_1_1MachineInstr.html#a432824f0975bb863478bf4ef3a5df258">llvm::MachineInstr::getNumOperands</a></div><div class="ttdeci">unsigned getNumOperands() const</div><div class="ttdoc">Retuns the total number of operands.</div><div class="ttdef"><b>Definition:</b> <a href="MachineInstr_8h_source.html#l00492">MachineInstr.h:492</a></div></div>
<div class="ttc" id="aRISCVInsertVSETVLI_8cpp_html_ad78e062f62e0d6e453941fb4ca843e4d"><div class="ttname"><a href="RISCVInsertVSETVLI_8cpp.html#ad78e062f62e0d6e453941fb4ca843e4d">DEBUG_TYPE</a></div><div class="ttdeci">#define DEBUG_TYPE</div><div class="ttdef"><b>Definition:</b> <a href="RISCVInsertVSETVLI_8cpp_source.html#l00033">RISCVInsertVSETVLI.cpp:33</a></div></div>
<div class="ttc" id="anamespacellvm_1_1RISCVII_html_ab335a6694bd42d4d2f807ec281af1e1c"><div class="ttname"><a href="namespacellvm_1_1RISCVII.html#ab335a6694bd42d4d2f807ec281af1e1c">llvm::RISCVII::VLMUL</a></div><div class="ttdeci">VLMUL</div><div class="ttdef"><b>Definition:</b> <a href="RISCVBaseInfo_8h_source.html#l00089">RISCVBaseInfo.h:89</a></div></div>
<div class="ttc" id="aclassllvm_1_1FunctionPass_html"><div class="ttname"><a href="classllvm_1_1FunctionPass.html">llvm::FunctionPass</a></div><div class="ttdoc">FunctionPass class - This class is used to implement most global optimizations.</div><div class="ttdef"><b>Definition:</b> <a href="Pass_8h_source.html#l00298">Pass.h:298</a></div></div>
<div class="ttc" id="aclassllvm_1_1DebugLoc_html"><div class="ttname"><a href="classllvm_1_1DebugLoc.html">llvm::DebugLoc</a></div><div class="ttdoc">A debug info location.</div><div class="ttdef"><b>Definition:</b> <a href="DebugLoc_8h_source.html#l00033">DebugLoc.h:33</a></div></div>
<div class="ttc" id="astructllvm_1_1cl_1_1desc_html"><div class="ttname"><a href="structllvm_1_1cl_1_1desc.html">llvm::cl::desc</a></div><div class="ttdef"><b>Definition:</b> <a href="CommandLine_8h_source.html#l00414">CommandLine.h:414</a></div></div>
<div class="ttc" id="aELFYAML_8cpp_html_a2a91b094e777dacc21de2a7f35da6805"><div class="ttname"><a href="ELFYAML_8cpp.html#a2a91b094e777dacc21de2a7f35da6805">Other</a></div><div class="ttdeci">Optional&lt; std::vector&lt; StOtherPiece &gt; &gt; Other</div><div class="ttdef"><b>Definition:</b> <a href="ELFYAML_8cpp_source.html#l01172">ELFYAML.cpp:1172</a></div></div>
<div class="ttc" id="anamespacellvm_1_1Intrinsic_html_a80add6b3b1cdaec560907995127adc16"><div class="ttname"><a href="namespacellvm_1_1Intrinsic.html#a80add6b3b1cdaec560907995127adc16">llvm::Intrinsic::ID</a></div><div class="ttdeci">unsigned ID</div><div class="ttdef"><b>Definition:</b> <a href="TargetTransformInfo_8h_source.html#l00038">TargetTransformInfo.h:38</a></div></div>
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated on Tue Feb 8 2022 04:49:04 for LLVM by&#160;<a href="http://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.8.20
</small></address>
</body>
</html>
