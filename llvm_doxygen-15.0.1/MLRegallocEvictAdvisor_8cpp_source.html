<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.17"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>LLVM: lib/CodeGen/MLRegallocEvictAdvisor.cpp Source File</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<script type="text/x-mathjax-config">
  MathJax.Hub.Config({
    extensions: ["tex2jax.js"],
    jax: ["input/TeX","output/HTML-CSS"],
});
</script>
<script type="text/javascript" async="async" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.7/MathJax.js/MathJax.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">LLVM
   &#160;<span id="projectnumber">15.0.1</span>
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.17 -->
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',false,false,'search.php','Search');
});
/* @license-end */</script>
<div id="main-nav"></div>
<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="dir_97aefd0d527b934f1d99a682da8fe6a9.html">lib</a></li><li class="navelem"><a class="el" href="dir_1e8ad0574bd6e387992681ee57691a07.html">CodeGen</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="headertitle">
<div class="title">MLRegallocEvictAdvisor.cpp</div>  </div>
</div><!--header-->
<div class="contents">
<a href="MLRegallocEvictAdvisor_8cpp.html">Go to the documentation of this file.</a><div class="fragment"><div class="line"><a name="l00001"></a><span class="lineno">    1</span>&#160;<span class="comment">//===- MLRegAllocEvictAdvisor.cpp - ML eviction advisor -------------------===//</span></div>
<div class="line"><a name="l00002"></a><span class="lineno">    2</span>&#160;<span class="comment">//</span></div>
<div class="line"><a name="l00003"></a><span class="lineno">    3</span>&#160;<span class="comment">// Part of the LLVM Project, under the Apache License v2.0 with LLVM Exceptions.</span></div>
<div class="line"><a name="l00004"></a><span class="lineno">    4</span>&#160;<span class="comment">// See https://llvm.org/LICENSE.txt for license information.</span></div>
<div class="line"><a name="l00005"></a><span class="lineno">    5</span>&#160;<span class="comment">// SPDX-License-Identifier: Apache-2.0 WITH LLVM-exception</span></div>
<div class="line"><a name="l00006"></a><span class="lineno">    6</span>&#160;<span class="comment">//</span></div>
<div class="line"><a name="l00007"></a><span class="lineno">    7</span>&#160;<span class="comment">//===----------------------------------------------------------------------===//</span></div>
<div class="line"><a name="l00008"></a><span class="lineno">    8</span>&#160;<span class="comment">//</span></div>
<div class="line"><a name="l00009"></a><span class="lineno">    9</span>&#160;<span class="comment">// Implementation of the ML eviction advisor and reward injection pass</span></div>
<div class="line"><a name="l00010"></a><span class="lineno">   10</span>&#160;<span class="comment">//</span></div>
<div class="line"><a name="l00011"></a><span class="lineno">   11</span>&#160;<span class="comment">//===----------------------------------------------------------------------===//</span></div>
<div class="line"><a name="l00012"></a><span class="lineno">   12</span>&#160; </div>
<div class="line"><a name="l00013"></a><span class="lineno">   13</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="AllocationOrder_8h.html">AllocationOrder.h</a>&quot;</span></div>
<div class="line"><a name="l00014"></a><span class="lineno">   14</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="RegAllocEvictionAdvisor_8h.html">RegAllocEvictionAdvisor.h</a>&quot;</span></div>
<div class="line"><a name="l00015"></a><span class="lineno">   15</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="RegAllocGreedy_8h.html">RegAllocGreedy.h</a>&quot;</span></div>
<div class="line"><a name="l00016"></a><span class="lineno">   16</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="MLModelRunner_8h.html">llvm/Analysis/MLModelRunner.h</a>&quot;</span></div>
<div class="line"><a name="l00017"></a><span class="lineno">   17</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="TensorSpec_8h.html">llvm/Analysis/TensorSpec.h</a>&quot;</span></div>
<div class="line"><a name="l00018"></a><span class="lineno">   18</span>&#160;<span class="preprocessor">#if defined(LLVM_HAVE_TF_AOT_REGALLOCEVICTMODEL) || defined(LLVM_HAVE_TF_API)</span></div>
<div class="line"><a name="l00019"></a><span class="lineno">   19</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="ModelUnderTrainingRunner_8h.html">llvm/Analysis/ModelUnderTrainingRunner.h</a>&quot;</span></div>
<div class="line"><a name="l00020"></a><span class="lineno">   20</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="NoInferenceModelRunner_8h.html">llvm/Analysis/NoInferenceModelRunner.h</a>&quot;</span></div>
<div class="line"><a name="l00021"></a><span class="lineno">   21</span>&#160;<span class="preprocessor">#endif</span></div>
<div class="line"><a name="l00022"></a><span class="lineno">   22</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="ReleaseModeModelRunner_8h.html">llvm/Analysis/ReleaseModeModelRunner.h</a>&quot;</span></div>
<div class="line"><a name="l00023"></a><span class="lineno">   23</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="CalcSpillWeights_8h.html">llvm/CodeGen/CalcSpillWeights.h</a>&quot;</span></div>
<div class="line"><a name="l00024"></a><span class="lineno">   24</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="LiveRegMatrix_8h.html">llvm/CodeGen/LiveRegMatrix.h</a>&quot;</span></div>
<div class="line"><a name="l00025"></a><span class="lineno">   25</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="MachineBlockFrequencyInfo_8h.html">llvm/CodeGen/MachineBlockFrequencyInfo.h</a>&quot;</span></div>
<div class="line"><a name="l00026"></a><span class="lineno">   26</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="MachineFunction_8h.html">llvm/CodeGen/MachineFunction.h</a>&quot;</span></div>
<div class="line"><a name="l00027"></a><span class="lineno">   27</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="MachineLoopInfo_8h.html">llvm/CodeGen/MachineLoopInfo.h</a>&quot;</span></div>
<div class="line"><a name="l00028"></a><span class="lineno">   28</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="MachineRegisterInfo_8h.html">llvm/CodeGen/MachineRegisterInfo.h</a>&quot;</span></div>
<div class="line"><a name="l00029"></a><span class="lineno">   29</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="CodeGen_2Passes_8h.html">llvm/CodeGen/Passes.h</a>&quot;</span></div>
<div class="line"><a name="l00030"></a><span class="lineno">   30</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="RegisterClassInfo_8h.html">llvm/CodeGen/RegisterClassInfo.h</a>&quot;</span></div>
<div class="line"><a name="l00031"></a><span class="lineno">   31</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="VirtRegMap_8h.html">llvm/CodeGen/VirtRegMap.h</a>&quot;</span></div>
<div class="line"><a name="l00032"></a><span class="lineno">   32</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="InitializePasses_8h.html">llvm/InitializePasses.h</a>&quot;</span></div>
<div class="line"><a name="l00033"></a><span class="lineno">   33</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="Pass_8h.html">llvm/Pass.h</a>&quot;</span></div>
<div class="line"><a name="l00034"></a><span class="lineno">   34</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="PassRegistry_8h.html">llvm/PassRegistry.h</a>&quot;</span></div>
<div class="line"><a name="l00035"></a><span class="lineno">   35</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="CommandLine_8h.html">llvm/Support/CommandLine.h</a>&quot;</span></div>
<div class="line"><a name="l00036"></a><span class="lineno">   36</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="Support_2ErrorHandling_8h.html">llvm/Support/ErrorHandling.h</a>&quot;</span></div>
<div class="line"><a name="l00037"></a><span class="lineno">   37</span>&#160; </div>
<div class="line"><a name="l00038"></a><span class="lineno">   38</span>&#160;<span class="preprocessor">#include &lt;array&gt;</span></div>
<div class="line"><a name="l00039"></a><span class="lineno">   39</span>&#160;<span class="preprocessor">#include &lt;memory&gt;</span></div>
<div class="line"><a name="l00040"></a><span class="lineno">   40</span>&#160; </div>
<div class="line"><a name="l00041"></a><span class="lineno">   41</span>&#160;<span class="keyword">using namespace </span><a class="code" href="namespacellvm.html">llvm</a>;</div>
<div class="line"><a name="l00042"></a><span class="lineno">   42</span>&#160; </div>
<div class="line"><a name="l00043"></a><span class="lineno"><a class="line" href="MLRegallocEvictAdvisor_8cpp.html#ad78e062f62e0d6e453941fb4ca843e4d">   43</a></span>&#160;<span class="preprocessor">#define DEBUG_TYPE &quot;ml-regalloc&quot;</span></div>
<div class="line"><a name="l00044"></a><span class="lineno">   44</span>&#160; </div>
<div class="line"><a name="l00045"></a><span class="lineno">   45</span>&#160;<span class="comment">// Generated header in release (AOT) mode</span></div>
<div class="line"><a name="l00046"></a><span class="lineno">   46</span>&#160;<span class="preprocessor">#if defined(LLVM_HAVE_TF_AOT_REGALLOCEVICTMODEL)</span></div>
<div class="line"><a name="l00047"></a><span class="lineno">   47</span>&#160;<span class="preprocessor">#include &quot;RegallocEvictModel.h&quot;</span></div>
<div class="line"><a name="l00048"></a><span class="lineno">   48</span>&#160;<span class="keyword">using</span> <a class="code" href="classllvm_1_1NoopSavedModelImpl.html">CompiledModelType</a> = RegallocEvictModel;</div>
<div class="line"><a name="l00049"></a><span class="lineno">   49</span>&#160;<span class="preprocessor">#else</span></div>
<div class="line"><a name="l00050"></a><span class="lineno"><a class="line" href="MLRegallocEvictAdvisor_8cpp.html#a8359d29906d99e83b704f1583b96db94">   50</a></span>&#160;<span class="keyword">using</span> <a class="code" href="classllvm_1_1NoopSavedModelImpl.html">CompiledModelType</a> = <a class="code" href="classllvm_1_1NoopSavedModelImpl.html">NoopSavedModelImpl</a>;</div>
<div class="line"><a name="l00051"></a><span class="lineno">   51</span>&#160;<span class="preprocessor">#endif</span></div>
<div class="line"><a name="l00052"></a><span class="lineno">   52</span>&#160; </div>
<div class="line"><a name="l00053"></a><span class="lineno">   53</span>&#160;<span class="comment">// Options that only make sense in development mode</span></div>
<div class="line"><a name="l00054"></a><span class="lineno">   54</span>&#160;<span class="preprocessor">#ifdef LLVM_HAVE_TF_API</span></div>
<div class="line"><a name="l00055"></a><span class="lineno">   55</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="RegAllocScore_8h.html">RegAllocScore.h</a>&quot;</span></div>
<div class="line"><a name="l00056"></a><span class="lineno">   56</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="TFUtils_8h.html">llvm/Analysis/Utils/TFUtils.h</a>&quot;</span></div>
<div class="line"><a name="l00057"></a><span class="lineno">   57</span>&#160; </div>
<div class="line"><a name="l00058"></a><span class="lineno">   58</span>&#160;<span class="keyword">static</span> <a class="code" href="classllvm_1_1cl_1_1opt.html">cl::opt&lt;std::string&gt;</a> TrainingLog(</div>
<div class="line"><a name="l00059"></a><span class="lineno">   59</span>&#160;    <span class="stringliteral">&quot;regalloc-training-log&quot;</span>, <a class="code" href="namespacellvm_1_1cl.html#a68075925a54790e71ca790e1d4f21a40a263ac008d8d31f13ce460395fc4cf7e6">cl::Hidden</a>,</div>
<div class="line"><a name="l00060"></a><span class="lineno">   60</span>&#160;    <a class="code" href="structllvm_1_1cl_1_1desc.html">cl::desc</a>(<span class="stringliteral">&quot;Training log for the register allocator eviction model&quot;</span>));</div>
<div class="line"><a name="l00061"></a><span class="lineno">   61</span>&#160; </div>
<div class="line"><a name="l00062"></a><span class="lineno">   62</span>&#160;<span class="keyword">static</span> <a class="code" href="classllvm_1_1cl_1_1opt.html">cl::opt&lt;std::string&gt;</a> ModelUnderTraining(</div>
<div class="line"><a name="l00063"></a><span class="lineno">   63</span>&#160;    <span class="stringliteral">&quot;regalloc-model&quot;</span>, <a class="code" href="namespacellvm_1_1cl.html#a68075925a54790e71ca790e1d4f21a40a263ac008d8d31f13ce460395fc4cf7e6">cl::Hidden</a>,</div>
<div class="line"><a name="l00064"></a><span class="lineno">   64</span>&#160;    <a class="code" href="structllvm_1_1cl_1_1desc.html">cl::desc</a>(<span class="stringliteral">&quot;The model being trained for register allocation eviction&quot;</span>));</div>
<div class="line"><a name="l00065"></a><span class="lineno">   65</span>&#160; </div>
<div class="line"><a name="l00066"></a><span class="lineno">   66</span>&#160;<span class="preprocessor">#endif // #ifdef LLVM_HAVE_TF_API</span></div>
<div class="line"><a name="l00067"></a><span class="lineno">   67</span>&#160; </div>
<div class="line"><a name="l00068"></a><span class="lineno">   68</span>&#160;<span class="keyword">extern</span> <a class="code" href="classllvm_1_1cl_1_1opt.html">cl::opt&lt;unsigned&gt;</a> <a class="code" href="MLRegallocEvictAdvisor_8cpp.html#a67992ab5238ce8b5d25addba661f0db0">EvictInterferenceCutoff</a>;</div>
<div class="line"><a name="l00069"></a><span class="lineno">   69</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l00070"></a><span class="lineno">   70</span>&#160;<span class="comment">/// The score injection pass.</span></div>
<div class="line"><a name="l00071"></a><span class="lineno">   71</span>&#160;<span class="comment">/// This pass calculates the score for a function and inserts it in the log, but</span></div>
<div class="line"><a name="l00072"></a><span class="lineno">   72</span>&#160;<span class="comment">/// this happens only in development mode. It&#39;s a no-op otherwise.</span></div>
<div class="line"><a name="l00073"></a><span class="lineno">   73</span>&#160;<span class="comment"></span><span class="keyword">namespace </span><a class="code" href="namespacellvm.html">llvm</a> {</div>
<div class="line"><a name="l00074"></a><span class="lineno"><a class="line" href="classllvm_1_1RegAllocScoring.html">   74</a></span>&#160;<span class="keyword">class </span><a class="code" href="classllvm_1_1RegAllocScoring.html">RegAllocScoring</a> : <span class="keyword">public</span> <a class="code" href="classllvm_1_1MachineFunctionPass.html">MachineFunctionPass</a> {</div>
<div class="line"><a name="l00075"></a><span class="lineno">   75</span>&#160;<span class="keyword">public</span>:</div>
<div class="line"><a name="l00076"></a><span class="lineno"><a class="line" href="classllvm_1_1RegAllocScoring.html#a05529768fbfbeeebe73c58b0e0bc4bf1">   76</a></span>&#160;  <span class="keyword">static</span> <span class="keywordtype">char</span> <a class="code" href="classllvm_1_1RegAllocScoring.html#a05529768fbfbeeebe73c58b0e0bc4bf1">ID</a>;</div>
<div class="line"><a name="l00077"></a><span class="lineno">   77</span>&#160; </div>
<div class="line"><a name="l00078"></a><span class="lineno"><a class="line" href="classllvm_1_1RegAllocScoring.html#a771a12d918fb59d0432509518d4b6e83">   78</a></span>&#160;  <a class="code" href="classllvm_1_1RegAllocScoring.html#a771a12d918fb59d0432509518d4b6e83">RegAllocScoring</a>() : <a class="code" href="classllvm_1_1MachineFunctionPass.html">MachineFunctionPass</a>(<a class="code" href="namespacellvm_1_1CallingConv.html#a188c0836f8c3528401f1c236fd93b977">ID</a>) {</div>
<div class="line"><a name="l00079"></a><span class="lineno">   79</span>&#160;    <a class="code" href="namespacellvm.html#aa8bcaa65e820bf357e48f0059ab7213a">initializeRegAllocScoringPass</a>(*<a class="code" href="classllvm_1_1PassRegistry.html#a05a729900b76c89e808c6c3094921b2f">PassRegistry::getPassRegistry</a>());</div>
<div class="line"><a name="l00080"></a><span class="lineno">   80</span>&#160;  }</div>
<div class="line"><a name="l00081"></a><span class="lineno">   81</span>&#160; </div>
<div class="line"><a name="l00082"></a><span class="lineno">   82</span>&#160;  <a class="code" href="classllvm_1_1RegAllocScoring.html#a8cbbae1b1efd440108596b636053bf37">~RegAllocScoring</a>() <span class="keyword">override</span> = <span class="keywordflow">default</span>;</div>
<div class="line"><a name="l00083"></a><span class="lineno">   83</span>&#160; </div>
<div class="line"><a name="l00084"></a><span class="lineno"><a class="line" href="classllvm_1_1RegAllocScoring.html#a534cb3da17861d1e05bcd75c116dbc5f">   84</a></span>&#160;  <a class="code" href="classllvm_1_1StringRef.html">StringRef</a> <a class="code" href="classllvm_1_1RegAllocScoring.html#a534cb3da17861d1e05bcd75c116dbc5f">getPassName</a>()<span class="keyword"> const override </span>{</div>
<div class="line"><a name="l00085"></a><span class="lineno">   85</span>&#160;    <span class="keywordflow">return</span> <span class="stringliteral">&quot;Register Allocation Pass Scoring&quot;</span>;</div>
<div class="line"><a name="l00086"></a><span class="lineno">   86</span>&#160;  }</div>
<div class="line"><a name="l00087"></a><span class="lineno">   87</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l00088"></a><span class="lineno">   88</span>&#160;<span class="comment">  /// RegAllocReward analysis usage.</span></div>
<div class="line"><a name="l00089"></a><span class="lineno"><a class="line" href="classllvm_1_1RegAllocScoring.html#a53ef8003044b0180da48f67a14d7b499">   89</a></span>&#160;<span class="comment"></span>  <span class="keywordtype">void</span> <a class="code" href="classllvm_1_1RegAllocScoring.html#a53ef8003044b0180da48f67a14d7b499">getAnalysisUsage</a>(<a class="code" href="classllvm_1_1AnalysisUsage.html">AnalysisUsage</a> &amp;AU)<span class="keyword"> const override </span>{</div>
<div class="line"><a name="l00090"></a><span class="lineno">   90</span>&#160;    AU.<a class="code" href="classllvm_1_1AnalysisUsage.html#af22b06a6a4f9df80454071685a0d6a02">setPreservesAll</a>();</div>
<div class="line"><a name="l00091"></a><span class="lineno">   91</span>&#160;    AU.<a class="code" href="classllvm_1_1AnalysisUsage.html#ae5c60fd282ee894c87ea02c3f0fcb6d0">addRequired</a>&lt;<a class="code" href="classllvm_1_1RegAllocEvictionAdvisorAnalysis.html">RegAllocEvictionAdvisorAnalysis</a>&gt;();</div>
<div class="line"><a name="l00092"></a><span class="lineno">   92</span>&#160;    AU.<a class="code" href="classllvm_1_1AnalysisUsage.html#ae5c60fd282ee894c87ea02c3f0fcb6d0">addRequired</a>&lt;<a class="code" href="classllvm_1_1MachineBlockFrequencyInfo.html">MachineBlockFrequencyInfo</a>&gt;();</div>
<div class="line"><a name="l00093"></a><span class="lineno">   93</span>&#160;    <a class="code" href="classllvm_1_1MachineFunctionPass.html#a864fd57b4304ef933b3281d0ef85a88e">MachineFunctionPass::getAnalysisUsage</a>(AU);</div>
<div class="line"><a name="l00094"></a><span class="lineno">   94</span>&#160;  }</div>
<div class="line"><a name="l00095"></a><span class="lineno">   95</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l00096"></a><span class="lineno">   96</span>&#160;<span class="comment">  /// Performs this pass</span></div>
<div class="line"><a name="l00097"></a><span class="lineno">   97</span>&#160;<span class="comment"></span>  <span class="keywordtype">bool</span> <a class="code" href="classllvm_1_1RegAllocScoring.html#a8dd34eac9583bd4bedb69029caa179c5">runOnMachineFunction</a>(<a class="code" href="classllvm_1_1MachineFunction.html">MachineFunction</a> &amp;) <span class="keyword">override</span>;</div>
<div class="line"><a name="l00098"></a><span class="lineno">   98</span>&#160;};</div>
<div class="line"><a name="l00099"></a><span class="lineno">   99</span>&#160; </div>
<div class="line"><a name="l00100"></a><span class="lineno">  100</span>&#160;<span class="keywordtype">char</span> <a class="code" href="classllvm_1_1RegAllocScoring.html#a05529768fbfbeeebe73c58b0e0bc4bf1">RegAllocScoring::ID</a> = 0;</div>
<div class="line"><a name="l00101"></a><span class="lineno"><a class="line" href="namespacellvm.html#a8ebd711519aa7eda8a5dc8415622f6cf">  101</a></span>&#160;<a class="code" href="classllvm_1_1FunctionPass.html">FunctionPass</a> *<a class="code" href="namespacellvm.html#a8ebd711519aa7eda8a5dc8415622f6cf">createRegAllocScoringPass</a>() { <span class="keywordflow">return</span> <span class="keyword">new</span> <a class="code" href="classllvm_1_1RegAllocScoring.html">RegAllocScoring</a>(); }</div>
<div class="line"><a name="l00102"></a><span class="lineno">  102</span>&#160; </div>
<div class="line"><a name="l00103"></a><span class="lineno">  103</span>&#160;} <span class="comment">// namespace llvm</span></div>
<div class="line"><a name="l00104"></a><span class="lineno">  104</span>&#160; </div>
<div class="line"><a name="l00105"></a><span class="lineno"><a class="line" href="MLRegallocEvictAdvisor_8cpp.html#a4035cde766164dedab4604c02b29e045">  105</a></span>&#160;<a class="code" href="MLRegallocEvictAdvisor_8cpp.html#a4035cde766164dedab4604c02b29e045">INITIALIZE_PASS</a>(<a class="code" href="classllvm_1_1RegAllocScoring.html">RegAllocScoring</a>, <span class="stringliteral">&quot;regallocscoringpass&quot;</span>,</div>
<div class="line"><a name="l00106"></a><span class="lineno">  106</span>&#160;                <span class="stringliteral">&quot;Register Allocation Scoring Pass&quot;</span>, <span class="keyword">false</span>, <span class="keyword">false</span>)</div>
<div class="line"><a name="l00107"></a><span class="lineno">  107</span>&#160; </div>
<div class="line"><a name="l00108"></a><span class="lineno">  108</span>&#160;<span class="comment">// ===================================</span></div>
<div class="line"><a name="l00109"></a><span class="lineno">  109</span>&#160;<span class="comment">// Common ML Advisor declarations</span></div>
<div class="line"><a name="l00110"></a><span class="lineno">  110</span>&#160;<span class="comment">// ===================================</span></div>
<div class="line"><a name="l00111"></a><span class="lineno">  111</span>&#160;namespace {</div>
<div class="line"><a name="l00112"></a><span class="lineno">  112</span>&#160;<span class="comment">// This is the maximum number of interfererring ranges. That&#39;s the number of</span></div>
<div class="line"><a name="l00113"></a><span class="lineno">  113</span>&#160;<span class="comment">// distinct AllocationOrder values, which comes from MCRegisterClass::RegsSize.</span></div>
<div class="line"><a name="l00114"></a><span class="lineno">  114</span>&#160;<span class="comment">// For X86, that&#39;s 32.</span></div>
<div class="line"><a name="l00115"></a><span class="lineno">  115</span>&#160;<span class="comment">// TODO: find a way to get this, statically, in a programmatic way.</span></div>
<div class="line"><a name="l00116"></a><span class="lineno">  116</span>&#160;<span class="keyword">static</span> <span class="keyword">const</span> int64_t MaxInterferences = 32;</div>
<div class="line"><a name="l00117"></a><span class="lineno">  117</span>&#160; </div>
<div class="line"><a name="l00118"></a><span class="lineno">  118</span>&#160;<span class="comment">// Logically, we can think of the feature set given to the evaluator as a 2D</span></div>
<div class="line"><a name="l00119"></a><span class="lineno">  119</span>&#160;<span class="comment">// matrix. The rows are the features (see next). The columns correspond to the</span></div>
<div class="line"><a name="l00120"></a><span class="lineno">  120</span>&#160;<span class="comment">// interferences. We treat the candidate virt reg as an &#39;interference&#39;, too, as</span></div>
<div class="line"><a name="l00121"></a><span class="lineno">  121</span>&#160;<span class="comment">// its feature set is the same as that of the interferring ranges. So we&#39;ll have</span></div>
<div class="line"><a name="l00122"></a><span class="lineno">  122</span>&#160;<span class="comment">// MaxInterferences + 1 columns and by convention, we will use the last column</span></div>
<div class="line"><a name="l00123"></a><span class="lineno">  123</span>&#160;<span class="comment">// for the virt reg seeking allocation.</span></div>
<div class="line"><a name="l00124"></a><span class="lineno">  124</span>&#160;<span class="keyword">static</span> <span class="keyword">const</span> int64_t CandidateVirtRegPos = MaxInterferences;</div>
<div class="line"><a name="l00125"></a><span class="lineno">  125</span>&#160;<span class="keyword">static</span> <span class="keyword">const</span> int64_t NumberOfInterferences = CandidateVirtRegPos + 1;</div>
<div class="line"><a name="l00126"></a><span class="lineno">  126</span>&#160; </div>
<div class="line"><a name="l00127"></a><span class="lineno">  127</span>&#160;<span class="comment">// Most features are as described above, so we&#39;ll reuse this vector in defining</span></div>
<div class="line"><a name="l00128"></a><span class="lineno">  128</span>&#160;<span class="comment">// them.</span></div>
<div class="line"><a name="l00129"></a><span class="lineno">  129</span>&#160;<span class="keyword">static</span> <span class="keyword">const</span> std::vector&lt;int64_t&gt; PerLiveRangeShape{1, NumberOfInterferences};</div>
<div class="line"><a name="l00130"></a><span class="lineno">  130</span>&#160; </div>
<div class="line"><a name="l00131"></a><span class="lineno">  131</span>&#160;<span class="comment">// --------------</span></div>
<div class="line"><a name="l00132"></a><span class="lineno">  132</span>&#160;<span class="comment">// Features table</span></div>
<div class="line"><a name="l00133"></a><span class="lineno">  133</span>&#160;<span class="comment">// --------------</span></div>
<div class="line"><a name="l00134"></a><span class="lineno">  134</span>&#160;<span class="comment">// For each interfering live range (incl. the candidate) we collect a number of</span></div>
<div class="line"><a name="l00135"></a><span class="lineno">  135</span>&#160;<span class="comment">// features. However, because the features are of different types (and because</span></div>
<div class="line"><a name="l00136"></a><span class="lineno">  136</span>&#160;<span class="comment">// of ML best practices), we organize the tensors per feature, not per</span></div>
<div class="line"><a name="l00137"></a><span class="lineno">  137</span>&#160;<span class="comment">// candidate. Each such tensor has a scalar value corresponding to the</span></div>
<div class="line"><a name="l00138"></a><span class="lineno">  138</span>&#160;<span class="comment">// interferring live range at that position, in the order in AllocationOrder.</span></div>
<div class="line"><a name="l00139"></a><span class="lineno">  139</span>&#160;<span class="comment">// The last position corresponds to the virt reg seeking allocation.</span></div>
<div class="line"><a name="l00140"></a><span class="lineno">  140</span>&#160;<span class="comment">// Exception to all that is the progression feature, which is just a scalar (see</span></div>
<div class="line"><a name="l00141"></a><span class="lineno">  141</span>&#160;<span class="comment">// its documentation for details).</span></div>
<div class="line"><a name="l00142"></a><span class="lineno">  142</span>&#160;<span class="comment">// Note on naming: the &quot;_by_max&quot; are normalized using the largest value of that</span></div>
<div class="line"><a name="l00143"></a><span class="lineno">  143</span>&#160;<span class="comment">// tensor, as observed in the current decision making stage (i.e. for the</span></div>
<div class="line"><a name="l00144"></a><span class="lineno">  144</span>&#160;<span class="comment">// current call to the advisor&#39;s tryFindEvictionCandidate)</span></div>
<div class="line"><a name="l00145"></a><span class="lineno">  145</span>&#160;<span class="comment">//</span></div>
<div class="line"><a name="l00146"></a><span class="lineno">  146</span>&#160;<span class="comment">// The feature list format: type, name, shape, documentation.</span></div>
<div class="line"><a name="l00147"></a><span class="lineno">  147</span>&#160;<span class="comment">// Note: we can really just use int64 and float, hence the modeling of some</span></div>
<div class="line"><a name="l00148"></a><span class="lineno">  148</span>&#160;<span class="comment">// bools as int64 values.</span></div>
<div class="line"><a name="l00149"></a><span class="lineno">  149</span>&#160;<span class="preprocessor">#define RA_EVICT_FEATURES_LIST(M)                                              \</span></div>
<div class="line"><a name="l00150"></a><span class="lineno">  150</span>&#160;<span class="preprocessor">  M(int64_t, mask, PerLiveRangeShape,                                          \</span></div>
<div class="line"><a name="l00151"></a><span class="lineno">  151</span>&#160;<span class="preprocessor">    &quot;boolean values, 0 for unavailable candidates (i.e. if a position is 0, &quot;  \</span></div>
<div class="line"><a name="l00152"></a><span class="lineno">  152</span>&#160;<span class="preprocessor">    &quot;it &quot;                                                                      \</span></div>
<div class="line"><a name="l00153"></a><span class="lineno">  153</span>&#160;<span class="preprocessor">    &quot;can&#39;t be evicted)&quot;)                                                       \</span></div>
<div class="line"><a name="l00154"></a><span class="lineno">  154</span>&#160;<span class="preprocessor">  M(int64_t, is_free, PerLiveRangeShape,                                       \</span></div>
<div class="line"><a name="l00155"></a><span class="lineno">  155</span>&#160;<span class="preprocessor">    &quot;boolean values, 1 if this phys reg is actually free (no interferences)&quot;)  \</span></div>
<div class="line"><a name="l00156"></a><span class="lineno">  156</span>&#160;<span class="preprocessor">  M(float, nr_urgent, PerLiveRangeShape,                                       \</span></div>
<div class="line"><a name="l00157"></a><span class="lineno">  157</span>&#160;<span class="preprocessor">    &quot;number of &#39;urgent&#39; intervals, normalized. Urgent are those that are OK &quot;  \</span></div>
<div class="line"><a name="l00158"></a><span class="lineno">  158</span>&#160;<span class="preprocessor">    &quot;to break cascades&quot;)                                                       \</span></div>
<div class="line"><a name="l00159"></a><span class="lineno">  159</span>&#160;<span class="preprocessor">  M(float, nr_broken_hints, PerLiveRangeShape,                                 \</span></div>
<div class="line"><a name="l00160"></a><span class="lineno">  160</span>&#160;<span class="preprocessor">    &quot;if this position were evicted, how many broken hints would there be&quot;)     \</span></div>
<div class="line"><a name="l00161"></a><span class="lineno">  161</span>&#160;<span class="preprocessor">  M(int64_t, is_hint, PerLiveRangeShape,                                       \</span></div>
<div class="line"><a name="l00162"></a><span class="lineno">  162</span>&#160;<span class="preprocessor">    &quot;is this a preferred phys reg for the candidate&quot;)                          \</span></div>
<div class="line"><a name="l00163"></a><span class="lineno">  163</span>&#160;<span class="preprocessor">  M(int64_t, is_local, PerLiveRangeShape,                                      \</span></div>
<div class="line"><a name="l00164"></a><span class="lineno">  164</span>&#160;<span class="preprocessor">    &quot;is this live range local to a basic block&quot;)                               \</span></div>
<div class="line"><a name="l00165"></a><span class="lineno">  165</span>&#160;<span class="preprocessor">  M(float, nr_rematerializable, PerLiveRangeShape,                             \</span></div>
<div class="line"><a name="l00166"></a><span class="lineno">  166</span>&#160;<span class="preprocessor">    &quot;nr rematerializable ranges&quot;)                                              \</span></div>
<div class="line"><a name="l00167"></a><span class="lineno">  167</span>&#160;<span class="preprocessor">  M(float, nr_defs_and_uses, PerLiveRangeShape,                                \</span></div>
<div class="line"><a name="l00168"></a><span class="lineno">  168</span>&#160;<span class="preprocessor">    &quot;bb freq - weighed nr defs and uses&quot;)                                      \</span></div>
<div class="line"><a name="l00169"></a><span class="lineno">  169</span>&#160;<span class="preprocessor">  M(float, weighed_reads_by_max, PerLiveRangeShape,                            \</span></div>
<div class="line"><a name="l00170"></a><span class="lineno">  170</span>&#160;<span class="preprocessor">    &quot;bb freq - weighed nr of reads, normalized&quot;)                               \</span></div>
<div class="line"><a name="l00171"></a><span class="lineno">  171</span>&#160;<span class="preprocessor">  M(float, weighed_writes_by_max, PerLiveRangeShape,                           \</span></div>
<div class="line"><a name="l00172"></a><span class="lineno">  172</span>&#160;<span class="preprocessor">    &quot;bb feq - weighed nr of writes, normalized&quot;)                               \</span></div>
<div class="line"><a name="l00173"></a><span class="lineno">  173</span>&#160;<span class="preprocessor">  M(float, weighed_read_writes_by_max, PerLiveRangeShape,                      \</span></div>
<div class="line"><a name="l00174"></a><span class="lineno">  174</span>&#160;<span class="preprocessor">    &quot;bb freq - weighed nr of uses that are both read and writes, normalized&quot;)  \</span></div>
<div class="line"><a name="l00175"></a><span class="lineno">  175</span>&#160;<span class="preprocessor">  M(float, weighed_indvars_by_max, PerLiveRangeShape,                          \</span></div>
<div class="line"><a name="l00176"></a><span class="lineno">  176</span>&#160;<span class="preprocessor">    &quot;bb freq - weighed nr of uses that are indvars, normalized&quot;)               \</span></div>
<div class="line"><a name="l00177"></a><span class="lineno">  177</span>&#160;<span class="preprocessor">  M(float, hint_weights_by_max, PerLiveRangeShape,                             \</span></div>
<div class="line"><a name="l00178"></a><span class="lineno">  178</span>&#160;<span class="preprocessor">    &quot;bb freq - weighed nr of uses that are hints, normalized&quot;)                 \</span></div>
<div class="line"><a name="l00179"></a><span class="lineno">  179</span>&#160;<span class="preprocessor">  M(float, start_bb_freq_by_max, PerLiveRangeShape,                            \</span></div>
<div class="line"><a name="l00180"></a><span class="lineno">  180</span>&#160;<span class="preprocessor">    &quot;the freq in the start block, normalized&quot;)                                 \</span></div>
<div class="line"><a name="l00181"></a><span class="lineno">  181</span>&#160;<span class="preprocessor">  M(float, end_bb_freq_by_max, PerLiveRangeShape,                              \</span></div>
<div class="line"><a name="l00182"></a><span class="lineno">  182</span>&#160;<span class="preprocessor">    &quot;freq of end block, normalized&quot;)                                           \</span></div>
<div class="line"><a name="l00183"></a><span class="lineno">  183</span>&#160;<span class="preprocessor">  M(float, hottest_bb_freq_by_max, PerLiveRangeShape,                          \</span></div>
<div class="line"><a name="l00184"></a><span class="lineno">  184</span>&#160;<span class="preprocessor">    &quot;hottest BB freq, normalized&quot;)                                             \</span></div>
<div class="line"><a name="l00185"></a><span class="lineno">  185</span>&#160;<span class="preprocessor">  M(float, liverange_size, PerLiveRangeShape,                                  \</span></div>
<div class="line"><a name="l00186"></a><span class="lineno">  186</span>&#160;<span class="preprocessor">    &quot;size (instr index diff) of the LR&quot;)                                       \</span></div>
<div class="line"><a name="l00187"></a><span class="lineno">  187</span>&#160;<span class="preprocessor">  M(float, use_def_density, PerLiveRangeShape,                                 \</span></div>
<div class="line"><a name="l00188"></a><span class="lineno">  188</span>&#160;<span class="preprocessor">    &quot;the max weight, as computed by the manual heuristic&quot;)                     \</span></div>
<div class="line"><a name="l00189"></a><span class="lineno">  189</span>&#160;<span class="preprocessor">  M(int64_t, max_stage, PerLiveRangeShape,                                     \</span></div>
<div class="line"><a name="l00190"></a><span class="lineno">  190</span>&#160;<span class="preprocessor">    &quot;largest stage of an interval in this LR&quot;)                                 \</span></div>
<div class="line"><a name="l00191"></a><span class="lineno">  191</span>&#160;<span class="preprocessor">  M(int64_t, min_stage, PerLiveRangeShape,                                     \</span></div>
<div class="line"><a name="l00192"></a><span class="lineno">  192</span>&#160;<span class="preprocessor">    &quot;lowest stage of an interval in this LR&quot;)                                  \</span></div>
<div class="line"><a name="l00193"></a><span class="lineno">  193</span>&#160;<span class="preprocessor">  M(float, progress, {1}, &quot;ratio of current queue size to initial size&quot;)</span></div>
<div class="line"><a name="l00194"></a><span class="lineno">  194</span>&#160; </div>
<div class="line"><a name="l00195"></a><span class="lineno">  195</span>&#160;<span class="comment">// The model learns to pick one of the mask == 1 interferences. This is the name</span></div>
<div class="line"><a name="l00196"></a><span class="lineno">  196</span>&#160;<span class="comment">// of the output tensor.</span></div>
<div class="line"><a name="l00197"></a><span class="lineno">  197</span>&#160;<span class="comment">// The contract with the model is that the output will be guaranteed to be to a</span></div>
<div class="line"><a name="l00198"></a><span class="lineno">  198</span>&#160;<span class="comment">// mask == 1 position.</span></div>
<div class="line"><a name="l00199"></a><span class="lineno">  199</span>&#160;<span class="comment">// Using a macro here to avoid &#39;not used&#39; warnings (and keep cond compilation to</span></div>
<div class="line"><a name="l00200"></a><span class="lineno">  200</span>&#160;<span class="comment">// a minimum)</span></div>
<div class="line"><a name="l00201"></a><span class="lineno">  201</span>&#160;<span class="preprocessor">#define DecisionName &quot;index_to_evict&quot;</span></div>
<div class="line"><a name="l00202"></a><span class="lineno">  202</span>&#160; </div>
<div class="line"><a name="l00203"></a><span class="lineno">  203</span>&#160;<span class="comment">// Named features index.</span></div>
<div class="line"><a name="l00204"></a><span class="lineno">  204</span>&#160;<span class="keyword">enum</span> FeatureIDs {</div>
<div class="line"><a name="l00205"></a><span class="lineno">  205</span>&#160;<span class="preprocessor">#define _FEATURE_IDX(_, name, __, ___) name,</span></div>
<div class="line"><a name="l00206"></a><span class="lineno">  206</span>&#160;  <a class="code" href="MLRegallocEvictAdvisor_8cpp.html#a515fc759914affb744a8051ad8893317">RA_EVICT_FEATURES_LIST</a>(<a class="code" href="MLRegallocEvictAdvisor_8cpp.html#a31d7c26a433d132cca4ea4faa86e0869">_FEATURE_IDX</a>)</div>
<div class="line"><a name="l00207"></a><span class="lineno">  207</span>&#160;<span class="preprocessor">#undef _FEATURE_IDX</span></div>
<div class="line"><a name="l00208"></a><span class="lineno">  208</span>&#160;      FeatureCount</div>
<div class="line"><a name="l00209"></a><span class="lineno">  209</span>&#160;};</div>
<div class="line"><a name="l00210"></a><span class="lineno">  210</span>&#160; </div>
<div class="line"><a name="l00211"></a><span class="lineno">  211</span>&#160;<span class="comment">// The ML advisor will typically have a sparse input to the evaluator, because</span></div>
<div class="line"><a name="l00212"></a><span class="lineno">  212</span>&#160;<span class="comment">// various phys regs won&#39;t be available. It&#39;s easier (maintenance-wise) to</span></div>
<div class="line"><a name="l00213"></a><span class="lineno">  213</span>&#160;<span class="comment">// bulk-reset the state of the evaluator each time we are about to use it again.</span></div>
<div class="line"><a name="l00214"></a><span class="lineno">  214</span>&#160;<span class="keyword">template</span> &lt;<span class="keyword">typename</span> T&gt; <span class="keywordtype">size_t</span> getTotalSize(<span class="keyword">const</span> std::vector&lt;int64_t&gt; &amp;Shape) {</div>
<div class="line"><a name="l00215"></a><span class="lineno">  215</span>&#160;  <span class="keywordtype">size_t</span> <a class="code" href="namespacellvm_1_1MipsISD.html#a422daf9aa810935178671306b651d69ba366e1eac31eeb1a1892d62ccfc0c8cf8">Ret</a> = <span class="keyword">sizeof</span>(<a class="code" href="classT.html">T</a>);</div>
<div class="line"><a name="l00216"></a><span class="lineno">  216</span>&#160;  <span class="keywordflow">for</span> (<span class="keyword">const</span> <span class="keyword">auto</span> V : Shape)</div>
<div class="line"><a name="l00217"></a><span class="lineno">  217</span>&#160;    <a class="code" href="namespacellvm_1_1MipsISD.html#a422daf9aa810935178671306b651d69ba366e1eac31eeb1a1892d62ccfc0c8cf8">Ret</a> *= V;</div>
<div class="line"><a name="l00218"></a><span class="lineno">  218</span>&#160;  <span class="keywordflow">return</span> <a class="code" href="namespacellvm_1_1MipsISD.html#a422daf9aa810935178671306b651d69ba366e1eac31eeb1a1892d62ccfc0c8cf8">Ret</a>;</div>
<div class="line"><a name="l00219"></a><span class="lineno">  219</span>&#160;}</div>
<div class="line"><a name="l00220"></a><span class="lineno">  220</span>&#160; </div>
<div class="line"><a name="l00221"></a><span class="lineno">  221</span>&#160;<span class="keywordtype">void</span> resetInputs(<a class="code" href="classllvm_1_1MLModelRunner.html">MLModelRunner</a> &amp;Runner) {</div>
<div class="line"><a name="l00222"></a><span class="lineno">  222</span>&#160;<span class="preprocessor">#define _RESET(TYPE, NAME, SHAPE, __)                                          \</span></div>
<div class="line"><a name="l00223"></a><span class="lineno">  223</span>&#160;<span class="preprocessor">  std::memset(Runner.getTensorUntyped(FeatureIDs::NAME), 0,                    \</span></div>
<div class="line"><a name="l00224"></a><span class="lineno">  224</span>&#160;<span class="preprocessor">              getTotalSize&lt;TYPE&gt;(SHAPE));</span></div>
<div class="line"><a name="l00225"></a><span class="lineno">  225</span>&#160;  <a class="code" href="MLRegallocEvictAdvisor_8cpp.html#a515fc759914affb744a8051ad8893317">RA_EVICT_FEATURES_LIST</a>(<a class="code" href="MLRegallocEvictAdvisor_8cpp.html#a95a7ac0b4d52374987b65476b4097bc5">_RESET</a>)</div>
<div class="line"><a name="l00226"></a><span class="lineno">  226</span>&#160;<span class="preprocessor">#undef _RESET</span></div>
<div class="line"><a name="l00227"></a><span class="lineno">  227</span>&#160;}</div>
<div class="line"><a name="l00228"></a><span class="lineno">  228</span>&#160; </div>
<div class="line"><a name="l00229"></a><span class="lineno">  229</span>&#160;<span class="comment">// Per-live interval components that get aggregated into the feature values that</span></div>
<div class="line"><a name="l00230"></a><span class="lineno">  230</span>&#160;<span class="comment">// will be passed to the evaluator.</span></div>
<div class="line"><a name="l00231"></a><span class="lineno">  231</span>&#160;<span class="keyword">struct </span>LIFeatureComponents {</div>
<div class="line"><a name="l00232"></a><span class="lineno">  232</span>&#160;  <span class="keywordtype">double</span> R = 0;</div>
<div class="line"><a name="l00233"></a><span class="lineno">  233</span>&#160;  <span class="keywordtype">double</span> <a class="code" href="namespacellvm_1_1RISCVFenceField.html#a147be9e9780c1e33363ea572d4c7b25fa05c79fbfc58d9dd2851c467a1ef166bf">W</a> = 0;</div>
<div class="line"><a name="l00234"></a><span class="lineno">  234</span>&#160;  <span class="keywordtype">double</span> RW = 0;</div>
<div class="line"><a name="l00235"></a><span class="lineno">  235</span>&#160;  <span class="keywordtype">double</span> IndVarUpdates = 0;</div>
<div class="line"><a name="l00236"></a><span class="lineno">  236</span>&#160;  <span class="keywordtype">double</span> HintWeights = 0.0;</div>
<div class="line"><a name="l00237"></a><span class="lineno">  237</span>&#160;  int64_t NrDefsAndUses = 0;</div>
<div class="line"><a name="l00238"></a><span class="lineno">  238</span>&#160;  <span class="keywordtype">float</span> HottestBlockFreq = 0.0;</div>
<div class="line"><a name="l00239"></a><span class="lineno">  239</span>&#160;  <span class="keywordtype">bool</span> IsRemat = <span class="keyword">false</span>;</div>
<div class="line"><a name="l00240"></a><span class="lineno">  240</span>&#160;};</div>
<div class="line"><a name="l00241"></a><span class="lineno">  241</span>&#160; </div>
<div class="line"><a name="l00242"></a><span class="lineno">  242</span>&#160;<span class="keyword">using</span> CandidateRegList =</div>
<div class="line"><a name="l00243"></a><span class="lineno">  243</span>&#160;    std::array&lt;std::pair&lt;MCRegister, bool&gt;, NumberOfInterferences&gt;;</div>
<div class="line"><a name="l00244"></a><span class="lineno">  244</span>&#160;<span class="keyword">using</span> FeaturesListNormalizer = std::array&lt;float, FeatureIDs::FeatureCount&gt;;</div>
<div class="line"><a name="l00245"></a><span class="lineno">  245</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l00246"></a><span class="lineno">  246</span>&#160;<span class="comment">/// The ML evictor (commonalities between release and development mode)</span></div>
<div class="line"><a name="l00247"></a><span class="lineno">  247</span>&#160;<span class="comment"></span><span class="keyword">class </span>MLEvictAdvisor : <span class="keyword">public</span> <a class="code" href="classllvm_1_1RegAllocEvictionAdvisor.html">RegAllocEvictionAdvisor</a> {</div>
<div class="line"><a name="l00248"></a><span class="lineno">  248</span>&#160;<span class="keyword">public</span>:</div>
<div class="line"><a name="l00249"></a><span class="lineno">  249</span>&#160;  MLEvictAdvisor(<span class="keyword">const</span> <a class="code" href="classllvm_1_1MachineFunction.html">MachineFunction</a> &amp;MF, <span class="keyword">const</span> <a class="code" href="classllvm_1_1RAGreedy.html">RAGreedy</a> &amp;<a class="code" href="SIOptimizeExecMaskingPreRA_8cpp.html#a3e47bdb3e296b00df96eff7896fa57bf">RA</a>,</div>
<div class="line"><a name="l00250"></a><span class="lineno">  250</span>&#160;                 <a class="code" href="classllvm_1_1MLModelRunner.html">MLModelRunner</a> *Runner, <span class="keyword">const</span> <a class="code" href="classllvm_1_1MachineBlockFrequencyInfo.html">MachineBlockFrequencyInfo</a> &amp;MBFI,</div>
<div class="line"><a name="l00251"></a><span class="lineno">  251</span>&#160;                 <span class="keyword">const</span> <a class="code" href="classllvm_1_1MachineLoopInfo.html">MachineLoopInfo</a> &amp;<a class="code" href="HexagonHardwareLoops_8cpp.html#ada7c1594a393ede3ce32602d64d7ddb2">Loops</a>);</div>
<div class="line"><a name="l00252"></a><span class="lineno">  252</span>&#160; </div>
<div class="line"><a name="l00253"></a><span class="lineno">  253</span>&#160;<span class="keyword">protected</span>:</div>
<div class="line"><a name="l00254"></a><span class="lineno">  254</span>&#160;  <span class="keyword">const</span> <a class="code" href="classllvm_1_1RegAllocEvictionAdvisor.html">RegAllocEvictionAdvisor</a> &amp;getDefaultAdvisor()<span class="keyword"> const </span>{</div>
<div class="line"><a name="l00255"></a><span class="lineno">  255</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">static_cast&lt;</span><span class="keyword">const </span><a class="code" href="classllvm_1_1RegAllocEvictionAdvisor.html">RegAllocEvictionAdvisor</a> &amp;<span class="keyword">&gt;</span>(DefaultAdvisor);</div>
<div class="line"><a name="l00256"></a><span class="lineno">  256</span>&#160;  }</div>
<div class="line"><a name="l00257"></a><span class="lineno">  257</span>&#160; </div>
<div class="line"><a name="l00258"></a><span class="lineno">  258</span>&#160;  <span class="comment">// The assumption is that if the Runner could not be constructed, we emit-ed</span></div>
<div class="line"><a name="l00259"></a><span class="lineno">  259</span>&#160;  <span class="comment">// error, and we shouldn&#39;t be asking for it here.</span></div>
<div class="line"><a name="l00260"></a><span class="lineno">  260</span>&#160;  <span class="keyword">const</span> <a class="code" href="classllvm_1_1MLModelRunner.html">MLModelRunner</a> &amp;getRunner()<span class="keyword"> const </span>{ <span class="keywordflow">return</span> *Runner; }</div>
<div class="line"><a name="l00261"></a><span class="lineno">  261</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l00262"></a><span class="lineno">  262</span>&#160;<span class="comment">  /// This just calls Evaluate on the Runner, but in the development mode case,</span></div>
<div class="line"><a name="l00263"></a><span class="lineno">  263</span>&#160;<span class="comment">  /// if we&#39;re just capturing the log of the default advisor, it needs to call</span></div>
<div class="line"><a name="l00264"></a><span class="lineno">  264</span>&#160;<span class="comment">  /// the latter instead, so we need to pass all the necessary parameters for</span></div>
<div class="line"><a name="l00265"></a><span class="lineno">  265</span>&#160;<span class="comment">  /// it. In the development case, it will also log.</span></div>
<div class="line"><a name="l00266"></a><span class="lineno">  266</span>&#160;<span class="comment"></span>  <span class="keyword">virtual</span> int64_t</div>
<div class="line"><a name="l00267"></a><span class="lineno">  267</span>&#160;  tryFindEvictionCandidatePosition(<span class="keyword">const</span> <a class="code" href="classllvm_1_1LiveInterval.html">LiveInterval</a> &amp;VirtReg,</div>
<div class="line"><a name="l00268"></a><span class="lineno">  268</span>&#160;                                   <span class="keyword">const</span> <a class="code" href="classllvm_1_1AllocationOrder.html">AllocationOrder</a> &amp;Order,</div>
<div class="line"><a name="l00269"></a><span class="lineno">  269</span>&#160;                                   <span class="keywordtype">unsigned</span> OrderLimit, uint8_t CostPerUseLimit,</div>
<div class="line"><a name="l00270"></a><span class="lineno">  270</span>&#160;                                   <span class="keyword">const</span> <a class="code" href="classllvm_1_1SmallSet.html">SmallVirtRegSet</a> &amp;FixedRegisters) <span class="keyword">const</span>;</div>
<div class="line"><a name="l00271"></a><span class="lineno">  271</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l00272"></a><span class="lineno">  272</span>&#160;<span class="comment">  /// Load the features of the given VirtReg (allocated or not) at column Pos,</span></div>
<div class="line"><a name="l00273"></a><span class="lineno">  273</span>&#160;<span class="comment">  /// but if  that can&#39;t be evicted, return false instead.</span></div>
<div class="line"><a name="l00274"></a><span class="lineno">  274</span>&#160;<span class="comment"></span>  <span class="keywordtype">bool</span></div>
<div class="line"><a name="l00275"></a><span class="lineno">  275</span>&#160;  loadInterferenceFeatures(<span class="keyword">const</span> <a class="code" href="classllvm_1_1LiveInterval.html">LiveInterval</a> &amp;VirtReg, <a class="code" href="classllvm_1_1MCRegister.html">MCRegister</a> PhysReg,</div>
<div class="line"><a name="l00276"></a><span class="lineno">  276</span>&#160;                           <span class="keywordtype">bool</span> IsHint, <span class="keyword">const</span> <a class="code" href="classllvm_1_1SmallSet.html">SmallVirtRegSet</a> &amp;FixedRegisters,</div>
<div class="line"><a name="l00277"></a><span class="lineno">  277</span>&#160;                           std::array&lt;float, FeatureIDs::FeatureCount&gt; &amp;Largest,</div>
<div class="line"><a name="l00278"></a><span class="lineno">  278</span>&#160;                           <span class="keywordtype">size_t</span> Pos) <span class="keyword">const</span>;</div>
<div class="line"><a name="l00279"></a><span class="lineno">  279</span>&#160; </div>
<div class="line"><a name="l00280"></a><span class="lineno">  280</span>&#160;<span class="keyword">private</span>:</div>
<div class="line"><a name="l00281"></a><span class="lineno">  281</span>&#160;  <span class="keyword">static</span> <span class="keywordtype">float</span> getInitialQueueSize(<span class="keyword">const</span> <a class="code" href="classllvm_1_1MachineFunction.html">MachineFunction</a> &amp;MF);</div>
<div class="line"><a name="l00282"></a><span class="lineno">  282</span>&#160; </div>
<div class="line"><a name="l00283"></a><span class="lineno">  283</span>&#160;  <a class="code" href="classllvm_1_1MCRegister.html">MCRegister</a> tryFindEvictionCandidate(</div>
<div class="line"><a name="l00284"></a><span class="lineno">  284</span>&#160;      <span class="keyword">const</span> <a class="code" href="classllvm_1_1LiveInterval.html">LiveInterval</a> &amp;VirtReg, <span class="keyword">const</span> <a class="code" href="classllvm_1_1AllocationOrder.html">AllocationOrder</a> &amp;Order,</div>
<div class="line"><a name="l00285"></a><span class="lineno">  285</span>&#160;      uint8_t CostPerUseLimit,</div>
<div class="line"><a name="l00286"></a><span class="lineno">  286</span>&#160;      <span class="keyword">const</span> <a class="code" href="classllvm_1_1SmallSet.html">SmallVirtRegSet</a> &amp;FixedRegisters) <span class="keyword">const override</span>;</div>
<div class="line"><a name="l00287"></a><span class="lineno">  287</span>&#160; </div>
<div class="line"><a name="l00288"></a><span class="lineno">  288</span>&#160;  <span class="keywordtype">void</span> extractFeatures(<span class="keyword">const</span> <a class="code" href="classllvm_1_1SmallVectorImpl.html">SmallVectorImpl&lt;const LiveInterval *&gt;</a> &amp;Intervals,</div>
<div class="line"><a name="l00289"></a><span class="lineno">  289</span>&#160;                       std::array&lt;float, FeatureIDs::FeatureCount&gt; &amp;Largest,</div>
<div class="line"><a name="l00290"></a><span class="lineno">  290</span>&#160;                       <span class="keywordtype">size_t</span> Pos, int64_t IsHint, int64_t LocalIntfsCount,</div>
<div class="line"><a name="l00291"></a><span class="lineno">  291</span>&#160;                       <span class="keywordtype">float</span> NrUrgent) <span class="keyword">const</span>;</div>
<div class="line"><a name="l00292"></a><span class="lineno">  292</span>&#160; </div>
<div class="line"><a name="l00293"></a><span class="lineno">  293</span>&#160;  <span class="comment">// Point-in-time: we didn&#39;t learn this, so we always delegate to the default.</span></div>
<div class="line"><a name="l00294"></a><span class="lineno">  294</span>&#160;  <span class="keywordtype">bool</span> canEvictHintInterference(</div>
<div class="line"><a name="l00295"></a><span class="lineno">  295</span>&#160;      <span class="keyword">const</span> <a class="code" href="classllvm_1_1LiveInterval.html">LiveInterval</a> &amp;VirtReg, <a class="code" href="classllvm_1_1MCRegister.html">MCRegister</a> PhysReg,</div>
<div class="line"><a name="l00296"></a><span class="lineno">  296</span>&#160;      <span class="keyword">const</span> <a class="code" href="classllvm_1_1SmallSet.html">SmallVirtRegSet</a> &amp;FixedRegisters)<span class="keyword"> const override </span>{</div>
<div class="line"><a name="l00297"></a><span class="lineno">  297</span>&#160;    <span class="keywordflow">return</span> getDefaultAdvisor().canEvictHintInterference(VirtReg, PhysReg,</div>
<div class="line"><a name="l00298"></a><span class="lineno">  298</span>&#160;                                                        FixedRegisters);</div>
<div class="line"><a name="l00299"></a><span class="lineno">  299</span>&#160;  }</div>
<div class="line"><a name="l00300"></a><span class="lineno">  300</span>&#160; </div>
<div class="line"><a name="l00301"></a><span class="lineno">  301</span>&#160;  <span class="keyword">const</span> LIFeatureComponents &amp;</div>
<div class="line"><a name="l00302"></a><span class="lineno">  302</span>&#160;  getLIFeatureComponents(<span class="keyword">const</span> <a class="code" href="classllvm_1_1LiveInterval.html">LiveInterval</a> &amp;LI) <span class="keyword">const</span>;</div>
<div class="line"><a name="l00303"></a><span class="lineno">  303</span>&#160; </div>
<div class="line"><a name="l00304"></a><span class="lineno">  304</span>&#160;  <span class="comment">// Hold on to a default advisor for:</span></div>
<div class="line"><a name="l00305"></a><span class="lineno">  305</span>&#160;  <span class="comment">// 1) the implementation of canEvictHintInterference, because we didn&#39;t learn</span></div>
<div class="line"><a name="l00306"></a><span class="lineno">  306</span>&#160;  <span class="comment">// that nuance yet;</span></div>
<div class="line"><a name="l00307"></a><span class="lineno">  307</span>&#160;  <span class="comment">// 2) for bootstrapping (logging) in the development mode case.</span></div>
<div class="line"><a name="l00308"></a><span class="lineno">  308</span>&#160;  <span class="keyword">const</span> <a class="code" href="classllvm_1_1DefaultEvictionAdvisor.html">DefaultEvictionAdvisor</a> DefaultAdvisor;</div>
<div class="line"><a name="l00309"></a><span class="lineno">  309</span>&#160;  <a class="code" href="classllvm_1_1MLModelRunner.html">MLModelRunner</a> *<span class="keyword">const</span> Runner;</div>
<div class="line"><a name="l00310"></a><span class="lineno">  310</span>&#160;  <span class="keyword">const</span> <a class="code" href="classllvm_1_1MachineBlockFrequencyInfo.html">MachineBlockFrequencyInfo</a> &amp;MBFI;</div>
<div class="line"><a name="l00311"></a><span class="lineno">  311</span>&#160;  <span class="keyword">const</span> <a class="code" href="classllvm_1_1MachineLoopInfo.html">MachineLoopInfo</a> &amp;<a class="code" href="HexagonHardwareLoops_8cpp.html#ada7c1594a393ede3ce32602d64d7ddb2">Loops</a>;</div>
<div class="line"><a name="l00312"></a><span class="lineno">  312</span>&#160; </div>
<div class="line"><a name="l00313"></a><span class="lineno">  313</span>&#160;  <span class="comment">// Indices of those features we don&#39;t want to normalize.</span></div>
<div class="line"><a name="l00314"></a><span class="lineno">  314</span>&#160;  <span class="comment">// This could be static and shared, but its initialization is non-trivial.</span></div>
<div class="line"><a name="l00315"></a><span class="lineno">  315</span>&#160;  std::bitset&lt;FeatureIDs::FeatureCount&gt; DoNotNormalize;</div>
<div class="line"><a name="l00316"></a><span class="lineno">  316</span>&#160;  <span class="keyword">const</span> <span class="keywordtype">float</span> InitialQSize;</div>
<div class="line"><a name="l00317"></a><span class="lineno">  317</span>&#160; </div>
<div class="line"><a name="l00318"></a><span class="lineno">  318</span>&#160;  <span class="keyword">using</span> RegID = unsigned;</div>
<div class="line"><a name="l00319"></a><span class="lineno">  319</span>&#160;  <span class="keyword">mutable</span> <a class="code" href="classllvm_1_1DenseMap.html">DenseMap&lt;RegID, LIFeatureComponents&gt;</a> CachedFeatures;</div>
<div class="line"><a name="l00320"></a><span class="lineno">  320</span>&#160;};</div>
<div class="line"><a name="l00321"></a><span class="lineno">  321</span>&#160; </div>
<div class="line"><a name="l00322"></a><span class="lineno">  322</span>&#160;<span class="preprocessor">#define _DECL_FEATURES(type, name, shape, _)                                   \</span></div>
<div class="line"><a name="l00323"></a><span class="lineno">  323</span>&#160;<span class="preprocessor">  TensorSpec::createSpec&lt;type&gt;(#name, shape),</span></div>
<div class="line"><a name="l00324"></a><span class="lineno">  324</span>&#160; </div>
<div class="line"><a name="l00325"></a><span class="lineno">  325</span>&#160;<span class="keyword">static</span> <span class="keyword">const</span> std::vector&lt;TensorSpec&gt; InputFeatures{</div>
<div class="line"><a name="l00326"></a><span class="lineno">  326</span>&#160;    {<a class="code" href="MLRegallocEvictAdvisor_8cpp.html#a515fc759914affb744a8051ad8893317">RA_EVICT_FEATURES_LIST</a>(<a class="code" href="MLRegallocEvictAdvisor_8cpp.html#af5207224175d6dbe81f39fbae5ab0375">_DECL_FEATURES</a>)},</div>
<div class="line"><a name="l00327"></a><span class="lineno">  327</span>&#160;};</div>
<div class="line"><a name="l00328"></a><span class="lineno">  328</span>&#160;<span class="preprocessor">#undef _DECL_FEATURES</span></div>
<div class="line"><a name="l00329"></a><span class="lineno">  329</span>&#160;<span class="comment">// ===================================</span></div>
<div class="line"><a name="l00330"></a><span class="lineno">  330</span>&#160;<span class="comment">// Release (AOT) - specifics</span></div>
<div class="line"><a name="l00331"></a><span class="lineno">  331</span>&#160;<span class="comment">// ===================================</span></div>
<div class="line"><a name="l00332"></a><span class="lineno">  332</span>&#160;<span class="keyword">class </span>ReleaseModeEvictionAdvisorAnalysis final</div>
<div class="line"><a name="l00333"></a><span class="lineno">  333</span>&#160;    : <span class="keyword">public</span> <a class="code" href="classllvm_1_1RegAllocEvictionAdvisorAnalysis.html">RegAllocEvictionAdvisorAnalysis</a> {</div>
<div class="line"><a name="l00334"></a><span class="lineno">  334</span>&#160;<span class="keyword">public</span>:</div>
<div class="line"><a name="l00335"></a><span class="lineno">  335</span>&#160;  ReleaseModeEvictionAdvisorAnalysis()</div>
<div class="line"><a name="l00336"></a><span class="lineno">  336</span>&#160;      : <a class="code" href="classllvm_1_1RegAllocEvictionAdvisorAnalysis.html">RegAllocEvictionAdvisorAnalysis</a>(AdvisorMode::Release) {}</div>
<div class="line"><a name="l00337"></a><span class="lineno">  337</span>&#160;  <span class="comment">// support for isa&lt;&gt; and dyn_cast.</span></div>
<div class="line"><a name="l00338"></a><span class="lineno">  338</span>&#160;  <span class="keyword">static</span> <span class="keywordtype">bool</span> classof(<span class="keyword">const</span> <a class="code" href="classllvm_1_1RegAllocEvictionAdvisorAnalysis.html">RegAllocEvictionAdvisorAnalysis</a> *R) {</div>
<div class="line"><a name="l00339"></a><span class="lineno">  339</span>&#160;    <span class="keywordflow">return</span> R-&gt;getAdvisorMode() == AdvisorMode::Release;</div>
<div class="line"><a name="l00340"></a><span class="lineno">  340</span>&#160;  }</div>
<div class="line"><a name="l00341"></a><span class="lineno">  341</span>&#160; </div>
<div class="line"><a name="l00342"></a><span class="lineno">  342</span>&#160;<span class="keyword">private</span>:</div>
<div class="line"><a name="l00343"></a><span class="lineno">  343</span>&#160;  <span class="keywordtype">void</span> getAnalysisUsage(<a class="code" href="classllvm_1_1AnalysisUsage.html">AnalysisUsage</a> &amp;AU)<span class="keyword"> const override </span>{</div>
<div class="line"><a name="l00344"></a><span class="lineno">  344</span>&#160;    AU.<a class="code" href="classllvm_1_1AnalysisUsage.html#ae5c60fd282ee894c87ea02c3f0fcb6d0">addRequired</a>&lt;<a class="code" href="classllvm_1_1MachineBlockFrequencyInfo.html">MachineBlockFrequencyInfo</a>&gt;();</div>
<div class="line"><a name="l00345"></a><span class="lineno">  345</span>&#160;    AU.<a class="code" href="classllvm_1_1AnalysisUsage.html#ae5c60fd282ee894c87ea02c3f0fcb6d0">addRequired</a>&lt;<a class="code" href="classllvm_1_1MachineLoopInfo.html">MachineLoopInfo</a>&gt;();</div>
<div class="line"><a name="l00346"></a><span class="lineno">  346</span>&#160;    <a class="code" href="classllvm_1_1RegAllocEvictionAdvisorAnalysis.html#a005390fe88a690353da791886d6c1dcd">RegAllocEvictionAdvisorAnalysis::getAnalysisUsage</a>(AU);</div>
<div class="line"><a name="l00347"></a><span class="lineno">  347</span>&#160;  }</div>
<div class="line"><a name="l00348"></a><span class="lineno">  348</span>&#160; </div>
<div class="line"><a name="l00349"></a><span class="lineno">  349</span>&#160;  std::unique_ptr&lt;RegAllocEvictionAdvisor&gt;</div>
<div class="line"><a name="l00350"></a><span class="lineno">  350</span>&#160;  getAdvisor(<span class="keyword">const</span> <a class="code" href="classllvm_1_1MachineFunction.html">MachineFunction</a> &amp;MF, <span class="keyword">const</span> <a class="code" href="classllvm_1_1RAGreedy.html">RAGreedy</a> &amp;<a class="code" href="SIOptimizeExecMaskingPreRA_8cpp.html#a3e47bdb3e296b00df96eff7896fa57bf">RA</a>)<span class="keyword"> override </span>{</div>
<div class="line"><a name="l00351"></a><span class="lineno">  351</span>&#160;    <span class="keywordflow">if</span> (!Runner)</div>
<div class="line"><a name="l00352"></a><span class="lineno">  352</span>&#160;      Runner = std::make_unique&lt;ReleaseModeModelRunner&lt;CompiledModelType&gt;&gt;(</div>
<div class="line"><a name="l00353"></a><span class="lineno">  353</span>&#160;          MF.<a class="code" href="classllvm_1_1MachineFunction.html#a4b21394c138cc5ae719510bb529ee099">getFunction</a>().<a class="code" href="classllvm_1_1Function.html#a9fffac2512fe651f0d5e37e27f5bd51c">getContext</a>(), InputFeatures, <a class="code" href="namespacellvm.html#a74754af06fcdbb71b2ddbfaa75ed09c5">DecisionName</a>);</div>
<div class="line"><a name="l00354"></a><span class="lineno">  354</span>&#160;    <span class="keywordflow">return</span> std::make_unique&lt;MLEvictAdvisor&gt;(</div>
<div class="line"><a name="l00355"></a><span class="lineno">  355</span>&#160;        MF, <a class="code" href="SIOptimizeExecMaskingPreRA_8cpp.html#a3e47bdb3e296b00df96eff7896fa57bf">RA</a>, Runner.get(), getAnalysis&lt;MachineBlockFrequencyInfo&gt;(),</div>
<div class="line"><a name="l00356"></a><span class="lineno">  356</span>&#160;        getAnalysis&lt;MachineLoopInfo&gt;());</div>
<div class="line"><a name="l00357"></a><span class="lineno">  357</span>&#160;  }</div>
<div class="line"><a name="l00358"></a><span class="lineno">  358</span>&#160;  std::unique_ptr&lt;ReleaseModeModelRunner&lt;CompiledModelType&gt;&gt; Runner;</div>
<div class="line"><a name="l00359"></a><span class="lineno">  359</span>&#160;};</div>
<div class="line"><a name="l00360"></a><span class="lineno">  360</span>&#160; </div>
<div class="line"><a name="l00361"></a><span class="lineno">  361</span>&#160;<span class="comment">// ===================================</span></div>
<div class="line"><a name="l00362"></a><span class="lineno">  362</span>&#160;<span class="comment">// Development mode-specifics</span></div>
<div class="line"><a name="l00363"></a><span class="lineno">  363</span>&#160;<span class="comment">// ===================================</span></div>
<div class="line"><a name="l00364"></a><span class="lineno">  364</span>&#160;<span class="comment">//</span></div>
<div class="line"><a name="l00365"></a><span class="lineno">  365</span>&#160;<span class="comment">// Features we log</span></div>
<div class="line"><a name="l00366"></a><span class="lineno">  366</span>&#160;<span class="preprocessor">#ifdef LLVM_HAVE_TF_API</span></div>
<div class="line"><a name="l00367"></a><span class="lineno">  367</span>&#160;<span class="keyword">static</span> <span class="keyword">const</span> <a class="code" href="classllvm_1_1TensorSpec.html">TensorSpec</a> Output =</div>
<div class="line"><a name="l00368"></a><span class="lineno">  368</span>&#160;    TensorSpec::createSpec&lt;int64_t&gt;(<a class="code" href="namespacellvm.html#a74754af06fcdbb71b2ddbfaa75ed09c5">DecisionName</a>, {1});</div>
<div class="line"><a name="l00369"></a><span class="lineno">  369</span>&#160;<span class="keyword">static</span> <span class="keyword">const</span> <a class="code" href="classllvm_1_1TensorSpec.html">TensorSpec</a> Reward = TensorSpec::createSpec&lt;float&gt;(<span class="stringliteral">&quot;reward&quot;</span>, {1});</div>
<div class="line"><a name="l00370"></a><span class="lineno">  370</span>&#160; </div>
<div class="line"><a name="l00371"></a><span class="lineno">  371</span>&#160;<span class="comment">// Features we bind on the model. The tensor names have a prefix, and we also</span></div>
<div class="line"><a name="l00372"></a><span class="lineno">  372</span>&#160;<span class="comment">// need to include some tensors that are expected to be present by the training</span></div>
<div class="line"><a name="l00373"></a><span class="lineno">  373</span>&#160;<span class="comment">// algo.</span></div>
<div class="line"><a name="l00374"></a><span class="lineno">  374</span>&#160;<span class="comment">// TODO: can we just get rid of these?</span></div>
<div class="line"><a name="l00375"></a><span class="lineno">  375</span>&#160;<span class="preprocessor">#define _DECL_TRAIN_FEATURES(type, name, shape, _)                             \</span></div>
<div class="line"><a name="l00376"></a><span class="lineno">  376</span>&#160;<span class="preprocessor">  TensorSpec::createSpec&lt;type&gt;(std::string(&quot;action_&quot;) + #name, shape),</span></div>
<div class="line"><a name="l00377"></a><span class="lineno">  377</span>&#160; </div>
<div class="line"><a name="l00378"></a><span class="lineno">  378</span>&#160;<span class="keyword">static</span> <span class="keyword">const</span> std::vector&lt;TensorSpec&gt; TrainingInputFeatures{</div>
<div class="line"><a name="l00379"></a><span class="lineno">  379</span>&#160;    {<a class="code" href="MLRegallocEvictAdvisor_8cpp.html#a515fc759914affb744a8051ad8893317">RA_EVICT_FEATURES_LIST</a>(_DECL_TRAIN_FEATURES)</div>
<div class="line"><a name="l00380"></a><span class="lineno">  380</span>&#160;         TensorSpec::createSpec&lt;float&gt;(<span class="stringliteral">&quot;action_discount&quot;</span>, {1}),</div>
<div class="line"><a name="l00381"></a><span class="lineno">  381</span>&#160;     TensorSpec::createSpec&lt;int32_t&gt;(<span class="stringliteral">&quot;action_step_type&quot;</span>, {1}),</div>
<div class="line"><a name="l00382"></a><span class="lineno">  382</span>&#160;     TensorSpec::createSpec&lt;float&gt;(<span class="stringliteral">&quot;action_reward&quot;</span>, {1})}};</div>
<div class="line"><a name="l00383"></a><span class="lineno">  383</span>&#160;<span class="preprocessor">#undef _DECL_TRAIN_FEATURES</span></div>
<div class="line"><a name="l00384"></a><span class="lineno">  384</span>&#160; </div>
<div class="line"><a name="l00385"></a><span class="lineno">  385</span>&#160;<span class="keyword">class </span>DevelopmentModeEvictAdvisor : <span class="keyword">public</span> MLEvictAdvisor {</div>
<div class="line"><a name="l00386"></a><span class="lineno">  386</span>&#160;<span class="keyword">public</span>:</div>
<div class="line"><a name="l00387"></a><span class="lineno">  387</span>&#160;  DevelopmentModeEvictAdvisor(<span class="keyword">const</span> <a class="code" href="classllvm_1_1MachineFunction.html">MachineFunction</a> &amp;MF, <span class="keyword">const</span> <a class="code" href="classllvm_1_1RAGreedy.html">RAGreedy</a> &amp;<a class="code" href="SIOptimizeExecMaskingPreRA_8cpp.html#a3e47bdb3e296b00df96eff7896fa57bf">RA</a>,</div>
<div class="line"><a name="l00388"></a><span class="lineno">  388</span>&#160;                              <a class="code" href="classllvm_1_1MLModelRunner.html">MLModelRunner</a> *Runner,</div>
<div class="line"><a name="l00389"></a><span class="lineno">  389</span>&#160;                              <span class="keyword">const</span> <a class="code" href="classllvm_1_1MachineBlockFrequencyInfo.html">MachineBlockFrequencyInfo</a> &amp;MBFI,</div>
<div class="line"><a name="l00390"></a><span class="lineno">  390</span>&#160;                              <span class="keyword">const</span> <a class="code" href="classllvm_1_1MachineLoopInfo.html">MachineLoopInfo</a> &amp;<a class="code" href="HexagonHardwareLoops_8cpp.html#ada7c1594a393ede3ce32602d64d7ddb2">Loops</a>, Logger *Log)</div>
<div class="line"><a name="l00391"></a><span class="lineno">  391</span>&#160;      : MLEvictAdvisor(MF, <a class="code" href="SIOptimizeExecMaskingPreRA_8cpp.html#a3e47bdb3e296b00df96eff7896fa57bf">RA</a>, Runner, MBFI, <a class="code" href="HexagonHardwareLoops_8cpp.html#ada7c1594a393ede3ce32602d64d7ddb2">Loops</a>), Log(Log) {}</div>
<div class="line"><a name="l00392"></a><span class="lineno">  392</span>&#160; </div>
<div class="line"><a name="l00393"></a><span class="lineno">  393</span>&#160;<span class="keyword">private</span>:</div>
<div class="line"><a name="l00394"></a><span class="lineno">  394</span>&#160;  int64_t tryFindEvictionCandidatePosition(</div>
<div class="line"><a name="l00395"></a><span class="lineno">  395</span>&#160;      <span class="keyword">const</span> <a class="code" href="classllvm_1_1LiveInterval.html">LiveInterval</a> &amp;VirtReg, <span class="keyword">const</span> <a class="code" href="classllvm_1_1AllocationOrder.html">AllocationOrder</a> &amp;Order,</div>
<div class="line"><a name="l00396"></a><span class="lineno">  396</span>&#160;      <span class="keywordtype">unsigned</span> OrderLimit, uint8_t CostPerUseLimit,</div>
<div class="line"><a name="l00397"></a><span class="lineno">  397</span>&#160;      <span class="keyword">const</span> <a class="code" href="classllvm_1_1SmallSet.html">SmallVirtRegSet</a> &amp;FixedRegisters) <span class="keyword">const override</span>;</div>
<div class="line"><a name="l00398"></a><span class="lineno">  398</span>&#160; </div>
<div class="line"><a name="l00399"></a><span class="lineno">  399</span>&#160;  Logger *<span class="keyword">const</span> Log;</div>
<div class="line"><a name="l00400"></a><span class="lineno">  400</span>&#160;};</div>
<div class="line"><a name="l00401"></a><span class="lineno">  401</span>&#160; </div>
<div class="line"><a name="l00402"></a><span class="lineno">  402</span>&#160;<span class="keyword">class </span>DevelopmentModeEvictionAdvisorAnalysis final</div>
<div class="line"><a name="l00403"></a><span class="lineno">  403</span>&#160;    : <span class="keyword">public</span> <a class="code" href="classllvm_1_1RegAllocEvictionAdvisorAnalysis.html">RegAllocEvictionAdvisorAnalysis</a> {</div>
<div class="line"><a name="l00404"></a><span class="lineno">  404</span>&#160;<span class="keyword">public</span>:</div>
<div class="line"><a name="l00405"></a><span class="lineno">  405</span>&#160;  DevelopmentModeEvictionAdvisorAnalysis()</div>
<div class="line"><a name="l00406"></a><span class="lineno">  406</span>&#160;      : <a class="code" href="classllvm_1_1RegAllocEvictionAdvisorAnalysis.html">RegAllocEvictionAdvisorAnalysis</a>(AdvisorMode::Development) {}</div>
<div class="line"><a name="l00407"></a><span class="lineno">  407</span>&#160;  <span class="comment">// support for isa&lt;&gt; and dyn_cast.</span></div>
<div class="line"><a name="l00408"></a><span class="lineno">  408</span>&#160;  <span class="keyword">static</span> <span class="keywordtype">bool</span> classof(<span class="keyword">const</span> <a class="code" href="classllvm_1_1RegAllocEvictionAdvisorAnalysis.html">RegAllocEvictionAdvisorAnalysis</a> *R) {</div>
<div class="line"><a name="l00409"></a><span class="lineno">  409</span>&#160;    <span class="keywordflow">return</span> R-&gt;getAdvisorMode() == AdvisorMode::Development;</div>
<div class="line"><a name="l00410"></a><span class="lineno">  410</span>&#160;  }</div>
<div class="line"><a name="l00411"></a><span class="lineno">  411</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l00412"></a><span class="lineno">  412</span>&#160;<span class="comment">  /// get the logger for the given function, or nullptr if we didn&#39;t collect</span></div>
<div class="line"><a name="l00413"></a><span class="lineno">  413</span>&#160;<span class="comment">  /// one. This is used to inject the score by the RegAllocScoring pass.</span></div>
<div class="line"><a name="l00414"></a><span class="lineno">  414</span>&#160;<span class="comment"></span>  Logger *getLogger(<span class="keyword">const</span> <a class="code" href="classllvm_1_1MachineFunction.html">MachineFunction</a> &amp;MF)<span class="keyword"> const </span>{</div>
<div class="line"><a name="l00415"></a><span class="lineno">  415</span>&#160;    <span class="keyword">auto</span> <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a> = LogMap.find(MF.<a class="code" href="classllvm_1_1MachineFunction.html#a3d142c9e7c066059e15232c56dec9e2e">getName</a>());</div>
<div class="line"><a name="l00416"></a><span class="lineno">  416</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a> == LogMap.end())</div>
<div class="line"><a name="l00417"></a><span class="lineno">  417</span>&#160;      <span class="keywordflow">return</span> <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l00418"></a><span class="lineno">  418</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>-&gt;second.get();</div>
<div class="line"><a name="l00419"></a><span class="lineno">  419</span>&#160;  }</div>
<div class="line"><a name="l00420"></a><span class="lineno">  420</span>&#160; </div>
<div class="line"><a name="l00421"></a><span class="lineno">  421</span>&#160;<span class="keyword">private</span>:</div>
<div class="line"><a name="l00422"></a><span class="lineno">  422</span>&#160;  <span class="keywordtype">void</span> getAnalysisUsage(<a class="code" href="classllvm_1_1AnalysisUsage.html">AnalysisUsage</a> &amp;AU)<span class="keyword"> const override </span>{</div>
<div class="line"><a name="l00423"></a><span class="lineno">  423</span>&#160;    AU.<a class="code" href="classllvm_1_1AnalysisUsage.html#ae5c60fd282ee894c87ea02c3f0fcb6d0">addRequired</a>&lt;<a class="code" href="classllvm_1_1MachineBlockFrequencyInfo.html">MachineBlockFrequencyInfo</a>&gt;();</div>
<div class="line"><a name="l00424"></a><span class="lineno">  424</span>&#160;    AU.<a class="code" href="classllvm_1_1AnalysisUsage.html#ae5c60fd282ee894c87ea02c3f0fcb6d0">addRequired</a>&lt;<a class="code" href="classllvm_1_1MachineLoopInfo.html">MachineLoopInfo</a>&gt;();</div>
<div class="line"><a name="l00425"></a><span class="lineno">  425</span>&#160;    <a class="code" href="classllvm_1_1RegAllocEvictionAdvisorAnalysis.html#a005390fe88a690353da791886d6c1dcd">RegAllocEvictionAdvisorAnalysis::getAnalysisUsage</a>(AU);</div>
<div class="line"><a name="l00426"></a><span class="lineno">  426</span>&#160;  }</div>
<div class="line"><a name="l00427"></a><span class="lineno">  427</span>&#160; </div>
<div class="line"><a name="l00428"></a><span class="lineno">  428</span>&#160;  <span class="comment">// Save all the logs (when requested).</span></div>
<div class="line"><a name="l00429"></a><span class="lineno">  429</span>&#160;  <span class="keywordtype">bool</span> doFinalization(<a class="code" href="classllvm_1_1Module.html">Module</a> &amp;<a class="code" href="lib_2Target_2X86_2README_8txt.html#ac88fe1d3a61b056a4f64fbbb156a62ff">M</a>)<span class="keyword"> override </span>{</div>
<div class="line"><a name="l00430"></a><span class="lineno">  430</span>&#160;    <span class="keywordflow">if</span> (TrainingLog.empty())</div>
<div class="line"><a name="l00431"></a><span class="lineno">  431</span>&#160;      <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l00432"></a><span class="lineno">  432</span>&#160;    std::error_code EC;</div>
<div class="line"><a name="l00433"></a><span class="lineno">  433</span>&#160;    <span class="keyword">auto</span> OS = std::make_unique&lt;raw_fd_ostream&gt;(TrainingLog, EC);</div>
<div class="line"><a name="l00434"></a><span class="lineno">  434</span>&#160;    <span class="keywordflow">if</span> (EC) {</div>
<div class="line"><a name="l00435"></a><span class="lineno">  435</span>&#160;      <a class="code" href="lib_2Target_2X86_2README_8txt.html#ac88fe1d3a61b056a4f64fbbb156a62ff">M</a>.getContext().emitError(EC.message() + <span class="stringliteral">&quot;:&quot;</span> + TrainingLog);</div>
<div class="line"><a name="l00436"></a><span class="lineno">  436</span>&#160;      <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l00437"></a><span class="lineno">  437</span>&#160;    }</div>
<div class="line"><a name="l00438"></a><span class="lineno">  438</span>&#160;    Logger::flushLogs(*OS, LogMap);</div>
<div class="line"><a name="l00439"></a><span class="lineno">  439</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l00440"></a><span class="lineno">  440</span>&#160;  }</div>
<div class="line"><a name="l00441"></a><span class="lineno">  441</span>&#160; </div>
<div class="line"><a name="l00442"></a><span class="lineno">  442</span>&#160;  std::unique_ptr&lt;RegAllocEvictionAdvisor&gt;</div>
<div class="line"><a name="l00443"></a><span class="lineno">  443</span>&#160;  getAdvisor(<span class="keyword">const</span> <a class="code" href="classllvm_1_1MachineFunction.html">MachineFunction</a> &amp;MF, <span class="keyword">const</span> <a class="code" href="classllvm_1_1RAGreedy.html">RAGreedy</a> &amp;<a class="code" href="SIOptimizeExecMaskingPreRA_8cpp.html#a3e47bdb3e296b00df96eff7896fa57bf">RA</a>)<span class="keyword"> override </span>{</div>
<div class="line"><a name="l00444"></a><span class="lineno">  444</span>&#160;    <a class="code" href="classllvm_1_1LLVMContext.html">LLVMContext</a> &amp;Ctx = MF.<a class="code" href="classllvm_1_1MachineFunction.html#a4b21394c138cc5ae719510bb529ee099">getFunction</a>().<a class="code" href="classllvm_1_1Function.html#a9fffac2512fe651f0d5e37e27f5bd51c">getContext</a>();</div>
<div class="line"><a name="l00445"></a><span class="lineno">  445</span>&#160;    <span class="keywordflow">if</span> (ModelUnderTraining.empty() &amp;&amp; TrainingLog.empty()) {</div>
<div class="line"><a name="l00446"></a><span class="lineno">  446</span>&#160;      Ctx.<a class="code" href="classllvm_1_1LLVMContext.html#af9b0580a6e16e16bd3379f73e92a616d">emitError</a>(<span class="stringliteral">&quot;Regalloc development mode should be requested with at &quot;</span></div>
<div class="line"><a name="l00447"></a><span class="lineno">  447</span>&#160;                    <span class="stringliteral">&quot;least logging enabled and/or a training model&quot;</span>);</div>
<div class="line"><a name="l00448"></a><span class="lineno">  448</span>&#160;      <span class="keywordflow">return</span> <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l00449"></a><span class="lineno">  449</span>&#160;    }</div>
<div class="line"><a name="l00450"></a><span class="lineno">  450</span>&#160;    <span class="keywordflow">if</span> (!Runner) {</div>
<div class="line"><a name="l00451"></a><span class="lineno">  451</span>&#160;      <span class="keywordflow">if</span> (ModelUnderTraining.empty())</div>
<div class="line"><a name="l00452"></a><span class="lineno">  452</span>&#160;        Runner = std::make_unique&lt;NoInferenceModelRunner&gt;(Ctx, InputFeatures);</div>
<div class="line"><a name="l00453"></a><span class="lineno">  453</span>&#160;      <span class="keywordflow">else</span></div>
<div class="line"><a name="l00454"></a><span class="lineno">  454</span>&#160;        Runner = ModelUnderTrainingRunner::createAndEnsureValid(</div>
<div class="line"><a name="l00455"></a><span class="lineno">  455</span>&#160;            Ctx, ModelUnderTraining, <a class="code" href="namespacellvm.html#a74754af06fcdbb71b2ddbfaa75ed09c5">DecisionName</a>, TrainingInputFeatures);</div>
<div class="line"><a name="l00456"></a><span class="lineno">  456</span>&#160;      <span class="keywordflow">if</span> (!Runner) {</div>
<div class="line"><a name="l00457"></a><span class="lineno">  457</span>&#160;        Ctx.<a class="code" href="classllvm_1_1LLVMContext.html#af9b0580a6e16e16bd3379f73e92a616d">emitError</a>(<span class="stringliteral">&quot;Regalloc: could not set up the model runner&quot;</span>);</div>
<div class="line"><a name="l00458"></a><span class="lineno">  458</span>&#160;        <span class="keywordflow">return</span> <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l00459"></a><span class="lineno">  459</span>&#160;      }</div>
<div class="line"><a name="l00460"></a><span class="lineno">  460</span>&#160;    }</div>
<div class="line"><a name="l00461"></a><span class="lineno">  461</span>&#160; </div>
<div class="line"><a name="l00462"></a><span class="lineno">  462</span>&#160;    Logger *Log = <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l00463"></a><span class="lineno">  463</span>&#160;    <span class="keywordflow">if</span> (!TrainingLog.empty()) {</div>
<div class="line"><a name="l00464"></a><span class="lineno">  464</span>&#160;      std::vector&lt;LoggedFeatureSpec&gt; LFS;</div>
<div class="line"><a name="l00465"></a><span class="lineno">  465</span>&#160;      <span class="keywordflow">for</span> (<span class="keyword">const</span> <span class="keyword">auto</span> &amp;<a class="code" href="namespacellvm_1_1X86AS.html#a0901ebc21b46890383634a2386a75c60a5b3a782ccae295a254e2794ad30ad07f">FS</a> : InputFeatures)</div>
<div class="line"><a name="l00466"></a><span class="lineno">  466</span>&#160;        LFS.push_back({<a class="code" href="namespacellvm_1_1X86AS.html#a0901ebc21b46890383634a2386a75c60a5b3a782ccae295a254e2794ad30ad07f">FS</a>, <a class="code" href="namespacellvm.html#a6497a581a4f7152729c29a368ac7d7be">None</a>});</div>
<div class="line"><a name="l00467"></a><span class="lineno">  467</span>&#160;      <span class="keywordflow">if</span> (<span class="keyword">auto</span> *MUTR = dyn_cast&lt;ModelUnderTrainingRunner&gt;(Runner.get()))</div>
<div class="line"><a name="l00468"></a><span class="lineno">  468</span>&#160;        <span class="keywordflow">if</span> (MUTR-&gt;outputLoggedFeatureSpecs().size() &gt; 1)</div>
<div class="line"><a name="l00469"></a><span class="lineno">  469</span>&#160;          <a class="code" href="namespacellvm.html#a39d3d23a084c4544ee5903203db10e8a">append_range</a>(LFS, <a class="code" href="namespacellvm.html#a02981de53fb6ffd384d39addc4d25f37">drop_begin</a>(MUTR-&gt;outputLoggedFeatureSpecs()));</div>
<div class="line"><a name="l00470"></a><span class="lineno">  470</span>&#160;      <span class="comment">// We always log the output; in particular, if we&#39;re not evaluating, we</span></div>
<div class="line"><a name="l00471"></a><span class="lineno">  471</span>&#160;      <span class="comment">// don&#39;t have an output spec json file. That&#39;s why we handle the</span></div>
<div class="line"><a name="l00472"></a><span class="lineno">  472</span>&#160;      <span class="comment">// &#39;normal&#39; output separately.</span></div>
<div class="line"><a name="l00473"></a><span class="lineno">  473</span>&#160;      LFS.push_back({Output, <a class="code" href="namespacellvm.html#a6497a581a4f7152729c29a368ac7d7be">None</a>});</div>
<div class="line"><a name="l00474"></a><span class="lineno">  474</span>&#160;      <span class="keyword">auto</span> <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a> = LogMap.insert(std::make_pair(</div>
<div class="line"><a name="l00475"></a><span class="lineno">  475</span>&#160;          MF.<a class="code" href="classllvm_1_1MachineFunction.html#a4b21394c138cc5ae719510bb529ee099">getFunction</a>().<a class="code" href="classllvm_1_1Value.html#adb5c319f5905c1d3ca9eb5df546388c5">getName</a>(),</div>
<div class="line"><a name="l00476"></a><span class="lineno">  476</span>&#160;          std::make_unique&lt;Logger&gt;(LFS, Reward, <span class="comment">/*IncludeReward*/</span> <span class="keyword">true</span>)));</div>
<div class="line"><a name="l00477"></a><span class="lineno">  477</span>&#160;      <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>.second);</div>
<div class="line"><a name="l00478"></a><span class="lineno">  478</span>&#160;      Log = <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>.first-&gt;second.get();</div>
<div class="line"><a name="l00479"></a><span class="lineno">  479</span>&#160;    }</div>
<div class="line"><a name="l00480"></a><span class="lineno">  480</span>&#160;    <span class="keywordflow">return</span> std::make_unique&lt;DevelopmentModeEvictAdvisor&gt;(</div>
<div class="line"><a name="l00481"></a><span class="lineno">  481</span>&#160;        MF, <a class="code" href="SIOptimizeExecMaskingPreRA_8cpp.html#a3e47bdb3e296b00df96eff7896fa57bf">RA</a>, Runner.get(), getAnalysis&lt;MachineBlockFrequencyInfo&gt;(),</div>
<div class="line"><a name="l00482"></a><span class="lineno">  482</span>&#160;        getAnalysis&lt;MachineLoopInfo&gt;(), Log);</div>
<div class="line"><a name="l00483"></a><span class="lineno">  483</span>&#160;  }</div>
<div class="line"><a name="l00484"></a><span class="lineno">  484</span>&#160; </div>
<div class="line"><a name="l00485"></a><span class="lineno">  485</span>&#160;  std::unique_ptr&lt;MLModelRunner&gt; Runner;</div>
<div class="line"><a name="l00486"></a><span class="lineno">  486</span>&#160;  <a class="code" href="classllvm_1_1StringMap.html">StringMap&lt;std::unique_ptr&lt;Logger&gt;</a>&gt; LogMap;</div>
<div class="line"><a name="l00487"></a><span class="lineno">  487</span>&#160;};</div>
<div class="line"><a name="l00488"></a><span class="lineno">  488</span>&#160;<span class="preprocessor">#endif //#ifdef LLVM_HAVE_TF_API</span></div>
<div class="line"><a name="l00489"></a><span class="lineno">  489</span>&#160;} <span class="comment">// namespace</span></div>
<div class="line"><a name="l00490"></a><span class="lineno">  490</span>&#160; </div>
<div class="line"><a name="l00491"></a><span class="lineno">  491</span>&#160;<span class="keywordtype">float</span> MLEvictAdvisor::getInitialQueueSize(<span class="keyword">const</span> <a class="code" href="classllvm_1_1MachineFunction.html">MachineFunction</a> &amp;MF) {</div>
<div class="line"><a name="l00492"></a><span class="lineno">  492</span>&#160;  <span class="keyword">auto</span> &amp;<a class="code" href="AArch64AdvSIMDScalarPass_8cpp.html#aacd2ab195054a3e6a74bfbb9d5d571c8">MRI</a> = MF.<a class="code" href="classllvm_1_1MachineFunction.html#ab4a6ca428289b667dd691a00e9f7e334">getRegInfo</a>();</div>
<div class="line"><a name="l00493"></a><span class="lineno">  493</span>&#160;  <span class="keywordtype">float</span> <a class="code" href="namespacellvm_1_1MipsISD.html#a422daf9aa810935178671306b651d69ba366e1eac31eeb1a1892d62ccfc0c8cf8">Ret</a> = 0.0;</div>
<div class="line"><a name="l00494"></a><span class="lineno">  494</span>&#160;  <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a> = 0, <a class="code" href="BuiltinGCs_8cpp.html#a6742d2e0a668baf1196ec69e158d5f15">E</a> = <a class="code" href="AArch64AdvSIMDScalarPass_8cpp.html#aacd2ab195054a3e6a74bfbb9d5d571c8">MRI</a>.<a class="code" href="classllvm_1_1MachineRegisterInfo.html#ae73582bbbc71758dcac70cd8c56210e4">getNumVirtRegs</a>(); <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a> != <a class="code" href="BuiltinGCs_8cpp.html#a6742d2e0a668baf1196ec69e158d5f15">E</a>; ++<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>) {</div>
<div class="line"><a name="l00495"></a><span class="lineno">  495</span>&#160;    <a class="code" href="classllvm_1_1Register.html">Register</a> <a class="code" href="namespacellvm_1_1X86Disassembler.html#a1e59b79e1d09149912cad9c0ef2809ad">Reg</a> = <a class="code" href="classllvm_1_1Register.html#a1979c563289f871907832e419889f979">Register::index2VirtReg</a>(<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>);</div>
<div class="line"><a name="l00496"></a><span class="lineno">  496</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="AArch64AdvSIMDScalarPass_8cpp.html#aacd2ab195054a3e6a74bfbb9d5d571c8">MRI</a>.<a class="code" href="classllvm_1_1MachineRegisterInfo.html#a666dc30b9326da6b9e69740a241df89d">reg_nodbg_empty</a>(<a class="code" href="namespacellvm_1_1X86Disassembler.html#a1e59b79e1d09149912cad9c0ef2809ad">Reg</a>))</div>
<div class="line"><a name="l00497"></a><span class="lineno">  497</span>&#160;      <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l00498"></a><span class="lineno">  498</span>&#160;    ++<a class="code" href="namespacellvm_1_1MipsISD.html#a422daf9aa810935178671306b651d69ba366e1eac31eeb1a1892d62ccfc0c8cf8">Ret</a>;</div>
<div class="line"><a name="l00499"></a><span class="lineno">  499</span>&#160;  }</div>
<div class="line"><a name="l00500"></a><span class="lineno">  500</span>&#160;  <span class="keywordflow">return</span> <a class="code" href="namespacellvm_1_1MipsISD.html#a422daf9aa810935178671306b651d69ba366e1eac31eeb1a1892d62ccfc0c8cf8">Ret</a>;</div>
<div class="line"><a name="l00501"></a><span class="lineno">  501</span>&#160;}</div>
<div class="line"><a name="l00502"></a><span class="lineno">  502</span>&#160; </div>
<div class="line"><a name="l00503"></a><span class="lineno">  503</span>&#160;MLEvictAdvisor::MLEvictAdvisor(<span class="keyword">const</span> <a class="code" href="classllvm_1_1MachineFunction.html">MachineFunction</a> &amp;MF, <span class="keyword">const</span> <a class="code" href="classllvm_1_1RAGreedy.html">RAGreedy</a> &amp;RA,</div>
<div class="line"><a name="l00504"></a><span class="lineno">  504</span>&#160;                               <a class="code" href="classllvm_1_1MLModelRunner.html">MLModelRunner</a> *Runner,</div>
<div class="line"><a name="l00505"></a><span class="lineno">  505</span>&#160;                               <span class="keyword">const</span> <a class="code" href="classllvm_1_1MachineBlockFrequencyInfo.html">MachineBlockFrequencyInfo</a> &amp;MBFI,</div>
<div class="line"><a name="l00506"></a><span class="lineno">  506</span>&#160;                               <span class="keyword">const</span> <a class="code" href="classllvm_1_1MachineLoopInfo.html">MachineLoopInfo</a> &amp;<a class="code" href="HexagonHardwareLoops_8cpp.html#ada7c1594a393ede3ce32602d64d7ddb2">Loops</a>)</div>
<div class="line"><a name="l00507"></a><span class="lineno">  507</span>&#160;    : <a class="code" href="classllvm_1_1RegAllocEvictionAdvisor.html">RegAllocEvictionAdvisor</a>(MF, <a class="code" href="SIOptimizeExecMaskingPreRA_8cpp.html#a3e47bdb3e296b00df96eff7896fa57bf">RA</a>), DefaultAdvisor(MF, <a class="code" href="SIOptimizeExecMaskingPreRA_8cpp.html#a3e47bdb3e296b00df96eff7896fa57bf">RA</a>),</div>
<div class="line"><a name="l00508"></a><span class="lineno">  508</span>&#160;      Runner(<a class="code" href="namespacestd.html">std</a>::<a class="code" href="namespacellvm.html#abfc9c7ecf70f66901e439f7c04ef3dbb">move</a>(Runner)), MBFI(MBFI), <a class="code" href="HexagonHardwareLoops_8cpp.html#ada7c1594a393ede3ce32602d64d7ddb2">Loops</a>(<a class="code" href="HexagonHardwareLoops_8cpp.html#ada7c1594a393ede3ce32602d64d7ddb2">Loops</a>),</div>
<div class="line"><a name="l00509"></a><span class="lineno">  509</span>&#160;      InitialQSize(MLEvictAdvisor::getInitialQueueSize(MF)) {</div>
<div class="line"><a name="l00510"></a><span class="lineno">  510</span>&#160;  <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(this-&gt;Runner);</div>
<div class="line"><a name="l00511"></a><span class="lineno">  511</span>&#160;  DoNotNormalize.set(FeatureIDs::mask);</div>
<div class="line"><a name="l00512"></a><span class="lineno">  512</span>&#160;  DoNotNormalize.set(FeatureIDs::is_free);</div>
<div class="line"><a name="l00513"></a><span class="lineno">  513</span>&#160;  DoNotNormalize.set(FeatureIDs::is_hint);</div>
<div class="line"><a name="l00514"></a><span class="lineno">  514</span>&#160;  DoNotNormalize.set(<a class="code" href="namespacellvm_1_1sys_1_1fs.html#abdd94fa12f11dbe4ddc248f5684dd7c1">FeatureIDs::is_local</a>);</div>
<div class="line"><a name="l00515"></a><span class="lineno">  515</span>&#160;  DoNotNormalize.set(FeatureIDs::min_stage);</div>
<div class="line"><a name="l00516"></a><span class="lineno">  516</span>&#160;  DoNotNormalize.set(FeatureIDs::max_stage);</div>
<div class="line"><a name="l00517"></a><span class="lineno">  517</span>&#160;  DoNotNormalize.set(FeatureIDs::progress);</div>
<div class="line"><a name="l00518"></a><span class="lineno">  518</span>&#160;}</div>
<div class="line"><a name="l00519"></a><span class="lineno">  519</span>&#160; </div>
<div class="line"><a name="l00520"></a><span class="lineno">  520</span>&#160;int64_t MLEvictAdvisor::tryFindEvictionCandidatePosition(</div>
<div class="line"><a name="l00521"></a><span class="lineno">  521</span>&#160;    <span class="keyword">const</span> <a class="code" href="classllvm_1_1LiveInterval.html">LiveInterval</a> &amp;, <span class="keyword">const</span> <a class="code" href="classllvm_1_1AllocationOrder.html">AllocationOrder</a> &amp;, <span class="keywordtype">unsigned</span>, uint8_t,</div>
<div class="line"><a name="l00522"></a><span class="lineno">  522</span>&#160;    <span class="keyword">const</span> <a class="code" href="classllvm_1_1SmallSet.html">SmallVirtRegSet</a> &amp;)<span class="keyword"> const </span>{</div>
<div class="line"><a name="l00523"></a><span class="lineno">  523</span>&#160;  int64_t <a class="code" href="namespacellvm_1_1MipsISD.html#a422daf9aa810935178671306b651d69ba366e1eac31eeb1a1892d62ccfc0c8cf8">Ret</a> = Runner-&gt;<a class="code" href="classllvm_1_1MLModelRunner.html#a65abc20c9cc5887af0af8a8a807f6151">evaluate</a>&lt;int64_t&gt;();</div>
<div class="line"><a name="l00524"></a><span class="lineno">  524</span>&#160;  <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(<a class="code" href="namespacellvm_1_1MipsISD.html#a422daf9aa810935178671306b651d69ba366e1eac31eeb1a1892d62ccfc0c8cf8">Ret</a> &gt;= 0);</div>
<div class="line"><a name="l00525"></a><span class="lineno">  525</span>&#160;  <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(<a class="code" href="namespacellvm_1_1MipsISD.html#a422daf9aa810935178671306b651d69ba366e1eac31eeb1a1892d62ccfc0c8cf8">Ret</a> &lt;= CandidateVirtRegPos);</div>
<div class="line"><a name="l00526"></a><span class="lineno">  526</span>&#160;  <span class="keywordflow">return</span> <a class="code" href="namespacellvm_1_1MipsISD.html#a422daf9aa810935178671306b651d69ba366e1eac31eeb1a1892d62ccfc0c8cf8">Ret</a>;</div>
<div class="line"><a name="l00527"></a><span class="lineno">  527</span>&#160;}</div>
<div class="line"><a name="l00528"></a><span class="lineno">  528</span>&#160; </div>
<div class="line"><a name="l00529"></a><span class="lineno">  529</span>&#160;<span class="keywordtype">bool</span> MLEvictAdvisor::loadInterferenceFeatures(</div>
<div class="line"><a name="l00530"></a><span class="lineno">  530</span>&#160;    <span class="keyword">const</span> <a class="code" href="classllvm_1_1LiveInterval.html">LiveInterval</a> &amp;VirtReg, <a class="code" href="classllvm_1_1MCRegister.html">MCRegister</a> PhysReg, <span class="keywordtype">bool</span> IsHint,</div>
<div class="line"><a name="l00531"></a><span class="lineno">  531</span>&#160;    <span class="keyword">const</span> <a class="code" href="classllvm_1_1SmallSet.html">SmallVirtRegSet</a> &amp;FixedRegisters, FeaturesListNormalizer &amp;Largest,</div>
<div class="line"><a name="l00532"></a><span class="lineno">  532</span>&#160;    <span class="keywordtype">size_t</span> Pos)<span class="keyword"> const </span>{</div>
<div class="line"><a name="l00533"></a><span class="lineno">  533</span>&#160;  <span class="comment">// It is only possible to evict virtual register interference.</span></div>
<div class="line"><a name="l00534"></a><span class="lineno">  534</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="LiveRegMatrix_8cpp.html#a8989acb71bd355e02bcf3a930b5e54ea">Matrix</a>-&gt;checkInterference(VirtReg, PhysReg) &gt; LiveRegMatrix::IK_VirtReg) {</div>
<div class="line"><a name="l00535"></a><span class="lineno">  535</span>&#160;    <span class="comment">// leave unavailable</span></div>
<div class="line"><a name="l00536"></a><span class="lineno">  536</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l00537"></a><span class="lineno">  537</span>&#160;  }</div>
<div class="line"><a name="l00538"></a><span class="lineno">  538</span>&#160; </div>
<div class="line"><a name="l00539"></a><span class="lineno">  539</span>&#160;  <span class="keyword">const</span> <span class="keywordtype">bool</span> IsLocal = LIS-&gt;intervalIsInOneMBB(VirtReg);</div>
<div class="line"><a name="l00540"></a><span class="lineno">  540</span>&#160;  int64_t LocalIntfs = 0;</div>
<div class="line"><a name="l00541"></a><span class="lineno">  541</span>&#160;  <span class="keywordtype">float</span> NrUrgent = 0.0f;</div>
<div class="line"><a name="l00542"></a><span class="lineno">  542</span>&#160; </div>
<div class="line"><a name="l00543"></a><span class="lineno">  543</span>&#160;  <span class="comment">// The cascade tracking is the same as in the default advisor</span></div>
<div class="line"><a name="l00544"></a><span class="lineno">  544</span>&#160;  <span class="keywordtype">unsigned</span> Cascade = <a class="code" href="SIOptimizeExecMaskingPreRA_8cpp.html#a3e47bdb3e296b00df96eff7896fa57bf">RA</a>.getExtraInfo().getCascadeOrCurrentNext(VirtReg.<a class="code" href="classllvm_1_1LiveInterval.html#a14d46e70db7e417c8ed5bc66fb295185">reg</a>());</div>
<div class="line"><a name="l00545"></a><span class="lineno">  545</span>&#160; </div>
<div class="line"><a name="l00546"></a><span class="lineno">  546</span>&#160;  <a class="code" href="classllvm_1_1SmallVector.html">SmallVector&lt;const LiveInterval *, MaxInterferences&gt;</a> InterferingIntervals;</div>
<div class="line"><a name="l00547"></a><span class="lineno">  547</span>&#160;  <span class="keywordflow">for</span> (<a class="code" href="classllvm_1_1MCRegUnitIterator.html">MCRegUnitIterator</a> Units(PhysReg, <a class="code" href="MachineSink_8cpp.html#a0f36ed1bc17fc1aa97fe291c439a0698">TRI</a>); Units.<a class="code" href="classllvm_1_1MCRegisterInfo_1_1DiffListIterator.html#a82f1c2dcfab9e27af4497fb0e13c4c6f">isValid</a>(); ++Units) {</div>
<div class="line"><a name="l00548"></a><span class="lineno">  548</span>&#160;    <a class="code" href="classllvm_1_1LiveIntervalUnion_1_1Query.html">LiveIntervalUnion::Query</a> &amp;Q = <a class="code" href="LiveRegMatrix_8cpp.html#a8989acb71bd355e02bcf3a930b5e54ea">Matrix</a>-&gt;query(VirtReg, *Units);</div>
<div class="line"><a name="l00549"></a><span class="lineno">  549</span>&#160;    <span class="comment">// Different from the default heuristic, we don&#39;t make any assumptions about</span></div>
<div class="line"><a name="l00550"></a><span class="lineno">  550</span>&#160;    <span class="comment">// what having more than 10 results in the query may mean.</span></div>
<div class="line"><a name="l00551"></a><span class="lineno">  551</span>&#160;    <span class="keyword">const</span> <span class="keyword">auto</span> &amp;IFIntervals = Q.<a class="code" href="classllvm_1_1LiveIntervalUnion_1_1Query.html#a8b7dbf3e19862dea3dff991ec822b898">interferingVRegs</a>(<a class="code" href="MLRegallocEvictAdvisor_8cpp.html#a67992ab5238ce8b5d25addba661f0db0">EvictInterferenceCutoff</a>);</div>
<div class="line"><a name="l00552"></a><span class="lineno">  552</span>&#160;    <span class="keywordflow">if</span> (IFIntervals.empty() &amp;&amp; InterferingIntervals.empty())</div>
<div class="line"><a name="l00553"></a><span class="lineno">  553</span>&#160;      <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l00554"></a><span class="lineno">  554</span>&#160;    <span class="keywordflow">if</span> (IFIntervals.size() &gt;= <a class="code" href="MLRegallocEvictAdvisor_8cpp.html#a67992ab5238ce8b5d25addba661f0db0">EvictInterferenceCutoff</a>)</div>
<div class="line"><a name="l00555"></a><span class="lineno">  555</span>&#160;      <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l00556"></a><span class="lineno">  556</span>&#160;    InterferingIntervals.<a class="code" href="classllvm_1_1SmallVectorImpl.html#ac56f67ff590e79d76f8ebd243e4cf442">append</a>(IFIntervals.begin(), IFIntervals.end());</div>
<div class="line"><a name="l00557"></a><span class="lineno">  557</span>&#160;    <span class="keywordflow">for</span> (<span class="keyword">const</span> <a class="code" href="classllvm_1_1LiveInterval.html">LiveInterval</a> *Intf : <a class="code" href="namespacellvm.html#a469101ea87b8b432a1b4f7935c97f35c">reverse</a>(IFIntervals)) {</div>
<div class="line"><a name="l00558"></a><span class="lineno">  558</span>&#160;      <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(Register::isVirtualRegister(Intf-&gt;reg()) &amp;&amp;</div>
<div class="line"><a name="l00559"></a><span class="lineno">  559</span>&#160;             <span class="stringliteral">&quot;Only expecting virtual register interference from query&quot;</span>);</div>
<div class="line"><a name="l00560"></a><span class="lineno">  560</span>&#160;      <span class="comment">// This is the same set of legality checks as in the default case: don&#39;t</span></div>
<div class="line"><a name="l00561"></a><span class="lineno">  561</span>&#160;      <span class="comment">// try to evict fixed regs or &#39;done&#39; ones. Also don&#39;t break cascades,</span></div>
<div class="line"><a name="l00562"></a><span class="lineno">  562</span>&#160;      <span class="comment">// except in the urgent case, with the same nuances used in the default</span></div>
<div class="line"><a name="l00563"></a><span class="lineno">  563</span>&#160;      <span class="comment">// heuristic.</span></div>
<div class="line"><a name="l00564"></a><span class="lineno">  564</span>&#160;      <span class="comment">// We could try sharing this between the advisors, but it may end up</span></div>
<div class="line"><a name="l00565"></a><span class="lineno">  565</span>&#160;      <span class="comment">// more complex than it is right now.</span></div>
<div class="line"><a name="l00566"></a><span class="lineno">  566</span>&#160;      <span class="keywordflow">if</span> (FixedRegisters.<a class="code" href="classllvm_1_1SmallSet.html#a2a98f19750ba941ce791b75ca6d77e48">count</a>(Intf-&gt;reg()))</div>
<div class="line"><a name="l00567"></a><span class="lineno">  567</span>&#160;        <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l00568"></a><span class="lineno">  568</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="SIOptimizeExecMaskingPreRA_8cpp.html#a3e47bdb3e296b00df96eff7896fa57bf">RA</a>.getExtraInfo().getStage(*Intf) == <a class="code" href="namespacellvm.html#a81973eb0c2304a2d8a2f44d7d3da8fa4ab3dc0864c572a7f8895334b0f8d235d4">RS_Done</a>)</div>
<div class="line"><a name="l00569"></a><span class="lineno">  569</span>&#160;        <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l00570"></a><span class="lineno">  570</span>&#160;      <span class="keywordtype">bool</span> Urgent =</div>
<div class="line"><a name="l00571"></a><span class="lineno">  571</span>&#160;          !VirtReg.<a class="code" href="classllvm_1_1LiveInterval.html#a1a07a284547e2997c90a6a1be428cd47">isSpillable</a>() &amp;&amp;</div>
<div class="line"><a name="l00572"></a><span class="lineno">  572</span>&#160;          (Intf-&gt;isSpillable() ||</div>
<div class="line"><a name="l00573"></a><span class="lineno">  573</span>&#160;           RegClassInfo.getNumAllocatableRegs(<a class="code" href="AArch64AdvSIMDScalarPass_8cpp.html#aacd2ab195054a3e6a74bfbb9d5d571c8">MRI</a>-&gt;<a class="code" href="classllvm_1_1MachineRegisterInfo.html#aa363afffca4fc13a709673936b47fe33">getRegClass</a>(VirtReg.<a class="code" href="classllvm_1_1LiveInterval.html#a14d46e70db7e417c8ed5bc66fb295185">reg</a>())) &lt;</div>
<div class="line"><a name="l00574"></a><span class="lineno">  574</span>&#160;               RegClassInfo.getNumAllocatableRegs(</div>
<div class="line"><a name="l00575"></a><span class="lineno">  575</span>&#160;                   <a class="code" href="AArch64AdvSIMDScalarPass_8cpp.html#aacd2ab195054a3e6a74bfbb9d5d571c8">MRI</a>-&gt;<a class="code" href="classllvm_1_1MachineRegisterInfo.html#aa363afffca4fc13a709673936b47fe33">getRegClass</a>(Intf-&gt;reg())));</div>
<div class="line"><a name="l00576"></a><span class="lineno">  576</span>&#160;      <span class="comment">// Only evict older cascades or live ranges without a cascade.</span></div>
<div class="line"><a name="l00577"></a><span class="lineno">  577</span>&#160;      <span class="keywordtype">unsigned</span> IntfCascade = <a class="code" href="SIOptimizeExecMaskingPreRA_8cpp.html#a3e47bdb3e296b00df96eff7896fa57bf">RA</a>.getExtraInfo().getCascade(Intf-&gt;reg());</div>
<div class="line"><a name="l00578"></a><span class="lineno">  578</span>&#160;      <span class="keywordflow">if</span> (Cascade &lt;= IntfCascade) {</div>
<div class="line"><a name="l00579"></a><span class="lineno">  579</span>&#160;        <span class="keywordflow">if</span> (!Urgent)</div>
<div class="line"><a name="l00580"></a><span class="lineno">  580</span>&#160;          <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l00581"></a><span class="lineno">  581</span>&#160;        ++NrUrgent;</div>
<div class="line"><a name="l00582"></a><span class="lineno">  582</span>&#160;      }</div>
<div class="line"><a name="l00583"></a><span class="lineno">  583</span>&#160; </div>
<div class="line"><a name="l00584"></a><span class="lineno">  584</span>&#160;      LocalIntfs += (IsLocal &amp;&amp; LIS-&gt;intervalIsInOneMBB(*Intf) &amp;&amp;</div>
<div class="line"><a name="l00585"></a><span class="lineno">  585</span>&#160;                     (!EnableLocalReassign || !canReassign(*Intf, PhysReg)));</div>
<div class="line"><a name="l00586"></a><span class="lineno">  586</span>&#160;    }</div>
<div class="line"><a name="l00587"></a><span class="lineno">  587</span>&#160;  }</div>
<div class="line"><a name="l00588"></a><span class="lineno">  588</span>&#160;  <span class="comment">// OK, so if we made it this far, this LR is an eviction candidate, load its</span></div>
<div class="line"><a name="l00589"></a><span class="lineno">  589</span>&#160;  <span class="comment">// features.</span></div>
<div class="line"><a name="l00590"></a><span class="lineno">  590</span>&#160;  extractFeatures(InterferingIntervals, Largest, Pos, IsHint, LocalIntfs,</div>
<div class="line"><a name="l00591"></a><span class="lineno">  591</span>&#160;                  NrUrgent);</div>
<div class="line"><a name="l00592"></a><span class="lineno">  592</span>&#160;  <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l00593"></a><span class="lineno">  593</span>&#160;}</div>
<div class="line"><a name="l00594"></a><span class="lineno">  594</span>&#160; </div>
<div class="line"><a name="l00595"></a><span class="lineno">  595</span>&#160;<a class="code" href="classllvm_1_1MCRegister.html">MCRegister</a> MLEvictAdvisor::tryFindEvictionCandidate(</div>
<div class="line"><a name="l00596"></a><span class="lineno">  596</span>&#160;    <span class="keyword">const</span> <a class="code" href="classllvm_1_1LiveInterval.html">LiveInterval</a> &amp;VirtReg, <span class="keyword">const</span> <a class="code" href="classllvm_1_1AllocationOrder.html">AllocationOrder</a> &amp;Order,</div>
<div class="line"><a name="l00597"></a><span class="lineno">  597</span>&#160;    uint8_t CostPerUseLimit, <span class="keyword">const</span> <a class="code" href="classllvm_1_1SmallSet.html">SmallVirtRegSet</a> &amp;FixedRegisters)<span class="keyword"> const </span>{</div>
<div class="line"><a name="l00598"></a><span class="lineno">  598</span>&#160;  <span class="keyword">auto</span> MaybeOrderLimit = getOrderLimit(VirtReg, Order, CostPerUseLimit);</div>
<div class="line"><a name="l00599"></a><span class="lineno">  599</span>&#160;  <span class="keywordflow">if</span> (!MaybeOrderLimit)</div>
<div class="line"><a name="l00600"></a><span class="lineno">  600</span>&#160;    <span class="keywordflow">return</span> MCRegister::NoRegister;</div>
<div class="line"><a name="l00601"></a><span class="lineno">  601</span>&#160;  <span class="keywordtype">unsigned</span> OrderLimit = *MaybeOrderLimit;</div>
<div class="line"><a name="l00602"></a><span class="lineno">  602</span>&#160; </div>
<div class="line"><a name="l00603"></a><span class="lineno">  603</span>&#160;  <span class="comment">// The heuristic sets initial costs such as, if CostPerUseLimit is</span></div>
<div class="line"><a name="l00604"></a><span class="lineno">  604</span>&#160;  <span class="comment">// max&lt;uint8_t&gt;, then any of the costs of the legally-evictable intervals</span></div>
<div class="line"><a name="l00605"></a><span class="lineno">  605</span>&#160;  <span class="comment">// would be lower. When that happens, one of those will be selected.</span></div>
<div class="line"><a name="l00606"></a><span class="lineno">  606</span>&#160;  <span class="comment">// Therefore, we allow the candidate be selected, unless the candidate is</span></div>
<div class="line"><a name="l00607"></a><span class="lineno">  607</span>&#160;  <span class="comment">// unspillable, in which case it would be incorrect to not find a register for</span></div>
<div class="line"><a name="l00608"></a><span class="lineno">  608</span>&#160;  <span class="comment">// it.</span></div>
<div class="line"><a name="l00609"></a><span class="lineno">  609</span>&#160;  <span class="keyword">const</span> <span class="keywordtype">bool</span> MustFindEviction =</div>
<div class="line"><a name="l00610"></a><span class="lineno">  610</span>&#160;      (!VirtReg.<a class="code" href="classllvm_1_1LiveInterval.html#a1a07a284547e2997c90a6a1be428cd47">isSpillable</a>() &amp;&amp; CostPerUseLimit == <span class="keyword">static_cast&lt;</span>uint8_t<span class="keyword">&gt;</span>(~0u));</div>
<div class="line"><a name="l00611"></a><span class="lineno">  611</span>&#160;  <span class="comment">// Number of available candidates - if 0, no need to continue.</span></div>
<div class="line"><a name="l00612"></a><span class="lineno">  612</span>&#160;  <span class="keywordtype">size_t</span> <a class="code" href="GVN_8cpp.html#ae8ec32a9818e9fd7c653c86bc0c4dc7ea78945de8de090e90045d299651a68a9b">Available</a> = 0;</div>
<div class="line"><a name="l00613"></a><span class="lineno">  613</span>&#160;  <span class="comment">// Make sure we don&#39;t have leftover partial state from an attempt where we had</span></div>
<div class="line"><a name="l00614"></a><span class="lineno">  614</span>&#160;  <span class="comment">// no available candidates and bailed out early.</span></div>
<div class="line"><a name="l00615"></a><span class="lineno">  615</span>&#160;  resetInputs(*Runner);</div>
<div class="line"><a name="l00616"></a><span class="lineno">  616</span>&#160; </div>
<div class="line"><a name="l00617"></a><span class="lineno">  617</span>&#160;  <span class="comment">// Track the index-&gt;register mapping because AllocationOrder doesn&#39;t do that</span></div>
<div class="line"><a name="l00618"></a><span class="lineno">  618</span>&#160;  <span class="comment">// and we&#39;d have to scan it.</span></div>
<div class="line"><a name="l00619"></a><span class="lineno">  619</span>&#160;  <span class="comment">// Also track their mask, to write asserts/debug.</span></div>
<div class="line"><a name="l00620"></a><span class="lineno">  620</span>&#160;  CandidateRegList Regs;</div>
<div class="line"><a name="l00621"></a><span class="lineno">  621</span>&#160;  Regs.fill({0, <span class="keyword">false</span>});</div>
<div class="line"><a name="l00622"></a><span class="lineno">  622</span>&#160; </div>
<div class="line"><a name="l00623"></a><span class="lineno">  623</span>&#160;  <span class="comment">// Track the largest value of features seen during this eviction session. We</span></div>
<div class="line"><a name="l00624"></a><span class="lineno">  624</span>&#160;  <span class="comment">// only normalize (some of) the float features, but it&#39;s just simpler to</span></div>
<div class="line"><a name="l00625"></a><span class="lineno">  625</span>&#160;  <span class="comment">// dimension &#39;Largest&#39; to all the features, especially since we have the</span></div>
<div class="line"><a name="l00626"></a><span class="lineno">  626</span>&#160;  <span class="comment">// &#39;DoNotNormalize&#39; list.</span></div>
<div class="line"><a name="l00627"></a><span class="lineno">  627</span>&#160;  FeaturesListNormalizer Largest;</div>
<div class="line"><a name="l00628"></a><span class="lineno">  628</span>&#160;  Largest.fill(0.0);</div>
<div class="line"><a name="l00629"></a><span class="lineno">  629</span>&#160; </div>
<div class="line"><a name="l00630"></a><span class="lineno">  630</span>&#160;  <span class="comment">// Same overal idea as in the default eviction policy - we visit the values of</span></div>
<div class="line"><a name="l00631"></a><span class="lineno">  631</span>&#160;  <span class="comment">// AllocationOrder one at a time. If it&#39;s not legally available, we mask off</span></div>
<div class="line"><a name="l00632"></a><span class="lineno">  632</span>&#160;  <span class="comment">// the corresponding feature column (==do nothing because we already reset all</span></div>
<div class="line"><a name="l00633"></a><span class="lineno">  633</span>&#160;  <span class="comment">// the features to 0)</span></div>
<div class="line"><a name="l00634"></a><span class="lineno">  634</span>&#160;  <span class="comment">// Use Pos to capture the column we load features at - in AllocationOrder</span></div>
<div class="line"><a name="l00635"></a><span class="lineno">  635</span>&#160;  <span class="comment">// order.</span></div>
<div class="line"><a name="l00636"></a><span class="lineno">  636</span>&#160;  <span class="keywordtype">size_t</span> Pos = 0;</div>
<div class="line"><a name="l00637"></a><span class="lineno">  637</span>&#160;  <span class="keywordflow">for</span> (<span class="keyword">auto</span> <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a> = Order.<a class="code" href="classllvm_1_1AllocationOrder.html#afef757206398af2a03907a52838b4aaf">begin</a>(), <a class="code" href="BuiltinGCs_8cpp.html#a6742d2e0a668baf1196ec69e158d5f15">E</a> = Order.<a class="code" href="classllvm_1_1AllocationOrder.html#ac8c597e6238b708d0edb8de4ec1624f8">getOrderLimitEnd</a>(OrderLimit); <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a> != <a class="code" href="BuiltinGCs_8cpp.html#a6742d2e0a668baf1196ec69e158d5f15">E</a>;</div>
<div class="line"><a name="l00638"></a><span class="lineno">  638</span>&#160;       ++<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>, ++Pos) {</div>
<div class="line"><a name="l00639"></a><span class="lineno">  639</span>&#160;    <a class="code" href="classllvm_1_1MCRegister.html">MCRegister</a> PhysReg = *<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>;</div>
<div class="line"><a name="l00640"></a><span class="lineno">  640</span>&#160;    <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(!Regs[Pos].second);</div>
<div class="line"><a name="l00641"></a><span class="lineno">  641</span>&#160;    <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(PhysReg);</div>
<div class="line"><a name="l00642"></a><span class="lineno">  642</span>&#160;    <span class="keywordflow">if</span> (!canAllocatePhysReg(CostPerUseLimit, PhysReg)) {</div>
<div class="line"><a name="l00643"></a><span class="lineno">  643</span>&#160;      <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l00644"></a><span class="lineno">  644</span>&#160;    }</div>
<div class="line"><a name="l00645"></a><span class="lineno">  645</span>&#160;    <span class="keywordflow">if</span> (loadInterferenceFeatures(VirtReg, PhysReg, <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>.isHint(), FixedRegisters,</div>
<div class="line"><a name="l00646"></a><span class="lineno">  646</span>&#160;                                 Largest, Pos)) {</div>
<div class="line"><a name="l00647"></a><span class="lineno">  647</span>&#160;      ++<a class="code" href="GVN_8cpp.html#ae8ec32a9818e9fd7c653c86bc0c4dc7ea78945de8de090e90045d299651a68a9b">Available</a>;</div>
<div class="line"><a name="l00648"></a><span class="lineno">  648</span>&#160;      Regs[Pos] = std::make_pair(PhysReg, <span class="keyword">true</span>);</div>
<div class="line"><a name="l00649"></a><span class="lineno">  649</span>&#160;    }</div>
<div class="line"><a name="l00650"></a><span class="lineno">  650</span>&#160;  }</div>
<div class="line"><a name="l00651"></a><span class="lineno">  651</span>&#160;  <span class="keywordflow">if</span> (Available == 0) {</div>
<div class="line"><a name="l00652"></a><span class="lineno">  652</span>&#160;    <span class="comment">// Nothing to decide, nothing to learn.</span></div>
<div class="line"><a name="l00653"></a><span class="lineno">  653</span>&#160;    <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(!MustFindEviction);</div>
<div class="line"><a name="l00654"></a><span class="lineno">  654</span>&#160;    <span class="keywordflow">return</span> MCRegister::NoRegister;</div>
<div class="line"><a name="l00655"></a><span class="lineno">  655</span>&#160;  }</div>
<div class="line"><a name="l00656"></a><span class="lineno">  656</span>&#160;  <span class="keyword">const</span> <span class="keywordtype">size_t</span> ValidPosLimit = Pos;</div>
<div class="line"><a name="l00657"></a><span class="lineno">  657</span>&#160;  <span class="comment">// If we must find eviction, the candidate should be masked out of the</span></div>
<div class="line"><a name="l00658"></a><span class="lineno">  658</span>&#160;  <span class="comment">// decision making process.</span></div>
<div class="line"><a name="l00659"></a><span class="lineno">  659</span>&#160;  Regs[CandidateVirtRegPos].second = !MustFindEviction;</div>
<div class="line"><a name="l00660"></a><span class="lineno">  660</span>&#160;  <span class="keywordflow">if</span> (!MustFindEviction)</div>
<div class="line"><a name="l00661"></a><span class="lineno">  661</span>&#160;    extractFeatures(<a class="code" href="classllvm_1_1SmallVector.html">SmallVector&lt;const LiveInterval *, 1&gt;</a>(1, &amp;VirtReg), Largest,</div>
<div class="line"><a name="l00662"></a><span class="lineno">  662</span>&#160;                    CandidateVirtRegPos, <span class="comment">/*IsHint*/</span> 0, <span class="comment">/*LocalIntfsCount*/</span> 0,</div>
<div class="line"><a name="l00663"></a><span class="lineno">  663</span>&#160;                    <span class="comment">/*NrUrgent*/</span> 0.0);</div>
<div class="line"><a name="l00664"></a><span class="lineno">  664</span>&#160;  <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(InitialQSize &gt; 0.0 &amp;&amp; <span class="stringliteral">&quot;We couldn&#39;t have gotten here if we had &quot;</span></div>
<div class="line"><a name="l00665"></a><span class="lineno">  665</span>&#160;                               <span class="stringliteral">&quot;nothing to allocate initially.&quot;</span>);</div>
<div class="line"><a name="l00666"></a><span class="lineno">  666</span>&#160;  <span class="comment">// Normalize the features.</span></div>
<div class="line"><a name="l00667"></a><span class="lineno">  667</span>&#160;  <span class="keywordflow">for</span> (<span class="keyword">auto</span> &amp;V : Largest)</div>
<div class="line"><a name="l00668"></a><span class="lineno">  668</span>&#160;    V = V ? V : 1.0;</div>
<div class="line"><a name="l00669"></a><span class="lineno">  669</span>&#160;  <span class="keywordflow">for</span> (<span class="keywordtype">size_t</span> <a class="code" href="namespacellvm.html#aab4d7321fbae116ee906bc9a1c29b3c7">FeatureIndex</a> = 0; <a class="code" href="namespacellvm.html#aab4d7321fbae116ee906bc9a1c29b3c7">FeatureIndex</a> &lt; FeatureIDs::FeatureCount;</div>
<div class="line"><a name="l00670"></a><span class="lineno">  670</span>&#160;       ++<a class="code" href="namespacellvm.html#aab4d7321fbae116ee906bc9a1c29b3c7">FeatureIndex</a>) {</div>
<div class="line"><a name="l00671"></a><span class="lineno">  671</span>&#160;    <span class="keywordflow">if</span> (DoNotNormalize.test(<a class="code" href="namespacellvm.html#aab4d7321fbae116ee906bc9a1c29b3c7">FeatureIndex</a>))</div>
<div class="line"><a name="l00672"></a><span class="lineno">  672</span>&#160;      <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l00673"></a><span class="lineno">  673</span>&#160;    <span class="keywordflow">for</span> (<span class="keywordtype">size_t</span> Pos = 0; Pos &lt; NumberOfInterferences; ++Pos) {</div>
<div class="line"><a name="l00674"></a><span class="lineno">  674</span>&#160;      Runner-&gt;<a class="code" href="classllvm_1_1MLModelRunner.html#a472d392aabef5a2abd57cf0ffa509da4">getTensor</a>&lt;<span class="keywordtype">float</span>&gt;(<a class="code" href="namespacellvm.html#aab4d7321fbae116ee906bc9a1c29b3c7">FeatureIndex</a>)[Pos] /= Largest[<a class="code" href="namespacellvm.html#aab4d7321fbae116ee906bc9a1c29b3c7">FeatureIndex</a>];</div>
<div class="line"><a name="l00675"></a><span class="lineno">  675</span>&#160;    }</div>
<div class="line"><a name="l00676"></a><span class="lineno">  676</span>&#160;  }</div>
<div class="line"><a name="l00677"></a><span class="lineno">  677</span>&#160;  *Runner-&gt;<a class="code" href="classllvm_1_1MLModelRunner.html#a472d392aabef5a2abd57cf0ffa509da4">getTensor</a>&lt;<span class="keywordtype">float</span>&gt;(FeatureIDs::progress) =</div>
<div class="line"><a name="l00678"></a><span class="lineno">  678</span>&#160;      <span class="keyword">static_cast&lt;</span><span class="keywordtype">float</span><span class="keyword">&gt;</span>(<a class="code" href="SIOptimizeExecMaskingPreRA_8cpp.html#a3e47bdb3e296b00df96eff7896fa57bf">RA</a>.getQueueSize()) / InitialQSize;</div>
<div class="line"><a name="l00679"></a><span class="lineno">  679</span>&#160; </div>
<div class="line"><a name="l00680"></a><span class="lineno">  680</span>&#160;  <span class="comment">// Get a decision.</span></div>
<div class="line"><a name="l00681"></a><span class="lineno">  681</span>&#160;  <span class="keywordtype">size_t</span> CandidatePos = tryFindEvictionCandidatePosition(</div>
<div class="line"><a name="l00682"></a><span class="lineno">  682</span>&#160;      VirtReg, Order, OrderLimit, CostPerUseLimit, FixedRegisters);</div>
<div class="line"><a name="l00683"></a><span class="lineno">  683</span>&#160;  <span class="comment">// The contract with the ML side is that CandidatePos is mask == 1 (i.e.</span></div>
<div class="line"><a name="l00684"></a><span class="lineno">  684</span>&#160;  <span class="comment">// Regs[CandidatePos].second)</span></div>
<div class="line"><a name="l00685"></a><span class="lineno">  685</span>&#160;  <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(Regs[CandidatePos].second);</div>
<div class="line"><a name="l00686"></a><span class="lineno">  686</span>&#160;  <span class="keywordflow">if</span> (CandidatePos == CandidateVirtRegPos) {</div>
<div class="line"><a name="l00687"></a><span class="lineno">  687</span>&#160;    <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(!MustFindEviction);</div>
<div class="line"><a name="l00688"></a><span class="lineno">  688</span>&#160;    <span class="keywordflow">return</span> MCRegister::NoRegister;</div>
<div class="line"><a name="l00689"></a><span class="lineno">  689</span>&#160;  }</div>
<div class="line"><a name="l00690"></a><span class="lineno">  690</span>&#160;  <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(CandidatePos &lt; ValidPosLimit);</div>
<div class="line"><a name="l00691"></a><span class="lineno">  691</span>&#160;  (void)ValidPosLimit;</div>
<div class="line"><a name="l00692"></a><span class="lineno">  692</span>&#160;  <span class="keywordflow">return</span> Regs[CandidatePos].first;</div>
<div class="line"><a name="l00693"></a><span class="lineno">  693</span>&#160;}</div>
<div class="line"><a name="l00694"></a><span class="lineno">  694</span>&#160; </div>
<div class="line"><a name="l00695"></a><span class="lineno">  695</span>&#160;<span class="keyword">const</span> LIFeatureComponents &amp;</div>
<div class="line"><a name="l00696"></a><span class="lineno">  696</span>&#160;MLEvictAdvisor::getLIFeatureComponents(<span class="keyword">const</span> <a class="code" href="classllvm_1_1LiveInterval.html">LiveInterval</a> &amp;LI)<span class="keyword"> const </span>{</div>
<div class="line"><a name="l00697"></a><span class="lineno">  697</span>&#160;  RegID <a class="code" href="namespacellvm_1_1CallingConv.html#a188c0836f8c3528401f1c236fd93b977">ID</a> = LI.<a class="code" href="classllvm_1_1LiveInterval.html#a14d46e70db7e417c8ed5bc66fb295185">reg</a>().<a class="code" href="classllvm_1_1Register.html#a488b598369bef536fa5ee42d3527ec45">id</a>();</div>
<div class="line"><a name="l00698"></a><span class="lineno">  698</span>&#160;  LIFeatureComponents <a class="code" href="namespacellvm_1_1pdb.html#a434cfa04e4ed34b7a901378557d4ca9eaca23eedff8d9d6f024954bf3be32439f">Empty</a>;</div>
<div class="line"><a name="l00699"></a><span class="lineno">  699</span>&#160;  <span class="keyword">auto</span> <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a> = CachedFeatures.insert(std::make_pair(<a class="code" href="namespacellvm_1_1CallingConv.html#a188c0836f8c3528401f1c236fd93b977">ID</a>, <a class="code" href="namespacellvm_1_1pdb.html#a434cfa04e4ed34b7a901378557d4ca9eaca23eedff8d9d6f024954bf3be32439f">Empty</a>));</div>
<div class="line"><a name="l00700"></a><span class="lineno">  700</span>&#160;  LIFeatureComponents &amp;<a class="code" href="namespacellvm_1_1MipsISD.html#a422daf9aa810935178671306b651d69ba366e1eac31eeb1a1892d62ccfc0c8cf8">Ret</a> = <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>.first-&gt;getSecond();</div>
<div class="line"><a name="l00701"></a><span class="lineno">  701</span>&#160;  <span class="keywordflow">if</span> (!<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>.second)</div>
<div class="line"><a name="l00702"></a><span class="lineno">  702</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="namespacellvm_1_1MipsISD.html#a422daf9aa810935178671306b651d69ba366e1eac31eeb1a1892d62ccfc0c8cf8">Ret</a>;</div>
<div class="line"><a name="l00703"></a><span class="lineno">  703</span>&#160; </div>
<div class="line"><a name="l00704"></a><span class="lineno">  704</span>&#160;  <a class="code" href="classllvm_1_1SmallPtrSet.html">SmallPtrSet&lt;MachineInstr *, 8&gt;</a> Visited;</div>
<div class="line"><a name="l00705"></a><span class="lineno">  705</span>&#160;  <span class="keyword">const</span> <a class="code" href="classllvm_1_1TargetRegisterInfo.html">TargetRegisterInfo</a> &amp;<a class="code" href="MachineSink_8cpp.html#a0f36ed1bc17fc1aa97fe291c439a0698">TRI</a> = *MF.<a class="code" href="classllvm_1_1MachineFunction.html#a325f6b611ef9ec06798d3b4eb9572093">getSubtarget</a>().<a class="code" href="classllvm_1_1TargetSubtargetInfo.html#a87849514193302b75f50a8092f94b98a">getRegisterInfo</a>();</div>
<div class="line"><a name="l00706"></a><span class="lineno">  706</span>&#160; </div>
<div class="line"><a name="l00707"></a><span class="lineno">  707</span>&#160;  <span class="keywordflow">for</span> (<a class="code" href="classllvm_1_1MachineRegisterInfo_1_1defusechain__instr__iterator.html">MachineRegisterInfo::reg_instr_nodbg_iterator</a></div>
<div class="line"><a name="l00708"></a><span class="lineno">  708</span>&#160;           <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a> = <a class="code" href="AArch64AdvSIMDScalarPass_8cpp.html#aacd2ab195054a3e6a74bfbb9d5d571c8">MRI</a>-&gt;<a class="code" href="classllvm_1_1MachineRegisterInfo.html#ae43ef10e056198d73d7c688d0649c9b2">reg_instr_nodbg_begin</a>(LI.<a class="code" href="classllvm_1_1LiveInterval.html#a14d46e70db7e417c8ed5bc66fb295185">reg</a>()),</div>
<div class="line"><a name="l00709"></a><span class="lineno">  709</span>&#160;           <a class="code" href="BuiltinGCs_8cpp.html#a6742d2e0a668baf1196ec69e158d5f15">E</a> = <a class="code" href="AArch64AdvSIMDScalarPass_8cpp.html#aacd2ab195054a3e6a74bfbb9d5d571c8">MRI</a>-&gt;<a class="code" href="classllvm_1_1MachineRegisterInfo.html#a29a1144eb9d753b6b682a933aa3f8f9f">reg_instr_nodbg_end</a>();</div>
<div class="line"><a name="l00710"></a><span class="lineno">  710</span>&#160;       <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a> != <a class="code" href="BuiltinGCs_8cpp.html#a6742d2e0a668baf1196ec69e158d5f15">E</a>;) {</div>
<div class="line"><a name="l00711"></a><span class="lineno">  711</span>&#160;    <a class="code" href="classllvm_1_1MachineInstr.html">MachineInstr</a> *<a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a> = &amp;*(<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>++);</div>
<div class="line"><a name="l00712"></a><span class="lineno">  712</span>&#160; </div>
<div class="line"><a name="l00713"></a><span class="lineno">  713</span>&#160;    ++<a class="code" href="namespacellvm_1_1MipsISD.html#a422daf9aa810935178671306b651d69ba366e1eac31eeb1a1892d62ccfc0c8cf8">Ret</a>.NrDefsAndUses;</div>
<div class="line"><a name="l00714"></a><span class="lineno">  714</span>&#160;    <span class="keywordflow">if</span> (!Visited.<a class="code" href="classllvm_1_1SmallPtrSetImpl.html#a6bc6fb89fe2e91c25559a8631f56e27e">insert</a>(<a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>).second)</div>
<div class="line"><a name="l00715"></a><span class="lineno">  715</span>&#160;      <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l00716"></a><span class="lineno">  716</span>&#160; </div>
<div class="line"><a name="l00717"></a><span class="lineno">  717</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>-&gt;isIdentityCopy() || <a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>-&gt;isImplicitDef())</div>
<div class="line"><a name="l00718"></a><span class="lineno">  718</span>&#160;      <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l00719"></a><span class="lineno">  719</span>&#160; </div>
<div class="line"><a name="l00720"></a><span class="lineno">  720</span>&#160;    <span class="keywordtype">bool</span> Reads, Writes;</div>
<div class="line"><a name="l00721"></a><span class="lineno">  721</span>&#160;    std::tie(Reads, Writes) = <a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>-&gt;readsWritesVirtualRegister(LI.<a class="code" href="classllvm_1_1LiveInterval.html#a14d46e70db7e417c8ed5bc66fb295185">reg</a>());</div>
<div class="line"><a name="l00722"></a><span class="lineno">  722</span>&#160; </div>
<div class="line"><a name="l00723"></a><span class="lineno">  723</span>&#160;    <span class="keywordtype">float</span> Freq = MBFI.<a class="code" href="classllvm_1_1MachineBlockFrequencyInfo.html#ad189a61a150fd97af1f0b15fed77974f">getBlockFreqRelativeToEntryBlock</a>(<a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>-&gt;getParent());</div>
<div class="line"><a name="l00724"></a><span class="lineno">  724</span>&#160;    <a class="code" href="namespacellvm_1_1MipsISD.html#a422daf9aa810935178671306b651d69ba366e1eac31eeb1a1892d62ccfc0c8cf8">Ret</a>.HottestBlockFreq = <a class="code" href="namespacellvm.html#ab4d4bc901fedd8857f647dcc2c0d71de">std::max</a>(Freq, <a class="code" href="namespacellvm_1_1MipsISD.html#a422daf9aa810935178671306b651d69ba366e1eac31eeb1a1892d62ccfc0c8cf8">Ret</a>.HottestBlockFreq);</div>
<div class="line"><a name="l00725"></a><span class="lineno">  725</span>&#160; </div>
<div class="line"><a name="l00726"></a><span class="lineno">  726</span>&#160;    <a class="code" href="namespacellvm_1_1MipsISD.html#a422daf9aa810935178671306b651d69ba366e1eac31eeb1a1892d62ccfc0c8cf8">Ret</a>.R += (Reads &amp;&amp; !Writes) * Freq;</div>
<div class="line"><a name="l00727"></a><span class="lineno">  727</span>&#160;    <a class="code" href="namespacellvm_1_1MipsISD.html#a422daf9aa810935178671306b651d69ba366e1eac31eeb1a1892d62ccfc0c8cf8">Ret</a>.W += (!Reads &amp;&amp; Writes) * Freq;</div>
<div class="line"><a name="l00728"></a><span class="lineno">  728</span>&#160;    <a class="code" href="namespacellvm_1_1MipsISD.html#a422daf9aa810935178671306b651d69ba366e1eac31eeb1a1892d62ccfc0c8cf8">Ret</a>.RW += (Reads &amp;&amp; Writes) * Freq;</div>
<div class="line"><a name="l00729"></a><span class="lineno">  729</span>&#160; </div>
<div class="line"><a name="l00730"></a><span class="lineno">  730</span>&#160;    <span class="keyword">auto</span> *<a class="code" href="AArch64SLSHardening_8cpp.html#a5958512eae2979bd2eb383977996a600">MBB</a> = <a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>-&gt;getParent();</div>
<div class="line"><a name="l00731"></a><span class="lineno">  731</span>&#160;    <span class="keyword">auto</span> *<a class="code" href="classllvm_1_1Loop.html">Loop</a> = <a class="code" href="HexagonHardwareLoops_8cpp.html#ada7c1594a393ede3ce32602d64d7ddb2">Loops</a>.getLoopFor(<a class="code" href="AArch64SLSHardening_8cpp.html#a5958512eae2979bd2eb383977996a600">MBB</a>);</div>
<div class="line"><a name="l00732"></a><span class="lineno">  732</span>&#160;    <span class="keywordtype">bool</span> IsExiting = <a class="code" href="classllvm_1_1Loop.html">Loop</a> ? <a class="code" href="classllvm_1_1Loop.html">Loop</a>-&gt;<a class="code" href="classllvm_1_1LoopBase.html#af691775d5a45e28afbdb3e97cab22eee">isLoopExiting</a>(<a class="code" href="AArch64SLSHardening_8cpp.html#a5958512eae2979bd2eb383977996a600">MBB</a>) : <span class="keyword">false</span>;</div>
<div class="line"><a name="l00733"></a><span class="lineno">  733</span>&#160; </div>
<div class="line"><a name="l00734"></a><span class="lineno">  734</span>&#160;    <span class="keywordflow">if</span> (Writes &amp;&amp; IsExiting &amp;&amp; LIS-&gt;isLiveOutOfMBB(LI, <a class="code" href="AArch64SLSHardening_8cpp.html#a5958512eae2979bd2eb383977996a600">MBB</a>))</div>
<div class="line"><a name="l00735"></a><span class="lineno">  735</span>&#160;      <a class="code" href="namespacellvm_1_1MipsISD.html#a422daf9aa810935178671306b651d69ba366e1eac31eeb1a1892d62ccfc0c8cf8">Ret</a>.IndVarUpdates += Freq;</div>
<div class="line"><a name="l00736"></a><span class="lineno">  736</span>&#160; </div>
<div class="line"><a name="l00737"></a><span class="lineno">  737</span>&#160;    <a class="code" href="include_2llvm_2Support_2CMakeLists_8txt.html#aef9367eb0b7430eaf70b1f2725488f2a">if</a> (<a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>-&gt;isCopy() &amp;&amp; VirtRegAuxInfo::copyHint(<a class="code" href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a>, LI.<a class="code" href="classllvm_1_1LiveInterval.html#a14d46e70db7e417c8ed5bc66fb295185">reg</a>(), <a class="code" href="MachineSink_8cpp.html#a0f36ed1bc17fc1aa97fe291c439a0698">TRI</a>, *<a class="code" href="AArch64AdvSIMDScalarPass_8cpp.html#aacd2ab195054a3e6a74bfbb9d5d571c8">MRI</a>))</div>
<div class="line"><a name="l00738"></a><span class="lineno">  738</span>&#160;      <a class="code" href="namespacellvm_1_1MipsISD.html#a422daf9aa810935178671306b651d69ba366e1eac31eeb1a1892d62ccfc0c8cf8">Ret</a>.HintWeights += Freq;</div>
<div class="line"><a name="l00739"></a><span class="lineno">  739</span>&#160;  }</div>
<div class="line"><a name="l00740"></a><span class="lineno">  740</span>&#160;  <a class="code" href="namespacellvm_1_1MipsISD.html#a422daf9aa810935178671306b651d69ba366e1eac31eeb1a1892d62ccfc0c8cf8">Ret</a>.IsRemat = VirtRegAuxInfo::isRematerializable(</div>
<div class="line"><a name="l00741"></a><span class="lineno">  741</span>&#160;      LI, *LIS, *VRM, *MF.<a class="code" href="classllvm_1_1MachineFunction.html#a325f6b611ef9ec06798d3b4eb9572093">getSubtarget</a>().<a class="code" href="classllvm_1_1TargetSubtargetInfo.html#ad34f7e3cd7a9add3ab2529e267b48004">getInstrInfo</a>());</div>
<div class="line"><a name="l00742"></a><span class="lineno">  742</span>&#160;  <span class="keywordflow">return</span> <a class="code" href="namespacellvm_1_1MipsISD.html#a422daf9aa810935178671306b651d69ba366e1eac31eeb1a1892d62ccfc0c8cf8">Ret</a>;</div>
<div class="line"><a name="l00743"></a><span class="lineno">  743</span>&#160;}</div>
<div class="line"><a name="l00744"></a><span class="lineno">  744</span>&#160; </div>
<div class="line"><a name="l00745"></a><span class="lineno">  745</span>&#160;<span class="comment">// Overall, this currently mimics what we do for weight calculation, but instead</span></div>
<div class="line"><a name="l00746"></a><span class="lineno">  746</span>&#160;<span class="comment">// of accummulating the various features, we keep them separate.</span></div>
<div class="line"><a name="l00747"></a><span class="lineno">  747</span>&#160;<span class="keywordtype">void</span> MLEvictAdvisor::extractFeatures(</div>
<div class="line"><a name="l00748"></a><span class="lineno">  748</span>&#160;    <span class="keyword">const</span> <a class="code" href="classllvm_1_1SmallVectorImpl.html">SmallVectorImpl&lt;const LiveInterval *&gt;</a> &amp;Intervals,</div>
<div class="line"><a name="l00749"></a><span class="lineno">  749</span>&#160;    std::array&lt;float, FeatureIDs::FeatureCount&gt; &amp;Largest, <span class="keywordtype">size_t</span> Pos,</div>
<div class="line"><a name="l00750"></a><span class="lineno">  750</span>&#160;    int64_t IsHint, int64_t LocalIntfsCount, <span class="keywordtype">float</span> NrUrgent)<span class="keyword"> const </span>{</div>
<div class="line"><a name="l00751"></a><span class="lineno">  751</span>&#160;  int64_t NrDefsAndUses = 0;</div>
<div class="line"><a name="l00752"></a><span class="lineno">  752</span>&#160;  int64_t NrBrokenHints = 0;</div>
<div class="line"><a name="l00753"></a><span class="lineno">  753</span>&#160;  <span class="keywordtype">double</span> <a class="code" href="namespacellvm_1_1RISCVFenceField.html#a147be9e9780c1e33363ea572d4c7b25fa1835091d83e0e052cd1a32c99b2be731">R</a> = 0.0;</div>
<div class="line"><a name="l00754"></a><span class="lineno">  754</span>&#160;  <span class="keywordtype">double</span> <a class="code" href="namespacellvm_1_1RISCVFenceField.html#a147be9e9780c1e33363ea572d4c7b25fa05c79fbfc58d9dd2851c467a1ef166bf">W</a> = 0.0;</div>
<div class="line"><a name="l00755"></a><span class="lineno">  755</span>&#160;  <span class="keywordtype">double</span> RW = 0.0;</div>
<div class="line"><a name="l00756"></a><span class="lineno">  756</span>&#160;  <span class="keywordtype">double</span> IndVarUpdates = 0.0;</div>
<div class="line"><a name="l00757"></a><span class="lineno">  757</span>&#160;  <span class="keywordtype">double</span> HintWeights = 0.0;</div>
<div class="line"><a name="l00758"></a><span class="lineno">  758</span>&#160;  <span class="keywordtype">float</span> StartBBFreq = 0.0;</div>
<div class="line"><a name="l00759"></a><span class="lineno">  759</span>&#160;  <span class="keywordtype">float</span> EndBBFreq = 0.0;</div>
<div class="line"><a name="l00760"></a><span class="lineno">  760</span>&#160;  <span class="keywordtype">float</span> HottestBlockFreq = 0.0;</div>
<div class="line"><a name="l00761"></a><span class="lineno">  761</span>&#160;  int32_t NrRematerializable = 0;</div>
<div class="line"><a name="l00762"></a><span class="lineno">  762</span>&#160;  <span class="keywordtype">float</span> TotalWeight = 0.0;</div>
<div class="line"><a name="l00763"></a><span class="lineno">  763</span>&#160; </div>
<div class="line"><a name="l00764"></a><span class="lineno">  764</span>&#160;  <a class="code" href="classllvm_1_1SlotIndex.html">SlotIndex</a> EndSI = LIS-&gt;getSlotIndexes()-&gt;getZeroIndex();</div>
<div class="line"><a name="l00765"></a><span class="lineno">  765</span>&#160;  <a class="code" href="classllvm_1_1SlotIndex.html">SlotIndex</a> StartSI = LIS-&gt;getSlotIndexes()-&gt;getLastIndex();</div>
<div class="line"><a name="l00766"></a><span class="lineno">  766</span>&#160;  int64_t MaxStage = 0;</div>
<div class="line"><a name="l00767"></a><span class="lineno">  767</span>&#160;  int64_t MinStage =</div>
<div class="line"><a name="l00768"></a><span class="lineno">  768</span>&#160;      Intervals.empty() ? 0 : <a class="code" href="namespacellvm.html#ab4d4bc901fedd8857f647dcc2c0d71de">std::numeric_limits&lt;int64_t&gt;::max</a>();</div>
<div class="line"><a name="l00769"></a><span class="lineno">  769</span>&#160; </div>
<div class="line"><a name="l00770"></a><span class="lineno">  770</span>&#160;  <span class="keywordflow">for</span> (<span class="keyword">const</span> <span class="keyword">auto</span> *L : Intervals) {</div>
<div class="line"><a name="l00771"></a><span class="lineno">  771</span>&#160;    <span class="keyword">const</span> <a class="code" href="classllvm_1_1LiveInterval.html">LiveInterval</a> &amp;LI = *L;</div>
<div class="line"><a name="l00772"></a><span class="lineno">  772</span>&#160;    MaxStage = std::max&lt;int64_t&gt;(</div>
<div class="line"><a name="l00773"></a><span class="lineno">  773</span>&#160;        MaxStage, <span class="keyword">static_cast&lt;</span>int64_t<span class="keyword">&gt;</span>(<a class="code" href="SIOptimizeExecMaskingPreRA_8cpp.html#a3e47bdb3e296b00df96eff7896fa57bf">RA</a>.getExtraInfo().getStage(LI)));</div>
<div class="line"><a name="l00774"></a><span class="lineno">  774</span>&#160;    MinStage = std::min&lt;int64_t&gt;(</div>
<div class="line"><a name="l00775"></a><span class="lineno">  775</span>&#160;        MinStage, <span class="keyword">static_cast&lt;</span>int64_t<span class="keyword">&gt;</span>(<a class="code" href="SIOptimizeExecMaskingPreRA_8cpp.html#a3e47bdb3e296b00df96eff7896fa57bf">RA</a>.getExtraInfo().getStage(LI)));</div>
<div class="line"><a name="l00776"></a><span class="lineno">  776</span>&#160; </div>
<div class="line"><a name="l00777"></a><span class="lineno">  777</span>&#160;    TotalWeight = <a class="code" href="namespacellvm.html#ab4d4bc901fedd8857f647dcc2c0d71de">std::max</a>(TotalWeight, LI.<a class="code" href="classllvm_1_1LiveInterval.html#a0fc46dffc68d1302d150b7e4c28c7983">weight</a>());</div>
<div class="line"><a name="l00778"></a><span class="lineno">  778</span>&#160; </div>
<div class="line"><a name="l00779"></a><span class="lineno">  779</span>&#160;    <span class="keywordflow">if</span> (LI.<a class="code" href="classllvm_1_1LiveRange.html#a9b4b2c1bb443279588bd6582ad6a86b2">beginIndex</a>() &lt; StartSI)</div>
<div class="line"><a name="l00780"></a><span class="lineno">  780</span>&#160;      StartSI = LI.<a class="code" href="classllvm_1_1LiveRange.html#a9b4b2c1bb443279588bd6582ad6a86b2">beginIndex</a>();</div>
<div class="line"><a name="l00781"></a><span class="lineno">  781</span>&#160; </div>
<div class="line"><a name="l00782"></a><span class="lineno">  782</span>&#160;    <span class="keywordflow">if</span> (LI.<a class="code" href="classllvm_1_1LiveRange.html#aa1bc5510e870a77ebe055b1524d9fd26">endIndex</a>() &gt; EndSI)</div>
<div class="line"><a name="l00783"></a><span class="lineno">  783</span>&#160;      EndSI = LI.<a class="code" href="classllvm_1_1LiveRange.html#aa1bc5510e870a77ebe055b1524d9fd26">endIndex</a>();</div>
<div class="line"><a name="l00784"></a><span class="lineno">  784</span>&#160;    <span class="keyword">const</span> LIFeatureComponents &amp;LIFC = getLIFeatureComponents(LI);</div>
<div class="line"><a name="l00785"></a><span class="lineno">  785</span>&#160;    NrBrokenHints += VRM-&gt;hasPreferredPhys(LI.<a class="code" href="classllvm_1_1LiveInterval.html#a14d46e70db7e417c8ed5bc66fb295185">reg</a>());</div>
<div class="line"><a name="l00786"></a><span class="lineno">  786</span>&#160; </div>
<div class="line"><a name="l00787"></a><span class="lineno">  787</span>&#160;    NrDefsAndUses += LIFC.NrDefsAndUses;</div>
<div class="line"><a name="l00788"></a><span class="lineno">  788</span>&#160;    HottestBlockFreq = <a class="code" href="namespacellvm.html#ab4d4bc901fedd8857f647dcc2c0d71de">std::max</a>(HottestBlockFreq, LIFC.HottestBlockFreq);</div>
<div class="line"><a name="l00789"></a><span class="lineno">  789</span>&#160;    <a class="code" href="namespacellvm_1_1RISCVFenceField.html#a147be9e9780c1e33363ea572d4c7b25fa1835091d83e0e052cd1a32c99b2be731">R</a> += LIFC.R;</div>
<div class="line"><a name="l00790"></a><span class="lineno">  790</span>&#160;    <a class="code" href="namespacellvm_1_1RISCVFenceField.html#a147be9e9780c1e33363ea572d4c7b25fa05c79fbfc58d9dd2851c467a1ef166bf">W</a> += LIFC.W;</div>
<div class="line"><a name="l00791"></a><span class="lineno">  791</span>&#160;    RW += LIFC.RW;</div>
<div class="line"><a name="l00792"></a><span class="lineno">  792</span>&#160; </div>
<div class="line"><a name="l00793"></a><span class="lineno">  793</span>&#160;    IndVarUpdates += LIFC.IndVarUpdates;</div>
<div class="line"><a name="l00794"></a><span class="lineno">  794</span>&#160; </div>
<div class="line"><a name="l00795"></a><span class="lineno">  795</span>&#160;    HintWeights += LIFC.HintWeights;</div>
<div class="line"><a name="l00796"></a><span class="lineno">  796</span>&#160;    NrRematerializable += LIFC.IsRemat;</div>
<div class="line"><a name="l00797"></a><span class="lineno">  797</span>&#160;  }</div>
<div class="line"><a name="l00798"></a><span class="lineno">  798</span>&#160;  <span class="keywordtype">size_t</span> <a class="code" href="namespacellvm_1_1Check.html#a067ee17412e800f03802fa9517685732a3450a9712780ac26b071f9da4288a396">Size</a> = 0;</div>
<div class="line"><a name="l00799"></a><span class="lineno">  799</span>&#160;  <span class="keywordflow">if</span> (!Intervals.empty()) {</div>
<div class="line"><a name="l00800"></a><span class="lineno">  800</span>&#160;    StartBBFreq =</div>
<div class="line"><a name="l00801"></a><span class="lineno">  801</span>&#160;        MBFI.<a class="code" href="classllvm_1_1MachineBlockFrequencyInfo.html#ad189a61a150fd97af1f0b15fed77974f">getBlockFreqRelativeToEntryBlock</a>(LIS-&gt;getMBBFromIndex(StartSI));</div>
<div class="line"><a name="l00802"></a><span class="lineno">  802</span>&#160;    <span class="keywordflow">if</span> (EndSI &gt;= LIS-&gt;getSlotIndexes()-&gt;getLastIndex())</div>
<div class="line"><a name="l00803"></a><span class="lineno">  803</span>&#160;      EndSI = LIS-&gt;getSlotIndexes()-&gt;getLastIndex().<a class="code" href="classllvm_1_1SlotIndex.html#ac0e7a3dd45019c076653747e34bbb9f2">getPrevIndex</a>();</div>
<div class="line"><a name="l00804"></a><span class="lineno">  804</span>&#160;    EndBBFreq =</div>
<div class="line"><a name="l00805"></a><span class="lineno">  805</span>&#160;        MBFI.<a class="code" href="classllvm_1_1MachineBlockFrequencyInfo.html#ad189a61a150fd97af1f0b15fed77974f">getBlockFreqRelativeToEntryBlock</a>(LIS-&gt;getMBBFromIndex(EndSI));</div>
<div class="line"><a name="l00806"></a><span class="lineno">  806</span>&#160;    <a class="code" href="namespacellvm_1_1Check.html#a067ee17412e800f03802fa9517685732a3450a9712780ac26b071f9da4288a396">Size</a> = StartSI.<a class="code" href="classllvm_1_1SlotIndex.html#a3dd5f1d73bfabd16cd66faed5108534c">distance</a>(EndSI);</div>
<div class="line"><a name="l00807"></a><span class="lineno">  807</span>&#160;  }</div>
<div class="line"><a name="l00808"></a><span class="lineno">  808</span>&#160;  <span class="comment">// Set the features at the column &#39;Pos&#39;.</span></div>
<div class="line"><a name="l00809"></a><span class="lineno">  809</span>&#160;<span class="preprocessor">#define SET(ID, TYPE, VAL)                                                     \</span></div>
<div class="line"><a name="l00810"></a><span class="lineno">  810</span>&#160;<span class="preprocessor">  do {                                                                         \</span></div>
<div class="line"><a name="l00811"></a><span class="lineno">  811</span>&#160;<span class="preprocessor">    Runner-&gt;getTensor&lt;TYPE&gt;(FeatureIDs::ID)[Pos] = static_cast&lt;TYPE&gt;(VAL);     \</span></div>
<div class="line"><a name="l00812"></a><span class="lineno">  812</span>&#160;<span class="preprocessor">    if (!DoNotNormalize.test(FeatureIDs::ID))                                  \</span></div>
<div class="line"><a name="l00813"></a><span class="lineno">  813</span>&#160;<span class="preprocessor">      Largest[FeatureIDs::ID] =                                                \</span></div>
<div class="line"><a name="l00814"></a><span class="lineno">  814</span>&#160;<span class="preprocessor">          std::max(Largest[FeatureIDs::ID], static_cast&lt;float&gt;(VAL));          \</span></div>
<div class="line"><a name="l00815"></a><span class="lineno">  815</span>&#160;<span class="preprocessor">  } while (false)</span></div>
<div class="line"><a name="l00816"></a><span class="lineno">  816</span>&#160;  <a class="code" href="MLRegallocEvictAdvisor_8cpp.html#a89522bf7a3fed31fd598afa139a2462c">SET</a>(mask, int64_t, 1);</div>
<div class="line"><a name="l00817"></a><span class="lineno">  817</span>&#160;  <a class="code" href="MLRegallocEvictAdvisor_8cpp.html#a89522bf7a3fed31fd598afa139a2462c">SET</a>(is_free, int64_t, Intervals.empty());</div>
<div class="line"><a name="l00818"></a><span class="lineno">  818</span>&#160;  <a class="code" href="MLRegallocEvictAdvisor_8cpp.html#a89522bf7a3fed31fd598afa139a2462c">SET</a>(nr_urgent, <span class="keywordtype">float</span>, NrUrgent);</div>
<div class="line"><a name="l00819"></a><span class="lineno">  819</span>&#160;  <a class="code" href="MLRegallocEvictAdvisor_8cpp.html#a89522bf7a3fed31fd598afa139a2462c">SET</a>(nr_broken_hints, <span class="keywordtype">float</span>, NrBrokenHints);</div>
<div class="line"><a name="l00820"></a><span class="lineno">  820</span>&#160;  <a class="code" href="MLRegallocEvictAdvisor_8cpp.html#a89522bf7a3fed31fd598afa139a2462c">SET</a>(is_hint, int64_t, IsHint);</div>
<div class="line"><a name="l00821"></a><span class="lineno">  821</span>&#160;  <a class="code" href="MLRegallocEvictAdvisor_8cpp.html#a89522bf7a3fed31fd598afa139a2462c">SET</a>(<a class="code" href="namespacellvm_1_1sys_1_1fs.html#abdd94fa12f11dbe4ddc248f5684dd7c1">is_local</a>, int64_t, LocalIntfsCount);</div>
<div class="line"><a name="l00822"></a><span class="lineno">  822</span>&#160;  <a class="code" href="MLRegallocEvictAdvisor_8cpp.html#a89522bf7a3fed31fd598afa139a2462c">SET</a>(nr_rematerializable, <span class="keywordtype">float</span>, NrRematerializable);</div>
<div class="line"><a name="l00823"></a><span class="lineno">  823</span>&#160;  <a class="code" href="MLRegallocEvictAdvisor_8cpp.html#a89522bf7a3fed31fd598afa139a2462c">SET</a>(nr_defs_and_uses, <span class="keywordtype">float</span>, NrDefsAndUses);</div>
<div class="line"><a name="l00824"></a><span class="lineno">  824</span>&#160;  <a class="code" href="MLRegallocEvictAdvisor_8cpp.html#a89522bf7a3fed31fd598afa139a2462c">SET</a>(weighed_reads_by_max, <span class="keywordtype">float</span>, <a class="code" href="namespacellvm_1_1RISCVFenceField.html#a147be9e9780c1e33363ea572d4c7b25fa1835091d83e0e052cd1a32c99b2be731">R</a>);</div>
<div class="line"><a name="l00825"></a><span class="lineno">  825</span>&#160;  <a class="code" href="MLRegallocEvictAdvisor_8cpp.html#a89522bf7a3fed31fd598afa139a2462c">SET</a>(weighed_writes_by_max, <span class="keywordtype">float</span>, <a class="code" href="namespacellvm_1_1RISCVFenceField.html#a147be9e9780c1e33363ea572d4c7b25fa05c79fbfc58d9dd2851c467a1ef166bf">W</a>);</div>
<div class="line"><a name="l00826"></a><span class="lineno">  826</span>&#160;  <a class="code" href="MLRegallocEvictAdvisor_8cpp.html#a89522bf7a3fed31fd598afa139a2462c">SET</a>(weighed_read_writes_by_max, <span class="keywordtype">float</span>, RW);</div>
<div class="line"><a name="l00827"></a><span class="lineno">  827</span>&#160;  <a class="code" href="MLRegallocEvictAdvisor_8cpp.html#a89522bf7a3fed31fd598afa139a2462c">SET</a>(weighed_indvars_by_max, <span class="keywordtype">float</span>, IndVarUpdates);</div>
<div class="line"><a name="l00828"></a><span class="lineno">  828</span>&#160;  <a class="code" href="MLRegallocEvictAdvisor_8cpp.html#a89522bf7a3fed31fd598afa139a2462c">SET</a>(hint_weights_by_max, <span class="keywordtype">float</span>, HintWeights);</div>
<div class="line"><a name="l00829"></a><span class="lineno">  829</span>&#160;  <a class="code" href="MLRegallocEvictAdvisor_8cpp.html#a89522bf7a3fed31fd598afa139a2462c">SET</a>(start_bb_freq_by_max, <span class="keywordtype">float</span>, StartBBFreq);</div>
<div class="line"><a name="l00830"></a><span class="lineno">  830</span>&#160;  <a class="code" href="MLRegallocEvictAdvisor_8cpp.html#a89522bf7a3fed31fd598afa139a2462c">SET</a>(end_bb_freq_by_max, <span class="keywordtype">float</span>, EndBBFreq);</div>
<div class="line"><a name="l00831"></a><span class="lineno">  831</span>&#160;  <a class="code" href="MLRegallocEvictAdvisor_8cpp.html#a89522bf7a3fed31fd598afa139a2462c">SET</a>(hottest_bb_freq_by_max, <span class="keywordtype">float</span>, HottestBlockFreq);</div>
<div class="line"><a name="l00832"></a><span class="lineno">  832</span>&#160;  <a class="code" href="MLRegallocEvictAdvisor_8cpp.html#a89522bf7a3fed31fd598afa139a2462c">SET</a>(liverange_size, <span class="keywordtype">float</span>, <a class="code" href="namespacellvm_1_1Check.html#a067ee17412e800f03802fa9517685732a3450a9712780ac26b071f9da4288a396">Size</a>);</div>
<div class="line"><a name="l00833"></a><span class="lineno">  833</span>&#160;  <a class="code" href="MLRegallocEvictAdvisor_8cpp.html#a89522bf7a3fed31fd598afa139a2462c">SET</a>(use_def_density, <span class="keywordtype">float</span>, TotalWeight);</div>
<div class="line"><a name="l00834"></a><span class="lineno">  834</span>&#160;  <a class="code" href="MLRegallocEvictAdvisor_8cpp.html#a89522bf7a3fed31fd598afa139a2462c">SET</a>(max_stage, int64_t, MaxStage);</div>
<div class="line"><a name="l00835"></a><span class="lineno">  835</span>&#160;  <a class="code" href="MLRegallocEvictAdvisor_8cpp.html#a89522bf7a3fed31fd598afa139a2462c">SET</a>(min_stage, int64_t, MinStage);</div>
<div class="line"><a name="l00836"></a><span class="lineno">  836</span>&#160;<span class="preprocessor">#undef SET</span></div>
<div class="line"><a name="l00837"></a><span class="lineno">  837</span>&#160;}</div>
<div class="line"><a name="l00838"></a><span class="lineno">  838</span>&#160; </div>
<div class="line"><a name="l00839"></a><span class="lineno">  839</span>&#160;<span class="comment">// Development mode-specific implementations</span></div>
<div class="line"><a name="l00840"></a><span class="lineno">  840</span>&#160;<span class="preprocessor">#ifdef LLVM_HAVE_TF_API</span></div>
<div class="line"><a name="l00841"></a><span class="lineno">  841</span>&#160;<a class="code" href="classllvm_1_1RegAllocEvictionAdvisorAnalysis.html">RegAllocEvictionAdvisorAnalysis</a> *<a class="code" href="namespacellvm.html#a9d8c20f9225883cc47bc3a304876c085">llvm::createDevelopmentModeAdvisor</a>() {</div>
<div class="line"><a name="l00842"></a><span class="lineno">  842</span>&#160;  <span class="keywordflow">return</span> <span class="keyword">new</span> DevelopmentModeEvictionAdvisorAnalysis();</div>
<div class="line"><a name="l00843"></a><span class="lineno">  843</span>&#160;}</div>
<div class="line"><a name="l00844"></a><span class="lineno">  844</span>&#160; </div>
<div class="line"><a name="l00845"></a><span class="lineno">  845</span>&#160;int64_t DevelopmentModeEvictAdvisor::tryFindEvictionCandidatePosition(</div>
<div class="line"><a name="l00846"></a><span class="lineno">  846</span>&#160;    <span class="keyword">const</span> <a class="code" href="classllvm_1_1LiveInterval.html">LiveInterval</a> &amp;VirtReg, <span class="keyword">const</span> <a class="code" href="classllvm_1_1AllocationOrder.html">AllocationOrder</a> &amp;Order,</div>
<div class="line"><a name="l00847"></a><span class="lineno">  847</span>&#160;    <span class="keywordtype">unsigned</span> OrderLimit, uint8_t CostPerUseLimit,</div>
<div class="line"><a name="l00848"></a><span class="lineno">  848</span>&#160;    <span class="keyword">const</span> <a class="code" href="classllvm_1_1SmallSet.html">SmallVirtRegSet</a> &amp;FixedRegisters)<span class="keyword"> const </span>{</div>
<div class="line"><a name="l00849"></a><span class="lineno">  849</span>&#160;  int64_t <a class="code" href="namespacellvm_1_1MipsISD.html#a422daf9aa810935178671306b651d69ba366e1eac31eeb1a1892d62ccfc0c8cf8">Ret</a> = 0;</div>
<div class="line"><a name="l00850"></a><span class="lineno">  850</span>&#160;  <span class="keywordflow">if</span> (isa&lt;ModelUnderTrainingRunner&gt;(getRunner())) {</div>
<div class="line"><a name="l00851"></a><span class="lineno">  851</span>&#160;    <a class="code" href="namespacellvm_1_1MipsISD.html#a422daf9aa810935178671306b651d69ba366e1eac31eeb1a1892d62ccfc0c8cf8">Ret</a> = MLEvictAdvisor::tryFindEvictionCandidatePosition(</div>
<div class="line"><a name="l00852"></a><span class="lineno">  852</span>&#160;        VirtReg, Order, OrderLimit, CostPerUseLimit, FixedRegisters);</div>
<div class="line"><a name="l00853"></a><span class="lineno">  853</span>&#160;  } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00854"></a><span class="lineno">  854</span>&#160;    <a class="code" href="classllvm_1_1MCRegister.html">MCRegister</a> PhysReg = getDefaultAdvisor().tryFindEvictionCandidate(</div>
<div class="line"><a name="l00855"></a><span class="lineno">  855</span>&#160;        VirtReg, Order, CostPerUseLimit, FixedRegisters);</div>
<div class="line"><a name="l00856"></a><span class="lineno">  856</span>&#160;    <span class="comment">// Find the index of the selected PhysReg. We need it for logging, otherwise</span></div>
<div class="line"><a name="l00857"></a><span class="lineno">  857</span>&#160;    <span class="comment">// this is wasted cycles (but so would starting development mode without a</span></div>
<div class="line"><a name="l00858"></a><span class="lineno">  858</span>&#160;    <span class="comment">// model nor logging)</span></div>
<div class="line"><a name="l00859"></a><span class="lineno">  859</span>&#160;    <span class="keywordflow">if</span> (!PhysReg)</div>
<div class="line"><a name="l00860"></a><span class="lineno">  860</span>&#160;      <a class="code" href="namespacellvm_1_1MipsISD.html#a422daf9aa810935178671306b651d69ba366e1eac31eeb1a1892d62ccfc0c8cf8">Ret</a> = CandidateVirtRegPos;</div>
<div class="line"><a name="l00861"></a><span class="lineno">  861</span>&#160;    <span class="keywordflow">else</span></div>
<div class="line"><a name="l00862"></a><span class="lineno">  862</span>&#160;      <span class="keywordflow">for</span> (<span class="keyword">auto</span> <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a> = Order.<a class="code" href="classllvm_1_1AllocationOrder.html#afef757206398af2a03907a52838b4aaf">begin</a>(), <a class="code" href="BuiltinGCs_8cpp.html#a6742d2e0a668baf1196ec69e158d5f15">E</a> = Order.<a class="code" href="classllvm_1_1AllocationOrder.html#ac8c597e6238b708d0edb8de4ec1624f8">getOrderLimitEnd</a>(OrderLimit);</div>
<div class="line"><a name="l00863"></a><span class="lineno">  863</span>&#160;           <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a> != <a class="code" href="BuiltinGCs_8cpp.html#a6742d2e0a668baf1196ec69e158d5f15">E</a>; ++<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>, ++<a class="code" href="namespacellvm_1_1MipsISD.html#a422daf9aa810935178671306b651d69ba366e1eac31eeb1a1892d62ccfc0c8cf8">Ret</a>)</div>
<div class="line"><a name="l00864"></a><span class="lineno">  864</span>&#160;        <span class="keywordflow">if</span> (*<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a> == PhysReg)</div>
<div class="line"><a name="l00865"></a><span class="lineno">  865</span>&#160;          <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00866"></a><span class="lineno">  866</span>&#160;  }</div>
<div class="line"><a name="l00867"></a><span class="lineno">  867</span>&#160;  <span class="keywordflow">if</span> (TrainingLog.empty())</div>
<div class="line"><a name="l00868"></a><span class="lineno">  868</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="namespacellvm_1_1MipsISD.html#a422daf9aa810935178671306b651d69ba366e1eac31eeb1a1892d62ccfc0c8cf8">Ret</a>;</div>
<div class="line"><a name="l00869"></a><span class="lineno">  869</span>&#160;  <span class="keywordtype">size_t</span> CurrentFeature = 0;</div>
<div class="line"><a name="l00870"></a><span class="lineno">  870</span>&#160;  <span class="keywordflow">for</span> (; CurrentFeature &lt; FeatureIDs::FeatureCount; ++CurrentFeature) {</div>
<div class="line"><a name="l00871"></a><span class="lineno">  871</span>&#160;    Log-&gt;logSpecifiedTensorValue(</div>
<div class="line"><a name="l00872"></a><span class="lineno">  872</span>&#160;        CurrentFeature, <span class="keyword">reinterpret_cast&lt;</span><span class="keyword">const </span><span class="keywordtype">char</span> *<span class="keyword">&gt;</span>(</div>
<div class="line"><a name="l00873"></a><span class="lineno">  873</span>&#160;                            getRunner().getTensorUntyped(CurrentFeature)));</div>
<div class="line"><a name="l00874"></a><span class="lineno">  874</span>&#160;  }</div>
<div class="line"><a name="l00875"></a><span class="lineno">  875</span>&#160;  <span class="keywordflow">if</span> (<span class="keyword">auto</span> *MUTR = dyn_cast&lt;ModelUnderTrainingRunner&gt;(&amp;getRunner()))</div>
<div class="line"><a name="l00876"></a><span class="lineno">  876</span>&#160;    <span class="keywordflow">for</span> (<span class="keywordtype">size_t</span> <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a> = 1; <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a> &lt; MUTR-&gt;outputLoggedFeatureSpecs().<a class="code" href="lib_2Target_2README_8txt.html#a02def7c594e9f19ff247ed0bf33d1c30">size</a>();</div>
<div class="line"><a name="l00877"></a><span class="lineno">  877</span>&#160;         ++<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>, ++CurrentFeature)</div>
<div class="line"><a name="l00878"></a><span class="lineno">  878</span>&#160;      Log-&gt;logSpecifiedTensorValue(</div>
<div class="line"><a name="l00879"></a><span class="lineno">  879</span>&#160;          CurrentFeature,</div>
<div class="line"><a name="l00880"></a><span class="lineno">  880</span>&#160;          <span class="keyword">reinterpret_cast&lt;</span><span class="keyword">const </span><span class="keywordtype">char</span> *<span class="keyword">&gt;</span>(</div>
<div class="line"><a name="l00881"></a><span class="lineno">  881</span>&#160;              MUTR-&gt;lastEvaluationResult()-&gt;getUntypedTensorValue(<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>)));</div>
<div class="line"><a name="l00882"></a><span class="lineno">  882</span>&#160;  <span class="comment">// The output is right after the features and the extra outputs</span></div>
<div class="line"><a name="l00883"></a><span class="lineno">  883</span>&#160;  Log-&gt;logInt64Value(CurrentFeature, &amp;<a class="code" href="namespacellvm_1_1MipsISD.html#a422daf9aa810935178671306b651d69ba366e1eac31eeb1a1892d62ccfc0c8cf8">Ret</a>);</div>
<div class="line"><a name="l00884"></a><span class="lineno">  884</span>&#160;  <span class="keywordflow">return</span> <a class="code" href="namespacellvm_1_1MipsISD.html#a422daf9aa810935178671306b651d69ba366e1eac31eeb1a1892d62ccfc0c8cf8">Ret</a>;</div>
<div class="line"><a name="l00885"></a><span class="lineno">  885</span>&#160;}</div>
<div class="line"><a name="l00886"></a><span class="lineno">  886</span>&#160; </div>
<div class="line"><a name="l00887"></a><span class="lineno">  887</span>&#160;<span class="keywordtype">bool</span> RegAllocScoring::runOnMachineFunction(<a class="code" href="classllvm_1_1MachineFunction.html">MachineFunction</a> &amp;MF) {</div>
<div class="line"><a name="l00888"></a><span class="lineno">  888</span>&#160;  <span class="keywordflow">if</span> (<span class="keyword">auto</span> *DevModeAnalysis = dyn_cast&lt;DevelopmentModeEvictionAdvisorAnalysis&gt;(</div>
<div class="line"><a name="l00889"></a><span class="lineno">  889</span>&#160;          &amp;getAnalysis&lt;RegAllocEvictionAdvisorAnalysis&gt;()))</div>
<div class="line"><a name="l00890"></a><span class="lineno">  890</span>&#160;    <span class="keywordflow">if</span> (<span class="keyword">auto</span> *Log = DevModeAnalysis-&gt;getLogger(MF))</div>
<div class="line"><a name="l00891"></a><span class="lineno">  891</span>&#160;      Log-&gt;logFloatFinalReward(<span class="keyword">static_cast&lt;</span><span class="keywordtype">float</span><span class="keyword">&gt;</span>(</div>
<div class="line"><a name="l00892"></a><span class="lineno">  892</span>&#160;          <a class="code" href="namespacellvm.html#a5d3e4802f0929af81173430c0786d52a">calculateRegAllocScore</a>(MF, getAnalysis&lt;MachineBlockFrequencyInfo&gt;())</div>
<div class="line"><a name="l00893"></a><span class="lineno">  893</span>&#160;              .getScore()));</div>
<div class="line"><a name="l00894"></a><span class="lineno">  894</span>&#160; </div>
<div class="line"><a name="l00895"></a><span class="lineno">  895</span>&#160;  <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l00896"></a><span class="lineno">  896</span>&#160;}</div>
<div class="line"><a name="l00897"></a><span class="lineno">  897</span>&#160;<span class="preprocessor">#endif // #ifdef LLVM_HAVE_TF_API</span></div>
<div class="line"><a name="l00898"></a><span class="lineno">  898</span>&#160; </div>
<div class="line"><a name="l00899"></a><span class="lineno"><a class="line" href="namespacellvm.html#aaf680369884a21e0564c0c19b826b6e9">  899</a></span>&#160;<a class="code" href="classllvm_1_1RegAllocEvictionAdvisorAnalysis.html">RegAllocEvictionAdvisorAnalysis</a> *<a class="code" href="namespacellvm.html#aaf680369884a21e0564c0c19b826b6e9">llvm::createReleaseModeAdvisor</a>() {</div>
<div class="line"><a name="l00900"></a><span class="lineno">  900</span>&#160;  <span class="keywordflow">return</span> <span class="keyword">new</span> ReleaseModeEvictionAdvisorAnalysis();</div>
<div class="line"><a name="l00901"></a><span class="lineno">  901</span>&#160;}</div>
<div class="line"><a name="l00902"></a><span class="lineno">  902</span>&#160; </div>
<div class="line"><a name="l00903"></a><span class="lineno">  903</span>&#160;<span class="comment">// In all cases except development mode, we don&#39;t need scoring.</span></div>
<div class="line"><a name="l00904"></a><span class="lineno">  904</span>&#160;<span class="preprocessor">#if !defined(LLVM_HAVE_TF_API)</span></div>
<div class="line"><a name="l00905"></a><span class="lineno"><a class="line" href="classllvm_1_1RegAllocScoring.html#a8dd34eac9583bd4bedb69029caa179c5">  905</a></span>&#160;<span class="keywordtype">bool</span> <a class="code" href="classllvm_1_1RegAllocScoring.html#a8dd34eac9583bd4bedb69029caa179c5">RegAllocScoring::runOnMachineFunction</a>(<a class="code" href="classllvm_1_1MachineFunction.html">MachineFunction</a> &amp;) { <span class="keywordflow">return</span> <span class="keyword">false</span>; }</div>
<div class="line"><a name="l00906"></a><span class="lineno">  906</span>&#160;<span class="preprocessor">#endif</span></div>
</div><!-- fragment --></div><!-- contents -->
<div class="ttc" id="anamespacellvm_1_1Check_html_a067ee17412e800f03802fa9517685732a3450a9712780ac26b071f9da4288a396"><div class="ttname"><a href="namespacellvm_1_1Check.html#a067ee17412e800f03802fa9517685732a3450a9712780ac26b071f9da4288a396">llvm::Check::Size</a></div><div class="ttdeci">@ Size</div><div class="ttdef"><b>Definition:</b> <a href="FileCheck_8h_source.html#l00077">FileCheck.h:77</a></div></div>
<div class="ttc" id="aLiveRegMatrix_8h_html"><div class="ttname"><a href="LiveRegMatrix_8h.html">LiveRegMatrix.h</a></div></div>
<div class="ttc" id="aNoInferenceModelRunner_8h_html"><div class="ttname"><a href="NoInferenceModelRunner_8h.html">NoInferenceModelRunner.h</a></div></div>
<div class="ttc" id="aTFUtils_8h_html"><div class="ttname"><a href="TFUtils_8h.html">TFUtils.h</a></div></div>
<div class="ttc" id="aIRTranslator_8cpp_html_abe44dfdea65b4f7e11e0a608ab708b76"><div class="ttname"><a href="IRTranslator_8cpp.html#abe44dfdea65b4f7e11e0a608ab708b76">MI</a></div><div class="ttdeci">IRTranslator LLVM IR MI</div><div class="ttdef"><b>Definition:</b> <a href="IRTranslator_8cpp_source.html#l00105">IRTranslator.cpp:105</a></div></div>
<div class="ttc" id="anamespacellvm_html"><div class="ttname"><a href="namespacellvm.html">llvm</a></div><div class="ttdoc">This is an optimization pass for GlobalISel generic memory operations.</div><div class="ttdef"><b>Definition:</b> <a href="AddressRanges_8h_source.html#l00018">AddressRanges.h:18</a></div></div>
<div class="ttc" id="aclassllvm_1_1LLVMContext_html_af9b0580a6e16e16bd3379f73e92a616d"><div class="ttname"><a href="classllvm_1_1LLVMContext.html#af9b0580a6e16e16bd3379f73e92a616d">llvm::LLVMContext::emitError</a></div><div class="ttdeci">void emitError(uint64_t LocCookie, const Twine &amp;ErrorStr)</div><div class="ttdoc">emitError - Emit an error message to the currently installed error handler with optional location inf...</div><div class="ttdef"><b>Definition:</b> <a href="LLVMContext_8cpp_source.html#l00266">LLVMContext.cpp:266</a></div></div>
<div class="ttc" id="alib_2Target_2X86_2README_8txt_html_ac88fe1d3a61b056a4f64fbbb156a62ff"><div class="ttname"><a href="lib_2Target_2X86_2README_8txt.html#ac88fe1d3a61b056a4f64fbbb156a62ff">M</a></div><div class="ttdeci">We currently emits eax Perhaps this is what we really should generate is Is imull three or four cycles eax eax The current instruction priority is based on pattern complexity The former is more complex because it folds a load so the latter will not be emitted Perhaps we should use AddedComplexity to give LEA32r a higher priority We should always try to match LEA first since the LEA matching code does some estimate to determine whether the match is profitable if we care more about code then imull is better It s two bytes shorter than movl leal On a Pentium M</div><div class="ttdef"><b>Definition:</b> <a href="lib_2Target_2X86_2README_8txt_source.html#l00252">README.txt:252</a></div></div>
<div class="ttc" id="aMLRegallocEvictAdvisor_8cpp_html_a89522bf7a3fed31fd598afa139a2462c"><div class="ttname"><a href="MLRegallocEvictAdvisor_8cpp.html#a89522bf7a3fed31fd598afa139a2462c">SET</a></div><div class="ttdeci">#define SET(ID, TYPE, VAL)</div></div>
<div class="ttc" id="anamespacellvm_html_a02981de53fb6ffd384d39addc4d25f37"><div class="ttname"><a href="namespacellvm.html#a02981de53fb6ffd384d39addc4d25f37">llvm::drop_begin</a></div><div class="ttdeci">auto drop_begin(T &amp;&amp;RangeOrContainer, size_t N=1)</div><div class="ttdoc">Return a range covering RangeOrContainer with the first N elements excluded.</div><div class="ttdef"><b>Definition:</b> <a href="STLExtras_8h_source.html#l00280">STLExtras.h:280</a></div></div>
<div class="ttc" id="aclassllvm_1_1RegAllocEvictionAdvisorAnalysis_html"><div class="ttname"><a href="classllvm_1_1RegAllocEvictionAdvisorAnalysis.html">llvm::RegAllocEvictionAdvisorAnalysis</a></div><div class="ttdoc">ImmutableAnalysis abstraction for fetching the Eviction Advisor.</div><div class="ttdef"><b>Definition:</b> <a href="RegAllocEvictionAdvisor_8h_source.html#l00168">RegAllocEvictionAdvisor.h:168</a></div></div>
<div class="ttc" id="aAllocationOrder_8h_html"><div class="ttname"><a href="AllocationOrder_8h.html">AllocationOrder.h</a></div></div>
<div class="ttc" id="aclassT_html"><div class="ttname"><a href="classT.html">T</a></div></div>
<div class="ttc" id="aclassllvm_1_1Loop_html"><div class="ttname"><a href="classllvm_1_1Loop.html">llvm::Loop</a></div><div class="ttdoc">Represents a single loop in the control flow graph.</div><div class="ttdef"><b>Definition:</b> <a href="LoopInfo_8h_source.html#l00546">LoopInfo.h:546</a></div></div>
<div class="ttc" id="aPass_8h_html"><div class="ttname"><a href="Pass_8h.html">Pass.h</a></div></div>
<div class="ttc" id="aclassllvm_1_1TargetSubtargetInfo_html_ad34f7e3cd7a9add3ab2529e267b48004"><div class="ttname"><a href="classllvm_1_1TargetSubtargetInfo.html#ad34f7e3cd7a9add3ab2529e267b48004">llvm::TargetSubtargetInfo::getInstrInfo</a></div><div class="ttdeci">virtual const TargetInstrInfo * getInstrInfo() const</div><div class="ttdef"><b>Definition:</b> <a href="TargetSubtargetInfo_8h_source.html#l00093">TargetSubtargetInfo.h:93</a></div></div>
<div class="ttc" id="anamespacellvm_html_a5d3e4802f0929af81173430c0786d52a"><div class="ttname"><a href="namespacellvm.html#a5d3e4802f0929af81173430c0786d52a">llvm::calculateRegAllocScore</a></div><div class="ttdeci">RegAllocScore calculateRegAllocScore(const MachineFunction &amp;MF, const MachineBlockFrequencyInfo &amp;MBFI)</div><div class="ttdoc">Calculate a score.</div><div class="ttdef"><b>Definition:</b> <a href="RegAllocScore_8cpp_source.html#l00076">RegAllocScore.cpp:76</a></div></div>
<div class="ttc" id="aclassllvm_1_1Register_html_a488b598369bef536fa5ee42d3527ec45"><div class="ttname"><a href="classllvm_1_1Register.html#a488b598369bef536fa5ee42d3527ec45">llvm::Register::id</a></div><div class="ttdeci">unsigned id() const</div><div class="ttdef"><b>Definition:</b> <a href="Register_8h_source.html#l00111">Register.h:111</a></div></div>
<div class="ttc" id="aMLModelRunner_8h_html"><div class="ttname"><a href="MLModelRunner_8h.html">MLModelRunner.h</a></div></div>
<div class="ttc" id="aTensorSpec_8h_html"><div class="ttname"><a href="TensorSpec_8h.html">TensorSpec.h</a></div></div>
<div class="ttc" id="aHexagonHardwareLoops_8cpp_html_ada7c1594a393ede3ce32602d64d7ddb2"><div class="ttname"><a href="HexagonHardwareLoops_8cpp.html#ada7c1594a393ede3ce32602d64d7ddb2">Loops</a></div><div class="ttdeci">Hexagon Hardware Loops</div><div class="ttdef"><b>Definition:</b> <a href="HexagonHardwareLoops_8cpp_source.html#l00372">HexagonHardwareLoops.cpp:372</a></div></div>
<div class="ttc" id="aclassllvm_1_1RegAllocScoring_html_a8cbbae1b1efd440108596b636053bf37"><div class="ttname"><a href="classllvm_1_1RegAllocScoring.html#a8cbbae1b1efd440108596b636053bf37">llvm::RegAllocScoring::~RegAllocScoring</a></div><div class="ttdeci">~RegAllocScoring() override=default</div></div>
<div class="ttc" id="aclassllvm_1_1LiveInterval_html_a1a07a284547e2997c90a6a1be428cd47"><div class="ttname"><a href="classllvm_1_1LiveInterval.html#a1a07a284547e2997c90a6a1be428cd47">llvm::LiveInterval::isSpillable</a></div><div class="ttdeci">bool isSpillable() const</div><div class="ttdoc">isSpillable - Can this interval be spilled?</div><div class="ttdef"><b>Definition:</b> <a href="LiveInterval_8h_source.html#l00819">LiveInterval.h:819</a></div></div>
<div class="ttc" id="aclassllvm_1_1SmallVector_html"><div class="ttname"><a href="classllvm_1_1SmallVector.html">llvm::SmallVector</a></div><div class="ttdoc">This is a 'vector' (really, a variable-sized array), optimized for the case when the array is small.</div><div class="ttdef"><b>Definition:</b> <a href="SmallVector_8h_source.html#l01185">SmallVector.h:1185</a></div></div>
<div class="ttc" id="anamespacellvm_1_1RISCVFenceField_html_a147be9e9780c1e33363ea572d4c7b25fa05c79fbfc58d9dd2851c467a1ef166bf"><div class="ttname"><a href="namespacellvm_1_1RISCVFenceField.html#a147be9e9780c1e33363ea572d4c7b25fa05c79fbfc58d9dd2851c467a1ef166bf">llvm::RISCVFenceField::W</a></div><div class="ttdeci">@ W</div><div class="ttdef"><b>Definition:</b> <a href="RISCVBaseInfo_8h_source.html#l00242">RISCVBaseInfo.h:242</a></div></div>
<div class="ttc" id="aclassllvm_1_1LiveInterval_html_a0fc46dffc68d1302d150b7e4c28c7983"><div class="ttname"><a href="classllvm_1_1LiveInterval.html#a0fc46dffc68d1302d150b7e4c28c7983">llvm::LiveInterval::weight</a></div><div class="ttdeci">float weight() const</div><div class="ttdef"><b>Definition:</b> <a href="LiveInterval_8h_source.html#l00718">LiveInterval.h:718</a></div></div>
<div class="ttc" id="aSupport_2ErrorHandling_8h_html"><div class="ttname"><a href="Support_2ErrorHandling_8h.html">ErrorHandling.h</a></div></div>
<div class="ttc" id="anamespacellvm_1_1X86Disassembler_html_a1e59b79e1d09149912cad9c0ef2809ad"><div class="ttname"><a href="namespacellvm_1_1X86Disassembler.html#a1e59b79e1d09149912cad9c0ef2809ad">llvm::X86Disassembler::Reg</a></div><div class="ttdeci">Reg</div><div class="ttdoc">All possible values of the reg field in the ModR/M byte.</div><div class="ttdef"><b>Definition:</b> <a href="X86DisassemblerDecoder_8h_source.html#l00462">X86DisassemblerDecoder.h:462</a></div></div>
<div class="ttc" id="aclassllvm_1_1MachineBlockFrequencyInfo_html_ad189a61a150fd97af1f0b15fed77974f"><div class="ttname"><a href="classllvm_1_1MachineBlockFrequencyInfo.html#ad189a61a150fd97af1f0b15fed77974f">llvm::MachineBlockFrequencyInfo::getBlockFreqRelativeToEntryBlock</a></div><div class="ttdeci">float getBlockFreqRelativeToEntryBlock(const MachineBasicBlock *MBB) const</div><div class="ttdoc">Compute the frequency of the block, relative to the entry block.</div><div class="ttdef"><b>Definition:</b> <a href="MachineBlockFrequencyInfo_8h_source.html#l00068">MachineBlockFrequencyInfo.h:68</a></div></div>
<div class="ttc" id="aclassllvm_1_1MachineRegisterInfo_1_1defusechain__instr__iterator_html"><div class="ttname"><a href="classllvm_1_1MachineRegisterInfo_1_1defusechain__instr__iterator.html">llvm::MachineRegisterInfo::defusechain_instr_iterator</a></div><div class="ttdoc">defusechain_iterator - This class provides iterator support for machine operands in the function that...</div><div class="ttdef"><b>Definition:</b> <a href="MachineRegisterInfo_8h_source.html#l00277">MachineRegisterInfo.h:277</a></div></div>
<div class="ttc" id="aclassllvm_1_1MachineFunctionPass_html"><div class="ttname"><a href="classllvm_1_1MachineFunctionPass.html">llvm::MachineFunctionPass</a></div><div class="ttdoc">MachineFunctionPass - This class adapts the FunctionPass interface to allow convenient creation of pa...</div><div class="ttdef"><b>Definition:</b> <a href="MachineFunctionPass_8h_source.html#l00030">MachineFunctionPass.h:30</a></div></div>
<div class="ttc" id="aclassllvm_1_1RAGreedy_html"><div class="ttname"><a href="classllvm_1_1RAGreedy.html">llvm::RAGreedy</a></div><div class="ttdef"><b>Definition:</b> <a href="RegAllocGreedy_8h_source.html#l00060">RegAllocGreedy.h:60</a></div></div>
<div class="ttc" id="aRegisterClassInfo_8h_html"><div class="ttname"><a href="RegisterClassInfo_8h.html">RegisterClassInfo.h</a></div></div>
<div class="ttc" id="aclassllvm_1_1TargetSubtargetInfo_html_a87849514193302b75f50a8092f94b98a"><div class="ttname"><a href="classllvm_1_1TargetSubtargetInfo.html#a87849514193302b75f50a8092f94b98a">llvm::TargetSubtargetInfo::getRegisterInfo</a></div><div class="ttdeci">virtual const TargetRegisterInfo * getRegisterInfo() const</div><div class="ttdoc">getRegisterInfo - If register information is available, return it.</div><div class="ttdef"><b>Definition:</b> <a href="TargetSubtargetInfo_8h_source.html#l00125">TargetSubtargetInfo.h:125</a></div></div>
<div class="ttc" id="anamespacellvm_1_1cl_html_a68075925a54790e71ca790e1d4f21a40a263ac008d8d31f13ce460395fc4cf7e6"><div class="ttname"><a href="namespacellvm_1_1cl.html#a68075925a54790e71ca790e1d4f21a40a263ac008d8d31f13ce460395fc4cf7e6">llvm::cl::Hidden</a></div><div class="ttdeci">@ Hidden</div><div class="ttdef"><b>Definition:</b> <a href="CommandLine_8h_source.html#l00139">CommandLine.h:139</a></div></div>
<div class="ttc" id="aclassllvm_1_1TargetRegisterInfo_html"><div class="ttname"><a href="classllvm_1_1TargetRegisterInfo.html">llvm::TargetRegisterInfo</a></div><div class="ttdoc">TargetRegisterInfo base class - We assume that the target defines a static array of TargetRegisterDes...</div><div class="ttdef"><b>Definition:</b> <a href="TargetRegisterInfo_8h_source.html#l00234">TargetRegisterInfo.h:234</a></div></div>
<div class="ttc" id="aclassllvm_1_1Function_html_a9fffac2512fe651f0d5e37e27f5bd51c"><div class="ttname"><a href="classllvm_1_1Function.html#a9fffac2512fe651f0d5e37e27f5bd51c">llvm::Function::getContext</a></div><div class="ttdeci">LLVMContext &amp; getContext() const</div><div class="ttdoc">getContext - Return a reference to the LLVMContext associated with this function.</div><div class="ttdef"><b>Definition:</b> <a href="Function_8cpp_source.html#l00320">Function.cpp:320</a></div></div>
<div class="ttc" id="anamespacellvm_html_a469101ea87b8b432a1b4f7935c97f35c"><div class="ttname"><a href="namespacellvm.html#a469101ea87b8b432a1b4f7935c97f35c">llvm::reverse</a></div><div class="ttdeci">auto reverse(ContainerTy &amp;&amp;C, std::enable_if_t&lt; has_rbegin&lt; ContainerTy &gt;::value &gt; *=nullptr)</div><div class="ttdef"><b>Definition:</b> <a href="STLExtras_8h_source.html#l00380">STLExtras.h:380</a></div></div>
<div class="ttc" id="aclassllvm_1_1SmallSet_html"><div class="ttname"><a href="classllvm_1_1SmallSet.html">llvm::SmallSet</a></div><div class="ttdoc">SmallSet - This maintains a set of unique values, optimizing for the case when the set is small (less...</div><div class="ttdef"><b>Definition:</b> <a href="SmallSet_8h_source.html#l00136">SmallSet.h:136</a></div></div>
<div class="ttc" id="aclassllvm_1_1MachineRegisterInfo_html_ae73582bbbc71758dcac70cd8c56210e4"><div class="ttname"><a href="classllvm_1_1MachineRegisterInfo.html#ae73582bbbc71758dcac70cd8c56210e4">llvm::MachineRegisterInfo::getNumVirtRegs</a></div><div class="ttdeci">unsigned getNumVirtRegs() const</div><div class="ttdoc">getNumVirtRegs - Return the number of virtual registers created.</div><div class="ttdef"><b>Definition:</b> <a href="MachineRegisterInfo_8h_source.html#l00765">MachineRegisterInfo.h:765</a></div></div>
<div class="ttc" id="aclassllvm_1_1SmallPtrSet_html"><div class="ttname"><a href="classllvm_1_1SmallPtrSet.html">llvm::SmallPtrSet</a></div><div class="ttdoc">SmallPtrSet - This class implements a set which is optimized for holding SmallSize or less elements.</div><div class="ttdef"><b>Definition:</b> <a href="SmallPtrSet_8h_source.html#l00450">SmallPtrSet.h:450</a></div></div>
<div class="ttc" id="aclassllvm_1_1Register_html_a1979c563289f871907832e419889f979"><div class="ttname"><a href="classllvm_1_1Register.html#a1979c563289f871907832e419889f979">llvm::Register::index2VirtReg</a></div><div class="ttdeci">static Register index2VirtReg(unsigned Index)</div><div class="ttdoc">Convert a 0-based index to a virtual register number.</div><div class="ttdef"><b>Definition:</b> <a href="Register_8h_source.html#l00084">Register.h:84</a></div></div>
<div class="ttc" id="anamespacellvm_html_ab4d4bc901fedd8857f647dcc2c0d71de"><div class="ttname"><a href="namespacellvm.html#ab4d4bc901fedd8857f647dcc2c0d71de">llvm::max</a></div><div class="ttdeci">Expected&lt; ExpressionValue &gt; max(const ExpressionValue &amp;Lhs, const ExpressionValue &amp;Rhs)</div><div class="ttdef"><b>Definition:</b> <a href="FileCheck_8cpp_source.html#l00337">FileCheck.cpp:337</a></div></div>
<div class="ttc" id="aclassllvm_1_1AllocationOrder_html_afef757206398af2a03907a52838b4aaf"><div class="ttname"><a href="classllvm_1_1AllocationOrder.html#afef757206398af2a03907a52838b4aaf">llvm::AllocationOrder::begin</a></div><div class="ttdeci">Iterator begin() const</div><div class="ttdef"><b>Definition:</b> <a href="AllocationOrder_8h_source.html#l00095">AllocationOrder.h:95</a></div></div>
<div class="ttc" id="anamespacellvm_1_1MipsISD_html_a422daf9aa810935178671306b651d69ba366e1eac31eeb1a1892d62ccfc0c8cf8"><div class="ttname"><a href="namespacellvm_1_1MipsISD.html#a422daf9aa810935178671306b651d69ba366e1eac31eeb1a1892d62ccfc0c8cf8">llvm::MipsISD::Ret</a></div><div class="ttdeci">@ Ret</div><div class="ttdef"><b>Definition:</b> <a href="MipsISelLowering_8h_source.html#l00119">MipsISelLowering.h:119</a></div></div>
<div class="ttc" id="aModelUnderTrainingRunner_8h_html"><div class="ttname"><a href="ModelUnderTrainingRunner_8h.html">ModelUnderTrainingRunner.h</a></div></div>
<div class="ttc" id="aclassllvm_1_1RegAllocScoring_html_a534cb3da17861d1e05bcd75c116dbc5f"><div class="ttname"><a href="classllvm_1_1RegAllocScoring.html#a534cb3da17861d1e05bcd75c116dbc5f">llvm::RegAllocScoring::getPassName</a></div><div class="ttdeci">StringRef getPassName() const override</div><div class="ttdoc">getPassName - Return a nice clean name for a pass.</div><div class="ttdef"><b>Definition:</b> <a href="MLRegallocEvictAdvisor_8cpp_source.html#l00084">MLRegallocEvictAdvisor.cpp:84</a></div></div>
<div class="ttc" id="aMLRegallocEvictAdvisor_8cpp_html_a67992ab5238ce8b5d25addba661f0db0"><div class="ttname"><a href="MLRegallocEvictAdvisor_8cpp.html#a67992ab5238ce8b5d25addba661f0db0">EvictInterferenceCutoff</a></div><div class="ttdeci">cl::opt&lt; unsigned &gt; EvictInterferenceCutoff</div></div>
<div class="ttc" id="aPassRegistry_8h_html"><div class="ttname"><a href="PassRegistry_8h.html">PassRegistry.h</a></div></div>
<div class="ttc" id="aMachineSink_8cpp_html_a0f36ed1bc17fc1aa97fe291c439a0698"><div class="ttname"><a href="MachineSink_8cpp.html#a0f36ed1bc17fc1aa97fe291c439a0698">TRI</a></div><div class="ttdeci">unsigned const TargetRegisterInfo * TRI</div><div class="ttdef"><b>Definition:</b> <a href="MachineSink_8cpp_source.html#l01628">MachineSink.cpp:1628</a></div></div>
<div class="ttc" id="aclassllvm_1_1MachineFunctionPass_html_a864fd57b4304ef933b3281d0ef85a88e"><div class="ttname"><a href="classllvm_1_1MachineFunctionPass.html#a864fd57b4304ef933b3281d0ef85a88e">llvm::MachineFunctionPass::getAnalysisUsage</a></div><div class="ttdeci">void getAnalysisUsage(AnalysisUsage &amp;AU) const override</div><div class="ttdoc">getAnalysisUsage - Subclasses that override getAnalysisUsage must call this.</div><div class="ttdef"><b>Definition:</b> <a href="MachineFunctionPass_8cpp_source.html#l00132">MachineFunctionPass.cpp:132</a></div></div>
<div class="ttc" id="anamespacellvm_1_1RISCVFenceField_html_a147be9e9780c1e33363ea572d4c7b25fa1835091d83e0e052cd1a32c99b2be731"><div class="ttname"><a href="namespacellvm_1_1RISCVFenceField.html#a147be9e9780c1e33363ea572d4c7b25fa1835091d83e0e052cd1a32c99b2be731">llvm::RISCVFenceField::R</a></div><div class="ttdeci">@ R</div><div class="ttdef"><b>Definition:</b> <a href="RISCVBaseInfo_8h_source.html#l00241">RISCVBaseInfo.h:241</a></div></div>
<div class="ttc" id="aclassllvm_1_1MachineLoopInfo_html"><div class="ttname"><a href="classllvm_1_1MachineLoopInfo.html">llvm::MachineLoopInfo</a></div><div class="ttdef"><b>Definition:</b> <a href="MachineLoopInfo_8h_source.html#l00089">MachineLoopInfo.h:89</a></div></div>
<div class="ttc" id="aMachineRegisterInfo_8h_html"><div class="ttname"><a href="MachineRegisterInfo_8h.html">MachineRegisterInfo.h</a></div></div>
<div class="ttc" id="aclassllvm_1_1MLModelRunner_html_a472d392aabef5a2abd57cf0ffa509da4"><div class="ttname"><a href="classllvm_1_1MLModelRunner.html#a472d392aabef5a2abd57cf0ffa509da4">llvm::MLModelRunner::getTensor</a></div><div class="ttdeci">T * getTensor(I FeatureID)</div><div class="ttdef"><b>Definition:</b> <a href="MLModelRunner_8h_source.html#l00035">MLModelRunner.h:35</a></div></div>
<div class="ttc" id="aclassllvm_1_1LiveRange_html_a9b4b2c1bb443279588bd6582ad6a86b2"><div class="ttname"><a href="classllvm_1_1LiveRange.html#a9b4b2c1bb443279588bd6582ad6a86b2">llvm::LiveRange::beginIndex</a></div><div class="ttdeci">SlotIndex beginIndex() const</div><div class="ttdoc">beginIndex - Return the lowest numbered slot covered.</div><div class="ttdef"><b>Definition:</b> <a href="LiveInterval_8h_source.html#l00385">LiveInterval.h:385</a></div></div>
<div class="ttc" id="aCommandLine_8h_html"><div class="ttname"><a href="CommandLine_8h.html">CommandLine.h</a></div></div>
<div class="ttc" id="aclassllvm_1_1MachineFunction_html_ab4a6ca428289b667dd691a00e9f7e334"><div class="ttname"><a href="classllvm_1_1MachineFunction.html#ab4a6ca428289b667dd691a00e9f7e334">llvm::MachineFunction::getRegInfo</a></div><div class="ttdeci">MachineRegisterInfo &amp; getRegInfo()</div><div class="ttdoc">getRegInfo - Return information about the registers currently in use.</div><div class="ttdef"><b>Definition:</b> <a href="MachineFunction_8h_source.html#l00666">MachineFunction.h:666</a></div></div>
<div class="ttc" id="aMLRegallocEvictAdvisor_8cpp_html_a31d7c26a433d132cca4ea4faa86e0869"><div class="ttname"><a href="MLRegallocEvictAdvisor_8cpp.html#a31d7c26a433d132cca4ea4faa86e0869">_FEATURE_IDX</a></div><div class="ttdeci">#define _FEATURE_IDX(_, name, __, ___)</div></div>
<div class="ttc" id="anamespacellvm_1_1sys_1_1fs_html_abdd94fa12f11dbe4ddc248f5684dd7c1"><div class="ttname"><a href="namespacellvm_1_1sys_1_1fs.html#abdd94fa12f11dbe4ddc248f5684dd7c1">llvm::sys::fs::is_local</a></div><div class="ttdeci">std::error_code is_local(const Twine &amp;path, bool &amp;result)</div><div class="ttdoc">Is the file mounted on a local filesystem?</div></div>
<div class="ttc" id="aMachineLoopInfo_8h_html"><div class="ttname"><a href="MachineLoopInfo_8h.html">MachineLoopInfo.h</a></div></div>
<div class="ttc" id="aclassllvm_1_1PassRegistry_html_a05a729900b76c89e808c6c3094921b2f"><div class="ttname"><a href="classllvm_1_1PassRegistry.html#a05a729900b76c89e808c6c3094921b2f">llvm::PassRegistry::getPassRegistry</a></div><div class="ttdeci">static PassRegistry * getPassRegistry()</div><div class="ttdoc">getPassRegistry - Access the global registry object, which is automatically initialized at applicatio...</div><div class="ttdef"><b>Definition:</b> <a href="PassRegistry_8cpp_source.html#l00024">PassRegistry.cpp:24</a></div></div>
<div class="ttc" id="aclassllvm_1_1MachineBlockFrequencyInfo_html"><div class="ttname"><a href="classllvm_1_1MachineBlockFrequencyInfo.html">llvm::MachineBlockFrequencyInfo</a></div><div class="ttdoc">MachineBlockFrequencyInfo pass uses BlockFrequencyInfoImpl implementation to estimate machine basic b...</div><div class="ttdef"><b>Definition:</b> <a href="MachineBlockFrequencyInfo_8h_source.html#l00033">MachineBlockFrequencyInfo.h:33</a></div></div>
<div class="ttc" id="aRegAllocScore_8h_html"><div class="ttname"><a href="RegAllocScore_8h.html">RegAllocScore.h</a></div></div>
<div class="ttc" id="anamespacellvm_html_a74754af06fcdbb71b2ddbfaa75ed09c5"><div class="ttname"><a href="namespacellvm.html#a74754af06fcdbb71b2ddbfaa75ed09c5">llvm::DecisionName</a></div><div class="ttdeci">const char *const DecisionName</div><div class="ttdef"><b>Definition:</b> <a href="MLInlineAdvisor_8cpp_source.html#l00075">MLInlineAdvisor.cpp:75</a></div></div>
<div class="ttc" id="aclassllvm_1_1MLModelRunner_html_a65abc20c9cc5887af0af8a8a807f6151"><div class="ttname"><a href="classllvm_1_1MLModelRunner.html#a65abc20c9cc5887af0af8a8a807f6151">llvm::MLModelRunner::evaluate</a></div><div class="ttdeci">T evaluate()</div><div class="ttdef"><b>Definition:</b> <a href="MLModelRunner_8h_source.html#l00031">MLModelRunner.h:31</a></div></div>
<div class="ttc" id="aBuiltinGCs_8cpp_html_a6742d2e0a668baf1196ec69e158d5f15"><div class="ttname"><a href="BuiltinGCs_8cpp.html#a6742d2e0a668baf1196ec69e158d5f15">E</a></div><div class="ttdeci">static GCRegistry::Add&lt; CoreCLRGC &gt; E(&quot;coreclr&quot;, &quot;CoreCLR-compatible GC&quot;)</div></div>
<div class="ttc" id="aclassllvm_1_1SmallVectorImpl_html_ac56f67ff590e79d76f8ebd243e4cf442"><div class="ttname"><a href="classllvm_1_1SmallVectorImpl.html#ac56f67ff590e79d76f8ebd243e4cf442">llvm::SmallVectorImpl::append</a></div><div class="ttdeci">void append(in_iter in_start, in_iter in_end)</div><div class="ttdoc">Add the specified range to the end of the SmallVector.</div><div class="ttdef"><b>Definition:</b> <a href="SmallVector_8h_source.html#l00667">SmallVector.h:667</a></div></div>
<div class="ttc" id="aGVN_8cpp_html_ae8ec32a9818e9fd7c653c86bc0c4dc7ea78945de8de090e90045d299651a68a9b"><div class="ttname"><a href="GVN_8cpp.html#ae8ec32a9818e9fd7c653c86bc0c4dc7ea78945de8de090e90045d299651a68a9b">AvailabilityState::Available</a></div><div class="ttdeci">@ Available</div><div class="ttdoc">We know the block is fully available. This is a fixpoint.</div></div>
<div class="ttc" id="anamespacellvm_html_a81973eb0c2304a2d8a2f44d7d3da8fa4ab3dc0864c572a7f8895334b0f8d235d4"><div class="ttname"><a href="namespacellvm.html#a81973eb0c2304a2d8a2f44d7d3da8fa4ab3dc0864c572a7f8895334b0f8d235d4">llvm::RS_Done</a></div><div class="ttdeci">@ RS_Done</div><div class="ttdoc">There is nothing more we can do to this live range.</div><div class="ttdef"><b>Definition:</b> <a href="RegAllocEvictionAdvisor_8h_source.html#l00071">RegAllocEvictionAdvisor.h:71</a></div></div>
<div class="ttc" id="aclassllvm_1_1AnalysisUsage_html"><div class="ttname"><a href="classllvm_1_1AnalysisUsage.html">llvm::AnalysisUsage</a></div><div class="ttdoc">Represent the analysis usage information of a pass.</div><div class="ttdef"><b>Definition:</b> <a href="PassAnalysisSupport_8h_source.html#l00047">PassAnalysisSupport.h:47</a></div></div>
<div class="ttc" id="aclassllvm_1_1MachineRegisterInfo_html_a29a1144eb9d753b6b682a933aa3f8f9f"><div class="ttname"><a href="classllvm_1_1MachineRegisterInfo.html#a29a1144eb9d753b6b682a933aa3f8f9f">llvm::MachineRegisterInfo::reg_instr_nodbg_end</a></div><div class="ttdeci">static reg_instr_nodbg_iterator reg_instr_nodbg_end()</div><div class="ttdef"><b>Definition:</b> <a href="MachineRegisterInfo_8h_source.html#l00357">MachineRegisterInfo.h:357</a></div></div>
<div class="ttc" id="anamespacellvm_html_a9d8c20f9225883cc47bc3a304876c085"><div class="ttname"><a href="namespacellvm.html#a9d8c20f9225883cc47bc3a304876c085">llvm::createDevelopmentModeAdvisor</a></div><div class="ttdeci">RegAllocEvictionAdvisorAnalysis * createDevelopmentModeAdvisor()</div></div>
<div class="ttc" id="aclassllvm_1_1RegAllocEvictionAdvisorAnalysis_html_a005390fe88a690353da791886d6c1dcd"><div class="ttname"><a href="classllvm_1_1RegAllocEvictionAdvisorAnalysis.html#a005390fe88a690353da791886d6c1dcd">llvm::RegAllocEvictionAdvisorAnalysis::getAnalysisUsage</a></div><div class="ttdeci">void getAnalysisUsage(AnalysisUsage &amp;AU) const override</div><div class="ttdoc">getAnalysisUsage - This function should be overriden by passes that need analysis information to do t...</div><div class="ttdef"><b>Definition:</b> <a href="RegAllocEvictionAdvisor_8h_source.html#l00184">RegAllocEvictionAdvisor.h:184</a></div></div>
<div class="ttc" id="aclassllvm_1_1RegAllocScoring_html_a8dd34eac9583bd4bedb69029caa179c5"><div class="ttname"><a href="classllvm_1_1RegAllocScoring.html#a8dd34eac9583bd4bedb69029caa179c5">llvm::RegAllocScoring::runOnMachineFunction</a></div><div class="ttdeci">bool runOnMachineFunction(MachineFunction &amp;) override</div><div class="ttdoc">Performs this pass.</div><div class="ttdef"><b>Definition:</b> <a href="MLRegallocEvictAdvisor_8cpp_source.html#l00905">MLRegallocEvictAdvisor.cpp:905</a></div></div>
<div class="ttc" id="anamespacellvm_html_a8ebd711519aa7eda8a5dc8415622f6cf"><div class="ttname"><a href="namespacellvm.html#a8ebd711519aa7eda8a5dc8415622f6cf">llvm::createRegAllocScoringPass</a></div><div class="ttdeci">FunctionPass * createRegAllocScoringPass()</div><div class="ttdoc">When learning an eviction policy, extract score(reward) information, otherwise this does nothing.</div><div class="ttdef"><b>Definition:</b> <a href="MLRegallocEvictAdvisor_8cpp_source.html#l00101">MLRegallocEvictAdvisor.cpp:101</a></div></div>
<div class="ttc" id="aclassllvm_1_1LiveInterval_html"><div class="ttname"><a href="classllvm_1_1LiveInterval.html">llvm::LiveInterval</a></div><div class="ttdoc">LiveInterval - This class represents the liveness of a register, or stack slot.</div><div class="ttdef"><b>Definition:</b> <a href="LiveInterval_8h_source.html#l00686">LiveInterval.h:686</a></div></div>
<div class="ttc" id="aMLRegallocEvictAdvisor_8cpp_html_af5207224175d6dbe81f39fbae5ab0375"><div class="ttname"><a href="MLRegallocEvictAdvisor_8cpp.html#af5207224175d6dbe81f39fbae5ab0375">_DECL_FEATURES</a></div><div class="ttdeci">#define _DECL_FEATURES(type, name, shape, _)</div></div>
<div class="ttc" id="aclassllvm_1_1SlotIndex_html"><div class="ttname"><a href="classllvm_1_1SlotIndex.html">llvm::SlotIndex</a></div><div class="ttdoc">SlotIndex - An opaque wrapper around machine indexes.</div><div class="ttdef"><b>Definition:</b> <a href="SlotIndexes_8h_source.html#l00082">SlotIndexes.h:82</a></div></div>
<div class="ttc" id="anamespacellvm_html_a6497a581a4f7152729c29a368ac7d7be"><div class="ttname"><a href="namespacellvm.html#a6497a581a4f7152729c29a368ac7d7be">llvm::None</a></div><div class="ttdeci">const NoneType None</div><div class="ttdef"><b>Definition:</b> <a href="None_8h_source.html#l00024">None.h:24</a></div></div>
<div class="ttc" id="anamespacellvm_1_1CallingConv_html_a188c0836f8c3528401f1c236fd93b977"><div class="ttname"><a href="namespacellvm_1_1CallingConv.html#a188c0836f8c3528401f1c236fd93b977">llvm::CallingConv::ID</a></div><div class="ttdeci">unsigned ID</div><div class="ttdoc">LLVM IR allows to use arbitrary numbers as calling convention identifiers.</div><div class="ttdef"><b>Definition:</b> <a href="CallingConv_8h_source.html#l00024">CallingConv.h:24</a></div></div>
<div class="ttc" id="aclassllvm_1_1StringMap_html"><div class="ttname"><a href="classllvm_1_1StringMap.html">llvm::StringMap</a></div><div class="ttdoc">StringMap - This is an unconventional map that is specialized for handling keys that are &quot;strings&quot;,...</div><div class="ttdef"><b>Definition:</b> <a href="StringMap_8h_source.html#l00110">StringMap.h:110</a></div></div>
<div class="ttc" id="aclassllvm_1_1MachineRegisterInfo_html_aa363afffca4fc13a709673936b47fe33"><div class="ttname"><a href="classllvm_1_1MachineRegisterInfo.html#aa363afffca4fc13a709673936b47fe33">llvm::MachineRegisterInfo::getRegClass</a></div><div class="ttdeci">const TargetRegisterClass * getRegClass(Register Reg) const</div><div class="ttdoc">Return the register class of the specified virtual register.</div><div class="ttdef"><b>Definition:</b> <a href="MachineRegisterInfo_8h_source.html#l00642">MachineRegisterInfo.h:642</a></div></div>
<div class="ttc" id="aCodeGen_2Passes_8h_html"><div class="ttname"><a href="CodeGen_2Passes_8h.html">Passes.h</a></div></div>
<div class="ttc" id="aclassllvm_1_1SlotIndex_html_ac0e7a3dd45019c076653747e34bbb9f2"><div class="ttname"><a href="classllvm_1_1SlotIndex.html#ac0e7a3dd45019c076653747e34bbb9f2">llvm::SlotIndex::getPrevIndex</a></div><div class="ttdeci">SlotIndex getPrevIndex() const</div><div class="ttdoc">Returns the previous index.</div><div class="ttdef"><b>Definition:</b> <a href="SlotIndexes_8h_source.html#l00298">SlotIndexes.h:298</a></div></div>
<div class="ttc" id="aclassllvm_1_1MachineFunction_html_a325f6b611ef9ec06798d3b4eb9572093"><div class="ttname"><a href="classllvm_1_1MachineFunction.html#a325f6b611ef9ec06798d3b4eb9572093">llvm::MachineFunction::getSubtarget</a></div><div class="ttdeci">const TargetSubtargetInfo &amp; getSubtarget() const</div><div class="ttdoc">getSubtarget - Return the subtarget for which this machine code is being compiled.</div><div class="ttdef"><b>Definition:</b> <a href="MachineFunction_8h_source.html#l00656">MachineFunction.h:656</a></div></div>
<div class="ttc" id="aclassllvm_1_1cl_1_1opt_html"><div class="ttname"><a href="classllvm_1_1cl_1_1opt.html">llvm::cl::opt</a></div><div class="ttdef"><b>Definition:</b> <a href="CommandLine_8h_source.html#l01392">CommandLine.h:1392</a></div></div>
<div class="ttc" id="aclassllvm_1_1AllocationOrder_html"><div class="ttname"><a href="classllvm_1_1AllocationOrder.html">llvm::AllocationOrder</a></div><div class="ttdef"><b>Definition:</b> <a href="AllocationOrder_8h_source.html#l00030">AllocationOrder.h:30</a></div></div>
<div class="ttc" id="aclassllvm_1_1SmallSet_html_a2a98f19750ba941ce791b75ca6d77e48"><div class="ttname"><a href="classllvm_1_1SmallSet.html#a2a98f19750ba941ce791b75ca6d77e48">llvm::SmallSet::count</a></div><div class="ttdeci">size_type count(const T &amp;V) const</div><div class="ttdoc">count - Return 1 if the element is in the set, 0 otherwise.</div><div class="ttdef"><b>Definition:</b> <a href="SmallSet_8h_source.html#l00166">SmallSet.h:166</a></div></div>
<div class="ttc" id="aMLRegallocEvictAdvisor_8cpp_html_a4035cde766164dedab4604c02b29e045"><div class="ttname"><a href="MLRegallocEvictAdvisor_8cpp.html#a4035cde766164dedab4604c02b29e045">INITIALIZE_PASS</a></div><div class="ttdeci">INITIALIZE_PASS(RegAllocScoring, &quot;regallocscoringpass&quot;, &quot;Register Allocation Scoring Pass&quot;, false, false) namespace</div><div class="ttdef"><b>Definition:</b> <a href="MLRegallocEvictAdvisor_8cpp_source.html#l00105">MLRegallocEvictAdvisor.cpp:105</a></div></div>
<div class="ttc" id="aclassllvm_1_1MachineInstr_html"><div class="ttname"><a href="classllvm_1_1MachineInstr.html">llvm::MachineInstr</a></div><div class="ttdoc">Representation of each machine instruction.</div><div class="ttdef"><b>Definition:</b> <a href="MachineInstr_8h_source.html#l00066">MachineInstr.h:66</a></div></div>
<div class="ttc" id="aclassllvm_1_1NoopSavedModelImpl_html"><div class="ttname"><a href="classllvm_1_1NoopSavedModelImpl.html">llvm::NoopSavedModelImpl</a></div><div class="ttdoc">A mock class satisfying the interface expected by ReleaseModeModelRunner for its TGen parameter.</div><div class="ttdef"><b>Definition:</b> <a href="ReleaseModeModelRunner_8h_source.html#l00074">ReleaseModeModelRunner.h:74</a></div></div>
<div class="ttc" id="aclassllvm_1_1RegAllocScoring_html_a53ef8003044b0180da48f67a14d7b499"><div class="ttname"><a href="classllvm_1_1RegAllocScoring.html#a53ef8003044b0180da48f67a14d7b499">llvm::RegAllocScoring::getAnalysisUsage</a></div><div class="ttdeci">void getAnalysisUsage(AnalysisUsage &amp;AU) const override</div><div class="ttdoc">RegAllocReward analysis usage.</div><div class="ttdef"><b>Definition:</b> <a href="MLRegallocEvictAdvisor_8cpp_source.html#l00089">MLRegallocEvictAdvisor.cpp:89</a></div></div>
<div class="ttc" id="aclassllvm_1_1RegAllocScoring_html"><div class="ttname"><a href="classllvm_1_1RegAllocScoring.html">llvm::RegAllocScoring</a></div><div class="ttdef"><b>Definition:</b> <a href="MLRegallocEvictAdvisor_8cpp_source.html#l00074">MLRegallocEvictAdvisor.cpp:74</a></div></div>
<div class="ttc" id="aVirtRegMap_8h_html"><div class="ttname"><a href="VirtRegMap_8h.html">VirtRegMap.h</a></div></div>
<div class="ttc" id="aclassllvm_1_1AllocationOrder_html_ac8c597e6238b708d0edb8de4ec1624f8"><div class="ttname"><a href="classllvm_1_1AllocationOrder.html#ac8c597e6238b708d0edb8de4ec1624f8">llvm::AllocationOrder::getOrderLimitEnd</a></div><div class="ttdeci">Iterator getOrderLimitEnd(unsigned OrderLimit) const</div><div class="ttdef"><b>Definition:</b> <a href="AllocationOrder_8h_source.html#l00101">AllocationOrder.h:101</a></div></div>
<div class="ttc" id="aclassllvm_1_1LLVMContext_html"><div class="ttname"><a href="classllvm_1_1LLVMContext.html">llvm::LLVMContext</a></div><div class="ttdoc">This is an important class for using LLVM in a threaded context.</div><div class="ttdef"><b>Definition:</b> <a href="LLVMContext_8h_source.html#l00068">LLVMContext.h:68</a></div></div>
<div class="ttc" id="aReleaseModeModelRunner_8h_html"><div class="ttname"><a href="ReleaseModeModelRunner_8h.html">ReleaseModeModelRunner.h</a></div></div>
<div class="ttc" id="aclassllvm_1_1DenseMap_html"><div class="ttname"><a href="classllvm_1_1DenseMap.html">llvm::DenseMap</a></div><div class="ttdef"><b>Definition:</b> <a href="DenseMap_8h_source.html#l00716">DenseMap.h:716</a></div></div>
<div class="ttc" id="anamespacellvm_1_1pdb_html_a434cfa04e4ed34b7a901378557d4ca9eaca23eedff8d9d6f024954bf3be32439f"><div class="ttname"><a href="namespacellvm_1_1pdb.html#a434cfa04e4ed34b7a901378557d4ca9eaca23eedff8d9d6f024954bf3be32439f">llvm::pdb::Empty</a></div><div class="ttdeci">@ Empty</div><div class="ttdef"><b>Definition:</b> <a href="PDBTypes_8h_source.html#l00395">PDBTypes.h:395</a></div></div>
<div class="ttc" id="aclassllvm_1_1MachineRegisterInfo_html_ae43ef10e056198d73d7c688d0649c9b2"><div class="ttname"><a href="classllvm_1_1MachineRegisterInfo.html#ae43ef10e056198d73d7c688d0649c9b2">llvm::MachineRegisterInfo::reg_instr_nodbg_begin</a></div><div class="ttdeci">reg_instr_nodbg_iterator reg_instr_nodbg_begin(Register RegNo) const</div><div class="ttdef"><b>Definition:</b> <a href="MachineRegisterInfo_8h_source.html#l00354">MachineRegisterInfo.h:354</a></div></div>
<div class="ttc" id="aMD5_8cpp_html_ac0eafdc9ee161b71e7af98af736952fd"><div class="ttname"><a href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a></div><div class="ttdeci">#define I(x, y, z)</div><div class="ttdef"><b>Definition:</b> <a href="MD5_8cpp_source.html#l00058">MD5.cpp:58</a></div></div>
<div class="ttc" id="alib_2Target_2README_8txt_html_a02def7c594e9f19ff247ed0bf33d1c30"><div class="ttname"><a href="lib_2Target_2README_8txt.html#a02def7c594e9f19ff247ed0bf33d1c30">size</a></div><div class="ttdeci">i&lt; reg-&gt; size</div><div class="ttdef"><b>Definition:</b> <a href="lib_2Target_2README_8txt_source.html#l00166">README.txt:166</a></div></div>
<div class="ttc" id="aclassllvm_1_1MachineFunction_html_a3d142c9e7c066059e15232c56dec9e2e"><div class="ttname"><a href="classllvm_1_1MachineFunction.html#a3d142c9e7c066059e15232c56dec9e2e">llvm::MachineFunction::getName</a></div><div class="ttdeci">StringRef getName() const</div><div class="ttdoc">getName - Return the name of the corresponding LLVM function.</div><div class="ttdef"><b>Definition:</b> <a href="MachineFunction_8cpp_source.html#l00565">MachineFunction.cpp:565</a></div></div>
<div class="ttc" id="aSILowerControlFlow_8cpp_html_a4868c5d81c5ccc98c47aeab6244346a0"><div class="ttname"><a href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a></div><div class="ttdeci">assert(ImpDefSCC.getReg()==AMDGPU::SCC &amp;&amp;ImpDefSCC.isDef())</div></div>
<div class="ttc" id="anamespacellvm_html_abfc9c7ecf70f66901e439f7c04ef3dbb"><div class="ttname"><a href="namespacellvm.html#abfc9c7ecf70f66901e439f7c04ef3dbb">llvm::move</a></div><div class="ttdeci">OutputIt move(R &amp;&amp;Range, OutputIt Out)</div><div class="ttdoc">Provide wrappers to std::move which take ranges instead of having to pass begin/end explicitly.</div><div class="ttdef"><b>Definition:</b> <a href="STLExtras_8h_source.html#l01675">STLExtras.h:1675</a></div></div>
<div class="ttc" id="anamespacellvm_1_1X86AS_html_a0901ebc21b46890383634a2386a75c60a5b3a782ccae295a254e2794ad30ad07f"><div class="ttname"><a href="namespacellvm_1_1X86AS.html#a0901ebc21b46890383634a2386a75c60a5b3a782ccae295a254e2794ad30ad07f">llvm::X86AS::FS</a></div><div class="ttdeci">@ FS</div><div class="ttdef"><b>Definition:</b> <a href="X86_8h_source.html#l00196">X86.h:196</a></div></div>
<div class="ttc" id="anamespacellvm_html_aab4d7321fbae116ee906bc9a1c29b3c7"><div class="ttname"><a href="namespacellvm.html#aab4d7321fbae116ee906bc9a1c29b3c7">llvm::FeatureIndex</a></div><div class="ttdeci">FeatureIndex</div><div class="ttdef"><b>Definition:</b> <a href="InlineModelFeatureMaps_8h_source.html#l00109">InlineModelFeatureMaps.h:109</a></div></div>
<div class="ttc" id="aclassllvm_1_1Module_html"><div class="ttname"><a href="classllvm_1_1Module.html">llvm::Module</a></div><div class="ttdoc">A Module instance is used to store all the information related to an LLVM module.</div><div class="ttdef"><b>Definition:</b> <a href="Module_8h_source.html#l00065">Module.h:65</a></div></div>
<div class="ttc" id="aMLRegallocEvictAdvisor_8cpp_html_a95a7ac0b4d52374987b65476b4097bc5"><div class="ttname"><a href="MLRegallocEvictAdvisor_8cpp.html#a95a7ac0b4d52374987b65476b4097bc5">_RESET</a></div><div class="ttdeci">#define _RESET(TYPE, NAME, SHAPE, __)</div></div>
<div class="ttc" id="aSIOptimizeExecMaskingPreRA_8cpp_html_a3e47bdb3e296b00df96eff7896fa57bf"><div class="ttname"><a href="SIOptimizeExecMaskingPreRA_8cpp.html#a3e47bdb3e296b00df96eff7896fa57bf">RA</a></div><div class="ttdeci">SI optimize exec mask operations pre RA</div><div class="ttdef"><b>Definition:</b> <a href="SIOptimizeExecMaskingPreRA_8cpp_source.html#l00071">SIOptimizeExecMaskingPreRA.cpp:71</a></div></div>
<div class="ttc" id="aMLRegallocEvictAdvisor_8cpp_html_a515fc759914affb744a8051ad8893317"><div class="ttname"><a href="MLRegallocEvictAdvisor_8cpp.html#a515fc759914affb744a8051ad8893317">RA_EVICT_FEATURES_LIST</a></div><div class="ttdeci">#define RA_EVICT_FEATURES_LIST(M)</div></div>
<div class="ttc" id="aclassllvm_1_1MachineFunction_html"><div class="ttname"><a href="classllvm_1_1MachineFunction.html">llvm::MachineFunction</a></div><div class="ttdef"><b>Definition:</b> <a href="MachineFunction_8h_source.html#l00257">MachineFunction.h:257</a></div></div>
<div class="ttc" id="aLiveRegMatrix_8cpp_html_a8989acb71bd355e02bcf3a930b5e54ea"><div class="ttname"><a href="LiveRegMatrix_8cpp.html#a8989acb71bd355e02bcf3a930b5e54ea">Matrix</a></div><div class="ttdeci">Live Register Matrix</div><div class="ttdef"><b>Definition:</b> <a href="LiveRegMatrix_8cpp_source.html#l00044">LiveRegMatrix.cpp:44</a></div></div>
<div class="ttc" id="aclassllvm_1_1StringRef_html"><div class="ttname"><a href="classllvm_1_1StringRef.html">llvm::StringRef</a></div><div class="ttdoc">StringRef - Represent a constant reference to a string, i.e.</div><div class="ttdef"><b>Definition:</b> <a href="StringRef_8h_source.html#l00058">StringRef.h:58</a></div></div>
<div class="ttc" id="ainclude_2llvm_2Support_2CMakeLists_8txt_html_aef9367eb0b7430eaf70b1f2725488f2a"><div class="ttname"><a href="include_2llvm_2Support_2CMakeLists_8txt.html#aef9367eb0b7430eaf70b1f2725488f2a">if</a></div><div class="ttdeci">if(llvm_vc STREQUAL &quot;&quot;) set(fake_version_inc &quot;$</div><div class="ttdef"><b>Definition:</b> <a href="include_2llvm_2Support_2CMakeLists_8txt_source.html#l00014">CMakeLists.txt:14</a></div></div>
<div class="ttc" id="anamespacellvm_html_a39d3d23a084c4544ee5903203db10e8a"><div class="ttname"><a href="namespacellvm.html#a39d3d23a084c4544ee5903203db10e8a">llvm::append_range</a></div><div class="ttdeci">void append_range(Container &amp;C, Range &amp;&amp;R)</div><div class="ttdoc">Wrapper function to append a range to a container.</div><div class="ttdef"><b>Definition:</b> <a href="STLExtras_8h_source.html#l01823">STLExtras.h:1823</a></div></div>
<div class="ttc" id="aclassllvm_1_1RegAllocEvictionAdvisor_html"><div class="ttname"><a href="classllvm_1_1RegAllocEvictionAdvisor.html">llvm::RegAllocEvictionAdvisor</a></div><div class="ttdef"><b>Definition:</b> <a href="RegAllocEvictionAdvisor_8h_source.html#l00099">RegAllocEvictionAdvisor.h:99</a></div></div>
<div class="ttc" id="aclassllvm_1_1LiveIntervalUnion_1_1Query_html_a8b7dbf3e19862dea3dff991ec822b898"><div class="ttname"><a href="classllvm_1_1LiveIntervalUnion_1_1Query.html#a8b7dbf3e19862dea3dff991ec822b898">llvm::LiveIntervalUnion::Query::interferingVRegs</a></div><div class="ttdeci">const SmallVectorImpl&lt; const LiveInterval * &gt; &amp; interferingVRegs(unsigned MaxInterferingRegs=std::numeric_limits&lt; unsigned &gt;::max())</div><div class="ttdef"><b>Definition:</b> <a href="LiveIntervalUnion_8h_source.html#l00162">LiveIntervalUnion.h:162</a></div></div>
<div class="ttc" id="aclassllvm_1_1Value_html_adb5c319f5905c1d3ca9eb5df546388c5"><div class="ttname"><a href="classllvm_1_1Value.html#adb5c319f5905c1d3ca9eb5df546388c5">llvm::Value::getName</a></div><div class="ttdeci">StringRef getName() const</div><div class="ttdoc">Return a constant reference to the value's name.</div><div class="ttdef"><b>Definition:</b> <a href="Value_8cpp_source.html#l00305">Value.cpp:305</a></div></div>
<div class="ttc" id="aAArch64AdvSIMDScalarPass_8cpp_html_aacd2ab195054a3e6a74bfbb9d5d571c8"><div class="ttname"><a href="AArch64AdvSIMDScalarPass_8cpp.html#aacd2ab195054a3e6a74bfbb9d5d571c8">MRI</a></div><div class="ttdeci">unsigned const MachineRegisterInfo * MRI</div><div class="ttdef"><b>Definition:</b> <a href="AArch64AdvSIMDScalarPass_8cpp_source.html#l00105">AArch64AdvSIMDScalarPass.cpp:105</a></div></div>
<div class="ttc" id="aclassllvm_1_1Register_html"><div class="ttname"><a href="classllvm_1_1Register.html">llvm::Register</a></div><div class="ttdoc">Wrapper class representing virtual and physical registers.</div><div class="ttdef"><b>Definition:</b> <a href="Register_8h_source.html#l00019">Register.h:19</a></div></div>
<div class="ttc" id="aclassllvm_1_1LiveRange_html_aa1bc5510e870a77ebe055b1524d9fd26"><div class="ttname"><a href="classllvm_1_1LiveRange.html#aa1bc5510e870a77ebe055b1524d9fd26">llvm::LiveRange::endIndex</a></div><div class="ttdeci">SlotIndex endIndex() const</div><div class="ttdoc">endNumber - return the maximum point of the range of the whole, exclusive.</div><div class="ttdef"><b>Definition:</b> <a href="LiveInterval_8h_source.html#l00392">LiveInterval.h:392</a></div></div>
<div class="ttc" id="anamespacellvm_html_aaf680369884a21e0564c0c19b826b6e9"><div class="ttname"><a href="namespacellvm.html#aaf680369884a21e0564c0c19b826b6e9">llvm::createReleaseModeAdvisor</a></div><div class="ttdeci">RegAllocEvictionAdvisorAnalysis * createReleaseModeAdvisor()</div><div class="ttdef"><b>Definition:</b> <a href="MLRegallocEvictAdvisor_8cpp_source.html#l00899">MLRegallocEvictAdvisor.cpp:899</a></div></div>
<div class="ttc" id="aAArch64SLSHardening_8cpp_html_a5958512eae2979bd2eb383977996a600"><div class="ttname"><a href="AArch64SLSHardening_8cpp.html#a5958512eae2979bd2eb383977996a600">MBB</a></div><div class="ttdeci">MachineBasicBlock &amp; MBB</div><div class="ttdef"><b>Definition:</b> <a href="AArch64SLSHardening_8cpp_source.html#l00074">AArch64SLSHardening.cpp:74</a></div></div>
<div class="ttc" id="aclassllvm_1_1DefaultEvictionAdvisor_html"><div class="ttname"><a href="classllvm_1_1DefaultEvictionAdvisor.html">llvm::DefaultEvictionAdvisor</a></div><div class="ttdef"><b>Definition:</b> <a href="RegAllocEvictionAdvisor_8h_source.html#l00203">RegAllocEvictionAdvisor.h:203</a></div></div>
<div class="ttc" id="anamespacestd_html"><div class="ttname"><a href="namespacestd.html">std</a></div><div class="ttdef"><b>Definition:</b> <a href="BitVector_8h_source.html#l00851">BitVector.h:851</a></div></div>
<div class="ttc" id="aclassllvm_1_1MachineFunction_html_a4b21394c138cc5ae719510bb529ee099"><div class="ttname"><a href="classllvm_1_1MachineFunction.html#a4b21394c138cc5ae719510bb529ee099">llvm::MachineFunction::getFunction</a></div><div class="ttdeci">Function &amp; getFunction()</div><div class="ttdoc">Return the LLVM function that this machine code represents.</div><div class="ttdef"><b>Definition:</b> <a href="MachineFunction_8h_source.html#l00622">MachineFunction.h:622</a></div></div>
<div class="ttc" id="aclassllvm_1_1AnalysisUsage_html_af22b06a6a4f9df80454071685a0d6a02"><div class="ttname"><a href="classllvm_1_1AnalysisUsage.html#af22b06a6a4f9df80454071685a0d6a02">llvm::AnalysisUsage::setPreservesAll</a></div><div class="ttdeci">void setPreservesAll()</div><div class="ttdoc">Set by analyses that do not transform their input at all.</div><div class="ttdef"><b>Definition:</b> <a href="PassAnalysisSupport_8h_source.html#l00130">PassAnalysisSupport.h:130</a></div></div>
<div class="ttc" id="aRegAllocGreedy_8h_html"><div class="ttname"><a href="RegAllocGreedy_8h.html">RegAllocGreedy.h</a></div></div>
<div class="ttc" id="aRegAllocEvictionAdvisor_8h_html"><div class="ttname"><a href="RegAllocEvictionAdvisor_8h.html">RegAllocEvictionAdvisor.h</a></div></div>
<div class="ttc" id="aclassllvm_1_1MCRegUnitIterator_html"><div class="ttname"><a href="classllvm_1_1MCRegUnitIterator.html">llvm::MCRegUnitIterator</a></div><div class="ttdef"><b>Definition:</b> <a href="MCRegisterInfo_8h_source.html#l00680">MCRegisterInfo.h:680</a></div></div>
<div class="ttc" id="aclassllvm_1_1LiveIntervalUnion_1_1Query_html"><div class="ttname"><a href="classllvm_1_1LiveIntervalUnion_1_1Query.html">llvm::LiveIntervalUnion::Query</a></div><div class="ttdoc">Query interferences between a single live virtual register and a live interval union.</div><div class="ttdef"><b>Definition:</b> <a href="LiveIntervalUnion_8h_source.html#l00112">LiveIntervalUnion.h:112</a></div></div>
<div class="ttc" id="aclassllvm_1_1MCRegisterInfo_1_1DiffListIterator_html_a82f1c2dcfab9e27af4497fb0e13c4c6f"><div class="ttname"><a href="classllvm_1_1MCRegisterInfo_1_1DiffListIterator.html#a82f1c2dcfab9e27af4497fb0e13c4c6f">llvm::MCRegisterInfo::DiffListIterator::isValid</a></div><div class="ttdeci">bool isValid() const</div><div class="ttdoc">isValid - returns true if this iterator is not yet at the end.</div><div class="ttdef"><b>Definition:</b> <a href="MCRegisterInfo_8h_source.html#l00224">MCRegisterInfo.h:224</a></div></div>
<div class="ttc" id="aclassllvm_1_1LiveInterval_html_a14d46e70db7e417c8ed5bc66fb295185"><div class="ttname"><a href="classllvm_1_1LiveInterval.html#a14d46e70db7e417c8ed5bc66fb295185">llvm::LiveInterval::reg</a></div><div class="ttdeci">Register reg() const</div><div class="ttdef"><b>Definition:</b> <a href="LiveInterval_8h_source.html#l00717">LiveInterval.h:717</a></div></div>
<div class="ttc" id="aclassllvm_1_1RegAllocScoring_html_a05529768fbfbeeebe73c58b0e0bc4bf1"><div class="ttname"><a href="classllvm_1_1RegAllocScoring.html#a05529768fbfbeeebe73c58b0e0bc4bf1">llvm::RegAllocScoring::ID</a></div><div class="ttdeci">static char ID</div><div class="ttdef"><b>Definition:</b> <a href="MLRegallocEvictAdvisor_8cpp_source.html#l00076">MLRegallocEvictAdvisor.cpp:76</a></div></div>
<div class="ttc" id="aclassllvm_1_1SmallVectorImpl_html"><div class="ttname"><a href="classllvm_1_1SmallVectorImpl.html">llvm::SmallVectorImpl</a></div><div class="ttdoc">This class consists of common code factored out of the SmallVector class to reduce code duplication b...</div><div class="ttdef"><b>Definition:</b> <a href="APFloat_8h_source.html#l00042">APFloat.h:42</a></div></div>
<div class="ttc" id="aclassllvm_1_1FunctionPass_html"><div class="ttname"><a href="classllvm_1_1FunctionPass.html">llvm::FunctionPass</a></div><div class="ttdoc">FunctionPass class - This class is used to implement most global optimizations.</div><div class="ttdef"><b>Definition:</b> <a href="Pass_8h_source.html#l00308">Pass.h:308</a></div></div>
<div class="ttc" id="aclassllvm_1_1LoopBase_html_af691775d5a45e28afbdb3e97cab22eee"><div class="ttname"><a href="classllvm_1_1LoopBase.html#af691775d5a45e28afbdb3e97cab22eee">llvm::LoopBase::isLoopExiting</a></div><div class="ttdeci">bool isLoopExiting(const BlockT *BB) const</div><div class="ttdoc">True if terminator in the block can branch to another block that is outside of the current loop.</div><div class="ttdef"><b>Definition:</b> <a href="LoopInfo_8h_source.html#l00241">LoopInfo.h:241</a></div></div>
<div class="ttc" id="aclassllvm_1_1SlotIndex_html_a3dd5f1d73bfabd16cd66faed5108534c"><div class="ttname"><a href="classllvm_1_1SlotIndex.html#a3dd5f1d73bfabd16cd66faed5108534c">llvm::SlotIndex::distance</a></div><div class="ttdeci">int distance(SlotIndex other) const</div><div class="ttdoc">Return the distance from this index to the given one.</div><div class="ttdef"><b>Definition:</b> <a href="SlotIndexes_8h_source.html#l00213">SlotIndexes.h:213</a></div></div>
<div class="ttc" id="aclassllvm_1_1AnalysisUsage_html_ae5c60fd282ee894c87ea02c3f0fcb6d0"><div class="ttname"><a href="classllvm_1_1AnalysisUsage.html#ae5c60fd282ee894c87ea02c3f0fcb6d0">llvm::AnalysisUsage::addRequired</a></div><div class="ttdeci">AnalysisUsage &amp; addRequired()</div><div class="ttdef"><b>Definition:</b> <a href="PassAnalysisSupport_8h_source.html#l00075">PassAnalysisSupport.h:75</a></div></div>
<div class="ttc" id="aCalcSpillWeights_8h_html"><div class="ttname"><a href="CalcSpillWeights_8h.html">CalcSpillWeights.h</a></div></div>
<div class="ttc" id="aclassllvm_1_1RegAllocScoring_html_a771a12d918fb59d0432509518d4b6e83"><div class="ttname"><a href="classllvm_1_1RegAllocScoring.html#a771a12d918fb59d0432509518d4b6e83">llvm::RegAllocScoring::RegAllocScoring</a></div><div class="ttdeci">RegAllocScoring()</div><div class="ttdef"><b>Definition:</b> <a href="MLRegallocEvictAdvisor_8cpp_source.html#l00078">MLRegallocEvictAdvisor.cpp:78</a></div></div>
<div class="ttc" id="astructllvm_1_1cl_1_1desc_html"><div class="ttname"><a href="structllvm_1_1cl_1_1desc.html">llvm::cl::desc</a></div><div class="ttdef"><b>Definition:</b> <a href="CommandLine_8h_source.html#l00405">CommandLine.h:405</a></div></div>
<div class="ttc" id="aclassllvm_1_1MachineRegisterInfo_html_a666dc30b9326da6b9e69740a241df89d"><div class="ttname"><a href="classllvm_1_1MachineRegisterInfo.html#a666dc30b9326da6b9e69740a241df89d">llvm::MachineRegisterInfo::reg_nodbg_empty</a></div><div class="ttdeci">bool reg_nodbg_empty(Register RegNo) const</div><div class="ttdoc">reg_nodbg_empty - Return true if the only instructions using or defining Reg are Debug instructions.</div><div class="ttdef"><b>Definition:</b> <a href="MachineRegisterInfo_8h_source.html#l00385">MachineRegisterInfo.h:385</a></div></div>
<div class="ttc" id="aMachineFunction_8h_html"><div class="ttname"><a href="MachineFunction_8h.html">MachineFunction.h</a></div></div>
<div class="ttc" id="aInitializePasses_8h_html"><div class="ttname"><a href="InitializePasses_8h.html">InitializePasses.h</a></div></div>
<div class="ttc" id="aMachineBlockFrequencyInfo_8h_html"><div class="ttname"><a href="MachineBlockFrequencyInfo_8h.html">MachineBlockFrequencyInfo.h</a></div></div>
<div class="ttc" id="aclassllvm_1_1MLModelRunner_html"><div class="ttname"><a href="classllvm_1_1MLModelRunner.html">llvm::MLModelRunner</a></div><div class="ttdoc">MLModelRunner interface: abstraction of a mechanism for evaluating a tensorflow &quot;saved model&quot;.</div><div class="ttdef"><b>Definition:</b> <a href="MLModelRunner_8h_source.html#l00024">MLModelRunner.h:24</a></div></div>
<div class="ttc" id="aclassllvm_1_1TensorSpec_html"><div class="ttname"><a href="classllvm_1_1TensorSpec.html">llvm::TensorSpec</a></div><div class="ttdef"><b>Definition:</b> <a href="TensorSpec_8h_source.html#l00052">TensorSpec.h:52</a></div></div>
<div class="ttc" id="aclassllvm_1_1MCRegister_html"><div class="ttname"><a href="classllvm_1_1MCRegister.html">llvm::MCRegister</a></div><div class="ttdoc">Wrapper class representing physical registers. Should be passed by value.</div><div class="ttdef"><b>Definition:</b> <a href="MCRegister_8h_source.html#l00024">MCRegister.h:24</a></div></div>
<div class="ttc" id="aclassllvm_1_1SmallPtrSetImpl_html_a6bc6fb89fe2e91c25559a8631f56e27e"><div class="ttname"><a href="classllvm_1_1SmallPtrSetImpl.html#a6bc6fb89fe2e91c25559a8631f56e27e">llvm::SmallPtrSetImpl::insert</a></div><div class="ttdeci">std::pair&lt; iterator, bool &gt; insert(PtrType Ptr)</div><div class="ttdoc">Inserts Ptr if and only if there is no element in the container equal to Ptr.</div><div class="ttdef"><b>Definition:</b> <a href="SmallPtrSet_8h_source.html#l00365">SmallPtrSet.h:365</a></div></div>
<div class="ttc" id="anamespacellvm_html_aa8bcaa65e820bf357e48f0059ab7213a"><div class="ttname"><a href="namespacellvm.html#aa8bcaa65e820bf357e48f0059ab7213a">llvm::initializeRegAllocScoringPass</a></div><div class="ttdeci">void initializeRegAllocScoringPass(PassRegistry &amp;)</div></div>
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated on Tue Sep 20 2022 07:12:38 for LLVM by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.17
</small></address>
</body>
</html>
