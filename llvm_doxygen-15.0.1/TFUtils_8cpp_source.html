<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.17"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>LLVM: lib/Analysis/TFUtils.cpp Source File</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<script type="text/x-mathjax-config">
  MathJax.Hub.Config({
    extensions: ["tex2jax.js"],
    jax: ["input/TeX","output/HTML-CSS"],
});
</script>
<script type="text/javascript" async="async" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.7/MathJax.js/MathJax.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">LLVM
   &#160;<span id="projectnumber">15.0.1</span>
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.17 -->
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',false,false,'search.php','Search');
});
/* @license-end */</script>
<div id="main-nav"></div>
<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="dir_97aefd0d527b934f1d99a682da8fe6a9.html">lib</a></li><li class="navelem"><a class="el" href="dir_a25db018342d3ae6c7e6779086c18378.html">Analysis</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="headertitle">
<div class="title">TFUtils.cpp</div>  </div>
</div><!--header-->
<div class="contents">
<a href="TFUtils_8cpp.html">Go to the documentation of this file.</a><div class="fragment"><div class="line"><a name="l00001"></a><span class="lineno">    1</span>&#160;<span class="comment">//===- TFUtils.cpp - tensorflow evaluation utilities ----------------------===//</span></div>
<div class="line"><a name="l00002"></a><span class="lineno">    2</span>&#160;<span class="comment">//</span></div>
<div class="line"><a name="l00003"></a><span class="lineno">    3</span>&#160;<span class="comment">// Part of the LLVM Project, under the Apache License v2.0 with LLVM Exceptions.</span></div>
<div class="line"><a name="l00004"></a><span class="lineno">    4</span>&#160;<span class="comment">// See https://llvm.org/LICENSE.txt for license information.</span></div>
<div class="line"><a name="l00005"></a><span class="lineno">    5</span>&#160;<span class="comment">// SPDX-License-Identifier: Apache-2.0 WITH LLVM-exception</span></div>
<div class="line"><a name="l00006"></a><span class="lineno">    6</span>&#160;<span class="comment">//</span></div>
<div class="line"><a name="l00007"></a><span class="lineno">    7</span>&#160;<span class="comment">//===----------------------------------------------------------------------===//</span></div>
<div class="line"><a name="l00008"></a><span class="lineno">    8</span>&#160;<span class="comment">//</span></div>
<div class="line"><a name="l00009"></a><span class="lineno">    9</span>&#160;<span class="comment">// This file implements utilities for interfacing with tensorflow C APIs.</span></div>
<div class="line"><a name="l00010"></a><span class="lineno">   10</span>&#160;<span class="comment">//</span></div>
<div class="line"><a name="l00011"></a><span class="lineno">   11</span>&#160;<span class="comment">//===----------------------------------------------------------------------===//</span></div>
<div class="line"><a name="l00012"></a><span class="lineno">   12</span>&#160;<span class="preprocessor">#include &quot;llvm/Config/config.h&quot;</span></div>
<div class="line"><a name="l00013"></a><span class="lineno">   13</span>&#160;<span class="preprocessor">#if defined(LLVM_HAVE_TF_API)</span></div>
<div class="line"><a name="l00014"></a><span class="lineno">   14</span>&#160; </div>
<div class="line"><a name="l00015"></a><span class="lineno">   15</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="Twine_8h.html">llvm/ADT/Twine.h</a>&quot;</span></div>
<div class="line"><a name="l00016"></a><span class="lineno">   16</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="TFUtils_8h.html">llvm/Analysis/Utils/TFUtils.h</a>&quot;</span></div>
<div class="line"><a name="l00017"></a><span class="lineno">   17</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="Base64_8h.html">llvm/Support/Base64.h</a>&quot;</span></div>
<div class="line"><a name="l00018"></a><span class="lineno">   18</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="CommandLine_8h.html">llvm/Support/CommandLine.h</a>&quot;</span></div>
<div class="line"><a name="l00019"></a><span class="lineno">   19</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="Debug_8h.html">llvm/Support/Debug.h</a>&quot;</span></div>
<div class="line"><a name="l00020"></a><span class="lineno">   20</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="JSON_8h.html">llvm/Support/JSON.h</a>&quot;</span></div>
<div class="line"><a name="l00021"></a><span class="lineno">   21</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="MemoryBuffer_8h.html">llvm/Support/MemoryBuffer.h</a>&quot;</span></div>
<div class="line"><a name="l00022"></a><span class="lineno">   22</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="Path_8h.html">llvm/Support/Path.h</a>&quot;</span></div>
<div class="line"><a name="l00023"></a><span class="lineno">   23</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="raw__ostream_8h.html">llvm/Support/raw_ostream.h</a>&quot;</span></div>
<div class="line"><a name="l00024"></a><span class="lineno">   24</span>&#160; </div>
<div class="line"><a name="l00025"></a><span class="lineno">   25</span>&#160;<span class="preprocessor">#include &quot;google/protobuf/struct.pb.h&quot;</span></div>
<div class="line"><a name="l00026"></a><span class="lineno">   26</span>&#160;<span class="preprocessor">#include &quot;google/protobuf/text_format.h&quot;</span></div>
<div class="line"><a name="l00027"></a><span class="lineno">   27</span>&#160;<span class="preprocessor">#include &quot;tensorflow/c/c_api.h&quot;</span></div>
<div class="line"><a name="l00028"></a><span class="lineno">   28</span>&#160;<span class="preprocessor">#include &quot;tensorflow/c/c_api_experimental.h&quot;</span></div>
<div class="line"><a name="l00029"></a><span class="lineno">   29</span>&#160;<span class="preprocessor">#include &quot;tensorflow/core/example/example.pb.h&quot;</span></div>
<div class="line"><a name="l00030"></a><span class="lineno">   30</span>&#160;<span class="preprocessor">#include &lt;cassert&gt;</span></div>
<div class="line"><a name="l00031"></a><span class="lineno">   31</span>&#160;<span class="preprocessor">#include &lt;numeric&gt;</span></div>
<div class="line"><a name="l00032"></a><span class="lineno">   32</span>&#160; </div>
<div class="line"><a name="l00033"></a><span class="lineno">   33</span>&#160;<span class="keyword">using namespace </span><a class="code" href="namespacellvm.html">llvm</a>;</div>
<div class="line"><a name="l00034"></a><span class="lineno">   34</span>&#160; </div>
<div class="line"><a name="l00035"></a><span class="lineno">   35</span>&#160;<span class="keyword">using</span> google::protobuf::Message;</div>
<div class="line"><a name="l00036"></a><span class="lineno">   36</span>&#160;<span class="keyword">using</span> google::protobuf::TextFormat;</div>
<div class="line"><a name="l00037"></a><span class="lineno">   37</span>&#160; </div>
<div class="line"><a name="l00038"></a><span class="lineno">   38</span>&#160;<span class="keyword">static</span> <a class="code" href="classllvm_1_1cl_1_1opt.html">cl::opt&lt;bool&gt;</a></div>
<div class="line"><a name="l00039"></a><span class="lineno">   39</span>&#160;    ProtobufTextMode(<span class="stringliteral">&quot;tfutils-text-log&quot;</span>, <a class="code" href="namespacellvm_1_1cl.html#a10a041239ae1870cfcc064bfaa79fb65">cl::init</a>(<span class="keyword">false</span>), <a class="code" href="namespacellvm_1_1cl.html#a68075925a54790e71ca790e1d4f21a40a263ac008d8d31f13ce460395fc4cf7e6">cl::Hidden</a>,</div>
<div class="line"><a name="l00040"></a><span class="lineno">   40</span>&#160;                     <a class="code" href="structllvm_1_1cl_1_1desc.html">cl::desc</a>(<span class="stringliteral">&quot;Output textual (human-readable) protobuf.&quot;</span>));</div>
<div class="line"><a name="l00041"></a><span class="lineno">   41</span>&#160; </div>
<div class="line"><a name="l00042"></a><span class="lineno">   42</span>&#160;<span class="keyword">namespace </span>{</div>
<div class="line"><a name="l00043"></a><span class="lineno">   43</span>&#160; </div>
<div class="line"><a name="l00044"></a><span class="lineno">   44</span>&#160;<span class="keyword">using</span> TFGraphPtr = std::unique_ptr&lt;TF_Graph, decltype(&amp;TF_DeleteGraph)&gt;;</div>
<div class="line"><a name="l00045"></a><span class="lineno">   45</span>&#160;<span class="keyword">using</span> TFSessionOptionsPtr =</div>
<div class="line"><a name="l00046"></a><span class="lineno">   46</span>&#160;    std::unique_ptr&lt;TF_SessionOptions, decltype(&amp;TF_DeleteSessionOptions)&gt;;</div>
<div class="line"><a name="l00047"></a><span class="lineno">   47</span>&#160;<span class="keyword">using</span> TFStatusPtr = std::unique_ptr&lt;TF_Status, decltype(&amp;TF_DeleteStatus)&gt;;</div>
<div class="line"><a name="l00048"></a><span class="lineno">   48</span>&#160; </div>
<div class="line"><a name="l00049"></a><span class="lineno">   49</span>&#160;<span class="keyword">struct </span>TFInitializer {</div>
<div class="line"><a name="l00050"></a><span class="lineno">   50</span>&#160;  TFInitializer() {</div>
<div class="line"><a name="l00051"></a><span class="lineno">   51</span>&#160;    <span class="keywordtype">int</span> Argc = 1;</div>
<div class="line"><a name="l00052"></a><span class="lineno">   52</span>&#160;    <span class="keyword">const</span> <span class="keywordtype">char</span> *<a class="code" href="namespacellvm_1_1GraphProgram.html#a0ad4685976f8c4d4a697a53fbe05d10b">Name</a> = <span class="stringliteral">&quot;&quot;</span>;</div>
<div class="line"><a name="l00053"></a><span class="lineno">   53</span>&#160;    <span class="keyword">const</span> <span class="keywordtype">char</span> **NamePtr = &amp;<a class="code" href="namespacellvm_1_1GraphProgram.html#a0ad4685976f8c4d4a697a53fbe05d10b">Name</a>;</div>
<div class="line"><a name="l00054"></a><span class="lineno">   54</span>&#160;    TF_InitMain(<a class="code" href="namespacellvm_1_1GraphProgram.html#a0ad4685976f8c4d4a697a53fbe05d10b">Name</a>, &amp;Argc, <span class="keyword">const_cast&lt;</span><span class="keywordtype">char</span> ***<span class="keyword">&gt;</span>(&amp;NamePtr));</div>
<div class="line"><a name="l00055"></a><span class="lineno">   55</span>&#160;  }</div>
<div class="line"><a name="l00056"></a><span class="lineno">   56</span>&#160;};</div>
<div class="line"><a name="l00057"></a><span class="lineno">   57</span>&#160; </div>
<div class="line"><a name="l00058"></a><span class="lineno">   58</span>&#160;<span class="keywordtype">bool</span> ensureInitTF() {</div>
<div class="line"><a name="l00059"></a><span class="lineno">   59</span>&#160;  <span class="keyword">static</span> TFInitializer TFLibInitializer;</div>
<div class="line"><a name="l00060"></a><span class="lineno">   60</span>&#160;  <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l00061"></a><span class="lineno">   61</span>&#160;}</div>
<div class="line"><a name="l00062"></a><span class="lineno">   62</span>&#160; </div>
<div class="line"><a name="l00063"></a><span class="lineno">   63</span>&#160;TFGraphPtr createTFGraph() {</div>
<div class="line"><a name="l00064"></a><span class="lineno">   64</span>&#160;  <span class="keywordflow">return</span> TFGraphPtr(TF_NewGraph(), &amp;TF_DeleteGraph);</div>
<div class="line"><a name="l00065"></a><span class="lineno">   65</span>&#160;}</div>
<div class="line"><a name="l00066"></a><span class="lineno">   66</span>&#160; </div>
<div class="line"><a name="l00067"></a><span class="lineno">   67</span>&#160;TFStatusPtr createTFStatus() {</div>
<div class="line"><a name="l00068"></a><span class="lineno">   68</span>&#160;  <span class="keywordflow">return</span> TFStatusPtr(TF_NewStatus(), &amp;TF_DeleteStatus);</div>
<div class="line"><a name="l00069"></a><span class="lineno">   69</span>&#160;}</div>
<div class="line"><a name="l00070"></a><span class="lineno">   70</span>&#160; </div>
<div class="line"><a name="l00071"></a><span class="lineno">   71</span>&#160;TFSessionOptionsPtr createTFSessionOptions() {</div>
<div class="line"><a name="l00072"></a><span class="lineno">   72</span>&#160;  <span class="keywordflow">return</span> TFSessionOptionsPtr(TF_NewSessionOptions(), &amp;TF_DeleteSessionOptions);</div>
<div class="line"><a name="l00073"></a><span class="lineno">   73</span>&#160;}</div>
<div class="line"><a name="l00074"></a><span class="lineno">   74</span>&#160; </div>
<div class="line"><a name="l00075"></a><span class="lineno">   75</span>&#160;<span class="keywordtype">void</span> serialize(<span class="keyword">const</span> Message &amp;SE, std::string *OutStr) {</div>
<div class="line"><a name="l00076"></a><span class="lineno">   76</span>&#160;  <span class="keywordflow">if</span> (ProtobufTextMode) {</div>
<div class="line"><a name="l00077"></a><span class="lineno">   77</span>&#160;    TextFormat::PrintToString(SE, OutStr);</div>
<div class="line"><a name="l00078"></a><span class="lineno">   78</span>&#160;  } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00079"></a><span class="lineno">   79</span>&#160;    *OutStr = SE.SerializeAsString();</div>
<div class="line"><a name="l00080"></a><span class="lineno">   80</span>&#160;  }</div>
<div class="line"><a name="l00081"></a><span class="lineno">   81</span>&#160;}</div>
<div class="line"><a name="l00082"></a><span class="lineno">   82</span>&#160; </div>
<div class="line"><a name="l00083"></a><span class="lineno">   83</span>&#160;<span class="keywordtype">int</span> getTFTypeIndex(<a class="code" href="namespacellvm.html#af5ab7a47bc553dfc3ee92daf969d0d7c">TensorType</a> TType) {</div>
<div class="line"><a name="l00084"></a><span class="lineno">   84</span>&#160;  <span class="keywordflow">switch</span> (TType) {</div>
<div class="line"><a name="l00085"></a><span class="lineno">   85</span>&#160;  <span class="keywordflow">case</span> <a class="code" href="namespacellvm_1_1pdb.html#a434cfa04e4ed34b7a901378557d4ca9ead2ec7f6717029419e50f2c37332e8341">TensorType::Double</a>:</div>
<div class="line"><a name="l00086"></a><span class="lineno">   86</span>&#160;    <span class="keywordflow">return</span> TF_DOUBLE;</div>
<div class="line"><a name="l00087"></a><span class="lineno">   87</span>&#160;  <span class="keywordflow">case</span> <a class="code" href="namespacellvm_1_1NVPTX_1_1PTXLdStInstCode.html#a0c4e2aa2235abdd10d2beffa32cd9b14aa8d7a04ea7f61b2ae1250844cfc54941">TensorType::Float</a>:</div>
<div class="line"><a name="l00088"></a><span class="lineno">   88</span>&#160;    <span class="keywordflow">return</span> TF_FLOAT;</div>
<div class="line"><a name="l00089"></a><span class="lineno">   89</span>&#160;  <span class="keywordflow">case</span> <a class="code" href="namespacellvm_1_1pdb.html#a434cfa04e4ed34b7a901378557d4ca9eab4469cd975dfe176a70d24e5904cedf6">TensorType::Int8</a>:</div>
<div class="line"><a name="l00090"></a><span class="lineno">   90</span>&#160;    <span class="keywordflow">return</span> TF_INT8;</div>
<div class="line"><a name="l00091"></a><span class="lineno">   91</span>&#160;  <span class="keywordflow">case</span> <a class="code" href="namespacellvm_1_1pdb.html#a434cfa04e4ed34b7a901378557d4ca9eaf930816fdefa1f6cbb2c18a077d4fd7f">TensorType::UInt8</a>:</div>
<div class="line"><a name="l00092"></a><span class="lineno">   92</span>&#160;    <span class="keywordflow">return</span> TF_UINT8;</div>
<div class="line"><a name="l00093"></a><span class="lineno">   93</span>&#160;  <span class="keywordflow">case</span> <a class="code" href="namespacellvm_1_1pdb.html#a434cfa04e4ed34b7a901378557d4ca9ea3faf2bc8c8c4b0fb591b5d2604132bda">TensorType::Int16</a>:</div>
<div class="line"><a name="l00094"></a><span class="lineno">   94</span>&#160;    <span class="keywordflow">return</span> TF_INT16;</div>
<div class="line"><a name="l00095"></a><span class="lineno">   95</span>&#160;  <span class="keywordflow">case</span> <a class="code" href="namespacellvm_1_1pdb.html#a434cfa04e4ed34b7a901378557d4ca9eaefdbbd0544eace5efa8f04052db39e1c">TensorType::UInt16</a>:</div>
<div class="line"><a name="l00096"></a><span class="lineno">   96</span>&#160;    <span class="keywordflow">return</span> TF_UINT16;</div>
<div class="line"><a name="l00097"></a><span class="lineno">   97</span>&#160;  <span class="keywordflow">case</span> <a class="code" href="namespacellvm_1_1pdb.html#a434cfa04e4ed34b7a901378557d4ca9ea786eecab07351b4cc9e4c33f4cf5691e">TensorType::Int32</a>:</div>
<div class="line"><a name="l00098"></a><span class="lineno">   98</span>&#160;    <span class="keywordflow">return</span> TF_INT32;</div>
<div class="line"><a name="l00099"></a><span class="lineno">   99</span>&#160;  <span class="keywordflow">case</span> <a class="code" href="namespacellvm_1_1pdb.html#a434cfa04e4ed34b7a901378557d4ca9ea0ca360365331d9e298b726321529ee25">TensorType::UInt32</a>:</div>
<div class="line"><a name="l00100"></a><span class="lineno">  100</span>&#160;    <span class="keywordflow">return</span> TF_UINT32;</div>
<div class="line"><a name="l00101"></a><span class="lineno">  101</span>&#160;  <span class="keywordflow">case</span> <a class="code" href="namespacellvm_1_1pdb.html#a434cfa04e4ed34b7a901378557d4ca9ea68311183bd3c447d90828b5e2c90f582">TensorType::Int64</a>:</div>
<div class="line"><a name="l00102"></a><span class="lineno">  102</span>&#160;    <span class="keywordflow">return</span> TF_INT64;</div>
<div class="line"><a name="l00103"></a><span class="lineno">  103</span>&#160;  <span class="keywordflow">case</span> <a class="code" href="namespacellvm_1_1pdb.html#a434cfa04e4ed34b7a901378557d4ca9ea796898b84e5c80a0e59874e982646cec">TensorType::UInt64</a>:</div>
<div class="line"><a name="l00104"></a><span class="lineno">  104</span>&#160;    <span class="keywordflow">return</span> TF_UINT64;</div>
<div class="line"><a name="l00105"></a><span class="lineno">  105</span>&#160;  <span class="keywordflow">case</span> <a class="code" href="namespacellvm.html#af5ab7a47bc553dfc3ee92daf969d0d7ca4bbb8f967da6d1a610596d7257179c2b">TensorType::Invalid</a>:</div>
<div class="line"><a name="l00106"></a><span class="lineno">  106</span>&#160;    <a class="code" href="Support_2ErrorHandling_8h.html#ace243f5c25697a1107cce46626b3dc94">llvm_unreachable</a>(<span class="stringliteral">&quot;Unknown tensor type&quot;</span>);</div>
<div class="line"><a name="l00107"></a><span class="lineno">  107</span>&#160;  }</div>
<div class="line"><a name="l00108"></a><span class="lineno">  108</span>&#160;}</div>
<div class="line"><a name="l00109"></a><span class="lineno">  109</span>&#160;} <span class="comment">// namespace</span></div>
<div class="line"><a name="l00110"></a><span class="lineno">  110</span>&#160; </div>
<div class="line"><a name="l00111"></a><span class="lineno">  111</span>&#160;<span class="keyword">namespace </span><a class="code" href="namespacellvm.html">llvm</a> {</div>
<div class="line"><a name="l00112"></a><span class="lineno">  112</span>&#160;<span class="keyword">class </span>EvaluationResultImpl {</div>
<div class="line"><a name="l00113"></a><span class="lineno">  113</span>&#160;<span class="keyword">public</span>:</div>
<div class="line"><a name="l00114"></a><span class="lineno">  114</span>&#160;  EvaluationResultImpl(<span class="keywordtype">size_t</span> OutputSize)</div>
<div class="line"><a name="l00115"></a><span class="lineno">  115</span>&#160;      : OutputSize(OutputSize), <a class="code" href="namespacellvm_1_1SPIRV.html#a6fe3b53db27395a959d5493a0a6aeb50a29c2c02a361c9d7028472e5d92cd4a54">Output</a>(OutputSize){};</div>
<div class="line"><a name="l00116"></a><span class="lineno">  116</span>&#160; </div>
<div class="line"><a name="l00117"></a><span class="lineno">  117</span>&#160;  ~EvaluationResultImpl() {</div>
<div class="line"><a name="l00118"></a><span class="lineno">  118</span>&#160;    <span class="keywordflow">for</span> (<span class="keyword">auto</span> *<a class="code" href="README-SSE_8txt.html#a63d206a063eefcdf8c318ded97b65020">P</a> : Output)</div>
<div class="line"><a name="l00119"></a><span class="lineno">  119</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="README-SSE_8txt.html#a63d206a063eefcdf8c318ded97b65020">P</a>)</div>
<div class="line"><a name="l00120"></a><span class="lineno">  120</span>&#160;        TF_DeleteTensor(<a class="code" href="README-SSE_8txt.html#a63d206a063eefcdf8c318ded97b65020">P</a>);</div>
<div class="line"><a name="l00121"></a><span class="lineno">  121</span>&#160;  }</div>
<div class="line"><a name="l00122"></a><span class="lineno">  122</span>&#160; </div>
<div class="line"><a name="l00123"></a><span class="lineno">  123</span>&#160;  EvaluationResultImpl(<span class="keyword">const</span> EvaluationResultImpl &amp;) = <span class="keyword">delete</span>;</div>
<div class="line"><a name="l00124"></a><span class="lineno">  124</span>&#160;  EvaluationResultImpl(EvaluationResultImpl &amp;&amp;Other) = <span class="keyword">delete</span>;</div>
<div class="line"><a name="l00125"></a><span class="lineno">  125</span>&#160;  std::vector&lt;TF_Tensor *&gt; &amp;getOutput() { <span class="keywordflow">return</span> <a class="code" href="namespacellvm_1_1SPIRV.html#a6fe3b53db27395a959d5493a0a6aeb50a29c2c02a361c9d7028472e5d92cd4a54">Output</a>; }</div>
<div class="line"><a name="l00126"></a><span class="lineno">  126</span>&#160; </div>
<div class="line"><a name="l00127"></a><span class="lineno">  127</span>&#160;<span class="keyword">private</span>:</div>
<div class="line"><a name="l00128"></a><span class="lineno">  128</span>&#160;  <span class="keyword">const</span> <span class="keywordtype">size_t</span> OutputSize;</div>
<div class="line"><a name="l00129"></a><span class="lineno">  129</span>&#160;  std::vector&lt;TF_Tensor *&gt; <a class="code" href="namespacellvm_1_1SPIRV.html#a6fe3b53db27395a959d5493a0a6aeb50a29c2c02a361c9d7028472e5d92cd4a54">Output</a>;</div>
<div class="line"><a name="l00130"></a><span class="lineno">  130</span>&#160;};</div>
<div class="line"><a name="l00131"></a><span class="lineno">  131</span>&#160; </div>
<div class="line"><a name="l00132"></a><span class="lineno">  132</span>&#160;<span class="keyword">class </span>TFModelEvaluatorImpl {</div>
<div class="line"><a name="l00133"></a><span class="lineno">  133</span>&#160;<span class="keyword">public</span>:</div>
<div class="line"><a name="l00134"></a><span class="lineno">  134</span>&#160;  TFModelEvaluatorImpl(<a class="code" href="classllvm_1_1StringRef.html">StringRef</a> SavedModelPath,</div>
<div class="line"><a name="l00135"></a><span class="lineno">  135</span>&#160;                       <span class="keyword">const</span> std::vector&lt;TensorSpec&gt; &amp;InputSpecs,</div>
<div class="line"><a name="l00136"></a><span class="lineno">  136</span>&#160;                       <a class="code" href="classllvm_1_1function__ref.html">function_ref</a>&lt;<a class="code" href="classllvm_1_1TensorSpec.html">TensorSpec</a>(<span class="keywordtype">size_t</span>)&gt; GetOutputSpecs,</div>
<div class="line"><a name="l00137"></a><span class="lineno">  137</span>&#160;                       <span class="keywordtype">size_t</span> OutputSpecsSize, <span class="keyword">const</span> <span class="keywordtype">char</span> *Tags);</div>
<div class="line"><a name="l00138"></a><span class="lineno">  138</span>&#160; </div>
<div class="line"><a name="l00139"></a><span class="lineno">  139</span>&#160;  <span class="keywordtype">bool</span> <a class="code" href="RustDemangle_8cpp.html#a103d8cfe62c1651cd70e181746f8a840">isValid</a>()<span class="keyword"> const </span>{ <span class="keywordflow">return</span> IsValid; }</div>
<div class="line"><a name="l00140"></a><span class="lineno">  140</span>&#160;  <span class="keywordtype">size_t</span> OutputSize()<span class="keyword"> const </span>{ <span class="keywordflow">return</span> OutputFeed.size(); }</div>
<div class="line"><a name="l00141"></a><span class="lineno">  141</span>&#160; </div>
<div class="line"><a name="l00142"></a><span class="lineno">  142</span>&#160;  <span class="keywordtype">void</span> evaluate(TF_Tensor **Output, TF_Status *<a class="code" href="structStatus.html">Status</a>) {</div>
<div class="line"><a name="l00143"></a><span class="lineno">  143</span>&#160;    TF_SessionRun(Session, <span class="keyword">nullptr</span>, InputFeed.data(), <a class="code" href="namespacellvm_1_1SPIRV.html#a6fe3b53db27395a959d5493a0a6aeb50a324118a6721dd6b8a9b9f4e327df2bf5">Input</a>.data(),</div>
<div class="line"><a name="l00144"></a><span class="lineno">  144</span>&#160;                  <a class="code" href="namespacellvm_1_1SPIRV.html#a6fe3b53db27395a959d5493a0a6aeb50a324118a6721dd6b8a9b9f4e327df2bf5">Input</a>.size(), OutputFeed.data(), Output, OutputFeed.size(),</div>
<div class="line"><a name="l00145"></a><span class="lineno">  145</span>&#160;                  <span class="keyword">nullptr</span>, 0, <span class="keyword">nullptr</span>, <a class="code" href="structStatus.html">Status</a>);</div>
<div class="line"><a name="l00146"></a><span class="lineno">  146</span>&#160;  }</div>
<div class="line"><a name="l00147"></a><span class="lineno">  147</span>&#160; </div>
<div class="line"><a name="l00148"></a><span class="lineno">  148</span>&#160;  <span class="keywordtype">void</span> initInput(<span class="keywordtype">size_t</span> Index, TF_DataType <a class="code" href="classllvm_1_1Type.html">Type</a>,</div>
<div class="line"><a name="l00149"></a><span class="lineno">  149</span>&#160;                 <span class="keyword">const</span> std::vector&lt;int64_t&gt; &amp;Dimensions);</div>
<div class="line"><a name="l00150"></a><span class="lineno">  150</span>&#160;  <span class="keyword">const</span> std::vector&lt;TF_Tensor *&gt; &amp;getInput()<span class="keyword"> const </span>{ <span class="keywordflow">return</span> <a class="code" href="namespacellvm_1_1SPIRV.html#a6fe3b53db27395a959d5493a0a6aeb50a324118a6721dd6b8a9b9f4e327df2bf5">Input</a>; }</div>
<div class="line"><a name="l00151"></a><span class="lineno">  151</span>&#160; </div>
<div class="line"><a name="l00152"></a><span class="lineno">  152</span>&#160;  ~TFModelEvaluatorImpl();</div>
<div class="line"><a name="l00153"></a><span class="lineno">  153</span>&#160; </div>
<div class="line"><a name="l00154"></a><span class="lineno">  154</span>&#160;<span class="keyword">private</span>:<span class="comment"></span></div>
<div class="line"><a name="l00155"></a><span class="lineno">  155</span>&#160;<span class="comment">  /// The objects necessary for carrying out an evaluation of the SavedModel.</span></div>
<div class="line"><a name="l00156"></a><span class="lineno">  156</span>&#160;<span class="comment">  /// They are expensive to set up, and we maintain them accross all the</span></div>
<div class="line"><a name="l00157"></a><span class="lineno">  157</span>&#160;<span class="comment">  /// evaluations of the model.</span></div>
<div class="line"><a name="l00158"></a><span class="lineno">  158</span>&#160;<span class="comment"></span>  TF_Session *Session = <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l00159"></a><span class="lineno">  159</span>&#160;  TFGraphPtr Graph;</div>
<div class="line"><a name="l00160"></a><span class="lineno">  160</span>&#160;  TFSessionOptionsPtr <a class="code" href="PassBuilderBindings_8cpp.html#a47c521bf7ba0bb2147b96d068af30d04">Options</a>;</div>
<div class="line"><a name="l00161"></a><span class="lineno">  161</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l00162"></a><span class="lineno">  162</span>&#160;<span class="comment">  /// The specification of the input nodes.</span></div>
<div class="line"><a name="l00163"></a><span class="lineno">  163</span>&#160;<span class="comment"></span>  std::vector&lt;TF_Output&gt; InputFeed;</div>
<div class="line"><a name="l00164"></a><span class="lineno">  164</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l00165"></a><span class="lineno">  165</span>&#160;<span class="comment">  /// The input tensors. They must match by index of the corresponding InputFeed</span></div>
<div class="line"><a name="l00166"></a><span class="lineno">  166</span>&#160;<span class="comment">  /// value. We set up the tensors once and just mutate theirs scalars before</span></div>
<div class="line"><a name="l00167"></a><span class="lineno">  167</span>&#160;<span class="comment">  /// each evaluation. The input tensors keep their value after an evaluation.</span></div>
<div class="line"><a name="l00168"></a><span class="lineno">  168</span>&#160;<span class="comment"></span>  std::vector&lt;TF_Tensor *&gt; <a class="code" href="namespacellvm_1_1SPIRV.html#a6fe3b53db27395a959d5493a0a6aeb50a324118a6721dd6b8a9b9f4e327df2bf5">Input</a>;</div>
<div class="line"><a name="l00169"></a><span class="lineno">  169</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l00170"></a><span class="lineno">  170</span>&#160;<span class="comment">  /// The specification of the output nodes. When evaluating, the tensors in the</span></div>
<div class="line"><a name="l00171"></a><span class="lineno">  171</span>&#160;<span class="comment">  /// output tensor vector must match by index the corresponding element in the</span></div>
<div class="line"><a name="l00172"></a><span class="lineno">  172</span>&#160;<span class="comment">  /// OutputFeed.</span></div>
<div class="line"><a name="l00173"></a><span class="lineno">  173</span>&#160;<span class="comment"></span>  std::vector&lt;TF_Output&gt; OutputFeed;</div>
<div class="line"><a name="l00174"></a><span class="lineno">  174</span>&#160; </div>
<div class="line"><a name="l00175"></a><span class="lineno">  175</span>&#160;  <span class="keywordtype">void</span> invalidate() { IsValid = <span class="keyword">false</span>; }</div>
<div class="line"><a name="l00176"></a><span class="lineno">  176</span>&#160; </div>
<div class="line"><a name="l00177"></a><span class="lineno">  177</span>&#160;  <span class="keywordtype">bool</span> IsValid = <span class="keyword">true</span>;</div>
<div class="line"><a name="l00178"></a><span class="lineno">  178</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l00179"></a><span class="lineno">  179</span>&#160;<span class="comment">  /// Reusable utility for ensuring we can bind the requested Name to a node in</span></div>
<div class="line"><a name="l00180"></a><span class="lineno">  180</span>&#160;<span class="comment">  /// the SavedModel Graph.</span></div>
<div class="line"><a name="l00181"></a><span class="lineno">  181</span>&#160;<span class="comment"></span>  <span class="keywordtype">bool</span> checkReportAndInvalidate(<span class="keyword">const</span> TF_Output &amp;Output,</div>
<div class="line"><a name="l00182"></a><span class="lineno">  182</span>&#160;                                <span class="keyword">const</span> <a class="code" href="classllvm_1_1TensorSpec.html">TensorSpec</a> &amp;OutputSpec);</div>
<div class="line"><a name="l00183"></a><span class="lineno">  183</span>&#160;};</div>
<div class="line"><a name="l00184"></a><span class="lineno">  184</span>&#160; </div>
<div class="line"><a name="l00185"></a><span class="lineno">  185</span>&#160;<span class="keyword">class </span>LoggerDataImpl {</div>
<div class="line"><a name="l00186"></a><span class="lineno">  186</span>&#160;  <span class="keyword">const</span> std::vector&lt;LoggedFeatureSpec&gt; LoggedFeatureSpecs;</div>
<div class="line"><a name="l00187"></a><span class="lineno">  187</span>&#160;  <span class="keyword">const</span> <a class="code" href="classllvm_1_1TensorSpec.html">TensorSpec</a> RewardSpec;</div>
<div class="line"><a name="l00188"></a><span class="lineno">  188</span>&#160;  <span class="keyword">const</span> <span class="keywordtype">bool</span> IncludeReward;</div>
<div class="line"><a name="l00189"></a><span class="lineno">  189</span>&#160; </div>
<div class="line"><a name="l00190"></a><span class="lineno">  190</span>&#160;  std::vector&lt;tensorflow::FeatureList&gt; FeatureLists;</div>
<div class="line"><a name="l00191"></a><span class="lineno">  191</span>&#160;  tensorflow::FeatureList Reward;</div>
<div class="line"><a name="l00192"></a><span class="lineno">  192</span>&#160; </div>
<div class="line"><a name="l00193"></a><span class="lineno">  193</span>&#160;  <span class="keywordtype">bool</span> isSelfConsistent(<span class="keyword">const</span> tensorflow::SequenceExample &amp;SE,</div>
<div class="line"><a name="l00194"></a><span class="lineno">  194</span>&#160;                        <span class="keywordtype">size_t</span> NrRecords)<span class="keyword"> const </span>{</div>
<div class="line"><a name="l00195"></a><span class="lineno">  195</span>&#160;    <span class="keywordtype">bool</span> <a class="code" href="namespacellvm_1_1MipsISD.html#a422daf9aa810935178671306b651d69ba366e1eac31eeb1a1892d62ccfc0c8cf8">Ret</a> = <span class="keyword">true</span>;</div>
<div class="line"><a name="l00196"></a><span class="lineno">  196</span>&#160;    <span class="keywordflow">for</span> (<span class="keyword">const</span> <span class="keyword">auto</span> &amp;TSpecs : LoggedFeatureSpecs) {</div>
<div class="line"><a name="l00197"></a><span class="lineno">  197</span>&#160;      <span class="keyword">const</span> <span class="keyword">auto</span> &amp;<a class="code" href="namespacellvm_1_1GraphProgram.html#a0ad4685976f8c4d4a697a53fbe05d10b">Name</a> = TSpecs.getLoggingName();</div>
<div class="line"><a name="l00198"></a><span class="lineno">  198</span>&#160;      <span class="keyword">const</span> <span class="keyword">auto</span> &amp;FL = SE.feature_lists().feature_list().at(<a class="code" href="namespacellvm_1_1GraphProgram.html#a0ad4685976f8c4d4a697a53fbe05d10b">Name</a>).feature();</div>
<div class="line"><a name="l00199"></a><span class="lineno">  199</span>&#160;      <span class="keywordflow">if</span> (NrRecords != <span class="keyword">static_cast&lt;</span><span class="keywordtype">size_t</span><span class="keyword">&gt;</span>(FL.size())) {</div>
<div class="line"><a name="l00200"></a><span class="lineno">  200</span>&#160;        <a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <span class="stringliteral">&quot;[TF-UTILS]: &quot;</span> &lt;&lt; <a class="code" href="namespacellvm_1_1GraphProgram.html#a0ad4685976f8c4d4a697a53fbe05d10b">Name</a> &lt;&lt; <span class="stringliteral">&quot; has missing records. Expected &quot;</span></div>
<div class="line"><a name="l00201"></a><span class="lineno">  201</span>&#160;               &lt;&lt; NrRecords &lt;&lt; <span class="stringliteral">&quot; got &quot;</span> &lt;&lt; FL.size() &lt;&lt; <span class="stringliteral">&quot;\n&quot;</span>;</div>
<div class="line"><a name="l00202"></a><span class="lineno">  202</span>&#160;        <a class="code" href="namespacellvm_1_1MipsISD.html#a422daf9aa810935178671306b651d69ba366e1eac31eeb1a1892d62ccfc0c8cf8">Ret</a> = <span class="keyword">false</span>;</div>
<div class="line"><a name="l00203"></a><span class="lineno">  203</span>&#160;      }</div>
<div class="line"><a name="l00204"></a><span class="lineno">  204</span>&#160;    }</div>
<div class="line"><a name="l00205"></a><span class="lineno">  205</span>&#160;    <span class="keywordflow">if</span> (IncludeReward &amp;&amp; <span class="keyword">static_cast&lt;</span><span class="keywordtype">size_t</span><span class="keyword">&gt;</span>(SE.feature_lists()</div>
<div class="line"><a name="l00206"></a><span class="lineno">  206</span>&#160;                                                 .feature_list()</div>
<div class="line"><a name="l00207"></a><span class="lineno">  207</span>&#160;                                                 .at(RewardSpec.<a class="code" href="classllvm_1_1TensorSpec.html#a114953622905a50b6c0df289f436d379">name</a>())</div>
<div class="line"><a name="l00208"></a><span class="lineno">  208</span>&#160;                                                 .feature()</div>
<div class="line"><a name="l00209"></a><span class="lineno">  209</span>&#160;                                                 .size()) != NrRecords) {</div>
<div class="line"><a name="l00210"></a><span class="lineno">  210</span>&#160;      <a class="code" href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">dbgs</a>() &lt;&lt; <span class="stringliteral">&quot;[TF-UTILS]: reward is missing records.\n&quot;</span>;</div>
<div class="line"><a name="l00211"></a><span class="lineno">  211</span>&#160;      <a class="code" href="namespacellvm_1_1MipsISD.html#a422daf9aa810935178671306b651d69ba366e1eac31eeb1a1892d62ccfc0c8cf8">Ret</a> = <span class="keyword">false</span>;</div>
<div class="line"><a name="l00212"></a><span class="lineno">  212</span>&#160;    }</div>
<div class="line"><a name="l00213"></a><span class="lineno">  213</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="namespacellvm_1_1MipsISD.html#a422daf9aa810935178671306b651d69ba366e1eac31eeb1a1892d62ccfc0c8cf8">Ret</a>;</div>
<div class="line"><a name="l00214"></a><span class="lineno">  214</span>&#160;  }</div>
<div class="line"><a name="l00215"></a><span class="lineno">  215</span>&#160; </div>
<div class="line"><a name="l00216"></a><span class="lineno">  216</span>&#160;  <span class="keywordtype">void</span> transferLog(tensorflow::SequenceExample &amp;SE) {</div>
<div class="line"><a name="l00217"></a><span class="lineno">  217</span>&#160;    <span class="keyword">auto</span> *FL = SE.mutable_feature_lists()-&gt;mutable_feature_list();</div>
<div class="line"><a name="l00218"></a><span class="lineno">  218</span>&#160;    <span class="keywordflow">if</span> (IncludeReward)</div>
<div class="line"><a name="l00219"></a><span class="lineno">  219</span>&#160;      (*FL)[RewardSpec.<a class="code" href="classllvm_1_1TensorSpec.html#a114953622905a50b6c0df289f436d379">name</a>()] = <a class="code" href="lib_2Target_2ARM_2README_8txt.html#ad3a99906764c35b2694ae90fa57744a5">std::move</a>(Reward);</div>
<div class="line"><a name="l00220"></a><span class="lineno">  220</span>&#160;    <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(FeatureLists.size() == LoggedFeatureSpecs.size());</div>
<div class="line"><a name="l00221"></a><span class="lineno">  221</span>&#160;    <span class="keywordflow">for</span> (<span class="keywordtype">size_t</span> <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a> = 0; <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a> &lt; FeatureLists.size(); ++<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>) {</div>
<div class="line"><a name="l00222"></a><span class="lineno">  222</span>&#160;      <span class="keyword">const</span> <span class="keyword">auto</span> &amp;LFS = LoggedFeatureSpecs[<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>];</div>
<div class="line"><a name="l00223"></a><span class="lineno">  223</span>&#160;      (*FL)[LFS.getLoggingName()] = <a class="code" href="lib_2Target_2ARM_2README_8txt.html#ad3a99906764c35b2694ae90fa57744a5">std::move</a>(FeatureLists[<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>]);</div>
<div class="line"><a name="l00224"></a><span class="lineno">  224</span>&#160;    }</div>
<div class="line"><a name="l00225"></a><span class="lineno">  225</span>&#160;  }</div>
<div class="line"><a name="l00226"></a><span class="lineno">  226</span>&#160; </div>
<div class="line"><a name="l00227"></a><span class="lineno">  227</span>&#160;<span class="keyword">public</span>:</div>
<div class="line"><a name="l00228"></a><span class="lineno">  228</span>&#160;  LoggerDataImpl(<span class="keyword">const</span> std::vector&lt;LoggedFeatureSpec&gt; &amp;LoggedSpecs,</div>
<div class="line"><a name="l00229"></a><span class="lineno">  229</span>&#160;                 <span class="keyword">const</span> <a class="code" href="classllvm_1_1TensorSpec.html">TensorSpec</a> &amp;RewardSpec, <span class="keywordtype">bool</span> IncludeReward)</div>
<div class="line"><a name="l00230"></a><span class="lineno">  230</span>&#160;      : LoggedFeatureSpecs(LoggedSpecs), RewardSpec(RewardSpec),</div>
<div class="line"><a name="l00231"></a><span class="lineno">  231</span>&#160;        IncludeReward(IncludeReward), FeatureLists(LoggedFeatureSpecs.<a class="code" href="namespacellvm.html#a10f3d955592ae2bc745f57e5b48ae115">size</a>()) {}</div>
<div class="line"><a name="l00232"></a><span class="lineno">  232</span>&#160; </div>
<div class="line"><a name="l00233"></a><span class="lineno">  233</span>&#160;  <span class="comment">// flush the logged info to a stream and clear the log contents.</span></div>
<div class="line"><a name="l00234"></a><span class="lineno">  234</span>&#160;  <span class="keywordtype">void</span> flush(std::string *Str) {</div>
<div class="line"><a name="l00235"></a><span class="lineno">  235</span>&#160;    <span class="keywordtype">size_t</span> NrRecords = getNrRecords();</div>
<div class="line"><a name="l00236"></a><span class="lineno">  236</span>&#160;    (void)NrRecords;</div>
<div class="line"><a name="l00237"></a><span class="lineno">  237</span>&#160;    tensorflow::SequenceExample SE;</div>
<div class="line"><a name="l00238"></a><span class="lineno">  238</span>&#160;    transferLog(SE);</div>
<div class="line"><a name="l00239"></a><span class="lineno">  239</span>&#160;    <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(isSelfConsistent(SE, NrRecords));</div>
<div class="line"><a name="l00240"></a><span class="lineno">  240</span>&#160;    serialize(SE, Str);</div>
<div class="line"><a name="l00241"></a><span class="lineno">  241</span>&#160;  }</div>
<div class="line"><a name="l00242"></a><span class="lineno">  242</span>&#160; </div>
<div class="line"><a name="l00243"></a><span class="lineno">  243</span>&#160;  <span class="keywordtype">char</span> *addNewTensor(<span class="keywordtype">size_t</span> FeatureID) {</div>
<div class="line"><a name="l00244"></a><span class="lineno">  244</span>&#160;    <span class="keyword">const</span> <span class="keyword">auto</span> &amp;Spec = LoggedFeatureSpecs[FeatureID].Spec;</div>
<div class="line"><a name="l00245"></a><span class="lineno">  245</span>&#160;    <span class="keywordflow">if</span> (Spec.isElementType&lt;<span class="keywordtype">float</span>&gt;()) {</div>
<div class="line"><a name="l00246"></a><span class="lineno">  246</span>&#160;      <span class="keyword">auto</span> *RF = FeatureLists[FeatureID]</div>
<div class="line"><a name="l00247"></a><span class="lineno">  247</span>&#160;                     .add_feature()</div>
<div class="line"><a name="l00248"></a><span class="lineno">  248</span>&#160;                     -&gt;mutable_float_list()</div>
<div class="line"><a name="l00249"></a><span class="lineno">  249</span>&#160;                     -&gt;mutable_value();</div>
<div class="line"><a name="l00250"></a><span class="lineno">  250</span>&#160;      RF-&gt;Resize(Spec.getElementCount(), 0.0);</div>
<div class="line"><a name="l00251"></a><span class="lineno">  251</span>&#160;      <span class="keywordflow">return</span> <span class="keyword">reinterpret_cast&lt;</span><span class="keywordtype">char</span> *<span class="keyword">&gt;</span>(RF-&gt;mutable_data());</div>
<div class="line"><a name="l00252"></a><span class="lineno">  252</span>&#160;    } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (Spec.isElementType&lt;int32_t&gt;() || Spec.isElementType&lt;int64_t&gt;()) {</div>
<div class="line"><a name="l00253"></a><span class="lineno">  253</span>&#160;      <span class="keyword">auto</span> *RF = FeatureLists[FeatureID]</div>
<div class="line"><a name="l00254"></a><span class="lineno">  254</span>&#160;                     .add_feature()</div>
<div class="line"><a name="l00255"></a><span class="lineno">  255</span>&#160;                     -&gt;mutable_int64_list()</div>
<div class="line"><a name="l00256"></a><span class="lineno">  256</span>&#160;                     -&gt;mutable_value();</div>
<div class="line"><a name="l00257"></a><span class="lineno">  257</span>&#160;      RF-&gt;Resize(Spec.getElementCount(), 0);</div>
<div class="line"><a name="l00258"></a><span class="lineno">  258</span>&#160;      <span class="keywordflow">return</span> <span class="keyword">reinterpret_cast&lt;</span><span class="keywordtype">char</span> *<span class="keyword">&gt;</span>(RF-&gt;mutable_data());</div>
<div class="line"><a name="l00259"></a><span class="lineno">  259</span>&#160;    }</div>
<div class="line"><a name="l00260"></a><span class="lineno">  260</span>&#160;    <a class="code" href="Support_2ErrorHandling_8h.html#ace243f5c25697a1107cce46626b3dc94">llvm_unreachable</a>(<span class="stringliteral">&quot;Unsupported tensor type.&quot;</span>);</div>
<div class="line"><a name="l00261"></a><span class="lineno">  261</span>&#160;  }</div>
<div class="line"><a name="l00262"></a><span class="lineno">  262</span>&#160; </div>
<div class="line"><a name="l00263"></a><span class="lineno">  263</span>&#160;  <span class="keyword">template</span> &lt;<span class="keyword">typename</span> T&gt; <span class="keywordtype">void</span> logReward(<a class="code" href="classT.html">T</a> <a class="code" href="classllvm_1_1Value.html">Value</a>) {</div>
<div class="line"><a name="l00264"></a><span class="lineno">  264</span>&#160;    <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(IncludeReward);</div>
<div class="line"><a name="l00265"></a><span class="lineno">  265</span>&#160;    <span class="keywordflow">if</span> (RewardSpec.<a class="code" href="classllvm_1_1TensorSpec.html#afa97f648a54777270589ff9aff36ebb6">isElementType</a>&lt;<span class="keywordtype">float</span>&gt;())</div>
<div class="line"><a name="l00266"></a><span class="lineno">  266</span>&#160;      Reward.add_feature()-&gt;mutable_float_list()-&gt;add_value(<a class="code" href="classllvm_1_1Value.html">Value</a>);</div>
<div class="line"><a name="l00267"></a><span class="lineno">  267</span>&#160;    <span class="keywordflow">else</span> <span class="keywordflow">if</span> (RewardSpec.<a class="code" href="classllvm_1_1TensorSpec.html#afa97f648a54777270589ff9aff36ebb6">isElementType</a>&lt;int32_t&gt;() ||</div>
<div class="line"><a name="l00268"></a><span class="lineno">  268</span>&#160;             RewardSpec.<a class="code" href="classllvm_1_1TensorSpec.html#afa97f648a54777270589ff9aff36ebb6">isElementType</a>&lt;int64_t&gt;())</div>
<div class="line"><a name="l00269"></a><span class="lineno">  269</span>&#160;      Reward.add_feature()-&gt;mutable_int64_list()-&gt;add_value(<a class="code" href="classllvm_1_1Value.html">Value</a>);</div>
<div class="line"><a name="l00270"></a><span class="lineno">  270</span>&#160;    <span class="keywordflow">else</span></div>
<div class="line"><a name="l00271"></a><span class="lineno">  271</span>&#160;      <a class="code" href="Support_2ErrorHandling_8h.html#ace243f5c25697a1107cce46626b3dc94">llvm_unreachable</a>(<span class="stringliteral">&quot;Unsupported tensor type.&quot;</span>);</div>
<div class="line"><a name="l00272"></a><span class="lineno">  272</span>&#160;  }</div>
<div class="line"><a name="l00273"></a><span class="lineno">  273</span>&#160; </div>
<div class="line"><a name="l00274"></a><span class="lineno">  274</span>&#160;  <span class="keywordtype">size_t</span> getNrRecords()<span class="keyword"> const </span>{</div>
<div class="line"><a name="l00275"></a><span class="lineno">  275</span>&#160;    <span class="keywordflow">return</span> FeatureLists.empty() ? 0 : FeatureLists[0].feature().size();</div>
<div class="line"><a name="l00276"></a><span class="lineno">  276</span>&#160;  }</div>
<div class="line"><a name="l00277"></a><span class="lineno">  277</span>&#160;};</div>
<div class="line"><a name="l00278"></a><span class="lineno">  278</span>&#160;} <span class="comment">// namespace llvm</span></div>
<div class="line"><a name="l00279"></a><span class="lineno">  279</span>&#160; </div>
<div class="line"><a name="l00280"></a><span class="lineno">  280</span>&#160;TFModelEvaluatorImpl::TFModelEvaluatorImpl(</div>
<div class="line"><a name="l00281"></a><span class="lineno">  281</span>&#160;    <a class="code" href="classllvm_1_1StringRef.html">StringRef</a> SavedModelPath, <span class="keyword">const</span> std::vector&lt;TensorSpec&gt; &amp;InputSpecs,</div>
<div class="line"><a name="l00282"></a><span class="lineno">  282</span>&#160;    <a class="code" href="classllvm_1_1function__ref.html">function_ref</a>&lt;<a class="code" href="classllvm_1_1TensorSpec.html">TensorSpec</a>(<span class="keywordtype">size_t</span>)&gt; GetOutputSpecs, <span class="keywordtype">size_t</span> OutputSpecsSize,</div>
<div class="line"><a name="l00283"></a><span class="lineno">  283</span>&#160;    <span class="keyword">const</span> <span class="keywordtype">char</span> *Tags = <span class="stringliteral">&quot;serve&quot;</span>)</div>
<div class="line"><a name="l00284"></a><span class="lineno">  284</span>&#160;    : Graph(createTFGraph()), <a class="code" href="PassBuilderBindings_8cpp.html#a47c521bf7ba0bb2147b96d068af30d04">Options</a>(createTFSessionOptions()),</div>
<div class="line"><a name="l00285"></a><span class="lineno">  285</span>&#160;      InputFeed(InputSpecs.<a class="code" href="namespacellvm.html#a10f3d955592ae2bc745f57e5b48ae115">size</a>()), <a class="code" href="namespacellvm_1_1SPIRV.html#a6fe3b53db27395a959d5493a0a6aeb50a324118a6721dd6b8a9b9f4e327df2bf5">Input</a>(InputSpecs.<a class="code" href="namespacellvm.html#a10f3d955592ae2bc745f57e5b48ae115">size</a>()),</div>
<div class="line"><a name="l00286"></a><span class="lineno">  286</span>&#160;      OutputFeed(OutputSpecsSize) {</div>
<div class="line"><a name="l00287"></a><span class="lineno">  287</span>&#160;  <span class="keywordflow">if</span> (!ensureInitTF()) {</div>
<div class="line"><a name="l00288"></a><span class="lineno">  288</span>&#160;    <a class="code" href="namespacellvm.html#a9a7b5c68c90f85baaedaa854cc5002cc">errs</a>() &lt;&lt; <span class="stringliteral">&quot;Tensorflow should have been initialized&quot;</span>;</div>
<div class="line"><a name="l00289"></a><span class="lineno">  289</span>&#160;    <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l00290"></a><span class="lineno">  290</span>&#160;  }</div>
<div class="line"><a name="l00291"></a><span class="lineno">  291</span>&#160;  <span class="keyword">auto</span> <a class="code" href="structStatus.html">Status</a> = createTFStatus();</div>
<div class="line"><a name="l00292"></a><span class="lineno">  292</span>&#160; </div>
<div class="line"><a name="l00293"></a><span class="lineno">  293</span>&#160;  Session = TF_LoadSessionFromSavedModel(<a class="code" href="PassBuilderBindings_8cpp.html#a47c521bf7ba0bb2147b96d068af30d04">Options</a>.get(), <span class="keyword">nullptr</span>,</div>
<div class="line"><a name="l00294"></a><span class="lineno">  294</span>&#160;                                         SavedModelPath.<a class="code" href="classllvm_1_1StringRef.html#ae2338e6739b671ea853b6154db368292">str</a>().c_str(), &amp;Tags, 1,</div>
<div class="line"><a name="l00295"></a><span class="lineno">  295</span>&#160;                                         Graph.get(), <span class="keyword">nullptr</span>, <a class="code" href="structStatus.html">Status</a>.get());</div>
<div class="line"><a name="l00296"></a><span class="lineno">  296</span>&#160;  <span class="keywordflow">if</span> (TF_GetCode(<a class="code" href="structStatus.html">Status</a>.get()) != TF_Code::TF_OK) {</div>
<div class="line"><a name="l00297"></a><span class="lineno">  297</span>&#160;    <a class="code" href="namespacellvm.html#a9a7b5c68c90f85baaedaa854cc5002cc">errs</a>() &lt;&lt; TF_Message(<a class="code" href="structStatus.html">Status</a>.get());</div>
<div class="line"><a name="l00298"></a><span class="lineno">  298</span>&#160;    invalidate();</div>
<div class="line"><a name="l00299"></a><span class="lineno">  299</span>&#160;  }</div>
<div class="line"><a name="l00300"></a><span class="lineno">  300</span>&#160;  <span class="keywordtype">size_t</span> NrSupported = 0;</div>
<div class="line"><a name="l00301"></a><span class="lineno">  301</span>&#160;  <span class="keywordflow">for</span> (<span class="keywordtype">size_t</span> <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a> = 0; <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a> &lt; InputSpecs.size(); ++<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>) {</div>
<div class="line"><a name="l00302"></a><span class="lineno">  302</span>&#160;    <span class="keyword">auto</span> &amp;InputSpec = InputSpecs[<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>];</div>
<div class="line"><a name="l00303"></a><span class="lineno">  303</span>&#160;    InputFeed[<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>] = {</div>
<div class="line"><a name="l00304"></a><span class="lineno">  304</span>&#160;        TF_GraphOperationByName(Graph.get(), (InputSpec.name()).c_str()),</div>
<div class="line"><a name="l00305"></a><span class="lineno">  305</span>&#160;        InputSpec.port()};</div>
<div class="line"><a name="l00306"></a><span class="lineno">  306</span>&#160;    <span class="keywordflow">if</span> (!InputFeed[<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>].oper) {</div>
<div class="line"><a name="l00307"></a><span class="lineno">  307</span>&#160;      <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l00308"></a><span class="lineno">  308</span>&#160;    }</div>
<div class="line"><a name="l00309"></a><span class="lineno">  309</span>&#160;    <span class="keywordflow">if</span> (NrSupported++ != <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>) {</div>
<div class="line"><a name="l00310"></a><span class="lineno">  310</span>&#160;      <a class="code" href="namespacellvm.html#a9a7b5c68c90f85baaedaa854cc5002cc">errs</a>()</div>
<div class="line"><a name="l00311"></a><span class="lineno">  311</span>&#160;          &lt;&lt; <span class="stringliteral">&quot;Unsupported features must be placed at the end of the InputSpecs&quot;</span>;</div>
<div class="line"><a name="l00312"></a><span class="lineno">  312</span>&#160;      invalidate();</div>
<div class="line"><a name="l00313"></a><span class="lineno">  313</span>&#160;      <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l00314"></a><span class="lineno">  314</span>&#160;    }</div>
<div class="line"><a name="l00315"></a><span class="lineno">  315</span>&#160;    <span class="keywordflow">if</span> (!checkReportAndInvalidate(InputFeed[<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>], InputSpec))</div>
<div class="line"><a name="l00316"></a><span class="lineno">  316</span>&#160;      <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l00317"></a><span class="lineno">  317</span>&#160;    initInput(<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>, <span class="keyword">static_cast&lt;</span>TF_DataType<span class="keyword">&gt;</span>(getTFTypeIndex(InputSpec.type())),</div>
<div class="line"><a name="l00318"></a><span class="lineno">  318</span>&#160;              InputSpec.shape());</div>
<div class="line"><a name="l00319"></a><span class="lineno">  319</span>&#160;  }</div>
<div class="line"><a name="l00320"></a><span class="lineno">  320</span>&#160;  InputFeed.resize(NrSupported);</div>
<div class="line"><a name="l00321"></a><span class="lineno">  321</span>&#160;  <a class="code" href="namespacellvm_1_1SPIRV.html#a6fe3b53db27395a959d5493a0a6aeb50a324118a6721dd6b8a9b9f4e327df2bf5">Input</a>.resize(NrSupported);</div>
<div class="line"><a name="l00322"></a><span class="lineno">  322</span>&#160; </div>
<div class="line"><a name="l00323"></a><span class="lineno">  323</span>&#160;  <span class="keywordflow">for</span> (<span class="keywordtype">size_t</span> <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a> = 0; <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a> &lt; OutputSpecsSize; ++<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>) {</div>
<div class="line"><a name="l00324"></a><span class="lineno">  324</span>&#160;    <span class="keyword">auto</span> OutputSpec = GetOutputSpecs(<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>);</div>
<div class="line"><a name="l00325"></a><span class="lineno">  325</span>&#160;    OutputFeed[<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>] = {</div>
<div class="line"><a name="l00326"></a><span class="lineno">  326</span>&#160;        TF_GraphOperationByName(Graph.get(), (OutputSpec.name()).c_str()),</div>
<div class="line"><a name="l00327"></a><span class="lineno">  327</span>&#160;        OutputSpec.port()};</div>
<div class="line"><a name="l00328"></a><span class="lineno">  328</span>&#160;    <span class="keywordflow">if</span> (!checkReportAndInvalidate(OutputFeed[<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>], OutputSpec))</div>
<div class="line"><a name="l00329"></a><span class="lineno">  329</span>&#160;      <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l00330"></a><span class="lineno">  330</span>&#160;  }</div>
<div class="line"><a name="l00331"></a><span class="lineno">  331</span>&#160;}</div>
<div class="line"><a name="l00332"></a><span class="lineno">  332</span>&#160; </div>
<div class="line"><a name="l00333"></a><span class="lineno">  333</span>&#160;TFModelEvaluator::TFModelEvaluator(</div>
<div class="line"><a name="l00334"></a><span class="lineno">  334</span>&#160;    <a class="code" href="classllvm_1_1StringRef.html">StringRef</a> SavedModelPath, <span class="keyword">const</span> std::vector&lt;TensorSpec&gt; &amp;InputSpecs,</div>
<div class="line"><a name="l00335"></a><span class="lineno">  335</span>&#160;    <a class="code" href="classllvm_1_1function__ref.html">function_ref</a>&lt;<a class="code" href="classllvm_1_1TensorSpec.html">TensorSpec</a>(<span class="keywordtype">size_t</span>)&gt; GetOutputSpecs, <span class="keywordtype">size_t</span> OutputSpecsSize,</div>
<div class="line"><a name="l00336"></a><span class="lineno">  336</span>&#160;    <span class="keyword">const</span> <span class="keywordtype">char</span> *Tags)</div>
<div class="line"><a name="l00337"></a><span class="lineno">  337</span>&#160;    : Impl(<a class="code" href="lib_2CodeGen_2README_8txt.html#a3f8966a44f193849a18c573b402472b8">new</a> TFModelEvaluatorImpl(SavedModelPath, InputSpecs, GetOutputSpecs,</div>
<div class="line"><a name="l00338"></a><span class="lineno">  338</span>&#160;                                    OutputSpecsSize, Tags)) {</div>
<div class="line"><a name="l00339"></a><span class="lineno">  339</span>&#160;  <span class="keywordflow">if</span> (!Impl-&gt;isValid())</div>
<div class="line"><a name="l00340"></a><span class="lineno">  340</span>&#160;    Impl.reset();</div>
<div class="line"><a name="l00341"></a><span class="lineno">  341</span>&#160;}</div>
<div class="line"><a name="l00342"></a><span class="lineno">  342</span>&#160; </div>
<div class="line"><a name="l00343"></a><span class="lineno">  343</span>&#160;TFModelEvaluator::TFModelEvaluator(<a class="code" href="classllvm_1_1StringRef.html">StringRef</a> SavedModelPath,</div>
<div class="line"><a name="l00344"></a><span class="lineno">  344</span>&#160;                                   <span class="keyword">const</span> std::vector&lt;TensorSpec&gt; &amp;InputSpecs,</div>
<div class="line"><a name="l00345"></a><span class="lineno">  345</span>&#160;                                   <span class="keyword">const</span> std::vector&lt;TensorSpec&gt; &amp;OutputSpecs,</div>
<div class="line"><a name="l00346"></a><span class="lineno">  346</span>&#160;                                   <span class="keyword">const</span> <span class="keywordtype">char</span> *Tags)</div>
<div class="line"><a name="l00347"></a><span class="lineno">  347</span>&#160;    : <a class="code" href="classllvm_1_1TFModelEvaluator.html">TFModelEvaluator</a>(</div>
<div class="line"><a name="l00348"></a><span class="lineno">  348</span>&#160;          SavedModelPath, InputSpecs, [&amp;](size_t <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>) { <span class="keywordflow">return</span> OutputSpecs[<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>]; },</div>
<div class="line"><a name="l00349"></a><span class="lineno">  349</span>&#160;          OutputSpecs.<a class="code" href="classllvm_1_1StringRef.html#a6be6d88f75bb3301afc60249750f48e1">size</a>(), Tags) {}</div>
<div class="line"><a name="l00350"></a><span class="lineno">  350</span>&#160; </div>
<div class="line"><a name="l00351"></a><span class="lineno">  351</span>&#160;TFModelEvaluatorImpl::~TFModelEvaluatorImpl() {</div>
<div class="line"><a name="l00352"></a><span class="lineno">  352</span>&#160;  <span class="keywordflow">for</span> (<span class="keyword">auto</span> *<a class="code" href="classT.html">T</a> : Input) {</div>
<div class="line"><a name="l00353"></a><span class="lineno">  353</span>&#160;    TF_DeleteTensor(<a class="code" href="classT.html">T</a>);</div>
<div class="line"><a name="l00354"></a><span class="lineno">  354</span>&#160;  }</div>
<div class="line"><a name="l00355"></a><span class="lineno">  355</span>&#160;  <span class="keywordflow">if</span> (Session == <span class="keyword">nullptr</span>)</div>
<div class="line"><a name="l00356"></a><span class="lineno">  356</span>&#160;    <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l00357"></a><span class="lineno">  357</span>&#160;  <span class="keyword">auto</span> <a class="code" href="structStatus.html">Status</a> = createTFStatus();</div>
<div class="line"><a name="l00358"></a><span class="lineno">  358</span>&#160;  TF_DeleteSession(Session, <a class="code" href="structStatus.html">Status</a>.get());</div>
<div class="line"><a name="l00359"></a><span class="lineno">  359</span>&#160;  Session = <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l00360"></a><span class="lineno">  360</span>&#160;  <span class="keywordflow">if</span> (TF_GetCode(<a class="code" href="structStatus.html">Status</a>.get()) != TF_Code::TF_OK)</div>
<div class="line"><a name="l00361"></a><span class="lineno">  361</span>&#160;    <a class="code" href="namespacellvm.html#a9a7b5c68c90f85baaedaa854cc5002cc">errs</a>() &lt;&lt; <span class="stringliteral">&quot;Could not delete TF session&quot;</span>;</div>
<div class="line"><a name="l00362"></a><span class="lineno">  362</span>&#160;}</div>
<div class="line"><a name="l00363"></a><span class="lineno">  363</span>&#160; </div>
<div class="line"><a name="l00364"></a><span class="lineno">  364</span>&#160;<span class="keywordtype">bool</span> TFModelEvaluatorImpl::checkReportAndInvalidate(</div>
<div class="line"><a name="l00365"></a><span class="lineno">  365</span>&#160;    <span class="keyword">const</span> TF_Output &amp;Output, <span class="keyword">const</span> <a class="code" href="classllvm_1_1TensorSpec.html">TensorSpec</a> &amp;OutputSpec) {</div>
<div class="line"><a name="l00366"></a><span class="lineno">  366</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="namespacellvm_1_1SPIRV.html#a6fe3b53db27395a959d5493a0a6aeb50a29c2c02a361c9d7028472e5d92cd4a54">Output</a>.oper)</div>
<div class="line"><a name="l00367"></a><span class="lineno">  367</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l00368"></a><span class="lineno">  368</span>&#160;  <a class="code" href="namespacellvm.html#a9a7b5c68c90f85baaedaa854cc5002cc">errs</a>() &lt;&lt; <span class="stringliteral">&quot;Could not find TF_Output named: &quot;</span> + OutputSpec.<a class="code" href="classllvm_1_1TensorSpec.html#a114953622905a50b6c0df289f436d379">name</a>();</div>
<div class="line"><a name="l00369"></a><span class="lineno">  369</span>&#160;  IsValid = <span class="keyword">false</span>;</div>
<div class="line"><a name="l00370"></a><span class="lineno">  370</span>&#160;  <span class="keywordflow">return</span> IsValid;</div>
<div class="line"><a name="l00371"></a><span class="lineno">  371</span>&#160;}</div>
<div class="line"><a name="l00372"></a><span class="lineno">  372</span>&#160; </div>
<div class="line"><a name="l00373"></a><span class="lineno">  373</span>&#160;<a class="code" href="classllvm_1_1Optional.html">Optional&lt;TFModelEvaluator::EvaluationResult&gt;</a> TFModelEvaluator::evaluate() {</div>
<div class="line"><a name="l00374"></a><span class="lineno">  374</span>&#160;  <span class="keywordflow">if</span> (!<a class="code" href="RustDemangle_8cpp.html#a103d8cfe62c1651cd70e181746f8a840">isValid</a>())</div>
<div class="line"><a name="l00375"></a><span class="lineno">  375</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="namespacellvm.html#a6497a581a4f7152729c29a368ac7d7be">None</a>;</div>
<div class="line"><a name="l00376"></a><span class="lineno">  376</span>&#160;  std::unique_ptr&lt;EvaluationResultImpl&gt; <a class="code" href="namespacellvm_1_1MipsISD.html#a422daf9aa810935178671306b651d69ba366e1eac31eeb1a1892d62ccfc0c8cf8">Ret</a> =</div>
<div class="line"><a name="l00377"></a><span class="lineno">  377</span>&#160;      std::make_unique&lt;EvaluationResultImpl&gt;(Impl-&gt;OutputSize());</div>
<div class="line"><a name="l00378"></a><span class="lineno">  378</span>&#160;  <span class="keyword">auto</span> <a class="code" href="structStatus.html">Status</a> = createTFStatus();</div>
<div class="line"><a name="l00379"></a><span class="lineno">  379</span>&#160;  Impl-&gt;evaluate(<a class="code" href="namespacellvm_1_1MipsISD.html#a422daf9aa810935178671306b651d69ba366e1eac31eeb1a1892d62ccfc0c8cf8">Ret</a>-&gt;getOutput().data(), <a class="code" href="structStatus.html">Status</a>.get());</div>
<div class="line"><a name="l00380"></a><span class="lineno">  380</span>&#160;  <span class="keywordflow">if</span> (TF_GetCode(<a class="code" href="structStatus.html">Status</a>.get()) != TF_Code::TF_OK) {</div>
<div class="line"><a name="l00381"></a><span class="lineno">  381</span>&#160;    <a class="code" href="namespacellvm.html#a9a7b5c68c90f85baaedaa854cc5002cc">errs</a>() &lt;&lt; TF_Message(<a class="code" href="structStatus.html">Status</a>.get());</div>
<div class="line"><a name="l00382"></a><span class="lineno">  382</span>&#160;    Impl.reset();</div>
<div class="line"><a name="l00383"></a><span class="lineno">  383</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="namespacellvm.html#a6497a581a4f7152729c29a368ac7d7be">None</a>;</div>
<div class="line"><a name="l00384"></a><span class="lineno">  384</span>&#160;  }</div>
<div class="line"><a name="l00385"></a><span class="lineno">  385</span>&#160;  <span class="keywordflow">return</span> EvaluationResult(<a class="code" href="lib_2Target_2ARM_2README_8txt.html#ad3a99906764c35b2694ae90fa57744a5">std::move</a>(<a class="code" href="namespacellvm_1_1MipsISD.html#a422daf9aa810935178671306b651d69ba366e1eac31eeb1a1892d62ccfc0c8cf8">Ret</a>));</div>
<div class="line"><a name="l00386"></a><span class="lineno">  386</span>&#160;}</div>
<div class="line"><a name="l00387"></a><span class="lineno">  387</span>&#160; </div>
<div class="line"><a name="l00388"></a><span class="lineno">  388</span>&#160;<span class="keywordtype">void</span> TFModelEvaluatorImpl::initInput(<span class="keywordtype">size_t</span> Index, TF_DataType <a class="code" href="classllvm_1_1Type.html">Type</a>,</div>
<div class="line"><a name="l00389"></a><span class="lineno">  389</span>&#160;                                     <span class="keyword">const</span> std::vector&lt;int64_t&gt; &amp;Dimensions) {</div>
<div class="line"><a name="l00390"></a><span class="lineno">  390</span>&#160;  int64_t TotalSize = TF_DataTypeSize(<a class="code" href="classllvm_1_1Type.html">Type</a>);</div>
<div class="line"><a name="l00391"></a><span class="lineno">  391</span>&#160;  <span class="keywordflow">for</span> (<span class="keyword">auto</span> &amp;<a class="code" href="BuiltinGCs_8cpp.html#a9bf617fd3367180fb96cebccfaae8dfa">D</a> : Dimensions)</div>
<div class="line"><a name="l00392"></a><span class="lineno">  392</span>&#160;    TotalSize *= <a class="code" href="BuiltinGCs_8cpp.html#a9bf617fd3367180fb96cebccfaae8dfa">D</a>;</div>
<div class="line"><a name="l00393"></a><span class="lineno">  393</span>&#160; </div>
<div class="line"><a name="l00394"></a><span class="lineno">  394</span>&#160;  <a class="code" href="namespacellvm_1_1SPIRV.html#a6fe3b53db27395a959d5493a0a6aeb50a324118a6721dd6b8a9b9f4e327df2bf5">Input</a>[<a class="code" href="namespacellvm_1_1dwarf.html#a5d3c920b66ea797d6adb243862fdf47a">Index</a>] =</div>
<div class="line"><a name="l00395"></a><span class="lineno">  395</span>&#160;      TF_AllocateTensor(<a class="code" href="classllvm_1_1Type.html">Type</a>, Dimensions.data(), Dimensions.size(), TotalSize);</div>
<div class="line"><a name="l00396"></a><span class="lineno">  396</span>&#160;  std::memset(TF_TensorData(Input[Index]), 0, TotalSize);</div>
<div class="line"><a name="l00397"></a><span class="lineno">  397</span>&#160;}</div>
<div class="line"><a name="l00398"></a><span class="lineno">  398</span>&#160; </div>
<div class="line"><a name="l00399"></a><span class="lineno">  399</span>&#160;<span class="keywordtype">void</span> *TFModelEvaluator::getUntypedInput(<span class="keywordtype">size_t</span> Index) {</div>
<div class="line"><a name="l00400"></a><span class="lineno">  400</span>&#160;  <span class="keywordflow">if</span> (Index &lt; Impl-&gt;getInput().<a class="code" href="namespacellvm.html#a10f3d955592ae2bc745f57e5b48ae115">size</a>())</div>
<div class="line"><a name="l00401"></a><span class="lineno">  401</span>&#160;    <span class="keywordflow">return</span> TF_TensorData(Impl-&gt;getInput()[Index]);</div>
<div class="line"><a name="l00402"></a><span class="lineno">  402</span>&#160;  <span class="keywordflow">return</span> <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l00403"></a><span class="lineno">  403</span>&#160;}</div>
<div class="line"><a name="l00404"></a><span class="lineno">  404</span>&#160; </div>
<div class="line"><a name="l00405"></a><span class="lineno">  405</span>&#160;TFModelEvaluator::EvaluationResult::EvaluationResult(</div>
<div class="line"><a name="l00406"></a><span class="lineno">  406</span>&#160;    std::unique_ptr&lt;EvaluationResultImpl&gt; Impl)</div>
<div class="line"><a name="l00407"></a><span class="lineno">  407</span>&#160;    : Impl(<a class="code" href="namespacestd.html">std</a>::<a class="code" href="namespacellvm.html#abfc9c7ecf70f66901e439f7c04ef3dbb">move</a>(Impl)) {}</div>
<div class="line"><a name="l00408"></a><span class="lineno">  408</span>&#160; </div>
<div class="line"><a name="l00409"></a><span class="lineno">  409</span>&#160;TFModelEvaluator::EvaluationResult::EvaluationResult(EvaluationResult &amp;&amp;<a class="code" href="ELFYAML_8cpp.html#a2a91b094e777dacc21de2a7f35da6805">Other</a>)</div>
<div class="line"><a name="l00410"></a><span class="lineno">  410</span>&#160;    : Impl(<a class="code" href="namespacestd.html">std</a>::<a class="code" href="lib_2Target_2ARM_2README_8txt.html#ad3a99906764c35b2694ae90fa57744a5">move</a>(<a class="code" href="ELFYAML_8cpp.html#a2a91b094e777dacc21de2a7f35da6805">Other</a>.Impl)) {}</div>
<div class="line"><a name="l00411"></a><span class="lineno">  411</span>&#160; </div>
<div class="line"><a name="l00412"></a><span class="lineno">  412</span>&#160;TFModelEvaluator::EvaluationResult &amp;</div>
<div class="line"><a name="l00413"></a><span class="lineno">  413</span>&#160;TFModelEvaluator::EvaluationResult::operator=(EvaluationResult &amp;&amp;<a class="code" href="ELFYAML_8cpp.html#a2a91b094e777dacc21de2a7f35da6805">Other</a>) {</div>
<div class="line"><a name="l00414"></a><span class="lineno">  414</span>&#160;  Impl = <a class="code" href="lib_2Target_2ARM_2README_8txt.html#ad3a99906764c35b2694ae90fa57744a5">std::move</a>(<a class="code" href="ELFYAML_8cpp.html#a2a91b094e777dacc21de2a7f35da6805">Other</a>.Impl);</div>
<div class="line"><a name="l00415"></a><span class="lineno">  415</span>&#160;  <span class="keywordflow">return</span> *<span class="keyword">this</span>;</div>
<div class="line"><a name="l00416"></a><span class="lineno">  416</span>&#160;}</div>
<div class="line"><a name="l00417"></a><span class="lineno">  417</span>&#160; </div>
<div class="line"><a name="l00418"></a><span class="lineno">  418</span>&#160;<span class="keywordtype">void</span> *TFModelEvaluator::EvaluationResult::getUntypedTensorValue(<span class="keywordtype">size_t</span> <a class="code" href="ELFObjHandler_8cpp.html#aef61945034b9431b804748fc317c5548">Index</a>) {</div>
<div class="line"><a name="l00419"></a><span class="lineno">  419</span>&#160;  <span class="keywordflow">return</span> TF_TensorData(Impl-&gt;getOutput()[<a class="code" href="ELFObjHandler_8cpp.html#aef61945034b9431b804748fc317c5548">Index</a>]);</div>
<div class="line"><a name="l00420"></a><span class="lineno">  420</span>&#160;}</div>
<div class="line"><a name="l00421"></a><span class="lineno">  421</span>&#160; </div>
<div class="line"><a name="l00422"></a><span class="lineno">  422</span>&#160;<span class="keyword">const</span> <span class="keywordtype">void</span> *</div>
<div class="line"><a name="l00423"></a><span class="lineno">  423</span>&#160;TFModelEvaluator::EvaluationResult::getUntypedTensorValue(<span class="keywordtype">size_t</span> <a class="code" href="ELFObjHandler_8cpp.html#aef61945034b9431b804748fc317c5548">Index</a>)<span class="keyword"> const </span>{</div>
<div class="line"><a name="l00424"></a><span class="lineno">  424</span>&#160;  <span class="keywordflow">return</span> TF_TensorData(Impl-&gt;getOutput()[<a class="code" href="ELFObjHandler_8cpp.html#aef61945034b9431b804748fc317c5548">Index</a>]);</div>
<div class="line"><a name="l00425"></a><span class="lineno">  425</span>&#160;}</div>
<div class="line"><a name="l00426"></a><span class="lineno">  426</span>&#160; </div>
<div class="line"><a name="l00427"></a><span class="lineno">  427</span>&#160;TFModelEvaluator::EvaluationResult::~EvaluationResult() {}</div>
<div class="line"><a name="l00428"></a><span class="lineno">  428</span>&#160;TFModelEvaluator::~TFModelEvaluator() {}</div>
<div class="line"><a name="l00429"></a><span class="lineno">  429</span>&#160; </div>
<div class="line"><a name="l00430"></a><span class="lineno">  430</span>&#160;Logger::Logger(<span class="keyword">const</span> std::vector&lt;LoggedFeatureSpec&gt; &amp;FeatureSpecs,</div>
<div class="line"><a name="l00431"></a><span class="lineno">  431</span>&#160;               <span class="keyword">const</span> <a class="code" href="classllvm_1_1TensorSpec.html">TensorSpec</a> &amp;RewardSpec, <span class="keywordtype">bool</span> IncludeReward)</div>
<div class="line"><a name="l00432"></a><span class="lineno">  432</span>&#160;    : FeatureSpecs(FeatureSpecs), RewardSpec(RewardSpec),</div>
<div class="line"><a name="l00433"></a><span class="lineno">  433</span>&#160;      IncludeReward(IncludeReward),</div>
<div class="line"><a name="l00434"></a><span class="lineno">  434</span>&#160;      LoggerData(<a class="code" href="namespacestd.html">std</a>::make_unique&lt;LoggerDataImpl&gt;(FeatureSpecs, RewardSpec,</div>
<div class="line"><a name="l00435"></a><span class="lineno">  435</span>&#160;                                                  IncludeReward)) {}</div>
<div class="line"><a name="l00436"></a><span class="lineno">  436</span>&#160; </div>
<div class="line"><a name="l00437"></a><span class="lineno">  437</span>&#160;Logger::~Logger() {}</div>
<div class="line"><a name="l00438"></a><span class="lineno">  438</span>&#160; </div>
<div class="line"><a name="l00439"></a><span class="lineno">  439</span>&#160;<span class="preprocessor">#define LOG_REWARD(NAME, TYPE)                                                 \</span></div>
<div class="line"><a name="l00440"></a><span class="lineno">  440</span>&#160;<span class="preprocessor">  void Logger::log##NAME##Reward(TYPE Value) {                                 \</span></div>
<div class="line"><a name="l00441"></a><span class="lineno">  441</span>&#160;<span class="preprocessor">    assert(IncludeReward);                                                     \</span></div>
<div class="line"><a name="l00442"></a><span class="lineno">  442</span>&#160;<span class="preprocessor">    LoggerData-&gt;logReward(Value);                                              \</span></div>
<div class="line"><a name="l00443"></a><span class="lineno">  443</span>&#160;<span class="preprocessor">  }</span></div>
<div class="line"><a name="l00444"></a><span class="lineno">  444</span>&#160; </div>
<div class="line"><a name="l00445"></a><span class="lineno">  445</span>&#160;LOG_REWARD(<a class="code" href="namespacellvm_1_1NVPTX_1_1PTXLdStInstCode.html#a0c4e2aa2235abdd10d2beffa32cd9b14aa8d7a04ea7f61b2ae1250844cfc54941">Float</a>, <span class="keywordtype">float</span>)</div>
<div class="line"><a name="l00446"></a><span class="lineno">  446</span>&#160;LOG_REWARD(<a class="code" href="namespacellvm_1_1pdb.html#a434cfa04e4ed34b7a901378557d4ca9ea786eecab07351b4cc9e4c33f4cf5691e">Int32</a>, int32_t)</div>
<div class="line"><a name="l00447"></a><span class="lineno">  447</span>&#160;LOG_REWARD(<a class="code" href="namespacellvm_1_1pdb.html#a434cfa04e4ed34b7a901378557d4ca9ea68311183bd3c447d90828b5e2c90f582">Int64</a>, int64_t)</div>
<div class="line"><a name="l00448"></a><span class="lineno">  448</span>&#160;<span class="preprocessor">#undef LOG_REWARD</span></div>
<div class="line"><a name="l00449"></a><span class="lineno">  449</span>&#160; </div>
<div class="line"><a name="l00450"></a><span class="lineno">  450</span>&#160;<span class="preprocessor">#define LOG_FINAL_REWARD(NAME, TYPE)                                           \</span></div>
<div class="line"><a name="l00451"></a><span class="lineno">  451</span>&#160;<span class="preprocessor">  void Logger::log##NAME##FinalReward(TYPE Value) {                            \</span></div>
<div class="line"><a name="l00452"></a><span class="lineno">  452</span>&#160;<span class="preprocessor">    assert(RewardSpec.isElementType&lt;TYPE&gt;());                                  \</span></div>
<div class="line"><a name="l00453"></a><span class="lineno">  453</span>&#160;<span class="preprocessor">    for (size_t I = 1; I &lt; LoggerData-&gt;getNrRecords(); ++I)                    \</span></div>
<div class="line"><a name="l00454"></a><span class="lineno">  454</span>&#160;<span class="preprocessor">      log##NAME##Reward(0);                                                    \</span></div>
<div class="line"><a name="l00455"></a><span class="lineno">  455</span>&#160;<span class="preprocessor">    log##NAME##Reward(Value);                                                  \</span></div>
<div class="line"><a name="l00456"></a><span class="lineno">  456</span>&#160;<span class="preprocessor">  }</span></div>
<div class="line"><a name="l00457"></a><span class="lineno">  457</span>&#160; </div>
<div class="line"><a name="l00458"></a><span class="lineno">  458</span>&#160;LOG_FINAL_REWARD(<a class="code" href="namespacellvm_1_1NVPTX_1_1PTXLdStInstCode.html#a0c4e2aa2235abdd10d2beffa32cd9b14aa8d7a04ea7f61b2ae1250844cfc54941">Float</a>, <span class="keywordtype">float</span>)</div>
<div class="line"><a name="l00459"></a><span class="lineno">  459</span>&#160;LOG_FINAL_REWARD(<a class="code" href="namespacellvm_1_1pdb.html#a434cfa04e4ed34b7a901378557d4ca9ea786eecab07351b4cc9e4c33f4cf5691e">Int32</a>, int32_t)</div>
<div class="line"><a name="l00460"></a><span class="lineno">  460</span>&#160;LOG_FINAL_REWARD(<a class="code" href="namespacellvm_1_1pdb.html#a434cfa04e4ed34b7a901378557d4ca9ea68311183bd3c447d90828b5e2c90f582">Int64</a>, int64_t)</div>
<div class="line"><a name="l00461"></a><span class="lineno">  461</span>&#160;<span class="preprocessor">#undef LOG_FINAL_REWARD</span></div>
<div class="line"><a name="l00462"></a><span class="lineno">  462</span>&#160; </div>
<div class="line"><a name="l00463"></a><span class="lineno">  463</span>&#160;<span class="keywordtype">void</span> Logger::logFloatValue(<span class="keywordtype">size_t</span> FeatureID, <span class="keyword">const</span> <span class="keywordtype">float</span> *<a class="code" href="classllvm_1_1Value.html">Value</a>) {</div>
<div class="line"><a name="l00464"></a><span class="lineno">  464</span>&#160;  <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(FeatureSpecs[FeatureID].Spec.isElementType&lt;<span class="keywordtype">float</span>&gt;());</div>
<div class="line"><a name="l00465"></a><span class="lineno">  465</span>&#160;  logSpecifiedTensorValue(FeatureID, <span class="keyword">reinterpret_cast&lt;</span><span class="keyword">const </span><span class="keywordtype">char</span> *<span class="keyword">&gt;</span>(<a class="code" href="classllvm_1_1Value.html">Value</a>));</div>
<div class="line"><a name="l00466"></a><span class="lineno">  466</span>&#160;}</div>
<div class="line"><a name="l00467"></a><span class="lineno">  467</span>&#160; </div>
<div class="line"><a name="l00468"></a><span class="lineno">  468</span>&#160;<span class="keywordtype">void</span> Logger::logInt64Value(<span class="keywordtype">size_t</span> FeatureID, <span class="keyword">const</span> int64_t *<a class="code" href="classllvm_1_1Value.html">Value</a>) {</div>
<div class="line"><a name="l00469"></a><span class="lineno">  469</span>&#160;  <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(FeatureSpecs[FeatureID].Spec.isElementType&lt;int64_t&gt;());</div>
<div class="line"><a name="l00470"></a><span class="lineno">  470</span>&#160;  logSpecifiedTensorValue(FeatureID, <span class="keyword">reinterpret_cast&lt;</span><span class="keyword">const </span><span class="keywordtype">char</span> *<span class="keyword">&gt;</span>(<a class="code" href="classllvm_1_1Value.html">Value</a>));</div>
<div class="line"><a name="l00471"></a><span class="lineno">  471</span>&#160;}</div>
<div class="line"><a name="l00472"></a><span class="lineno">  472</span>&#160; </div>
<div class="line"><a name="l00473"></a><span class="lineno">  473</span>&#160;<span class="keywordtype">void</span> Logger::logInt32Value(<span class="keywordtype">size_t</span> FeatureID, <span class="keyword">const</span> int32_t *<a class="code" href="classllvm_1_1Value.html">Value</a>) {</div>
<div class="line"><a name="l00474"></a><span class="lineno">  474</span>&#160;  <a class="code" href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a>(FeatureSpecs[FeatureID].Spec.isElementType&lt;int32_t&gt;());</div>
<div class="line"><a name="l00475"></a><span class="lineno">  475</span>&#160;  logSpecifiedTensorValue(FeatureID, <span class="keyword">reinterpret_cast&lt;</span><span class="keyword">const </span><span class="keywordtype">char</span> *<span class="keyword">&gt;</span>(<a class="code" href="classllvm_1_1Value.html">Value</a>));</div>
<div class="line"><a name="l00476"></a><span class="lineno">  476</span>&#160;}</div>
<div class="line"><a name="l00477"></a><span class="lineno">  477</span>&#160; </div>
<div class="line"><a name="l00478"></a><span class="lineno">  478</span>&#160;<span class="keywordtype">void</span> Logger::logSpecifiedTensorValue(<span class="keywordtype">size_t</span> FeatureID, <span class="keyword">const</span> <span class="keywordtype">char</span> *RawData) {</div>
<div class="line"><a name="l00479"></a><span class="lineno">  479</span>&#160;  <span class="keyword">const</span> <span class="keyword">auto</span> &amp;Spec = FeatureSpecs[FeatureID].Spec;</div>
<div class="line"><a name="l00480"></a><span class="lineno">  480</span>&#160;  <span class="keywordtype">char</span> *Buff = addEntryAndGetFloatOrInt64Buffer(FeatureID);</div>
<div class="line"><a name="l00481"></a><span class="lineno">  481</span>&#160;  <span class="keywordflow">if</span> (Spec.isElementType&lt;int32_t&gt;())</div>
<div class="line"><a name="l00482"></a><span class="lineno">  482</span>&#160;    <span class="keywordflow">for</span> (<span class="keywordtype">size_t</span> <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a> = 0; <a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a> &lt; Spec.getElementCount(); ++<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>)</div>
<div class="line"><a name="l00483"></a><span class="lineno">  483</span>&#160;      (<span class="keyword">reinterpret_cast&lt;</span>int64_t *<span class="keyword">&gt;</span>(Buff))[<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>] =</div>
<div class="line"><a name="l00484"></a><span class="lineno">  484</span>&#160;          <span class="keyword">static_cast&lt;</span>int64_t<span class="keyword">&gt;</span>((<span class="keyword">reinterpret_cast&lt;</span><span class="keyword">const </span>int32_t *<span class="keyword">&gt;</span>(RawData))[<a class="code" href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a>]);</div>
<div class="line"><a name="l00485"></a><span class="lineno">  485</span>&#160;  <span class="keywordflow">else</span> <span class="keywordflow">if</span> (Spec.isElementType&lt;int64_t&gt;() || Spec.isElementType&lt;<span class="keywordtype">float</span>&gt;())</div>
<div class="line"><a name="l00486"></a><span class="lineno">  486</span>&#160;    <a class="code" href="lib_2Target_2ARM_2README_8txt.html#ae2bb081d94f22e64ca6bc4bd58512a93">std::memcpy</a>(Buff, RawData,</div>
<div class="line"><a name="l00487"></a><span class="lineno">  487</span>&#160;                Spec.getElementCount() * Spec.getElementByteSize());</div>
<div class="line"><a name="l00488"></a><span class="lineno">  488</span>&#160;  <span class="keywordflow">else</span></div>
<div class="line"><a name="l00489"></a><span class="lineno">  489</span>&#160;    <a class="code" href="Support_2ErrorHandling_8h.html#ace243f5c25697a1107cce46626b3dc94">llvm_unreachable</a>(<span class="stringliteral">&quot;Unsupported tensor type&quot;</span>);</div>
<div class="line"><a name="l00490"></a><span class="lineno">  490</span>&#160;}</div>
<div class="line"><a name="l00491"></a><span class="lineno">  491</span>&#160; </div>
<div class="line"><a name="l00492"></a><span class="lineno">  492</span>&#160;<span class="keywordtype">char</span> *Logger::addEntryAndGetFloatOrInt64Buffer(<span class="keywordtype">size_t</span> FeatureID) {</div>
<div class="line"><a name="l00493"></a><span class="lineno">  493</span>&#160;  <span class="keywordflow">return</span> <span class="keyword">reinterpret_cast&lt;</span><span class="keywordtype">char</span> *<span class="keyword">&gt;</span>(LoggerData-&gt;addNewTensor(FeatureID));</div>
<div class="line"><a name="l00494"></a><span class="lineno">  494</span>&#160;}</div>
<div class="line"><a name="l00495"></a><span class="lineno">  495</span>&#160; </div>
<div class="line"><a name="l00496"></a><span class="lineno">  496</span>&#160;<span class="keywordtype">void</span> Logger::flush(std::string *Str) { LoggerData-&gt;flush(Str); }</div>
<div class="line"><a name="l00497"></a><span class="lineno">  497</span>&#160; </div>
<div class="line"><a name="l00498"></a><span class="lineno">  498</span>&#160;<span class="keywordtype">void</span> Logger::flush(<a class="code" href="classllvm_1_1raw__ostream.html">raw_ostream</a> &amp;OS) {</div>
<div class="line"><a name="l00499"></a><span class="lineno">  499</span>&#160;  std::string Buff;</div>
<div class="line"><a name="l00500"></a><span class="lineno">  500</span>&#160;  LoggerData-&gt;flush(&amp;Buff);</div>
<div class="line"><a name="l00501"></a><span class="lineno">  501</span>&#160;  OS &lt;&lt; Buff;</div>
<div class="line"><a name="l00502"></a><span class="lineno">  502</span>&#160;}</div>
<div class="line"><a name="l00503"></a><span class="lineno">  503</span>&#160; </div>
<div class="line"><a name="l00504"></a><span class="lineno">  504</span>&#160;<span class="keywordtype">void</span> Logger::flushLogs(<a class="code" href="classllvm_1_1raw__ostream.html">raw_ostream</a> &amp;OS,</div>
<div class="line"><a name="l00505"></a><span class="lineno">  505</span>&#160;                       <span class="keyword">const</span> <a class="code" href="classllvm_1_1StringMap.html">StringMap</a>&lt;std::unique_ptr&lt;Logger&gt;&gt; &amp;Loggers) {</div>
<div class="line"><a name="l00506"></a><span class="lineno">  506</span>&#160;  google::protobuf::Struct <a class="code" href="namespacellvm_1_1AMDGPU_1_1SendMsg.html#ad7fab8522e49be1b20c4db4fc431bd3c">Msg</a>;</div>
<div class="line"><a name="l00507"></a><span class="lineno">  507</span>&#160;  <span class="keywordflow">for</span> (<span class="keyword">const</span> <span class="keyword">auto</span> &amp;NamedLogger : Loggers) {</div>
<div class="line"><a name="l00508"></a><span class="lineno">  508</span>&#160;    tensorflow::SequenceExample SE;</div>
<div class="line"><a name="l00509"></a><span class="lineno">  509</span>&#160;    <span class="keyword">const</span> <span class="keyword">auto</span> &amp;Logger = NamedLogger.second;</div>
<div class="line"><a name="l00510"></a><span class="lineno">  510</span>&#160;    std::string Unencoded;</div>
<div class="line"><a name="l00511"></a><span class="lineno">  511</span>&#160;    <span class="keywordflow">if</span> (Logger-&gt;LoggerData-&gt;getNrRecords() &gt; 0)</div>
<div class="line"><a name="l00512"></a><span class="lineno">  512</span>&#160;      Logger-&gt;flush(&amp;Unencoded);</div>
<div class="line"><a name="l00513"></a><span class="lineno">  513</span>&#160; </div>
<div class="line"><a name="l00514"></a><span class="lineno">  514</span>&#160;    (*<a class="code" href="namespacellvm_1_1AMDGPU_1_1SendMsg.html#ad7fab8522e49be1b20c4db4fc431bd3c">Msg</a>.mutable_fields())[NamedLogger.first().str()]</div>
<div class="line"><a name="l00515"></a><span class="lineno">  515</span>&#160;        .mutable_string_value()</div>
<div class="line"><a name="l00516"></a><span class="lineno">  516</span>&#160;        -&gt;append(ProtobufTextMode ? Unencoded : <a class="code" href="namespacellvm.html#a686d54d7abe31426be4d735b1e6f24db">encodeBase64</a>(Unencoded));</div>
<div class="line"><a name="l00517"></a><span class="lineno">  517</span>&#160;  }</div>
<div class="line"><a name="l00518"></a><span class="lineno">  518</span>&#160; </div>
<div class="line"><a name="l00519"></a><span class="lineno">  519</span>&#160;  std::string OutStr;</div>
<div class="line"><a name="l00520"></a><span class="lineno">  520</span>&#160;  serialize(<a class="code" href="namespacellvm_1_1AMDGPU_1_1SendMsg.html#ad7fab8522e49be1b20c4db4fc431bd3c">Msg</a>, &amp;OutStr);</div>
<div class="line"><a name="l00521"></a><span class="lineno">  521</span>&#160;  OS &lt;&lt; OutStr;</div>
<div class="line"><a name="l00522"></a><span class="lineno">  522</span>&#160;}</div>
<div class="line"><a name="l00523"></a><span class="lineno">  523</span>&#160;<span class="preprocessor">#endif // defined(LLVM_HAVE_TF_API)</span></div>
</div><!-- fragment --></div><!-- contents -->
<div class="ttc" id="aMemoryBuffer_8h_html"><div class="ttname"><a href="MemoryBuffer_8h.html">MemoryBuffer.h</a></div></div>
<div class="ttc" id="anamespacellvm_html_af5ab7a47bc553dfc3ee92daf969d0d7ca4bbb8f967da6d1a610596d7257179c2b"><div class="ttname"><a href="namespacellvm.html#af5ab7a47bc553dfc3ee92daf969d0d7ca4bbb8f967da6d1a610596d7257179c2b">llvm::TensorType::Invalid</a></div><div class="ttdeci">@ Invalid</div></div>
<div class="ttc" id="aTFUtils_8h_html"><div class="ttname"><a href="TFUtils_8h.html">TFUtils.h</a></div></div>
<div class="ttc" id="anamespacellvm_1_1SPIRV_html_a6fe3b53db27395a959d5493a0a6aeb50a324118a6721dd6b8a9b9f4e327df2bf5"><div class="ttname"><a href="namespacellvm_1_1SPIRV.html#a6fe3b53db27395a959d5493a0a6aeb50a324118a6721dd6b8a9b9f4e327df2bf5">llvm::SPIRV::StorageClass::Input</a></div><div class="ttdeci">@ Input</div></div>
<div class="ttc" id="anamespacellvm_html"><div class="ttname"><a href="namespacellvm.html">llvm</a></div><div class="ttdoc">This is an optimization pass for GlobalISel generic memory operations.</div><div class="ttdef"><b>Definition:</b> <a href="AddressRanges_8h_source.html#l00018">AddressRanges.h:18</a></div></div>
<div class="ttc" id="aclassllvm_1_1TFModelEvaluator_html"><div class="ttname"><a href="classllvm_1_1TFModelEvaluator.html">llvm::TFModelEvaluator</a></div><div class="ttdef"><b>Definition:</b> <a href="InlineSizeEstimatorAnalysis_8cpp_source.html#l00261">InlineSizeEstimatorAnalysis.cpp:261</a></div></div>
<div class="ttc" id="aclassT_html"><div class="ttname"><a href="classT.html">T</a></div></div>
<div class="ttc" id="anamespacellvm_1_1pdb_html_a434cfa04e4ed34b7a901378557d4ca9ea68311183bd3c447d90828b5e2c90f582"><div class="ttname"><a href="namespacellvm_1_1pdb.html#a434cfa04e4ed34b7a901378557d4ca9ea68311183bd3c447d90828b5e2c90f582">llvm::pdb::Int64</a></div><div class="ttdeci">@ Int64</div><div class="ttdef"><b>Definition:</b> <a href="PDBTypes_8h_source.html#l00400">PDBTypes.h:400</a></div></div>
<div class="ttc" id="aREADME-SSE_8txt_html_a63d206a063eefcdf8c318ded97b65020"><div class="ttname"><a href="README-SSE_8txt.html#a63d206a063eefcdf8c318ded97b65020">P</a></div><div class="ttdeci">This currently compiles esp xmm0 movsd esp eax eax esp ret We should use not the dag combiner This is because dagcombine2 needs to be able to see through the X86ISD::Wrapper which DAGCombine can t really do The code for turning x load into a single vector load is target independent and should be moved to the dag combiner The code for turning x load into a vector load can only handle a direct load from a global or a direct load from the stack It should be generalized to handle any load from P</div><div class="ttdef"><b>Definition:</b> <a href="README-SSE_8txt_source.html#l00411">README-SSE.txt:411</a></div></div>
<div class="ttc" id="anamespacellvm_1_1pdb_html_a434cfa04e4ed34b7a901378557d4ca9eaefdbbd0544eace5efa8f04052db39e1c"><div class="ttname"><a href="namespacellvm_1_1pdb.html#a434cfa04e4ed34b7a901378557d4ca9eaefdbbd0544eace5efa8f04052db39e1c">llvm::pdb::UInt16</a></div><div class="ttdeci">@ UInt16</div><div class="ttdef"><b>Definition:</b> <a href="PDBTypes_8h_source.html#l00404">PDBTypes.h:404</a></div></div>
<div class="ttc" id="aPath_8h_html"><div class="ttname"><a href="Path_8h.html">Path.h</a></div></div>
<div class="ttc" id="anamespacellvm_1_1cl_html_a68075925a54790e71ca790e1d4f21a40a263ac008d8d31f13ce460395fc4cf7e6"><div class="ttname"><a href="namespacellvm_1_1cl.html#a68075925a54790e71ca790e1d4f21a40a263ac008d8d31f13ce460395fc4cf7e6">llvm::cl::Hidden</a></div><div class="ttdeci">@ Hidden</div><div class="ttdef"><b>Definition:</b> <a href="CommandLine_8h_source.html#l00139">CommandLine.h:139</a></div></div>
<div class="ttc" id="aclassllvm_1_1Type_html"><div class="ttname"><a href="classllvm_1_1Type.html">llvm::Type</a></div><div class="ttdoc">The instances of the Type class are immutable: once they are created, they are never changed.</div><div class="ttdef"><b>Definition:</b> <a href="Type_8h_source.html#l00045">Type.h:45</a></div></div>
<div class="ttc" id="aclassllvm_1_1Optional_html"><div class="ttname"><a href="classllvm_1_1Optional.html">llvm::Optional</a></div><div class="ttdef"><b>Definition:</b> <a href="APInt_8h_source.html#l00033">APInt.h:33</a></div></div>
<div class="ttc" id="anamespacellvm_html_a9a7b5c68c90f85baaedaa854cc5002cc"><div class="ttname"><a href="namespacellvm.html#a9a7b5c68c90f85baaedaa854cc5002cc">llvm::errs</a></div><div class="ttdeci">raw_fd_ostream &amp; errs()</div><div class="ttdoc">This returns a reference to a raw_ostream for standard error.</div><div class="ttdef"><b>Definition:</b> <a href="raw__ostream_8cpp_source.html#l00893">raw_ostream.cpp:893</a></div></div>
<div class="ttc" id="anamespacellvm_1_1MipsISD_html_a422daf9aa810935178671306b651d69ba366e1eac31eeb1a1892d62ccfc0c8cf8"><div class="ttname"><a href="namespacellvm_1_1MipsISD.html#a422daf9aa810935178671306b651d69ba366e1eac31eeb1a1892d62ccfc0c8cf8">llvm::MipsISD::Ret</a></div><div class="ttdeci">@ Ret</div><div class="ttdef"><b>Definition:</b> <a href="MipsISelLowering_8h_source.html#l00119">MipsISelLowering.h:119</a></div></div>
<div class="ttc" id="anamespacellvm_1_1pdb_html_a434cfa04e4ed34b7a901378557d4ca9ead2ec7f6717029419e50f2c37332e8341"><div class="ttname"><a href="namespacellvm_1_1pdb.html#a434cfa04e4ed34b7a901378557d4ca9ead2ec7f6717029419e50f2c37332e8341">llvm::pdb::Double</a></div><div class="ttdeci">@ Double</div><div class="ttdef"><b>Definition:</b> <a href="PDBTypes_8h_source.html#l00402">PDBTypes.h:402</a></div></div>
<div class="ttc" id="anamespacellvm_html_a686d54d7abe31426be4d735b1e6f24db"><div class="ttname"><a href="namespacellvm.html#a686d54d7abe31426be4d735b1e6f24db">llvm::encodeBase64</a></div><div class="ttdeci">std::string encodeBase64(InputBytes const &amp;Bytes)</div><div class="ttdef"><b>Definition:</b> <a href="Base64_8h_source.html#l00021">Base64.h:21</a></div></div>
<div class="ttc" id="alib_2CodeGen_2README_8txt_html_a3f8966a44f193849a18c573b402472b8"><div class="ttname"><a href="lib_2CodeGen_2README_8txt.html#a3f8966a44f193849a18c573b402472b8">new</a></div><div class="ttdeci">Common register allocation spilling lr str ldr sxth r3 ldr mla r4 can lr mov lr str ldr sxth r3 mla r4 and then merge mul and lr str ldr sxth r3 mla r4 It also increase the likelihood the store may become dead bb27 Successors according to LLVM ID Predecessors according to mbb&lt; bb27, 0x8b0a7c0 &gt; Note ADDri is not a two address instruction its result reg1037 is an operand of the PHI node in bb76 and its operand reg1039 is the result of the PHI node We should treat it as a two address code and make sure the ADDri is scheduled after any node that reads reg1039 Use info(i.e. register scavenger) to assign it a free register to allow reuse the collector could move the objects and invalidate the derived pointer This is bad enough in the first but safe points can crop up unpredictably **array_addr i32 n y store obj * new</div><div class="ttdef"><b>Definition:</b> <a href="lib_2CodeGen_2README_8txt_source.html#l00125">README.txt:125</a></div></div>
<div class="ttc" id="anamespacellvm_html_a7c46c742c31be54870e2038048e6b391"><div class="ttname"><a href="namespacellvm.html#a7c46c742c31be54870e2038048e6b391">llvm::dbgs</a></div><div class="ttdeci">raw_ostream &amp; dbgs()</div><div class="ttdoc">dbgs() - This returns a reference to a raw_ostream for debugging messages.</div><div class="ttdef"><b>Definition:</b> <a href="Debug_8cpp_source.html#l00163">Debug.cpp:163</a></div></div>
<div class="ttc" id="aCommandLine_8h_html"><div class="ttname"><a href="CommandLine_8h.html">CommandLine.h</a></div></div>
<div class="ttc" id="aTwine_8h_html"><div class="ttname"><a href="Twine_8h.html">Twine.h</a></div></div>
<div class="ttc" id="anamespacellvm_1_1pdb_html_a434cfa04e4ed34b7a901378557d4ca9ea0ca360365331d9e298b726321529ee25"><div class="ttname"><a href="namespacellvm_1_1pdb.html#a434cfa04e4ed34b7a901378557d4ca9ea0ca360365331d9e298b726321529ee25">llvm::pdb::UInt32</a></div><div class="ttdeci">@ UInt32</div><div class="ttdef"><b>Definition:</b> <a href="PDBTypes_8h_source.html#l00405">PDBTypes.h:405</a></div></div>
<div class="ttc" id="anamespacellvm_1_1dwarf_html_a5d3c920b66ea797d6adb243862fdf47a"><div class="ttname"><a href="namespacellvm_1_1dwarf.html#a5d3c920b66ea797d6adb243862fdf47a">llvm::dwarf::Index</a></div><div class="ttdeci">Index</div><div class="ttdef"><b>Definition:</b> <a href="Dwarf_8h_source.html#l00472">Dwarf.h:472</a></div></div>
<div class="ttc" id="anamespacellvm_1_1pdb_html_a434cfa04e4ed34b7a901378557d4ca9eab4469cd975dfe176a70d24e5904cedf6"><div class="ttname"><a href="namespacellvm_1_1pdb.html#a434cfa04e4ed34b7a901378557d4ca9eab4469cd975dfe176a70d24e5904cedf6">llvm::pdb::Int8</a></div><div class="ttdeci">@ Int8</div><div class="ttdef"><b>Definition:</b> <a href="PDBTypes_8h_source.html#l00397">PDBTypes.h:397</a></div></div>
<div class="ttc" id="aPassBuilderBindings_8cpp_html_a47c521bf7ba0bb2147b96d068af30d04"><div class="ttname"><a href="PassBuilderBindings_8cpp.html#a47c521bf7ba0bb2147b96d068af30d04">Options</a></div><div class="ttdeci">const char LLVMTargetMachineRef LLVMPassBuilderOptionsRef Options</div><div class="ttdef"><b>Definition:</b> <a href="PassBuilderBindings_8cpp_source.html#l00048">PassBuilderBindings.cpp:48</a></div></div>
<div class="ttc" id="aclassllvm_1_1raw__ostream_html"><div class="ttname"><a href="classllvm_1_1raw__ostream.html">llvm::raw_ostream</a></div><div class="ttdoc">This class implements an extremely fast bulk output stream that can only output to a stream.</div><div class="ttdef"><b>Definition:</b> <a href="raw__ostream_8h_source.html#l00054">raw_ostream.h:54</a></div></div>
<div class="ttc" id="anamespacellvm_1_1SPIRV_html_a6fe3b53db27395a959d5493a0a6aeb50a29c2c02a361c9d7028472e5d92cd4a54"><div class="ttname"><a href="namespacellvm_1_1SPIRV.html#a6fe3b53db27395a959d5493a0a6aeb50a29c2c02a361c9d7028472e5d92cd4a54">llvm::SPIRV::StorageClass::Output</a></div><div class="ttdeci">@ Output</div></div>
<div class="ttc" id="aJSON_8h_html"><div class="ttname"><a href="JSON_8h.html">JSON.h</a></div></div>
<div class="ttc" id="aclassllvm_1_1StringRef_html_ae2338e6739b671ea853b6154db368292"><div class="ttname"><a href="classllvm_1_1StringRef.html#ae2338e6739b671ea853b6154db368292">llvm::StringRef::str</a></div><div class="ttdeci">LLVM_NODISCARD std::string str() const</div><div class="ttdoc">str - Get the contents as an std::string.</div><div class="ttdef"><b>Definition:</b> <a href="StringRef_8h_source.html#l00249">StringRef.h:249</a></div></div>
<div class="ttc" id="anamespacellvm_html_a6497a581a4f7152729c29a368ac7d7be"><div class="ttname"><a href="namespacellvm.html#a6497a581a4f7152729c29a368ac7d7be">llvm::None</a></div><div class="ttdeci">const NoneType None</div><div class="ttdef"><b>Definition:</b> <a href="None_8h_source.html#l00024">None.h:24</a></div></div>
<div class="ttc" id="aclassllvm_1_1StringMap_html"><div class="ttname"><a href="classllvm_1_1StringMap.html">llvm::StringMap</a></div><div class="ttdoc">StringMap - This is an unconventional map that is specialized for handling keys that are &quot;strings&quot;,...</div><div class="ttdef"><b>Definition:</b> <a href="StringMap_8h_source.html#l00110">StringMap.h:110</a></div></div>
<div class="ttc" id="aclassllvm_1_1TensorSpec_html_afa97f648a54777270589ff9aff36ebb6"><div class="ttname"><a href="classllvm_1_1TensorSpec.html#afa97f648a54777270589ff9aff36ebb6">llvm::TensorSpec::isElementType</a></div><div class="ttdeci">bool isElementType() const</div><div class="ttdef"><b>Definition:</b> <a href="TensorSpec_8h_source.html#l00080">TensorSpec.h:80</a></div></div>
<div class="ttc" id="aclassllvm_1_1function__ref_html"><div class="ttname"><a href="classllvm_1_1function__ref.html">llvm::function_ref</a></div><div class="ttdoc">An efficient, type-erasing, non-owning reference to a callable.</div><div class="ttdef"><b>Definition:</b> <a href="STLFunctionalExtras_8h_source.html#l00036">STLFunctionalExtras.h:36</a></div></div>
<div class="ttc" id="aclassllvm_1_1cl_1_1opt_html"><div class="ttname"><a href="classllvm_1_1cl_1_1opt.html">llvm::cl::opt&lt; bool &gt;</a></div></div>
<div class="ttc" id="aELFObjHandler_8cpp_html_aef61945034b9431b804748fc317c5548"><div class="ttname"><a href="ELFObjHandler_8cpp.html#aef61945034b9431b804748fc317c5548">Index</a></div><div class="ttdeci">uint32_t Index</div><div class="ttdef"><b>Definition:</b> <a href="ELFObjHandler_8cpp_source.html#l00082">ELFObjHandler.cpp:82</a></div></div>
<div class="ttc" id="aBuiltinGCs_8cpp_html_a9bf617fd3367180fb96cebccfaae8dfa"><div class="ttname"><a href="BuiltinGCs_8cpp.html#a9bf617fd3367180fb96cebccfaae8dfa">D</a></div><div class="ttdeci">static GCRegistry::Add&lt; StatepointGC &gt; D(&quot;statepoint-example&quot;, &quot;an example strategy for statepoint&quot;)</div></div>
<div class="ttc" id="alib_2Target_2ARM_2README_8txt_html_ad3a99906764c35b2694ae90fa57744a5"><div class="ttname"><a href="lib_2Target_2ARM_2README_8txt.html#ad3a99906764c35b2694ae90fa57744a5">move</a></div><div class="ttdeci">compiles ldr LCPI1_0 ldr ldr mov lsr tst moveq r1 ldr LCPI1_1 and r0 bx lr It would be better to do something like to fold the shift into the conditional move</div><div class="ttdef"><b>Definition:</b> <a href="lib_2Target_2ARM_2README_8txt_source.html#l00546">README.txt:546</a></div></div>
<div class="ttc" id="anamespacellvm_1_1pdb_html_a434cfa04e4ed34b7a901378557d4ca9ea786eecab07351b4cc9e4c33f4cf5691e"><div class="ttname"><a href="namespacellvm_1_1pdb.html#a434cfa04e4ed34b7a901378557d4ca9ea786eecab07351b4cc9e4c33f4cf5691e">llvm::pdb::Int32</a></div><div class="ttdeci">@ Int32</div><div class="ttdef"><b>Definition:</b> <a href="PDBTypes_8h_source.html#l00399">PDBTypes.h:399</a></div></div>
<div class="ttc" id="anamespacellvm_1_1NVPTX_1_1PTXLdStInstCode_html_a0c4e2aa2235abdd10d2beffa32cd9b14aa8d7a04ea7f61b2ae1250844cfc54941"><div class="ttname"><a href="namespacellvm_1_1NVPTX_1_1PTXLdStInstCode.html#a0c4e2aa2235abdd10d2beffa32cd9b14aa8d7a04ea7f61b2ae1250844cfc54941">llvm::NVPTX::PTXLdStInstCode::Float</a></div><div class="ttdeci">@ Float</div><div class="ttdef"><b>Definition:</b> <a href="NVPTX_8h_source.html#l00118">NVPTX.h:118</a></div></div>
<div class="ttc" id="aMD5_8cpp_html_ac0eafdc9ee161b71e7af98af736952fd"><div class="ttname"><a href="MD5_8cpp.html#ac0eafdc9ee161b71e7af98af736952fd">I</a></div><div class="ttdeci">#define I(x, y, z)</div><div class="ttdef"><b>Definition:</b> <a href="MD5_8cpp_source.html#l00058">MD5.cpp:58</a></div></div>
<div class="ttc" id="anamespacellvm_1_1cl_html_a10a041239ae1870cfcc064bfaa79fb65"><div class="ttname"><a href="namespacellvm_1_1cl.html#a10a041239ae1870cfcc064bfaa79fb65">llvm::cl::init</a></div><div class="ttdeci">initializer&lt; Ty &gt; init(const Ty &amp;Val)</div><div class="ttdef"><b>Definition:</b> <a href="CommandLine_8h_source.html#l00432">CommandLine.h:432</a></div></div>
<div class="ttc" id="aBase64_8h_html"><div class="ttname"><a href="Base64_8h.html">Base64.h</a></div></div>
<div class="ttc" id="aSILowerControlFlow_8cpp_html_a4868c5d81c5ccc98c47aeab6244346a0"><div class="ttname"><a href="SILowerControlFlow_8cpp.html#a4868c5d81c5ccc98c47aeab6244346a0">assert</a></div><div class="ttdeci">assert(ImpDefSCC.getReg()==AMDGPU::SCC &amp;&amp;ImpDefSCC.isDef())</div></div>
<div class="ttc" id="anamespacellvm_html_abfc9c7ecf70f66901e439f7c04ef3dbb"><div class="ttname"><a href="namespacellvm.html#abfc9c7ecf70f66901e439f7c04ef3dbb">llvm::move</a></div><div class="ttdeci">OutputIt move(R &amp;&amp;Range, OutputIt Out)</div><div class="ttdoc">Provide wrappers to std::move which take ranges instead of having to pass begin/end explicitly.</div><div class="ttdef"><b>Definition:</b> <a href="STLExtras_8h_source.html#l01675">STLExtras.h:1675</a></div></div>
<div class="ttc" id="alib_2Target_2ARM_2README_8txt_html_ae2bb081d94f22e64ca6bc4bd58512a93"><div class="ttname"><a href="lib_2Target_2ARM_2README_8txt.html#ae2bb081d94f22e64ca6bc4bd58512a93">memcpy</a></div><div class="ttdeci">&lt;%struct.s * &gt; cast struct s *S to sbyte *&lt; sbyte * &gt; sbyte uint cast struct s *agg result to sbyte *&lt; sbyte * &gt; sbyte uint cast struct s *memtmp to sbyte *&lt; sbyte * &gt; sbyte uint ret void llc ends up issuing two memcpy or custom lower memcpy(of small size) to be ldmia/stmia. I think option 2 is better but the current register allocator cannot allocate a chunk of registers at a time. A feasible temporary solution is to use specific physical registers at the lowering time for small(&lt;</div></div>
<div class="ttc" id="aclassllvm_1_1TensorSpec_html_a114953622905a50b6c0df289f436d379"><div class="ttname"><a href="classllvm_1_1TensorSpec.html#a114953622905a50b6c0df289f436d379">llvm::TensorSpec::name</a></div><div class="ttdeci">const std::string &amp; name() const</div><div class="ttdef"><b>Definition:</b> <a href="TensorSpec_8h_source.html#l00061">TensorSpec.h:61</a></div></div>
<div class="ttc" id="astructStatus_html"><div class="ttname"><a href="structStatus.html">Status</a></div><div class="ttdef"><b>Definition:</b> <a href="SIModeRegister_8cpp_source.html#l00029">SIModeRegister.cpp:29</a></div></div>
<div class="ttc" id="anamespacellvm_html_a10f3d955592ae2bc745f57e5b48ae115"><div class="ttname"><a href="namespacellvm.html#a10f3d955592ae2bc745f57e5b48ae115">llvm::size</a></div><div class="ttdeci">auto size(R &amp;&amp;Range, std::enable_if_t&lt; std::is_base_of&lt; std::random_access_iterator_tag, typename std::iterator_traits&lt; decltype(Range.begin())&gt;::iterator_category &gt;::value, void &gt; *=nullptr)</div><div class="ttdoc">Get the size of a range.</div><div class="ttdef"><b>Definition:</b> <a href="STLExtras_8h_source.html#l01598">STLExtras.h:1598</a></div></div>
<div class="ttc" id="aclassllvm_1_1StringRef_html"><div class="ttname"><a href="classllvm_1_1StringRef.html">llvm::StringRef</a></div><div class="ttdoc">StringRef - Represent a constant reference to a string, i.e.</div><div class="ttdef"><b>Definition:</b> <a href="StringRef_8h_source.html#l00058">StringRef.h:58</a></div></div>
<div class="ttc" id="aSupport_2ErrorHandling_8h_html_ace243f5c25697a1107cce46626b3dc94"><div class="ttname"><a href="Support_2ErrorHandling_8h.html#ace243f5c25697a1107cce46626b3dc94">llvm_unreachable</a></div><div class="ttdeci">#define llvm_unreachable(msg)</div><div class="ttdoc">Marks that the current location is not supposed to be reachable.</div><div class="ttdef"><b>Definition:</b> <a href="Support_2ErrorHandling_8h_source.html#l00143">ErrorHandling.h:143</a></div></div>
<div class="ttc" id="anamespacellvm_html_af5ab7a47bc553dfc3ee92daf969d0d7c"><div class="ttname"><a href="namespacellvm.html#af5ab7a47bc553dfc3ee92daf969d0d7c">llvm::TensorType</a></div><div class="ttdeci">TensorType</div><div class="ttdef"><b>Definition:</b> <a href="TensorSpec_8h_source.html#l00045">TensorSpec.h:45</a></div></div>
<div class="ttc" id="anamespacellvm_1_1AMDGPU_1_1SendMsg_html_ad7fab8522e49be1b20c4db4fc431bd3c"><div class="ttname"><a href="namespacellvm_1_1AMDGPU_1_1SendMsg.html#ad7fab8522e49be1b20c4db4fc431bd3c">llvm::AMDGPU::SendMsg::Msg</a></div><div class="ttdeci">const CustomOperand&lt; const MCSubtargetInfo &amp; &gt; Msg[]</div><div class="ttdef"><b>Definition:</b> <a href="AMDGPUAsmUtils_8cpp_source.html#l00039">AMDGPUAsmUtils.cpp:39</a></div></div>
<div class="ttc" id="aclassllvm_1_1StringRef_html_a6be6d88f75bb3301afc60249750f48e1"><div class="ttname"><a href="classllvm_1_1StringRef.html#a6be6d88f75bb3301afc60249750f48e1">llvm::StringRef::size</a></div><div class="ttdeci">constexpr LLVM_NODISCARD size_t size() const</div><div class="ttdoc">size - Get the string size.</div><div class="ttdef"><b>Definition:</b> <a href="StringRef_8h_source.html#l00157">StringRef.h:157</a></div></div>
<div class="ttc" id="anamespacellvm_1_1GraphProgram_html_a0ad4685976f8c4d4a697a53fbe05d10b"><div class="ttname"><a href="namespacellvm_1_1GraphProgram.html#a0ad4685976f8c4d4a697a53fbe05d10b">llvm::GraphProgram::Name</a></div><div class="ttdeci">Name</div><div class="ttdef"><b>Definition:</b> <a href="GraphWriter_8h_source.html#l00050">GraphWriter.h:50</a></div></div>
<div class="ttc" id="anamespacestd_html"><div class="ttname"><a href="namespacestd.html">std</a></div><div class="ttdef"><b>Definition:</b> <a href="BitVector_8h_source.html#l00851">BitVector.h:851</a></div></div>
<div class="ttc" id="anamespacellvm_1_1pdb_html_a434cfa04e4ed34b7a901378557d4ca9ea3faf2bc8c8c4b0fb591b5d2604132bda"><div class="ttname"><a href="namespacellvm_1_1pdb.html#a434cfa04e4ed34b7a901378557d4ca9ea3faf2bc8c8c4b0fb591b5d2604132bda">llvm::pdb::Int16</a></div><div class="ttdeci">@ Int16</div><div class="ttdef"><b>Definition:</b> <a href="PDBTypes_8h_source.html#l00398">PDBTypes.h:398</a></div></div>
<div class="ttc" id="aRustDemangle_8cpp_html_a103d8cfe62c1651cd70e181746f8a840"><div class="ttname"><a href="RustDemangle_8cpp.html#a103d8cfe62c1651cd70e181746f8a840">isValid</a></div><div class="ttdeci">static bool isValid(const char C)</div><div class="ttdoc">Returns true if C is a valid mangled character: &lt;0-9a-zA-Z_&gt;.</div><div class="ttdef"><b>Definition:</b> <a href="RustDemangle_8cpp_source.html#l00187">RustDemangle.cpp:187</a></div></div>
<div class="ttc" id="astructllvm_1_1cl_1_1desc_html"><div class="ttname"><a href="structllvm_1_1cl_1_1desc.html">llvm::cl::desc</a></div><div class="ttdef"><b>Definition:</b> <a href="CommandLine_8h_source.html#l00405">CommandLine.h:405</a></div></div>
<div class="ttc" id="araw__ostream_8h_html"><div class="ttname"><a href="raw__ostream_8h.html">raw_ostream.h</a></div></div>
<div class="ttc" id="anamespacellvm_1_1pdb_html_a434cfa04e4ed34b7a901378557d4ca9ea796898b84e5c80a0e59874e982646cec"><div class="ttname"><a href="namespacellvm_1_1pdb.html#a434cfa04e4ed34b7a901378557d4ca9ea796898b84e5c80a0e59874e982646cec">llvm::pdb::UInt64</a></div><div class="ttdeci">@ UInt64</div><div class="ttdef"><b>Definition:</b> <a href="PDBTypes_8h_source.html#l00406">PDBTypes.h:406</a></div></div>
<div class="ttc" id="anamespacellvm_1_1pdb_html_a434cfa04e4ed34b7a901378557d4ca9eaf930816fdefa1f6cbb2c18a077d4fd7f"><div class="ttname"><a href="namespacellvm_1_1pdb.html#a434cfa04e4ed34b7a901378557d4ca9eaf930816fdefa1f6cbb2c18a077d4fd7f">llvm::pdb::UInt8</a></div><div class="ttdeci">@ UInt8</div><div class="ttdef"><b>Definition:</b> <a href="PDBTypes_8h_source.html#l00403">PDBTypes.h:403</a></div></div>
<div class="ttc" id="aclassllvm_1_1Value_html"><div class="ttname"><a href="classllvm_1_1Value.html">llvm::Value</a></div><div class="ttdoc">LLVM Value Representation.</div><div class="ttdef"><b>Definition:</b> <a href="Value_8h_source.html#l00074">Value.h:74</a></div></div>
<div class="ttc" id="aDebug_8h_html"><div class="ttname"><a href="Debug_8h.html">Debug.h</a></div></div>
<div class="ttc" id="aclassllvm_1_1TensorSpec_html"><div class="ttname"><a href="classllvm_1_1TensorSpec.html">llvm::TensorSpec</a></div><div class="ttdef"><b>Definition:</b> <a href="TensorSpec_8h_source.html#l00052">TensorSpec.h:52</a></div></div>
<div class="ttc" id="aELFYAML_8cpp_html_a2a91b094e777dacc21de2a7f35da6805"><div class="ttname"><a href="ELFYAML_8cpp.html#a2a91b094e777dacc21de2a7f35da6805">Other</a></div><div class="ttdeci">Optional&lt; std::vector&lt; StOtherPiece &gt; &gt; Other</div><div class="ttdef"><b>Definition:</b> <a href="ELFYAML_8cpp_source.html#l01246">ELFYAML.cpp:1246</a></div></div>
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated on Tue Sep 20 2022 07:01:51 for LLVM by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.17
</small></address>
</body>
</html>
