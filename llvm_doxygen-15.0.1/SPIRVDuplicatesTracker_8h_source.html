<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.17"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>LLVM: lib/Target/SPIRV/SPIRVDuplicatesTracker.h Source File</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<script type="text/x-mathjax-config">
  MathJax.Hub.Config({
    extensions: ["tex2jax.js"],
    jax: ["input/TeX","output/HTML-CSS"],
});
</script>
<script type="text/javascript" async="async" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.7/MathJax.js/MathJax.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">LLVM
   &#160;<span id="projectnumber">15.0.1</span>
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.17 -->
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',false,false,'search.php','Search');
});
/* @license-end */</script>
<div id="main-nav"></div>
<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="dir_97aefd0d527b934f1d99a682da8fe6a9.html">lib</a></li><li class="navelem"><a class="el" href="dir_794e483eb1cc7921d35fd149d9cc325b.html">Target</a></li><li class="navelem"><a class="el" href="dir_ac3785bb61599da224f3f094ecb2eaf7.html">SPIRV</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="headertitle">
<div class="title">SPIRVDuplicatesTracker.h</div>  </div>
</div><!--header-->
<div class="contents">
<a href="SPIRVDuplicatesTracker_8h.html">Go to the documentation of this file.</a><div class="fragment"><div class="line"><a name="l00001"></a><span class="lineno">    1</span>&#160;<span class="comment">//===-- SPIRVDuplicatesTracker.h - SPIR-V Duplicates Tracker ----*- C++ -*-===//</span></div>
<div class="line"><a name="l00002"></a><span class="lineno">    2</span>&#160;<span class="comment">//</span></div>
<div class="line"><a name="l00003"></a><span class="lineno">    3</span>&#160;<span class="comment">// Part of the LLVM Project, under the Apache License v2.0 with LLVM Exceptions.</span></div>
<div class="line"><a name="l00004"></a><span class="lineno">    4</span>&#160;<span class="comment">// See https://llvm.org/LICENSE.txt for license information.</span></div>
<div class="line"><a name="l00005"></a><span class="lineno">    5</span>&#160;<span class="comment">// SPDX-License-Identifier: Apache-2.0 WITH LLVM-exception</span></div>
<div class="line"><a name="l00006"></a><span class="lineno">    6</span>&#160;<span class="comment">//</span></div>
<div class="line"><a name="l00007"></a><span class="lineno">    7</span>&#160;<span class="comment">//===----------------------------------------------------------------------===//</span></div>
<div class="line"><a name="l00008"></a><span class="lineno">    8</span>&#160;<span class="comment">//</span></div>
<div class="line"><a name="l00009"></a><span class="lineno">    9</span>&#160;<span class="comment">// General infrastructure for keeping track of the values that according to</span></div>
<div class="line"><a name="l00010"></a><span class="lineno">   10</span>&#160;<span class="comment">// the SPIR-V binary layout should be global to the whole module.</span></div>
<div class="line"><a name="l00011"></a><span class="lineno">   11</span>&#160;<span class="comment">//</span></div>
<div class="line"><a name="l00012"></a><span class="lineno">   12</span>&#160;<span class="comment">//===----------------------------------------------------------------------===//</span></div>
<div class="line"><a name="l00013"></a><span class="lineno">   13</span>&#160; </div>
<div class="line"><a name="l00014"></a><span class="lineno">   14</span>&#160;<span class="preprocessor">#ifndef LLVM_LIB_TARGET_SPIRV_SPIRVDUPLICATESTRACKER_H</span></div>
<div class="line"><a name="l00015"></a><span class="lineno">   15</span>&#160;<span class="preprocessor">#define LLVM_LIB_TARGET_SPIRV_SPIRVDUPLICATESTRACKER_H</span></div>
<div class="line"><a name="l00016"></a><span class="lineno">   16</span>&#160; </div>
<div class="line"><a name="l00017"></a><span class="lineno">   17</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="SPIRVBaseInfo_8h.html">MCTargetDesc/SPIRVBaseInfo.h</a>&quot;</span></div>
<div class="line"><a name="l00018"></a><span class="lineno">   18</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="SPIRVMCTargetDesc_8h.html">MCTargetDesc/SPIRVMCTargetDesc.h</a>&quot;</span></div>
<div class="line"><a name="l00019"></a><span class="lineno">   19</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="DenseMap_8h.html">llvm/ADT/DenseMap.h</a>&quot;</span></div>
<div class="line"><a name="l00020"></a><span class="lineno">   20</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="MapVector_8h.html">llvm/ADT/MapVector.h</a>&quot;</span></div>
<div class="line"><a name="l00021"></a><span class="lineno">   21</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="MachineIRBuilder_8h.html">llvm/CodeGen/GlobalISel/MachineIRBuilder.h</a>&quot;</span></div>
<div class="line"><a name="l00022"></a><span class="lineno">   22</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="MachineModuleInfo_8h.html">llvm/CodeGen/MachineModuleInfo.h</a>&quot;</span></div>
<div class="line"><a name="l00023"></a><span class="lineno">   23</span>&#160; </div>
<div class="line"><a name="l00024"></a><span class="lineno">   24</span>&#160;<span class="preprocessor">#include &lt;type_traits&gt;</span></div>
<div class="line"><a name="l00025"></a><span class="lineno">   25</span>&#160; </div>
<div class="line"><a name="l00026"></a><span class="lineno">   26</span>&#160;<span class="keyword">namespace </span><a class="code" href="namespacellvm.html">llvm</a> {</div>
<div class="line"><a name="l00027"></a><span class="lineno">   27</span>&#160;<span class="keyword">namespace </span>SPIRV {</div>
<div class="line"><a name="l00028"></a><span class="lineno">   28</span>&#160;<span class="comment">// NOTE: using MapVector instead of DenseMap because it helps getting</span></div>
<div class="line"><a name="l00029"></a><span class="lineno">   29</span>&#160;<span class="comment">// everything ordered in a stable manner for a price of extra (NumKeys)*PtrSize</span></div>
<div class="line"><a name="l00030"></a><span class="lineno">   30</span>&#160;<span class="comment">// memory and expensive removals which do not happen anyway.</span></div>
<div class="line"><a name="l00031"></a><span class="lineno"><a class="line" href="classllvm_1_1SPIRV_1_1DTSortableEntry.html">   31</a></span>&#160;<span class="keyword">class </span><a class="code" href="classllvm_1_1SPIRV_1_1DTSortableEntry.html">DTSortableEntry</a> : <span class="keyword">public</span> <a class="code" href="classllvm_1_1MapVector.html">MapVector</a>&lt;const MachineFunction *, Register&gt; {</div>
<div class="line"><a name="l00032"></a><span class="lineno">   32</span>&#160;  <a class="code" href="classllvm_1_1SmallVector.html">SmallVector&lt;DTSortableEntry *, 2&gt;</a> Deps;</div>
<div class="line"><a name="l00033"></a><span class="lineno">   33</span>&#160; </div>
<div class="line"><a name="l00034"></a><span class="lineno">   34</span>&#160;  <span class="keyword">struct </span>FlagsTy {</div>
<div class="line"><a name="l00035"></a><span class="lineno">   35</span>&#160;    <span class="keywordtype">unsigned</span> IsFunc : 1;</div>
<div class="line"><a name="l00036"></a><span class="lineno">   36</span>&#160;    <span class="keywordtype">unsigned</span> IsGV : 1;</div>
<div class="line"><a name="l00037"></a><span class="lineno">   37</span>&#160;    <span class="comment">// NOTE: bit-field default init is a C++20 feature.</span></div>
<div class="line"><a name="l00038"></a><span class="lineno">   38</span>&#160;    FlagsTy() : IsFunc(0), IsGV(0) {}</div>
<div class="line"><a name="l00039"></a><span class="lineno">   39</span>&#160;  };</div>
<div class="line"><a name="l00040"></a><span class="lineno">   40</span>&#160;  FlagsTy Flags;</div>
<div class="line"><a name="l00041"></a><span class="lineno">   41</span>&#160; </div>
<div class="line"><a name="l00042"></a><span class="lineno">   42</span>&#160;<span class="keyword">public</span>:</div>
<div class="line"><a name="l00043"></a><span class="lineno">   43</span>&#160;  <span class="comment">// Common hoisting utility doesn&#39;t support function, because their hoisting</span></div>
<div class="line"><a name="l00044"></a><span class="lineno">   44</span>&#160;  <span class="comment">// require hoisting of params as well.</span></div>
<div class="line"><a name="l00045"></a><span class="lineno"><a class="line" href="classllvm_1_1SPIRV_1_1DTSortableEntry.html#a7d3ba0de07a3d29ca92d1dc878786005">   45</a></span>&#160;  <span class="keywordtype">bool</span> <a class="code" href="classllvm_1_1SPIRV_1_1DTSortableEntry.html#a7d3ba0de07a3d29ca92d1dc878786005">getIsFunc</a>()<span class="keyword"> const </span>{ <span class="keywordflow">return</span> Flags.IsFunc; }</div>
<div class="line"><a name="l00046"></a><span class="lineno"><a class="line" href="classllvm_1_1SPIRV_1_1DTSortableEntry.html#a3de1d6a99a6892c44d1ba67e6276536b">   46</a></span>&#160;  <span class="keywordtype">bool</span> <a class="code" href="classllvm_1_1SPIRV_1_1DTSortableEntry.html#a3de1d6a99a6892c44d1ba67e6276536b">getIsGV</a>()<span class="keyword"> const </span>{ <span class="keywordflow">return</span> Flags.IsGV; }</div>
<div class="line"><a name="l00047"></a><span class="lineno"><a class="line" href="classllvm_1_1SPIRV_1_1DTSortableEntry.html#aea04703e6f74d6d5ff75035f654c14ae">   47</a></span>&#160;  <span class="keywordtype">void</span> <a class="code" href="classllvm_1_1SPIRV_1_1DTSortableEntry.html#aea04703e6f74d6d5ff75035f654c14ae">setIsFunc</a>(<span class="keywordtype">bool</span> V) { Flags.IsFunc = V; }</div>
<div class="line"><a name="l00048"></a><span class="lineno"><a class="line" href="classllvm_1_1SPIRV_1_1DTSortableEntry.html#a4f6a543ff45b3130dfb87511f600c394">   48</a></span>&#160;  <span class="keywordtype">void</span> <a class="code" href="classllvm_1_1SPIRV_1_1DTSortableEntry.html#a4f6a543ff45b3130dfb87511f600c394">setIsGV</a>(<span class="keywordtype">bool</span> V) { Flags.IsGV = V; }</div>
<div class="line"><a name="l00049"></a><span class="lineno">   49</span>&#160; </div>
<div class="line"><a name="l00050"></a><span class="lineno"><a class="line" href="classllvm_1_1SPIRV_1_1DTSortableEntry.html#a36eda54ccefcdb934ff950b4bf09146d">   50</a></span>&#160;  <span class="keyword">const</span> <a class="code" href="classllvm_1_1SmallVector.html">SmallVector&lt;DTSortableEntry *, 2&gt;</a> &amp;<a class="code" href="classllvm_1_1SPIRV_1_1DTSortableEntry.html#a36eda54ccefcdb934ff950b4bf09146d">getDeps</a>()<span class="keyword"> const </span>{ <span class="keywordflow">return</span> Deps; }</div>
<div class="line"><a name="l00051"></a><span class="lineno"><a class="line" href="classllvm_1_1SPIRV_1_1DTSortableEntry.html#aefde4ed03ec270b37573b8788d03a17e">   51</a></span>&#160;  <span class="keywordtype">void</span> <a class="code" href="classllvm_1_1SPIRV_1_1DTSortableEntry.html#aefde4ed03ec270b37573b8788d03a17e">addDep</a>(<a class="code" href="classllvm_1_1SPIRV_1_1DTSortableEntry.html">DTSortableEntry</a> *<a class="code" href="BuiltinGCs_8cpp.html#a6742d2e0a668baf1196ec69e158d5f15">E</a>) { Deps.push_back(<a class="code" href="BuiltinGCs_8cpp.html#a6742d2e0a668baf1196ec69e158d5f15">E</a>); }</div>
<div class="line"><a name="l00052"></a><span class="lineno">   52</span>&#160;};</div>
<div class="line"><a name="l00053"></a><span class="lineno">   53</span>&#160;} <span class="comment">// namespace SPIRV</span></div>
<div class="line"><a name="l00054"></a><span class="lineno">   54</span>&#160; </div>
<div class="line"><a name="l00055"></a><span class="lineno"><a class="line" href="classllvm_1_1SPIRVDuplicatesTrackerBase.html">   55</a></span>&#160;<span class="keyword">template</span> &lt;<span class="keyword">typename</span> KeyTy&gt; <span class="keyword">class </span><a class="code" href="classllvm_1_1SPIRVDuplicatesTrackerBase.html">SPIRVDuplicatesTrackerBase</a> {</div>
<div class="line"><a name="l00056"></a><span class="lineno">   56</span>&#160;<span class="keyword">public</span>:</div>
<div class="line"><a name="l00057"></a><span class="lineno">   57</span>&#160;  <span class="comment">// NOTE: using MapVector instead of DenseMap helps getting everything ordered</span></div>
<div class="line"><a name="l00058"></a><span class="lineno">   58</span>&#160;  <span class="comment">// in a stable manner for a price of extra (NumKeys)*PtrSize memory and</span></div>
<div class="line"><a name="l00059"></a><span class="lineno">   59</span>&#160;  <span class="comment">// expensive removals which don&#39;t happen anyway.</span></div>
<div class="line"><a name="l00060"></a><span class="lineno"><a class="line" href="classllvm_1_1SPIRVDuplicatesTrackerBase.html#a2d0faaaf8bc4f2e716afcc6451136f16">   60</a></span>&#160;  <span class="keyword">using</span> <a class="code" href="classllvm_1_1MapVector.html">StorageTy</a> = <a class="code" href="classllvm_1_1MapVector.html">MapVector&lt;KeyTy, SPIRV::DTSortableEntry&gt;</a>;</div>
<div class="line"><a name="l00061"></a><span class="lineno">   61</span>&#160; </div>
<div class="line"><a name="l00062"></a><span class="lineno">   62</span>&#160;<span class="keyword">private</span>:</div>
<div class="line"><a name="l00063"></a><span class="lineno">   63</span>&#160;  <a class="code" href="classllvm_1_1MapVector.html">StorageTy</a> Storage;</div>
<div class="line"><a name="l00064"></a><span class="lineno">   64</span>&#160; </div>
<div class="line"><a name="l00065"></a><span class="lineno">   65</span>&#160;<span class="keyword">public</span>:</div>
<div class="line"><a name="l00066"></a><span class="lineno"><a class="line" href="classllvm_1_1SPIRVDuplicatesTrackerBase.html#a1c61507b6c7168368caa6bf4ac68f3a9">   66</a></span>&#160;  <span class="keywordtype">void</span> <a class="code" href="classllvm_1_1SPIRVDuplicatesTrackerBase.html#a1c61507b6c7168368caa6bf4ac68f3a9">add</a>(KeyTy V, <span class="keyword">const</span> <a class="code" href="classllvm_1_1MachineFunction.html">MachineFunction</a> *MF, <a class="code" href="classllvm_1_1Register.html">Register</a> R) {</div>
<div class="line"><a name="l00067"></a><span class="lineno">   67</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1SPIRVDuplicatesTrackerBase.html#a1fabb3f6b6435a52df7f3235848234a5">find</a>(V, MF).<a class="code" href="RustDemangle_8cpp.html#a103d8cfe62c1651cd70e181746f8a840">isValid</a>())</div>
<div class="line"><a name="l00068"></a><span class="lineno">   68</span>&#160;      <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l00069"></a><span class="lineno">   69</span>&#160; </div>
<div class="line"><a name="l00070"></a><span class="lineno">   70</span>&#160;    Storage[V][MF] = R;</div>
<div class="line"><a name="l00071"></a><span class="lineno">   71</span>&#160;    <span class="keywordflow">if</span> (std::is_same&lt;<a class="code" href="classllvm_1_1Function.html">Function</a>,</div>
<div class="line"><a name="l00072"></a><span class="lineno">   72</span>&#160;                     <span class="keyword">typename</span> std::remove_const&lt;</div>
<div class="line"><a name="l00073"></a><span class="lineno">   73</span>&#160;                         <span class="keyword">typename</span> <a class="code" href="README-X86-64_8txt.html#aac3add0badd5c39bebc02df0b5d9bdcf">std::remove_pointer&lt;KeyTy&gt;::type</a>&gt;::<a class="code" href="README-X86-64_8txt.html#aac3add0badd5c39bebc02df0b5d9bdcf">type</a>&gt;() ||</div>
<div class="line"><a name="l00074"></a><span class="lineno">   74</span>&#160;        std::is_same&lt;<a class="code" href="classllvm_1_1Argument.html">Argument</a>,</div>
<div class="line"><a name="l00075"></a><span class="lineno">   75</span>&#160;                     <span class="keyword">typename</span> std::remove_const&lt;</div>
<div class="line"><a name="l00076"></a><span class="lineno">   76</span>&#160;                         <span class="keyword">typename</span> <a class="code" href="README-X86-64_8txt.html#aac3add0badd5c39bebc02df0b5d9bdcf">std::remove_pointer&lt;KeyTy&gt;::type</a>&gt;::<a class="code" href="README-X86-64_8txt.html#aac3add0badd5c39bebc02df0b5d9bdcf">type</a>&gt;())</div>
<div class="line"><a name="l00077"></a><span class="lineno">   77</span>&#160;      Storage[V].setIsFunc(<span class="keyword">true</span>);</div>
<div class="line"><a name="l00078"></a><span class="lineno">   78</span>&#160;    <span class="keywordflow">if</span> (std::is_same&lt;<a class="code" href="classllvm_1_1GlobalVariable.html">GlobalVariable</a>,</div>
<div class="line"><a name="l00079"></a><span class="lineno">   79</span>&#160;                     <span class="keyword">typename</span> std::remove_const&lt;</div>
<div class="line"><a name="l00080"></a><span class="lineno">   80</span>&#160;                         <span class="keyword">typename</span> <a class="code" href="README-X86-64_8txt.html#aac3add0badd5c39bebc02df0b5d9bdcf">std::remove_pointer&lt;KeyTy&gt;::type</a>&gt;::<a class="code" href="README-X86-64_8txt.html#aac3add0badd5c39bebc02df0b5d9bdcf">type</a>&gt;())</div>
<div class="line"><a name="l00081"></a><span class="lineno">   81</span>&#160;      Storage[V].setIsGV(<span class="keyword">true</span>);</div>
<div class="line"><a name="l00082"></a><span class="lineno">   82</span>&#160;  }</div>
<div class="line"><a name="l00083"></a><span class="lineno">   83</span>&#160; </div>
<div class="line"><a name="l00084"></a><span class="lineno"><a class="line" href="classllvm_1_1SPIRVDuplicatesTrackerBase.html#a1fabb3f6b6435a52df7f3235848234a5">   84</a></span>&#160;  <a class="code" href="classllvm_1_1Register.html">Register</a> <a class="code" href="classllvm_1_1SPIRVDuplicatesTrackerBase.html#a1fabb3f6b6435a52df7f3235848234a5">find</a>(KeyTy V, <span class="keyword">const</span> <a class="code" href="classllvm_1_1MachineFunction.html">MachineFunction</a> *MF)<span class="keyword"> const </span>{</div>
<div class="line"><a name="l00085"></a><span class="lineno">   85</span>&#160;    <span class="keyword">auto</span> iter = Storage.<a class="code" href="classllvm_1_1MapVector.html#a6b0c3e15c351ba9682837c29b0a141b6">find</a>(V);</div>
<div class="line"><a name="l00086"></a><span class="lineno">   86</span>&#160;    <span class="keywordflow">if</span> (iter != Storage.<a class="code" href="classllvm_1_1MapVector.html#a0881334358ff6ff7ff8cea5562c7988e">end</a>()) {</div>
<div class="line"><a name="l00087"></a><span class="lineno">   87</span>&#160;      <span class="keyword">auto</span> Map = iter-&gt;second;</div>
<div class="line"><a name="l00088"></a><span class="lineno">   88</span>&#160;      <span class="keyword">auto</span> iter2 = Map.find(MF);</div>
<div class="line"><a name="l00089"></a><span class="lineno">   89</span>&#160;      <span class="keywordflow">if</span> (iter2 != Map.end())</div>
<div class="line"><a name="l00090"></a><span class="lineno">   90</span>&#160;        <span class="keywordflow">return</span> iter2-&gt;second;</div>
<div class="line"><a name="l00091"></a><span class="lineno">   91</span>&#160;    }</div>
<div class="line"><a name="l00092"></a><span class="lineno">   92</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="classllvm_1_1Register.html">Register</a>();</div>
<div class="line"><a name="l00093"></a><span class="lineno">   93</span>&#160;  }</div>
<div class="line"><a name="l00094"></a><span class="lineno">   94</span>&#160; </div>
<div class="line"><a name="l00095"></a><span class="lineno"><a class="line" href="classllvm_1_1SPIRVDuplicatesTrackerBase.html#a953749b34d26ba730fe3e4f64611aab4">   95</a></span>&#160;  <span class="keyword">const</span> <a class="code" href="classllvm_1_1MapVector.html">StorageTy</a> &amp;<a class="code" href="classllvm_1_1SPIRVDuplicatesTrackerBase.html#a953749b34d26ba730fe3e4f64611aab4">getAllUses</a>()<span class="keyword"> const </span>{ <span class="keywordflow">return</span> Storage; }</div>
<div class="line"><a name="l00096"></a><span class="lineno">   96</span>&#160; </div>
<div class="line"><a name="l00097"></a><span class="lineno">   97</span>&#160;<span class="keyword">private</span>:</div>
<div class="line"><a name="l00098"></a><span class="lineno">   98</span>&#160;  <a class="code" href="classllvm_1_1SPIRVDuplicatesTrackerBase.html#a2d0faaaf8bc4f2e716afcc6451136f16">StorageTy</a> &amp;<a class="code" href="classllvm_1_1SPIRVDuplicatesTrackerBase.html#a953749b34d26ba730fe3e4f64611aab4">getAllUses</a>() { <span class="keywordflow">return</span> Storage; }</div>
<div class="line"><a name="l00099"></a><span class="lineno">   99</span>&#160; </div>
<div class="line"><a name="l00100"></a><span class="lineno">  100</span>&#160;  <span class="comment">// The friend class needs to have access to the internal storage</span></div>
<div class="line"><a name="l00101"></a><span class="lineno">  101</span>&#160;  <span class="comment">// to be able to build dependency graph, can&#39;t declare only one</span></div>
<div class="line"><a name="l00102"></a><span class="lineno">  102</span>&#160;  <span class="comment">// function a &#39;friend&#39; due to the incomplete declaration at this point</span></div>
<div class="line"><a name="l00103"></a><span class="lineno">  103</span>&#160;  <span class="comment">// and mutual dependency problems.</span></div>
<div class="line"><a name="l00104"></a><span class="lineno"><a class="line" href="classllvm_1_1SPIRVDuplicatesTrackerBase.html#a044710fe3ece72cf9aff3b56dc44cb7d">  104</a></span>&#160;  <span class="keyword">friend</span> <span class="keyword">class </span><a class="code" href="classllvm_1_1SPIRVGeneralDuplicatesTracker.html">SPIRVGeneralDuplicatesTracker</a>;</div>
<div class="line"><a name="l00105"></a><span class="lineno">  105</span>&#160;};</div>
<div class="line"><a name="l00106"></a><span class="lineno">  106</span>&#160; </div>
<div class="line"><a name="l00107"></a><span class="lineno">  107</span>&#160;<span class="keyword">template</span> &lt;<span class="keyword">typename</span> T&gt;</div>
<div class="line"><a name="l00108"></a><span class="lineno"><a class="line" href="classllvm_1_1SPIRVDuplicatesTracker.html">  108</a></span>&#160;<span class="keyword">class </span><a class="code" href="classllvm_1_1SPIRVDuplicatesTracker.html">SPIRVDuplicatesTracker</a> : <span class="keyword">public</span> <a class="code" href="classllvm_1_1SPIRVDuplicatesTrackerBase.html">SPIRVDuplicatesTrackerBase</a>&lt;const T *&gt; {};</div>
<div class="line"><a name="l00109"></a><span class="lineno">  109</span>&#160; </div>
<div class="line"><a name="l00110"></a><span class="lineno"><a class="line" href="classllvm_1_1SPIRVGeneralDuplicatesTracker.html">  110</a></span>&#160;<span class="keyword">class </span><a class="code" href="classllvm_1_1SPIRVGeneralDuplicatesTracker.html">SPIRVGeneralDuplicatesTracker</a> {</div>
<div class="line"><a name="l00111"></a><span class="lineno">  111</span>&#160;  <a class="code" href="classllvm_1_1SPIRVDuplicatesTracker.html">SPIRVDuplicatesTracker&lt;Type&gt;</a> TT;</div>
<div class="line"><a name="l00112"></a><span class="lineno">  112</span>&#160;  <a class="code" href="classllvm_1_1SPIRVDuplicatesTracker.html">SPIRVDuplicatesTracker&lt;Constant&gt;</a> CT;</div>
<div class="line"><a name="l00113"></a><span class="lineno">  113</span>&#160;  <a class="code" href="classllvm_1_1SPIRVDuplicatesTracker.html">SPIRVDuplicatesTracker&lt;GlobalVariable&gt;</a> GT;</div>
<div class="line"><a name="l00114"></a><span class="lineno">  114</span>&#160;  <a class="code" href="classllvm_1_1SPIRVDuplicatesTracker.html">SPIRVDuplicatesTracker&lt;Function&gt;</a> FT;</div>
<div class="line"><a name="l00115"></a><span class="lineno">  115</span>&#160;  <a class="code" href="classllvm_1_1SPIRVDuplicatesTracker.html">SPIRVDuplicatesTracker&lt;Argument&gt;</a> AT;</div>
<div class="line"><a name="l00116"></a><span class="lineno">  116</span>&#160; </div>
<div class="line"><a name="l00117"></a><span class="lineno">  117</span>&#160;  <span class="comment">// NOTE: using MOs instead of regs to get rid of MF dependency to be able</span></div>
<div class="line"><a name="l00118"></a><span class="lineno">  118</span>&#160;  <span class="comment">// to use flat data structure.</span></div>
<div class="line"><a name="l00119"></a><span class="lineno">  119</span>&#160;  <span class="comment">// NOTE: replacing DenseMap with MapVector doesn&#39;t affect overall correctness</span></div>
<div class="line"><a name="l00120"></a><span class="lineno">  120</span>&#160;  <span class="comment">// but makes LITs more stable, should prefer DenseMap still due to</span></div>
<div class="line"><a name="l00121"></a><span class="lineno">  121</span>&#160;  <span class="comment">// significant perf difference.</span></div>
<div class="line"><a name="l00122"></a><span class="lineno">  122</span>&#160;  <span class="keyword">using</span> <a class="code" href="classllvm_1_1MapVector.html">SPIRVReg2EntryTy</a> =</div>
<div class="line"><a name="l00123"></a><span class="lineno">  123</span>&#160;      <a class="code" href="classllvm_1_1MapVector.html">MapVector&lt;MachineOperand *, SPIRV::DTSortableEntry *&gt;</a>;</div>
<div class="line"><a name="l00124"></a><span class="lineno">  124</span>&#160; </div>
<div class="line"><a name="l00125"></a><span class="lineno">  125</span>&#160;  <span class="keyword">template</span> &lt;<span class="keyword">typename</span> T&gt;</div>
<div class="line"><a name="l00126"></a><span class="lineno">  126</span>&#160;  <span class="keywordtype">void</span> prebuildReg2Entry(<a class="code" href="classllvm_1_1SPIRVDuplicatesTracker.html">SPIRVDuplicatesTracker&lt;T&gt;</a> &amp;DT,</div>
<div class="line"><a name="l00127"></a><span class="lineno">  127</span>&#160;                         <a class="code" href="classllvm_1_1MapVector.html">SPIRVReg2EntryTy</a> &amp;Reg2Entry);</div>
<div class="line"><a name="l00128"></a><span class="lineno">  128</span>&#160; </div>
<div class="line"><a name="l00129"></a><span class="lineno">  129</span>&#160;<span class="keyword">public</span>:</div>
<div class="line"><a name="l00130"></a><span class="lineno">  130</span>&#160;  <span class="keywordtype">void</span> <a class="code" href="classllvm_1_1SPIRVGeneralDuplicatesTracker.html#a6a22c3253d5f28a1936c2252fc81e4d3">buildDepsGraph</a>(std::vector&lt;SPIRV::DTSortableEntry *&gt; &amp;Graph,</div>
<div class="line"><a name="l00131"></a><span class="lineno">  131</span>&#160;                      <a class="code" href="classllvm_1_1MachineModuleInfo.html">MachineModuleInfo</a> *MMI);</div>
<div class="line"><a name="l00132"></a><span class="lineno">  132</span>&#160; </div>
<div class="line"><a name="l00133"></a><span class="lineno"><a class="line" href="classllvm_1_1SPIRVGeneralDuplicatesTracker.html#acc22a8d7856816cea3af64e38340a7f7">  133</a></span>&#160;  <span class="keywordtype">void</span> <a class="code" href="classllvm_1_1SPIRVGeneralDuplicatesTracker.html#acc22a8d7856816cea3af64e38340a7f7">add</a>(<span class="keyword">const</span> <a class="code" href="classllvm_1_1Type.html">Type</a> *T, <span class="keyword">const</span> <a class="code" href="classllvm_1_1MachineFunction.html">MachineFunction</a> *MF, <a class="code" href="classllvm_1_1Register.html">Register</a> R) {</div>
<div class="line"><a name="l00134"></a><span class="lineno">  134</span>&#160;    TT.add(<a class="code" href="Mips16ISelLowering_8cpp.html#a0acb682b8260ab1c60b918599864e2e5">T</a>, MF, R);</div>
<div class="line"><a name="l00135"></a><span class="lineno">  135</span>&#160;  }</div>
<div class="line"><a name="l00136"></a><span class="lineno">  136</span>&#160; </div>
<div class="line"><a name="l00137"></a><span class="lineno"><a class="line" href="classllvm_1_1SPIRVGeneralDuplicatesTracker.html#aafe923179dcbb71d43036ba5b8f2a1c5">  137</a></span>&#160;  <span class="keywordtype">void</span> <a class="code" href="classllvm_1_1SPIRVGeneralDuplicatesTracker.html#aafe923179dcbb71d43036ba5b8f2a1c5">add</a>(<span class="keyword">const</span> <a class="code" href="classllvm_1_1Constant.html">Constant</a> *<a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a>, <span class="keyword">const</span> <a class="code" href="classllvm_1_1MachineFunction.html">MachineFunction</a> *MF, <a class="code" href="classllvm_1_1Register.html">Register</a> R) {</div>
<div class="line"><a name="l00138"></a><span class="lineno">  138</span>&#160;    CT.<a class="code" href="classllvm_1_1SPIRVDuplicatesTrackerBase.html#a1c61507b6c7168368caa6bf4ac68f3a9">add</a>(<a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a>, MF, R);</div>
<div class="line"><a name="l00139"></a><span class="lineno">  139</span>&#160;  }</div>
<div class="line"><a name="l00140"></a><span class="lineno">  140</span>&#160; </div>
<div class="line"><a name="l00141"></a><span class="lineno"><a class="line" href="classllvm_1_1SPIRVGeneralDuplicatesTracker.html#a015a8c18b95051f0ecb27a12f0f70f03">  141</a></span>&#160;  <span class="keywordtype">void</span> <a class="code" href="classllvm_1_1SPIRVGeneralDuplicatesTracker.html#a015a8c18b95051f0ecb27a12f0f70f03">add</a>(<span class="keyword">const</span> <a class="code" href="classllvm_1_1GlobalVariable.html">GlobalVariable</a> *GV, <span class="keyword">const</span> <a class="code" href="classllvm_1_1MachineFunction.html">MachineFunction</a> *MF, <a class="code" href="classllvm_1_1Register.html">Register</a> R) {</div>
<div class="line"><a name="l00142"></a><span class="lineno">  142</span>&#160;    GT.add(GV, MF, R);</div>
<div class="line"><a name="l00143"></a><span class="lineno">  143</span>&#160;  }</div>
<div class="line"><a name="l00144"></a><span class="lineno">  144</span>&#160; </div>
<div class="line"><a name="l00145"></a><span class="lineno"><a class="line" href="classllvm_1_1SPIRVGeneralDuplicatesTracker.html#a48c03695bf1ff98f5ecb146f9c37f796">  145</a></span>&#160;  <span class="keywordtype">void</span> <a class="code" href="classllvm_1_1SPIRVGeneralDuplicatesTracker.html#a48c03695bf1ff98f5ecb146f9c37f796">add</a>(<span class="keyword">const</span> <a class="code" href="classllvm_1_1Function.html">Function</a> *<a class="code" href="MD5_8cpp.html#a96d73bbd7af15cb1fc38c3f4a3bd82e9">F</a>, <span class="keyword">const</span> <a class="code" href="classllvm_1_1MachineFunction.html">MachineFunction</a> *MF, <a class="code" href="classllvm_1_1Register.html">Register</a> R) {</div>
<div class="line"><a name="l00146"></a><span class="lineno">  146</span>&#160;    FT.<a class="code" href="classllvm_1_1SPIRVDuplicatesTrackerBase.html#a1c61507b6c7168368caa6bf4ac68f3a9">add</a>(<a class="code" href="MD5_8cpp.html#a96d73bbd7af15cb1fc38c3f4a3bd82e9">F</a>, MF, R);</div>
<div class="line"><a name="l00147"></a><span class="lineno">  147</span>&#160;  }</div>
<div class="line"><a name="l00148"></a><span class="lineno">  148</span>&#160; </div>
<div class="line"><a name="l00149"></a><span class="lineno"><a class="line" href="classllvm_1_1SPIRVGeneralDuplicatesTracker.html#a8762d8f7e5ac9382e451a48bb172044c">  149</a></span>&#160;  <span class="keywordtype">void</span> <a class="code" href="classllvm_1_1SPIRVGeneralDuplicatesTracker.html#a8762d8f7e5ac9382e451a48bb172044c">add</a>(<span class="keyword">const</span> <a class="code" href="classllvm_1_1Argument.html">Argument</a> *<a class="code" href="AMDGPULibCalls_8cpp.html#afecf1cc1292b07f57d343c0f4d682044">Arg</a>, <span class="keyword">const</span> <a class="code" href="classllvm_1_1MachineFunction.html">MachineFunction</a> *MF, <a class="code" href="classllvm_1_1Register.html">Register</a> R) {</div>
<div class="line"><a name="l00150"></a><span class="lineno">  150</span>&#160;    AT.<a class="code" href="classllvm_1_1SPIRVDuplicatesTrackerBase.html#a1c61507b6c7168368caa6bf4ac68f3a9">add</a>(<a class="code" href="AMDGPULibCalls_8cpp.html#afecf1cc1292b07f57d343c0f4d682044">Arg</a>, MF, R);</div>
<div class="line"><a name="l00151"></a><span class="lineno">  151</span>&#160;  }</div>
<div class="line"><a name="l00152"></a><span class="lineno">  152</span>&#160; </div>
<div class="line"><a name="l00153"></a><span class="lineno"><a class="line" href="classllvm_1_1SPIRVGeneralDuplicatesTracker.html#ae8550b31478bd95a96b91708ceadf04f">  153</a></span>&#160;  <a class="code" href="classllvm_1_1Register.html">Register</a> <a class="code" href="classllvm_1_1SPIRVGeneralDuplicatesTracker.html#ae8550b31478bd95a96b91708ceadf04f">find</a>(<span class="keyword">const</span> <a class="code" href="classllvm_1_1Type.html">Type</a> *T, <span class="keyword">const</span> <a class="code" href="classllvm_1_1MachineFunction.html">MachineFunction</a> *MF) {</div>
<div class="line"><a name="l00154"></a><span class="lineno">  154</span>&#160;    <span class="keywordflow">return</span> TT.find(<span class="keyword">const_cast&lt;</span><a class="code" href="classllvm_1_1Type.html">Type</a> *<span class="keyword">&gt;</span>(<a class="code" href="Mips16ISelLowering_8cpp.html#a0acb682b8260ab1c60b918599864e2e5">T</a>), MF);</div>
<div class="line"><a name="l00155"></a><span class="lineno">  155</span>&#160;  }</div>
<div class="line"><a name="l00156"></a><span class="lineno">  156</span>&#160; </div>
<div class="line"><a name="l00157"></a><span class="lineno"><a class="line" href="classllvm_1_1SPIRVGeneralDuplicatesTracker.html#a78b39748f710daaa62e9c6592a3f8310">  157</a></span>&#160;  <a class="code" href="classllvm_1_1Register.html">Register</a> <a class="code" href="classllvm_1_1SPIRVGeneralDuplicatesTracker.html#a78b39748f710daaa62e9c6592a3f8310">find</a>(<span class="keyword">const</span> <a class="code" href="classllvm_1_1Constant.html">Constant</a> *<a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a>, <span class="keyword">const</span> <a class="code" href="classllvm_1_1MachineFunction.html">MachineFunction</a> *MF) {</div>
<div class="line"><a name="l00158"></a><span class="lineno">  158</span>&#160;    <span class="keywordflow">return</span> CT.<a class="code" href="classllvm_1_1SPIRVDuplicatesTrackerBase.html#a1fabb3f6b6435a52df7f3235848234a5">find</a>(<span class="keyword">const_cast&lt;</span><a class="code" href="classllvm_1_1Constant.html">Constant</a> *<span class="keyword">&gt;</span>(<a class="code" href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a>), MF);</div>
<div class="line"><a name="l00159"></a><span class="lineno">  159</span>&#160;  }</div>
<div class="line"><a name="l00160"></a><span class="lineno">  160</span>&#160; </div>
<div class="line"><a name="l00161"></a><span class="lineno"><a class="line" href="classllvm_1_1SPIRVGeneralDuplicatesTracker.html#adf0a309070aae6e3cb7a836280ef3891">  161</a></span>&#160;  <a class="code" href="classllvm_1_1Register.html">Register</a> <a class="code" href="classllvm_1_1SPIRVGeneralDuplicatesTracker.html#adf0a309070aae6e3cb7a836280ef3891">find</a>(<span class="keyword">const</span> <a class="code" href="classllvm_1_1GlobalVariable.html">GlobalVariable</a> *GV, <span class="keyword">const</span> <a class="code" href="classllvm_1_1MachineFunction.html">MachineFunction</a> *MF) {</div>
<div class="line"><a name="l00162"></a><span class="lineno">  162</span>&#160;    <span class="keywordflow">return</span> GT.find(<span class="keyword">const_cast&lt;</span><a class="code" href="classllvm_1_1GlobalVariable.html">GlobalVariable</a> *<span class="keyword">&gt;</span>(GV), MF);</div>
<div class="line"><a name="l00163"></a><span class="lineno">  163</span>&#160;  }</div>
<div class="line"><a name="l00164"></a><span class="lineno">  164</span>&#160; </div>
<div class="line"><a name="l00165"></a><span class="lineno"><a class="line" href="classllvm_1_1SPIRVGeneralDuplicatesTracker.html#a09c9e05099fe49ee9feff5816194d7ba">  165</a></span>&#160;  <a class="code" href="classllvm_1_1Register.html">Register</a> <a class="code" href="classllvm_1_1SPIRVGeneralDuplicatesTracker.html#a09c9e05099fe49ee9feff5816194d7ba">find</a>(<span class="keyword">const</span> <a class="code" href="classllvm_1_1Function.html">Function</a> *<a class="code" href="MD5_8cpp.html#a96d73bbd7af15cb1fc38c3f4a3bd82e9">F</a>, <span class="keyword">const</span> <a class="code" href="classllvm_1_1MachineFunction.html">MachineFunction</a> *MF) {</div>
<div class="line"><a name="l00166"></a><span class="lineno">  166</span>&#160;    <span class="keywordflow">return</span> FT.<a class="code" href="classllvm_1_1SPIRVDuplicatesTrackerBase.html#a1fabb3f6b6435a52df7f3235848234a5">find</a>(<span class="keyword">const_cast&lt;</span><a class="code" href="classllvm_1_1Function.html">Function</a> *<span class="keyword">&gt;</span>(<a class="code" href="MD5_8cpp.html#a96d73bbd7af15cb1fc38c3f4a3bd82e9">F</a>), MF);</div>
<div class="line"><a name="l00167"></a><span class="lineno">  167</span>&#160;  }</div>
<div class="line"><a name="l00168"></a><span class="lineno">  168</span>&#160; </div>
<div class="line"><a name="l00169"></a><span class="lineno"><a class="line" href="classllvm_1_1SPIRVGeneralDuplicatesTracker.html#a82454a124637b2246fd1c34b75360ce9">  169</a></span>&#160;  <a class="code" href="classllvm_1_1Register.html">Register</a> <a class="code" href="classllvm_1_1SPIRVGeneralDuplicatesTracker.html#a82454a124637b2246fd1c34b75360ce9">find</a>(<span class="keyword">const</span> <a class="code" href="classllvm_1_1Argument.html">Argument</a> *<a class="code" href="AMDGPULibCalls_8cpp.html#afecf1cc1292b07f57d343c0f4d682044">Arg</a>, <span class="keyword">const</span> <a class="code" href="classllvm_1_1MachineFunction.html">MachineFunction</a> *MF) {</div>
<div class="line"><a name="l00170"></a><span class="lineno">  170</span>&#160;    <span class="keywordflow">return</span> AT.<a class="code" href="classllvm_1_1SPIRVDuplicatesTrackerBase.html#a1fabb3f6b6435a52df7f3235848234a5">find</a>(<span class="keyword">const_cast&lt;</span><a class="code" href="classllvm_1_1Argument.html">Argument</a> *<span class="keyword">&gt;</span>(<a class="code" href="AMDGPULibCalls_8cpp.html#afecf1cc1292b07f57d343c0f4d682044">Arg</a>), MF);</div>
<div class="line"><a name="l00171"></a><span class="lineno">  171</span>&#160;  }</div>
<div class="line"><a name="l00172"></a><span class="lineno">  172</span>&#160; </div>
<div class="line"><a name="l00173"></a><span class="lineno"><a class="line" href="classllvm_1_1SPIRVGeneralDuplicatesTracker.html#ae192e9fc809a895a53554ce4a9ca6b49">  173</a></span>&#160;  <span class="keyword">const</span> <a class="code" href="classllvm_1_1SPIRVDuplicatesTracker.html">SPIRVDuplicatesTracker&lt;Type&gt;</a> *<a class="code" href="classllvm_1_1SPIRVGeneralDuplicatesTracker.html#ae192e9fc809a895a53554ce4a9ca6b49">getTypes</a>() { <span class="keywordflow">return</span> &amp;TT; }</div>
<div class="line"><a name="l00174"></a><span class="lineno">  174</span>&#160;};</div>
<div class="line"><a name="l00175"></a><span class="lineno">  175</span>&#160;} <span class="comment">// namespace llvm</span></div>
<div class="line"><a name="l00176"></a><span class="lineno">  176</span>&#160;<span class="preprocessor">#endif // LLVM_LIB_TARGET_SPIRV_SPIRVDUPLICATESTRACKER_H</span></div>
</div><!-- fragment --></div><!-- contents -->
<div class="ttc" id="aclassllvm_1_1Argument_html"><div class="ttname"><a href="classllvm_1_1Argument.html">llvm::Argument</a></div><div class="ttdoc">This class represents an incoming formal argument to a Function.</div><div class="ttdef"><b>Definition:</b> <a href="Argument_8h_source.html#l00028">Argument.h:28</a></div></div>
<div class="ttc" id="anamespacellvm_html"><div class="ttname"><a href="namespacellvm.html">llvm</a></div><div class="ttdoc">This is an optimization pass for GlobalISel generic memory operations.</div><div class="ttdef"><b>Definition:</b> <a href="AddressRanges_8h_source.html#l00018">AddressRanges.h:18</a></div></div>
<div class="ttc" id="aclassllvm_1_1SPIRV_1_1DTSortableEntry_html_aefde4ed03ec270b37573b8788d03a17e"><div class="ttname"><a href="classllvm_1_1SPIRV_1_1DTSortableEntry.html#aefde4ed03ec270b37573b8788d03a17e">llvm::SPIRV::DTSortableEntry::addDep</a></div><div class="ttdeci">void addDep(DTSortableEntry *E)</div><div class="ttdef"><b>Definition:</b> <a href="SPIRVDuplicatesTracker_8h_source.html#l00051">SPIRVDuplicatesTracker.h:51</a></div></div>
<div class="ttc" id="aclassllvm_1_1Function_html"><div class="ttname"><a href="classllvm_1_1Function.html">llvm::Function</a></div><div class="ttdef"><b>Definition:</b> <a href="Function_8h_source.html#l00060">Function.h:60</a></div></div>
<div class="ttc" id="aclassllvm_1_1SmallVector_html"><div class="ttname"><a href="classllvm_1_1SmallVector.html">llvm::SmallVector</a></div><div class="ttdoc">This is a 'vector' (really, a variable-sized array), optimized for the case when the array is small.</div><div class="ttdef"><b>Definition:</b> <a href="SmallVector_8h_source.html#l01185">SmallVector.h:1185</a></div></div>
<div class="ttc" id="aclassllvm_1_1SPIRVDuplicatesTrackerBase_html_a1c61507b6c7168368caa6bf4ac68f3a9"><div class="ttname"><a href="classllvm_1_1SPIRVDuplicatesTrackerBase.html#a1c61507b6c7168368caa6bf4ac68f3a9">llvm::SPIRVDuplicatesTrackerBase::add</a></div><div class="ttdeci">void add(KeyTy V, const MachineFunction *MF, Register R)</div><div class="ttdef"><b>Definition:</b> <a href="SPIRVDuplicatesTracker_8h_source.html#l00066">SPIRVDuplicatesTracker.h:66</a></div></div>
<div class="ttc" id="aMapVector_8h_html"><div class="ttname"><a href="MapVector_8h.html">MapVector.h</a></div></div>
<div class="ttc" id="aclassllvm_1_1GlobalVariable_html"><div class="ttname"><a href="classllvm_1_1GlobalVariable.html">llvm::GlobalVariable</a></div><div class="ttdef"><b>Definition:</b> <a href="GlobalVariable_8h_source.html#l00039">GlobalVariable.h:39</a></div></div>
<div class="ttc" id="aclassllvm_1_1SPIRVGeneralDuplicatesTracker_html_a6a22c3253d5f28a1936c2252fc81e4d3"><div class="ttname"><a href="classllvm_1_1SPIRVGeneralDuplicatesTracker.html#a6a22c3253d5f28a1936c2252fc81e4d3">llvm::SPIRVGeneralDuplicatesTracker::buildDepsGraph</a></div><div class="ttdeci">void buildDepsGraph(std::vector&lt; SPIRV::DTSortableEntry * &gt; &amp;Graph, MachineModuleInfo *MMI)</div><div class="ttdef"><b>Definition:</b> <a href="SPIRVDuplicatesTracker_8cpp_source.html#l00033">SPIRVDuplicatesTracker.cpp:33</a></div></div>
<div class="ttc" id="aclassllvm_1_1SPIRVGeneralDuplicatesTracker_html_ae8550b31478bd95a96b91708ceadf04f"><div class="ttname"><a href="classllvm_1_1SPIRVGeneralDuplicatesTracker.html#ae8550b31478bd95a96b91708ceadf04f">llvm::SPIRVGeneralDuplicatesTracker::find</a></div><div class="ttdeci">Register find(const Type *T, const MachineFunction *MF)</div><div class="ttdef"><b>Definition:</b> <a href="SPIRVDuplicatesTracker_8h_source.html#l00153">SPIRVDuplicatesTracker.h:153</a></div></div>
<div class="ttc" id="aSPIRVMCTargetDesc_8h_html"><div class="ttname"><a href="SPIRVMCTargetDesc_8h.html">SPIRVMCTargetDesc.h</a></div></div>
<div class="ttc" id="aclassllvm_1_1Type_html"><div class="ttname"><a href="classllvm_1_1Type.html">llvm::Type</a></div><div class="ttdoc">The instances of the Type class are immutable: once they are created, they are never changed.</div><div class="ttdef"><b>Definition:</b> <a href="Type_8h_source.html#l00045">Type.h:45</a></div></div>
<div class="ttc" id="aDenseMap_8h_html"><div class="ttname"><a href="DenseMap_8h.html">DenseMap.h</a></div></div>
<div class="ttc" id="aMips16ISelLowering_8cpp_html_a0acb682b8260ab1c60b918599864e2e5"><div class="ttname"><a href="Mips16ISelLowering_8cpp.html#a0acb682b8260ab1c60b918599864e2e5">T</a></div><div class="ttdeci">#define T</div><div class="ttdef"><b>Definition:</b> <a href="Mips16ISelLowering_8cpp_source.html#l00341">Mips16ISelLowering.cpp:341</a></div></div>
<div class="ttc" id="aclassllvm_1_1MapVector_html"><div class="ttname"><a href="classllvm_1_1MapVector.html">llvm::MapVector</a></div><div class="ttdoc">This class implements a map that also provides access to all stored values in a deterministic order.</div><div class="ttdef"><b>Definition:</b> <a href="MapVector_8h_source.html#l00037">MapVector.h:37</a></div></div>
<div class="ttc" id="aMachineIRBuilder_8h_html"><div class="ttname"><a href="MachineIRBuilder_8h.html">MachineIRBuilder.h</a></div></div>
<div class="ttc" id="aclassllvm_1_1SPIRV_1_1DTSortableEntry_html_a4f6a543ff45b3130dfb87511f600c394"><div class="ttname"><a href="classllvm_1_1SPIRV_1_1DTSortableEntry.html#a4f6a543ff45b3130dfb87511f600c394">llvm::SPIRV::DTSortableEntry::setIsGV</a></div><div class="ttdeci">void setIsGV(bool V)</div><div class="ttdef"><b>Definition:</b> <a href="SPIRVDuplicatesTracker_8h_source.html#l00048">SPIRVDuplicatesTracker.h:48</a></div></div>
<div class="ttc" id="aMD5_8cpp_html_a96d73bbd7af15cb1fc38c3f4a3bd82e9"><div class="ttname"><a href="MD5_8cpp.html#a96d73bbd7af15cb1fc38c3f4a3bd82e9">F</a></div><div class="ttdeci">#define F(x, y, z)</div><div class="ttdef"><b>Definition:</b> <a href="MD5_8cpp_source.html#l00055">MD5.cpp:55</a></div></div>
<div class="ttc" id="aclassllvm_1_1SPIRV_1_1DTSortableEntry_html"><div class="ttname"><a href="classllvm_1_1SPIRV_1_1DTSortableEntry.html">llvm::SPIRV::DTSortableEntry</a></div><div class="ttdef"><b>Definition:</b> <a href="SPIRVDuplicatesTracker_8h_source.html#l00031">SPIRVDuplicatesTracker.h:31</a></div></div>
<div class="ttc" id="aAMDGPULibCalls_8cpp_html_afecf1cc1292b07f57d343c0f4d682044"><div class="ttname"><a href="AMDGPULibCalls_8cpp.html#afecf1cc1292b07f57d343c0f4d682044">Arg</a></div><div class="ttdeci">amdgpu Simplify well known AMD library false FunctionCallee Value * Arg</div><div class="ttdef"><b>Definition:</b> <a href="AMDGPULibCalls_8cpp_source.html#l00186">AMDGPULibCalls.cpp:186</a></div></div>
<div class="ttc" id="aclassllvm_1_1SPIRVDuplicatesTrackerBase_html_a1fabb3f6b6435a52df7f3235848234a5"><div class="ttname"><a href="classllvm_1_1SPIRVDuplicatesTrackerBase.html#a1fabb3f6b6435a52df7f3235848234a5">llvm::SPIRVDuplicatesTrackerBase::find</a></div><div class="ttdeci">Register find(KeyTy V, const MachineFunction *MF) const</div><div class="ttdef"><b>Definition:</b> <a href="SPIRVDuplicatesTracker_8h_source.html#l00084">SPIRVDuplicatesTracker.h:84</a></div></div>
<div class="ttc" id="aclassllvm_1_1SPIRVGeneralDuplicatesTracker_html_a78b39748f710daaa62e9c6592a3f8310"><div class="ttname"><a href="classllvm_1_1SPIRVGeneralDuplicatesTracker.html#a78b39748f710daaa62e9c6592a3f8310">llvm::SPIRVGeneralDuplicatesTracker::find</a></div><div class="ttdeci">Register find(const Constant *C, const MachineFunction *MF)</div><div class="ttdef"><b>Definition:</b> <a href="SPIRVDuplicatesTracker_8h_source.html#l00157">SPIRVDuplicatesTracker.h:157</a></div></div>
<div class="ttc" id="aBuiltinGCs_8cpp_html_a6742d2e0a668baf1196ec69e158d5f15"><div class="ttname"><a href="BuiltinGCs_8cpp.html#a6742d2e0a668baf1196ec69e158d5f15">E</a></div><div class="ttdeci">static GCRegistry::Add&lt; CoreCLRGC &gt; E(&quot;coreclr&quot;, &quot;CoreCLR-compatible GC&quot;)</div></div>
<div class="ttc" id="aSPIRVBaseInfo_8h_html"><div class="ttname"><a href="SPIRVBaseInfo_8h.html">SPIRVBaseInfo.h</a></div></div>
<div class="ttc" id="aREADME__ALTIVEC_8txt_html_a9aacd9146afe44bf656cd664e2a88c8c"><div class="ttname"><a href="README__ALTIVEC_8txt.html#a9aacd9146afe44bf656cd664e2a88c8c">C</a></div><div class="ttdeci">(vector float) vec_cmpeq(*A, *B) C</div><div class="ttdef"><b>Definition:</b> <a href="README__ALTIVEC_8txt_source.html#l00086">README_ALTIVEC.txt:86</a></div></div>
<div class="ttc" id="aclassllvm_1_1MachineModuleInfo_html"><div class="ttname"><a href="classllvm_1_1MachineModuleInfo.html">llvm::MachineModuleInfo</a></div><div class="ttdoc">This class contains meta information specific to a module.</div><div class="ttdef"><b>Definition:</b> <a href="MachineModuleInfo_8h_source.html#l00074">MachineModuleInfo.h:74</a></div></div>
<div class="ttc" id="aclassllvm_1_1SPIRVGeneralDuplicatesTracker_html_a82454a124637b2246fd1c34b75360ce9"><div class="ttname"><a href="classllvm_1_1SPIRVGeneralDuplicatesTracker.html#a82454a124637b2246fd1c34b75360ce9">llvm::SPIRVGeneralDuplicatesTracker::find</a></div><div class="ttdeci">Register find(const Argument *Arg, const MachineFunction *MF)</div><div class="ttdef"><b>Definition:</b> <a href="SPIRVDuplicatesTracker_8h_source.html#l00169">SPIRVDuplicatesTracker.h:169</a></div></div>
<div class="ttc" id="aclassllvm_1_1SPIRV_1_1DTSortableEntry_html_aea04703e6f74d6d5ff75035f654c14ae"><div class="ttname"><a href="classllvm_1_1SPIRV_1_1DTSortableEntry.html#aea04703e6f74d6d5ff75035f654c14ae">llvm::SPIRV::DTSortableEntry::setIsFunc</a></div><div class="ttdeci">void setIsFunc(bool V)</div><div class="ttdef"><b>Definition:</b> <a href="SPIRVDuplicatesTracker_8h_source.html#l00047">SPIRVDuplicatesTracker.h:47</a></div></div>
<div class="ttc" id="aclassllvm_1_1SPIRVDuplicatesTrackerBase_html_a953749b34d26ba730fe3e4f64611aab4"><div class="ttname"><a href="classllvm_1_1SPIRVDuplicatesTrackerBase.html#a953749b34d26ba730fe3e4f64611aab4">llvm::SPIRVDuplicatesTrackerBase::getAllUses</a></div><div class="ttdeci">const StorageTy &amp; getAllUses() const</div><div class="ttdef"><b>Definition:</b> <a href="SPIRVDuplicatesTracker_8h_source.html#l00095">SPIRVDuplicatesTracker.h:95</a></div></div>
<div class="ttc" id="aclassllvm_1_1Constant_html"><div class="ttname"><a href="classllvm_1_1Constant.html">llvm::Constant</a></div><div class="ttdoc">This is an important base class in LLVM.</div><div class="ttdef"><b>Definition:</b> <a href="Constant_8h_source.html#l00041">Constant.h:41</a></div></div>
<div class="ttc" id="aREADME-X86-64_8txt_html_aac3add0badd5c39bebc02df0b5d9bdcf"><div class="ttname"><a href="README-X86-64_8txt.html#aac3add0badd5c39bebc02df0b5d9bdcf">type</a></div><div class="ttdeci">AMD64 Optimization Manual has some nice information about optimizing integer multiplication by a constant How much of it applies to Intel s X86 implementation There are definite trade offs to xmm0 cvttss2siq rdx jb L3 subss xmm0 rax cvttss2siq rdx xorq rdx rax ret instead of xmm1 cvttss2siq rcx movaps xmm2 subss xmm2 cvttss2siq rax rdx xorq rax ucomiss xmm0 cmovb rax ret Seems like the jb branch has high likelihood of being taken It would have saved a few instructions It s not possible to reference and DH registers in an instruction requiring REX prefix divb and mulb both produce results in AH If isel emits a CopyFromReg which gets turned into a movb and that can be allocated a r8b r15b To get around isel emits a CopyFromReg from AX and then right shift it down by and truncate it It s not pretty but it works We need some register allocation magic to make the hack go which would often require a callee saved register Callees usually need to keep this value live for most of their body so it doesn t add a significant burden on them We currently implement this in however this is suboptimal because it means that it would be quite awkward to implement the optimization for callers A better implementation would be to relax the LLVM IR rules for sret arguments to allow a function with an sret argument to have a non void return type</div><div class="ttdef"><b>Definition:</b> <a href="README-X86-64_8txt_source.html#l00070">README-X86-64.txt:70</a></div></div>
<div class="ttc" id="aclassllvm_1_1MapVector_html_a6b0c3e15c351ba9682837c29b0a141b6"><div class="ttname"><a href="classllvm_1_1MapVector.html#a6b0c3e15c351ba9682837c29b0a141b6">llvm::MapVector::find</a></div><div class="ttdeci">iterator find(const KeyT &amp;Key)</div><div class="ttdef"><b>Definition:</b> <a href="MapVector_8h_source.html#l00148">MapVector.h:148</a></div></div>
<div class="ttc" id="aclassllvm_1_1SPIRV_1_1DTSortableEntry_html_a3de1d6a99a6892c44d1ba67e6276536b"><div class="ttname"><a href="classllvm_1_1SPIRV_1_1DTSortableEntry.html#a3de1d6a99a6892c44d1ba67e6276536b">llvm::SPIRV::DTSortableEntry::getIsGV</a></div><div class="ttdeci">bool getIsGV() const</div><div class="ttdef"><b>Definition:</b> <a href="SPIRVDuplicatesTracker_8h_source.html#l00046">SPIRVDuplicatesTracker.h:46</a></div></div>
<div class="ttc" id="aMachineModuleInfo_8h_html"><div class="ttname"><a href="MachineModuleInfo_8h.html">MachineModuleInfo.h</a></div></div>
<div class="ttc" id="aclassllvm_1_1MachineFunction_html"><div class="ttname"><a href="classllvm_1_1MachineFunction.html">llvm::MachineFunction</a></div><div class="ttdef"><b>Definition:</b> <a href="MachineFunction_8h_source.html#l00257">MachineFunction.h:257</a></div></div>
<div class="ttc" id="aclassllvm_1_1SPIRVGeneralDuplicatesTracker_html"><div class="ttname"><a href="classllvm_1_1SPIRVGeneralDuplicatesTracker.html">llvm::SPIRVGeneralDuplicatesTracker</a></div><div class="ttdef"><b>Definition:</b> <a href="SPIRVDuplicatesTracker_8h_source.html#l00110">SPIRVDuplicatesTracker.h:110</a></div></div>
<div class="ttc" id="aclassllvm_1_1Register_html"><div class="ttname"><a href="classllvm_1_1Register.html">llvm::Register</a></div><div class="ttdoc">Wrapper class representing virtual and physical registers.</div><div class="ttdef"><b>Definition:</b> <a href="Register_8h_source.html#l00019">Register.h:19</a></div></div>
<div class="ttc" id="aclassllvm_1_1MapVector_html_a0881334358ff6ff7ff8cea5562c7988e"><div class="ttname"><a href="classllvm_1_1MapVector.html#a0881334358ff6ff7ff8cea5562c7988e">llvm::MapVector::end</a></div><div class="ttdeci">iterator end()</div><div class="ttdef"><b>Definition:</b> <a href="MapVector_8h_source.html#l00072">MapVector.h:72</a></div></div>
<div class="ttc" id="aclassllvm_1_1SPIRV_1_1DTSortableEntry_html_a7d3ba0de07a3d29ca92d1dc878786005"><div class="ttname"><a href="classllvm_1_1SPIRV_1_1DTSortableEntry.html#a7d3ba0de07a3d29ca92d1dc878786005">llvm::SPIRV::DTSortableEntry::getIsFunc</a></div><div class="ttdeci">bool getIsFunc() const</div><div class="ttdef"><b>Definition:</b> <a href="SPIRVDuplicatesTracker_8h_source.html#l00045">SPIRVDuplicatesTracker.h:45</a></div></div>
<div class="ttc" id="aclassllvm_1_1SPIRVGeneralDuplicatesTracker_html_adf0a309070aae6e3cb7a836280ef3891"><div class="ttname"><a href="classllvm_1_1SPIRVGeneralDuplicatesTracker.html#adf0a309070aae6e3cb7a836280ef3891">llvm::SPIRVGeneralDuplicatesTracker::find</a></div><div class="ttdeci">Register find(const GlobalVariable *GV, const MachineFunction *MF)</div><div class="ttdef"><b>Definition:</b> <a href="SPIRVDuplicatesTracker_8h_source.html#l00161">SPIRVDuplicatesTracker.h:161</a></div></div>
<div class="ttc" id="aclassllvm_1_1SPIRVGeneralDuplicatesTracker_html_a09c9e05099fe49ee9feff5816194d7ba"><div class="ttname"><a href="classllvm_1_1SPIRVGeneralDuplicatesTracker.html#a09c9e05099fe49ee9feff5816194d7ba">llvm::SPIRVGeneralDuplicatesTracker::find</a></div><div class="ttdeci">Register find(const Function *F, const MachineFunction *MF)</div><div class="ttdef"><b>Definition:</b> <a href="SPIRVDuplicatesTracker_8h_source.html#l00165">SPIRVDuplicatesTracker.h:165</a></div></div>
<div class="ttc" id="aclassllvm_1_1SPIRVGeneralDuplicatesTracker_html_a48c03695bf1ff98f5ecb146f9c37f796"><div class="ttname"><a href="classllvm_1_1SPIRVGeneralDuplicatesTracker.html#a48c03695bf1ff98f5ecb146f9c37f796">llvm::SPIRVGeneralDuplicatesTracker::add</a></div><div class="ttdeci">void add(const Function *F, const MachineFunction *MF, Register R)</div><div class="ttdef"><b>Definition:</b> <a href="SPIRVDuplicatesTracker_8h_source.html#l00145">SPIRVDuplicatesTracker.h:145</a></div></div>
<div class="ttc" id="aRustDemangle_8cpp_html_a103d8cfe62c1651cd70e181746f8a840"><div class="ttname"><a href="RustDemangle_8cpp.html#a103d8cfe62c1651cd70e181746f8a840">isValid</a></div><div class="ttdeci">static bool isValid(const char C)</div><div class="ttdoc">Returns true if C is a valid mangled character: &lt;0-9a-zA-Z_&gt;.</div><div class="ttdef"><b>Definition:</b> <a href="RustDemangle_8cpp_source.html#l00187">RustDemangle.cpp:187</a></div></div>
<div class="ttc" id="aclassllvm_1_1SPIRVGeneralDuplicatesTracker_html_a015a8c18b95051f0ecb27a12f0f70f03"><div class="ttname"><a href="classllvm_1_1SPIRVGeneralDuplicatesTracker.html#a015a8c18b95051f0ecb27a12f0f70f03">llvm::SPIRVGeneralDuplicatesTracker::add</a></div><div class="ttdeci">void add(const GlobalVariable *GV, const MachineFunction *MF, Register R)</div><div class="ttdef"><b>Definition:</b> <a href="SPIRVDuplicatesTracker_8h_source.html#l00141">SPIRVDuplicatesTracker.h:141</a></div></div>
<div class="ttc" id="aclassllvm_1_1SPIRVDuplicatesTrackerBase_html"><div class="ttname"><a href="classllvm_1_1SPIRVDuplicatesTrackerBase.html">llvm::SPIRVDuplicatesTrackerBase</a></div><div class="ttdef"><b>Definition:</b> <a href="SPIRVDuplicatesTracker_8h_source.html#l00055">SPIRVDuplicatesTracker.h:55</a></div></div>
<div class="ttc" id="aclassllvm_1_1SPIRVDuplicatesTrackerBase_html_a2d0faaaf8bc4f2e716afcc6451136f16"><div class="ttname"><a href="classllvm_1_1SPIRVDuplicatesTrackerBase.html#a2d0faaaf8bc4f2e716afcc6451136f16">llvm::SPIRVDuplicatesTrackerBase::StorageTy</a></div><div class="ttdeci">MapVector&lt; KeyTy, SPIRV::DTSortableEntry &gt; StorageTy</div><div class="ttdef"><b>Definition:</b> <a href="SPIRVDuplicatesTracker_8h_source.html#l00060">SPIRVDuplicatesTracker.h:60</a></div></div>
<div class="ttc" id="aclassllvm_1_1SPIRVGeneralDuplicatesTracker_html_a8762d8f7e5ac9382e451a48bb172044c"><div class="ttname"><a href="classllvm_1_1SPIRVGeneralDuplicatesTracker.html#a8762d8f7e5ac9382e451a48bb172044c">llvm::SPIRVGeneralDuplicatesTracker::add</a></div><div class="ttdeci">void add(const Argument *Arg, const MachineFunction *MF, Register R)</div><div class="ttdef"><b>Definition:</b> <a href="SPIRVDuplicatesTracker_8h_source.html#l00149">SPIRVDuplicatesTracker.h:149</a></div></div>
<div class="ttc" id="aclassllvm_1_1SPIRV_1_1DTSortableEntry_html_a36eda54ccefcdb934ff950b4bf09146d"><div class="ttname"><a href="classllvm_1_1SPIRV_1_1DTSortableEntry.html#a36eda54ccefcdb934ff950b4bf09146d">llvm::SPIRV::DTSortableEntry::getDeps</a></div><div class="ttdeci">const SmallVector&lt; DTSortableEntry *, 2 &gt; &amp; getDeps() const</div><div class="ttdef"><b>Definition:</b> <a href="SPIRVDuplicatesTracker_8h_source.html#l00050">SPIRVDuplicatesTracker.h:50</a></div></div>
<div class="ttc" id="aclassllvm_1_1SPIRVDuplicatesTracker_html"><div class="ttname"><a href="classllvm_1_1SPIRVDuplicatesTracker.html">llvm::SPIRVDuplicatesTracker</a></div><div class="ttdef"><b>Definition:</b> <a href="SPIRVDuplicatesTracker_8h_source.html#l00108">SPIRVDuplicatesTracker.h:108</a></div></div>
<div class="ttc" id="aclassllvm_1_1SPIRVGeneralDuplicatesTracker_html_ae192e9fc809a895a53554ce4a9ca6b49"><div class="ttname"><a href="classllvm_1_1SPIRVGeneralDuplicatesTracker.html#ae192e9fc809a895a53554ce4a9ca6b49">llvm::SPIRVGeneralDuplicatesTracker::getTypes</a></div><div class="ttdeci">const SPIRVDuplicatesTracker&lt; Type &gt; * getTypes()</div><div class="ttdef"><b>Definition:</b> <a href="SPIRVDuplicatesTracker_8h_source.html#l00173">SPIRVDuplicatesTracker.h:173</a></div></div>
<div class="ttc" id="aclassllvm_1_1SPIRVGeneralDuplicatesTracker_html_acc22a8d7856816cea3af64e38340a7f7"><div class="ttname"><a href="classllvm_1_1SPIRVGeneralDuplicatesTracker.html#acc22a8d7856816cea3af64e38340a7f7">llvm::SPIRVGeneralDuplicatesTracker::add</a></div><div class="ttdeci">void add(const Type *T, const MachineFunction *MF, Register R)</div><div class="ttdef"><b>Definition:</b> <a href="SPIRVDuplicatesTracker_8h_source.html#l00133">SPIRVDuplicatesTracker.h:133</a></div></div>
<div class="ttc" id="aclassllvm_1_1SPIRVGeneralDuplicatesTracker_html_aafe923179dcbb71d43036ba5b8f2a1c5"><div class="ttname"><a href="classllvm_1_1SPIRVGeneralDuplicatesTracker.html#aafe923179dcbb71d43036ba5b8f2a1c5">llvm::SPIRVGeneralDuplicatesTracker::add</a></div><div class="ttdeci">void add(const Constant *C, const MachineFunction *MF, Register R)</div><div class="ttdef"><b>Definition:</b> <a href="SPIRVDuplicatesTracker_8h_source.html#l00137">SPIRVDuplicatesTracker.h:137</a></div></div>
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated on Tue Sep 20 2022 07:48:09 for LLVM by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.17
</small></address>
</body>
</html>
